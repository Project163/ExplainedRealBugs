<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:52:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4220] After loading XSDs from links in WADL, JAX-RS get all for all resources fail with 400</title>
                <link>https://issues.apache.org/jira/browse/CXF-4220</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;We use a CustomCXFNonSpringJaxrsServlet with one overriding method in order to use our hand written WADL.&lt;br/&gt;
   @Override&lt;br/&gt;
   protected void setSchemasLocations(JAXRSServerFactoryBean bean, ServletConfig servletConfig)&lt;br/&gt;
   {&lt;br/&gt;
      super.setSchemasLocations(bean, servletConfig);&lt;/p&gt;

&lt;p&gt;      // Set the WADL document location&lt;br/&gt;
      if(servletConfig.getInitParameter(JAXRSUtils.DOC_LOCATION) != null)&lt;/p&gt;
      {
         bean.setDocLocation(servletConfig.getInitParameter(JAXRSUtils.DOC_LOCATION));
      }
&lt;p&gt;   }&lt;/p&gt;

&lt;p&gt;In the web.xml of the user resource, the XSDs are referenced as follows - &lt;br/&gt;
        &amp;lt;init-param&amp;gt;&lt;br/&gt;
            &amp;lt;param-name&amp;gt;jaxrs.schemaLocations&amp;lt;/param-name&amp;gt;&lt;br/&gt;
            &amp;lt;param-value&amp;gt;&lt;br/&gt;
                classpath:schemas/xml.xsd&lt;br/&gt;
                classpath:schemas/atom.xsd&lt;br/&gt;
                classpath:schemas/user.xsd&lt;br/&gt;
                classpath:schemas/user-role.xsd&lt;br/&gt;
            &amp;lt;/param-value&amp;gt;&lt;br/&gt;
        &amp;lt;/init-param&amp;gt;&lt;/p&gt;

&lt;p&gt;In the wadl file, the grammar section is as follows - &lt;br/&gt;
  &amp;lt;grammars&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;xml.xsd&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;atom.xsd&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;user.xsd&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;user-role.xsd&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;/grammars&amp;gt;&lt;/p&gt;

&lt;p&gt;Here are the steps to reproduce the error - &lt;/p&gt;

&lt;p&gt;1. Verify get all and get a single resource work for all resources including user.&lt;br/&gt;
2. Access user wadl from &lt;a href=&quot;https://server:port/api/rest/users?_wadl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://server:port/api/rest/users?_wadl&lt;/a&gt; successfully but the grammar section is changed to -&lt;br/&gt;
  &amp;lt;grammars&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;https://server:8443/api/rest/users//xml.xsd&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;https://server:8443/api/rest/users//atom.xsd&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;https://server:8443/api/rest/users//user.xsd&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;include href=&quot;https://server:8443/api/rest/users//user-role.xsd&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;/grammars&amp;gt;&lt;br/&gt;
3. Repeat step 1. Result is good.&lt;br/&gt;
4. Click the first link and view xml.xsd from a browser. Note xml.xsd is availale from the internet and does not have a schemaLocation tag. &lt;br/&gt;
5. Repeat step 1. Result is good.&lt;br/&gt;
6. Click the link to atom.xsd or any of rest of the links and the XSD loads correctly. Note all those XSDs are only available in the classpath of user.war.&lt;br/&gt;
   Below is an excerpt of how schema is referenced in the XSD -&lt;br/&gt;
   &amp;lt;xs:import namespace=&quot;urn:api:rest:user-role&quot; schemaLocation=&quot;https://server:8443/api/rest/users//&quot; /&amp;gt;&lt;br/&gt;
   &amp;lt;xs:import namespace=&quot;http://www.w3.org/2005/Atom&quot; schemaLocation=&quot;https://server:8443/api/rest/users//&quot; /&amp;gt;&lt;br/&gt;
7. Do a get all request using &lt;a href=&quot;https://server:8443/api/rest/users&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://server:8443/api/rest/users&lt;/a&gt; and get the following error -&lt;br/&gt;
   400: Bad Request&lt;br/&gt;
   org.xml.sax.SAXParseException: Premature end of file.&lt;br/&gt;
8. Do a get all request to other resources and get the same 400.&lt;br/&gt;
9. Restart JBoss and problem goes away.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12549183">CXF-4220</key>
            <summary>After loading XSDs from links in WADL, JAX-RS get all for all resources fail with 400</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="joanneli77">Joanne Kubischta</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Apr 2012 16:35:25 +0000</created>
                <updated>Fri, 6 Apr 2012 15:57:08 +0000</updated>
                            <resolved>Fri, 6 Apr 2012 15:57:08 +0000</resolved>
                                    <version>2.5.2</version>
                                    <fixVersion>2.5.3</fixVersion>
                    <fixVersion>2.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13245096" author="sergey_beryozkin" created="Tue, 3 Apr 2012 09:59:11 +0000"  >&lt;p&gt;r1308794 in 2.5.3-SNAPSHOT should fix it. Please verify.&lt;/p&gt;

&lt;p&gt;The problem seemed to do with WADLGenerator creating bogus references for empty schemaLocations, now the empty references are ignored.&lt;br/&gt;
I also added a &quot;jaxrs.docLocation&quot; servlet parameter for you to avoid overriding the CXF servlet&lt;/p&gt;

</comment>
                            <comment id="13246434" author="joanneli77" created="Wed, 4 Apr 2012 16:30:16 +0000"  >&lt;p&gt;Thank you. I am eager to test the fix.&lt;/p&gt;

&lt;p&gt;But I don&apos;t see this defect in the release notes in the latest build at &lt;a href=&quot;http://repository.apache.org/snapshots/org/apache/cxf/apache-cxf/2.5.3-SNAPSHOT/apache-cxf-2.5.3-20120403.080549-37.zip&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repository.apache.org/snapshots/org/apache/cxf/apache-cxf/2.5.3-SNAPSHOT/apache-cxf-2.5.3-20120403.080549-37.zip&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also the timestamp of the latest build Tue Apr 03 09:15:57 UTC 2012 is ealier than your checkin. &lt;/p&gt;
</comment>
                            <comment id="13246611" author="sergey_beryozkin" created="Wed, 4 Apr 2012 19:12:45 +0000"  >&lt;p&gt;The release notes will be updated in time for the release, after this JIRA gets resolved.&lt;br/&gt;
I&apos;ve restarted the &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-2&quot; title=&quot;Complete JAX-WS frontend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-2&quot;&gt;&lt;del&gt;CXF-2&lt;/del&gt;&lt;/a&gt;.5-deploy at Jenkins&lt;/p&gt;</comment>
                            <comment id="13248429" author="joanneli77" created="Fri, 6 Apr 2012 15:57:08 +0000"  >&lt;p&gt;Verified problems are fixed.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>234174</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 33 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b7en:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63312</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>