<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:33:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1645] ResourceInjector fails to inject into (Spring) proxies if resource to be in injected is subclassed</title>
                <link>https://issues.apache.org/jira/browse/CXF-1645</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If the target is a proxy ResourceInjector tries to resolve an appropriate setter method for the resource using &lt;/p&gt;

&lt;p&gt;  Method targetMethod = getTarget().getClass().getMethod(method.getName(), new Class[]&lt;/p&gt;
{resource.getClass()}
&lt;p&gt;);&lt;br/&gt;
  targetMethod.invoke(getTarget(), resource);&lt;/p&gt;

&lt;p&gt;This fails if the resource has been subclassed because getMethod() (still) does only exact matches (see &lt;a href=&quot;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4287725&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4287725&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;This is (for example) the reason why injecting the WebServiceContext into a (Spring) proxy does not work: The real implementation WebServiceContextImpl is always a subclass (see thread &lt;a href=&quot;http://www.mail-archive.com/cxf-user@incubator.apache.org/msg03050.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mail-archive.com/cxf-user@incubator.apache.org/msg03050.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;As a solutions, the ResourceInjector might implement it&apos;s own matching algorithm or e. g. use Spring&apos;s MethodInvoker instead which already contains such an algorithm:&lt;/p&gt;

&lt;p&gt;  MethodInvoker targetInvoker = new MethodInvoker();&lt;br/&gt;
  targetInvoker.setTargetObject(getTarget());&lt;br/&gt;
  targetInvoker.setTargetMethod(method.getName());&lt;br/&gt;
  targetInvoker.setArguments(new Object[]&lt;/p&gt;
{resource}
&lt;p&gt;);&lt;br/&gt;
  targetInvoker.prepare();&lt;br/&gt;
  targetInvoker.invoke();&lt;/p&gt;</description>
                <environment></environment>
        <key id="12398050">CXF-1645</key>
            <summary>ResourceInjector fails to inject into (Spring) proxies if resource to be in injected is subclassed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="benneke">Andreas Benneke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jun 2008 13:06:58 +0000</created>
                <updated>Thu, 3 Jul 2008 17:19:34 +0000</updated>
                            <resolved>Fri, 13 Jun 2008 15:59:54 +0000</resolved>
                                    <version>2.1</version>
                    <version>2.0.6</version>
                    <version>2.1.1</version>
                    <version>2.0.7</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.0.7</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12604211" author="benneke" created="Wed, 11 Jun 2008 13:11:55 +0000"  >&lt;p&gt;This patch adds the proposed change to the ResourceInjector and extends the unit test to cover the specified case .&lt;/p&gt;

&lt;p&gt;(Note: the test fails with the unpatched ResourceInjector)&lt;/p&gt;</comment>
                            <comment id="12604336" author="dkulp" created="Wed, 11 Jun 2008 21:01:25 +0000"  >
&lt;p&gt;We cannot take a dependency on Spring at this level as this can be used in non-spring cases.&lt;/p&gt;

&lt;p&gt;However, it&apos;s rather simple to get this to work as we only care about the public methods that have only a single parameter so something like:&lt;/p&gt;

&lt;p&gt;           for (Method m : class1.getMethods()) {&lt;br/&gt;
                if (m.getName().equals(name)&lt;br/&gt;
                    &amp;amp;&amp;amp; m.getParameterTypes().length == 1&lt;br/&gt;
                    &amp;amp;&amp;amp; m.getParameterTypes()&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.isInstance(resource)) &lt;/p&gt;
{
                    return m;
                }
&lt;p&gt;            }&lt;/p&gt;

&lt;p&gt;Should work.   I&apos;ll get this committed shortly.&lt;/p&gt;
</comment>
                            <comment id="12604443" author="benneke" created="Thu, 12 Jun 2008 08:24:38 +0000"  >&lt;p&gt;Perfect, thanks a lot for the quick response! :-D&lt;/p&gt;</comment>
                            <comment id="12604769" author="benneke" created="Fri, 13 Jun 2008 08:21:42 +0000"  >&lt;p&gt;I&apos;ve been thinking a bit about our solution(s) and think it might fail, if the method in question is overloaded. The for-loop (and even my spring solution) might end up calling a method with the wrong signature (which was not annotated). This might lead to unexpected results if the methods are doing different things...&lt;/p&gt;

&lt;p&gt;What about this (going back to the original implementation):&lt;/p&gt;

&lt;p&gt;  Method targetMethod = getTarget().getClass().getMethod(method.getName(), method.getParameterTypes());&lt;br/&gt;
  targetMethod.invoke(getTarget(), resource); &lt;/p&gt;

&lt;p&gt;Any thoughts?&lt;/p&gt;</comment>
                            <comment id="12604903" author="dkulp" created="Fri, 13 Jun 2008 14:50:40 +0000"  >
&lt;p&gt;You&apos;re right.   That should work just as well without the loop.   I&apos;ll definitely change that.   Thanks!&lt;/p&gt;


</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12379253">CXF-1074</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12383828" name="ResourceInjector.patch" size="8032" author="benneke" created="Wed, 11 Jun 2008 13:11:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112434</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0syi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>167067</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>