<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:34:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8062] MessageContext.HTTP_RESPONSE_CODE cannot be obtained if response code is not 4xx</title>
                <link>https://issues.apache.org/jira/browse/CXF-8062</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;After a web service request, we do this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
responseCode = (&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;) ((BindingProvider) webServicePort).getResponseContext().get(MessageContext.HTTP_RESPONSE_CODE);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;, to extract the Http response code, but we noticed that this only works in our case with 200 response codes from the server.&lt;/p&gt;

&lt;p&gt;From what I could gather, it seems that the response context is not populated in cases where a 200 is not given. Example:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12973142/12973142_401.PNG&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;As you can see only two instances of SCOPES are in the response context. When we receive a 200 from the web service, the response context contains this:&lt;/p&gt;

&lt;p&gt; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12973141/12973141_200.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;, which although you can&apos;t see it in the screenshot, it contains the HTTP_RESPONSE_CODE value, which it&apos;s the only thing we need, because we need to do some additional steps depending on that response code afterwards.&lt;/p&gt;

&lt;p&gt;Right now, we&apos;re using a finicky way to obtain such http response code... the exception is a WebServiceException which contains a HTTPException which has the response code given by the server. We&apos;d like to have a more reliable way since those exception signatures could just change over time if we update libraries / java versions we guess.&lt;/p&gt;

&lt;p&gt;Here&apos;s the CXF dependencies in our project:&lt;br/&gt;
 &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12973140/12973140_cxf_dependencies.PNG&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;Let us know if you need to know about anything else.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13242107">CXF-8062</key>
            <summary>MessageContext.HTTP_RESPONSE_CODE cannot be obtained if response code is not 4xx</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="tomasedata">Tom&#225;s Garc&#237;a</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jun 2019 07:47:08 +0000</created>
                <updated>Wed, 14 Aug 2019 13:29:58 +0000</updated>
                            <resolved>Tue, 2 Jul 2019 18:57:25 +0000</resolved>
                                    <version>3.3.2</version>
                                    <fixVersion>3.2.10</fixVersion>
                    <fixVersion>3.3.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16875050" author="ffang" created="Fri, 28 Jun 2019 16:41:33 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomasedata&quot; class=&quot;user-hover&quot; rel=&quot;tomasedata&quot;&gt;tomasedata&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I just committed to demonstrate that MessageContext.HTTP_RESPONSE_CODE can be obtained if response code is not 200&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cxf/commit/d4a28ed9d3d1f136263565516accfae9366c41b2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/commit/d4a28ed9d3d1f136263565516accfae9366c41b2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So if you can append a testcase project which can reproduce the issue you described, that would be very helpful.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Freeman&lt;/p&gt;
</comment>
                            <comment id="16875437" author="tomasedata" created="Sat, 29 Jun 2019 10:05:35 +0000"  >&lt;p&gt;Thank you for answering so fast!&lt;/p&gt;

&lt;p&gt;I produced a code example. Just run it with: mvn test.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12973238/12973238_cxfresponsecode.zip&quot; title=&quot;cxfresponsecode.zip attached to CXF-8062&quot;&gt;cxfresponsecode.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; &lt;/p&gt;

&lt;p&gt;Let me know if there&apos;s anything else I could do. &lt;/p&gt;

&lt;p&gt;Thanks. &lt;/p&gt;</comment>
                            <comment id="16877116" author="ffang" created="Tue, 2 Jul 2019 16:24:52 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tomasedata&quot; class=&quot;user-hover&quot; rel=&quot;tomasedata&quot;&gt;tomasedata&lt;/a&gt; for the reproducer, I will take a close look.&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="16877244" author="ffang" created="Tue, 2 Jul 2019 18:53:47 +0000"  >&lt;p&gt;OK, for 4xx return code(just like in your testcase), CXF client side will throw HTTPException and not set return code. Anyway, IMO it&apos;s no harm to set 4xx return code as well. The fix is coming soon.&lt;/p&gt;

&lt;p&gt;Freeman &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12973141" name="200.png" size="54487" author="tomasedata" created="Fri, 28 Jun 2019 07:43:38 +0000"/>
                            <attachment id="12973142" name="401.PNG" size="11183" author="tomasedata" created="Fri, 28 Jun 2019 07:42:42 +0000"/>
                            <attachment id="12973140" name="cxf_dependencies.PNG" size="19518" author="tomasedata" created="Fri, 28 Jun 2019 07:44:58 +0000"/>
                            <attachment id="12973238" name="cxfresponsecode.zip" size="24898" author="tomasedata" created="Sat, 29 Jun 2019 10:05:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 20 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z046uo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>