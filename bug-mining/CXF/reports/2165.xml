<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:08:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5592] HttpServletRequestFilter in RequestDispatcherProvider do not returns correct RequestURI path</title>
                <link>https://issues.apache.org/jira/browse/CXF-5592</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I have set up RequestDispatcherProvider to redirect from OAuth 2.0 authorization service (implemented by AuthorizationCodeGrantService) to different JAX-RS service, both served by the same CXFServlet.&lt;br/&gt;
The problem is HttpServletRequestFilter in RequestDispatcherProvider do not returns correct RequestURI path - the context root path of the web application is missing. &lt;/p&gt;

&lt;p&gt;RequestURI is used then by HttpUtils to built JAX-RS service matching path and since the request URI is not correct, the service is not found.&lt;/p&gt;

&lt;p&gt;Configuration of request dispatcher is the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;dispatchProvider&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.jaxrs.provider.RequestDispatcherProvider&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;classResources&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;map&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.rs.security.oauth2.common.OAuthAuthorizationData&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;/oauth2/implicitauthorize&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/map&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;beanNames&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;map&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.cxf.rs.security.oauth2.common.OAuthAuthorizationData&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;data&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/map&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;logRedirects&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;true&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Comments:&lt;br/&gt;
&quot;rest&quot; is the name of the application (context root where the application is deployed)&lt;br/&gt;
&quot;/*&quot; is CXFServlet&apos;s URL pattern&lt;br/&gt;
&quot;/oauth2&quot; is the jaxrs:server address&lt;br/&gt;
&quot;/implicitauthorize&quot; is the path of the mentioned JAX-RS service where the redirect should go&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12698840">CXF-5592</key>
            <summary>HttpServletRequestFilter in RequestDispatcherProvider do not returns correct RequestURI path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="michal.sabo">Michal Sabo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Mar 2014 10:47:03 +0000</created>
                <updated>Fri, 11 Jul 2014 12:50:54 +0000</updated>
                            <resolved>Mon, 10 Mar 2014 14:00:52 +0000</resolved>
                                    <version>2.7.8</version>
                                    <fixVersion>2.7.11</fixVersion>
                    <fixVersion>3.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13920784" author="sergey_beryozkin" created="Wed, 5 Mar 2014 12:10:32 +0000"  >&lt;p&gt;Yes, I see why this is a valid issue. Typically the redirect is done to the resources which are not served by the same servlet.&lt;br/&gt;
But in your case you redirect to the service sharing the same context + servlet path.&lt;/p&gt;

&lt;p&gt;I think we need to add a boolean property to RequestDispatcherProvider telling it it should reuse the current context + servlet path&lt;/p&gt;</comment>
                            <comment id="13920967" author="sergey_beryozkin" created="Wed, 5 Mar 2014 15:40:10 +0000"  >&lt;p&gt;Got confused... it is to do with the wrong request URI, as you actually pointed out&lt;/p&gt;</comment>
                            <comment id="13920978" author="michal.sabo" created="Wed, 5 Mar 2014 15:45:03 +0000"  >&lt;p&gt;Now I am confused what do you actually mean by this comment.&lt;/p&gt;</comment>
                            <comment id="13921134" author="sergey_beryozkin" created="Wed, 5 Mar 2014 18:09:16 +0000"  >&lt;p&gt;The fix supporting your scenario is on the trunk and 2.7.x:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/4faeb62f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/4faeb62f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note this works if CXFServlet has a &quot;/*&quot; URL pattern.&lt;br/&gt;
You can use a &quot;servletPath&quot; property to support the redirection if you have the servlet listening on say &quot;/bar/*&quot;&lt;br/&gt;
but I think this should be optimized with a boolean flag I mentioned earlier, for users not to worry about the deployment details.&lt;/p&gt;

&lt;p&gt;I&apos;ll do few more enhancements as part of this JIRA later on&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13922440" author="michal.sabo" created="Thu, 6 Mar 2014 12:40:44 +0000"  >&lt;p&gt;I see your tests for this use case, however I was not successful with the servletPath property (and as from the HttpServletRequestFilter implementation can be seen, the servletPath property is not even used for building up the request URI - I have to note, that request URI as the spec says, should return full path together with the context path).&lt;/p&gt;

&lt;p&gt;Nevertheless, as you pointed out, the implementation should not depend on the deployment details, so the fix would be really welcome.&lt;/p&gt;</comment>
                            <comment id="13925339" author="sergey_beryozkin" created="Sun, 9 Mar 2014 21:57:52 +0000"  >&lt;p&gt;I think your specific issue has been resolved. If you check the trunk you will see the implementation does not even calculate the request URI now and lets the superclass do it.&lt;/p&gt;

&lt;p&gt;Please get the snapshots and retry or if you prefer, create a Maven based project for me to test.&lt;/p&gt;</comment>
                            <comment id="13925744" author="sergey_beryozkin" created="Mon, 10 Mar 2014 13:59:33 +0000"  >&lt;p&gt;Hi, &lt;br/&gt;
The provider has also been fixed now to support &apos;servletPath&apos; property and a new &apos;useCurrentServlet&apos; property has been introduced (so if you have a redirect to the same servlet with a non-empty pattern then setting a &apos;useCurrentServlet&apos; property will be preferred). As far as I understand, this last fix is not needed for your specific set up, given that you have a servlet listening on a wildcard pattern, the snapshots should already work for you.&lt;/p&gt;

&lt;p&gt;I think we have this issue completely resolved; &lt;br/&gt;
Cheers, Sergey&lt;/p&gt;</comment>
                            <comment id="13925745" author="sergey_beryozkin" created="Mon, 10 Mar 2014 14:00:52 +0000"  >&lt;p&gt;Please reopen and attach a test project if the snapshots do not work for you, &lt;br/&gt;
thanks, Sergey&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377187</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1szuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>