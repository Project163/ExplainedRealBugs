<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:39:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2530] FastInfoset Thread blocked</title>
                <link>https://issues.apache.org/jira/browse/CXF-2530</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;For a normal webservice all is fine &lt;/p&gt;

&lt;p&gt;but when we use Fastinfoset into cxf:bus&lt;br/&gt;
        &amp;lt;bean id=&quot;fastinfoset&quot; class=&quot;org.apache.cxf.feature.FastInfosetFeature&quot;/&amp;gt; &lt;br/&gt;
	&amp;lt;cxf:bus&amp;gt;&lt;br/&gt;
		&amp;lt;cxf:features&amp;gt;&lt;br/&gt;
			&amp;lt;cxf:logging /&amp;gt;&lt;br/&gt;
			&amp;lt;ref bean=&quot;fastinfoset&quot;/&amp;gt; &lt;br/&gt;
		&amp;lt;/cxf:features&amp;gt;&lt;br/&gt;
	&amp;lt;/cxf:bus&amp;gt;&lt;/p&gt;

&lt;p&gt;we have got thread blocked and the java application didn&apos;t respond any more&lt;/p&gt;

&lt;p&gt;just see the dump stacktrace&lt;/p&gt;

&lt;p&gt;&quot;http-0.0.0.0-8080-1&quot; daemon prio=10 tid=0x094c3400 nid=0x18f4 waiting for monitor entry &lt;span class=&quot;error&quot;&gt;&amp;#91;0x82e8d000&amp;#93;&lt;/span&gt;&lt;br/&gt;
   java.lang.Thread.State: BLOCKED (on object monitor)&lt;br/&gt;
	at java.lang.String.intern(Native Method)&lt;br/&gt;
	at com.sun.xml.fastinfoset.util.NamespaceContextImplementation.getNamespaceURI(NamespaceContextImplementation.java:75)&lt;br/&gt;
	at org.apache.cxf.interceptor.WrappedOutInterceptor.handleMessage(WrappedOutInterceptor.java:74)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;locked &amp;lt;0x8c615120&amp;gt; (a org.apache.cxf.phase.PhaseInterceptorChain)&lt;br/&gt;
	at org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:74)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;/li&gt;
	&lt;li&gt;locked &amp;lt;0x8c62af20&amp;gt; (a org.apache.cxf.phase.PhaseInterceptorChain)&lt;br/&gt;
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:104)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:99)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:452)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:196)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:220)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.AbstractCXFServlet.doPost(AbstractCXFServlet.java:153)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)&lt;br/&gt;
	at org.apache.cxf.transport.servlet.AbstractCXFServlet.service(AbstractCXFServlet.java:211)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Linux x86&lt;br/&gt;
java version &quot;1.6.0_16&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_16-b01)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 14.2-b01, mixed mode, sharing)&lt;br/&gt;
Jboss 5.1.0.GA&lt;/p&gt;</environment>
        <key id="12440306">CXF-2530</key>
            <summary>FastInfoset Thread blocked</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="keo">Gr&#233;goire A.</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Nov 2009 18:04:09 +0000</created>
                <updated>Fri, 13 Nov 2009 17:27:43 +0000</updated>
                            <resolved>Thu, 12 Nov 2009 10:54:20 +0000</resolved>
                                    <version>2.2.3</version>
                                    <fixVersion>2.2.4</fixVersion>
                                    <component>OtherDatabindings</component>
                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12775967" author="keo" created="Tue, 10 Nov 2009 18:06:13 +0000"  >&lt;p&gt;for your information&lt;/p&gt;

&lt;p&gt;when we throw an Exception, the webservice call works fine&lt;/p&gt;
</comment>
                            <comment id="12775970" author="dkulp" created="Tue, 10 Nov 2009 18:08:57 +0000"  >&lt;p&gt;&lt;br/&gt;
Are there any other related threads?     Having it blocked in   java.lang.String.intern(Native Method) is really scary.   That&apos;s a native method in the JDK.   No idea how that would occur.&lt;/p&gt;</comment>
                            <comment id="12775973" author="keo" created="Tue, 10 Nov 2009 18:11:28 +0000"  >&lt;p&gt;Just see&lt;br/&gt;
the full stacktrace&lt;/p&gt;</comment>
                            <comment id="12776037" author="dkulp" created="Tue, 10 Nov 2009 19:37:15 +0000"  >
&lt;p&gt;I logged a bug with the FastInfo set project:&lt;br/&gt;
&lt;a href=&quot;https://fi.dev.java.net/issues/show_bug.cgi?id=28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fi.dev.java.net/issues/show_bug.cgi?id=28&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what else we can do about it.   &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12776055" author="dkulp" created="Tue, 10 Nov 2009 20:04:10 +0000"  >
&lt;p&gt;Looking in deeper, while the code &quot;should work&quot; as is (and thus the FI bug), there are a couple workarounds:&lt;/p&gt;

&lt;p&gt;1) Is this a normal &quot;jaxws + jaxb&quot; service?  If so, make sure you have asm 2.x or 3.x on the classpath.   That should create the wrapper objects and avoid this code entirely.&lt;/p&gt;

&lt;p&gt;2) You can configure the databinding in the spring config to have a &quot;DeclaredNamespaceMappings&quot; property which is a Map&amp;lt;String,String&amp;gt; of ns -&amp;gt; prefix.   If there is a prefix defined for the namespace already, we don&apos;t need to try and calculate one.&lt;/p&gt;

&lt;p&gt;3) I&apos;m modifying the code slightly to pre-intern the prefixes we&apos;re trying to test.   Thus, maybe (not really sure), it may work better in this case as the strings would already be interned.   May perform slightly better as well (no stringbuilders created).&lt;/p&gt;</comment>
                            <comment id="12776466" author="dkulp" created="Wed, 11 Nov 2009 14:33:12 +0000"  >
&lt;p&gt;Any chance you can try any of the above solutions?   I also committed changes to CXF to hopefully help a little bit.   &lt;/p&gt;

&lt;p&gt;That said, the FastInfoset folks found some issues and have a new jar for testing.   Can you look at:&lt;br/&gt;
&lt;a href=&quot;https://fi.dev.java.net/issues/show_bug.cgi?id=28&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fi.dev.java.net/issues/show_bug.cgi?id=28&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Their new jar may also help.&lt;/p&gt;</comment>
                            <comment id="12776926" author="keo" created="Thu, 12 Nov 2009 09:31:51 +0000"  >&lt;p&gt;I will try it, just today&lt;/p&gt;</comment>
                            <comment id="12776938" author="keo" created="Thu, 12 Nov 2009 10:15:16 +0000"  >&lt;p&gt;Hi &lt;/p&gt;

&lt;p&gt;It seems it&apos;s works why new 2.2.4 cxf and 1.2.8 FIS&lt;/p&gt;</comment>
                            <comment id="12776946" author="keo" created="Thu, 12 Nov 2009 10:54:20 +0000"  >&lt;p&gt;it is works with 2.2.4 cxf and FIS 1.2.7&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12424481" name="FullStackTrace.log" size="33646" author="keo" created="Tue, 10 Nov 2009 18:11:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>113940</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ux9z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>