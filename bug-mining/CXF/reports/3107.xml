<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:26:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7453] WebFaultOutInterceptor calls getFaultSubcodes() even in case of SOAP1.1 faults</title>
                <link>https://issues.apache.org/jira/browse/CXF-7453</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When &lt;tt&gt;SOAPFaultException&lt;/tt&gt; is thrown in an application with SOAP 1.1, the &lt;tt&gt;WebFaultOutInterceptor&lt;/tt&gt; calls &lt;tt&gt;getFaultSubcodes&lt;/tt&gt; method relevant for SOAP 1.2 only and that leads to an error message logged in a server log in case of SOAP 1.1.&lt;/p&gt;

&lt;p&gt;Code snippet:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;cxf-3.1.10/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/interceptors/WebFaultOutInterceptor.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 88     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void handleMessage(Message message) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Fault {
 89         Fault f = (Fault)message.getContent(Exception.class);
 90         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (f == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
 91             &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
 92         }
 93         &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { 
 94             Throwable thr = f.getCause();
 95             SOAPFaultException sf = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
 96             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (thr &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; SOAPFaultException) {
 97                 sf = (SOAPFaultException)thr;
 98             } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (thr.getCause() &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; SOAPFaultException) {
 99                 sf = (SOAPFaultException)thr.getCause();              
100             }
101             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sf != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
102                 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (f &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; SoapFault) {
103                     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator&amp;lt;QName&amp;gt; it = CastUtils.&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(sf.getFault().getFaultSubcodes()); it.hasNext();) { &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;-- here
&lt;/span&gt;104                         ((SoapFault) f).addSubCode(it.next());
105                     }
106                 } 
107                 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sf.getFault().getFaultReasonLocales().hasNext()) {
108                     Locale lang = (Locale) sf.getFault()
109                            .getFaultReasonLocales().next();
110                     &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; convertedLang = lang.getLanguage();
111                     &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; country = lang.getCountry();
112                     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (country.length() &amp;gt; 0) {
113                         convertedLang = convertedLang + &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt; + country;
114                     }
115                     f.setLang(convertedLang);
116                 } 
117                 message.setContent(Exception.class, f);
118             } 
119         } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
120           &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; nothing;   // &amp;lt;- UnsupportedOperationException is swallowed here.
&lt;/span&gt;121         }
122         Throwable cause = f.getCause();
123         WebFault fault = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
124         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cause != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
125             fault = getWebFaultAnnotation(cause.getClass());      
126         }
 :
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Both SOAP1.1 and 1.2 the &quot;getFaultSubcodes()&quot; is called, but SOAP 1.1 does not have an attribute &quot;faultsubcoded&quot;  which leads to the message logged in the log.&lt;/p&gt;

&lt;p&gt;The &quot;getFaultSubcodes()&quot; should be called only in case of SOAP1.2 usage. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13089883">CXF-7453</key>
            <summary>WebFaultOutInterceptor calls getFaultSubcodes() even in case of SOAP1.1 faults</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="istudens">Ivo Studensky</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jul 2017 14:00:48 +0000</created>
                <updated>Tue, 28 Nov 2017 10:42:10 +0000</updated>
                            <resolved>Fri, 28 Jul 2017 17:27:01 +0000</resolved>
                                    <version>3.1.12</version>
                                    <fixVersion>3.0.15</fixVersion>
                    <fixVersion>3.1.13</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16100083" author="githubbot" created="Tue, 25 Jul 2017 14:09:16 +0000"  >&lt;p&gt;GitHub user istudens opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/296&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7453&quot; title=&quot;WebFaultOutInterceptor calls getFaultSubcodes() even in case of SOAP1.1 faults&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7453&quot;&gt;&lt;del&gt;CXF-7453&lt;/del&gt;&lt;/a&gt; check subCodes only in case of SOAP 1.2&lt;/p&gt;

&lt;p&gt;    Restricts handling SOAPFaultException subCodes  and reasonLocales only for SOAP 1.2 and skipping those in case of SOAP 1.1.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7453&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-7453&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/istudens/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/istudens/cxf&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7453&quot; title=&quot;WebFaultOutInterceptor calls getFaultSubcodes() even in case of SOAP1.1 faults&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7453&quot;&gt;&lt;del&gt;CXF-7453&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/296.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/296.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #296&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4381941b64afaebf2fde86152f383adb5a9c420f&lt;br/&gt;
Author: Ivo Studensky &amp;lt;istudens@redhat.com&amp;gt;&lt;br/&gt;
Date:   2017-07-25T14:04:34Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7453&quot; title=&quot;WebFaultOutInterceptor calls getFaultSubcodes() even in case of SOAP1.1 faults&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7453&quot;&gt;&lt;del&gt;CXF-7453&lt;/del&gt;&lt;/a&gt; check subCodes only in case of SOAP 1.2&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16105135" author="githubbot" created="Fri, 28 Jul 2017 15:46:38 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/296&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16105151" author="githubbot" created="Fri, 28 Jul 2017 15:57:51 +0000"  >&lt;p&gt;Github user dkulp commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/296&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/296&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Note:  in the future, please submit pull requests based on master instead of some other branch.   &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3hzcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>