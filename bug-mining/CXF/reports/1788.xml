<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:01:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4977] Client for .Net WCF using both WS-Trust and WS-SecureConversation</title>
                <link>https://issues.apache.org/jira/browse/CXF-4977</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I&apos;m trying to create a client for a .Net WCF service with WS-Trust and WS-SecureConversation.&lt;/p&gt;

&lt;p&gt;The client that I need for this webservice, has to follow the next steps:&lt;br/&gt;
1. Ask a security token from the STS server&lt;br/&gt;
2. Receive the security token from the STS server if client is authenticated&lt;br/&gt;
3. With this security token, ask for a context token from the WCF webservice&lt;br/&gt;
4. If security token is validated, receive a context token from the WCF webservice&lt;br/&gt;
5. Start using the WCF webservice using the granted context token.&lt;/p&gt;

&lt;p&gt;The CXF client I&apos;ve written, doesn&apos;t perform steps 3 and 4.&lt;/p&gt;

&lt;p&gt;In the WCF server config, this is the security profile:&lt;br/&gt;
WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10&lt;/p&gt;

&lt;p&gt;INfo about the attached files:&lt;br/&gt;
client_log_cxf.xml: logfile from my CXF client&lt;br/&gt;
client_log_net_saz: fiddler logfile from a working .Net client&lt;br/&gt;
cxf_client.xml: my client cxf configfile&lt;br/&gt;
service.wsdl: WSDL for the WCF webservice&lt;br/&gt;
trust.wsdl: WSDL for the STS service&lt;/p&gt;</description>
                <environment></environment>
        <key id="12643878">CXF-4977</key>
            <summary>Client for .Net WCF using both WS-Trust and WS-SecureConversation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="kjanssens">Kristof Janssens</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Apr 2013 06:55:33 +0000</created>
                <updated>Wed, 14 Aug 2013 15:56:01 +0000</updated>
                            <resolved>Tue, 30 Apr 2013 15:37:29 +0000</resolved>
                                                    <fixVersion>Invalid</fixVersion>
                                    <component>STS</component>
                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13638126" author="coheigea" created="Mon, 22 Apr 2013 15:54:20 +0000"  >
&lt;p&gt;I committed a commented out test-case in the CXF STS basis systests for this. It&apos;s not going to be easy to fix, as the WS-Trust client + WS-SecureConversation client functionality have never worked together before.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="13644808" author="dkulp" created="Mon, 29 Apr 2013 20:02:15 +0000"  >&lt;p&gt;Colm,&lt;/p&gt;

&lt;p&gt;I just update the configurations for both the client and server side to get this test more or less &quot;working&quot;, kind of.   The test will now hit the STS and get the SAML token.  It then uses that SAML token to get the conversation token from the service.   It then uses that token to invoke on the service.   However, the service then throws and exception because it&apos;s checking for a Principal that doesn&apos;t exist.   We currently don&apos;t store or restore the original Principal as part of the handling of the SecureConversationToken.   However, that is a separate issue as compared to the problem related in this JIRA.&lt;/p&gt;</comment>
                            <comment id="13644897" author="dkulp" created="Mon, 29 Apr 2013 21:33:10 +0000"  >&lt;p&gt;Colm,&lt;/p&gt;

&lt;p&gt;I fixed the SecurityContext thing so the test now passes.  Can you take a quick look to make sure I didn&apos;t do anything completely wrong?   &lt;/p&gt;</comment>
                            <comment id="13644903" author="dkulp" created="Mon, 29 Apr 2013 21:35:40 +0000"  >
&lt;p&gt;Kristof,&lt;/p&gt;

&lt;p&gt;Update your client config to change the line:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;ws-security.sts.client&quot;&lt;/span&gt; value-ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;CustomBinding_Application1-sts&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to be:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;ws-security.sts.client.sct&quot;&lt;/span&gt; value-ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;CustomBinding_Application1-sts&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and that should then work.  The STSClient you are configuring is for use within the handling of the SecConvToken and not for the main client itself.  Thus the &quot;.sct&quot; postfix.&lt;/p&gt;

</comment>
                            <comment id="13645313" author="kjanssens" created="Tue, 30 Apr 2013 06:27:39 +0000"  >&lt;p&gt;Daniel,&lt;/p&gt;

&lt;p&gt;That is indeed the solution to my problem, thanks!&lt;/p&gt;</comment>
                            <comment id="13645374" author="coheigea" created="Tue, 30 Apr 2013 08:04:19 +0000"  >
&lt;p&gt;Looks good to me thanks! Will you take care of the backmerge?&lt;/p&gt;

&lt;p&gt;Col.&lt;/p&gt;</comment>
                            <comment id="13645670" author="dkulp" created="Tue, 30 Apr 2013 15:37:29 +0000"  >&lt;p&gt;&lt;br/&gt;
Configuration problem.  &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12579785" name="client_log_cxf.xml" size="33051" author="kjanssens" created="Mon, 22 Apr 2013 06:56:07 +0000"/>
                            <attachment id="12579786" name="client_log_net.saz" size="30930" author="kjanssens" created="Mon, 22 Apr 2013 06:56:07 +0000"/>
                            <attachment id="12579787" name="cxf_client.xml" size="2471" author="kjanssens" created="Mon, 22 Apr 2013 06:56:07 +0000"/>
                            <attachment id="12579788" name="service.wsdl" size="17905" author="kjanssens" created="Mon, 22 Apr 2013 06:56:07 +0000"/>
                            <attachment id="12579789" name="trust.wsdl" size="5305" author="kjanssens" created="Mon, 22 Apr 2013 06:56:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324245</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 30 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jxwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>324590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>