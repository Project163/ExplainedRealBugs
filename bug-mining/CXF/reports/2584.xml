<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:16:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6472] Cannot create ContextResolver for class extending HttpServletRequest, HttpServletResponse, etc.</title>
                <link>https://issues.apache.org/jira/browse/CXF-6472</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I tried to wrap HttpServletRequest by using ContextProvider, lets assume such a simple implementation:&lt;/p&gt;

&lt;p&gt;@Provider&lt;br/&gt;
public class CustomHttpRequestContextResolver implements ContextResolver&amp;lt;CustomHttpRequest&amp;gt; {&lt;/p&gt;

&lt;p&gt;	@Context&lt;br/&gt;
	private HttpServletRequest request;&lt;/p&gt;

&lt;p&gt;   public CustomHttpRequest getContext(Class&amp;lt;?&amp;gt; type) &lt;/p&gt;
{
     return new CustomHttpRequest(request); 
   }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;However, before calling context provider CXF first calls JAXRSUtils.createServletResourceValue() method that tries to cast HttpServletRequest into my wrapped request and it fails with ClassCastException.&lt;/p&gt;

&lt;p&gt;I havent found in JAX_RS spec anything telling that such a ContextResolver is forbidden.This works also with Apache Wink. &lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12840158">CXF-6472</key>
            <summary>Cannot create ContextResolver for class extending HttpServletRequest, HttpServletResponse, etc.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="user778">tomek778</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Jun 2015 10:02:24 +0000</created>
                <updated>Fri, 14 Oct 2016 14:28:11 +0000</updated>
                            <resolved>Tue, 30 Jun 2015 10:22:04 +0000</resolved>
                                    <version>3.0.4</version>
                    <version>3.1.1</version>
                                    <fixVersion>3.0.6</fixVersion>
                    <fixVersion>3.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14599223" author="sergey_beryozkin" created="Wed, 24 Jun 2015 10:24:26 +0000"  >&lt;p&gt;Unfortunately this issue is invalid. ContextResolver is not a mechanism to override the runtime providing the standard contexts. As far as I know its primary and only use is to have it working alongside a JAXB provider, it even may have @Produces for supporting a media type version strategy.&lt;br/&gt;
I believe RI, RestEasy, and indeed CXF all offer its own mechanisms to support the injection of custom providers, in case of CXF it is ContextProvider. I know there&apos;s a demand to support the custom contexts in a standard way in 2.0.&lt;/p&gt;

&lt;p&gt;However, putting the issue of ContextResolver aside, I agree the issue of whether a framework-specific mechanism (CXF ContextProvider) can be used to override the contexts which the runtime is expected to offer by default, i.e, if say ContextProvider&amp;lt;UriInfo&amp;gt; is available then should the runtime trust this provider to offer a rather complex UriInfo implementation, etc ? I doubt it but I&apos;ll double check&lt;/p&gt;</comment>
                            <comment id="14599236" author="user778" created="Wed, 24 Jun 2015 10:47:17 +0000"  >&lt;p&gt;CustomHttpRequest is not a standard JAX-RS context object. Let&apos;s say it accidentally implements HttpServletRequest interface.&lt;/p&gt;

&lt;p&gt;If I am asking for @Context CustomHttpRequest context object but cxf would like to give me the equivalent of @Context HttpServletRequest and it fails with ClassCastException. This is a bug for me.&lt;/p&gt;</comment>
                            <comment id="14599262" author="sergey_beryozkin" created="Wed, 24 Jun 2015 11:21:05 +0000"  >&lt;p&gt;Looks like I misunderstood the issue.&lt;br/&gt;
So why is ClassCastException, are you saying that HttpServletRequest.class.cast(m.get(AbstractHTTPDestination.HTTP_REQUEST)) fails ?&lt;br/&gt;
Can you paste a stack trace ?&lt;/p&gt;</comment>
                            <comment id="14599280" author="user778" created="Wed, 24 Jun 2015 11:40:43 +0000"  >&lt;p&gt;stack from v.3.0.4:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.ClassCastException&lt;br/&gt;
        at java.lang.Class.cast(Class.java:2990)&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.createServletResourceValue(JAXRSUtils.java:1168)&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.createContextValue(JAXRSUtils.java:1104)&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameter(JAXRSUtils.java:836)&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.processParameters(JAXRSUtils.java:791)&lt;br/&gt;
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:212)&lt;br/&gt;
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:77)&lt;br/&gt;
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307)&lt;br/&gt;
        ... 41 more&lt;/p&gt;

&lt;p&gt;I am trying to inject as a jax-rs mehtod param:&lt;br/&gt;
 @Context CustomHttpRequest //implements HttpServletRequest&lt;/p&gt;

&lt;p&gt;but following condition is true (for method param clazz=CustomHttpRequest) :&lt;/p&gt;

&lt;p&gt;    if (HttpServletRequest.class.isAssignableFrom(clazz)) &lt;/p&gt;
{
            value = m.get(AbstractHTTPDestination.HTTP_REQUEST);
        }

&lt;p&gt;thus same method fails on line: &lt;br/&gt;
return clazz.cast(value)&lt;/p&gt;

&lt;p&gt;I would expect createServletResourceValue() will return null for clazz = CustomHttpRequest .&lt;/p&gt;</comment>
                            <comment id="14599291" author="sergey_beryozkin" created="Wed, 24 Jun 2015 11:51:23 +0000"  >&lt;p&gt;The cast exception is a bug - I&apos;ll fix it but you&apos;d still need to use CXF ContextProvider as opposed to JAX-RS ContextResolver to inject the custom request wrapper&lt;/p&gt;</comment>
                            <comment id="14599309" author="sergey_beryozkin" created="Wed, 24 Jun 2015 12:08:35 +0000"  >&lt;p&gt;See&lt;br/&gt;
&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/d9761079&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/d9761079&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Re using ContextResolver - please ask at the jaxrs users list to confirm that using ContextResolver is not a compliant mechanism to inject custom contexts.&lt;/p&gt;</comment>
                            <comment id="14608078" author="sergey_beryozkin" created="Tue, 30 Jun 2015 10:21:27 +0000"  >&lt;p&gt;I&apos;ve initiated a conversation which you can trace at the JAX-RS users, however, while I agree it is somewhat unfortunate, I&apos;m thinking it is unlikely there will be support for ContextResolver interface (given its method signature and the reference to Produces) acting as a generic context resolver as opposed to a typical case of ContextResolver&amp;lt;JAXBContext&amp;gt; providing JAXBContext instances for custom classes like Book. So in the short term one needs to continue depending on the framework specific mechansim; I&apos;ll reopen this issue otherwise. The actual class cast exception has been fixed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gfef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>