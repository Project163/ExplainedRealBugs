<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:23:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7254] New LoggingFeature Sl4jEventSender does not log the request headers</title>
                <link>https://issues.apache.org/jira/browse/CXF-7254</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;No request/response properties are reported which, in case of the requests with the empty payloads, leads to no info reported at all, while for the requests with the payloads only the payload INFO is displayed&lt;/p&gt;</description>
                <environment></environment>
        <key id="13044564">CXF-7254</key>
            <summary>New LoggingFeature Sl4jEventSender does not log the request headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cschneider">Christian Schneider</assignee>
                                    <reporter username="sergey_beryozkin">Sergey Beryozkin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Feb 2017 14:35:04 +0000</created>
                <updated>Mon, 18 May 2020 23:20:14 +0000</updated>
                            <resolved>Mon, 13 Mar 2017 10:30:38 +0000</resolved>
                                                    <fixVersion>3.1.11</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15876302" author="sergey_beryozkin" created="Tue, 21 Feb 2017 17:11:46 +0000"  >&lt;p&gt;Slf4jEventSender sets the headers as MDC properties which are not reported. &lt;/p&gt;</comment>
                            <comment id="15876845" author="sergey_beryozkin" created="Tue, 21 Feb 2017 22:14:43 +0000"  >&lt;p&gt;I suspect some SL4J config might be needed, but the feature should simply work by default. I propose to get rid of the MDC calls and use a plain buffer&lt;/p&gt;</comment>
                            <comment id="15880742" author="sergey_beryozkin" created="Thu, 23 Feb 2017 16:15:34 +0000"  >&lt;p&gt;Example, running a JAXRSClientServerBookTest.testGetBookQueryDefault produces&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Feb 23, 2017 3:57:56 PM org.apache.cxf.ext.logging.slf4j.Slf4jEventSender send
INFO:
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;with the new feature - no information the request has even been made.&lt;br/&gt;
With the old feature we can see:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;

Feb 23, 2017 4:05:00 PM org.apache.cxf.interceptor.LoggingInInterceptor
INFO: Inbound Message
----------------------------
ID: 1
Address: http://localhost:9001/bookstore/books/query/default
Http-Method: GET
Content-Type: 
Headers: {Accept=[*/*], Cache-Control=[no-cache], connection=[keep-alive], Content-Type=[null], Host=[localhost:9001], Pragma=[no-cache], User-Agent=[Apache-CXF/${project.version}]}
--------------------------------------

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If we have a request with a payload (for JAXWS or JAXRS), in this case JAXRSClientServerBookTest.echoForm, we see&lt;br/&gt;
the following with the new feature:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Feb 23, 2017 4:13:40 PM org.apache.cxf.ext.logging.slf4j.Slf4jEventSender send
INFO: a=aValue&amp;amp;b=b+value&amp;amp;c%25=cValue
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but with the old feature it is&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Feb 23, 2017 4:07:34 PM org.apache.cxf.interceptor.LoggingInInterceptor
INFO: Inbound Message
----------------------------
ID: 1
Address: http://localhost:9001/bookstore/form
Encoding: ISO-8859-1
Http-Method: POST
Content-Type: application/x-www-form-urlencoded
Headers: {Accept=[*/*], Cache-Control=[no-cache], connection=[keep-alive], Content-Length=[30], content-type=[application/x-www-form-urlencoded], Host=[localhost:9001], Pragma=[no-cache], User-Agent=[Apache-CXF/${project.version}]}
Payload: a=aValue&amp;amp;b=b+value&amp;amp;c%25=cValue
--------------------------------------

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following information is immediately important:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
Address: http://localhost:9001/bookstore/form
Http-Method: POST
Content-Type: application/x-www-form-urlencoded
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It is also useful to see the headers and the payload shown as one &apos;piece&apos; and the payload identified as &quot;Payload:&quot; as with the old feature.&lt;/p&gt;
</comment>
                            <comment id="15882600" author="sergey_beryozkin" created="Fri, 24 Feb 2017 12:45:34 +0000"  >&lt;p&gt;Hi Christian, I added Slf4jNoMdcEventSender which logs all info in one go which is an option we agreed yesterday too, rearranged a bit the order of the properties, capitalized them, so for a GET request I see something like this now:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Feb 24, 2017 12:34:24 PM org.apache.cxf.ext.logging.slf4j.Slf4jNoMdcEventSender send
INFO: 
    Type: REQ_IN
    Address: http://localhost:9001/bookstore/books/query/default
    HttpMethod: GET
    ExchangeId: ec2537bd-2638-4f1c-bdaa-cf9dc76c1330
    MessageId: dd71dcd8-5233-4cd3-8b1c-5343a55da941
    Headers: {Accept=*/*, Cache-Control=no-cache, User-Agent=Apache-CXF/${project.version}, connection=keep-alive, Host=localhost:9001, Pragma=no-cache, Content-Type=null}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;which is very close to the OOB experience offered by the old feature. &lt;br/&gt;
Can you please doc how to capture MDC output with the formatter and it would be cool...&lt;/p&gt;

&lt;p&gt;By the way I&apos;m also seeing the following test failing in Jenkins but not locally,   &lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/CXF-Trunk-JDK18/org.apache.cxf$cxf-rt-rs-client/2358/testReport/junit/org.apache.cxf.jaxrs.client.logging/RESTLoggingTest/testBinary/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/CXF-Trunk-JDK18/org.apache.cxf$cxf-rt-rs-client/2358/testReport/junit/org.apache.cxf.jaxrs.client.logging/RESTLoggingTest/testBinary/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Have a look please&lt;/p&gt;

&lt;p&gt;Thanks, Sergey&lt;/p&gt;</comment>
                            <comment id="15887889" author="sergey_beryozkin" created="Tue, 28 Feb 2017 12:17:59 +0000"  >&lt;p&gt;Hi Dan, Christian&lt;/p&gt;

&lt;p&gt;I reverted my recent update to the event formatter which was starting the output from the next line as it indeed looked a bit strange, even though well aligned but I also removed a &quot;Type:&quot; prefix to make it arguably a bit more optimal.&lt;/p&gt;

&lt;p&gt;Slf4jEventSender:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Feb 28, 2017 11:40:41 AM org.apache.cxf.ext.logging.slf4j.Slf4jEventSender send
INFO: RESP_OUT
    Content-Type: application/x-www-form-urlencoded
    ResponseCode: 200
    ExchangeId: 2b7d6436-8608-4309-9cf8-9d872ec445e5
    MessageId: 555ff248-64f7-4442-99fc-22e0ce4a208f
    Headers: {BookId=123, MAP-NAME=javax.ws.rs.core.MultivaluedMap, Date=Tue, 28 Feb 2017 11:40:41 GMT, Content-Type=application/x-www-form-urlencoded}
    Payload: a=aValue&amp;amp;b=b+value&amp;amp;c%25=cValue
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;and PrintWriterEventSender:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-02-28T11:40:41.321Z - PrintWriterEventSender - REQ_IN
    Address: http://localhost:9001/bookstore/form
    HttpMethod: POST
    Content-Type: application/x-www-form-urlencoded
    ExchangeId: 2b7d6436-8608-4309-9cf8-9d872ec445e5
    MessageId: 76f84634-c18c-4f68-8bd5-4c56381f46ac
    Headers: {Accept=*/*, Cache-Control=no-cache, User-Agent=Apache-CXF/${project.version}, connection=keep-alive, content-type=application/x-www-form-urlencoded, Host=localhost:9001, Pragma=no-cache, Content-Length=30}
    Payload: a=aValue&amp;amp;b=b+value&amp;amp;c%25=cValue
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;It feels quite optimal to me now as REQ_IN/REQ_OUT is self descriptive and fits well on the same line with INFO/etc, but feel free to add a &quot;Type:&quot; back if you like.&lt;/p&gt;

&lt;p&gt;I&apos;d also like to get rid of &apos;MessageId&apos; from the (verbose) output, but we can still keep it as MDC property. MessageId is redundant - it is local to a given in/out part of the exchange and thus can&apos;t be used to correlate, it just adds to the space. Besides ExhangeID plus REQ_IN or ExhangeID +  plus REC_OUT pairs can be used to correlate on the given in or out flow if really needed.&lt;/p&gt;

&lt;p&gt;Thanks, Sergey &lt;/p&gt;</comment>
                            <comment id="15907138" author="chris@die-schneider.net" created="Mon, 13 Mar 2017 10:30:38 +0000"  >&lt;p&gt;I think this is fixed now.&lt;/p&gt;</comment>
                            <comment id="15965084" author="davidkarlsen" created="Tue, 11 Apr 2017 22:57:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chris%40die-schneider.net&quot; class=&quot;user-hover&quot; rel=&quot;chris@die-schneider.net&quot;&gt;chris@die-schneider.net&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;:&lt;br/&gt;
How can I still achieve what &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6936&quot; title=&quot;Make log-category for ext logging feature configurable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6936&quot;&gt;&lt;del&gt;CXF-6936&lt;/del&gt;&lt;/a&gt; introduced? E.g. easily send events from jaxrs to one appender and jaxws to another? We like to split the soap vs rest payloads into distinct files.&lt;/p&gt;</comment>
                            <comment id="15980880" author="chris@die-schneider.net" created="Mon, 24 Apr 2017 08:44:26 +0000"  >&lt;p&gt;I think this is rather a topic for the mailing list.&lt;/p&gt;</comment>
                            <comment id="15980966" author="davidkarlsen" created="Mon, 24 Apr 2017 10:17:21 +0000"  >&lt;p&gt;good point - took it over to dev@&lt;/p&gt;</comment>
                            <comment id="16691857" author="bocamel" created="Mon, 19 Nov 2018 15:27:29 +0000"  >&lt;p&gt;Is this the reason why I do not see&#160;&lt;/p&gt;

&lt;p&gt;ID: xxxx&lt;/p&gt;

&lt;p&gt;in the logged SOAP requests and responses?&#160; (I still see the ID: xxxx in logged REST requests and responses).&lt;/p&gt;

&lt;p&gt;Having ID: xxxx in the logged requests/responses is very useful when one has a large number of similar requests/responses logged at about the same time.&#160; While the ExchangeId can be used to correlate request/response, it is much more difficult to use than a simple numeric ID.&#160; I wish the ID: xxxx can be brought back.&#160; Thanks!&lt;/p&gt;

&lt;p&gt;Here is what I see in the log (with CXF 3.2.6 and Springboot 2.0):&lt;/p&gt;

&lt;p&gt;2018-11-19 10:03:05.710 &lt;span class=&quot;error&quot;&gt;&amp;#91;qtp2072830223-53&amp;#93;&lt;/span&gt; REQ_IN - REQ_IN&lt;br/&gt;
 Address: &lt;a href=&quot;http://&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://&lt;/a&gt;...&lt;br/&gt;
 HttpMethod: POST&lt;br/&gt;
 Content-Type: text/xml;charset=UTF-8&lt;br/&gt;
 ExchangeId: 02fe6f42-7dc9-4bdf-adea-4dc86084a108&lt;br/&gt;
 ServiceName: xxxx&lt;br/&gt;
 PortName: xxxx&lt;br/&gt;
 PortTypeName: xxxx&lt;br/&gt;
 Headers: ...&lt;br/&gt;
 Payload: ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17110710" author="fml2" created="Mon, 18 May 2020 23:20:14 +0000"  >&lt;p&gt;Is it on purpose that the Sl4jEventSender logs the Authorization header (which always contains data that should not be displayed &#8211; be it basic auth or the token data)? Should the application take care that the data is not logged by providing its own Sender? We did exactly that in our recent project because we could not found a better solution.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13067939">CXF-7354</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3abxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>