<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:53:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4292] Incorrect code generated with wadl2java tool when use JAXB binding and XML symple type with restriction.</title>
                <link>https://issues.apache.org/jira/browse/CXF-4292</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If we have an XML schema with a simpleType that has a restriction, the tool is not able to determine the basic type of java.&lt;/p&gt;


&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;    &amp;lt;xs:simpleType name=&quot;DetailType&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;xs:annotation&amp;gt;&lt;br/&gt;
            &amp;lt;xs:documentation&amp;gt;DetailType for WADL is used to indicate the possible values for a WADL Resource parameter. &lt;br/&gt;
                This parameter specifies the desired amount of information to be returned. &lt;br/&gt;
                For example, it is possible to instruct the web service to return only basic information about the maintainable artefact (i.e.: id, agency id, version and name). &lt;br/&gt;
                Most notably, items of item schemes will not be returned (for example, it will not return the codes in a code list query). &lt;br/&gt;
                Possible values are: &quot;allstubs&quot; (all artefacts should be returned as stubs ), &quot;referencestubs&quot; (referenced artefacts should be returned as stubs ) &lt;br/&gt;
                and full (all available information for all artefacts should be returned ).&lt;br/&gt;
            &amp;lt;/xs:documentation&amp;gt;&lt;br/&gt;
        &amp;lt;/xs:annotation&amp;gt;&lt;br/&gt;
        &amp;lt;xs:restriction base=&quot;xs:string&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;xs:pattern value=&quot;allstubs&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;xs:pattern value=&quot;referencestubs&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;xs:pattern value=&quot;full&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/xs:restriction&amp;gt;&lt;br/&gt;
    &amp;lt;/xs:simpleType&amp;gt;&lt;/p&gt;



&lt;p&gt;And the generated code is:&lt;/p&gt;

&lt;p&gt;@Path(&quot;datastructure/&lt;/p&gt;
{agencyID}/{resourceID}/{version}&quot;)&lt;br/&gt;
public interface Datastructure {

    @GET
    @Produces(&quot;application/vnd.sdmx.structure+xml;version=2.1&quot;)
    StructureType MaintainableArtefactQuery(@QueryParam(&quot;detail&quot;) @DefaultValue(&quot;full&quot;) DetailType detail, @QueryParam(&quot;references&quot;) @DefaultValue(&quot;none&quot;) ReferencesType references);

}&lt;br/&gt;
&lt;br/&gt;
But DetailType doen&apos;t have JAXB binding because is a simpleType (a String). The the correct code would be:&lt;br/&gt;
&lt;br/&gt;
@Path(&quot;datastructure/{agencyID}
&lt;p&gt;/&lt;/p&gt;
{resourceID}
&lt;p&gt;/&lt;/p&gt;
{version}
&lt;p&gt;&quot;)&lt;br/&gt;
public interface Datastructure &lt;/p&gt;
{

    @GET
    @Produces(&quot;application/vnd.sdmx.structure+xml;version=2.1&quot;)
    StructureType MaintainableArtefactQuery(@QueryParam(&quot;detail&quot;) @DefaultValue(&quot;full&quot;) String detail, @QueryParam(&quot;references&quot;) @DefaultValue(&quot;none&quot;) ReferencesType references);

}

&lt;p&gt;Please run the attached code (mvn generate-sources with java parameters -Xms512M -Xmx1024M) to reproduce the issue. Then see for example the class &quot;Datastructure&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12554125">CXF-4292</key>
            <summary>Incorrect code generated with wadl2java tool when use JAXB binding and XML symple type with restriction.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="cromody">Zebensui M&#233;ndez</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 May 2012 08:34:45 +0000</created>
                <updated>Tue, 5 Jun 2012 13:31:33 +0000</updated>
                            <resolved>Tue, 8 May 2012 12:37:00 +0000</resolved>
                                                    <fixVersion>2.5.4</fixVersion>
                    <fixVersion>2.6.1</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13269454" author="cromody" created="Mon, 7 May 2012 08:35:17 +0000"  >&lt;p&gt;Example issue project&lt;/p&gt;</comment>
                            <comment id="13269688" author="sergey_beryozkin" created="Mon, 7 May 2012 15:17:48 +0000"  >&lt;p&gt;I think the bug in 2.6.0 is about the missing java package import as opposed to the wrong code being generated.&lt;br/&gt;
In this case JAXB compiler must be generating a DetailType enum class. The fact it does not have JAXB annotations is not important because&lt;br/&gt;
it represents a query parameter, not the message payload and hence the processing rules are different.&lt;/p&gt;

&lt;p&gt;Can you try 2.6.1-SNAPSHOT please ? You should see the imports section updated and the compilation succeeding&lt;/p&gt;</comment>
                            <comment id="13270310" author="cromody" created="Tue, 8 May 2012 08:07:44 +0000"  >&lt;p&gt;I try with 2.6.1-SNAPSHOT but the issue until exist.&lt;/p&gt;

&lt;p&gt;The JAXB Compiler dont generate DetailType class because is not needed. The same for all remaining params in the following example: &lt;/p&gt;


&lt;p&gt;	&amp;lt;resource_type id=&quot;MaintainableArtefact&quot;&amp;gt;&lt;br/&gt;
	    	&amp;lt;param name=&quot;agencyID&quot; type=&quot;types:NCNameIDType&quot; style=&quot;template&quot; required=&quot;false&quot; default=&quot;all&quot;/&amp;gt;&lt;br/&gt;
    		&amp;lt;param name=&quot;resourceID&quot; type=&quot;types:IDType&quot; style=&quot;template&quot; required=&quot;false&quot; default=&quot;all&quot;/&amp;gt; &lt;br/&gt;
    		&amp;lt;param name=&quot;version&quot; type=&quot;types:VersionType&quot; style=&quot;template&quot; required=&quot;false&quot; default=&quot;latest&quot;/&amp;gt;&lt;br/&gt;
		&amp;lt;method name=&quot;GET&quot; id=&quot;maintainableArtefactQuery&quot;&amp;gt; &lt;br/&gt;
			&amp;lt;request&amp;gt; &lt;br/&gt;
				&amp;lt;param name=&quot;detail&quot; type=&quot;types:DetailType&quot; style=&quot;query&quot; default=&quot;full&quot;/&amp;gt;&lt;br/&gt;
				&amp;lt;param name=&quot;references&quot; type=&quot;types:ReferencesType&quot; style=&quot;query&quot; default=&quot;none&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;/request&amp;gt; &lt;br/&gt;
			&amp;lt;response status=&quot;200&quot;&amp;gt; &lt;br/&gt;
				&amp;lt;representation mediaType=&quot;application/vnd.sdmx.structure+xml;version=2.1&quot; element=&quot;message:Structure&quot;/&amp;gt;&lt;br/&gt;
			&amp;lt;/response&amp;gt; &lt;br/&gt;
			&amp;lt;response status=&quot;400 401 404 413 500 501 503&quot;&amp;gt; &lt;br/&gt;
				&amp;lt;representation mediaType=&quot;application/vnd.sdmx.error+xml;version=2.1&quot; element=&quot;message:Error&quot;/&amp;gt; &lt;br/&gt;
			&amp;lt;/response&amp;gt; &lt;br/&gt;
		&amp;lt;/method&amp;gt;&lt;br/&gt;
	&amp;lt;/resource_type&amp;gt;&lt;/p&gt;

&lt;p&gt;Params and types:&lt;/p&gt;

&lt;p&gt;agencyID --&amp;gt; types:NCNameIDType&lt;br/&gt;
resourceID --&amp;gt; types:IDType&lt;br/&gt;
version --&amp;gt; types:VersionType&lt;br/&gt;
detail --&amp;gt; types:DetailType&lt;br/&gt;
references --&amp;gt; types:ReferencesType&lt;/p&gt;

&lt;p&gt;All are xs:simpletype with exensions &lt;/p&gt;
{xs:union, xs:restriccion}
&lt;p&gt;,but as we all represent parameters and in this case everyone should be String in JAXB generated code Class&lt;/p&gt;

&lt;p&gt;See src/main/resources/wadl/sdmx21rest/SDMXRestTypes.xsd in the original attached. &lt;/p&gt;

&lt;p&gt;And behavior in getPrimitiveType method of cxf-tools-wadlto-jaxrs/org/apache/cxf/tools/wadlto/jaxrs/SourceGenerator.java&lt;/p&gt;

&lt;p&gt;For now, a solution for me is omit the &quot;type&quot; in the definition of the parameters in the WADL because all my parameters are String.&lt;/p&gt;</comment>
                            <comment id="13270404" author="sergey_beryozkin" created="Tue, 8 May 2012 12:36:25 +0000"  >&lt;p&gt;Yes, I recall now that JAXB will generate a dedicated class if a simpleType restriction offers an enumeration of values. In fact this issue is a regression caused by the code added to reference the generated enum types if any.&lt;br/&gt;
So I&apos;ve updated the code to return &apos;String&apos; in cases where the class name can not be determined - I guess this is the best that the generator can do...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12525815" name="cxf_2_6_0_wadl.zip" size="359222" author="cromody" created="Mon, 7 May 2012 08:35:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i08987:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46094</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>