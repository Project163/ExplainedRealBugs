<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:40:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-9064] AsyncHTTPConduit doesn&apos;t close copied wrappedStream on close</title>
                <link>https://issues.apache.org/jira/browse/CXF-9064</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I found that in org.apache.cxf.transport.http.asyncclient.AsyncHTTPConduit$AsyncWrappedOutputStream on close method the wrappedStream is not closed but reassigned to the new anonymous OutputStream in handleHeadersTrustCaching by setupWrappedStream.&lt;/p&gt;

&lt;p&gt;It is in cxf-rt-transports-http-hc module.&lt;/p&gt;

&lt;p&gt;My suggest to add out.close() on 426 line.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13594132">CXF-9064</key>
            <summary>AsyncHTTPConduit doesn&apos;t close copied wrappedStream on close</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="exprompt">Alexey Deryabin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Oct 2024 06:35:30 +0000</created>
                <updated>Sun, 3 Nov 2024 19:07:57 +0000</updated>
                            <resolved>Sun, 3 Nov 2024 19:07:57 +0000</resolved>
                                    <version>3.5.9</version>
                    <version>4.0.5</version>
                    <version>3.6.4</version>
                                    <fixVersion>4.1.0</fixVersion>
                    <fixVersion>3.5.10</fixVersion>
                    <fixVersion>3.6.5</fixVersion>
                    <fixVersion>4.0.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17886809" author="reta" created="Fri, 4 Oct 2024 00:20:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=exprompt&quot; class=&quot;user-hover&quot; rel=&quot;exprompt&quot;&gt;exprompt&lt;/a&gt;, the wrappedStream  is closed by `super.close()` call chain, more specifically AbstractWrappedOutputStream::close() (if it is not cached), does it address your concern? Thank you.&lt;/p&gt;</comment>
                            <comment id="17886936" author="JIRAUSER287381" created="Fri, 4 Oct 2024 14:35:18 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; for quick response.&lt;/p&gt;

&lt;p&gt;You are right, the &lt;tt&gt;wrappedStream&lt;/tt&gt; is closed by the &lt;tt&gt;super.close()&lt;/tt&gt; call chain but my concern is about the local variable &lt;tt&gt;out&lt;/tt&gt; which is pointed to the old &lt;tt&gt;wrappedStream&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;You never close old stream that is why tempFile is leaking in some cases.&lt;/p&gt;</comment>
                            <comment id="17893793" author="reta" created="Tue, 29 Oct 2024 12:04:22 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=exprompt&quot; class=&quot;user-hover&quot; rel=&quot;exprompt&quot;&gt;exprompt&lt;/a&gt; , that fortunately is true and there are quite a few cases (both on the server and on the client) where CXF (with caching output stream) is not able to determine when the tempFile (cache stream) has to be closed. It is somewhat mitigated by &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7396&quot; title=&quot;CachedOutputStream doesn&amp;#39;t delete temp files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7396&quot;&gt;&lt;del&gt;CXF-7396&lt;/del&gt;&lt;/a&gt; but the root cause is not fixed.&lt;/p&gt;</comment>
                            <comment id="17894520" author="JIRAUSER287381" created="Thu, 31 Oct 2024 10:28:03 +0000"  >&lt;p&gt;What does it mean &quot;Information Provided&quot; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt;?&lt;br/&gt;
Will you fix it in all branches or not?&lt;br/&gt;
You only need to close out stream in 426 line.&lt;/p&gt;</comment>
                            <comment id="17894715" author="reta" created="Thu, 31 Oct 2024 21:31:24 +0000"  >&lt;p&gt;Apologies &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=exprompt&quot; class=&quot;user-hover&quot; rel=&quot;exprompt&quot;&gt;exprompt&lt;/a&gt; , missed the out stream comment, I think you have a point and we should be closing it since it is transferred to newly created wrappedStream. I will submit the pull request shortly, thank you.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13077689">CXF-7396</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rrkg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>