<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:09:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5688] Problem Parsing FIQL Involving Enums</title>
                <link>https://issues.apache.org/jira/browse/CXF-5688</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;FIQL parser assumes that enums would be defined in all caps. &lt;/p&gt;

&lt;p&gt;In case Enums are not defined in all caps, InjectionUtils.convertStringToPrimitive(String value, Class&amp;lt;?&amp;gt; cls) raises PropertyNotFoundException because it&apos;s converting the user provided enum value to caps and calling ENUM.valueOf(UPPERCASE_STR).&lt;/p&gt;

&lt;p&gt;ethod m  = cls.getMethod(&quot;valueOf&quot;, new Class[]&lt;/p&gt;
{String.class}
&lt;p&gt;);&lt;br/&gt;
return m.invoke(null, value.toUpperCase());&lt;/p&gt;

&lt;p&gt;Since JAVA doesn&apos;t enforce enums to be all caps, I don&apos;t see any reason why FIQLParser should assume this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/cxf/blob/master/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/blob/master/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/InjectionUtils.java&lt;/a&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="12708243">CXF-5688</key>
            <summary>Problem Parsing FIQL Involving Enums</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="azitabh">Azitabh</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 Apr 2014 12:19:17 +0000</created>
                <updated>Tue, 23 Feb 2016 17:54:46 +0000</updated>
                            <resolved>Tue, 15 Apr 2014 16:14:53 +0000</resolved>
                                                    <fixVersion>3.0</fixVersion>
                    <fixVersion>2.7.12</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13969505" author="sergey_beryozkin" created="Tue, 15 Apr 2014 12:52:51 +0000"  >&lt;p&gt;Well, the case where we have enum with say &quot;GOOD&quot; and &quot;PERFECT&quot; values and a query like &quot;status=good&quot; is more realistic to deal with; having a &quot;Good&quot; enum value and thus expecting the query contain a strictly case sensitive value such as &quot;status=Good&quot; is a bit more brittle in case of enums unless the client side is controlled. However I can imagine where the existing enums which can not be modified may need to be supported, as such a contextual property can be introduced to support this edge case. The property name is &quot;enum.conversion.case.sensitive&quot;&lt;/p&gt;</comment>
                            <comment id="13969676" author="sergey_beryozkin" created="Tue, 15 Apr 2014 16:14:53 +0000"  >&lt;p&gt;You can set the new contextual property within jaxrs:properties, etc&lt;/p&gt;</comment>
                            <comment id="14156372" author="tam" created="Thu, 2 Oct 2014 11:04:56 +0000"  >&lt;p&gt;Hello Sergey,&lt;/p&gt;

&lt;p&gt;While the addition of a property to override this behaviour is appreciated, the change to apply toUpperCase() to Enum comparison values is a breaking change from 2.6 to 2.7+. &lt;/p&gt;

&lt;p&gt;If only using CXF for its FiqlParser, then convertStringToPrimitive() breaks things when passed Enums that are not upper case (say, for instance, because values in legacy databases are lower or mixed case). In this situation, where only the FIQL Parser features of CXF are in use, there is no access to configuration properties via MessageUtils (there is no &quot;current&quot; message or relevant PhaseInterceptorChain). The only way to access a configuration property via MessageUtils requires additional dependencies on other parts of CXF that are not directly relevant to FIQL.&lt;/p&gt;

&lt;p&gt;The base assumption that all Enum values would be uppercase in the first place seems incorrect. A developer can easily handle the &quot;brittle&quot; situation where, as you suggest, client-provided input may be in the incorrect case, by ensuring that any case validation is pre-applied to the fiqlExpression String passed to FiqlParser&apos;s parse() method.&lt;/p&gt;

&lt;p&gt;If this auto-uppercase behaviour is to be incorporated, then it would make sense for it to default to &quot;off&quot; rather than &quot;on&quot;. It may also be helpful to move its configuration to somewhere that is not tied to CXF&apos;s messaging components.&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;br/&gt;
tam&lt;/p&gt;</comment>
                            <comment id="14160186" author="sergey_beryozkin" created="Mon, 6 Oct 2014 11:06:33 +0000"  >&lt;p&gt;Hi Tam, &lt;br/&gt;
I&apos;ve done a minor adjustment to the conversion code which should work for all the cases.&lt;br/&gt;
Have a look please and let me know if it works for you&lt;br/&gt;
Cheers, Sergey&lt;/p&gt;</comment>
                            <comment id="14160354" author="tam" created="Mon, 6 Oct 2014 14:47:44 +0000"  >&lt;p&gt;Thanks Sergey - looks good. For clarity, it might be worth changing&lt;/p&gt;

&lt;p&gt;!MessageUtils.getContextualBoolean(m, ENUM_CONVERSION_CASE_SENSITIVE, false)&lt;/p&gt;

&lt;p&gt;on line 1271 to:&lt;/p&gt;

&lt;p&gt;MessageUtils.getContextualBoolean(m, ENUM_CONVERSION_CASE_SENSITIVE, true)&lt;/p&gt;

&lt;p&gt;cheers,&lt;br/&gt;
tam&lt;/p&gt;</comment>
                            <comment id="14160445" author="sergey_beryozkin" created="Mon, 6 Oct 2014 16:22:42 +0000"  >&lt;p&gt;Sure, will do this simplification as part of the next search related bug fix/enhancement, thanks&lt;/p&gt;</comment>
                            <comment id="14161542" author="githubbot" created="Tue, 7 Oct 2014 06:33:34 +0000"  >&lt;p&gt;GitHub user azitabh opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/24&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    enhancing readability #&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5688&quot; title=&quot;Problem Parsing FIQL Involving Enums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5688&quot;&gt;&lt;del&gt;CXF-5688&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/azitabh/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/azitabh/cxf&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/24.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/24.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #24&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c27f5fb93f9244882c590f6ffca97ac5c05a7e68&lt;br/&gt;
Author: Azitabh Ajit &amp;lt;azitabh@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-10-07T06:31:22Z&lt;/p&gt;

&lt;p&gt;    enhancing readability #&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5688&quot; title=&quot;Problem Parsing FIQL Involving Enums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5688&quot;&gt;&lt;del&gt;CXF-5688&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14161545" author="azitabh" created="Tue, 7 Oct 2014 06:35:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tam&quot; class=&quot;user-hover&quot; rel=&quot;tam&quot;&gt;tam&lt;/a&gt;: I have made changes suggested by Tam and have sent a pull request. Btw, why is the issue closed if we are still committing changes?&lt;/p&gt;</comment>
                            <comment id="14161681" author="sergey_beryozkin" created="Tue, 7 Oct 2014 09:28:43 +0000"  >&lt;p&gt;Actually, the following code&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (m != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !MessageUtils.getContextualBoolean(m, ENUM_CONVERSION_CASE_SENSITIVE, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)) {
      obj = invokeValueOf(value.toUpperCase(), cls);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;means &quot;Use the upper-case conversion if ENUM_CONVERSION_CASE_SENSITIVE was not set or explicitly set to false&quot;, i.e, the upper-case conversion is done by default.&lt;/p&gt;

&lt;p&gt;So I won&apos;t be applying the change which would mean &quot;Use the upper-case conversion if ENUM_CONVERSION_CASE_SENSITIVE was not set or set to true&quot; which does not really makes sense.&lt;/p&gt;

&lt;p&gt;In fact I think it is a bit too over-elaborate. I can keep the current code as is but would rather prefer to drop the ENUM_CONVERSION_CASE_SENSITIVE check completely and try the upper-conversion case first and if that fails then retry with the original value - should be cheap and the code will become simpler.&lt;/p&gt;</comment>
                            <comment id="14161782" author="azitabh" created="Tue, 7 Oct 2014 11:34:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;: I agree with you on the first point that ENUM_CONVERSION_CASE_SENSITIVE should not be needed to be set explicitly to true in order to ensure case conversion. This in fact would break backward compatibility.&lt;/p&gt;

&lt;p&gt;However, I don&apos;t think we should do a try-catch thing here. JAVA gives freedom of defining &quot;Test&quot; and &quot;TEST&quot; as separate values for the same ENUM. Though doing so doesn&apos;t make much sense, we shouldn&apos;t take that freedom away.&lt;/p&gt;

&lt;p&gt;Leaving the code as it is seems to be the best option.&lt;/p&gt;</comment>
                            <comment id="14161958" author="githubbot" created="Tue, 7 Oct 2014 14:53:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/24&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/24&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14163230" author="tam" created="Wed, 8 Oct 2014 08:40:01 +0000"  >&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=azitabh&quot; class=&quot;user-hover&quot; rel=&quot;azitabh&quot;&gt;azitabh&lt;/a&gt; points out, an Enum might exist with values of both Test and TEST. It would therefore make sense to check for the &quot;original&quot; value first, and then only if that fails, check for the uppercased value...&lt;/p&gt;</comment>
                            <comment id="14163245" author="sergey_beryozkin" created="Wed, 8 Oct 2014 08:56:08 +0000"  >&lt;p&gt;Tam, &lt;br/&gt;
I&apos;ve already referred to this issue in my 1st comment. Basically, IMHO it is not a good idea for a user be aware to make sure &apos;a=Bar&apos; is typed for the case-sensitive conversion to go first successfully, the user should have no idea about the &apos;a&apos; property type, that it might be enum, etc. The &apos;natural&apos; query language is &apos;a=bar&apos;, i.e, people typically do no capitalize the first character of the value when doing their queries. They don&apos;t type &apos;a=&apos; either but that is something the undelying UI script can prepend to the value entered by the user in this given case.&lt;br/&gt;
Next, IMHO 80% of enum types are actually all upper-case.&lt;/p&gt;

&lt;p&gt;Cheers, Sergey&lt;/p&gt;

</comment>
                            <comment id="15154605" author="githubbot" created="Fri, 19 Feb 2016 18:29:12 +0000"  >&lt;p&gt;GitHub user azitabh opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/111&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    enhancing readability #&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5688&quot; title=&quot;Problem Parsing FIQL Involving Enums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5688&quot;&gt;&lt;del&gt;CXF-5688&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/azitabh/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/azitabh/cxf&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/111.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/111.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #111&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c27f5fb93f9244882c590f6ffca97ac5c05a7e68&lt;br/&gt;
Author: Azitabh Ajit &amp;lt;azitabh@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-10-07T06:31:22Z&lt;/p&gt;

&lt;p&gt;    enhancing readability #&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5688&quot; title=&quot;Problem Parsing FIQL Involving Enums&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5688&quot;&gt;&lt;del&gt;CXF-5688&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15156758" author="githubbot" created="Mon, 22 Feb 2016 10:44:57 +0000"  >&lt;p&gt;Github user sberyozkin commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/111#issuecomment-187119639&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/111#issuecomment-187119639&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the patch, however I believe I clarified why the code is written the way it is now in &lt;a href=&quot;https://issues.apache.org/jira/secure/EditComment!default.jspa?id=12708243&amp;amp;commentId=14163245&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/EditComment!default.jspa?id=12708243&amp;amp;commentId=14163245&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15159302" author="githubbot" created="Tue, 23 Feb 2016 17:54:46 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/111&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386566</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 39 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uldb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386830</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>