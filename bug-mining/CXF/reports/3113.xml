<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:26:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7430] The logInputStream method of the LoggingInInterceptor fails if input stream size bigger than limit and PrettyPrint option is true.</title>
                <link>https://issues.apache.org/jira/browse/CXF-7430</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The logInputStream method of the LoggingInInterceptor class fails when the input stream size is bigger than the limit variable value and PrettyPrint option is set to true.&lt;/p&gt;

&lt;p&gt;The problem is:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;In the logInputStream method of the LoggingInInterceptor class if the input stream is bigger than limit (the default value of the limit variable defined in the AbstractLoggingInterceptor  as 48 * 1024) the input stream is truncated to the length of the limit value;&lt;/li&gt;
	&lt;li&gt;The logInputStream method of the LoggingInInterceptor class uses the writePayload method of the AbstractLoggingInterceptor to log the payload of the response;&lt;/li&gt;
	&lt;li&gt;As the PrettyPrint option is true, the writePayload method attempts to use the PrettyPrintXMLWriter class to log already truncated XML data and throws exception.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;It seems like the issue could be resolved if the LoggingInInterceptor class resets the PrettyPrint option to false every time if the input stream was truncated. Or the same result would be achieved if contentType parameter of the writePayload method is NOT set to &apos;xml&apos; for truncated stream. Additionally, the same solution should be propagated to all usages of the writePayload method of the AbstractLoggingInterceptor class. &lt;/p&gt;

&lt;p&gt;I faced this issue in my project that uses older version of the library, but as I just found the exception could be handled by changes in code made by commit &lt;a href=&quot;https://github.com/apache/cxf/commit/d5373a3e3d2219ce07526cfb92ff954b3382727e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/commit/d5373a3e3d2219ce07526cfb92ff954b3382727e&lt;/a&gt; so it is not relevant to latest sources anymore. But I think it is not a very good way to handle it through handling exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13082525">CXF-7430</key>
            <summary>The logInputStream method of the LoggingInInterceptor fails if input stream size bigger than limit and PrettyPrint option is true.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="alex.korobko">Alex Korobko</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jun 2017 14:31:37 +0000</created>
                <updated>Tue, 28 Nov 2017 10:42:01 +0000</updated>
                            <resolved>Wed, 9 Aug 2017 11:54:37 +0000</resolved>
                                    <version>3.0.10</version>
                    <version>3.1.7</version>
                    <version>3.1.8</version>
                    <version>3.0.11</version>
                    <version>3.1.9</version>
                    <version>3.0.12</version>
                    <version>3.0.13</version>
                                    <fixVersion>3.0.15</fixVersion>
                    <fixVersion>3.1.13</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16070261" author="alex.korobko" created="Fri, 30 Jun 2017 15:21:42 +0000"  >&lt;p&gt;I was considering applying pretty small changes to handle the issue in a more elegant way than just handling exception, but both classes LoggingInInterceptor and AbstractLoggingInterceptor are marked as deprecated in master branch. &lt;/p&gt;

&lt;p&gt;Would it be worth efforts?&lt;/p&gt;</comment>
                            <comment id="16070334" author="sergey_beryozkin" created="Fri, 30 Jun 2017 16:01:14 +0000"  >&lt;p&gt;It will be a long time before core/LoggingInOutInterceptors will be removed, and they will stay in 3.1.x so please create a patch&lt;/p&gt;</comment>
                            <comment id="16093934" author="alex.korobko" created="Wed, 19 Jul 2017 23:09:50 +0000"  >&lt;p&gt;Not sure if github integrated with JIRA, I don&apos;t see my pull request in the ticket, so I add link here &lt;a href=&quot;https://github.com/apache/cxf/pull/294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/294&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16094319" author="githubbot" created="Thu, 20 Jul 2017 07:44:58 +0000"  >&lt;p&gt;Github user sberyozkin commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/294&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks, can you please rewrite the test code with the Java 7 in mind - CXF 3.1.x should compile with Java 7&lt;/p&gt;</comment>
                            <comment id="16094952" author="githubbot" created="Thu, 20 Jul 2017 16:48:06 +0000"  >&lt;p&gt;Github user alex-korobko commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/294&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Rewrote the test code to comply Java 7 spec. Strangely enough, though, that the core project doesn&apos;t compile with default Java 7 language spec in Intellij Idea, it shows several type conversion errors in other files.&lt;/p&gt;</comment>
                            <comment id="16119746" author="githubbot" created="Wed, 9 Aug 2017 11:35:30 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/294&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16119751" author="sergey_beryozkin" created="Wed, 9 Aug 2017 11:39:49 +0000"  >&lt;p&gt;I&apos;ve applied your patch with some updates. I thought changing the content type to stop the pretty printing was a bit problematic so I introduced a new flag &apos;truncated&apos; to make it obvious what to check for. The problem with my update is that I changed the protected method&apos;s signature but I thought if someone does have a code which overrides this method (which I doubt) then this custom code may be also logging the content type somewhere so we can have a case of say text/xml and text/plain logged at the same time, so in the end changing the signature is probably the best.&lt;br/&gt;
Dan - any concerns with it - please revert&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13003522">CXF-7044</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gqhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>