<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:37:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2318] Invalid message created when using MTOM and WS-RM</title>
                <link>https://issues.apache.org/jira/browse/CXF-2318</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When using WS-RM and MTOM, the generated message content is:&lt;/p&gt;

&lt;p&gt;POST /services/SayHello HTTP/1.1&lt;/p&gt;

&lt;p&gt;Content-Type: multipart/related; type=&quot;application/xop+xml&quot;; boundary=&quot;uuid:d861ffd6-2559-491d-b995-4420ac2e99e0&quot;; start=&quot;&amp;lt;root.message@cxf.apache.org&amp;gt;&quot;; start-info=&quot;application/soap+xml&quot;&lt;/p&gt;

&lt;p&gt;Accept: &lt;b&gt;/&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;User-Agent: Apache CXF 2.2.2&lt;/p&gt;

&lt;p&gt;Cache-Control: no-cache&lt;/p&gt;

&lt;p&gt;Pragma: no-cache&lt;/p&gt;

&lt;p&gt;Host: localhost:12345&lt;/p&gt;

&lt;p&gt;Connection: keep-alive&lt;/p&gt;

&lt;p&gt;Content-Length: 1619&lt;/p&gt;





&lt;p&gt;--uuid:d861ffd6-2559-491d-b995-4420ac2e99e0&lt;/p&gt;

&lt;p&gt;Content-Type: application/xop+xml; charset=UTF-8; type=&quot;application/soap+xml&quot;;&lt;/p&gt;

&lt;p&gt;Content-Transfer-Encoding: binary&lt;/p&gt;

&lt;p&gt;Content-ID: &amp;lt;root.message@cxf.apache.org&amp;gt;&lt;/p&gt;





&lt;p&gt;--uuid:d861ffd6-2559-491d-b995-4420ac2e99e0&lt;/p&gt;

&lt;p&gt;Content-Type: application/octet-stream&lt;/p&gt;

&lt;p&gt;Content-Transfer-Encoding: binary&lt;/p&gt;

&lt;p&gt;Content-ID: &amp;lt;d027f743-11a2-45e8-b95e-592f8b751bb4-1@&lt;a href=&quot;http://cxf.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/&lt;/a&gt;&amp;gt;&lt;/p&gt;



&lt;p&gt;attachment content&lt;/p&gt;

&lt;p&gt;-&lt;del&gt;uuid:d861ffd6-2559-491d-b995-4420ac2e99e0&lt;/del&gt;-&amp;lt;soap:Envelope xmlns:soap=&quot;http://www.w3.org/2003/05/soap-envelope&quot;&amp;gt;&amp;lt;soap:Header&amp;gt;&amp;lt;Action xmlns=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot;&amp;gt;&lt;a href=&quot;http://example.com/sayHello/ISayHello/hello&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.com/sayHello/ISayHello/hello&lt;/a&gt;&amp;lt;/Action&amp;gt;&amp;lt;MessageID xmlns=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot;&amp;gt;urn:uuid:a2a9917b-4579-4945-aa38-e0da657dbbb4&amp;lt;/MessageID&amp;gt;&amp;lt;To xmlns=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot;&amp;gt;&lt;a href=&quot;http://localhost:12345/services/SayHello&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:12345/services/SayHello&lt;/a&gt;&amp;lt;/To&amp;gt;&amp;lt;ReplyTo xmlns=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot;&amp;gt;&amp;lt;Address&amp;gt;&lt;a href=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous&lt;/a&gt;&amp;lt;/Address&amp;gt;&amp;lt;/ReplyTo&amp;gt;&amp;lt;wsrm:Sequence xmlns:ns2=&quot;http://schemas.xmlsoap.org/ws/2004/08/addressing&quot; xmlns:wsrm=&quot;http://schemas.xmlsoap.org/ws/2005/02/rm&quot;&amp;gt;&amp;lt;wsrm:Identifier&amp;gt;urn:uuid:b5383bf0-2444-4af8-b923-146d02610ab5&amp;lt;/wsrm:Identifier&amp;gt;&amp;lt;wsrm:MessageNumber&amp;gt;1&amp;lt;/wsrm:MessageNumber&amp;gt;&amp;lt;/wsrm:Sequence&amp;gt;&amp;lt;/soap:Header&amp;gt;&amp;lt;soap:Body&amp;gt;&amp;lt;ns1:hello xmlns:ns1=&quot;http://example.com/sayHello&quot;&amp;gt;&amp;lt;arg0&amp;gt;john&amp;lt;/arg0&amp;gt;&amp;lt;arg1&amp;gt;&amp;lt;xop:Include xmlns:xop=&quot;http://www.w3.org/2004/08/xop/include&quot; href=&quot;cid:d027f743-11a2-45e8-b95e-592f8b751bb4-1@http%3A%2F%2Fcxf.apache.org%2F&quot;/&amp;gt;&amp;lt;/arg1&amp;gt;&amp;lt;/ns1:hello&amp;gt;&amp;lt;/soap:Body&amp;gt;&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;



&lt;p&gt;The soap envelope is sent after the last attachment instead of being in the &amp;lt;root.message@cxf.apache.org&amp;gt; part.&lt;/p&gt;

&lt;p&gt;This bug seems to be caused by :&lt;br/&gt;
1- the AttachmentOutInterceptor writes the prolog by using the current message outputstream (OS1)&lt;br/&gt;
2- the RetransmissionInterceptor wraps the message outputstream in a WriteOnCloseOutputStream (OS2)&lt;br/&gt;
3- the soap envelope is written in the current message outputsream OS2.&lt;br/&gt;
4- the attachments are written in the outputstream OS1 used to write the prolog.&lt;br/&gt;
5- the WriteOnCloseOutputstream OS2 is closed, and the soap envelope is appended in the wrapped outputstream OS1.&lt;/p&gt;


&lt;p&gt;Setting the RetransmissionInterceptor to be before AttachmentOutInterceptor in the interceptor chain seems to solve this issue.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12428946">CXF-2318</key>
            <summary>Invalid message created when using MTOM and WS-RM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="porcherg">Guillaume Porcher</reporter>
                        <labels>
                    </labels>
                <created>Fri, 26 Jun 2009 10:12:34 +0000</created>
                <updated>Mon, 3 Aug 2009 20:07:00 +0000</updated>
                            <resolved>Tue, 30 Jun 2009 15:28:20 +0000</resolved>
                                    <version>2.2.2</version>
                                    <fixVersion>2.0.12</fixVersion>
                    <fixVersion>2.1.6</fixVersion>
                    <fixVersion>2.2.3</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>113749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0v0fb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>179042</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>