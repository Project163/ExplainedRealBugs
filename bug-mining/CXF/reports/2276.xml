<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:10:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3272] WS-RM returns Fault for duplicate message received, should probably return acknowledgement instead</title>
                <link>https://issues.apache.org/jira/browse/CXF-3272</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The WS-RM Destination code currently throws an exception when a duplicate message is received if using AtMostOnce or ExactlyOnce delivery assurances. This gets turned into a Fault which means nothing to the RM Source, and may interfere with the proper operation of other WS-RM implementations.&lt;/p&gt;

&lt;p&gt;A better way to handle this is to return an HTTP 200 OK status (or equivalent for other transports) along with a SequenceAcknowledgement, so that the RM Source gets back information to help it in recovery.&lt;/p&gt;

&lt;p&gt;For one-way scenarios this can just be returned directly. For two-way scenarios it should be returned along with a copy of the application response to the original message (at least if an Offer was included in the original CreateSequence and accepted by the RM Destination, meaning RM is operating in both directions of message flow - see the Replay model implemented by Metro, along with at least some versions of .Net and Axis2/Sandesha2: &lt;a href=&quot;http://wso2.org/library/2792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wso2.org/library/2792&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Metro&apos;s handling is interesting. If RM is operating in the response direction they naturally hold a copy of each response message until acknowledged, but then even after the message has been acknowledged they use a WeakReference to keep it available until it is reclaimed by GC. If RM is &lt;b&gt;not&lt;/b&gt; operating in the response direction they still appear to keep the response available with a WeakReference, allowing it to be resent in response to a duplicate message. That seems like a good approach.&lt;/p&gt;

&lt;p&gt;If the response message is not available, is there any reason not to use an HTTP 200 response and send back a SOAP message with only the SequenceAcknowledgement?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12496406">CXF-3272</key>
            <summary>WS-RM returns Fault for duplicate message received, should probably return acknowledgement instead</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dsosnoski">Dennis M. Sosnoski</assignee>
                                    <reporter username="dsosnoski">Dennis M. Sosnoski</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 Jan 2011 01:00:10 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:33 +0000</updated>
                            <resolved>Mon, 23 Jun 2014 01:35:01 +0000</resolved>
                                    <version>2.3.2</version>
                                    <fixVersion>3.0.1</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14001685" author="ay" created="Mon, 19 May 2014 13:36:53 +0000"  >&lt;p&gt;Hi Dennis,&lt;br/&gt;
do you have an update to this item?&lt;br/&gt;
thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="14002397" author="dsosnoski" created="Mon, 19 May 2014 21:10:56 +0000"  >&lt;p&gt;I&apos;ll get a fix in for this. Though in looking it over now I don&apos;t see any reason to hold WeakReferences to the messages - if the response has been acknowledged we can drop it, and if the same request is sent in again (which shouldn&apos;t happen, since the response would include an acknowledgement of the request the first time it was sent) we can just use an empty SOAP message.&lt;/p&gt;</comment>
                            <comment id="14002533" author="ay" created="Mon, 19 May 2014 22:47:52 +0000"  >&lt;p&gt;Hi Dennis,&lt;br/&gt;
For the oneway case, most clients expect to receive an ack message with the current ack ranges. If you can get this oneway handling working, that would be great. &lt;/p&gt;

&lt;p&gt;Regarding the request-response case, the response message is queued and its delivery is handled independently of any subsequent retransmission of the original request, right? In that case,  I think not including (or triggering) the response as you suggest seems to be the correct behavior.&lt;/p&gt;

&lt;p&gt;thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="14040332" author="dsosnoski" created="Mon, 23 Jun 2014 01:35:01 +0000"  >&lt;p&gt;Fixed by &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/c613aa49&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/c613aa49&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46949</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1afgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>268972</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>