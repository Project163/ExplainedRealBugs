<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:51:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4072] NPE in PhaseInterceptorChain </title>
                <link>https://issues.apache.org/jira/browse/CXF-4072</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;NPE is thrown in PhaseInterceptorChain when fault is thrown in WS impl method:&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException: null&lt;br/&gt;
 at org.apache.cxf.interceptor.FaultOutInterceptor.getFaultForClass(FaultOutInterceptor.java:163)&lt;br/&gt;
 at org.apache.cxf.interceptor.FaultOutInterceptor.handleMessage(FaultOutInterceptor.java:67)&lt;br/&gt;
 at org.apache.cxf.jaxws.interceptors.WebFaultOutInterceptor.handleMessage(WebFaultOutInterceptor.java:136)&lt;br/&gt;
 at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)&lt;br/&gt;
 at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:107)&lt;br/&gt;
 at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:323)&lt;br/&gt;
 at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123)&lt;br/&gt;
 at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:207)&lt;br/&gt;
 at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:213)&lt;br/&gt;
 at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:193)&lt;br/&gt;
 at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:126)&lt;br/&gt;
 at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:185)&lt;br/&gt;
 at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:108)&lt;br/&gt;
 &amp;lt;...&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12540141">CXF-4072</key>
            <summary>NPE in PhaseInterceptorChain </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="allati">Vadim Dmitriev</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jan 2012 15:34:13 +0000</created>
                <updated>Mon, 23 Apr 2012 16:45:43 +0000</updated>
                            <resolved>Thu, 2 Feb 2012 11:26:46 +0000</resolved>
                                    <version>2.5.2</version>
                                    <fixVersion>2.4.7</fixVersion>
                    <fixVersion>2.5.3</fixVersion>
                    <fixVersion>2.6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13194852" author="allati" created="Fri, 27 Jan 2012 15:35:49 +0000"  >&lt;p&gt;Full message processing log&lt;/p&gt;</comment>
                            <comment id="13194905" author="ay" created="Fri, 27 Jan 2012 16:44:01 +0000"  >&lt;p&gt;Hi Vadim,&lt;br/&gt;
Initially, I thought there seemed to be an issue.&lt;br/&gt;
But somehow I am not able to reproduce the problem. &lt;br/&gt;
I would like to understand why an NPE is thrown from that line.&lt;/p&gt;

&lt;p&gt;Do you have a test case that I can look at?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;br/&gt;
Regards, aki&lt;/p&gt;</comment>
                            <comment id="13195476" author="allati" created="Sat, 28 Jan 2012 10:04:17 +0000"  >&lt;p&gt;Hi, Aki. Thanks for the quick response.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do you have a test case that I can look at?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Sadly, no. I was unable to reproduce the issue in my developer&apos;s environment. This issue is definitely related to the preproduction server and I have very limited and time restricted access to it.&lt;/p&gt;

&lt;p&gt;Maybe I could put additional logging statements in the PhaseChainInterceptor or some other CXF classes to clarify the initial cause of the issue for you? In the mean time I&apos;ll try to stuff some recording software onto preproduction server (something like Omniscient Debugger or Chronon).&lt;/p&gt;</comment>
                            <comment id="13196015" author="ay" created="Mon, 30 Jan 2012 09:57:32 +0000"  >&lt;p&gt;Hi Vadim,&lt;/p&gt;

&lt;p&gt;Something unexpected is likely to be occurring at the service setup that later leads to this problem. So, when we get to that interceptor during the interceptor processing, I think it is already too late. Therefore, it would be difficult in looking into the logging before knowing more about your scenario and the specific environment where this problem occurs.&lt;/p&gt;

&lt;p&gt;Could you describe:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;how have you configured the scenario&lt;/li&gt;
	&lt;li&gt;what is specific about the environment where this problem occurs (container, component versions, etc)&lt;/li&gt;
	&lt;li&gt;does the problem occur sporadically there or always?&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks.&lt;br/&gt;
Regards, aki&lt;/p&gt;</comment>
                            <comment id="13196104" author="allati" created="Mon, 30 Jan 2012 13:22:52 +0000"  >&lt;p&gt;Hello!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;How have you configured the scenario&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;CXFServlet configures itself according to cxf.xml. I&apos;ll attach config and stripped down public part of WSDL shortly.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What is specific about the environment where this problem occurs (container, component versions, etc)&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Info from WebLogic admin console
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WebLogic Version&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;WebLogic Server 10.3.2.0 Tue Oct 20 12:16:15 PDT 2009 1267925&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java Vendor&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Hewlett-Packard Company&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;Java Version&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1.6.0.12&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OS Name&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;HP-UX&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;OS Version&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;B.11.31&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JRE identifies itself as &quot;Java HotSpot(TM) Server VM Version 20.1-b02-jre1.6.0.12-rc1b1 from &quot;Hewlett-Packard Company&quot;&quot;&lt;/li&gt;
	&lt;li&gt;CXF 2.5.2 (tried all 2.5.x releases as well)&lt;/li&gt;
&lt;/ul&gt;


&lt;blockquote&gt;&lt;p&gt;Does the problem occur sporadically there or always?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Application redeployment within appserver hasn&apos;t affected the issue in any way and we can&apos;t restart preproduction server to check if it will solve the problem.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Vadim&lt;/p&gt;</comment>
                            <comment id="13196106" author="allati" created="Mon, 30 Jan 2012 13:23:46 +0000"  >&lt;p&gt;CXF config and WSDL&lt;/p&gt;</comment>
                            <comment id="13197366" author="ay" created="Tue, 31 Jan 2012 23:07:47 +0000"  >&lt;p&gt;Hi Vadim,&lt;br/&gt;
thanks for the scenario example.&lt;/p&gt;

&lt;p&gt;I could reproduce the problem. When a body-less fault message is defined and this exception is thrown from a jaxws endpoint, it seems to lead to this erroneous situation. We will provide a patch for this problem shortly.&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="13197404" author="dkulp" created="Wed, 1 Feb 2012 00:06:44 +0000"  >&lt;p&gt;As a note, this would be an invalid WSDL and likely should throw a fault.&lt;/p&gt;

&lt;p&gt;According to the WSDL spec, section 3.6:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;The fault message MUST have a single part. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thus, this is invalid as it does not have that single part.&lt;/p&gt;</comment>
                            <comment id="13197611" author="allati" created="Wed, 1 Feb 2012 06:30:51 +0000"  >&lt;p&gt;Aki, Daniel, thank you very much for the help.&lt;/p&gt;

&lt;p&gt;I suspected that body-less fault might be an error, but I was thrown off track by this scenario to be working in my environment. I&apos;ll fix my WSDL then.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Vadim.&lt;/p&gt;</comment>
                            <comment id="13197724" author="ay" created="Wed, 1 Feb 2012 10:02:55 +0000"  >&lt;p&gt;Hi Dan,&lt;br/&gt;
Thanks for the information.&lt;/p&gt;

&lt;p&gt;That means, we should detect this condition at the endpoint setup (or at code generation) and throw an exception?&lt;/p&gt;

&lt;p&gt;I am not sure if there is another way to cause this condition.&lt;br/&gt;
In any case, we could also check this condition during the runtime and handle it as an error so that a SOAP fault is returned to the client. Currently, this NPE gets swallowed and an empty HTTP 200 response is returned. &lt;/p&gt;

&lt;p&gt;Regards, aki&lt;/p&gt;</comment>
                            <comment id="13197923" author="ay" created="Wed, 1 Feb 2012 16:04:57 +0000"  >&lt;p&gt;Hi Dan,&lt;br/&gt;
I thought about what I said.&lt;/p&gt;

&lt;p&gt;I think we should check this condition only after an exception is thrown. In that way, we won&apos;t be influencing any scenarios that are working fine as long as no exception is thrown.&lt;/p&gt;

&lt;p&gt;I will only make a change in FaultOutInterceptor to avoid this NPE so that a server fault is returned to the client by the default fault handling.&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="13197928" author="dkulp" created="Wed, 1 Feb 2012 16:13:11 +0000"  >
&lt;p&gt;Aki, &lt;/p&gt;

&lt;p&gt;For 2.5.x (and earlier), that makes sense.   For 2.6, it might be good to also enforce at setup time.  In general, I prefer know up front when something isn&apos;t going to work.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

</comment>
                            <comment id="13198309" author="ay" created="Wed, 1 Feb 2012 23:25:34 +0000"  >&lt;p&gt;Hi Dan,&lt;/p&gt;

&lt;p&gt;I guarded against NPE and added the following warning text at setup for now.&lt;/p&gt;

&lt;p&gt;  WARNUNG: Could not find a fault part for $faultqname. The fault message must have a single part.&lt;/p&gt;

&lt;p&gt;We could add a throw-exception line for 2.6 here. But I was little concerned about enforcing this rule at setup. Some people might have some legacy WSDLs which are not in their control. &lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="13240745" author="genjosanzo" created="Wed, 28 Mar 2012 21:26:02 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;That would be a great piece of information. However i&apos;ve been looking around for an example of a single part fault without any luck. Could you provide me one?&lt;/p&gt;

&lt;p&gt;Thanks in advance&lt;br/&gt;
Alberto&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12512413" name="cxf.xml" size="1406" author="allati" created="Mon, 30 Jan 2012 13:23:46 +0000"/>
                            <attachment id="12512181" name="full_processing_log.txt" size="32947" author="allati" created="Fri, 27 Jan 2012 15:35:49 +0000"/>
                            <attachment id="12512414" name="service.wsdl" size="2411" author="allati" created="Mon, 30 Jan 2012 13:23:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225556</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 34 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b85b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63432</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>