<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:00:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4947] Potential problems with the JAXBContext being null</title>
                <link>https://issues.apache.org/jira/browse/CXF-4947</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I post a mail to mail list to describe this. And Daniel fixed it very quickly. I still open this JIRA to record this issue, so that I can get a numbered patch merging to my runtime. Thanks.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;br/&gt;
hi devs,&lt;br/&gt;
I found some intermittent NullpointerException, and it is very hard to reproduce but I did have met a lot of times, and it is thrown from different places from runtime:&lt;br/&gt;
Stack Dump = java.lang.NullPointerException&lt;br/&gt;
    at org.apache.cxf.common.jaxb.JAXBUtils.generateJaxbSchemas(JAXBUtils.java:765)&lt;br/&gt;
    at org.apache.cxf.jaxb.JAXBDataBinding.generateJaxbSchemas(JAXBDataBinding.java:440)&lt;br/&gt;
    at org.apache.cxf.jaxb.JAXBDataBinding.initialize(JAXBDataBinding.java:363)&lt;br/&gt;
    at org.apache.cxf.service.factory.AbstractServiceFactoryBean.initializeDataBindings(AbstractServiceFactoryBean.java:86)&lt;br/&gt;
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass(ReflectionServiceFactoryBean.java:469)&lt;br/&gt;
    at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.buildServiceFromClass(JaxWsServiceFactoryBean.java:690)&lt;br/&gt;
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.initializeServiceModel(ReflectionServiceFactoryBean.java:531)&lt;br/&gt;
    at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:247)&lt;/p&gt;

&lt;p&gt;After checking the codes, they are all about the jaxbcontext is null.&lt;br/&gt;
From the JAXBContextCache.CachedContextAndSchemas, I notice this line:&lt;br/&gt;
private WeakReference&amp;lt;JAXBContext&amp;gt; context;&lt;/p&gt;

&lt;p&gt;IMHO, WeakReference is not a good choice to do cache, it could be gc in any time. For example,&lt;br/&gt;
JAXBContextCache.getCachedContextAndSchemas(..)&lt;br/&gt;
&amp;lt;gc&amp;gt;&lt;br/&gt;
ctx = cachedContextAndSchemas.getContext()    &amp;lt;-- then the ctx will be null here&lt;/p&gt;

&lt;p&gt;So I guess this is the root cause of the intermittent issue. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12640800">CXF-4947</key>
            <summary>Potential problems with the JAXBContext being null</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="rwonly">Lei Wang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Apr 2013 16:05:54 +0000</created>
                <updated>Tue, 6 Dec 2016 13:52:22 +0000</updated>
                            <resolved>Mon, 29 Apr 2013 19:21:03 +0000</resolved>
                                    <version>2.7.4</version>
                    <version>2.6.7</version>
                                    <fixVersion>2.6.8</fixVersion>
                    <fixVersion>2.7.5</fixVersion>
                    <fixVersion>2.5.11</fixVersion>
                                    <component>JAXB Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13622460" author="rwonly" created="Thu, 4 Apr 2013 16:08:50 +0000"  >&lt;p&gt;upload some diff files that how Daniel fixed this issue. &lt;/p&gt;</comment>
                            <comment id="13632653" author="rwonly" created="Tue, 16 Apr 2013 08:17:13 +0000"  >&lt;p&gt;reopen this and upload a new patch.&lt;/p&gt;</comment>
                            <comment id="13632663" author="rwonly" created="Tue, 16 Apr 2013 08:33:03 +0000"  >&lt;p&gt;upload &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4947&quot; title=&quot;Potential problems with the JAXBContext being null&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4947&quot;&gt;&lt;del&gt;CXF-4947&lt;/del&gt;&lt;/a&gt;-2.patch, the patch is for br2.6.&lt;br/&gt;
The main changes are:&lt;br/&gt;
1. add a new construct method in CachedContextAndSchemas:&lt;br/&gt;
  private CachedContextAndSchemas(JAXBContext context, Set&amp;lt;Class&amp;lt;?&amp;gt;&amp;gt; classes, CachedContextAndSchemasInternal i)&lt;br/&gt;
and then in getCachedContextAndSchemas()&lt;br/&gt;
  return new CachedContextAndSchemas(context, classes, cachedContextAndSchemasInternal);&lt;br/&gt;
so that we can hold the strong reference of context till the method is returned.&lt;br/&gt;
2. rename all local variable cachedContextAndSchemas to cachedContextAndSchemasInternal in getCachedContextAndSchemas()&lt;br/&gt;
so that this part of code is more readable..&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13025965">CXF-7166</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12578899" name="CXF-4947-2.patch" size="4517" author="rwonly" created="Tue, 16 Apr 2013 08:18:16 +0000"/>
                            <attachment id="12578898" name="CXF-4947.patch" size="5942" author="rwonly" created="Tue, 16 Apr 2013 08:18:16 +0000"/>
                            <attachment id="12576993" name="r1464133_for_trunk.diff" size="5127" author="rwonly" created="Thu, 4 Apr 2013 16:08:50 +0000"/>
                            <attachment id="12576994" name="r1464141_for_br2.6.x.diff" size="5260" author="rwonly" created="Thu, 4 Apr 2013 16:08:50 +0000"/>
                            <attachment id="12576995" name="r1464185_for_br2.6.x.diff" size="689" author="rwonly" created="Thu, 4 Apr 2013 16:08:50 +0000"/>
                            <attachment id="12577169" name="r1464627_for_tr.diff" size="2453" author="rwonly" created="Fri, 5 Apr 2013 06:28:26 +0000"/>
                            <attachment id="12577166" name="r1464632_for_br2.6.x.diff" size="2273" author="rwonly" created="Fri, 5 Apr 2013 06:09:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321259</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 32 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jfhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321604</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>