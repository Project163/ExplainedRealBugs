<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:15:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6380] Context provider not working</title>
                <link>https://issues.apache.org/jira/browse/CXF-6380</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Come from a TCK test. In the test, there is an Entity provider with readFrom returns null. And a context provider which provides a customized JAXBContext and corresponding  Marshaller and unmarshaller.&lt;br/&gt;
@Provider&lt;br/&gt;
public class JaxbContextProvider&lt;br/&gt;
    implements ContextResolver&lt;br/&gt;
{&lt;br/&gt;
    public JAXBContext getContext(Class type)&lt;/p&gt;
    {
        JAXBContext ctx = new MyJaxbContext();
        return ctx;
    }
&lt;p&gt;    public volatile Object getContext(Class clazz)&lt;/p&gt;
    {
        return getContext(clazz);
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;@Provider&lt;br/&gt;
public class MyJaxbProvider&lt;br/&gt;
    implements MessageBodyReader, MessageBodyWriter&lt;br/&gt;
{&lt;/p&gt;

&lt;p&gt;......&lt;/p&gt;

&lt;p&gt;    public JAXBElement readFrom(Class type, Type genericType, Annotation annotations[], MediaType mediatype, MultivaluedMap multivaluedmap, InputStream inputstream)&lt;br/&gt;
        throws IOException, WebApplicationException&lt;/p&gt;
    {
        return null;
    }
&lt;p&gt;......&lt;/p&gt;

&lt;p&gt;}&lt;br/&gt;
And there is  a resource class which returns a JAXBElement object.&lt;br/&gt;
@Path(&quot;resource&quot;)&lt;br/&gt;
public class Resource&lt;br/&gt;
{&lt;br/&gt;
    @Path(&quot;jaxb&quot;)&lt;br/&gt;
    @POST&lt;br/&gt;
    public JAXBElement jaxb(JAXBElement jaxb)&lt;/p&gt;
    {
        return jaxb;
    }
&lt;p&gt;}&lt;br/&gt;
When accessing this resource, I found only the entity provider is working, and  null response(status code 204) is returned. And the context Provider was not working(getContext method defined in this provider was not triggered at all).&lt;br/&gt;
When removing this entity provider from our test application, the context provider is working and an JAXB object is mashalled to the response(with status code 200).&lt;/p&gt;


&lt;p&gt;In the JSR339, I only found following declaration about the usage of entity provider and context provider.&lt;/p&gt;

&lt;p&gt;See 4.2.4 &lt;br/&gt;
An implementation MUST support application-provided entity providers and MUST use those in preference&lt;br/&gt;
to its own pre-packaged providers when either could handle the same request. More precisely, step&lt;br/&gt;
4 in Section 4.2.1 and step 5 in Section 4.2.2 MUST prefer application-provided over pre-packaged entity&lt;br/&gt;
providers.&lt;/p&gt;


&lt;p&gt;In my understanding, if user only defines its own context provider without customized entity provider, application providered context provider should be preferred over CXF default implmentation of entity provider.&lt;/p&gt;

&lt;p&gt;And this usage of both customized context provider and customerized entity provider, which provider should be prefered is out of specification definition.&lt;/p&gt;

&lt;p&gt;But when testing on Apache/Jersy with this test applicatoin, response with status code 200 is returned.&lt;/p&gt;

&lt;p&gt;Would you please advice if this can be a defect in CXF, or you think it&apos;s out of specification definition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12826185">CXF-6380</key>
            <summary>Context provider not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="weiz">Wei Zheng</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Apr 2015 02:01:12 +0000</created>
                <updated>Mon, 10 Apr 2017 19:06:56 +0000</updated>
                            <resolved>Thu, 30 Apr 2015 14:07:06 +0000</resolved>
                                    <version>3.0.3</version>
                                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14521519" author="sergey_beryozkin" created="Thu, 30 Apr 2015 13:59:04 +0000"  >&lt;p&gt;I&apos;ve confirmed that a registered JaxbContextResolver is called by the default CXF JAXB provider. &lt;br/&gt;
See the section 4.3 in the spec: &quot;E.g., an application wishing to provide a customized JAXBContext to the &lt;b&gt;default&lt;/b&gt; JAXB entity&lt;br/&gt;
providers would supply a class implementing ContextResolver&amp;lt;JAXBContext&amp;gt; .&quot;&lt;/p&gt;

&lt;p&gt;So if MyJaxbProvider is registered - then MyJaxbProvider is called.&lt;br/&gt;
I.e the test fails because CXF calls MyJaxbProvider.&lt;/p&gt;

&lt;p&gt;The question is - why CXF should not call MyJaxbProvider ?&lt;/p&gt;

&lt;p&gt;I don&apos;t understand...&lt;/p&gt;</comment>
                            <comment id="14521532" author="sergey_beryozkin" created="Thu, 30 Apr 2015 14:06:37 +0000"  >&lt;p&gt;The reason this test fails is that a provided MessageBodyReader has to be ignored because of the rather unfortunate spec requirement, the default JAXBProvider has Consumes, the custom provider does not -&amp;gt; hence it is expected to be ignored, sigh...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12783533">CXF-6307</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2e4cf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>