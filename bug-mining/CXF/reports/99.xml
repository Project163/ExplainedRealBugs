<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:34:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1743] Temporary files are not deleted</title>
                <link>https://issues.apache.org/jira/browse/CXF-1743</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I have endpoint declared in Spring as follows:&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
	&amp;lt;jaxws:endpoint id=&quot;importService&quot;&lt;br/&gt;
		implementor=&quot;my.ImportServiceImpl&quot;&lt;br/&gt;
		address=&quot;/importService&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;jaxws:properties&amp;gt;&lt;br/&gt;
			&amp;lt;entry key=&quot;mtom-enabled&quot; value=&quot;true&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/jaxws:properties&amp;gt;&lt;br/&gt;
	&amp;lt;/jaxws:endpoint&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;During tests I discovered, that large attachments (&amp;gt;64k), which are saved in temporary files, are not removed after processing SOAP message.&lt;/p&gt;

&lt;p&gt;I&apos;ve analysed sources of org.apache.cxf.attachment.AttachmentDataSource and org.apache.cxf.io.CachedOutputStream and discovered that AttachmentDataSource does not allow to close cache. &lt;br/&gt;
The only solution is to add close() method to AttachmentDataSource and close cache manually.&lt;/p&gt;





</description>
                <environment>&lt;p&gt;Linux, FreeBSD&lt;/p&gt;</environment>
        <key id="12402133">CXF-1743</key>
            <summary>Temporary files are not deleted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="rostrzycki">R.O.</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Aug 2008 15:18:55 +0000</created>
                <updated>Wed, 18 Feb 2009 16:37:11 +0000</updated>
                            <resolved>Tue, 12 Aug 2008 19:07:56 +0000</resolved>
                                    <version>2.1.1</version>
                    <version>2.1.2</version>
                                    <fixVersion>2.1.2</fixVersion>
                    <fixVersion>2.0.9</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12621768" author="rostrzycki" created="Tue, 12 Aug 2008 10:59:57 +0000"  >&lt;p&gt;My solution (hack) of this bug:&lt;/p&gt;

&lt;p&gt;1. add close() method to AttachmentDataSource:&lt;br/&gt;
    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The only way to clean temporary files.&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;@throws IOException if closing cache threw an exception.&lt;br/&gt;
     */&lt;br/&gt;
    public void close() throws IOException 
{
        cache.close();
    }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;2. manually close LazyDataSource objects used to access uploaded attachments using such helper method:&lt;/p&gt;

&lt;p&gt;	public static void closeDatasource(DataSource ds) {&lt;br/&gt;
		if(ds != null &amp;amp;&amp;amp; ds instanceof LazyDataSource) {&lt;br/&gt;
			if(((LazyDataSource) ds).getDataSource() instanceof AttachmentDataSource) {&lt;br/&gt;
				AttachmentDataSource attDS = (AttachmentDataSource) ((LazyDataSource) ds).getDataSource();&lt;br/&gt;
				try &lt;/p&gt;
{
					attDS.close();
				}
&lt;p&gt; catch (IOException e) &lt;/p&gt;
{
					// logger.error(e.getMessage(), e);
				}
&lt;p&gt;			}&lt;br/&gt;
		}&lt;/p&gt;

&lt;p&gt;	}&lt;/p&gt;

&lt;p&gt;This fixes this bug in 2.1.1 and probably in 2.1.2-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="12621911" author="dkulp" created="Tue, 12 Aug 2008 18:12:02 +0000"  >
&lt;p&gt;What&apos;s SUPPOSED to happen is when the input stream is closed, the file is deleted.   This isn&apos;t actually working though.   &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;       I&apos;m testing a fix now.&lt;/p&gt;
</comment>
                            <comment id="12644269" author="utuba" created="Fri, 31 Oct 2008 12:07:07 +0000"  >&lt;p&gt;I&apos;ve just tested this in the 2.1.3 version under linux (opensuse 11) and it doesn&apos;t generate files anymore.  Under Windows server 2008 its still leaves the files lying around.  Both use the latest java 6 release.  Have you tested it under windows at any time?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12415071">CXF-2049</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112525</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sygf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>167059</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>