<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:38:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8544] SseEventSink cannot be used in a @POST resource method</title>
                <link>https://issues.apache.org/jira/browse/CXF-8544</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;It is possible (and legal according to the JAX-RS specification) to inject a SseEventSink into a resource method annotated with @POST. This works, but the Server Sent Event stream gets automatically closed after the first event is sent. This prevents any @POST resource method from sending Server Sent Events using the API.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13380784">CXF-8544</key>
            <summary>SseEventSink cannot be used in a @POST resource method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="timothyjward">Timothy James Ward</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 May 2021 13:44:26 +0000</created>
                <updated>Wed, 22 Dec 2021 20:41:43 +0000</updated>
                            <resolved>Wed, 30 Jun 2021 01:21:43 +0000</resolved>
                                    <version>3.2.14</version>
                    <version>3.4.4</version>
                    <version>3.3.11</version>
                                    <fixVersion>3.5.0</fixVersion>
                    <fixVersion>3.3.12</fixVersion>
                    <fixVersion>3.4.5</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17352871" author="reta" created="Thu, 27 May 2021 23:07:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timothyjward&quot; class=&quot;user-hover&quot; rel=&quot;timothyjward&quot;&gt;timothyjward&lt;/a&gt; the JAX-RS follows the Server-Sent Events specification &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, which indeed does not explicitly mention what HTTP method should be used on the server side and on client side as well &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;. Nonetheless, as of today the&#160;&lt;tt&gt;EventSource&lt;/tt&gt; /&#160;&lt;tt&gt;SseEventSource&lt;/tt&gt; uses GET and does not provide the way to alter the HTTP method, so the server matches these expectations. With that being said, there should be no technical obstacles in supporting POST as far as &lt;tt&gt;EventSource&lt;/tt&gt; /&#160;&lt;tt&gt;SseEventSource&lt;/tt&gt;&#160; are not in use. In turn, you could just fallback to streaming response instead, why do you need SSE? (as a side node, CXF also supports Websockets &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;).&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; [https://html.spec.whatwg.org/#server-sent-events&lt;br/&gt;
]&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://html.spec.whatwg.org/multipage/server-sent-events.html#the-eventsource-interface&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://cxf.apache.org/docs/websocket.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cxf.apache.org/docs/websocket.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17353491" author="timothyjward" created="Fri, 28 May 2021 17:59:17 +0000"  >&lt;p&gt;You are correct that I could recreate SSE from my POST method using a streaming response, but this seems like a poor practice given that CXF already has SSE support. &lt;/p&gt;

&lt;p&gt;In my use case I already have a RESTful API, which has some SSE methods where the events represent real events from IoT sensors. The existing GET requests allow you to receive data updates or triggers from particular devices, or groups of devices, using the REST hierarchy. &lt;br/&gt;
My clients often want to receive events within a geofenced area. This is hugely more efficient to do on the server side, but the geojson representation of the fence maps very poorly to query parameters. It also makes the URL very large (commonly 1000+ chars) and frequently hits URL size limits. &lt;br/&gt;
A POST request with the JSON representing the fence as the body is much simpler, and mirrors other places in the REST API where POST is used to pass the fence definition. &lt;/p&gt;

&lt;p&gt;I don&#8217;t want to use websocket for this as the whole of the rest of the API already exists using REST, and there is no need for bidirectional communication once the request has been received. &lt;/p&gt;

&lt;p&gt;I hope this helps to clarify where I&#8217;m coming from. Thanks for taking the time to review this request. &lt;/p&gt;</comment>
                            <comment id="17353837" author="reta" created="Sat, 29 May 2021 18:38:28 +0000"  >&lt;p&gt;Thanks for the context &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=timothyjward&quot; class=&quot;user-hover&quot; rel=&quot;timothyjward&quot;&gt;timothyjward&lt;/a&gt; , I think it should be possible to have POST support for SSE, I will try to look into it shortly with respect to figuring out why it dos not work out of the box.&lt;/p&gt;</comment>
                            <comment id="17359284" author="timothyjward" created="Tue, 8 Jun 2021 11:07:05 +0000"  >&lt;p&gt;Hi - I have been able to create a relatively simple failing test demonstrating the problem, and I have submitted it &lt;a href=&quot;https://github.com/apache/cxf/pull/812&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;as a PR&lt;/a&gt;. I&apos;ve had to parse the event stream by hand in the test as the JAX-RS SSE client doesn&apos;t permit POST requests.&lt;/p&gt;

&lt;p&gt;If the test is changed to use a get request (with the necessary HTTP Header set) then it passes, but the POST fails, with the response closing after the string &quot;event:&quot; has been sent.&lt;/p&gt;</comment>
                            <comment id="17359294" author="timothyjward" created="Tue, 8 Jun 2021 11:44:24 +0000"  >&lt;p&gt;The problem seems to come from the SseInterceptor &lt;a href=&quot;https://github.com/apache/cxf/blob/fe96f67d273680c711b940a9ac4c6a369243a5c5/rt/rs/sse/src/main/java/org/apache/cxf/jaxrs/sse/interceptor/SseInterceptor.java#L76-L84&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/blob/fe96f67d273680c711b940a9ac4c6a369243a5c5/rt/rs/sse/src/main/java/org/apache/cxf/jaxrs/sse/interceptor/SseInterceptor.java#L76-L84&lt;/a&gt; - these lines copy the &lt;b&gt;request&lt;/b&gt; headers into the response. As my request has a` Content-Length` of `2` (from the POST body) this limits my response to two characters!&lt;/p&gt;</comment>
                            <comment id="17359365" author="timothyjward" created="Tue, 8 Jun 2021 13:39:04 +0000"  >&lt;p&gt;Removing the code which copies the request headers fixes the failing test and causes no other tests in the systests-rs-sse buckets to fail.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13386024">CXF-8559</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rfkw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>