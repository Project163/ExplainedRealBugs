<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:13:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6163] WSDL Javascript generator for xsd:any elements is not correct when any is optional</title>
                <link>https://issues.apache.org/jira/browse/CXF-6163</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Here is an example of WSDL complexType with any element:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;SomeType&quot;&lt;/span&gt;&amp;gt;
&amp;lt;sequence&amp;gt;
&amp;lt;element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;arg1&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xsd:&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;any maxOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;unbounded&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/sequence&amp;gt;
&amp;lt;/complexType&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here are some problems:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In generated Javascript this xsd:any element is marked as &quot;required&quot;, while we have minOccurs=&quot;0&quot;&lt;/li&gt;
	&lt;li&gt;Deserializer of this xsd:any element goes into infinite loop when there is nothing that can be threaten as xsd:any&lt;/li&gt;
	&lt;li&gt;Serializer also thinks of this xsd:any as required element and throws exception if it is null&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Expected behavior:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;xsd:any should be threaten as optional element&lt;/li&gt;
	&lt;li&gt;parsing of XML with xsd:any element in WSDL should not hang&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12762304">CXF-6163</key>
            <summary>WSDL Javascript generator for xsd:any elements is not correct when any is optional</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="DemonShi">Andrii Nikitiuk</reporter>
                        <labels>
                            <label>javascript</label>
                            <label>optional</label>
                            <label>wsdl2js</label>
                            <label>xsd</label>
                            <label>xsd:any</label>
                    </labels>
                <created>Wed, 17 Dec 2014 15:15:21 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:04 +0000</updated>
                            <resolved>Mon, 9 Feb 2015 18:04:18 +0000</resolved>
                                    <version>3.0.2</version>
                                    <fixVersion>3.0.4</fixVersion>
                                    <component>JavaScript Client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14253430" author="githubbot" created="Fri, 19 Dec 2014 14:27:51 +0000"  >&lt;p&gt;GitHub user DemonShi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/46&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6163&quot; title=&quot;WSDL Javascript generator for xsd:any elements is not correct when any is optional&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6163&quot;&gt;&lt;del&gt;CXF-6163&lt;/del&gt;&lt;/a&gt; Fixed xsd:any behaviour when used with minOccurs=0, maxOccurs&amp;gt;1&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;xsd:any deserializer does not go into infinite loop when xsd:any cannot match any element and minOccurs=0&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Here is how generated code now looks like:&lt;br/&gt;
    ```javascript&lt;br/&gt;
        var anyObject = [];&lt;br/&gt;
        var matcher = new org_apache_cxf_any_ns_matcher(org_apache_cxf_any_ns_matcher.ANY, &apos;urn:...&apos;, [], null);&lt;br/&gt;
        var anyNeeded = 0;&lt;br/&gt;
        var anyAllowed = 9223372036854775807;&lt;br/&gt;
        while (anyNeeded &amp;gt; 0 || anyAllowed &amp;gt; 0) {&lt;br/&gt;
         var anyURI;&lt;br/&gt;
         var anyLocalPart;&lt;br/&gt;
         var anyMatched = false;&lt;br/&gt;
         if (curElement) {&lt;br/&gt;
          anyURI = cxfjsutils.getElementNamespaceURI(curElement);&lt;br/&gt;
          anyLocalPart = cxfjsutils.getNodeLocalName(curElement);&lt;br/&gt;
          var anyQName = &apos;&lt;/p&gt;
{&apos; + anyURI + &apos;}
&lt;p&gt;&apos; + anyLocalPart;&lt;br/&gt;
          cxfjsutils.trace(&apos;any match: &apos; + anyQName);&lt;br/&gt;
          anyMatched = matcher.match(anyURI, anyLocalPart)&lt;br/&gt;
          cxfjsutils.trace(&apos; --&amp;gt; &apos; + anyMatched);&lt;br/&gt;
         }&lt;br/&gt;
         if (anyMatched) {&lt;br/&gt;
          anyDeserializer = cxfjsutils.interfaceObject.globalElementDeserializers&lt;span class=&quot;error&quot;&gt;&amp;#91;anyQName&amp;#93;&lt;/span&gt;;&lt;br/&gt;
          cxfjsutils.trace(&apos; deserializer: &apos; + anyDeserializer);&lt;br/&gt;
          if (anyDeserializer) &lt;/p&gt;
{
           var anyValue = anyDeserializer(cxfjsutils, curElement);
          }
&lt;p&gt; else &lt;/p&gt;
{
           var anyValue = curElement.nodeValue;
          }
&lt;p&gt;          anyObject.push(anyValue);&lt;br/&gt;
          anyNeeded--;&lt;br/&gt;
          anyAllowed--;&lt;br/&gt;
          curElement = cxfjsutils.getNextElementSibling(curElement);&lt;br/&gt;
         } else {&lt;br/&gt;
          if (anyNeeded &amp;gt; 0) &lt;/p&gt;
{
           throw &apos;not enough ws:any elements&apos;;
          }
&lt;p&gt; else &lt;/p&gt;
{
           break;
          }
&lt;p&gt;         }&lt;br/&gt;
        }&lt;br/&gt;
        var anyHolder = new org_apache_cxf_any_holder(anyURI, anyLocalPart, anyValue);&lt;br/&gt;
        newobject.setAny(anyHolder);&lt;br/&gt;
    ```&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;xsd:any serializer does not throw an exception when xsd:any element is being passed as empty array and minOccurs=0&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/DemonShi/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/DemonShi/cxf&lt;/a&gt; cxf-6163&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/46.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/46.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #46&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 5824a9e56386b1938667d41d27c1007943fcf098&lt;br/&gt;
Author: Andrii Nikitiuk &amp;lt;demonshi.ua@gmail.com&amp;gt;&lt;br/&gt;
Date:   2014-12-19T14:17:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6163&quot; title=&quot;WSDL Javascript generator for xsd:any elements is not correct when any is optional&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6163&quot;&gt;&lt;del&gt;CXF-6163&lt;/del&gt;&lt;/a&gt; Fixed xsd:any behaviour when used with minOccurs=0, maxOccurs&amp;gt;1&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14253745" author="githubbot" created="Fri, 19 Dec 2014 18:33:43 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/46&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/46&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23j2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>