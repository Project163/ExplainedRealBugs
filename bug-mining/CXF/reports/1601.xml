<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:57:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4715] WS-security encrypted elements with XPath . CXF generates wsu:Id attribute, XSD validation on Metro fails</title>
                <link>https://issues.apache.org/jira/browse/CXF-4715</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The problem is related to WS-security policies enforcement by a CXF client and the generated message compared to what is expected by a Metro server when XSD validation is turned on.&lt;/p&gt;

&lt;p&gt;The following policy is used :&lt;br/&gt;
&amp;lt;wsp:Policy wsu:Id=&quot;chiffr_elt_policy&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;wsp:ExactlyOne&amp;gt;&lt;br/&gt;
			&amp;lt;wsp:All&amp;gt;&lt;br/&gt;
				&amp;lt;sp:EncryptedElements&lt;br/&gt;
					xmlns:sp=&quot;http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702&quot;&amp;gt;&lt;br/&gt;
					&amp;lt;sp:XPath&amp;gt;&lt;br/&gt;
						//*&lt;span class=&quot;error&quot;&gt;&amp;#91;local-name()=&amp;#39;inputToEncrypt&amp;#39;&amp;#93;&lt;/span&gt;					&lt;br/&gt;
						&amp;lt;/sp:XPath&amp;gt;&lt;br/&gt;
				&amp;lt;/sp:EncryptedElements&amp;gt;&lt;br/&gt;
			&amp;lt;/wsp:All&amp;gt;&lt;br/&gt;
		&amp;lt;/wsp:ExactlyOne&amp;gt;&lt;br/&gt;
&amp;lt;/wsp:Policy&amp;gt;&lt;/p&gt;

&lt;p&gt;CXF client encrypts the element matching the XPath expression, but it seems to add a &quot;wsu:Id&quot; attribute that is not allowed by Metro (not allowed by the XSD of &quot;inputToEncrypt&quot; element). When the server analyzes the request and tries to validate the message against the XSD, the following error appears :&lt;/p&gt;

&lt;p&gt;javax.xml.ws.WebServiceException: org.xml.sax.SAXParseException; cvc-complex-type.3.2.2 : L&apos;attribut &apos;wsu:Id&apos; n&apos;est pas autoris&#233; dans l&apos;&#233;l&#233;ment &apos;inputToEncrypt&apos;.&lt;br/&gt;
	at com.sun.xml.ws.util.pipe.AbstractSchemaValidationTube.doProcess(AbstractSchemaValidationTube.java:242)&lt;br/&gt;
	at com.sun.xml.ws.util.pipe.AbstractSchemaValidationTube.processRequest(AbstractSchemaValidationTube.java:211)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:598)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:557)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:542)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:439)&lt;br/&gt;
	at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:243)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:471)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:244)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:135)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:129)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:160)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:75)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:722)&lt;br/&gt;
Caused by: org.xml.sax.SAXParseException; cvc-complex-type.3.2.2 : L&apos;attribut &apos;wsu:Id&apos; n&apos;est pas autoris&#233; dans l&apos;&#233;l&#233;ment &apos;inputToEncrypt&apos;.&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:437)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:449)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3228)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processAttributes(XMLSchemaValidator.java:2705)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2047)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:737)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.DOMValidatorHelper.beginNode(DOMValidatorHelper.java:276)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.DOMValidatorHelper.validate(DOMValidatorHelper.java:243)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.DOMValidatorHelper.validate(DOMValidatorHelper.java:189)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorImpl.validate(ValidatorImpl.java:109)&lt;br/&gt;
	at javax.xml.validation.Validator.validate(Validator.java:124)&lt;br/&gt;
	at com.sun.xml.ws.util.pipe.AbstractSchemaValidationTube.doProcess(AbstractSchemaValidationTube.java:240)&lt;br/&gt;
	... 26 more&lt;/p&gt;



&lt;p&gt;The workaround is to delete @SchemaValidation in the service class on Metro server to disable XSD validation.&lt;br/&gt;
A Metro client with the same policy does not have this behavior and the XSD validation is fine.&lt;/p&gt;




</description>
                <environment>&lt;p&gt;JDK 1.7.0_02&lt;br/&gt;
Windows 7&lt;br/&gt;
Tomcat 6.0.29&lt;br/&gt;
Metro 1.5 / 2.2 server&lt;/p&gt;</environment>
        <key id="12624827">CXF-4715</key>
            <summary>WS-security encrypted elements with XPath . CXF generates wsu:Id attribute, XSD validation on Metro fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="fwi">Franck WIELGUS</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Dec 2012 15:18:47 +0000</created>
                <updated>Mon, 14 Mar 2016 11:31:14 +0000</updated>
                            <resolved>Thu, 20 Dec 2012 20:18:49 +0000</resolved>
                                    <version>2.6.1</version>
                    <version>2.7.1</version>
                                    <fixVersion>2.5.8</fixVersion>
                    <fixVersion>2.6.5</fixVersion>
                    <fixVersion>2.7.2</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13537099" author="dkulp" created="Thu, 20 Dec 2012 15:55:12 +0000"  >&lt;p&gt;&lt;br/&gt;
Can you get wire captures of the two messages so we can really see the differences?  Normally with WS-Security, you should be putting the wsu:Id on there so that the element can be referenced in the security header.  I&apos;d like to see how Metro has decided to to reference it.&lt;/p&gt;</comment>
                            <comment id="13537160" author="fwi" created="Thu, 20 Dec 2012 17:06:29 +0000"  >&lt;p&gt;I have a simpler example (see attached wsdl, CXF and Metro requests )&lt;/p&gt;

&lt;p&gt;The associated stacktrace on the Metro server (2.2) : &lt;/p&gt;

&lt;p&gt;WARNING: Client Request doesn&apos;t pass Service&apos;s Schema Validation&lt;br/&gt;
org.xml.sax.SAXParseException; cvc-type.3.1.1: Element &apos;in&apos; is a simple type, so it cannot have attributes, excepting those whose namespace name is identical to &apos;http://www.w3.org/2001/XMLSchema-instance&apos; and whose &lt;span class=&quot;error&quot;&gt;&amp;#91;local name&amp;#93;&lt;/span&gt; is one of &apos;type&apos;, &apos;nil&apos;, &apos;schemaLocation&apos; or &apos;noNamespaceSchemaLocation&apos;. However, the attribute, &apos;wsu:Id&apos; was found.&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:198)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:134)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:437)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:368)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:325)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:449)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3228)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processAttributes(XMLSchemaValidator.java:2678)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2047)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:737)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.DOMValidatorHelper.beginNode(DOMValidatorHelper.java:276)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.DOMValidatorHelper.validate(DOMValidatorHelper.java:243)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.DOMValidatorHelper.validate(DOMValidatorHelper.java:189)&lt;br/&gt;
	at com.sun.org.apache.xerces.internal.jaxp.validation.ValidatorImpl.validate(ValidatorImpl.java:109)&lt;br/&gt;
	at javax.xml.validation.Validator.validate(Validator.java:124)&lt;br/&gt;
	at com.sun.xml.ws.util.pipe.AbstractSchemaValidationTube.doProcess(AbstractSchemaValidationTube.java:540)&lt;br/&gt;
	at com.sun.xml.ws.server.ServerSchemaValidationTube.processRequest(ServerSchemaValidationTube.java:125)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775)&lt;br/&gt;
	at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:386)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:640)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.ServletAdapter.invokeAsync(ServletAdapter.java:218)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:159)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:194)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:80)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:722)&lt;/p&gt;</comment>
                            <comment id="13537209" author="dkulp" created="Thu, 20 Dec 2012 18:05:20 +0000"  >
&lt;p&gt;Can you do one more thing for me as a test with Metro?  If you change the policy from an sp:EncryptedElements to a sp:SignedElements to just sign the elements, does Metro add the wsu:Id as well?   I think it would have to to be able to process the signature, but I&apos;d like to make sure.   Right now in CXF, we have a single method to lookup the element by xpath which we use for both entrypted and signatures and we always add the wsu:Id at that point.   I can add a flag to turn that off for the encrypted case (I think), but I don&apos;t think we can for the signatures.  In anycase, I would like to know how Metro would handle the signature case to see if the metro -&amp;gt; metro with schema validation on would fail for that as well.&lt;/p&gt;</comment>
                            <comment id="13537343" author="dkulp" created="Thu, 20 Dec 2012 20:18:49 +0000"  >
&lt;p&gt;Stopped adding the wsu:Id for elements used just for encryption which would resolve this.   However, I&apos;m still interested in knowing how Metro handles the signed elements.  &lt;/p&gt;</comment>
                            <comment id="13537384" author="ay" created="Thu, 20 Dec 2012 21:20:53 +0000"  >&lt;p&gt;There is an interesting old thread at&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.java.net/node/670006&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.java.net/node/670006&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I don&apos;t know if this issue was intended to be fixed in metro but it wasn&apos;t fixed?&lt;/p&gt;

&lt;p&gt;I think Metro rejecting wsu:Id doesn&apos;t make much sense when using the specs like ws-security that uses wsu.&lt;/p&gt;</comment>
                            <comment id="13537788" author="fwi" created="Fri, 21 Dec 2012 10:22:15 +0000"  >&lt;p&gt;I added metro_signed_request and cxf_signed_request corresponding to the policy with SignedElements. CXF and Metro outputs are similar in that case.&lt;/p&gt;

&lt;p&gt;But there is another problem with Metro on the server side :&lt;/p&gt;

&lt;p&gt;SEVERE: WSS1338: Error occurred in verifying the signature&lt;br/&gt;
Dec 21, 2012 11:08:54 AM com.sun.xml.wss.jaxws.impl.SecurityServerTube processRequest&lt;br/&gt;
SEVERE: WSSTUBE0025: Error in Verifying Security in the Inbound Message.&lt;br/&gt;
com.sun.xml.wss.XWSSecurityException: java.lang.NullPointerException&lt;br/&gt;
	at com.sun.xml.wss.impl.dsig.SignatureProcessor.verify(SignatureProcessor.java:916)&lt;br/&gt;
	at com.sun.xml.wss.impl.filter.SignatureFilter.process(SignatureFilter.java:638)&lt;br/&gt;
	at com.sun.xml.wss.impl.NewSecurityRecipient.processCurrentHeader(NewSecurityRecipient.java:245)&lt;br/&gt;
	at com.sun.xml.wss.impl.NewSecurityRecipient.pProcess(NewSecurityRecipient.java:324)&lt;br/&gt;
	at com.sun.xml.wss.impl.NewSecurityRecipient.validateMessage(NewSecurityRecipient.java:143)&lt;br/&gt;
	at com.sun.xml.wss.jaxws.impl.SecurityServerTube.verifyInboundMessage(SecurityServerTube.java:678)&lt;br/&gt;
	at com.sun.xml.wss.jaxws.impl.SecurityServerTube.processRequest(SecurityServerTube.java:292)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:961)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:910)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:873)&lt;br/&gt;
	at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:775)&lt;br/&gt;
	at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:386)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:640)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:263)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.ServletAdapter.invokeAsync(ServletAdapter.java:218)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doGet(WSServletDelegate.java:159)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServletDelegate.doPost(WSServletDelegate.java:194)&lt;br/&gt;
	at com.sun.xml.ws.transport.http.servlet.WSServlet.doPost(WSServlet.java:80)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:722)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at com.sun.xml.wss.impl.dsig.WSSPolicyConsumerImpl.constructSignaturePolicy(WSSPolicyConsumerImpl.java:400)&lt;br/&gt;
	at com.sun.xml.wss.impl.dsig.SignatureProcessor.verify(SignatureProcessor.java:885)&lt;br/&gt;
	... 31 more&lt;/p&gt;


&lt;p&gt;The policy with SignedElements seems to be well-formed as CXF and Metro clients succeed into generating requests. So it is probably a bug on Metro in that case. &lt;/p&gt;</comment>
                            <comment id="15179699" author="apurva.shop" created="Fri, 4 Mar 2016 10:33:10 +0000"  >&lt;p&gt;This issue seems to be still there when you try to encrypt and/or sign your custom header object. wsu:Id element still present in decrypted custom header. This is not the case with body.&lt;br/&gt;
I am currently on 3.1.5 version. &lt;/p&gt;</comment>
                            <comment id="15193128" author="coheigea" created="Mon, 14 Mar 2016 11:31:14 +0000"  >&lt;p&gt;Please log a separate JIRA with a test-case to reproduce the issue.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12561935" name="cxf_decrypted_request.txt" size="534" author="fwi" created="Thu, 20 Dec 2012 17:07:03 +0000"/>
                            <attachment id="12561936" name="cxf_request.txt" size="6205" author="fwi" created="Thu, 20 Dec 2012 17:07:03 +0000"/>
                            <attachment id="12562061" name="cxf_signed_request.txt" size="7479" author="fwi" created="Fri, 21 Dec 2012 10:16:04 +0000"/>
                            <attachment id="12561934" name="helloclient.wsdl" size="4264" author="fwi" created="Thu, 20 Dec 2012 17:07:03 +0000"/>
                            <attachment id="12561937" name="metro_decrypted_request.txt" size="447" author="fwi" created="Thu, 20 Dec 2012 17:07:03 +0000"/>
                            <attachment id="12561938" name="metro_request.txt" size="6631" author="fwi" created="Thu, 20 Dec 2012 17:07:03 +0000"/>
                            <attachment id="12562062" name="metro_signed_request.txt" size="7923" author="fwi" created="Fri, 21 Dec 2012 10:16:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>301335</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16rr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247628</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>