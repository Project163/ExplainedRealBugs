<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:49:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3878] org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper does not print the WebApplicationException stack trace even when log level is set to FINEST</title>
                <link>https://issues.apache.org/jira/browse/CXF-3878</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;WebApplicationException occurring as a result of a JAXB mapping (an internal NullPointerException caused it), never got printed on the console or in the logs.  The following message did get printed:&lt;/p&gt;

&lt;p&gt;  WARNING WebApplicationException has been caught, cause: java.lang.NullPointerException&lt;/p&gt;

&lt;p&gt;But beyond this, no other information was available. Debugging revealed that the problem was in JAXB mapping in one of my classes, but it would have been very helpful if the exception trace is printed in the logs or on the console.&lt;/p&gt;

&lt;p&gt;The problem remained even after setting the log levels in logging.properties to FINEST.  Other FINEST logs did get printed fine, except for the stack trace of the exception.  My research showed that the setPrintStackTrace(boolean) method of WebApplicationExceptionMapper never gets called from anywhere.  This will mean that the printStackTrace variable of the class always remains false, resulting in eternal shadowing of the stack trace. &lt;/p&gt;

&lt;p&gt;I made a small change to my local copy of org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper Java file and patched it to cxf-2.4.3.jar to get the stack trace in my logs when log level was set to INFO or lower.  The three line change is as below:&lt;/p&gt;

&lt;p&gt;    public Response toResponse(WebApplicationException ex) {&lt;br/&gt;
+    	if(LOG.isLoggable(Level.INFO)) &lt;/p&gt;
{
+    		printStackTrace = true;
+    	}
&lt;p&gt;    	...&lt;br/&gt;
(lines with + are added lines)&lt;/p&gt;

&lt;p&gt;It would be great if you can make this change in subsequent versions.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 64-bit, JDK 1.7.0&lt;/p&gt;</environment>
        <key id="12528545">CXF-3878</key>
            <summary>org.apache.cxf.jaxrs.impl.WebApplicationExceptionMapper does not print the WebApplicationException stack trace even when log level is set to FINEST</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="dearjadu">Kartik Pandya</reporter>
                        <labels>
                            <label>log</label>
                    </labels>
                <created>Mon, 24 Oct 2011 19:07:21 +0000</created>
                <updated>Tue, 8 Nov 2011 05:30:55 +0000</updated>
                            <resolved>Wed, 26 Oct 2011 14:38:16 +0000</resolved>
                                    <version>2.3.7</version>
                    <version>2.4.3</version>
                                    <fixVersion>2.4.4</fixVersion>
                    <fixVersion>2.3.8</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="3600">1h</timeestimate>
                                        <comments>
                            <comment id="13135412" author="dkulp" created="Tue, 25 Oct 2011 20:44:38 +0000"  >&lt;p&gt;Actually, the printStackTrace stuff is kind of crappy as that would just print to stderr and not into the logs at all.   I&apos;ve done:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Message msg = PhaseInterceptorChain.getCurrentMessage();
        FaultListener flogger = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (msg != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            flogger = (FaultListener)PhaseInterceptorChain.getCurrentMessage()
                .getContextualProperty(FaultListener.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName());
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (flogger != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            flogger.faultOccurred(ex, message, msg);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isLoggable(Level.FINE)) {
            LOG.log(Level.FINE, message, ex);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which accomplishes two things:&lt;/p&gt;

&lt;p&gt;1) If a FaultListener is registered (example: on the bus), the Exception will feed into there and the listener can do whatever it wants.&lt;/p&gt;

&lt;p&gt;2) Otherwise, log the full exception at FINE level.&lt;/p&gt;
</comment>
                            <comment id="13135421" author="sergey_beryozkin" created="Tue, 25 Oct 2011 21:03:56 +0000"  >&lt;p&gt;Hi Dan - thanks for the fix - that printing to the stderr was messy - Glen asked me to remove that awhile back but somehow I forgot.&lt;br/&gt;
JAXBProviders would LOG the captured trace but NPE is escaping that...&lt;/p&gt;

&lt;p&gt;I&apos;ll probably create some exception utils later on and push this common code there&lt;/p&gt;

&lt;p&gt;cheers&lt;/p&gt;</comment>
                            <comment id="13135436" author="sergey_beryozkin" created="Tue, 25 Oct 2011 21:11:01 +0000"  >&lt;p&gt;The only thing is that we probably do not want the stack trace, etc to happen in case of say throw new WebApplicationException(404) which is part of the flow - may be that can be configurable - will look into it later &lt;/p&gt;</comment>
                            <comment id="13135799" author="sergey_beryozkin" created="Wed, 26 Oct 2011 08:24:12 +0000"  >&lt;p&gt;indeed, using the custom fault logger is the best option to regulate whether to log or not, thanks.&lt;br/&gt;
also if needed, users can add custom WbApplicationExceptionMappers &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>214405</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b6vj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>