<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:40:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-9052] LoadDistributorFeature not comaptible with JAX-RS subresources</title>
                <link>https://issues.apache.org/jira/browse/CXF-9052</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;LoadDistributorTargetSelector seems to be confused by subresources.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a test that demonstrates it below. &lt;br/&gt;
When no clustering features or FailoverFeature is applied, the client tries to invoke &apos;http://localhost:1234/sub/name&apos;, as expected. &amp;#8211; `noClustering` and `failover` pass.&lt;/p&gt;

&lt;p&gt;When LoadDistributorFeature is applied, the request is to&#160;&apos;http://localhost:1234/name&apos; (path segment contributed by the root resource is lost) &amp;#8211; `loadDistributor` fails.&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
---------------------------------------&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; jakarta.ws.rs.GET;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; jakarta.ws.rs.Path;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.clustering.FailoverFeature;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.clustering.LoadDistributorFeature;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.clustering.SequentialStrategy;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.feature.Feature;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.jaxrs.client.JAXRSClientFactoryBean;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Assert;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ShowBug {

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void noClustering() {
        makeRequest(List.of());
    }
    
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void failover() {
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; failover = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FailoverFeature();
        failover.setStrategy(makeStrategy());
        makeRequest(List.of(failover));
    }
    
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void loadDistributor() {
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; distro = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoadDistributorFeature();
        distro.setStrategy(makeStrategy());
        makeRequest(List.of(distro));
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; SequentialStrategy makeStrategy() {
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; s = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SequentialStrategy();
        s.setAlternateAddresses(List.of(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:1234&quot;&lt;/span&gt;));
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; s;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void makeRequest(List&amp;lt;Feature&amp;gt; features) {
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; fct = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JAXRSClientFactoryBean();
        fct.setFeatures(features);
        fct.setServiceClass(Root.class);
        fct.setAddress(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:1234&quot;&lt;/span&gt;);
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            fct.create(Root.class).sub().name();
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            Assert.assertTrue(e.getMessage(), e.getMessage().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;/sub/name&quot;&lt;/span&gt;));
        }
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Root {
        @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/sub&quot;&lt;/span&gt;) Sub sub();
    }
    
    &lt;span class=&quot;code-keyword&quot;&gt;interface&lt;/span&gt; Sub {
        @GET @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/name&quot;&lt;/span&gt;) &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13591421">CXF-9052</key>
            <summary>LoadDistributorFeature not comaptible with JAX-RS subresources</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="vbeilin">Vadim Beilin</reporter>
                        <labels>
                    </labels>
                <created>Sun, 8 Sep 2024 16:41:12 +0000</created>
                <updated>Fri, 15 Nov 2024 17:43:10 +0000</updated>
                            <resolved>Fri, 15 Nov 2024 17:43:10 +0000</resolved>
                                    <version>3.5.9</version>
                    <version>4.0.5</version>
                    <version>3.6.4</version>
                                    <fixVersion>4.1.0</fixVersion>
                    <fixVersion>3.5.10</fixVersion>
                    <fixVersion>3.6.5</fixVersion>
                    <fixVersion>4.0.6</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ravk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>