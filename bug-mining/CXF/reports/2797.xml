<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:20:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6891] IOUtils.isEmpty() doesn&apos;t reinclude byte in stream.</title>
                <link>https://issues.apache.org/jira/browse/CXF-6891</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;While trying to integrate Katharsis with CXF I faced a problem related to IOUtils.isEmpty() method.&lt;/p&gt;

&lt;p&gt;When isEmpty is invoked with an InputStream that:&lt;br/&gt;
    1. Is not &apos;mark supported&apos; and&lt;br/&gt;
    2. The &apos;available()&apos; method returns &apos;0&apos;.&lt;/p&gt;

&lt;p&gt;The byte that is read from the stream (used to determine whether the stream is empty or not) is not re-included back to the stream. When I explored the code inside PushbackInputStream class, I found that the byte is only being included inside the PushbackInputStream.buf (using unread(byte[], int, int) method).&lt;/p&gt;

&lt;p&gt;Find attached Maven Project containing 2 test cases.&lt;/p&gt;

&lt;p&gt;References:&lt;br/&gt;
  &amp;gt; IOUtils: &lt;a href=&quot;https://cxf.apache.org/javadoc/latest/org/apache/cxf/helpers/IOUtils.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cxf.apache.org/javadoc/latest/org/apache/cxf/helpers/IOUtils.html&lt;/a&gt;&lt;br/&gt;
  &amp;gt; PushbackInputStream: &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/io/PushbackInputStream.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/io/PushbackInputStream.html&lt;/a&gt;&lt;br/&gt;
  &amp;gt; Katharsis.io: &lt;a href=&quot;http://katharsis.io&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://katharsis.io&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12964774">CXF-6891</key>
            <summary>IOUtils.isEmpty() doesn&apos;t reinclude byte in stream.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="tabone">Luca Tabone</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 May 2016 20:23:00 +0000</created>
                <updated>Fri, 14 Oct 2016 14:10:20 +0000</updated>
                            <resolved>Wed, 4 May 2016 13:29:06 +0000</resolved>
                                    <version>3.1.6</version>
                                    <fixVersion>3.0.10</fixVersion>
                    <fixVersion>3.1.7</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15269520" author="tabone" created="Tue, 3 May 2016 20:28:15 +0000"  >&lt;p&gt;Test Cases&lt;/p&gt;</comment>
                            <comment id="15270618" author="sergey_beryozkin" created="Wed, 4 May 2016 13:28:50 +0000"  >&lt;p&gt;Thanks for the tests, I added one of them to newly added IOUtilsTest.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/986231de&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/986231de&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="15270858" author="shadow" created="Wed, 4 May 2016 15:42:51 +0000"  >&lt;p&gt;Trivial improvement suggestion:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt; len = &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.valueOf(value);
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; len &amp;lt;= 0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Switch to &lt;tt&gt;long len = Long.parseLong(value);&lt;/tt&gt; in &lt;tt&gt;HttpUtils.isPayloadEmpty&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15272531" author="sergey_beryozkin" created="Thu, 5 May 2016 15:44:36 +0000"  >&lt;p&gt;Adding the missing test resources:&lt;br/&gt;
&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/71d825cf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/71d825cf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15274316" author="tabone" created="Fri, 6 May 2016 16:35:22 +0000"  >&lt;p&gt;Thanks for the quick fix. Confirmed that changes resolve the issue reported.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12802033" name="cxf-bug.zip" size="6264" author="tabone" created="Tue, 3 May 2016 20:28:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2x4fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>