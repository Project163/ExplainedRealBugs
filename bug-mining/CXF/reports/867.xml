<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:45:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3395] cxf transfer hashmap can&apos;t be chinese word</title>
                <link>https://issues.apache.org/jira/browse/CXF-3395</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;hi cxf team:&lt;br/&gt;
   i use cxf2.3.3 in my project,and i tansfer the hashmap through cxf client to server(i use the example of apache-cxf-2.3.2,the java_first_jaxws project in official promulgate package) .firstly it run normally,but when i put some chinese word(not englist word) to hashmap&lt;br/&gt;
   i modify the HelloWorldImpl.java(the official example project file,java_first_jaxws is the project name) function just like this:&lt;br/&gt;
    HelloWorldImpl.java&lt;br/&gt;
    public Map&amp;lt;Integer, User&amp;gt; getUsers() &lt;/p&gt;
{
    	Map&amp;lt;Integer, User&amp;gt; usersForMap = new LinkedHashMap&amp;lt;Integer, User&amp;gt;();
    	//&#27721;&#23383;bug &#20013;&#25991; bug
    	usersForMap.put(1,  new UserImpl(&quot;yhb&#27721;&#23383;bug&quot;));  //--&amp;gt;when total english word,it run ok,when some chinese word here the cxf tell error to me. 
    	usersForMap.put(2,  new UserImpl(&quot;wybl&quot;));
        System.out.println(&quot;getUsers called&quot;);
        return usersForMap;
    }

&lt;p&gt;   it&apos; seem the marshal and unmarshal crash and tell fllow error(englisth word in hashmap seem runs ok):&lt;br/&gt;
org.apache.cxf.interceptor.Fault: Marshalling Error: null&lt;br/&gt;
	at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshalWithBridge(JAXBEncoderDecoder.java:327)&lt;br/&gt;
	at org.apache.cxf.jaxb.io.DataReaderImpl.read(DataReaderImpl.java:124)&lt;br/&gt;
	at org.apache.cxf.interceptor.DocLiteralInInterceptor.getPara(DocLiteralInInterceptor.java:251)&lt;br/&gt;
	at org.apache.cxf.interceptor.DocLiteralInInterceptor.handleMessage(DocLiteralInInterceptor.java:127)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:755)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:2335)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:2193)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:2037)&lt;br/&gt;
	at org.apache.cxf.io.CacheAndWriteOutputStream.postClose(CacheAndWriteOutputStream.java:47)&lt;br/&gt;
	at org.apache.cxf.io.CachedOutputStream.close(CachedOutputStream.java:188)&lt;br/&gt;
	at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)&lt;br/&gt;
	at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:697)&lt;br/&gt;
	at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)&lt;br/&gt;
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:516)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:313)&lt;br/&gt;
	at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:265)&lt;br/&gt;
	at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:73)&lt;br/&gt;
	at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:124)&lt;br/&gt;
	at $Proxy61.getMapByCXFDocument(Unknown Source)&lt;br/&gt;
	at com.webservice.cxf.CxfSoapAction.runWebService(CxfSoapAction.java:77)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:592)&lt;br/&gt;
	at org.directwebremoting.impl.DefaultRemoter$1.doFilter(DefaultRemoter.java:740)&lt;br/&gt;
	at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:744)&lt;br/&gt;
	at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:593)&lt;br/&gt;
	at org.directwebremoting.dwrp.BaseCallHandler.handle(BaseCallHandler.java:90)&lt;br/&gt;
	at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:120)&lt;br/&gt;
	at org.directwebremoting.servlet.DwrServlet.doPost(DwrServlet.java:141)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)&lt;br/&gt;
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)&lt;br/&gt;
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)&lt;br/&gt;
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)&lt;br/&gt;
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)&lt;br/&gt;
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)&lt;br/&gt;
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)&lt;br/&gt;
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)&lt;br/&gt;
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)&lt;br/&gt;
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:286)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:845)&lt;br/&gt;
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)&lt;br/&gt;
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:595)&lt;br/&gt;
Caused by: java.lang.reflect.UndeclaredThrowableException&lt;br/&gt;
	at $Proxy74.unmarshal(Unknown Source)&lt;br/&gt;
	at org.apache.cxf.jaxb.JAXBEncoderDecoder.unmarshalWithBridge(JAXBEncoderDecoder.java:312)&lt;br/&gt;
	... 49 more&lt;br/&gt;
Caused by: java.lang.reflect.InvocationTargetException&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:592)&lt;br/&gt;
	at org.apache.cxf.common.util.ReflectionInvokationHandler.invoke(ReflectionInvokationHandler.java:52)&lt;br/&gt;
	... 51 more&lt;br/&gt;
Caused by: javax.xml.bind.UnmarshalException&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;with linked exception:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.xml.stream.XMLStreamException: Invalid byte 1 of 1-byte UTF-8 sequence.&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.handleStreamException(UnmarshallerImpl.java:426)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:362)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.BridgeImpl.unmarshal(BridgeImpl.java:120)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.BridgeAdapter.unmarshal(BridgeAdapter.java:124)&lt;br/&gt;
	at com.sun.xml.bind.api.Bridge.unmarshal(Bridge.java:233)&lt;br/&gt;
	... 56 more&lt;br/&gt;
Caused by: javax.xml.stream.XMLStreamException: Invalid byte 1 of 1-byte UTF-8 sequence.&lt;br/&gt;
	at com.sun.xml.stream.XMLReaderImpl.next(XMLReaderImpl.java:560)&lt;br/&gt;
	at org.apache.cxf.staxutils.DepthXMLStreamReader.next(DepthXMLStreamReader.java:220)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:192)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:360)&lt;br/&gt;
	... 59 more&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;i think this is a terrible bug in transfer hashmap,and i don&apos;t know how to resolve this.can you fix the bug or tell me some solution,my email:wqbz@foxmail.com&lt;br/&gt;
thank you very much&lt;/p&gt;</description>
                <environment>&lt;p&gt;spring 3.0+dwr3.0+jdk5+tomcat6&lt;/p&gt;</environment>
        <key id="12501295">CXF-3395</key>
            <summary>cxf transfer hashmap can&apos;t be chinese word</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="linuxaid">kakashi</reporter>
                        <labels>
                    </labels>
                <created>Sun, 13 Mar 2011 11:18:20 +0000</created>
                <updated>Mon, 18 Apr 2011 12:42:18 +0000</updated>
                            <resolved>Sat, 2 Apr 2011 00:53:43 +0000</resolved>
                                    <version>2.3.3</version>
                                    <fixVersion>2.3.4</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13006194" author="gmazza" created="Sun, 13 Mar 2011 13:24:41 +0000"  >&lt;p&gt;I&apos;m not sure this is a CXF bug.  Escaping the characters should fix your problem (&lt;a href=&quot;http://www.pinyin.info/tools/converter/chars2uninumbers.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.pinyin.info/tools/converter/chars2uninumbers.html&lt;/a&gt;) but I don&apos;t know enough if this is otherwise a CXF or a Java configuration issue.  You might also be able to get help on the Chinese CXF users list (&lt;a href=&quot;http://groups.google.com/group/cxf-zh&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groups.google.com/group/cxf-zh&lt;/a&gt;).  Some CJK developers actually try to avoid multibyte characters in their code for other reasons: &lt;a href=&quot;http://java.net/jira/browse/JAXB-783&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.net/jira/browse/JAXB-783&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13006209" author="bmargulies" created="Sun, 13 Mar 2011 15:29:52 +0000"  >&lt;p&gt;I send arbitrary text (including Chinese) though CXF+JAXB all the time. You&apos;ll have to give us repeatable test case to diagnose your particular issue.&lt;/p&gt;</comment>
                            <comment id="13006210" author="bmargulies" created="Sun, 13 Mar 2011 15:30:34 +0000"  >&lt;p&gt;Glen, &lt;b&gt;no he does not need to escape anything&lt;/b&gt;. StaX will escape as needed, unless something very funny is going on.&lt;/p&gt;</comment>
                            <comment id="13006315" author="linuxaid" created="Mon, 14 Mar 2011 02:27:10 +0000"  >&lt;p&gt;hi Benson,i only use the official promulgate package cxf 2.3.3,the path is apache-cxf-2.3.3\samples\java_first_jaxws,i only add some Chinese word to the server implement to transfer hashmap,then it tell me error.when i use english word ,the error disappear.i transfer arraylist or other object,it runs ok.&lt;br/&gt;
how can i provide my total code?&lt;/p&gt;</comment>
                            <comment id="13006319" author="njiang" created="Mon, 14 Mar 2011 02:58:18 +0000"  >&lt;p&gt;What&apos;s your System System.Lang setting is ?&lt;br/&gt;
I just test the sample with some Chinese character in Mac OSX, everything looks find.&lt;/p&gt;

&lt;p&gt;Here are the settings&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JAVA_HOME=/Library/Java/JavaVirtualMachines/1.6.0_22-b04-307.jdk/Contents/home
JAVA_VERSION=1.6.0
LANG=en_US.UTF-8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13006322" author="njiang" created="Mon, 14 Mar 2011 03:03:07 +0000"  >&lt;p&gt;kakashi,&lt;/p&gt;

&lt;p&gt;Please use cxf user mailing list users@cxf.apache.org to start a discussion before filling a JIRA.&lt;br/&gt;
We don&apos;t want to bring the CXF JIRA into a support question lists, as most our JIRAs should be linked back to a code commit.&lt;br/&gt;
Please use the mailing list first and fill a JIRA if we feel it necessary.  &lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13006364" author="linuxaid" created="Mon, 14 Mar 2011 09:34:53 +0000"  >&lt;p&gt;thank you very much.&lt;br/&gt;
i found the error.when i add -Dfile.encoding=UTF-8 to jvm,the error disappear.but when i transfer arraylist,the code still run ok without -Dfile.encoding=UTF-8.when i transfer hashmap the code tell error without -Dfile.encoding=UTF-8? the default file.encoding in my machine is GBK.&lt;br/&gt;
the case should be add to document.&lt;br/&gt;
i think cfx should run in this case(just like transfer arraylist),it can tell garbled message,but not tell me some exception.&lt;br/&gt;
thanks again&lt;/p&gt;

&lt;p&gt;kakashi&lt;/p&gt;</comment>
                            <comment id="13006383" author="gmazza" created="Mon, 14 Mar 2011 11:18:23 +0000"  >&lt;p&gt;Benson:  Glen, no he does not need to escape anything. StaX will escape as needed, unless something very funny is going on.&lt;/p&gt;

&lt;p&gt;As I understood the developer&apos;s question per his example, he wanted to directly insert Chinese characters within his Java code, and CXF wasn&apos;t working under those circumstances.  The handful of times I had seen Asian character sets within Java code (or within messages properties files), the characters were escaped as I had shown, and I suggested that that might be a solution for him.&lt;/p&gt;

&lt;p&gt;To me, StAX/DOM/SAX is only an issue once we are sure the Java runtime has happily accepted the hardcoded Chinese characters in the string constant--it did not appear to me that the user was at that level at the time of posting his question.&lt;/p&gt;</comment>
                            <comment id="13006392" author="bmargulies" created="Mon, 14 Mar 2011 12:09:17 +0000"  >&lt;p&gt;I think I see the disconnect.&lt;/p&gt;

&lt;p&gt;kakashi, are you compiling your Java code with a charset of UTF-8?&lt;/p&gt;

&lt;p&gt;The escapes Glen is talking about are source code escapes, like &quot;\u4e00&quot;. I thought he meant XML escapes.&lt;/p&gt;

&lt;p&gt;The fact that file.encoding had an effect means, probably, that the sample code that you are using has a use of the default string/byte conversion. I would consider that a bug in a small way, I&apos;ll go have a look.&lt;/p&gt;</comment>
                            <comment id="13006393" author="bmargulies" created="Mon, 14 Mar 2011 12:13:14 +0000"  >&lt;p&gt;Since we have a jira at this point, please make a tar of your modified version of the sample and attach it. I&apos;d like to see precisely what you did.&lt;/p&gt;</comment>
                            <comment id="13006508" author="dkulp" created="Mon, 14 Mar 2011 16:48:54 +0000"  >
&lt;p&gt;I think the issue may be with the maven pom.xml or the common_build.xml for the samples.  We don&apos;t set the encoding for the samples and thus they always use the platform encoding which is probably not what we want.   I just commited a change that sets the encoding to utf-8 when compiling the samples and that alone may fix it as I think the compiler may error when it encounters non-utf8 characters.   &lt;/p&gt;

&lt;p&gt;Can you try adding:  &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;properties&amp;gt;
&amp;lt;project.build.sourceEncoding&amp;gt;UTF-8&amp;lt;/project.build.sourceEncoding&amp;gt;
&amp;lt;/properties&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to the maven pom if using maven and rebuilding (mvn clean install) to see if that helps?&lt;/p&gt;

&lt;p&gt;If using ant, change the common_build.xml to update the javac call to include  encoding=&quot;utf-8&quot;.&lt;/p&gt;




</comment>
                            <comment id="13006852" author="linuxaid" created="Tue, 15 Mar 2011 09:21:18 +0000"  >&lt;p&gt;i found another issue about wsdl2java(also about transfer hashmap with cxf),but i don&apos;t know the issue belong to witch component in create issue.&lt;/p&gt;</comment>
                            <comment id="13014903" author="dkulp" created="Sat, 2 Apr 2011 00:53:43 +0000"  >&lt;p&gt;&lt;br/&gt;
I&apos;m going to close this as it seems to be a compiler encoding issue with compiling the code, not really CXF.   I did update the examples to make sure they all are compiled as UTF-8 instead of platform encoding.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46834</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uzmn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>