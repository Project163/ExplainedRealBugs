<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:39:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-9009] Async operations fail in concurrent calls</title>
                <link>https://issues.apache.org/jira/browse/CXF-9009</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;An exception occurs when a SOAP client is used concurrently in async operations, the exception is as follows:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.cxf.interceptor.Fault: Could not send Message.
&#8195;&#8195;at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:67) ~[cxf-core-4.0.4.jar:4.0.4]
&#8195;&#8195;at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:307) ~[cxf-core-4.0.4.jar:4.0.4]
&#8195;&#8195;at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:530) ~[cxf-core-4.0.4.jar:4.0.4]
&#8195;&#8195;at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:434) ~[cxf-core-4.0.4.jar:4.0.4]
&#8195;&#8195;at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:412) ~[cxf-core-4.0.4.jar:4.0.4]
&#8195;&#8195;at org.apache.cxf.jaxws.JaxWsClientProxy.invokeAsync(JaxWsClientProxy.java:326) ~[cxf-rt-frontend-jaxws-4.0.4.jar:4.0.4]
&#8195;&#8195;at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:138) ~[cxf-rt-frontend-jaxws-4.0.4.jar:4.0.4]
&#8195;&#8195;at jdk.proxy2/jdk.proxy2.$Proxy95.countAsync(Unknown Source) ~[na:na]
&#8195;&#8195;at com.example.demo.&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;.RestController.lambda$async$1(RestController.java:25) ~[classes/:na]
&#8195;&#8195;at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317) ~[na:na]
&#8195;&#8195;at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
&#8195;&#8195;at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
&#8195;&#8195;at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1583) ~[na:na]
Caused by: io.netty.channel.StacklessClosedChannelException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&#8195;&#8195;at io.netty.channel.AbstractChannel$AbstractUnsafe.ensureOpen(ChannelPromise)(Unknown Source) ~[netty-transport-4.1.109.Final.jar:4.1.109.Final]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I created an reproducer application (find attached &quot;spring-soap.zip&quot;)&#160; that acts as client and server, and this publishes the following operations:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8080/async&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/async&lt;/a&gt; -&amp;gt; it uses a soap client to call concurrently using an async operation (this &lt;b&gt;fails with the exception previously described&lt;/b&gt;)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://localhost:8080/sync&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/sync&lt;/a&gt; -&amp;gt; it uses a soap client to call concurrently using an ordinary operation (ends without errors)&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13578468">CXF-9009</key>
            <summary>Async operations fail in concurrent calls</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="juliojgd">Julio J. Gomez Diaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 May 2024 16:56:03 +0000</created>
                <updated>Tue, 16 Jul 2024 08:54:07 +0000</updated>
                            <resolved>Tue, 4 Jun 2024 02:37:44 +0000</resolved>
                                    <version>3.5.8</version>
                    <version>3.6.3</version>
                    <version>4.0.4</version>
                                    <fixVersion>3.5.9</fixVersion>
                    <fixVersion>4.1.0</fixVersion>
                    <fixVersion>4.0.5</fixVersion>
                    <fixVersion>3.6.4</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17845746" author="reta" created="Sun, 12 May 2024 21:23:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=juliojgd&quot; class=&quot;user-hover&quot; rel=&quot;juliojgd&quot;&gt;juliojgd&lt;/a&gt; please refer to the FAQ section regarding JAX-WS client proxies thread safety &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, thank you. Out of curiosity, what is the use case to have async invocation (which is already happening in another thread) executed in the context of the thread pool?&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://cxf.apache.org/faq.html#FAQ-AreJAX-WSclientproxiesthreadsafe?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cxf.apache.org/faq.html#FAQ-AreJAX-WSclientproxiesthreadsafe?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17845759" author="reta" created="Mon, 13 May 2024 00:49:32 +0000"  >&lt;p&gt;I was able to reproduce the issue, it is not related to handleMessage but happens before that, thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=juliojgd&quot; class=&quot;user-hover&quot; rel=&quot;juliojgd&quot;&gt;juliojgd&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17847413" author="reta" created="Fri, 17 May 2024 19:00:32 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;May 17, 2024 2:52:39 P.M. io.netty.channel.ChannelInitializer exceptionCaughtWARNING: Failed to initialize a channel. Closing: [id: 0xe5e4c70d]java.lang.IllegalStateException: complete already: DefaultChannelPromise@1876fa2c(success)	at io.netty.util.concurrent.DefaultPromise.setSuccess(DefaultPromise.java:100)	at io.netty.channel.DefaultChannelPromise.setSuccess(DefaultChannelPromise.java:78)	at org.apache.cxf.transport.http.netty.client.NettyHttpClientPipelineFactory.initChannel(NettyHttpClientPipelineFactory.java:187)	at io.netty.channel.ChannelInitializer.initChannel(ChannelInitializer.java:129)	at io.netty.channel.ChannelInitializer.handlerAdded(ChannelInitializer.java:112)	at io.netty.channel.AbstractChannelHandlerContext.callHandlerAdded(AbstractChannelHandlerContext.java:1130)	at io.netty.channel.DefaultChannelPipeline.callHandlerAdded0(DefaultChannelPipeline.java:609)	at io.netty.channel.DefaultChannelPipeline.access$100(DefaultChannelPipeline.java:46)	at io.netty.channel.DefaultChannelPipeline$PendingHandlerAddedTask.execute(DefaultChannelPipeline.java:1463)	at io.netty.channel.DefaultChannelPipeline.callHandlerAddedForAllHandlers(DefaultChannelPipeline.java:1115)	at io.netty.channel.DefaultChannelPipeline.invokeHandlerAddedIfNeeded(DefaultChannelPipeline.java:650)	at io.netty.channel.AbstractChannel$AbstractUnsafe.register0(AbstractChannel.java:514)	at io.netty.channel.AbstractChannel$AbstractUnsafe.access$200(AbstractChannel.java:429)	at io.netty.channel.AbstractChannel$AbstractUnsafe$1.run(AbstractChannel.java:486)	at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:173)	at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:166)	at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)	at java.base/java.lang.Thread.run(Thread.java:833) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For the record, this is the real cause of the issue.&lt;/p&gt;</comment>
                            <comment id="17851541" author="juliojgd" created="Mon, 3 Jun 2024 07:57:46 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; , is there any estimated date to merge your pull request and release a version with the fix?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thanks in advance,&lt;/p&gt;</comment>
                            <comment id="17851835" author="reta" created="Mon, 3 Jun 2024 22:33:31 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=juliojgd&quot; class=&quot;user-hover&quot; rel=&quot;juliojgd&quot;&gt;juliojgd&lt;/a&gt; , just merged it, sorry about that. Regarding the release(s), no exact timelines as of today, but I think the releases may happen this month (june)&lt;/p&gt;</comment>
                            <comment id="17862974" author="juliojgd" created="Thu, 4 Jul 2024 09:03:01 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; any news about the releases containing this fix?&#160; (4.0.5 in specific)&lt;/p&gt;

&lt;p&gt;Thanks in advance&lt;/p&gt;</comment>
                            <comment id="17863089" author="reta" created="Thu, 4 Jul 2024 21:12:14 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=juliojgd&quot; class=&quot;user-hover&quot; rel=&quot;juliojgd&quot;&gt;juliojgd&lt;/a&gt; , I&apos;ve opened the discussion on the mailing list &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, thank you.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://lists.apache.org/thread/p51wsc9swx8mv3nc46rm5m8ycb37wko6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/p51wsc9swx8mv3nc46rm5m8ycb37wko6&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17866307" author="juliojgd" created="Tue, 16 Jul 2024 08:30:52 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; it seems the tag 4.0.5 has been generated 5 days ago: &lt;a href=&quot;https://github.com/apache/cxf/releases/tag/cxf-4.0.5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/releases/tag/cxf-4.0.5&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;But 4.0.5 is not yet published in Maven Central: &lt;a href=&quot;https://central.sonatype.com/artifact/org.apache.cxf/cxf/versions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://central.sonatype.com/artifact/org.apache.cxf/cxf/versions&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Maybe some problem prevented the publishing of 4.0.5 artifacts in Maven Central???&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you very much in advance for the information.&lt;/p&gt;</comment>
                            <comment id="17866322" author="coheigea" created="Tue, 16 Jul 2024 08:54:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=juliojgd&quot; class=&quot;user-hover&quot; rel=&quot;juliojgd&quot;&gt;juliojgd&lt;/a&gt; It&apos;s under vote at the moment, expect it to appear in Maven Central by the end of the week.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13068704" name="spring-soap.zip" size="107595" author="juliojgd" created="Tue, 7 May 2024 16:55:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 17 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1p328:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>