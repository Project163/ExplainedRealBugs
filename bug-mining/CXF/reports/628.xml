<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:42:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2900] WSDLValidator through Stax2DOM leaves input streams open which causes input files to be locked.</title>
                <link>https://issues.apache.org/jira/browse/CXF-2900</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The WSDLValidator class leaves input stream open. This causes the validated file to be locked and it cannot be deleted, which messes up our software. &lt;/p&gt;

&lt;p&gt;Only when the Java process exists can the file be reclaimed. It is possible that a GC closes the file when the input stream is found and no longer reachable.&lt;/p&gt;

&lt;p&gt;I am invoking the WSDLValidator class programatically like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void cxfValidateWsdl(File wsdlFile) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        CommandInterfaceUtils.commandCommonMain();
        ToolRunner.runTool(WSDLValidator.class, WSDLValidator.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getResourceAsStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;wsdlvalidator.xml&quot;&lt;/span&gt;), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] {
                &lt;span class=&quot;code-quote&quot;&gt;&quot;-verbose&quot;&lt;/span&gt;, wsdlFile.toURI().toString() });
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Down the line, CXF opens but does not close the input file stream in Stax2DOM:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Document getDocument(URL url) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ToolException {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            StreamSource src = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamSource(url.openStream(), url.toExternalForm());
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; StaxUtils.read(StaxUtils.createXMLStreamReader(src), &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ToolException(e);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is fixed for all getDocument methods in the attached patch.&lt;/p&gt;

&lt;p&gt;I am not sure how to work around this aside from rebuilding CXF or waiting for 2.2.10. &lt;/p&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.6.0_20&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_20-b02)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 16.3-b01, mixed mode)&lt;/p&gt;

&lt;p&gt;Microsoft Windows &lt;span class=&quot;error&quot;&gt;&amp;#91;Version 6.0.6002&amp;#93;&lt;/span&gt;&lt;/p&gt;</environment>
        <key id="12469394">CXF-2900</key>
            <summary>WSDLValidator through Stax2DOM leaves input streams open which causes input files to be locked.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="ggregory">Gary D. Gregory</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Jul 2010 23:58:33 +0000</created>
                <updated>Thu, 10 Mar 2011 23:16:52 +0000</updated>
                            <resolved>Fri, 16 Jul 2010 15:06:33 +0000</resolved>
                                    <version>2.2.9</version>
                                    <fixVersion>2.2.10</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12888962" author="ggregory@seagullsw.com" created="Fri, 16 Jul 2010 00:00:12 +0000"  >&lt;p&gt;Patch for source and unit tests.&lt;/p&gt;</comment>
                            <comment id="12888977" author="ggregory@seagullsw.com" created="Fri, 16 Jul 2010 01:05:59 +0000"  >&lt;p&gt;Patch with source and tests.&lt;/p&gt;</comment>
                            <comment id="12889203" author="dkulp" created="Fri, 16 Jul 2010 15:06:33 +0000"  >
&lt;p&gt;Patch applied.  Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12449608" name="CXF-2900.diff" size="6394" author="ggregory@seagullsw.com" created="Fri, 16 Jul 2010 01:05:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>47294</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uxqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>