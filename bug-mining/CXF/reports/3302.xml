<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:32:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7742] CdiResourceProvider is not thread safe</title>
                <link>https://issues.apache.org/jira/browse/CXF-7742</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description></description>
                <environment></environment>
        <key id="13161017">CXF-7742</key>
            <summary>CdiResourceProvider is not thread safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="romain.manni-bucau">Romain Manni-Bucau</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 May 2018 10:10:49 +0000</created>
                <updated>Mon, 25 Mar 2019 12:28:54 +0000</updated>
                            <resolved>Sat, 2 Jun 2018 06:47:00 +0000</resolved>
                                    <version>3.2.4</version>
                                    <fixVersion>3.2.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16483746" author="githubbot" created="Tue, 22 May 2018 10:11:35 +0000"  >&lt;p&gt;rmannibucau opened a new pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16484728" author="githubbot" created="Tue, 22 May 2018 23:01:39 +0000"  >&lt;p&gt;reta commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190079458&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190079458&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/CdiResourceProvider.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -62,6 +95,37 @@ public void releaseInstance(Message m, Object o) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public boolean isSingleton() &lt;/p&gt;
{
-        return !beanManager.isNormalScope(bean.getScope());
+        return singleton;
+    }
&lt;p&gt;+&lt;br/&gt;
+    // warn: several impls use @Dependent == request so we should probably add a flag&lt;br/&gt;
+    private boolean isConsideredSingleton() &lt;/p&gt;
{
+        return Singleton.class == bean.getScope() || Dependent.class == bean.getScope();
+    }
&lt;p&gt;+&lt;br/&gt;
+    public abstract static class Lifecycle {&lt;br/&gt;
+        BeanManager beanManager;&lt;br/&gt;
+        Bean&amp;lt;?&amp;gt; bean;&lt;br/&gt;
+        Object instance;&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   The `instance` could be removed, right? Since `Lifecycle` for the singleton re-declares it .&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16485774" author="githubbot" created="Tue, 22 May 2018 23:54:05 +0000"  >&lt;p&gt;reta commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190088232&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190088232&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -303,6 +306,10 @@ public void release(@Observes final BeforeShutdown event) {&lt;br/&gt;
             for (final CreationalContext&amp;lt;?&amp;gt; disposableCreationalContext: disposableCreationalContexts) &lt;/p&gt;
{
                 disposableCreationalContext.release();
             }
&lt;p&gt;+            disposableCreationalContexts.clear();&lt;br/&gt;
+        }&lt;br/&gt;
+        synchronized (disposableResourceProviders) {&lt;br/&gt;
+            disposableResourceProviders.forEach(p -&amp;gt; p.getLifecycle().destroy());&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   `disposableResourceProviders.clear()`?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16485775" author="githubbot" created="Tue, 22 May 2018 23:54:42 +0000"  >&lt;p&gt;reta commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190088307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190088307&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -372,7 +379,14 @@ private ClassifiedClasses classes2singletons(final Application application, fina&lt;/p&gt;

&lt;p&gt;             for (final Bean&amp;lt; ? &amp;gt; bean: serviceBeans) {&lt;br/&gt;
                 if (classes.contains(bean.getBeanClass())) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;classified.addResourceProvider(new CdiResourceProvider(beanManager, bean));&lt;br/&gt;
+                    final CdiResourceProvider provider = new CdiResourceProvider(beanManager, bean);&lt;br/&gt;
+                    // if not a singleton we manage it per request&lt;br/&gt;
+                    // if @Singleton the container handles it&lt;br/&gt;
+                    // so we only need this case here&lt;br/&gt;
+                    if (provider.isSingleton() &amp;amp;&amp;amp; Dependent.class == bean.getScope()) {&lt;br/&gt;
+                        disposableResourceProviders.add(provider);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   ```&lt;br/&gt;
   synchronized (disposableResourceProviders) &lt;/p&gt;
{
       disposableResourceProviders.add(provider);
   }
&lt;p&gt;   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16485776" author="githubbot" created="Tue, 22 May 2018 23:55:05 +0000"  >&lt;p&gt;reta commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190088307&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190088307&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -372,7 +379,14 @@ private ClassifiedClasses classes2singletons(final Application application, fina&lt;/p&gt;

&lt;p&gt;             for (final Bean&amp;lt; ? &amp;gt; bean: serviceBeans) {&lt;br/&gt;
                 if (classes.contains(bean.getBeanClass())) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;classified.addResourceProvider(new CdiResourceProvider(beanManager, bean));&lt;br/&gt;
+                    final CdiResourceProvider provider = new CdiResourceProvider(beanManager, bean);&lt;br/&gt;
+                    // if not a singleton we manage it per request&lt;br/&gt;
+                    // if @Singleton the container handles it&lt;br/&gt;
+                    // so we only need this case here&lt;br/&gt;
+                    if (provider.isSingleton() &amp;amp;&amp;amp; Dependent.class == bean.getScope()) {&lt;br/&gt;
+                        disposableResourceProviders.add(provider);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   ```&lt;br/&gt;
   synchronized (disposableResourceProviders) &lt;/p&gt;
{
       disposableResourceProviders.add(provider);
   }
&lt;p&gt;   ```&lt;br/&gt;
   ?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16486488" author="githubbot" created="Wed, 23 May 2018 00:02:14 +0000"  >&lt;p&gt;reta commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391178510&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391178510&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rmannibucau Looks good, a few minor comments, I am wondering if it worth creating a test case for different resource providers? &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16486489" author="githubbot" created="Wed, 23 May 2018 00:02:40 +0000"  >&lt;p&gt;reta commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391178510&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391178510&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rmannibucau Looks good, a few minor comments, I am wondering if it worth creating a test case for different beans backed by resource providers? &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16486491" author="githubbot" created="Wed, 23 May 2018 00:03:39 +0000"  >&lt;p&gt;reta commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391178510&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391178510&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rmannibucau Looks good, a few minor comments, I am wondering if it&apos;s worth creating a test case for different beans backed by resource providers? &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16486798" author="githubbot" created="Wed, 23 May 2018 06:44:59 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190137393&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190137393&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -372,7 +379,14 @@ private ClassifiedClasses classes2singletons(final Application application, fina&lt;/p&gt;

&lt;p&gt;             for (final Bean&amp;lt; ? &amp;gt; bean: serviceBeans) {&lt;br/&gt;
                 if (classes.contains(bean.getBeanClass())) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;classified.addResourceProvider(new CdiResourceProvider(beanManager, bean));&lt;br/&gt;
+                    final CdiResourceProvider provider = new CdiResourceProvider(beanManager, bean);&lt;br/&gt;
+                    // if not a singleton we manage it per request&lt;br/&gt;
+                    // if @Singleton the container handles it&lt;br/&gt;
+                    // so we only need this case here&lt;br/&gt;
+                    if (provider.isSingleton() &amp;amp;&amp;amp; Dependent.class == bean.getScope()) {&lt;br/&gt;
+                        disposableResourceProviders.add(provider);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Oh good catch, copied the pattern of disposableCreationalContexts but actually we don&apos;t need that for that list which is just used in the context of the extension so thread safe, will clean up&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16486847" author="githubbot" created="Wed, 23 May 2018 07:29:25 +0000"  >&lt;p&gt;rmannibucau commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391248360&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391248360&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @reta I updated the PR, I split the provider for singletons and per request handling, it looks easier to me to follow what is done and avoid to be tempted to be back to something not thread safe, I added a test on the scope handling too&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16487060" author="githubbot" created="Wed, 23 May 2018 10:36:14 +0000"  >&lt;p&gt;reta commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190199396&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190199396&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/SingletonResourceProvider.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,52 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
+import org.apache.cxf.message.Message;&lt;br/&gt;
+&lt;br/&gt;
+public class SingletonResourceProvider implements ResourceProvider {&lt;br/&gt;
+    private final Class&amp;lt;?&amp;gt; clazz;&lt;br/&gt;
+    private Object instance;&lt;br/&gt;
+&lt;br/&gt;
+    SingletonResourceProvider(final Lifecycle lifecycle, final Class&amp;lt;?&amp;gt; clazz) {&lt;br/&gt;
+        this.instance = lifecycle.create();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Should we create instance proactively here? It is simpler like that but it may not be needed (in theory, at least) &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16487062" author="githubbot" created="Wed, 23 May 2018 10:38:39 +0000"  >&lt;p&gt;reta commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391301940&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391301940&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rmannibucau Looks better like that, with providers split between different classes&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16487179" author="githubbot" created="Wed, 23 May 2018 12:39:59 +0000"  >&lt;p&gt;rmannibucau commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190229459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190229459&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/SingletonResourceProvider.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,52 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
+import org.apache.cxf.message.Message;&lt;br/&gt;
+&lt;br/&gt;
+public class SingletonResourceProvider implements ResourceProvider {&lt;br/&gt;
+    private final Class&amp;lt;?&amp;gt; clazz;&lt;br/&gt;
+    private Object instance;&lt;br/&gt;
+&lt;br/&gt;
+    SingletonResourceProvider(final Lifecycle lifecycle, final Class&amp;lt;?&amp;gt; clazz) {&lt;br/&gt;
+        this.instance = lifecycle.create();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Well for all normal scoped beans it is still lazy thanks to CDI proxies and for @Singleton/@Dependent it becomes eager but it is ok from a business perspective + the extension already does it in several cases so not a big deal IMHO.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16488118" author="githubbot" created="Wed, 23 May 2018 22:22:51 +0000"  >&lt;p&gt;reta commented on a change in pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#discussion_r190417582&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#discussion_r190417582&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: integration/cdi/src/main/java/org/apache/cxf/cdi/SingletonResourceProvider.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,52 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
+import org.apache.cxf.message.Message;&lt;br/&gt;
+&lt;br/&gt;
+public class SingletonResourceProvider implements ResourceProvider {&lt;br/&gt;
+    private final Class&amp;lt;?&amp;gt; clazz;&lt;br/&gt;
+    private Object instance;&lt;br/&gt;
+&lt;br/&gt;
+    SingletonResourceProvider(final Lifecycle lifecycle, final Class&amp;lt;?&amp;gt; clazz) {&lt;br/&gt;
+        this.instance = lifecycle.create();&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   :+1: &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16489464" author="githubbot" created="Thu, 24 May 2018 17:43:07 +0000"  >&lt;p&gt;rmannibucau commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391800594&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391800594&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Anything preventing a merge or are we good to go like that? (No pression, just checking if something is expected from my side)&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16489859" author="githubbot" created="Thu, 24 May 2018 21:46:06 +0000"  >&lt;p&gt;reta commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391874736&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391874736&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @rmannibucau Looks good to me, do you want me to merge?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16489906" author="githubbot" created="Thu, 24 May 2018 22:16:42 +0000"  >&lt;p&gt;rmannibucau commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391883148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391883148&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @reta if possible, sure. Thanks a lot.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16489960" author="githubbot" created="Thu, 24 May 2018 23:03:20 +0000"  >&lt;p&gt;reta closed pull request #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
index d2b76dbd5cd..9c5b48c9e31 100644&lt;br/&gt;
&amp;#8212; a/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/JAXRSCdiResourceExtension.java&lt;br/&gt;
@@ -29,6 +29,7 @@&lt;br/&gt;
 import java.util.ServiceLoader;&lt;br/&gt;
 import java.util.Set;&lt;/p&gt;

&lt;p&gt;+import javax.enterprise.context.Dependent;&lt;br/&gt;
 import javax.enterprise.context.spi.CreationalContext;&lt;br/&gt;
 import javax.enterprise.event.Observes;&lt;br/&gt;
 import javax.enterprise.inject.spi.AfterBeanDiscovery;&lt;br/&gt;
@@ -45,6 +46,7 @@&lt;br/&gt;
 import javax.enterprise.inject.spi.ProcessProducerField;&lt;br/&gt;
 import javax.enterprise.inject.spi.ProcessProducerMethod;&lt;br/&gt;
 import javax.enterprise.inject.spi.WithAnnotations;&lt;br/&gt;
+import javax.inject.Singleton;&lt;br/&gt;
 import javax.ws.rs.ApplicationPath;&lt;br/&gt;
 import javax.ws.rs.Path;&lt;br/&gt;
 import javax.ws.rs.core.Application;&lt;br/&gt;
@@ -60,6 +62,7 @@&lt;br/&gt;
 import org.apache.cxf.jaxrs.JAXRSServerFactoryBean;&lt;br/&gt;
 import org.apache.cxf.jaxrs.ext.ContextClassProvider;&lt;br/&gt;
 import org.apache.cxf.jaxrs.ext.JAXRSServerFactoryCustomizationExtension;&lt;br/&gt;
+import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
 import org.apache.cxf.jaxrs.provider.ServerConfigurableFactory;&lt;br/&gt;
 import org.apache.cxf.jaxrs.utils.InjectionUtils;&lt;br/&gt;
 import org.apache.cxf.jaxrs.utils.JAXRSServerFactoryCustomizationUtils;&lt;br/&gt;
@@ -82,6 +85,8 @@&lt;br/&gt;
     private final List&amp;lt; Bean&amp;lt; ? extends Feature &amp;gt; &amp;gt; featureBeans = new ArrayList&amp;lt; Bean&amp;lt; ? extends Feature &amp;gt; &amp;gt;();&lt;br/&gt;
     private final List&amp;lt; CreationalContext&amp;lt; ? &amp;gt; &amp;gt; disposableCreationalContexts =&lt;br/&gt;
         new ArrayList&amp;lt; CreationalContext&amp;lt; ? &amp;gt; &amp;gt;();&lt;br/&gt;
+    private final List&amp;lt; Lifecycle &amp;gt; disposableLifecycles =&lt;br/&gt;
+        new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
     private final Set&amp;lt; Type &amp;gt; contextTypes = new LinkedHashSet&amp;lt;&amp;gt;();&lt;/p&gt;

&lt;p&gt;     private final Collection&amp;lt; String &amp;gt; existingStandardClasses = new HashSet&amp;lt;&amp;gt;();&lt;br/&gt;
@@ -93,7 +98,7 @@&lt;br/&gt;
     private static class ClassifiedClasses {&lt;br/&gt;
         private List&amp;lt; Object &amp;gt; providers = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
         private List&amp;lt; Feature &amp;gt; features = new ArrayList&amp;lt;&amp;gt;();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private List&amp;lt; CdiResourceProvider &amp;gt; resourceProviders = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
+        private List&amp;lt;ResourceProvider&amp;gt; resourceProviders = new ArrayList&amp;lt;&amp;gt;();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         public void addProviders(final Collection&amp;lt; Object &amp;gt; others) {&lt;br/&gt;
             this.providers.addAll(others);&lt;br/&gt;
@@ -103,7 +108,7 @@ public void addFeatures(final Collection&amp;lt; Feature &amp;gt; others) &lt;/p&gt;
{
             this.features.addAll(others);
         }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void addResourceProvider(final CdiResourceProvider other) {&lt;br/&gt;
+        public void addResourceProvider(final ResourceProvider other) 
{
             this.resourceProviders.add(other);
         }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -115,7 +120,7 @@ public void addResourceProvider(final CdiResourceProvider other) &lt;/p&gt;
{
             return features;
         }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public List&amp;lt;CdiResourceProvider&amp;gt; getResourceProviders() 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        public List&amp;lt;ResourceProvider&amp;gt; getResourceProviders() {
             return resourceProviders;
         }     }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;@@ -303,7 +308,11 @@ public void release(@Observes final BeforeShutdown event) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {             for (final CreationalContext&amp;lt;?&amp;gt; disposableCreationalContext}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+        disposableLifecycles.forEach(Lifecycle::destroy);&lt;br/&gt;
+        disposableLifecycles.clear();&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     private Class&amp;lt;?&amp;gt; toClass(String name) {&lt;br/&gt;
@@ -347,7 +356,7 @@ private JAXRSServerFactoryBean createFactoryInstance(final Application applicati&lt;br/&gt;
         instance.setProviders(classified.getProviders());&lt;br/&gt;
         instance.getFeatures().addAll(classified.getFeatures());&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;for (final CdiResourceProvider resourceProvider: classified.getResourceProviders()) {&lt;br/&gt;
+        for (final ResourceProvider resourceProvider: classified.getResourceProviders()) 
{
             instance.setResourceProvider(resourceProvider.getResourceClass(), resourceProvider);
         }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -372,7 +381,28 @@ private ClassifiedClasses classes2singletons(final Application application, fina&lt;/p&gt;

&lt;p&gt;             for (final Bean&amp;lt; ? &amp;gt; bean: serviceBeans) {&lt;br/&gt;
                 if (classes.contains(bean.getBeanClass())) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;classified.addResourceProvider(new CdiResourceProvider(beanManager, bean));&lt;br/&gt;
+                    // normal scoped beans will return us a proxy in getInstance so it is singletons for us,&lt;br/&gt;
+                    // @Singleton is indeed a singleton&lt;br/&gt;
+                    // @Dependent should be a request scoped instance but for backward compat we kept it a singleton&lt;br/&gt;
+                    //&lt;br/&gt;
+                    // other scopes are considered request scoped (for jaxrs)&lt;br/&gt;
+                    // and are created per request (getInstance/releaseInstance)&lt;br/&gt;
+                    final ResourceProvider resourceProvider;&lt;br/&gt;
+                    if (isCxfSingleton(beanManager, bean)) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+                        final Lifecycle lifecycle = new Lifecycle(beanManager, bean);+                        resourceProvider = new SingletonResourceProvider(lifecycle, bean.getBeanClass());++                        // if not a singleton we manage it per request+                        // if @Singleton the container handles it+                        // so we only need this case here+                        if (Dependent.class == bean.getScope()) {
+                            disposableLifecycles.add(lifecycle);
+                        }+                    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; else &lt;/p&gt;
{
+                        resourceProvider = new PerRequestResourceProvider(
+                        () -&amp;gt; new Lifecycle(beanManager, bean), bean.getBeanClass());
+                    }
&lt;p&gt;+                    classified.addResourceProvider(resourceProvider);&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;br/&gt;
         }&lt;br/&gt;
@@ -380,6 +410,15 @@ private ClassifiedClasses classes2singletons(final Application application, fina&lt;br/&gt;
         return classified;&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+    boolean isCxfSingleton(final BeanManager beanManager, final Bean&amp;lt;?&amp;gt; bean) &lt;/p&gt;
{
+        return beanManager.isNormalScope(bean.getScope()) || isConsideredSingleton(bean.getScope());
+    }
&lt;p&gt;+&lt;br/&gt;
+    // warn: several impls use @Dependent == request so we should probably add a flag&lt;br/&gt;
+    private boolean isConsideredSingleton(final Class&amp;lt;?&amp;gt; scope) &lt;/p&gt;
{
+        return Singleton.class == scope || Dependent.class == scope;
+    }
&lt;p&gt;+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Load external providers from service loader&lt;/li&gt;
	&lt;li&gt;@return loaded external providers&lt;br/&gt;
diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiResourceProvider.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/Lifecycle.java&lt;br/&gt;
similarity index 59%&lt;br/&gt;
rename from integration/cdi/src/main/java/org/apache/cxf/cdi/CdiResourceProvider.java&lt;br/&gt;
rename to integration/cdi/src/main/java/org/apache/cxf/cdi/Lifecycle.java&lt;br/&gt;
index 68d3b2b75a9..089b25a94f3 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/integration/cdi/src/main/java/org/apache/cxf/cdi/CdiResourceProvider.java&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/Lifecycle.java&lt;br/&gt;
@@ -22,46 +22,28 @@&lt;br/&gt;
 import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
 import javax.enterprise.inject.spi.BeanManager;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
-import org.apache.cxf.message.Message;&lt;br/&gt;
-&lt;br/&gt;
-public class CdiResourceProvider implements ResourceProvider {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private Object instance;&lt;/li&gt;
	&lt;li&gt;private CreationalContext&amp;lt; ? &amp;gt; context;&lt;br/&gt;
-&lt;br/&gt;
+class Lifecycle {&lt;br/&gt;
     private final BeanManager beanManager;&lt;/li&gt;
	&lt;li&gt;private final Bean&amp;lt; ? &amp;gt; bean;&lt;br/&gt;
+    private final Bean&amp;lt;?&amp;gt; bean;&lt;br/&gt;
+    private Object instance;&lt;br/&gt;
+    private CreationalContext&amp;lt;?&amp;gt; context;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;CdiResourceProvider(final BeanManager beanManager, final Bean&amp;lt; ? &amp;gt; bean) {&lt;br/&gt;
+    Lifecycle(final BeanManager beanManager, final Bean&amp;lt;?&amp;gt; bean) 
{
         this.beanManager = beanManager;
         this.bean = bean;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Object getInstance(Message m) {&lt;/li&gt;
	&lt;li&gt;if (instance == null) 
{
-            context = beanManager.createCreationalContext(bean);
-            instance = beanManager.getReference(bean, bean.getBeanClass(), context);
-        }
&lt;p&gt;-&lt;br/&gt;
+    Object create() &lt;/p&gt;
{
+        context = beanManager.createCreationalContext(bean);
+        instance = beanManager.getReference(bean, bean.getBeanClass(), context);
         return instance;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public void releaseInstance(Message m, Object o) {&lt;br/&gt;
+    void destroy() 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {         if (context != null) {
             context.release();
             instance = null;
+            context = null;
         }     }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public Class&amp;lt;?&amp;gt; getResourceClass() 
{
-        return bean.getBeanClass();
-    }
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@Override&lt;/li&gt;
	&lt;li&gt;public boolean isSingleton() 
{
-        return !beanManager.isNormalScope(bean.getScope());
-    }
&lt;p&gt;-}&lt;br/&gt;
+}&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/PerRequestResourceProvider.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/PerRequestResourceProvider.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..127bf3e102e&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/PerRequestResourceProvider.java&lt;br/&gt;
@@ -0,0 +1,59 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import java.util.function.Supplier;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
+import org.apache.cxf.message.Message;&lt;br/&gt;
+&lt;br/&gt;
+public class PerRequestResourceProvider implements ResourceProvider {&lt;br/&gt;
+    private final Supplier&amp;lt;Lifecycle&amp;gt; lifecycle;&lt;br/&gt;
+    private final Class&amp;lt;?&amp;gt; clazz;&lt;br/&gt;
+&lt;br/&gt;
+    PerRequestResourceProvider(final Supplier&amp;lt;Lifecycle&amp;gt; lifecycle, final Class&amp;lt;?&amp;gt; clazz) 
{
+        this.lifecycle = lifecycle;
+        this.clazz = clazz;
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Object getInstance(final Message m) &lt;/p&gt;
{
+        final Lifecycle currentLifecycle = this.lifecycle.get();
+        m.put(Lifecycle.class, currentLifecycle);
+        return currentLifecycle.create();
+    }
&lt;p&gt;+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void releaseInstance(final Message m, final Object o) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+        final Lifecycle contextualLifecycle = m.get(Lifecycle.class);+        if (contextualLifecycle != null) {
+            contextualLifecycle.destroy();
+        }+    }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Class&amp;lt;?&amp;gt; getResourceClass() &lt;/p&gt;
{
+        return clazz;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public boolean isSingleton() {
+        return false;
+    }&lt;br/&gt;
+}&lt;br/&gt;
diff --git a/integration/cdi/src/main/java/org/apache/cxf/cdi/SingletonResourceProvider.java b/integration/cdi/src/main/java/org/apache/cxf/cdi/SingletonResourceProvider.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..8b7e02f0fa3&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/integration/cdi/src/main/java/org/apache/cxf/cdi/SingletonResourceProvider.java&lt;br/&gt;
@@ -0,0 +1,52 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
+import org.apache.cxf.message.Message;&lt;br/&gt;
+&lt;br/&gt;
+public class SingletonResourceProvider implements ResourceProvider {&lt;br/&gt;
+    private final Class&amp;lt;?&amp;gt; clazz;&lt;br/&gt;
+    private Object instance;&lt;br/&gt;
+&lt;br/&gt;
+    SingletonResourceProvider(final Lifecycle lifecycle, final Class&amp;lt;?&amp;gt; clazz) {
+        this.instance = lifecycle.create();
+        this.clazz = clazz;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Object getInstance(final Message m) {
+        return instance;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public void releaseInstance(final Message m, final Object o) {
+        // no-op
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public Class&amp;lt;?&amp;gt; getResourceClass() {+        return clazz;+    }
&lt;p&gt;+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public boolean isSingleton() &lt;/p&gt;
{
+        return true;
+    }
&lt;p&gt;+}&lt;br/&gt;
diff --git a/integration/cdi/src/test/java/org/apache/cxf/cdi/CdiResourceProviderTest.java b/integration/cdi/src/test/java/org/apache/cxf/cdi/CdiResourceProviderTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..3c471980e35&lt;/p&gt;&lt;/li&gt;
			&lt;li&gt;/dev/null&lt;br/&gt;
+++ b/integration/cdi/src/test/java/org/apache/cxf/cdi/CdiResourceProviderTest.java&lt;br/&gt;
@@ -0,0 +1,125 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
+ * or more contributor license agreements. See the NOTICE file&lt;br/&gt;
+ * distributed with this work for additional information&lt;br/&gt;
+ * regarding copyright ownership. The ASF licenses this file&lt;br/&gt;
+ * to you under the Apache License, Version 2.0 (the&lt;br/&gt;
+ * &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
+ * with the License. You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing,&lt;br/&gt;
+ * software distributed under the License is distributed on an&lt;br/&gt;
+ * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY&lt;br/&gt;
+ * KIND, either express or implied. See the License for the&lt;br/&gt;
+ * specific language governing permissions and limitations&lt;br/&gt;
+ * under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.cxf.cdi;&lt;br/&gt;
+&lt;br/&gt;
+import java.lang.annotation.Documented;&lt;br/&gt;
+&lt;br/&gt;
+import javax.enterprise.context.ApplicationScoped;&lt;br/&gt;
+import javax.enterprise.context.NormalScope;&lt;br/&gt;
+import javax.enterprise.context.RequestScoped;&lt;br/&gt;
+import javax.enterprise.inject.spi.Bean;&lt;br/&gt;
+import javax.enterprise.inject.spi.BeanManager;&lt;br/&gt;
+import javax.inject.Singleton;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.cxf.jaxrs.lifecycle.ResourceProvider;&lt;br/&gt;
+import org.apache.cxf.message.MessageImpl;&lt;br/&gt;
+&lt;br/&gt;
+import org.junit.Before;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+import org.junit.runner.RunWith;&lt;br/&gt;
+import org.mockito.Mock;&lt;br/&gt;
+import org.mockito.junit.MockitoJUnitRunner;&lt;br/&gt;
+&lt;br/&gt;
+import static org.junit.Assert.assertEquals;&lt;br/&gt;
+import static org.junit.Assert.assertFalse;&lt;br/&gt;
+import static org.junit.Assert.assertNotEquals;&lt;br/&gt;
+import static org.junit.Assert.assertNotNull;&lt;br/&gt;
+import static org.junit.Assert.assertTrue;&lt;br/&gt;
+import static org.mockito.ArgumentMatchers.any;&lt;br/&gt;
+import static org.mockito.ArgumentMatchers.eq;&lt;br/&gt;
+import static org.mockito.Mockito.when;&lt;br/&gt;
+&lt;br/&gt;
+@SuppressWarnings(
{&quot;rawtypes&quot;, &quot;unchecked&quot;}
&lt;p&gt;)&lt;br/&gt;
+@RunWith(MockitoJUnitRunner.class)&lt;br/&gt;
+public class CdiResourceProviderTest &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+    @Mock+    private BeanManager beanManager;++    @Mock+    private Bean&amp;lt;?&amp;gt; bean;++    @Before+    public void setup() {
+        final Class beanClass = Object.class;
+        when(bean.getBeanClass()).thenReturn(beanClass);
+        when(beanManager.isNormalScope(any())).thenAnswer(invocationOnMock -&amp;gt;
+                Class.class.cast(invocationOnMock.getArguments()[0]).isAnnotationPresent(NormalScope.class));
+        when(beanManager.getReference(eq(bean), eq(beanClass), any()))
+                .thenAnswer(i -&amp;gt; new Object()); // ensure to create one instance per call, this is what we test
+    }++    @Test+    public void normalScoped() {
+        when(bean.getScope()).thenReturn(Class.class.cast(ApplicationScoped.class));
+        assertSingleton();
+    }++    @Test+    public void singleton() {
+        when(bean.getScope()).thenReturn(Class.class.cast(Singleton.class));
+        assertSingleton();
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void dependent() {+        when(bean.getScope()).thenReturn(Class.class.cast(Singleton.class));+        assertSingleton();+    }++    @Test+    public void requestScoped() {
+        when(bean.getScope()).thenReturn(Class.class.cast(RequestScoped.class));
+        assertSingleton(); // yes, this is a singleton since we look up the proxy
+    }++    @Test+    public void perRequest() {
+        // not a scope so will be considered as a not singleton bean
+        when(bean.getScope()).thenReturn(Class.class.cast(Documented.class));
+        assertNotSingleton();
+    }++    private void assertNotSingleton() {
+        final ResourceProvider provider = new PerRequestResourceProvider(
+        () -&amp;gt; new Lifecycle(beanManager, bean), Object.class);
+        assertFalse(new JAXRSCdiResourceExtension().isCxfSingleton(beanManager, bean));
+        assertFalse(provider.isSingleton());
+
+        final MessageImpl message1 = new MessageImpl();
+        final MessageImpl message2 = new MessageImpl();
+        final Object instance = provider.getInstance(message1);
+        assertNotNull(instance);
+        assertNotEquals(provider.getInstance(message1), provider.getInstance(message2));
+
+        // ensure we can close the lifecycle
+        final Lifecycle lifecycle1 = message1.get(Lifecycle.class);
+        assertNotNull(lifecycle1);
+        assertNotNull(message2.get(Lifecycle.class));
+    }++    private void assertSingleton() {
+        final ResourceProvider provider = new SingletonResourceProvider(new Lifecycle(beanManager, bean), Object.class);
+        assertTrue(new JAXRSCdiResourceExtension().isCxfSingleton(beanManager, bean));
+        assertTrue(provider.isSingleton());
+
+        final Object instance = provider.getInstance(new MessageImpl());
+        assertNotNull(instance);
+        assertEquals(instance, provider.getInstance(new MessageImpl()));
+    }+}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16489962" author="githubbot" created="Thu, 24 May 2018 23:03:35 +0000"  >&lt;p&gt;reta commented on issue #418: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7742&quot; title=&quot;CdiResourceProvider is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7742&quot;&gt;&lt;del&gt;CXF-7742&lt;/del&gt;&lt;/a&gt; handling scopes in CdiResourceProvider&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/418#issuecomment-391892148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/418#issuecomment-391892148&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Done, thanks a lot for fixing that, @rmannibucau !&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16498888" author="deki" created="Sat, 2 Jun 2018 05:20:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=romain.manni-bucau&quot; class=&quot;user-hover&quot; rel=&quot;romain.manni-bucau&quot;&gt;romain.manni-bucau&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; PR has been merged, can we resolve this issue?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tzpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>