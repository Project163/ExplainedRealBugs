<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:45:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3226] Going to a JAX-RS resource that contains a space in the path returns a 404 response code</title>
                <link>https://issues.apache.org/jira/browse/CXF-3226</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If you go to a JAX-RS resource that contains a space in the path, the Apache CXF JAX-RS runtime returns a 404 response code. In the STDERR log, you&apos;ll see the following message:&lt;/p&gt;

&lt;p&gt;Jan 1, 2011 3:05:01 PM org.apache.cxf.jaxrs.utils.JAXRSUtils findTargetMethod&lt;br/&gt;
WARNING: .No operation matching request path /has%20space is found, HTTP Method : GET, ContentType : &lt;b&gt;/&lt;/b&gt;, Accept : application/xml,application/xhtml+xml,image/png,text/html;q=0.9,text/plain;q=0.8,&lt;b&gt;/&lt;/b&gt;;q=0.5,.&lt;/p&gt;

&lt;p&gt;The cause for this problem may be found in AbstractServerController.getBaseURL. It assumes pathInfo is always decoded but in the JAX-RS situation, it may actually still be encoded.&lt;/p&gt;

&lt;p&gt;Relevant sample code + patch attached.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6_22&lt;br/&gt;
Apache CXF 2.3.1&lt;/p&gt;</environment>
        <key id="12494421">CXF-3226</key>
            <summary>Going to a JAX-RS resource that contains a space in the path returns a 404 response code</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="jadowney">Jason Downey</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Jan 2011 23:22:23 +0000</created>
                <updated>Thu, 17 Feb 2011 18:45:46 +0000</updated>
                            <resolved>Sat, 8 Jan 2011 19:55:21 +0000</resolved>
                                    <version>2.3.1</version>
                                    <fixVersion>2.3.2</fixVersion>
                    <fixVersion>2.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12976460" author="jadowney" created="Sat, 1 Jan 2011 23:32:08 +0000"  >&lt;p&gt;File Description&lt;br/&gt;
================&lt;/p&gt;

&lt;p&gt;Space       - Contains valid JAX-RS resource&lt;br/&gt;
Application - JAX-RS application&lt;br/&gt;
JettyServer - Launches Jetty hosting a CXFNonSpringJaxrsServlet servlet to demo bug&lt;/p&gt;

&lt;p&gt;Example URLs&lt;br/&gt;
============&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://localhost:1334/?_wadl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:1334/?_wadl&lt;/a&gt; - generates WADL for Space resource&lt;br/&gt;
&lt;a href=&quot;http://localhost:1334/nospace&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:1334/nospace&lt;/a&gt; - returns a text/plain document&lt;br/&gt;
&lt;a href=&quot;http://localhost:1334/has%20space&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:1334/has%20space&lt;/a&gt; - returns a blank text/xml document with a 404 response code&lt;/p&gt;</comment>
                            <comment id="12976461" author="jadowney" created="Sat, 1 Jan 2011 23:32:49 +0000"  >&lt;p&gt;Potential patch for issue. Only affects AbstractServerController.java.&lt;/p&gt;</comment>
                            <comment id="12976859" author="sergey_beryozkin" created="Mon, 3 Jan 2011 18:28:06 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;But what happens if you have &quot;the%20%space&quot; Path value or similar ?  If we decode at the servlet level then we won&apos;t be able to match &quot;the%20%space&quot; ?&lt;/p&gt;

&lt;p&gt;Can JAX-RS Path can not contain WSPaces in the actual literal name ? Do you think this is still a valid JIRA ?&lt;br/&gt;
thanks, Sergey  &lt;/p&gt;</comment>
                            <comment id="12977116" author="jadowney" created="Tue, 4 Jan 2011 05:03:11 +0000"  >&lt;p&gt;If you want to match @Path(&quot;the%20%space&quot;), per RFC3986, the client should already have encoded this parameter as &quot;the%2520%25space&quot; and then the JAX-RS runtime should appropriately find the resource.&lt;/p&gt;

&lt;p&gt;Looking @ the JAX-RS 1.1 specification, @Path can contain spaces! If you look at page 14 (in section 3.4), there is this sample:&lt;/p&gt;

&lt;p&gt;1 @Path(&quot;widget list/&lt;/p&gt;
{id}&quot;)&lt;br/&gt;
2 @Path(&quot;widget%20list/{id}
&lt;p&gt;&quot;)&lt;/p&gt;

&lt;p&gt;The specification states that these two lines are equivalent.&lt;/p&gt;

&lt;p&gt;In my humble opinion (and I&apos;ll defer to you since you know the code way better than me), the key problem that needs to be addressed is that the base URL value needs to be calculated correctly. The fix doesn&apos;t necessarily have to be in AbstractServerController. You could subclass AbstractServerController and then provide your own implementation of getBaseURL to do the appropriate work. This ServerController would then only be used within CXFNonSpringJaxrsServlet.&lt;/p&gt;

&lt;p&gt;On the JIRA question, yes, I think it&apos;s a valid JIRA issue but I&apos;m welcome to discussing that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12978508" author="sergey_beryozkin" created="Thu, 6 Jan 2011 21:08:44 +0000"  >&lt;p&gt;Jason, I agree that @Path(&quot;widget list/&lt;/p&gt;
{id}&quot;) should be matched against request URIs containing &lt;br/&gt;
&lt;br/&gt;
widget%20list segments.&lt;br/&gt;
&lt;br/&gt;
The fix will have to be different though, literal values in &quot;widget list/{id}
&lt;p&gt;&quot; have to be encoded, with existing &apos;%&apos;s if any skipped, as per the @Path javadocs...I&apos;ll look into it&lt;/p&gt;

&lt;p&gt;Thanks, Sergey&lt;/p&gt;</comment>
                            <comment id="12995875" author="cthiebaud" created="Thu, 17 Feb 2011 16:16:03 +0000"  >&lt;p&gt;This fix caused a regression on our system.&lt;/p&gt;

&lt;p&gt;We have a jaxrs service annotated with the following path :&lt;/p&gt;

&lt;p&gt;@Path(&quot;/&lt;/p&gt;
{g}
&lt;p&gt;:&lt;/p&gt;
{a}
&lt;p&gt;:LATEST&quot;)&lt;/p&gt;

&lt;p&gt;It worked fine with cxf version 2.3.1. With cxf 2.3.2 the regexp generated is /(&lt;span class=&quot;error&quot;&gt;&amp;#91;^/&amp;#93;&lt;/span&gt;&lt;ins&gt;?)%3A(&lt;span class=&quot;error&quot;&gt;&amp;#91;^/&amp;#93;&lt;/span&gt;&lt;/ins&gt;?)%3ALATEST(/.*)? and URITemplate fails to map to the correct service.&lt;/p&gt;

&lt;p&gt;Clients have already been developed, are in production , and basically cannot be modified.&lt;/p&gt;

&lt;p&gt;Is there anything I can do on the server to handle incoming requests such as /groupId:artifactId:LATEST as before ? Not sure how to do this.&lt;/p&gt;</comment>
                            <comment id="12995906" author="sergey_beryozkin" created="Thu, 17 Feb 2011 16:50:45 +0000"  >&lt;p&gt;Ouch...&lt;/p&gt;

&lt;p&gt;The simplest workaround is to register a custom CXF in interceptor and replace &lt;br/&gt;
the Message.REQUEST_URI message property with the new value where &apos;:&apos; are replaced with %3A:&lt;/p&gt;

&lt;p&gt;public class CustomInInterceptor extends AbstractPhaseInterceptor&amp;lt;Message&amp;gt; {&lt;/p&gt;

&lt;p&gt;    public CustomInInterceptor() &lt;/p&gt;
{
        super(Phase.UNMARSHAL);
    }

&lt;p&gt;    @Override&lt;br/&gt;
    public void handleMessage(Message message) &lt;/p&gt;
{

         String uri = message.get(Message.REQUEST_URI);
         
         uri.replace(&quot;:&quot;, &quot;%3A&quot;);
         
         message.put(Message.REQUEST_URI, uri);
           
    }
&lt;p&gt; &lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;and then register it inside the jaxrs:inInterceptors&lt;/p&gt;

&lt;p&gt;It should provide a workaround fix and I will apply a fix to the trunk too.&lt;br/&gt;
thanks&lt;/p&gt;</comment>
                            <comment id="12995972" author="sergey_beryozkin" created="Thu, 17 Feb 2011 18:45:46 +0000"  >&lt;p&gt;The fix has been applied, will be in 2.3.3 very soon.&lt;/p&gt;

&lt;p&gt;Another approach, instead of adding an interceptor as a workaround, is to add another method to the server code, with explicit %3A in the path, as some legacy web clients will actually URLEncode the path fragment and the JAX-RS spec does not provide for something like @Path(&quot;/a:b&quot;) match both /a:b and /a%3Ab&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12467265" name="cxf_jax_rs_space_bug.zip" size="1838" author="jadowney" created="Sat, 1 Jan 2011 23:32:08 +0000"/>
                            <attachment id="12467266" name="patch.diff" size="1202" author="jadowney" created="Sat, 1 Jan 2011 23:32:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46992</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i13yov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231250</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>