<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:10:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5806] FIQL: Problem with mapping on ManyToMany or OnToMany associations of 2nd level</title>
                <link>https://issues.apache.org/jira/browse/CXF-5806</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The simplest is used an example to illustrate the problem&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Example&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ClassA {
    ClassB b;
    List&amp;lt;ClassD&amp;gt; listD;
};
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ClassB {
    List&amp;lt;ClassC&amp;gt; listC;
};
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ClassC {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name;
};
&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ClassD {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The following request works:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Fiql request OK (1er level)&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;properties: 
nameD=listD.name
Request:
?_s=nameD==xxxx
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The following request doesn&apos;t work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Fiql request KO (2nd level)&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;properties: 
nameC=b.listC.name
Request:
?_s=nameC==xxxx
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12721357">CXF-5806</key>
            <summary>FIQL: Problem with mapping on ManyToMany or OnToMany associations of 2nd level</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="tolosa-rom">Romain Castan</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Mon, 16 Jun 2014 08:26:00 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:36 +0000</updated>
                            <resolved>Thu, 19 Jun 2014 11:51:23 +0000</resolved>
                                    <version>2.6.13</version>
                    <version>3.0</version>
                                    <fixVersion>2.6.15</fixVersion>
                    <fixVersion>2.7.12</fixVersion>
                    <fixVersion>3.0.1</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14032225" author="tolosa-rom" created="Mon, 16 Jun 2014 08:31:14 +0000"  >&lt;p&gt;I propose a patch from branch 2.7.x-fixes to fix this problem but I think that the code of patch can be improve.&lt;/p&gt;</comment>
                            <comment id="14036343" author="sergey_beryozkin" created="Wed, 18 Jun 2014 20:39:11 +0000"  >&lt;p&gt;Hi, thanks for the patch, I&apos;ve applied it, we can optimize a split function a bit, not a problem, but can you look please at a disabled test that I added, JPATypedVisitorQueryTest#testGetLibraryBook() ?&lt;/p&gt;

&lt;p&gt;I have a Book-&amp;gt;Library-&amp;gt;List of Books, Library contains 3 books, the test was failing with a JPA-level exception before I applied the patch, after the patch JPA itself was OK but the test fails, 1 book is expected back, it returns 3...&lt;/p&gt;

&lt;p&gt;Thanks, Sergey &lt;/p&gt;</comment>
                            <comment id="14037202" author="tolosa-rom" created="Thu, 19 Jun 2014 10:13:48 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
The following FIQL expression&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;library.books.bookTitle==num10
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;means that we want all the books that have the library which contains the book &apos;num10&apos;.&lt;br/&gt;
In your unit test, the library &apos;town&apos; contains the book &apos;num10&apos; and the books &apos;num9&apos;, &apos;num10&apos;, &apos;num11&apos; are in library &apos;town&apos;.&lt;br/&gt;
So, the result of FIQL expression must be 3 books.&lt;br/&gt;
The SQL generated is the following:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;SQL&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select book0_.id as id0_, book0_.houseNumber as houseNum2_0_, book0_.street as street0_, 
book0_.bookTitle as bookTitle0_, book0_.library_id as library7_0_, book0_.dateOfBirth as dateOfBi5_0_, 
book0_.thename as thename0_ 
from Book book0_ 
&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; join Library library1_ on book0_.library_id=library1_.id 
&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; join Library_Book books2_ on library1_.id=books2_.Library_id 
&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; join Book book3_ on books2_.books_id=book3_.id 
where book3_.bookTitle=&lt;span class=&quot;code-quote&quot;&gt;&apos;num10&apos;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14037241" author="sergey_beryozkin" created="Thu, 19 Jun 2014 11:25:39 +0000"  >&lt;p&gt;Not sure it is a practically useful query though. Just curious, in your own application, what kind of query you do (replace the terms if you prefer), I just would like to understand why would users do such queries&lt;/p&gt;

&lt;p&gt;Thanks, Sergey&lt;/p&gt;</comment>
                            <comment id="14037270" author="sergey_beryozkin" created="Thu, 19 Jun 2014 11:50:48 +0000"  >&lt;p&gt;I did a very minor optimization for now, resolving as Fixed&lt;/p&gt;</comment>
                            <comment id="14037296" author="tolosa-rom" created="Thu, 19 Jun 2014 12:22:48 +0000"  >&lt;p&gt;It&apos;s difficult to explain because the business of my application is very special &lt;br/&gt;
but I think it&apos;s better if the framework doesn&apos;t raise an exception in this case.&lt;br/&gt;
Thanks for applying the patch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12650528" name="patch.txt" size="2878" author="tolosa-rom" created="Mon, 16 Jun 2014 08:31:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ws6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>