<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:22:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7139] BufferOverflowException when decoding a parameter values with a trailing %</title>
                <link>https://issues.apache.org/jira/browse/CXF-7139</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>
&lt;p&gt;When a parameter value contains a trailing &lt;tt&gt;%&lt;/tt&gt;, a &lt;tt&gt;BufferOverflowException&lt;/tt&gt; is thrown.&lt;/p&gt;

&lt;p&gt;e.g. a query to our service containing &lt;tt&gt;&lt;a href=&quot;http://localhost:8080/test/?parameter=test%&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/test/?parameter=test%&lt;/a&gt;&lt;/tt&gt; &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.nio.BufferOverflowException
        at java.nio.Buffer.nextPutIndex(Buffer.java:521)
        at java.nio.HeapByteBuffer.put(HeapByteBuffer.java:169)
        at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:102)
        at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:67)
        at org.apache.cxf.common.util.UrlUtils.urlDecode(UrlUtils.java:122)
        at org.apache.cxf.jaxrs.utils.HttpUtils.urlDecode(HttpUtils.java:97)
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.getStructuredParams(JAXRSUtils.java:1262)
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.getStructuredParams(JAXRSUtils.java:1236)
        at org.apache.cxf.jaxrs.impl.UriInfoImpl.getQueryParameters(UriInfoImpl.java:115)
        at org.apache.cxf.jaxrs.impl.UriInfoImpl.getQueryParameters(UriInfoImpl.java:109)
        at org.apache.cxf.jaxrs.impl.RequestPreprocessor.preprocess(RequestPreprocessor.java:74)
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.processRequest(JAXRSInInterceptor.java:102)
        at org.apache.cxf.jaxrs.interceptor.JAXRSInInterceptor.handleMessage(JAXRSInInterceptor.java:77)
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:308)
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
        at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:254)
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:234)
        at org.apache.cxf.transport.servlet.ServletController.invoke(Servlet
        at org.apache.cxf.transport.servlet.ServletController.invoke(Servlet
        at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNo
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleReques
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doGet(Abstra
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(Abst
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Applicat
        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.jav
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(Applicat
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrap
        at org.apache.catalina.core.StandardContextValve.invoke(StandardCont
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authen
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostVal
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportVal
        at org.apache.catalina.valves.AbstractAccessLogValve.invoke(Abstract
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngin
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter
        at org.apache.coyote.http11.AbstractHttp11Processor.process(Abstract
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.proc
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioE
        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEnd
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecu
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExec
        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(Ta
        at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13021251">CXF-7139</key>
            <summary>BufferOverflowException when decoding a parameter values with a trailing %</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="michaelgrant">Michael Grant</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Nov 2016 20:20:06 +0000</created>
                <updated>Wed, 22 Mar 2017 17:25:02 +0000</updated>
                            <resolved>Wed, 16 Nov 2016 22:55:57 +0000</resolved>
                                    <version>3.0.4</version>
                    <version>3.1</version>
                                    <fixVersion>3.1.9</fixVersion>
                    <fixVersion>3.0.12</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15671658" author="michaelgrant" created="Wed, 16 Nov 2016 21:14:42 +0000"  >&lt;p&gt;I believe this is due to an optimisation in &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6189&quot; title=&quot;Improve memory usage of UrlUtils&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6189&quot;&gt;&lt;del&gt;CXF-6189&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] valueBytes = StringUtils.toBytes(value, enc);
ByteBuffer in = ByteBuffer.wrap(valueBytes);
ByteBuffer out = ByteBuffer.allocate(in.capacity() - 2 * escapesCount);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Removing &lt;tt&gt;2 * escapesCount&lt;/tt&gt; from the capacity of &lt;tt&gt;out&lt;/tt&gt; allows the &lt;tt&gt;out&lt;/tt&gt; capacity to be set to a value that is too small if a trailing &lt;tt&gt;%&lt;/tt&gt; is included in the parameter. &lt;/p&gt;

&lt;p&gt;A simple solution is to always add and extra 1 to the &lt;tt&gt;out&lt;/tt&gt; capacity (giving it enough capacity to add to until the invalid URL encoding is spotted).&lt;/p&gt;</comment>
                            <comment id="15671705" author="githubbot" created="Wed, 16 Nov 2016 21:32:13 +0000"  >&lt;p&gt;GitHub user iammichaelgrant opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/201&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7139&quot; title=&quot;BufferOverflowException when decoding a parameter values with a trailing %&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7139&quot;&gt;&lt;del&gt;CXF-7139&lt;/del&gt;&lt;/a&gt; Avoid BufferOverflowException for trailing escape characters&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/iammichaelgrant/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/iammichaelgrant/cxf&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/201.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/201.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #201&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d8d28b2e62c09b63cab4dcb5794712806826113d&lt;br/&gt;
Author: Michael Grant &amp;lt;michael.grant@youview.com&amp;gt;&lt;br/&gt;
Date:   2016-11-16T21:30:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7139&quot; title=&quot;BufferOverflowException when decoding a parameter values with a trailing %&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7139&quot;&gt;&lt;del&gt;CXF-7139&lt;/del&gt;&lt;/a&gt; Avoid BufferOverflowException for trailing escape characters&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15671922" author="githubbot" created="Wed, 16 Nov 2016 22:48:51 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/201&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15671975" author="sergey_beryozkin" created="Wed, 16 Nov 2016 22:56:13 +0000"  >&lt;p&gt;Thanks for the patch&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12765737">CXF-6189</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12998459">CXF-7015</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36f2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>