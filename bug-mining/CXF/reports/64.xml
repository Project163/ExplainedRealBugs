<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:34:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1681] Base URL caching in ServletController avoids needed updateDests() call on republishing endpoints</title>
                <link>https://issues.apache.org/jira/browse/CXF-1681</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;In updateDests() the following:&lt;/p&gt;

&lt;p&gt;        if (base.equals(lastBase)) &lt;/p&gt;
{
            return;
        }

&lt;p&gt;returns on equal base URLs which results in avoiding the needed second call of&lt;/p&gt;

&lt;p&gt;d2.getEndpointInfo().setAddress(base + path);&lt;/p&gt;

&lt;p&gt;which is needed to set the fully qualified URI, because the first setAdress() call made by invoke() just sets the relative path.&lt;/p&gt;


&lt;p&gt;What i do is:&lt;/p&gt;

&lt;p&gt;1. I use the CXFServlet in combination with Jetty (using nearly the original example) except of using &lt;br/&gt;
root.addServlet(servlet, &quot;/soap/&lt;b&gt;&quot;) instead of just &quot;/&lt;/b&gt;&quot; as the base path.&lt;br/&gt;
Now i do:&lt;/p&gt;

&lt;p&gt;Endpoint.publish(&quot;/testService&quot;, impl)&lt;/p&gt;

&lt;p&gt;resulting in a ServletController which first sets in invoke() the adress to &apos;/testService&apos; and after that the adress will be set again in updateDests() but this time as &apos;http://localhost:8123/soap/testService&apos;&lt;/p&gt;

&lt;p&gt;This works fine for me, now i can load the WSDL for example.&lt;/p&gt;

&lt;p&gt;2. The problem now occurs if i indirectly reuse the ServletController by doing the following:&lt;/p&gt;

&lt;p&gt;endpoint.stop();&lt;br/&gt;
Endpoint.publish(&quot;/testService&quot;, impl)&lt;/p&gt;

&lt;p&gt;because the second EndpointInfo.setAdress() call won&apos;t be made, because of the base URL matching in updateDests() as shown above.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The base URL is not changing.&lt;/li&gt;
	&lt;li&gt;The second fully qualified EndpointInfo.setAdress() call is missing.&lt;/li&gt;
	&lt;li&gt;EndpointInfo contains &apos;/testService&apos; and not as needed &apos;http://localhost:8123/soap/testService&apos;&lt;/li&gt;
	&lt;li&gt;Calling WSDL FQ-URL failes because:&lt;/li&gt;
	&lt;li&gt;WSDLQueryHandler can&apos;t identify the request using:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;isRecognizedQuery()&lt;br/&gt;
...&lt;br/&gt;
 return endpointInfo.getAddress().contains(UrlUtilities.getStem(baseUri.substring(0, idx)));&lt;/p&gt;</description>
                <environment>&lt;p&gt;Standalone Jetty&lt;/p&gt;</environment>
        <key id="12399528">CXF-1681</key>
            <summary>Base URL caching in ServletController avoids needed updateDests() call on republishing endpoints</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="strider">David Wettig</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jul 2008 11:29:05 +0000</created>
                <updated>Mon, 28 Jul 2008 14:09:36 +0000</updated>
                            <resolved>Mon, 7 Jul 2008 13:36:19 +0000</resolved>
                                    <version>2.1.1</version>
                                    <fixVersion>2.0.8</fixVersion>
                    <fixVersion>2.1.2</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112467</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i13ztz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231435</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>