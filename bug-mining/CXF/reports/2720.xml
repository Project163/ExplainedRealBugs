<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:19:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6694] SpringResourceFactory does not work with constructor-autowired beans</title>
                <link>https://issues.apache.org/jira/browse/CXF-6694</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When used with constructor-autowired bean, it fails with &quot;Resource class ... has no valid constructor&quot; exception. We don&apos;t need constructor at all when we already have a singleton instance from Spring.&lt;/p&gt;

&lt;p&gt;Also it looks like &lt;tt&gt;isSingleton()&lt;/tt&gt; is called for the first time before correct value is calculated a few lines below: &lt;tt&gt;isSingleton = ac.isSingleton(beanId)&lt;/tt&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12916833">CXF-6694</key>
            <summary>SpringResourceFactory does not work with constructor-autowired beans</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="lightoze">Vladimir Kulev</reporter>
                        <labels>
                            <label>spring</label>
                    </labels>
                <created>Sun, 29 Nov 2015 20:32:50 +0000</created>
                <updated>Fri, 14 Oct 2016 14:19:04 +0000</updated>
                            <resolved>Tue, 22 Dec 2015 15:05:01 +0000</resolved>
                                    <version>3.1.4</version>
                                    <fixVersion>3.1.5</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15033478" author="sergey_beryozkin" created="Tue, 1 Dec 2015 10:29:29 +0000"  >&lt;p&gt;This is related to this JAX-RS spec text: &quot;Provider classes that are instantiated by the JAX-RS runtime and MUST have a public constructor for which the JAX-RS runtime &lt;b&gt;can provide all parameter values&lt;/b&gt;. Note that a zero argument constructor is permissible under this rule.&quot;. But perhaps that can be relaxed for singletons instantiated by Spring if a non-default constructor has no @Context parameters&lt;/p&gt;</comment>
                            <comment id="15033494" author="sergey_beryozkin" created="Tue, 1 Dec 2015 10:44:26 +0000"  >&lt;p&gt;Actually it appears to be a won&apos;t fix. Do you think you can create a patch ?&lt;/p&gt;</comment>
                            <comment id="15033515" author="lightoze" created="Tue, 1 Dec 2015 11:00:06 +0000"  >&lt;p&gt;Yes, I can provide a patch.&lt;/p&gt;</comment>
                            <comment id="15034628" author="sergey_beryozkin" created="Tue, 1 Dec 2015 21:37:15 +0000"  >&lt;p&gt;I&apos;ve thought a bit more about it, see this factory is really useful if prototype or per-request scope beans need to be supported, it does not add anything really if it is a singleton (well, a minor simplification in that one can use bean id attributes only instead of declaring jaxrs:serviceBeans).&lt;/p&gt;

&lt;p&gt;So if you have a singleton, then why don&apos;t refer to such a singleton from jaxrs:serviceBeans directly ?.  &lt;/p&gt;</comment>
                            <comment id="15034710" author="lightoze" created="Tue, 1 Dec 2015 22:17:42 +0000"  >&lt;p&gt;Because all my CXF configuration is &lt;tt&gt;@Import(SpringComponentScanServer.class)&lt;/tt&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15037615" author="sergey_beryozkin" created="Thu, 3 Dec 2015 10:25:10 +0000"  >&lt;p&gt;The problem is the factory is not injected with an instance and itself it does not know how to ask the application context to create a constructor-autowired bean.&lt;br/&gt;
Perhaps the fix should not go to SpringResourceFactory but to AbstractSpringComponentScanServer which will do something special about such beans and register them directly as service resource beans ?&lt;/p&gt;</comment>
                            <comment id="15038602" author="lightoze" created="Thu, 3 Dec 2015 21:14:43 +0000"  >&lt;p&gt;Here is a patch which fixes my problem. Also I wrote an example Spring Boot application to demonstrate use case:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@SpringBootApplication
@Import(SpringComponentScanServer.class)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CxfExampleApplication {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        SpringApplication.run(CxfExampleApplication.class, args);
    }

    @Bean
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ServletRegistrationBean servletRegistrationBean() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ServletRegistrationBean(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CXFServlet(), &lt;span class=&quot;code-quote&quot;&gt;&quot;/api/*&quot;&lt;/span&gt;);
    }

    @Bean
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Backend backend() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Backend();
    }

    @Bean
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Frontend frontend() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Frontend(backend());
    }

    @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Frontend {

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Backend backend;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Frontend(Backend backend) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.backend = backend;
        }

        @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/status&quot;&lt;/span&gt;)
        @GET
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getStatus() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; backend.getStatus();
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Backend {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getStatus() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello, world!&quot;&lt;/span&gt;;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Also please consider adding this to documentation page:&lt;br/&gt;
&lt;a href=&quot;http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-SpringBoot&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/docs/jaxrs-services-configuration.html#JAXRSServicesConfiguration-SpringBoot&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15038634" author="lightoze" created="Thu, 3 Dec 2015 21:33:17 +0000"  >&lt;p&gt;Re-attaching the patch. For a moment I hesitated over implementation choice, but decided to keep it as is.&lt;/p&gt;</comment>
                            <comment id="15041775" author="sergey_beryozkin" created="Fri, 4 Dec 2015 17:05:14 +0000"  >&lt;p&gt;Great, thanks, it is a good example, I&apos;ll probably update a demo with it too. &lt;br/&gt;
Btw, what is Frontend/Backend, are they JAXRS services ?  They should be auto-discoverable too&lt;/p&gt;</comment>
                            <comment id="15041791" author="lightoze" created="Fri, 4 Dec 2015 17:15:07 +0000"  >&lt;p&gt;Frontend is JAXRS service, it gets discovered automatically by &lt;tt&gt;SpringComponentScanServer&lt;/tt&gt;, you can access it at &lt;a href=&quot;http://localhost:8080/api/status&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/api/status&lt;/a&gt;&lt;br/&gt;
Backend is just a normal bean used to demonstrate idea of not having default constructor for JAXRS service class in case of Spring.&lt;/p&gt;

&lt;p&gt;Another way to do it in Spring (in this case you don&apos;t need to write those @Bean methods):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Service
    @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Frontend {

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Backend backend;

        @Autowired
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Frontend(Backend backend) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.backend = backend;
        }

        @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/status&quot;&lt;/span&gt;)
        @GET
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getStatus() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; backend.getStatus();
        }
    }

    @Service
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Backend {

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getStatus() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello, world!&quot;&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15043998" author="sergey_beryozkin" created="Sun, 6 Dec 2015 18:17:41 +0000"  >&lt;p&gt;Patch has been applied with minor modifications, thanks, I&apos;ll deal with updating the demo/docs later on, will resolve the issue then,&lt;br/&gt;
Cheers, Sergey&lt;/p&gt;</comment>
                            <comment id="15051044" author="sergey_beryozkin" created="Thu, 10 Dec 2015 14:41:37 +0000"  >&lt;p&gt;I&apos;ve updated the demo a bit, with one app being based on your example, though I did not use non-default constructors,&lt;br/&gt;
&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/07c676da&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/07c676da&lt;/a&gt;&lt;br/&gt;
Will do some docs next week &lt;/p&gt;</comment>
                            <comment id="15051046" author="lightoze" created="Thu, 10 Dec 2015 14:46:02 +0000"  >&lt;p&gt;They look fine - the main point is to show how to use CXF with Spring Boot without writing XML.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12775649" name="CXF-6694.patch" size="2771" author="lightoze" created="Thu, 3 Dec 2015 21:33:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p1m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>