<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:00:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4969] ExceptionMapper not used for exception in resource setter</title>
                <link>https://issues.apache.org/jira/browse/CXF-4969</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I&apos;m trying to use the cxf extension that allows to map exceptions to reponses. The issue I have is that exceptions raised in setXX methods annontated with @PathParam for example are caught and produce an internal server error. This prevents from performing usefull parameter validation from the setter methods, where they could benefit to all services.&lt;/p&gt;

&lt;p&gt;Attached in a sample application that defines a custom mapper, and raises exceptions either in a setter or a service method.&lt;/p&gt;

&lt;p&gt;Once deployed, I do get for:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost/testexceptions/a/b/fail_in_inject&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where the exception is raised at the setter level an HTTP 500 response, with entity&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&amp;lt;ns1:XMLFault 
    &lt;span class=&quot;code-keyword&quot;&gt;xmlns:ns1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://cxf.apache.org/bindings/xformat&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;ns1:faultstring 
        &lt;span class=&quot;code-keyword&quot;&gt;xmlns:ns1&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://cxf.apache.org/bindings/xformat&quot;&lt;/span&gt;&amp;gt;javax.ws.rs.WebApplicationException
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ns1:faultstring&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/ns1:XMLFault&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and a stack in the server logs, when&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost/testexceptions/a/b/fail_in_serve&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where the exception is raised at service level correctly returns HTTP 400&lt;/p&gt;

&lt;p&gt;One sould be able to use the setter methods (or the resource constructor) to perform parameters validation, and property return errors.&lt;/p&gt;

&lt;p&gt;Tested with tomee 1.6.0, which ships with cxf-2.6.7&lt;/p&gt;</description>
                <environment>&lt;p&gt;tomee-1.6.0-SNAPSHOT&lt;/p&gt;</environment>
        <key id="12642764">CXF-4969</key>
            <summary>ExceptionMapper not used for exception in resource setter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="areilles">Antoine Reilles</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Apr 2013 16:41:33 +0000</created>
                <updated>Wed, 14 Aug 2013 15:50:08 +0000</updated>
                            <resolved>Wed, 17 Apr 2013 21:22:46 +0000</resolved>
                                    <version>2.6.7</version>
                                    <fixVersion>2.6.8</fixVersion>
                    <fixVersion>2.7.5</fixVersion>
                    <fixVersion>3.0.0-milestone1</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13633310" author="sergey_beryozkin" created="Tue, 16 Apr 2013 20:30:57 +0000"  >&lt;p&gt;Thanks for reporting the issue, I do not see an attachment, but I understand what the issue is.  &lt;/p&gt;</comment>
                            <comment id="13633337" author="areilles" created="Tue, 16 Apr 2013 20:50:29 +0000"  >&lt;p&gt;Sorry, I forgot to attach the test war. It is done now.&lt;/p&gt;</comment>
                            <comment id="13633345" author="areilles" created="Tue, 16 Apr 2013 20:57:34 +0000"  >&lt;p&gt;My issue is that when defining a rest resource like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;b/{name}&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Service {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name;
  @PathParam(&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;)
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; argname) {
    name = argname;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;fail_in_inject&quot;&lt;/span&gt;.equals(name)) {
      &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; WebApplicationException(400);
    }
  }  
  @GET
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; serve() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;OK: &quot;&lt;/span&gt;+name;
  }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;where I expect to validate the PathParam &quot;name&quot;, for instance checking the resource is present, and twrowinf a WebApplicationException with 404 status otherwise. I want to perform this check at setter level (or in the resource constructor) so that each service in the resource benefits from the check.&lt;br/&gt;
When the WebApplicationException is raised in the setName method, cxf intercepts the exception, and replaces it with an internal error those only message is &quot;injection failed&quot;, with the setter name. This prevents from using @PathParam or @queryParam annotated setter methods to provide meaningful error messages to the client.&lt;/p&gt;</comment>
                            <comment id="13633356" author="sergey_beryozkin" created="Tue, 16 Apr 2013 21:02:17 +0000"  >&lt;p&gt;Yes, I see it, thanks.&lt;/p&gt;</comment>
                            <comment id="13633855" author="areilles" created="Wed, 17 Apr 2013 07:22:35 +0000"  >&lt;p&gt;Checked the cxf sources, it seems that the method&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;&quot;org/apache/cxf/jaxrs/utils/InjectionUtils.java&quot;&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void injectThroughMethod(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; requestObject,
                                           Method method,
                                           &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; parameterValue) {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            Method methodToInvoke = checkProxy(method, requestObject);
            methodToInvoke.invoke(requestObject, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[]{parameterValue});
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IllegalAccessException ex) {
            reportServerError(&lt;span class=&quot;code-quote&quot;&gt;&quot;METHOD_ACCESS_FAILURE&quot;&lt;/span&gt;, method.getName());
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
            reportServerError(&lt;span class=&quot;code-quote&quot;&gt;&quot;METHOD_INJECTION_FAILURE&quot;&lt;/span&gt;, method.getName());
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and probably its counterpart &lt;tt&gt;monospaced}}extractFromMethod{{monospaced&lt;/tt&gt; could implement something like what is done in &lt;tt&gt;monospaced}}JAXRSInvoker.invoke(Exchange exchange, final Object serviceObject, Method m, List&amp;lt;Object&amp;gt; params){{monospaced&lt;/tt&gt; and extract the cause from any &lt;tt&gt;monospaced}}InvocationTargetException{{monospaced&lt;/tt&gt; to report this instead of simply swallowing it.&lt;/p&gt;</comment>
                            <comment id="13634458" author="sergey_beryozkin" created="Wed, 17 Apr 2013 21:22:46 +0000"  >&lt;p&gt;Please try 2.6.8-SNAPSHOT in a couple of days&lt;/p&gt;</comment>
                            <comment id="13635118" author="areilles" created="Thu, 18 Apr 2013 12:17:02 +0000"  >&lt;p&gt;Thanks a lot !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12579010" name="testexceptions-src.zip" size="6859" author="areilles" created="Tue, 16 Apr 2013 20:50:42 +0000"/>
                            <attachment id="12579009" name="testexceptions.war" size="2915" author="areilles" created="Tue, 16 Apr 2013 20:50:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323178</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 31 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jrbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>323523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>