<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:55:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4484] Claims to SAML attribute encoding wrong</title>
                <link>https://issues.apache.org/jira/browse/CXF-4484</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The ClaimsAttributeStatementProvider is responsible to transform the claims to a SAML attribute.&lt;/p&gt;

&lt;p&gt;SAML 1.1 provides an AttributeName and AttributeNamespace to name a SAML attribute. The AttributeName is a local name and the AttributeNamespace the namespace. Both values form a qualified name (uri).&lt;/p&gt;

&lt;p&gt;SAML 2.0 has only the Name attribute and a NameFormat whereas the latter says what kind of format the value is of the Name attribute like uri, basic, unspecified or custom.&lt;/p&gt;

&lt;p&gt;The current encoding in the ClaimsAttributeStatementProvider is not aligned with the above.&lt;/p&gt;

&lt;p&gt;SAML 2.0&lt;br/&gt;
--------&lt;/p&gt;

&lt;p&gt;Now:&lt;br/&gt;
                     &amp;lt;saml2:Attribute Name=&quot;emailaddress&quot; NameFormat=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;owulff@apache.org&amp;lt;/saml2:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml2:Attribute&amp;gt;&lt;br/&gt;
                     &amp;lt;saml2:Attribute Name=&quot;http://schemas.mycompany.com/claims/language&quot; NameFormat=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;de&amp;lt;/saml2:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml2:Attribute&amp;gt;&lt;/p&gt;

&lt;p&gt;Issue:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If attibute is part of &lt;a href=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&lt;/a&gt; schema then the name of the SAML attribute is simple like &quot;givenname&quot; instead of fully qualified.&lt;/li&gt;
	&lt;li&gt;The NameFormat should not be &lt;a href=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Proposal:&lt;/p&gt;

&lt;p&gt;                     &amp;lt;saml2:Attribute Name=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;owulff@apache.org&amp;lt;/saml2:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml2:Attribute&amp;gt;&lt;br/&gt;
                     &amp;lt;saml2:Attribute Name=&quot;http://schemas.mycompany.com/claims/language&quot; NameFormat=&quot;urn:oasis:names:tc:SAML:2.0:attrname-format:unspecified&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;de&amp;lt;/saml2:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml2:Attribute&amp;gt;&lt;/p&gt;

&lt;p&gt;You can configure which NameFormat should be used like uri or unspecified (Microsoft uses unspecified, Shibboleth uri). Default stays for backwards compatibilty in 2.6 but would like to change the default to &quot;unspecified&quot; for 2.7.&lt;/p&gt;

&lt;p&gt;SAML 1.1&lt;br/&gt;
--------&lt;/p&gt;

&lt;p&gt;Now:&lt;/p&gt;

&lt;p&gt;                     &amp;lt;saml1:Attribute AttributeName=&quot;emailaddress&quot; AttributeNamespace=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml1:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;owulff@apache.org&amp;lt;/saml1:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml1:Attribute&amp;gt;&lt;br/&gt;
                     &amp;lt;saml1:Attribute AttributeName=&quot;http://schemas.mycompany.com/claims/language&quot; AttributeNamespace=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml1:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;de&amp;lt;/saml1:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml1:Attribute&amp;gt;&lt;/p&gt;

&lt;p&gt;Issue:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If attribute is not part of the &lt;a href=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&lt;/a&gt; the AttributeName is fully qualified (which it shouldn&apos;t) and the AttributeNamespace is again &lt;a href=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Proposal:&lt;/p&gt;

&lt;p&gt;                     &amp;lt;saml1:Attribute AttributeName=&quot;emailaddress&quot; AttributeNamespace=&quot;http://schemas.xmlsoap.org/ws/2005/05/identity/claims&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml1:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;owulff@apache.org&amp;lt;/saml1:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml1:Attribute&amp;gt;&lt;br/&gt;
                     &amp;lt;saml1:Attribute AttributeName=&quot;language&quot; AttributeNamespace=&quot;http://schemas.mycompany.com/claims&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml1:AttributeValue xsi:type=&quot;xs:string&quot;&amp;gt;de&amp;lt;/saml1:AttributeValue&amp;gt;&lt;br/&gt;
                     &amp;lt;/saml1:Attribute&amp;gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12604622">CXF-4484</key>
            <summary>Claims to SAML attribute encoding wrong</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="owulff">Oliver Wulff</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Aug 2012 15:09:15 +0000</created>
                <updated>Thu, 8 Nov 2012 17:14:57 +0000</updated>
                            <resolved>Fri, 7 Sep 2012 18:48:21 +0000</resolved>
                                    <version>2.6.2</version>
                                    <fixVersion>2.5.6</fixVersion>
                    <fixVersion>2.6.3</fixVersion>
                    <fixVersion>2.7</fixVersion>
                                    <component>Services</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13450595" author="coheigea" created="Fri, 7 Sep 2012 13:04:12 +0000"  >&lt;p&gt;Hi Oli,&lt;/p&gt;

&lt;p&gt;Could you review the attached patch? It fixes all three issues on trunk. &lt;/p&gt;

&lt;p&gt;The &quot;namespace&quot; property of the &quot;Claim&quot; class now only applies to SAML 1.1 Assertions, and is null by default. If null then the namespace is extracted from the claimType URI. If non-null, then the claimType is normalized against it as before.&lt;/p&gt;

&lt;p&gt;The Claim class now has a nameFormat property which is used for SAML 2.0 Assertions - the default is to use &quot;unspecified&quot;.&lt;/p&gt;

&lt;p&gt;For earlier branches I will just add the changed AttributeProvider to source so users can use that instead and @deprecate the other implementation.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="13450676" author="owulff" created="Fri, 7 Sep 2012 14:48:35 +0000"  >&lt;p&gt;Hi Colm&lt;/p&gt;

&lt;p&gt;The nameFormat property is token specific and should be in ClaimsAttributeStatementProvider instead of the token agnostic Claim class.&lt;/p&gt;

&lt;p&gt;Oli&lt;/p&gt;</comment>
                            <comment id="13450889" author="coheigea" created="Fri, 7 Sep 2012 18:48:21 +0000"  >
&lt;p&gt;Note that 2.6.x and 2.5.x retain the old behaviour for backwards compatibility. It is necessary to explicitly plug in the CorrectedClaimsAttributeStatementProvider to the SAMLTokenProvider to get the correct formatting.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12611546">CXF-4560</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12544212" name="cxf-4484.patch" size="18975" author="coheigea" created="Fri, 7 Sep 2012 13:04:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239884</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 11 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00ukv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2886</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>