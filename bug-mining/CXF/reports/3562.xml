<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:37:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8402] JwkUtils::fromECPublicKey returns key coordinates without leading zero</title>
                <link>https://issues.apache.org/jira/browse/CXF-8402</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hi!&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;JwkUtils::fromECPublicKey&lt;/tt&gt; returns key coordinates without leading zeroes because it&apos;s using &lt;tt&gt;BigInteger.toByteArray()&lt;/tt&gt;, which returns only necessary bytes to encode a big integer value, here: &lt;a href=&quot;https://github.com/apache/cxf/blob/master/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java#L378&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/blob/master/rt/rs/security/jose-parent/jose/src/main/java/org/apache/cxf/rs/security/jose/jwk/JwkUtils.java#L378&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This causes issues in different libraries, almost everywhere leading zeroes are expected to be present so that coordinate length is not changed depending on data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13350673">CXF-8402</key>
            <summary>JwkUtils::fromECPublicKey returns key coordinates without leading zero</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="antelle">Dimitri Witkowski</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Jan 2021 13:22:03 +0000</created>
                <updated>Wed, 22 Dec 2021 20:43:49 +0000</updated>
                            <resolved>Tue, 12 Jan 2021 08:35:20 +0000</resolved>
                                                    <fixVersion>3.4.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17260274" author="coheigea" created="Thu, 7 Jan 2021 06:58:51 +0000"  >&lt;p&gt;Can you provide some examples of leading zeros? I don&apos;t see anything obvious in the spec mandating this: &lt;a href=&quot;https://tools.ietf.org/html/rfc7517&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc7517&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17260314" author="antelle" created="Thu, 7 Jan 2021 08:35:22 +0000"  >&lt;p&gt;Yes, sure, here&apos;s an example of such a certificate:&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13018283/13018283_cert.pem&quot; title=&quot;cert.pem attached to CXF-8402&quot;&gt;cert.pem&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I generated it using this script:&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13018284/13018284_generate.sh&quot; title=&quot;generate.sh attached to CXF-8402&quot;&gt;generate.sh&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;(it requires some retries, looks like it depends on the next byte as well).&lt;/p&gt;

&lt;p&gt;Here&apos;s an example of jwk generated using the attached cert.pem:&lt;/p&gt;

&lt;p&gt;{{&lt;/p&gt;

{&quot;kty&quot;:&quot;EC&quot;,&quot;kid&quot;:&quot;some-key-id&quot;,&quot;crv&quot;:&quot;P-256&quot;,&quot;x&quot;:&quot;CK6vBWKHcGN93VJQmxk27hbHNe4dHJpcy5t1NL6bqA&quot;,&quot;y&quot;:&quot;LQZSz0-ZdnOHIFN2Lx9JJU74FuK18UJFON_ZssfXqQ0&quot;}

&lt;p&gt;}}&lt;/p&gt;

&lt;p&gt;Then, if you try to use this jwk, it will generate an error in all libraries, for example you can try using WebCrypto in your browser:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;await window.crypto.subtle.importKey(&quot;jwk&quot;, {&quot;kty&quot;:&quot;EC&quot;,&quot;kid&quot;:&quot;some-key-id&quot;,&quot;crv&quot;:&quot;P-256&quot;,&quot;x&quot;:&quot;CK6vBWKHcGN93VJQmxk27hbHNe4dHJpcy5t1NL6bqA&quot;,&quot;y&quot;:&quot;LQZSz0-ZdnOHIFN2Lx9JJU74FuK18UJFON_ZssfXqQ0&quot;}, { name: &quot;ECDSA&quot;, namedCurve: &quot;P-256&quot; }, false, &lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;verify&amp;quot;&amp;#93;&lt;/span&gt;)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Which gives this error:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;Uncaught DOMException: The JWK&apos;s &quot;x&quot; member defines an octet string of length 31 bytes but should be 32&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13018285/13018285_image-2021-01-07-09-35-19-811.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Zero padding test in Chromium source code: &lt;a href=&quot;https://chromium.googlesource.com/chromium/src/+/master/components/test/data/webcrypto/bad_ec_keys.json#128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://chromium.googlesource.com/chromium/src/+/master/components/test/data/webcrypto/bad_ec_keys.json#128&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17260315" author="antelle" created="Thu, 7 Jan 2021 08:36:53 +0000"  >&lt;p&gt;How I generated the JWK: &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13018287/13018287_Main.java&quot; title=&quot;Main.java attached to CXF-8402&quot;&gt;Main.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17260317" author="antelle" created="Thu, 7 Jan 2021 08:39:38 +0000"  >&lt;p&gt;Example from nimbus-jose-jwt: &lt;a href=&quot;https://github.com/felx/nimbus-jose-jwt/blob/47d66f2775c392964788aa6389a46fac84f976cd/src/main/java/com/nimbusds/jose/jwk/ECKey.java#L272,&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/felx/nimbus-jose-jwt/blob/47d66f2775c392964788aa6389a46fac84f976cd/src/main/java/com/nimbusds/jose/jwk/ECKey.java#L272,&lt;/a&gt;&#160;this encodes the key properly&lt;/p&gt;</comment>
                            <comment id="17262554" author="coheigea" created="Mon, 11 Jan 2021 10:29:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=antelle&quot; class=&quot;user-hover&quot; rel=&quot;antelle&quot;&gt;antelle&lt;/a&gt; - Thanks for that. I submitted a PR here if you could take a look - &lt;a href=&quot;https://github.com/apache/cxf/pull/739&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/739&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17262579" author="antelle" created="Mon, 11 Jan 2021 11:07:41 +0000"  >&lt;p&gt;Thanks! Looks good to me, just one thing, &lt;a href=&quot;https://github.com/apache/cxf/pull/739/files#diff-e091b641fd36035a7a1eca182c21263a22546773051ef0c32a5b25454d0698bbR215-R216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; you compare length of base64-encoded strings, this can give false positive results. I&apos;d rather decode them before comparison.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13018287" name="Main.java" size="828" author="antelle" created="Thu, 7 Jan 2021 08:36:33 +0000"/>
                            <attachment id="13018283" name="cert.pem" size="489" author="antelle" created="Thu, 7 Jan 2021 08:31:35 +0000"/>
                            <attachment id="13018284" name="generate.sh" size="315" author="antelle" created="Thu, 7 Jan 2021 08:32:31 +0000"/>
                            <attachment id="13018285" name="image-2021-01-07-09-35-19-811.png" size="55213" author="antelle" created="Thu, 7 Jan 2021 08:35:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 44 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mbe0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>