<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:19:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6769] Underscores in values of FIQL search expressions are incorrectly escaped</title>
                <link>https://issues.apache.org/jira/browse/CXF-6769</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;We are basically &quot;just&quot; using FIQLParser and SQLPrinterVisitor like this:&lt;/p&gt;

&lt;p&gt;final FiqlParser&amp;lt;SearchBean&amp;gt; fiqlParser = new FiqlParser&amp;lt;&amp;gt;(SearchBean.class);&lt;br/&gt;
final SearchCondition&amp;lt;SearchBean&amp;gt; searchCondition = fiqlParser.parse(search);&lt;br/&gt;
final SQLPrinterVisitor&amp;lt;SearchBean&amp;gt; visitor = new SQLPrinterVisitor&amp;lt;SearchBean&amp;gt;(table);&lt;br/&gt;
        searchCondition.accept(visitor);&lt;br/&gt;
final String sql = visitor.getQuery();&lt;/p&gt;

&lt;p&gt;A search expression like this:&lt;/p&gt;

&lt;p&gt;text==VAL_UE&lt;/p&gt;

&lt;p&gt;yields an SQL query like this:&lt;/p&gt;

&lt;p&gt;SELECT * FROM some_table WHERE text = &apos;VAL&lt;span class=&quot;error&quot;&gt;&amp;#91;backslash&amp;#93;&lt;/span&gt;_UE&apos;&lt;/p&gt;

&lt;p&gt;(Note &lt;span class=&quot;error&quot;&gt;&amp;#91;backslash&amp;#93;&lt;/span&gt; is supposed to mean a literal &quot;\&quot; which is swallowed here)&lt;/p&gt;

&lt;p&gt;If the table contains a row with text &quot;VAL_UE&quot;, the query returns no results because the underscore in the value was preceded with a backslash.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Webapp deployed to WildFly 10&lt;/p&gt;</environment>
        <key id="12937473">CXF-6769</key>
            <summary>Underscores in values of FIQL search expressions are incorrectly escaped</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="dode">Torsten R&#246;mer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2016 11:35:35 +0000</created>
                <updated>Fri, 14 Oct 2016 14:13:27 +0000</updated>
                            <resolved>Wed, 10 Feb 2016 12:32:26 +0000</resolved>
                                    <version>3.1.2</version>
                                    <fixVersion>3.1.6</fixVersion>
                    <fixVersion>3.0.9</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15140706" author="sergey_beryozkin" created="Wed, 10 Feb 2016 12:32:10 +0000"  >&lt;p&gt;A patch was provided awhile back by a user where the underscore char was escaped, so I guess the way the escaped underscore chars are treated varies.&lt;br/&gt;
I&apos;ve added a property, &quot;search.escape.underscore.char&quot;, which can be set to &apos;false&apos;&lt;/p&gt;</comment>
                            <comment id="15150452" author="dode" created="Wed, 17 Feb 2016 12:46:52 +0000"  >&lt;p&gt;Great, I&apos;ll check this out as soon as the next release is available!&lt;/p&gt;</comment>
                            <comment id="15231929" author="dode" created="Fri, 8 Apr 2016 09:34:34 +0000"  >&lt;p&gt;I&apos;ve just tried this and while this would solve our problem, we unfortunately can&apos;t use in our setup.&lt;/p&gt;

&lt;p&gt;We are running in WildFly 8/10 which includes Apache CXF, but uses RESTEasy instead of CXF&apos;s RS implementation. So we basically just include cxf-rt-rs-extension-search in our WAR deployment and create our &quot;own&quot; instance of FiqlParser (all we want to do is to convert an FIQL expression to an SQL query):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FiqlParser&amp;lt;SearchBean&amp;gt; fiqlParser = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FiqlParser&amp;lt;&amp;gt;(SearchBean.class);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SearchCondition&amp;lt;SearchBean&amp;gt; searchCondition = fiqlParser.parse(search);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; SQLPrinterVisitor&amp;lt;SearchBean&amp;gt; visitor = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SQLPrinterVisitor&amp;lt;SearchBean&amp;gt;(table);
        searchCondition.accept(visitor);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql = visitor.getQuery();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And like that we are not able to set the property.&lt;/p&gt;

&lt;p&gt;Any suggestion?&lt;/p&gt;</comment>
                            <comment id="15232001" author="sergey_beryozkin" created="Fri, 8 Apr 2016 10:44:37 +0000"  >&lt;p&gt;FiqlParser has another constructor which additionally accepts a Map of properties, that will do it.&lt;/p&gt;</comment>
                            <comment id="15232047" author="dode" created="Fri, 8 Apr 2016 11:30:49 +0000"  >&lt;p&gt;Setting the property is fine, but since the Message given to MessageUtil.getContextualBoolean() is null in this case,&lt;br/&gt;
the property is not considered and the defaultValue &quot;true&quot; is returned and the underscore is still escaped.&lt;/p&gt;

&lt;p&gt;Or am I missing something here?&lt;/p&gt;</comment>
                            <comment id="15232196" author="sergey_beryozkin" created="Fri, 8 Apr 2016 13:48:00 +0000"  >&lt;p&gt;Right I see...The only workaround then is to copy  SQLPrinterVisitor.visit() into its subclass and block escaping the underscore. I guess for the next release I can try to make much easier to override it...&lt;/p&gt;</comment>
                            <comment id="15232223" author="dode" created="Fri, 8 Apr 2016 14:03:56 +0000"  >&lt;p&gt;Fine, we&apos;ll either avoid underscores for now or implement the workaround.&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sjuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>