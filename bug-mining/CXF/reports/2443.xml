<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:13:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6143] SSL/TLS hostname verification does not strictly follow HTTPS RFC2818</title>
                <link>https://issues.apache.org/jira/browse/CXF-6143</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The HTTPS specification &lt;a href=&quot;http://tools.ietf.org/html/rfc2818#section-3.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RFC 2818, section 3.1&lt;/a&gt; states:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;   If a subjectAltName extension of type dNSName is present, that MUST&lt;br/&gt;
   be used as the identity. Otherwise, the (most specific) Common Name&lt;br/&gt;
   field in the Subject field of the certificate MUST be used. Although&lt;br/&gt;
   the use of the Common Name is existing practice, it is deprecated and&lt;br/&gt;
   Certification Authorities are encouraged to use the dNSName instead.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The current &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=cxf.git;a=blob;f=rt/transports/http/src/main/java/org/apache/cxf/transport/https/CertificateHostnameVerifier.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CertificateHostnameVerifier&lt;/a&gt; implementation in CXF does not follow this logic, even in STRICT mode. Instead, it builds an array of both CNs and subjectAltNames and checks each of them sequentially, in the order returned in the certificate.&lt;/p&gt;

&lt;p&gt;The proper approach would be to build a list of subjectAltNames having type dNSName. If the list is non-empty, matching should proceed against this list ONLY - and validation should fail if no subjectAltName matches. Otherwise, only if the subjectAltName list is empty, a list of CNs from the Subject field should be built, and perhaps sorted from most- to least-specific. A match should then proceed against this list, taking into account wildcards of course.&lt;/p&gt;

&lt;p&gt;Likewise, the &lt;a href=&quot;http://juliusdavies.ca/svn/viewvc.cgi/not-yet-commons-ssl/trunk/src/java/org/apache/commons/ssl/HostnameVerifier.java?revision=121&amp;amp;pathrev=172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HostnameVerifier implementation in not-yet-commons-ssl&lt;/a&gt; has the same issue. However, since not-yet-commons-ssl is a generic SSL/TLS transport library, it should not be made to follow HTTPS application layer rules for all TLS connections - instead a STRICT_HTTPS mode could be implemented for this purpose.&lt;/p&gt;

&lt;p&gt;For more information, see &lt;a href=&quot;http://tools.ietf.org/search/rfc6125&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tools.ietf.org/search/rfc6125&lt;/a&gt; (for future reference and background on where implementations are going) and &lt;a href=&quot;http://tersesystems.com/2014/03/23/fixing-hostname-verification/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tersesystems.com/2014/03/23/fixing-hostname-verification/&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12760427">CXF-6143</key>
            <summary>SSL/TLS hostname verification does not strictly follow HTTPS RFC2818</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="chad_loder">Chad Loder</reporter>
                        <labels>
                            <label>security,</label>
                            <label>ssl</label>
                    </labels>
                <created>Tue, 9 Dec 2014 11:50:20 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:41 +0000</updated>
                            <resolved>Wed, 17 Dec 2014 18:02:34 +0000</resolved>
                                    <version>3.0.2</version>
                                    <fixVersion>3.0.4</fixVersion>
                    <fixVersion>2.7.15</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14239888" author="juliusdavies" created="Tue, 9 Dec 2014 19:21:41 +0000"  >
&lt;p&gt;The implementation in org.apache.http.conn.ssl.DefaultHostnameVerifier (git://git.apache.org/httpclient.git) looks nice.    I&apos;m thinking I might copy it over into not-yet-commons-ssl, as well.&lt;/p&gt;

&lt;p&gt;Hmm, and httpclient-4.x.jar is probably even in classpath for CXF.   Maybe they should call into the code directly.&lt;/p&gt;
</comment>
                            <comment id="14239897" author="juliusdavies" created="Tue, 9 Dec 2014 19:26:11 +0000"  >&lt;p&gt;Here&apos;s trunk for that code:   &lt;a href=&quot;http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/httpclient/src/main/java/org/apache/http/conn/ssl/DefaultHostnameVerifier.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/httpclient/src/main/java/org/apache/http/conn/ssl/DefaultHostnameVerifier.java&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="14240790" author="chad_loder" created="Wed, 10 Dec 2014 08:01:53 +0000"  >&lt;p&gt;I reviewed the HttpClient code and it looks quite good. It would fix this issue.&lt;/p&gt;</comment>
                            <comment id="14240883" author="coheigea" created="Wed, 10 Dec 2014 10:22:27 +0000"  >
&lt;p&gt;Thanks for the analysis guys. I will grab the DefaultHostnameVerifier from httpclient for CXF once I get agreement from some more of the devs who work in this area.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="14282628" author="ay" created="Mon, 19 Jan 2015 16:03:42 +0000"  >&lt;p&gt;I noticed a few things with this change.&lt;/p&gt;

&lt;p&gt;First, about the internet access during the build.&lt;br/&gt;
Now the build needs an internet access to fetch &lt;br/&gt;
&lt;a href=&quot;https://publicsuffix.org/list/effective_tld_names.dat&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://publicsuffix.org/list/effective_tld_names.dat&lt;/a&gt;&lt;br/&gt;
and this file is stored in /mozilla/public-suffix-list.txt in the classpath.&lt;br/&gt;
Can we locally include this file so that the build works without an internet connection?&lt;/p&gt;

&lt;p&gt;Second, this file doesn&apos;t seem to be currently included in the target jar file (because this is a plain text file in a folder that contains no class files).&lt;br/&gt;
Shouldn&apos;t this file be included?&lt;/p&gt;
</comment>
                            <comment id="14282653" author="coheigea" created="Mon, 19 Jan 2015 16:24:43 +0000"  >&lt;p&gt;Hi Aki,&lt;/p&gt;

&lt;p&gt;&amp;gt; Can we locally include this file so that the build works without an internet connection?&lt;/p&gt;

&lt;p&gt;No, due to the licensing. It can be included in the distribution but not in the source. Unfortunately this means we require internet access for the build, as you have pointed out. I don&apos;t see an alternative right now though...&lt;/p&gt;

&lt;p&gt;&amp;gt; Second, this file doesn&apos;t seem to be currently included in the target jar file (because this is a plain text file in a folder that contains no class files). Shouldn&apos;t this file be included?&lt;/p&gt;

&lt;p&gt;Ooops yes it should! Do you know offhand how to include it? If not I will take a look.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="14283467" author="ay" created="Tue, 20 Jan 2015 06:18:02 +0000"  >&lt;p&gt;Hi Colm,&lt;br/&gt;
For the second part, we can use Include-Resource to explicitly include this file. I can make this change.&lt;br/&gt;
For the first part, it&apos;s unfortunate ;-(&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="14283561" author="ay" created="Tue, 20 Jan 2015 07:46:31 +0000"  >&lt;p&gt;Hi Colm,&lt;br/&gt;
for the first part, while reading the page at &lt;a href=&quot;https://publicsuffix.org/list/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://publicsuffix.org/list/&lt;/a&gt;, I saw the following passage:&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;The copy on publicsuffix.org, linked below, is updated daily from mozilla.org&apos;s source code management system. If you wish to make your app download an updated list periodically, please use this URL and have your app download the list no more than once per day. (The list usually changes a few times per month; more frequent downloading is pointless and hammers our servers.)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;Fetching this file every time at each build and then including it statically in the jar file seems to go against this advice?&lt;/p&gt;

&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="14283962" author="coheigea" created="Tue, 20 Jan 2015 16:14:03 +0000"  >&lt;p&gt;Hi Aki,&lt;/p&gt;

&lt;p&gt;Thanks for fixing the problem with not including the file. &lt;/p&gt;

&lt;p&gt;&amp;gt; Fetching this file every time at each build and then including it statically in the jar file seems to go against this advice?&lt;/p&gt;

&lt;p&gt;Yes, I agree. However, I don&apos;t have any better ideas at this point. Using the download-maven-plugin was taken from the Apache HttpClient pom: &lt;a href=&quot;http://svn.apache.org/viewvc/httpcomponents/httpclient/trunk/httpclient/pom.xml?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/httpcomponents/httpclient/trunk/httpclient/pom.xml?view=markup&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 44 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2383j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>