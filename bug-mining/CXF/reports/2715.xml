<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:19:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6693] CXF fails to parse Cookie header when it contains $ character</title>
                <link>https://issues.apache.org/jira/browse/CXF-6693</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;If the Cookie header contains $ character the method getCookies in org.apache.cxf.jaxrs.impl.HttpHeadersImpl in line 113 fails to parse the individual cookies and returns the complete string as one cookie. Values with ; character will possibly fail to in the current implementation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12916807">CXF-6693</key>
            <summary>CXF fails to parse Cookie header when it contains $ character</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="hoegertn">Thorsten Hoeger</reporter>
                        <labels>
                    </labels>
                <created>Sun, 29 Nov 2015 14:54:13 +0000</created>
                <updated>Fri, 14 Oct 2016 14:15:37 +0000</updated>
                            <resolved>Mon, 30 Nov 2015 14:22:43 +0000</resolved>
                                    <version>3.1.4</version>
                                    <fixVersion>3.1.5</fixVersion>
                    <fixVersion>3.0.8</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15031602" author="sergey_beryozkin" created="Mon, 30 Nov 2015 10:05:20 +0000"  >&lt;p&gt;Not sure if cookie values can contain unencoded &apos;;&apos; values, these are supposed to separate multiple cookie values, right ?&lt;/p&gt;</comment>
                            <comment id="15031625" author="hoegertn" created="Mon, 30 Nov 2015 10:29:52 +0000"  >&lt;p&gt;According to the latest Cookie RFC, it can contain $ characters and contain ; if it is used in a quoted string as I understand it.&lt;br/&gt;
The value of the cookie can contain any values according to RFC&lt;/p&gt;</comment>
                            <comment id="15031645" author="sergey_beryozkin" created="Mon, 30 Nov 2015 10:51:14 +0000"  >&lt;p&gt;OK, lets deal with $ first, I guess someone might do &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;a=b&quot;;&quot;d
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but that seems somewhat unrealistic to me because it involves the manual formatting, I don&apos;t mind that being supported in CXF, but may be we can deal with that in a sep JIRA issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, so I&apos;ve updated the test and seeing:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testFromComplexString() {
        Cookie c = Cookie.valueOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;$Version=2;foo$=bar$;$Path=path;$Domain=domain&quot;&lt;/span&gt;);
        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar$&quot;&lt;/span&gt;.equals(c.getValue())
                   &amp;amp;&amp;amp; &lt;span class=&quot;code-quote&quot;&gt;&quot;foo$&quot;&lt;/span&gt;.equals(c.getName())
                   &amp;amp;&amp;amp; 2 == c.getVersion()
                   &amp;amp;&amp;amp; &lt;span class=&quot;code-quote&quot;&gt;&quot;path&quot;&lt;/span&gt;.equals(c.getPath())
                   &amp;amp;&amp;amp; &lt;span class=&quot;code-quote&quot;&gt;&quot;domain&quot;&lt;/span&gt;.equals(c.getDomain()));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;passing, what am I missing ?&lt;/p&gt;</comment>
                            <comment id="15031658" author="hoegertn" created="Mon, 30 Nov 2015 11:01:39 +0000"  >&lt;p&gt;My problem is the Cookie header in HttpHeadersImpl. If the string contains a $ it assumes that only one cookie is there and parses it instead of splitting it into multiple cookies. See the line numbers in the ticket description.&lt;/p&gt;</comment>
                            <comment id="15031664" author="sergey_beryozkin" created="Mon, 30 Nov 2015 11:08:11 +0000"  >&lt;p&gt;Oh, hmm, why did I put that &apos;if&apos; there, need to investigate...&lt;/p&gt;</comment>
                            <comment id="15031682" author="sergey_beryozkin" created="Mon, 30 Nov 2015 11:40:00 +0000"  >&lt;p&gt;OK, I assumed that Cookies that include parameters like &quot;$Version&quot; can only contain single values, that was before I became aware that cookie values may have &apos;,&apos; separators, ex, &quot;$Version=1;a=2,$Version=1;a=3&quot; as in:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/spray/spray/issues/869&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/spray/spray/issues/869&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I vaguely recall this might have been TCK tested too...&lt;/p&gt;

&lt;p&gt;Is it what you have in your case ? &lt;/p&gt;

&lt;p&gt;I think if we have &quot;$&quot; then a separator should be &quot;,&quot; by default because splitting with &quot;;&quot; would get wrong pairs and then continue splitting. This can be overridden by setting an &quot;org.apache.cxf.http.cookie.separator&quot;.&lt;/p&gt;</comment>
                            <comment id="15031701" author="hoegertn" created="Mon, 30 Nov 2015 12:18:02 +0000"  >&lt;p&gt;in my case the $ is not something like $Version but is part of a cookie value (SessionToken).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;_gat=1; dtCookie=5$4DDADD6928E8E5EFF03DFC6774B0ACC1|RUM+Default+Application|1; rxVisitor=1448885761109JITGKQC4EUHOE6L194KAFORQ99M1139S; dtLatC=346; rxvt=1448887596797|1448885761117; dtPC=5$485796791_784h1vFIIRUUDOEJMJIEJKWILJJNHGGBLENTTJ; _ga=GA1.2.1866724752.1448885788
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15031804" author="sergey_beryozkin" created="Mon, 30 Nov 2015 14:08:21 +0000"  >&lt;p&gt;So we need to support&lt;br/&gt;
&lt;a href=&quot;http://tools.ietf.org/html/rfc6265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tools.ietf.org/html/rfc6265&lt;/a&gt;&lt;br/&gt;
but also&lt;br/&gt;
&lt;a href=&quot;http://tools.ietf.org/html/rfc2965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tools.ietf.org/html/rfc2965&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;the latter is obsolete but unfortunately JAX-RS Cookie can be expected to support &quot;$Version&quot;/etc OOB&lt;/p&gt;</comment>
                            <comment id="15031819" author="sergey_beryozkin" created="Mon, 30 Nov 2015 14:22:30 +0000"  >&lt;p&gt;See &lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/a5296802&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/a5296802&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As I said you can optimize it by setting a contextual cookie separator property, to avoid the runtime checking if the value contains $Version/etc, if you know that the clients won&apos;t be sending such attributes. Hope it will work well for all the variations &lt;/p&gt;</comment>
                            <comment id="15031838" author="hoegertn" created="Mon, 30 Nov 2015 14:30:12 +0000"  >&lt;p&gt;Thanks, code looks good. I will try to test with the SNAPSHOT version.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p1gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>