<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:12:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6091] Server is not properly stopped with MultipleEndpointObserver</title>
                <link>https://issues.apache.org/jira/browse/CXF-6091</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;org.apache.cxf.endpoint.ServerImpl#stop() contains this code to handle MultipleEndpointObserver:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        ...

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (slcMgr != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            slcMgr.stopServer(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        }

        MessageObserver mo = getDestination().getMessageObserver();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mo &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; MultipleEndpointObserver) {
            ((MultipleEndpointObserver)mo).getEndpoints().remove(endpoint);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!((MultipleEndpointObserver)mo).getEndpoints().isEmpty()) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
            }
        }

        getDestination().setMessageObserver(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        stopped = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The intention seems to be to not remove the message observer until there are endpoints attached, but a side effect is that in such a case the server instance is &lt;em&gt;not&lt;/em&gt; marked as stopped, and therefore cannot be restarted.&lt;/p&gt;

&lt;p&gt;One way to solve it would be to change the code above to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (slcMgr != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            slcMgr.stopServer(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        }

        MessageObserver mo = getDestination().getMessageObserver();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mo &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; MultipleEndpointObserver) {
            ((MultipleEndpointObserver)mo).getEndpoints().remove(endpoint);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (((MultipleEndpointObserver)mo).getEndpoints().isEmpty()) {
                getDestination().setMessageObserver(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            getDestination().setMessageObserver(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        }
        stopped = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;making sure that stopped is set on all (non-throwing) codepaths.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12753663">CXF-6091</key>
            <summary>Server is not properly stopped with MultipleEndpointObserver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="vadimb">Vadim Beilin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Nov 2014 10:18:23 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:02 +0000</updated>
                            <resolved>Fri, 7 Nov 2014 19:58:22 +0000</resolved>
                                    <version>2.5</version>
                    <version>3.0.1</version>
                                    <fixVersion>3.0.3</fixVersion>
                    <fixVersion>2.7.14</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14201887" author="vadimb" created="Fri, 7 Nov 2014 10:19:24 +0000"  >&lt;p&gt;possible solution attached&lt;/p&gt;</comment>
                            <comment id="14202557" author="dkulp" created="Fri, 7 Nov 2014 19:58:22 +0000"  >&lt;p&gt;Patch applied.  Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12680129" name="stopstart-1.patch" size="1999" author="vadimb" created="Fri, 7 Nov 2014 10:19:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i223nj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>