<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:25:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7351] JAXRS UriInfo.getMatchedURIs raises error for templated URI</title>
                <link>https://issues.apache.org/jira/browse/CXF-7351</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;UriInfo.getMatchedURIs() on templated URIs fails. &lt;br/&gt;
See attachment for a junit test case reproducing the error (run &lt;tt&gt;testMatchedUris()&lt;/tt&gt;)&lt;/p&gt;

&lt;p&gt;Below is a stack-trace of the error.&lt;/p&gt;

&lt;p&gt;After digging a little bit into, UriInfoImpl.getMatchedURIs(decode) is&lt;br/&gt;
iterating over MethodInvocationInfos that have empty templated values&lt;br/&gt;
instead of expected values (note that private field&lt;br/&gt;
UriInfoImpl.templateParams is set with correct templated values).&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Error stacktrace:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Apr 28, 2017 3:21:54 PM org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver onMessage
SEVERE: Error occurred during error handling, give up!
org.apache.cxf.interceptor.Fault: Unresolved variables; only 0 value(s) given &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1 unique variable(s)
	at org.apache.cxf.service.invoker.AbstractInvoker.createFault(AbstractInvoker.java:162)
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:128)
	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:189)
	at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:99)
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:59)
	at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:96)
	at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:308)
	at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
	at org.apache.cxf.transport.local.LocalConduit$LocalConduitOutputStream$1.run(LocalConduit.java:88)
	at org.apache.cxf.workqueue.AutomaticWorkQueueImpl$3.run(AutomaticWorkQueueImpl.java:428)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
	at org.apache.cxf.workqueue.AutomaticWorkQueueImpl$AWQThreadFactory$1.run(AutomaticWorkQueueImpl.java:353)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
Caused by: java.lang.IllegalArgumentException: Unresolved variables; only 0 value(s) given &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1 unique variable(s)
	at org.apache.cxf.jaxrs.impl.UriBuilderImpl.substituteVarargs(UriBuilderImpl.java:286)
	at org.apache.cxf.jaxrs.impl.UriBuilderImpl.doBuildUriParts(UriBuilderImpl.java:121)
	at org.apache.cxf.jaxrs.impl.UriBuilderImpl.doBuild(UriBuilderImpl.java:101)
	at org.apache.cxf.jaxrs.impl.UriBuilderImpl.buildFromEncoded(UriBuilderImpl.java:230)
	at org.apache.cxf.jaxrs.impl.UriInfoImpl.createMatchedPath(UriInfoImpl.java:208)
	at org.apache.cxf.jaxrs.impl.UriInfoImpl.getMatchedURIs(UriInfoImpl.java:191)
	at org.apache.cxf.jaxrs.impl.UriInfoImpl.getMatchedURIs(UriInfoImpl.java:170)
	at org.apache.cxf.jaxrs.impl.tl.ThreadLocalUriInfo.getMatchedURIs(ThreadLocalUriInfo.java:96)
	at misc.TestCxfJaxrs$Resource.getMatchedUris(TestCxfJaxrs.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.cxf.service.invoker.AbstractInvoker.performInvocation(AbstractInvoker.java:180)
	at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96)
	... 12 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13067683">CXF-7351</key>
            <summary>JAXRS UriInfo.getMatchedURIs raises error for templated URI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="nlenoire">Nicolas Lenoire</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Apr 2017 13:23:46 +0000</created>
                <updated>Tue, 1 Aug 2017 16:42:06 +0000</updated>
                            <resolved>Tue, 2 May 2017 21:29:04 +0000</resolved>
                                    <version>3.1.10</version>
                                    <fixVersion>3.1.12</fixVersion>
                    <fixVersion>3.0.14</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15992698" author="sergey_beryozkin" created="Tue, 2 May 2017 10:44:30 +0000"  >&lt;p&gt;Can you please confirm it is also happening with the HTTP transport ? I just experimented a bit with the CXF test, as I said it does have template vars but only at the method level, in your case it is a template var at a class level, so I added the one to the CXF test too and all works just fine...&lt;/p&gt;</comment>
                            <comment id="15992875" author="nlenoire" created="Tue, 2 May 2017 13:23:29 +0000"  >&lt;p&gt;Yes, I confirm it also happens with the http transport.&lt;/p&gt;

&lt;p&gt;I didn&apos;t write unit test using the http transport to reproduce the defect. But in our prod environment that is using the http transport, it failed the exact same way than with the attached test using the local transport.&lt;/p&gt;</comment>
                            <comment id="15993802" author="sergey_beryozkin" created="Tue, 2 May 2017 21:28:32 +0000"  >&lt;p&gt;Yes, I was running a getMatchedResources test so could not reproduce. Indeed the issue is there only when a class-level template vars are used. It is surprising it has not been caught before, I guess it means UriInfo.getMatchedUris is rarely used or may be it is rarely used when also the class level vars are used which is likely also less often used... &lt;/p&gt;</comment>
                            <comment id="15994547" author="sergey_beryozkin" created="Wed, 3 May 2017 09:30:14 +0000"  >&lt;p&gt;In fact, the class-level variables were supported in getMatchedURIs, but with some expectations, i.e, if one uses a class variable then there must be a matching @PathParam in a given method which IMHO is very reasonable, why would one use a class-level variable but not access it via  @PathParam (I can only imagine it is accessed later in a subresource which is a rare case indeed). So the issue in your case was caused by the fact you have a loose &apos;param&apos; template var, though I accept that the CXF code should still work in this case&lt;/p&gt;</comment>
                            <comment id="15996361" author="nlenoire" created="Thu, 4 May 2017 08:41:36 +0000"  >&lt;p&gt;It wasn&apos;t made on purpose. On our actual failing resource classes (in prod environment), every templated variables have a corresponding PathParam as far as I remember.&lt;br/&gt;
So, I have tried something closer to our prod environement, and wrapped path params inside a bean, using @BeanParam, and there I can reproduce the issue.&lt;/p&gt;

&lt;p&gt;So, if not yet fixed, you may have an issue when dealing with &lt;tt&gt;@BeanParam&lt;/tt&gt; annotation.&lt;/p&gt;</comment>
                            <comment id="15996453" author="sergey_beryozkin" created="Thu, 4 May 2017 09:44:51 +0000"  >&lt;p&gt;Yes, yesterday I did another update to deal with the &apos;loose&apos; method-level vars, and as part of that update I removed the code which was checking PathParams, that code was written a long time ago, and yes it was missing on BeanParam as such. I&apos;ve deployed 3.1.2-SNAPSHOT rt/frontend/jaxrs and rt/es/security/cors.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12865544" name="uriinfo-issues.jar" size="5760" author="nlenoire" created="Fri, 28 Apr 2017 13:24:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3e8m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>