<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:54:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4444] Injecting object with @Resource with no specified name attribute is not working</title>
                <link>https://issues.apache.org/jira/browse/CXF-4444</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Created a JAX-RS service and the implementation is attempting to inject a resource by type as seen in the example below. The ApplicationSettings bean is confirmed to be defined in the root Spring context as I can explicitly retrieve the bean from the ApplicationContext in the LoginResourceImpl. I am aware that the beans defined in the serviceBeans are created for each request and that Spring does not do the DI, but rather CXF code handles this.&lt;/p&gt;

&lt;p&gt;The issue stems from how it performs a lookup for the injected resource. If no name attribute is defined on the @Resource, it should perform the lookup for that object by type.&lt;/p&gt;

&lt;p&gt;The ResourceInjector class has a visitField method that will retrieve the name of the resource along with the class type. In our case the first resolveResource attempt will fail since there is nothing found with the name/type combination. The second case should attempt to perform a lookup with just the type of the resource to be injected.&lt;/p&gt;

&lt;p&gt;When the BusApplicationContextResourceResolver attempts to resolve the value the 2nd try with a null name, the resolve method will ALWAYS return null instead of attempting to do a lookup using &quot;context.getBean(resourceType)&quot;.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;ResourceInjector.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = getFieldNameForResource(res, field);
        &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;?&amp;gt; type = getResourceType(res, field); 
        
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; resource = resolveResource(name, type);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (resource == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
            &amp;amp;&amp;amp; &quot;&quot;.equals(res.name())) {
            resource = resolveResource(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, type);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;BusApplicationContextResourceResolver.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; T resolve(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; resourceName, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;T&amp;gt; resourceType) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (resourceName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }   
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; resourceType.&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(context.getBean(resourceName, resourceType));
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NoSuchBeanDefinitionException def) {
            &lt;span class=&quot;code-comment&quot;&gt;//ignore
&lt;/span&gt;        }
    ....
    ....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:server id=&lt;span class=&quot;code-quote&quot;&gt;&quot;jaxrsRestService&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;jaxrs:serviceBeans&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean class=&lt;span class=&quot;code-quote&quot;&gt;&quot;LoginResourceImpl&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/jaxrs:serviceBeans&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;LoginResource.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoginResource {
   @GET
   @Path(&lt;span class=&quot;code-quote&quot;&gt;&quot;/login/captchakey&quot;&lt;/span&gt;)
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; retrieveCaptchaKey();
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;LoginResourceImpl.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;LoginResourceImpl &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; LoginResource {

   &lt;span class=&quot;code-comment&quot;&gt;// This is the resource we are attempting to inject
&lt;/span&gt;   @Resource
   ApplicationSettings applicationSettings; 

   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; retrieveCaptchaKey() {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; applicationSettings.getSettting(&lt;span class=&quot;code-quote&quot;&gt;&quot;captchakey&quot;&lt;/span&gt;);
   }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Possible fix in BusApplicationContextResourceResolver.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; T resolve(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; resourceName, &lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;T&amp;gt; resourceType) {
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            T resource = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (resourceName == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-comment&quot;&gt;// Perofmrm the lookup of the resource using just the type
&lt;/span&gt;                resource = resourceType.&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(context.getBean(resourceType));
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                resource = resourceType.&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(context.getBean(resourceName, resourceType));
            }

            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; resource;
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (NoSuchBeanDefinitionException def) {
            &lt;span class=&quot;code-comment&quot;&gt;//ignore
&lt;/span&gt;        }
   ...
   ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12600420">CXF-4444</key>
            <summary>Injecting object with @Resource with no specified name attribute is not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="mveitas">Matas Veitas</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 Jul 2012 03:57:39 +0000</created>
                <updated>Tue, 28 Aug 2012 17:44:39 +0000</updated>
                            <resolved>Fri, 27 Jul 2012 16:16:17 +0000</resolved>
                                    <version>2.6.1</version>
                                    <fixVersion>2.5.5</fixVersion>
                    <fixVersion>2.6.2</fixVersion>
                    <fixVersion>2.7</fixVersion>
                                    <component>Core</component>
                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13423923" author="mveitas" created="Fri, 27 Jul 2012 15:20:19 +0000"  >&lt;p&gt;A work around for this is to ensure that all injected items have a name specified&lt;/p&gt;</comment>
                            <comment id="13423949" author="sergey_beryozkin" created="Fri, 27 Jul 2012 16:16:17 +0000"  >&lt;p&gt;Thanks for the proposed fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239921</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00ut3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2923</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>