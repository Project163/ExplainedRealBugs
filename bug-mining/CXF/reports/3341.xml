<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:32:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7854] Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.</title>
                <link>https://issues.apache.org/jira/browse/CXF-7854</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Customers wanting to use reactive extensions may want to package their own version of RxJava2 with their application.  The use of internal APIs may cause class loading problems.  &lt;/p&gt;

&lt;p&gt; Caused by: java.lang.NoClassDefFoundError: org/apache/cxf/jaxrs/client/SyncInvokerImpl&lt;br/&gt;
            at org.apache.cxf.jaxrs.rx2.client.FlowableRxInvokerProvider.getRxInvoker(FlowableRxInvokerProvider.java:37)&lt;br/&gt;
 	at org.apache.cxf.jaxrs.rx2.client.FlowableRxInvokerProvider.getRxInvoker(FlowableRxInvokerProvider.java:29)&lt;br/&gt;
 	at org.apache.cxf.jaxrs.client.WebClient.rx(WebClient.java:1286)&lt;br/&gt;
 	at org.apache.cxf.jaxrs.client.spec.InvocationBuilderImpl.rx(InvocationBuilderImpl.java:402)&lt;/p&gt;


&lt;p&gt;FlowableRxInvokerProvider uses org.apache.cxf.jaxrs.client.SyncInvokerImpl. &lt;br/&gt;
FlowableRxInvokerImpl uses org.apache.cxf.jaxrs.client.WebClient.&lt;br/&gt;
ObservableRxInvokerProvider uses org.apache.cxf.jaxrs.client.SyncInvokerImpl.&lt;br/&gt;
ObservableRxInvokerImpl uses org.apache.cxf.jaxrs.client.WebClient.&lt;/p&gt;

&lt;p&gt;These classes need to be refactored. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13188193">CXF-7854</key>
            <summary>Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jkoehler22">John Koehler</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Sep 2018 16:15:23 +0000</created>
                <updated>Tue, 30 Oct 2018 10:06:00 +0000</updated>
                            <resolved>Wed, 3 Oct 2018 00:37:37 +0000</resolved>
                                    <version>3.2.6</version>
                                    <fixVersion>3.2.7</fixVersion>
                    <fixVersion>3.3.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16632530" author="jkoehler22" created="Fri, 28 Sep 2018 20:37:23 +0000"  >&lt;p&gt;I have a change coded up.  I am working the process to deliver the pull request.&lt;/p&gt;</comment>
                            <comment id="16632686" author="reta" created="Sat, 29 Sep 2018 00:51:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jkoehler22&quot; class=&quot;user-hover&quot; rel=&quot;jkoehler22&quot;&gt;jkoehler22&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16634088" author="githubbot" created="Mon, 1 Oct 2018 14:21:32 +0000"  >&lt;p&gt;jkoehler22 opened a new pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230; use internal APIs&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634099" author="githubbot" created="Mon, 1 Oct 2018 14:31:49 +0000"  >&lt;p&gt;andrei-ivanov commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221630991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221630991&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -148,33 +151,122 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
         if (sc == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType));&lt;br/&gt;
+            return Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   If these 2 objects are the same and the only difference is the `subscribeOn`+`observerOn` when `sc != null`, in my opinion it would look nicer to create the `Flowable` just once and then apply the logic on it.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634417" author="githubbot" created="Mon, 1 Oct 2018 18:08:23 +0000"  >&lt;p&gt;andymc12 commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221704277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221704277&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -148,33 +151,122 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
         if (sc == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType));&lt;br/&gt;
+            return Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   The same comment should also apply to the changes in `ObservableRxInvokerImpl`.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634424" author="githubbot" created="Mon, 1 Oct 2018 18:12:59 +0000"  >&lt;p&gt;jkoehler22 commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221705651&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221705651&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -148,33 +151,122 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
         if (sc == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType));&lt;br/&gt;
+            return Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Agree.  Thanks for the comments.  Done.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634747" author="githubbot" created="Mon, 1 Oct 2018 23:02:44 +0000"  >&lt;p&gt;reta commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221783318&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221783318&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +150,90 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                    try {&lt;br/&gt;
+                        T response = syncInvoker.method(name, entity, responseType);&lt;br/&gt;
+                        emitter.onNext(response);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   @jkoehler22  Do you think we should check if emitter is cancelled before calling oNext / etc?&lt;br/&gt;
   ```&lt;br/&gt;
   if (!emitter.isCancelled()) &lt;/p&gt;
{
          emitter.onNext(response);
   }
&lt;p&gt;   ```&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634748" author="githubbot" created="Mon, 1 Oct 2018 23:04:50 +0000"  >&lt;p&gt;reta commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221783683&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221783683&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +150,90 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                    try &lt;/p&gt;
{
+                        T response = syncInvoker.method(name, entity, responseType);
+                        emitter.onNext(response);
+                        emitter.onComplete();
+                    }
&lt;p&gt; catch (Throwable e) &lt;/p&gt;
{
+                        emitter.onError(e);
+                    }
&lt;p&gt;+            }&lt;br/&gt;
+        }, BackpressureStrategy.DROP);&lt;br/&gt;
+        &lt;br/&gt;
         if (sc == null) &lt;/p&gt;
{
-            return Flowable.fromFuture(wc.async().method(name, entity, responseType));
+            return flowable;
         }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType), sc);&lt;br/&gt;
+        return flowable.subscribeOn(sc).observeOn(sc);        &lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, GenericType&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   We may generalize code a bit, too many repetition I think:&lt;br/&gt;
   ```&lt;br/&gt;
       private &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; create(Supplier&amp;lt;T&amp;gt; supplier) {&lt;br/&gt;
           Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
               @Override&lt;br/&gt;
               public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
                   try {&lt;br/&gt;
                       T response = supplier.get();&lt;br/&gt;
                       if (!emitter.isCancelled()) &lt;/p&gt;
{
                           emitter.onNext(response);
                       }

&lt;p&gt;                       if (!emitter.isCancelled()) &lt;/p&gt;
{
                           emitter.onComplete();
                       }
&lt;p&gt;                   } catch (Throwable e) {&lt;br/&gt;
                       if (!emitter.isCancelled()) &lt;/p&gt;
{
                           emitter.onError(e);
                       }
&lt;p&gt;                   }&lt;br/&gt;
               }&lt;br/&gt;
           }, BackpressureStrategy.DROP);&lt;/p&gt;

&lt;p&gt;           if (sc == null) &lt;/p&gt;
{
               return flowable;
           }

&lt;p&gt;           return flowable.subscribeOn(sc).observeOn(sc);&lt;br/&gt;
       }&lt;br/&gt;
   ```&lt;/p&gt;

&lt;p&gt;   Then the implementation is just needs a supplier:&lt;br/&gt;
   ```&lt;br/&gt;
      @Override&lt;br/&gt;
       public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, GenericType&amp;lt;T&amp;gt; responseType) &lt;/p&gt;
{
           return create(() -&amp;gt; syncInvoker.method(name, entity, responseType));
       }

&lt;p&gt;       @Override&lt;br/&gt;
       public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Class&amp;lt;T&amp;gt; responseType) &lt;/p&gt;
{
           return create(() -&amp;gt; syncInvoker.method(name, responseType));
       }&lt;br/&gt;
   &lt;br/&gt;
       @Override&lt;br/&gt;
       public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, GenericType&amp;lt;T&amp;gt; responseType) {
           return create(() -&amp;gt; syncInvoker.method(name, responseType));
       }
&lt;p&gt;   ```&lt;/p&gt;

&lt;p&gt;   What do you think?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634749" author="githubbot" created="Mon, 1 Oct 2018 23:06:50 +0000"  >&lt;p&gt;reta commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221784067&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221784067&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +148,90 @@ public ObservableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Observable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Observable&amp;lt;T&amp;gt; observable = Observable.create(new ObservableOnSubscribe&amp;lt;T&amp;gt;() {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   If you think previous comments for `Flowable` worth the change, we could replicate it for `Observable` as well. &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634779" author="githubbot" created="Mon, 1 Oct 2018 23:49:10 +0000"  >&lt;p&gt;reta commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221790817&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221790817&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +150,90 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                    try &lt;/p&gt;
{
+                        T response = syncInvoker.method(name, entity, responseType);
+                        emitter.onNext(response);
+                        emitter.onComplete();
+                    }
&lt;p&gt; catch (Throwable e) &lt;/p&gt;
{
+                        emitter.onError(e);
+                    }
&lt;p&gt;+            }&lt;br/&gt;
+        }, BackpressureStrategy.DROP);&lt;br/&gt;
+        &lt;br/&gt;
         if (sc == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType));&lt;br/&gt;
+            return flowable;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   This part is concerning. I do understand we couldn&apos;t do much if `executorService` is not provided. But it means the flow is going to be synchronous (whereas `RxInvoker` states explicitly in javadocs `... asynchronous computation ...`). May be we could default the executor to `Schedulers.io()` in this case?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16634783" author="githubbot" created="Mon, 1 Oct 2018 23:52:52 +0000"  >&lt;p&gt;reta commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r221791386&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r221791386&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +150,90 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                    try &lt;/p&gt;
{
+                        T response = syncInvoker.method(name, entity, responseType);
+                        emitter.onNext(response);
+                        emitter.onComplete();
+                    }
&lt;p&gt; catch (Throwable e) &lt;/p&gt;
{
+                        emitter.onError(e);
+                    }
&lt;p&gt;+            }&lt;br/&gt;
+        }, BackpressureStrategy.DROP);&lt;br/&gt;
+        &lt;br/&gt;
         if (sc == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType));&lt;br/&gt;
+            return flowable;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Just to give a reasoning behind it: the sensible default (like `Schedulers.io()` in this case) is used in many part of Java standard library (notably, `ForkJoin.commonPool()`): when the executor is not provided, the default one is used. Not the perfect choice but the asynchronous nature of the call is preserved.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635764" author="githubbot" created="Tue, 2 Oct 2018 16:07:10 +0000"  >&lt;p&gt;jkoehler22 commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r222014823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r222014823&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +150,90 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                    try {&lt;br/&gt;
+                        T response = syncInvoker.method(name, entity, responseType);&lt;br/&gt;
+                        emitter.onNext(response);&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Agree.  Thanks for the comments.  Done.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635765" author="githubbot" created="Tue, 2 Oct 2018 16:07:20 +0000"  >&lt;p&gt;jkoehler22 commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r222014882&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r222014882&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +150,90 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                    try &lt;/p&gt;
{
+                        T response = syncInvoker.method(name, entity, responseType);
+                        emitter.onNext(response);
+                        emitter.onComplete();
+                    }
&lt;p&gt; catch (Throwable e) &lt;/p&gt;
{
+                        emitter.onError(e);
+                    }
&lt;p&gt;+            }&lt;br/&gt;
+        }, BackpressureStrategy.DROP);&lt;br/&gt;
+        &lt;br/&gt;
         if (sc == null) &lt;/p&gt;
{
-            return Flowable.fromFuture(wc.async().method(name, entity, responseType));
+            return flowable;
         }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType), sc);&lt;br/&gt;
+        return flowable.subscribeOn(sc).observeOn(sc);        &lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, GenericType&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Agree.  Thanks for the comments.  Done.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635766" author="githubbot" created="Tue, 2 Oct 2018 16:07:35 +0000"  >&lt;p&gt;jkoehler22 commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r222015006&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r222015006&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +148,90 @@ public ObservableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Observable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Observable&amp;lt;T&amp;gt; observable = Observable.create(new ObservableOnSubscribe&amp;lt;T&amp;gt;() {&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   Agree.  Thanks for the comments.  Done.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16635767" author="githubbot" created="Tue, 2 Oct 2018 16:07:40 +0000"  >&lt;p&gt;jkoehler22 commented on a change in pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#discussion_r222015092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#discussion_r222015092&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -147,34 +150,90 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
+        &lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                    try &lt;/p&gt;
{
+                        T response = syncInvoker.method(name, entity, responseType);
+                        emitter.onNext(response);
+                        emitter.onComplete();
+                    }
&lt;p&gt; catch (Throwable e) &lt;/p&gt;
{
+                        emitter.onError(e);
+                    }
&lt;p&gt;+            }&lt;br/&gt;
+        }, BackpressureStrategy.DROP);&lt;br/&gt;
+        &lt;br/&gt;
         if (sc == null) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType));&lt;br/&gt;
+            return flowable;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Review comment:&lt;br/&gt;
   Agree.  Thanks for the comments.  Done.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16636016" author="githubbot" created="Tue, 2 Oct 2018 19:37:02 +0000"  >&lt;p&gt;reta commented on issue #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#issuecomment-426402875&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#issuecomment-426402875&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   LGTM, thanks a lot, @jkoehler22 &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16636018" author="githubbot" created="Tue, 2 Oct 2018 19:39:11 +0000"  >&lt;p&gt;reta commented on issue #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#issuecomment-426403502&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#issuecomment-426403502&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @andrei-ivanov Looks good for you?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16636083" author="githubbot" created="Tue, 2 Oct 2018 20:34:33 +0000"  >&lt;p&gt;andrei-ivanov commented on issue #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451#issuecomment-426420222&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451#issuecomment-426420222&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Yes, look fine &#128578;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16636112" author="githubbot" created="Tue, 2 Oct 2018 21:03:46 +0000"  >&lt;p&gt;reta closed pull request #451: &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7854&quot; title=&quot;Refactor RxJava2 Flowable and Observable Rx Invokers to not use internal APIs.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7854&quot;&gt;&lt;del&gt;CXF-7854&lt;/del&gt;&lt;/a&gt;: Refactor RxJava2 Flowable and Observable Rx Invokers to not&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/cxf/pull/451&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/451&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
index be5c2d54eef..f34ba566ce4 100644&lt;br/&gt;
&amp;#8212; a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
+++ b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerImpl.java&lt;br/&gt;
@@ -19,24 +19,28 @@&lt;br/&gt;
 package org.apache.cxf.jaxrs.rx2.client;&lt;/p&gt;

&lt;p&gt; import java.util.concurrent.ExecutorService;&lt;br/&gt;
+import java.util.function.Supplier;&lt;/p&gt;

&lt;p&gt; import javax.ws.rs.HttpMethod;&lt;br/&gt;
 import javax.ws.rs.client.Entity;&lt;br/&gt;
+import javax.ws.rs.client.SyncInvoker;&lt;br/&gt;
 import javax.ws.rs.core.GenericType;&lt;br/&gt;
 import javax.ws.rs.core.Response;&lt;/p&gt;

&lt;p&gt;-import org.apache.cxf.jaxrs.client.WebClient;&lt;br/&gt;
-&lt;br/&gt;
+import io.reactivex.BackpressureStrategy;&lt;br/&gt;
 import io.reactivex.Flowable;&lt;br/&gt;
+import io.reactivex.FlowableEmitter;&lt;br/&gt;
+import io.reactivex.FlowableOnSubscribe;&lt;br/&gt;
 import io.reactivex.Scheduler;&lt;br/&gt;
 import io.reactivex.schedulers.Schedulers;&lt;/p&gt;


&lt;p&gt; public class FlowableRxInvokerImpl implements FlowableRxInvoker {&lt;br/&gt;
     private Scheduler sc;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private WebClient wc;&lt;/li&gt;
	&lt;li&gt;public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/li&gt;
	&lt;li&gt;this.wc = wc;&lt;br/&gt;
+    private SyncInvoker syncInvoker;&lt;br/&gt;
+    &lt;br/&gt;
+    public FlowableRxInvokerImpl(SyncInvoker syncInvoker, ExecutorService ex) 
{
+        this.syncInvoker = syncInvoker;
         this.sc = ex == null ? null : Schedulers.from(ex);
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;@@ -147,34 +151,50 @@ public FlowableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (sc == null) 
{
-            return Flowable.fromFuture(wc.async().method(name, entity, responseType));
-        }&lt;br/&gt;
-        return Flowable.fromFuture(wc.async().method(name, entity, responseType), sc);&lt;br/&gt;
+        return create(() -&amp;gt; syncInvoker.method(name, entity, responseType));&lt;br/&gt;
     }&lt;br/&gt;
-&lt;br/&gt;
+    &lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, GenericType&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
-        if (sc == null) {-            return Flowable.fromFuture(wc.async().method(name, entity, responseType));-        }&lt;/li&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, entity, responseType), sc);&lt;br/&gt;
+        return create(() -&amp;gt; syncInvoker.method(name, entity, responseType));&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, Class&amp;lt;T&amp;gt; responseType) {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (sc == null) 
{
-            return Flowable.fromFuture(wc.async().method(name, responseType));
-        }&lt;/li&gt;
	&lt;li&gt;return Flowable.fromFuture(wc.async().method(name, responseType), sc);&lt;br/&gt;
+        return create(() -&amp;gt; syncInvoker.method(name, responseType));&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; method(String name, GenericType&amp;lt;T&amp;gt; responseType) &lt;/p&gt;
{
+        return create(() -&amp;gt; syncInvoker.method(name, responseType));
+    }&lt;br/&gt;
+    &lt;br/&gt;
+    private &amp;lt;T&amp;gt; Flowable&amp;lt;T&amp;gt; create(Supplier&amp;lt;T&amp;gt; supplier) {&lt;br/&gt;
+        Flowable&amp;lt;T&amp;gt; flowable = Flowable.create(new FlowableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(FlowableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                try {&lt;br/&gt;
+                    T response = supplier.get();&lt;br/&gt;
+                    if (!emitter.isCancelled()) {
+                        emitter.onNext(response);
+                    }&lt;br/&gt;
+                    &lt;br/&gt;
+                    if (!emitter.isCancelled()) {
+                        emitter.onComplete();
+                    }&lt;br/&gt;
+                } catch (Throwable e) {&lt;br/&gt;
+                    if (!emitter.isCancelled()) {
+                        emitter.onError(e);
+                    }&lt;br/&gt;
+                }&lt;br/&gt;
+            }&lt;br/&gt;
+        }, BackpressureStrategy.DROP);&lt;br/&gt;
+        &lt;br/&gt;
         if (sc == null) {
-            return Flowable.fromFuture(wc.async().method(name, responseType));
+            return flowable.subscribeOn(Schedulers.io());
         }&lt;br/&gt;
-        return Flowable.fromFuture(wc.async().method(name, responseType), sc);&lt;br/&gt;
+        &lt;br/&gt;
+        return flowable.subscribeOn(sc).observeOn(sc);&lt;br/&gt;
     }&lt;br/&gt;
 &lt;br/&gt;
 }&lt;br/&gt;
diff --git a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerProvider.java b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerProvider.java&lt;br/&gt;
index e4e0e71196d..6b61b517ae7 100644&lt;br/&gt;
&amp;#8212; a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerProvider.java&lt;br/&gt;
+++ b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/FlowableRxInvokerProvider.java&lt;br/&gt;
@@ -24,17 +24,12 @@&lt;br/&gt;
 import javax.ws.rs.client.SyncInvoker;&lt;br/&gt;
 import javax.ws.rs.ext.Provider;&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.cxf.jaxrs.client.SyncInvokerImpl;&lt;br/&gt;
-&lt;br/&gt;
 @Provider&lt;br/&gt;
 public class FlowableRxInvokerProvider implements RxInvokerProvider&amp;lt;FlowableRxInvoker&amp;gt; {&lt;br/&gt;
 &lt;br/&gt;
     @Override&lt;br/&gt;
     public FlowableRxInvoker getRxInvoker(SyncInvoker syncInvoker, ExecutorService executorService) {
-        // TODO: At the moment we still delegate if possible to the async HTTP conduit.
-        // Investigate if letting the RxJava thread pool deal with the sync invocation
-        // is indeed more effective
-        return new FlowableRxInvokerImpl(((SyncInvokerImpl)syncInvoker).getWebClient(), executorService);
+        return new FlowableRxInvokerImpl(syncInvoker, executorService);
     }&lt;br/&gt;
 &lt;br/&gt;
     @Override&lt;br/&gt;
diff --git a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerImpl.java b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerImpl.java&lt;br/&gt;
index 2c1f966a325..1cb1b9f5add 100644&lt;br/&gt;
&amp;#8212; a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerImpl.java&lt;br/&gt;
+++ b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerImpl.java&lt;br/&gt;
@@ -19,24 +19,26 @@&lt;br/&gt;
 package org.apache.cxf.jaxrs.rx2.client;&lt;br/&gt;
 &lt;br/&gt;
 import java.util.concurrent.ExecutorService;&lt;br/&gt;
+import java.util.function.Supplier;&lt;br/&gt;
 &lt;br/&gt;
 import javax.ws.rs.HttpMethod;&lt;br/&gt;
 import javax.ws.rs.client.Entity;&lt;br/&gt;
+import javax.ws.rs.client.SyncInvoker;&lt;br/&gt;
 import javax.ws.rs.core.GenericType;&lt;br/&gt;
 import javax.ws.rs.core.Response;&lt;br/&gt;
 &lt;br/&gt;
-import org.apache.cxf.jaxrs.client.WebClient;&lt;br/&gt;
-&lt;br/&gt;
 import io.reactivex.Observable;&lt;br/&gt;
+import io.reactivex.ObservableEmitter;&lt;br/&gt;
+import io.reactivex.ObservableOnSubscribe;&lt;br/&gt;
 import io.reactivex.Scheduler;&lt;br/&gt;
 import io.reactivex.schedulers.Schedulers;&lt;br/&gt;
 &lt;br/&gt;
 &lt;br/&gt;
 public class ObservableRxInvokerImpl implements ObservableRxInvoker {&lt;br/&gt;
     private Scheduler sc;&lt;br/&gt;
-    private WebClient wc;&lt;br/&gt;
-    public ObservableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;br/&gt;
-        this.wc = wc;&lt;br/&gt;
+    private SyncInvoker syncInvoker;&lt;br/&gt;
+    public ObservableRxInvokerImpl(SyncInvoker syncInvoker, ExecutorService ex) {
+        this.syncInvoker = syncInvoker;
         this.sc = ex == null ? null : Schedulers.from(ex);
     }&lt;br/&gt;
 &lt;br/&gt;
@@ -147,34 +149,50 @@ public ObservableRxInvokerImpl(WebClient wc, ExecutorService ex) {&lt;br/&gt;
 &lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Observable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
-        if (sc == null) {
-            return Observable.fromFuture(wc.async().method(name, entity, responseType));
-        }&lt;br/&gt;
-        return Observable.fromFuture(wc.async().method(name, entity, responseType), sc);&lt;br/&gt;
+        return create(() -&amp;gt; syncInvoker.method(name, entity, responseType));&lt;br/&gt;
     }&lt;br/&gt;
-&lt;br/&gt;
+    &lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Observable&amp;lt;T&amp;gt; method(String name, Entity&amp;lt;?&amp;gt; entity, GenericType&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
-        if (sc == null) {-            return Observable.fromFuture(wc.async().method(name, entity, responseType));-        }&lt;br/&gt;
-        return Observable.fromFuture(wc.async().method(name, entity, responseType), sc);&lt;br/&gt;
+        return create(() -&amp;gt; syncInvoker.method(name, entity, responseType));&lt;br/&gt;
     }&lt;br/&gt;
 &lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Observable&amp;lt;T&amp;gt; method(String name, Class&amp;lt;T&amp;gt; responseType) {&lt;br/&gt;
-        if (sc == null) {
-            return Observable.fromFuture(wc.async().method(name, responseType));
-        }&lt;br/&gt;
-        return Observable.fromFuture(wc.async().method(name, responseType), sc);&lt;br/&gt;
+        return create(() -&amp;gt; syncInvoker.method(name, responseType));&lt;br/&gt;
     }&lt;br/&gt;
 &lt;br/&gt;
     @Override&lt;br/&gt;
     public &amp;lt;T&amp;gt; Observable&amp;lt;T&amp;gt; method(String name, GenericType&amp;lt;T&amp;gt; responseType) {+        return create(() -&amp;gt; syncInvoker.method(name, responseType));+    }
&lt;p&gt;+    &lt;br/&gt;
+    private &amp;lt;T&amp;gt; Observable&amp;lt;T&amp;gt; create(Supplier&amp;lt;T&amp;gt; supplier) {&lt;br/&gt;
+        Observable&amp;lt;T&amp;gt; observable = Observable.create(new ObservableOnSubscribe&amp;lt;T&amp;gt;() {&lt;br/&gt;
+            @Override&lt;br/&gt;
+            public void subscribe(ObservableEmitter&amp;lt;T&amp;gt; emitter) throws Exception {&lt;br/&gt;
+                try {&lt;br/&gt;
+                    T response = supplier.get();&lt;br/&gt;
+                    if (!emitter.isDisposed()) &lt;/p&gt;
{
+                        emitter.onNext(response);
+                    }
&lt;p&gt;+                    &lt;br/&gt;
+                    if (!emitter.isDisposed()) &lt;/p&gt;
{
+                        emitter.onComplete();
+                    }
&lt;p&gt;+                } catch (Throwable e) {&lt;br/&gt;
+                    if (!emitter.isDisposed()) &lt;/p&gt;
{
+                        emitter.onError(e);
+                    }
&lt;p&gt;+                }&lt;br/&gt;
+            }&lt;br/&gt;
+        });&lt;br/&gt;
+        &lt;br/&gt;
         if (sc == null) &lt;/p&gt;
{
-            return Observable.fromFuture(wc.async().method(name, responseType));
+            return observable.subscribeOn(Schedulers.io());
         }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;return Observable.fromFuture(wc.async().method(name, responseType), sc);&lt;br/&gt;
+        &lt;br/&gt;
+        return observable.subscribeOn(sc).observeOn(sc);&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; }&lt;br/&gt;
diff --git a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerProvider.java b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerProvider.java&lt;br/&gt;
index 221bc481595..5ab701c400d 100644&lt;br/&gt;
&amp;#8212; a/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerProvider.java&lt;br/&gt;
+++ b/rt/rs/extensions/rx2/src/main/java/org/apache/cxf/jaxrs/rx2/client/ObservableRxInvokerProvider.java&lt;br/&gt;
@@ -24,17 +24,12 @@&lt;br/&gt;
 import javax.ws.rs.client.SyncInvoker;&lt;br/&gt;
 import javax.ws.rs.ext.Provider;&lt;/p&gt;

&lt;p&gt;-import org.apache.cxf.jaxrs.client.SyncInvokerImpl;&lt;br/&gt;
-&lt;br/&gt;
 @Provider&lt;br/&gt;
 public class ObservableRxInvokerProvider implements RxInvokerProvider&amp;lt;ObservableRxInvoker&amp;gt; {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     public ObservableRxInvoker getRxInvoker(SyncInvoker syncInvoker, ExecutorService executorService) &lt;/p&gt;
{
-        // TODO: At the moment we still delegate if possible to the async HTTP conduit.
-        // Investigate if letting the RxJava thread pool deal with the sync invocation
-        // is indeed more effective
-        return new ObservableRxInvokerImpl(((SyncInvokerImpl)syncInvoker).getWebClient(), executorService);
+        return new ObservableRxInvokerImpl(syncInvoker, executorService);
     }

&lt;p&gt;     @Override&lt;br/&gt;
diff --git a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/JAXRSRxJava2ObservableTest.java b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/JAXRSRxJava2ObservableTest.java&lt;br/&gt;
index dc8ef134b64..081a518e691 100644&lt;br/&gt;
&amp;#8212; a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/JAXRSRxJava2ObservableTest.java&lt;br/&gt;
+++ b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/JAXRSRxJava2ObservableTest.java&lt;br/&gt;
@@ -19,9 +19,11 @@&lt;/p&gt;

&lt;p&gt; package org.apache.cxf.systest.jaxrs.reactive;&lt;/p&gt;

&lt;p&gt;+import java.util.Collections;&lt;br/&gt;
 import java.util.LinkedList;&lt;br/&gt;
 import java.util.List;&lt;/p&gt;

&lt;p&gt;+import javax.ws.rs.core.GenericType;&lt;br/&gt;
 import javax.xml.ws.Holder;&lt;/p&gt;

&lt;p&gt; import com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider;&lt;br/&gt;
@@ -48,6 +50,14 @@ public static void startServers() throws Exception &lt;/p&gt;
{
                    launchServer(RxJava2ObservableServer.class, true));
         createStaticBus();
     }
&lt;p&gt;+    @Test&lt;br/&gt;
+    public void testGetHelloWorldText() throws Exception &lt;/p&gt;
{
+        String address = &quot;http://localhost:&quot; + PORT + &quot;/rx2/observable/text&quot;;
+        WebClient wc = WebClient.create(address);
+        String text = wc.accept(&quot;text/plain&quot;).get(String.class);
+        assertEquals(&quot;Hello, world!&quot;, text);
+    }
&lt;p&gt;+&lt;br/&gt;
     @Test&lt;br/&gt;
     public void testGetHelloWorldJson() throws Exception {&lt;br/&gt;
         String address = &quot;http://localhost:&quot; + PORT + &quot;/rx2/observable/textJson&quot;;&lt;br/&gt;
@@ -70,4 +80,25 @@ public void testGetHelloWorldJson() throws Exception &lt;/p&gt;
{
         assertEquals(&quot;Hello&quot;, holder.value.getGreeting());
         assertEquals(&quot;World&quot;, holder.value.getAudience());
     }
&lt;p&gt;+    &lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testGetHelloWorldJsonList() throws Exception &lt;/p&gt;
{
+        String address = &quot;http://localhost:&quot; + PORT + &quot;/rx2/observable/textJsonList&quot;;
+        doTestGetHelloWorldJsonList(address);
+    }
&lt;p&gt; &lt;br/&gt;
+    &lt;br/&gt;
+    private void doTestGetHelloWorldJsonList(String address) throws Exception {&lt;br/&gt;
+        WebClient wc = WebClient.create(address,&lt;br/&gt;
+                                        Collections.singletonList(new JacksonJsonProvider()));&lt;br/&gt;
+        WebClient.getConfig(wc).getHttpConduit().getClient().setReceiveTimeout(10000000);&lt;br/&gt;
+        GenericType&amp;lt;List&amp;lt;HelloWorldBean&amp;gt;&amp;gt; genericResponseType = new GenericType&amp;lt;List&amp;lt;HelloWorldBean&amp;gt;&amp;gt;() &lt;/p&gt;
{
+        }
&lt;p&gt;;&lt;br/&gt;
+&lt;br/&gt;
+        List&amp;lt;HelloWorldBean&amp;gt; beans = wc.accept(&quot;application/json&quot;).get(genericResponseType);&lt;br/&gt;
+        assertEquals(2, beans.size());&lt;br/&gt;
+        assertEquals(&quot;Hello&quot;, beans.get(0).getGreeting());&lt;br/&gt;
+        assertEquals(&quot;World&quot;, beans.get(0).getAudience());&lt;br/&gt;
+        assertEquals(&quot;Ciao&quot;, beans.get(1).getGreeting());&lt;br/&gt;
+        assertEquals(&quot;World&quot;, beans.get(1).getAudience());&lt;br/&gt;
+    }&lt;br/&gt;
 }&lt;br/&gt;
diff --git a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/RxJava2ObservableService.java b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/RxJava2ObservableService.java&lt;br/&gt;
index abb6e7289bf..f08147d1638 100644&lt;br/&gt;
&amp;#8212; a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/RxJava2ObservableService.java&lt;br/&gt;
+++ b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/reactive/RxJava2ObservableService.java&lt;br/&gt;
@@ -19,6 +19,8 @@&lt;/p&gt;

&lt;p&gt; package org.apache.cxf.systest.jaxrs.reactive;&lt;/p&gt;

&lt;p&gt;+import java.util.Arrays;&lt;br/&gt;
+import java.util.List;&lt;/p&gt;

&lt;p&gt; import javax.ws.rs.GET;&lt;br/&gt;
 import javax.ws.rs.Path;&lt;br/&gt;
@@ -26,10 +28,15 @@&lt;/p&gt;

&lt;p&gt; import io.reactivex.Observable;&lt;/p&gt;

&lt;p&gt;-&lt;br/&gt;
 @Path(&quot;/rx2/observable&quot;)&lt;br/&gt;
 public class RxJava2ObservableService {&lt;/p&gt;

&lt;p&gt;+    @GET&lt;br/&gt;
+    @Produces(&quot;text/plain&quot;)&lt;br/&gt;
+    @Path(&quot;text&quot;)&lt;br/&gt;
+    public Observable&amp;lt;String&amp;gt; getText() &lt;/p&gt;
{
+        return Observable.just(&quot;Hello, world!&quot;);
+    }

&lt;p&gt;     @GET&lt;br/&gt;
     @Produces(&quot;application/json&quot;)&lt;br/&gt;
@@ -37,6 +44,15 @@&lt;br/&gt;
     public Observable&amp;lt;HelloWorldBean&amp;gt; getJson() &lt;/p&gt;
{
         return Observable.just(new HelloWorldBean());
     }
&lt;p&gt;+    &lt;br/&gt;
+    @GET&lt;br/&gt;
+    @Produces(&quot;application/json&quot;)&lt;br/&gt;
+    @Path(&quot;textJsonList&quot;)&lt;br/&gt;
+    public Observable&amp;lt;List&amp;lt;HelloWorldBean&amp;gt;&amp;gt; getJsonList() &lt;/p&gt;
{
+        HelloWorldBean bean1 = new HelloWorldBean();
+        HelloWorldBean bean2 = new HelloWorldBean();
+        bean2.setGreeting(&quot;Ciao&quot;);
+        return Observable.just(Arrays.asList(bean1, bean2));
+    }
&lt;p&gt;+  &lt;br/&gt;
 }&lt;br/&gt;
-&lt;br/&gt;
-&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ymcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>