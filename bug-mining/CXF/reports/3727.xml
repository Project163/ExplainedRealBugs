<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:39:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8963] URI is always unknown in server request metrics </title>
                <link>https://issues.apache.org/jira/browse/CXF-8963</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Since 4.0.0 (combined with spring boot 3.x), actuator prometheus - http_server_request - stats are not good anymore, they are missing the correct uri tag that is now always UNKNOWN.&lt;/p&gt;

&lt;p&gt;In 3.6.2 (combined with spring boot 2.7.x) this was working perfectly.&lt;/p&gt;

&lt;p&gt;Here attached a pet project to reproduce the issue.&lt;/p&gt;

&lt;p&gt;Run : &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
curl -s http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8080/services/sayHello/world
&lt;/span&gt;curl -s http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8080/services/notFound
&lt;/span&gt;Hello world, Welcome to CXF RS Spring Boot World!!!
curl -s http:&lt;span class=&quot;code-comment&quot;&gt;//127.0.0.1:8080/actuator/prometheus | grep requests_seconds_count
&lt;/span&gt;cxf_server_requests_seconds_count{exception=&lt;span class=&quot;code-quote&quot;&gt;&quot;None&quot;&lt;/span&gt;,method=&lt;span class=&quot;code-quote&quot;&gt;&quot;GET&quot;&lt;/span&gt;,operation=&lt;span class=&quot;code-quote&quot;&gt;&quot;sayHello&quot;&lt;/span&gt;,outcome=&lt;span class=&quot;code-quote&quot;&gt;&quot;SUCCESS&quot;&lt;/span&gt;,status=&lt;span class=&quot;code-quote&quot;&gt;&quot;200&quot;&lt;/span&gt;,uri=&quot;/services/sayHello/
{a}
&quot;,} 1.0
http_server_requests_seconds_count
{error=&lt;span class=&quot;code-quote&quot;&gt;&quot;none&quot;&lt;/span&gt;,exception=&lt;span class=&quot;code-quote&quot;&gt;&quot;none&quot;&lt;/span&gt;,method=&lt;span class=&quot;code-quote&quot;&gt;&quot;GET&quot;&lt;/span&gt;,outcome=&lt;span class=&quot;code-quote&quot;&gt;&quot;SUCCESS&quot;&lt;/span&gt;,status=&lt;span class=&quot;code-quote&quot;&gt;&quot;200&quot;&lt;/span&gt;,uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;UNKNOWN&quot;&lt;/span&gt;,}
1.0
http_server_requests_seconds_count
{error=&lt;span class=&quot;code-quote&quot;&gt;&quot;none&quot;&lt;/span&gt;,excetpion=&lt;span class=&quot;code-quote&quot;&gt;&quot;none&quot;&lt;/span&gt;,method=&lt;span class=&quot;code-quote&quot;&gt;&quot;GET&quot;&lt;/span&gt;,outcome=&lt;span class=&quot;code-quote&quot;&gt;&quot;CLIENT_ERROR&quot;&lt;/span&gt;,status=&lt;span class=&quot;code-quote&quot;&gt;&quot;404&quot;&lt;/span&gt;,uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;NOT_FOUND&quot;&lt;/span&gt;,}
1.0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So cxf_server_requests are good but not http_server_requests&lt;/p&gt;

&lt;p&gt;Worth to notice there was a fix working a while ago : &lt;a href=&quot;https://github.com/apache/cxf/commit/cab4513374a14fd3549bd0cf86ef9b4996637546&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/commit/cab4513374a14fd3549bd0cf86ef9b4996637546&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13560224">CXF-8963</key>
            <summary>URI is always unknown in server request metrics </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="fcurvat">Fr&#233;d&#233;ric CURVAT</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Dec 2023 14:17:29 +0000</created>
                <updated>Mon, 18 Mar 2024 11:57:01 +0000</updated>
                            <resolved>Sun, 11 Feb 2024 14:49:11 +0000</resolved>
                                    <version>4.0.0</version>
                    <version>4.0.1</version>
                    <version>4.0.2</version>
                    <version>4.0.3</version>
                                    <fixVersion>4.0.4</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17792078" author="fcurvat" created="Fri, 1 Dec 2023 14:20:30 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkulp&quot; class=&quot;user-hover&quot; rel=&quot;dkulp&quot;&gt;dkulp&lt;/a&gt; , since you fixed it last time, can you kindly route the ticket to someone ? &lt;/p&gt;

&lt;p&gt;Seems minor, but in fact really impacting for production systems.&lt;/p&gt;

&lt;p&gt;Best,&lt;/p&gt;</comment>
                            <comment id="17813441" author="reta" created="Fri, 2 Feb 2024 01:00:04 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fcurvat&quot; class=&quot;user-hover&quot; rel=&quot;fcurvat&quot;&gt;fcurvat&lt;/a&gt; , the underlying mechanism has changed in Spring Boot 3&lt;/p&gt;</comment>
                            <comment id="17817234" author="fcurvat" created="Wed, 14 Feb 2024 07:45:07 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reta&quot; class=&quot;user-hover&quot; rel=&quot;reta&quot;&gt;reta&lt;/a&gt; , i will let you once we integrated the version.&lt;/p&gt;</comment>
                            <comment id="17827856" author="fcurvat" created="Mon, 18 Mar 2024 07:05:29 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Issue is well fixed, thanks all !&lt;/p&gt;</comment>
                            <comment id="17827942" author="reta" created="Mon, 18 Mar 2024 11:57:01 +0000"  >&lt;p&gt;Thanks for confirming, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fcurvat&quot; class=&quot;user-hover&quot; rel=&quot;fcurvat&quot;&gt;fcurvat&lt;/a&gt; !&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13064904" name="example.zip" size="9459" author="fcurvat" created="Fri, 1 Dec 2023 14:15:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lzgw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>