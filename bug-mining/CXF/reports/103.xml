<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:34:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1752] JavaToWs generates wrong types for arrays and generic types in wrapper classes</title>
                <link>https://issues.apache.org/jira/browse/CXF-1752</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I found a problem where wsdl2java generates wrong types for fields in my request-wrapper classes.&lt;br/&gt;
This seems to happen on Arrays of primitive types and for generic types like List&amp;lt;Long&amp;gt;.&lt;/p&gt;

&lt;p&gt;I have done the following:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Used the Java first approach and wrote an annotated interface, e.g.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;public interface MyWebServiceInterface &lt;/p&gt;
{
    @WebMethod(action = &quot;storeDocument&quot;)
    public abstract PostStageItem storeDocument(
        @WebParam(name=&quot;receivers&quot;) List&amp;lt;Long&amp;gt; receivers, 
        @WebParam(name=&quot;item&quot;) PreStageDocument item, 
        @WebParam(name=&quot;binaryContent&quot;) byte[] binaryContent, 
        @WebParam(name=&quot;fileName&quot;) String fileName)

}


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;used JavaToWS as follows:&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;java classname=&quot;org.apache.cxf.tools.java2ws.JavaToWS&quot; fork=&quot;true&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;-o&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;src/ws/META-INF/wsdl/MyWebService.wsdl&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;-databinding&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;jaxb&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;-wsdl&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;-wrapperbean&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;-verbose&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;-s&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;src/ws&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;arg value=&quot;com.mycompany.mywebservice.MyWebServiceInterface&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;classpath&amp;gt;&lt;br/&gt;
        &amp;lt;path refid=&quot;cxf.classpath&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/classpath&amp;gt;&lt;br/&gt;
&amp;lt;/java&amp;gt;&lt;/p&gt;


&lt;p&gt;The result is that JavaToWS generates the WSDL as I would expect. &lt;br/&gt;
But the tool fails to generate the request-wrapper classes. But the output is wrong like that:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
@XmlRootElement(name = &quot;storeDocument&quot;, namespace = &quot;http://www.mycompany.com/myservice&quot;)&lt;br/&gt;
@XmlAccessorType(XmlAccessType.FIELD)&lt;br/&gt;
@XmlType(name = &quot;storeDocument&quot;, namespace = &quot;http://www.mycompany.com/myservice&quot;, propOrder = &lt;/p&gt;
{&quot;receivers&quot;,&quot;item&quot;,&quot;binaryContent&quot;,&quot;fileName&quot;}
&lt;p&gt;)&lt;br/&gt;
public class StoreDocument {&lt;/p&gt;

&lt;p&gt;    @XmlElement(name = &quot;receivers&quot;)&lt;br/&gt;
    private java.lang.Long receivers;&lt;br/&gt;
    @XmlElement(name = &quot;item&quot;)&lt;br/&gt;
    private abaxx.postbox.staging.PreStageDocument item;&lt;br/&gt;
    @XmlElement(name = &quot;binaryContent&quot;)&lt;br/&gt;
    private PreStageDocument binaryContent;&lt;br/&gt;
    @XmlElement(name = &quot;fileName&quot;)&lt;br/&gt;
    private java.lang.String fileName;&lt;/p&gt;

&lt;p&gt;... &amp;lt;the getters and setters&amp;gt;...&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;This output is really unexpected. I would expect a List&amp;lt;Long&amp;gt; for &quot;receivers&quot; and a byte[] for &quot;binaryContent&quot;.&lt;br/&gt;
I debugged the problem and found it in&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/cxf/trunk/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2wsdl/processor/internal/jaxws/RequestWrapper.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/cxf/trunk/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2wsdl/processor/internal/jaxws/RequestWrapper.java?view=markup&lt;/a&gt;&lt;br/&gt;
In this class the types of the parameters are determined with:&lt;/p&gt;

&lt;p&gt;final Type[] paramClasses = method.getGenericParameterTypes();&lt;/p&gt;

&lt;p&gt;Later in buildFields() a loop is started for these parameters and they are analyzed.&lt;/p&gt;

&lt;p&gt;In my example, the type of the field &quot;receivers&quot; is a ParameterizedType instance (List&amp;lt;Long&amp;lt;). The code takes the first generic type argument, wich is Long, and use it as type for the property in the request wrapper. This is wrong. It should generate List&amp;lt;Long&amp;gt; instead.&lt;/p&gt;

&lt;p&gt;In the second case the type for the field &quot;binaryContent&quot; is determined as GenericArrayType. The method fails totally and uses PreStageDocument as type in the request-wrapper. This is because PreStageDocument was the last value of the &quot;type&quot; variable in the buildFields()&lt;del&gt;loop and none of the if&lt;/del&gt; and else-if-conditions were true. I think this should at least throw an exception if no type for the field can be found.&lt;/p&gt;

&lt;p&gt;Maybe this problem also exists on the response-wrapper generator, but I didnt test this.&lt;/p&gt;</description>
                <environment>&lt;p&gt;WinXP, Sun JDK 1.5.0_10&lt;/p&gt;</environment>
        <key id="12402548">CXF-1752</key>
            <summary>JavaToWs generates wrong types for arrays and generic types in wrapper classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="bwende">Benjamin Wende</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Aug 2008 08:13:25 +0000</created>
                <updated>Tue, 19 Aug 2008 07:04:33 +0000</updated>
                            <resolved>Mon, 18 Aug 2008 17:41:48 +0000</resolved>
                                    <version>2.1.1</version>
                    <version>2.0.8</version>
                                    <fixVersion>2.0.9</fixVersion>
                    <fixVersion>2.1.3</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12623581" author="bwende" created="Tue, 19 Aug 2008 07:04:33 +0000"  >&lt;p&gt;The fix works for me. Thank you for the quick reaction.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112532</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1adgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>268648</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>