<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:35:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1770] org.apache.cxf.aegis.type.collection.CollectionType createCollection method returns ArrayList object for typeClass java.util.SortedSet</title>
                <link>https://issues.apache.org/jira/browse/CXF-1770</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;In attempting to populate a POJO with the response from a WSDL using Aegis databinding, I am getting the exception...&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.cxf.aegis.DatabindingException: No write method for property &lt;/p&gt;
{http://domain.webmap.gis.doitt.nyc.gov}
&lt;p&gt;fields in class gov.nyc.doitt.gis.webmap.domain.DataStoreRenderer&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.BeanType.writeProperty(BeanType.java:243)&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.BeanType.readObject(BeanType.java:147)&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.ArrayType.readCollection(ArrayType.java:89)&lt;br/&gt;
	at org.apache.cxf.aegis.type.collection.CollectionType.readObject(CollectionType.java:48)&lt;br/&gt;
	at org.apache.cxf.aegis.type.basic.BeanType.readObject(BeanType.java:145)&lt;br/&gt;
	at org.apache.cxf.aegis.AegisXMLStreamDataReader.read(AegisXMLStreamDataReader.java:82)&lt;br/&gt;
	at org.apache.cxf.aegis.databinding.XMLStreamDataReader.read(XMLStreamDataReader.java:47)&lt;/p&gt;

&lt;p&gt;My POJOs looks like:&lt;/p&gt;

&lt;p&gt;public class DataStoreRenderer extends Persistent {&lt;br/&gt;
	private SortedSet&amp;lt;DataStoreRendererField&amp;gt; fields = new TreeSet&amp;lt;DataStoreRendererField&amp;gt;();&lt;br/&gt;
        ...&lt;/p&gt;

&lt;p&gt;	public SortedSet&amp;lt;DataStoreRendererField&amp;gt; getFields() &lt;/p&gt;
{
		return fields;
	}

&lt;p&gt;	public void setFields(SortedSet&amp;lt;DataStoreRendererField&amp;gt; fields) &lt;/p&gt;
{
		this.fields = fields;
	}
&lt;p&gt;        ...&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;public class DataStoreRendererField implements Comparable&amp;lt;DataStoreRendererField&amp;gt; {&lt;br/&gt;
        ...&lt;br/&gt;
	public int compareTo(DataStoreRendererField o) &lt;/p&gt;
{
		...
	}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;A simplied version of the response being bound looks like this...&lt;/p&gt;

&lt;p&gt;&amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;soap:Body&amp;gt;&lt;br/&gt;
        &amp;lt;ns1:getApplicationResponse xmlns:ns1=&quot;http://service.webmap.gis.doitt.nyc.gov/&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;application&amp;gt;&lt;br/&gt;
                &amp;lt;ns2:dataStoreRenderers xmlns:ns2=&quot;http://domain.webmap.gis.doitt.nyc.gov&quot;&amp;gt;&lt;br/&gt;
                    &amp;lt;ns2:DataStoreRenderer&amp;gt;&lt;br/&gt;
                    &amp;lt;ns2:fields&amp;gt;&lt;br/&gt;
                        &amp;lt;ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                            &amp;lt;ns2:id&amp;gt;1&amp;lt;/ns2:id&amp;gt;&lt;br/&gt;
                        &amp;lt;/ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                        &amp;lt;ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                            &amp;lt;ns2:id&amp;gt;2&amp;lt;/ns2:id&amp;gt;&lt;br/&gt;
                        &amp;lt;/ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                        &amp;lt;ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                            &amp;lt;ns2:id&amp;gt;3&amp;lt;/ns2:id&amp;gt;&lt;br/&gt;
                        &amp;lt;/ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                        &amp;lt;ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                            &amp;lt;ns2:id&amp;gt;4&amp;lt;/ns2:id&amp;gt;&lt;br/&gt;
                        &amp;lt;/ns2:DataStoreRendererField&amp;gt;&lt;br/&gt;
                    &amp;lt;/ns2:fields&amp;gt;&lt;br/&gt;
                    &amp;lt;/ns2:DataStoreRenderer&amp;gt;&lt;br/&gt;
                &amp;lt;/ns2:dataStoreRenderers&amp;gt;&lt;br/&gt;
            &amp;lt;/application&amp;gt;&lt;br/&gt;
        &amp;lt;/ns1:getApplicationResponse&amp;gt;&lt;br/&gt;
    &amp;lt;/soap:Body&amp;gt;&lt;br/&gt;
&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;After debugging through the code I found that the exception is thrown because there xml is converted into an ArrayList and then when an appropriate setter is looked for we cannot find any that take ArrayList.  Once I found that out I debugged some more and found that the org.apache.cxf.aegis.type.collection.CollectionType.createCollection() method was the one creating the ArrayList.  The solution I had in mind was simply to add another else if statement (between List and Set) inside this createCollection method that would do the following...&lt;/p&gt;

&lt;p&gt;protected Collection&amp;lt;Object&amp;gt; createCollection() {&lt;br/&gt;
        Collection values = null;&lt;/p&gt;

&lt;p&gt;        if (getTypeClass().isAssignableFrom(List.class)) &lt;/p&gt;
{
            values = new ArrayList();
        } else if (getTypeClass().isAssignableFrom(SortedSet.class)) {
            values = new TreeSet();
        } else if (getTypeClass().isAssignableFrom(Set.class)) {
            values = new HashSet();
        } else if (getTypeClass().isAssignableFrom(Vector.class)) {
            values = new Vector();
        } else if (getTypeClass().isInterface()) {            values = new ArrayList();        }
&lt;p&gt; else {&lt;br/&gt;
            try &lt;/p&gt;
{
                values = (Collection&amp;lt;Object&amp;gt;)getTypeClass().newInstance();
            }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
                throw new DatabindingException(&quot;Could not create map implementation: &quot;
                                               + getTypeClass().getName(), e);
            }
&lt;p&gt;        }&lt;/p&gt;

&lt;p&gt;        return values;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;Although it is possible that not everyone has implemented Comparable on the object contained in a SortedSet, wouldn&apos;t it be better to at least create a TreeSet as the default, rather than an ArrayList?  That way no exception will be thrown and the code won&apos;t fail to complete?&lt;/p&gt;</description>
                <environment>&lt;p&gt;Microsoft Windows XP, Java 1.5.0.14, Tomcat 5.5&lt;/p&gt;</environment>
        <key id="12403274">CXF-1770</key>
            <summary>org.apache.cxf.aegis.type.collection.CollectionType createCollection method returns ArrayList object for typeClass java.util.SortedSet</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bmargulies">Benson Margulies</assignee>
                                    <reporter username="smhaskins">Sarah Haskins</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Aug 2008 18:43:13 +0000</created>
                <updated>Fri, 24 Apr 2009 21:16:59 +0000</updated>
                            <resolved>Fri, 29 Aug 2008 01:33:35 +0000</resolved>
                                    <version>2.1.2</version>
                                    <fixVersion>2.2</fixVersion>
                                    <component>Aegis Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12626802" author="bmargulies" created="Fri, 29 Aug 2008 00:17:00 +0000"  >&lt;p&gt;Doc for SortedSet demands Comparable, so I think you&apos;ve got the right fix. I&apos;ll make it.&lt;/p&gt;</comment>
                            <comment id="12626808" author="smhaskins" created="Fri, 29 Aug 2008 00:38:41 +0000"  >&lt;p&gt;Technically, you can also pass a Comparator to the SortedSet at creation time.  But basic natural ordering support would be a good first step.  Supporting specifications of comparators may be beyond the scope of this issue.&lt;/p&gt;</comment>
                            <comment id="12626820" author="bmargulies" created="Fri, 29 Aug 2008 01:33:35 +0000"  >&lt;p&gt;revision 690067.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112546</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1adef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>268637</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>