<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:53:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4294] Exception Cache ws-security.timestamp.cache.instance already exists or Cache ws-security.nonce.cache.instance already exists</title>
                <link>https://issues.apache.org/jira/browse/CXF-4294</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;We have upgraded to CXF 2.6.0 and services started fine but getting following exceptions when first client calls are coming &lt;/p&gt;

&lt;p&gt;Exception Cache ws-security.timestamp.cache.instance already exists OR &lt;br/&gt;
Cache ws-security.nonce.cache.instance already exists&lt;/p&gt;

&lt;p&gt;Our project has multiple webservice endpoints/services in a single JVM and all of the endpoints may get a client SOAP call at the same time. We have WS Security timestamp, signature and encryption enabled. This exception is coming when all the client calls are coming almost at the same time but if the client calls are sparse over time then everything runs fine. But when the exception occurs that particular client received no data or exception. &lt;/p&gt;

&lt;p&gt;In our analysis, we found that CXF 2.6.0 is trying to add cache instance for nonce and timestamp through net.sf.ehcache.CacheManager: addCache (final Ehcache cache) API call. I am not sure if this cache instance addition happens for all the SOAP calls or once per endpoint but net.sf.ehcache.CacheManager: addCache (final Ehcache cache) has a strict check, if it is already there (may have been created already by another webservice endpoint in the same JVM) it throws an exception.&lt;/p&gt;

&lt;p&gt;It appears that CXF should use net.sf.ehcache.CacheManager: addCacheIfAbsent(final Ehcache cache) instead of net.sf.ehcache.CacheManager: addCache (final Ehcache cache). addCacheIfAbsent(...) does not throw exception if the cache instance is already present.&lt;/p&gt;

&lt;p&gt;Currently we have made following changes to avoid the exceptions&lt;/p&gt;

&lt;p&gt;&amp;lt;jaxws:endpoint id=&quot;....&quot;&amp;gt;&lt;br/&gt;
...&lt;br/&gt;
                &amp;lt;jaxws:properties&amp;gt;&lt;br/&gt;
                                ...            &lt;br/&gt;
                                &amp;lt;entry key=&quot;ws-security.enable.nonce.cache&quot; value=&quot;false&quot; /&amp;gt;&lt;br/&gt;
                                &amp;lt;entry key=&quot;ws-security.enable.timestamp.cache&quot; value=&quot;false&quot; /&amp;gt;&lt;br/&gt;
                &amp;lt;/jaxws:properties&amp;gt;                       &lt;br/&gt;
&amp;lt;/jaxws:endpoint&amp;gt;&lt;/p&gt;

&lt;p&gt;Please let us know, if this is a bug or are there any other solution such that we do not have to disable nonce and timestamp cache of our own.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12554187">CXF-4294</key>
            <summary>Exception Cache ws-security.timestamp.cache.instance already exists or Cache ws-security.nonce.cache.instance already exists</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="dxmanda">Debdayal Mandal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 May 2012 16:50:06 +0000</created>
                <updated>Tue, 5 Jun 2012 13:31:33 +0000</updated>
                            <resolved>Thu, 10 May 2012 13:34:45 +0000</resolved>
                                    <version>2.6</version>
                                    <fixVersion>2.4.8</fixVersion>
                    <fixVersion>2.5.4</fixVersion>
                    <fixVersion>2.6.1</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238415</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0897r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>