<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:02:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5144] JAX-RS Client Proxy-based API connection leak</title>
                <link>https://issues.apache.org/jira/browse/CXF-5144</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;JAX-RS Client Proxy-based API could not reuse the TCP connection, even though with keep-alive. The reason is the InputStream did not be closed when the response body had been handled in ClientProxyImpl.handleResponse(), so do Webclient.handleResponse().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12659034">CXF-5144</key>
            <summary>JAX-RS Client Proxy-based API connection leak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="jms_wu">Jianshao Wu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Jul 2013 07:49:35 +0000</created>
                <updated>Fri, 8 May 2015 09:49:45 +0000</updated>
                            <resolved>Wed, 24 Jul 2013 16:42:00 +0000</resolved>
                                                    <fixVersion>2.6.10</fixVersion>
                    <fixVersion>2.7.7</fixVersion>
                    <fixVersion>3.0.0-milestone1</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13718556" author="sergey_beryozkin" created="Wed, 24 Jul 2013 16:42:00 +0000"  >&lt;p&gt;Closing IS unless Response or InputStream is requested.&lt;/p&gt;</comment>
                            <comment id="13727760" author="sergey_beryozkin" created="Fri, 2 Aug 2013 16:08:13 +0000"  >&lt;p&gt;I&apos;m making auto-closing response stream optional: we don&apos;t know of possible side-effects really. Example, if Reader or JAXP Source or lazy reading Stax-based Document is requested then we have a failure. In fact we can have random failures. Lets make it optional first and then see how realistic it is to make it automatic.&lt;/p&gt;</comment>
                            <comment id="13727761" author="sergey_beryozkin" created="Fri, 2 Aug 2013 16:08:49 +0000"  >&lt;p&gt;Set this property: &quot;response.stream.auto.close&quot; to true&lt;/p&gt;</comment>
                            <comment id="13795046" author="jms_wu" created="Tue, 15 Oct 2013 10:21:44 +0000"  >&lt;p&gt;the same as org.apache.cxf.jaxrs.impl.ResponseImpl.readEntity() method, the input stream should be closed after the entity read from it, in most of the cases, especially proxy based client, it&apos;s appropriate, so, maybe the property default value could be true.&lt;/p&gt;</comment>
                            <comment id="13795073" author="sergey_beryozkin" created="Tue, 15 Oct 2013 11:02:03 +0000"  >&lt;p&gt;The requirement to auto-close InputStream in Response.readEntity is now an accepted JAX-RS 2.0 spec issue, it breaks working with Source classes, lazy loading DOMs, etc, so we really can&apos;t make it a default value&lt;/p&gt;</comment>
                            <comment id="13866709" author="sambitd" created="Thu, 9 Jan 2014 15:33:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In case proxy based client, it indeed is required to make it close. Do you suggest to make it auto close. Where do we set this property in clientConfig.getRequestContext.put(&quot;response.stream.auto.close&quot;,true);&lt;/p&gt;
</comment>
                            <comment id="13869107" author="sergey_beryozkin" created="Sun, 12 Jan 2014 18:27:52 +0000"  >&lt;p&gt;Set it as a property on JAXRSClientFactoryBean, or on the created proxy, by doing WebClient.getConfig(proxy) first, or in jaxrs:properties if using jaxrs:client&lt;/p&gt;

&lt;p&gt;Sergey&lt;/p&gt;</comment>
                            <comment id="14334426" author="ksnath" created="Tue, 24 Feb 2015 05:29:30 +0000"  >&lt;p&gt;I migrated my application from CXF 2.7.7 to CXF 3.0.4. I have set the Bus property &quot;response.stream.auto.close&quot; to &quot;true&quot;. Then, I started getting the below error. The reason being the &quot;entity&quot; is becoming &quot;null&quot;, as part of &quot;ResponseImpl.autoClose()&quot; method. &lt;/p&gt;

&lt;p&gt;I don&apos;t get the below exception, if the bus property &quot;response.stream.auto.close&quot; is set to &quot;false&quot;. However, if the bus property &quot;response.stream.auto.close&quot; is set to &quot;false&quot;, the connection may not be reusable as the input stream is not closed.&lt;/p&gt;

&lt;p&gt;Could you please suggest, how to proceed.&lt;/p&gt;

&lt;p&gt;=================================================================================&lt;br/&gt;
javax.ws.rs.ProcessingException: java.lang.IllegalStateException: Entity is not available&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.handleResponse(WebClient.java:1195)&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.doResponse(WebClient.java:1159)&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.doChainedInvocation(WebClient.java:1095)&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.doInvoke(WebClient.java:893)&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.doInvoke(WebClient.java:864)&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.invoke(WebClient.java:427)&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.get(WebClient.java:610)&lt;br/&gt;
Caused by: java.lang.IllegalStateException: Entity is not available&lt;br/&gt;
	at org.apache.cxf.jaxrs.impl.ResponseImpl.checkEntityIsClosed(ResponseImpl.java:475)&lt;br/&gt;
	at org.apache.cxf.jaxrs.impl.ResponseImpl.getActualEntity(ResponseImpl.java:137)&lt;br/&gt;
	at org.apache.cxf.jaxrs.impl.ResponseImpl.getEntity(ResponseImpl.java:142)&lt;br/&gt;
	at org.apache.cxf.jaxrs.utils.JAXRSUtils.fromResponse(JAXRSUtils.java:1716)&lt;br/&gt;
	at org.apache.cxf.jaxrs.client.WebClient.handleResponse(WebClient.java:1185)&lt;br/&gt;
	... 31 more&lt;/p&gt;</comment>
                            <comment id="14334749" author="sergey_beryozkin" created="Tue, 24 Feb 2015 10:36:26 +0000"  >&lt;p&gt;Can you please repost the question the the users list and also provide the client code example &lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="14533569" author="zhengxb" created="Thu, 7 May 2015 23:07:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sergey_beryozkin&quot; class=&quot;user-hover&quot; rel=&quot;sergey_beryozkin&quot;&gt;sergey_beryozkin&lt;/a&gt; I am using CXF 2.7.5 and faces this issue. I tried migrating to 2.7.7 and add &apos;response.stream.auto.close=True&apos; to RequestContext, which works for me. &lt;/p&gt;

&lt;p&gt;But I see that &lt;a href=&quot;https://java.net/jira/browse/JAX_RS_SPEC-424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://java.net/jira/browse/JAX_RS_SPEC-424&lt;/a&gt; is still open, and it seems that we might still dis-allow this feature in future. So would like to know if we have any decision made on this?&lt;/p&gt;</comment>
                            <comment id="14534231" author="sergey_beryozkin" created="Fri, 8 May 2015 09:49:45 +0000"  >&lt;p&gt;I&apos;d like to encourage you to comment on JAX_RS_SPEC-424.  We can not auto-close by default as I know that we have CXF clients reading DOM documents with the lazy loading approach, so auto-closing by default is just not an option.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 28 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1micn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>339547</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>