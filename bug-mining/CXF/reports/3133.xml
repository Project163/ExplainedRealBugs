<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:26:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7496] Parsing Bug in org.apache.cxf.jaxrs.json.basic.JsonMapObjectReaderWriter: in-string &quot;{&quot;</title>
                <link>https://issues.apache.org/jira/browse/CXF-7496</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;We have found incorrect parsing of &quot;{&quot; within JSON strings. It seems like the parser searches for &quot;&lt;/p&gt;
{&quot; and &quot;}
&lt;p&gt;&quot; regardless of string boundary.&lt;/p&gt;

&lt;p&gt;A reproduction program is attached, using latest 3.1.12 version.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;h2&gt;&lt;a name=&quot;REPRODUCTION&quot;&gt;&lt;/a&gt;REPRODUCTION&lt;/h2&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.cxf.jaxrs.json.basic.JsonMapObjectReaderWriter;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JsonMapReaderNotWorking {
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; args[]) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
	{
		JsonMapObjectReaderWriter jsonMapObjectReaderWriter = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JsonMapObjectReaderWriter();
		&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = &lt;span class=&quot;code-quote&quot;&gt;&quot;{\&quot;&lt;/span&gt;x\&lt;span class=&quot;code-quote&quot;&gt;&quot;:{\&quot;&lt;/span&gt;y\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;{\&lt;span class=&quot;code-quote&quot;&gt;&quot;}}&quot;&lt;/span&gt;;
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(s);
		jsonMapObjectReaderWriter.fromJson(s);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;h2&gt;&lt;a name=&quot;RESULT&quot;&gt;&lt;/a&gt;RESULT&lt;/h2&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	{&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;y&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt;}}
	Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.lang.StringIndexOutOfBoundsException: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; index out of range: -6
		at java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.substring(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:1967)
		at org.apache.cxf.jaxrs.json.basic.JsonMapObjectReaderWriter.readJsonObjectAsSettable(JsonMapObjectReaderWriter.java:189)
		at org.apache.cxf.jaxrs.json.basic.JsonMapObjectReaderWriter.fromJson(JsonMapObjectReaderWriter.java:162)
		at JsonMapReaderNotWorking.main(JsonMapReaderNotWorking.java:13)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.8.0_25&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0_25-b18)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.25-b02, mixed mode)&lt;/p&gt;</environment>
        <key id="13099658">CXF-7496</key>
            <summary>Parsing Bug in org.apache.cxf.jaxrs.json.basic.JsonMapObjectReaderWriter: in-string &quot;{&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="alonbl">Alon Bar-Lev</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Sep 2017 17:02:41 +0000</created>
                <updated>Tue, 28 Nov 2017 10:42:08 +0000</updated>
                            <resolved>Tue, 5 Sep 2017 15:35:28 +0000</resolved>
                                    <version>3.1.7</version>
                    <version>3.1.12</version>
                                    <fixVersion>3.1.13</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16152949" author="sergey_beryozkin" created="Mon, 4 Sep 2017 21:22:46 +0000"  >&lt;p&gt;I might need to introduce Jackson internally, as an optional alternative to the &apos;home-grown&apos; simple parser; for now I&apos;ll have a look if a quick fix is possible&lt;/p&gt;</comment>
                            <comment id="16153107" author="alonbl" created="Tue, 5 Sep 2017 04:55:31 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16153486" author="sergey_beryozkin" created="Tue, 5 Sep 2017 11:12:32 +0000"  >&lt;p&gt;I have a fix for skipping both left and right curly brackets if they are inside strings, but I can&apos;t merge it into 3.2.0-SNAPSHOT which is due very soon, too sensitive...&lt;/p&gt;</comment>
                            <comment id="16153551" author="alonbl" created="Tue, 5 Sep 2017 12:20:45 +0000"  >&lt;p&gt;Thanks for the prompt action.&lt;/p&gt;

&lt;p&gt;I wounder, what do you recommend? We are failing JWT validations because of this bug... What can we do in the mean time? This issue is severe, enough for us to consider which to a different library.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16153599" author="sergey_beryozkin" created="Tue, 5 Sep 2017 12:57:23 +0000"  >&lt;p&gt;Do the claim values contain escaped double quotes ?&lt;/p&gt;</comment>
                            <comment id="16153771" author="alonbl" created="Tue, 5 Sep 2017 14:50:38 +0000"  >&lt;p&gt;I do not understand the question... the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{&lt;span class=&quot;code-quote&quot;&gt;&quot;x&quot;&lt;/span&gt;:{&lt;span class=&quot;code-quote&quot;&gt;&quot;y&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;{&quot;&lt;/span&gt;}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Has a plain string and by mistake has &apos;{&apos; character within... escape should not be done in this case.&lt;/p&gt;</comment>
                            <comment id="16153775" author="sergey_beryozkin" created="Tue, 5 Sep 2017 14:54:39 +0000"  >&lt;p&gt;Yes, curly brackets do not need to be escaped, the fix I did needed a bit more work though to handle escaped double quotes. Tests look OK, will try 3.1.13-SNAPSHOT with Fediz, will commit if it stays green &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jmj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>