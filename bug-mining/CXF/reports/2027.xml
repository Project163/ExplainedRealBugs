<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:05:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5373] Issue resolving AsynchResponse</title>
                <link>https://issues.apache.org/jira/browse/CXF-5373</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Spring config&lt;/p&gt;

&lt;p&gt; &amp;lt;task:executor id=&quot;servicePool&quot; pool-size=&quot;1&quot; queue-capacity=&quot;${aw.concurrentUsers.download:5000}&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;JAX-RS server config&lt;/p&gt;

&lt;p&gt;   &amp;lt;jaxrs:server id=&quot;restContainer&quot;  address=&quot;/&quot; &amp;gt;&lt;br/&gt;
         &amp;lt;jaxrs:executor&amp;gt;&lt;br/&gt;
             &amp;lt;ref bean=&quot;servicePool&quot;/&amp;gt;&lt;br/&gt;
         &amp;lt;/jaxrs:executor&amp;gt;&lt;br/&gt;
        &amp;lt;jaxrs:serviceBeans&amp;gt;&lt;br/&gt;
            &amp;lt;ref bean=&quot;tokenService&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/jaxrs:serviceBeans&amp;gt;&lt;br/&gt;
    &amp;lt;/jaxrs:server&amp;gt;&lt;/p&gt;

&lt;p&gt;Java End-Point&lt;/p&gt;

&lt;p&gt;    @POST&lt;br/&gt;
    @Path(&quot;/createToken/&lt;/p&gt;
{fileName}&quot;)&lt;br/&gt;
    @Produces(MediaType.APPLICATION_FORM_URLENCODED)&lt;br/&gt;
    //&lt;a href=&quot;http://localhost:8000/contentGateway/integrationServices/tokenService/createToken/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8000/contentGateway/integrationServices/tokenService/createToken/&lt;/a&gt;{fileName}
&lt;p&gt;    public void createToken(@PathParam(&quot;fileName&quot;)final String fileName, final AsyncResponse asyncResponse)&lt;/p&gt;
{
       validateInput(fileName);
       final String randomUUID = UUID.randomUUID().toString();
       this.tokenRepository.storeToken(randomUUID.toString(),fileName);
        asyncResponse.resume(randomUUID); 
       
    }

&lt;p&gt;JAXRSUtils.java : 766- 767&lt;/p&gt;

&lt;p&gt;         if (parameterClass == AsyncResponse.class) &lt;/p&gt;
{
                return new AsyncResponseImpl(message);
            }

&lt;p&gt;AsyncResponseImpl 53 - 59&lt;/p&gt;

&lt;p&gt;    public AsyncResponseImpl(Message inMessage) &lt;/p&gt;
{
        inMessage.put(AsyncResponse.class, this);
        inMessage.getExchange().put(ContinuationCallback.class, this);
        this.inMessage = inMessage;
        
        initContinuation();
    }

&lt;p&gt;Line: 55&lt;/p&gt;

&lt;p&gt;inMessage.getExchange().put(ContinuationCallback.class, this);&lt;/p&gt;

&lt;p&gt;JAXRSInvoker.java : Line 86&lt;/p&gt;

&lt;p&gt; AsyncResponse asyncResp = exchange.get(AsyncResponse.class);&lt;/p&gt;

&lt;p&gt;Will always yield null, Since when setting the key will be for ContinuationCallback and when retrieving it will be for AsyncResponse&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12677132">CXF-5373</key>
            <summary>Issue resolving AsynchResponse</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="jonnals">Sridhar Jonnalagadda</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Nov 2013 19:22:50 +0000</created>
                <updated>Tue, 26 Nov 2013 17:40:10 +0000</updated>
                            <resolved>Mon, 18 Nov 2013 22:33:22 +0000</resolved>
                                    <version>2.7.7</version>
                                    <fixVersion>3.0.0-milestone1</fixVersion>
                    <fixVersion>2.7.8</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13812424" author="sergey_beryozkin" created="Sun, 3 Nov 2013 17:33:33 +0000"  >&lt;p&gt;Have you set &quot;&amp;lt;async-supported&amp;gt;true&amp;lt;/async-supported&amp;gt;&quot; in web.xml ? &lt;/p&gt;
</comment>
                            <comment id="13812858" author="jonnals" created="Mon, 4 Nov 2013 14:15:55 +0000"  >&lt;p&gt;Yes. Here is the config from web.xml&lt;/p&gt;

&lt;p&gt;    &amp;lt;servlet&amp;gt;&lt;br/&gt;
        &amp;lt;servlet-name&amp;gt;CXFServlet&amp;lt;/servlet-name&amp;gt;&lt;br/&gt;
        &amp;lt;servlet-class&amp;gt;org.apache.cxf.transport.servlet.CXFServlet&amp;lt;/servlet-class&amp;gt;&lt;br/&gt;
        &amp;lt;load-on-startup&amp;gt;1&amp;lt;/load-on-startup&amp;gt;&lt;br/&gt;
        &amp;lt;async-supported&amp;gt;true&amp;lt;/async-supported&amp;gt;&lt;br/&gt;
    &amp;lt;/servlet&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13812923" author="sergey_beryozkin" created="Mon, 4 Nov 2013 15:47:42 +0000"  >&lt;p&gt;Hmm... Actually, what exactly the issue is ?&lt;/p&gt;

&lt;p&gt;&quot;AsyncResponse asyncResp = exchange.get(AsyncResponse.class);&quot; will be null on the initial call, the exchange is initialized after the initial call returns, and then on the suspended thread returning &quot;exchange.get(AsyncResponse.class)&quot; is expected to return a saved AsyncResponse. &lt;br/&gt;
Are you saying it is &apos;null&apos; after your createToken() method returns and when the execution is resumed later ?&lt;/p&gt;

&lt;p&gt;If yes: please attach a test project, we have the tests running against Jetty, I also tried Tomcat&lt;/p&gt;
</comment>
                            <comment id="13813963" author="jonnals" created="Tue, 5 Nov 2013 15:02:33 +0000"  >&lt;p&gt;&lt;a href=&quot;http://localhost:8080//sampleCXF/tokens/xyz?bytes=12345&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080//sampleCXF/tokens/xyz?bytes=12345&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13813964" author="jonnals" created="Tue, 5 Nov 2013 15:04:08 +0000"  >&lt;p&gt;Attached sample project. It has Spring config and a POST REST API to be invoked asynchronously.  Please let me know, if I&apos;m missing something in my config.&lt;/p&gt;</comment>
                            <comment id="13813967" author="sergey_beryozkin" created="Tue, 5 Nov 2013 15:09:52 +0000"  >&lt;p&gt;Thanks. Interesting, so you are using a custom executor too. I wonder if it interferes somehow with the async code. I&apos;ll investigate, cheers&lt;/p&gt;

&lt;p&gt;Sergey&lt;/p&gt;</comment>
                            <comment id="13821372" author="sergey_beryozkin" created="Wed, 13 Nov 2013 14:24:28 +0000"  >&lt;p&gt;The fix is on the trunk, committing to CXF 2.7.x a bit later,&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/r1541532&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1541532&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Dan, does it look OK to you ? &lt;/p&gt;

&lt;p&gt;Thanks, Sergey&lt;/p&gt;</comment>
                            <comment id="13825346" author="sergey_beryozkin" created="Mon, 18 Nov 2013 14:23:50 +0000"  >&lt;p&gt;All the fixes are on the trunk, we need to decide if it can go to 2.7.x as the changes may be a bit sensitive.&lt;br/&gt;
Sridhar, I guess you can avoid introducing another thread-pool into the flow when dealing with the AsyncResponses and manage the container level pools instead, this still has to work though, the question is whether we can merge it back to 2.7.x or not&lt;/p&gt;

&lt;p&gt;Sergey&lt;/p&gt;</comment>
                            <comment id="13825864" author="sergey_beryozkin" created="Mon, 18 Nov 2013 22:33:22 +0000"  >&lt;p&gt;The initial workaround fix has been merged to 2.7.x&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12612190" name="sampleCXF.zip" size="4565" author="jonnals" created="Tue, 5 Nov 2013 15:02:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pgjz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356796</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>