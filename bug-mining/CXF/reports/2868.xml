<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:21:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7039] JAX-RS Security SAML web SSO consumer service can not validate SAML response behind reverse proxy</title>
                <link>https://issues.apache.org/jira/browse/CXF-7039</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;During the SAML web SSO processing, the RequestAssertionConsumerService validates the request with the org.apache.cxf.rs.security.saml.sso.SAMLSSOResponseValidator using a wrong assertionConsumerURL.&lt;/p&gt;

&lt;p&gt;The SAML request (org.opensaml.saml2.core.AuthnRequest) is configured with the serviceURL taken as the org.apache.cxf.rs.security.saml.sso.AbstractServiceProviderFilter.assertionConsumerServiceAddress property, however the org.apache.cxf.rs.security.saml.sso.SAMLSSOResponseValidator is bootstrapped with the following consumer URL:&lt;/p&gt;

&lt;p&gt;ssoResponseValidator.setAssertionConsumerURL(messageContext.getUriInfo().getAbsolutePath().toString());&lt;/p&gt;

&lt;p&gt;This particularly makes a problem when serving the application behind a reverse proxy since the absolutePath taken from messageVontext&apos;s uriInfo is different than the configured one.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JRE 1.8.0_101-b13&lt;/p&gt;</environment>
        <key id="13002702">CXF-7039</key>
            <summary>JAX-RS Security SAML web SSO consumer service can not validate SAML response behind reverse proxy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="sabomichal">Michal Sabo</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Sep 2016 10:34:01 +0000</created>
                <updated>Mon, 28 Nov 2016 22:19:54 +0000</updated>
                            <resolved>Tue, 6 Sep 2016 10:15:31 +0000</resolved>
                                    <version>3.0.9</version>
                                    <fixVersion>3.1.8</fixVersion>
                    <fixVersion>3.0.11</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15464717" author="sergey_beryozkin" created="Mon, 5 Sep 2016 10:42:30 +0000"  >&lt;p&gt;Have you set a property mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-5424&quot; title=&quot;JAX-RS Security Code can not validate signed SAML2 bearer assertions without KeyInfo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-5424&quot;&gt;&lt;del&gt;CXF-5424&lt;/del&gt;&lt;/a&gt; to false ?&lt;/p&gt;</comment>
                            <comment id="15464724" author="sabomichal" created="Mon, 5 Sep 2016 10:48:40 +0000"  >&lt;p&gt;Sorry, I was just cloning a random issue to set the issue details correctly.&lt;/p&gt;</comment>
                            <comment id="15467027" author="coheigea" created="Tue, 6 Sep 2016 10:03:41 +0000"  >&lt;p&gt;I&apos;ve added a &quot;assertionConsumerServiceAddress&quot; property that you can set on the RequestAssertionConsumerService as per the AbstractServiceProviderFilter. If it isn&apos;t specified, it falls back to use &quot;messageContext.getUriInfo().getAbsolutePath().toString()&quot; as the old code does. Does this suit your needs?&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="15467171" author="sabomichal" created="Tue, 6 Sep 2016 11:20:27 +0000"  >&lt;p&gt;Thank you, that would do it.&lt;/p&gt;</comment>
                            <comment id="15703316" author="philco" created="Mon, 28 Nov 2016 22:19:33 +0000"  >&lt;p&gt;We encountered this issue during deployment of our application and found this fix. In our case the addresses differ in that the protocol changes depending on if the reverse proxy is between insecure and secure zones (http vs https respectively).&lt;/p&gt;

&lt;p&gt;An outstanding question regarding this fix is how it fundamentally changes the validation which occurs when the pre-configured value is used versus the message&apos;s actual destination.&lt;/p&gt;

&lt;p&gt;Can you provide an explanation addressing how both approaches are compliant with the SAML protocol?&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i338u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>