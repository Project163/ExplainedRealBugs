<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:29:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7518] Loggers logs request twice in case of Fault</title>
                <link>https://issues.apache.org/jira/browse/CXF-7518</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I upgraded CFX libraries from 3.1.11 to 3.2.0.&lt;br/&gt;
Since then requests raising faults are logged twice.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;CXFNonSpringExampleServlet.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
   @Override
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void loadBus(ServletConfig servletConfig) {
      &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.loadBus(servletConfig);
      BusFactory.setDefaultBus(getBus());

      createFactoryBean();
   }

   &lt;span class=&quot;code-comment&quot;&gt;/* Creazione istanza servizio */&lt;/span&gt;
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void createFactoryBean() {
      JaxWsServerFactoryBean serviceFactory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JaxWsServerFactoryBean();

      &lt;span class=&quot;code-comment&quot;&gt;/* Service details */&lt;/span&gt;
      serviceFactory.setAddress(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;);
      serviceFactory.setWsdlLocation(&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;);
      serviceFactory.setServiceBean(...);
      serviceFactory.setServiceClass(...);
      serviceFactory.setServiceName(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; QName(&lt;span class=&quot;code-quote&quot;&gt;&quot;urn:...&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;));
      serviceFactory.setEndpointName(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; QName(&lt;span class=&quot;code-quote&quot;&gt;&quot;urn:...&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;));

      &lt;span class=&quot;code-comment&quot;&gt;/* Input inteceptors */&lt;/span&gt;
      serviceFactory.getInInterceptors().add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoggingInInterceptor());
      serviceFactory.getInFaultInterceptors().add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoggingInInterceptor());

      &lt;span class=&quot;code-comment&quot;&gt;/* Output inteceptors */&lt;/span&gt;
      serviceFactory.getOutInterceptors().add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoggingOutInterceptor());
      serviceFactory.getOutFaultInterceptors().add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; LoggingOutInterceptor());

      server = serviceFactory.create();
 }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Requests that do not raise faults are logged only once (as well as their responses): &lt;em&gt;one&lt;/em&gt; REQ_IN INFO  -&amp;gt; REQ_IN and &lt;em&gt;one&lt;/em&gt; RESP_OUT INFO  -&amp;gt; RESP_OUT&lt;/p&gt;

&lt;p&gt;Requests that do raise faults are logged twice (unlike their responses, logged only once): &lt;em&gt;&lt;b&gt;&lt;font color=&quot;red&quot;&gt;two&lt;/font&gt;&lt;/b&gt;&lt;/em&gt; REQ_IN INFO  -&amp;gt; REQ_IN and &lt;em&gt;one&lt;/em&gt; FAULT_OUT INFO  -&amp;gt; FAULT_OUT&lt;/p&gt;
</description>
                <environment>&lt;p&gt;JDK 1.8.0&lt;br/&gt;
Apache Tomcat 8.5&lt;br/&gt;
CXF 3.2.0&lt;br/&gt;
Implementation logging: org.apache.cxf.common.logging.Slf4jLogger&lt;/p&gt;</environment>
        <key id="13105073">CXF-7518</key>
            <summary>Loggers logs request twice in case of Fault</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="pperliti">Paolo Perliti</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Sep 2017 12:55:49 +0000</created>
                <updated>Wed, 7 Feb 2018 14:51:59 +0000</updated>
                            <resolved>Tue, 21 Nov 2017 16:07:57 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.2.2</fixVersion>
                    <fixVersion>3.1.15</fixVersion>
                                    <component>logging</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16260440" author="sergey.rymsha" created="Tue, 21 Nov 2017 08:56:23 +0000"  >&lt;p&gt;3.2.1 still not fixed&lt;/p&gt;</comment>
                            <comment id="16260959" author="sergey_beryozkin" created="Tue, 21 Nov 2017 16:07:45 +0000"  >&lt;p&gt;Dan, Christian, I&apos;ve removed the internal in interceptor which logs the in message again in case of the faults, please double check&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3kjs7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>