<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:39:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2520] wrong handling in setNamespaceMap for AbstractDataBinding</title>
                <link>https://issues.apache.org/jira/browse/CXF-2520</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The Class org.apache.cxf.databinding.AbstractDataBinding has a Bug in the checking of duplicate NamespacePrefixes during the setting of the namespaceMap.&lt;/p&gt;

&lt;p&gt;Extraction of class:&lt;br/&gt;
    public void setNamespaceMap(Map&amp;lt;String, String&amp;gt; namespaceMap) {&lt;br/&gt;
        // make some checks. This is a map from namespace to prefix, but we want unique prefixes.&lt;br/&gt;
        if (namespaceMap != null) {&lt;br/&gt;
            Set&amp;lt;String&amp;gt; prefixesSoFar = new HashSet&amp;lt;String&amp;gt;();&lt;br/&gt;
            for (Map.Entry&amp;lt;String, String&amp;gt; mapping : namespaceMap.entrySet()) {&lt;br/&gt;
                if (prefixesSoFar.contains(mapping.getValue())) &lt;/p&gt;
{
                    throw new IllegalArgumentException(&quot;Duplicate prefix &quot; + mapping.getValue());
                }
&lt;p&gt;            }&lt;br/&gt;
        }&lt;br/&gt;
        this.namespaceMap = namespaceMap;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;There is no adding method for prefixesSoFar-Set.&lt;/p&gt;

&lt;p&gt;My solving idea is:&lt;br/&gt;
  /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param namespaceMap The namespaceMap to set.&lt;br/&gt;
   */&lt;br/&gt;
  public void setNamespaceMap(Map&amp;lt;String, String&amp;gt; namespaceMap) {&lt;br/&gt;
    // make some checks. This is a map from namespace to prefix, but we want unique prefixes.&lt;br/&gt;
    if ((namespaceMap == null) || namespaceMap.isEmpty()) 
{
      throw new IllegalArgumentException(&quot;adding a null or empty namespaceMap is not allowed&quot;);
    }
&lt;p&gt; else {&lt;br/&gt;
      Set&amp;lt;String&amp;gt; prefixesSoFar = new HashSet&amp;lt;String&amp;gt;();&lt;br/&gt;
      for (Map.Entry&amp;lt;String, String&amp;gt; mapping : namespaceMap.entrySet()) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {        if (prefixesSoFar.contains(mapping.getValue())) {
          throw new IllegalArgumentException(&quot;Duplicate prefix &quot; + mapping.getValue());
        }        prefixesSoFar.add(mapping.getValue());      }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;      mapper = new NamespaceMapper(namespaceMap);&lt;br/&gt;
    }&lt;br/&gt;
  }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This solution is more strict, because it does not allow to add a null or an empty Map.&lt;/p&gt;

&lt;p&gt;The same Bug goes for checkNameSpaceMap. &lt;br/&gt;
The both method are smelling, because it is copy paste. It can be solved in a smater way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12439847">CXF-2520</key>
            <summary>wrong handling in setNamespaceMap for AbstractDataBinding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alos">Hasan Hosgel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Nov 2009 12:48:18 +0000</created>
                <updated>Fri, 4 Dec 2009 22:34:11 +0000</updated>
                            <resolved>Mon, 9 Nov 2009 01:47:18 +0000</resolved>
                                    <version>2.2.4</version>
                                    <fixVersion>2.2.5</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12773469" author="bmargulies" created="Wed, 4 Nov 2009 12:59:52 +0000"  >&lt;p&gt;Would you be willing to post a formal patch with a cleanup?&lt;/p&gt;</comment>
                            <comment id="12774843" author="bmargulies" created="Mon, 9 Nov 2009 01:47:18 +0000"  >&lt;p&gt;I did this in r833963. I did not reject null, rejecting null was never intended.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>113932</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sy2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>166997</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>