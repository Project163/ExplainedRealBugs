<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:14:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6228] Using XSLTFeature with large messages creates unremovable temporary files</title>
                <link>https://issues.apache.org/jira/browse/CXF-6228</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Using the XSLT transformation feature causes the outgoing message to use a CachedOutputStream object. If the size of the message is above the configured threshold, a temporary file will be created to store the message on the disk; however, this file is not deleted after the message is sent.&lt;/p&gt;

&lt;p&gt;Based on info available on similar problems encountered with CachedOutputStream and attachments, I tried using an interceptor in the SETUP_ENDING phase to close the stream manually - this, however, did not work because even after closing the stream, the &quot;streamList&quot; variable was not empty, which resulted in the closing logic skipping file deletion in the &quot;maybeDeleteTempFile&quot; method. Attempts to delete the file directly also fail for obvious reasons.&lt;/p&gt;

&lt;p&gt;Some (sometimes all, not sure what makes the difference) of the temporary files are removed during a clean server shutdown, but since this is a rare event in production environments, it does not really solve the problem. (Actually, the issue was discovered when the temp files filled the disk completely on a production server.)&lt;br/&gt;
The only viable workaround I found so far was to set the CachedOutputStream threshold high enough to avoid caching the data to disk altogether.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12771032">CXF-6228</key>
            <summary>Using XSLTFeature with large messages creates unremovable temporary files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="pip25">Papp Istv&#225;n P&#233;ter</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Jan 2015 14:40:16 +0000</created>
                <updated>Mon, 16 Feb 2015 16:08:55 +0000</updated>
                            <resolved>Wed, 4 Feb 2015 13:28:42 +0000</resolved>
                                    <version>3.0.3</version>
                                    <fixVersion>3.0.4</fixVersion>
                    <fixVersion>2.7.15</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14298489" author="ay" created="Fri, 30 Jan 2015 10:46:35 +0000"  >&lt;p&gt;If a file doesn&apos;t get deleted, that means someone is holding the stream (which you have also found out in observing the non-empty stramList). Can you reproduce this problem is a small example or you get it only sporadically? If you can reproduce this problem by setting the threshhold to a very small value, that will help in finding the cause.&lt;/p&gt;</comment>
                            <comment id="14298512" author="pip25" created="Fri, 30 Jan 2015 11:24:57 +0000"  >&lt;p&gt;Small test project that can reproduce the issue&lt;/p&gt;</comment>
                            <comment id="14298514" author="pip25" created="Fri, 30 Jan 2015 11:29:34 +0000"  >&lt;p&gt;The bug is consistently reproducible, it appears every time the outgoing message is over the  CachedOutputStream threshold. I&apos;ve attached a small Maven/Eclipse test project which uses the same dependencies (Spring 3.2.8) as our main project, with the threshold lowered to the absolute minimum; if you call the &quot;returnABigString&quot; method, you will notice that two files are created in the temporary folder. These files remain until server shutdown.&lt;br/&gt;
(The WSDL of the service, if using the default Tomcat configuration, is available at: &lt;a href=&quot;http://localhost:8080/bug6228reproduction/webservices/b6228Service?wsdl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/bug6228reproduction/webservices/b6228Service?wsdl&lt;/a&gt; )&lt;/p&gt;</comment>
                            <comment id="14301232" author="ay" created="Mon, 2 Feb 2015 12:54:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pip25&quot; class=&quot;user-hover&quot; rel=&quot;pip25&quot;&gt;pip25&lt;/a&gt;&lt;br/&gt;
thanks for the test. The problem is reproducible.&lt;br/&gt;
I&apos;ll look into it.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="14301238" author="pip25" created="Mon, 2 Feb 2015 13:02:01 +0000"  >&lt;p&gt;Okay, thanks for your help in advance.&lt;/p&gt;</comment>
                            <comment id="14301997" author="ay" created="Mon, 2 Feb 2015 21:53:49 +0000"  >&lt;p&gt;@Papp&lt;br/&gt;
The patch has been submitted into master, 3.0.x, and 2.7.x branches. The latest 3.0.4-SNAPSHOT version should not have this issue. If you could verify it, that would be appreciated.&lt;br/&gt;
thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="14303234" author="pip25" created="Tue, 3 Feb 2015 13:17:43 +0000"  >&lt;p&gt;Yes, I can confirm that using the new snapshot version, the temporary files created during the call are deleted immediately afterwards. No custom code or interceptor is necessary. Thank you very much for your assistance. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14305071" author="pip25" created="Wed, 4 Feb 2015 13:28:42 +0000"  >&lt;p&gt;I&apos;m not sure if I should be the one doing this, but since the fix has already been committed I guess I&apos;ll resolve the issue.&lt;/p&gt;</comment>
                            <comment id="14305085" author="ay" created="Wed, 4 Feb 2015 13:58:27 +0000"  >&lt;p&gt;Thank you &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12695508" name="bug6228reproduction.zip" size="9019" author="pip25" created="Fri, 30 Jan 2015 11:24:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 41 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24yi7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>