<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:47:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3472] Cannot override HTTPConduit&apos;s handleResponse() method</title>
                <link>https://issues.apache.org/jira/browse/CXF-3472</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;  Current, all response message processing of HTTPConduit is in the class WrappedOutputStream, e.g. handleResponse(), and handleResponseInternal() method, so we cannot extend HTTPConduit to override both method if we want to add more functions during processing response. because the class WrappedOutputStream need some input parameter and the its sub-class cannot get these private properties.&lt;br/&gt;
  My use case is: I have my customized HTTPConduit which needs to override handleResponse() method to catch its instead of cxf&apos;s default logic.&lt;/p&gt;

&lt;p&gt;  Can cxf move both meothd from WrappedOutputStream class to HTTPConduit so that we can override them? thanks.&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</description>
                <environment></environment>
        <key id="12505157">CXF-3472</key>
            <summary>Cannot override HTTPConduit&apos;s handleResponse() method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="veaven">David Liu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Apr 2011 06:19:43 +0000</created>
                <updated>Mon, 8 Aug 2011 14:43:50 +0000</updated>
                            <resolved>Thu, 12 May 2011 08:38:29 +0000</resolved>
                                    <version>2.2</version>
                    <version>2.4</version>
                                    <fixVersion>2.4.1</fixVersion>
                    <fixVersion>2.3.5</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13025598" author="veaven" created="Wed, 27 Apr 2011 04:18:14 +0000"  >&lt;p&gt;I just check cxf 2.4, it is a same issue.&lt;/p&gt;</comment>
                            <comment id="13029770" author="veaven" created="Fri, 6 May 2011 06:11:40 +0000"  >&lt;p&gt;Could someone please take a look at this jira? We want to override handleResponse(), and handleResponseInternal() method to extend HttpConduit, thanks.&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="13030655" author="njiang" created="Mon, 9 May 2011 09:00:17 +0000"  >&lt;p&gt;Hi David,&lt;/p&gt;

&lt;p&gt;I just checked the HttpConduit code in the trunk and 2.3.x branch, the WrappedOutputStream and it&apos;s members are all protected.&lt;br/&gt;
You should be able to override the handleResponse() and handleResponseInternal() method in the sub class.&lt;br/&gt;
And you can set your customerized WrappedOutputStream by override the HTTPConduit.prepare(Message) method.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13031516" author="veaven" created="Wed, 11 May 2011 02:32:16 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;  Yup, this is the problem. I can extend both HttpConduit and its WrappedOutputStream class, and also I can override the handleResponse() and handleResponseInternal() method in the sub class.&lt;br/&gt;
  However, the problem is that I cannot access WrappedOutputStream&apos;s protected field to construct my sub class (java does not allow it). please see my code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyHTTPConduit &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; HTTPConduit {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; MyHTTPConduit(Bus b, EndpointInfo ei) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(b, ei);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void prepare(Message message) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.prepare(message);

        WrappedOutputStream wos = (WrappedOutputStream) message.getContent(OutputStream.class);
        MyWrappedOutputStream my = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyWrappedOutputStream(wos);&lt;span class=&quot;code-comment&quot;&gt;//compile error
&lt;/span&gt;        message.put(OutputStream.class, my);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyWrappedOutputStream &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; WrappedOutputStream {

        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; MyWrappedOutputStream(WrappedOutputStream wos) {
            &lt;span class=&quot;code-comment&quot;&gt;//Message m = wos.outMessage;// java access restriction, cannot access &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; outMessage in WrappedOutputStream  
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(m, c, possibleRetransmit, isChunking, chunkThreshold);
        }

        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void handleResponse() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.handleResponse();
        }

        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void handleResponseInternal() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.handleResponseInternal();
        }
    }
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </comment>
                            <comment id="13031589" author="njiang" created="Wed, 11 May 2011 07:56:56 +0000"  >&lt;p&gt;I think you can still use the below code to set a new WrappedOutputStream, in the MyHTTPConduit.prepare() method.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
message.setContent(OutputStream.class, 
                           &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyWrappedOutputStream(
                                   message, connection,
                                   needToCacheRequest, 
                                   isChunking,
                                   chunkThreshold,
                                   getConduitName()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13031599" author="veaven" created="Wed, 11 May 2011 08:40:15 +0000"  >&lt;p&gt;Unfortunately, I cannot. All properties:connection, needToCacheRequest, isChunking, chunkThreshold&#12288;&#65345;&#65362;&#65349;&#12288;&#65347;&#65359;&#65358;&#65363;&#65364;&#65362;&#65365;&#65347;&#65364;&#65349;&#65348;&#12288;&#65353;&#65358;&#12288;&#65364;&#65352;&#65349;&#12288;&#65357;&#65349;&#65364;&#65352;&#65359;&#65348;&#12288;&#65320;&#65364;&#65364;&#65360;&#65315;&#65359;&#65358;&#65348;&#65365;&#65353;&#65364;&#65294;&#65360;&#65362;&#65349;&#65360;&#65345;&#65362;&#65349;&#65288;&#65289;&#12288; method, so MyHTTPConduit.prepare() cannot get these values, unless we copy all code from HTTPConduit.prepare() method to MyHTTPConduit.prepare() method. (I want to avoid copy HttpConduit&apos;s code if it is possible)&lt;/p&gt;

&lt;p&gt;  If we can provide a getMethod in WrappedOutputStream to allow us to get these value, it can also resolve the issue. thanks.&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="13032303" author="njiang" created="Thu, 12 May 2011 08:11:45 +0000"  >&lt;p&gt;Hi David,&lt;/p&gt;

&lt;p&gt;I just did a simple test by adding a new construction of WrappedOutputStream() which takes the instance of WrappedOutputStream. Then the MyWrappedOutputStream construction code could be like this.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; MyWrappedOutputStream(WrappedOutputStream wos) {
             &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(wos);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I will commit the change shortly.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13032317" author="njiang" created="Thu, 12 May 2011 08:38:29 +0000"  >&lt;p&gt;committed the patch into trunk and 2.3.x-fixes branch.&lt;/p&gt;</comment>
                            <comment id="13032369" author="veaven" created="Thu, 12 May 2011 12:09:02 +0000"  >&lt;p&gt;Thanks Willem!&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="13034127" author="dkulp" created="Mon, 16 May 2011 17:30:32 +0000"  >
&lt;p&gt;I just added a new protected &quot;createOutputStream&quot; method to the conduit so you may be able to make this even easier/cleaner by not even having the original  WrappedOutputStream created.&lt;/p&gt;
</comment>
                            <comment id="13038914" author="veaven" created="Wed, 25 May 2011 01:40:00 +0000"  >&lt;p&gt;Thanks Dan!&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b96v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63601</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>