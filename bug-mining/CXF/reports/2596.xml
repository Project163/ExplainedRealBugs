<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:16:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6481] Jetty HTTPJ session manager Blueprint configuration is not effective</title>
                <link>https://issues.apache.org/jira/browse/CXF-6481</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;It appears a session manager is not available if activated from the httpj configuration starting from Jetty 8&lt;/p&gt;</description>
                <environment></environment>
        <key id="12842027">CXF-6481</key>
            <summary>Jetty HTTPJ session manager Blueprint configuration is not effective</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sergey_beryozkin">Sergey Beryozkin</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jul 2015 15:30:23 +0000</created>
                <updated>Fri, 14 Oct 2016 14:28:19 +0000</updated>
                            <resolved>Thu, 9 Jul 2015 10:34:44 +0000</resolved>
                                                    <fixVersion>3.0.6</fixVersion>
                    <fixVersion>3.1.2</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14612304" author="jreock" created="Thu, 2 Jul 2015 18:06:17 +0000"  >&lt;p&gt;Test CXF Service to demonstrate issue&lt;/p&gt;</comment>
                            <comment id="14612314" author="jreock" created="Thu, 2 Jul 2015 18:12:43 +0000"  >&lt;p&gt;As requested by Sergey, I&apos;ve attached a test which will demonstrate this issue.  The test runs against Karaf 3.0.3, Camel 2.15.2, and CXF 3.0.4.  I ran this inside of the latest ServiceMix 6.0.0.M2 which contains those libraries.&lt;/p&gt;

&lt;p&gt;Build the cxf-httpj-test.zip program with Maven, and deploy the resulting .jar file into Servicemix.  Then deploy the camel-context.xml blueprint as well.&lt;/p&gt;

&lt;p&gt;If you hit &lt;a href=&quot;http://localhost:8888/testSession&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8888/testSession&lt;/a&gt; or &lt;a href=&quot;http://localhost:8888/testSession/rest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8888/testSession/rest&lt;/a&gt;, you will receive the output:&lt;/p&gt;

&lt;p&gt;&amp;lt;ns1:XMLFault xmlns:ns1=&quot;http://cxf.apache.org/bindings/xformat&quot;&amp;gt;&amp;lt;ns1:faultstring xmlns:ns1=&quot;http://cxf.apache.org/bindings/xformat&quot;&amp;gt;java.lang.IllegalStateException: No SessionManager&amp;lt;/ns1:faultstring&amp;gt;&amp;lt;/ns1:XMLFault&amp;gt;&lt;/p&gt;

&lt;p&gt;And you will get the same exception in your log.&lt;/p&gt;

&lt;p&gt;If you alter the camel-context jaxrs entry to use a relative address instead of a URL, like:&lt;/p&gt;

&lt;p&gt;    &amp;lt;jaxrs:server id=&quot;restServices&quot;&lt;br/&gt;
                  address=&quot;/testSession&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;jaxrs:inInterceptors&amp;gt;&lt;br/&gt;
            &amp;lt;bean class=&quot;testhttpj.cxf.TestInterceptor&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/jaxrs:inInterceptors&amp;gt;&lt;br/&gt;
        &amp;lt;jaxrs:serviceBeans&amp;gt;&lt;br/&gt;
            &amp;lt;bean class=&quot;testhttpj.cxf.RestfulService&quot;/&amp;gt;&lt;br/&gt;
         &amp;lt;/jaxrs:serviceBeans&amp;gt;&lt;br/&gt;
    &amp;lt;/jaxrs:server&amp;gt;&lt;/p&gt;

&lt;p&gt;The session is returned properly.&lt;/p&gt;</comment>
                            <comment id="14613094" author="sergey_beryozkin" created="Fri, 3 Jul 2015 10:15:45 +0000"  >&lt;p&gt;Hi, thanks for attaching a test source so quickly, I can&apos;t promise I will react as fast and get the issue fixed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, will try to find the time to investigate. &lt;br/&gt;
cheers, Sergey&lt;/p&gt;</comment>
                            <comment id="14614965" author="sergey_beryozkin" created="Mon, 6 Jul 2015 12:26:32 +0000"  >&lt;p&gt;I spent some time on Friday and reproduced this issue with Karaf, CXF 3.1.1. It does work in a plain servlet container, and it was obvious it was somehow OSGI related. I poked a bit today and I see that CXF rt-transports-http-jetty has an empty Blueprint JettyServerEngineParser implementation, i.e, an httpj:engine element is ignored, unless I&apos;m missing something.&lt;/p&gt;

&lt;p&gt;And the way to configure an individual engine is to use OSGI Config manager to set up a &quot;org.apache.cxf.http.jetty&quot; process, see &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cxf/blob/master/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/osgi/HTTPJettyTransportActivator.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/blob/master/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/osgi/HTTPJettyTransportActivator.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So I guess it makes it obvious now why no session is enabled when an httpj:engine is setup in a blueprint context.&lt;/p&gt;

&lt;p&gt;Generally speaking using an OSGI HttpService is indeed should be preferred, and avoid setting up the endpoints with the absolute HTTP addresses in contexts; that said, it seems like we should still support httpj:engine if they are set directly in the context ?&lt;br/&gt;
Dan,  what do you think ?&lt;/p&gt;

&lt;p&gt;Cheers, Sergey&lt;/p&gt;

</comment>
                            <comment id="14616713" author="jreock" created="Tue, 7 Jul 2015 13:46:03 +0000"  >&lt;p&gt;From what I can tell, Karaf actually uses the HTTPJettyTransportActivator when httpj parameters are set in the context, it&apos;s just that there&apos;s no setter code for session support in HTTPJettyTransportActivator.  You can see where it picks up the TLS parameters, but nothing for picking up a session.  Further, if you configure TLS inside the httpj:engine setup, it &lt;b&gt;does&lt;/b&gt; work and you get an SSL context.  I tried that as part of my initial debugging, I set a TLS context to see if the httpj settings were just being ignored, and my TLS config worked fine.  Just my 2 cents.  Thanks!&lt;/p&gt;</comment>
                            <comment id="14616726" author="sergey_beryozkin" created="Tue, 7 Jul 2015 13:50:33 +0000"  >&lt;p&gt;I honestly do not see how httpj:engine properties get processed in Blueprint, also see&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/cxf/blob/master/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/osgi/HTTPJettyTransportActivator.java#L136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/blob/master/rt/transports/http-jetty/src/main/java/org/apache/cxf/transport/http_jetty/osgi/HTTPJettyTransportActivator.java#L136&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14616864" author="sergey_beryozkin" created="Tue, 7 Jul 2015 15:31:20 +0000"  >&lt;p&gt;Looks like JettyServerEngineFactoryParser sets up JettyHTTPServerEngineFactoryHolder which is expected to init a given engine...&lt;/p&gt;</comment>
                            <comment id="14618498" author="sergey_beryozkin" created="Wed, 8 Jul 2015 12:11:02 +0000"  >&lt;p&gt;The problem is related to the way JAXB schema compiler treats elements of ParameterizedBoolean (or other parameterized types found in parameterized-types.xsd). It only affects elements and not attributes. So, the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sessionSupport&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;ptp:ParameterizedBoolean&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;gets generated to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JettyHTTPServerEngineConfigType {
    @XmlSchemaType(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;anySimpleType&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; sessionSupport;
    &lt;span class=&quot;code-comment&quot;&gt;// other properties&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and JAXB fails to read an httpj:sessionSupport context property into it.&lt;/p&gt;

&lt;p&gt;While&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;sessionSupport&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xsd:boolean&quot;&lt;/span&gt; minOccurs=&lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;gets generated to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JettyHTTPServerEngineConfigType {
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; sessionSupport;
    &lt;span class=&quot;code-comment&quot;&gt;// other properties&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and JettyHTTPServerEngineConfigType gets properly initialized by JAXB.&lt;/p&gt;

&lt;p&gt;It is a strange issue indeed but at least I&apos;m certain this is what the cause of the problem is. Note this is not a problem with Spring as a different parsing mechanism is used there.&lt;/p&gt;</comment>
                            <comment id="14619008" author="dkulp" created="Wed, 8 Jul 2015 17:34:23 +0000"  >&lt;p&gt;This is likely due to &lt;a href=&quot;https://java.net/jira/browse/JAXB-986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://java.net/jira/browse/JAXB-986&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We have a plugin to work around this.   I&apos;ll try and see if that helps.&lt;/p&gt;</comment>
                            <comment id="14619234" author="dkulp" created="Wed, 8 Jul 2015 19:40:24 +0000"  >&lt;p&gt;Our XJC plugin needs some extra updates to further work around that JAXB bug.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14620292" author="sergey_beryozkin" created="Thu, 9 Jul 2015 10:34:23 +0000"  >&lt;p&gt;Dan, thanks for getting it fixed at the plugin level&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12743361" name="camel-context.xml" size="2114" author="jreock" created="Thu, 2 Jul 2015 18:06:54 +0000"/>
                            <attachment id="12743360" name="cxf-httpj-test.zip" size="296093" author="jreock" created="Thu, 2 Jul 2015 18:06:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gqsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>