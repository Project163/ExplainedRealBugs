<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:36:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8367] Micrometer always reports outcome=UNKNOWN on success cases</title>
                <link>https://issues.apache.org/jira/browse/CXF-8367</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When I use the new MetricsFeature introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-8213&quot; title=&quot;Add Micrometer metric support for JAX-WS Spring Boot&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-8213&quot;&gt;&lt;del&gt;CXF-8213&lt;/del&gt;&lt;/a&gt;, the metrics look like this in positive cases:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
cxf_server_requests_seconds_count{exception=&lt;span class=&quot;code-quote&quot;&gt;&quot;None&quot;&lt;/span&gt;,faultCode=&lt;span class=&quot;code-quote&quot;&gt;&quot;LOGICAL_RUNTIME_FAULT&quot;&lt;/span&gt;,method=&lt;span class=&quot;code-quote&quot;&gt;&quot;POST&quot;&lt;/span&gt;,operation=&lt;span class=&quot;code-quote&quot;&gt;&quot;operation1&quot;&lt;/span&gt;,outcome=&lt;span class=&quot;code-quote&quot;&gt;&quot;UNKNOWN&quot;&lt;/span&gt;,status=&lt;span class=&quot;code-quote&quot;&gt;&quot;UNKNOWN&quot;&lt;/span&gt;,uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;/myendpoint&quot;&lt;/span&gt;,} 1.0
cxf_server_requests_seconds_sum{exception=&lt;span class=&quot;code-quote&quot;&gt;&quot;None&quot;&lt;/span&gt;,faultCode=&lt;span class=&quot;code-quote&quot;&gt;&quot;LOGICAL_RUNTIME_FAULT&quot;&lt;/span&gt;,method=&lt;span class=&quot;code-quote&quot;&gt;&quot;POST&quot;&lt;/span&gt;,operation=&lt;span class=&quot;code-quote&quot;&gt;&quot;operation1&quot;&lt;/span&gt;,outcome=&lt;span class=&quot;code-quote&quot;&gt;&quot;UNKNOWN&quot;&lt;/span&gt;,status=&lt;span class=&quot;code-quote&quot;&gt;&quot;UNKNOWN&quot;&lt;/span&gt;,uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;/myendpoint&quot;&lt;/span&gt;,} 0.221690028
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this case, Message.RESPONSE_CODE is null when the MetricsMessageOutInterceptor is called.&lt;/p&gt;

&lt;p&gt;In success cases, this Message attribute is set in the MessageSenderEndingInterceptor when AbstractHTTPDestination.getResponseCodeFromMessage() is called.&lt;/p&gt;

&lt;p&gt;MetricsMessageOutInterceptor is called before that interceptor, that&apos;s why Message.RESPONSE_CODE is not set.&lt;/p&gt;

&lt;p&gt;There are 2 solution options, as far as I understand:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Move the MetricsMessageOutInterceptor after the MessageSenderEndingInterceptor (the consequences of that are unknown to me)&lt;/li&gt;
	&lt;li&gt;Adjust the StandardTags.status() method to treat null values as 200&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;There&apos;s also another problem of the faultCode being LOGICAL_RUNTIME_FAULT in my success cases. This is because the MAPAggregatorImpl always calls exchange.setOutFaultMessage(). The code inside of JaxwsFaultCodeProvider.getFaultCode() assumes that ex.getOutFaultMessage() != null indicates a Fault.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13339808">CXF-8367</key>
            <summary>Micrometer always reports outcome=UNKNOWN on success cases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reta">Andriy Redko</assignee>
                                    <reporter username="bergers">Stefan Berger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Nov 2020 17:43:06 +0000</created>
                <updated>Mon, 4 Jan 2021 09:46:13 +0000</updated>
                            <resolved>Fri, 20 Nov 2020 15:32:19 +0000</resolved>
                                    <version>3.4.1</version>
                                    <fixVersion>3.5.0</fixVersion>
                    <fixVersion>3.4.2</fixVersion>
                    <fixVersion>3.3.9</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17229664" author="reta" created="Wed, 11 Nov 2020 02:27:11 +0000"  >&lt;p&gt;Thanks for the issue, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bergers&quot; class=&quot;user-hover&quot; rel=&quot;bergers&quot;&gt;bergers&lt;/a&gt; , I think for the response code, the 2nd option would be a trivial fix. Regarding&#160;faultCode&#160; &amp;amp; MAPAggregatorImpl, it is not clear yet what would be the appropriate change but we&apos;ll look into it, thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kg88:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>