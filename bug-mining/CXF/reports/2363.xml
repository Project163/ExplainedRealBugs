<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:11:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5980] JAX-RS 2.0 client: response.readEntity(new GenericType&lt;...&gt;{}) fails with &quot;unexpected element&quot; UnmarshalException</title>
                <link>https://issues.apache.org/jira/browse/CXF-5980</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The following code fails:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;GameSession&amp;gt; getGamesForPlayer() {
	Client client = ClientBuilder.newClient();
	Builder requestBuilder = client.target(config.getServiceRoot())
			.path(IGameSessionResource.SERVICE_PATH)
				.path(IGameSessionResource.SERVICE_PATH_GAMES_FOR_PLAYER)
			.request(MediaType.TEXT_XML_TYPE);
	cookieStore.applyCookies(requestBuilder);

	Response response = requestBuilder.get();
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (Status.Family.familyOf(response.getStatus()) != Status.Family.SUCCESSFUL)
		&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpClientException(response.getStatusInfo());

	List&amp;lt;GameSession&amp;gt; games = response.readEntity(
			&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericType&amp;lt;List&amp;lt;GameSession&amp;gt;&amp;gt;(GameSession.class) {});
	cookieStore.remember(response.getCookies());

	&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; games;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the following root exception (I&apos;ll attach the full log out/stack tracce so you can see where in CXF this is coming from):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;javax.xml.bind.UnmarshalException: unexpected element (uri:&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//justdavis.com/karl/rpstourney/api/schema/v1&quot;&lt;/span&gt;, local:&lt;span class=&quot;code-quote&quot;&gt;&quot;gameSessions&quot;&lt;/span&gt;). Expected elements are &amp;lt;{http://justdavis.com/karl/rpstourney/api/schema/v1}account&amp;gt;,&amp;lt;{http://justdavis.com/karl/rpstourney/api/schema/v1}gameRound&amp;gt;,&amp;lt;{http://justdavis.com/karl/rpstourney/api/schema/v1}gameSession&amp;gt;,&amp;lt;{http://justdavis.com/karl/rpstourney/api/schema/v1}player&amp;gt;
&lt;/span&gt;	... 93 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the first time I&apos;ve tried to pull a generic/collection object out of a Response using CXF&apos;s JAX-RS 2.0 client, so my guess is that this is just an unsupported edge case? For what it&apos;s worth, the server-side of the web service being queried is hosted by the same version of CSF and handles this just fine-- only the client seems to have issues.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 14.04, Oracle Java 7&lt;/p&gt;</environment>
        <key id="12738139">CXF-5980</key>
            <summary>JAX-RS 2.0 client: response.readEntity(new GenericType&lt;...&gt;{}) fails with &quot;unexpected element&quot; UnmarshalException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="karlmdavis">Karl M. Davis</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 Aug 2014 16:37:33 +0000</created>
                <updated>Fri, 31 Mar 2017 19:41:27 +0000</updated>
                            <resolved>Tue, 2 Dec 2014 10:52:52 +0000</resolved>
                                    <version>3.0.1</version>
                                    <fixVersion>NeedMoreInfo</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14116813" author="karlmdavis" created="Sun, 31 Aug 2014 16:39:34 +0000"  >&lt;p&gt;The log output with the full stack trace.&lt;/p&gt;</comment>
                            <comment id="14116822" author="karlmdavis" created="Sun, 31 Aug 2014 17:15:15 +0000"  >&lt;p&gt;Just a side note: I was able to workaround this with a solution similar to the one detailed here: &lt;a href=&quot;http://stackoverflow.com/a/13273022/1851299&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/a/13273022/1851299&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This is something that the JAX-RS client really should support without that hack, though.&lt;/p&gt;</comment>
                            <comment id="14117440" author="sergey_beryozkin" created="Mon, 1 Sep 2014 13:53:45 +0000"  >&lt;p&gt;I think it is a non-fix issue. I&apos;ve added a test conforming it works in the CXF to CXF case, see&lt;br/&gt;
&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/cxf/commit/83edbb3b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/cxf/commit/83edbb3b&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The use of explicit collections is not likely to increase the inter-operability of the service. I&apos;m presuming the target server is not CXF-based, right ? In fact it appears you do not even have a collection coming back but a single gameSession response. &lt;/p&gt;

&lt;p&gt;Cheers, Sergey   &lt;/p&gt;</comment>
                            <comment id="14231301" author="sergey_beryozkin" created="Tue, 2 Dec 2014 10:52:52 +0000"  >&lt;p&gt;Please provide a test case if you&apos;d like this issue be revisited&lt;/p&gt;</comment>
                            <comment id="14679142" author="karlmdavis" created="Sun, 9 Aug 2015 13:26:32 +0000"  >&lt;p&gt;My code above had a very simple mistake that was preventing it from working. Thanks &lt;b&gt;very&lt;/b&gt; much for your testcase, which helped me figure that out-- never would have caught it, otherwise.&lt;/p&gt;

&lt;p&gt;The problem is the parameter that I was passing in to the &lt;tt&gt;GenericType&lt;/tt&gt; constructor. Just removing that constructor argument fixed things.&lt;/p&gt;

&lt;p&gt;This was broken:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	List&amp;lt;GameSession&amp;gt; games = response.readEntity(
			&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericType&amp;lt;List&amp;lt;GameSession&amp;gt;&amp;gt;(GameSession.class) {});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this works:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	List&amp;lt;GameSession&amp;gt; games = response.readEntity(
			&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericType&amp;lt;List&amp;lt;GameSession&amp;gt;&amp;gt;() {});
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(My apologies for the long delay in my response-- I only made it back to the TODO in my code that I&apos;d left for this last night.)&lt;/p&gt;</comment>
                            <comment id="14679241" author="sergey_beryozkin" created="Sun, 9 Aug 2015 17:44:27 +0000"  >&lt;p&gt;thanks for the update&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12665666" name="cxf-generictype-jaxrs-client-log.txt" size="27397" author="karlmdavis" created="Sun, 31 Aug 2014 16:39:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zj3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>