<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:35:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7952] MTOM + schema validation creates invalid SOAP FAULT response</title>
                <link>https://issues.apache.org/jira/browse/CXF-7952</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hello! We had built a jaxws webservice based on cxf 3.2.6/3.2.7. The Java code was created from a given WSDL by using the maven plugin &quot;cxf-codegen-plugin&quot;. In the provided &lt;em&gt;cxf-servlet.xml&lt;/em&gt; on server side there is both &lt;em&gt;mtom&lt;/em&gt; and &lt;em&gt;schema validation&lt;/em&gt; enabled on the&#160;&lt;em&gt;jaxws:endpoint&lt;/em&gt; definition:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;jaxws:properties&amp;gt;
    &amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;schema-validation-enabled&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; /&amp;gt;
    &amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;mtom-enabled&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/jaxws:properties&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In case of an invalid validation result (see attachment &lt;em&gt;server_validation.txt&lt;/em&gt;) it seems, that the created SOAP FAULT message is&#160;corrupt so that the client&#160;could not parse the&#160;message (see attachment &lt;em&gt;error.txt&lt;/em&gt;):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
javax.xml.ws.soap.SOAPFaultException: Error reading XMLStreamReader: Unexpected character &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt; (code 45) in prolog; expected &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;&apos;&lt;/span&gt;
at [row,col {unknown-source}]: [2,1]
[...]
Caused by: com.ctc.wstx.exc.WstxUnexpectedCharException: Unexpected character &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt; (code 45) in prolog; expected &lt;span class=&quot;code-quote&quot;&gt;&apos;&amp;lt;&apos;&lt;/span&gt;
at [row,col {unknown-source}]: [2,1]
at com.ctc.wstx.sr.StreamScanner.throwUnexpectedChar(StreamScanner.java:653)
at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2133)
at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1181)
at com.ctc.wstx.sr.BasicStreamReader.nextTag(BasicStreamReader.java:1204)
at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:173)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The message itself seems&#160;to contain an additional, non referenced&#160;boundary (see attachment &lt;em&gt;client_fault.txt&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;What might be the problem here? If we deactivate the complete MTOM feature by removing it from the endpoint definition the fault message could be&#160;successfully&#160;processed.&lt;/p&gt;

&lt;p&gt;Thanks in andvance!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;The service itself is running as a WAR deployment on Ubuntu 16.04 LTS within a Apache Tomcat&#160;8.5.32 using JDK 1.8.0_161.&lt;/p&gt;</environment>
        <key id="13211281">CXF-7952</key>
            <summary>MTOM + schema validation creates invalid SOAP FAULT response</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="theld">Tobias Held</reporter>
                        <labels>
                            <label>mtom</label>
                            <label>soapfault</label>
                            <label>validation</label>
                            <label>wsdl</label>
                    </labels>
                <created>Wed, 23 Jan 2019 13:45:45 +0000</created>
                <updated>Wed, 22 Dec 2021 20:43:52 +0000</updated>
                            <resolved>Wed, 22 Jan 2020 17:09:10 +0000</resolved>
                                    <version>3.2.6</version>
                    <version>3.2.7</version>
                                    <fixVersion>3.3.6</fixVersion>
                    <fixVersion>3.4.0</fixVersion>
                                    <component>JAX-WS Runtime</component>
                    <component>JAXB Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17021144" author="ffang" created="Wed, 22 Jan 2020 14:56:12 +0000"  >&lt;p&gt;I reproduced this issue with a testcase.&lt;/p&gt;

&lt;p&gt;The messy http/mtom header is caused by that the AttachmentoutIntercepter get invoked twice. Once for the normal OutChain, once for the OutFaultChain after running into schemavalidation exception.&lt;/p&gt;

&lt;p&gt;working on a fix&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12955978" name="client_fault.txt" size="1338" author="theld" created="Wed, 23 Jan 2019 13:44:52 +0000"/>
                            <attachment id="12955977" name="error.txt" size="2429" author="theld" created="Wed, 23 Jan 2019 13:45:01 +0000"/>
                            <attachment id="12955976" name="server_validation.txt" size="8311" author="theld" created="Wed, 23 Jan 2019 13:45:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi07yw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>