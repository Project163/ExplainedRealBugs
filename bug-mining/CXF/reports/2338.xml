<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:11:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5920] JAX-RS Link implementation (LinkBuilder) looses context path  </title>
                <link>https://issues.apache.org/jira/browse/CXF-5920</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I think I&apos;ve discovered a bug in CXF, but I&apos;m not sure. Link class&lt;br/&gt;
messes links up, and doesn&apos;t include servlet and @ApplicationPath&lt;br/&gt;
paths from BaseUri:&lt;/p&gt;

&lt;p&gt;Description:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I have CdiServlet deployed at &apos;/rest&apos;,&lt;/li&gt;
	&lt;li&gt;I have Jax rs @ApplicationPath &apos;/api&apos;&lt;/li&gt;
	&lt;li&gt;Account resource at  /account&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I expect the following code to return links to my resources:&lt;br/&gt;
~~~&lt;br/&gt;
        log.info(&quot; &amp;#8211; &amp;lt;&amp;lt;&amp;gt;&amp;gt; {}&quot;, uri.getBaseUri());&lt;br/&gt;
        return Response.ok().links(&lt;/p&gt;

&lt;p&gt;Link.fromResource(AccountResource.class).baseUri(uri.getBaseUri()).rel(&quot;account&quot;).build(),&lt;br/&gt;
  Link.fromResource(PlatformResource.class).baseUri(uri.getBaseUri()).rel(&quot;self&quot;).build()&lt;br/&gt;
).build();&lt;br/&gt;
~~~&lt;br/&gt;
However, I get this on the client side:&lt;br/&gt;
~~~&lt;br/&gt;
Link=[&amp;lt;&lt;a href=&quot;http://localhost:9001/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9001/&lt;/a&gt;&amp;gt;;rel=&quot;self&quot;,&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://localhost:9001/account&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9001/account&lt;/a&gt;&amp;gt;;rel=&quot;account&quot;],&lt;br/&gt;
~~~&lt;br/&gt;
And I expected links with full path. like ttp://localhost:9001/rest/api/account&lt;/p&gt;

&lt;p&gt;UriInfo returns the correct uri. Link messes it up.&lt;br/&gt;
~~~&lt;br/&gt;
INFO  PlatformResource -  &amp;#8211; &amp;lt;&amp;lt;&amp;gt;&amp;gt; &lt;a href=&quot;http://localhost:9001/rest/api&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9001/rest/api&lt;/a&gt;&lt;br/&gt;
~~~&lt;/p&gt;</description>
                <environment></environment>
        <key id="12731085">CXF-5920</key>
            <summary>JAX-RS Link implementation (LinkBuilder) looses context path  </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="ieugen">Ioan Eugen Stan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Jul 2014 15:17:02 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:45 +0000</updated>
                            <resolved>Thu, 7 Aug 2014 11:00:50 +0000</resolved>
                                    <version>3.0.1</version>
                                    <fixVersion>3.0.2</fixVersion>
                    <fixVersion>3.1</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14087606" author="ieugen" created="Wed, 6 Aug 2014 12:36:39 +0000"  >&lt;p&gt;I&apos;ve tested with a relative path for the resource: @Path(&quot;account&quot;) instead of @Path(&quot;/account&quot;) and I get what I expect. It still ignores the @ApplicationPath part, however that seems to be caused by the deployment (I&apos;m using embedded jetty with CDI ). &lt;/p&gt;</comment>
                            <comment id="14087618" author="sergey_beryozkin" created="Wed, 6 Aug 2014 12:54:31 +0000"  >&lt;p&gt;I&apos;m not sure what it is to do with Jersey but I was definitely able to reproduce the problem in CXF. I&apos;ll deal with this issue...&lt;/p&gt;</comment>
                            <comment id="14087658" author="ieugen" created="Wed, 6 Aug 2014 13:29:19 +0000"  >&lt;p&gt;Hi, I&apos;ve edited my answer: it was embedded jetty. I&apos;ve researched jersey tests to see the behavior in that implementation. It wasn&apos;t obvious from CXF tests. &lt;/p&gt;

&lt;p&gt;From my tets, it maintains the context if you use relative paths, as I explained in my first comment. It doesn&apos;t maintain ApplicationPath however, I&apos;m not sure why, but I think It has to do with my deployment options. I&apos;ll look into it and if It&apos;s not ok, I&apos;ll reopen. &lt;/p&gt;</comment>
                            <comment id="14087666" author="sergey_beryozkin" created="Wed, 6 Aug 2014 13:36:23 +0000"  >&lt;p&gt;Hi, I think CXF LinkBuilder impl should be &apos;immune&apos; to the fact a root resource @Path starts with &quot;/&quot;. ApplicationPath should be taken into the consideration too, so it appears we have to fix the issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. I&apos;ve already reopened and assigned to myself, but we can continue working on this issue together&lt;br/&gt;
Cheers, Sergey &lt;/p&gt;</comment>
                            <comment id="14089127" author="sergey_beryozkin" created="Thu, 7 Aug 2014 11:00:39 +0000"  >&lt;p&gt;The problem was that LinkBuilderImpl was using the URI resolution to compose the base URI and the original relative value.&lt;br/&gt;
So if if we have say &quot;http://localhost:8080/1/2&quot; and &quot;a&quot; then the &quot;2&quot; segment is lost and the final URI is &quot;http://localhost:8080/1/a&quot;.&lt;/p&gt;

&lt;p&gt;This is now fixed, Paths values starting from &quot;/&quot; will not affect the final URI. ApplicationPath should be kept as part of the link URI. Please try the snapshots. &lt;br/&gt;
By the way, can you try Jersey and check how it deal with it ? Will it lose ApplicationPath ? &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409157</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yee7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409153</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>