<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:23:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7210] StringIndexOutOfBoundsException during construction of failover request</title>
                <link>https://issues.apache.org/jira/browse/CXF-7210</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;In &lt;tt&gt;AbstractClient&lt;/tt&gt; we &lt;a href=&quot;https://github.com/apache/cxf/blob/master/rt/rs/client/src/main/java/org/apache/cxf/jaxrs/client/AbstractClient.java#L650&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;have the following&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;UriBuilder builder = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; UriBuilderImpl().uri(newBaseURI);
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; basePath = reqURIPath.startsWith(baseURIPath) ? baseURIPath : getBaseURI().getRawPath(); 
builder.path(reqURIPath.equals(basePath) ? &quot;&quot; : reqURIPath.substring(basePath.length()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This covers two out of three potential cases:&lt;/p&gt;

&lt;p&gt;1) &lt;tt&gt;baseURIPath&lt;/tt&gt; and &lt;tt&gt;reqURIPath&lt;/tt&gt; have the same value which will result in only the base path being added to the builder.&lt;br/&gt;
2) &lt;tt&gt;baseURIPath&lt;/tt&gt; and &lt;tt&gt;reqURIPath&lt;/tt&gt; have a different value in which case the builder will get the base path and and everything from the request path that is not already included in the base path.&lt;/p&gt;

&lt;p&gt;What&apos;s missing (and what is causing the exception below) is that the base path might be longer than the request path in which case &lt;tt&gt;reqURIPath.substring(basePath.length())&lt;/tt&gt; throws the following stack trace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.StringIndexOutOfBoundsException: &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; index out of range: -7
  at java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.substring(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:1875)
  at org.apache.cxf.jaxrs.client.AbstractClient.calculateNewRequestURI(AbstractClient.java:652)
  at org.apache.cxf.jaxrs.client.AbstractClient.calculateNewRequestURI(AbstractClient.java:642)
  at org.apache.cxf.jaxrs.client.AbstractClient.retryInvoke(AbstractClient.java:688)
  at org.apache.cxf.jaxrs.client.AbstractClient$RetryableImpl.invoke(AbstractClient.java:1174)
  at org.apache.cxf.clustering.FailoverTargetSelector.performFailover(FailoverTargetSelector.java:207)
  at org.apache.cxf.clustering.FailoverTargetSelector.complete(FailoverTargetSelector.java:166)
  at org.talend.esb.servicelocator.cxf.internal.LocatorTargetSelector.complete(LocatorTargetSelector.java:57)
  at org.apache.cxf.jaxrs.client.AbstractClient.preProcessResult(AbstractClient.java:575)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13033707">CXF-7210</key>
            <summary>StringIndexOutOfBoundsException during construction of failover request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="sebhoss">Sebastian Ho&#223;</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jan 2017 12:38:15 +0000</created>
                <updated>Mon, 27 Feb 2017 15:08:22 +0000</updated>
                            <resolved>Thu, 12 Jan 2017 05:58:11 +0000</resolved>
                                                    <fixVersion>3.1.10</fixVersion>
                    <fixVersion>3.2.0</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15818203" author="githubbot" created="Wed, 11 Jan 2017 12:42:33 +0000"  >&lt;p&gt;GitHub user sebhoss opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/221&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7210&quot; title=&quot;StringIndexOutOfBoundsException during construction of failover request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7210&quot;&gt;&lt;del&gt;CXF-7210&lt;/del&gt;&lt;/a&gt; Fix StringIndexOutOfBoundsException&lt;/p&gt;

&lt;p&gt;    The logic goes as follows:&lt;/p&gt;

&lt;p&gt;    1) Base- &amp;amp; request-URI are the same, then only add base-URI.&lt;br/&gt;
    2) If request-URI starts with base-URI, only add the parts from request-URI that are not already included in base-URI&lt;br/&gt;
    3) Otherwise add both base-URI and request-URI&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sebhoss/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/sebhoss/cxf&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/221.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/221.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #221&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 1a8ae7afb254b77118aba543df2a720547a3ccf2&lt;br/&gt;
Author: Sebastian Ho&#223; &amp;lt;mail@shoss.de&amp;gt;&lt;br/&gt;
Date:   2017-01-11T12:39:31Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-7210&quot; title=&quot;StringIndexOutOfBoundsException during construction of failover request&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-7210&quot;&gt;&lt;del&gt;CXF-7210&lt;/del&gt;&lt;/a&gt; Fix StringIndexOutOfBoundsException&lt;/p&gt;

&lt;p&gt;    Signed-off-by: Sebastian Ho&#223; &amp;lt;mail@shoss.de&amp;gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15818365" author="githubbot" created="Wed, 11 Jan 2017 13:41:04 +0000"  >&lt;p&gt;Github user sebhoss commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/221&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    There is a single test failure (see &lt;a href=&quot;https://builds.apache.org/job/CXF-Trunk-PR/org.apache.cxf.systests$cxf-systests-ws-rm/269/testReport/org.apache.cxf.systest.ws.rm/SequenceTest/testOnewayAnonymousAcksSuppressed/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/CXF-Trunk-PR/org.apache.cxf.systests$cxf-systests-ws-rm/269/testReport/org.apache.cxf.systest.ws.rm/SequenceTest/testOnewayAnonymousAcksSuppressed/&lt;/a&gt;), however that seems to be unrelated to the above changes. &lt;/p&gt;</comment>
                            <comment id="15820259" author="githubbot" created="Thu, 12 Jan 2017 05:54:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/cxf/pull/221&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/pull/221&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15820268" author="ffang" created="Thu, 12 Jan 2017 05:58:12 +0000"  >&lt;p&gt;patch applied on behalf of Sebastian Ho&#223; with thanks!&lt;/p&gt;</comment>
                            <comment id="15820453" author="sebhoss" created="Thu, 12 Jan 2017 08:19:16 +0000"  >&lt;p&gt;Thanks a lot! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i38jx3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>