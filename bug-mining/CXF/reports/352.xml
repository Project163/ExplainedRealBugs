<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:38:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2390] Enums using fromString() but jaxb creates fromValue()</title>
                <link>https://issues.apache.org/jira/browse/CXF-2390</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Let&apos;s say you have an xsd file that defines an enum.&lt;/p&gt;

&lt;p&gt;  &amp;lt;xs:simpleType name=&quot;timezone&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;xs:restriction base=&quot;xs:string&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;xs:enumeration value=&quot;Europe/London&quot; /&amp;gt;&lt;br/&gt;
      &amp;lt;xs:enumeration value=&quot;America/New_York&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/xs:restriction&amp;gt;&lt;br/&gt;
  &amp;lt;/xs:simpleType&amp;gt;&lt;/p&gt;

&lt;p&gt;When xjc (jaxb) runs and creates a Java enum for this, it gives the Enum instances slightly different names, but makes the underlying value available.&lt;/p&gt;

&lt;p&gt;@XmlType(name = &quot;timezone&quot;)&lt;br/&gt;
@XmlEnum&lt;br/&gt;
public enum Timezone {&lt;/p&gt;

&lt;p&gt;    @XmlEnumValue(&quot;Europe/London&quot;)&lt;br/&gt;
    EUROPE_LONDON(&quot;Europe/London&quot;),&lt;br/&gt;
    @XmlEnumValue(&quot;America/New_York&quot;)&lt;br/&gt;
    AMERICA_NEW_YORK(&quot;America/New_York&quot;),&lt;/p&gt;


&lt;p&gt;It also creates a &quot;fromValue()&quot; method to retrieve an enum instance given the value.&lt;/p&gt;


&lt;p&gt;Now say that you want to create a REST web service that has a Timezone as a QueryParam&lt;/p&gt;

&lt;p&gt;@GET&lt;br/&gt;
@Path(&quot;/test&quot;)&lt;br/&gt;
public Result theTest(@QueryParam(&quot;timezone&quot;) Timezone timezone)&lt;/p&gt;

&lt;p&gt;If you attempt to call this REST method with a timezone of &quot;Europe%2FLondon&quot;, you&apos;ll get an exception &lt;/p&gt;

&lt;p&gt;javax.ws.rs.WebApplicationException: java.lang.IllegalArgumentException: No enum const class beans.Timezone.Europe/London&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.InjectionUtils.evaluateFactoryMethod(InjectionUtils.java:332)&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.InjectionUtils.handleParameter(InjectionUtils.java:284)&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.InjectionUtils.createParameterObject(InjectionUtils.java:649)&lt;br/&gt;
        at org.apache.cxf.jaxrs.utils.JAXRSUtils.readQueryString(JAXRSUtils.java:763)&lt;/p&gt;

&lt;p&gt;The InjectionUtils class has this logic:&lt;/p&gt;

&lt;p&gt;// check for valueOf(String) static methods&lt;br/&gt;
        String[] methodNames = pClass.isEnum() &lt;br/&gt;
            ? new String[] &lt;/p&gt;
{&quot;fromString&quot;, &quot;valueOf&quot;}
&lt;p&gt; &lt;br/&gt;
            : new String[] &lt;/p&gt;
{&quot;valueOf&quot;, &quot;fromString&quot;}
&lt;p&gt;;&lt;br/&gt;
        Object result = evaluateFactoryMethod(value, pClass, pType, methodNames&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;);&lt;br/&gt;
        if (result == null) &lt;/p&gt;
{
            result = evaluateFactoryMethod(value, pClass, pType, methodNames[1]);
        }

&lt;p&gt;Note that in the case of an Enum, it is trying to call &quot;fromString()&quot; (which doesn&apos;t exist), and failing that, it tries to call &quot;valueOf()&quot;, which would work if the client had passed EUROPE_LONDON as the value.&lt;/p&gt;

&lt;p&gt;Perhaps different versions of xjc/jaxb create fromValue and some create fromString().  I&apos;m not sure.  But clearly some versions of jaxb create a method called fromValue().&lt;/p&gt;

&lt;p&gt;The net result is that the service doesn&apos;t actually work if you pass it the value as defined in the restriction.  Can injection utils be changed to include an attempt to use fromValue() as well?&lt;/p&gt;</description>
                <environment>&lt;p&gt;CXF version 2.2.2&lt;br/&gt;
Jaxb version 2.1.9 ? Not positive on this&lt;/p&gt;</environment>
        <key id="12432813">CXF-2390</key>
            <summary>Enums using fromString() but jaxb creates fromValue()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="iec290">David Wood</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Aug 2009 18:28:11 +0000</created>
                <updated>Mon, 12 Oct 2009 20:45:42 +0000</updated>
                            <resolved>Wed, 12 Aug 2009 13:23:03 +0000</resolved>
                                    <version>2.2.2</version>
                                    <fixVersion>2.2.4</fixVersion>
                    <fixVersion>2.3</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12742344" author="sergey_beryozkin" created="Wed, 12 Aug 2009 13:23:03 +0000"  >&lt;p&gt;Will merge to 2.2.4-SNAPSHOT a bit later&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>113814</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0v0mv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>179076</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>