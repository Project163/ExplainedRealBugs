<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:35:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1900] Invalid ContentId Encode</title>
                <link>https://issues.apache.org/jira/browse/CXF-1900</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The namespace  &quot;urn:ihe:iti:xds-b:2007&quot; is encoded in this way:&lt;/p&gt;

&lt;p&gt;Content-ID: &amp;lt;ae6becb4-dee4-441f-8b21-9cdffe3b2986@urn%3Aihe%3Aiti%3Axds-b%3A2007&amp;gt;&lt;/p&gt;



&lt;p&gt;I change the class AttachmentUtil like this:&lt;/p&gt;

&lt;p&gt;/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;@param ns&lt;/li&gt;
	&lt;li&gt;@return&lt;br/&gt;
     */&lt;br/&gt;
    public static String createContentID(String ns) throws UnsupportedEncodingException {&lt;br/&gt;
        // tend to change&lt;br/&gt;
        String cid = URLEncoder.encode(&quot;http://cxf.apache.org/&quot;, &quot;UTF-8&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;        String name = UUID.randomUUID().toString();&lt;br/&gt;
        if (ns != null &amp;amp;&amp;amp; (ns.length() &amp;gt; 0)) {&lt;br/&gt;
            try &lt;/p&gt;
{
                URI uri = new URI(ns);
                String host = uri.toURL().getHost();
                cid = URLEncoder.encode(host, &quot;UTF-8&quot;);
            }
&lt;p&gt; catch (URISyntaxException e) &lt;/p&gt;
{
                e.printStackTrace();
                return null;
            }
&lt;p&gt; catch (MalformedURLException e) &lt;/p&gt;
{
                cid = ns;
            }
&lt;p&gt;        }&lt;br/&gt;
        return URLEncoder.encode(name, &quot;UTF-8&quot;) + &quot;@&quot; + cid;&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;bye&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux - Ubuntu 8.04&lt;/p&gt;</environment>
        <key id="12407794">CXF-1900</key>
            <summary>Invalid ContentId Encode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="andrea.bozzetto">Andrea Bozzetto</reporter>
                        <labels>
                    </labels>
                <created>Tue, 4 Nov 2008 15:54:03 +0000</created>
                <updated>Mon, 9 Feb 2009 22:19:40 +0000</updated>
                            <resolved>Fri, 21 Nov 2008 17:39:43 +0000</resolved>
                                    <version>2.1.3</version>
                                    <fixVersion>2.0.10</fixVersion>
                    <fixVersion>2.1.4</fixVersion>
                                    <component>Core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12649696" author="mmayer" created="Fri, 21 Nov 2008 16:25:06 +0000"  >&lt;p&gt;I have a similar issue: if I invoke a simple MTOM-enabled Axis2 (v1.4.1) service from a CXF (v2.1.3) client, the Axis2 service fails with the following exception:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Referenced Attachment not found in the MIME Message. ContentID:5005a0c0-9e55-4b79-baf5-9320b1abb43b@&lt;a href=&quot;http://cxf.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/&lt;/a&gt;&lt;br/&gt;
Caused by: org.apache.axiom.om.OMException: Referenced Attachment not found in the MIME Message. ContentID:5005a0c0-9e55-4b79-baf5-9320b1abb43b@&lt;a href=&quot;http://cxf.apache.org/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Looking at the message from the CXF client I realized that both, the cid-Url and the Content-Id message header, were URL-encoded (although RFC 2111 states the cid URL should be, the Content-Id message header not).&lt;/p&gt;

&lt;p&gt;I fixed the problem by URL-decoding the Id of the Attachment in org.apache.cxf.attachment.AttachmentSerializer:&lt;/p&gt;

&lt;p&gt;private void writeHeaders(String contentType, String attachmentId, Writer writer) throws IOException {&lt;br/&gt;
        writer.write(&quot;\r\n&quot;);&lt;br/&gt;
        writer.write(&quot;Content-Type: &quot;);&lt;br/&gt;
        writer.write(contentType);&lt;br/&gt;
        writer.write(&quot;\r\n&quot;);&lt;/p&gt;

&lt;p&gt;        writer.write(&quot;Content-Transfer-Encoding: binary\r\n&quot;);&lt;/p&gt;

&lt;p&gt;        writer.write(&quot;Content-ID: &amp;lt;&quot;);&lt;br/&gt;
        writer.write(URLDecoder.decode(attachmentId, &quot;UTF-8&quot;));&lt;br/&gt;
        writer.write(&quot;&amp;gt;\r\n\r\n&quot;);&lt;br/&gt;
}&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>50410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sydr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>167047</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>