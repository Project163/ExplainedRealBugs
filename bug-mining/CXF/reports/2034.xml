<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:06:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5394] ImplicitGrantService always redirect to broken redirect url</title>
                <link>https://issues.apache.org/jira/browse/CXF-5394</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;org.apache.cxf.rs.security.oauth2.services.ImplicitGrantService will build a redirectURL based on the input given to createGrant method, and redirect to such url.&lt;/p&gt;

&lt;p&gt;I have discovered 2 issues with the building of the URL.&lt;/p&gt;

&lt;p&gt;1. &quot;state&quot; is added as a fragment, not a query parameter, whereas token got added as a query parameter. According to the spec, only the access token should be appended as the fragment. &lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://tools.ietf.org/html/rfc6749#section-4.2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tools.ietf.org/html/rfc6749#section-4.2.2&lt;/a&gt;&lt;br/&gt;
Example valid URL: &lt;a href=&quot;http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA&lt;/a&gt;&lt;br/&gt;
               &amp;amp;state=xyz&amp;amp;token_type=example&amp;amp;expires_in=3600&lt;br/&gt;
Actual output:&lt;br/&gt;
&lt;a href=&quot;http://example.com/cb#state=xyz&amp;amp;access_token=2YotnFZFEjr1zCsicMWpAA&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.com/cb#state=xyz&amp;amp;access_token=2YotnFZFEjr1zCsicMWpAA&lt;/a&gt;&lt;br/&gt;
               &amp;amp;token_type=example&amp;amp;expires_in=3600&lt;/p&gt;

&lt;p&gt;2.if there are more than one OauthPermissions in the token, the OAuthUtils.convertPermissionsToScope method will simply join the them with space. For example if perms are &quot;read&quot; and &quot;write&quot;, the built url will be&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://example.com/cb#state=xyz&amp;amp;access_token=2YotnFZFEjr1zCsicMWpAA&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://example.com/cb#state=xyz&amp;amp;access_token=2YotnFZFEjr1zCsicMWpAA&lt;/a&gt;&lt;br/&gt;
               &amp;amp;token_type=example&amp;amp;expires_in=3600&amp;amp;scope=read write&lt;/p&gt;

&lt;p&gt;Spaces are not escaped.&lt;/p&gt;

&lt;p&gt;With those two bugs, especially the 1st one, there is no way to get oauth2 implicit flow to work with the current version of CXF.&lt;/p&gt;</description>
                <environment>&lt;p&gt;irrelevant &lt;/p&gt;</environment>
        <key id="12679774">CXF-5394</key>
            <summary>ImplicitGrantService always redirect to broken redirect url</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="jasonw_nz">Jason Wang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Nov 2013 17:31:33 +0000</created>
                <updated>Tue, 26 Nov 2013 17:40:28 +0000</updated>
                            <resolved>Mon, 18 Nov 2013 21:42:29 +0000</resolved>
                                    <version>2.7.7</version>
                                    <fixVersion>3.0.0-milestone1</fixVersion>
                    <fixVersion>2.7.8</fixVersion>
                    <fixVersion>2.6.11</fixVersion>
                                    <component>JAX-RS Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13825807" author="sergey_beryozkin" created="Mon, 18 Nov 2013 21:42:47 +0000"  >&lt;p&gt;Section 4.2.2 clearly states that the parameters listed in that section can be added to the fragment component, I&apos;m not sure where do you see that only the access token can be added to the fragment. The example in that section simply shows the access_token being listed the first.&lt;br/&gt;
The encoding issue is a genuine bug though, I&apos;ve got it fixed, the easy workaround is to offer a composite value like &quot;read_write&quot;&lt;br/&gt;
thanks &lt;/p&gt;</comment>
                            <comment id="13825817" author="sergey_beryozkin" created="Mon, 18 Nov 2013 21:54:33 +0000"  >&lt;p&gt;That said I reordered parameters a bit so that the access_token comes immediately after &apos;#&apos; as some clients may expect it be the case&lt;/p&gt;</comment>
                            <comment id="13825868" author="jasonw_nz" created="Mon, 18 Nov 2013 22:36:03 +0000"  >&lt;p&gt;Sergey, thanks for the super fast response. &lt;/p&gt;

&lt;p&gt;I think the spec says the access_token must be a segment, not query. As when you call that url, segment will not be passed back to the server. We do not need token to be passed back thats why. So it was a genuine bug which just got fixed now. &lt;/p&gt;

&lt;p&gt;Another thing is that the scope value, according to the spec, is a space separated string, I can see you used &quot;+&quot; instead. &lt;/p&gt;

&lt;p&gt;Minor question, why not use UriBuilder instead of handcrafting the url?&lt;/p&gt;

&lt;p&gt;Many thanks,&lt;/p&gt;</comment>
                            <comment id="13826375" author="sergey_beryozkin" created="Tue, 19 Nov 2013 10:31:36 +0000"  >&lt;p&gt;&amp;gt; I think the spec says the access_token must be a segment, not query. As when you call that url, segment will not be passed back to the server. We do not need token to be passed back thats why. So it was a genuine bug which just got fixed now. &lt;/p&gt;

&lt;p&gt;All we see in the spec example is &apos;&amp;amp;&apos; separators but we do not see a query component &apos;?&apos; marker, the whole &apos;&amp;amp;&apos; separated sequence follows a &apos;#&apos; fragment marker. Calling on such URI would most likely miss the fragment values, I&apos;ve seen it elsewhere, the fragment is dropped along the way somehow but this URI is not designed to be called upon, I believe it&apos;s for the in-browser client to be able to get to the fragment easily.&lt;/p&gt;

&lt;p&gt;&amp;gt; Another thing is that the scope value, according to the spec, is a space separated string, I can see you used &quot;+&quot; instead. &lt;/p&gt;

&lt;p&gt;This is how a space gets encoded per the rules of the application/x-www-form-urlencoded type (as OAuth2 spec requires), URL-decoding the value will give you a space separated sequence&lt;/p&gt;

&lt;p&gt;&amp;gt; why not use UriBuilder instead of handcrafting the url&lt;br/&gt;
I did not see a major need for it, may be at some later stage if needed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359132</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 1 week, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pwtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>359431</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>