<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:40:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1816] Undeploying a CXF web app from tomcat on windows does not delete some CXF files</title>
                <link>https://issues.apache.org/jira/browse/CXF-1816</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When we try to undeploy a quite large web application (30Mb WAR file) using CXF, the operation completes with no warnings on the Tomcat manager page. However, the following two CXF files are &lt;b&gt;not&lt;/b&gt; removed from the webapps folder, so that when we try to deploy the application again Tomcat fails. The files are: &quot;cxf-2.0.5-incubator&quot; and &quot;cxf-2.1.2&quot;. Maybe some thread keeps these files locked and prevents tomcat from deleting them? We even tried to stop the application, wait a minute and then try to undeploy, but the above mentioned files were still there.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Vista, Tomcat 6&lt;/p&gt;</environment>
        <key id="12404993">CXF-1816</key>
            <summary>Undeploying a CXF web app from tomcat on windows does not delete some CXF files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="aleon">Antonio Leonforte</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Sep 2008 17:56:21 +0000</created>
                <updated>Thu, 24 Feb 2011 10:35:02 +0000</updated>
                            <resolved>Tue, 12 Jan 2010 17:36:18 +0000</resolved>
                                    <version>2.1.2</version>
                                    <fixVersion>2.2.6</fixVersion>
                                    <component>Integration</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="12633921" author="gmazza" created="Tue, 23 Sep 2008 21:48:40 +0000"  >&lt;p&gt;As Dan mentioned earlier on the CXF-User&apos;s list, why do you have both &quot;cxf-2.0.5-incubator&quot; and &quot;cxf-2.1.2&quot;--also, does CXF actually have such files?  Also, given that &quot;the operation completes with no warnings on the Tomcat manager page&quot; and yet files still remain, are you sure this is a CXF and not actually a Tomcat one?&lt;/p&gt;

&lt;p&gt;Also, you may wish to check your setup vs. mine to see why you apparently are running 2 CXF versions:&lt;br/&gt;
&lt;a href=&quot;http://www.jroller.com/gmazza/date/20080417&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.jroller.com/gmazza/date/20080417&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12634109" author="aleon" created="Wed, 24 Sep 2008 11:27:36 +0000"  >&lt;p&gt;Thank you for the suggestions. We were not cleaning up properly the temporary folder where we create our WAR file, so that old CXF file was there for this reason but was not the cause of the problem. In fact, the problem still existis with the other file (cxf-2.1.2.jar), which still prevents Tomcat from completely undeploying the web app.&lt;/p&gt;

&lt;p&gt;We have found on (&lt;a href=&quot;http://wiki.metawerx.net/wiki/TroubleshootingApplicationDeploymentOnTomcat&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://wiki.metawerx.net/wiki/TroubleshootingApplicationDeploymentOnTomcat&lt;/a&gt;) a reference to an antiJARLocking=&quot;true&quot; to be set in the Context (ie: in the context.xml file or server.xml file) during development. We&apos;ll try this out and then report. Any other hint would be much appreciated.&lt;/p&gt;
</comment>
                            <comment id="12719483" author="deki" created="Mon, 15 Jun 2009 09:26:11 +0000"  >&lt;p&gt;Similar problem: &lt;a href=&quot;http://www.nabble.com/JAR-locking-cxf-rt-transports-http-on-Windows-td22370086.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/JAR-locking-cxf-rt-transports-http-on-Windows-td22370086.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;antiJarLocking doesn&apos;t fix it.&lt;/p&gt;</comment>
                            <comment id="12793916" author="dkulp" created="Wed, 23 Dec 2009 03:45:42 +0000"  >
&lt;p&gt;I&apos;ve gone through the heap in JProfiler to try and figure out what is happening.   It turns out there are a couple things going on:&lt;/p&gt;

&lt;p&gt;1) There WERE two places in CXF that was holding onto the classes and classloaders using a strong reference.   I&apos;ve committed fixes to that.&lt;/p&gt;

&lt;p&gt;2) There are apparently a couple bugs in the JRE that we&apos;re hitting.   The Tomcat folks are working on ways to work around it.  You can see some of what they are doing at:&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/catalina/core/JreMemoryLeakPreventionListener.java?revision=830908&amp;amp;view=markup&amp;amp;pathrev=830908&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/tomcat/trunk/java/org/apache/catalina/core/JreMemoryLeakPreventionListener.java?revision=830908&amp;amp;view=markup&amp;amp;pathrev=830908&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Basically, we&apos;re hitting both bugs mentioned in there.   The sun.awt.AppContext class is definitely holding onto the WebabbClassloader strongly which is preventing it from being undeployed.   The second bug you can see right in the comment is known to be caused by JAXB.&lt;/p&gt;

&lt;p&gt;I&apos;ve also discovered that Spring is holding onto some classes (and thus their classloader) strongly in one of their bean caches.  It MAY be OK depending on the above bugs.   Not really sure.   The only workaround I could figure out is to put the spring jars in the equivalent of the shared/lib dir and not directly in the jar.   That keeps Spring from caching them.&lt;/p&gt;</comment>
                            <comment id="12799277" author="dkulp" created="Tue, 12 Jan 2010 17:36:18 +0000"  >
&lt;p&gt;I&apos;ve done about the best we can with this from CXF&apos;s perspective.   It&apos;s really issues in the JDK and the servlet containers that are holding onto things.    The Tomcat team is trying to find hacks/workarounds for various JDK bugs.   I  don&apos;t know if Jetty is doing the same.&lt;/p&gt;


</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12427818">CXF-2286</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12499578">CXF-3361</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14dyv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233726</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>