<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:46:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3461] EndorsingSupportingTokens policy reports not satisfied when using TLS with signed timestamp</title>
                <link>https://issues.apache.org/jira/browse/CXF-3461</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;WS-SecurityPolicy 1.2 spec states: If transport security is used, the signature (Sig2) MUST cover the message timestamp&lt;/p&gt;

&lt;p&gt;However, when sending a request to a CXF service requiring EndorsingSupportingTokens with a signed message timestamp, the EndorsingSupportingTokens policy is reported not satisfied.&lt;/p&gt;

&lt;p&gt;It appears the PolicyBasedWSS4JInterceptor.doResults will only mark this satisfied if &quot;hasEndorsement&quot; is set, which is in turn based on a signature on the entire message.  This is only true when using MLS, not TLS.&lt;/p&gt;

&lt;p&gt;Example policy fragment:&lt;/p&gt;

&lt;p&gt;			&amp;lt;sp:EndorsingSupportingTokens&amp;gt;&lt;br/&gt;
				&amp;lt;wsp:Policy&amp;gt;&lt;br/&gt;
					&amp;lt;sp:X509Token&lt;br/&gt;
						sp:IncludeToken=&quot;http://docs.oasis-open.org/ws-sx/ws-securitypolicy/200702/IncludeToken/AlwaysToRecipient&quot;&amp;gt;&lt;br/&gt;
						&amp;lt;wsp:Policy&amp;gt;&lt;br/&gt;
							&amp;lt;sp:WssX509V3Token10 /&amp;gt;&lt;br/&gt;
						&amp;lt;/wsp:Policy&amp;gt;&lt;br/&gt;
					&amp;lt;/sp:X509Token&amp;gt;&lt;br/&gt;
				&amp;lt;/wsp:Policy&amp;gt;&lt;br/&gt;
			&amp;lt;/sp:EndorsingSupportingTokens&amp;gt;&lt;/p&gt;

&lt;p&gt;Example message portion:&lt;/p&gt;

&lt;p&gt;&amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;wsse:Security xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; soap:mustUnderstand=&quot;1&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;wsse:BinarySecurityToken xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; EncodingType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&quot; ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot; wsu:Id=&quot;CertId-xxx&quot;&amp;gt;xxx&amp;lt;/wsse:BinarySecurityToken&amp;gt;&lt;br/&gt;
      &amp;lt;wsu:Timestamp xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;Timestamp-1&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;wsu:Created&amp;gt;2011-04-19T15:46:35.705Z&amp;lt;/wsu:Created&amp;gt;&lt;br/&gt;
        &amp;lt;wsu:Expires&amp;gt;2011-04-19T15:51:35.705Z&amp;lt;/wsu:Expires&amp;gt;&lt;br/&gt;
      &amp;lt;/wsu:Timestamp&amp;gt;&lt;br/&gt;
      &amp;lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot; Id=&quot;Signature-2&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;ds:SignedInfo&amp;gt;&lt;br/&gt;
          &amp;lt;ds:CanonicalizationMethod Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;ds:SignatureMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#rsa-sha1&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;ds:Reference URI=&quot;#Timestamp-1&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;ds:Transforms&amp;gt;&lt;br/&gt;
              &amp;lt;ds:Transform Algorithm=&quot;http://www.w3.org/2001/10/xml-exc-c14n#&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;/ds:Transforms&amp;gt;&lt;br/&gt;
            &amp;lt;ds:DigestMethod Algorithm=&quot;http://www.w3.org/2000/09/xmldsig#sha1&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;ds:DigestValue&amp;gt;xxx&amp;lt;/ds:DigestValue&amp;gt;&lt;br/&gt;
          &amp;lt;/ds:Reference&amp;gt;&lt;br/&gt;
        &amp;lt;/ds:SignedInfo&amp;gt;&lt;br/&gt;
        &amp;lt;ds:SignatureValue&amp;gt;xxx&amp;lt;/ds:SignatureValue&amp;gt;&lt;br/&gt;
        &amp;lt;ds:KeyInfo Id=&quot;KeyId-xxx&quot;&amp;gt;&lt;br/&gt;
          &amp;lt;wsse:SecurityTokenReference xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;STRId-xxx&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;wsse:Reference xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; URI=&quot;#CertId-xxx&quot; ValueType=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3&quot;/&amp;gt;&lt;br/&gt;
          &amp;lt;/wsse:SecurityTokenReference&amp;gt;&lt;br/&gt;
        &amp;lt;/ds:KeyInfo&amp;gt;&lt;br/&gt;
      &amp;lt;/ds:Signature&amp;gt;&lt;br/&gt;
    &amp;lt;/wsse:Security&amp;gt;&lt;br/&gt;
  &amp;lt;/soap:Header&amp;gt;&lt;br/&gt;
&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12504691">CXF-3461</key>
            <summary>EndorsingSupportingTokens policy reports not satisfied when using TLS with signed timestamp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="akphipps">Alistair Phipps</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Apr 2011 17:17:17 +0000</created>
                <updated>Mon, 8 Aug 2011 14:43:50 +0000</updated>
                            <resolved>Wed, 4 May 2011 16:13:11 +0000</resolved>
                                    <version>2.4</version>
                                    <fixVersion>2.4.1</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13028800" author="coheigea" created="Wed, 4 May 2011 16:13:11 +0000"  >
&lt;p&gt;I&apos;ve fixed this, but only for an EndorsingSupportingTokens policy, and not e.g. SignedEndorsingSupportingTokens. I&apos;m going to rewrite a lot of the policy validation stuff in the near future, so I&apos;ll tackle it then.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5840</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b96f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63599</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>