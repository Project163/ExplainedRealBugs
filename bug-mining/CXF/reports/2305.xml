<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:10:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5863] JettyHTTPServerEngineFactoryHolder does not support Handlers</title>
                <link>https://issues.apache.org/jira/browse/CXF-5863</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I&apos;ve been trying to add basic authentication to my CXF Web Service (using Apache Camel 2.12.3 and SMX 5.0.0), and I had hoped that I would be able to use the &lt;tt&gt;&lt;a href=&quot;http://cxf.apache.org/transports/http-jetty/configuration&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/transports/http-jetty/configuration&lt;/a&gt;&lt;/tt&gt; namespace to configure it, with the following in my blueprint file:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;httpj:engine-factory bus=&lt;span class=&quot;code-quote&quot;&gt;&quot;cxf&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; 
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;httpj:engine port=&lt;span class=&quot;code-quote&quot;&gt;&quot;${fromCxfEndpointUri.port}&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt; 
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;httpj:handlers&amp;gt;&lt;/span&gt; 
            &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- BASIC AUTHENTICATION configuration --&amp;gt;&lt;/span&gt;&lt;/span&gt; 
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ref bean=&lt;span class=&quot;code-quote&quot;&gt;&quot;securityHandler&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/httpj:handlers&amp;gt;&lt;/span&gt; 
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/httpj:engine&amp;gt;&lt;/span&gt; 
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/httpj:engine-factory&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;securityHandler&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.eclipse.jetty.security.ConstraintSecurityHandler&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
.
.
.
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But as it turns out, that&apos;s not possible - I was unable to get it to recognise the handler - nothing I could do would make SMX recognise that element (I had tried with an invalid bean id, in the hope that it would raise an error, but it never did). In addition to &lt;tt&gt;&amp;lt;ref bean=&quot;securityHandler&quot;/&amp;gt;&lt;/tt&gt;, I also tried &lt;tt&gt;&amp;lt;ref component-id=&quot;securityHandler&quot;/&amp;gt;&lt;/tt&gt;, but to no avail.&lt;/p&gt;

&lt;p&gt;After hunting around for some time, I eventually found the following in &lt;tt&gt;org.apache.cxf.transport.http_jetty.blueprint.JettyHTTPServerEngineFactoryHolder&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (engine.isContinuationsEnabled() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    eng.setContinuationsEnabled(engine.isContinuationsEnabled());
}
&lt;span class=&quot;code-comment&quot;&gt;// eng.setHandlers(engine.getHandlers());
&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (engine.getHost() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !StringUtils.isEmpty(engine.getHost())) {
    eng.setHost(engine.getHost());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note, particularly, the line &lt;tt&gt;// eng.setHandlers(engine.getHandlers());&lt;/tt&gt; (line 119) - it never actually adds the handlers.&lt;/p&gt;

&lt;p&gt;Now, I don&apos;t imagine the solution is as simple as just uncommenting that line, but it would be really nice if we could have one of the following:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Handler support implemented&lt;/li&gt;
	&lt;li&gt;An exception to be thrown if handlers are detected, saying they&apos;re not supported&lt;/li&gt;
	&lt;li&gt;A warning / error message logged if handlers are detected, saying they&apos;re not supported.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;It&apos;s a bit frustrating, as &lt;em&gt;everything else&lt;/em&gt; seemed to work, so I was a bit perplexed as to why this one thing didn&apos;t. Unfortunately, I don&apos;t have the time (or the knowledge, frankly) to fix this myself.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Apache SMX 5.0.0&lt;br/&gt;
Apache Camel 2.12.3&lt;br/&gt;
Java 1.7.0_25&lt;/p&gt;</environment>
        <key id="12726218">CXF-5863</key>
            <summary>JettyHTTPServerEngineFactoryHolder does not support Handlers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="ipsi">Andrew</reporter>
                        <labels>
                            <label>blueprint</label>
                            <label>jetty</label>
                    </labels>
                <created>Wed, 9 Jul 2014 00:14:34 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:48 +0000</updated>
                            <resolved>Wed, 13 Aug 2014 07:44:56 +0000</resolved>
                                    <version>2.7.10</version>
                    <version>3.0</version>
                                    <fixVersion>2.6.15</fixVersion>
                    <fixVersion>2.7.12</fixVersion>
                    <fixVersion>3.0.1</fixVersion>
                                    <component>Transports</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14055777" author="njiang" created="Wed, 9 Jul 2014 02:20:03 +0000"  >&lt;p&gt;Hi  Andrew,&lt;/p&gt;

&lt;p&gt;Thanks for reporting this, after digging the code, I found out current JettyHTTPServerEngineFactoryHolder is building the configuration object by using JAXB, which means it doesn&apos;t support to set the connector and handlers at this time. I will keep digging the code to see if I can find another way to resolve this kind of issue.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="14055799" author="ipsi" created="Wed, 9 Jul 2014 03:04:38 +0000"  >&lt;p&gt;Yeah, that&apos;s what I had assumed. As I said, if there&apos;s no easy way to support this, I would very much appreciate a warning message or exception or something, so people don&apos;t waste too much time trying to make it work when it&apos;s not actually supported.&lt;/p&gt;

&lt;p&gt;Thanks for looking into this, anyway &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14055902" author="ipsi" created="Wed, 9 Jul 2014 06:32:56 +0000"  >&lt;p&gt;Having had a bit of a look around, it seems that Camel can handle this for, e.g., interceptors in Camel CXF, but it does things rather differently. Have a look at &lt;tt&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/e7563a7611667fb9b449d8a7f8c3fa7e3a0524bd/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/blueprint/EndpointDefinitionParser.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;org.apache.camel.component.cxf.blueprint.EndpointDefinitionParser&lt;/a&gt;&lt;/tt&gt;, for example, which can take configuration like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- CXF (SOAP Web Service) end point. dataFormat is PAYLOAD --&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;camelcxf:cxfEndpoint id=&lt;span class=&quot;code-quote&quot;&gt;&quot;id_1&quot;&lt;/span&gt; address=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://...&quot;&lt;/span&gt; wsdlURL=&lt;span class=&quot;code-quote&quot;&gt;&quot;/wsdl.wsdl&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;camelcxf:properties&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;entry key=&lt;span class=&quot;code-quote&quot;&gt;&quot;dataFormat&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;PAYLOAD&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
		.
		.
		.
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/camelcxf:properties&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;camelcxf:inInterceptors&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;ref component-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;basicAuthInterceptor&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/camelcxf:inInterceptors&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/camelcxf:cxfEndpoint&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;basicAuthInterceptor&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But that would definitely mean a complete rewrite of the CXF/Jetty Blueprint Namespace Handler.&lt;/p&gt;

&lt;p&gt;Another option might be to directly access the current &lt;tt&gt;BlueprintContainer&lt;/tt&gt; via the &lt;tt&gt;Bundle&lt;/tt&gt; and &lt;tt&gt;BundleContext&lt;/tt&gt;, and, assuming the call &lt;tt&gt;engine.getHandlers()&lt;/tt&gt; returns a &lt;tt&gt;List&lt;/tt&gt; of {{Ref}}s or something, grab the bean straight out of the container, but that&apos;s a pretty nasty hack.&lt;/p&gt;</comment>
                            <comment id="14056297" author="njiang" created="Wed, 9 Jul 2014 14:41:20 +0000"  >&lt;p&gt;The key is we need to use the blueprint parser api to parser the connector and the handler setting as JAXB doesn&apos;t help us with that.&lt;br/&gt;
I managed to fix the issue by setting up connector map and handlers map to the JettyHTTPServerEngineFactoryHolder. In this way JettyHTTPServerEngineFactoryHolder can find right connector instance and jetty handlers to use.  The fix is on the way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404325</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xl3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>404364</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>