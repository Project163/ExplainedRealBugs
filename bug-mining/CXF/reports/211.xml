<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:36:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2044] Aegis Custom Type Mapping</title>
                <link>https://issues.apache.org/jira/browse/CXF-2044</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Attempting to specify a custom type mapping to the aegis context results in a schema name conflict exception.&lt;br/&gt;
The exception does not occur in 2.2-SNAPSHOT.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12414890">CXF-2044</key>
            <summary>Aegis Custom Type Mapping</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bmargulies">Benson Margulies</assignee>
                                    <reporter username="relphie">Brian Relph</reporter>
                        <labels>
                    </labels>
                <created>Mon, 16 Feb 2009 19:34:16 +0000</created>
                <updated>Fri, 24 Apr 2009 21:17:04 +0000</updated>
                            <resolved>Sat, 21 Feb 2009 21:10:55 +0000</resolved>
                                    <version>2.1.3</version>
                    <version>2.1.4</version>
                                    <fixVersion>2.2</fixVersion>
                    <fixVersion>2.1.5</fixVersion>
                                    <component>Aegis Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12674684" author="relphie" created="Wed, 18 Feb 2009 16:34:23 +0000"  >&lt;p&gt;Attaching the entire eclipse project for easier testing.&lt;/p&gt;</comment>
                            <comment id="12675011" author="bmargulies" created="Thu, 19 Feb 2009 15:19:15 +0000"  >&lt;p&gt;I&apos;ve backported the large set of changes that are believed to contain the fix. It remains to add your test case and backport that, and then publish a 2.1. snapshot.&lt;/p&gt;</comment>
                            <comment id="12675012" author="bmargulies" created="Thu, 19 Feb 2009 15:25:12 +0000"  >&lt;p&gt;Brian,&lt;/p&gt;

&lt;p&gt;You&apos;ve done a lot of packaging already, so feel free to decline the following request.&lt;/p&gt;

&lt;p&gt;If you could perhaps refactor test case as a patch that adds a unit test to rt/databinding/aegis, I would be extremely grateful.&lt;/p&gt;

&lt;p&gt;--benson&lt;/p&gt;</comment>
                            <comment id="12675064" author="bmargulies" created="Thu, 19 Feb 2009 18:01:40 +0000"  >&lt;p&gt;I&apos;ve published a 2.1.5-SNAPSHOT that passes your test case. Please give it a whirl.&lt;/p&gt;</comment>
                            <comment id="12675433" author="relphie" created="Fri, 20 Feb 2009 18:47:58 +0000"  >&lt;p&gt;Your fixes did indeed solve my test case.  I was looking to create the patch, but it is taking me some time to figure out the format of your existing test cases.&lt;/p&gt;

&lt;p&gt;However, after updating to 2.1.5-SNAPSHOT in my own code, I am now getting a null-pointer exception during AegisDatabinding.initialize(Service s) - apparently my BeanTypeInfo has a null info object.  I guess neither getTypeInfo() nor createTypeInfo() are called prior.&lt;/p&gt;

&lt;p&gt;I was able to updated the test case to reproduce the issue.  Basically, adding a second service method that accepts the NoDefaultConstructorBean object generates the null pointer.  Would you like me to create a new issue for this, or just upload the updated test case here?  The same null-pointer exception occurs with 2.2-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="12675463" author="relphie" created="Fri, 20 Feb 2009 20:32:13 +0000"  >&lt;p&gt;I also noticed that there is a non-passive change in the org.apache.cxf.aegis.type.Type#writeSchema() method.  In 2.1.3 and 2.1.4 accepts an org.jdom.Element, where as 2.1.5-SNAPSHOT accepts an org.apache.ws.commons.schema.XmlSchemaElement&lt;/p&gt;</comment>
                            <comment id="12675476" author="bmargulies" created="Fri, 20 Feb 2009 21:13:11 +0000"  >&lt;p&gt;We can use this JIRA. Attach away and I&apos;ll go from there. Thanks.&lt;/p&gt;</comment>
                            <comment id="12675479" author="bmargulies" created="Fri, 20 Feb 2009 21:24:51 +0000"  >&lt;p&gt;You are correct that this change comes along with an incompatibility in the quasi-public API &apos;Type&apos;. The original motivation was to push JDOM out of the required dependency list.&lt;/p&gt;

&lt;p&gt;This is a lump we&apos;ll have to document for 2.1.5.&lt;/p&gt;</comment>
                            <comment id="12675482" author="dkulp" created="Fri, 20 Feb 2009 21:47:21 +0000"  >
&lt;p&gt;Benson,  &lt;/p&gt;

&lt;p&gt;Could a utility method be created to help out the migration?   Basically, something that would create a dummy JDOM element that could be passed into their method and another utility to take that JDOM element and fill in the XmlSchema stuff. &lt;/p&gt;

&lt;p&gt;If their methods are complex, migrating to XmlSchema could be a non-trivial.   Having something to help out with it would be a good thing.   Not sure how hard that would be to write though.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12675487" author="relphie" created="Fri, 20 Feb 2009 21:57:13 +0000"  >&lt;p&gt;I attached an expanded test case to reproduce null-pointer exception.&lt;/p&gt;

&lt;p&gt;I think an auto-conversion jdom to xmlschema utility would probably be too much work.  Is there a way to get these bug fixes without introducing this change?  Can 2.1.x branch continue to use jdom?&lt;/p&gt;

&lt;p&gt;Have you thought about moving all of the api to something even more generic, perhaps the org.w3c.dom apis, so that there is no xml-schema library lock-in?&lt;/p&gt;</comment>
                            <comment id="12675507" author="bmargulies" created="Fri, 20 Feb 2009 23:21:49 +0000"  >&lt;p&gt;Brian,&lt;/p&gt;

&lt;p&gt;CXF, broadly, has always had an XML Schema dependency. It&apos;s not going away. In fact, in general, we&apos;re doing just the opposite. Dan and I got ourselves voted in as Xml Schema committers just so that we could more confidently depend on it. Using a DOM API for all the schema things CXF has to do would be really nasty from a performance and maintenance standpoint.&lt;/p&gt;

&lt;p&gt;The change to Aegis to have the Type system work directly with Xml Schema is consistent with the rest of the system &amp;#8211; if perhaps not very polite on the 2.1.x branch.&lt;/p&gt;

&lt;p&gt;I think you might be one of about 3 people who ever bothered to invest in custom type objects. Or, at least, who have turned up in the CXF community. CXF 2.0.x left a number of Aegis features broken from the original port. I changed all sorts of things in 2.1. &lt;/p&gt;

&lt;p&gt;Porting this code back to 2.1 has the potential to annoy anyone, like you, who adapted custom type code to the 2.1 changes. &lt;/p&gt;

&lt;p&gt;Your welcome to move this thread to the dev list. I suspect that the net-net will be this; there&apos;s no one in the community with the time and inclination to fix your original problem inside the 2.1 JDOM paradigm.&lt;/p&gt;

&lt;p&gt;If you and others really would rather have JDOM and bugs than Xml Schema and less bugs in the 2.1.x branch, then we&apos;d have to consider unwinding my (really laborious) backport.&lt;/p&gt;

&lt;p&gt;--benson&lt;/p&gt;</comment>
                            <comment id="12675599" author="bmargulies" created="Sat, 21 Feb 2009 21:10:55 +0000"  >&lt;p&gt;I&apos;ve posted snapshots. I&apos;m closing this; we can continue the exchange of views on the incompatible change on the dev list.&lt;/p&gt;</comment>
                            <comment id="12675981" author="relphie" created="Mon, 23 Feb 2009 17:11:14 +0000"  >&lt;p&gt;Thanks for you work, I do understand your motivations for switching to and only supporting XmlSchema.&lt;/p&gt;

&lt;p&gt;I agree, custom type mappings hopefully are not needed, unfortunately I am working with some external classes that are not javabeans.&lt;/p&gt;

&lt;p&gt;I am sure I can work through creating a new type mapper with xml schema.&lt;/p&gt;

&lt;p&gt;Aside from that, do you have a set release schedule?  Or should I plan I building my own 2.1.5 for some time?&lt;/p&gt;</comment>
                            <comment id="12676004" author="bmargulies" created="Mon, 23 Feb 2009 18:31:07 +0000"  >&lt;p&gt;Brian, there are published 2.1.5-SNAPSHOT packages you can use for now.&lt;/p&gt;

&lt;p&gt;The dev list is busily deciding whether to keep this stuff in 2.1.5 or push really hard to get a 2.2 by mid-march.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12400628" name="cxf-test-case-updated.zip" size="37517" author="relphie" created="Fri, 20 Feb 2009 21:57:13 +0000"/>
                            <attachment id="12400427" name="cxf-test-case.zip" size="35267" author="relphie" created="Wed, 18 Feb 2009 16:34:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>113504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ae2n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>268746</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>