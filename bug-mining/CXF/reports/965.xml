<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:47:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3526] Aegis cannot handle nested map inheritance</title>
                <link>https://issues.apache.org/jira/browse/CXF-3526</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The following code fails when trying to retrieve data with the simple fronted&lt;/p&gt;

&lt;p&gt;    public class ComplexMapResult extends&lt;br/&gt;
            HashMap&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; {&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    // fail returns null map value&lt;br/&gt;
    public ComplexMapResult testComplexMapResult();&lt;/p&gt;

&lt;p&gt;How it fails. On retrieve when I try to print the resulting matrix I get&lt;br/&gt;
INFO: client.TestClient.testComplexMapResult(TestClient.java:35): &lt;/p&gt;
{key1=[#document: null]}
&lt;p&gt;where I should get a valid map for the key &quot;key1&quot;&lt;/p&gt;

&lt;p&gt;The following code succeeds&lt;/p&gt;

&lt;p&gt;    // success&lt;br/&gt;
    public Map&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; testDirectComplexMapResult();&lt;/p&gt;

&lt;p&gt;So my guess is Aegis doesn&apos;t handle the inheritance very well.&lt;/p&gt;

&lt;p&gt;Further more the following code succeeds&lt;/p&gt;

&lt;p&gt;    // success&lt;br/&gt;
    public class SimpleMapResult extends HashMap&amp;lt;String, Integer&amp;gt; {&lt;br/&gt;
    }&lt;/p&gt;

&lt;p&gt;    // success&lt;br/&gt;
    public SimpleMapResult testSimpleMapResult();&lt;/p&gt;

&lt;p&gt;so that means it handles the extension when there is no nesting&lt;/p&gt;

&lt;p&gt;I will try to attach the eclipse project for this (~7k)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Debian GNU/Linux tomcat 6&lt;/p&gt;</environment>
        <key id="12507455">CXF-3526</key>
            <summary>Aegis cannot handle nested map inheritance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="vasvir">Vassilis Virvilis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 May 2011 08:08:48 +0000</created>
                <updated>Mon, 8 Aug 2011 14:43:46 +0000</updated>
                            <resolved>Wed, 25 May 2011 10:25:38 +0000</resolved>
                                    <version>2.3.3</version>
                                    <fixVersion>2.4.1</fixVersion>
                    <fixVersion>2.3.5</fixVersion>
                                    <component>Aegis Databinding</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13034621" author="vasvir" created="Tue, 17 May 2011 08:12:03 +0000"  >&lt;p&gt;And here is the eclipse project. You will need the following jars&lt;br/&gt;
cxf-libraries&lt;br/&gt;
log4j&lt;br/&gt;
commons-logging&lt;/p&gt;</comment>
                            <comment id="13039056" author="ffang" created="Wed, 25 May 2011 10:07:08 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;As the super class HashMap&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; of ComplexMapResult isn&apos;t directly visible by reflection of the service interface, so actually this is the expected behavior, the solution(as described from&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;,Using Java Classes That Aren&apos;t Visible to the Service Interface) is declare the method signature using base type(HashMap&amp;lt;String, Map&amp;lt;Integer, Integer&amp;gt;&amp;gt; for your case)&lt;/p&gt;

&lt;p&gt;So the code should be&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; testComplexMapResult();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;in interface&lt;br/&gt;
and &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;&amp;gt; testComplexMapResult() {
        ComplexMapResult result 
            = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ComplexMapResult();
        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt; map1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;&amp;gt;();
        map1.put(1, 3);
        result.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;key1&quot;&lt;/span&gt;, map1);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in impl class.&lt;/p&gt;

&lt;p&gt;Anyway, I&apos;m going to commit a testcase to demonstrate how it works.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;http://cxf.apache.org/docs/aegis-21.html&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                            <comment id="13039061" author="ffang" created="Wed, 25 May 2011 10:25:38 +0000"  >&lt;p&gt;not a real fix but a testcase demonstrate how to use inherited nested map with aegis databinding&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1127459&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1127459&amp;amp;view=rev&lt;/a&gt; for trunk&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1127464&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1127464&amp;amp;view=rev&lt;/a&gt; for 2.3.x branch&lt;/p&gt;</comment>
                            <comment id="13039127" author="vasvir" created="Wed, 25 May 2011 13:54:26 +0000"  >&lt;p&gt;Looks like that I missed the documentation.&lt;/p&gt;

&lt;p&gt;Do you think that it would be possible to give a warning when that happens during deploy so the user can tell when something goes wrong from the logs and not wait the runtime to see the problem.&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;</comment>
                            <comment id="13041498" author="ffang" created="Tue, 31 May 2011 09:29:58 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Honestly I&apos;m not so sure if it&apos;s a good idea we should add such warning message, IMHO interface oriented programming should be a good practice, if you don&apos;t follow it, you may encounter some side effect. If we add warning message for such potential problem I&apos;m afraid we may need add too many warning message everywhere else. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Freeman&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12479436" name="ws-test.tgz" size="6984" author="vasvir" created="Tue, 17 May 2011 08:12:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b7mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>