<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:47:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3492] Spring OSGI Service Reference as JAXWS:endpoint implementor</title>
                <link>https://issues.apache.org/jira/browse/CXF-3492</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Problem pointing &amp;lt;jaxws:endpoint&amp;gt; to an implementor that&apos;s provided by &amp;lt;osgi:reference&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12506336">CXF-3492</key>
            <summary>Spring OSGI Service Reference as JAXWS:endpoint implementor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="edwardost">Edward Ost</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 May 2011 21:00:07 +0000</created>
                <updated>Mon, 8 Aug 2011 14:43:46 +0000</updated>
                            <resolved>Fri, 6 May 2011 02:23:12 +0000</resolved>
                                    <version>2.4</version>
                                    <fixVersion>2.4.1</fixVersion>
                                    <component>OSGi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13029566" author="edwardost" created="Thu, 5 May 2011 21:01:32 +0000"  >&lt;p&gt;This bug report was contributed by David Metcalf.  I&apos;m filing on his behalf.  He has also submitted a proposed patch fix.  In order to capture the full thread, I will post each individual message, four in total.&lt;/p&gt;</comment>
                            <comment id="13029567" author="edwardost" created="Thu, 5 May 2011 21:01:50 +0000"  >&lt;p&gt;I&apos;ve hit a problem pointing &amp;lt;jaxws:endpoint&amp;gt; to an implementor that&apos;s provided by &amp;lt;osgi:reference&amp;gt;.&lt;/p&gt;

&lt;p&gt;e.g. &lt;br/&gt;
&amp;lt;jaxws:endpoint id=&quot;morticeAdapterEndpoint&quot;&lt;br/&gt;
implementor=&quot;#MorticeCourseUnitService&quot;&lt;br/&gt;
address=&quot;/MorticeAdapterServiceProvider&quot;&amp;gt;&lt;br/&gt;
&amp;lt;/jaxws:endpoint&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;osgi:reference &lt;br/&gt;
id=&quot;MorticeCourseUnitService&quot; &lt;br/&gt;
interface=&quot;au.edu.mq.informatics.dataswitch.poc.mortice.common.MorticeCourseUnitService&quot;&amp;gt;&lt;br/&gt;
&amp;lt;/osgi:reference&amp;gt;&lt;/p&gt;


&lt;p&gt;Here&apos;s the exception:&lt;/p&gt;

&lt;p&gt;karaf@tesb&amp;gt; Exception in thread &quot;SpringOsgiExtenderThread-16&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;morticeAdapterEndpoint&apos;: Invocation of init method failed; nested exception is javax.xml.ws.WebServiceException: java.lang.ClassCastException: $Proxy76 cannot be cast to org.springframework.aop.framework.Advised&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)&lt;br/&gt;
at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)&lt;br/&gt;
at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:580)&lt;br/&gt;
at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:895)&lt;br/&gt;
at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.access$1600(AbstractDelegatedExecutionApplicationContext.java:69)&lt;br/&gt;
at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext$4.run(AbstractDelegatedExecutionApplicationContext.java:355)&lt;br/&gt;
at org.springframework.osgi.util.internal.PrivilegedUtils.executeWithCustomTCCL(PrivilegedUtils.java:85)&lt;br/&gt;
at org.springframework.osgi.context.support.AbstractDelegatedExecutionApplicationContext.completeRefresh(AbstractDelegatedExecutionApplicationContext.java:320)&lt;br/&gt;
at org.springframework.osgi.extender.internal.dependencies.startup.DependencyWaiterApplicationContextExecutor$CompleteRefreshTask.run(DependencyWaiterApplicationContextExecutor.java:132)&lt;br/&gt;
at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
Caused by: javax.xml.ws.WebServiceException: java.lang.ClassCastException: $Proxy76 cannot be cast to org.springframework.aop.framework.Advised&lt;br/&gt;
at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:350)&lt;br/&gt;
at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:239)&lt;br/&gt;
at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:509)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:1544)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1485)&lt;br/&gt;
at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)&lt;br/&gt;
... 14 more&lt;br/&gt;
Caused by: java.lang.ClassCastException: $Proxy76 cannot be cast to org.springframework.aop.framework.Advised&lt;br/&gt;
at org.apache.cxf.common.util.SpringAopClassHelper.getRealClassInternal(SpringAopClassHelper.java:59)&lt;br/&gt;
at org.apache.cxf.common.util.ClassHelper.getRealClass(ClassHelper.java:55)&lt;br/&gt;
at org.apache.cxf.jaxws.EndpointImpl.getImplementorClass(EndpointImpl.java:203)&lt;br/&gt;
at org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:376)&lt;br/&gt;
at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:322)&lt;br/&gt;
... 23 more&lt;/p&gt;


&lt;p&gt;Here&apos;s how I declare the service  (in another bundle, checked with &quot;osgi:ls&quot;):&lt;/p&gt;

&lt;p&gt;&amp;lt;osgi:service &lt;br/&gt;
ref=&quot;MorticeCourseUnitServiceImpl&quot; &lt;br/&gt;
interface=&quot;au.edu.mq.informatics.dataswitch.poc.mortice.common.MorticeCourseUnitService&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;MorticeCourseUnitServiceImpl&quot; &lt;br/&gt;
class=&quot;au.edu.mq.informatics.dataswitch.poc.mortice.adapter.MorticeCourseUnitServiceImpl&quot;/&amp;gt; &lt;/p&gt;


&lt;p&gt;If I point jaxws directly at the bean it works.&lt;/p&gt;

&lt;p&gt;&amp;lt;jaxws:endpoint id=&quot;morticeAdapterEndpoint&quot;&lt;br/&gt;
implementor=&quot;#MorticeCourseUnitService&quot;&lt;br/&gt;
address=&quot;/MorticeAdapterServiceProvider&quot;&amp;gt;&lt;br/&gt;
&amp;lt;/jaxws:endpoint&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;MorticeCourseUnitService&quot; &lt;br/&gt;
class=&quot;au.edu.mq.informatics.dataswitch.poc.mortice.adapter.MorticeCourseUnitServiceImpl&quot;/&amp;gt; &lt;/p&gt;


&lt;p&gt;If I point a bean directly at the osgi reference it works   (tested by invoking a service method inside setMorticeCourseUnitService).&lt;br/&gt;
&amp;lt;bean class=&quot;soaphttp.MorticeCourseUnitServiceTestBean&quot;&amp;gt; &lt;br/&gt;
   &amp;lt;property name=&quot;morticeCourseUnitService&quot; ref=&quot;MorticeCourseUnitService&quot;&amp;gt;&amp;lt;/property&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt; &lt;/p&gt;

&lt;p&gt;&amp;lt;osgi:reference id=&quot;MorticeCourseUnitService&quot; interface=&quot;au.edu.mq.informatics.dataswitch.poc.mortice.common.MorticeCourseUnitService&quot;&amp;gt; &amp;lt;/osgi:reference&amp;gt;  &lt;/p&gt;

</comment>
                            <comment id="13029568" author="edwardost" created="Thu, 5 May 2011 21:02:13 +0000"  >&lt;p&gt;Actually the solution in that thread does work:&lt;/p&gt;

&lt;p&gt;&amp;lt;jaxws:endpoint id=&quot;morticeAdapterEndpoint&quot;&lt;br/&gt;
implementor=&quot;#MorticeCourseUnitService&quot;&lt;br/&gt;
implementorClass=&quot;au.edu.mq.informatics.dataswitch.poc.mortice.common.MorticeCourseUnitService&quot;&lt;br/&gt;
address=&quot;/MorticeAdapterServiceProvider&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;The error was because org.springframework.osgi.service.util.internal.aop.ProxyUtils.createProxy calls ProxyFactory.setOpaque(true), which prevents the Advised interface being set on the proxy.&lt;/p&gt;

&lt;p&gt;So org.apache.cxf.common.util.SpringAopClassHelper.getRealClassInternal should probably check first whether it&apos;s assignable to Advised, and if not throw an more meaningful exception up to EndpointImpl.getImplementorClass for an &quot;implementorClass must be supplied&quot; message.&lt;/p&gt;

&lt;p&gt;Maybe this was obvious from the stacktrace in hindsight  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;



&lt;p&gt;On Fri, Apr 29, 2011 at 10:10 AM, David Metcalf &amp;lt;david.metcalf@mq.edu.au&amp;gt; wrote:&lt;br/&gt;
Hi Ed,&lt;/p&gt;

&lt;p&gt;To me this looks like a bug in Spring&apos;s  org.springframework.aop.support.AopUtils.isAopProxy(Object object)&lt;/p&gt;

&lt;p&gt;It returns true for any JDK or CGLIB proxy, whether or not the object is assignable to org.springframework.aop.framework.Advised.  (I think this is because before Spring DM they assumed all SpringProxy instances were proxies for AOP advice, but I expect they&apos;re now SpringProxys for OSGI too).&lt;/p&gt;

&lt;p&gt;org.apache.cxf.common.util.SpringAopClassHelper.getRealClassInternal assumes it must be assignable to Advised, because Spring told it it was an AopProxy.&lt;/p&gt;

&lt;p&gt;I found this thread too &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/cxf-users/201004.mbox/%3C28168894.post@talk.nabble.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/cxf-users/201004.mbox/%3C28168894.post@talk.nabble.com%3E&lt;/a&gt;, &lt;br/&gt;
but the originator&apos;s solution doesn&apos;t seem to help and I suspect the change Dan Kulp refers too is different (I can dig into that to check later) &lt;/p&gt;

&lt;p&gt;I think I may need a patch for either CXF or Spring to get this working.&lt;/p&gt;</comment>
                            <comment id="13029569" author="edwardost" created="Thu, 5 May 2011 21:02:44 +0000"  >&lt;p&gt;Sorry to be going on a goose chase here, but I wasn&apos;t able to reproduce that successful test  (I&apos;m pretty certain it was actually running a previous build). &lt;/p&gt;

&lt;p&gt;I&apos;ve set up and attached a fresh project to demonstrate the issue in isolation (and run against a clean TESB4 container and MVN repository).  This was tested on talend-esb-4.0-prerelease-kit-2 against the CXF bundle 2.4.0-SNAPSHOT (included) and also against an upgraded CXF 2.4.0 bundle.&lt;/p&gt;

&lt;p&gt;I couldn&apos;t find a Maven source dependencies for 2.4.0-SNAPSHOT to debug against, so I&apos;ve used 2.4.0 to determine the following:&lt;/p&gt;

&lt;p&gt;When using a spring OSGI reference as the JAXWS implementor, e.g.&lt;/p&gt;

&lt;p&gt;&amp;lt;osgi:reference &lt;br/&gt;
id=&quot;TestService&quot; &lt;br/&gt;
interface=&quot;au.edu.mq.dataswitch.poc.TestService&quot;&amp;gt;&lt;br/&gt;
&amp;lt;/osgi:reference&amp;gt;&lt;br/&gt;
&amp;lt;jaxws:endpoint id=&quot;testEndpoint&quot;&lt;br/&gt;
implementor=&quot;#TestService&quot;&lt;br/&gt;
implementorClass=&quot;au.edu.mq.dataswitch.poc.TestService&quot;&lt;br/&gt;
address=&quot;/TestServiceProvider&quot;&amp;gt;&lt;br/&gt;
&amp;lt;/jaxws:endpoint&amp;gt;&lt;/p&gt;

&lt;p&gt;It&apos;s dying in JaxWsServerFactoryBean(org.apache.cxf.frontend.ServerFactoryBean).create() line: 180:&lt;/p&gt;

&lt;p&gt;            if (serviceBean != null) &lt;/p&gt;
{
                initializeAnnotationInterceptors(server.getEndpoint(),
                                                 ClassHelper.getRealClass(getServiceBean()));
            } else if (getServiceClass() != null) {
                initializeAnnotationInterceptors(server.getEndpoint(), getServiceClass());
            }&lt;br/&gt;
&lt;br/&gt;
The code here ignores the &quot;implementorClass&quot; on the JAXWS tag (which populates ServerFactoryBean.getServiceClass()) and tries to determine the underlying class via &quot;ClassHelper.getRealClass&quot;.  (which fails because ClassHelper throws a ClassCastException internally because it tries to cast an opaque proxy (spring OSGI proxy) to org.springframework.aop.framework.Advised).&lt;br/&gt;
&lt;br/&gt;
I&apos;m guessing the above if/else block may be incorrect, and possibly should be:&lt;br/&gt;
&lt;br/&gt;
            if (getServiceClass() != null) {                initializeAnnotationInterceptors(server.getEndpoint(), getServiceClass());            } else if (serviceBean != null) {                initializeAnnotationInterceptors(server.getEndpoint(),                                                 ClassHelper.getRealClass(getServiceBean()));            }


&lt;p&gt;Would you mind passing this on for investigation?&lt;/p&gt;

&lt;p&gt;The attached tar ball should just build with &quot;mvn install&quot;, then &quot;install mvn:au.edu.mq.dataswitch.poc/jaxws-osgi-test/1.0-SNAPSHOT&quot;, except that it&apos;s built against CXF 2.4.0.&lt;/p&gt;

&lt;p&gt;If running against talend-esb-4.0-prerelease-kit-2.tar.gz, can either&lt;br/&gt;
(a) change in pom.xml to &amp;lt;cxf.version&amp;gt;2.4.0-SNAPSHOT&amp;lt;/cxf.version&amp;gt; , or &lt;br/&gt;
(b) uninstall default CXF bundle and use &quot;features:addurl mvn:org.apache.cxf.karaf/apache-cxf/2.4.0/xml/features&quot;, &quot;features:install cxf-bundle/2.4.0&quot;&lt;/p&gt;</comment>
                            <comment id="13029570" author="edwardost" created="Thu, 5 May 2011 21:03:10 +0000"  >&lt;p&gt;I&apos;ve patched these two files on CXF 2.4.0  (attached) and it&apos;s working fine now.&lt;/p&gt;

&lt;p&gt;./common/common/src/main/java/org/apache/cxf/common/util/SpringAopClassHelper.java&lt;br/&gt;
./rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ServerFactoryBean.java&lt;/p&gt;

&lt;p&gt;I&apos;ll post to patches to dev-cxf mailing list.&lt;/p&gt;

&lt;p&gt;To install on TESB 4.0:&lt;/p&gt;

&lt;p&gt;rm -Rf system/org/apache/cxf&lt;br/&gt;
mkdir -p system/org/apache/cxf/cxf-bundle/2.4.0/&lt;br/&gt;
mkdir -p system/org/apache/cxf/karaf/apache-cxf/2.4.0/&lt;br/&gt;
cp ~/.m2/repository/org/apache/cxf/cxf-bundle/2.4.0/cxf-bundle-2.4.0.jar system/org/apache/cxf/cxf-bundle/2.4.0/&lt;br/&gt;
cp ~/.m2/repository/org/apache/cxf/karaf/apache-cxf/2.4.0/apache-cxf-2.4.0-features.xml system/org/apache/cxf/karaf/apache-cxf/2.4.0/&lt;br/&gt;
find . -name *.xml -exec grep -l &apos;2.4.0-SNAPSHOT&apos; {} \; | xargs sed -i &apos;s/2.4.0-SNAPSHOT/2.4.0/g&apos;&lt;br/&gt;
find . -name *.cfg -exec grep -l &apos;2.4.0-SNAPSHOT&apos; {} \; | xargs sed -i &apos;s/2.4.0-SNAPSHOT/2.4.0/g&apos;&lt;/p&gt;

&lt;p&gt;David&lt;/p&gt;</comment>
                            <comment id="13029656" author="dlmetcalf" created="Thu, 5 May 2011 23:43:50 +0000"  >&lt;p&gt;Thanks Ed &amp;amp; Dan,&lt;/p&gt;

&lt;p&gt;These were my final changes  (apologies for mistakes in the initial analysis - was a long week):&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;diff apache-cxf-2.4.0-src/common/common/src/main/java/org/apache/cxf/common/util/SpringAopClassHelper.java apache-cxf-2.4.0-src.patched/common/common/src/main/java/org/apache/cxf/common/util/SpringAopClassHelper.java&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;58c58
&amp;lt;         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (AopUtils.isAopProxy(o)) {
---
&amp;gt;         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (AopUtils.isAopProxy(o) &amp;amp;&amp;amp; (o &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Advised)) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(May be better if it logs something when skipping over an unadvised proxy, but not sure it matters.)&lt;/p&gt;


&lt;p&gt;&lt;tt&gt;diff apache-cxf-2.4.0-src/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ServerFactoryBean.java apache-cxf-2.4.0-src.patched/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ServerFactoryBean.java&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;179c179
&amp;lt;             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (serviceBean != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
---
&amp;gt;             &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (serviceBean != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; getServiceClass() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
187c187
&amp;lt;     
---
&amp;gt;    
191,192c191,195
&amp;lt;                                               ? getServiceFactory().getServiceClass() : getServiceClass()
&amp;lt;                                               : ClassHelper.getRealClass(getServiceBean()));
---
&amp;gt;                                               ? getServiceFactory().getServiceClass() 
&amp;gt;                                               : getServiceClass()
&amp;gt;                                           : getServiceClass() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&amp;gt;                                               ? ClassHelper.getRealClass(getServiceBean()) 
&amp;gt;                                               : getServiceClass());
329c332
&amp;lt; }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Patch contributed under CXF&apos;s license &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Kind Regards,&lt;br/&gt;
David Metcalf.&lt;/p&gt;</comment>
                            <comment id="13029671" author="dkulp" created="Fri, 6 May 2011 00:19:03 +0000"  >
&lt;p&gt;David,&lt;/p&gt;


&lt;p&gt;This part of the change:&lt;/p&gt;

&lt;p&gt;179c179&lt;br/&gt;
&amp;lt;             if (serviceBean != null) {&lt;br/&gt;
&amp;#8212;&lt;br/&gt;
&amp;gt;             if (serviceBean != null &amp;amp;&amp;amp; getServiceClass() == null) {&lt;/p&gt;

&lt;p&gt;breaks a bunch of our unit tests and thus is probably not acceptable.   I&apos;m going to play around a bit to see if there is alternative that could possibly do something reasonable here.&lt;/p&gt;
</comment>
                            <comment id="13029689" author="dkulp" created="Fri, 6 May 2011 01:25:42 +0000"  >
&lt;p&gt;David,&lt;/p&gt;

&lt;p&gt;I just committed part of this patch to trunk but made some major modifications to it.   Is there anyway you can checkout trunk and build it and test to make sure it still solves your issue?&lt;/p&gt;

&lt;p&gt;Dan&lt;/p&gt;</comment>
                            <comment id="13029697" author="dlmetcalf" created="Fri, 6 May 2011 02:19:54 +0000"  >&lt;p&gt;Thanks Dan.&lt;/p&gt;

&lt;p&gt;I tested 2.4.1-SNAPSHOT for this case and your fix works beautifully.&lt;/p&gt;

&lt;p&gt;David.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12478326" name="ServerFactoryBean.java" size="11642" author="edwardost" created="Thu, 5 May 2011 21:06:58 +0000"/>
                            <attachment id="12478327" name="SpringAopClassHelper.java" size="3296" author="edwardost" created="Thu, 5 May 2011 21:06:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b9b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>63620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>