<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:05:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5341] NPE in org.apache.cxf.jaxws.support.JaxWsEndpointImpl.checkRespectBindingFeature</title>
                <link>https://issues.apache.org/jira/browse/CXF-5341</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I&apos;m getting a NPE when using a contract-first WS endpoint whose wsdl contains:&lt;/p&gt;

&lt;p&gt;&amp;lt;wsp:PolicyReference URI=&quot;#ForceMTOM&quot; wsdl:required=&quot;true&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.cxf.jaxws.support.JaxWsEndpointImpl.checkRespectBindingFeature(JaxWsEndpointImpl.java:267)&lt;br/&gt;
	at org.apache.cxf.jaxws.support.JaxWsEndpointImpl.extractWsdlExtensibilities(JaxWsEndpointImpl.java:227)&lt;br/&gt;
	at org.apache.cxf.jaxws.support.JaxWsEndpointImpl.&amp;lt;init&amp;gt;(JaxWsEndpointImpl.java:205)&lt;br/&gt;
	at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.createEndpoint(JaxWsServiceFactoryBean.java:237)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.createEndpoints(ReflectionServiceFactoryBean.java:351)&lt;br/&gt;
	at org.apache.cxf.service.factory.ReflectionServiceFactoryBean.create(ReflectionServiceFactoryBean.java:283)&lt;br/&gt;
	at org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.create(JaxWsServiceFactoryBean.java:204)&lt;br/&gt;
	at org.apache.cxf.frontend.AbstractWSDLBasedEndpointFactory.createEndpoint(AbstractWSDLBasedEndpointFactory.java:102)&lt;br/&gt;
	at org.apache.cxf.frontend.ServerFactoryBean.create(ServerFactoryBean.java:159)&lt;br/&gt;
	at org.apache.cxf.jaxws.JaxWsServerFactoryBean.create(JaxWsServerFactoryBean.java:211)&lt;br/&gt;
	at org.apache.cxf.jaxws.EndpointImpl.getServer(EndpointImpl.java:456)&lt;br/&gt;
	at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:334)&lt;br/&gt;
	... 13 more&lt;/p&gt;

&lt;p&gt;This looks related to the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4876&quot; title=&quot;CXF RespectBinding feature does not support the customized binding info under operation and its sub element.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4876&quot;&gt;&lt;del&gt;CXF-4876&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12674308">CXF-5341</key>
            <summary>NPE in org.apache.cxf.jaxws.support.JaxWsEndpointImpl.checkRespectBindingFeature</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asoldano">Alessio Soldano</assignee>
                                    <reporter username="asoldano">Alessio Soldano</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Oct 2013 13:16:46 +0000</created>
                <updated>Tue, 26 Nov 2013 17:40:11 +0000</updated>
                            <resolved>Wed, 30 Oct 2013 15:50:55 +0000</resolved>
                                    <version>2.6.8</version>
                                    <fixVersion>3.0.0-milestone1</fixVersion>
                    <fixVersion>2.7.8</fixVersion>
                    <fixVersion>2.6.11</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13805300" author="rsearls" created="Fri, 25 Oct 2013 13:48:05 +0000"  >&lt;p&gt;There are 2 issues with the code supporting RespectBinding in 2.6.x-fixes, &lt;br/&gt;
2.7.x-fixes, and the current trunk. &lt;br/&gt;
.&lt;/p&gt;

&lt;p&gt;issue 1. In org.apache.cxf.jaxws.support.JaxWsEndpointImpl variable, this.wsFeatures,&lt;br/&gt;
         can be NULL.  Currently a value of NULL is not checked before executing the &lt;br/&gt;
         &quot;for&quot; stmt at line 266 and a NPE will results.&lt;/p&gt;

&lt;p&gt;260     private void checkRespectBindingFeature(List&amp;lt;ExtensibilityElement&amp;gt; bindingExtensors) {&lt;br/&gt;
261         if (bindingExtensors != null) {&lt;br/&gt;
262             Iterator&amp;lt;ExtensibilityElement&amp;gt; extensionElements = bindingExtensors.iterator();&lt;br/&gt;
263             while (extensionElements.hasNext()) {&lt;br/&gt;
264                 ExtensibilityElement ext = extensionElements.next();&lt;br/&gt;
265                 if (ext instanceof UnknownExtensibilityElement &amp;amp;&amp;amp; Boolean.TRUE.equals(ext.getRequired())) {&lt;br/&gt;
266  *&lt;b&gt;NPE&lt;/b&gt;*             for (WebServiceFeature feature : this.wsFeatures) {&lt;br/&gt;
267                         if (feature instanceof RespectBindingFeature &amp;amp;&amp;amp; feature.isEnabled()) &lt;/p&gt;
{
268
269                             org.apache.cxf.common.i18n.Message message =
270                                 new org.apache.cxf.common.i18n.Message(&quot;UNKONWN_REQUIRED_WSDL_BINDING&quot;, LOG);
271                             LOG.severe(message.toString());
272                             throw new WebServiceException(message.toString());
273                         }
&lt;p&gt;274                     }&lt;br/&gt;
275                 }&lt;br/&gt;
276             }&lt;br/&gt;
277         }&lt;br/&gt;
278&lt;br/&gt;
279     }&lt;/p&gt;

&lt;p&gt;Solution:  The solution to the NPE is to add a check for a NULL value at line 265 as follows.&lt;/p&gt;

&lt;p&gt;    if (ext instanceof UnknownExtensibilityElement &amp;amp;&amp;amp; Boolean.TRUE.equals(ext.getRequired())&lt;br/&gt;
                    &amp;amp;&amp;amp; this.wsFeatures != null) {&lt;br/&gt;
       ......&lt;/p&gt;

&lt;p&gt;    A NULL value for this.wsFeatures occurs when the service endpoint implementation class &lt;br/&gt;
    does not contain a @MTOM, @ADDRESS, or @RespectBinding annotation.&lt;/p&gt;

&lt;p&gt;    This particular NPE occurs when the scenario above occurs AND there is an &lt;/p&gt;
{any} type&lt;br/&gt;
    stmt (see schema def) in the wsdl&apos;s &quot;binding&quot; &quot;operation&quot; that contains a &lt;br/&gt;
    &quot;wsdl:enable=&apos;true&apos;&quot; attribute.  (see line 124 below)&lt;br/&gt;
&lt;br/&gt;
    [ from the wsdl schema, &lt;br/&gt;
            &amp;lt;wsdl:operation	name = xs:NCName &amp;gt;&lt;br/&gt;
                Content: wsdl:documentation?, {any}
&lt;p&gt;&lt;b&gt;, wsdl:input?, wsdl:output?, wsdl:fault&lt;/b&gt;&lt;br/&gt;
            &amp;lt;/wsdl:operation&amp;gt;&lt;br/&gt;
    ]&lt;/p&gt;

&lt;p&gt;120    &amp;lt;wsdl:binding name=&quot;HelloWorldServiceSoapBinding&quot; type=&quot;tns:HelloWorldService&quot;&amp;gt;&lt;br/&gt;
121        &amp;lt;soap:binding style=&quot;document&quot; transport=&quot;http://schemas.xmlsoap.org/soap/http&quot; /&amp;gt;&lt;br/&gt;
122        &amp;lt;wsdl:operation name=&quot;sayHelloToName&quot;&amp;gt;            &lt;br/&gt;
123            &amp;lt;!-- Gives nullpointer exception EAP 6.1.1 --&amp;gt;&lt;br/&gt;
124  &amp;gt;&amp;gt;&amp;gt;&amp;gt;     &amp;lt;wsp:PolicyReference URI=&quot;#ForceMTOM&quot; wsdl:required=&quot;true&quot; /&amp;gt;&lt;br/&gt;
125            &amp;lt;soap:operation soapAction=&quot;&quot; style=&quot;document&quot; /&amp;gt;&lt;br/&gt;
126            &amp;lt;wsdl:input name=&quot;sayHelloToName&quot;&amp;gt;&lt;br/&gt;
127                &amp;lt;soap:body use=&quot;literal&quot; /&amp;gt;&lt;br/&gt;
128            &amp;lt;/wsdl:input&amp;gt;&lt;br/&gt;
129            &amp;lt;wsdl:output name=&quot;sayHelloToNameResponse&quot;&amp;gt;&lt;br/&gt;
130                &amp;lt;soap:body use=&quot;literal&quot; /&amp;gt;&lt;br/&gt;
131            &amp;lt;/wsdl:output&amp;gt;&lt;br/&gt;
132        &amp;lt;/wsdl:operation&amp;gt;&lt;br/&gt;
133    &amp;lt;/wsdl:binding&amp;gt;&lt;/p&gt;



&lt;p&gt;issue 2. Currently 2.6.x-fixes, 2.7.x-fixes and the trunk is not checking for annotation @RespectBinding.&lt;br/&gt;
        Class org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean.loadWSFeatureAnnotation&lt;br/&gt;
        checks for annotations @MTOM, @ADDRESS and sets up for wsFeatures to contain values.&lt;br/&gt;
        This seems the logical place to add the follow code to check for @RespectBinding.&lt;/p&gt;

&lt;p&gt;        RespectBinding respectBinding = implInfo.getImplementorClass()&lt;br/&gt;
            .getAnnotation(RespectBinding.class);&lt;br/&gt;
        if (respectBinding == null &amp;amp;&amp;amp; serviceClass != null) &lt;/p&gt;
{
            respectBinding = serviceClass.getAnnotation(RespectBinding.class);
        }
&lt;p&gt;        if (respectBinding != null) &lt;/p&gt;
{
            features.add(new RespectBindingFeature(respectBinding.enabled()));
        }


&lt;p&gt;-------&lt;/p&gt;

&lt;p&gt;There are 5 input scenarios for the case of RespectBinding and an &lt;br/&gt;
UnknownExtensibilityElement.&lt;/p&gt;

&lt;p&gt;1.) There is no @RespectBinding annotation defined in the service endpoint &lt;br/&gt;
     implementation class and there is an UnknownExtensibilityElement with a enabled=&quot;true&quot;&lt;br/&gt;
     attribute set in the operation element of a binding.&lt;/p&gt;

&lt;p&gt;     result: RespectBinding is not active because there is no def for it.&lt;br/&gt;
            The UnknownExtensibilityElement request for RespectBinding is ignored.&lt;/p&gt;

&lt;p&gt;2.) There is a @RespectBinding annotation (using the default value of true or explicitly&lt;br/&gt;
     set to true) defined in the service endpoint implementation class and there is an &lt;br/&gt;
     UnknownExtensibilityElement with a enabled=&quot;true&quot; attribute set in the operation &lt;br/&gt;
     element of a binding.&lt;/p&gt;

&lt;p&gt;     result: A fatal exception is thrown at deployment time.  Error msg starts.&lt;br/&gt;
        &quot;Unknown wsdl binding extension with required=true attribute found while &lt;br/&gt;
            RespectBindingFeature enabled&quot;, .....&lt;/p&gt;

&lt;p&gt;3.) There is a @RespectBinding annotation (set to false) defined in the service endpoint &lt;br/&gt;
     implementation class and there is an UnknownExtensibilityElement with a enabled=&quot;true&quot;&lt;br/&gt;
     attribute set in the operation element of a binding.&lt;/p&gt;

&lt;p&gt;     result: RespectBinding is not active because it is set to false.&lt;br/&gt;
            The UnknownExtensibilityElement request for RespectBinding is ignored.&lt;/p&gt;

&lt;p&gt;4.) There is a @RespectBinding annotation (set to false) defined in the service endpoint &lt;br/&gt;
     implementation class and there is an UnknownExtensibilityElement with a enabled=&quot;false&quot;&lt;br/&gt;
     or the attribute is not defined in the operation element of a binding.&lt;/p&gt;

&lt;p&gt;     result: RespectBinding is not active because it is set to false.  The &lt;br/&gt;
            UnknownExtensibilityElement&apos;s RespectBinding request is ignored  &lt;br/&gt;
            because the value is false or not present.   &lt;/p&gt;

&lt;p&gt;5.) There is a @RespectBinding annotation (set to true) defined in the service endpoint &lt;br/&gt;
     implementation class and there is an UnknownExtensibilityElement with a enabled=&quot;false&quot;&lt;br/&gt;
     or the attribute is not defined in the operation element of a binding.&lt;/p&gt;

&lt;p&gt;     result: The UnknownExtensibilityElement&apos;s RespectBinding request is ignored&lt;br/&gt;
             because the value is false or not present. RespectBinding is active &lt;br/&gt;
             because it is set to true.&lt;/p&gt;</comment>
                            <comment id="13806769" author="rsearls" created="Mon, 28 Oct 2013 13:49:53 +0000"  >&lt;p&gt;code changes as described in Fri Oct 25 comment issue 1 and issue 2.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12610558" name="cxf-5341.patch" size="2313" author="rsearls" created="Mon, 28 Oct 2013 13:49:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p0pr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>354222</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>