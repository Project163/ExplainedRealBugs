<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:35:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-1778] Memory leak occurs in specific cases when WS-Addressing feature is enabled</title>
                <link>https://issues.apache.org/jira/browse/CXF-1778</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I observed memory leak  (OOM thrown) in following situations:&lt;/p&gt;

&lt;p&gt;1.WS-Addressing enabled on client and server side. When server stops responding (connection refused on client side) &lt;br/&gt;
client memory usage is increasing until OOM is thrown.&lt;/p&gt;

&lt;p&gt;2.WS-Addressing enabled only on client side, server provide service without WS-Addressing feature (or WS-Addressing configuration is incorrect). Client memory  heap is building up even faster than in first case.&lt;/p&gt;

&lt;p&gt;I will provide a sample application and more detailed description how to reproduce bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12403482">CXF-1778</key>
            <summary>Memory leak occurs in specific cases when WS-Addressing feature is enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="makwieci">Maciej Kwiecien</reporter>
                        <labels>
                    </labels>
                <created>Mon, 1 Sep 2008 10:40:19 +0000</created>
                <updated>Fri, 18 Jan 2019 08:41:49 +0000</updated>
                            <resolved>Wed, 3 Sep 2008 18:21:19 +0000</resolved>
                                    <version>2.1.2</version>
                                    <fixVersion>2.1.3</fixVersion>
                                    <component>WS-* Components</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12627434" author="makwieci" created="Mon, 1 Sep 2008 11:01:13 +0000"  >&lt;p&gt;Pleas find below detailed description how to reproduce bug using attached project.&lt;/p&gt;

&lt;p&gt;Prerequisite: &lt;br/&gt;
1. Import project to Eclipse&lt;/p&gt;

&lt;p&gt;Case #0: No WS-Addressing feature enabled, No memory leaks&lt;/p&gt;

&lt;p&gt;1. Run EchoServer &lt;br/&gt;
2. Run LoadRunner with two arguments:&lt;br/&gt;
    24 - number of simulated client  &lt;br/&gt;
   1800-  test duration in seconds&lt;br/&gt;
and one JVM arg:&lt;br/&gt;
-Dorg.apache.cxf.Logger=org.apache.cxf.common.logging.Log4jLogger (let log4j deal  with logging)&lt;/p&gt;

&lt;p&gt;3. Observe  memory usage for EchoServer and LoadRunner (Wait for a while)&lt;br/&gt;
4. Stop EchoServer&lt;br/&gt;
5.Wait for a while - memory leak should not be observed &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;


&lt;p&gt;Case #1: WS-Addressing enabled on client and service side.&lt;/p&gt;

&lt;p&gt;1. Enable WS-Addressing feature&lt;br/&gt;
    Uncomment &amp;lt;!--  &amp;lt;wsa:addressing /&amp;gt;  --&amp;gt;  in cxf.xml filen in src/main/resources directory&lt;/p&gt;

&lt;p&gt;2. Run EchoServer&lt;br/&gt;
3. Run LoadRunner (the same way as in Case #0)&lt;br/&gt;
4. Observe  memory usage for EchoServer and LoadRunner (Wait for a while)&lt;br/&gt;
5. Stop EchoServer&lt;br/&gt;
6. Observe memory usage for LoadRunner (memory usage should increase and after  a few minutes OOM should appear ( in my case: I run LoadRunner with default heap size value and OOM is thrown when LoadRunner memory usage is aprox. 100MB) &lt;/p&gt;




&lt;p&gt;Case #2: WS-Addressing enabled only on client side, server does not support WS-Addressing&lt;/p&gt;

&lt;p&gt;1.  Disable WS-Addressing feature on EchoServer side.&lt;br/&gt;
Uncomment following section in EchoServer:&lt;/p&gt;

&lt;p&gt;//        SpringBusFactory busFactory = new SpringBusFactory();&lt;br/&gt;
//        URL cxfConfig = new URL(&quot;file:src/main/resources/cxf-server.xml&quot;);&lt;br/&gt;
//        Bus bus = busFactory.createBus(cxfConfig);&lt;br/&gt;
//        BusFactory.setDefaultBus(bus);&lt;/p&gt;

&lt;p&gt;2. Run EchoServer&lt;br/&gt;
3. Run LoadRunner (the same way as in Case #0)&lt;br/&gt;
4. Observe memory usage for LoadRunner (memory usage should increase even faster than in Case #1 and after  a few minutes OOM should appear &lt;/p&gt;


</comment>
                            <comment id="12627436" author="makwieci" created="Mon, 1 Sep 2008 11:09:39 +0000"  >&lt;p&gt;Last but not least,  I attach memory histograms created using jmap.&lt;/p&gt;

&lt;p&gt;histoConnectionRefused.log - created for case #1&lt;br/&gt;
histoEchoServerWithoutWsAddr.log -  created for case #2&lt;/p&gt;

</comment>
                            <comment id="12627950" author="makwieci" created="Wed, 3 Sep 2008 10:15:07 +0000"  >&lt;p&gt;Daniel,&lt;/p&gt;

&lt;p&gt;First of all, I am very gratefull for really quick bug fix.&lt;br/&gt;
Memory leak does not occur  when server doesn&apos;t respond with addressing information any more. &lt;br/&gt;
However, there is still memory leak when server doesn&apos;t respond at all (client receives Connection refused).&lt;/p&gt;

&lt;p&gt;Given that case #1 is stil the issue, let me reopen it. I hope case #1 might be also fixed.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Maciej&lt;/p&gt;</comment>
                            <comment id="12628343" author="makwieci" created="Thu, 4 Sep 2008 14:11:21 +0000"  >
&lt;p&gt;Thanks for quick fix again.&lt;br/&gt;
I&apos;ve tested case#1 (invoked sevice does not respond at all) and it is not the issue any more.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Maciej&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13209333">CXF-7943</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12389283" name="cxf-ws-addr-memory-leak.zip" size="8280" author="makwieci" created="Mon, 1 Sep 2008 11:01:13 +0000"/>
                            <attachment id="12389284" name="histoConnectionRefused.log" size="83187" author="makwieci" created="Mon, 1 Sep 2008 11:09:39 +0000"/>
                            <attachment id="12389285" name="histoEchoServerWithoutWsAddr.log" size="84256" author="makwieci" created="Mon, 1 Sep 2008 11:09:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>112554</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uy7z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>