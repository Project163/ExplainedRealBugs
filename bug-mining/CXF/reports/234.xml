<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:36:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-2085] Applications classloader should be set during method invocations.</title>
                <link>https://issues.apache.org/jira/browse/CXF-2085</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Invocation of a JAX-RS method may depend on some application classes which may not be loaded already, they will be loaded during invocation. But during invocation the classloader will be CXF war application classloader, this will lead to NoClassDefFoundErrors. To avoid this root resource class&apos; classloader should be set on the current thread.&lt;br/&gt;
Similar fix should be applied to provider methods such as readFrom, writeTo etc.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12416110">CXF-2085</key>
            <summary>Applications classloader should be set during method invocations.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="chaitanyak">Chaitanya Choleti</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Mar 2009 14:43:24 +0000</created>
                <updated>Fri, 24 Apr 2009 21:17:08 +0000</updated>
                            <resolved>Tue, 10 Mar 2009 21:54:20 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12679319" author="sergey_beryozkin" created="Thu, 5 Mar 2009 19:38:59 +0000"  >&lt;p&gt;Hi&lt;/p&gt;

&lt;p&gt;Can you provide some simple test case please ? I&apos;m not sure I understand. If a class lazily loaded when one of the resource class methods is being invoked then the resource class loader will be used to load the class first... &lt;/p&gt;

</comment>
                            <comment id="12679581" author="sergey_beryozkin" created="Fri, 6 Mar 2009 12:50:45 +0000"  >&lt;p&gt;thanks - so if you expect the context loader be equal to that of the resource class (HelloClass in your example) loader, then why would not you do&lt;/p&gt;

&lt;p&gt;HelloService.class.getClassLoader(), when loading the properties ?&lt;/p&gt;</comment>
                            <comment id="12679592" author="chaitanyak" created="Fri, 6 Mar 2009 13:39:24 +0000"  >&lt;p&gt;I am sorry. I was not clear enough last time. I hope this example explains why i want to use Thread.currentThread().getContextClassLoader() instead of HelloService.class.getClassLoader().&lt;/p&gt;

&lt;p&gt;use the request urls :          new_cl_test/helloservice/hello and new_cl_test/byeservice/bye&lt;/p&gt;

&lt;p&gt;Thank you for shuch a prompt response.&lt;/p&gt;</comment>
                            <comment id="12679604" author="sergey_beryozkin" created="Fri, 6 Mar 2009 14:29:14 +0000"  >&lt;p&gt;So why don&apos;t we use User.class.getClassLoader() in this case ? it will be the same loader which loaded the class which tries to load User, either HelloService or ByeService ?&lt;/p&gt;</comment>
                            <comment id="12680422" author="chaitanyak" created="Tue, 10 Mar 2009 10:39:11 +0000"  >&lt;p&gt;You are right, we can use User.class.getClassLoader() , but the application developer need not know how CXF works and may use Thread.currentThread().getContextClassLoader() . But I guess that is not your problem.&lt;/p&gt;

&lt;p&gt;Thanks for the help.&lt;/p&gt;</comment>
                            <comment id="12680429" author="sergey_beryozkin" created="Tue, 10 Mar 2009 10:52:18 +0000"  >&lt;p&gt;Hi - my problem is to make sure things work well for a user &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Would you agree that by doing Thread.currentThread().getContextClassLoader() a user code  actually becomes more aware of how things work under the hood ? IMHO, User.class.getClassLoader() is more neutral and is likely to work better, especially given that you do expect the loader of User class (which is the same loader which loaded Hello/Bye service class) be equal to Thread.currentThread().getContextClassLoader().&lt;/p&gt;

&lt;p&gt;Dan, others - any comments ? I&apos;ve not seen JAXWSInvoker setting a Thread.currentThread().getContextClassLoader() to that of the class to be invoked...&lt;/p&gt;
</comment>
                            <comment id="12680487" author="dkulp" created="Tue, 10 Mar 2009 14:47:50 +0000"  >&lt;p&gt;&lt;br/&gt;
The JAXWS invoker probably SHOULD set it.   If the user has a specific XML parser or similar that they want to use (which could be different than the one CXF is using), without the classloader being set, that won&apos;t really work.    &lt;/p&gt;</comment>
                            <comment id="12680636" author="sergey_beryozkin" created="Tue, 10 Mar 2009 21:54:06 +0000"  >&lt;p&gt;It&apos;s an interesting comment which made me think that equally there could be an application code there depending on whatever xml parser provided by the container environment.&lt;br/&gt;
That said I&apos;ve decided to introduce a property, which, if set, will lead to a thread context loader set to that of the resource class loader,&lt;br/&gt;
name of the property is &quot;org.apache.cxf.serviceloader-context&quot;, I could not think of a shorter/better name&lt;/p&gt;

&lt;p&gt;can be set up like this :&lt;/p&gt;

&lt;p&gt;&amp;lt;jaxrs:server address=&quot;/&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;jaxrs:properties&amp;gt;&lt;br/&gt;
       &amp;lt;entry key=&quot;org.apache.cxf.serviceloader-context&quot; value=&quot;true&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/jaxrs:properties&amp;gt;&lt;br/&gt;
  &amp;lt;/jaxrs:server&amp;gt; &lt;/p&gt;

&lt;p&gt;I think it&apos;s a reasonable compromise&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12401619" name="cl_test.war" size="2503" author="chaitanyak" created="Fri, 6 Mar 2009 12:23:12 +0000"/>
                            <attachment id="12401625" name="new_cl_test.war" size="3742" author="chaitanyak" created="Fri, 6 Mar 2009 13:34:33 +0000"/>
                            <attachment id="12401626" name="new_sources.zip" size="2896" author="chaitanyak" created="Fri, 6 Mar 2009 13:35:11 +0000"/>
                            <attachment id="12401620" name="sources.zip" size="1540" author="chaitanyak" created="Fri, 6 Mar 2009 12:24:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>113540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i13zin:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>