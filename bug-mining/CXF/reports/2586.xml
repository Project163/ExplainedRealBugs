<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:16:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6469] schemaLocation in xsd import is not rewritten correctly in Java 8</title>
                <link>https://issues.apache.org/jira/browse/CXF-6469</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;This issue exists for the current and all previous cxf versions that will be run with Java 8.&lt;/p&gt;


&lt;p&gt;Java 7 and Java 8 yield different rewritten schemaLocations for an app that processes multiple&lt;br/&gt;
wsdls.&lt;/p&gt;

&lt;p&gt;Using Java 7, their XSD schemaLocations are correctly expanded like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;import namespace=&quot;http://ossj.org/xml/Common/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEBi/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBEBi-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBECore/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBECore-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEResource/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBEResource-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEDatatypes/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBEDatatypes-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEProduct/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBEProduct-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEProductOffering/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBEProductOffering-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEService/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBEService-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEParty/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-CBEParty-v1-5.xsd&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;But on Java 8, only the first schemaLocation is expanded, the others are not:&lt;/p&gt;

&lt;p&gt;&amp;lt;import namespace=&quot;http://ossj.org/xml/Common/v1-5&quot; schemaLocation=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-Common-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEBi/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBEBi-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBECore/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBECore-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEResource/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBEResource-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEDatatypes/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBEDatatypes-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEProduct/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBEProduct-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEProductOffering/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBEProductOffering-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEService/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBEService-v1-5.xsd&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;import namespace=&quot;http://ossj.org/xml/Common-CBEParty/v1-5&quot; schemaLocation=&quot;./OSSJ-Common-CBEParty-v1-5.xsd&quot;/&amp;gt;&lt;/p&gt;


&lt;p&gt;To reproduce the issue, all you need to do is deploy the attached war file (SmpOrderMgrWebServices.war) and point your browser to:&lt;br/&gt;
&lt;a href=&quot;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-OrderManagement-v1-0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/SmpOrderMgrWebServices/JVTOrderManagementSessionSOAP12?xsd=OSSJ-OrderManagement-v1-0.xsd&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12839350">CXF-6469</key>
            <summary>schemaLocation in xsd import is not rewritten correctly in Java 8</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="asoldano">Alessio Soldano</assignee>
                                    <reporter username="rsearls">Rebecca Searls</reporter>
                        <labels>
                    </labels>
                <created>Sat, 20 Jun 2015 15:48:52 +0000</created>
                <updated>Fri, 14 Oct 2016 14:28:04 +0000</updated>
                            <resolved>Thu, 25 Jun 2015 16:10:46 +0000</resolved>
                                                    <fixVersion>3.0.6</fixVersion>
                    <fixVersion>2.7.17</fixVersion>
                    <fixVersion>3.1.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14594655" author="rsearls" created="Sat, 20 Jun 2015 15:51:14 +0000"  >&lt;p&gt;app demonstrate issue&lt;/p&gt;</comment>
                            <comment id="14594656" author="rsearls" created="Sat, 20 Jun 2015 15:52:24 +0000"  >
&lt;p&gt;The fundamental cause of the difference between running the app with JDK 1.7 and 1.8&lt;br/&gt;
is the order of entries returned from HashMap and apache CXF&apos;s unintended assumption&lt;br/&gt;
about that order.&lt;/p&gt;

&lt;p&gt;Method WSDLGetUtils.updateSchemaImports performs a depth-first processing of schema&lt;br/&gt;
imports (i.e. schemaLocation=) in referenced WSDL and XSD files.  The relative path&lt;br/&gt;
to each schemaLocation is re-calculated relative to the root WSDL in method&lt;br/&gt;
WSDLGetUtils.findSchemaLocation (line 459 in WSDLGetUtils.updateSchemaImports).  A&lt;br/&gt;
reference to the re-calculated schemaLocation path and its corresponding DOM&lt;br/&gt;
element is save in a Map for reference by future passes and document display.&lt;/p&gt;

&lt;p&gt;When using JDK 1.7 the order of root WSDLs processed is  &lt;br/&gt;
    -0 imported/OSSJ-OrderManagement-v1-0.wsdl&lt;br/&gt;
    -1./SmpOrderManagementBase-v1-0.wsdl&lt;br/&gt;
    -2 imported/bw-2.wsdl&lt;/p&gt;

&lt;p&gt;All schemaLocation paths found in the OSSJ-OrderManagement-v1-0 tree are compared&lt;br/&gt;
to, vfs:/content/SmpOrderMgrWebServices.war/WEB-INF/wsdl/imported   &lt;/p&gt;
{/OSSJ-OrderManagement-v1-0.wsdl}
&lt;p&gt;In this file all of the schemaLocation declarations are of the form &quot;./&amp;lt;some&amp;gt;.xsd&quot;.&lt;br/&gt;
This results in reference Map (variable doneSchemas) entries of&lt;br/&gt;
      OSSJ-Common-CBEBi-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-CBEDatatypes-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-CBECore-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-CBELocation-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-CBEService-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-CBEParty-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-CBEProductOffering-v1-5.xsd&lt;br/&gt;
      OSSJ-Common-CBEResource-v1-5.xsd&lt;/p&gt;

&lt;p&gt;The schemaLocation declarations in SmpOrderManagementBase-v1-0.xsd are of the form &quot;imported/&amp;lt;some&amp;gt;.xsd&quot;.&lt;br/&gt;
The processing of SmpOrderManagementBase-v1-0.wsdl yields entries&lt;br/&gt;
    imported/OSSJ-Common-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEBi-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBECore-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-OrderManagement-v1-0.xsd&lt;br/&gt;
which are added to the Map.  &lt;/p&gt;

&lt;p&gt;When using JDK 1.8 the order of root WSDLs processed is&lt;br/&gt;
    -0./SmpOrderManagementBase-v1-0.wsdl&lt;br/&gt;
    -1 imported/OSSJ-OrderManagement-v1-0.wsdl&lt;br/&gt;
    -2 imported/bw-2.wsdl&lt;/p&gt;

&lt;p&gt;All schemaLocation paths found in the SmpOrderManagementBase-v1-0 tree are compared&lt;br/&gt;
to, vfs:/content/SmpOrderMgrWebServices.war/WEB-INF/wsdl/  &lt;/p&gt;
{SmpOrderManagementBase-v1-0.wsdl}
&lt;p&gt;The schemaLocation declarations in SmpOrderManagementBase-v1-0.xsd are registered in Map as&lt;br/&gt;
    imported/OSSJ-Common-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEBi-v1-5.xsd&lt;br/&gt;
    :&lt;br/&gt;
In addition all schemaLocation declarations in OSSJ-OrderManagement-v1-0.xsd are re-calculated to also&lt;br/&gt;
be &quot;imported/&amp;lt;filename&amp;gt;.xsd&quot; because of the path&apos;s relationship to vfs:/content/SmpOrderMgrWebServices.war/WEB-INF/wsdl/.&lt;/p&gt;

&lt;p&gt;This results in reference Map entries of&lt;br/&gt;
    SmpSubscriberEntity-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEService-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEResource-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEProduct-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEDatatypes-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEParty-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEProductOffering-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-OrderManagement-v1-0.xsd&lt;br/&gt;
    SmpCommon-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBELocation-v1-5.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBEBi-v1-5.xsd&lt;br/&gt;
    SmpOrderManagement-v1-0.xsd&lt;br/&gt;
    imported/OSSJ-Common-CBECore-v1-5.xsd&lt;/p&gt;

&lt;p&gt;Map, doneSchema, is use to lookup the the fragment of the URI to use when displaying&lt;br/&gt;
the XSD.  This is done in method WSDLGetUtils.mapUri.&lt;/p&gt;


&lt;p&gt;This path re-calculation with a different ref root path explains why Jan saw a different Map size&lt;br/&gt;
when the app was run with JDK 1.7 and JDK 1.8.  It also explains why the displayed xsd has differences&lt;br/&gt;
in its schemaLocation re-calculation.&lt;/p&gt;
</comment>
                            <comment id="14594659" author="rsearls" created="Sat, 20 Jun 2015 15:55:30 +0000"  >&lt;p&gt;Patch that fixes the issue&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12740862" name="CXF-6469.patch" size="1013" author="rsearls" created="Sat, 20 Jun 2015 15:55:30 +0000"/>
                            <attachment id="12740861" name="SmpOrderMgrWebServices.war" size="100270" author="rsearls" created="Sat, 20 Jun 2015 15:51:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 22 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gawv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>