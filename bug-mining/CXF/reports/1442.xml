<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:55:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4477] [WADL2JAVA] Generate incorrect primitive parameter type </title>
                <link>https://issues.apache.org/jira/browse/CXF-4477</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;In org.apache.cxf.tools.wadlto.jaxrs.SourceGenerator we have the code like this:&lt;/p&gt;

&lt;p&gt;XSD_SPECIFIC_TYPE_MAP = new HashMap&amp;lt;String, String&amp;gt;();&lt;br/&gt;
XSD_SPECIFIC_TYPE_MAP.put(&quot;string&quot;, &quot;String&quot;);&lt;br/&gt;
XSD_SPECIFIC_TYPE_MAP.put(&quot;decimal&quot;, &quot;java.math.BigInteger&quot;);&lt;br/&gt;
XSD_SPECIFIC_TYPE_MAP.put(&quot;integer&quot;, &quot;long&quot;);&lt;/p&gt;

&lt;p&gt;If we have a wadl like this:&lt;br/&gt;
&amp;lt;param name=&quot;param1&quot; required=&quot;true&quot; style=&quot;query&quot; type=&quot;xs:int&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;param name=&quot;param2&quot; required=&quot;true&quot; style=&quot;query&quot; type=&quot;xs:long&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;it&apos;s always generate (String param1) and (String param2)&lt;br/&gt;
So far as I know, xs:int and xs:long beside xs:string are the most usage type in WADL. But now it can not work any more!!!!&lt;/p&gt;



&lt;p&gt;I think this is a regression bug from&lt;/p&gt;

&lt;p&gt;**********************************************************&lt;br/&gt;
sergeyb  08.05.12 19:25:44&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-4292&quot; title=&quot;Incorrect code generated with wadl2java tool when use JAXB binding and XML symple type with restriction.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-4292&quot;&gt;&lt;del&gt;CXF-4292&lt;/del&gt;&lt;/a&gt; Defaulting to String when WADL Generator can not determine a class name of the primitive type&lt;br/&gt;
**********************************************************&lt;/p&gt;


&lt;p&gt;For the solution, I think we can expand XSD_SPECIFIC_TYPE_MAP which the exactly mapping as a standard:&lt;br/&gt;
&lt;a href=&quot;http://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://en.wikipedia.org/wiki/Java_Architecture_for_XML_Binding&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you please have a look on this issue.&lt;br/&gt;
Many many many thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12603945">CXF-4477</key>
            <summary>[WADL2JAVA] Generate incorrect primitive parameter type </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sergey_beryozkin">Sergey Beryozkin</assignee>
                                    <reporter username="hoanvuphan">Hoan-Vu Phan</reporter>
                        <labels>
                    </labels>
                <created>Sat, 18 Aug 2012 06:25:50 +0000</created>
                <updated>Thu, 8 Nov 2012 17:14:58 +0000</updated>
                            <resolved>Thu, 23 Aug 2012 10:30:31 +0000</resolved>
                                    <version>2.6.1</version>
                                    <fixVersion>2.5.6</fixVersion>
                    <fixVersion>2.6.3</fixVersion>
                    <fixVersion>2.7</fixVersion>
                                    <component>JAX-RS</component>
                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13438529" author="hoanvuphan" created="Tue, 21 Aug 2012 08:19:22 +0000"  >&lt;p&gt;Special thanks to Sergeyb for very fast response &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
But it still does not work for my case &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
In case of form submit, for example:&lt;/p&gt;

&lt;p&gt;&amp;lt;representation mediaType=&quot;application/x-www-form-urlencoded&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;param name=&quot;param1&quot; required=&quot;false&quot; style=&quot;query&quot; type=&quot;xs:long&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/representation&amp;gt;&lt;/p&gt;

&lt;p&gt;It generates:&lt;/p&gt;

&lt;p&gt;@FormParam(&quot;param1&quot;) long param1&lt;/p&gt;

&lt;p&gt;But it should be:&lt;br/&gt;
@FormParam(&quot;param1&quot;) Long param1&lt;/p&gt;

&lt;p&gt;I found in org.apache.cxf.tools.wadlto.jaxrs.SourceGenerator&lt;/p&gt;

&lt;p&gt;String type = enumCreated ? getTypicalClassName(name) : getPrimitiveType(paramEl, info, imports);&lt;br/&gt;
if (paramAnn == QueryParam.class &lt;br/&gt;
    &amp;amp;&amp;amp; (isRepeating || !Boolean.valueOf(paramEl.getAttribute(&quot;required&quot;)))    &lt;br/&gt;
    &amp;amp;&amp;amp; AUTOBOXED_PRIMITIVES_MAP.containsKey(type)) {&lt;br/&gt;
         type = AUTOBOXED_PRIMITIVES_MAP.get(type);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;We have a check (paramAnn == QueryParam.class) that ignore FormParam case. Am i right? Is there any reason here?&lt;br/&gt;
Besides, I saw in your commit, we have a check like that:&lt;/p&gt;

&lt;p&gt;if (schemaTypesMap.containsKey(value)) {&lt;br/&gt;
    return schemaTypesMap.get(value);&lt;br/&gt;
}&lt;/p&gt;

&lt;p&gt;It means, user can defined a customize map types. But it will ignore the name space??? Maybe we will some type conflict between difference name spaces? It&apos;s not my case, but just for you information.&lt;/p&gt;

&lt;p&gt;Best regards.&lt;/p&gt;


</comment>
                            <comment id="13438725" author="sergey_beryozkin" created="Tue, 21 Aug 2012 13:35:18 +0000"  >&lt;p&gt;Thanks for the quick test on your end.&lt;/p&gt;

&lt;p&gt;I&apos;ve updated the generator to autobox when needed all the optional parameters (form, header, param, query).&lt;/p&gt;

&lt;p&gt;As far as &apos;schemaTypesMap&apos; is concerned I thought I would reuse it for 2 purposes, first one for mapping between the default Java types allocated to either parameter and representation types and the preferred types (we&apos;ve had only a case of W3C EPR so far) and overriding the default primitive mappings (ex, xs:date -&amp;gt; java.util.Date by default in the generator to say Calendar) but now I&apos;ve decided to use it for java to java mappings only, to avoid any ambiguities. So if say you&apos;d like to restore a default (JAXB) mapping between &apos;xs:date&apos; and Calendar then you&apos;d use a &apos;java.util.Date -&amp;gt; Calendar&apos; mapping. If really needed I&apos;d then add another property for customizing the mapping between schema types and java classes&lt;/p&gt;
</comment>
                            <comment id="13439319" author="hoanvuphan" created="Wed, 22 Aug 2012 07:02:29 +0000"  >&lt;p&gt;It&apos;s clear to me, and it&apos;s really nice Sergey &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I think, we don&apos;t need to have a mapping between schema types and java classes because it is jaxb bindings work.&lt;br/&gt;
We just need a mapping between primitive types for the interface generating.&lt;/p&gt;

&lt;p&gt;Now, I work perfectly &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks for your commitment.&lt;br/&gt;
Best regards.&lt;/p&gt;

</comment>
                            <comment id="13439569" author="sergey_beryozkin" created="Wed, 22 Aug 2012 14:38:33 +0000"  >&lt;p&gt;After thinking again about, I decided to restore schemaTypeMap, the keys are expanded qnames, that can help to customize the default mappings for primitive types but also, what is more interesting is to avoid generating the schema classes in cases when we say have Atom service description and still map representation element references to classes like Abdera Feed, etc&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239891</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00umf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>