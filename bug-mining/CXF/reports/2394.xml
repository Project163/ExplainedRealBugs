<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:12:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-6034] Wrong schemaLocation if jax-ws-catalog is used</title>
                <link>https://issues.apache.org/jira/browse/CXF-6034</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;When &lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;using a WSDL-first approach,&lt;/li&gt;
	&lt;li&gt;defining endpoints so that &lt;b&gt;your&lt;/b&gt; (not generated) WSDL is provided,&lt;/li&gt;
	&lt;li&gt;using jax-ws-catalog&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;the WSDL given out to the client is sometimes incorrect.&lt;/p&gt;

&lt;p&gt;Specifically, having entries in jax-ws-catalog like these&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; publicId=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/main/schema&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;../main/schema.xsd&quot;&lt;/span&gt; /&amp;gt;
&lt;/span&gt;    &amp;lt;system systemId=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/main/schema&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;../main/schema.xsd&quot;&lt;/span&gt; /&amp;gt;
&lt;/span&gt;
    &amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; publicId=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/auxiliary/schema&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;../auxiliary/auxiliary.xsd&quot;&lt;/span&gt; /&amp;gt;
&lt;/span&gt;    &amp;lt;system systemId=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/auxiliary/schema&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;../auxiliary/auxiliary.xsd&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And having XSD imports in your types section of WSDL like these:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;xs:schema targetNamespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/main/customer-service&quot;&lt;/span&gt; ...&amp;gt;
&lt;/span&gt;    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; fails --&amp;gt;
    &amp;lt;xsd:&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/main/schema&quot;&lt;/span&gt; schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://test.com/main/schema&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; works --&amp;gt;
    &amp;lt;xsd:&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/auxiliary/schema&quot;&lt;/span&gt; schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://test.com/auxiliary/schema&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;&amp;lt;/xs:schema&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The resulting WSDL is like this (showing only the relevant part):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;xs:schema targetNamespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/main/customer-service&quot;&lt;/span&gt; ...&amp;gt;
&lt;/span&gt;    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; fails --&amp;gt;
    &amp;lt;xsd:&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/main/schema&quot;&lt;/span&gt; schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://test.com/main/schema&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;    &amp;lt;!-- &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; works --&amp;gt;
    &amp;lt;xsd:&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//test.com/auxiliary/schema&quot;&lt;/span&gt; schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://localhost:9090/CustomerServicePort?xsd=http://test.com/auxiliary/schema&quot;&lt;/span&gt;/
&lt;/span&gt;&amp;lt;/xs:schema&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;(note the wrong schemaLocation attribute in the first import)&lt;/p&gt;

&lt;p&gt;The problem occurs when the URI of the resource being imported is the same as (except for its last segment) the URI of the WSDL itself. In this case, *&lt;a href=&quot;http://test.com/main/*schema&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://test.com/main/*schema&lt;/a&gt;  vs. *&lt;a href=&quot;http://test.com/main/*customer-service&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://test.com/main/*customer-service&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;I was able to fix this preliminarily by disabling &quot;optimization&quot; used in WSDLGetUtils.findSchemaLocation, namely this code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (docBase != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; imp.getReferencedSchema() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; baseURI = URLDecoder.decode(UrlUtils.getStem(docBase), &lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;);
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; importURI = URLDecoder.decode(imp.getReferencedSchema().getDocumentBaseURI(), &lt;span class=&quot;code-quote&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (importURI.contains(baseURI)) {
                    schemaLocationURI = importURI.substring(baseURI.length() + 1);
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
                &lt;span class=&quot;code-comment&quot;&gt;//ignore
&lt;/span&gt;            }

        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, I&apos;m sure this is in fact a workaround; there should exist a cleaner solution.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12745457">CXF-6034</key>
            <summary>Wrong schemaLocation if jax-ws-catalog is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="mederly">Pavol Mederly</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Oct 2014 10:00:59 +0000</created>
                <updated>Mon, 16 Feb 2015 16:09:11 +0000</updated>
                            <resolved>Mon, 27 Oct 2014 19:47:22 +0000</resolved>
                                    <version>3.0.1</version>
                                    <fixVersion>3.0.3</fixVersion>
                    <fixVersion>2.7.14</fixVersion>
                                    <component>Simple Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14156304" author="mederly" created="Thu, 2 Oct 2014 10:32:11 +0000"  >&lt;p&gt;wsdl_first.zip: a demonstration project (modified wsdl_first sample). After running it, point your browser to &lt;a href=&quot;http://localhost:9090/CustomerServicePort?wsdl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9090/CustomerServicePort?wsdl&lt;/a&gt; and see the result.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12672529" name="wsdl_first.zip" size="7688" author="mederly" created="Thu, 2 Oct 2014 10:32:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20pz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>