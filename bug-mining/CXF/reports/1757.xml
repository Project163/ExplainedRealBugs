<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:00:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-4870] osgi field is always false when creating a SpringBus via SpringBusFactory in OSGI ENV</title>
                <link>https://issues.apache.org/jira/browse/CXF-4870</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;when using following code to create Camel CXF endpoint bus:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;SpringCamelContext springCamelContext = (SpringCamelContext) context;
ApplicationContext applicationContext = springCamelContext.getApplicationContext();
busFactory = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpringBusFactory(applicationContext);
busFactory.createBus();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;after deployed into Karaf, some extension can&apos;t be loaded.&lt;/p&gt;

&lt;p&gt;I checked the source code, the &lt;b&gt;osgi&lt;/b&gt; flag of &lt;b&gt;SpringBeanLocator&lt;/b&gt; is always false, because the &lt;b&gt;context&lt;/b&gt; is an instanceof &lt;b&gt;BusApplicationContext&lt;/b&gt; (created in method &lt;b&gt;createApplicationContext()&lt;/b&gt; of SpringBusFactory), and it has no &lt;b&gt;getBundleContext&lt;/b&gt; method.&lt;/p&gt;

&lt;p&gt;and in &lt;b&gt;OSGIBusListener&lt;/b&gt; class, only when registered &lt;b&gt;ConfiguredBeanLocator&lt;/b&gt; object is an instanceof &lt;b&gt;ExtensionManagerImpl&lt;/b&gt;, the &lt;b&gt;OSGiBeanLocator&lt;/b&gt; will be used:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void registerConfiguredBeanLocator() {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ConfiguredBeanLocator cbl = bus.getExtension(ConfiguredBeanLocator.class);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cbl &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ExtensionManagerImpl) {
            &lt;span class=&quot;code-comment&quot;&gt;// wire in the OSGi things
&lt;/span&gt;            bus.setExtension(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OSGiBeanLocator(cbl, defaultContext), 
                             ConfiguredBeanLocator.class);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and &lt;b&gt;SpringBeanLocator&lt;/b&gt; is not an instanceof &lt;b&gt;ExtensionManagerImpl&lt;/b&gt;, so we can&apos;t load the extensions in OSGI ENV.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635089">CXF-4870</key>
            <summary>osgi field is always false when creating a SpringBus via SpringBusFactory in OSGI ENV</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="gangliu">liugang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Mar 2013 09:07:01 +0000</created>
                <updated>Wed, 14 Aug 2013 15:50:11 +0000</updated>
                            <resolved>Mon, 3 Jun 2013 08:45:19 +0000</resolved>
                                    <version>2.7.3</version>
                                    <fixVersion>2.6.8</fixVersion>
                    <fixVersion>2.7.5</fixVersion>
                                    <component>OSGi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13604905" author="njiang" created="Mon, 18 Mar 2013 06:45:06 +0000"  >&lt;p&gt;SpringBusFactory will create a BusApplicationContext which has no getBundlerContext method.&lt;br/&gt;
This issue can be fixed by let the SpringBeanLocator look up the bundleContext from the application context and the parent application context.&lt;/p&gt;

&lt;p&gt;I just committed a quick fix for it.&lt;br/&gt;
Please feel free to verify it with the latest CXF 2.7.x-SNAPSHOT.&lt;/p&gt;
</comment>
                            <comment id="13604914" author="gangliu" created="Mon, 18 Mar 2013 07:04:38 +0000"  >&lt;p&gt;Great, Thanks alot!&lt;/p&gt;</comment>
                            <comment id="13633811" author="njiang" created="Wed, 17 Apr 2013 05:50:52 +0000"  >&lt;p&gt;When I trace the issue of &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-6257&quot; title=&quot;CXF Example OSGi fail in Karaf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-6257&quot;&gt;&lt;del&gt;CAMEL-6257&lt;/del&gt;&lt;/a&gt;, I found this patch is not right, so I reopen the issue here.&lt;/p&gt;</comment>
                            <comment id="13672902" author="njiang" created="Mon, 3 Jun 2013 08:45:19 +0000"  >&lt;p&gt;Updated the fixed version.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12642864">CXF-4970</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315582</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 25 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1igg7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315925</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>