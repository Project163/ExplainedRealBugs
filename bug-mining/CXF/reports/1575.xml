<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:57:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-3329] idl2wsdl: attributes of structs with the same name as a type do not show up in XSD</title>
                <link>https://issues.apache.org/jira/browse/CXF-3329</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;I am using idl2wsdl to generate a XML schema from a set of type definitions in IDL using the cxf-corbatools-maven-plugin. If the IDL has structures containing attributes with the same name as a type in the same IDL, that attribute does not show up in the generated XSD.&lt;/p&gt;

&lt;p&gt;For example, the following IDL definition:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;module myModule
{
	struct myStruct
	{
		&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; myStruct;
		&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; otherField;
	};
};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in the XSD below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:schema attributeFormDefault=&lt;span class=&quot;code-quote&quot;&gt;&quot;unqualified&quot;&lt;/span&gt; elementFormDefault=&lt;span class=&quot;code-quote&quot;&gt;&quot;unqualified&quot;&lt;/span&gt; targetNamespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://my.company.com&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:tns&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://my.company.com&quot;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;xmlns:xs&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:complexType name=&lt;span class=&quot;code-quote&quot;&gt;&quot;myModule.myStruct&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:sequence&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:element name=&lt;span class=&quot;code-quote&quot;&gt;&quot;otherField&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;xs:int&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
      &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:element&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:sequence&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:complexType&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:schema&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The attribute myStruct from the IDL is not present in the XSD.&lt;/p&gt;

&lt;p&gt;The output of idl2wsdl is as follows:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;idl2wsdl -o path/to/output -x http://my.company.com -T types.xsd -verbose path/to/types.idl
idl2wsdl - Apache CXF 2.3.3-SNAPSHOT

 ( module myModule ( struct myStruct long myStruct long otherField ) )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12498369">CXF-3329</key>
            <summary>idl2wsdl: attributes of structs with the same name as a type do not show up in XSD</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="arnoud">Arnoud Glimmerveen</reporter>
                        <labels>
                            <label>idl2wsdl</label>
                    </labels>
                <created>Fri, 11 Feb 2011 14:22:44 +0000</created>
                <updated>Wed, 19 Dec 2012 14:38:38 +0000</updated>
                            <resolved>Wed, 5 Dec 2012 20:34:52 +0000</resolved>
                                    <version>2.3.2</version>
                    <version>2.3.3</version>
                                    <fixVersion>2.5.7</fixVersion>
                    <fixVersion>2.6.4</fixVersion>
                    <fixVersion>2.7.1</fixVersion>
                                    <component>Tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12993572" author="ulhasbhole" created="Fri, 11 Feb 2011 16:43:02 +0000"  >&lt;p&gt;Can you attach a sample idl file? I wouldn&apos;t mind having a quick look into it since I recently fixed similar duplicate attributes issue. &lt;/p&gt;</comment>
                            <comment id="12993596" author="arnoud" created="Fri, 11 Feb 2011 17:23:14 +0000"  >&lt;p&gt;I attached the sample as IDL file. The attribute myStruct does not appear in the generated XSD.&lt;/p&gt;</comment>
                            <comment id="12994414" author="ulhasbhole" created="Mon, 14 Feb 2011 18:44:29 +0000"  >&lt;p&gt;I had a initial look at the code and some debugging on the simple idl that from the example in this Jira and the issue here is while traversing the idl one of the checks is for forward reference of a type and in that case it recursively checks for the scope type subtracting one element from scope each time and type name. so it passes first phase where scope is myModule.myStruct.myStruct being not present in the scopeNames list however on the next cycle it tries to find myModule.myStruct in scopes and it finds the entry and treats it as forward reference. Here is the method that inturn calls a check isForwardReference() in ScopedNameVisitor.accept() call. if you look at the code it check for the scope removing one element at a time with the member name added to it. So in this case it will check for myModule.myStruct.myStruct then myModule.myStruct. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void visitStructMembers(AST identifierNode, Struct struct,
                                    XmlSchemaSequence sequence,
                                    Scope structScope) {
        AST memberTypeNode = identifierNode.getNextSibling();
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (memberTypeNode != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            AST memberNode = TypesUtils.getCorbaTypeNameNode(memberTypeNode);
            
            XmlSchemaType schemaType = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            CorbaTypeImpl corbaType = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            Scope fqName = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                TypesVisitor visitor = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TypesVisitor(structScope,
                                                        definition,
                                                        schema,
                                                        wsdlVisitor,
                                                        &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
                visitor.visit(memberTypeNode);                
                schemaType = visitor.getSchemaType();
                corbaType = visitor.getCorbaType();
                fqName = visitor.getFullyQualifiedName();                
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(ex);
            }

            &lt;span class=&quot;code-comment&quot;&gt;// Handle multiple struct member declarators
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;declarators&amp;gt; :== &amp;lt;declarator&amp;gt; { &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt; &amp;lt;declarator&amp;gt; }*
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;//
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// A multiple declarator must be an identifier (i.e. of type IDENT)
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// and cannot be a previous declared (or forward declared) type
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// (hence the ScopedNameVisitor.accept() call).
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (memberNode != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
                   &amp;amp;&amp;amp; memberNode.getType() == IDLTokenTypes.IDENT
                   &amp;amp;&amp;amp; !ScopedNameVisitor.accept(structScope, definition, schema, memberNode, wsdlVisitor)) {

                XmlSchemaType memberSchemaType = schemaType;
                CorbaTypeImpl memberCorbaType = corbaType;
                &lt;span class=&quot;code-comment&quot;&gt;// needed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; anonymous arrays in structs 
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ArrayVisitor.accept(memberNode)) {
                    Scope anonScope = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Scope(structScope,
                                                TypesUtils.getCorbaTypeNameNode(memberTypeNode));
                    ArrayVisitor arrayVisitor = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayVisitor(anonScope,
                                                                 definition,
                                                                 schema,
                                                                 wsdlVisitor,
                                                                 &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;,
                                                                 fqName);
                    arrayVisitor.setSchemaType(schemaType);
                    arrayVisitor.setCorbaType(corbaType);
                    arrayVisitor.visit(memberNode);
                    memberSchemaType = arrayVisitor.getSchemaType();
                    memberCorbaType = arrayVisitor.getCorbaType();
                    fqName = arrayVisitor.getFullyQualifiedName();
                }

                XmlSchemaElement member = 
                    createXmlSchemaElement(memberNode, memberSchemaType, fqName);
                sequence.getItems().add(member);           
                MemberType memberType = 
                    createMemberType(memberNode, memberCorbaType, fqName);            
                struct.getMember().add(memberType);
                
                memberNode = memberNode.getNextSibling();
            }
            
            memberTypeNode = memberNode;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12470876" name="sample.idl" size="80" author="arnoud" created="Fri, 11 Feb 2011 17:23:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46893</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i146yf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>232590</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>