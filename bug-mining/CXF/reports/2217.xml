<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:09:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5664] CXF STS does not support wst:Participants</title>
                <link>https://issues.apache.org/jira/browse/CXF-5664</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;The CXF STS does not recognize the wst:Participants element within a wst:RequestSecurityToken, and instead throws a BadRequest SOAP fault. The Participants element should be parsed and added to the list of AudienceRestrictions in the issued token.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12706000">CXF-5664</key>
            <summary>CXF STS does not support wst:Participants</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="coheigea">Colm O hEigeartaigh</assignee>
                                    <reporter username="SwChappell">Stephen Chappell</reporter>
                        <labels>
                            <label>features</label>
                            <label>security</label>
                    </labels>
                <created>Tue, 1 Apr 2014 16:53:45 +0000</created>
                <updated>Fri, 11 Jul 2014 12:50:25 +0000</updated>
                            <resolved>Mon, 14 Apr 2014 10:47:45 +0000</resolved>
                                    <version>2.7.8</version>
                    <version>2.7.9</version>
                    <version>2.7.10</version>
                                    <fixVersion>3.0</fixVersion>
                    <fixVersion>2.7.12</fixVersion>
                                    <component>STS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13956760" author="swchappell" created="Tue, 1 Apr 2014 17:03:23 +0000"  >&lt;p&gt;Here is a sample request minus a few security headers:&lt;/p&gt;

&lt;p&gt;&amp;lt;soapenv:Envelope xmlns:ns=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512&quot; xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;soapenv:Header xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;wsse:Security soapenv:mustUnderstand=&quot;1&quot; xmlns:wsse=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;wsu:Timestamp wsu:Id=&quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/TS-569&quot; title=&quot;Create a new top level directory for project local libraries.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TS-569&quot;&gt;&lt;del&gt;TS-569&lt;/del&gt;&lt;/a&gt;&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;wsu:Created&amp;gt;2014-04-01T16:56:46.902Z&amp;lt;/wsu:Created&amp;gt;&lt;br/&gt;
            &amp;lt;wsu:Expires&amp;gt;2014-04-01T17:01:46.902Z&amp;lt;/wsu:Expires&amp;gt;&lt;br/&gt;
         &amp;lt;/wsu:Timestamp&amp;gt;&lt;br/&gt;
      &amp;lt;/wsse:Security&amp;gt;&lt;br/&gt;
      &amp;lt;wsa:Action wsu:Id=&quot;id-571&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;&lt;a href=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oasis-open.org/ws-sx/ws-trust/200512/RST/Issue&lt;/a&gt;&amp;lt;/wsa:Action&amp;gt;&lt;br/&gt;
      &amp;lt;wsa:MessageID wsu:Id=&quot;id-572&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;uuid:ce62c391-310c-4e69-8ee6-0dd0f9320987&amp;lt;/wsa:MessageID&amp;gt;&lt;br/&gt;
      &amp;lt;wsa:To wsu:Id=&quot;id-570&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;&lt;a href=&quot;http://localhost:9080/FAA-IAM-STS/STS-BST&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9080/FAA-IAM-STS/STS-BST&lt;/a&gt;&amp;lt;/wsa:To&amp;gt;&lt;br/&gt;
   &amp;lt;/soapenv:Header&amp;gt;&lt;br/&gt;
   &amp;lt;soapenv:Body wsu:Id=&quot;id-245&quot; xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;wst:RequestSecurityToken xmlns:wst=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;wst:RequestType&amp;gt;&lt;a href=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue&lt;/a&gt;&amp;lt;/wst:RequestType&amp;gt;&lt;/p&gt;

&lt;p&gt;         &amp;lt;wsp:AppliesTo xmlns:wsp=&quot;http://www.w3.org/ns/ws-policy&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;wsp:URI&amp;gt;&lt;a href=&quot;http://localhost:8080/testep&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/testep&lt;/a&gt;&amp;lt;/wsp:URI&amp;gt;&lt;br/&gt;
         &amp;lt;/wsp:AppliesTo&amp;gt;&lt;br/&gt;
         &amp;lt;wst:SecondaryParameters&amp;gt;&lt;br/&gt;
            &amp;lt;wst:TokenType&amp;gt;&lt;a href=&quot;http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0&lt;/a&gt;&amp;lt;/wst:TokenType&amp;gt;&lt;br/&gt;
         &amp;lt;/wst:SecondaryParameters&amp;gt;&lt;/p&gt;

&lt;p&gt;         &amp;lt;wst:UseKey&amp;gt;&lt;br/&gt;
            &amp;lt;ds:KeyInfo xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&amp;gt;&lt;br/&gt;
               &amp;lt;ds:X509Data&amp;gt;&lt;br/&gt;
                  &amp;lt;ds:X509Certificate&amp;gt;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&amp;lt;/ds:X509Certificate&amp;gt;&lt;br/&gt;
               &amp;lt;/ds:X509Data&amp;gt;&lt;br/&gt;
            &amp;lt;/ds:KeyInfo&amp;gt;&lt;br/&gt;
         &amp;lt;/wst:UseKey&amp;gt;&lt;/p&gt;

&lt;p&gt;         &amp;lt;wst:Participants&amp;gt;&lt;br/&gt;
            &amp;lt;wst:Participant&amp;gt;&lt;br/&gt;
               &amp;lt;wsa:EndpointReference xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;&lt;br/&gt;
                  &amp;lt;wsa:Address&amp;gt;&lt;a href=&quot;http://localhost:8080/testep&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/testep&lt;/a&gt;&amp;lt;/wsa:Address&amp;gt;&lt;br/&gt;
               &amp;lt;/wsa:EndpointReference&amp;gt;&lt;br/&gt;
               &amp;lt;wsp:URI xmlns:wsp=&quot;http://www.w3.org/ns/ws-policy&quot;&amp;gt;&lt;a href=&quot;http://cxf.apache.org/endpoint&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/endpoint&lt;/a&gt;&amp;lt;/wsp:URI&amp;gt;&lt;br/&gt;
            &amp;lt;/wst:Participant&amp;gt;&lt;br/&gt;
         &amp;lt;/wst:Participants&amp;gt;&lt;br/&gt;
      &amp;lt;/wst:RequestSecurityToken&amp;gt;&lt;br/&gt;
   &amp;lt;/soapenv:Body&amp;gt;&lt;br/&gt;
&amp;lt;/soapenv:Envelope&amp;gt;&lt;/p&gt;

</comment>
                            <comment id="13957724" author="coheigea" created="Wed, 2 Apr 2014 14:59:04 +0000"  >
&lt;p&gt;I&apos;ve merged an update where the RequestParser parses a wst:Participants object into a &quot;Participants&quot; class, which stores a primary participants (Object) and a list of other participant (objects). This Participants object is available to the token providers in the standard way.&lt;/p&gt;

&lt;p&gt;&amp;gt; The Participants element should be parsed and added to the list of AudienceRestrictions in the issued token.&lt;/p&gt;

&lt;p&gt;Currently we create a single AudienceRestriction from the AppliesTo URI sent in the request (if applicable). I would suggest that we don&apos;t add the primary participant to the AudienceRestrictions, as my interpretation of the spec is that the primary participant here is the client.&lt;/p&gt;

&lt;p&gt;The question is whether the other participants should be added under the same AudienceRestriction as the AppliesTo address? Should we ignore the AppliesTo address if we have explicit participants? If we have multiple participants, should they go into the same AudienceRestriction Object (as multiple audiences), or should we have multiple AudienceRestrictions per participant?&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="13960286" author="swchappell" created="Fri, 4 Apr 2014 18:59:52 +0000"  >&lt;p&gt;&amp;gt; The question is whether the other participants should be added under the same AudienceRestriction as the AppliesTo &lt;br/&gt;
&amp;gt; address? Should we ignore the AppliesTo address if we have explicit participants? If we have multiple participants, &lt;br/&gt;
&amp;gt; should they go into the same AudienceRestriction Object (as multiple audiences), or should we have multiple &lt;br/&gt;
&amp;gt; AudienceRestrictions per participant?&lt;/p&gt;

&lt;p&gt;The requirements that I am working to require that both AppliesTo and Participants (including the Primary) are added to an AudienceRestriction elements. It also appears that there&apos;s an AudienceRestriciton element for each Participant (and AppliesTo) element. So given a choice, that&apos;s what I&apos;d be looking for.&lt;/p&gt;

&lt;p&gt;I think it would be more broadly applicable though if this sort of thing were configurable, or left for to be implemented through derived objects that let the implementor choose. &lt;/p&gt;</comment>
                            <comment id="13968220" author="coheigea" created="Mon, 14 Apr 2014 10:47:38 +0000"  >
&lt;p&gt;Ok this should now be fixed for CXF 2.7.12-SNAPSHOT if you want to give it a try. The default behaviour is to add each participant EPR address as an AudienceRestrictionCondition. There is a method in the DefaultConditionsProvider that can be changed to handle other behaviour for participants if required.&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="13968341" author="swchappell" created="Mon, 14 Apr 2014 13:24:27 +0000"  >&lt;p&gt;It doesn&apos;t look like this is working. I&apos;ve updated my pom file to point to 2.7.12-SNAPSHOT and switched back to the DefaultConditionsProvider, and had this message exchange ...&lt;/p&gt;


&lt;p&gt;&amp;#8212; Request &amp;#8212;&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:wsa=&quot;http://www.w3.org/2005/08/addressing&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;soapenv:Header&amp;gt;&lt;br/&gt;
        &amp;lt;!-- Security stuff --&amp;gt;&lt;br/&gt;
    &amp;lt;/soapenv:Header&amp;gt;&lt;br/&gt;
    &amp;lt;soapenv:Body xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;id-16705926&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;RequestSecurityToken xmlns=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512&quot; Context=&quot;urn:itko.com&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;RequestType&amp;gt;&lt;a href=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oasis-open.org/ws-sx/ws-trust/200512/Issue&lt;/a&gt;&amp;lt;/RequestType&amp;gt;&lt;br/&gt;
            &amp;lt;wsp:AppliesTo xmlns:wsp=&quot;http://www.w3.org/ns/ws-policy&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;wsp:URI&amp;gt;&lt;a href=&quot;http://cxf.apache.org/appliesto-uri&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/appliesto-uri&lt;/a&gt;&amp;lt;/wsp:URI&amp;gt;&lt;br/&gt;
            &amp;lt;/wsp:AppliesTo&amp;gt;&lt;br/&gt;
            &amp;lt;SecondaryParameters&amp;gt;&lt;br/&gt;
                &amp;lt;TokenType&amp;gt;&lt;a href=&quot;http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0&lt;/a&gt;&amp;lt;/TokenType&amp;gt;&lt;br/&gt;
            &amp;lt;/SecondaryParameters&amp;gt;&lt;br/&gt;
            &amp;lt;UseKey&amp;gt;&lt;br/&gt;
                &amp;lt;ds:KeyInfo xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&amp;gt;&lt;br/&gt;
                    &amp;lt;ds:X509Data&amp;gt;&lt;br/&gt;
                        &amp;lt;ds:X509Certificate&amp;gt;&amp;lt;!-- Certificate --&amp;gt;&amp;lt;/ds:X509Certificate&amp;gt;&lt;br/&gt;
                    &amp;lt;/ds:X509Data&amp;gt;&lt;br/&gt;
                &amp;lt;/ds:KeyInfo&amp;gt;&lt;br/&gt;
            &amp;lt;/UseKey&amp;gt;&lt;br/&gt;
            &amp;lt;wst:Participants xmlns:wst=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;wst:Primary&amp;gt;&lt;br/&gt;
                    &amp;lt;wsa:EndpointReference&amp;gt;&lt;br/&gt;
                        &amp;lt;wsa:Address&amp;gt;&lt;a href=&quot;http://participant.primary/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://participant.primary/&lt;/a&gt;&amp;lt;/wsa:Address&amp;gt;&lt;br/&gt;
                    &amp;lt;/wsa:EndpointReference&amp;gt;&lt;br/&gt;
                &amp;lt;/wst:Primary&amp;gt;&lt;br/&gt;
                &amp;lt;wst:Participant&amp;gt;&lt;br/&gt;
                    &amp;lt;wsa:EndpointReference&amp;gt;&lt;br/&gt;
                        &amp;lt;wsa:Address&amp;gt;&lt;a href=&quot;http://participant.one/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://participant.one/&lt;/a&gt;&amp;lt;/wsa:Address&amp;gt;&lt;br/&gt;
                    &amp;lt;/wsa:EndpointReference&amp;gt;&lt;br/&gt;
                &amp;lt;/wst:Participant&amp;gt;&lt;br/&gt;
                &amp;lt;wst:Participant&amp;gt;&lt;br/&gt;
                    &amp;lt;wsa:EndpointReference&amp;gt;&lt;br/&gt;
                        &amp;lt;wsa:Address&amp;gt;&lt;a href=&quot;http://participant.two/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://participant.two/&lt;/a&gt;&amp;lt;/wsa:Address&amp;gt;&lt;br/&gt;
                    &amp;lt;/wsa:EndpointReference&amp;gt;&lt;br/&gt;
                &amp;lt;/wst:Participant&amp;gt;&lt;br/&gt;
                &amp;lt;wst:Participant&amp;gt;&lt;br/&gt;
                    &amp;lt;wsa:EndpointReference&amp;gt;&lt;br/&gt;
                        &amp;lt;wsa:Address&amp;gt;&lt;a href=&quot;http://participant.three/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://participant.three/&lt;/a&gt;&amp;lt;/wsa:Address&amp;gt;&lt;br/&gt;
                    &amp;lt;/wsa:EndpointReference&amp;gt;&lt;br/&gt;
                &amp;lt;/wst:Participant&amp;gt;&lt;br/&gt;
            &amp;lt;/wst:Participants&amp;gt;&lt;br/&gt;
        &amp;lt;/RequestSecurityToken&amp;gt;&lt;br/&gt;
    &amp;lt;/soapenv:Body&amp;gt;&lt;br/&gt;
&amp;lt;/soapenv:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;#8212; Response &amp;#8212;&lt;/p&gt;

&lt;p&gt;&amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;soap:Header&amp;gt;&lt;br/&gt;
        &amp;lt;!-- Security stuff --&amp;gt;&lt;br/&gt;
    &amp;lt;/soap:Header&amp;gt;&lt;br/&gt;
    &amp;lt;soap:Body xmlns:wsu=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; wsu:Id=&quot;_7BE22CA55D15A24479139748069244336&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;ns2:RequestSecurityTokenResponseCollection xmlns=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200802&quot; xmlns:ns2=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512&quot; xmlns:ns3=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&quot; xmlns:ns4=&quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&quot; xmlns:ns5=&quot;http://www.w3.org/2005/08/addressing&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;ns2:RequestSecurityTokenResponse Context=&quot;urn:itko.com&quot;&amp;gt;&lt;br/&gt;
                &amp;lt;ns2:TokenType&amp;gt;&lt;a href=&quot;http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0&lt;/a&gt;&amp;lt;/ns2:TokenType&amp;gt;&lt;br/&gt;
                &amp;lt;ns2:RequestedSecurityToken&amp;gt;&lt;br/&gt;
                    &amp;lt;saml2:Assertion xmlns:saml2=&quot;urn:oasis:names:tc:SAML:2.0:assertion&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; ID=&quot;_7BE22CA55D15A24479139748069243034&quot; IssueInstant=&quot;2014-04-14T13:04:52.430Z&quot; Version=&quot;2.0&quot; xsi:type=&quot;saml2:AssertionType&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:Issuer&amp;gt;FAAIAMIssuerSTS&amp;lt;/saml2:Issuer&amp;gt;&lt;br/&gt;
                        &amp;lt;ds:Signature xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&amp;gt;&lt;br/&gt;
                            &amp;lt;!-- Signature --&amp;gt;&lt;br/&gt;
                        &amp;lt;/ds:Signature&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:Subject&amp;gt;&lt;br/&gt;
                            &amp;lt;saml2:NameID Format=&quot;urn:oasis:names:tc:SAML:1.1:nameid-format:X509SubjectName&quot; NameQualifier=&quot;http://sts.acy.iam.idn.faa/&quot;&amp;gt;CN=swdvrh032,OU=test,OU=swim,OU=National Airspace System,OU=Federal Aviation Administration,OU=U.S. Department of Transportation,O=U.S. Government,C=US&amp;lt;/saml2:NameID&amp;gt;&lt;br/&gt;
                            &amp;lt;saml2:SubjectConfirmation Method=&quot;urn:oasis:names:tc:SAML:2.0:cm:holder-of-key&quot;&amp;gt;&lt;br/&gt;
                                &amp;lt;saml2:SubjectConfirmationData xsi:type=&quot;saml2:KeyInfoConfirmationDataType&quot;&amp;gt;&lt;br/&gt;
                                    &amp;lt;ds:KeyInfo xmlns:ds=&quot;http://www.w3.org/2000/09/xmldsig#&quot;&amp;gt;&lt;br/&gt;
                                        &amp;lt;ds:X509Data&amp;gt;&lt;br/&gt;
                                            &amp;lt;ds:X509Certificate&amp;gt;&amp;lt;!-- Certificate --&amp;gt;&amp;lt;/ds:X509Certificate&amp;gt;&lt;br/&gt;
                                        &amp;lt;/ds:X509Data&amp;gt;&lt;br/&gt;
                                    &amp;lt;/ds:KeyInfo&amp;gt;&lt;br/&gt;
                                &amp;lt;/saml2:SubjectConfirmationData&amp;gt;&lt;br/&gt;
                            &amp;lt;/saml2:SubjectConfirmation&amp;gt;&lt;br/&gt;
                        &amp;lt;/saml2:Subject&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:Conditions NotBefore=&quot;2014-04-14T13:04:52.431Z&quot; NotOnOrAfter=&quot;2014-04-14T13:09:52.431Z&quot;&amp;gt;&lt;br/&gt;
                            &amp;lt;saml2:AudienceRestriction&amp;gt;&lt;br/&gt;
                                &amp;lt;saml2:Audience&amp;gt;&lt;a href=&quot;http://cxf.apache.org/appliesto-uri&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/appliesto-uri&lt;/a&gt;&amp;lt;/saml2:Audience&amp;gt;&lt;br/&gt;
                            &amp;lt;/saml2:AudienceRestriction&amp;gt;&lt;br/&gt;
                        &amp;lt;/saml2:Conditions&amp;gt;&lt;br/&gt;
                        &amp;lt;saml2:AuthnStatement AuthnInstant=&quot;2014-04-14T13:04:52.430Z&quot;&amp;gt;&lt;br/&gt;
                            &amp;lt;saml2:AuthnContext&amp;gt;&lt;br/&gt;
                                &amp;lt;saml2:AuthnContextClassRef&amp;gt;urn:oasis:names:tc:SAML:2.0:ac:classes:X509&amp;lt;/saml2:AuthnContextClassRef&amp;gt;&lt;br/&gt;
                            &amp;lt;/saml2:AuthnContext&amp;gt;&lt;br/&gt;
                        &amp;lt;/saml2:AuthnStatement&amp;gt;&lt;br/&gt;
                    &amp;lt;/saml2:Assertion&amp;gt;&lt;br/&gt;
                &amp;lt;/ns2:RequestedSecurityToken&amp;gt;&lt;br/&gt;
                &amp;lt;wsp:AppliesTo xmlns=&quot;http://docs.oasis-open.org/ws-sx/ws-trust/200512&quot; xmlns:wsp=&quot;http://www.w3.org/ns/ws-policy&quot;&amp;gt;&lt;br/&gt;
                    &amp;lt;wsp:URI&amp;gt;&lt;a href=&quot;http://cxf.apache.org/appliesto-uri&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/appliesto-uri&lt;/a&gt;&amp;lt;/wsp:URI&amp;gt;&lt;br/&gt;
                &amp;lt;/wsp:AppliesTo&amp;gt;&lt;br/&gt;
                &amp;lt;ns2:Lifetime&amp;gt;&lt;br/&gt;
                    &amp;lt;ns3:Created&amp;gt;2014-04-14T13:04:52.431Z&amp;lt;/ns3:Created&amp;gt;&lt;br/&gt;
                    &amp;lt;ns3:Expires&amp;gt;2014-04-14T13:09:52.431Z&amp;lt;/ns3:Expires&amp;gt;&lt;br/&gt;
                &amp;lt;/ns2:Lifetime&amp;gt;&lt;br/&gt;
            &amp;lt;/ns2:RequestSecurityTokenResponse&amp;gt;&lt;br/&gt;
        &amp;lt;/ns2:RequestSecurityTokenResponseCollection&amp;gt;&lt;br/&gt;
    &amp;lt;/soap:Body&amp;gt;&lt;br/&gt;
&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;#8212; End Message Exchange &amp;#8212;&lt;/p&gt;

&lt;p&gt;So it doesn&apos;t look like it is working, but it&apos;s certainly possible I&apos;m missing something. Any suggestions?&lt;/p&gt;</comment>
                            <comment id="13968344" author="coheigea" created="Mon, 14 Apr 2014 13:32:54 +0000"  >
&lt;p&gt;Yes, the SNAPSHOT jars have likely not deployed yet, as I&apos;ve fixed it this morning &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Could you checkout the 2.7.x-fixes branch of CXF + build it locally + try again?&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="13968372" author="swchappell" created="Mon, 14 Apr 2014 13:55:56 +0000"  >&lt;p&gt;Colm, I&apos;m not really set up with a local repository that I can check them out to, so I&apos;ll have to wait for the snapshots to deploy. I have enough on my to do list, it&apos;s no big deal to wait for them. Thanx!&lt;/p&gt;</comment>
                            <comment id="13971450" author="swchappell" created="Wed, 16 Apr 2014 14:20:11 +0000"  >&lt;p&gt;Colm, I&apos;ve gotten this from the latest snapshot but it still does not seem to work. The problem seems to be in the DefaultConditionsProvider.createAudienceRestrictions() - specifically on line 248 and 260 ... if (X instanceof Element) is returning false when I send over participants containing EndpointReferences; none of the participants are identifying as DOM elements. I&apos;m guessing that they are coming over as JAXBElements instead?&lt;/p&gt;

&lt;p&gt;I also have to support Participants that contain wsp:URI instead of wsa:EndpointReferences. I noticed that when I sent those over, the participant IS identifying as an Element. But since there is no wsa:Address, they aren&apos;t parsed and I still don&apos;t end up with any audience restrictions.&lt;/p&gt;

&lt;p&gt;Thanx,&lt;br/&gt;
Steve&lt;/p&gt;</comment>
                            <comment id="13971588" author="coheigea" created="Wed, 16 Apr 2014 16:03:35 +0000"  >
&lt;p&gt;Thanks for the feedback. I&apos;ve merged fixes for both of these issues (JAXB EPRs + DOM wsp:URIs). Let me know if this works...&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="13974026" author="swchappell" created="Fri, 18 Apr 2014 12:54:18 +0000"  >&lt;p&gt;Colm, this just came up in the latest snapshot and it works beautifully, except for one minor issue ... it picks up all of the non-primary participants fine, but it doesn&apos;t always pick up the primary participant. It picks up the URI form, but not the EPR form. Looking in the code at line 251-253, it looks like you&apos;re only handling the DOM form of the primary, whereas in 263-264 you&apos;re just handling participants more generically as Objects. Sorry to be such a bother with it, but I really do appreciate your hard work on this, thanx!&lt;/p&gt;</comment>
                            <comment id="13977041" author="coheigea" created="Tue, 22 Apr 2014 16:49:52 +0000"  >
&lt;p&gt;Oops, it&apos;s now fixed!&lt;/p&gt;

&lt;p&gt;Colm.&lt;/p&gt;</comment>
                            <comment id="13979632" author="swchappell" created="Thu, 24 Apr 2014 12:15:14 +0000"  >&lt;p&gt;Thanx, Colm! It doesn&apos;t seem to have made it into the latest snapshot yet, but I&apos;ll keep an eye out for it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384323</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u7lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384591</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>