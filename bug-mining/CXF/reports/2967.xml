<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:23:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-7197] Loop on exception during polling message on JMS queue</title>
                <link>https://issues.apache.org/jira/browse/CXF-7197</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Hi, &lt;/p&gt;

&lt;p&gt;when an exception occurs (in my case JMSSecurityException) during PollingMessageListenerContainer$Poller#run(), it loops at CPU speed and write exception stacktrace in log. This makes the logfile grows very fast and can make the hard drive full on server.&lt;br/&gt;
I can propose a PR (If I got the rights on Fisheye) which is working with the commit related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-6742&quot; title=&quot;Weblogic Integration for secured JMS Modules&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-6742&quot;&gt;&lt;del&gt;CXF-6742&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;CXF 3.1.4, Weblogic 12c, Soap over JMS&lt;/p&gt;</environment>
        <key id="13030047">CXF-7197</key>
            <summary>Loop on exception during polling message on JMS queue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jerometambo">J&#233;r&#244;me Tamborini</reporter>
                        <labels>
                            <label>exception</label>
                            <label>jms</label>
                            <label>security</label>
                    </labels>
                <created>Thu, 22 Dec 2016 08:53:23 +0000</created>
                <updated>Tue, 4 Dec 2018 11:35:38 +0000</updated>
                                            <version>3.1.4</version>
                                    <fixVersion>3.2.0</fixVersion>
                                    <component>JMS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15770402" author="jerometambo" created="Thu, 22 Dec 2016 16:09:39 +0000"  >&lt;p&gt;Here a PR on github: &lt;a href=&quot;https://github.com/jerometambo/cxf/pull/1/commits/3be31af0abeb1b8a6c223ac1e3ced0086d8b926f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jerometambo/cxf/pull/1/commits/3be31af0abeb1b8a6c223ac1e3ced0086d8b926f&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15976352" author="chris@die-schneider.net" created="Thu, 20 Apr 2017 09:17:40 +0000"  >&lt;p&gt;I propose to use a different solution. The problem with the code above is that it does not handle the case of an Exception because a connection is becoming invalid.&lt;br/&gt;
We currently handle the invalid Connection case by adding a exception listener as another fallback. &lt;br/&gt;
Unfortunately exception listener is not supported on all jms providers. &lt;/p&gt;

&lt;p&gt;So I propose to handle all those cases: Transient problem, problem with Session as well as problem with Connection in the same way.&lt;/p&gt;

&lt;p&gt;The idea is to exit the polling loop in case of an Exception in session or Connection level and call a callback method provided by JMSDestination. This callback method will do the full restart of the Connection and create a new PollingMessageListenerContainer like the case of the ExceptionListener today.&lt;/p&gt;

&lt;p&gt;So we avoid using an Exception listener and do not need additional logic in the PollingMessageListenerContainer that can not handle the Connection case anyway. &lt;br/&gt;
WDYT? &lt;/p&gt;

&lt;p&gt;I will provide a candidate solution in a branch.&lt;/p&gt;</comment>
                            <comment id="15976581" author="chris@die-schneider.net" created="Thu, 20 Apr 2017 12:17:23 +0000"  >&lt;p&gt;I pushed a possible solution to a branch: &lt;a href=&quot;https://github.com/apache/cxf/commit/1f7241ba6017f1496e9b8aadec5c807ed05e63b4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/cxf/commit/1f7241ba6017f1496e9b8aadec5c807ed05e63b4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I would be happy if you could review and report if it works for your case.&lt;/p&gt;</comment>
                            <comment id="15981041" author="chris@die-schneider.net" created="Mon, 24 Apr 2017 11:50:52 +0000"  >&lt;p&gt;Resolving for now. Would be great if you could give feedback if it works for you.&lt;/p&gt;</comment>
                            <comment id="15986763" author="jerometambo" created="Thu, 27 Apr 2017 14:54:23 +0000"  >&lt;p&gt;Thank you very much. Less code with your fix.&lt;br/&gt;
I&apos;ll try when I can and come back to you.&lt;/p&gt;</comment>
                            <comment id="16492454" author="fabien bulourde" created="Mon, 28 May 2018 09:42:09 +0000"  >&lt;p&gt;HI,&lt;/p&gt;

&lt;p&gt;I work with Jer&#244;me and I test the fix durring the migration to CXF 3.2.4.&lt;/p&gt;

&lt;p&gt;Unfortunatly, we still have the problem on Weblogic.&lt;/p&gt;

&lt;p&gt;When I try to connect to a secure queue on Weblogic using SOAP over JMS, with no security information in the endpoint, JMSSecurityException occur in loop at CPU speed (the initial case explained by Jer&#244;me).&lt;/p&gt;

&lt;p&gt;I try to reproduce the same test with Active MQ and the behavior is different : in JMSDestination#createTargetDestinationListener(), the exception is thrown by &lt;br/&gt;
&#160; &lt;br/&gt;
&#160; session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);&lt;br/&gt;
&#160; &lt;br/&gt;
So, it&apos;s JMSDestination#restartConnection() how catch it and I use the &quot;retryInterval&quot; parameters to wait.&lt;/p&gt;

&lt;p&gt;With Weblogic, the exception occur when the container start in JMSDestination#createTargetDestinationListener() so it&apos;s the PollingMessageListenerContainer who catch it and use the ExceptionListener to treat it (defined in JMSDestination#createTargetDestinationListener()) : it loop creating thread in order to restart at CPU speed.&lt;/p&gt;</comment>
                            <comment id="16518166" author="jerometambo" created="Wed, 20 Jun 2018 14:01:22 +0000"  >&lt;p&gt;Still the same behavior with CXF 3.2.4 &amp;amp; Weblogic (but it works with ActiveMQ).&lt;/p&gt;</comment>
                            <comment id="16518944" author="deki" created="Thu, 21 Jun 2018 05:52:25 +0000"  >&lt;p&gt;Can you create another PR with a proposed fix that works both with Weblogic and ActiveMQ?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12925415" name="log_err_ActiveMQ.txt" size="9882" author="Fabien Bulourde" created="Mon, 28 May 2018 12:48:38 +0000"/>
                            <attachment id="12925416" name="log_err_Weblogic.txt" size="11121" author="Fabien Bulourde" created="Mon, 28 May 2018 12:48:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37xd3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>