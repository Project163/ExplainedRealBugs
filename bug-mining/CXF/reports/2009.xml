<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:05:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-5365] 2.7.7 schema validation seems broken</title>
                <link>https://issues.apache.org/jira/browse/CXF-5365</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Turning on schema validation in 2.7.7 seems to have a number of problems.  In the case of my own embedded CXF, it does validate but fails with schemas that have circular references to each other (not illegal according to W3C spec or their schema validator tool online).&lt;/p&gt;

&lt;p&gt;So I wrote a test sample but found that in the test sample that it doesn&apos;t validate the schema at all- just lets the bad elements go through with no error.  The 2.7.6 version of the sample properly throws an error- and all I did to create the 2.7.6 version was to copy the sample folder under 2.7.6 and search/replace 2.7.7 in the pom.xml with 2.7.6.&lt;/p&gt;

&lt;p&gt;For this issue, I think we should try to solve why 2.7.6 properly throws an exception on a request with a bad schema and why 2.7.7 does not.  I&apos;ll check separately if the resolution to this fixes my initial problem and if it doesn&apos;t then I&apos;ll create a separate issue for that along with a test case.&lt;/p&gt;

&lt;p&gt;I will attach the test sample after creating the issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12676239">CXF-5365</key>
            <summary>2.7.7 schema validation seems broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="jpangburn">Jesse Pangburn</reporter>
                        <labels>
                            <label>schema</label>
                            <label>validation</label>
                    </labels>
                <created>Mon, 28 Oct 2013 23:11:54 +0000</created>
                <updated>Tue, 26 Nov 2013 17:39:58 +0000</updated>
                            <resolved>Tue, 29 Oct 2013 20:08:56 +0000</resolved>
                                    <version>2.7.7</version>
                                    <fixVersion>2.7.8</fixVersion>
                                    <component>JAX-WS Runtime</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13807477" author="jpangburn" created="Mon, 28 Oct 2013 23:37:14 +0000"  >&lt;p&gt;To run these, expand in the 2.7.6 or 2.7.7 samples folder accordingly.  Then in one terminal run:&lt;br/&gt;
mvn -P server&lt;br/&gt;
This starts up two different services (same types, different URL only).  One is configured in Java to have schema validation on, the other is configured in spring to have schema validation on.&lt;/p&gt;

&lt;p&gt;Correspondingly, there are two client profiles.  They are run like this:&lt;br/&gt;
mvn -P client&lt;br/&gt;
mvn -P clientspring&lt;br/&gt;
The &quot;clientspring&quot; profile targets the Spring configured service.  Both of these profiles send two messages- one which doesn&apos;t violate schema and one which does.&lt;/p&gt;

&lt;p&gt;In 2.7.6, both profiles correctly send the first message and then the second message generates a schema error.  In 2.7.7, both messages in both profiles are accepted and the response is sent normally with no errors.  So schema validation is either off entirely, or it&apos;s not engaging because the schema files referred to by the WSDLs import each other.&lt;/p&gt;</comment>
                            <comment id="13808379" author="dkulp" created="Tue, 29 Oct 2013 20:05:41 +0000"  >
&lt;p&gt;With the requirement of using Woodstox 4.2.x for general parsing, we recently flipped some of the validation for provider/dispatch things from a VERY expensive validation routine to the routines built into Woodstox which are based on MSV.   Previously, with validation on, the message had to parsed to a DOM, traversed fully to find any &quot;xop&quot; elements, if xop found, COPY the entire dom (full traversal), do yet another traversal to remove the XOP&apos;s, then traverse the whole thing yet again to actually validate.   With Woodstox+MSV, we can do the whole thing in a single traversal which obviously saves time/memory.&lt;/p&gt;

&lt;p&gt;However, you found a few bugs:&lt;br/&gt;
1) The above requires  cxf-wstx-msv-validation.jar, which the demo doesn&apos;t have.  In theory, that SHOULD drop back to the old algorithm.  A bug only drops back if the incoming DOM has a XOP element.   Sigh...  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;2) If you add the cxf-wstx-msv-validation jar, then the above should work.  However, MSV doesn&apos;t like the WSDL&apos;s/schemas as you are &quot;including&quot; schemas that have a targetNamespace.   If you change the types section in the wsdl to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;wsdl:types&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xsd:schema elementFormDefault=&lt;span class=&quot;code-quote&quot;&gt;&quot;qualified&quot;&lt;/span&gt; targetNamespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3schools.com/c&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xsd:import namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3schools.com/a&quot;&lt;/span&gt; schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;a.xsd&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xsd:import namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3schools.com/b&quot;&lt;/span&gt; schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;b.xsd&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xsd:schema&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/wsdl:types&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to import the full schemas, then it should work.&lt;/p&gt;</comment>
                            <comment id="13808385" author="dkulp" created="Tue, 29 Oct 2013 20:08:56 +0000"  >&lt;p&gt;&lt;br/&gt;
Bugs in CXF are now fixed and cached a few things (when using wstx) to speed things up a bit.   However, bugs in MSV related to that schema are not fixed, but the fallback to the older method is there.&lt;/p&gt;</comment>
                            <comment id="13808464" author="jpangburn" created="Tue, 29 Oct 2013 21:17:10 +0000"  >&lt;p&gt;OK, verified with addition of that dependency that the problem goes away and 2.7.7 is validating correctly.  However, it seems this sample is not triggering the original problem that caused me to notice this.  I&apos;ll create a separate issue for that problem since you found and fixed related bugs in this one already.&lt;/p&gt;

&lt;p&gt;thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12610722" name="jaxws_dispatch_provider_schematest_276.zip" size="10898" author="jpangburn" created="Mon, 28 Oct 2013 23:37:14 +0000"/>
                            <attachment id="12610721" name="jaxws_dispatch_provider_schematest_277.zip" size="10898" author="jpangburn" created="Mon, 28 Oct 2013 23:37:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pbsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>