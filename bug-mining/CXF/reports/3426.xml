<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 12:34:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-8052] Cannot set JAXB schema compiler options</title>
                <link>https://issues.apache.org/jira/browse/CXF-8052</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;JAXB generates an is-prefix getter for a boolean data type in my WSDL instead of a get-prefix getter, see &lt;a href=&quot;https://www.ibm.com/developerworks/community/blogs/Dougclectica/entry/JAXB_with_Java_7_and_xs_boolean?lang=en&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.ibm.com/developerworks/community/blogs/Dougclectica/entry/JAXB_with_Java_7_and_xs_boolean?lang=en&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;The workaround is simple - pass the &quot;-enableIntrospection&quot; argument to the JAXB compiler. Unfortunately, CXF fails with this error -&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Caused by: com.sun.tools.xjc.BadCommandLineException: grammar is not specified&lt;br/&gt;
 at com.sun.tools.xjc.Options.parseArguments(Options.java:861)&lt;br/&gt;
 at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
 ...&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The test code to reproduce this is very simple -&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;JaxWsDynamicClientFactory factory = JaxWsDynamicClientFactory.newInstance();&lt;/p&gt;

&lt;p&gt;String[] schemaCompilerOptions = new String[] {&quot;-enableIntrospection&quot;};&lt;br/&gt;
factory.setSchemaCompilerOptions(schemaCompilerOptions);&lt;/p&gt;

&lt;p&gt;Client client = factory.createClient(&amp;lt;wsdlUrl&amp;gt;);&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The error occurs in org.apache.cxf.endpoint.dynamic.DynamicClientFactory#createSchemaCompiler&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;if (schemaCompilerOptions != null &amp;amp;&amp;amp; schemaCompilerOptions.length &amp;gt; 0) &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
&#160; &#160; &#160;compiler.getOptions().parseArguments(schemaCompilerOptions);
}&lt;/span&gt; &lt;/div&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;parseArguments expects&#160;the XML Schemas to have already been added to the compiler.getOptions() object, but in&#160;DynamicClientFactory, the schemas are added after&#160;parseArguments is called, which is why&#160;parseArguments spits out the &quot;grammar is not specified&quot; error.&lt;/p&gt;

&lt;p&gt;This can be fixed in a couple of ways -&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Add&#160;a dummy schema to the&#160;compiler.getOptions() object before invoking&#160;parseArguments on it.&lt;/li&gt;
	&lt;li&gt;Relocate the call to&#160;parseArguments after the schemas have been added to the&#160;compiler.getOptions() object.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Option 1 is used by&#160;org.apache.cxf.tools.wsdlto.databinding.jaxb.JAXBDataBinding in its initialize() method -&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;// keep parseArguments happy, supply dummy required command-line&#160;opts&lt;br/&gt;
opts.addGrammar(new InputSource(&quot;null&quot;));&lt;br/&gt;
opts.parseArguments(args.toArray(new String&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;));&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Personally, I prefer relocating the call instead of adding a dummy schema.&lt;/p&gt;</description>
                <environment>&lt;p&gt;OpenJDK 12&lt;/p&gt;</environment>
        <key id="13236841">CXF-8052</key>
            <summary>Cannot set JAXB schema compiler options</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="rvadakkan">Ranjit Vadakkan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 May 2019 12:57:43 +0000</created>
                <updated>Wed, 11 Aug 2021 08:35:34 +0000</updated>
                            <resolved>Tue, 11 Jun 2019 14:24:43 +0000</resolved>
                                    <version>3.3.2</version>
                                    <fixVersion>3.2.10</fixVersion>
                    <fixVersion>3.3.3</fixVersion>
                                    <component>Simple Frontend</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16861096" author="ffang" created="Tue, 11 Jun 2019 14:25:05 +0000"  >&lt;p&gt;patch applied on behalf of Ranjit Vadakkan with thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13394583">CXF-8580</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03ai0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>