<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:39:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CXF-758] Support POST with empty bodies in http-centric Client API</title>
                <link>https://issues.apache.org/jira/browse/CXF-758</link>
                <project id="12310511" key="CXF">CXF</project>
                    <description>&lt;p&gt;Sending a POST with an empty body to a RESTful service causes a 500 to be raised by the server.&lt;/p&gt;

&lt;p&gt;In the client for the restful_dispatch demo, change this line: &lt;br/&gt;
        InputStream in = url.openStream();&lt;/p&gt;

&lt;p&gt;to&lt;br/&gt;
        HttpURLConnection conn = (HttpURLConnection)url.openConnection();&lt;br/&gt;
        conn.setRequestMethod(&quot;PUT&quot;);&lt;br/&gt;
        InputStream in = conn.getInputStream();&lt;/p&gt;

&lt;p&gt;and run the client against the server. &lt;/p&gt;

&lt;p&gt;I get the following stack trace on the client: &lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Exception in thread &quot;main&quot; java.io.IOException: Server returned HTTP response code: 500 for URL: &lt;a href=&quot;http://localhost:9000/customerservice/customer&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9000/customerservice/customer&lt;/a&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1152)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at demo.restful.client.Client.main(Client.java:66)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Java Result: 1&lt;/p&gt;


&lt;p&gt;and the following stack trace on the server &lt;/p&gt;

&lt;p&gt;     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Jul 2, 2007 3:33:12 PM org.apache.cxf.phase.PhaseInterceptorChain doIntercept&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; INFO: Interceptor has thrown exception, unwinding now&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; org.apache.cxf.interceptor.Fault: Could not parse the XML stream.&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.databinding.source.XMLStreamDataReader.read(XMLStreamDataReader.java:96)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.databinding.source.XMLStreamDataReader.read(XMLStreamDataReader.java:86)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.databinding.source.XMLStreamDataReader.read(XMLStreamDataReader.java:48)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.jaxws.interceptors.ProviderInDatabindingInterceptor.handleMessage(ProviderInDatabindingInterceptor.java:103)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:206)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:67)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:253)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:213)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:54)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.Server.handle(Server.java:281)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:502)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:821)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:513)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:208)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:378)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:368)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt; Caused by: com.ctc.wstx.exc.WstxEOFException: Unexpected EOF in prolog&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;  at [row,col &lt;/p&gt;
{unknown-source}
&lt;p&gt;]: &lt;span class=&quot;error&quot;&gt;&amp;#91;1,0&amp;#93;&lt;/span&gt;&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at com.ctc.wstx.sr.StreamScanner.throwUnexpectedEOF(StreamScanner.java:661)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at com.ctc.wstx.sr.BasicStreamReader.handleEOF(BasicStreamReader.java:2134)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at com.ctc.wstx.sr.BasicStreamReader.nextFromProlog(BasicStreamReader.java:2040)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at com.ctc.wstx.sr.BasicStreamReader.next(BasicStreamReader.java:1069)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.staxutils.StaxUtils.readDocElements(StaxUtils.java:663)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.staxutils.StaxUtils.read(StaxUtils.java:518)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     at org.apache.cxf.databinding.source.XMLStreamDataReader.read(XMLStreamDataReader.java:93)&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;java&amp;#93;&lt;/span&gt;     ... 20 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12372824">CXF-758</key>
            <summary>Support POST with empty bodies in http-centric Client API</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="cjodea">Conrad O&apos;Dea</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Jul 2007 14:34:00 +0000</created>
                <updated>Fri, 6 Dec 2013 00:22:11 +0000</updated>
                            <resolved>Thu, 12 Nov 2009 16:56:31 +0000</resolved>
                                    <version>2.0</version>
                    <version>2.2.5</version>
                    <version>2.3</version>
                                    <fixVersion>2.2.5</fixVersion>
                    <fixVersion>2.3</fixVersion>
                                    <component>JAX-RS</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12509621" author="dandiep" created="Mon, 2 Jul 2007 17:23:21 +0000"  >&lt;p&gt;Wouldn&apos;t a POST on a Provider kind of imply that there should be an XML body? I wouldn&apos;t be surprised if that was even part of the JAX-WS spec.&lt;/p&gt;</comment>
                            <comment id="12509743" author="jliu" created="Tue, 3 Jul 2007 04:09:21 +0000"  >&lt;p&gt;Just checked spec, does not say anything about this.  For all the valid input formats that can be used for SOAP binding (Source/SOAPMessage/JAXBElement), obviously you cant send a POST with an empty body, you need an empty soap message at least. For XML/HTTP binding, I am not sure what is a valid &quot;empty&quot; xml body. I presume sending sth like below should be valid: &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;. Thoughts?&lt;/p&gt;
</comment>
                            <comment id="12509764" author="cjodea" created="Tue, 3 Jul 2007 06:54:21 +0000"  >&lt;p&gt;The same behaviour happens if I send a DELETE request.  For example, change the restful_dispatch demo such that the query for a specific customer is a delete: &lt;/p&gt;

&lt;p&gt;        url = new URL(endpointAddress + &quot;?id=1234&quot;);&lt;br/&gt;
        System.out.println(&quot;Invoking server through HTTP GET to query customer info&quot;);&lt;br/&gt;
        HttpURLConnection conn = (HttpURLConnection)url.openConnection();&lt;br/&gt;
        conn.setRequestMethod(&quot;DELETE&quot;); &lt;/p&gt;

&lt;p&gt;I think that this is indicative of a bug.  &lt;/p&gt;

&lt;p&gt;Jervis, I tried your suggested workaround but it did not make any difference.  An XML element has to be added after the prolog for it to work. &lt;/p&gt;

&lt;p&gt;In general, I don&apos;t think  all non-idempotent operations should be required to have a body.  A Service may have operations that modify its state and therefore should not be GETable but do not require any data.&lt;/p&gt;
</comment>
                            <comment id="12517165" author="jliu" created="Thu, 2 Aug 2007 07:39:58 +0000"  >&lt;p&gt;Below is the comment copied from cxf-dev mailing list:&lt;/p&gt;

&lt;p&gt;In general, yes, any non-idempotent operations should not be required to have a body. But when it comes to using JAX-WS Dispatch/Provider to implement a Restful service, its really down to the semantics of Provider/Dispatch per spec. As the spec is not specific on this point, we could extend CXF code to support empty body with POST. However in practical, it is not very clear to me how this can be done. First, empty body does not equal to a null Source. Secondly, an empty Source wont be always mapped to an empty body and vice versa. For example, if I give Dispatch an empty Source by Source emptySource = new DomSource(), the underlying transformer will create empty source Document using DocumentBuilder.newDocument() thus results in a XML body with at least an XML declaration of &amp;lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot; encoding=&quot;UTF-8&quot;?&amp;gt;. Same thing occurs to the Provider side, for an empty body without an XML declaration, the parser even wont be able to know the input is indeed an xml document.&lt;/p&gt;

&lt;p&gt;I would say this is just the limitation of using JAX-WS Dispatch/Provider to implement a Restful service. If this blocks you, you can try something else, for example, the HTTP binding for Restful service.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Jervis&lt;/p&gt;</comment>
                            <comment id="12517167" author="cjodea" created="Thu, 2 Aug 2007 07:47:09 +0000"  >&lt;p&gt;Hi Jervis, &lt;/p&gt;

&lt;p&gt;thanks for the information....good points.  However, this used to work.  Not sure why it was changed but in an earlier version of CXF there was no problem having a Provider handle a POST with an empty body. &lt;/p&gt;

&lt;p&gt;This is not a blocker.  &lt;/p&gt;

&lt;p&gt;thanks&lt;br/&gt;
Conrad &lt;/p&gt;</comment>
                            <comment id="12767120" author="chris@die-schneider.net" created="Sun, 18 Oct 2009 19:59:21 +0000"  >&lt;p&gt;Is this issue still open? There is no activity on this issue since a long time. I will close on 25.10.2009 if there is no feedback.&lt;/p&gt;</comment>
                            <comment id="12767252" author="sergey_beryozkin" created="Mon, 19 Oct 2009 09:12:50 +0000"  >&lt;p&gt;This was reported by Conrad awhile back, most likely Provider&amp;lt;Source&amp;gt; based web services. I&apos;ll try to run a test later on and see if empty POSTS work with JAXRS; empty POSTS are very rare and it makes sense to expect for Provider&amp;lt;Source&amp;gt; services to always get some XML in, but some ultra-HTTP JAXRS services might want to support empty POSTS&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="12775135" author="sergey_beryozkin" created="Mon, 9 Nov 2009 21:01:25 +0000"  >&lt;p&gt;Empty POSTs are handled ok on the server side&lt;/p&gt;</comment>
                            <comment id="12776706" author="dkulp" created="Wed, 11 Nov 2009 22:49:47 +0000"  >&lt;p&gt;Reassigning to me.   It&apos;s still an issue with JAXWS non-soap providers.   (for SOAP binding providers, an exception would definitely be correct as its not a soap message).     I&apos;m testing a fix now.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12683028">CXF-5436</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>111597</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i140mv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>231565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>