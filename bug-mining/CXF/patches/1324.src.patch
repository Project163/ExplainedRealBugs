diff --git a/api/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java b/api/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java
index 8171b55c22..e038e99ffc 100644
--- a/api/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java
+++ b/api/src/main/java/org/apache/cxf/common/jaxb/JAXBUtils.java
@@ -65,6 +65,7 @@ import javax.xml.transform.stream.StreamResult;
 import org.w3c.dom.Element;
 import org.w3c.dom.Node;
 
+import org.xml.sax.EntityResolver;
 import org.xml.sax.InputSource;
 
 import org.apache.cxf.common.logging.LogUtils;
@@ -932,7 +933,8 @@ public final class JAXBUtils {
     }
     
     public interface SchemaCompiler {
-
+        void setEntityResolver(EntityResolver entityResolver);
+        
         void setErrorListener(Object elForRun);
 
         void setClassNameAllocator(Object allocator);
diff --git a/rt/core/src/main/java/org/apache/cxf/catalog/OASISCatalogManager.java b/rt/core/src/main/java/org/apache/cxf/catalog/OASISCatalogManager.java
index 783cfc04b8..f40f835f17 100644
--- a/rt/core/src/main/java/org/apache/cxf/catalog/OASISCatalogManager.java
+++ b/rt/core/src/main/java/org/apache/cxf/catalog/OASISCatalogManager.java
@@ -34,10 +34,13 @@ import java.util.logging.Logger;
 
 import javax.annotation.Resource;
 
+import org.xml.sax.EntityResolver;
+
 import org.apache.cxf.Bus;
 import org.apache.cxf.common.injection.NoJSR250Annotations;
 import org.apache.cxf.common.logging.LogUtils;
 import org.apache.cxf.common.util.SystemPropertyAction;
+import org.apache.cxf.resource.URIResolver;
 import org.apache.xml.resolver.Catalog;
 import org.apache.xml.resolver.CatalogManager;
 import org.apache.xml.resolver.tools.CatalogResolver;
@@ -53,21 +56,31 @@ public class OASISCatalogManager {
         = SystemPropertyAction.getPropertyOrNull(CATALOG_DEBUG_KEY);
     
 
-    private Object resolver;
+    private EntityResolver resolver;
+    private Object catalog;
     private Set<URI> loadedCatalogs = Collections.synchronizedSet(new HashSet<URI>());
     private Bus bus;
 
     public OASISCatalogManager() {
         resolver = getResolver();
+        catalog = getCatalog(resolver);
     }
     
     public OASISCatalogManager(Bus b) {
         bus = b;
         resolver = getResolver();
+        catalog = getCatalog(resolver);
         loadContextCatalogs(DEFAULT_CATALOG_NAME);
     }
-    
-    private static Object getResolver() {
+    private static Object getCatalog(EntityResolver resolver) {
+        try {
+            return ((CatalogResolver)resolver).getCatalog();
+        } catch (Throwable t) {
+            //ignore
+        }
+        return null;
+    }
+    private static EntityResolver getResolver() {
         try {
             CatalogManager catalogManager = new CatalogManager();
             if (DEBUG_LEVEL != null) {
@@ -75,8 +88,24 @@ public class OASISCatalogManager {
             }
             catalogManager.setUseStaticCatalog(false);
             catalogManager.setIgnoreMissingProperties(true);
-            CatalogResolver catalogResolver = new CatalogResolver(catalogManager);
-            return catalogResolver.getCatalog();
+            CatalogResolver catalogResolver = new CatalogResolver(catalogManager) {
+                public String getResolvedEntity(String publicId, String systemId) {
+                    String s = super.getResolvedEntity(publicId, systemId);
+                    if (s != null && s.startsWith("classpath:")) {
+                        try {
+                            URIResolver r = new URIResolver(s);
+                            if (r.isResolved()) {
+                                r.getInputStream().close();
+                                return r.getURL().toExternalForm();
+                            }
+                        } catch (IOException e) {
+                            //ignore
+                        }
+                    }
+                    return s;
+                }
+            };
+            return catalogResolver;
         } catch (Throwable t) {
             //ignore
         }        
@@ -108,7 +137,7 @@ public class OASISCatalogManager {
     }
 
     public final void loadCatalogs(ClassLoader classLoader, String name) throws IOException {
-        if (classLoader == null || resolver == null) {
+        if (classLoader == null || catalog == null) {
             return;
         }
 
@@ -116,14 +145,14 @@ public class OASISCatalogManager {
         while (catalogs.hasMoreElements()) {
             URL catalogURL = catalogs.nextElement();
             if (!loadedCatalogs.contains(URI.create(catalogURL.toString()))) {
-                ((Catalog)resolver).parseCatalog(catalogURL);
+                ((Catalog)catalog).parseCatalog(catalogURL);
                 loadedCatalogs.add(URI.create(catalogURL.toString()));
             }
         }
     }
 
     public final void loadCatalog(URL catalogURL) throws IOException {
-        if (!loadedCatalogs.contains(URI.create(catalogURL.toString())) && resolver != null) {
+        if (!loadedCatalogs.contains(URI.create(catalogURL.toString())) && catalog != null) {
             if ("file".equals(catalogURL.getProtocol())) {
                 try {
                     File file = new File(catalogURL.toURI());
@@ -135,7 +164,7 @@ public class OASISCatalogManager {
                 }
             }
 
-            ((Catalog)resolver).parseCatalog(catalogURL);
+            ((Catalog)catalog).parseCatalog(catalogURL);
 
             loadedCatalogs.add(URI.create(catalogURL.toString()));
         }
@@ -167,23 +196,27 @@ public class OASISCatalogManager {
     }
 
     public String resolveSystem(String sys) throws MalformedURLException, IOException {
-        if (resolver == null) {
+        if (catalog == null) {
             return null;
         }
-        return ((Catalog)resolver).resolveSystem(sys);
+        return ((Catalog)catalog).resolveSystem(sys);
     }
 
     public String resolveURI(String uri) throws MalformedURLException, IOException {
-        if (resolver == null) {
+        if (catalog == null) {
             return null;
         }
-        return ((Catalog)resolver).resolveURI(uri);
+        return ((Catalog)catalog).resolveURI(uri);
     }
     public String resolvePublic(String uri, String parent) throws MalformedURLException, IOException {
         if (resolver == null) {
             return null;
         }
-        return ((Catalog)resolver).resolvePublic(uri, parent);
+        return ((Catalog)catalog).resolvePublic(uri, parent);
+    }
+    
+    public EntityResolver getEntityResolver() {
+        return resolver;
     }
 
 }
diff --git a/tools/wadlto/jaxrs/src/main/java/org/apache/cxf/tools/wadlto/jaxrs/SourceGenerator.java b/tools/wadlto/jaxrs/src/main/java/org/apache/cxf/tools/wadlto/jaxrs/SourceGenerator.java
index b651f5aae9..a22bb75971 100644
--- a/tools/wadlto/jaxrs/src/main/java/org/apache/cxf/tools/wadlto/jaxrs/SourceGenerator.java
+++ b/tools/wadlto/jaxrs/src/main/java/org/apache/cxf/tools/wadlto/jaxrs/SourceGenerator.java
@@ -66,7 +66,9 @@ import org.w3c.dom.Element;
 import org.w3c.dom.NamedNodeMap;
 import org.w3c.dom.Node;
 
+import org.xml.sax.EntityResolver;
 import org.xml.sax.InputSource;
+import org.xml.sax.SAXException;
 import org.xml.sax.SAXParseException;
 
 import org.apache.cxf.Bus;
@@ -88,6 +90,7 @@ import org.apache.cxf.jaxrs.utils.JAXRSUtils;
 import org.apache.cxf.jaxrs.utils.ResourceUtils;
 import org.apache.cxf.service.model.SchemaInfo;
 import org.apache.cxf.staxutils.StaxUtils;
+import org.apache.xml.resolver.tools.CatalogResolver;
 
 /**
  * TODO: This will need to be moved into a separate module
@@ -1256,8 +1259,9 @@ public class SourceGenerator {
     
     private JCodeModel createCodeModel(List<SchemaInfo> schemaElements, Set<String> type) {
         
-
         SchemaCompiler compiler = createCompiler(type);
+        compiler.setEntityResolver(OASISCatalogManager.getCatalogManager(bus)
+                                       .getEntityResolver());
         if (compilerArgs.size() > 0) {
             compiler.getOptions().addGrammar(new InputSource("null"));
             compiler.getOptions().parseArguments(compilerArgs.toArray(new String[] {}));
diff --git a/tools/wadlto/jaxrs/src/test/resources/META-INF/jax-ws-catalog.xml b/tools/wadlto/jaxrs/src/test/resources/META-INF/jax-ws-catalog.xml
new file mode 100644
index 0000000000..8fdba58ae9
--- /dev/null
+++ b/tools/wadlto/jaxrs/src/test/resources/META-INF/jax-ws-catalog.xml
@@ -0,0 +1,22 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one
+    or more contributor license agreements.  See the NOTICE file
+    distributed with this work for additional information
+    regarding copyright ownership.  The ASF licenses this file
+    to you under the Apache License, Version 2.0 (the
+    "License"); you may not use this file except in compliance
+    with the License.  You may obtain a copy of the License at
+
+     http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing,
+    software distributed under the License is distributed on an
+    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+    KIND, either express or implied.  See the License for the
+    specific language governing permissions and limitations
+    under the License.
+-->
+<catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog" prefer="system">
+    <rewriteSystem systemIdStartString="http://www.w3.org/2005/08/addressing" rewritePrefix="classpath:/schemas/wsdl"/>
+</catalog>
