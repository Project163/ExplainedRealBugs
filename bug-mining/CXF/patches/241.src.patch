diff --git a/rt/core/src/main/java/org/apache/cxf/catalog/CatalogWSDLLocator.java b/rt/core/src/main/java/org/apache/cxf/catalog/CatalogWSDLLocator.java
index 416e48c41a..1d28c6ad7b 100644
--- a/rt/core/src/main/java/org/apache/cxf/catalog/CatalogWSDLLocator.java
+++ b/rt/core/src/main/java/org/apache/cxf/catalog/CatalogWSDLLocator.java
@@ -56,8 +56,8 @@ public class CatalogWSDLLocator implements WSDLLocator {
     }
 
     public InputSource getBaseInputSource() {
-        InputSource result = resolver.resolve(baseUri, null);
-        if (result == null && catalogResolver != null) {
+        InputSource result = null;
+        if (catalogResolver != null) {
             try {
                 String s = catalogResolver.resolveSystem(baseUri);
                 if (s != null) {
@@ -69,6 +69,9 @@ public class CatalogWSDLLocator implements WSDLLocator {
                 //ignore
             }
         }
+        if (result == null) {
+            result = resolver.resolve(baseUri, null);
+        }
         if (wsdlUrl == null
             && result != null) {
             wsdlUrl = result.getSystemId();
diff --git a/tools/common/src/main/java/org/apache/cxf/tools/common/model/JavaParameter.java b/tools/common/src/main/java/org/apache/cxf/tools/common/model/JavaParameter.java
index 0b0ea01075..4037bdb56b 100644
--- a/tools/common/src/main/java/org/apache/cxf/tools/common/model/JavaParameter.java
+++ b/tools/common/src/main/java/org/apache/cxf/tools/common/model/JavaParameter.java
@@ -71,7 +71,9 @@ public class JavaParameter extends JavaType implements JavaAnnotatable {
     public JAnnotation getAnnotation(String tag) {
         return annotations.get(tag);
     }
-    
+    public Collection<String> getAnnotationTags() {
+        return this.annotations.keySet();
+    }
 
     public Collection<JAnnotation> getAnnotations() {
         return this.annotations.values();
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java
index 84011f84a9..d00587dd62 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java
@@ -130,6 +130,9 @@ public final class CustomizationParser {
     }
 
     public Element getTargetNode(String uri) {
+        if (uri.equals(wsdlURL) && wsdlNode != null) {
+            return wsdlNode;
+        }
         Document doc = null;
         InputStream ins = null;
 
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/OperationProcessor.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/OperationProcessor.java
index 971b3ebad3..dfeaa8c131 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/OperationProcessor.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/OperationProcessor.java
@@ -20,7 +20,6 @@
 package org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.internal;
 
 import java.util.Collection;
-import java.util.Iterator;
 import java.util.List;
 import java.util.logging.Level;
 
@@ -178,7 +177,9 @@ public class OperationProcessor  extends AbstractProcessor {
     }
 
     private boolean isAsyncMethod(JavaMethod method) {
-        if (method.getName().endsWith(ToolConstants.ASYNC_METHOD_SUFFIX)) {
+        if (method.getName().endsWith(ToolConstants.ASYNC_METHOD_SUFFIX)
+            && method.getReturn() != null
+            && method.getReturn().getClassName() != null) {
             if (method.getReturn().getClassName().startsWith("Response<")) {
                 return true;
             } else if (method.getParameterCount() > 0
@@ -217,15 +218,40 @@ public class OperationProcessor  extends AbstractProcessor {
         callbackMethod.addAnnotation("RequestWrapper", method.getAnnotationMap().get("RequestWrapper"));
         callbackMethod.addAnnotation("SOAPBinding", method.getAnnotationMap().get("SOAPBinding"));
 
-        for (Iterator iter = method.getParameters().iterator(); iter.hasNext();) {
-            callbackMethod.addParameter((JavaParameter)iter.next());
+        boolean convertOutToAsync = !method.isWrapperStyle() 
+            && "void".equals(method.getReturn().getClassName());
+        String asyncCname = null;
+        for (JavaParameter param : method.getParameters()) {
+            if (convertOutToAsync) {
+                if (param.isHolder()) {
+                    if (param.isINOUT()) {
+                        JavaParameter p2 = new JavaParameter();
+                        
+                        p2.setName(param.getName());
+                        p2.setClassName(param.getHolderName());
+                        p2.setStyle(JavaType.Style.IN);
+                        callbackMethod.addParameter(p2);
+                        for (String s : param.getAnnotationTags()) {
+                            JAnnotation ann = param.getAnnotation(s);
+                            p2.addAnnotation(s, ann);
+                        }
+                    } else if (!param.isHeader() && asyncCname == null) {
+                        asyncCname = param.getClassName();
+                    }
+                } else {
+                    callbackMethod.addParameter(param);
+                }
+            } else {
+                callbackMethod.addParameter(param);
+            }
         }
-
         JavaParameter asyncHandler = new JavaParameter();
         
         asyncHandler.setName("asyncHandler");
         asyncHandler.setCallback(true);
-        asyncHandler.setClassName(getAsyncClassName(method, "AsyncHandler"));
+        asyncHandler.setClassName(getAsyncClassName(method, 
+                                                    "AsyncHandler",
+                                                    asyncCname));
         asyncHandler.setStyle(JavaType.Style.IN);
         
         callbackMethod.addParameter(asyncHandler);
@@ -248,8 +274,37 @@ public class OperationProcessor  extends AbstractProcessor {
         pollingMethod.setSoapAction(method.getSoapAction());
         pollingMethod.setOperationName(method.getOperationName());
 
+
+        boolean convertOutToAsync = !method.isWrapperStyle() 
+            && "void".equals(method.getReturn().getClassName());
+        String asyncCname = null;
+        for (JavaParameter param : method.getParameters()) {
+            if (convertOutToAsync) {
+                if (param.isHolder()) {
+                    if (param.isINOUT()) {
+                        JavaParameter p2 = new JavaParameter();
+                        
+                        p2.setName(param.getName());
+                        p2.setClassName(param.getHolderName());
+                        p2.setStyle(JavaType.Style.IN);
+                        pollingMethod.addParameter(p2);
+                        for (String s : param.getAnnotationTags()) {
+                            JAnnotation ann = param.getAnnotation(s);
+                            p2.addAnnotation(s, ann);
+                        }
+                    } else if (!param.isHeader() && asyncCname == null) {
+                        asyncCname = param.getClassName();
+                    }
+                } else {
+                    pollingMethod.addParameter(param);
+                }
+            } else {
+                pollingMethod.addParameter(param);
+            }
+        }
+
         JavaReturn response = new JavaReturn();
-        response.setClassName(getAsyncClassName(method, "Response"));
+        response.setClassName(getAsyncClassName(method, "Response", asyncCname));
         pollingMethod.setReturn(response);
 
         // REVISIT: test the operation name in the annotation
@@ -258,25 +313,22 @@ public class OperationProcessor  extends AbstractProcessor {
         pollingMethod.addAnnotation("ResponseWrapper", method.getAnnotationMap().get("ResponseWrapper"));
         pollingMethod.addAnnotation("SOAPBinding", method.getAnnotationMap().get("SOAPBinding"));
 
-        for (Iterator iter = method.getParameters().iterator(); iter.hasNext();) {
-            pollingMethod.addParameter((JavaParameter)iter.next());
-        }
-
         method.getInterface().addMethod(pollingMethod);
     }
 
-    private String getAsyncClassName(JavaMethod method, String clzName) {
-        String response;
-        if (wrapperResponse != null) {
-            response = wrapperResponse.getClassName();
-        } else {
-            response = method.getReturn().getClassName();
-        }
-        Class<?> mappedClass = JAXBUtils.holderClass(response);
-        if (mappedClass != null) {
-            response = mappedClass.getName();
+    private String getAsyncClassName(JavaMethod method, String clzName, String name) {
+        String response = name;
+        if (response == null) {
+            if (wrapperResponse != null) {
+                response = wrapperResponse.getClassName();
+            } else {
+                response = method.getReturn().getClassName();
+            }
+            Class<?> mappedClass = JAXBUtils.holderClass(response);
+            if (mappedClass != null) {
+                response = mappedClass.getName();
+            }
         }
-
         StringBuffer sb = new StringBuffer();
         sb.append(clzName);
         sb.append("<");
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java
index fc3f235a10..3019ca7800 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java
@@ -454,7 +454,8 @@ public class ServiceProcessor extends AbstractProcessor {
                             found = true;
                         }
                     }
-                    if (jm.getReturn().getName().equals(soapHeader.getPart())) {
+                    if (jm.getReturn().getName() != null 
+                        && jm.getReturn().getName().equals(soapHeader.getPart())) {
                         found = true;
                     }
                     if (Boolean.valueOf((String)context.get(ToolConstants.CFG_EXTRA_SOAPHEADER))
diff --git a/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/hello_world_async.wsdl b/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/hello_world_async.wsdl
index 6649a95771..1d49c6e967 100644
--- a/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/hello_world_async.wsdl
+++ b/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/hello_world_async.wsdl
@@ -17,92 +17,164 @@
   specific language governing permissions and limitations
   under the License.
 -->
-<wsdl:definitions 
-    xmlns="http://schemas.xmlsoap.org/wsdl/" 
-    xmlns:http-conf="http://schemas.iona.com/transports/http/configuration" 
-    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
-    xmlns:tns="http://cxf.apache.org/w2j/hello_world_async_soap_http" 
-    xmlns:x1="http://cxf.apache.org/w2j/hello_world_async_soap_http/types" 
-    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
-    xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
+<wsdl:definitions
+    xmlns="http://schemas.xmlsoap.org/wsdl/"
+    xmlns:http-conf="http://schemas.iona.com/transports/http/configuration"
+    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
+    xmlns:tns="http://cxf.apache.org/w2j/hello_world_async_soap_http"
+    xmlns:x1="http://cxf.apache.org/w2j/hello_world_async_soap_http/types"
+    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
+    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
     xmlns:jaxws="http://java.sun.com/xml/ns/jaxws"
-    targetNamespace="http://cxf.apache.org/w2j/hello_world_async_soap_http" 
+    targetNamespace="http://cxf.apache.org/w2j/hello_world_async_soap_http"
     name="HelloWorld">
     <jaxws:bindings>
-	<jaxws:enableAsyncMapping>true</jaxws:enableAsyncMapping>
+        <jaxws:enableAsyncMapping>true</jaxws:enableAsyncMapping>
     </jaxws:bindings>
     <wsdl:types>
-	<schema 
-	    targetNamespace="http://cxf.apache.org/w2j/hello_world_async_soap_http/types" 
-	    xmlns="http://www.w3.org/2001/XMLSchema" 
-	    xmlns:x1="http://cxf.apache.org/w2j/hello_world_async_soap_http/types" 
-	    elementFormDefault="qualified">
-	    <element name="greetMeSometime">
-		<complexType>
-		    <sequence>
-			<element name="requestType" type="xsd:string"/>
-		    </sequence>
-		</complexType>
-	    </element>
-	    <element name="greetMeSometimeResponse">
-		<complexType>
-		    <sequence>
-			<element name="responseType" type="xsd:string"/>
-		    </sequence>
-		</complexType>
-	    </element>		
-      	<element name="testInt" type="xsd:int"/>
-        <element name="testIntResponse" type="xsd:int"/>
-	</schema>
+        <schema
+            targetNamespace="http://cxf.apache.org/w2j/hello_world_async_soap_http/types"
+            xmlns="http://www.w3.org/2001/XMLSchema"
+            xmlns:x1="http://cxf.apache.org/w2j/hello_world_async_soap_http/types"
+            elementFormDefault="qualified">
+            <element name="greetMeSometime">
+                <complexType>
+                    <sequence>
+                        <element name="requestType" type="xsd:string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="greetMeSometimeResponse">
+                <complexType>
+                    <sequence>
+                        <element name="responseType" type="xsd:string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="greetMeWithHeader">
+                <complexType>
+                    <sequence>
+                        <element name="requestType" type="xsd:string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="greetMeWithHeaderResponse">
+                <complexType>
+                    <sequence>
+                        <element name="responseType" type="xsd:string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="greetMeAsync">
+                <complexType>
+                    <sequence>
+                        <element name="requestType" type="xsd:string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="greetMeAsyncResponse">
+                <complexType>
+                    <sequence>
+                        <element name="responseType" type="xsd:string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="header" type="xsd:int"/>
+            <element name="testInt" type="xsd:int"/>
+            <element name="testIntResponse" type="xsd:int"/>
+        </schema>
     </wsdl:types>
     <wsdl:message name="greetMeSometimeRequest">
-	<wsdl:part name="in" element="x1:greetMeSometime"/>
+        <wsdl:part name="in" element="x1:greetMeSometime"/>
     </wsdl:message>
     <wsdl:message name="greetMeSometimeResponse">
-	<wsdl:part name="out" element="x1:greetMeSometimeResponse"/>
+        <wsdl:part name="out" element="x1:greetMeSometimeResponse"/>
+    </wsdl:message>
+    <wsdl:message name="greetMeWithHeaderRequest">
+        <wsdl:part name="in" element="x1:greetMeWithHeader"/>
+    </wsdl:message>
+    <wsdl:message name="greetMeWithHeaderResponse">
+        <wsdl:part name="out" element="x1:greetMeWithHeaderResponse"/>
+        <wsdl:part name="header" element="x1:header"/>
+    </wsdl:message>
+    <wsdl:message name="HEADER">
+        <wsdl:part name="header" element="x1:header"/>
+    </wsdl:message>
+    <wsdl:message name="greetMeAsync">
+        <wsdl:part name="in" element="x1:greetMeAsync"/>
+    </wsdl:message>
+    <wsdl:message name="greetMeAsyncResponse">
+        <wsdl:part name="out" element="x1:greetMeAsyncResponse"/>
     </wsdl:message>
     <wsdl:message name="testIntRequest">
-    	<wsdl:part name="parameters" element="x1:testInt"></wsdl:part>
+        <wsdl:part name="parameters" element="x1:testInt"></wsdl:part>
     </wsdl:message>
     <wsdl:message name="testIntResponse">
-    	<wsdl:part name="parameters" element="x1:testIntResponse"></wsdl:part>
+        <wsdl:part name="parameters" element="x1:testIntResponse"></wsdl:part>
     </wsdl:message>
     <wsdl:portType name="GreeterAsync">
-	<wsdl:operation name="greetMeSometime">
-	    <wsdl:input name="greetMeSometimeRequest" message="tns:greetMeSometimeRequest"/>
-	    <wsdl:output name="greetMeSometimeResponse" message="tns:greetMeSometimeResponse"/>
-	</wsdl:operation>
-	<wsdl:operation name="testInt">
-		<wsdl:input message="tns:testIntRequest"></wsdl:input>
-		<wsdl:output message="tns:testIntResponse"></wsdl:output>
-	</wsdl:operation>
+        <wsdl:operation name="greetMeSometime">
+            <wsdl:input name="greetMeSometimeRequest" message="tns:greetMeSometimeRequest"/>
+            <wsdl:output name="greetMeSometimeResponse" message="tns:greetMeSometimeResponse"/>
+        </wsdl:operation>
+        <wsdl:operation name="testInt">
+            <wsdl:input message="tns:testIntRequest"></wsdl:input>
+            <wsdl:output message="tns:testIntResponse"></wsdl:output>
+        </wsdl:operation>
+        <wsdl:operation name="greetMeWithHeader">
+            <wsdl:input message="tns:greetMeWithHeaderRequest"></wsdl:input>
+            <wsdl:output message="tns:greetMeWithHeaderResponse"></wsdl:output>
+        </wsdl:operation>
+        <wsdl:operation name="greetMeAsync">
+            <wsdl:input message="tns:greetMeAsync"></wsdl:input>
+            <wsdl:output message="tns:greetMeAsyncResponse"></wsdl:output>
+        </wsdl:operation>
     </wsdl:portType>
     <wsdl:binding name="GreeterAsync_SOAPBinding" type="tns:GreeterAsync">
-	<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
-	<wsdl:operation name="greetMeSometime">
-	    <soap:operation style="document"/>
-	    <wsdl:input>
-		<soap:body use="literal"/>
-	    </wsdl:input>
-	    <wsdl:output>
-		<soap:body use="literal"/>
-	    </wsdl:output>
-	</wsdl:operation>
-	<wsdl:operation name="testInt">
-	    <soap:operation style="document"/>
-	    <wsdl:input>
-		<soap:body use="literal"/>
-	    </wsdl:input>
-	    <wsdl:output>
-		<soap:body use="literal"/>
-	    </wsdl:output>
-	</wsdl:operation>
+        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
+        <wsdl:operation name="greetMeSometime">
+            <soap:operation style="document"/>
+            <wsdl:input>
+                <soap:body use="literal"/>
+            </wsdl:input>
+            <wsdl:output>
+                <soap:body use="literal"/>
+            </wsdl:output>
+        </wsdl:operation>
+        <wsdl:operation name="testInt">
+            <soap:operation style="document"/>
+            <wsdl:input>
+                <soap:body use="literal"/>
+            </wsdl:input>
+            <wsdl:output>
+                <soap:body use="literal"/>
+            </wsdl:output>
+        </wsdl:operation>
+        <wsdl:operation name="greetMeWithHeader">
+            <soap:operation style="document"/>
+            <wsdl:input>
+                <soap:body use="literal" parts="in"/>
+            </wsdl:input>
+            <wsdl:output>
+                <soap:body use="literal" parts="out"/>
+                <soap:header message="tns:greetMeWithHeaderResponse" part="header" use="literal"/>
+            </wsdl:output>
+        </wsdl:operation>
+        <wsdl:operation name="greetMeAsync">
+            <soap:operation style="document"/>
+            <wsdl:input>
+                <soap:body use="literal"/>
+            </wsdl:input>
+            <wsdl:output>
+                <soap:body use="literal"/>
+            </wsdl:output>
+        </wsdl:operation>
     </wsdl:binding>
     <wsdl:service name="SOAPService">
-	<wsdl:port name="SoapPort" binding="tns:GreeterAsync_SOAPBinding">
-	    <soap:address location="http://localhost:9000/SoapContext/SoapPort"/>
-	    <http-conf:client/>
-	    <http-conf:server/>
-	</wsdl:port>
+        <wsdl:port name="SoapPort" binding="tns:GreeterAsync_SOAPBinding">
+            <soap:address location="http://localhost:9000/SoapContext/SoapPort"/>
+            <http-conf:client/>
+            <http-conf:server/>
+        </wsdl:port>
     </wsdl:service>
 </wsdl:definitions>
