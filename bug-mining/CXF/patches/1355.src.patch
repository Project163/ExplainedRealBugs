diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java
index c73d0dfbb6..8d07d4019c 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java
@@ -938,10 +938,17 @@ public class WadlGenerator implements RequestHandler {
         }
         SchemaCollection xmlSchemaCollection = new SchemaCollection();
         Collection<DOMSource> schemas = new HashSet<DOMSource>();
+        List<String> targetNamespaces = new ArrayList<String>();
         try {
             for (DOMResult r : JAXBUtils.generateJaxbSchemas(context,
                                     CastUtils.cast(Collections.emptyMap(), String.class, DOMResult.class))) {
-                schemas.add(new DOMSource(r.getNode(), r.getSystemId()));
+                DOMSource source = new DOMSource(r.getNode(), r.getSystemId());
+                schemas.add(source);
+                String tns = 
+                    ((Document)source.getNode()).getDocumentElement().getAttribute("targetNamespace");
+                if (!StringUtils.isEmpty(tns)) {
+                    targetNamespaces.add(tns);
+                }
             }
         } catch (IOException e) {
             LOG.fine("No schema can be generated");
@@ -951,10 +958,12 @@ public class WadlGenerator implements RequestHandler {
         boolean hackAroundEmptyNamespaceIssue = false;
         for (DOMSource r : schemas) {
             hackAroundEmptyNamespaceIssue =
-                              addSchemaDocument(xmlSchemaCollection,
-                             (Document)r.getNode(),
-                              r.getSystemId(),
-                              hackAroundEmptyNamespaceIssue);
+                              addSchemaDocument(
+                                  xmlSchemaCollection,
+                                  targetNamespaces,
+                                  (Document)r.getNode(),
+                                  r.getSystemId(),
+                                  hackAroundEmptyNamespaceIssue);
         }
         return xmlSchemaCollection;
     }
@@ -963,13 +972,13 @@ public class WadlGenerator implements RequestHandler {
 
         XmlRootElement root = type.getAnnotation(XmlRootElement.class);
         if (root != null) {
-            QName qname = getQNameFromParts(root.name(), root.namespace(), clsMap);
+            QName qname = getQNameFromParts(root.name(), root.namespace(), type, clsMap);
             if (qname != null) {
                 return qname;
             }
             String ns = JAXBUtils.getPackageNamespace(type);
             if (ns != null) {
-                return getQNameFromParts(root.name(), ns, clsMap);
+                return getQNameFromParts(root.name(), ns, type, clsMap);
             } else {
                 return null;
             }
@@ -983,6 +992,7 @@ public class WadlGenerator implements RequestHandler {
             Object instance = type.newInstance();
             return getQNameFromParts(jaxbInfo.getElementLocalName(instance),
                                      jaxbInfo.getElementNamespaceURI(instance),
+                                     type,
                                      clsMap);
         } catch (Exception ex) {
             // ignore
@@ -1038,6 +1048,7 @@ public class WadlGenerator implements RequestHandler {
     
     // TODO : can we reuse this block with JAXBBinding somehow ?
     public boolean addSchemaDocument(SchemaCollection col,
+                                     List<String> tnsList,
                                      Document d,
                                      String systemId,
                                      boolean hackAroundEmptyNamespaceIssue) {
@@ -1051,7 +1062,7 @@ public class WadlGenerator implements RequestHandler {
             //create a copy of the dom so we
             //can modify it.
             d = copy(d);
-            ns = "";
+            ns = tnsList.isEmpty() ? "" : tnsList.get(0);
             d.getDocumentElement().setAttribute("targetNamespace", ns);
         }
 
@@ -1118,14 +1129,25 @@ public class WadlGenerator implements RequestHandler {
     }
 
 
-    private QName getQNameFromParts(String name, String namespace, Map<Class<?>, QName> clsMap) {
-        if (name == null || JAXB_DEFAULT_NAME.equals(name) || name.length() == 0) {
+    private QName getQNameFromParts(String name, 
+                                    String namespace,
+                                    Class<?> type,
+                                    Map<Class<?>, QName> clsMap) {
+        if (namespace == null || JAXB_DEFAULT_NAMESPACE.equals(namespace) || namespace.length() == 0) {
             return null;
         }
-        if (namespace == null || JAXB_DEFAULT_NAMESPACE.equals(namespace) || namespace.length() == 0) {
+        if (name == null || name.length() == 0) {
             return null;
         }
-
+        if (JAXB_DEFAULT_NAME.equals(name)) {
+            name = type.getSimpleName();
+            StringBuilder sb = new StringBuilder();
+            sb.append(Character.toLowerCase(name.charAt(0))); 
+            if (name.length() > 1) {
+                sb.append(name.substring(1));
+            }
+            name = sb.toString();
+        }
         String prefix = getPrefix(namespace, clsMap);
         return new QName(namespace, name, prefix);
     }
@@ -1451,7 +1473,9 @@ public class WadlGenerator implements RequestHandler {
                     return qname;
                 } else {
                     return getQNameFromParts(qname.getLocalPart(),
-                                             qname.getNamespaceURI(), clsMap);
+                                             qname.getNamespaceURI(),
+                                             type,
+                                             clsMap);
                 }
             }
             return null;
@@ -1477,7 +1501,7 @@ public class WadlGenerator implements RequestHandler {
                     elementName = name.toLowerCase();
                 }
                 if (elementName != null) {
-                    return getQNameFromParts(elementName, entry.getKey(), clsMap);
+                    return getQNameFromParts(elementName, entry.getKey(), type, clsMap);
                 }
             }
             return null;
diff --git a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/WadlGeneratorTest.java b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/WadlGeneratorTest.java
index 795278423a..30e778a4f5 100644
--- a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/WadlGeneratorTest.java
+++ b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/WadlGeneratorTest.java
@@ -26,9 +26,14 @@ import java.util.HashSet;
 import java.util.List;
 import java.util.Set;
 
+import javax.ws.rs.Consumes;
+import javax.ws.rs.PUT;
+import javax.ws.rs.Path;
+import javax.ws.rs.Produces;
 import javax.ws.rs.core.HttpHeaders;
 import javax.ws.rs.core.MediaType;
 import javax.ws.rs.core.Response;
+import javax.xml.bind.annotation.XmlRootElement;
 
 import org.w3c.dom.Document;
 import org.w3c.dom.Element;
@@ -211,6 +216,35 @@ public class WadlGeneratorTest extends Assert {
         checkBookStoreInfo(els.get(0), "ns1:thebook", "ns1:thebook2", "ns1:thechapter");
     }
     
+    @Test
+    public void testTwoSchemasSameNs() throws Exception {
+        WadlGenerator wg = new WadlGenerator();
+        wg.setApplicationTitle("My Application");
+        wg.setNamespacePrefix("ns");
+        ClassResourceInfo cri = 
+            ResourceUtils.createClassResourceInfo(TestResource.class, TestResource.class, true, true);
+        Message m = mockMessage("http://localhost:8080/baz", "/bar", WadlGenerator.WADL_QUERY, null);
+        
+        Response r = wg.handleRequest(m, cri);
+        checkResponse(r);
+        Document doc = DOMUtils.readXml(new StringReader(r.getEntity().toString()));
+        checkDocs(doc.getDocumentElement(), "My Application", "", "");
+        List<Element> grammarEls = DOMUtils.getChildrenWithName(doc.getDocumentElement(), 
+                                                                WadlGenerator.WADL_NS, 
+                                                                "grammars");
+        assertEquals(1, grammarEls.size());
+        List<Element> schemasEls = DOMUtils.getChildrenWithName(grammarEls.get(0), 
+              XmlSchemaConstants.XSD_NAMESPACE_URI, "schema");
+        assertEquals(2, schemasEls.size());
+        assertEquals("http://example.com/test", schemasEls.get(0).getAttribute("targetNamespace"));
+        assertEquals("http://example.com/test", schemasEls.get(1).getAttribute("targetNamespace"));
+        List<Element> reps = DOMUtils.findAllElementsByTagNameNS(doc.getDocumentElement(), 
+                                       WadlGenerator.WADL_NS, "representation");
+        assertEquals(2, reps.size());
+        assertEquals("ns1:testCompositeObject", reps.get(0).getAttribute("element"));
+        assertEquals("ns1:testCompositeObject", reps.get(1).getAttribute("element"));
+    }
+    
     @Test
     public void testRootResourceWithSingleSlash() throws Exception {
         WadlGenerator wg = new WadlGenerator();
@@ -718,4 +752,33 @@ public class WadlGeneratorTest extends Assert {
             return repeating;
         }
     }
+    
+    @XmlRootElement(namespace = "http://example.com/test")
+    public static class TestCompositeObject {
+        private int id;
+        private String name;
+        public int getId() {
+            return id;
+        }
+        public void setId(int id) {
+            this.id = id;
+        }
+        public String getName() {
+            return name;
+        }
+        public void setName(String name) {
+            this.name = name;
+        }
+    }
+
+    public static class TestResource {
+    
+        @PUT
+        @Path("setTest3")
+        @Produces("application/xml")
+        @Consumes("application/xml")
+        public TestCompositeObject setTest3(TestCompositeObject transfer) {
+            return transfer;
+        }
+    }
 }
