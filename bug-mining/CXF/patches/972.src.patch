diff --git a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java
index 1159f315b3..326fb5931e 100644
--- a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java
+++ b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java
@@ -24,6 +24,9 @@ import java.util.Collection;
 import java.util.List;
 import java.util.concurrent.Executor;
 
+import javax.jws.WebMethod;
+import javax.jws.WebParam;
+import javax.jws.WebResult;
 import javax.jws.WebService;
 import javax.jws.soap.SOAPBinding;
 import javax.wsdl.Definition;
@@ -65,6 +68,7 @@ import org.junit.Test;
 
 
 public class CodeFirstTest extends AbstractJaxWsTest {
+
     String address = "local://localhost:9000/Hello";
     
     @Test
@@ -469,4 +473,54 @@ public class CodeFirstTest extends AbstractJaxWsTest {
             return message;
         }
     }
+    
+    @Test
+    public void testCXF2766() throws Exception {
+        JaxWsServerFactoryBean factory = new JaxWsServerFactoryBean(); 
+        factory.setServiceClass(CXF2766.class); 
+        factory.setServiceBean(new CXF2766Impl()); 
+        factory.setAddress("local://localhost/testcxf2766"); 
+        Server server = factory.create();
+        server.getEndpoint().getInInterceptors().add(new LoggingInInterceptor());
+        server.getEndpoint().getOutInterceptors().add(new LoggingOutInterceptor());
+        Document doc = getWSDLDocument(server);
+        //org.apache.cxf.helpers.XMLUtils.printDOM(doc);
+        assertValid("//wsdl:message[@name='doReturnResponse']/wsdl:part[@name='returnResponse']", doc);
+        
+        QName serviceName = new QName("http://cxf.apache.org/service.wsdl", "BareService");
+        QName portName = new QName("http://cxf.apache.org/service.wsdl", "BarePort");
+
+        ServiceImpl service = new ServiceImpl(getBus(), (URL)null, serviceName, null);
+        service.addPort(portName, "http://schemas.xmlsoap.org/soap/",
+                        "local://localhost/testcxf2766"); 
+        CXF2766 proxy = service.getPort(portName, CXF2766.class);
+        proxy.doReturn(new ReturnRequestType());
+    }
+    @WebService(targetNamespace = "http://cxf.apache.org/service.wsdl")
+    @SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
+    public static interface CXF2766 {
+        @WebResult(name = "return-response", 
+                   targetNamespace = "http://cxf.apache.org/service.wsdl/types",
+                   partName = "returnResponse")
+        @WebMethod(action = "http://cxf.apache.org/doReturn")
+        ReturnResponseType 
+        doReturn(@WebParam(partName = "returnTrx",
+                           name = "return-request", 
+                           targetNamespace = "http://cxf.apache.org/service.wsdl/types")
+                           ReturnRequestType returnTrx);
+    }
+    @WebService(targetNamespace = "http://cxf.apache.org/service.wsdl")
+    public static class CXF2766Impl implements CXF2766 {
+        public ReturnResponseType doReturn(ReturnRequestType returnTrx) {
+            return new ReturnResponseType();
+        }
+    }
+    
+    @XmlType(name = "ReturnRequestType", namespace = "http://cxf.apache.org/service.wsdl/types")
+    public static class ReturnRequestType {
+    }
+    @XmlType(name = "ReturnResponseType", namespace = "http://cxf.apache.org/service.wsdl/types")
+    public static class ReturnResponseType {
+    }
+
 }
diff --git a/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java b/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java
index e4bf7fb73e..e438f4f8c9 100644
--- a/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java
+++ b/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java
@@ -1101,18 +1101,16 @@ public class ReflectionServiceFactoryBean extends AbstractServiceFactoryBean {
             XmlSchema schema = null;
 
             QName qname = (QName)mpi.getProperty(ELEMENT_NAME);
-            if (message.getMessageParts().size() == 1) {
-                qname = qname == null && !isOut ? getInParameterName(opInfo, method, -1) : qname;
-                qname = qname == null && isOut ? getOutParameterName(opInfo, method, -1) : qname;
+            if (message.getMessageParts().size() == 1 && qname == null) {
+                qname = !isOut ? getInParameterName(opInfo, method, -1) 
+                        : getOutParameterName(opInfo, method, -1);
+                
                 if (qname.getLocalPart().startsWith("arg") || qname.getLocalPart().startsWith("return")) {
                     qname = isOut
                         ? new QName(qname.getNamespaceURI(), method.getName() + "Response") : new QName(qname
                             .getNamespaceURI(), method.getName());
                 }
-
-            }
-
-            if (isOut && message.getMessageParts().size() > 1 && qname == null) {
+            } else if (isOut && message.getMessageParts().size() > 1 && qname == null) {
                 while (!isOutParam(method, paraNumber)) {
                     paraNumber++;
                 }
