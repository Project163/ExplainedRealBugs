diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/ext/Description.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/ext/Description.java
index 045ec5d2bb..d1723a0a6d 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/ext/Description.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/ext/Description.java
@@ -24,11 +24,29 @@ import java.lang.annotation.Retention;
 import java.lang.annotation.RetentionPolicy;
 import java.lang.annotation.Target;
 
+/**
+ * Can be used to document resource classes and methods
+ * 
+ * See {@link <a href="http://www.w3.org/Submission/wadl/#x3-80002.3">WADL Documentation</a>}.
+ */
 @Target({ElementType.TYPE, ElementType.METHOD })
 @Retention(RetentionPolicy.RUNTIME)
 public @interface Description {
+    /**
+     * This value, if set, will be set as WADL doc content
+     */
     String value() default "";
+    /**
+     * Maps to WADL doc/@xml:lang attribute 
+     **/
     String lang() default "";
+    /**
+     * Maps to WADL doc/@title attribute 
+     **/
     String title() default "";
+    /**
+     * This uri, if set, will be used to retrieve 
+     * the content which will be set as WADL doc content
+     */
     String docuri() default "";
 }
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java
index a4c8783131..12f997c517 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/interceptor/JAXRSOutInterceptor.java
@@ -113,8 +113,9 @@ public class JAXRSOutInterceptor extends AbstractOutDatabindingInterceptor {
             Response response = null;
             if (objs.get(0) instanceof Response) {
                 response = (Response)responseObj;
-            } else {    
-                response = Response.ok(responseObj).build();
+            } else {
+                int status = getStatus(message, 200);
+                response = Response.status(status).entity(responseObj).build();
             }
             
             Exchange exchange = message.getExchange();
@@ -137,11 +138,15 @@ public class JAXRSOutInterceptor extends AbstractOutDatabindingInterceptor {
             serializeMessage(message, response, ori, true);        
             
         } else {
-            Object customStatus = message.getExchange().get(Message.RESPONSE_CODE);
-            int status = customStatus == null ? 204 : (Integer)customStatus;
+            int status = getStatus(message, 204);
             message.put(Message.RESPONSE_CODE, status);
         }
     }
+
+    private int getStatus(Message message, int defaultValue) {
+        Object customStatus = message.getExchange().get(Message.RESPONSE_CODE);
+        return customStatus == null ? defaultValue : (Integer)customStatus;
+    }
     
     @SuppressWarnings("unchecked")
     private void serializeMessage(Message message, 
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java
index 1b746b3369..106dd93868 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/model/wadl/WadlGenerator.java
@@ -88,7 +88,7 @@ public class WadlGenerator implements RequestHandler {
 
     public static final String WADL_QUERY = "_wadl"; 
     public static final MediaType WADL_TYPE = MediaType.valueOf("application/vnd.sun.wadl+xml"); 
-    public static final String WADL_NS = "http://research.sun.com/wadl/2006/10";    
+    public static final String WADL_NS = "http://wadl.dev.java.net/2009/02";    
     
     private static final Logger LOG = LogUtils.getL7dLogger(WadlGenerator.class);
     private static final String JAXB_DEFAULT_NAMESPACE = "##default";
@@ -495,10 +495,12 @@ public class WadlGenerator implements RequestHandler {
         if (classes.isEmpty()) {
             return null;
         }
-        JAXBUtils.scanPackages(classes, null);
+        Set<Class<?>> classesToBeBound = new HashSet<Class<?>>(classes);
+        JAXBUtils.scanPackages(classesToBeBound, null);
+
         JAXBContext ctx;
         try {
-            ctx = JAXBContext.newInstance(classes.toArray(new Class[classes.size()]));
+            ctx = JAXBContext.newInstance(classesToBeBound.toArray(new Class[classes.size()]));
             return ctx;
         } catch (JAXBException ex) {
             LOG.fine("No JAXB context can be created");
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractAtomProvider.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractAtomProvider.java
new file mode 100644
index 0000000000..68695fd1b8
--- /dev/null
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractAtomProvider.java
@@ -0,0 +1,74 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements. See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership. The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied. See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+package org.apache.cxf.jaxrs.provider;
+
+import java.io.IOException;
+import java.io.InputStream;
+import java.io.OutputStream;
+import java.lang.annotation.Annotation;
+import java.lang.reflect.Type;
+
+import javax.ws.rs.core.MediaType;
+import javax.ws.rs.core.MultivaluedMap;
+import javax.ws.rs.ext.MessageBodyReader;
+import javax.ws.rs.ext.MessageBodyWriter;
+
+import org.apache.abdera.Abdera;
+import org.apache.abdera.model.Document;
+import org.apache.abdera.model.Element;
+import org.apache.abdera.writer.Writer;
+
+public abstract class AbstractAtomProvider<T extends Element> 
+    implements MessageBodyWriter<T>, MessageBodyReader<T> {
+
+    private static final Abdera ATOM_ENGINE = new Abdera();
+        
+    private boolean formattedOutput;
+    
+    public long getSize(T element, Class<?> type, Type genericType, Annotation[] annotations, MediaType mt) {
+        return -1;
+    }
+
+    public void writeTo(T element, Class<?> clazz, Type type, Annotation[] a, 
+                        MediaType mt, MultivaluedMap<String, Object> headers, OutputStream os) 
+        throws IOException {
+        if (MediaType.APPLICATION_JSON_TYPE.isCompatible(mt)) {
+            Writer w = ATOM_ENGINE.getWriterFactory().getWriter("json");
+            element.writeTo(w, os);   
+        } else if (formattedOutput) {
+            Writer w = ATOM_ENGINE.getWriterFactory().getWriter("prettyxml");
+            element.writeTo(w, os);
+        } else {
+            element.writeTo(os);
+        }
+    }
+
+    public T readFrom(Class<T> clazz, Type t, Annotation[] a, MediaType mt, 
+                         MultivaluedMap<String, String> headers, InputStream is) 
+        throws IOException {
+        Document<T> doc = ATOM_ENGINE.getParser().parse(is);
+        return doc.getRoot();
+    }
+
+    public void setFormattedOutput(boolean formattedOutput) {
+        this.formattedOutput = formattedOutput;
+    }
+
+}
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java
index 9387dbe73c..92d0e37505 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AbstractJAXBProvider.java
@@ -74,7 +74,6 @@ import org.apache.cxf.jaxb.JAXBBeanInfo;
 import org.apache.cxf.jaxb.JAXBContextProxy;
 import org.apache.cxf.jaxb.JAXBUtils;
 import org.apache.cxf.jaxrs.ext.MessageContext;
-import org.apache.cxf.jaxrs.impl.MetadataMap;
 import org.apache.cxf.jaxrs.utils.AnnotationUtils;
 import org.apache.cxf.jaxrs.utils.InjectionUtils;
 import org.apache.cxf.jaxrs.utils.JAXRSUtils;
@@ -110,7 +109,6 @@ public abstract class AbstractJAXBProvider extends AbstractConfigurableProvider
     protected List<String> inDropElements;
     protected Map<String, String> inElementsMap;
     protected Map<String, String> inAppendMap;
-    protected Map<String, String> inAppendAttributesMap;
     private boolean attributesToElements;
     
     private MessageContext mc;
@@ -569,10 +567,6 @@ public abstract class AbstractJAXBProvider extends AbstractConfigurableProvider
         this.inAppendMap = inElements;
     }
     
-    public void setInAppendAttributes(Map<String, String> inElements) {
-        this.inAppendAttributesMap = inElements;
-    }
-    
     public void setInTransformElements(Map<String, String> inElements) {
         this.inElementsMap = inElements;
     }
@@ -606,9 +600,9 @@ public abstract class AbstractJAXBProvider extends AbstractConfigurableProvider
             reader = StaxUtils.createFilteredReader(createNewReaderIfNeeded(reader, is),
                                                new StaxStreamFilter(dropElements.toArray(new QName[]{})));    
         }
-        if (inElementsMap != null || inAppendMap != null || inAppendAttributesMap != null) {
+        if (inElementsMap != null || inAppendMap != null) {
             reader = new InTransformReader(createNewReaderIfNeeded(reader, is),
-                                           inElementsMap, inAppendMap, inAppendAttributesMap);
+                                           inElementsMap, inAppendMap);
         }
         return reader;
     }
@@ -864,24 +858,6 @@ public abstract class AbstractJAXBProvider extends AbstractConfigurableProvider
         }
     }
     
-    private static class AttributeValue {
-        private String name;
-        private String value;
-        
-        public AttributeValue(String n, String v) {
-            this.name = n;
-            this.value = v;
-        }
-        
-        public String getName() {
-            return name;
-        }
-        
-        public String getValue() {
-            return value;
-        }
-    }
-    
     protected static class InTransformReader extends DepthXMLStreamReader {
         
         private static final String INTERN_NAMES = "org.codehaus.stax2.internNames";
@@ -890,64 +866,19 @@ public abstract class AbstractJAXBProvider extends AbstractConfigurableProvider
         private Map<QName, QName> inElementsMap = new HashMap<QName, QName>(5);
         private Map<QName, QName> inAppendMap = new HashMap<QName, QName>(5);
         private Map<String, String> nsMap = new HashMap<String, String>(5);
-        private MultivaluedMap<QName, AttributeValue> inAttributes;
         private QName currentQName;
         private QName previousQName;
-        private List<AttributeValue> currentAttributes;
         private int previousDepth = -1;
         
         public InTransformReader(XMLStreamReader reader, 
                                  Map<String, String> inMap,
-                                 Map<String, String> appendMap,
-                                 Map<String, String> appendAttrMap) {
+                                 Map<String, String> appendMap) {
             super(reader);
             convertToMapOfQNames(inMap, inElementsMap, nsMap);
             convertToMapOfQNames(appendMap, inAppendMap, null);
-            convertToMapOfAttributes(appendAttrMap);
-        }
-        
-        private void convertToMapOfAttributes(Map<String, String> map) {
-            if (map != null) {
-                inAttributes = new MetadataMap<QName, AttributeValue>();
-                for (Map.Entry<String, String> entry : map.entrySet()) {
-                    QName lname = convertStringToQName(entry.getKey());
-                    String[] values = entry.getValue().split(":");
-                    inAttributes.add(lname, new AttributeValue(values[0], values[1]));
-                }
-            }
         }
         
-        public int getAttributeCount() {
-            return currentAttributes == null ? super.getAttributeCount() 
-                : currentAttributes.size() + super.getAttributeCount();
-        }
-
-        public String getAttributeLocalName(int ind) {
-            if (currentAttributes == null) {
-                return super.getAttributeLocalName(ind);
-            } else {
-                int count = super.getAttributeCount();
-                return ind < count ? super.getAttributeLocalName(ind) 
-                    : currentAttributes.get(ind - count).getName(); 
-            }
-        }
-
-        public String getAttributeNamespace(int ind) {
-            return currentAttributes == null ? reader.getAttributeNamespace(ind) : "";
-        }
-
-        public String getAttributeValue(int ind) {
-            if (currentAttributes == null) {
-                return super.getAttributeValue(ind);
-            } else {
-                int count = super.getAttributeCount();
-                return ind < count ? super.getAttributeValue(ind) 
-                    : currentAttributes.get(ind - count).getValue(); 
-            }
-        }
-
         public int next() throws XMLStreamException {
-            currentAttributes = null;
             if (currentQName != null) {
                 return XMLStreamConstants.START_ELEMENT;
             } else if (previousDepth != -1 && previousDepth == getDepth() + 1) {
@@ -993,9 +924,6 @@ public abstract class AbstractJAXBProvider extends AbstractConfigurableProvider
         public String getNamespaceURI() {
          
             QName theName = readCurrentElement();
-            if (inAttributes != null) {
-                currentAttributes = inAttributes.remove(theName);
-            }
             QName appendQName = inAppendMap.remove(theName);
             if (appendQName != null) {
                 previousDepth = getDepth();
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomEntryProvider.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomEntryProvider.java
index 300bb447b3..affd5460d5 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomEntryProvider.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomEntryProvider.java
@@ -19,63 +19,27 @@
 
 package org.apache.cxf.jaxrs.provider;
 
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.OutputStream;
 import java.lang.annotation.Annotation;
 import java.lang.reflect.Type;
 
 import javax.ws.rs.Consumes;
 import javax.ws.rs.Produces;
 import javax.ws.rs.core.MediaType;
-import javax.ws.rs.core.MultivaluedMap;
-import javax.ws.rs.ext.MessageBodyReader;
-import javax.ws.rs.ext.MessageBodyWriter;
 import javax.ws.rs.ext.Provider;
 
-import org.apache.abdera.Abdera;
-import org.apache.abdera.model.Document;
 import org.apache.abdera.model.Entry;
-import org.apache.abdera.writer.Writer;
 
 @Produces({"application/atom+xml", "application/atom+xml;type=entry", "application/json" })
 @Consumes({"application/atom+xml", "application/atom+xml;type=entry" })
 @Provider
-public class AtomEntryProvider 
-    implements MessageBodyReader<Entry>, MessageBodyWriter<Entry> {
-
-    private static final Abdera ATOM_ENGINE = new Abdera();
-    private static final String JSON_TYPE = "application/json";
+public class AtomEntryProvider extends AbstractAtomProvider<Entry> {
     
-    public long getSize(Entry feed,
-                        Class<?> type, Type genericType, Annotation[] annotations, MediaType mt) {
-        return -1;
-    }
-
     public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mt) {
         return Entry.class.isAssignableFrom(type);
     }
-
-    public void writeTo(Entry entry, Class<?> clazz, Type type, Annotation[] a, 
-                        MediaType mt, MultivaluedMap<String, Object> headers, OutputStream os) 
-        throws IOException {
-        if (JSON_TYPE.equals(mt.toString())) {
-            Writer w = ATOM_ENGINE.getWriterFactory().getWriter("json");
-            entry.writeTo(w, os);   
-        } else {
-            entry.writeTo(os);
-        }
-        
-    }
-
+    
     public boolean isReadable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mt) {
         return Entry.class.isAssignableFrom(type);
     }
-
-    public Entry readFrom(Class<Entry> clazz, Type t, Annotation[] a, MediaType mt, 
-                          MultivaluedMap<String, String> headers, InputStream is) 
-        throws IOException {
-        Document<Entry> doc = ATOM_ENGINE.getParser().parse(is);
-        return doc.getRoot();
-    }
+    
 }
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomFeedProvider.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomFeedProvider.java
index c510b2483a..fb22863733 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomFeedProvider.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/provider/AtomFeedProvider.java
@@ -19,63 +19,25 @@
 
 package org.apache.cxf.jaxrs.provider;
 
-import java.io.IOException;
-import java.io.InputStream;
-import java.io.OutputStream;
 import java.lang.annotation.Annotation;
 import java.lang.reflect.Type;
 
 import javax.ws.rs.Consumes;
 import javax.ws.rs.Produces;
 import javax.ws.rs.core.MediaType;
-import javax.ws.rs.core.MultivaluedMap;
-import javax.ws.rs.ext.MessageBodyReader;
-import javax.ws.rs.ext.MessageBodyWriter;
 import javax.ws.rs.ext.Provider;
 
-import org.apache.abdera.Abdera;
-import org.apache.abdera.model.Document;
 import org.apache.abdera.model.Feed;
-import org.apache.abdera.writer.Writer;
 
 @Produces({"application/atom+xml", "application/atom+xml;type=feed", "application/json" })
 @Consumes({"application/atom+xml", "application/atom+xml;type=feed" })
 @Provider
-public class AtomFeedProvider 
-    implements MessageBodyWriter<Feed>, MessageBodyReader<Feed> {
-
-    private static final String JSON_TYPE = "application/json";
-    private static final Abdera ATOM_ENGINE = new Abdera();
-        
-    public long getSize(Feed feed, Class<?> type, Type genericType, Annotation[] annotations, MediaType mt) {
-        return -1;
-    }
-
+public class AtomFeedProvider extends AbstractAtomProvider<Feed> {
     public boolean isWriteable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mt) {
         return Feed.class.isAssignableFrom(type);
     }
-
-    public void writeTo(Feed feed, Class<?> clazz, Type type, Annotation[] a, 
-                        MediaType mt, MultivaluedMap<String, Object> headers, OutputStream os) 
-        throws IOException {
-        if (JSON_TYPE.equals(mt.toString())) {
-            Writer w = ATOM_ENGINE.getWriterFactory().getWriter("json");
-            feed.writeTo(w, os);   
-        } else {
-            feed.writeTo(os);
-        }
-        
-    }
-
+    
     public boolean isReadable(Class<?> type, Type genericType, Annotation[] annotations, MediaType mt) {
         return Feed.class.isAssignableFrom(type);
     }
-
-    public Feed readFrom(Class<Feed> clazz, Type t, Annotation[] a, MediaType mt, 
-                         MultivaluedMap<String, String> headers, InputStream is) 
-        throws IOException {
-        Document<Feed> doc = ATOM_ENGINE.getParser().parse(is);
-        return doc.getRoot();
-    }
-
 }
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/servlet/CXFNonSpringJaxrsServlet.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/servlet/CXFNonSpringJaxrsServlet.java
index 588aa13eb8..393282ce02 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/servlet/CXFNonSpringJaxrsServlet.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/servlet/CXFNonSpringJaxrsServlet.java
@@ -218,7 +218,7 @@ public class CXFNonSpringJaxrsServlet extends CXFNonSpringServlet {
     }    
     
     
-    private Object createSingletonInstance(Class<?> cls, ServletConfig sc) throws ServletException {
+    protected Object createSingletonInstance(Class<?> cls, ServletConfig sc) throws ServletException {
         Constructor c = ResourceUtils.findResourceConstructor(cls, false);
         if (c == null) {
             throw new ServletException("No valid constructor found for " + cls.getName());
@@ -233,7 +233,9 @@ public class CXFNonSpringJaxrsServlet extends CXFNonSpringServlet {
         Object[] values = isDefault ? new Object[]{} 
             : new Object[]{c.getParameterTypes()[0] == ServletConfig.class ? sc : sc.getServletContext()}; 
         try {
-            return c.newInstance(values);
+            Object instance = c.newInstance(values);
+            configureSingleton(instance);
+            return instance;
         } catch (InstantiationException ex) {
             ex.printStackTrace();
             throw new ServletException("Resource class " + cls.getName()
@@ -249,6 +251,10 @@ public class CXFNonSpringJaxrsServlet extends CXFNonSpringServlet {
         }
     }
     
+    protected void configureSingleton(Object instance) {
+        
+    }
+    
     protected void createServerFromApplication(String cName) throws ServletException {
         Class<?> appClass = loadClass(cName, "Application");
         Application app = null;
diff --git a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/BookStore.java b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/BookStore.java
index 6807115e54..ddee73f2dc 100644
--- a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/BookStore.java
+++ b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/BookStore.java
@@ -33,6 +33,8 @@ import javax.ws.rs.core.HttpHeaders;
 
 import org.apache.cxf.jaxrs.ext.Description;
 import org.apache.cxf.jaxrs.fortest.jaxb.packageinfo.Book2;
+import org.apache.cxf.jaxrs.model.wadl.jaxb.Book;
+import org.apache.cxf.jaxrs.model.wadl.jaxb.Chapter;
 
 @Path("/bookstore/{id}")
 @Consumes({"application/xml", "application/json" })
diff --git a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/Book.java b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/Book.java
similarity index 97%
rename from rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/Book.java
rename to rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/Book.java
index 653987e3cb..b38f78130e 100644
--- a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/Book.java
+++ b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/Book.java
@@ -16,7 +16,7 @@
  * specific language governing permissions and limitations
  * under the License.
  */
-package org.apache.cxf.jaxrs.model.wadl;
+package org.apache.cxf.jaxrs.model.wadl.jaxb;
 
 import javax.ws.rs.FormParam;
 import javax.ws.rs.GET;
diff --git a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/Chapter.java b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/Chapter.java
similarity index 96%
rename from rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/Chapter.java
rename to rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/Chapter.java
index fadb26e9c3..cd071eb670 100644
--- a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/Chapter.java
+++ b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/Chapter.java
@@ -16,7 +16,7 @@
  * specific language governing permissions and limitations
  * under the License.
  */
-package org.apache.cxf.jaxrs.model.wadl;
+package org.apache.cxf.jaxrs.model.wadl.jaxb;
 
 import javax.ws.rs.GET;
 import javax.ws.rs.Path;
diff --git a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/ObjectFactory.java b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/ObjectFactory.java
new file mode 100644
index 0000000000..f0f3468e7d
--- /dev/null
+++ b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/model/wadl/jaxb/ObjectFactory.java
@@ -0,0 +1,47 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements. See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership. The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied. See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+package org.apache.cxf.jaxrs.model.wadl.jaxb;
+
+import javax.xml.bind.JAXBElement;
+import javax.xml.bind.annotation.XmlElementDecl;
+import javax.xml.bind.annotation.XmlRegistry;
+import javax.xml.namespace.QName;
+
+@XmlRegistry
+public class ObjectFactory {
+    private static final QName BOOK_QNAME = new QName("http://superbooks", "thebook");
+    private static final QName CHAPTER_QNAME = new QName("http://superbooks", "thechapter");
+    
+    public Book createBook() {
+        return new Book();
+    }
+    public Chapter createChapter() {
+        return new Chapter();
+    }
+    
+    @XmlElementDecl(namespace = "http://superbooks", name = "thebook")
+    public JAXBElement<Book> createBook(Book value) {
+        return new JAXBElement<Book>(BOOK_QNAME, Book.class, null, value);
+    }
+    
+    @XmlElementDecl(namespace = "http://superbooks", name = "thechapter")
+    public JAXBElement<Chapter> createChapter(Chapter value) {
+        return new JAXBElement<Chapter>(CHAPTER_QNAME, Chapter.class, null, value);
+    }
+}
diff --git a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JAXBElementProviderTest.java b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JAXBElementProviderTest.java
index 7dfaea2aa5..d4c66129f2 100644
--- a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JAXBElementProviderTest.java
+++ b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JAXBElementProviderTest.java
@@ -395,25 +395,6 @@ public class JAXBElementProviderTest extends Assert {
         assertEquals("b", tag.getGroup());
     }
     
-    @Test
-    @SuppressWarnings("unchecked")
-    public void testInAppendAttributes() throws Exception {
-        String data = "<?xml version='1.0' encoding='UTF-8'?>"
-            + "<ns1:tagholder xmlns:ns1=\"http://tags\">"
-            + "<ns1:thetag><group>B</group><name>A</name></ns1:thetag></ns1:tagholder>";
-        JAXBElementProvider provider = new JAXBElementProvider();
-        Map<String, String> map = new HashMap<String, String>();
-        map.put("{http://tags}tagholder", "attr:custom");
-        provider.setInAppendAttributes(map);
-        ByteArrayInputStream is = new ByteArrayInputStream(data.getBytes());
-        Object o = provider.readFrom((Class)TagVO2Holder.class, TagVO2Holder.class,
-                      new Annotation[0], MediaType.TEXT_XML_TYPE, new MetadataMap<String, String>(), is);
-        TagVO2Holder holder = (TagVO2Holder)o;
-        assertEquals("custom", holder.getAttribute());
-        TagVO2 tag2 = holder.getTagValue();
-        assertEquals("A", tag2.getName());
-        assertEquals("B", tag2.getGroup());
-    }
     
     @Test
     @SuppressWarnings("unchecked")
diff --git a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JSONProviderTest.java b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JSONProviderTest.java
index 2563137eb9..9faef7e08f 100644
--- a/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JSONProviderTest.java
+++ b/rt/frontend/jaxrs/src/test/java/org/apache/cxf/jaxrs/provider/JSONProviderTest.java
@@ -54,7 +54,7 @@ import org.apache.cxf.jaxrs.resources.Tags;
 import org.junit.Assert;
 import org.junit.Ignore;
 import org.junit.Test;
-//CHECKSTYLE:OFF
+
 public class JSONProviderTest extends Assert {
 
     @Test
@@ -602,29 +602,6 @@ public class JSONProviderTest extends Assert {
         readTagVOAfterTransform(data, "{http://bar}thetag2");
     }
     
-    @Test
-    @SuppressWarnings("unchecked")
-    public void testInAppendAttributes() throws Exception {
-        String data = "{t.tagholder:{t.thetag:{\"group\":\"B\",\"name\":\"A\"}}}";
-        JSONProvider provider = new JSONProvider();
-        Map<String, String> nsmap = new HashMap<String, String>();
-        nsmap.put("http://tags", "t");
-        provider.setNamespaceMap(nsmap);
-        Map<String, String> map = new HashMap<String, String>();
-        map.put("{http://tags}tagholder", "attr:custom");
-        provider.setInAppendAttributes(map);
-        ByteArrayInputStream is = new ByteArrayInputStream(data.getBytes());
-        Object o = provider.readFrom((Class)TagVO2Holder.class, TagVO2Holder.class,
-                      new Annotation[0], MediaType.APPLICATION_JSON_TYPE, 
-                      new MetadataMap<String, String>(), is);
-        TagVO2Holder holder = (TagVO2Holder)o;
-        assertEquals("custom", holder.getAttribute());
-        TagVO2 tag2 = holder.getTagValue();
-        assertEquals("A", tag2.getName());
-        assertEquals("B", tag2.getGroup());
-    }
-    
-    
     @SuppressWarnings("unchecked")
     private void readTagVO2AfterTransform(String data, String keyValue) throws Exception {
         JSONProvider provider = new JSONProvider();
@@ -933,4 +910,3 @@ public class JSONProviderTest extends Assert {
     }
 
 }
-//CHECKSTYLE:ON
\ No newline at end of file
diff --git a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceCreatedSpringProviderTest.java b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceCreatedSpringProviderTest.java
index 8b033dae25..dead976466 100644
--- a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceCreatedSpringProviderTest.java
+++ b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceCreatedSpringProviderTest.java
@@ -36,6 +36,7 @@ import org.w3c.dom.Element;
 import org.apache.cxf.helpers.DOMUtils;
 import org.apache.cxf.helpers.IOUtils;
 import org.apache.cxf.jaxrs.client.WebClient;
+import org.apache.cxf.jaxrs.model.wadl.WadlGenerator;
 import org.apache.cxf.testutil.common.AbstractBusClientServerTestBase;
 
 import org.junit.BeforeClass;
@@ -86,16 +87,16 @@ public class JAXRSClientServerResourceCreatedSpringProviderTest extends Abstract
         WebClient client = WebClient.create(requestURI + "?_wadl&_type=xml");
         Document doc = DOMUtils.readXml(new InputStreamReader(client.get(InputStream.class), "UTF-8"));
         Element root = doc.getDocumentElement();
-        assertEquals("http://research.sun.com/wadl/2006/10", root.getNamespaceURI());
+        assertEquals(WadlGenerator.WADL_NS, root.getNamespaceURI());
         assertEquals("application", root.getLocalName());
         List<Element> resourcesEls = DOMUtils.getChildrenWithName(root, 
-                                            "http://research.sun.com/wadl/2006/10", "resources");
+                                                                  WadlGenerator.WADL_NS, "resources");
         assertEquals(1, resourcesEls.size());
         Element resourcesEl =  resourcesEls.get(0);
         assertEquals(baseURI, resourcesEl.getAttribute("base"));
         List<Element> resourceEls = 
             DOMUtils.getChildrenWithName(resourcesEl, 
-                                                "http://research.sun.com/wadl/2006/10", "resource");
+                                         WadlGenerator.WADL_NS, "resource");
         assertEquals(size, resourceEls.size());
         return resourceEls;
     }
diff --git a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceJacksonSpringProviderTest.java b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceJacksonSpringProviderTest.java
index b4bdb11e77..2ca3d2b1c6 100644
--- a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceJacksonSpringProviderTest.java
+++ b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRSClientServerResourceJacksonSpringProviderTest.java
@@ -22,20 +22,13 @@ package org.apache.cxf.systest.jaxrs;
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.InputStream;
-import java.io.InputStreamReader;
 import java.io.OutputStream;
 import java.net.HttpURLConnection;
 import java.net.Socket;
 import java.net.URL;
 import java.net.URLConnection;
-import java.util.List;
 
-import org.w3c.dom.Document;
-import org.w3c.dom.Element;
-
-import org.apache.cxf.helpers.DOMUtils;
 import org.apache.cxf.helpers.IOUtils;
-import org.apache.cxf.jaxrs.client.WebClient;
 import org.apache.cxf.testutil.common.AbstractBusClientServerTestBase;
 
 import org.junit.BeforeClass;
@@ -49,57 +42,6 @@ public class JAXRSClientServerResourceJacksonSpringProviderTest extends Abstract
                    launchServer(BookServerResourceJacksonSpringProviders.class));
     }
     
-    @Test
-    public void testMultipleRootsWadl() throws Exception {
-        List<Element> resourceEls = getWadlResourcesInfo("http://localhost:9080/webapp/",
-                                                         "http://localhost:9080/webapp/", 2);
-        String path1 = resourceEls.get(0).getAttribute("path");
-        int bookStoreInd = path1.contains("/bookstore") ? 0 : 1;
-        int petStoreInd = bookStoreInd == 0 ? 1 : 0;
-        checkBookStoreInfo(resourceEls.get(bookStoreInd));
-        checkPetStoreInfo(resourceEls.get(petStoreInd));
-    }
-    
-    @Test
-    public void testBookStoreWadl() throws Exception {
-        List<Element> resourceEls = getWadlResourcesInfo("http://localhost:9080/webapp/",
-                                                         "http://localhost:9080/webapp/bookstore", 1);
-        checkBookStoreInfo(resourceEls.get(0));
-    }
-    
-    @Test
-    public void testPetStoreWadl() throws Exception {
-        List<Element> resourceEls = getWadlResourcesInfo("http://localhost:9080/webapp/",
-                                                         "http://localhost:9080/webapp/petstore", 1);
-        checkPetStoreInfo(resourceEls.get(0));
-    }
- 
-    private void checkBookStoreInfo(Element resource) {
-        assertEquals("/bookstore", resource.getAttribute("path"));
-    }
-    
-    private void checkPetStoreInfo(Element resource) {
-        assertEquals("/petstore/", resource.getAttribute("path"));
-    }
-    
-    private List<Element> getWadlResourcesInfo(String baseURI, String requestURI, int size) throws Exception {
-        WebClient client = WebClient.create(requestURI + "?_wadl&_type=xml");
-        Document doc = DOMUtils.readXml(new InputStreamReader(client.get(InputStream.class), "UTF-8"));
-        Element root = doc.getDocumentElement();
-        assertEquals("http://research.sun.com/wadl/2006/10", root.getNamespaceURI());
-        assertEquals("application", root.getLocalName());
-        List<Element> resourcesEls = DOMUtils.getChildrenWithName(root, 
-                                            "http://research.sun.com/wadl/2006/10", "resources");
-        assertEquals(1, resourcesEls.size());
-        Element resourcesEl =  resourcesEls.get(0);
-        assertEquals(baseURI, resourcesEl.getAttribute("base"));
-        List<Element> resourceEls = 
-            DOMUtils.getChildrenWithName(resourcesEl, 
-                                                "http://research.sun.com/wadl/2006/10", "resource");
-        assertEquals(size, resourceEls.size());
-        return resourceEls;
-    }
-    
     @Test
     public void testGetBook123() throws Exception {
         
diff --git a/systests/jaxrs/src/test/resources/jaxrs_atom/WEB-INF/beans.xml b/systests/jaxrs/src/test/resources/jaxrs_atom/WEB-INF/beans.xml
index 727f0e7b9e..126aa7a2a6 100644
--- a/systests/jaxrs/src/test/resources/jaxrs_atom/WEB-INF/beans.xml
+++ b/systests/jaxrs/src/test/resources/jaxrs_atom/WEB-INF/beans.xml
@@ -89,7 +89,9 @@ http://cxf.apache.org/schemas/jaxrs.xsd">
   <bean id="atomstore2" class="org.apache.cxf.systest.jaxrs.AtomBookStore2"/>
   <bean id="atomstore3" class="org.apache.cxf.systest.jaxrs.AtomBookStore3"/>
   
-  <bean id="feed" class="org.apache.cxf.jaxrs.provider.AtomFeedProvider"/>
+  <bean id="feed" class="org.apache.cxf.jaxrs.provider.AtomFeedProvider">
+      <property name="formattedOutput" value="true"/>
+  </bean>
   <bean id="entry" class="org.apache.cxf.jaxrs.provider.AtomEntryProvider"/>
   
 </beans>
