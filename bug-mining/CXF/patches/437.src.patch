diff --git a/api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java b/api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java
index f7fdec9018..aacf8d26bf 100644
--- a/api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java
+++ b/api/src/main/java/org/apache/cxf/tools/common/ToolConstants.java
@@ -90,6 +90,7 @@ public final class ToolConstants {
     public static final String CFG_ANT_PROP = "ant.prop";
     public static final String CFG_NO_ADDRESS_BINDING = "noAddressBinding";
     public static final String CFG_ALLOW_ELEMENT_REFS = "allowElementReferences";
+    public static final String CFG_RESERVE_NAME = "reserveClass";
 
 
 
diff --git a/tools/common/src/main/java/org/apache/cxf/tools/common/ClassUtils.java b/tools/common/src/main/java/org/apache/cxf/tools/common/ClassUtils.java
index 1153d9f433..bcc943c742 100644
--- a/tools/common/src/main/java/org/apache/cxf/tools/common/ClassUtils.java
+++ b/tools/common/src/main/java/org/apache/cxf/tools/common/ClassUtils.java
@@ -53,6 +53,11 @@ public class ClassUtils {
             argList.add("-verbose");
         }
 
+        if ("1.5".equals(System.getProperty("java.specification.version"))) {
+            argList.add("-target");
+            argList.add("1.5");
+        }
+        
         if (context.get(ToolConstants.CFG_CLASSDIR) != null) {
             argList.add("-d");
             String classDir = (String)context.get(ToolConstants.CFG_CLASSDIR);
diff --git a/tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java b/tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java
index 7751d16f8b..9639a69fa6 100644
--- a/tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java
+++ b/tools/common/src/main/java/org/apache/cxf/tools/common/ToolException.java
@@ -58,5 +58,8 @@ public class ToolException extends RuntimeException {
     public ToolException(String messageId, Logger logger) {
         this(new Message(messageId, logger));
     }
+    public ToolException(String messageId, Logger logger, Object ... args) {
+        this(new Message(messageId, logger, args));
+    }
 }
 
diff --git a/tools/common/src/main/java/org/apache/cxf/tools/util/ClassCollector.java b/tools/common/src/main/java/org/apache/cxf/tools/util/ClassCollector.java
index 4800f20d9d..4d6338361c 100644
--- a/tools/common/src/main/java/org/apache/cxf/tools/util/ClassCollector.java
+++ b/tools/common/src/main/java/org/apache/cxf/tools/util/ClassCollector.java
@@ -35,9 +35,36 @@ public class ClassCollector {
     private final Map<String, String> implClassNames = new HashMap<String, String>();
     private final Map<String, String> clientClassNames = new HashMap<String, String>();
     private final Map<String, String> serverClassNames = new HashMap<String, String>();
+    private final Map<String, String> reservedClassNames = new HashMap<String, String>();
+    
 
     private final Set<String> typesPackages = new HashSet<String>();
-
+    
+    public ClassCollector() {
+        
+    }
+    public void reserveClass(String fullName) {
+        String cls = fullName;
+        int idx = cls.lastIndexOf('.');
+        String pkg = "";
+        if (idx != -1) {
+            pkg = cls.substring(0, idx);
+            cls = cls.substring(idx + 1);
+        }        
+        reservedClassNames.put(key(pkg, cls), fullName);
+
+        addSeiClassName(pkg, cls, fullName);
+        addTypesClassName(pkg, cls, fullName);
+        addServerClassName(pkg, cls, fullName);
+        addImplClassName(pkg, cls, fullName);
+        addClientClassName(pkg, cls, fullName);
+        addServiceClassName(pkg, cls, fullName);
+        addExceptionClassName(pkg, cls, fullName);
+    }
+    
+    public boolean isReserved(String packagename, String type) {
+        return reservedClassNames.containsKey(key(packagename, type));
+    }
     public boolean containSeiClass(String packagename, String type) {
         return seiClassNames.containsKey(key(packagename, type));
     }
@@ -49,6 +76,18 @@ public class ClassCollector {
     public boolean containExceptionClass(String packagename, String type) {
         return exceptionClassNames.containsKey(key(packagename, type));
     }
+    public boolean containServiceClass(String packagename, String type) {
+        return this.serviceClassNames.containsKey(key(packagename, type));
+    }
+    public boolean containClientClass(String packagename, String type) {
+        return this.clientClassNames.containsKey(key(packagename, type));
+    }
+    public boolean containServerClass(String packagename, String type) {
+        return this.serverClassNames.containsKey(key(packagename, type));
+    }
+    public boolean containImplClass(String packagename, String type) {
+        return this.implClassNames.containsKey(key(packagename, type));
+    }
 
     public void addSeiClassName(String packagename, String type, String fullClassName) {
         seiClassNames.put(key(packagename, type), fullClassName);
diff --git a/tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java b/tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java
index 491015a4b6..05f85c0965 100644
--- a/tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java
+++ b/tools/wsdlto/core/src/main/java/org/apache/cxf/tools/wsdlto/WSDLToJavaContainer.java
@@ -204,7 +204,15 @@ public class WSDLToJavaContainer extends AbstractCXFToolContainer {
         context.put(ToolConstants.XML_SCHEMA_COLLECTION, schemaCollection);
         
         context.put(ToolConstants.PORTTYPE_MAP, interfaces);
-        context.put(ClassCollector.class, new ClassCollector());
+        
+        ClassCollector collector = new ClassCollector();
+        String reserved[] = (String[])context.get(ToolConstants.CFG_RESERVE_NAME);
+        if (reserved != null) {
+            for (String r : reserved) {
+                collector.reserveClass(r);
+            }
+        }
+        context.put(ClassCollector.class, collector);
         Processor processor = frontend.getProcessor();
         if (processor instanceof ClassNameProcessor) {
             processor.setEnvironment(context);
@@ -228,12 +236,11 @@ public class WSDLToJavaContainer extends AbstractCXFToolContainer {
             // Build the JavaModel from the ServiceModel
             processor.setEnvironment(context);
             processor.process();
-
-            if (!isSuppressCodeGen()) {
-                // Generate artifacts
-                for (FrontEndGenerator generator : frontend.getGenerators()) {
-                    generator.generate(context);
-                }
+        }
+        if (!isSuppressCodeGen()) {
+            // Generate artifacts
+            for (FrontEndGenerator generator : frontend.getGenerators()) {
+                generator.generate(context);
             }
         }
         context.remove(ToolConstants.SERVICE_LIST);
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/JAXWSContainer.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/JAXWSContainer.java
index 818a507714..4bad7aab5b 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/JAXWSContainer.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/JAXWSContainer.java
@@ -41,6 +41,7 @@ public class JAXWSContainer extends WSDLToJavaContainer {
     public Set<String> getArrayKeys() {
         Set<String> set = super.getArrayKeys();
         set.add(ToolConstants.CFG_BINDING);
+        set.add(ToolConstants.CFG_RESERVE_NAME);
         return set;
     }
 
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/AntGenerator.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/AntGenerator.java
index cf5b591345..44c1973c94 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/AntGenerator.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/AntGenerator.java
@@ -23,7 +23,10 @@ import java.util.HashMap;
 import java.util.Iterator;
 import java.util.Map;
 
+import javax.xml.namespace.QName;
+
 import org.apache.cxf.common.i18n.Message;
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.service.model.ServiceInfo;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
@@ -33,6 +36,7 @@ import org.apache.cxf.tools.common.model.JavaModel;
 import org.apache.cxf.tools.common.model.JavaPort;
 import org.apache.cxf.tools.common.model.JavaServiceClass;
 import org.apache.cxf.tools.util.NameUtil;
+import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.WSDLToJavaProcessor;
 
 public class AntGenerator extends AbstractJAXWSGenerator {
 
@@ -53,72 +57,74 @@ public class AntGenerator extends AbstractJAXWSGenerator {
 
     public void generate(ToolContext penv) throws ToolException {       
         this.env = penv;
-        JavaModel javaModel = env.get(JavaModel.class);
-        
         if (passthrough()) {
             return;
         }
         
-        if (javaModel.getServiceClasses().size() == 0) {
-            ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
-            String wsdl = serviceInfo.getDescription().getBaseURI();
-            Message msg = new Message("CAN_NOT_GEN_ANT", LOG, wsdl);
-            if (penv.isVerbose()) {
-                System.out.println(msg.toString());
-            }
-            return;
-        }
-        
-        Map<String, String> clientClassNamesMap = new HashMap<String, String>();
-        Map<String, String> serverClassNamesMap = new HashMap<String, String>();
-        
-        Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
-        int index = 1;
-        Iterator it = javaModel.getServiceClasses().values().iterator();
-        while (it.hasNext()) {
-            JavaServiceClass js = (JavaServiceClass)it.next();
-            Iterator i = js.getPorts().iterator();
-            while (i.hasNext()) {
-                JavaPort jp = (JavaPort)i.next();
-                String interfaceName = jp.getInterfaceClass();
-                JavaInterface intf = interfaces.get(interfaceName);
-                if (intf == null) {
-                    interfaceName = jp.getPortType();
-                    intf = interfaces.get(interfaceName);
-                }
-                
-                String clientClassName = intf.getPackageName() + "." + interfaceName + "_"
-                                         + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Client";
+        Map<QName, JavaModel> map = CastUtils.cast((Map)penv.get(WSDLToJavaProcessor.MODEL_MAP));
+        for (JavaModel javaModel : map.values()) {
 
-                String serverClassName = intf.getPackageName() + "." + interfaceName + "_"
-                                         + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Server";
-                String clientTargetName = interfaceName + "Client";
-                boolean collison = false;
-                if (clientClassNamesMap.keySet().contains(clientTargetName)) {
-                    clientTargetName = clientTargetName + index;
-                    collison = true;
-                }
-                String serverTargetName = interfaceName + "Server";
-                if (serverClassNamesMap.keySet().contains(serverTargetName)) {
-                    serverTargetName = serverTargetName + index;
-                    collison = true;
+            if (javaModel.getServiceClasses().size() == 0) {
+                ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
+                String wsdl = serviceInfo.getDescription().getBaseURI();
+                Message msg = new Message("CAN_NOT_GEN_ANT", LOG, wsdl);
+                if (penv.isVerbose()) {
+                    System.out.println(msg.toString());
                 }
-                
-                if (collison) {
-                    index++;
+                return;
+            }
+            
+            Map<String, String> clientClassNamesMap = new HashMap<String, String>();
+            Map<String, String> serverClassNamesMap = new HashMap<String, String>();
+            
+            Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
+            int index = 1;
+            Iterator it = javaModel.getServiceClasses().values().iterator();
+            while (it.hasNext()) {
+                JavaServiceClass js = (JavaServiceClass)it.next();
+                Iterator i = js.getPorts().iterator();
+                while (i.hasNext()) {
+                    JavaPort jp = (JavaPort)i.next();
+                    String interfaceName = jp.getInterfaceClass();
+                    JavaInterface intf = interfaces.get(interfaceName);
+                    if (intf == null) {
+                        interfaceName = jp.getPortType();
+                        intf = interfaces.get(interfaceName);
+                    }
+                    
+                    String clientClassName = intf.getPackageName() + "." + interfaceName + "_"
+                                             + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Client";
+    
+                    String serverClassName = intf.getPackageName() + "." + interfaceName + "_"
+                                             + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Server";
+                    String clientTargetName = interfaceName + "Client";
+                    boolean collison = false;
+                    if (clientClassNamesMap.keySet().contains(clientTargetName)) {
+                        clientTargetName = clientTargetName + index;
+                        collison = true;
+                    }
+                    String serverTargetName = interfaceName + "Server";
+                    if (serverClassNamesMap.keySet().contains(serverTargetName)) {
+                        serverTargetName = serverTargetName + index;
+                        collison = true;
+                    }
+                    
+                    if (collison) {
+                        index++;
+                    }
+                    clientClassNamesMap.put(clientTargetName, clientClassName);
+                    serverClassNamesMap.put(serverTargetName, serverClassName);
+                    
                 }
-                clientClassNamesMap.put(clientTargetName, clientClassName);
-                serverClassNamesMap.put(serverTargetName, serverClassName);
-                
             }
+    
+            clearAttributes();
+            setAttributes("clientClassNamesMap", clientClassNamesMap);
+            setAttributes("serverClassNamesMap", serverClassNamesMap);
+            setAttributes("wsdlLocation", javaModel.getLocation());
+            setCommonAttributes();
+    
+            doWrite(ANT_TEMPLATE, parseOutputName(null, "build", ".xml"));
         }
-
-        clearAttributes();
-        setAttributes("clientClassNamesMap", clientClassNamesMap);
-        setAttributes("serverClassNamesMap", serverClassNamesMap);
-        setAttributes("wsdlLocation", javaModel.getLocation());
-        setCommonAttributes();
-
-        doWrite(ANT_TEMPLATE, parseOutputName(null, "build", ".xml"));
     }
 }
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ClientGenerator.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ClientGenerator.java
index e33e2fe59e..058af2b996 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ClientGenerator.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ClientGenerator.java
@@ -22,7 +22,10 @@ package org.apache.cxf.tools.wsdlto.frontend.jaxws.generators;
 import java.util.Iterator;
 import java.util.Map;
 
+import javax.xml.namespace.QName;
+
 import org.apache.cxf.common.i18n.Message;
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.service.model.ServiceInfo;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
@@ -33,6 +36,7 @@ import org.apache.cxf.tools.common.model.JavaPort;
 import org.apache.cxf.tools.common.model.JavaServiceClass;
 import org.apache.cxf.tools.util.ClassCollector;
 import org.apache.cxf.tools.util.NameUtil;
+import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.WSDLToJavaProcessor;
 
 public class ClientGenerator extends AbstractJAXWSGenerator {
 
@@ -60,50 +64,66 @@ public class ClientGenerator extends AbstractJAXWSGenerator {
 
     public void generate(ToolContext penv) throws ToolException {
         this.env = penv;
-        JavaModel javaModel = env.get(JavaModel.class);
         if (passthrough()) {
             return;
         }
-        if (javaModel.getServiceClasses().size() == 0) {
-            ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
-            String wsdl = serviceInfo.getDescription().getBaseURI();
-            Message msg = new Message("CAN_NOT_GEN_CLIENT", LOG, wsdl);
-            if (penv.isVerbose()) {
-                System.out.println(msg.toString());
+        Map<QName, JavaModel> map = CastUtils.cast((Map)penv.get(WSDLToJavaProcessor.MODEL_MAP));
+        for (JavaModel javaModel : map.values()) {
+        
+            if (javaModel.getServiceClasses().size() == 0) {
+                ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
+                String wsdl = serviceInfo.getDescription().getBaseURI();
+                Message msg = new Message("CAN_NOT_GEN_CLIENT", LOG, wsdl);
+                if (penv.isVerbose()) {
+                    System.out.println(msg.toString());
+                }
+                return;
             }
-            return;
-        }
-
-        Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
-        Iterator it = javaModel.getServiceClasses().values().iterator();
-        while (it.hasNext()) {
-            JavaServiceClass js = (JavaServiceClass)it.next();
-            Iterator i = js.getPorts().iterator();
-            while (i.hasNext()) {
-                JavaPort jp = (JavaPort)i.next();
-                String interfaceName = jp.getInterfaceClass();
-                JavaInterface intf = interfaces.get(interfaceName);
-                if (intf == null) {
-                    interfaceName = jp.getPortType();
-                    intf = interfaces.get(interfaceName);
+    
+            Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
+            Iterator it = javaModel.getServiceClasses().values().iterator();
+            while (it.hasNext()) {
+                JavaServiceClass js = (JavaServiceClass)it.next();
+                Iterator i = js.getPorts().iterator();
+                while (i.hasNext()) {
+                    JavaPort jp = (JavaPort)i.next();
+                    String interfaceName = jp.getInterfaceClass();
+                    JavaInterface intf = interfaces.get(interfaceName);
+                    if (intf == null) {
+                        interfaceName = jp.getPortType();
+                        intf = interfaces.get(interfaceName);
+                    }
+                    
+                    String clientClassName = interfaceName + "_"
+                                             + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Client";
+    
+                    clientClassName = mapClassName(intf.getPackageName(), clientClassName, penv);
+                    clearAttributes();
+                    setAttributes("clientClassName", clientClassName);
+                    setAttributes("intf", intf);
+                    setAttributes("service", js);
+                    setAttributes("port", jp);
+    
+                    setCommonAttributes();
+    
+                    doWrite(CLT_TEMPLATE, parseOutputName(intf.getPackageName(), clientClassName));
                 }
-                
-                String clientClassName = interfaceName + "_"
-                                         + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Client";
-
-                clearAttributes();
-                setAttributes("clientClassName", clientClassName);
-                setAttributes("intf", intf);
-                setAttributes("service", js);
-                setAttributes("port", jp);
-
-                setCommonAttributes();
-
-                doWrite(CLT_TEMPLATE, parseOutputName(intf.getPackageName(), clientClassName));
             }
         }
     }
 
+    private String mapClassName(String packageName, String name, ToolContext context) {
+        ClassCollector collector = context.get(ClassCollector.class);
+        int count = 0;
+        String checkName = name;
+        while (collector.containClientClass(packageName, checkName)) {
+            checkName = name + (++count);
+        }
+        collector.addClientClassName(packageName, checkName,
+                                     packageName + "." + checkName);
+        return checkName;
+    }
+
     public void register(final ClassCollector collector, String packageName, String fileName) {
         collector.addClientClassName(packageName , fileName , packageName + "." + fileName);
     }
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/FaultGenerator.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/FaultGenerator.java
index fe12d4f95b..bc19f2f60c 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/FaultGenerator.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/FaultGenerator.java
@@ -24,6 +24,9 @@ import java.util.Date;
 import java.util.Iterator;
 import java.util.Map;
 
+import javax.xml.namespace.QName;
+
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
 import org.apache.cxf.tools.common.ToolException;
@@ -31,6 +34,7 @@ import org.apache.cxf.tools.common.model.JavaExceptionClass;
 import org.apache.cxf.tools.common.model.JavaField;
 import org.apache.cxf.tools.common.model.JavaModel;
 import org.apache.cxf.tools.util.ClassCollector;
+import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.WSDLToJavaProcessor;
 import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.internal.ProcessorUtil;
 
 public class FaultGenerator extends AbstractJAXWSGenerator {
@@ -62,29 +66,30 @@ public class FaultGenerator extends AbstractJAXWSGenerator {
 
     public void generate(ToolContext penv) throws ToolException {
         this.env = penv;
-        JavaModel javaModel = env.get(JavaModel.class);
-
         if (passthrough()) {
             return;
         }
+        Map<QName, JavaModel> map = CastUtils.cast((Map)penv.get(WSDLToJavaProcessor.MODEL_MAP));
+        for (JavaModel javaModel : map.values()) {
 
-        Map<String, JavaExceptionClass> exceptionClasses = javaModel
-                .getExceptionClasses();
-        for (Iterator iter = exceptionClasses.keySet().iterator(); iter
-                .hasNext();) {
-            String expClassName = (String)iter.next();
-            JavaExceptionClass expClz =
-                exceptionClasses.get(expClassName);
-
-            clearAttributes();
-            setAttributes("suid", getSUID());
-            setAttributes("expClass", expClz);
-            for (JavaField jf : expClz.getFields()) {
-                setAttributes("paraName", ProcessorUtil.mangleNameToVariableName(jf.getName()));
+            Map<String, JavaExceptionClass> exceptionClasses = javaModel
+                    .getExceptionClasses();
+            for (Iterator iter = exceptionClasses.keySet().iterator(); iter
+                    .hasNext();) {
+                String expClassName = (String)iter.next();
+                JavaExceptionClass expClz =
+                    exceptionClasses.get(expClassName);
+    
+                clearAttributes();
+                setAttributes("suid", getSUID());
+                setAttributes("expClass", expClz);
+                for (JavaField jf : expClz.getFields()) {
+                    setAttributes("paraName", ProcessorUtil.mangleNameToVariableName(jf.getName()));
+                }
+                setCommonAttributes();
+                doWrite(FAULT_TEMPLATE, parseOutputName(expClz.getPackageName(),
+                        expClz.getName()));
             }
-            setCommonAttributes();
-            doWrite(FAULT_TEMPLATE, parseOutputName(expClz.getPackageName(),
-                    expClz.getName()));
         }
     }
 
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ImplGenerator.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ImplGenerator.java
index c541562be9..4dc1765739 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ImplGenerator.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ImplGenerator.java
@@ -22,6 +22,9 @@ package org.apache.cxf.tools.wsdlto.frontend.jaxws.generators;
 import java.util.Iterator;
 import java.util.Map;
 
+import javax.xml.namespace.QName;
+
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
 import org.apache.cxf.tools.common.ToolException;
@@ -29,6 +32,8 @@ import org.apache.cxf.tools.common.model.JavaInterface;
 import org.apache.cxf.tools.common.model.JavaModel;
 import org.apache.cxf.tools.common.model.JavaPort;
 import org.apache.cxf.tools.common.model.JavaServiceClass;
+import org.apache.cxf.tools.util.ClassCollector;
+import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.WSDLToJavaProcessor;
 
 public class ImplGenerator extends AbstractJAXWSGenerator {
 
@@ -62,47 +67,62 @@ public class ImplGenerator extends AbstractJAXWSGenerator {
 
     public void generate(ToolContext penv) throws ToolException {
         this.env = penv;
-        JavaModel javaModel = env.get(JavaModel.class);
-
         if (passthrough()) {
             return;
         }
-
-        Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
-            
-        Map<String, JavaServiceClass> services = javaModel.getServiceClasses();
-
-        JavaServiceClass service = null;
-        String port = "";
-        Iterator portIterator = null;
-        if (!services.values().isEmpty()) {
-            JavaServiceClass javaservice = services.values().iterator().next();
-            service = javaservice;
-      
-            if (javaservice.getPorts().size() != 0) {
-                portIterator = javaservice.getPorts().iterator();
+        Map<QName, JavaModel> map = CastUtils.cast((Map)penv.get(WSDLToJavaProcessor.MODEL_MAP));
+        for (JavaModel javaModel : map.values()) {
+
+    
+            Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
+                
+            Map<String, JavaServiceClass> services = javaModel.getServiceClasses();
+    
+            JavaServiceClass service = null;
+            if (!services.values().isEmpty()) {
+                for (JavaServiceClass javaservice : services.values()) {
+                    service = javaservice;
+                    for (JavaPort jport : javaservice.getPorts()) {
+                        JavaInterface intf = interfaces.get(jport.getInterfaceClass());
+                        outputImpl(intf, service, jport.getPortName(), penv);
+                        
+                    }
+                }
+            } else {
+                for (Iterator iter = interfaces.keySet().iterator(); iter.hasNext();) {
+                    String interfaceName = (String)iter.next();
+                    JavaInterface intf = interfaces.get(interfaceName);
+                    outputImpl(intf, service, "", penv);
+                }
             }
         }
-        for (Iterator iter = interfaces.keySet().iterator(); iter.hasNext();) {
-            String interfaceName = (String)iter.next();
-            JavaInterface intf = interfaces.get(interfaceName);
-            
-            if (portIterator != null) {
-                JavaPort jport = (JavaPort)portIterator.next();
-                port = jport.getPortName();
-            }
-
-            clearAttributes();
-            setAttributes("intf", intf);
+    }
+    private void outputImpl(JavaInterface intf, JavaServiceClass service,
+                            String port, ToolContext penv) {
+        clearAttributes();
+        setAttributes("intf", intf);
 
-            setAttributes("service", service);
+        setAttributes("service", service);
   
-            setAttributes("port", port);
-            
-            setCommonAttributes();
-
-            doWrite(IMPL_TEMPLATE, parseOutputName(intf.getPackageName(), intf.getName() + "Impl"));
+        setAttributes("port", port);
+        
+        setCommonAttributes();
+        
+        String name = intf.getName() + "Impl";
+        name = mapClassName(intf.getPackageName(), name, penv);
+        setAttributes("implName", name);
+        penv.put(ToolConstants.CFG_IMPL_CLASS, name);
+        doWrite(IMPL_TEMPLATE, parseOutputName(intf.getPackageName(), name));
+    }
+    private String mapClassName(String packageName, String name, ToolContext context) {
+        ClassCollector collector = context.get(ClassCollector.class);
+        int count = 0;
+        String checkName = name;
+        while (collector.containImplClass(packageName, checkName)) {
+            checkName = name + (++count);
         }
+        collector.addImplClassName(packageName, checkName,
+                                   packageName + "." + checkName);
+        return checkName;
     }
-
 }
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/SEIGenerator.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/SEIGenerator.java
index 99cb45eed0..e259ce00e8 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/SEIGenerator.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/SEIGenerator.java
@@ -22,9 +22,11 @@ package org.apache.cxf.tools.wsdlto.frontend.jaxws.generators;
 import java.util.Map;
 
 import javax.jws.HandlerChain;
+import javax.xml.namespace.QName;
 
 import org.apache.cxf.annotations.DataBinding;
 import org.apache.cxf.common.i18n.Message;
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.service.model.ServiceInfo;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
@@ -34,6 +36,7 @@ import org.apache.cxf.tools.common.model.JAnnotationElement;
 import org.apache.cxf.tools.common.model.JavaInterface;
 import org.apache.cxf.tools.common.model.JavaModel;
 import org.apache.cxf.tools.util.ClassCollector;
+import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.WSDLToJavaProcessor;
 
 public class SEIGenerator extends AbstractJAXWSGenerator {
 
@@ -66,61 +69,63 @@ public class SEIGenerator extends AbstractJAXWSGenerator {
 
     public void generate(ToolContext penv) throws ToolException {
         this.env = penv;
-        JavaModel javaModel = env.get(JavaModel.class);
-
         if (passthrough()) {
             return;
         }
 
-        Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
-
-        if (interfaces.size() == 0) {
-            ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
-            String wsdl = serviceInfo.getDescription().getBaseURI();
-            Message msg = new Message("CAN_NOT_GEN_SEI", LOG, wsdl);
-            if (penv.isVerbose()) {
-                System.out.println(msg.toString());
+        Map<QName, JavaModel> map = CastUtils.cast((Map)penv.get(WSDLToJavaProcessor.MODEL_MAP));
+        for (JavaModel javaModel : map.values()) {
+        
+            Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
+    
+            if (interfaces.size() == 0) {
+                ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
+                String wsdl = serviceInfo.getDescription().getBaseURI();
+                Message msg = new Message("CAN_NOT_GEN_SEI", LOG, wsdl);
+                if (penv.isVerbose()) {
+                    System.out.println(msg.toString());
+                }
+                return;
             }
-            return;
-        }
-        for (JavaInterface intf : interfaces.values()) {
-
-            if (hasHandlerConfig(intf)) {
-                HandlerConfigGenerator handlerGen = new HandlerConfigGenerator();
-                // REVISIT: find a better way to handle Handler gen, should not
-                // pass JavaInterface around.
-                handlerGen.setJavaInterface(intf);
-                handlerGen.generate(getEnvironment());
-
-                JAnnotation annot = handlerGen.getHandlerAnnotation();
-                if (handlerGen.getHandlerAnnotation() != null) {
-                    boolean existHandlerAnno = false;
-                    for (JAnnotation jann : intf.getAnnotations()) {
-                        if (jann.getType() == HandlerChain.class) {
-                            existHandlerAnno = true;
+            for (JavaInterface intf : interfaces.values()) {
+    
+                if (hasHandlerConfig(intf)) {
+                    HandlerConfigGenerator handlerGen = new HandlerConfigGenerator();
+                    // REVISIT: find a better way to handle Handler gen, should not
+                    // pass JavaInterface around.
+                    handlerGen.setJavaInterface(intf);
+                    handlerGen.generate(getEnvironment());
+    
+                    JAnnotation annot = handlerGen.getHandlerAnnotation();
+                    if (handlerGen.getHandlerAnnotation() != null) {
+                        boolean existHandlerAnno = false;
+                        for (JAnnotation jann : intf.getAnnotations()) {
+                            if (jann.getType() == HandlerChain.class) {
+                                existHandlerAnno = true;
+                            }
+                        }
+                        if (!existHandlerAnno) {
+                            intf.addAnnotation(annot);
+                            intf.addImport("javax.jws.HandlerChain");
                         }
-                    }
-                    if (!existHandlerAnno) {
-                        intf.addAnnotation(annot);
-                        intf.addImport("javax.jws.HandlerChain");
                     }
                 }
+                if (penv.containsKey(ToolConstants.RUNTIME_DATABINDING_CLASS)) {
+                    JAnnotation ann = new JAnnotation(DataBinding.class);
+                    JAnnotationElement el 
+                        = new JAnnotationElement(null,
+                                                 penv.get(ToolConstants.RUNTIME_DATABINDING_CLASS),
+                                                 true);
+                    ann.addElement(el);
+                    intf.addAnnotation(ann);
+                }
+                clearAttributes();
+                setAttributes("intf", intf);
+                setCommonAttributes();
+    
+                doWrite(SEI_TEMPLATE, parseOutputName(intf.getPackageName(), intf.getName()));
+    
             }
-            if (penv.containsKey(ToolConstants.RUNTIME_DATABINDING_CLASS)) {
-                JAnnotation ann = new JAnnotation(DataBinding.class);
-                JAnnotationElement el 
-                    = new JAnnotationElement(null,
-                                             penv.get(ToolConstants.RUNTIME_DATABINDING_CLASS),
-                                             true);
-                ann.addElement(el);
-                intf.addAnnotation(ann);
-            }
-            clearAttributes();
-            setAttributes("intf", intf);
-            setCommonAttributes();
-
-            doWrite(SEI_TEMPLATE, parseOutputName(intf.getPackageName(), intf.getName()));
-
         }
     }
 
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServerGenerator.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServerGenerator.java
index c0bc809fae..1de34b4212 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServerGenerator.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServerGenerator.java
@@ -22,8 +22,11 @@ package org.apache.cxf.tools.wsdlto.frontend.jaxws.generators;
 import java.util.Iterator;
 import java.util.Map;
 
+import javax.xml.namespace.QName;
+
 import org.apache.cxf.common.i18n.Message;
 import org.apache.cxf.common.util.StringUtils;
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.service.model.ServiceInfo;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
@@ -34,6 +37,7 @@ import org.apache.cxf.tools.common.model.JavaPort;
 import org.apache.cxf.tools.common.model.JavaServiceClass;
 import org.apache.cxf.tools.util.ClassCollector;
 import org.apache.cxf.tools.util.NameUtil;
+import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.WSDLToJavaProcessor;
 
 public class ServerGenerator extends AbstractJAXWSGenerator {
 
@@ -59,54 +63,73 @@ public class ServerGenerator extends AbstractJAXWSGenerator {
 
     public void generate(ToolContext penv) throws ToolException {
         this.env = penv;
-        JavaModel javaModel = env.get(JavaModel.class);
 
         if (passthrough()) {
             return;
         }
-        String address = "CHANGE_ME";
-        Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
-
-        if (javaModel.getServiceClasses().size() == 0) {
-            ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
-            String wsdl = serviceInfo.getDescription().getBaseURI();
-            Message msg = new Message("CAN_NOT_GEN_SRV", LOG, wsdl);
-            if (penv.isVerbose()) {
-                System.out.println(msg.toString());
-            }
-            return;
-        }
-        Iterator it = javaModel.getServiceClasses().values().iterator();
-        while (it.hasNext()) {
-            JavaServiceClass js = (JavaServiceClass)it.next();
-            Iterator i = js.getPorts().iterator();
-            while (i.hasNext()) {
-                JavaPort jp = (JavaPort)i.next();
-                String interfaceName = jp.getInterfaceClass();
-                JavaInterface intf = interfaces.get(interfaceName);
-                if (intf == null) {
-                    interfaceName = jp.getPortType();
-                    intf = interfaces.get(interfaceName);
+        
+        Map<QName, JavaModel> map = CastUtils.cast((Map)penv.get(WSDLToJavaProcessor.MODEL_MAP));
+        for (JavaModel javaModel : map.values()) {
+        
+            String address = "CHANGE_ME";
+            Map<String, JavaInterface> interfaces = javaModel.getInterfaces();
+    
+            if (javaModel.getServiceClasses().size() == 0) {
+                ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
+                String wsdl = serviceInfo.getDescription().getBaseURI();
+                Message msg = new Message("CAN_NOT_GEN_SRV", LOG, wsdl);
+                if (penv.isVerbose()) {
+                    System.out.println(msg.toString());
                 }
-                address = StringUtils.isEmpty(jp.getBindingAdress()) ? address : jp.getBindingAdress();
-                String serverClassName = interfaceName + "_"
-                                         + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Server";
-
-                clearAttributes();
-                setAttributes("serverClassName", serverClassName);
-                setAttributes("intf", intf);
-                if (penv.optionSet(ToolConstants.CFG_IMPL_CLASS)) {
-                    setAttributes("impl", (String)penv.get(ToolConstants.CFG_IMPL_CLASS));
-                } else {
-                    setAttributes("impl", intf.getName() + "Impl");
+                return;
+            }
+            Iterator it = javaModel.getServiceClasses().values().iterator();
+            while (it.hasNext()) {
+                JavaServiceClass js = (JavaServiceClass)it.next();
+                Iterator i = js.getPorts().iterator();
+                while (i.hasNext()) {
+                    JavaPort jp = (JavaPort)i.next();
+                    String interfaceName = jp.getInterfaceClass();
+                    JavaInterface intf = interfaces.get(interfaceName);
+                    if (intf == null) {
+                        interfaceName = jp.getPortType();
+                        intf = interfaces.get(interfaceName);
+                    }
+                    address = StringUtils.isEmpty(jp.getBindingAdress()) ? address : jp.getBindingAdress();
+                    String serverClassName = interfaceName + "_"
+                                             + NameUtil.mangleNameToClassName(jp.getPortName()) + "_Server";
+    
+                    serverClassName = mapClassName(intf.getPackageName(), serverClassName, penv);
+                    clearAttributes();
+                    setAttributes("serverClassName", serverClassName);
+                    setAttributes("intf", intf);
+                    if (penv.optionSet(ToolConstants.CFG_IMPL_CLASS)) {
+                        setAttributes("impl", (String)penv.get(ToolConstants.CFG_IMPL_CLASS));
+                        penv.remove(ToolConstants.CFG_IMPL_CLASS);
+                    } else {
+                        setAttributes("impl", intf.getName() + "Impl");
+                    }
+                    setAttributes("address", address);
+                    setCommonAttributes();
+    
+                    doWrite(SRV_TEMPLATE, parseOutputName(intf.getPackageName(), serverClassName));           
                 }
-                setAttributes("address", address);
-                setCommonAttributes();
-
-                doWrite(SRV_TEMPLATE, parseOutputName(intf.getPackageName(), serverClassName));           
             }
         }
     }
+    
+    private String mapClassName(String packageName, String name, ToolContext context) {
+        ClassCollector collector = context.get(ClassCollector.class);
+        int count = 0;
+        String checkName = name;
+        while (collector.containServerClass(packageName, checkName)) {
+            checkName = name + (++count);
+        }
+        collector.addServerClassName(packageName, checkName,
+                                     packageName + "." + checkName);
+        return checkName;
+    }
+
     public void register(final ClassCollector collector, String packageName, String fileName) {
         collector.addServerClassName(packageName , fileName , packageName + "." + fileName);
     }
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServiceGenerator.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServiceGenerator.java
index 5e5b1cc261..4850241ce4 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServiceGenerator.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/generators/ServiceGenerator.java
@@ -22,8 +22,10 @@ package org.apache.cxf.tools.wsdlto.frontend.jaxws.generators;
 import java.util.Map;
 
 import javax.jws.HandlerChain;
+import javax.xml.namespace.QName;
 
 import org.apache.cxf.common.i18n.Message;
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.service.model.ServiceInfo;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
@@ -33,6 +35,7 @@ import org.apache.cxf.tools.common.model.JavaModel;
 import org.apache.cxf.tools.common.model.JavaPort;
 import org.apache.cxf.tools.common.model.JavaServiceClass;
 import org.apache.cxf.tools.util.ClassCollector;
+import org.apache.cxf.tools.wsdlto.frontend.jaxws.processor.WSDLToJavaProcessor;
 
 public class ServiceGenerator extends AbstractJAXWSGenerator {
     private static final String SERVICE_TEMPLATE = TEMPLATE_BASE + "/service.vm";
@@ -60,79 +63,82 @@ public class ServiceGenerator extends AbstractJAXWSGenerator {
 
     public void generate(ToolContext penv) throws ToolException {
         this.env = penv;
-        JavaModel javaModel = env.get(JavaModel.class);
-
         if (passthrough()) {
             return;
         }
-        ClassCollector collector = penv.get(ClassCollector.class);
-        
-        Map<String, JavaServiceClass> serviceClasses = javaModel.getServiceClasses();
         
-        if (serviceClasses.size() == 0) {
-            ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
-            String wsdl = serviceInfo.getDescription().getBaseURI();
-            Message msg = new Message("CAN_NOT_GEN_SERVICE", LOG, wsdl);
-            if (penv.isVerbose()) {
-                System.out.println(msg.toString());
+        Map<QName, JavaModel> map = CastUtils.cast((Map)penv.get(WSDLToJavaProcessor.MODEL_MAP));
+        for (JavaModel javaModel : map.values()) {
+ 
+            ClassCollector collector = penv.get(ClassCollector.class);
+            
+            Map<String, JavaServiceClass> serviceClasses = javaModel.getServiceClasses();
+            
+            if (serviceClasses.size() == 0) {
+                ServiceInfo serviceInfo = (ServiceInfo)env.get(ServiceInfo.class);
+                String wsdl = serviceInfo.getDescription().getBaseURI();
+                Message msg = new Message("CAN_NOT_GEN_SERVICE", LOG, wsdl);
+                if (penv.isVerbose()) {
+                    System.out.println(msg.toString());
+                }
+                return;
             }
-            return;
-        }
-        
-        for (JavaServiceClass js : serviceClasses.values()) {
-            if (js.getHandlerChains() != null) {
-                HandlerConfigGenerator handlerGen = new HandlerConfigGenerator();
-                handlerGen.setJavaInterface(js);
-                handlerGen.generate(getEnvironment());
-
-                JAnnotation annot = handlerGen.getHandlerAnnotation();
-                               
-                if (handlerGen.getHandlerAnnotation() != null) {
-                    boolean existHandlerAnno = false;
-                    for (JAnnotation jann : js.getAnnotations()) {
-                        if (jann.getType() == HandlerChain.class) {
-                            existHandlerAnno = true;
+            
+            for (JavaServiceClass js : serviceClasses.values()) {
+                if (js.getHandlerChains() != null) {
+                    HandlerConfigGenerator handlerGen = new HandlerConfigGenerator();
+                    handlerGen.setJavaInterface(js);
+                    handlerGen.generate(getEnvironment());
+    
+                    JAnnotation annot = handlerGen.getHandlerAnnotation();
+                                   
+                    if (handlerGen.getHandlerAnnotation() != null) {
+                        boolean existHandlerAnno = false;
+                        for (JAnnotation jann : js.getAnnotations()) {
+                            if (jann.getType() == HandlerChain.class) {
+                                existHandlerAnno = true;
+                            }
+                        }
+                        if (!existHandlerAnno) {
+                            js.addAnnotation(annot);
+                            js.addImport("javax.jws.HandlerChain");
                         }
                     }
-                    if (!existHandlerAnno) {
-                        js.addAnnotation(annot);
-                        js.addImport("javax.jws.HandlerChain");
+                    
+                }
+    
+                for (JavaPort port : js.getPorts()) {
+                    if (!port.getPackageName().equals(js.getPackageName())) {
+                        js.addImport(port.getFullClassName());
                     }
                 }
+    
+                String url = (String)env.get(ToolConstants.CFG_WSDLURL);
+                String location = (String)env.get(ToolConstants.CFG_WSDLLOCATION);
+                if (location == null) {
+                    location = url;
+                }
                 
-            }
-
-            for (JavaPort port : js.getPorts()) {
-                if (!port.getPackageName().equals(js.getPackageName())) {
-                    js.addImport(port.getFullClassName());
+                String serviceSuperclass = "Service";
+                for (String s : collector.getGeneratedFileInfo()) {
+                    if (s.equals(js.getPackageName() + ".Service")) {
+                        serviceSuperclass = "javax.xml.ws.Service";
+                    }
                 }
-            }
-
-            String url = (String)env.get(ToolConstants.CFG_WSDLURL);
-            String location = (String)env.get(ToolConstants.CFG_WSDLLOCATION);
-            if (location == null) {
-                location = url;
-            }
-            
-            String serviceSuperclass = "Service";
-            for (String s : collector.getGeneratedFileInfo()) {
-                if (s.equals(js.getPackageName() + ".Service")) {
-                    serviceSuperclass = "javax.xml.ws.Service";
+                clearAttributes();
+                
+                setAttributes("service", js);
+                setAttributes("wsdlLocation", location);
+                setAttributes("serviceSuperclass", serviceSuperclass);
+                if ("Service".equals(serviceSuperclass)) {
+                    js.addImport("javax.xml.ws.Service");
                 }
+                setAttributes("wsdlUrl", url);
+                setCommonAttributes();
+    
+                doWrite(SERVICE_TEMPLATE, parseOutputName(js.getPackageName(), 
+                                                          js.getName()));
             }
-            clearAttributes();
-            
-            setAttributes("service", js);
-            setAttributes("wsdlLocation", location);
-            setAttributes("serviceSuperclass", serviceSuperclass);
-            if ("Service".equals(serviceSuperclass)) {
-                js.addImport("javax.xml.ws.Service");
-            }
-            setAttributes("wsdlUrl", url);
-            setCommonAttributes();
-
-            doWrite(SERVICE_TEMPLATE, parseOutputName(js.getPackageName(), 
-                                                      js.getName()));
         }
     }
 
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml
index 8f69e120d5..31a7a1006d 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/jaxws-toolspec.xml
@@ -99,7 +99,18 @@ Examples:
                     <annotation>binding-file-name</annotation>
                 </associatedArgument>
             </option>
-
+            <option id="reserveClass" maxOccurs="unbounded">
+                <annotation>
+                    Reserve a class name to keep the code generator from generating
+                    a class of the given name.   In name cases, a binding file or 
+                    use of -autoNameResolution flag may be necessary for the 
+                    code generator to completely generate usable code.
+                </annotation>
+                <switch>reserveClass</switch>
+                <associatedArgument placement="afterSpace">
+                    <annotation>class-name</annotation>
+                </associatedArgument>
+            </option>
             <option id="catalog" maxOccurs="1">
                 <annotation>
                     Specify catalog file to map the imported wsdl/schema.
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/Messages.properties b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/Messages.properties
index 44d2620c11..1677b78808 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/Messages.properties
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/Messages.properties
@@ -20,6 +20,8 @@
 #
 PARAMETER_ALREADY_EXIST = Parameter : {0} already exist in the wsdl model
 EXCEPTION_ALREADY_EXIST = Exception : {0} already exist in the wsdl model
+RESERVED_SEI_NAME = Reserved SEI interface name {0}. Use a binding file or -autoNameResolution to resolve.
+DUPLICATE_SERVICE_NAME = Duplicate Service class name {0}.  Use a binding file or -autoNameResolution to resolve.
 MIMEPART_CANNOT_MAP = MIME part: {0} could not be mapped to available parts in portType!"
 WRAPPER_STYLE_TWO_RETURN_TYPES = Wrapper style can not have two return types
 CANNOT_FIND_WSDL = Can not find the wsdl from : {0}
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/PortTypeProcessor.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/PortTypeProcessor.java
index ca721d0d02..91a5b4b771 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/PortTypeProcessor.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/PortTypeProcessor.java
@@ -47,44 +47,65 @@ public class PortTypeProcessor extends AbstractProcessor {
         super(c);
     }
 
-    public void processClassNames(ServiceInfo serviceInfo) throws ToolException {
-        InterfaceInfo interfaceInfo = serviceInfo.getInterface();
-        if (interfaceInfo == null) {
-            return;
-        }
+    private JavaInterface getInterface(ServiceInfo serviceInfo,
+                                       InterfaceInfo interfaceInfo) throws ToolException {
+        JavaInterface intf = interfaceInfo.getProperty("JavaInterface", JavaInterface.class);
+        if (intf == null) {
+            intf = new InterfaceMapper(context).map(interfaceInfo);
+
+            JAXWSBinding jaxwsBinding = null;
+            if (serviceInfo.getDescription() != null) {
+                jaxwsBinding = serviceInfo.getDescription().getExtensor(JAXWSBinding.class);
+            }
+            JAXWSBinding infBinding = interfaceInfo.getExtensor(JAXWSBinding.class);
+            if (infBinding != null && infBinding.getPackage() != null) {
+                intf.setPackageName(infBinding.getPackage());
+            } else if (jaxwsBinding != null && jaxwsBinding.getPackage() != null) {
+                intf.setPackageName(jaxwsBinding.getPackage());
+            }
+            
+            if (infBinding != null && !infBinding.getPackageJavaDoc().equals("")) {
+                intf.setPackageJavaDoc(infBinding.getPackageJavaDoc());
+            } else if (jaxwsBinding != null && !jaxwsBinding.getPackageJavaDoc().equals("")) {
+                intf.setPackageJavaDoc(jaxwsBinding.getPackageJavaDoc());
+            }
 
-        JavaInterface intf = new InterfaceMapper(context).map(interfaceInfo);
+            String name = intf.getName();
+            if (infBinding != null
+                && infBinding.getJaxwsClass() != null
+                && infBinding.getJaxwsClass().getClassName() != null) {
+                name = infBinding.getJaxwsClass().getClassName();
+                intf.setClassJavaDoc(infBinding.getJaxwsClass().getComments());
+            }
 
-        JAXWSBinding jaxwsBinding = null;
-        if (serviceInfo.getDescription() != null) {
-            jaxwsBinding = serviceInfo.getDescription().getExtensor(JAXWSBinding.class);
-        }
-        JAXWSBinding infBinding = interfaceInfo.getExtensor(JAXWSBinding.class);
-        if (infBinding != null && infBinding.getPackage() != null) {
-            intf.setPackageName(infBinding.getPackage());
-        } else if (jaxwsBinding != null && jaxwsBinding.getPackage() != null) {
-            intf.setPackageName(jaxwsBinding.getPackage());
-        }
+            ClassCollector collector = context.get(ClassCollector.class);
+            if (context.optionSet(ToolConstants.CFG_AUTORESOLVE)) {
+                int count = 0;
+                String checkName = name;
+                while (collector.isReserved(intf.getPackageName(), checkName)) {
+                    checkName = name + "_" + (++count);
+                }
+                name = checkName;
+            } else if (collector.isReserved(intf.getPackageName(), name)) {
+                throw new ToolException("RESERVED_SEI_NAME", LOG, name);
+            }
+            interfaceInfo.setProperty("InterfaceName", name);
+            intf.setName(name);
+            collector.addSeiClassName(intf.getPackageName(),
+                                      intf.getName(),
+                                      intf.getPackageName() + "." + intf.getName());
         
-        if (infBinding != null && !infBinding.getPackageJavaDoc().equals("")) {
-            intf.setPackageJavaDoc(infBinding.getPackageJavaDoc());
-        } else if (jaxwsBinding != null && !jaxwsBinding.getPackageJavaDoc().equals("")) {
-            intf.setPackageJavaDoc(jaxwsBinding.getPackageJavaDoc());
+            interfaceInfo.setProperty("JavaInterface", intf);
         }
-
-        String name = intf.getName();
-        if (infBinding != null
-            && infBinding.getJaxwsClass() != null
-            && infBinding.getJaxwsClass().getClassName() != null) {
-            name = infBinding.getJaxwsClass().getClassName();
-            intf.setClassJavaDoc(infBinding.getJaxwsClass().getComments());
+        return intf;
+    }
+    
+    public void processClassNames(ServiceInfo serviceInfo) throws ToolException {
+        InterfaceInfo interfaceInfo = serviceInfo.getInterface();
+        if (interfaceInfo == null) {
+            return;
         }
-        intf.setName(name);
-
-        ClassCollector collector = context.get(ClassCollector.class);
-        collector.addSeiClassName(intf.getPackageName(),
-                                  intf.getName(),
-                                  intf.getPackageName() + "." + intf.getName());
+        getInterface(serviceInfo, interfaceInfo);
     }
 
     public void process(ServiceInfo serviceInfo) throws ToolException {
@@ -98,35 +119,8 @@ public class PortTypeProcessor extends AbstractProcessor {
             return;
         }
 
-        JavaInterface intf = new InterfaceMapper(context).map(interfaceInfo);
+        JavaInterface intf = getInterface(serviceInfo, interfaceInfo);
         intf.setJavaModel(jmodel);
-        
-        JAXWSBinding jaxwsBinding = null;
-        if (serviceInfo.getDescription() != null) {
-            jaxwsBinding = serviceInfo.getDescription().getExtensor(JAXWSBinding.class);
-        }
-        JAXWSBinding infBinding = interfaceInfo.getExtensor(JAXWSBinding.class);
-        if (infBinding != null && infBinding.getPackage() != null) {
-            intf.setPackageName(infBinding.getPackage());
-        } else if (jaxwsBinding != null && jaxwsBinding.getPackage() != null) {
-            intf.setPackageName(jaxwsBinding.getPackage());
-        }
-        
-        if (infBinding != null && !infBinding.getPackageJavaDoc().equals("")) {
-            intf.setPackageJavaDoc(infBinding.getPackageJavaDoc());
-        } else if (jaxwsBinding != null && !jaxwsBinding.getPackageJavaDoc().equals("")) {
-            intf.setPackageJavaDoc(jaxwsBinding.getPackageJavaDoc());
-        }
-
-
-        String name = intf.getName();
-        if (infBinding != null
-            && infBinding.getJaxwsClass() != null
-            && infBinding.getJaxwsClass().getClassName() != null) {
-            name = infBinding.getJaxwsClass().getClassName();
-            intf.setClassJavaDoc(infBinding.getJaxwsClass().getComments());
-        }
-        intf.setName(name);
 
         Element handler = (Element)context.get(ToolConstants.HANDLER_CHAIN);
         intf.setHandlerChains(handler);
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java
index f0cc917195..5645c3ea6e 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/processor/internal/ServiceProcessor.java
@@ -101,6 +101,21 @@ public class ServiceProcessor extends AbstractProcessor {
         }
 
     }
+    private String mapName(String packageName, String name) {
+        while (isNameCollision(packageName, name)) {
+            name = name + "_Service";
+        }
+        ClassCollector collector = context.get(ClassCollector.class);
+        if (collector.isReserved(packageName, name)) {
+            int count = 0;
+            String checkName = name;
+            while (collector.isReserved(packageName, checkName)) {
+                checkName = name + (++count);
+            }
+            name = checkName;
+        }
+        return name;
+    }
 
     private boolean isNameCollision(String packageName, String className) {
         if (context.optionSet(ToolConstants.CFG_GEN_OVERWRITE)) {
@@ -113,88 +128,101 @@ public class ServiceProcessor extends AbstractProcessor {
     }
 
     private void processService(JavaModel model) throws ToolException {
-        JavaServiceClass sclz = new JavaServiceClass(model);
-        String name = NameUtil.mangleNameToClassName(service.getName().getLocalPart());
-        String namespace = service.getName().getNamespaceURI();
-        String packageName = ProcessorUtil.parsePackageName(namespace, context.mapPackageName(namespace));
-
-
-        //customizing
-        JAXWSBinding serviceBinding = null;
-        if (service.getDescription() != null) {
-            serviceBinding = service.getDescription().getExtensor(JAXWSBinding.class);
-        }
-        JAXWSBinding serviceBinding2 = service.getExtensor(JAXWSBinding.class);
-
-        //TODO : Handle service customized class
-        if (serviceBinding != null) {
-            if (serviceBinding.getPackage() != null) {
-                jaxwsBinding.setPackage(serviceBinding.getPackage());
-            }
-
-            if (serviceBinding.isEnableAsyncMapping()) {
-                jaxwsBinding.setEnableAsyncMapping(true);
-            }
-
-            if (serviceBinding.isEnableMime()) {
-                jaxwsBinding.setEnableMime(true);
-            }
-            jaxwsBinding.setEnableWrapperStyle(serviceBinding.isEnableWrapperStyle());
-
-            if (serviceBinding.getJaxwsClass() != null
-                && serviceBinding.getJaxwsClass().getClassName() != null) {
-                name = serviceBinding.getJaxwsClass().getClassName();  
-                sclz.setClassJavaDoc(serviceBinding.getJaxwsClass().getComments());          
-            }
-            sclz.setPackageJavaDoc(serviceBinding.getPackageJavaDoc());
+        JavaServiceClass sclz = (JavaServiceClass)service.getProperty("JavaServiceClass");
+        if (sclz != null) {
+            return;
         }
-        if (serviceBinding2 != null) {
-            if (serviceBinding2.getPackage() != null) {
-                jaxwsBinding.setPackage(serviceBinding2.getPackage());
-            }
-
-            if (serviceBinding2.isEnableAsyncMapping()) {
-                jaxwsBinding.setEnableAsyncMapping(true);
-            }
-
-            if (serviceBinding2.isEnableMime()) {
-                jaxwsBinding.setEnableMime(true);
-            }
-
-            if (serviceBinding2.isEnableWrapperStyle()) {
-                jaxwsBinding.setEnableWrapperStyle(true);
-            }
-            if (serviceBinding2.getJaxwsClass() != null
-                && serviceBinding2.getJaxwsClass().getClassName() != null) {
-                name = serviceBinding2.getJaxwsClass().getClassName();                
-                sclz.setClassJavaDoc(serviceBinding2.getJaxwsClass().getComments());
+        
+        for (JavaServiceClass sc : model.getServiceClasses().values()) {
+            if (sc.getServiceName().equals(service.getName().getLocalPart())) {
+                sclz = sc;
+            }
+        }
+        if (sclz == null) {
+            sclz = new JavaServiceClass(model);
+            service.setProperty("JavaServiceClass", sclz);
+            String name = NameUtil.mangleNameToClassName(service.getName().getLocalPart());
+            String namespace = service.getName().getNamespaceURI();
+            String packageName = ProcessorUtil.parsePackageName(namespace, context.mapPackageName(namespace));
+    
+    
+            //customizing
+            JAXWSBinding serviceBinding = null;
+            if (service.getDescription() != null) {
+                serviceBinding = service.getDescription().getExtensor(JAXWSBinding.class);
+            }
+            JAXWSBinding serviceBinding2 = service.getExtensor(JAXWSBinding.class);
+    
+            //TODO : Handle service customized class
+            if (serviceBinding != null) {
+                if (serviceBinding.getPackage() != null) {
+                    jaxwsBinding.setPackage(serviceBinding.getPackage());
+                }
+    
+                if (serviceBinding.isEnableAsyncMapping()) {
+                    jaxwsBinding.setEnableAsyncMapping(true);
+                }
+    
+                if (serviceBinding.isEnableMime()) {
+                    jaxwsBinding.setEnableMime(true);
+                }
+                jaxwsBinding.setEnableWrapperStyle(serviceBinding.isEnableWrapperStyle());
+    
+                if (serviceBinding.getJaxwsClass() != null
+                    && serviceBinding.getJaxwsClass().getClassName() != null) {
+                    name = serviceBinding.getJaxwsClass().getClassName();  
+                    sclz.setClassJavaDoc(serviceBinding.getJaxwsClass().getComments());          
+                }
+                sclz.setPackageJavaDoc(serviceBinding.getPackageJavaDoc());
             }
-            if (!serviceBinding2.getPackageJavaDoc().equals("")) {
-                sclz.setPackageJavaDoc(serviceBinding2.getPackageJavaDoc());
+            if (serviceBinding2 != null) {
+                if (serviceBinding2.getPackage() != null) {
+                    jaxwsBinding.setPackage(serviceBinding2.getPackage());
+                }
+    
+                if (serviceBinding2.isEnableAsyncMapping()) {
+                    jaxwsBinding.setEnableAsyncMapping(true);
+                }
+    
+                if (serviceBinding2.isEnableMime()) {
+                    jaxwsBinding.setEnableMime(true);
+                }
+    
+                if (serviceBinding2.isEnableWrapperStyle()) {
+                    jaxwsBinding.setEnableWrapperStyle(true);
+                }
+                if (serviceBinding2.getJaxwsClass() != null
+                    && serviceBinding2.getJaxwsClass().getClassName() != null) {
+                    name = serviceBinding2.getJaxwsClass().getClassName();                
+                    sclz.setClassJavaDoc(serviceBinding2.getJaxwsClass().getComments());
+                }
+                if (!serviceBinding2.getPackageJavaDoc().equals("")) {
+                    sclz.setPackageJavaDoc(serviceBinding2.getPackageJavaDoc());
+                }
             }
+            
+            sclz.setServiceName(service.getName().getLocalPart());
+            sclz.setNamespace(namespace);
+    
+            if (jaxwsBinding.getPackage() != null) {
+                packageName = jaxwsBinding.getPackage();
+            }
+            sclz.setPackageName(packageName);
+            name = mapName(packageName, name);
+            sclz.setName(name);
+            ClassCollector collector = context.get(ClassCollector.class);
+            String checkName = name;
+            int count = 0;
+            while (collector.containServiceClass(packageName, checkName)) {
+                checkName = name + (++count);
+            }        
+            name = checkName;
+            sclz.setName(name);
+            collector.addServiceClassName(packageName, name, packageName + "." + name);
+    
+            Element handler = (Element)context.get(ToolConstants.HANDLER_CHAIN);
+            sclz.setHandlerChains(handler);
         }
-        
-        sclz.setServiceName(service.getName().getLocalPart());
-        sclz.setNamespace(namespace);
-
-        if (jaxwsBinding.getPackage() != null) {
-            packageName = jaxwsBinding.getPackage();
-        }
-        sclz.setPackageName(packageName);
-
-        while (isNameCollision(packageName, name)) {
-            name = name + "_Service";
-        }
-        sclz.setName(name);
-
-
-        if (model.getServiceClasses().containsKey(name)) {
-            sclz = model.getServiceClasses().get(name);
-        }
-
-        Element handler = (Element)context.get(ToolConstants.HANDLER_CHAIN);
-        sclz.setHandlerChains(handler);
-
 
         Collection<EndpointInfo> ports = service.getEndpoints();
 
@@ -204,7 +232,7 @@ public class ServiceProcessor extends AbstractProcessor {
         }
         
         sclz.setClassJavaDoc(jaxwsBinding.getClassJavaDoc());
-        model.addServiceClass(name, sclz);
+        model.addServiceClass(sclz.getName(), sclz);
     }
 
     private JavaPort processPort(JavaModel model, EndpointInfo port) throws ToolException {
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm
index 39a6b3523d..fd3fe27306 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/template/impl.vm
@@ -49,7 +49,7 @@ import ${import};
 #end
                       endpointInterface = "$intf.PackageName.$intf.Name")
                       
-public class ${intf.Name}Impl implements $intf.Name {
+public class ${implName} implements $intf.Name {
 
     private static final Logger LOG = Logger.getLogger(${intf.Name}Impl.class.getName());
 
diff --git a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java
index e3838cc993..488ae98d42 100644
--- a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java
+++ b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java
@@ -24,6 +24,7 @@ import java.io.File;
 import java.io.FileInputStream;
 import java.lang.reflect.Method;
 import java.lang.reflect.Modifier;
+import java.util.Arrays;
 import java.util.List;
 
 import javax.jws.WebService;
@@ -177,7 +178,7 @@ public class CodeGenBugTest extends AbstractCodeGenTest {
 
         File cxf = new File(org, "cxf");
         File[] files = cxf.listFiles();
-        assertEquals(23, files.length);
+        assertEquals(25, files.length);
 
         Class clz = classLoader.loadClass("org.cxf.Greeter");
         assertTrue("Generate " + clz.getName() + "error", clz.isInterface());
@@ -576,7 +577,7 @@ public class CodeGenBugTest extends AbstractCodeGenTest {
         processor.execute();
 
         File file = new File(output, "org/apache/cxf/w2j/hello_world_soap_http");
-        assertEquals(4, file.list().length);
+        assertEquals(Arrays.asList(file.list()).toString(), 4, file.list().length);
         file = new File(output,
                         "org/apache/cxf/w2j/hello_world_soap_http/DocLitBare_DocLitBarePort_Client.java");
         assertTrue("DocLitBare_DocLitBarePort_Client is not found", file.exists());
@@ -935,7 +936,7 @@ public class CodeGenBugTest extends AbstractCodeGenTest {
         processor.setContext(env);
         processor.execute();
         File file = new File(output, "org/mypkg");
-        assertEquals(23, file.listFiles().length);
+        assertEquals(25, file.listFiles().length);
         Class<?> clz = classLoader.loadClass("org.mypkg.MyService");
         assertNotNull("Customized service class is not found", clz);
         clz = classLoader.loadClass("org.mypkg.MyGreeter");
@@ -1087,4 +1088,21 @@ public class CodeGenBugTest extends AbstractCodeGenTest {
         assertTrue(str.contains("@XmlLocation"));
         assertTrue(str.contains("synchronized"));
     }
+    
+    @Test
+    public void testCXF1939() throws Exception {
+        String[] args = new String[] {"-d", output.getCanonicalPath(),
+            "-impl", "-server", "-client", "-autoNameResolution",
+            getLocation("/wsdl2java_wsdl/cxf1939/hello_world.wsdl")};
+        WSDLToJava.main(args);
+                
+        assertNotNull(output);
+        assertTrue(new File(output, "org/apache/cxf/w2j/hello_world_soap_http/GreeterImpl.java").exists());
+        assertTrue(new File(output, "org/apache/cxf/w2j/hello_world_soap_http/GreeterImpl1.java").exists());
+        assertTrue(new File(output, 
+                            "org/apache/cxf/w2j/hello_world_soap_http/TestServiceName.java").exists());
+        assertTrue(new File(output, 
+                            "org/apache/cxf/w2j/hello_world_soap_http/TestServiceName1.java").exists());
+    }
+
 }
diff --git a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java
index b0d0d6454b..56642b264b 100644
--- a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java
+++ b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenTest.java
@@ -487,7 +487,7 @@ public class CodeGenTest extends AbstractCodeGenTest {
         File types = new File(helloworldsoaphttp, "types");
         assertTrue(types.exists());
         File[] files = helloworldsoaphttp.listFiles();
-        assertEquals(7, files.length);
+        assertEquals(9, files.length);
         files = types.listFiles();
         assertEquals(17, files.length);
 
@@ -578,7 +578,7 @@ public class CodeGenTest extends AbstractCodeGenTest {
         File types = new File(helloworldsoaphttp, "types");
         assertTrue(types.exists());
         File[] files = helloworldsoaphttp.listFiles();
-        assertEquals(7, files.length);
+        assertEquals(9, files.length);
         files = types.listFiles();
         assertEquals(17, files.length);
 
diff --git a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/wsdl11/JAXWSDefinitionBuilderTest.java b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/wsdl11/JAXWSDefinitionBuilderTest.java
index 7833a31a20..d3f97f5cd8 100644
--- a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/wsdl11/JAXWSDefinitionBuilderTest.java
+++ b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/wsdl11/JAXWSDefinitionBuilderTest.java
@@ -71,7 +71,8 @@ public class JAXWSDefinitionBuilderTest extends Assert {
         assertNotNull(port);
 
         assertEquals(1, port.getExtensibilityElements().size());
-        assertTrue(port.getExtensibilityElements().get(0) instanceof HTTPAddress);
+        assertTrue(port.getExtensibilityElements().get(0).getClass().getName(), 
+                   port.getExtensibilityElements().get(0) instanceof HTTPAddress);
 
         Binding binding = port.getBinding();
         assertNotNull(binding);
diff --git a/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1939/hello_world.wsdl b/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1939/hello_world.wsdl
new file mode 100644
index 0000000000..cbe82e68b5
--- /dev/null
+++ b/tools/wsdlto/test/src/test/resources/wsdl2java_wsdl/cxf1939/hello_world.wsdl
@@ -0,0 +1,109 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+  Licensed to the Apache Software Foundation (ASF) under one
+  or more contributor license agreements. See the NOTICE file
+  distributed with this work for additional information
+  regarding copyright ownership. The ASF licenses this file
+  to you under the Apache License, Version 2.0 (the
+  "License"); you may not use this file except in compliance
+  with the License. You may obtain a copy of the License at
+ 
+  http://www.apache.org/licenses/LICENSE-2.0
+ 
+  Unless required by applicable law or agreed to in writing,
+  software distributed under the License is distributed on an
+  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+  KIND, either express or implied. See the License for the
+  specific language governing permissions and limitations
+  under the License.
+-->
+<wsdl:definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
+    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
+    xmlns:tns="http://cxf.apache.org/w2j/hello_world_soap_http"
+    xmlns:x1="http://cxf.apache.org/w2j/hello_world_soap_http/types"
+    xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
+    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
+    targetNamespace="http://cxf.apache.org/w2j/hello_world_soap_http" name="HelloWorld">
+    <wsdl:types>
+        <schema targetNamespace="http://cxf.apache.org/w2j/hello_world_soap_http/types" xmlns="http://www.w3.org/2001/XMLSchema" xmlns:x1="http://cxf.apache.org/w2j/hello_world_soap_http/types" elementFormDefault="qualified">
+            <element name="sayHi">
+                <complexType/>
+            </element>
+            <element name="sayHiResponse">
+                <complexType>
+                    <sequence>
+                        <element name="responseType" type="string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="greetMe">
+                <complexType>
+                    <sequence>
+                        <element name="requestType" type="string"/>
+                    </sequence>
+                </complexType>
+            </element>
+            <element name="greetMeResponse">
+                <complexType>
+                    <sequence>
+                        <element name="responseType" type="string"/>
+                    </sequence>
+                </complexType>
+            </element>
+        </schema>
+    </wsdl:types>
+    <wsdl:message name="sayHiRequest">
+        <wsdl:part name="in" element="x1:sayHi"/>
+    </wsdl:message>
+    <wsdl:message name="sayHiResponse">
+        <wsdl:part name="out" element="x1:sayHiResponse"/>
+    </wsdl:message>
+    <wsdl:message name="greetMeRequest">
+        <wsdl:part name="in" element="x1:greetMe"/>
+    </wsdl:message>
+    <wsdl:message name="greetMeResponse">
+        <wsdl:part name="out" element="x1:greetMeResponse"/>
+    </wsdl:message>
+    <wsdl:portType name="Greeter">
+        <wsdl:operation name="sayHi">
+            <wsdl:input name="sayHiRequest" message="tns:sayHiRequest"/>
+            <wsdl:output name="sayHiResponse" message="tns:sayHiResponse"/>
+        </wsdl:operation>
+        <wsdl:operation name="greetMe">
+            <wsdl:input name="greetMeRequest" message="tns:greetMeRequest"/>
+            <wsdl:output name="greetMeResponse" message="tns:greetMeResponse"/>
+        </wsdl:operation>
+    </wsdl:portType>
+    <wsdl:binding name="Greeter_SOAPBinding" type="tns:Greeter">
+        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
+        <wsdl:operation name="sayHi">
+            <soap:operation style="document"/>
+            <wsdl:input>
+                <soap:body use="literal"/>
+            </wsdl:input>
+            <wsdl:output>
+                <soap:body use="literal"/>
+            </wsdl:output>
+        </wsdl:operation>
+        <wsdl:operation name="greetMe">
+            <soap:operation style="document"/>
+            <wsdl:input>
+                <soap:body use="literal"/>
+            </wsdl:input>
+            <wsdl:output>
+                <soap:body use="literal"/>
+            </wsdl:output>
+        </wsdl:operation>
+    </wsdl:binding>
+    <wsdl:service name="TestServiceName">
+        <wsdl:port name="SoapPort" binding="tns:Greeter_SOAPBinding">
+            <soap:address location="http://localhost:9100/TestServiceName/SoapPort"/>
+        </wsdl:port>
+    </wsdl:service>
+    <wsdl:service name="Test_Service_Name">
+        <wsdl:port name="Soap_Port" binding="tns:Greeter_SOAPBinding">
+            <soap:address location="http://localhost:9000/Test_Service_Name/Soap_Port"/>
+        </wsdl:port>
+    </wsdl:service>
+</wsdl:definitions>
+
