diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java
index d019ccaf16..9a8e426f46 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/ContainerRequestContextImpl.java
@@ -72,7 +72,7 @@ public class ContainerRequestContextImpl extends AbstractRequestContextImpl
     @Override
     public void setEntityStream(InputStream is) {
         checkContext();
-        m.put(InputStream.class, is);
+        m.setContent(InputStream.class, is);
     }
 
     @SuppressWarnings("unchecked")
@@ -85,6 +85,22 @@ public class ContainerRequestContextImpl extends AbstractRequestContextImpl
 
     @Override
     public void setRequestUri(URI requestUri) throws IllegalStateException {
+        if (requestUri.isAbsolute()) {
+            String baseUriString = new UriInfoImpl(m).getBaseUri().toString();
+            String requestUriString = new UriInfoImpl(m).getBaseUri().toString();
+            if (!requestUriString.startsWith(baseUriString)) {
+                setRequestUri(requestUri, URI.create("/"));
+                return;
+            } else {
+                requestUriString = requestUriString.substring(baseUriString.length() + 1);
+                requestUri = URI.create(requestUriString);
+            }
+                
+        }
+        doSetRequestUri(requestUri);
+    }
+    
+    public void doSetRequestUri(URI requestUri) throws IllegalStateException {
         if (!preMatch) {
             throw new IllegalStateException();
         }
@@ -93,7 +109,7 @@ public class ContainerRequestContextImpl extends AbstractRequestContextImpl
 
     @Override
     public void setRequestUri(URI baseUri, URI requestUri) throws IllegalStateException {
-        setRequestUri(requestUri);
+        doSetRequestUri(requestUri);
         Object servletRequest = m.get("HTTP.REQUEST");
         if (servletRequest != null) {
             ((javax.servlet.http.HttpServletRequest)servletRequest)
diff --git a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java
index a1e1d93470..30833278e6 100644
--- a/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java
+++ b/rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/utils/JAXRSUtils.java
@@ -1509,6 +1509,7 @@ public final class JAXRSUtils {
             ContainerRequestContext context = new ContainerRequestContextImpl(m, preMatch, false);
             for (ProviderInfo<ContainerRequestFilter> filter : containerFilters) {
                 try {
+                    InjectionUtils.injectContexts(filter.getProvider(), filter, m);
                     filter.getProvider().filter(context);
                 } catch (IOException ex) {
                     throw new InternalServerErrorException(ex);
diff --git a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookServer20.java b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookServer20.java
index 1774bda655..212614ac8f 100644
--- a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookServer20.java
+++ b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/BookServer20.java
@@ -19,7 +19,9 @@
 
 package org.apache.cxf.systest.jaxrs;
 
+import java.io.ByteArrayInputStream;
 import java.io.IOException;
+import java.io.InputStream;
 import java.lang.annotation.ElementType;
 import java.lang.annotation.Retention;
 import java.lang.annotation.RetentionPolicy;
@@ -76,6 +78,7 @@ public class BookServer20 extends AbstractBusTestServerBase {
         providers.add(new CustomDynamicFeature());
         providers.add(new PostMatchContainerRequestFilter());
         providers.add(new FaultyContainerRequestFilter());
+        providers.add(new PreMatchReplaceStreamOrAddress());
         sf.setProviders(providers);
         sf.setResourceProvider(BookStore.class,
                                new SingletonResourceProvider(new BookStore(), true));
@@ -135,6 +138,27 @@ public class BookServer20 extends AbstractBusTestServerBase {
         
     }
     
+    @PreMatching
+    private static class PreMatchReplaceStreamOrAddress implements ContainerRequestFilter {
+        @Context
+        private UriInfo ui;
+        @Override
+        public void filter(ContainerRequestContext context) throws IOException {
+            String path = ui.getPath();
+            if (path.endsWith("books/checkN")) {
+                URI requestURI = URI.create(path.replace("N", "2"));
+                context.setRequestUri(requestURI);
+                replaceStream(context);
+            } else if (path.endsWith("books/check2")) {
+                replaceStream(context);
+            }
+        }
+        private void replaceStream(ContainerRequestContext context) {
+            InputStream is = new ByteArrayInputStream("123".getBytes());
+            context.setEntityStream(is);
+        }
+    }
+    
         
     @PreMatching
     @Priority(2)
diff --git a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRS20ClientServerBookTest.java b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRS20ClientServerBookTest.java
index c1b053713b..bd37fd7200 100644
--- a/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRS20ClientServerBookTest.java
+++ b/systests/jaxrs/src/test/java/org/apache/cxf/systest/jaxrs/JAXRS20ClientServerBookTest.java
@@ -371,6 +371,22 @@ public class JAXRS20ClientServerBookTest extends AbstractBusClientServerTestBase
         validatePostResponse(wc);
     }
     
+    @Test
+    public void testBookExistsServerStreamReplace() throws Exception {
+        String address = "http://localhost:" + PORT + "/bookstore/books/check2";
+        WebClient wc = WebClient.create(address);
+        wc.accept("text/plain").type("text/plain");
+        assertTrue(wc.post("s", Boolean.class));
+    }
+    
+    @Test
+    public void testBookExistsServerAddressOverwrite() throws Exception {
+        String address = "http://localhost:" + PORT + "/bookstore/books/checkN";
+        WebClient wc = WebClient.create(address);
+        wc.accept("text/plain").type("text/plain");
+        assertTrue(wc.post("s", Boolean.class));
+    }
+    
     @Test
     public void testPostBookAsync() throws Exception {
         String address = "http://localhost:" + PORT + "/bookstore/bookheaders/simple";
