diff --git a/api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java b/api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java
index 5e2758557e..5c7d66d7c7 100644
--- a/api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java
+++ b/api/src/main/java/org/apache/cxf/databinding/AbstractDataBinding.java
@@ -90,6 +90,13 @@ public abstract class AbstractDataBinding implements DataBinding {
 
     public XmlSchema addSchemaDocument(ServiceInfo serviceInfo, SchemaCollection col, Document d,
                                        String systemId) {
+        return addSchemaDocument(serviceInfo, col, d, systemId, null);
+    }
+    public XmlSchema addSchemaDocument(ServiceInfo serviceInfo, 
+                                       SchemaCollection col, 
+                                       Document d,
+                                       String systemId,
+                                       Collection<String> ids) {
 
 
         /*
@@ -161,7 +168,10 @@ public abstract class AbstractDataBinding implements DataBinding {
                     Element e = (Element)n;
                     if (e.getLocalName().equals("import")) {
                         e = (Element)n;
-                        e.removeAttribute("schemaLocation");
+                        String loc = e.getAttribute("schemaLocation");
+                        if (ids == null || ids.contains(loc)) {
+                            e.removeAttribute("schemaLocation");
+                        }
                         updateSchemaLocation(e);
                         if (StringUtils.isEmpty(e.getAttribute("namespace"))) {
                             e.setAttribute("namespace", serviceInfo.getInterface().getName()
diff --git a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java
index c100e3bfc4..0006fff63a 100644
--- a/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java
+++ b/rt/databinding/jaxb/src/main/java/org/apache/cxf/jaxb/JAXBDataBinding.java
@@ -31,6 +31,7 @@ import java.util.Arrays;
 import java.util.Collection;
 import java.util.Collections;
 import java.util.HashMap;
+import java.util.HashSet;
 import java.util.LinkedHashSet;
 import java.util.List;
 import java.util.Map;
@@ -351,6 +352,10 @@ public class JAXBDataBinding extends AbstractDataBinding
                     throw new ServiceConstructionException("SCHEMA_GEN_EXC", LOG, e);
                 }
             }
+            Set<String> ids = new HashSet<String>();
+            for (DOMSource r : schemas) {
+                ids.add(r.getSystemId());
+            }
             for (DOMSource r : schemas) {
                 if (bi.contains(r)) {
                     String ns = ((Document)r.getNode()).getDocumentElement().getAttribute("targetNamespace");
