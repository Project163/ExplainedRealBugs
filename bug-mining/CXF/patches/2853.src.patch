diff --git a/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java b/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java
index 4435a871b6..f52b991874 100644
--- a/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java
+++ b/rt/rs/description-swagger/src/main/java/org/apache/cxf/jaxrs/swagger/OsgiSwaggerUiResolver.java
@@ -39,7 +39,12 @@ public class OsgiSwaggerUiResolver extends SwaggerUiResolver {
             }
             for (Bundle b : bundle.getBundleContext().getBundles()) {
                 String location = b.getLocation();
-                if (location.equals(LOCATION + swaggerUiVersion)) {
+                if (swaggerUiVersion != null) {
+                    if (location.equals(LOCATION + swaggerUiVersion)) {
+                        return getSwaggerUiRoot(b, swaggerUiVersion);
+                    }
+                } else if (location.startsWith(LOCATION)) {
+                    swaggerUiVersion = location.substring(LOCATION.length());
                     return getSwaggerUiRoot(b, swaggerUiVersion);
                 }
             }
diff --git a/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/servicelist/FormattedServiceListWriter.java b/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/servicelist/FormattedServiceListWriter.java
index 0c2551933d..ae9a4d4651 100644
--- a/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/servicelist/FormattedServiceListWriter.java
+++ b/rt/transports/http/src/main/java/org/apache/cxf/transport/servlet/servicelist/FormattedServiceListWriter.java
@@ -24,6 +24,7 @@ import java.net.URI;
 import java.util.Map;
 
 import org.apache.cxf.Bus;
+import org.apache.cxf.BusFactory;
 import org.apache.cxf.common.util.PropertyUtils;
 import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.service.model.OperationInfo;
@@ -44,8 +45,12 @@ public class FormattedServiceListWriter implements ServiceListWriter {
         this.title = title;
         this.showForeignContexts = showForeignContexts;
         this.bus = bus;
-        if (bus != null) {
-            this.atomMap = CastUtils.cast((Map<?, ?>)bus.getProperty("org.apache.cxf.extensions.logging.atom.pull"));
+        if (this.bus == null) {
+            this.bus = BusFactory.getDefaultBus(false);
+        }
+        if (this.bus != null) {
+            this.atomMap = 
+                CastUtils.cast((Map<?, ?>)this.bus.getProperty("org.apache.cxf.extensions.logging.atom.pull"));
         }
     }
 
