diff --git a/rt/core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java b/rt/core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java
index 49cdc42b7a..592fb8709b 100644
--- a/rt/core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java
+++ b/rt/core/src/main/java/org/apache/cxf/interceptor/AbstractLoggingInterceptor.java
@@ -145,6 +145,8 @@ public abstract class AbstractLoggingInterceptor extends AbstractPhaseIntercepto
         message = transform(message);
         if (writer != null) {
             writer.println(message);
+            // Flush the writer to make sure the message is wrote
+            writer.flush();
         } else if (getLogger().isLoggable(Level.INFO)) {
             getLogger().info(message);
         }
diff --git a/rt/core/src/test/java/org/apache/cxf/interceptor/PrettyLoggingOutInterceptorTest.java b/rt/core/src/test/java/org/apache/cxf/interceptor/LoggingOutInterceptorTest.java
similarity index 73%
rename from rt/core/src/test/java/org/apache/cxf/interceptor/PrettyLoggingOutInterceptorTest.java
rename to rt/core/src/test/java/org/apache/cxf/interceptor/LoggingOutInterceptorTest.java
index 56e9fbde03..12a4896c12 100644
--- a/rt/core/src/test/java/org/apache/cxf/interceptor/PrettyLoggingOutInterceptorTest.java
+++ b/rt/core/src/test/java/org/apache/cxf/interceptor/LoggingOutInterceptorTest.java
@@ -23,25 +23,31 @@ import java.io.ByteArrayOutputStream;
 import java.io.PrintWriter;
 
 import org.apache.cxf.io.CachedOutputStream;
+import org.apache.cxf.message.ExchangeImpl;
+import org.apache.cxf.message.Message;
+import org.apache.cxf.message.MessageImpl;
 
 import org.junit.Assert;
 import org.junit.Test;
 
-public class PrettyLoggingOutInterceptorTest extends Assert {
+public class LoggingOutInterceptorTest extends Assert {
     
     @Test
     public void testFormatting() throws Exception { 
         ByteArrayOutputStream baos = new ByteArrayOutputStream();
         PrintWriter pw = new PrintWriter(baos);
         
-        PrettyLoggingOutInterceptor p = new PrettyLoggingOutInterceptor(pw);
-        PrettyLoggingOutInterceptor.LoggingCallback l = p.new LoggingCallback();
+        LoggingOutInterceptor p = new LoggingOutInterceptor(pw);
+        //p.setPrettyLogging(true);
         CachedOutputStream cos = new CachedOutputStream();
-
         String s = "<today><is><the><twenty> <second> <of> <january> <two> <thousand> <and> <nine></nine> " 
             + "</and></thousand></two></january></of></second></twenty></the></is></today>";
-        cos.getOut().write(s.getBytes());
-        l.onClose(cos); 
+        cos.write(s.getBytes());
+        Message message = new MessageImpl();
+        message.setExchange(new ExchangeImpl());
+        message.put(Message.CONTENT_TYPE, "application/xml");
+        LoggingOutInterceptor.LoggingCallback l = p.new LoggingCallback(message, cos);
+        l.onClose(cos);
         String str = baos.toString();
         //format has changed
         assertFalse(str.matches(s));
