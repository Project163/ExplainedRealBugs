diff --git a/rt/javascript/src/main/java/org/apache/cxf/javascript/JavascriptQueryHandler.java b/rt/javascript/src/main/java/org/apache/cxf/javascript/JavascriptQueryHandler.java
index d73819381a..f210125f55 100644
--- a/rt/javascript/src/main/java/org/apache/cxf/javascript/JavascriptQueryHandler.java
+++ b/rt/javascript/src/main/java/org/apache/cxf/javascript/JavascriptQueryHandler.java
@@ -144,7 +144,7 @@ public class JavascriptQueryHandler implements StemMatchingQueryHandler {
                 for (SchemaInfo schema : schemata) {
                     SchemaJavascriptBuilder builder = new SchemaJavascriptBuilder(serviceInfo
                         .getXmlSchemaCollection(), prefixManager, nameManager);
-                    String allThatJavascript = builder.generateCodeForSchema(schema);
+                    String allThatJavascript = builder.generateCodeForSchema(schema.getSchema());
                     writer.append(allThatJavascript);
                 }
 
diff --git a/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java b/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java
index 3ba3fd7436..25d032edba 100755
--- a/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java
+++ b/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java
@@ -37,7 +37,6 @@ import org.apache.cxf.javascript.NameManager;
 import org.apache.cxf.javascript.NamespacePrefixAccumulator;
 import org.apache.cxf.javascript.ParticleInfo;
 import org.apache.cxf.javascript.UnsupportedConstruct;
-import org.apache.cxf.service.model.SchemaInfo;
 import org.apache.ws.commons.schema.XmlSchema;
 import org.apache.ws.commons.schema.XmlSchemaAnnotated;
 import org.apache.ws.commons.schema.XmlSchemaAny;
@@ -62,7 +61,7 @@ public class SchemaJavascriptBuilder {
     private SchemaCollection xmlSchemaCollection;
     private NameManager nameManager;
     private NamespacePrefixAccumulator prefixAccumulator;
-    private SchemaInfo schemaInfo;
+    //private SchemaInfo schemaInfo;
 
     // In general, I (bimargulies) hate fields that are temporary communications
     // between members of a class. However, given the style restrictions on the
@@ -70,6 +69,7 @@ public class SchemaJavascriptBuilder {
     private StringBuilder code;
     private StringBuilder accessors;
     private JavascriptUtils utils;
+    private XmlSchema xmlSchema;
 
     public SchemaJavascriptBuilder(SchemaCollection schemaCollection,
                                    NamespacePrefixAccumulator prefixAccumulator, NameManager nameManager) {
@@ -78,17 +78,17 @@ public class SchemaJavascriptBuilder {
         this.prefixAccumulator = prefixAccumulator;
     }
 
-    public String generateCodeForSchema(SchemaInfo schema) {
-        schemaInfo = schema;
+    public String generateCodeForSchema(XmlSchema schema) {
+        xmlSchema = schema;
         code = new StringBuilder();
         code.append("//\n");
-        code.append("// Definitions for schema: " + schema.getNamespaceURI());
-        if (schema.getSystemId() != null) {
-            code.append("\n//  " + schema.getSystemId());
+        code.append("// Definitions for schema: " + schema.getTargetNamespace());
+        if (schema.getSourceURI() != null) {
+            code.append("\n//  " + schema.getSourceURI());
         }
         code.append("\n//\n");
 
-        XmlSchemaObjectTable schemaTypes = schema.getSchema().getSchemaTypes();
+        XmlSchemaObjectTable schemaTypes = schema.getSchemaTypes();
         Iterator namesIterator = schemaTypes.getNames();
         while (namesIterator.hasNext()) {
             QName name = (QName)namesIterator.next();
@@ -122,7 +122,7 @@ public class SchemaJavascriptBuilder {
         }
 
         // now add in global elements with anonymous types.
-        schemaTypes = schema.getSchema().getElements();
+        schemaTypes = schema.getElements();
         namesIterator = schemaTypes.getNames();
         while (namesIterator.hasNext()) {
             QName name = (QName)namesIterator.next();
@@ -136,7 +136,8 @@ public class SchemaJavascriptBuilder {
                     XmlSchemaElement element = (XmlSchemaElement)xmlSchemaObject;
                     if (element.getSchemaTypeName() == null && element.getSchemaType() == null) {
                         Message message = new Message("ELEMENT_MISSING_TYPE", LOG, element.getQName(),
-                                                      element.getSchemaTypeName(), schema.getNamespaceURI());
+                                                      element.getSchemaTypeName(), 
+                                                      schema.getTargetNamespace());
                         LOG.warning(message.toString());
                         continue;
                     }
@@ -144,7 +145,7 @@ public class SchemaJavascriptBuilder {
                     if (element.getSchemaType() != null) {
                         type = element.getSchemaType();
                     } else {
-                        type = schema.getSchema().getTypeByName(element.getSchemaTypeName());
+                        type = schema.getTypeByName(element.getSchemaTypeName());
                     }
                     if (!(type instanceof XmlSchemaComplexType)) {
                         // we never make classes for simple type.
@@ -194,7 +195,7 @@ public class SchemaJavascriptBuilder {
         utils.appendLine("this.typeMarker = '" + typeObjectName + "';");
         for (XmlSchemaObject thing : items) {
             ParticleInfo itemInfo = ParticleInfo.forLocalItem(thing, 
-                                                              schemaInfo.getSchema(),
+                                                              xmlSchema,
                                                               xmlSchemaCollection, 
                                                               prefixAccumulator, 
                                                               type.getQName()); 
@@ -202,7 +203,7 @@ public class SchemaJavascriptBuilder {
         }
         
         for (XmlSchemaAnnotated thing : attrs) {
-            AttributeInfo itemInfo = AttributeInfo.forLocalItem(thing, schemaInfo.getSchema(),
+            AttributeInfo itemInfo = AttributeInfo.forLocalItem(thing, xmlSchema,
                                                                 xmlSchemaCollection,
                                                                 prefixAccumulator,
                                                                 type.getQName());
@@ -358,7 +359,7 @@ public class SchemaJavascriptBuilder {
         List<XmlSchemaObject> items = XmlSchemaUtils.getContentElements(type, xmlSchemaCollection);
         for (XmlSchemaObject sequenceItem : items) {
             ParticleInfo itemInfo = ParticleInfo.forLocalItem(sequenceItem, 
-                                                              schemaInfo.getSchema(), 
+                                                              xmlSchema, 
                                                               xmlSchemaCollection, 
                                                               prefixAccumulator, 
                                                               type.getQName()); 
@@ -404,7 +405,7 @@ public class SchemaJavascriptBuilder {
             XmlSchemaObject contentElement = contentElements.get(i);
             utils.appendLine("cxfjsutils.trace('curElement: ' + cxfjsutils.traceElementName(curElement));");
             ParticleInfo itemInfo = ParticleInfo.forLocalItem(contentElement,
-                                                              schemaInfo.getSchema(),
+                                                              xmlSchema,
                                                               xmlSchemaCollection, 
                                                               prefixAccumulator, 
                                                               type.getQName()); 
@@ -413,7 +414,7 @@ public class SchemaJavascriptBuilder {
                 if (i != nContentElements - 1) {
                     XmlSchemaObject nextThing = contentElements.get(i + 1);
                     nextItem = ParticleInfo.forLocalItem(nextThing, 
-                                                         schemaInfo.getSchema(), 
+                                                         xmlSchema, 
                                                          xmlSchemaCollection, 
                                                          prefixAccumulator, 
                                                          type.getQName()); 
@@ -440,7 +441,7 @@ public class SchemaJavascriptBuilder {
             String ns = namespaces[x];
             nslist.append("'");
             if ("##targetNamespace".equals(ns)) {
-                nslist.append(schemaInfo.getNamespaceURI());
+                nslist.append(xmlSchema.getTargetNamespace());
             } else if ("##local".equals(ns)) {
                 // nothing, empty string
             } else {
@@ -499,7 +500,7 @@ public class SchemaJavascriptBuilder {
         
         utils.appendLine("var matcher = new org_apache_cxf_any_ns_matcher("
                          + matchType
-                         + ", '" + schemaInfo.getNamespaceURI() + "'"
+                         + ", '" + xmlSchema.getTargetNamespace() + "'"
                          + ", " + namespaceList
                          + ", " + nextLocalPartConstant
                          + ");");
@@ -566,7 +567,7 @@ public class SchemaJavascriptBuilder {
 
     private void deserializeElement(XmlSchemaComplexType type, XmlSchemaObject thing) {
         ParticleInfo itemInfo = ParticleInfo.forLocalItem(thing, 
-                                                          schemaInfo.getSchema(),
+                                                          xmlSchema,
                                                           xmlSchemaCollection, 
                                                           prefixAccumulator, 
                                                           type.getQName());
@@ -577,7 +578,7 @@ public class SchemaJavascriptBuilder {
         String accessorName = "set" + StringUtils.capitalize(itemInfo.getJavascriptName());
         utils.appendLine("cxfjsutils.trace('processing " + itemInfo.getJavascriptName() + "');");
         XmlSchemaElement element = (XmlSchemaElement) itemInfo.getParticle();
-        QName elementQName = XmlSchemaUtils.getElementQualifiedName(element, schemaInfo.getSchema()); 
+        QName elementQName = XmlSchemaUtils.getElementQualifiedName(element, xmlSchema); 
         String elementNamespaceURI = elementQName.getNamespaceURI();
         boolean elementNoNamespace = "".equals(elementNamespaceURI);
         XmlSchema elementSchema = null;
@@ -587,7 +588,7 @@ public class SchemaJavascriptBuilder {
         boolean qualified = !elementNoNamespace
                             && XmlSchemaUtils.isElementQualified(element, 
                                                                  itemInfo.isGlobal(), 
-                                                                 schemaInfo.getSchema(),
+                                                                 xmlSchema,
                                                                  elementSchema);
 
         if (!qualified) {
diff --git a/rt/javascript/src/test/java/org/apache/cxf/javascript/GenericAegisTest.java b/rt/javascript/src/test/java/org/apache/cxf/javascript/GenericAegisTest.java
index 3aa14a004f..a2a56916d0 100644
--- a/rt/javascript/src/test/java/org/apache/cxf/javascript/GenericAegisTest.java
+++ b/rt/javascript/src/test/java/org/apache/cxf/javascript/GenericAegisTest.java
@@ -64,7 +64,7 @@ public class GenericAegisTest  {
         for (SchemaInfo schema : schemata) {
             SchemaJavascriptBuilder builder = new SchemaJavascriptBuilder(serviceInfo
                 .getXmlSchemaCollection(), prefixManager, nameManager);
-            String allThatJavascript = builder.generateCodeForSchema(schema);
+            String allThatJavascript = builder.generateCodeForSchema(schema.getSchema());
             assertNotNull(allThatJavascript);
         }
 
diff --git a/rt/javascript/src/test/java/org/apache/cxf/javascript/JavascriptTestUtilities.java b/rt/javascript/src/test/java/org/apache/cxf/javascript/JavascriptTestUtilities.java
index 43f82713d0..57200bedb4 100644
--- a/rt/javascript/src/test/java/org/apache/cxf/javascript/JavascriptTestUtilities.java
+++ b/rt/javascript/src/test/java/org/apache/cxf/javascript/JavascriptTestUtilities.java
@@ -409,7 +409,7 @@ public class JavascriptTestUtilities extends TestUtilities {
         for (SchemaInfo schema : schemata) {
             SchemaJavascriptBuilder builder = new SchemaJavascriptBuilder(serviceInfo
                 .getXmlSchemaCollection(), prefixManager, nameManager);
-            String allThatJavascript = builder.generateCodeForSchema(schema);
+            String allThatJavascript = builder.generateCodeForSchema(schema.getSchema());
             readStringIntoRhino(allThatJavascript, schema.toString() + ".js");
         }
 
diff --git a/rt/javascript/src/test/java/org/apache/cxf/javascript/types/AttributeTest.java b/rt/javascript/src/test/java/org/apache/cxf/javascript/types/AttributeTest.java
index 7509d6c6cf..feee9cde24 100644
--- a/rt/javascript/src/test/java/org/apache/cxf/javascript/types/AttributeTest.java
+++ b/rt/javascript/src/test/java/org/apache/cxf/javascript/types/AttributeTest.java
@@ -185,7 +185,7 @@ public class AttributeTest extends AbstractCXFSpringTest {
         for (SchemaInfo schema : schemata) {
             SchemaJavascriptBuilder builder = new SchemaJavascriptBuilder(serviceInfo
                 .getXmlSchemaCollection(), prefixAccumulator, nameManager);
-            String allThatJavascript = builder.generateCodeForSchema(schema);
+            String allThatJavascript = builder.generateCodeForSchema(schema.getSchema());
             assertNotNull(allThatJavascript);
             testUtilities.readStringIntoRhino(allThatJavascript, schema.toString() + ".js");
         }
diff --git a/rt/javascript/src/test/java/org/apache/cxf/javascript/types/SerializationTest.java b/rt/javascript/src/test/java/org/apache/cxf/javascript/types/SerializationTest.java
index 8a6ce4191f..955ad09460 100644
--- a/rt/javascript/src/test/java/org/apache/cxf/javascript/types/SerializationTest.java
+++ b/rt/javascript/src/test/java/org/apache/cxf/javascript/types/SerializationTest.java
@@ -202,7 +202,7 @@ public class SerializationTest extends AbstractCXFSpringTest {
         for (SchemaInfo schema : schemata) {
             SchemaJavascriptBuilder builder = new SchemaJavascriptBuilder(serviceInfo
                 .getXmlSchemaCollection(), prefixAccumulator, nameManager);
-            String allThatJavascript = builder.generateCodeForSchema(schema);
+            String allThatJavascript = builder.generateCodeForSchema(schema.getSchema());
             assertNotNull(allThatJavascript);
             testUtilities.readStringIntoRhino(allThatJavascript, schema.toString() + ".js");
         }
diff --git a/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2js/processor/JavaToJSProcessor.java b/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2js/processor/JavaToJSProcessor.java
index 1c74a93a45..5ee1854cf8 100644
--- a/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2js/processor/JavaToJSProcessor.java
+++ b/tools/javato/ws/src/main/java/org/apache/cxf/tools/java2js/processor/JavaToJSProcessor.java
@@ -124,7 +124,7 @@ public class JavaToJSProcessor implements Processor {
             for (SchemaInfo schema : schemata) {
                 SchemaJavascriptBuilder jsBuilder = new SchemaJavascriptBuilder(serviceInfo
                     .getXmlSchemaCollection(), prefixManager, nameManager);
-                String allThatJavascript = jsBuilder.generateCodeForSchema(schema);
+                String allThatJavascript = jsBuilder.generateCodeForSchema(schema.getSchema());
                 writer.append(allThatJavascript);
             }
 
diff --git a/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java b/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java
index 07a2185e1f..eb86ccd495 100644
--- a/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java
+++ b/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java
@@ -29,8 +29,10 @@ import java.io.OutputStreamWriter;
 import java.nio.charset.Charset;
 import java.util.Collection;
 import java.util.Map;
+import java.util.logging.Logger;
 
 import org.apache.cxf.common.i18n.Message;
+import org.apache.cxf.common.logging.LogUtils;
 import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.javascript.BasicNameManager;
 import org.apache.cxf.javascript.JavascriptQueryHandler;
@@ -44,6 +46,7 @@ import org.apache.cxf.tools.common.ToolException;
 import org.apache.cxf.tools.wsdlto.core.WSDLToProcessor;
 
 public class WSDLToJavaScriptProcessor extends WSDLToProcessor {
+    private static final Logger LOG = LogUtils.getL7dLogger(WSDLToJavaScriptProcessor.class);
     private static final Charset UTF8 = Charset.forName("utf-8");
     
     public void process() throws ToolException {
@@ -79,10 +82,11 @@ public class WSDLToJavaScriptProcessor extends WSDLToProcessor {
             BufferedWriter writer = new BufferedWriter(outputStreamWriter);
                 
             for (SchemaInfo schema : schemata) {
+                LOG.fine("Processing schema " + schema.toString());
                 SchemaJavascriptBuilder jsBuilder = 
                     new SchemaJavascriptBuilder(serviceInfo
                     .getXmlSchemaCollection(), prefixManager, nameManager);
-                String allThatJavascript = jsBuilder.generateCodeForSchema(schema);
+                String allThatJavascript = jsBuilder.generateCodeForSchema(schema.getSchema());
                 writer.append(allThatJavascript);
             }
 
