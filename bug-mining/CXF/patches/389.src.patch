diff --git a/common/common/src/main/java/org/apache/cxf/staxutils/CachingXmlEventWriter.java b/common/common/src/main/java/org/apache/cxf/staxutils/CachingXmlEventWriter.java
index c6f74af6e5..7f54829908 100644
--- a/common/common/src/main/java/org/apache/cxf/staxutils/CachingXmlEventWriter.java
+++ b/common/common/src/main/java/org/apache/cxf/staxutils/CachingXmlEventWriter.java
@@ -270,6 +270,9 @@ public class CachingXmlEventWriter implements XMLStreamWriter {
 
         public Iterator getPrefixes(String namespaceURI) {
             String pfx = getPrefix(namespaceURI);
+            if (pfx == null) {
+                return Collections.emptyList().iterator();
+            }
             return Collections.singleton(pfx).iterator();
         }
         
diff --git a/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java b/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java
index ebc4a437ca..07cca5b6f3 100644
--- a/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java
+++ b/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java
@@ -68,6 +68,7 @@ import org.xml.sax.XMLReader;
 import org.apache.cxf.common.classloader.ClassLoaderUtils;
 import org.apache.cxf.common.logging.LogUtils;
 import org.apache.cxf.common.util.StringUtils;
+import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.helpers.DOMUtils;
 import org.apache.cxf.helpers.XMLUtils;
 
@@ -449,9 +450,16 @@ public final class StaxUtils {
 //        System.out.println("STAXUTILS:writeStartElement : node name : " + local +  " namespace URI" + uri);
         boolean writeElementNS = false;
         if (uri != null) {
-            String boundPrefix = writer.getPrefix(uri);
-            if (boundPrefix == null || !prefix.equals(boundPrefix)) {
-                writeElementNS = true;
+            writeElementNS = true;
+            Iterator<String> it = CastUtils.cast(writer.getNamespaceContext().getPrefixes(uri));
+            while (it != null && it.hasNext()) {
+                String s = it.next();
+                if (s == null) {
+                    s = "";
+                }
+                if (s.equals(prefix)) {
+                    writeElementNS = false;
+                }
             }
         }
 
@@ -509,6 +517,20 @@ public final class StaxUtils {
                 writer.writeAttribute(reader.getAttributeNamespace(i), reader.getAttributeLocalName(i),
                                       reader.getAttributeValue(i));
             } else {
+                Iterator<String> it = CastUtils.cast(writer.getNamespaceContext().getPrefixes(ns));
+                boolean writeNs = true;
+                while (it != null && it.hasNext()) {
+                    String s = it.next();
+                    if (s == null) {
+                        s = "";
+                    }
+                    if (s.equals(nsPrefix)) {
+                        writeNs = false;
+                    }
+                }
+                if (writeNs) {
+                    writer.writeNamespace(nsPrefix, ns);
+                }
                 writer.writeAttribute(reader.getAttributePrefix(i), reader.getAttributeNamespace(i), reader
                     .getAttributeLocalName(i), reader.getAttributeValue(i));
             }
diff --git a/common/common/src/test/java/org/apache/cxf/staxutils/StaxUtilsTest.java b/common/common/src/test/java/org/apache/cxf/staxutils/StaxUtilsTest.java
index e621258b00..d7a128b57e 100644
--- a/common/common/src/test/java/org/apache/cxf/staxutils/StaxUtilsTest.java
+++ b/common/common/src/test/java/org/apache/cxf/staxutils/StaxUtilsTest.java
@@ -28,7 +28,9 @@ import javax.xml.stream.XMLStreamWriter;
 import javax.xml.transform.Source;
 import javax.xml.transform.dom.DOMSource;
 
+import org.w3c.dom.Attr;
 import org.w3c.dom.Document;
+import org.w3c.dom.Element;
 
 import org.xml.sax.InputSource;
 
@@ -111,6 +113,22 @@ public class StaxUtilsTest extends Assert {
         assertEquals(input, output);
     }
     
+    @Test
+    public void testCXF2468() throws Exception {
+        Document doc = XMLUtils.newDocument();
+        doc.appendChild(doc.createElementNS("http://blah.org/", "blah"));
+        Element foo = doc.createElementNS("http://blah.org/", "foo");
+        Attr attr = doc.createAttributeNS("http://www.w3.org/2001/XMLSchema-instance", "xsi:nil");
+        attr.setValue("true");
+        foo.setAttributeNodeNS(attr);
+        doc.getDocumentElement().appendChild(foo);
+        XMLStreamReader sreader = StaxUtils.createXMLStreamReader(doc);
+        StringWriter sw = new StringWriter();
+        XMLStreamWriter swriter = StaxUtils.createXMLStreamWriter(sw);
+        StaxUtils.copy(sreader, swriter, true);
+        swriter.flush();
+        assertTrue("No xsi namespace: " + sw.toString(), sw.toString().contains("XMLSchema-instance"));
+    }
     
     @Test
     public void testNonNamespaceAwareParser() throws Exception {
