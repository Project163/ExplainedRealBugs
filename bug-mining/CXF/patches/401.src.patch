diff --git a/rt/core/src/main/java/org/apache/cxf/service/factory/AbstractServiceFactoryBean.java b/rt/core/src/main/java/org/apache/cxf/service/factory/AbstractServiceFactoryBean.java
index 52c5bc79f4..3b50dc287f 100644
--- a/rt/core/src/main/java/org/apache/cxf/service/factory/AbstractServiceFactoryBean.java
+++ b/rt/core/src/main/java/org/apache/cxf/service/factory/AbstractServiceFactoryBean.java
@@ -32,6 +32,8 @@ import org.apache.cxf.interceptor.ServiceInvokerInterceptor;
 import org.apache.cxf.service.Service;
 
 public abstract class AbstractServiceFactoryBean {
+    protected boolean dataBindingSet;
+
     private Bus bus;
     private DataBinding dataBinding;
     private Service service;
@@ -94,6 +96,7 @@ public abstract class AbstractServiceFactoryBean {
 
     public void setDataBinding(DataBinding dataBinding) {
         this.dataBinding = dataBinding;
+        this.dataBindingSet = dataBinding != null;
     }
 
     public Service getService() {
diff --git a/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java
index 78b8d66b8c..5d556f3e58 100644
--- a/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java
+++ b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/ServiceImpl.java
@@ -69,6 +69,7 @@ import org.apache.cxf.endpoint.Endpoint;
 import org.apache.cxf.endpoint.EndpointException;
 import org.apache.cxf.endpoint.ServiceContractResolverRegistry;
 import org.apache.cxf.feature.AbstractFeature;
+import org.apache.cxf.frontend.ClientProxy;
 import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.jaxb.JAXBDataBinding;
 import org.apache.cxf.jaxws.binding.soap.JaxWsSoapBindingConfiguration;
@@ -451,7 +452,7 @@ public class ServiceImpl extends ServiceDelegate {
         configureObject(service);
                 
         // Configure the JaxWsEndpoitnImpl
-        JaxWsEndpointImpl jaxwsEndpoint = (JaxWsEndpointImpl) clientFac.getClient().getEndpoint();
+        JaxWsEndpointImpl jaxwsEndpoint = (JaxWsEndpointImpl) ClientProxy.getClient(obj).getEndpoint();
         configureObject(jaxwsEndpoint);  
         List<Handler> hc = jaxwsEndpoint.getJaxwsBinding().getHandlerChain();
         
diff --git a/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java
index b24f31ff32..859023f842 100644
--- a/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java
+++ b/rt/frontend/jaxws/src/main/java/org/apache/cxf/jaxws/support/JaxWsServiceFactoryBean.java
@@ -95,8 +95,9 @@ public class JaxWsServiceFactoryBean extends ReflectionServiceFactoryBean {
 
     private JaxWsImplementorInfo implInfo;
 
+    private List<WebServiceFeature> setWsFeatures;
     private List<WebServiceFeature> wsFeatures;
-
+    
     private boolean wrapperBeanGenerated;
     private Set<Class<?>> wrapperClasses;
     
@@ -117,6 +118,13 @@ public class JaxWsServiceFactoryBean extends ReflectionServiceFactoryBean {
         this.serviceClass = implInfo.getEndpointClass();
         loadWSFeatureAnnotation(implInfo.getSEIClass(), implInfo.getImplementorClass());
     }
+    
+    @Override
+    public void reset() {
+        super.reset();
+        wrapperBeanGenerated = false;
+        wrapperClasses = null;
+    }
 
     private void initSchemaLocations() {
         this.schemaLocationMapping.put(JAXWSAConstants.NS_WSA, 
@@ -157,6 +165,11 @@ public class JaxWsServiceFactoryBean extends ReflectionServiceFactoryBean {
 
         if (features.size() > 0) {
             wsFeatures = features;
+            if (setWsFeatures != null) {
+                wsFeatures.addAll(setWsFeatures);
+            }
+        } else {
+            wsFeatures = setWsFeatures;
         }
     }
 
@@ -434,11 +447,14 @@ public class JaxWsServiceFactoryBean extends ReflectionServiceFactoryBean {
     }
 
     public List<WebServiceFeature> getWsFeatures() {
-        return wsFeatures;
+        return setWsFeatures;
     }
 
-    public void setWsFeatures(List<WebServiceFeature> wsFeatures) {
-        this.wsFeatures = wsFeatures;
+    public void setWsFeatures(List<WebServiceFeature> swsFeatures) {
+        this.setWsFeatures = swsFeatures;
+        if (wsFeatures == null) {
+            wsFeatures = setWsFeatures;
+        }
     }
 
     private FaultInfo getFaultInfo(final OperationInfo operation, final Class expClass) {
diff --git a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/AbstractJaxWsTest.java b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/AbstractJaxWsTest.java
index 894b76930d..49b29d9d7f 100644
--- a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/AbstractJaxWsTest.java
+++ b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/AbstractJaxWsTest.java
@@ -18,6 +18,9 @@
  */
 package org.apache.cxf.jaxws;
 
+import java.util.Arrays;
+import java.util.HashSet;
+
 import org.apache.cxf.BusFactory;
 import org.apache.cxf.binding.BindingFactoryManager;
 import org.apache.cxf.binding.soap.SoapBindingConstants;
@@ -66,6 +69,7 @@ public abstract class AbstractJaxWsTest extends AbstractCXFTest {
         dfm.registerDestinationFactory("http://cxf.apache.org/transports/local", soapDF);
         
         localTransport = new LocalTransportFactory();
+        localTransport.setUriPrefixes(new HashSet<String>(Arrays.asList("http", "local")));
         dfm.registerDestinationFactory("http://schemas.xmlsoap.org/soap/http", localTransport);
         dfm.registerDestinationFactory("http://schemas.xmlsoap.org/wsdl/soap/http", localTransport);
         dfm.registerDestinationFactory("http://cxf.apache.org/bindings/xformat", localTransport);
diff --git a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java
index 9f697c3ba9..796b6994d7 100644
--- a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java
+++ b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/CodeFirstTest.java
@@ -206,14 +206,14 @@ public class CodeFirstTest extends AbstractJaxWsTest {
     public void testRpcClient() throws Exception {
         SayHiImpl serviceImpl = new SayHiImpl();
         EndpointImpl ep = new EndpointImpl(getBus(), serviceImpl, (String) null);
-        ep.publish("http://localhost:9090/hello");
+        ep.publish("local://localhost:9090/hello");
         
         QName serviceName = new QName("http://mynamespace.com/", "SayHiService");
         QName portName = new QName("http://mynamespace.com/", "HelloPort");
         
         // need to set the same bus with service , so use the ServiceImpl
         ServiceImpl service = new ServiceImpl(getBus(), (URL)null, serviceName, null);
-        service.addPort(portName, "http://schemas.xmlsoap.org/soap/", "http://localhost:9090/hello"); 
+        service.addPort(portName, "http://schemas.xmlsoap.org/soap/", "local://localhost:9090/hello"); 
         
         SayHi proxy = service.getPort(portName, SayHi.class);
         long res = proxy.sayHi(3);
@@ -274,7 +274,7 @@ public class CodeFirstTest extends AbstractJaxWsTest {
     @Test
     public void testNamespacedWebParamsBare() throws Exception {
         JaxWsServerFactoryBean sf = new JaxWsServerFactoryBean();
-        sf.setAddress("http://localhost/test");
+        sf.setAddress("local://localhost/test");
         sf.setServiceClass(FooServiceImpl.class);
         
         Server server = sf.create();
@@ -291,7 +291,7 @@ public class CodeFirstTest extends AbstractJaxWsTest {
     @Test
     public void testNamespacedWebParamsWrapped() throws Exception {
         JaxWsServerFactoryBean sf = new JaxWsServerFactoryBean();
-        sf.setAddress("http://localhost/test");
+        sf.setAddress("local://localhost/test");
         sf.setServiceBean(new FooServiceImpl());
         sf.getServiceFactory().setWrapped(true);
         
diff --git a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxWsClientTest.java b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxWsClientTest.java
index 1f0049af39..8c3445d9a2 100644
--- a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxWsClientTest.java
+++ b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/JaxWsClientTest.java
@@ -29,7 +29,9 @@ import javax.xml.namespace.QName;
 import javax.xml.ws.BindingProvider;
 import javax.xml.ws.WebServiceException;
 
+import org.apache.cxf.endpoint.Client;
 import org.apache.cxf.endpoint.ClientImpl;
+import org.apache.cxf.frontend.ClientProxy;
 import org.apache.cxf.interceptor.Fault;
 import org.apache.cxf.jaxws.support.JaxWsEndpointImpl;
 import org.apache.cxf.jaxws.support.JaxWsServiceFactoryBean;
@@ -215,6 +217,34 @@ public class JaxWsClientTest extends AbstractJaxWsTest {
 
     }
 
+    @Test
+    public void testClientProxyFactory() {
+        JaxWsProxyFactoryBean cf = new JaxWsProxyFactoryBean(); 
+        cf.setAddress("http://localhost:9000/test");
+        cf.setServiceClass(Greeter.class);
+        Greeter greeter = (Greeter) cf.create();
+        Greeter greeter2 = (Greeter) cf.create();
+        Greeter greeter3 = (Greeter) cf.create();
+        
+        Client c = ClientProxy.getClient(greeter);
+        Client c2 = ClientProxy.getClient(greeter2);
+        Client c3 = ClientProxy.getClient(greeter3);
+        assertNotSame(c, c2);
+        assertNotSame(c, c3);
+        assertNotSame(c3, c2);
+        assertNotSame(c.getEndpoint(), c2.getEndpoint());
+        assertNotSame(c.getEndpoint(), c3.getEndpoint());
+        assertNotSame(c3.getEndpoint(), c2.getEndpoint());
+        
+        ((BindingProvider)greeter).getRequestContext().put("test", "manny"); 
+        ((BindingProvider)greeter2).getRequestContext().put("test", "moe"); 
+        ((BindingProvider)greeter3).getRequestContext().put("test", "jack");
+        
+        assertEquals("manny", ((BindingProvider)greeter).getRequestContext().get("test"));
+        assertEquals("moe", ((BindingProvider)greeter2).getRequestContext().get("test"));
+        assertEquals("jack", ((BindingProvider)greeter3).getRequestContext().get("test"));
+    }
+    
     
     public static class FaultThrower extends AbstractPhaseInterceptor<Message> {
         
diff --git a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/SEIWithJAXBAnnoTest.java b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/SEIWithJAXBAnnoTest.java
index 303ea178de..ff7c6f812c 100644
--- a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/SEIWithJAXBAnnoTest.java
+++ b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/SEIWithJAXBAnnoTest.java
@@ -26,6 +26,7 @@ import java.util.List;
 import javax.xml.ws.Endpoint;
 
 import org.apache.cxf.bus.spring.SpringBusFactory;
+import org.apache.cxf.frontend.ClientProxy;
 import org.apache.cxf.interceptor.LoggingOutInterceptor;
 import org.apache.cxf.jaxws.service.AddNumbers;
 import org.apache.cxf.jaxws.service.AddNumbersImpl;
@@ -33,14 +34,14 @@ import org.junit.Test;
 
 
 public class SEIWithJAXBAnnoTest extends AbstractJaxWsTest {
-    String address = "http://localhost:9000/Hello";
+    String address = "local://localhost:9000/Hello";
 
     
     @Test
     public void testXMLList() throws Exception {
         
         AddNumbersImpl serviceImpl = new AddNumbersImpl();
-        Endpoint.publish("http://localhost:9000/Hello", serviceImpl);
+        Endpoint.publish("local://localhost:9000/Hello", serviceImpl);
         
         
      
@@ -53,7 +54,7 @@ public class SEIWithJAXBAnnoTest extends AbstractJaxWsTest {
         AddNumbers proxy = (AddNumbers)factory.create();
         StringWriter strWriter = new StringWriter();
         LoggingOutInterceptor log = new LoggingOutInterceptor(new PrintWriter(strWriter));
-        factory.getClientFactoryBean().getClient().getOutInterceptors().add(log);
+        ClientProxy.getClient(proxy).getOutInterceptors().add(log);
         
         List<String> args = new ArrayList<String>();
         args.add("str1");
diff --git a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/service/AnnotationInterceptorTest.java b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/service/AnnotationInterceptorTest.java
index 0c6d51a39b..9a0043168b 100644
--- a/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/service/AnnotationInterceptorTest.java
+++ b/rt/frontend/jaxws/src/test/java/org/apache/cxf/jaxws/service/AnnotationInterceptorTest.java
@@ -45,11 +45,11 @@ public class AnnotationInterceptorTest extends AbstractJaxWsTest {
     @Before
     public void setUp() {
         fb = new ServerFactoryBean();
-        fb.setAddress("http://localhost");
+        fb.setAddress("local://localhost");
         fb.setBus(getBus());
         
         jfb = new JaxWsServerFactoryBean();
-        jfb.setAddress("http://localhost");
+        jfb.setAddress("local://localhost");
         jfb.setBus(getBus());
     }
     
diff --git a/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ClientFactoryBean.java b/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ClientFactoryBean.java
index 64912bcb3e..3ba5c0c8ff 100644
--- a/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ClientFactoryBean.java
+++ b/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ClientFactoryBean.java
@@ -22,19 +22,16 @@ import java.util.Map;
 
 import org.apache.cxf.BusException;
 import org.apache.cxf.configuration.security.AuthorizationPolicy;
-import org.apache.cxf.databinding.DataBinding;
 import org.apache.cxf.endpoint.Client;
 import org.apache.cxf.endpoint.ClientImpl;
 import org.apache.cxf.endpoint.Endpoint;
 import org.apache.cxf.endpoint.EndpointException;
 import org.apache.cxf.feature.AbstractFeature;
-import org.apache.cxf.jaxb.JAXBDataBinding;
 import org.apache.cxf.service.factory.FactoryBeanListener;
 import org.apache.cxf.service.factory.ReflectionServiceFactoryBean;
 import org.apache.cxf.service.factory.ServiceConstructionException;
 
 public class ClientFactoryBean extends AbstractWSDLBasedEndpointFactory {
-    private Client client;
 
     public ClientFactoryBean() {
         this(new ReflectionServiceFactoryBean());
@@ -44,31 +41,34 @@ public class ClientFactoryBean extends AbstractWSDLBasedEndpointFactory {
     }
 
     public Client create() {
-
-        if (client != null) {
-            return client;
+        getServiceFactory().reset();
+        if (getServiceFactory().getProperties() == null) {
+            getServiceFactory().setProperties(properties);
+        } else if (properties != null) {
+            getServiceFactory().getProperties().putAll(properties);
         }
-        applyExtraClass();
+        Client client = null;
         try {
             Endpoint ep = createEndpoint();
             applyProperties(ep);
-            createClient(ep);
+            client = createClient(ep);
             initializeAnnotationInterceptors(ep, getServiceClass());
         } catch (EndpointException e) {
             throw new ServiceConstructionException(e);
         } catch (BusException e) {
             throw new ServiceConstructionException(e);
         }
-        applyFeatures();
+        applyFeatures(client);
         return client;
     }
 
-    protected void createClient(Endpoint ep) {
-        client = new ClientImpl(getBus(), ep, getConduitSelector());
+    protected Client createClient(Endpoint ep) {
+        Client client = new ClientImpl(getBus(), ep, getConduitSelector());
         this.getServiceFactory().sendEvent(FactoryBeanListener.Event.CLIENT_CREATED, client, ep);
+        return client;
     }
 
-    protected void applyFeatures() {
+    protected void applyFeatures(Client client) {
         if (getFeatures() != null) {
             for (AbstractFeature feature : getFeatures()) {
                 feature.initialize(client, getBus());
@@ -76,18 +76,6 @@ public class ClientFactoryBean extends AbstractWSDLBasedEndpointFactory {
         }
     }
 
-    protected void applyExtraClass() {
-        Map props = this.getProperties();
-        if (props != null && props.get("jaxb.additionalContextClasses") != null) {
-            Class[] extraClass = (Class[])this.getProperties().get("jaxb.additionalContextClasses");
-            DataBinding dataBinding = getServiceFactory().getDataBinding();
-            if (dataBinding instanceof JAXBDataBinding) {
-                ((JAXBDataBinding)dataBinding).setExtraClass(extraClass);
-            }
-        }
-    }
-
-
     protected void applyProperties(Endpoint ep) {
         //Apply the AuthorizationPolicy to the endpointInfo
         Map props = this.getProperties();
@@ -97,11 +85,4 @@ public class ClientFactoryBean extends AbstractWSDLBasedEndpointFactory {
         }
     }
 
-    public Client getClient() {
-        return client;
-    }
-
-    public void setClient(Client client) {
-        this.client = client;
-    }
 }
diff --git a/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ServerFactoryBean.java b/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ServerFactoryBean.java
index 52fdd16f05..8f931bb828 100644
--- a/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ServerFactoryBean.java
+++ b/rt/frontend/simple/src/main/java/org/apache/cxf/frontend/ServerFactoryBean.java
@@ -19,30 +19,19 @@
 package org.apache.cxf.frontend;
 
 import java.io.IOException;
-import java.net.URL;
-import java.util.ArrayList;
 import java.util.List;
 import java.util.Map;
-import java.util.logging.Logger;
 
-import javax.xml.transform.dom.DOMSource;
-import org.w3c.dom.Document;
 
 import org.apache.cxf.BusException;
-import org.apache.cxf.common.i18n.Message;
-import org.apache.cxf.common.logging.LogUtils;
 import org.apache.cxf.common.util.ClassHelper;
-import org.apache.cxf.databinding.AbstractDataBinding;
 import org.apache.cxf.databinding.DataBinding;
 import org.apache.cxf.endpoint.Endpoint;
 import org.apache.cxf.endpoint.EndpointException;
 import org.apache.cxf.endpoint.Server;
 import org.apache.cxf.endpoint.ServerImpl;
 import org.apache.cxf.feature.AbstractFeature;
-import org.apache.cxf.helpers.DOMUtils;
 import org.apache.cxf.jaxb.JAXBDataBinding;
-import org.apache.cxf.resource.ResourceManager;
-import org.apache.cxf.resource.URIResolver;
 import org.apache.cxf.service.factory.FactoryBeanListener;
 import org.apache.cxf.service.factory.ReflectionServiceFactoryBean;
 import org.apache.cxf.service.factory.ServiceConstructionException;
@@ -83,8 +72,6 @@ import org.apache.cxf.service.invoker.SingletonFactory;
  * </pre>
  */
 public class ServerFactoryBean extends AbstractWSDLBasedEndpointFactory {
-    private static final Logger LOG = LogUtils.getL7dLogger(ServerFactoryBean.class);
-
     private Server server;
     private boolean start = true;
     private Object serviceBean;
@@ -104,7 +91,11 @@ public class ServerFactoryBean extends AbstractWSDLBasedEndpointFactory {
 
     public Server create() {
         try {
-            applyExtraClass();
+            if (getServiceFactory().getProperties() == null) {
+                getServiceFactory().setProperties(getProperties());
+            } else if (getProperties() != null) {
+                getServiceFactory().getProperties().putAll(getProperties());
+            }
             if (serviceBean != null && getServiceClass() == null) {
                 setServiceClass(ClassHelper.getRealClass(serviceBean));
             }
@@ -162,41 +153,7 @@ public class ServerFactoryBean extends AbstractWSDLBasedEndpointFactory {
     @Override
     protected void initializeServiceFactory() {
         super.initializeServiceFactory();
-
-        DataBinding db = getServiceFactory().getDataBinding();
-        if (db instanceof AbstractDataBinding && schemaLocations != null) {
-            ResourceManager rr = getBus().getExtension(ResourceManager.class);
-
-            List<DOMSource> schemas = new ArrayList<DOMSource>();
-            for (String l : schemaLocations) {
-                URL url = rr.resolveResource(l, URL.class);
-
-                if (url == null) {
-                    URIResolver res;
-                    try {
-                        res = new URIResolver(l);
-                    } catch (IOException e) {
-                        throw new ServiceConstructionException(new Message("INVALID_SCHEMA_URL", LOG), e);
-                    }
-
-                    if (!res.isResolved()) {
-                        throw new ServiceConstructionException(new Message("INVALID_SCHEMA_URL", LOG));
-                    }
-                    url = res.getURL();
-                }
-
-                Document d;
-                try {
-                    d = DOMUtils.readXml(url.openStream());
-                } catch (Exception e) {
-                    throw new ServiceConstructionException(
-                        new Message("ERROR_READING_SCHEMA", LOG, l), e);
-                }
-                schemas.add(new DOMSource(d, url.toString()));
-            }
-
-            ((AbstractDataBinding)db).setSchemas(schemas);
-        }
+        getServiceFactory().setSchemaLocations(schemaLocations);
     }
 
     protected void applyFeatures() {
diff --git a/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java b/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java
index 0d372ca8db..15c6d35060 100644
--- a/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java
+++ b/rt/frontend/simple/src/main/java/org/apache/cxf/service/factory/ReflectionServiceFactoryBean.java
@@ -19,6 +19,7 @@
 
 package org.apache.cxf.service.factory;
 
+import java.io.IOException;
 import java.lang.annotation.Annotation;
 import java.lang.reflect.Array;
 import java.lang.reflect.Field;
@@ -51,9 +52,11 @@ import javax.xml.bind.annotation.XmlList;
 import javax.xml.bind.annotation.XmlMimeType;
 import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;
 import javax.xml.namespace.QName;
+import javax.xml.transform.dom.DOMSource;
 
 import org.w3c.dom.DOMError;
 import org.w3c.dom.DOMErrorHandler;
+import org.w3c.dom.Document;
 
 import org.apache.cxf.BusException;
 import org.apache.cxf.binding.BindingFactoryManager;
@@ -66,6 +69,7 @@ import org.apache.cxf.common.util.StringUtils;
 import org.apache.cxf.common.xmlschema.SchemaCollection;
 import org.apache.cxf.common.xmlschema.XmlSchemaUtils;
 import org.apache.cxf.common.xmlschema.XmlSchemaValidationManager;
+import org.apache.cxf.databinding.AbstractDataBinding;
 import org.apache.cxf.databinding.DataBinding;
 import org.apache.cxf.databinding.source.mime.MimeAttribute;
 import org.apache.cxf.databinding.source.mime.MimeSerializer;
@@ -78,12 +82,14 @@ import org.apache.cxf.frontend.FaultInfoException;
 import org.apache.cxf.frontend.MethodDispatcher;
 import org.apache.cxf.frontend.SimpleMethodDispatcher;
 import org.apache.cxf.helpers.CastUtils;
+import org.apache.cxf.helpers.DOMUtils;
 import org.apache.cxf.helpers.MethodComparator;
 import org.apache.cxf.interceptor.Fault;
 import org.apache.cxf.interceptor.FaultOutInterceptor;
 import org.apache.cxf.jaxb.JAXBDataBinding;
 import org.apache.cxf.message.Exchange;
 import org.apache.cxf.resource.ResourceManager;
+import org.apache.cxf.resource.URIResolver;
 import org.apache.cxf.service.Service;
 import org.apache.cxf.service.ServiceImpl;
 import org.apache.cxf.service.ServiceModelSchemaValidator;
@@ -172,6 +178,7 @@ public class ReflectionServiceFactoryBean extends AbstractServiceFactoryBean {
     private Map<Method, Boolean> isRpcCache = new HashMap<Method, Boolean>();
     private String styleCache;
     private Boolean defWrappedCache;
+    private List<String> schemaLocations;
     
     public ReflectionServiceFactoryBean() {
         getServiceConfigurations().add(0, new DefaultServiceConfiguration());
@@ -187,6 +194,9 @@ public class ReflectionServiceFactoryBean extends AbstractServiceFactoryBean {
     
      
     protected DataBinding createDefaultDataBinding() {
+        
+        DataBinding retVal = null;
+        
         if (getServiceClass() != null) {
             org.apache.cxf.annotations.DataBinding db 
                 = getServiceClass().getAnnotation(org.apache.cxf.annotations.DataBinding.class);
@@ -196,18 +206,67 @@ public class ReflectionServiceFactoryBean extends AbstractServiceFactoryBean {
                         return getBus().getExtension(ResourceManager.class).resolveResource(db.ref(),
                                                                                             db.value());
                     }
-                    return db.value().newInstance();
+                    retVal = db.value().newInstance();
                 } catch (Exception e) {
                     LOG.log(Level.WARNING, "Could not create databinding " 
                             + db.value().getName(), e);
                 }
             }
         }
-        return new JAXBDataBinding(getQualifyWrapperSchema());
+        if (retVal == null) {
+            JAXBDataBinding db = new JAXBDataBinding(getQualifyWrapperSchema());
+            Map props = this.getProperties();
+            if (props != null && props.get("jaxb.additionalContextClasses") != null) {
+                Class[] extraClass = (Class[])this.getProperties().get("jaxb.additionalContextClasses");
+                db.setExtraClass(extraClass);
+            }
+            retVal = db;
+        }
+        if (retVal instanceof AbstractDataBinding && schemaLocations != null) {
+            ResourceManager rr = getBus().getExtension(ResourceManager.class);
+
+            List<DOMSource> schemas = new ArrayList<DOMSource>();
+            for (String l : schemaLocations) {
+                URL url = rr.resolveResource(l, URL.class);
+
+                if (url == null) {
+                    URIResolver res;
+                    try {
+                        res = new URIResolver(l);
+                    } catch (IOException e) {
+                        throw new ServiceConstructionException(new Message("INVALID_SCHEMA_URL", LOG), e);
+                    }
+
+                    if (!res.isResolved()) {
+                        throw new ServiceConstructionException(new Message("INVALID_SCHEMA_URL", LOG));
+                    }
+                    url = res.getURL();
+                }
+
+                Document d;
+                try {
+                    d = DOMUtils.readXml(url.openStream());
+                } catch (Exception e) {
+                    throw new ServiceConstructionException(
+                        new Message("ERROR_READING_SCHEMA", LOG, l), e);
+                }
+                schemas.add(new DOMSource(d, url.toString()));
+            }
+
+            ((AbstractDataBinding)retVal).setSchemas(schemas);
+        }
+        return retVal;
     }
-    
+    public void reset() {
+        if (!dataBindingSet) {
+            setDataBinding(null);
+        }
+        setService(null);
+    }
+
     @Override
     public Service create() {
+        reset();
         sendEvent(Event.START_CREATE);
         initializeServiceConfigurations();
 
@@ -239,6 +298,9 @@ public class ReflectionServiceFactoryBean extends AbstractServiceFactoryBean {
         return serv;
     }
 
+
+
+
     /**
      * Code elsewhere in this function will fill in the name of the type of an
      * element but not the reference to the type. This function fills in the
@@ -2409,4 +2471,8 @@ public class ReflectionServiceFactoryBean extends AbstractServiceFactoryBean {
     public void setValidate(boolean validate) {
         this.validate = validate;
     }
+
+    public void setSchemaLocations(List<String> schemaLocations) {
+        this.schemaLocations = schemaLocations;
+    }
 }
diff --git a/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java b/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java
index 4a922ad240..45d6634422 100644
--- a/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java
+++ b/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/RountripTest.java
@@ -22,6 +22,7 @@ import javax.xml.namespace.QName;
 
 import org.apache.cxf.endpoint.ClientImpl;
 import org.apache.cxf.frontend.ClientFactoryBean;
+import org.apache.cxf.frontend.ClientProxy;
 import org.apache.cxf.frontend.ClientProxyFactoryBean;
 import org.apache.cxf.frontend.ServerFactoryBean;
 import org.apache.cxf.interceptor.LoggingInInterceptor;
@@ -53,7 +54,7 @@ public class RountripTest extends AbstractSimpleFrontendTest {
         
         HelloService client = (HelloService) proxyFactory.create();
         
-        ClientImpl c = (ClientImpl) clientBean.getClient();
+        ClientImpl c = (ClientImpl)ClientProxy.getClient(client);
         c.getOutInterceptors().add(new LoggingOutInterceptor());
         c.getInInterceptors().add(new LoggingInInterceptor());
         
diff --git a/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/ServerFactoryTest.java b/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/ServerFactoryTest.java
index b69b23b816..570f86fe7c 100644
--- a/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/ServerFactoryTest.java
+++ b/rt/frontend/simple/src/test/java/org/apache/cxf/service/factory/ServerFactoryTest.java
@@ -24,6 +24,7 @@ import java.util.HashMap;
 import java.util.Map;
 
 import org.apache.cxf.Bus;
+import org.apache.cxf.endpoint.Server;
 import org.apache.cxf.endpoint.ServerImpl;
 import org.apache.cxf.frontend.ServerFactoryBean;
 import org.apache.cxf.jaxb.JAXBDataBinding;
@@ -70,8 +71,9 @@ public class ServerFactoryTest extends AbstractSimpleFrontendTest {
         props.put("jaxb.additionalContextClasses", 
                   new Class[] {GreetMe.class, GreetMeOneWay.class});
         svrBean.setProperties(props);
-        svrBean.create();
-        Class[] extraClass = ((JAXBDataBinding)svrBean.getServiceFactory().getDataBinding()).getExtraClass();
+        Server serv = svrBean.create();
+        Class[] extraClass = ((JAXBDataBinding)serv.getEndpoint().getService()
+                .getDataBinding()).getExtraClass();
         assertEquals(extraClass.length, 2);
         assertEquals(extraClass[0], GreetMe.class);
         assertEquals(extraClass[1], GreetMeOneWay.class);
diff --git a/rt/transports/local/src/main/java/org/apache/cxf/transport/local/LocalTransportFactory.java b/rt/transports/local/src/main/java/org/apache/cxf/transport/local/LocalTransportFactory.java
index 4ae24d18be..da9ef26cb7 100644
--- a/rt/transports/local/src/main/java/org/apache/cxf/transport/local/LocalTransportFactory.java
+++ b/rt/transports/local/src/main/java/org/apache/cxf/transport/local/LocalTransportFactory.java
@@ -64,6 +64,7 @@ public class LocalTransportFactory extends AbstractTransportFactory
 
     private Set<String> messageFilterProperties;
     private Set<String> messageIncludeProperties;
+    private Set<String> uriPrefixes = URI_PREFIXES;
     
     public LocalTransportFactory() {
         super();
@@ -132,7 +133,10 @@ public class LocalTransportFactory extends AbstractTransportFactory
     }
 
     public Set<String> getUriPrefixes() {
-        return URI_PREFIXES;
+        return uriPrefixes;
+    }
+    public void setUriPrefixes(Set<String> s) {
+        uriPrefixes = s;
     }
 
     public Set<String> getMessageFilterProperties() {
