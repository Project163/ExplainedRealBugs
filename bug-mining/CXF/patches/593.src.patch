diff --git a/api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java b/api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java
index 4cb7bc4a24..060ef369a8 100644
--- a/api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java
+++ b/api/src/main/java/org/apache/cxf/transport/TransportURIResolver.java
@@ -61,6 +61,10 @@ public class TransportURIResolver extends ExtendedURIResolver {
     }
     
     public InputSource resolve(String curUri, String baseUri) {
+        
+        // Spaces must be encoded or URI.resolve() will choke
+        curUri = curUri.replace(" ", "%20");
+        
         InputSource is = null;
         URI base;
         try {
diff --git a/rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java b/rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java
index 5cb0d60012..fc206c8c23 100644
--- a/rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java
+++ b/rt/core/src/main/java/org/apache/cxf/transport/http/WSDLQueryHandler.java
@@ -121,7 +121,14 @@ public class WSDLQueryHandler implements StemMatchingQueryHandler {
             }
 
             String wsdl = params.get("wsdl");
+            if (wsdl != null) {
+                wsdl = wsdl.replace("%20", " ");
+            }
+            
             String xsd =  params.get("xsd");
+            if (xsd != null) {
+                xsd = xsd.replace("%20", " ");
+            }
             
             Map<String, Definition> mp = CastUtils.cast((Map)endpointInfo.getService()
                                                         .getProperty(WSDLQueryHandler.class.getName()));
@@ -243,7 +250,7 @@ public class WSDLQueryHandler implements StemMatchingQueryHandler {
         for (Element el : elementList) {
             String sl = el.getAttribute("schemaLocation");
             if (smp.containsKey(sl)) {
-                el.setAttribute("schemaLocation", base + "?xsd=" + sl);
+                el.setAttribute("schemaLocation", base + "?xsd=" + sl.replace(" ", "%20"));
             }
         }
         
@@ -253,7 +260,7 @@ public class WSDLQueryHandler implements StemMatchingQueryHandler {
         for (Element el : elementList) {
             String sl = el.getAttribute("schemaLocation");
             if (smp.containsKey(sl)) {
-                el.setAttribute("schemaLocation", base + "?xsd=" + sl);
+                el.setAttribute("schemaLocation", base + "?xsd=" + sl.replace(" ", "%20"));
             }
         }
         elementList = DOMUtils.findAllElementsByTagNameNS(doc.getDocumentElement(),
@@ -262,7 +269,7 @@ public class WSDLQueryHandler implements StemMatchingQueryHandler {
         for (Element el : elementList) {
             String sl = el.getAttribute("schemaLocation");
             if (smp.containsKey(sl)) {
-                el.setAttribute("schemaLocation", base + "?xsd=" + sl);
+                el.setAttribute("schemaLocation", base + "?xsd=" + sl.replace(" ", "%20"));
             }
         }
         elementList = DOMUtils.findAllElementsByTagNameNS(doc.getDocumentElement(),
@@ -271,7 +278,7 @@ public class WSDLQueryHandler implements StemMatchingQueryHandler {
         for (Element el : elementList) {
             String sl = el.getAttribute("location");
             if (mp.containsKey(sl)) {
-                el.setAttribute("location", base + "?wsdl=" + sl);
+                el.setAttribute("location", base + "?wsdl=" + sl.replace(" ", "%20"));
             }
         }
         
diff --git a/rt/core/src/test/java/org/apache/cxf/wsdl11/WSDLDefinitionBuilderTest.java b/rt/core/src/test/java/org/apache/cxf/wsdl11/WSDLDefinitionBuilderTest.java
index 2da18c250f..67924b6bf5 100644
--- a/rt/core/src/test/java/org/apache/cxf/wsdl11/WSDLDefinitionBuilderTest.java
+++ b/rt/core/src/test/java/org/apache/cxf/wsdl11/WSDLDefinitionBuilderTest.java
@@ -103,4 +103,28 @@ public class WSDLDefinitionBuilderTest extends Assert {
         assertNotNull(part);
         assertEquals(new QName("http://apache.org/hello_world/types", "sayHi"), part.getElementName());
     }    
+    
+    @Test
+    public void testBuildImportedWSDLSpacesInPath() throws Exception {
+        WSDLDefinitionBuilder builder = new WSDLDefinitionBuilder(BusFactory.getDefaultBus());
+        String wsdlUrl = getClass().getResource("/folder with spaces/import_test.wsdl").toString();
+
+        Definition def = builder.build(wsdlUrl);
+        assertNotNull(def);
+        
+        Map services = def.getServices();
+        assertNotNull(services);
+        assertEquals(1, services.size());
+
+        String serviceQName = "urn:S1importS2S3/resources/wsdl/S1importsS2S3Test1";
+        Service service = (Service)services.get(new QName(serviceQName, "S1importsS2S3TestService"));
+        assertNotNull(service);
+        
+        Map ports = service.getPorts();
+        assertNotNull(ports);
+        assertEquals(1, ports.size());
+        Port port = service.getPort("S1importsS2S3TestPort");
+        assertNotNull(port);
+    }
+    
 }
diff --git a/rt/core/src/test/resources/folder with spaces/import_test.wsdl b/rt/core/src/test/resources/folder with spaces/import_test.wsdl
new file mode 100644
index 0000000000..cc0f454b73
--- /dev/null
+++ b/rt/core/src/test/resources/folder with spaces/import_test.wsdl	
@@ -0,0 +1,97 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements. See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership. The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License. You may obtain a copy of the License at
+
+http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied. See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<wsdl:definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
+                  xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="urn:S1importS2S3/resources/wsdl/S1importsS2S3Test1"
+                  xmlns:S1importsS2S3Test="urn:S1importS2S3/resources/wsdl/S1importsS2S3Test1/S1importsS2S3Test/types"
+                  xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
+                  xmlns:xmime="http://www.w3.org/2005/05/xmlmime" targetNamespace="urn:S1importS2S3/resources/wsdl/S1importsS2S3Test1"
+                  name="S1importsS2S3Test1">
+  <wsdl:types>
+    <schema
+       targetNamespace="urn:S1importS2S3/resources/wsdl/S1importsS2S3Test1/S1importsS2S3Test/types"
+       xmlns="http://www.w3.org/2001/XMLSchema" xmlns:prefix0="urn:Schema1_Out"
+       xmlns:prefix="urn:Schema1_In" elementFormDefault="qualified">
+
+      <xsd:import namespace="urn:Schema1_Out"
+                  schemaLocation="../schema/folder with spaces/Schema1_Out.xsd" />
+      <xsd:import namespace="urn:Schema1_In"
+                  schemaLocation="../schema/folder with spaces/Schema1_In.xsd" />d
+
+      <element name="S1importsS2S3Test">
+        <complexType>
+          <sequence>
+            <element name="DefaultInputElem" type="prefix:UseImportedElements_In" />
+          </sequence>
+        </complexType>
+      </element>
+
+      <element name="S1importsS2S3TestResponse">
+        <complexType>
+          <sequence>
+            <element name="DefaultOutputElem" type="prefix0:UseImportedElements_Out" />
+          </sequence>
+        </complexType>
+      </element>
+
+    </schema>
+  </wsdl:types>
+
+  <wsdl:message name="S1importsS2S3TestRequest">
+    <wsdl:part name="in" element="S1importsS2S3Test:S1importsS2S3Test" />
+  </wsdl:message>
+
+  <wsdl:message name="S1importsS2S3TestResponse">
+    <wsdl:part name="out"
+               element="S1importsS2S3Test:S1importsS2S3TestResponse" />
+  </wsdl:message>
+
+
+  <wsdl:portType name="S1importsS2S3TestPortType">
+    <wsdl:operation name="S1importsS2S3Test">
+      <wsdl:input message="tns:S1importsS2S3TestRequest" />
+      <wsdl:output message="tns:S1importsS2S3TestResponse" />
+    </wsdl:operation>
+  </wsdl:portType>
+
+  <wsdl:binding name="S1importsS2S3TestSOAP_11Binding" type="tns:S1importsS2S3TestPortType">
+    <soap:binding style="document"
+                  transport="http://schemas.xmlsoap.org/soap/http" />
+    <wsdl:operation name="S1importsS2S3Test">
+      <soap:operation soapAction="" style="document" />
+      <wsdl:input>
+        <soap:body use="literal" />
+      </wsdl:input>
+      <wsdl:output>
+        <soap:body use="literal" />
+      </wsdl:output>
+
+    </wsdl:operation>
+  </wsdl:binding>
+
+
+  <wsdl:service name="S1importsS2S3TestService">
+    <wsdl:port name="S1importsS2S3TestPort" binding="tns:S1importsS2S3TestSOAP_11Binding">
+      <soap:address location="http://localhost:3580/connect/S1importsS2S3Test" />
+    </wsdl:port>
+  </wsdl:service>
+</wsdl:definitions>
+
diff --git a/rt/core/src/test/resources/schema/folder with spaces/Schema1_In.xsd b/rt/core/src/test/resources/schema/folder with spaces/Schema1_In.xsd
new file mode 100644
index 0000000000..dec0d016d9
--- /dev/null
+++ b/rt/core/src/test/resources/schema/folder with spaces/Schema1_In.xsd	
@@ -0,0 +1,30 @@
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements. See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership. The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License. You may obtain a copy of the License at
+
+http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied. See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:S1_In="urn:Schema1_In" xmlns:UseInt="urn:Schema2_In" xmlns:UseString="urn:Schema3_In" targetNamespace="urn:Schema1_In">
+	<xsd:import schemaLocation="Schema2_In.xsd" namespace="urn:Schema2_In">
+	</xsd:import>
+	<xsd:import schemaLocation="Schema3_In.xsd" namespace="urn:Schema3_In" />
+	<xsd:complexType name="UseImportedElements_In">
+		<xsd:sequence>
+			<xsd:element ref="UseInt:ElementS2_In_Int" />
+			<xsd:element ref="UseString:ElementS3_In_string" />
+		</xsd:sequence>
+	</xsd:complexType>
+</xsd:schema>
\ No newline at end of file
diff --git a/rt/core/src/test/resources/schema/folder with spaces/Schema1_Out.xsd b/rt/core/src/test/resources/schema/folder with spaces/Schema1_Out.xsd
new file mode 100644
index 0000000000..b2425ae8ec
--- /dev/null
+++ b/rt/core/src/test/resources/schema/folder with spaces/Schema1_Out.xsd	
@@ -0,0 +1,30 @@
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements. See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership. The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License. You may obtain a copy of the License at
+
+http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied. See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:S1_In="urn:Schema1_Out" xmlns:UseIntOut="urn:Schema2_Out" xmlns:UseStringOut="urn:Schema3_Out" targetNamespace="urn:Schema1_Out">
+	<xsd:import schemaLocation="Schema2_Out.xsd" namespace="urn:Schema2_Out">
+	</xsd:import>
+	<xsd:import schemaLocation="Schema3_Out.xsd" namespace="urn:Schema3_Out" />
+	<xsd:complexType name="UseImportedElements_Out">
+		<xsd:sequence>
+			<xsd:element ref="UseIntOut:ElementS2_Out_Int" />
+			<xsd:element ref="UseStringOut:ElementS3_Out_string" />
+		</xsd:sequence>
+	</xsd:complexType>
+</xsd:schema>
\ No newline at end of file
diff --git a/rt/core/src/test/resources/schema/folder with spaces/Schema2_In.xsd b/rt/core/src/test/resources/schema/folder with spaces/Schema2_In.xsd
new file mode 100644
index 0000000000..854e488039
--- /dev/null
+++ b/rt/core/src/test/resources/schema/folder with spaces/Schema2_In.xsd	
@@ -0,0 +1,28 @@
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements. See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership. The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License. You may obtain a copy of the License at
+
+http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied. See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:S1_In="urn:Schema2_In" targetNamespace="urn:Schema2_In">
+    <xsd:element name="ElementS2_In_Int">
+        <xsd:complexType>
+            <xsd:sequence>
+                <xsd:element name="S2_In_Int" type="xsd:int" />
+            </xsd:sequence>
+        </xsd:complexType>	
+    </xsd:element>       
+</xsd:schema>
\ No newline at end of file
diff --git a/rt/core/src/test/resources/schema/folder with spaces/Schema2_Out.xsd b/rt/core/src/test/resources/schema/folder with spaces/Schema2_Out.xsd
new file mode 100644
index 0000000000..2ab29cb8fe
--- /dev/null
+++ b/rt/core/src/test/resources/schema/folder with spaces/Schema2_Out.xsd	
@@ -0,0 +1,28 @@
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements. See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership. The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License. You may obtain a copy of the License at
+
+http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied. See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:S1_In="urn:Schema2_Out" targetNamespace="urn:Schema2_Out">
+    <xsd:element name="ElementS2_Out_Int">
+        <xsd:complexType>
+            <xsd:sequence>
+                <xsd:element name="S2_Out_Int" type="xsd:int" />
+            </xsd:sequence>
+        </xsd:complexType>	
+    </xsd:element>       
+</xsd:schema>
\ No newline at end of file
diff --git a/rt/core/src/test/resources/schema/folder with spaces/Schema3_In.xsd b/rt/core/src/test/resources/schema/folder with spaces/Schema3_In.xsd
new file mode 100644
index 0000000000..dcee8f6a09
--- /dev/null
+++ b/rt/core/src/test/resources/schema/folder with spaces/Schema3_In.xsd	
@@ -0,0 +1,28 @@
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements. See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership. The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License. You may obtain a copy of the License at
+
+http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied. See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:S1_In="urn:Schema3_In" targetNamespace="urn:Schema3_In">
+    <xsd:element name="ElementS3_In_string">
+        <xsd:complexType>
+            <xsd:sequence>
+                <xsd:element name="S3_In_string" type="xsd:string" />
+            </xsd:sequence>
+        </xsd:complexType>	
+    </xsd:element>   
+</xsd:schema>
\ No newline at end of file
diff --git a/rt/core/src/test/resources/schema/folder with spaces/Schema3_Out.xsd b/rt/core/src/test/resources/schema/folder with spaces/Schema3_Out.xsd
new file mode 100644
index 0000000000..2ccae3f42d
--- /dev/null
+++ b/rt/core/src/test/resources/schema/folder with spaces/Schema3_Out.xsd	
@@ -0,0 +1,28 @@
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements. See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership. The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License. You may obtain a copy of the License at
+
+http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied. See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+
+<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:S1_In="urn:Schema3_Out" targetNamespace="urn:Schema3_Out">
+    <xsd:element name="ElementS3_Out_string">
+        <xsd:complexType>
+            <xsd:sequence>
+                <xsd:element name="S3_Out_string" type="xsd:string" />
+            </xsd:sequence>
+        </xsd:complexType>	
+    </xsd:element>   
+</xsd:schema>
\ No newline at end of file
