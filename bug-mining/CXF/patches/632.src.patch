diff --git a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/DefaultMessageIdCache.java b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/DefaultMessageIdCache.java
new file mode 100644
index 0000000000..60541428d6
--- /dev/null
+++ b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/DefaultMessageIdCache.java
@@ -0,0 +1,44 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements. See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership. The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied. See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+package org.apache.cxf.ws.addressing;
+
+import java.util.Set;
+
+import org.apache.mina.util.ConcurrentHashSet;
+
+/**
+ * An implementation that uses a simple set to store received message IDs.
+ * Note that this implementation does not make any attempt to flush older
+ * message IDs or to persist the message IDs outside of this instance. 
+ */
+public class DefaultMessageIdCache implements MessageIdCache {
+    
+    /**
+     * The set of message IDs.
+     */
+    private final Set<String> messageIdSet = new ConcurrentHashSet<String>();  
+    
+    public boolean checkUniquenessAndCacheId(String messageId) {
+        return this.messageIdSet.add(messageId);
+    }
+    
+    protected Set<String> getMessageIdSet() {
+        return this.messageIdSet;
+    }
+}
diff --git a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/MAPAggregator.java b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/MAPAggregator.java
index f67ccc3153..854d984ac2 100644
--- a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/MAPAggregator.java
+++ b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/MAPAggregator.java
@@ -28,7 +28,6 @@ import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
 import java.util.ResourceBundle;
-import java.util.concurrent.ConcurrentHashMap;
 import java.util.logging.Level;
 import java.util.logging.Logger;
 
@@ -110,11 +109,9 @@ public class MAPAggregator extends AbstractPhaseInterceptor<Message> {
     };
 
     /**
-     * REVISIT: map usage implies that the *same* interceptor instance 
-     * is used in all chains.
+     * The cache to use for enforcing uniqueness.  Defaults to {@link DefaultMessageIdCache}.
      */
-    protected final Map<String, String> messageIDs = 
-        new ConcurrentHashMap<String, String>();
+    private MessageIdCache messageIdCache = new DefaultMessageIdCache();
     
     private boolean usingAddressingAdvisory = true;
     private boolean addressingRequired;
@@ -185,7 +182,31 @@ public class MAPAggregator extends AbstractPhaseInterceptor<Message> {
         addressingRequired = required;
     }
     
-    
+    /**
+     * Returns the cache used to enforce duplicate message IDs when
+     * {@link #allowDuplicates()} returns {@code false}.
+     *
+     * @return the cache used to enforce duplicate message IDs
+     */
+    public MessageIdCache getMessageIdCache() {
+        return messageIdCache;
+    }
+
+    /**
+     * Sets the cache used to enforce duplicate message IDs when
+     * {@link #allowDuplicates()} returns {@code false}.
+     *
+     * @param messageIdCache the cache to use
+     *
+     * @throws NullPointerException if {@code messageIdCache} is {@code null}
+     */
+    public void setMessageIdCache(MessageIdCache messageIdCache) {
+        if (messageIdCache == null) {
+            throw new NullPointerException("messageIdCache cannot be null.");
+        }
+        this.messageIdCache = messageIdCache;
+    }
+
     /**
      * Invoked for normal processing of inbound and outbound messages.
      *
@@ -1097,8 +1118,7 @@ public class MAPAggregator extends AbstractPhaseInterceptor<Message> {
             if (!allowDuplicates) {
                 AttributedURIType messageID = maps.getMessageID();
                 if (messageID != null
-                    && messageIDs.put(messageID.getValue(), 
-                                      messageID.getValue()) != null) {
+                    && !messageIdCache.checkUniquenessAndCacheId(messageID.getValue())) {
                     LOG.log(Level.WARNING,
                             "DUPLICATE_MESSAGE_ID_MSG",
                             messageID.getValue());
diff --git a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/MessageIdCache.java b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/MessageIdCache.java
new file mode 100644
index 0000000000..9c912dc73e
--- /dev/null
+++ b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/MessageIdCache.java
@@ -0,0 +1,38 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements. See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership. The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied. See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+package org.apache.cxf.ws.addressing;
+
+/**
+ * Interface abstracting various ID caches for enforcement of ID uniqueness.
+ */
+public interface MessageIdCache {
+    
+    /**
+     * Check {@code messageId} for uniqueness against previously
+     * encountered values and cache the ID.  Note that the retention
+     * policy for previously encountered values is implementation specific.
+     * 
+     * @param messageId the message ID to check for uniqueness and cache for
+     *                  future comparison
+     *
+     * @return true if and only if {@code messageId} is not already in the
+     *         cache
+     */
+    boolean checkUniquenessAndCacheId(String messageId);
+}
diff --git a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/WSAddressingFeature.java b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/WSAddressingFeature.java
index 8eb7dbb01b..039be9e4df 100644
--- a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/WSAddressingFeature.java
+++ b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/WSAddressingFeature.java
@@ -69,5 +69,25 @@ public class WSAddressingFeature extends AbstractFeature {
         mapAggregator.setAddressingRequired(required);
     }
     
-    
+    /**
+     * Returns the cache used to enforce duplicate message IDs when
+     * {@link #isAllowDuplicates()} returns {@code false}.
+     *
+     * @return the cache used to enforce duplicate message IDs
+     */
+    public MessageIdCache getMessageIdCache() {
+        return mapAggregator.getMessageIdCache();
+    }
+
+    /**
+     * Sets the cache used to enforce duplicate message IDs when
+     * {@link #isAllowDuplicates()} returns {@code false}.
+     *
+     * @param messageIdCache the cache to use
+     *
+     * @throws NullPointerException if {@code messageIdCache} is {@code null}
+     */
+    public void setMessageIdCache(MessageIdCache messageIdCache) {
+        mapAggregator.setMessageIdCache(messageIdCache);
+    }
 }
diff --git a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/spring/AddressingBeanDefinitionParser.java b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/spring/AddressingBeanDefinitionParser.java
index 9950a9e649..bf1e099d95 100644
--- a/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/spring/AddressingBeanDefinitionParser.java
+++ b/rt/ws/addr/src/main/java/org/apache/cxf/ws/addressing/spring/AddressingBeanDefinitionParser.java
@@ -20,14 +20,13 @@ package org.apache.cxf.ws.addressing.spring;
 
 import org.w3c.dom.Element;
 
+import org.apache.cxf.configuration.spring.AbstractBeanDefinitionParser;
 import org.apache.cxf.ws.addressing.WSAddressingFeature;
-import org.springframework.beans.factory.xml.AbstractSimpleBeanDefinitionParser;
 
-public class AddressingBeanDefinitionParser extends AbstractSimpleBeanDefinitionParser {
+public class AddressingBeanDefinitionParser extends AbstractBeanDefinitionParser {
 
     @Override
     protected Class getBeanClass(Element arg0) {
         return WSAddressingFeature.class;
     }
-
 }
diff --git a/rt/ws/addr/src/main/resources/schemas/ws-addr-conf.xsd b/rt/ws/addr/src/main/resources/schemas/ws-addr-conf.xsd
index 8ff17b99ad..b36840e915 100644
--- a/rt/ws/addr/src/main/resources/schemas/ws-addr-conf.xsd
+++ b/rt/ws/addr/src/main/resources/schemas/ws-addr-conf.xsd
@@ -30,6 +30,7 @@
            <xs:attribute name="allowDuplicates" type="xs:boolean"/>
            <xs:attribute name="usingAddressingAdvisory" type="xs:boolean"/>
            <xs:attribute name="addressingRequired" type="xs:boolean"/>
+           <xs:attribute name="messageIdCache" type="xs:string"/>
         </xs:complexType>
     </xs:element>
     
diff --git a/rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java b/rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java
index 6f8ee17335..03d257c03c 100644
--- a/rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java
+++ b/rt/ws/addr/src/test/java/org/apache/cxf/ws/addressing/MAPAggregatorTest.java
@@ -253,7 +253,7 @@ public class MAPAggregatorTest extends Assert {
 
     @Test(expected = SoapFault.class)
     public void testResponderInboundInvalidMAPs() throws Exception {
-        aggregator.messageIDs.put("urn:uuid:12345", "urn:uuid:12345");
+        aggregator.getMessageIdCache().checkUniquenessAndCacheId("urn:uuid:12345");
         Message message = setUpMessage(false, false, false, false, false, false, true);
         aggregator.setAllowDuplicates(false);
         aggregator.mediate(message, false);
@@ -263,7 +263,7 @@ public class MAPAggregatorTest extends Assert {
 
     @Test(expected = SoapFault.class)
     public void testResponderInboundInvalidMAPsFault() throws Exception {
-        aggregator.messageIDs.put("urn:uuid:12345", "urn:uuid:12345");
+        aggregator.getMessageIdCache().checkUniquenessAndCacheId("urn:uuid:12345");
         Message message = setUpMessage(false, false, false, false, false, false, true);
         aggregator.setAllowDuplicates(false);
         aggregator.mediate(message, true);
@@ -574,7 +574,8 @@ public class MAPAggregatorTest extends Assert {
                 setUpRebase(message, exchange);
             }
         }
-        if (outbound || aggregator.messageIDs.size() > 0) {
+        if (outbound || ((DefaultMessageIdCache) aggregator.getMessageIdCache())
+            .getMessageIdSet().size() > 0) {
             if (!zeroLengthAction) {
                 Method method = SEI.class.getMethod("op", new Class[0]);
                 setUpMethod(message, exchange, method);
diff --git a/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/WSAFeatureXmlTest.java b/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/WSAFeatureXmlTest.java
index 62ec8f02a0..17669b0e8f 100755
--- a/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/WSAFeatureXmlTest.java
+++ b/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/WSAFeatureXmlTest.java
@@ -34,6 +34,7 @@ import org.apache.cxf.jaxws.JaxWsServerFactoryBean;
 import org.apache.cxf.message.Message;
 import org.apache.cxf.test.AbstractCXFTest;
 import org.apache.cxf.testutil.common.TestUtil;
+import org.apache.cxf.ws.addressing.DefaultMessageIdCache;
 import org.apache.cxf.ws.addressing.MAPAggregator;
 import org.apache.cxf.ws.addressing.soap.MAPCodec;
 import org.apache.hello_world_soap_http.Greeter;
@@ -83,15 +84,22 @@ public class WSAFeatureXmlTest extends AbstractCXFTest {
     private void checkAddressInterceptors(List<Interceptor<? extends Message>> interceptors) {
         boolean hasAg = false;
         boolean hasCodec = false;
+        Object cache = null;
         
         for (Interceptor<? extends Message> i : interceptors) {
             if (i instanceof MAPAggregator) {
                 hasAg = true;
+                cache = ((MAPAggregator) i).getMessageIdCache();
             } else if (i instanceof MAPCodec) {
                 hasCodec = true;
             }
         }
+        
+        assertTrue(cache instanceof TestCache);
         assertTrue(hasAg);
         assertTrue(hasCodec);
     }
+    
+    public static class TestCache extends DefaultMessageIdCache {
+    }
 }
diff --git a/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/spring.xml b/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/spring.xml
index c7509a64ed..68be828a68 100755
--- a/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/spring.xml
+++ b/systests/ws-specs/src/test/java/org/apache/cxf/systest/ws/addressing/spring/spring.xml
@@ -30,14 +30,16 @@ http://www.springframework.org/schema/beans http://www.springframework.org/schem
   
   <jaxws:server id="server" abstract="true">
     <jaxws:features>
-      <wsa:addressing allowDuplicates="false"/>
+      <wsa:addressing allowDuplicates="false" messageIdCache="#cache"/>
     </jaxws:features>
   </jaxws:server>
   
   <jaxws:client id="client" abstract="true">
     <jaxws:features>
-      <wsa:addressing allowDuplicates="false"/>
+      <wsa:addressing allowDuplicates="false" messageIdCache="#cache"/>
     </jaxws:features>
   </jaxws:client>  
   
+  <bean id="cache"
+        class="org.apache.cxf.systest.ws.addressing.spring.WSAFeatureXmlTest$TestCache"/>
 </beans>
