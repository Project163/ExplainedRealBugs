diff --git a/common/common/src/main/java/org/apache/cxf/common/xmlschema/XmlSchemaUtils.java b/common/common/src/main/java/org/apache/cxf/common/xmlschema/XmlSchemaUtils.java
index aaa308b523..c8bea937d7 100644
--- a/common/common/src/main/java/org/apache/cxf/common/xmlschema/XmlSchemaUtils.java
+++ b/common/common/src/main/java/org/apache/cxf/common/xmlschema/XmlSchemaUtils.java
@@ -338,8 +338,10 @@ public final class XmlSchemaUtils {
             results.addAll(getContentElements(baseType, collection));
             // and now process our sequence.
             XmlSchemaSequence extSequence = getContentSequence(type);
-            for (int i = 0; i < extSequence.getItems().getCount(); i++) {
-                results.add(extSequence.getItems().getItem(i));
+            if (extSequence != null) {
+                for (int i = 0; i < extSequence.getItems().getCount(); i++) {
+                    results.add(extSequence.getItems().getItem(i));
+                }
             }
             return results;
         } else {
diff --git a/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java b/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java
index 25d032edba..fbb5439aa9 100755
--- a/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java
+++ b/rt/javascript/src/main/java/org/apache/cxf/javascript/types/SchemaJavascriptBuilder.java
@@ -29,6 +29,7 @@ import org.apache.cxf.common.i18n.Message;
 import org.apache.cxf.common.logging.LogUtils;
 import org.apache.cxf.common.util.StringUtils;
 import org.apache.cxf.common.xmlschema.SchemaCollection;
+import org.apache.cxf.common.xmlschema.XmlSchemaConstants;
 import org.apache.cxf.common.xmlschema.XmlSchemaUtils;
 import org.apache.cxf.javascript.AttributeInfo;
 import org.apache.cxf.javascript.ItemInfo;
@@ -41,6 +42,7 @@ import org.apache.ws.commons.schema.XmlSchema;
 import org.apache.ws.commons.schema.XmlSchemaAnnotated;
 import org.apache.ws.commons.schema.XmlSchemaAny;
 import org.apache.ws.commons.schema.XmlSchemaAttribute;
+import org.apache.ws.commons.schema.XmlSchemaCollection;
 import org.apache.ws.commons.schema.XmlSchemaComplexType;
 import org.apache.ws.commons.schema.XmlSchemaElement;
 import org.apache.ws.commons.schema.XmlSchemaObject;
@@ -77,6 +79,16 @@ public class SchemaJavascriptBuilder {
         this.nameManager = nameManager;
         this.prefixAccumulator = prefixAccumulator;
     }
+    
+    public String generateCodeForSchemaCollection(XmlSchemaCollection collection) {
+        StringBuilder accumulatedCode = new StringBuilder();
+        for (XmlSchema schema : collection.getXmlSchemas()) {
+            if (!XmlSchemaConstants.XSD_NAMESPACE_URI.equals(schema.getTargetNamespace())) {
+                accumulatedCode.append(generateCodeForSchema(schema));
+            }
+        }
+        return accumulatedCode.toString();
+    }
 
     public String generateCodeForSchema(XmlSchema schema) {
         xmlSchema = schema;
diff --git a/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java b/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java
index eb86ccd495..52bdc6ca85 100644
--- a/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java
+++ b/tools/wsdlto/frontend/javascript/src/main/java/org/apache/cxf/tools/wsdlto/javascript/WSDLToJavaScriptProcessor.java
@@ -27,7 +27,6 @@ import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.OutputStreamWriter;
 import java.nio.charset.Charset;
-import java.util.Collection;
 import java.util.Map;
 import java.util.logging.Logger;
 
@@ -39,11 +38,11 @@ import org.apache.cxf.javascript.JavascriptQueryHandler;
 import org.apache.cxf.javascript.NamespacePrefixAccumulator;
 import org.apache.cxf.javascript.service.ServiceJavascriptBuilder;
 import org.apache.cxf.javascript.types.SchemaJavascriptBuilder;
-import org.apache.cxf.service.model.SchemaInfo;
 import org.apache.cxf.service.model.ServiceInfo;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolException;
 import org.apache.cxf.tools.wsdlto.core.WSDLToProcessor;
+import org.apache.ws.commons.schema.XmlSchemaCollection;
 
 public class WSDLToJavaScriptProcessor extends WSDLToProcessor {
     private static final Logger LOG = LogUtils.getL7dLogger(WSDLToJavaScriptProcessor.class);
@@ -70,7 +69,6 @@ public class WSDLToJavaScriptProcessor extends WSDLToProcessor {
             }
         }
         
-        Collection<SchemaInfo> schemata = serviceInfo.getSchemas();
         try {
             FileOutputStream fileOutputStream = new FileOutputStream(jsFile);
             if (null != context.get(ToolConstants.CFG_JAVASCRIPT_UTILS)) {
@@ -80,15 +78,13 @@ public class WSDLToJavaScriptProcessor extends WSDLToProcessor {
             
             OutputStreamWriter outputStreamWriter = new OutputStreamWriter(fileOutputStream, UTF8);
             BufferedWriter writer = new BufferedWriter(outputStreamWriter);
-                
-            for (SchemaInfo schema : schemata) {
-                LOG.fine("Processing schema " + schema.toString());
-                SchemaJavascriptBuilder jsBuilder = 
-                    new SchemaJavascriptBuilder(serviceInfo
-                    .getXmlSchemaCollection(), prefixManager, nameManager);
-                String allThatJavascript = jsBuilder.generateCodeForSchema(schema.getSchema());
-                writer.append(allThatJavascript);
-            }
+            
+            XmlSchemaCollection collection = serviceInfo.getXmlSchemaCollection().getXmlSchemaCollection();
+            SchemaJavascriptBuilder jsBuilder = 
+                new SchemaJavascriptBuilder(serviceInfo
+                .getXmlSchemaCollection(), prefixManager, nameManager);
+            String jsForSchemas = jsBuilder.generateCodeForSchemaCollection(collection); 
+            writer.append(jsForSchemas);
 
             ServiceJavascriptBuilder serviceBuilder = new ServiceJavascriptBuilder(serviceInfo, 
                                                                                    null,
