diff --git a/tools/corba/src/main/generated/org/apache/cxf/tools/corba/processors/idl/IDLLexer.java b/tools/corba/src/main/generated/org/apache/cxf/tools/corba/processors/idl/IDLLexer.java
index 624cb405ff..aab7339d67 100644
--- a/tools/corba/src/main/generated/org/apache/cxf/tools/corba/processors/idl/IDLLexer.java
+++ b/tools/corba/src/main/generated/org/apache/cxf/tools/corba/processors/idl/IDLLexer.java
@@ -348,7 +348,6 @@ tryAgain:
 				}
 				if ( _returnToken==null ) continue tryAgain; // found SKIP token
 				_ttype = _returnToken.getType();
-				_ttype = testLiteralsTable(_ttype);
 				_returnToken.setType(_ttype);
 				return _returnToken;
 			}
diff --git a/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ExceptionVisitor.java b/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ExceptionVisitor.java
index d6e63a56fb..24f56437c6 100644
--- a/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ExceptionVisitor.java
+++ b/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/ExceptionVisitor.java
@@ -99,7 +99,7 @@ public class ExceptionVisitor extends VisitorBase {
         // exception members
         AST memberTypeNode = identifierNode.getNextSibling();
         while (memberTypeNode != null) {
-            AST memberNode = memberTypeNode.getNextSibling();
+            AST memberNode = TypesUtils.getCorbaTypeNameNode(memberTypeNode);
 
             TypesVisitor visitor = new TypesVisitor(exceptionScope,
                                                     definition,
diff --git a/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/idl.g b/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/idl.g
index cc2f65d8f9..174c94abd5 100644
--- a/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/idl.g
+++ b/tools/corba/src/main/java/org/apache/cxf/tools/corba/processors/idl/idl.g
@@ -954,6 +954,7 @@ options {
 	exportVocab=IDL;
 	charVocabulary='\u0000'..'\uFFFE';
 	k=4;
+	testLiterals=false;
 }
 
 SEMI
diff --git a/tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java b/tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java
index 59fbd643d0..9f1c34fa18 100644
--- a/tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java
+++ b/tools/corba/src/test/java/org/apache/cxf/tools/corba/IDLToWSDLTest.java
@@ -435,4 +435,39 @@ public class IDLToWSDLTest extends ToolTestBase {
         String s = StaxUtils.toString(doc.getDocumentElement());
         assertTrue(s.contains("name=\"myStruct\""));
     }
+
+    public void testCXF5340() throws Exception {
+        File input = new File(getClass().getResource("/idl/CXF5340.idl").toURI());
+        String[] args = new String[] {
+            "-o", output.toString(),
+            "-verbose", "-qualified",
+            input.toString()
+        };
+        IDLToWSDL.run(args);
+        File fs = new File(output, "CXF5340.wsdl");
+        assertTrue(fs.getName() + " was not created.", fs.exists());
+
+        String corbaNs = "http://cxf.apache.org/bindings/corba";
+        Document doc = StaxUtils.read(new FileInputStream(fs));
+
+        // const with value "local"
+        NodeList nl = doc.getDocumentElement().getElementsByTagNameNS(corbaNs, "const");
+        assertEquals(1, nl.getLength());
+        Element c = (Element)nl.item(0);
+        assertEquals("repro.NOT_CONN_LOCAL", c.getAttribute("name"));
+        assertEquals("local", c.getAttribute("value"));
+
+        // unsigned long case
+        nl = doc.getDocumentElement().getElementsByTagNameNS(corbaNs, "exception");
+        assertEquals(1, nl.getLength());
+        Element exception = (Element)nl.item(0);
+        nl = exception.getElementsByTagNameNS(corbaNs, "member");
+        assertEquals(2, nl.getLength());
+        Element number = (Element)nl.item(0);
+        assertEquals("ulong", number.getAttribute("idltype").split(":")[1]);
+        assertEquals("m_number", number.getAttribute("name"));
+        Element message = (Element)nl.item(1);
+        assertEquals("string", message.getAttribute("idltype").split(":")[1]);
+        assertEquals("m_message", message.getAttribute("name"));
+    }
 }
diff --git a/tools/corba/src/test/resources/idl/CXF5340.idl b/tools/corba/src/test/resources/idl/CXF5340.idl
new file mode 100644
index 0000000000..7d331f020f
--- /dev/null
+++ b/tools/corba/src/test/resources/idl/CXF5340.idl
@@ -0,0 +1,26 @@
+module repro {
+
+	const string NOT_CONN_LOCAL = "local";
+
+	// Exceptions of this type may be thrown by the following interfaces
+	exception msgError {
+		unsigned long	m_number;		// error number
+		string			m_message;		// error text
+	};
+
+	enum Reply {
+			positive	// i.e. Ok or Yes
+		,	negative	// i.e. No or Cancel
+		,	_dont_use_3	// don't use, align to hbMsg.h
+		,	_dont_use_4	// don't use, align to hbMsg.h
+		,	_dont_use_5	// don't use, align to hbMsg.h
+		,	errTimeout	// i.e. there was a timeout in a timed request
+		,	errError	// i.e. there was an error during the request
+		,	cancelled	// i.e. some person or some process cancelled the request
+	};
+
+	interface Service {
+		Reply getFirst( in Reply rep, out Reply reply ) raises (msgError);
+	};
+
+};
