diff --git a/systests/transports/src/test/java/org/apache/cxf/systest/servlet/CXFServletTest.java b/systests/transports/src/test/java/org/apache/cxf/systest/servlet/CXFServletTest.java
index d3c7cd7775..75fb33321a 100644
--- a/systests/transports/src/test/java/org/apache/cxf/systest/servlet/CXFServletTest.java
+++ b/systests/transports/src/test/java/org/apache/cxf/systest/servlet/CXFServletTest.java
@@ -19,10 +19,14 @@
 package org.apache.cxf.systest.servlet;
 
 
+
 import java.util.HashSet;
 import java.util.Set;
 
 import javax.jws.WebService;
+import javax.wsdl.factory.WSDLFactory;
+import javax.wsdl.xml.WSDLReader;
+import javax.xml.namespace.QName;
 import javax.xml.ws.Endpoint;
 import javax.xml.ws.soap.SOAPBinding;
 
@@ -39,6 +43,7 @@ import org.apache.cxf.Bus;
 import org.apache.cxf.BusException;
 import org.apache.cxf.BusFactory;
 import org.apache.cxf.helpers.DOMUtils;
+import org.apache.cxf.helpers.XMLUtils;
 import org.apache.hello_world_soap_http.BaseGreeterImpl;
 
 import org.junit.Before;
@@ -47,6 +52,9 @@ import org.junit.Test;
 
 public class CXFServletTest extends AbstractServletTest {
     
+    public static final QName SERVICE_NAME = new QName("http://apache.org/hello_world_soap_http", "SOAPService");
+   
+    
     
     @Before
     public void setUp() throws Exception {
@@ -97,7 +105,7 @@ public class CXFServletTest extends AbstractServletTest {
         
         
         WebLink[] links = res.getLinks();
-        assertEquals("Wrong number of service links", 4, links.length);
+        assertEquals("Wrong number of service links", 6, links.length);
         
         Set<String> links2 = new HashSet<String>();
         for (WebLink l : links) {
@@ -118,7 +126,7 @@ public class CXFServletTest extends AbstractServletTest {
             links2.add(l.getURLString());
         }
         
-        assertEquals("Wrong number of service links", 4, links.length);
+        assertEquals("Wrong number of service links", 6, links.length);
         assertTrue(links2.contains(CONTEXT_URL + "/services/greeter?wsdl"));       
         assertTrue(links2.contains(CONTEXT_URL + "/services/greeter2?wsdl")); 
         assertTrue(links2.contains("http://cxf.apache.org/MyGreeter?wsdl")); 
@@ -178,10 +186,36 @@ public class CXFServletTest extends AbstractServletTest {
         assertEquals("text/xml", res.getContentType());
         Document doc = DOMUtils.readXml(res.getInputStream());
         assertNotNull(doc);
+        XMLUtils.printDOM(doc);
         
         assertValid("//wsdl:operation[@name='greetMe']", doc);
         assertValid("//wsdlsoap:address[@location='" + CONTEXT_URL + "/services/greeter']", doc);
     }
+    
+    
+    @Test
+    public void testGetWSDLWithMultiplePublishedEndpointUrl() throws Exception {
+        ServletUnitClient client = newClient();
+        client.setExceptionsThrownOnErrorStatus(true);
+        
+        WebRequest req = new GetMethodQueryWebRequest(CONTEXT_URL + "/services/greeter5?wsdl");
+        
+        WebResponse res = client.getResponse(req); 
+        assertEquals(200, res.getResponseCode());
+        assertEquals("text/xml", res.getContentType());
+        Document doc = DOMUtils.readXml(res.getInputStream());
+        assertNotNull(doc);
+        WSDLReader wsdlReader = WSDLFactory.newInstance().newWSDLReader();
+        wsdlReader.setFeature("javax.wsdl.verbose", false);
+        
+        XMLUtils.printDOM(doc);
+        
+        assertValid("//wsdl:service[@name='SOAPService']/wsdl:port[@name='SoapPort']/wsdlsoap:address[@location='" 
+            + "http://cxf.apache.org/publishedEndpointUrl1']", doc);
+        assertValid("//wsdl:service[@name='SOAPService']/wsdl:port[@name='SoapPort1']/wsdlsoap:address[@location='" 
+            + "http://cxf.apache.org/publishedEndpointUrl2']", doc);
+        
+    }
     @Test
     public void testGetWSDLWithIncludes() throws Exception {
         ServletUnitClient client = newClient();
diff --git a/systests/transports/src/test/java/org/apache/cxf/systest/servlet/ExternalServicesServletTest.java b/systests/transports/src/test/java/org/apache/cxf/systest/servlet/ExternalServicesServletTest.java
index 5507f8dfbd..720db924d0 100644
--- a/systests/transports/src/test/java/org/apache/cxf/systest/servlet/ExternalServicesServletTest.java
+++ b/systests/transports/src/test/java/org/apache/cxf/systest/servlet/ExternalServicesServletTest.java
@@ -59,7 +59,7 @@ public class ExternalServicesServletTest extends AbstractServletTest {
         //test the '/' context get service list
         WebResponse  res = client.getResponse(CONTEXT_URL + "/");
         WebLink[] links = res.getLinks();
-        assertEquals("Wrong number of service links", 4, links.length);
+        assertEquals("Wrong number of service links", 6, links.length);
         
         Set<String> links2 = new HashSet<String>();
         for (WebLink l : links) {
diff --git a/systests/transports/src/test/java/org/apache/cxf/systest/servlet/cxf-servlet.xml b/systests/transports/src/test/java/org/apache/cxf/systest/servlet/cxf-servlet.xml
index 1d28dd8cc1..77afcbf1d8 100644
--- a/systests/transports/src/test/java/org/apache/cxf/systest/servlet/cxf-servlet.xml
+++ b/systests/transports/src/test/java/org/apache/cxf/systest/servlet/cxf-servlet.xml
@@ -57,5 +57,24 @@ http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
     </jaxws:properties>
   </jaxws:endpoint>
 
+  <jaxws:endpoint
+    id="greeter5"
+    address="/greeter5"
+    publishedEndpointUrl="http://cxf.apache.org/publishedEndpointUrl1"
+        implementor="org.apache.hello_world_soap_http.GreeterImpl"
+        wsdlLocation="/org/apache/cxf/systest/servlet/hello_world.wsdl"
+        serviceName="e:SOAPService"
+        endpointName="e:SoapPort" 
+        xmlns:e="http://apache.org/hello_world_soap_http"     />
+ 
+  <jaxws:endpoint
+    id="greeter6"
+    address="/greeter6"
+    publishedEndpointUrl="http://cxf.apache.org/publishedEndpointUrl2"
+        implementor="org.apache.hello_world_soap_http.GreeterImpl"
+        wsdlLocation="/org/apache/cxf/systest/servlet/hello_world.wsdl"      
+        serviceName="e:SOAPService"
+        endpointName="e:SoapPort1"
+        xmlns:e="http://apache.org/hello_world_soap_http"    />
   
-</beans>
\ No newline at end of file
+</beans>
