diff --git a/api/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java b/api/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java
index dbc566827f..e72646c9ee 100644
--- a/api/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java
+++ b/api/src/main/java/org/apache/cxf/attachment/AttachmentSerializer.java
@@ -32,7 +32,6 @@ import java.util.Map;
 
 import javax.activation.DataHandler;
 
-import org.apache.cxf.common.util.SystemPropertyAction;
 import org.apache.cxf.message.Attachment;
 import org.apache.cxf.message.Message;
 
@@ -154,9 +153,6 @@ public class AttachmentSerializer {
             encoding = "UTF-8";
         }
         StringWriter writer = new StringWriter();
-        String lineSeparator = 
-            SystemPropertyAction.getProperty("line.separator", "\r\n");
-        writer.write(lineSeparator);
         writer.write("--");
         writer.write(bodyBoundary);
         
diff --git a/api/src/test/java/org/apache/cxf/attachment/AttachmentSerializerTest.java b/api/src/test/java/org/apache/cxf/attachment/AttachmentSerializerTest.java
index e18848346b..5f85be0008 100644
--- a/api/src/test/java/org/apache/cxf/attachment/AttachmentSerializerTest.java
+++ b/api/src/test/java/org/apache/cxf/attachment/AttachmentSerializerTest.java
@@ -27,6 +27,7 @@ import java.util.Collection;
 import java.util.Properties;
 
 import javax.activation.DataHandler;
+import javax.activation.DataSource;
 import javax.mail.Session;
 import javax.mail.internet.MimeBodyPart;
 import javax.mail.internet.MimeMessage;
@@ -90,8 +91,11 @@ public class AttachmentSerializerTest extends Assert {
         
         out.flush();
         
+        DataSource source = new ByteArrayDataSource(new ByteArrayInputStream(out.toByteArray()), ct);
+        MimeMultipart mpart = new MimeMultipart(source);
         Session session = Session.getDefaultInstance(new Properties());
-        MimeMessage inMsg = new MimeMessage(session, new ByteArrayInputStream(out.toByteArray()));
+        MimeMessage inMsg = new MimeMessage(session);
+        inMsg.setContent(mpart);
         inMsg.addHeaderLine("Content-Type: " + ct);
         
         MimeMultipart multipart = (MimeMultipart) inMsg.getContent();
@@ -158,9 +162,12 @@ public class AttachmentSerializerTest extends Assert {
         serializer.writeAttachments();
         
         out.flush();
-        
+        DataSource source = new ByteArrayDataSource(new ByteArrayInputStream(out.toByteArray()), ct);
+        MimeMultipart mpart = new MimeMultipart(source);
         Session session = Session.getDefaultInstance(new Properties());
-        MimeMessage inMsg = new MimeMessage(session, new ByteArrayInputStream(out.toByteArray()));
+        MimeMessage inMsg = new MimeMessage(session);
+        inMsg.setContent(mpart);
+        
         inMsg.addHeaderLine("Content-Type: " + ct);
         
         MimeMultipart multipart = (MimeMultipart) inMsg.getContent();
diff --git a/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/datasource/DataSourceProviderTest.java b/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/datasource/DataSourceProviderTest.java
index 3f8b824b12..de3d0e331e 100644
--- a/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/datasource/DataSourceProviderTest.java
+++ b/systests/jaxws/src/test/java/org/apache/cxf/systest/provider/datasource/DataSourceProviderTest.java
@@ -28,10 +28,12 @@ import java.net.URL;
 import java.util.Properties;
 import java.util.logging.Logger;
 
+import javax.activation.DataSource;
 import javax.mail.MessagingException;
 import javax.mail.Session;
 import javax.mail.internet.MimeMessage;
 import javax.mail.internet.MimeMultipart;
+import javax.mail.util.ByteArrayDataSource;
 import javax.xml.transform.OutputKeys;
 import javax.xml.transform.Source;
 import javax.xml.transform.Transformer;
@@ -116,8 +118,11 @@ public class DataSourceProviderTest extends AbstractBusClientServerTestBase {
     
     public static MimeMultipart readAttachmentParts(String contentType, InputStream bais) throws 
         MessagingException, IOException {
+        DataSource source = new ByteArrayDataSource(bais, contentType);
+        MimeMultipart mpart = new MimeMultipart(source);
         Session session = Session.getDefaultInstance(new Properties());
-        MimeMessage mm = new MimeMessage(session, bais);
+        MimeMessage mm = new MimeMessage(session);
+        mm.setContent(mpart);
         mm.addHeaderLine("Content-Type:" + contentType);
         return (MimeMultipart) mm.getContent();
     }
