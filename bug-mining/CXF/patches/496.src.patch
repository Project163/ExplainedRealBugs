diff --git a/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java b/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java
index e37c314e7c..2cd9dacd2d 100644
--- a/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java
+++ b/common/common/src/main/java/org/apache/cxf/staxutils/StaxUtils.java
@@ -24,6 +24,7 @@ import java.io.OutputStream;
 import java.io.Reader;
 import java.io.StringWriter;
 import java.io.Writer;
+import java.net.URL;
 import java.util.Iterator;
 import java.util.concurrent.BlockingQueue;
 import java.util.concurrent.LinkedBlockingQueue;
@@ -991,6 +992,15 @@ public final class StaxUtils {
             StreamSource ss = new StreamSource(src.getCharacterStream(), sysId);
             ss.setPublicId(pubId);
             return createXMLStreamReader(ss);
+        } else {
+            try {
+                URL url = new URL(sysId);
+                StreamSource ss = new StreamSource(url.openStream(), sysId);
+                ss.setPublicId(pubId);
+                return createXMLStreamReader(ss);
+            } catch (Exception ex) {
+                //ignore - not a valid URL
+            }
         }
         throw new IllegalArgumentException("InputSource must have a ByteStream or CharacterStream");
     }
diff --git a/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java b/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java
index ceb9021078..fd116cf0dc 100644
--- a/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java
+++ b/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBBindErrorListener.java
@@ -38,7 +38,7 @@ public class JAXBBindErrorListener implements ErrorListener {
                                     + " of schema " + exception.getSystemId(), exception);
            
         }
-        throw new ToolException(prefix + exception.getLocalizedMessage(), exception);
+        throw new ToolException(prefix + mapMessage(exception.getLocalizedMessage()), exception);
 
     }
 
@@ -60,4 +60,16 @@ public class JAXBBindErrorListener implements ErrorListener {
                                + " in schema " + exception.getSystemId());
         }
     }
+    
+    private String mapMessage(String msg) {
+        //this is kind of a hack to map the JAXB error message into
+        //something more appropriate for CXF.  If JAXB changes their
+        //error messages, this will break
+        if (msg.contains("Use a class customization to resolve")
+            && msg.contains("with the same name")) {
+            int idx = msg.lastIndexOf("class customization") + 19;
+            msg = msg.substring(0, idx) + " or the -autoNameResolution option" + msg.substring(idx);
+        }
+        return msg;
+    }
 }
diff --git a/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java b/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java
index ee2301faad..9492612610 100644
--- a/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java
+++ b/tools/wsdlto/databinding/jaxb/src/main/java/org/apache/cxf/tools/wsdlto/databinding/jaxb/JAXBDataBinding.java
@@ -19,6 +19,7 @@
 package org.apache.cxf.tools.wsdlto.databinding.jaxb;
 import java.io.File;
 import java.io.FileInputStream;
+import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.Writer;
@@ -43,6 +44,9 @@ import javax.xml.stream.XMLStreamReader;
 import javax.xml.stream.util.StreamReaderDelegate;
 import javax.xml.transform.dom.DOMSource;
 import javax.xml.validation.SchemaFactory;
+import javax.xml.xpath.XPath;
+import javax.xml.xpath.XPathConstants;
+import javax.xml.xpath.XPathExpression;
 
 
 import org.w3c.dom.Attr;
@@ -51,6 +55,7 @@ import org.w3c.dom.Document;
 import org.w3c.dom.Element;
 import org.w3c.dom.NamedNodeMap;
 import org.w3c.dom.Node;
+import org.w3c.dom.NodeList;
 
 import org.xml.sax.InputSource;
 import org.xml.sax.SAXException;
@@ -81,15 +86,19 @@ import org.apache.cxf.common.xmlschema.SchemaCollection;
 import org.apache.cxf.helpers.CastUtils;
 import org.apache.cxf.helpers.DOMUtils;
 import org.apache.cxf.helpers.FileUtils;
+import org.apache.cxf.helpers.XMLUtils;
+import org.apache.cxf.helpers.XPathUtils;
 import org.apache.cxf.service.model.SchemaInfo;
 import org.apache.cxf.service.model.ServiceInfo;
 import org.apache.cxf.staxutils.StaxUtils;
+import org.apache.cxf.staxutils.W3CNamespaceContext;
 import org.apache.cxf.tools.common.ToolConstants;
 import org.apache.cxf.tools.common.ToolContext;
 import org.apache.cxf.tools.common.ToolException;
 import org.apache.cxf.tools.common.model.DefaultValueWriter;
 import org.apache.cxf.tools.util.ClassCollector;
 import org.apache.cxf.tools.util.JAXBUtils;
+import org.apache.cxf.tools.util.URIParserUtil;
 import org.apache.cxf.tools.wsdlto.core.DataBindingProfile;
 import org.apache.cxf.tools.wsdlto.core.DefaultValueProvider;
 import org.apache.cxf.tools.wsdlto.core.RandomValueProvider;
@@ -331,9 +340,7 @@ public class JAXBDataBinding implements DataBindingProfile {
         }
         
         addSchemas(opts, schemaCompiler, schemas);
-        for (InputSource binding : jaxbBindings) {
-            opts.addBindFile(binding);
-        }
+        addBindingFiles(opts, jaxbBindings, schemas);
 
                        
         for (String ns : context.getNamespacePackageMap().keySet()) {
@@ -372,7 +379,66 @@ public class JAXBDataBinding implements DataBindingProfile {
         }
         initialized = true;
     }
-
+    private void addBindingFiles(Options opts, List<InputSource> jaxbBindings, SchemaCollection schemas) {
+        for (InputSource binding : jaxbBindings) {
+            XMLStreamReader r = StaxUtils.createXMLStreamReader(binding);
+            try {
+                StaxUtils.toNextTag(r);
+                String s = r.getAttributeValue(null, "schemaLocation");
+                if (StringUtils.isEmpty(s)) {
+                    Document d = StaxUtils.read(r);
+                    XPath p = XPathUtils.getFactory().newXPath();
+                    p.setNamespaceContext(new W3CNamespaceContext(d.getDocumentElement()));
+                    XPathExpression xpe = p.compile(d.getDocumentElement().getAttribute("node"));
+                    for (XmlSchema schema : schemas.getXmlSchemas()) {
+                        if (XMLConstants.W3C_XML_SCHEMA_NS_URI.equals(schema.getTargetNamespace())) {
+                            continue;
+                        }
+                        Object src = getSchemaNode(schema, schemas);
+                        NodeList nodes = (NodeList)xpe.evaluate(src, XPathConstants.NODESET);
+                        if (nodes.getLength() > 0) {
+                            String key = schema.getSourceURI();
+                            binding = convertToTmpInputSource(d.getDocumentElement(), key);
+                            opts.addBindFile(binding);
+                            binding = null;
+                        }
+                    }
+                } 
+            } catch (Exception ex) {
+                //ignore, just pass to jaxb
+            } finally {
+                try {
+                    r.close();
+                } catch (Exception ex) {
+                    //ignore
+                }
+            }
+            if (binding != null) {
+                opts.addBindFile(binding);
+            }
+        }
+    }
+    private Object getSchemaNode(XmlSchema schema, SchemaCollection schemaCollection) {
+        XmlSchemaSerializer xser = new XmlSchemaSerializer();
+        xser.setExtReg(schemaCollection.getExtReg());
+        Document[] docs;
+        try {
+            docs = xser.serializeSchema(schema, false);
+        } catch (XmlSchemaSerializerException e) {
+            throw new RuntimeException(e);
+        }
+        return docs[0].getDocumentElement();
+    }
+    private InputSource convertToTmpInputSource(Element ele, String schemaLoc) throws Exception {
+        InputSource result = null;
+        ele.setAttribute("schemaLocation", schemaLoc);
+        File tmpFile = FileUtils.createTempFile("jaxbbinding", ".xml");
+        XMLUtils.writeTo(ele, new FileOutputStream(tmpFile));
+        result = new InputSource(URIParserUtil.getAbsoluteURI(tmpFile.getAbsolutePath()));
+        tmpFile.deleteOnExit();
+        return result;
+    }
+    
     @SuppressWarnings("unchecked")
     private void addSchemas(Options opts, 
                             SchemaCompiler schemaCompiler,
diff --git a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java
index 8d64050b56..6eb8938a0f 100644
--- a/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java
+++ b/tools/wsdlto/frontend/jaxws/src/main/java/org/apache/cxf/tools/wsdlto/frontend/jaxws/customization/CustomizationParser.java
@@ -379,9 +379,6 @@ public final class CustomizationParser {
             }
 
         }
-
-        
-        
         Element element = DOMUtils.getFirstElement(bindings);
         while (element != null) {
             if (element.getNamespaceURI().equals(ToolConstants.JAXWS_BINDINGS.getNamespaceURI())) {
@@ -389,9 +386,6 @@ public final class CustomizationParser {
             }
             element = DOMUtils.getNextElement(element);
         }
-        
-        
-
         Node cloneNode = ProcessorUtil.cloneNode(node.getOwnerDocument(), bindings, true);
         Node firstChild = DOMUtils.getChild(node, "jaxws:bindings");
         if (firstChild == null && cloneNode.getNodeName().indexOf("bindings") == -1) {
diff --git a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java
index 25528ee99b..0ef6f8366d 100644
--- a/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java
+++ b/tools/wsdlto/test/src/test/java/org/apache/cxf/tools/wsdlto/jaxws/CodeGenBugTest.java
@@ -828,7 +828,6 @@ public class CodeGenBugTest extends AbstractCodeGenTest {
     }
     
     // See CXF-2135
-    @org.junit.Ignore
     @Test
     public void testReuseJaxbBindingFile1() throws Exception {
         env.put(ToolConstants.CFG_WSDLURL, 
