<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TWILL-131] Zookeepers nodes are not removed</title>
                <link>https://issues.apache.org/jira/browse/TWILL-131</link>
                <project id="12315020" key="TWILL">Apache Twill (Retired)</project>
                    <description>&lt;p&gt;When a TwillRunnable is run with the YarnTwillRunnerService, a zookeeper node is created and never removed.&lt;/p&gt;

&lt;p&gt;For example run the example HelloWorld application:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java -cp $CP org.apache.twill.example.yarn.HelloWorld localhost:2181/hello
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After the application had run to completion I looked at zookeeper and found:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; ./zkCli.sh ls /hello
...
[HelloWorldRunnable]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However I expected:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;gt; ./zkCli.sh ls /hello
...
[]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This becomes an issue when a service creates a large number of TwillApplications with unique names.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12832920">TWILL-131</key>
            <summary>Zookeepers nodes are not removed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chtyim">Terence Yim</assignee>
                                    <reporter username="lanzaa">Colin B.</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 May 2015 00:51:23 +0000</created>
                <updated>Tue, 20 Oct 2015 20:52:06 +0000</updated>
                            <resolved>Tue, 20 Oct 2015 20:52:06 +0000</resolved>
                                    <version>0.5.0-incubating</version>
                                    <fixVersion>0.7.0-incubating</fixVersion>
                                    <component>discovery</component>
                    <component>zookeeper</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14573746" author="ghelmling" created="Thu, 4 Jun 2015 22:59:59 +0000"  >&lt;p&gt;This sounds like a good application of container znodes (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2163&quot; title=&quot;Introduce new ZNode type: container&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2163&quot;&gt;&lt;del&gt;ZOOKEEPER-2163&lt;/del&gt;&lt;/a&gt;) once they are available (not until ZK 3.6 is released).  Until then, sounds like we might need something like the Curator Reaper class that is described in that issue.&lt;/p&gt;</comment>
                            <comment id="14959824" author="githubbot" created="Thu, 15 Oct 2015 23:14:33 +0000"  >&lt;p&gt;GitHub user chtyim opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    (&lt;a href=&quot;https://issues.apache.org/jira/browse/TWILL-131&quot; title=&quot;Zookeepers nodes are not removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TWILL-131&quot;&gt;&lt;del&gt;TWILL-131&lt;/del&gt;&lt;/a&gt;) Remove ZK node when application finished.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Remove the application ZK node when the application terminates&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/chtyim/incubator-twill&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/chtyim/incubator-twill&lt;/a&gt; feature/&lt;a href=&quot;https://issues.apache.org/jira/browse/TWILL-131&quot; title=&quot;Zookeepers nodes are not removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TWILL-131&quot;&gt;&lt;del&gt;TWILL-131&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #70&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 94a54da147cf74d7fd292369f6f28ea24b9d13b4&lt;br/&gt;
Author: Terence Yim &amp;lt;chtyim@apache.org&amp;gt;&lt;br/&gt;
Date:   2015-10-14T20:39:32Z&lt;/p&gt;

&lt;p&gt;    (&lt;a href=&quot;https://issues.apache.org/jira/browse/TWILL-131&quot; title=&quot;Zookeepers nodes are not removed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TWILL-131&quot;&gt;&lt;del&gt;TWILL-131&lt;/del&gt;&lt;/a&gt;) Remove ZK node when application finished.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Remove the application ZK node when the application terminates&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="14959838" author="githubbot" created="Thu, 15 Oct 2015 23:24:52 +0000"  >&lt;p&gt;Github user awholegunch commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42194105&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42194105&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    same app running, which we can safely ignore and return.&lt;/p&gt;</comment>
                            <comment id="14959839" author="githubbot" created="Thu, 15 Oct 2015 23:25:05 +0000"  >&lt;p&gt;Github user awholegunch commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42194118&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42194118&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Deletes ZK nodes created for the application execution.&lt;/p&gt;</comment>
                            <comment id="14959845" author="githubbot" created="Thu, 15 Oct 2015 23:26:59 +0000"  >&lt;p&gt;Github user awholegunch commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42194244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42194244&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    We don&apos;t have to worry about a race condition if another instance of the same app starts at the same time&lt;br/&gt;
    as when removal is performed because we always create the node with &quot;createParent == true&quot;, which takes care of&lt;br/&gt;
    the parent node recreation if it is being removed from here.&lt;/p&gt;</comment>
                            <comment id="14959849" author="githubbot" created="Thu, 15 Oct 2015 23:29:52 +0000"  >&lt;p&gt;Github user awholegunch commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42194452&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42194452&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.INSTANCES_PATH_PREFIX)) &lt;/p&gt;
{
    +        return;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete children under /discovery. It may fail with NotEmptyException if there are other instances&lt;br/&gt;
    +      // of the same app running that has discovery services running.&lt;br/&gt;
    +      List&amp;lt;String&amp;gt; children = zkClient.getChildren(Constants.DISCOVERY_PATH_PREFIX)&lt;br/&gt;
    +                                      .get(TIMEOUT_SECONDS, TimeUnit.SECONDS).getChildren();&lt;br/&gt;
    +      List&amp;lt;OperationFuture&amp;lt;?&amp;gt;&amp;gt; deleteFutures = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
    +      for (String child : children) {&lt;br/&gt;
    +        String path = Constants.DISCOVERY_PATH_PREFIX + &quot;/&quot; + child;&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    +        deleteFutures.add(zkClient.delete(path));&lt;br/&gt;
    +      }&lt;br/&gt;
    +      Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);&lt;br/&gt;
    +      for (OperationFuture&amp;lt;?&amp;gt; future : deleteFutures) {&lt;br/&gt;
    +        try {
    +          future.get();
    +        } catch (ExecutionException e) {&lt;br/&gt;
    +          if (e.getCause() instanceof KeeperException.NotEmptyException) {
    +            return;
    +          }&lt;br/&gt;
    +          throw e;&lt;br/&gt;
    +        }&lt;br/&gt;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Delete the /discovery. It may fail with NotEmptyException (due to race between apps),&lt;br/&gt;
    +      // which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.DISCOVERY_PATH_PREFIX)) {    +        return;    +      }
&lt;p&gt;    +&lt;br/&gt;
    +      // Delete the ZK path for the app namespace.&lt;br/&gt;
    +      delete(&quot;/&quot;);&lt;br/&gt;
    +    }&lt;br/&gt;
    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Deletes the given ZK path.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param path path to delete&lt;br/&gt;
    +     * @return true if the path is delete, false if failed to delete due to &lt;/p&gt;
{@link KeeperException.NotEmptyException}.&lt;br/&gt;
    +     * @throws Exception if failed to delete&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;br/&gt;
    &lt;br/&gt;
    @return true if the path was deleted, false if it failed to delete due to {@link KeeperException.NotEmptyException}
&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="14959850" author="githubbot" created="Thu, 15 Oct 2015 23:30:25 +0000"  >&lt;p&gt;Github user awholegunch commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42194494&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42194494&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.INSTANCES_PATH_PREFIX)) &lt;/p&gt;
{
    +        return;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete children under /discovery. It may fail with NotEmptyException if there are other instances&lt;br/&gt;
    +      // of the same app running that has discovery services running.&lt;br/&gt;
    +      List&amp;lt;String&amp;gt; children = zkClient.getChildren(Constants.DISCOVERY_PATH_PREFIX)&lt;br/&gt;
    +                                      .get(TIMEOUT_SECONDS, TimeUnit.SECONDS).getChildren();&lt;br/&gt;
    +      List&amp;lt;OperationFuture&amp;lt;?&amp;gt;&amp;gt; deleteFutures = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
    +      for (String child : children) {&lt;br/&gt;
    +        String path = Constants.DISCOVERY_PATH_PREFIX + &quot;/&quot; + child;&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    +        deleteFutures.add(zkClient.delete(path));&lt;br/&gt;
    +      }&lt;br/&gt;
    +      Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);&lt;br/&gt;
    +      for (OperationFuture&amp;lt;?&amp;gt; future : deleteFutures) {&lt;br/&gt;
    +        try {
    +          future.get();
    +        } catch (ExecutionException e) {&lt;br/&gt;
    +          if (e.getCause() instanceof KeeperException.NotEmptyException) {
    +            return;
    +          }&lt;br/&gt;
    +          throw e;&lt;br/&gt;
    +        }&lt;br/&gt;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Delete the /discovery. It may fail with NotEmptyException (due to race between apps),&lt;br/&gt;
    +      // which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.DISCOVERY_PATH_PREFIX)) {    +        return;    +      }
&lt;p&gt;    +&lt;br/&gt;
    +      // Delete the ZK path for the app namespace.&lt;br/&gt;
    +      delete(&quot;/&quot;);&lt;br/&gt;
    +    }&lt;br/&gt;
    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Deletes the given ZK path.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param path path to delete&lt;br/&gt;
    +     * @return true if the path is delete, false if failed to delete due to &lt;/p&gt;
{@link KeeperException.NotEmptyException}
&lt;p&gt;.&lt;br/&gt;
    +     * @throws Exception if failed to delete&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    @throws Exception if it failed to delete the path&lt;/p&gt;</comment>
                            <comment id="14961569" author="githubbot" created="Sat, 17 Oct 2015 00:17:53 +0000"  >&lt;p&gt;Github user gsps1 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42302190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42302190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.INSTANCES_PATH_PREFIX)) &lt;/p&gt;
{
    +        return;
    +      }
&lt;p&gt;    +&lt;br/&gt;
    +      // Try to delete children under /discovery. It may fail with NotEmptyException if there are other instances&lt;br/&gt;
    +      // of the same app running that has discovery services running.&lt;br/&gt;
    +      List&amp;lt;String&amp;gt; children = zkClient.getChildren(Constants.DISCOVERY_PATH_PREFIX)&lt;br/&gt;
    +                                      .get(TIMEOUT_SECONDS, TimeUnit.SECONDS).getChildren();&lt;br/&gt;
    +      List&amp;lt;OperationFuture&amp;lt;?&amp;gt;&amp;gt; deleteFutures = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
    +      for (String child : children) {&lt;br/&gt;
    +        String path = Constants.DISCOVERY_PATH_PREFIX + &quot;/&quot; + child;&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    +        deleteFutures.add(zkClient.delete(path));&lt;br/&gt;
    +      }&lt;br/&gt;
    +      Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);&lt;br/&gt;
    +      for (OperationFuture&amp;lt;?&amp;gt; future : deleteFutures) {&lt;br/&gt;
    +        try {&lt;br/&gt;
    +          future.get();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    wouldn&apos;t ``Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);`` already ensure the futures are completed? &lt;/p&gt;</comment>
                            <comment id="14961572" author="githubbot" created="Sat, 17 Oct 2015 00:18:39 +0000"  >&lt;p&gt;Github user gsps1 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42302212&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42302212&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.INSTANCES_PATH_PREFIX)) &lt;/p&gt;
{
    +        return;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete children under /discovery. It may fail with NotEmptyException if there are other instances&lt;br/&gt;
    +      // of the same app running that has discovery services running.&lt;br/&gt;
    +      List&amp;lt;String&amp;gt; children = zkClient.getChildren(Constants.DISCOVERY_PATH_PREFIX)&lt;br/&gt;
    +                                      .get(TIMEOUT_SECONDS, TimeUnit.SECONDS).getChildren();&lt;br/&gt;
    +      List&amp;lt;OperationFuture&amp;lt;?&amp;gt;&amp;gt; deleteFutures = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
    +      for (String child : children) {&lt;br/&gt;
    +        String path = Constants.DISCOVERY_PATH_PREFIX + &quot;/&quot; + child;&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    +        deleteFutures.add(zkClient.delete(path));&lt;br/&gt;
    +      }&lt;br/&gt;
    +      Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);&lt;br/&gt;
    +      for (OperationFuture&amp;lt;?&amp;gt; future : deleteFutures) {&lt;br/&gt;
    +        try {
    +          future.get();
    +        } catch (ExecutionException e) {&lt;br/&gt;
    +          if (e.getCause() instanceof KeeperException.NotEmptyException) {
    +            return;
    +          }&lt;br/&gt;
    +          throw e;&lt;br/&gt;
    +        }&lt;br/&gt;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Delete the /discovery. It may fail with NotEmptyException (due to race between apps),&lt;br/&gt;
    +      // which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.DISCOVERY_PATH_PREFIX)) {    +        return;    +      }
&lt;p&gt;    +&lt;br/&gt;
    +      // Delete the ZK path for the app namespace.&lt;br/&gt;
    +      delete(&quot;/&quot;);&lt;br/&gt;
    +    }&lt;br/&gt;
    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Deletes the given ZK path.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param path path to delete&lt;br/&gt;
    +     * @return true if the path is delete, false if failed to delete due to &lt;/p&gt;
{@link KeeperException.NotEmptyException}
&lt;p&gt;.&lt;br/&gt;
    +     * @throws Exception if failed to delete&lt;br/&gt;
    +     */&lt;br/&gt;
    +    private boolean delete(String path) throws Exception {&lt;br/&gt;
    +      try {&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    should this be logged as ``debug`` ?&lt;/p&gt;</comment>
                            <comment id="14964196" author="githubbot" created="Mon, 19 Oct 2015 22:44:51 +0000"  >&lt;p&gt;Github user chtyim commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42435799&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42435799&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.INSTANCES_PATH_PREFIX)) &lt;/p&gt;
{
    +        return;
    +      }
&lt;p&gt;    +&lt;br/&gt;
    +      // Try to delete children under /discovery. It may fail with NotEmptyException if there are other instances&lt;br/&gt;
    +      // of the same app running that has discovery services running.&lt;br/&gt;
    +      List&amp;lt;String&amp;gt; children = zkClient.getChildren(Constants.DISCOVERY_PATH_PREFIX)&lt;br/&gt;
    +                                      .get(TIMEOUT_SECONDS, TimeUnit.SECONDS).getChildren();&lt;br/&gt;
    +      List&amp;lt;OperationFuture&amp;lt;?&amp;gt;&amp;gt; deleteFutures = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
    +      for (String child : children) {&lt;br/&gt;
    +        String path = Constants.DISCOVERY_PATH_PREFIX + &quot;/&quot; + child;&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    +        deleteFutures.add(zkClient.delete(path));&lt;br/&gt;
    +      }&lt;br/&gt;
    +      Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);&lt;br/&gt;
    +      for (OperationFuture&amp;lt;?&amp;gt; future : deleteFutures) {&lt;br/&gt;
    +        try {&lt;br/&gt;
    +          future.get();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    It does. But we need to call `Future.get()` to determine if the future actually completed successfully or got error.&lt;/p&gt;</comment>
                            <comment id="14964197" author="githubbot" created="Mon, 19 Oct 2015 22:45:17 +0000"  >&lt;p&gt;Github user chtyim commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42435827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42435827&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.INSTANCES_PATH_PREFIX)) &lt;/p&gt;
{
    +        return;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete children under /discovery. It may fail with NotEmptyException if there are other instances&lt;br/&gt;
    +      // of the same app running that has discovery services running.&lt;br/&gt;
    +      List&amp;lt;String&amp;gt; children = zkClient.getChildren(Constants.DISCOVERY_PATH_PREFIX)&lt;br/&gt;
    +                                      .get(TIMEOUT_SECONDS, TimeUnit.SECONDS).getChildren();&lt;br/&gt;
    +      List&amp;lt;OperationFuture&amp;lt;?&amp;gt;&amp;gt; deleteFutures = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
    +      for (String child : children) {&lt;br/&gt;
    +        String path = Constants.DISCOVERY_PATH_PREFIX + &quot;/&quot; + child;&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    +        deleteFutures.add(zkClient.delete(path));&lt;br/&gt;
    +      }&lt;br/&gt;
    +      Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);&lt;br/&gt;
    +      for (OperationFuture&amp;lt;?&amp;gt; future : deleteFutures) {&lt;br/&gt;
    +        try {
    +          future.get();
    +        } catch (ExecutionException e) {&lt;br/&gt;
    +          if (e.getCause() instanceof KeeperException.NotEmptyException) {
    +            return;
    +          }&lt;br/&gt;
    +          throw e;&lt;br/&gt;
    +        }&lt;br/&gt;
    +      }&lt;br/&gt;
    +&lt;br/&gt;
    +      // Delete the /discovery. It may fail with NotEmptyException (due to race between apps),&lt;br/&gt;
    +      // which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.DISCOVERY_PATH_PREFIX)) {    +        return;    +      }
&lt;p&gt;    +&lt;br/&gt;
    +      // Delete the ZK path for the app namespace.&lt;br/&gt;
    +      delete(&quot;/&quot;);&lt;br/&gt;
    +    }&lt;br/&gt;
    +&lt;br/&gt;
    +    /**&lt;br/&gt;
    +     * Deletes the given ZK path.&lt;br/&gt;
    +     *&lt;br/&gt;
    +     * @param path path to delete&lt;br/&gt;
    +     * @return true if the path is delete, false if failed to delete due to &lt;/p&gt;
{@link KeeperException.NotEmptyException}
&lt;p&gt;.&lt;br/&gt;
    +     * @throws Exception if failed to delete&lt;br/&gt;
    +     */&lt;br/&gt;
    +    private boolean delete(String path) throws Exception {&lt;br/&gt;
    +      try {&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    All ZK node operation are logged as info.&lt;/p&gt;</comment>
                            <comment id="14964308" author="githubbot" created="Tue, 20 Oct 2015 00:35:43 +0000"  >&lt;p&gt;Github user gsps1 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#discussion_r42443833&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#discussion_r42443833&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/main/java/org/apache/twill/internal/appmaster/ApplicationMasterMain.java &amp;#8212;&lt;br/&gt;
    @@ -229,4 +234,82 @@ protected void shutDown() throws Exception {&lt;br/&gt;
           }&lt;br/&gt;
         }&lt;br/&gt;
       }&lt;br/&gt;
    +&lt;br/&gt;
    +  private static final class AppMasterTwillZKPathService extends TwillZKPathService {&lt;br/&gt;
    +&lt;br/&gt;
    +    private static final Logger LOG = LoggerFactory.getLogger(AppMasterTwillZKPathService.class);&lt;br/&gt;
    +    private final ZKClient zkClient;&lt;br/&gt;
    +&lt;br/&gt;
    +    public AppMasterTwillZKPathService(ZKClient zkClient, RunId runId) &lt;/p&gt;
{
    +      super(zkClient, runId);
    +      this.zkClient = zkClient;
    +    }
&lt;p&gt;    +&lt;br/&gt;
    +    @Override&lt;br/&gt;
    +    protected void shutDown() throws Exception {&lt;br/&gt;
    +      super.shutDown();&lt;br/&gt;
    +&lt;br/&gt;
    +      // Deletes ZK nodes created for the application execution&lt;br/&gt;
    +      // We don&apos;t have to worry about race condition when another instance of the same app starts at the same time&lt;br/&gt;
    +      // when removal is performed because we always create node with &quot;createParent == true&quot;, which will take care of&lt;br/&gt;
    +      // the the parent node recreation if it is getting removed from here.&lt;br/&gt;
    +&lt;br/&gt;
    +      // Try to delete the /instances path. It may throws NotEmptyException if there are other instances of the&lt;br/&gt;
    +      // same app running, which can safely ignore and return.&lt;br/&gt;
    +      if (!delete(Constants.INSTANCES_PATH_PREFIX)) &lt;/p&gt;
{
    +        return;
    +      }
&lt;p&gt;    +&lt;br/&gt;
    +      // Try to delete children under /discovery. It may fail with NotEmptyException if there are other instances&lt;br/&gt;
    +      // of the same app running that has discovery services running.&lt;br/&gt;
    +      List&amp;lt;String&amp;gt; children = zkClient.getChildren(Constants.DISCOVERY_PATH_PREFIX)&lt;br/&gt;
    +                                      .get(TIMEOUT_SECONDS, TimeUnit.SECONDS).getChildren();&lt;br/&gt;
    +      List&amp;lt;OperationFuture&amp;lt;?&amp;gt;&amp;gt; deleteFutures = new ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;
    +      for (String child : children) {&lt;br/&gt;
    +        String path = Constants.DISCOVERY_PATH_PREFIX + &quot;/&quot; + child;&lt;br/&gt;
    +        LOG.info(&quot;Removing ZK path: {}{}&quot;, zkClient.getConnectString(), path);&lt;br/&gt;
    +        deleteFutures.add(zkClient.delete(path));&lt;br/&gt;
    +      }&lt;br/&gt;
    +      Futures.successfulAsList(deleteFutures).get(TIMEOUT_SECONDS, TimeUnit.SECONDS);&lt;br/&gt;
    +      for (OperationFuture&amp;lt;?&amp;gt; future : deleteFutures) {&lt;br/&gt;
    +        try {&lt;br/&gt;
    +          future.get();&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    ok&lt;/p&gt;</comment>
                            <comment id="14964312" author="githubbot" created="Tue, 20 Oct 2015 00:38:37 +0000"  >&lt;p&gt;Github user gsps1 commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#issuecomment-149385965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#issuecomment-149385965&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM :+1: &lt;/p&gt;</comment>
                            <comment id="14965279" author="githubbot" created="Tue, 20 Oct 2015 15:46:34 +0000"  >&lt;p&gt;Github user chtyim commented on the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70#issuecomment-149610343&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70#issuecomment-149610343&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Squashed commits.&lt;/p&gt;</comment>
                            <comment id="14965281" author="githubbot" created="Tue, 20 Oct 2015 15:48:22 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/incubator-twill/pull/70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/incubator-twill/pull/70&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2f8g7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>