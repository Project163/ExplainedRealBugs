<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TWILL-177] ZKDiscoveryService should have a way to remove its connection watcher</title>
                <link>https://issues.apache.org/jira/browse/TWILL-177</link>
                <project id="12315020" key="TWILL">Apache Twill (Retired)</project>
                    <description>&lt;p&gt;The ZKDiscoveryService adds a connection watcher in its constructor, but has no way to remove it. As a result, if somebody is creating new instances, the number of watches will slowly grow.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12989914">TWILL-177</key>
            <summary>ZKDiscoveryService should have a way to remove its connection watcher</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chtyim">Terence Yim</assignee>
                                    <reporter username="ashau">Albert Shau</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jul 2016 19:19:27 +0000</created>
                <updated>Tue, 13 Sep 2016 21:52:56 +0000</updated>
                            <resolved>Tue, 13 Sep 2016 21:52:56 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>discovery</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15380357" author="ashau" created="Sat, 16 Jul 2016 00:25:15 +0000"  >&lt;p&gt;AbstractTwillController will new a ZKDiscoveryService every time its created. This is what&apos;s returned when a user calls TwillPreparer.start(), so any process that starts twill applications will slowly leak memory.&lt;/p&gt;</comment>
                            <comment id="15446942" author="githubbot" created="Mon, 29 Aug 2016 20:16:24 +0000"  >&lt;p&gt;GitHub user chtyim opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    (&lt;a href=&quot;https://issues.apache.org/jira/browse/TWILL-177&quot; title=&quot;ZKDiscoveryService should have a way to remove its connection watcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TWILL-177&quot;&gt;&lt;del&gt;TWILL-177&lt;/del&gt;&lt;/a&gt;) Make ZKDiscoveryService AutoCloseable&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Release ZK watches when closed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/chtyim/twill&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/chtyim/twill&lt;/a&gt; feature/twill-177&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #8&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 98bcb2d05b02b45bdf0937fb936befb558260b3b&lt;br/&gt;
Author: Terence Yim &amp;lt;chtyim@apache.org&amp;gt;&lt;br/&gt;
Date:   2016-08-26T01:41:15Z&lt;/p&gt;

&lt;p&gt;    (&lt;a href=&quot;https://issues.apache.org/jira/browse/TWILL-177&quot; title=&quot;ZKDiscoveryService should have a way to remove its connection watcher&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TWILL-177&quot;&gt;&lt;del&gt;TWILL-177&lt;/del&gt;&lt;/a&gt;) Make ZKDiscoveryService AutoCloseable&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Release ZK watches when closed&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15446964" author="githubbot" created="Mon, 29 Aug 2016 20:28:33 +0000"  >&lt;p&gt;Github user anwar6953 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8#discussion_r76680691&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8#discussion_r76680691&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/test/java/org/apache/twill/yarn/BaseYarnTest.java &amp;#8212;&lt;br/&gt;
    @@ -66,6 +69,18 @@ protected void after() {&lt;br/&gt;
         }&lt;br/&gt;
       };&lt;/p&gt;

&lt;p&gt;    +  @Rule&lt;br/&gt;
    +  public final TestName testName = new TestName();&lt;br/&gt;
    +&lt;br/&gt;
    +  @Before&lt;br/&gt;
    +  public void beforeTest() {&lt;br/&gt;
    +    LOG.info(&quot;Before test {}&quot;, testName.getMethodName());&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    this was just for investigation? Can be removed now?&lt;/p&gt;</comment>
                            <comment id="15447670" author="githubbot" created="Tue, 30 Aug 2016 01:37:45 +0000"  >&lt;p&gt;Github user chtyim commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8#discussion_r76718497&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8#discussion_r76718497&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/test/java/org/apache/twill/yarn/BaseYarnTest.java &amp;#8212;&lt;br/&gt;
    @@ -66,6 +69,18 @@ protected void after() {&lt;br/&gt;
         }&lt;br/&gt;
       };&lt;/p&gt;

&lt;p&gt;    +  @Rule&lt;br/&gt;
    +  public final TestName testName = new TestName();&lt;br/&gt;
    +&lt;br/&gt;
    +  @Before&lt;br/&gt;
    +  public void beforeTest() {&lt;br/&gt;
    +    LOG.info(&quot;Before test {}&quot;, testName.getMethodName());&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Why? It helps identify which parts in the log is for which test.&lt;/p&gt;</comment>
                            <comment id="15475337" author="githubbot" created="Thu, 8 Sep 2016 23:23:22 +0000"  >&lt;p&gt;Github user anwar6953 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8#discussion_r78106987&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8#discussion_r78106987&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/test/java/org/apache/twill/yarn/BaseYarnTest.java &amp;#8212;&lt;br/&gt;
    @@ -66,6 +69,18 @@ protected void after() {&lt;br/&gt;
         }&lt;br/&gt;
       };&lt;/p&gt;

&lt;p&gt;    +  @Rule&lt;br/&gt;
    +  public final TestName testName = new TestName();&lt;br/&gt;
    +&lt;br/&gt;
    +  @Before&lt;br/&gt;
    +  public void beforeTest() {&lt;br/&gt;
    +    LOG.info(&quot;Before test {}&quot;, testName.getMethodName());&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Wouldn&apos;t JUnit already log the test method before it is executed?&lt;/p&gt;</comment>
                            <comment id="15476015" author="githubbot" created="Fri, 9 Sep 2016 05:54:58 +0000"  >&lt;p&gt;Github user chtyim commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8#discussion_r78132097&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8#discussion_r78132097&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/test/java/org/apache/twill/yarn/BaseYarnTest.java &amp;#8212;&lt;br/&gt;
    @@ -66,6 +69,18 @@ protected void after() {&lt;br/&gt;
         }&lt;br/&gt;
       };&lt;/p&gt;

&lt;p&gt;    +  @Rule&lt;br/&gt;
    +  public final TestName testName = new TestName();&lt;br/&gt;
    +&lt;br/&gt;
    +  @Before&lt;br/&gt;
    +  public void beforeTest() {&lt;br/&gt;
    +    LOG.info(&quot;Before test {}&quot;, testName.getMethodName());&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    No, it won&apos;t &lt;/p&gt;</comment>
                            <comment id="15484844" author="githubbot" created="Mon, 12 Sep 2016 18:13:08 +0000"  >&lt;p&gt;Github user chtyim commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Rebased on master and resolved conflicts.&lt;/p&gt;</comment>
                            <comment id="15488099" author="githubbot" created="Tue, 13 Sep 2016 19:04:09 +0000"  >&lt;p&gt;Github user albertshau commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8#discussion_r78623437&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8#discussion_r78623437&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/test/java/org/apache/twill/yarn/YarnTestSuite.java &amp;#8212;&lt;br/&gt;
    @@ -17,8 +17,15 @@&lt;br/&gt;
      */&lt;br/&gt;
     package org.apache.twill.yarn;&lt;/p&gt;

&lt;p&gt;    +import org.junit.After;&lt;br/&gt;
    +import org.junit.Before;&lt;br/&gt;
    +import org.junit.Rule;&lt;br/&gt;
    +import org.junit.rules.ExternalResource;&lt;br/&gt;
    +import org.junit.rules.TestName;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    unused imports?&lt;/p&gt;</comment>
                            <comment id="15488101" author="githubbot" created="Tue, 13 Sep 2016 19:05:28 +0000"  >&lt;p&gt;Github user albertshau commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    one minor comment, otherwise lgtm&lt;/p&gt;</comment>
                            <comment id="15488244" author="githubbot" created="Tue, 13 Sep 2016 19:59:32 +0000"  >&lt;p&gt;Github user chtyim commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8#discussion_r78632801&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8#discussion_r78632801&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: twill-yarn/src/test/java/org/apache/twill/yarn/YarnTestSuite.java &amp;#8212;&lt;br/&gt;
    @@ -17,8 +17,15 @@&lt;br/&gt;
      */&lt;br/&gt;
     package org.apache.twill.yarn;&lt;/p&gt;

&lt;p&gt;    +import org.junit.After;&lt;br/&gt;
    +import org.junit.Before;&lt;br/&gt;
    +import org.junit.Rule;&lt;br/&gt;
    +import org.junit.rules.ExternalResource;&lt;br/&gt;
    +import org.junit.rules.TestName;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    fixed&lt;/p&gt;</comment>
                            <comment id="15488396" author="githubbot" created="Tue, 13 Sep 2016 20:55:19 +0000"  >&lt;p&gt;Github user chtyim commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Squashed commits.&lt;/p&gt;</comment>
                            <comment id="15488458" author="githubbot" created="Tue, 13 Sep 2016 21:19:17 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/twill/pull/8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/twill/pull/8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i311z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>