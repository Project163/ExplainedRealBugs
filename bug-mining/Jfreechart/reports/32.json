{"url":"https://api.github.com/repos/jfree/jfreechart/issues/201","repository_url":"https://api.github.com/repos/jfree/jfreechart","labels_url":"https://api.github.com/repos/jfree/jfreechart/issues/201/labels{/name}","comments_url":"https://api.github.com/repos/jfree/jfreechart/issues/201/comments","events_url":"https://api.github.com/repos/jfree/jfreechart/issues/201/events","html_url":"https://github.com/jfree/jfreechart/issues/201","id":779438126,"node_id":"MDU6SXNzdWU3Nzk0MzgxMjY=","number":201,"title":"Proper way to iterate over datasets in XYPlot?","user":{"login":"lynnskii","id":73971908,"node_id":"MDQ6VXNlcjczOTcxOTA4","avatar_url":"https://avatars.githubusercontent.com/u/73971908?v=4","gravatar_id":"","url":"https://api.github.com/users/lynnskii","html_url":"https://github.com/lynnskii","followers_url":"https://api.github.com/users/lynnskii/followers","following_url":"https://api.github.com/users/lynnskii/following{/other_user}","gists_url":"https://api.github.com/users/lynnskii/gists{/gist_id}","starred_url":"https://api.github.com/users/lynnskii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lynnskii/subscriptions","organizations_url":"https://api.github.com/users/lynnskii/orgs","repos_url":"https://api.github.com/users/lynnskii/repos","events_url":"https://api.github.com/users/lynnskii/events{/privacy}","received_events_url":"https://api.github.com/users/lynnskii/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2021-01-05T19:04:39Z","updated_at":"2021-03-23T20:33:40Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have noticed that datasets are stored in a map by index in XYPlot.  However, there is no exposed way of iterating over the datasets other than getDataset(int index).  The rub is that getDatasetCount() returns the number of datasets in the map, not the maximum index value.\r\n\r\nI have plots that have optional datasets, so there may be gaps in the indices. For instance: datasets={0=BaseDataset, 2=Dataset2}.  There is no dataset with index=1.  When you try to iterate over the available datasets in a generic way, there's no way to know what dataset indices are actually available for the plot:\r\n\r\nfor (int i=0; i<plot.getDatasetCount(); i++) { // plot.getDatasetCount() = 2\r\n   XYDataset d = plot.getDataset(i);  // i will be 0 and 1, so you never get dataset 2.\r\n}\r\n\r\nTo properly obtain all a plot's datasets when you don't know what the indices may be, should getDatasetCount() return the maximum value of the datasets map's keySet()?  Or other methods provided to return, say, an unmodifiable collection of the datasets map's values()?  Internally to XYPlot, this is how iteration is done:  for (XYDataset dataset: this.datasets.values()) { ... }\r\n\r\nThe same issue applies to the other maps by index in XYPlot: getRendererCount(), getDomainAxisCount(), getRangeAxisCount()","closed_by":null,"reactions":{"url":"https://api.github.com/repos/jfree/jfreechart/issues/201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jfree/jfreechart/issues/201/timeline","performed_via_github_app":null,"state_reason":null}