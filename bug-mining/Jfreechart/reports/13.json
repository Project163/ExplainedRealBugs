{"url":"https://api.github.com/repos/jfree/jfreechart/issues/169","repository_url":"https://api.github.com/repos/jfree/jfreechart","labels_url":"https://api.github.com/repos/jfree/jfreechart/issues/169/labels{/name}","comments_url":"https://api.github.com/repos/jfree/jfreechart/issues/169/comments","events_url":"https://api.github.com/repos/jfree/jfreechart/issues/169/events","html_url":"https://github.com/jfree/jfreechart/issues/169","id":684088836,"node_id":"MDU6SXNzdWU2ODQwODg4MzY=","number":169,"title":"Labels with LayeredBarRenderer","user":{"login":"trashgod","id":32623871,"node_id":"MDQ6VXNlcjMyNjIzODcx","avatar_url":"https://avatars.githubusercontent.com/u/32623871?v=4","gravatar_id":"","url":"https://api.github.com/users/trashgod","html_url":"https://github.com/trashgod","followers_url":"https://api.github.com/users/trashgod/followers","following_url":"https://api.github.com/users/trashgod/following{/other_user}","gists_url":"https://api.github.com/users/trashgod/gists{/gist_id}","starred_url":"https://api.github.com/users/trashgod/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/trashgod/subscriptions","organizations_url":"https://api.github.com/users/trashgod/orgs","repos_url":"https://api.github.com/users/trashgod/repos","events_url":"https://api.github.com/users/trashgod/events{/privacy}","received_events_url":"https://api.github.com/users/trashgod/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-08-23T00:13:49Z","updated_at":"2020-09-26T06:05:12Z","closed_at":"2020-09-26T06:05:12Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"As shown [here](https://stackoverflow.com/q/63456424/230513) using JFreeChart v1.5, item labels remain invisible when added to a `VERTICAL` plot using `LayeredBarRenderer`; a `HORIZONTAL` plot appears unaffected. As shown [here](https://github.com/jfree/jfreechart/blob/4e0a53ebfdb6ab428a5318a34ca7f9ca8f43f821/src/main/java/org/jfree/chart/renderer/category/LayeredBarRenderer.java#L425), `drawItemLabel()` is invoked with an incorrect actual value for the formal parameter `negative`. Instead of `transX1 > transX2`, substituting `transX1 < transX2` results in the expected appearance. The following complete example reproduces the effect.\r\n\r\n    import java.awt.Dimension;\r\n    import java.awt.EventQueue;\r\n    import org.jfree.chart.ChartPanel;\r\n    import org.jfree.chart.ChartUtils;\r\n    import org.jfree.chart.JFreeChart;\r\n    import org.jfree.chart.axis.CategoryAxis;\r\n    import org.jfree.chart.axis.NumberAxis;\r\n    import org.jfree.chart.axis.ValueAxis;\r\n    import org.jfree.chart.labels.StandardCategoryItemLabelGenerator;\r\n    import org.jfree.chart.labels.StandardCategoryToolTipGenerator;\r\n    import org.jfree.chart.plot.CategoryPlot;\r\n    import org.jfree.chart.plot.PlotOrientation;\r\n    import org.jfree.chart.renderer.category.LayeredBarRenderer;\r\n    import org.jfree.data.category.CategoryDataset;\r\n    import org.jfree.data.general.DatasetUtils;\r\n    import org.jfree.chart.ui.ApplicationFrame;\r\n\r\n    /** @see https://stackoverflow.com/a/63464855/230513 */\r\n    public final class LayeredBarChartDemo extends ApplicationFrame {\r\n\r\n        private static final String TITLE = \"Layered Bar Chart Demo\";\r\n\r\n        public LayeredBarChartDemo(final String title) {\r\n            super(title);\r\n            final double[][] data = new double[][]{{55, 60}, {25, 13}};\r\n            final CategoryDataset dataset = DatasetUtils.createCategoryDataset(\"Series \", \"Factor \", data);\r\n            final CategoryAxis categoryAxis = new CategoryAxis(\"Category\");\r\n            final ValueAxis valueAxis = new NumberAxis(\"Score (%)\");\r\n            final LayeredBarRenderer renderer = new LayeredBarRenderer();\r\n            renderer.setDefaultToolTipGenerator(new StandardCategoryToolTipGenerator());\r\n            renderer.setDefaultItemLabelGenerator(new StandardCategoryItemLabelGenerator());\r\n            renderer.setDefaultItemLabelsVisible(true);\r\n            final CategoryPlot plot = new CategoryPlot(dataset, categoryAxis, valueAxis, renderer);\r\n            plot.setOrientation(PlotOrientation.VERTICAL);\r\n            final JFreeChart chart = new JFreeChart(TITLE, JFreeChart.DEFAULT_TITLE_FONT, plot, true);\r\n            ChartUtils.applyCurrentTheme(chart);\r\n            add(new ChartPanel(chart) {\r\n                @Override\r\n                public Dimension getPreferredSize() {\r\n                    return new Dimension(640, 480);\r\n                }\r\n            });\r\n        }\r\n\r\n        public static void main(final String[] args) {\r\n            EventQueue.invokeLater(() -> {\r\n                final LayeredBarChartDemo demo = new LayeredBarChartDemo2(TITLE);\r\n                demo.pack();\r\n                demo.setLocationRelativeTo(null);\r\n                demo.setVisible(true);\r\n            });\r\n        }\r\n    }\r\n","closed_by":{"login":"jfree","id":1835893,"node_id":"MDQ6VXNlcjE4MzU4OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1835893?v=4","gravatar_id":"","url":"https://api.github.com/users/jfree","html_url":"https://github.com/jfree","followers_url":"https://api.github.com/users/jfree/followers","following_url":"https://api.github.com/users/jfree/following{/other_user}","gists_url":"https://api.github.com/users/jfree/gists{/gist_id}","starred_url":"https://api.github.com/users/jfree/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jfree/subscriptions","organizations_url":"https://api.github.com/users/jfree/orgs","repos_url":"https://api.github.com/users/jfree/repos","events_url":"https://api.github.com/users/jfree/events{/privacy}","received_events_url":"https://api.github.com/users/jfree/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/jfree/jfreechart/issues/169/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jfree/jfreechart/issues/169/timeline","performed_via_github_app":null,"state_reason":"completed"}