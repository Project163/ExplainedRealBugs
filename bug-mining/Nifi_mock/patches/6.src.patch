diff --git a/nifi-mock/src/main/java/org/apache/nifi/util/MockProcessContext.java b/nifi-mock/src/main/java/org/apache/nifi/util/MockProcessContext.java
index a350ecbe10..49021d17af 100644
--- a/nifi-mock/src/main/java/org/apache/nifi/util/MockProcessContext.java
+++ b/nifi-mock/src/main/java/org/apache/nifi/util/MockProcessContext.java
@@ -48,7 +48,8 @@ public class MockProcessContext extends MockControllerServiceLookup implements S
     private boolean yieldCalled = false;
     private boolean enableExpressionValidation = false;
     private boolean allowExpressionValidation = true;
-    private boolean incomingConnection = true;
+    private volatile boolean incomingConnection = true;
+    private volatile boolean nonLoopConnection = true;
 
     private volatile Set<Relationship> connections = new HashSet<>();
     private volatile Set<Relationship> unavailableRelationships = new HashSet<>();
@@ -305,6 +306,15 @@ public class MockProcessContext extends MockControllerServiceLookup implements S
         return this.connections.contains(relationship);
     }
 
+    public void setNonLoopConnection(final boolean hasNonLoopConnection) {
+        this.nonLoopConnection = hasNonLoopConnection;
+    }
+
+    @Override
+    public boolean hasNonLoopConnection() {
+        return nonLoopConnection;
+    }
+
     public void addConnection(final Relationship relationship) {
         this.connections.add(relationship);
     }
diff --git a/nifi-mock/src/main/java/org/apache/nifi/util/StandardProcessorTestRunner.java b/nifi-mock/src/main/java/org/apache/nifi/util/StandardProcessorTestRunner.java
index 0d00cc8590..2f384ba4d7 100644
--- a/nifi-mock/src/main/java/org/apache/nifi/util/StandardProcessorTestRunner.java
+++ b/nifi-mock/src/main/java/org/apache/nifi/util/StandardProcessorTestRunner.java
@@ -523,6 +523,11 @@ public class StandardProcessorTestRunner implements TestRunner {
         context.setIncomingConnection(hasIncomingConnection);
     }
 
+    @Override
+    public void setNonLoopConnection(final boolean hasNonLoopConnection) {
+        context.setNonLoopConnection(hasNonLoopConnection);
+    }
+
     @Override
     public void addConnection(Relationship relationship) {
         context.addConnection(relationship);
diff --git a/nifi-mock/src/main/java/org/apache/nifi/util/TestRunner.java b/nifi-mock/src/main/java/org/apache/nifi/util/TestRunner.java
index ec901fea03..b1e7c8c7a7 100644
--- a/nifi-mock/src/main/java/org/apache/nifi/util/TestRunner.java
+++ b/nifi-mock/src/main/java/org/apache/nifi/util/TestRunner.java
@@ -492,10 +492,18 @@ public interface TestRunner {
      * Indicates to the framework that the configured processor has one or more
      * incoming connections.
      *
-     * @param hasIncomingConnection whether or not the configured processor has an incoming connection
+     * @param hasIncomingConnection whether or not the configured processor should behave as though it has an incoming connection
      */
     void setIncomingConnection(boolean hasIncomingConnection);
 
+    /**
+     * Indicates to the framework that the configured processor has one or more incoming
+     * connections for which the processor is not also the source.
+     *
+     * @param hasNonLoopConnection whether or not the configured processor should behave as though it has a non-looping incoming connection
+     */
+    void setNonLoopConnection(boolean hasNonLoopConnection);
+
     /**
      * Indicates to the Framework that the configured processor has a connection for the given Relationship.
      *
