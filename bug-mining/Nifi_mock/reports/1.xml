<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NIFI-189] Collapse commons without dependency into a single library</title>
                <link>https://issues.apache.org/jira/browse/NIFI-189</link>
                <project id="12316020" key="NIFI">Apache NiFi</project>
                    <description>&lt;p&gt;Several folks commented on a thread requesting that we collapse the number of commons/libraries that exist.  There are several which have no dependencies at all and have relatively few classes.  Going to collapse these into a single library which is intended to never have dependencies so it keeps its surface area low.  The packages for the classes will also be updated to more accurately reflect what it is.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12763055">NIFI-189</key>
            <summary>Collapse commons without dependency into a single library</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="joewitt">Joe Witt</assignee>
                                    <reporter username="joewitt">Joe Witt</reporter>
                        <labels>
                            <label>refactor</label>
                    </labels>
                <created>Sat, 20 Dec 2014 03:23:59 +0000</created>
                <updated>Sat, 20 Dec 2014 06:01:28 +0000</updated>
                            <resolved>Sat, 20 Dec 2014 06:01:28 +0000</resolved>
                                                    <fixVersion>0.0.1</fixVersion>
                                    <component>Tools and Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14254530" author="joewitt" created="Sat, 20 Dec 2014 05:47:12 +0000"  >&lt;p&gt;Considering the following comments from the dev list mailing thread as the review in this case:&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if this is the most appropriate forum or I should have&lt;br/&gt;
just written a Jira ticket, but here goes.&lt;/p&gt;

&lt;p&gt;I believe we should consolidate the number of artifacts we have in the&lt;br/&gt;
nifi/commons module.  We create three jars that contain just 1 class&lt;br/&gt;
each and there are three more jars with 3 or fewer classes in them.&lt;br/&gt;
This makes it annoying (especially for beginners) to find the location&lt;br/&gt;
of classes that you need and slightly bloats our footprint for number&lt;br/&gt;
of artifacts that nifi create.  I believe we can improve this.&lt;/p&gt;

&lt;p&gt;I analyzed all of the nar-bundles to find where each common library&lt;br/&gt;
was used.  Several are used by many framework, services, and&lt;br/&gt;
processors bundles already, so consolidating these common jars is a&lt;br/&gt;
no-brainer.  Other jars that are used more sparingly contain just 1 or&lt;br/&gt;
2 classes, so it really will have minimal impact to consolidate them&lt;br/&gt;
even if the classes aren&apos;t needed by a nar.&lt;/p&gt;

&lt;p&gt;So, I propose we consolidate these artifacts into the nifi-utils&lt;br/&gt;
artifact.  The number in (parentheses) is the number of classes in&lt;br/&gt;
them.&lt;/p&gt;

&lt;p&gt;core-flowfile-attributes (2)&lt;br/&gt;
flowfile-packager (9)&lt;br/&gt;
naive-search-ring-buffer (1)&lt;br/&gt;
nifi-file-utils (1)&lt;br/&gt;
nifi-logging-utils (1)&lt;br/&gt;
nifi-properties (2)&lt;br/&gt;
nifi-security-utils (5)&lt;br/&gt;
nifi-socket-utils (24)&lt;br/&gt;
nifi-stream-utils (17)&lt;br/&gt;
processor-utilities (3) (this would also resolve why the name doesn&apos;t&lt;br/&gt;
start with &quot;nifi&quot;)&lt;/p&gt;

&lt;p&gt;nifi-utils would go from 24 classes to 89 classes.&lt;/p&gt;

&lt;p&gt;nifi-web-utils (3), remote-communications-utils (13), and search-utils&lt;br/&gt;
(5) I did not include because their use is limited to just one or two&lt;br/&gt;
places.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
&amp;#8211; Mike&lt;/p&gt;

&lt;p&gt;Do we know how many transitive dependencies this ends up mixing together?&lt;/p&gt;

&lt;p&gt;I bring it up because that&apos;s often a reason for splitting a small&lt;br/&gt;
number of classes into their own module. For example, if I care about&lt;br/&gt;
socket-based data flow maybe I don&apos;t need the dependancies utilities&lt;br/&gt;
related to file-based data flow. I&apos;ll try to take a look at the actual&lt;br/&gt;
modules, but I thought I would throw that out there for others to&lt;br/&gt;
think on.&lt;/p&gt;

&lt;p&gt;One thing I&apos;ve seen work well is creating a dependency aggregator&lt;br/&gt;
module for users that don&apos;t care about the extra dependencies.&lt;/p&gt;

&lt;p&gt;-Joey&lt;/p&gt;

&lt;p&gt;Joey makes a good point.  Without nifi-socket-utils, the transitive&lt;br/&gt;
dependencies will be commons-codec, commons-compress and&lt;br/&gt;
commons-lang3.  slf4j-api is also in there but that&apos;s marked provided&lt;br/&gt;
by all of NiFi.&lt;/p&gt;

&lt;p&gt;When you add nifi-socket-utils to the equation, that adds commons-io&lt;br/&gt;
and commons-net.  Interestingly, nifi-socket-utils also depends on&lt;br/&gt;
three of the other nifi-*-utils.  So if you need nifi-socket-utils,&lt;br/&gt;
you also get nifi-properties, nifi-logging-utils, and nifi-utils&lt;br/&gt;
anyway.&lt;/p&gt;

&lt;p&gt;It&apos;s probably worth leaving nifi-socket-utils separate for now.  It&lt;br/&gt;
had the biggest footprint of all of the utils to begin with.&lt;/p&gt;

&lt;p&gt;flowfile-packager is the only one that pulls in commons-compress.&lt;br/&gt;
nifi-file-utils is the only one that pulls in commons-codec (though&lt;br/&gt;
that dependency could be removed with a clever refactor of&lt;br/&gt;
computeMd5Digest(File file) using just the JDK).&lt;/p&gt;

&lt;p&gt;&amp;#8211; Mike&lt;br/&gt;
You didn&apos;t fall too far, Joe.  core-flowfile-attributes,&lt;br/&gt;
naive-search-ring-buffer, nifi-properties, nifi-stream-utils, and&lt;br/&gt;
processor-utilities have no dependencies.  And nifi-logging-utils only&lt;br/&gt;
depends on the provided slf4j-api.  Just sayin&apos;  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&amp;#8211; Mike&lt;/p&gt;

&lt;p&gt;Those sound like really good candidates for consolidation. It might&lt;br/&gt;
also be worth looking at the dependency graph to find a lot of&lt;br/&gt;
co-occurence. If every module that depends on A also depends on B,&lt;br/&gt;
there&apos;s less of an argument to keep them separate.&lt;/p&gt;

&lt;p&gt;-Joey&lt;/p&gt;

&lt;p&gt;These probably can be cleaned up some now, as we now have a much more unified build, with a high level dependency management.&lt;br/&gt;
Careful, though: nifi-properties cannot be merged with anything else! It is on the root of the lib/ directory, so it cannot have any transitive dependencies at all.&lt;br/&gt;
-Mark&lt;/p&gt;</comment>
                            <comment id="14254532" author="joewitt" created="Sat, 20 Dec 2014 05:48:58 +0000"  >&lt;p&gt;The following libraries have been collapsed into a single &apos;nifi-utils&apos; library:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;core-flowfile-attributes&lt;/li&gt;
	&lt;li&gt;naive-search-ring-buffer&lt;/li&gt;
	&lt;li&gt;nifi-file-utils&lt;/li&gt;
	&lt;li&gt;nifi-stream-utils&lt;/li&gt;
	&lt;li&gt;remote-communications-utils&lt;/li&gt;
	&lt;li&gt;search-utils&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The nifi-utils library has no dependencies other than what the parent pom for it pulls in (which is basically nothing).&lt;/p&gt;
</comment>
                            <comment id="14254533" author="jira-bot" created="Sat, 20 Dec 2014 05:52:25 +0000"  >&lt;p&gt;Commit 1357a17b6752a78dd87c3de7b0323f22e52731f9 in incubator-nifi&apos;s branch refs/heads/develop from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joewitt&quot; class=&quot;user-hover&quot; rel=&quot;joewitt&quot;&gt;joewitt&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=1357a17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=incubator-nifi.git;h=1357a17&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/NIFI-189&quot; title=&quot;Collapse commons without dependency into a single library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NIFI-189&quot;&gt;&lt;del&gt;NIFI-189&lt;/del&gt;&lt;/a&gt; Collapsed several commons libs into one&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23nnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>