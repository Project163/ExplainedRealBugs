diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 613317ac..fda314fb 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -56,6 +56,14 @@ The <action> type attribute can be add,update,fix,remove.
      -->
 
     <body>
+        <release version="3.0.1" date="June 2011" description="
+This is a bug-fix release.
+        ">
+            <action issue="NET-409" dev="sebb" type="fix">
+            FTPClient truncates file (storeFile method).
+            Fix bug introduced in release 3.0.
+            </action>
+        </release>
         <release version="3.0" date="May 2011" description="
 This release fixes many bugs (see below), and adds new functionality:
   - basic support for IMAP and IMAPS
diff --git a/src/main/java/org/apache/commons/net/ftp/FTPClient.java b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
index 812b6417..a823da20 100644
--- a/src/main/java/org/apache/commons/net/ftp/FTPClient.java
+++ b/src/main/java/org/apache/commons/net/ftp/FTPClient.java
@@ -569,17 +569,19 @@ implements Configurable
                     CopyStreamEvent.UNKNOWN_STREAM_SIZE, __mergeListeners(csl),
                     false);
         }
-        finally
+        catch (IOException e)
         {
-            Util.closeQuietly(socket);
+            Util.closeQuietly(socket); // ignore close errors here
+            throw e;
         }
 
+        output.close(); // ensure the file is fully written
+        socket.close(); // done writing the file
         // Get the transfer response
         boolean ok = completePendingCommand();
         if (csl != null) {
             csl.cleanUp(); // fetch any outstanding keepalive replies
         }
-        output.close(); // we want to know about close failure
         return ok;
     }
 
