<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-707] FTPClient::listFiles() doesn&apos;t include files with spaces for AS400</title>
                <link>https://issues.apache.org/jira/browse/NET-707</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;For the FTP server on AS400 I got the different response size for FTPClient::listFiles() and FTPClient::listNames() (first one doesn&apos;t include file with spaces)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;TheOS400FTPEntryParser pattern is&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;private static final String REGEX =
    &quot;(\\S+)\\s+&quot;                  // user
    + &quot;(?:(\\d+)\\s+)?&quot;           // size, empty for members
    + &quot;(?:(\\S+)\\s+(\\S+)\\s+)?&quot; // date stuff, empty for members
    + &quot;(\\*STMF|\\*DIR|\\*FILE|\\*MEM)\\s+&quot;  // *STMF/*DIR/*FILE/*MEM
    + &quot;(?:(\\S+)\\s*)?&quot;;          // file name, missing, when CWD is a *FILE&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and the server response for LIST command&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;MYUSER 3 06/12/21 18:31:29 *STMF file with space.txt &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;doesn&apos;t match that regex.&lt;/p&gt;</description>
                <environment>&lt;p&gt;AS400 ftp server&lt;/p&gt;</environment>
        <key id="13415889">NET-707</key>
            <summary>FTPClient::listFiles() doesn&apos;t include files with spaces for AS400</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dsylaiev">Dmytro Sylaiev</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Dec 2021 18:33:07 +0000</created>
                <updated>Fri, 9 Dec 2022 15:33:10 +0000</updated>
                            <resolved>Sat, 26 Nov 2022 18:29:01 +0000</resolved>
                                                    <fixVersion>3.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17454828" author="garydgregory" created="Tue, 7 Dec 2021 20:15:15 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsylaiev&quot; class=&quot;user-hover&quot; rel=&quot;dsylaiev&quot;&gt;dsylaiev&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;What version of OS/400 are you running? From my understanding a NAME cannot contain spaces:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;*NAME                                                                    
     The qualifier is a character string that represents a name.  The     
     maximum length of the name is 256 bytes. The first character must be 
     alphabetic or one of the special characters, $, @, or #.  The        
     remaining characters can be alphanumeric, a period, an underscore,   
     or one of special characters, $, @, or #.  The name can also be a    
     string of characters starting and ending with double quotation marks 
     (&quot;) or enclosed in parentheses.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17455322" author="dsylaiev" created="Wed, 8 Dec 2021 15:34:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;the systemType value in FTPClient::createParser is &#160;OS/400 is the remote operating system. The TCP/IP version is &quot;V6R1M0&quot;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Linux native bash ftp client works well with fileName with spaces:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ftp&amp;gt; passive
Passive mode on.
ftp&amp;gt; cd /home
250-NAMEFMT set to 1.
250 &quot;/home&quot; is current directory.
ftp&amp;gt; ls
227 Entering Passive Mode (192,168,244,186,34,255).
125 List started.
NOTMYUSER &#160; &#160; &#160; &#160; &#160; 29550 10/12/08 18:33:53 *STMF &#160; &#160; &#160;AUD_DET_081210_183341_A1_Fichier_demandeurs.pdf
NOTMYUSER &#160; &#160; &#160; &#160; &#160; 13950 10/12/08 18:56:51 *STMF &#160; &#160; &#160;AUD
MYUSER &#160; &#160; &#160; &#160; &#160; &#160; &#160;3 06/12/21 18:31:29 *STMF &#160; &#160; &#160;file with space.txt
250 List completed.
ftp&amp;gt; syst
215 &#160;OS/400 is the remote operating system. The TCP/IP version is &quot;V6R1M0&quot;.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17466051" author="dsylaiev" created="Tue, 28 Dec 2021 10:04:40 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Any suggestions?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;P.S. I got information about server AS400 OS version: V7 R3 M0 and have empirical evidence that spaced are allowed on the OS level.&#160; Can we change the parser regex?&lt;/p&gt;</comment>
                            <comment id="17466150" author="sebb@apache.org" created="Tue, 28 Dec 2021 15:25:17 +0000"  >&lt;p&gt;It would be better to use the following, if it is supported:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir--&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir--&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;listFiles() uses a listing format that was designed for humans to read, and is subject to change.&lt;/p&gt;</comment>
                            <comment id="17470514" author="dsylaiev" created="Fri, 7 Jan 2022 10:35:06 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb&quot; class=&quot;user-hover&quot; rel=&quot;sebb&quot;&gt;sebb&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your idea, but mListDir returns an empty array on that server, and mListFile(&amp;lt;filePath&amp;gt;) always returns null (the result of&#160; sendCommand(FTPCmd.MLST, pathname) is 500).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I submitted a small PR with a fix which works on my side and tests were also OK:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-net/pull/95/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-net/pull/95/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17470643" author="sebb@apache.org" created="Fri, 7 Jan 2022 14:20:49 +0000"  >&lt;p&gt;OK, so the ftp server presumably does not support those commands.&lt;/p&gt;

&lt;p&gt;I&apos;ve had a look at the PR, and whilst it may support your test case, I&apos;m not sure it is sufficiently general. Also it appears to be more complicated than necessary.&lt;/p&gt;

&lt;p&gt;Does OS/400 support filenames which start with one or more spaces?&lt;br/&gt;
Can you experiment to see what the output is in such cases?&lt;/p&gt;

&lt;p&gt;If there is always a fixed number of spaces after the *STMF column then it will be easy to change the RE accordingly. If the number varies, then it may be impossible to detect such cases.&lt;/p&gt;</comment>
                            <comment id="17496234" author="dsylaiev" created="Tue, 22 Feb 2022 17:08:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sebb&quot; class=&quot;user-hover&quot; rel=&quot;sebb&quot;&gt;sebb&lt;/a&gt; I got the AS400 env on pub400.com. It&apos;s not possible to create file with spaces with IBM i env, but when I connect to the same server using SSH it supports filename with spaces and with leading spaces as well.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ssh limmy@pub400.com -p 2222
limmy@pub400.com&apos;s password:
Welcome to PUB400!
$ ls
&apos; a1.txt&apos; &#160;file &#160;tempDir
$ pwd
/home/LIMMY
$ uname -a
OS400 WWW 4 7 007800001B91 powerpc Os
$ touch abc\ abc
$ ls
&apos; a1.txt&apos; &#160;&apos;abc abc&apos; &#160;file &#160;tempDir&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17496372" author="sebb@apache.org" created="Tue, 22 Feb 2022 22:44:27 +0000"  >&lt;p&gt;Thanks! So what does FTP show for these files?&lt;/p&gt;</comment>
                            <comment id="17496635" author="dsylaiev" created="Wed, 23 Feb 2022 10:12:40 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ftp&amp;gt; passive
Passive mode on.
ftp&amp;gt; ls
227 Entering Passive Mode (185,113,5,134,186,70).
125 List started.
-rwxrwx--- &#160; 1 LIMMY &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 Feb 08 08:15 file
-rw-r--r-- &#160; 1 LIMMY &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 Feb 08 08:34 &#160;a1.txt
drwxrwx--- &#160; 2 LIMMY &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; 8192 Feb 08 13:16 tempDir
-rw-r--r-- &#160; 1 LIMMY &#160; &#160;0 &#160; &#160; &#160; &#160; &#160; &#160; &#160;0 Feb 22 09:23 abc abc
250 List completed.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17497065" author="sebb@apache.org" created="Wed, 23 Feb 2022 23:06:14 +0000"  >&lt;p&gt;Thanks!&lt;br/&gt;
So it looks like there is a single space between the end of the timestamp and the start of the filename.&lt;br/&gt;
That should make it possible to allow for leading spaces in file names.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xftk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>