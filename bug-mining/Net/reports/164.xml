<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-448] Self signed cert or ca not installed on client but FTPS still works</title>
                <link>https://issues.apache.org/jira/browse/NET-448</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;I am using vsftpd ftp server on centos with our own self signed root ca certificate.&lt;/p&gt;

&lt;p&gt;I have not installed the self signed root certificate on the client machine. Neither am I setting the Trust Manager on the FTPSClient object, using X509TrustManager instance pointing to my physical cert file.&lt;/p&gt;

&lt;p&gt;But I am still able to use the FTPSClient bundled in any of the following jar file and send/receive the files.&lt;br/&gt;
commons-net-2.0.jar &lt;br/&gt;
commons-net-3.1.jar &lt;br/&gt;
commons-net-2.0-jdk14.jar (from zehon)&lt;/p&gt;

&lt;p&gt;I was expecting that I will have to either install the self signed root ca on the client machine Or set Trust Manager etc.&lt;/p&gt;

&lt;p&gt;Can you please explain the behavior? &lt;/p&gt;</description>
                <environment>&lt;p&gt;client: Windows SP sp4, jdk 1.6.0_24&lt;br/&gt;
server: Linux 2.6.32-220.4.2.el6.i686 running vsFTPd 2.2.2&lt;br/&gt;
apache lib: commons-net-2.0.jar or commons-net-3.1.jar or commons-net-2.0-jdk14.jar (from zehon)&lt;/p&gt;</environment>
        <key id="12544963">NET-448</key>
            <summary>Self signed cert or ca not installed on client but FTPS still works</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pant_deepak">Deepak Pant</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Mar 2012 17:02:25 +0000</created>
                <updated>Wed, 17 Apr 2013 19:55:45 +0000</updated>
                            <resolved>Mon, 5 Mar 2012 16:32:02 +0000</resolved>
                                    <version>2.0</version>
                    <version>3.1</version>
                                                    <component>FTP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13221557" author="bogdro" created="Sat, 3 Mar 2012 11:28:14 +0000"  >&lt;p&gt;The current default TrustManager of the FTPSClient only checks if the certificate&apos;s dates are valid (if the current date not eariler then the certificate&apos;s &quot;valid from&quot; date and not later than the certificate&apos;s &quot;valid till&quot; date). It doesn&apos;t check the certificate&apos;s chain, domains or issuers. Currently, you need to install your own TrustManager (perhaps use a default provided by the JRE, if any) to do that.&lt;/p&gt;</comment>
                            <comment id="13221581" author="sebb@apache.org" created="Sat, 3 Mar 2012 13:17:29 +0000"  >&lt;p&gt;Try using&lt;/p&gt;

&lt;p&gt;FTPSClient.setTrustManager(null)&lt;/p&gt;

&lt;p&gt;This will cause the default JVM implementation to be used.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;Should probably update the Javadoc to make this clearer&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13221606" author="pant_deepak" created="Sat, 3 Mar 2012 15:16:36 +0000"  >&lt;p&gt;Thanks for prompt responses. I have tried FTPSClient.setTrustManager(null) and there is no difference in behavior.&lt;/p&gt;

&lt;p&gt;Just to clarify the sequence of events:&lt;br/&gt;
1. My program establishes connection to FTPS server in explicit mode using SSL or TLS protocol.&lt;br/&gt;
2. Server returns the public certificate installed at the server, which happens to be self-signed certificate in my case.&lt;br/&gt;
3. The default implementation of TrustManager checks if the public cert returned is valid in terms of dates. I think this is X509Certificate.checkValidity() method call, which only looks at dates.&lt;br/&gt;
4. No additional checks are being made to check if public cert was issued by a CA or self signed etc.&lt;/p&gt;

</comment>
                            <comment id="13221612" author="sebb@apache.org" created="Sat, 3 Mar 2012 15:31:31 +0000"  >&lt;p&gt;Are you sure you set the trust manager to null before opening the connection?&lt;/p&gt;</comment>
                            <comment id="13222360" author="pant_deepak" created="Mon, 5 Mar 2012 14:05:51 +0000"  >&lt;p&gt;Thanks. If I do FTPSClient.setTrustManager(null) then I get following exception. So if I really want, I can provide my own implementation of X509TrustManager class, which will write some additional code in checkServerTrusted() method. Besides calling X509Certificate.checkValidity(), it can also do checks for self signed cert authority etc.&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No X509TrustManager implementation available&lt;/p&gt;

&lt;p&gt;        at com.sun.net.ssl.internal.ssl.BaseSSLSocketImpl.a(DashoA12275)&lt;br/&gt;
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.a(DashoA12275)&lt;br/&gt;
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.a(DashoA12275)&lt;br/&gt;
        at com.sun.net.ssl.internal.ssl.SunJSSE_az.a(DashoA12275)&lt;br/&gt;
        at com.sun.net.ssl.internal.ssl.SunJSSE_az.a(DashoA12275)&lt;br/&gt;
===&lt;/p&gt;</comment>
                            <comment id="13222437" author="sebb@apache.org" created="Mon, 5 Mar 2012 16:30:47 +0000"  >&lt;p&gt;I get the response shown below when using the FTP client example to connect to Apache FTP server with a local certificate and using TrustManager = none.&lt;/p&gt;

&lt;p&gt;Perhaps the different result is because of the certificate I&apos;m using.&lt;/p&gt;

&lt;p&gt;Without the &quot;-T none&quot;, the command logs in OK.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;set CLASSPATH=commons-net-examples-3.1.jar;commons-net-3.1.jar
java examples/ftp/FTPClientExample -l -p true -T none localhost:990 anonymous password
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Could not connect to server.
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: una
ble to find valid certification path to requested target
        at com.sun.net.ssl.internal.ssl.Alerts.getSSLException(Alerts.java:174)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.fatal(SSLSocketImpl.java:1731)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:241)
        at com.sun.net.ssl.internal.ssl.Handshaker.fatalSE(Handshaker.java:235)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1206)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)
        at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)
        at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:925)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1170)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1197)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1181)
        at org.apache.commons.net.ftp.FTPSClient.sslNegotiation(FTPSClient.java:265)
        at org.apache.commons.net.ftp.FTPSClient._connectAction_(FTPSClient.java:201)
        at org.apache.commons.net.SocketClient.connect(SocketClient.java:172)
        at org.apache.commons.net.SocketClient.connect(SocketClient.java:192)
        at examples.ftp.FTPClientExample.main(FTPClientExample.java:249)
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certific
ation path to requested target
        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:323)
        at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:217)
        at sun.security.validator.Validator.validate(Validator.java:218)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)
        at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)
        at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)
        ... 12 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
        at sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:174)
        at java.security.cert.CertPathBuilder.build(CertPathBuilder.java:238)
        at sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:318)
        ... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13222439" author="sebb@apache.org" created="Mon, 5 Mar 2012 16:32:02 +0000"  >&lt;p&gt;The current behaviour is by design.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230149</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0y653:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>197464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>