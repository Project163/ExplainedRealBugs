<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-597] FTP fails to parse listings for Solaris 10 FTPd in Japanese</title>
                <link>https://issues.apache.org/jira/browse/NET-597</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;Commons Net lists no files for Solaris 10 FTPd (or WU-FTPD) when the server language is Japanese.&lt;/p&gt;

&lt;p&gt;Here is the result of the sample client.&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;java -jar commons-net-examples-3.5.jar FTPClientExample -l 192.168.2.160 root password&lt;br/&gt;
220 unknown FTP server ready.&lt;br/&gt;
Connected to 192.168.2.160 on 21&lt;br/&gt;
USER *******&lt;br/&gt;
331 Password required for root.&lt;br/&gt;
PASS *******&lt;br/&gt;
230 User root logged in.&lt;br/&gt;
SYST&lt;br/&gt;
215 UNIX Type: L8 Version: SUNOS&lt;br/&gt;
Remote system is UNIX Type: L8 Version: SUNOS&lt;br/&gt;
TYPE A&lt;br/&gt;
200 Type set to A.&lt;br/&gt;
PASV&lt;br/&gt;
227 Entering Passive Mode (192,168,2,160,235,174)&lt;br/&gt;
LIST&lt;br/&gt;
150 Opening ASCII mode data connection for /bin/ls.&lt;br/&gt;
226 Transfer complete.&lt;br/&gt;
NOOP&lt;br/&gt;
200 NOOP command successful.&lt;br/&gt;
QUIT&lt;br/&gt;
221-You have transferred 0 bytes in 0 files.&lt;br/&gt;
221-Total traffic for this session was 3426 bytes in 1 transfers.&lt;br/&gt;
221-Thank you for using the FTP service on unknown.&lt;br/&gt;
221 Goodbye.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I identified the cause in the source code. I&apos;m attaching a patch later.&lt;/p&gt;

&lt;p&gt;On Japanese Solaris 10, the result of &quot;ls -l&quot; is like below;&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;drwxrwxrwt  10 root     sys          875  7&#26376;  7&#26085;  14:18 tmp&lt;br/&gt;
drwxr-xr-x  40 root     sys         1024  6&#26376; 13&#26085; 2014&#24180; usr&lt;br/&gt;
drwxr-xr-x  47 root     sys         1024  6&#26376; 13&#26085; 2014&#24180; var&lt;br/&gt;
dr-xr-xr-x   6 root     root         512  2&#26376; 25&#26085;  15:11 vol&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you can see, the timestamp has the postfixes of &quot;month&quot;, &quot;date&quot;, and &quot;year&quot; in Japanese.&lt;br/&gt;
The current REGEX of UnixFTPEntryParser doesn&apos;t work for it because of the Japanese postfixes.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Server: Solaris 10 Japanese&lt;br/&gt;
Client: Windows 7&lt;/p&gt;</environment>
        <key id="12987388">NET-597</key>
            <summary>FTP fails to parse listings for Solaris 10 FTPd in Japanese</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="htaniura">Hiroki Taniura</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jul 2016 06:56:54 +0000</created>
                <updated>Tue, 23 Jun 2020 16:51:31 +0000</updated>
                            <resolved>Tue, 23 Jun 2020 16:51:31 +0000</resolved>
                                    <version>3.4</version>
                    <version>3.5</version>
                                                    <component>FTP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15365712" author="htaniura" created="Thu, 7 Jul 2016 07:07:25 +0000"  >&lt;p&gt;Here is the patch to parse the Japanese timestamp.&lt;br/&gt;
After applying it, the sample client lists the files.&lt;/p&gt;
&lt;div class=&quot;panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;panelContent&quot;&gt;
&lt;p&gt;220 unknown FTP server ready.&lt;br/&gt;
Connected to 192.168.2.160 on 21&lt;br/&gt;
USER *******&lt;br/&gt;
331 Password required for root.&lt;br/&gt;
PASS *******&lt;br/&gt;
230 User root logged in.&lt;br/&gt;
SYST&lt;br/&gt;
215 UNIX Type: L8 Version: SUNOS&lt;br/&gt;
Remote system is UNIX Type: L8 Version: SUNOS&lt;br/&gt;
TYPE A&lt;br/&gt;
200 Type set to A.&lt;br/&gt;
PASV&lt;br/&gt;
227 Entering Passive Mode (192,168,2,160,8,40)&lt;br/&gt;
LIST&lt;br/&gt;
150 Opening ASCII mode data connection for /bin/ls.&lt;br/&gt;
226 Transfer complete.&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------   1 root     root         848  2&#12539;? 25??  15:57 .ICEauthority&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------    1 root     root          848 .ICEauthority&lt;br/&gt;
drwx------   3 root     root         512  6&#12539;? 13?? 2014?&#65507; .Trash&lt;br/&gt;
drwx------    3 root     root          512 .Trash&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------   1 root     root         150  2&#12539;? 25??  15:57 .Xauthority&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------    1 root     root          150 .Xauthority&lt;br/&gt;
drwxr-xr-x   9 root     root         512  2&#12539;? 25??  15:57 .dt&lt;br/&gt;
drwxr-xr-x    9 root     root          512 .dt&lt;br/&gt;
-rwxr-xr-x   1 root     root        5111  6&#12539;? 13?? 2014?&#65507; .dtprofile&lt;br/&gt;
-rwxr-xr-x    1 root     root         5111 .dtprofile&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------   1 root     root          16  6&#12539;? 13?? 2014?&#65507; .esd_auth&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------    1 root     root           16 .esd_auth&lt;br/&gt;
drwx------   4 root     root         512  2&#12539;? 25??  15:57 .gconf&lt;br/&gt;
drwx------    4 root     root          512 .gconf&lt;br/&gt;
drwx------   2 root     root         512  7&#12539;?  7??  15:53 .gconfd&lt;br/&gt;
drwx------    2 root     root          512 .gconfd&lt;br/&gt;
drwx------   4 root     root         512  6&#12539;? 13?? 2014?&#65507; .gnome&lt;br/&gt;
drwx------    4 root     root          512 .gnome&lt;br/&gt;
drwx------   7 root     root         512  2&#12539;? 25??  15:57 .gnome2&lt;br/&gt;
drwx------    7 root     root          512 .gnome2&lt;br/&gt;
drwx------   2 root     root         512  6&#12539;? 13?? 2014?&#65507; .gnome2_private&lt;br/&gt;
drwx------    2 root     root          512 .gnome2_private&lt;br/&gt;
drwxr-xr-x   2 root     root         512  6&#12539;? 13?? 2014?&#65507; .gstreamer-0.8&lt;br/&gt;
drwxr-xr-x    2 root     root          512 .gstreamer-0.8&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-   1 root     root          77  6&#12539;? 13?? 2014?&#65507; .gtkrc-1.2-gnome2&lt;br/&gt;
&lt;del&gt;rw-r&lt;/del&gt;&lt;del&gt;r&lt;/del&gt;-    1 root     root           77 .gtkrc-1.2-gnome2&lt;br/&gt;
drwx------   3 root     root         512  6&#12539;? 13?? 2014?&#65507; .iiim&lt;br/&gt;
drwx------    3 root     root          512 .iiim&lt;br/&gt;
drwxr-xr-x   3 root     root         512  6&#12539;? 13?? 2014?&#65507; .java&lt;br/&gt;
drwxr-xr-x    3 root     root          512 .java&lt;br/&gt;
drwx------   3 root     root         512  6&#12539;? 13?? 2014?&#65507; .metacity&lt;br/&gt;
drwx------    3 root     root          512 .metacity&lt;br/&gt;
drwxr-xr-x   3 root     root         512  6&#12539;? 13?? 2014?&#65507; .nautilus&lt;br/&gt;
drwxr-xr-x    3 root     root          512 .nautilus&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------   1 root     root         865  7&#12539;?  7??  14:30 .recently-used&lt;br/&gt;
&lt;del&gt;rw&lt;/del&gt;------    1 root     root          865 .recently-used&lt;br/&gt;
drwxr-xr-x   3 root     root         512  6&#12539;? 13?? 2014?&#65507; .softwareupdate&lt;br/&gt;
drwxr-xr-x    3 root     root          512 .softwareupdate&lt;br/&gt;
drwx------   3 root     root         512  6&#12539;? 13?? 2014?&#65507; .thumbnails&lt;br/&gt;
drwx------    3 root     root          512 .thumbnails&lt;br/&gt;
drwxr-xr-x   4 root     root         512  2&#12539;? 25??  15:35 Desktop&lt;br/&gt;
drwxr-xr-x    4 root     root          512 Desktop&lt;br/&gt;
drwxr-xr-x   2 root     root         512  6&#12539;? 13?? 2014?&#65507; Documents&lt;br/&gt;
drwxr-xr-x    2 root     root          512 Documents&lt;br/&gt;
lrwxrwxrwx   1 root     root           9  6&#12539;? 13?? 2014?&#65507; bin -&amp;gt; ./usr/bin&lt;br/&gt;
lrwxrwxrwx    1 root     root            9 bin&lt;br/&gt;
drwxr-xr-x   8 root     sys          512  6&#12539;? 13?? 2014?&#65507; boot&lt;br/&gt;
drwxr-xr-x    8 root     sys           512 boot&lt;br/&gt;
drwxr-xr-x   3 root     nobody       512  6&#12539;? 13?? 2014?&#65507; cdrom&lt;br/&gt;
drwxr-xr-x    3 root     nobody        512 cdrom&lt;br/&gt;
drwxr-xr-x  19 root     sys         4608  2&#12539;? 25??  15:11 dev&lt;br/&gt;
drwxr-xr-x   19 root     sys          4608 dev&lt;br/&gt;
drwxr-xr-x   2 root     sys          512  2&#12539;? 25??  15:10 devices&lt;br/&gt;
drwxr-xr-x    2 root     sys           512 devices&lt;br/&gt;
drwxr-xr-x  90 root     sys         4608  2&#12539;? 25??  15:11 etc&lt;br/&gt;
drwxr-xr-x   90 root     sys          4608 etc&lt;br/&gt;
drwxr-xr-x   3 root     sys          512  6&#12539;? 13?? 2014?&#65507; export&lt;br/&gt;
drwxr-xr-x    3 root     sys           512 export&lt;br/&gt;
dr-xr-xr-x   1 root     root           1  2&#12539;? 25??  15:11 home&lt;br/&gt;
dr-xr-xr-x    1 root     root            1 home&lt;br/&gt;
drwxr-xr-x   3 root     root         512  6&#12539;? 14?? 2014?&#65507; home1&lt;br/&gt;
drwxr-xr-x    3 root     root          512 home1&lt;br/&gt;
drwxr-xr-x  20 root     sys          512  6&#12539;? 13?? 2014?&#65507; kernel&lt;br/&gt;
drwxr-xr-x   20 root     sys           512 kernel&lt;br/&gt;
drwxr-xr-x   8 root     bin         5632  6&#12539;? 13?? 2014?&#65507; lib&lt;br/&gt;
drwxr-xr-x    8 root     bin          5632 lib&lt;br/&gt;
drwx------   2 root     root        8192  6&#12539;? 13?? 2014?&#65507; lost+found&lt;br/&gt;
drwx------    2 root     root         8192 lost+found&lt;br/&gt;
drwxr-xr-x   2 root     sys          512  6&#12539;? 13?? 2014?&#65507; mnt&lt;br/&gt;
drwxr-xr-x    2 root     sys           512 mnt&lt;br/&gt;
dr-xr-xr-x   1 root     root           1  2&#12539;? 25??  15:11 net&lt;br/&gt;
dr-xr-xr-x    1 root     root            1 net&lt;br/&gt;
drwxr-xr-x   5 root     sys          512  6&#12539;? 13?? 2014?&#65507; opt&lt;br/&gt;
drwxr-xr-x    5 root     sys           512 opt&lt;br/&gt;
drwxr-xr-x   5 root     sys          512  6&#12539;? 13?? 2014?&#65507; platform&lt;br/&gt;
drwxr-xr-x    5 root     sys           512 platform&lt;br/&gt;
dr-xr-xr-x  89 root     root      457152  7&#12539;?  7??  16:04 proc&lt;br/&gt;
dr-xr-xr-x   89 root     root       457152 proc&lt;br/&gt;
drwxr-xr-x   2 root     sys         1024  6&#12539;? 13?? 2014?&#65507; sbin&lt;br/&gt;
drwxr-xr-x    2 root     sys          1024 sbin&lt;br/&gt;
drwxr-xr-x   4 root     root         512  6&#12539;? 13?? 2014?&#65507; system&lt;br/&gt;
drwxr-xr-x    4 root     root          512 system&lt;br/&gt;
drwxrwxrwt  10 root     sys          875  7&#12539;?  7??  15:08 tmp&lt;br/&gt;
drwxrwxrwx   10 root     sys           875 tmp&lt;br/&gt;
drwxr-xr-x  40 root     sys         1024  6&#12539;? 13?? 2014?&#65507; usr&lt;br/&gt;
drwxr-xr-x   40 root     sys          1024 usr&lt;br/&gt;
drwxr-xr-x  47 root     sys         1024  6&#12539;? 13?? 2014?&#65507; var&lt;br/&gt;
drwxr-xr-x   47 root     sys          1024 var&lt;br/&gt;
dr-xr-xr-x   6 root     root         512  2&#12539;? 25??  15:11 vol&lt;br/&gt;
dr-xr-xr-x    6 root     root          512 vol&lt;br/&gt;
NOOP&lt;br/&gt;
200 NOOP command successful.&lt;br/&gt;
QUIT&lt;br/&gt;
221-You have transferred 0 bytes in 0 files.&lt;br/&gt;
221-Total traffic for this session was 3423 bytes in 1 transfers.&lt;br/&gt;
221-Thank you for using the FTP service on unknown.&lt;br/&gt;
221 Goodbye.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The timestamp listed is broken, but it is much better than not listing files at all.&lt;/p&gt;</comment>
                            <comment id="15376795" author="sebb@apache.org" created="Thu, 14 Jul 2016 11:39:43 +0000"  >&lt;p&gt;Are the month and day always shown in the same order?&lt;br/&gt;
And is the same character always used?&lt;br/&gt;
As far as I can tell, they are the following Unicode characters in the examples you give:&lt;/p&gt;

&lt;p&gt;\u6708 = month&lt;br/&gt;
\u65e5 = day&lt;br/&gt;
\u5e74 = year&lt;/p&gt;

&lt;p&gt;Does that look right?&lt;br/&gt;
I think it would be better to look for a specific match rather than just accepting an arbitrary suffix.&lt;/p&gt;</comment>
                            <comment id="15376934" author="sebb@apache.org" created="Thu, 14 Jul 2016 13:46:57 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1752661&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1752661&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/NET-597&quot; title=&quot;FTP fails to parse listings for Solaris 10 FTPd in Japanese&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-597&quot;&gt;&lt;del&gt;NET-597&lt;/del&gt;&lt;/a&gt; FTP fails to parse listings for Solaris 10 FTPd in Japanese&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/net/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/parser/UnixFTPEntryParser.java&lt;br/&gt;
    commons/proper/net/trunk/src/test/java/org/apache/commons/net/ftp/parser/UnixFTPEntryParserTest.java&lt;/p&gt;</comment>
                            <comment id="15376980" author="sebb@apache.org" created="Thu, 14 Jul 2016 14:10:17 +0000"  >&lt;p&gt;If you want to test this, the fixes will be included in the snapshot builds from &lt;/p&gt;

&lt;p&gt;commons-net-3.6-20160714.135523-6&lt;/p&gt;

&lt;p&gt;onwards.&lt;/p&gt;

&lt;p&gt;Note that SNAPSHOT builds are not supported, have not been QAed, and should not be used in production.&lt;/p&gt;</comment>
                            <comment id="15396806" author="htaniura" created="Thu, 28 Jul 2016 02:34:23 +0000"  >&lt;p&gt;Thank you so much for fixing it. It works with &quot;-e EUC-JP&quot;.&lt;br/&gt;
However, I have 2 reasons why I accepted aribitary suffix in the attached patch.&lt;/p&gt;

&lt;p&gt;1. Other languages&lt;br/&gt;
I don&apos;t know other languages, but some languages might have such suffix as well.&lt;/p&gt;

&lt;p&gt;2. Control encoding&lt;br/&gt;
Wrong control encoding usually results in broken filenames and users realize they have to change encoding.&lt;br/&gt;
However, in this case files are not listed at all and users might think there are no files.&lt;/p&gt;</comment>
                            <comment id="17143107" author="sebb@apache.org" created="Tue, 23 Jun 2020 16:51:31 +0000"  >&lt;p&gt;Underlying issue fixed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12816579" name="ParseJapanese.patch" size="819" author="htaniura" created="Thu, 7 Jul 2016 07:07:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30mwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>