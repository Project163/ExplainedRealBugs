<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-579] SSL/TLS SocketClients do not verify the hostname against the certificate</title>
                <link>https://issues.apache.org/jira/browse/NET-579</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;Every subclass of SocketClient that does SSL/TLS will never verify the hostname of the server against the certificate. This means that any valid certificate for any CA in the default trust store will be accepted without error.&lt;/p&gt;

&lt;p&gt;SocketClient should be modified to store the hostname, and SMTPSClient/FTPSClient/IMAPSClient/POP3SClient should use it when negotiating SSL/TLS.&lt;/p&gt;

&lt;p&gt;Java 1.7 has support for verifying the hostname if SSLParameters.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;) is used.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.7 (earlier versions cannot verify the hostname)&lt;/p&gt;</environment>
        <key id="12858047">NET-579</key>
            <summary>SSL/TLS SocketClients do not verify the hostname against the certificate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="simonarlott">Simon Arlott</reporter>
                        <labels>
                            <label>security</label>
                    </labels>
                <created>Sat, 22 Aug 2015 09:14:14 +0000</created>
                <updated>Thu, 26 Nov 2015 16:37:16 +0000</updated>
                            <resolved>Mon, 24 Aug 2015 00:25:57 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4</fixVersion>
                                    <component>FTP</component>
                    <component>IMAP</component>
                    <component>POP3</component>
                    <component>SMTP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="14707954" author="simonarlott" created="Sat, 22 Aug 2015 09:17:36 +0000"  >&lt;p&gt;Note, on Android there is no SSLParameters.setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;) and the only viable option appears to be to extend the client (to gain access to &lt;em&gt;socket&lt;/em&gt;) and use HttpsURLConnection.getDefaultHostnameVerifier() to perform the check.&lt;/p&gt;</comment>
                            <comment id="14708046" author="bogdro" created="Sat, 22 Aug 2015 14:21:32 +0000"  >&lt;p&gt;The patch looks nice, but you can already achieve this functionality - you can always set  your own TrustManager in the client instance, e.g. FTPSClient.setTrustManager(), or use a custom SocketFactory.&lt;br/&gt;
This wouldn&apos;t require Java 7 by Commons-NET, would allow to set even more parameters than these and enable any certificate validations you would wish. Sure, it&apos;s less convenient, because you have to code more on the client side.&lt;br/&gt;
I&apos;m not a Commons-NET developer, but I don&apos;t think I&apos;d like such a change in the code. The problem is that a certificate can be issued to a host name and thus connecting using an IP address would fail or vice versa (a test certificate issued for an IP address inside some local network, and clients connecting with hostnames by a local DNS).&lt;/p&gt;</comment>
                            <comment id="14708090" author="simonarlott" created="Sat, 22 Aug 2015 16:52:56 +0000"  >&lt;p&gt;The connection is supposed to fail when it&apos;s not secure, and there is no TrustManager that checks the hostname. There&apos;s also no API in commons-net to replace the SSLSocketFactory that is used. Even with a custom TrustManager/SSLSocketFactory you still don&apos;t have access to the hostname because the code in commons-net discards it.&lt;/p&gt;</comment>
                            <comment id="14708543" author="sebb@apache.org" created="Sun, 23 Aug 2015 21:31:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;&quot;The connection is supposed to fail when it&apos;s not secure&quot;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is that documented anywhere in NET?&lt;/p&gt;

&lt;p&gt;I agree with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bogdro&quot; class=&quot;user-hover&quot; rel=&quot;bogdro&quot;&gt;bogdro&lt;/a&gt; that it does not seem sensible to change NET as suggested.&lt;/p&gt;

&lt;p&gt;However if there are some additions to the API needed in order to support custom code please provide details.&lt;/p&gt;</comment>
                            <comment id="14708548" author="simonarlott" created="Sun, 23 Aug 2015 21:37:58 +0000"  >&lt;p&gt;The hostname has to be retained (there&apos;s no API change required for that).&lt;/p&gt;

&lt;p&gt;For Java 1.7+, there needs to be a way to call setEndpointIdentificationAlgorithm(&quot;HTTPS&quot;) on the SSLParameters for the SSLSocket, before negotiating TLS.&lt;/p&gt;

&lt;p&gt;For everything else (i.e. Android), there needs to a post-TLS verification check using the SSLSession (which can be obtained from the SSLSocket) and the hostname. This could either be a protected method that has to be overridden or a callback interface that takes a hostname and SSLSocket/SSLSession and returns a boolean verification result.&lt;/p&gt;</comment>
                            <comment id="14708551" author="sebb@apache.org" created="Sun, 23 Aug 2015 21:40:36 +0000"  >&lt;p&gt;Have you a patch that would meet the requirements?&lt;/p&gt;</comment>
                            <comment id="14708573" author="simonarlott" created="Sun, 23 Aug 2015 22:35:53 +0000"  >&lt;p&gt;This patch adds setEndpointCheckingEnabled() for use with Java 1.7+ and setHostnameVerifier() for use with older JVMs and Android.&lt;/p&gt;

&lt;p&gt;It&apos;s not enabled by default, primarily because the default implementation of HostnameVerifier that Java provides always returns false...&lt;/p&gt;</comment>
                            <comment id="14708599" author="sebb@apache.org" created="Mon, 24 Aug 2015 00:25:57 +0000"  >&lt;p&gt;Thanks very much.&lt;br/&gt;
Patch applied with some minor changes (e.g. always blocks for conditional statements)&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1697287&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1697287&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/NET-579&quot; title=&quot;SSL/TLS SocketClients do not verify the hostname against the certificate&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-579&quot;&gt;&lt;del&gt;NET-579&lt;/del&gt;&lt;/a&gt; SSL/TLS SocketClients do not verify the hostname against the certificate&lt;/p&gt;

&lt;p&gt;Added:&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/util/SSLSocketUtils.java   (with props)&lt;br/&gt;
Modified:&lt;br/&gt;
    commons/proper/net/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/SocketClient.java&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/FTPSClient.java&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/imap/IMAPSClient.java&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/pop3/POP3SClient.java&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/smtp/SMTPSClient.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12751872" name="NET-579.patch" size="7659" author="simonarlott" created="Sat, 22 Aug 2015 09:24:48 +0000"/>
                            <attachment id="12751936" name="NET-579_2.patch" size="24366" author="simonarlott" created="Sun, 23 Aug 2015 22:35:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j8t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>