<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-610] FTPClient.mlistFile incorrectly handles MLST reply</title>
                <link>https://issues.apache.org/jira/browse/NET-610</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;By RFC 3659 server must start fact with space character. But some inaccurate realisations reply without starting space.&lt;br/&gt;
But org.apache.commons.net.ftp.FTPClient.mlistFile() skips leading character even it is not a space:&lt;br/&gt;
    public FTPFile mlistFile(String pathname) throws IOException&lt;br/&gt;
    {&lt;br/&gt;
        boolean success = FTPReply.isPositiveCompletion(sendCommand(FTPCmd.MLST, pathname));&lt;br/&gt;
        if (success)&lt;/p&gt;
{
            String entry = getReplyStrings()[1].substring(1); // skip leading space for parser
            return MLSxEntryParser.parseEntry(entry);
        }
&lt;p&gt; else &lt;/p&gt;
{
            return null;
        }&lt;br/&gt;
    }&lt;br/&gt;
&lt;br/&gt;
&lt;br/&gt;
I think it is wrong. The method should throw exception, if first character is not a space. Or does not remove starting char (and should be some option responsible for that behaviour) if it is not a space.&lt;br/&gt;
&lt;br/&gt;
my workaround in overriden method:&lt;br/&gt;
    public FTPFile mlistFile(String pathname) throws IOException {&lt;br/&gt;
        final boolean success = FTPReply.isPositiveCompletion(sendCommand(FTPCmd.MLST, pathname));&lt;br/&gt;
        if (success) {
            final String reply = getReplyStrings()[1];
            final String entry = reply.charAt(0) == &apos; &apos; ? reply.substring(1) : reply;
            return MLSxEntryParser.parseEntry(entry);
        } else {            return null;        }
&lt;p&gt;    }&lt;/p&gt;</description>
                <environment>&lt;p&gt;using some FTP-server incorrectly releasing RFC 3659. For example xlight ftp server (&lt;a href=&quot;https://www.xlightftpd.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.xlightftpd.com/&lt;/a&gt;)&lt;/p&gt;</environment>
        <key id="13040594">NET-610</key>
            <summary>FTPClient.mlistFile incorrectly handles MLST reply</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="xuthus">Sergey Yanzin</reporter>
                        <labels>
                            <label>easyfix</label>
                            <label>patch</label>
                    </labels>
                <created>Mon, 6 Feb 2017 10:50:50 +0000</created>
                <updated>Tue, 14 Feb 2017 22:22:37 +0000</updated>
                            <resolved>Tue, 7 Feb 2017 15:40:46 +0000</resolved>
                                    <version>3.5</version>
                                    <fixVersion>3.6</fixVersion>
                                    <component>FTP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="15854261" author="sebb@apache.org" created="Mon, 6 Feb 2017 16:04:22 +0000"  >&lt;p&gt;Is there a public server that can be used to test any changes against?&lt;/p&gt;</comment>
                            <comment id="15855646" author="xuthus" created="Tue, 7 Feb 2017 09:41:19 +0000"  >&lt;p&gt;No, I used FTPClient to internal work, in production it works fine, in local (home) environment I used the first available free FTP server - XLight in my case (&lt;a href=&quot;https://www.xlightftpd.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.xlightftpd.com/&lt;/a&gt;). It is very simple to install and configure. I can help if necessary.&lt;/p&gt;</comment>
                            <comment id="15855679" author="sebb@apache.org" created="Tue, 7 Feb 2017 10:07:54 +0000"  >&lt;p&gt;AFAICT XLight is Windows-only; I don&apos;t use that any more.&lt;/p&gt;

&lt;p&gt;I suggest you contact the XLight producers and report the bug.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure it&apos;s a good idea to permit non-conforming behaviour here.&lt;br/&gt;
However it probably would be worth throwing an Exception.&lt;/p&gt;</comment>
                            <comment id="15855754" author="xuthus" created="Tue, 7 Feb 2017 10:56:27 +0000"  >&lt;p&gt;I wrote XLight authors already.&lt;/p&gt;

&lt;p&gt;And I agree, throwing an exception is BETTER than just skipping first character without check if it is a space indeed. That&apos;s what I wrote earlier exactly &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15855851" author="sebb@apache.org" created="Tue, 7 Feb 2017 12:06:22 +0000"  >&lt;p&gt;&lt;del&gt;Closing this issue in favour of &lt;a href=&quot;https://issues.apache.org/jira/browse/NET-611&quot; title=&quot;FTP does not validate command reply syntax fully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-611&quot;&gt;&lt;del&gt;NET-611&lt;/del&gt;&lt;/a&gt; which adds generic reply checking&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="15855867" author="xuthus" created="Tue, 7 Feb 2017 12:19:00 +0000"  >&lt;p&gt;Sebb, are you sure &lt;a href=&quot;https://issues.apache.org/jira/browse/NET-611&quot; title=&quot;FTP does not validate command reply syntax fully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-611&quot;&gt;&lt;del&gt;NET-611&lt;/del&gt;&lt;/a&gt; covers &lt;a href=&quot;https://issues.apache.org/jira/browse/NET-610&quot; title=&quot;FTPClient.mlistFile incorrectly handles MLST reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-610&quot;&gt;&lt;del&gt;NET-610&lt;/del&gt;&lt;/a&gt;? I wrote about space preceding line containig facts about file (MLST command). &lt;a href=&quot;https://issues.apache.org/jira/browse/NET-611&quot; title=&quot;FTP does not validate command reply syntax fully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-611&quot;&gt;&lt;del&gt;NET-611&lt;/del&gt;&lt;/a&gt; is about spaces between code and text...&lt;/p&gt;

&lt;p&gt;Again with a sample:&lt;br/&gt;
250- Begin&lt;br/&gt;
size=30;type=file;modify=20170205062802; /archive/2017/02/06/mfcrevise/1.txt&lt;br/&gt;
250 End&lt;/p&gt;

&lt;p&gt;I talked about second line (&quot;size=...&quot;) that by RFC should start from space and FTPClient skips first character without checking if it is a space really.&lt;/p&gt;

&lt;p&gt;RFC requires such a reply:&lt;br/&gt;
250- Begin&lt;br/&gt;
&amp;lt;space&amp;gt;size=30;type=file;modify=20170205062802; /archive/2017/02/06/mfcrevise/1.txt&lt;br/&gt;
250 End&lt;/p&gt;</comment>
                            <comment id="15856168" author="sebb@apache.org" created="Tue, 7 Feb 2017 15:05:59 +0000"  >&lt;p&gt;Sorry, I misunderstood the problem.&lt;/p&gt;

&lt;p&gt;(I think I can see why they may have omitted the space: RFC 959 says that a space must precede a number for multi-line responses. However RFC 3659, which defines the MLST command, says that there must be a space before non-numerics as well.)&lt;/p&gt;</comment>
                            <comment id="15856217" author="sebb@apache.org" created="Tue, 7 Feb 2017 15:40:46 +0000"  >&lt;p&gt;Author: sebb&lt;br/&gt;
Date: Tue Feb  7 15:33:35 2017&lt;br/&gt;
New Revision: 1782012&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1782012&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1782012&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/NET-610&quot; title=&quot;FTPClient.mlistFile incorrectly handles MLST reply&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-610&quot;&gt;&lt;del&gt;NET-610&lt;/del&gt;&lt;/a&gt; FTPClient.mlistFile incorrectly handles MLST reply&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/net/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/FTPClient.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39nnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>