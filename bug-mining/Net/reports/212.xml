<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-566] UnixFTPEntryParser Drops Leading Spaces from File Names</title>
                <link>https://issues.apache.org/jira/browse/NET-566</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;The &lt;tt&gt;UnixFTPEntryParser&lt;/tt&gt; &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/parser/UnixFTPEntryParser.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;regular expression &lt;/a&gt; (line 106) consumes all spaces between the timestamp and the file name.&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;FTPFile.name&lt;/tt&gt; property ends up getting a value with stripped leading spaces.&lt;/p&gt;

&lt;p&gt;Reported by Spring Integration user at &lt;a href=&quot;https://jira.spring.io/browse/INT-3591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jira.spring.io/browse/INT-3591&lt;/a&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;OSX client, Linux ftpd&lt;/p&gt;</environment>
        <key id="12764403">NET-566</key>
            <summary>UnixFTPEntryParser Drops Leading Spaces from File Names</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="grussell">Gary Russell</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Dec 2014 17:12:14 +0000</created>
                <updated>Mon, 6 Feb 2017 16:27:38 +0000</updated>
                            <resolved>Sat, 17 Jan 2015 23:16:25 +0000</resolved>
                                    <version>3.3</version>
                                    <fixVersion>3.4</fixVersion>
                                    <component>FTP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14262596" author="sebb@apache.org" created="Thu, 1 Jan 2015 16:52:26 +0000"  >&lt;p&gt;Thanks for the very clear bug report.&lt;/p&gt;

&lt;p&gt;Are Unix ftp listings guaranteed to always have just one space after the timestamp?&lt;br/&gt;
As far as I can tell, there is no standard format; the listing is intended to be human readable, not machine parseable.&lt;br/&gt;
What if some servers return 2 spaces?&lt;br/&gt;
So before the Regex can be changed, we need to be sure that changing it would not break other usages.&lt;/p&gt;


&lt;p&gt;Note that if the server supports MLSD or MLST that would be a better solution.&lt;/p&gt;</comment>
                            <comment id="14262628" author="grussell" created="Thu, 1 Jan 2015 18:24:10 +0000"  >&lt;p&gt;Yes, I agree it&apos;s tricky to change this; it&apos;s a little odd to have a file start with a space, but possible, I guess (based on the reporter&apos;s issue).&lt;/p&gt;

&lt;p&gt;Thanks for the pointer to the MLSD/T - I&apos;ll take a look at changing our code to use that by default and falling back to LIST if it&apos;s not supported.&lt;/p&gt;

&lt;p&gt;Maybe that&apos;s something that could be considered in a future version of the &lt;tt&gt;FTPClient&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="14262684" author="sebb@apache.org" created="Thu, 1 Jan 2015 23:26:16 +0000"  >&lt;p&gt;Unix file names can contain just about any character except &apos;/&apos;.&lt;br/&gt;
They can start with a space, but creating such files is not a good idea as it makes them tricky to process.&lt;br/&gt;
Unix even supports a file name consisting of a single space.&lt;/p&gt;

&lt;p&gt;NET already supports MLSD, for example:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html#mlistDir%28%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html#mlistDir%28%29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and MLST&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html#mlistFile%28java.lang.String%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html#mlistFile%28java.lang.String%29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;See also&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html#listNames%28%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/proper/commons-net/javadocs/api-3.3/org/apache/commons/net/ftp/FTPClient.html#listNames%28%29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;which may be useful.&lt;/p&gt;

&lt;p&gt;However note that MLSD/MLST are not supported by all ftp servers. Not sure about NLST.&lt;/p&gt;</comment>
                            <comment id="14262685" author="sebb@apache.org" created="Thu, 1 Jan 2015 23:31:36 +0000"  >&lt;p&gt;Having said that, it would be good if NET could support file names with leading spaces (it already supports embedded spaces) provided that this can be done in a compatible way.&lt;/p&gt;</comment>
                            <comment id="14262960" author="grussell" created="Fri, 2 Jan 2015 15:46:33 +0000"  >&lt;p&gt;Right; I realize NET already supports &lt;tt&gt;MLS*&lt;/tt&gt;. What I am suggesting is a new method, maybe &lt;tt&gt;smartList(pathname)&lt;/tt&gt; which will use MLST if supported and fall back to LIST if not.&lt;/p&gt;

&lt;p&gt;That&apos;s what I am going to try to do in our code, but it would be nice if the NET library handled it for me.&lt;/p&gt;</comment>
                            <comment id="14262968" author="sebb@apache.org" created="Fri, 2 Jan 2015 15:57:01 +0000"  >&lt;p&gt;I see.&lt;br/&gt;
Please file a new JIRA issue for this enhancement.&lt;br/&gt;
Patches welcome!&lt;/p&gt;</comment>
                            <comment id="14263118" author="grussell" created="Fri, 2 Jan 2015 18:46:09 +0000"  >&lt;p&gt;FYI, there is a bug with &lt;tt&gt;MLST&lt;/tt&gt; in the Apache Mina &lt;tt&gt;FtpServer&lt;/tt&gt; (see &lt;a href=&quot;https://issues.apache.org/jira/browse/FTPSERVER-464&quot; title=&quot;Incorrect Format For MLST Response&quot; class=&quot;issue-link&quot; data-issue-key=&quot;FTPSERVER-464&quot;&gt;FTPSERVER-464&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;Also the standard linux &lt;tt&gt;ftpd&lt;/tt&gt; doesn&apos;t support MLST so it won&apos;t help the original reporter of this issue.&lt;/p&gt;</comment>
                            <comment id="14263126" author="sebb@apache.org" created="Fri, 2 Jan 2015 18:57:07 +0000"  >&lt;p&gt;OK, useful info&lt;/p&gt;

&lt;p&gt;What about NLST? Does Linux support that in standard ftp?&lt;/p&gt;</comment>
                            <comment id="14263209" author="grussell" created="Fri, 2 Jan 2015 20:11:45 +0000"  >&lt;p&gt;Yes, NLST works (the filenames are returned with the leading space in the path), but it&apos;s not very useful if the target directory has subdirectories because you can&apos;t filter them out; but I&apos;ll check with him if it would work for his use case.&lt;/p&gt;</comment>
                            <comment id="14263280" author="grussell" created="Fri, 2 Jan 2015 22:20:39 +0000"  >&lt;p&gt;Here&apos;s one solution (patch attached); run the client with&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;-Dorg.apache.commons.net.ftp.systemType=UNIX_STRICT&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;or an appropriately configured &lt;tt&gt;FTPClientConfig&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14281406" author="sebb@apache.org" created="Sat, 17 Jan 2015 15:14:17 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;I&apos;ve checked many of the ftp mirrors used by the ASF and they all return a single space between date and filename, so I&apos;m leaning towards making that the default behaviour. But it should still be possible to select the original behaviour if necessary.&lt;/p&gt;

&lt;p&gt;As part of this, the following commit allows the user to disable leading space trimming:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1652621&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1652621&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/NET-566&quot; title=&quot;UnixFTPEntryParser Drops Leading Spaces from File Names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-566&quot;&gt;&lt;del&gt;NET-566&lt;/del&gt;&lt;/a&gt; UnixFTPEntryParser Drops Leading Spaces from File Names&lt;br/&gt;
Add option to parser to not skip leading spaces&lt;br/&gt;
TODO make this the default but still allow reversion&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/parser/UnixFTPEntryParser.java&lt;br/&gt;
    commons/proper/net/trunk/src/test/java/org/apache/commons/net/ftp/parser/UnixFTPEntryParserTest.java&lt;/p&gt;

&lt;p&gt;More work remains to be done on this to ensure that all existing uses of the Unix parser are catered for.&lt;br/&gt;
e.g. the NT Parser may use the Unix parser, it must be possible for it to continue to use the old parser settings if the default is changed.&lt;/p&gt;</comment>
                            <comment id="14281590" author="sebb@apache.org" created="Sat, 17 Jan 2015 23:16:25 +0000"  >&lt;p&gt;RL: &lt;a href=&quot;http://svn.apache.org/r1652696&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1652696&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/NET-566&quot; title=&quot;UnixFTPEntryParser Drops Leading Spaces from File Names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-566&quot;&gt;&lt;del&gt;NET-566&lt;/del&gt;&lt;/a&gt; UnixFTPEntryParser Drops Leading Spaces from File Names&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/net/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/FTPClientConfig.java&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/parser/DefaultFTPFileEntryParserFactory.java&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/ftp/parser/UnixFTPEntryParser.java&lt;br/&gt;
    commons/proper/net/trunk/src/test/java/org/apache/commons/net/ftp/parser/UnixFTPEntryParserTest.java&lt;/p&gt;</comment>
                            <comment id="14602994" author="grussell" created="Fri, 26 Jun 2015 14:53:36 +0000"  >&lt;p&gt;Any ideas when 3.4 will be released? I see 3.3 is 2 years old.&lt;/p&gt;</comment>
                            <comment id="15854294" author="sebb@apache.org" created="Mon, 6 Feb 2017 16:27:38 +0000"  >&lt;p&gt;FTR 3.4 was released 2015-11-26&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13032524">NET-609</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12689886" name="unixParser.patch" size="5222" author="grussell" created="Fri, 2 Jan 2015 22:20:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i23vtj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>