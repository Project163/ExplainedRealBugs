<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-689] Hostname is not set on the SSLSocket causing isEndpointCheckingEnabled to fail</title>
                <link>https://issues.apache.org/jira/browse/NET-689</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;When connecting with ssl to an ftps server, the hostname used to connect to the server is not copied to the SSLSocket, instead the sockets ip address is used. This applies to both with `AUTH TLS` and implicit SSL.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The problem seems to be line 912 in FTPSclient.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; f.createSocket(socket, socket.getInetAddress().getHostAddress(), socket.getPort(), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;which forces the new SSLSocket to have the ip address as peer hostname, which makes it impossible to use `isEndpointCheckingEnabled` as the hostname is the ip address, not the hostname that appears in the certificate.&lt;/p&gt;

&lt;p&gt;LFTP &lt;a href=&quot;https://lftp.yar.ru/)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lftp.yar.ru/&lt;/a&gt;&#160;correctly connects to the hostname if the name matches, and disconnects if the name doesn&apos;t match the hostname, as does OpenSSL.&lt;/p&gt;

&lt;p&gt;The fix would be very easy. Just change the line into&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; f.createSocket(socket, _hostname_, socket.getPort(), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and it works. I tested this by simply debugging the code&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13330641">NET-689</key>
            <summary>Hostname is not set on the SSLSocket causing isEndpointCheckingEnabled to fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ck1962">Charlie</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Oct 2020 22:39:18 +0000</created>
                <updated>Sat, 3 Oct 2020 15:18:46 +0000</updated>
                            <resolved>Sat, 3 Oct 2020 13:45:20 +0000</resolved>
                                    <version>3.7</version>
                                    <fixVersion>3.7.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17206554" author="garydgregory" created="Fri, 2 Oct 2020 23:20:52 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ck1962&quot; class=&quot;user-hover&quot; rel=&quot;ck1962&quot;&gt;ck1962&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thank you for your report. May you please create a PR on &lt;a href=&quot;https://github.com/apache/commons-net/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GitHub&lt;/a&gt;&#160;with your proposed change along with a unit test?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="17206618" author="ck1962" created="Sat, 3 Oct 2020 06:30:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-net/pull/63&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-net/pull/63&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17206699" author="garydgregory" created="Sat, 3 Oct 2020 13:45:20 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ck1962&quot; class=&quot;user-hover&quot; rel=&quot;ck1962&quot;&gt;ck1962&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In git master with different tests.&lt;/p&gt;

&lt;p&gt;Please verify and close.&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="17206703" author="ck1962" created="Sat, 3 Oct 2020 13:56:47 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I don&apos;t understand what you mean?&lt;/p&gt;

&lt;p&gt;Different tests?&lt;/p&gt;

&lt;p&gt;What do you mean verify and close?&lt;/p&gt;

&lt;p&gt;BR&lt;/p&gt;</comment>
                            <comment id="17206705" author="ck1962" created="Sat, 3 Oct 2020 14:01:20 +0000"  >&lt;p&gt;I can see that the code has been merged into commons-net master, with more testing added (ty!). The same code I wrote is there as well in 7827f0549526920b91aa2e62d2a1e7682c36e1e7, so I suppose that covers the verify?&lt;/p&gt;

&lt;p&gt;Either way, thanks for speedy merge.&lt;/p&gt;

&lt;p&gt;BR&lt;/p&gt;</comment>
                            <comment id="17206711" author="garydgregory" created="Sat, 3 Oct 2020 14:21:46 +0000"  >&lt;p&gt;&amp;gt;verify&lt;/p&gt;

&lt;p&gt;Verify that the behavior in git master is correct.&lt;/p&gt;

&lt;p&gt;&amp;gt;close&lt;/p&gt;

&lt;p&gt;Close this ticket.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17206728" author="ck1962" created="Sat, 3 Oct 2020 15:18:46 +0000"  >&lt;p&gt;Verified working in 3.7.2-SNAPSHOT&#160;7827f0549526920b91aa2e62d2a1e7682c36e1e7&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0j4nc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>