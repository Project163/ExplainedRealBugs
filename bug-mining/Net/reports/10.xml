<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:43:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-148] Relaxed condition in __getReply causes other failures.</title>
                <link>https://issues.apache.org/jira/browse/NET-148</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;In FTP.java&apos;s __getReply() method, this do/while loop reads multi-line responses from the server:&lt;/p&gt;

&lt;p&gt;            do&lt;/p&gt;
            {
                line = _controlInput.readLine();
...
            }
&lt;p&gt;            while (!(line.length() &amp;gt;= 4 &amp;amp;&amp;amp; line.charAt(3) != &apos;-&apos; &amp;amp;&amp;amp;&lt;br/&gt;
                     Character.isDigit(line.charAt(0))));&lt;br/&gt;
            // This is too strong a condition because of non-conforming ftp&lt;br/&gt;
            // servers like ftp.funet.fi which sent 226 as the last line of a&lt;br/&gt;
            // 426 multi-line reply in response to ls /.  We relax the condition to&lt;br/&gt;
            // test that the line starts with a digit rather than starting with&lt;br/&gt;
            // the code.&lt;br/&gt;
            // line.startsWith(code)));&lt;br/&gt;
        }&lt;/p&gt;

&lt;p&gt;Note the comment and the commented-out termination condition.  I think the relevant spec is &lt;a href=&quot;http://www.ietf.org/rfc/rfc0959.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.ietf.org/rfc/rfc0959.txt&lt;/a&gt;  and the section is &quot;4.2.  FTP REPLIES&quot;.  This is causing problems with the return from the STAT command from Geocities&apos; FTP servers.  Here is an example reply.&lt;/p&gt;

&lt;p&gt;211- ftp.us.geocities.com FTP server status: &lt;br/&gt;
     Version wu-2.6.0(48) Tue Jan 2 16:30:15 PST 2007 &lt;br/&gt;
 Connected to 144.212.217.85 &lt;br/&gt;
 Logged in anonymously &lt;br/&gt;
 TYPE: ASCII, FORM: Nonprint; STRUcture: File; transfer MODE: Stream &lt;br/&gt;
 No data connection &lt;br/&gt;
 0 data bytes received in 0 files &lt;br/&gt;
 0 data bytes transmitted in 0 files &lt;br/&gt;
0 data bytes total in 0 files &lt;br/&gt;
57 traffic bytes received in 0 transfers &lt;br/&gt;
733 traffic bytes transmitted in 0 transfers &lt;br/&gt;
834 traffic bytes total in 0 transfers &lt;br/&gt;
211  End of status&lt;/p&gt;

&lt;p&gt;Note that the line &quot;0 data bytes total in 0 files&quot; starts with a digit, but it isn&apos;t a reply code.  This prematurely halts reading of lines from the server, and the remaining lines will look like a reply from the next command.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12359831">NET-148</key>
            <summary>Relaxed condition in __getReply causes other failures.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rwinston@eircom.net">Rory Winston</assignee>
                                    <reporter username="matthewsim">Matthew Simoneau</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Jan 2007 23:30:37 +0000</created>
                <updated>Thu, 2 May 2013 02:29:12 +0000</updated>
                            <resolved>Thu, 21 Feb 2008 23:05:51 +0000</resolved>
                                    <version>1.4</version>
                    <version>Nightly Builds</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12485219" author="rwinston@eircom.net" created="Thu, 29 Mar 2007 15:29:31 +0000"  >&lt;p&gt;I have tried this with Geocities servers, but I cant reproduce the issue with 2.0 RC? Can you provide some more info?&lt;/p&gt;</comment>
                            <comment id="12498047" author="matthewsim" created="Tue, 22 May 2007 22:43:49 +0000"  >&lt;p&gt;This is still broken in the nightly build.  Here is a simple Java program that will reproduce this.&lt;/p&gt;

&lt;p&gt;import org.apache.commons.net.ftp.FTPClient;&lt;/p&gt;

&lt;p&gt;public class FTPTest {&lt;br/&gt;
    public static void main(String[] args) throws Exception &lt;/p&gt;
{
        FTPClient ftpClient = new FTPClient();
        ftpClient.connect(&quot;ftp.us.geocities.com&quot;,21);
        ftpClient.login(&quot;anonymous&quot;,&quot;anonymous@example.com&quot;);
        ftpClient.getStatus();
        System.out.println(ftpClient.listFiles());
        ftpClient.disconnect();
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;getStatus() stops reading lines prematurely, which sets up listFiles() to fail.&lt;/p&gt;</comment>
                            <comment id="12498429" author="rwinston@eircom.net" created="Wed, 23 May 2007 23:59:43 +0000"  >&lt;p&gt;Thanks Matthew , that is very helpful. I can reproduce the issue now. I think we may need to modify that condition to fix this. &lt;/p&gt;</comment>
                            <comment id="12570706" author="rwinston@eircom.net" created="Wed, 20 Feb 2008 14:46:05 +0000"  >&lt;p&gt;Ok, I think the best way to do this may be to revert to the previous (more strict) behaviour for default operation, but add a parameter (settable on the FTPClient) which allows the user to enable strict or lenient multiline parsing.&lt;/p&gt;</comment>
                            <comment id="12571222" author="rwinston@eircom.net" created="Thu, 21 Feb 2008 23:05:51 +0000"  >&lt;p&gt;This is now fixed. In order to get the broken test case to work, add the following line before connect():&lt;/p&gt;

&lt;p&gt;ftpClient.setStrictMultilineParsing(true);&lt;/p&gt;

&lt;p&gt;This will enable the client to parse the responses correctly.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12382064">NET-174</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>154485</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0y8hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>197844</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>