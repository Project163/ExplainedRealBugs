<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:45:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-593] HostnameVerifier is called with ip addess instead of the provided hostname</title>
                <link>https://issues.apache.org/jira/browse/NET-593</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;When TLS is used (not StartTLS) on port 465, the HostnameVerifier is checking for the ip address, not the hostname. This results in a failure on each connection.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12976775">NET-593</key>
            <summary>HostnameVerifier is called with ip addess instead of the provided hostname</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="weule@7b5.de">J&#246;rg Weule</reporter>
                        <labels>
                    </labels>
                <created>Wed, 8 Jun 2016 08:30:03 +0000</created>
                <updated>Tue, 14 Jun 2016 17:11:53 +0000</updated>
                            <resolved>Tue, 14 Jun 2016 17:11:53 +0000</resolved>
                                    <version>3.4</version>
                                                    <component>POP3</component>
                    <component>SMTP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="15325556" author="sebb@apache.org" created="Sat, 11 Jun 2016 00:29:03 +0000"  >&lt;p&gt;The HostnameVerifier is provided by the user application, not the NET library.&lt;/p&gt;

&lt;p&gt;If you can show otherwise, please provide sample code.&lt;/p&gt;</comment>
                            <comment id="15326987" author="weule@7b5.de" created="Mon, 13 Jun 2016 08:30:06 +0000"  >&lt;p&gt;Here some code to look at ...&lt;/p&gt;</comment>
                            <comment id="15326989" author="weule@7b5.de" created="Mon, 13 Jun 2016 08:30:18 +0000"  >&lt;p&gt;I expcet the following HostnameVerifier to print the hostname of the smtpclient.connect(hostname,port).&lt;/p&gt;

&lt;p&gt;    public static class TinyHostnameVerifier implements HostnameVerifier&lt;br/&gt;
    {&lt;br/&gt;
        @Override&lt;br/&gt;
        public boolean verify(String expectedHostName, SSLSession sslSession)&lt;/p&gt;
        {
            System.out.println(String.format(&quot;INFO  : HostnameVerifier.verify(%s, ...)&quot;, expectedHostName));
            return true ;
        }
&lt;p&gt;    }&lt;/p&gt;


&lt;p&gt;asmtpClient = new AuthenticatingSMTPClient(false, context);&lt;br/&gt;
asmtpClient.setHostnameVerifier(new TinyHostnameVerifier() );&lt;br/&gt;
asmtpClient.connect(hostname, port);&lt;/p&gt;</comment>
                            <comment id="15327033" author="sebb@apache.org" created="Mon, 13 Jun 2016 09:09:54 +0000"  >&lt;p&gt;OK, I see now.&lt;/p&gt;

&lt;p&gt;What you are saying is that the HostnameVerifier is being &lt;b&gt;called&lt;/b&gt; with the IP address instead of the hostname.&lt;/p&gt;</comment>
                            <comment id="15327054" author="weule@7b5.de" created="Mon, 13 Jun 2016 09:24:42 +0000"  >&lt;p&gt;Yes, exactly. The same is at the POP3SClient.&lt;br/&gt;
There are HostnameVerifiers that should work in some cases:&lt;br/&gt;
org.apache.http.conn.ssl.BrowserCompatHostnameVerifier&lt;/p&gt;</comment>
                            <comment id="15327055" author="sebb@apache.org" created="Mon, 13 Jun 2016 09:25:10 +0000"  >&lt;p&gt;I have applied a fix:&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1748152&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1748152&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/NET-593&quot; title=&quot;HostnameVerifier is called with ip addess instead of the provided hostname&quot; class=&quot;issue-link&quot; data-issue-key=&quot;NET-593&quot;&gt;&lt;del&gt;NET-593&lt;/del&gt;&lt;/a&gt; HostnameVerifier is called with ip addess instead of the provided hostname&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/net/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/SocketClient.java&lt;/p&gt;</comment>
                            <comment id="15327086" author="sebb@apache.org" created="Mon, 13 Jun 2016 09:45:52 +0000"  >&lt;p&gt;Would you be able to confirm that this fixes the issue for you?&lt;/p&gt;</comment>
                            <comment id="15328222" author="weule@7b5.de" created="Mon, 13 Jun 2016 20:41:16 +0000"  >&lt;p&gt;Thanks a lot for your quick change.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;hostname&lt;/em&gt; must be set before &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/warning.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; connect() for TLS and should be set before or after connect() for SartTLS . &lt;br/&gt;
Please make sure that the connect(...) is not calling another connet(...) setting the &lt;em&gt;hostname&lt;/em&gt; back to null.&lt;br/&gt;
Keeping this in mind, your code should work with a small last change on exactly that source file.&lt;/p&gt;

&lt;p&gt;The constructor and disconnect() is setting &lt;em&gt;hostname&lt;/em&gt; to null, what is fine for me.&lt;/p&gt;</comment>
                            <comment id="15328633" author="sebb@apache.org" created="Mon, 13 Jun 2016 23:43:45 +0000"  >&lt;p&gt;Sorry, I don&apos;t follow.&lt;/p&gt;

&lt;p&gt;Are you saying that there is a problem with the change?&lt;br/&gt;
If so. what is the problem?&lt;/p&gt;</comment>
                            <comment id="15329216" author="weule@7b5.de" created="Tue, 14 Jun 2016 10:03:57 +0000"  >&lt;p&gt;The connect(String host, int port) has to set &lt;em&gt;hostname&lt;/em&gt; at the beginning, since &lt;em&gt;connectAction&lt;/em&gt;() is calling the HostnameVerifier if isImplicit.&lt;br/&gt;
This means, public void connect(InetAddress host, int port) must not set &lt;em&gt;hostname&lt;/em&gt; to null at the first statement, because this is what the HostnameVerifier gets to verify.&lt;br/&gt;
The following is working:&lt;/p&gt;

&lt;p&gt;public void connect(String hostname, int port)&lt;br/&gt;
    throws SocketException, IOException&lt;br/&gt;
    {&lt;br/&gt;
        //connect(InetAddress.getByName(hostname), port);&lt;br/&gt;
        &lt;em&gt;hostname&lt;/em&gt; = hostname;&lt;br/&gt;
        &lt;em&gt;socket&lt;/em&gt; = &lt;em&gt;socketFactory&lt;/em&gt;.createSocket();&lt;br/&gt;
        if (receiveBufferSize != -1) &lt;/p&gt;
{
            _socket_.setReceiveBufferSize(receiveBufferSize);
        }&lt;br/&gt;
        if (sendBufferSize != -1) {
            _socket_.setSendBufferSize(sendBufferSize);
        }&lt;br/&gt;
        &lt;em&gt;socket&lt;/em&gt;.connect(new InetSocketAddress(InetAddress.getByName(hostname), port), connectTimeout);&lt;br/&gt;
        &lt;em&gt;connectAction&lt;/em&gt;();&lt;br/&gt;
    }&lt;br/&gt;
&lt;br/&gt;
Please change  public void connect(String hostname, int port, InetAddress localAddr, int localPort) in the same way:&lt;br/&gt;
&lt;br/&gt;
    public void connect(String hostname, int port,&lt;br/&gt;
                        InetAddress localAddr, int localPort)&lt;br/&gt;
    {&lt;br/&gt;
        &lt;em&gt;hostname&lt;/em&gt; = hostname;&lt;br/&gt;
        &lt;em&gt;socket&lt;/em&gt; = &lt;em&gt;socketFactory&lt;/em&gt;.createSocket();&lt;br/&gt;
        if (receiveBufferSize != -1) {            _socket_.setReceiveBufferSize(receiveBufferSize);        }
&lt;p&gt;        if (sendBufferSize != -1) &lt;/p&gt;
{
            _socket_.setSendBufferSize(sendBufferSize);
        }
&lt;p&gt;        &lt;em&gt;socket&lt;/em&gt;.bind(new InetSocketAddress(localAddr, localPort));&lt;br/&gt;
        &lt;em&gt;socket&lt;/em&gt;.connect(new InetSocketAddress(InetAddress.getByName(hostname), port), connectTimeout);&lt;br/&gt;
        &lt;em&gt;connectAction&lt;/em&gt;();&lt;br/&gt;
    }&lt;/p&gt;

</comment>
                            <comment id="15329300" author="sebb@apache.org" created="Tue, 14 Jun 2016 10:52:43 +0000"  >&lt;p&gt;Please double-check the current code &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;As far as I can tell, I already did all that you say is necessary in r1748152&lt;/p&gt;

&lt;p&gt;If there is still a bug, please provide a patch against trunk.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/net/trunk/src/main/java/org/apache/commons/net/SocketClient.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/commons/proper/net/trunk/src/main/java/org/apache/commons/net/SocketClient.java?view=markup&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15329854" author="weule@7b5.de" created="Tue, 14 Jun 2016 16:45:19 +0000"  >&lt;p&gt;Dear Sebb, Thanks a lot. It&apos;s resolved now. &amp;#8211; J&#246;rg&lt;/p&gt;

&lt;p&gt;P.S.: public void connect(String hostname) calls a method setting the &lt;em&gt;hostname&lt;/em&gt; as well.&lt;/p&gt;</comment>
                            <comment id="15329915" author="sebb@apache.org" created="Tue, 14 Jun 2016 17:11:53 +0000"  >&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1748445&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1748445&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
Unnecessary; done by connect(String,int)&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/net/trunk/src/main/java/org/apache/commons/net/SocketClient.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2z58v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>