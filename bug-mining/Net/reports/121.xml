<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:44:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[NET-276] NNTPClient has problems with group listings for large groups.</title>
                <link>https://issues.apache.org/jira/browse/NET-276</link>
                <project id="12310487" key="NET">Commons Net</project>
                    <description>&lt;p&gt;The following command causes a MalformedServerReplyException on my usenet server (astraweb):&lt;br/&gt;
client.listNewsgroups();&lt;/p&gt;

&lt;p&gt;Root Cause:&lt;br/&gt;
Caused by: org.apache.commons.net.MalformedServerReplyException: alt.binaries.boneless 2230918506 1662764743 y&lt;br/&gt;
	at org.apache.commons.net.nntp.NNTPClient.__readNewsgroupListing(NNTPClient.java:255)&lt;br/&gt;
	at org.apache.commons.net.nntp.NNTPClient.listNewsgroups(NNTPClient.java:930)&lt;br/&gt;
	at org.lievaart.jleecher.protocol.CommandFactory$2.doOnServer(CommandFactory.java:27)&lt;br/&gt;
	at org.lievaart.jleecher.protocol.NNTPProtocol.callServer(NNTPProtocol.java:33)&lt;br/&gt;
	... 2 more&lt;/p&gt;

&lt;p&gt;My hypothesis is that NNTP cannot parse the response, because one of the numbers exceeds the Integer range.&lt;br/&gt;
Locally I have applied the following quick fix to get it to work:&lt;/p&gt;

&lt;p&gt;public class NNTPClient extends NNTP {&lt;br/&gt;
...&lt;br/&gt;
...&lt;br/&gt;
...&lt;br/&gt;
	private NewsgroupInfo __parseNewsgroupListEntry(final String entry) {&lt;br/&gt;
		NewsgroupInfo result;&lt;br/&gt;
		StringTokenizer tokenizer;&lt;br/&gt;
		int lastNum, firstNum;&lt;br/&gt;
		String last, first, permission;&lt;/p&gt;

&lt;p&gt;		result = new NewsgroupInfo();&lt;br/&gt;
		tokenizer = new StringTokenizer(entry);&lt;/p&gt;

&lt;p&gt;		if (tokenizer.countTokens() &amp;lt; 4) &lt;/p&gt;
{
			return null;
		}

&lt;p&gt;		result._setNewsgroup(tokenizer.nextToken());&lt;br/&gt;
		last = tokenizer.nextToken();&lt;br/&gt;
		first = tokenizer.nextToken();&lt;br/&gt;
		permission = tokenizer.nextToken();&lt;/p&gt;


&lt;p&gt;		try {&lt;br/&gt;
			try &lt;/p&gt;
{
				lastNum = Integer.parseInt(last);
			}
&lt;p&gt; catch (NumberFormatException nfe) {&lt;br/&gt;
				if (last.matches(&quot;&lt;br class=&quot;atl-forced-newline&quot; /&gt;d++&quot;)) &lt;/p&gt;
{
					lastNum = Integer.MAX_VALUE;
				}
&lt;p&gt; else &lt;/p&gt;
{
					throw nfe;
				}
&lt;p&gt;			}&lt;/p&gt;</description>
                <environment></environment>
        <key id="12424460">NET-276</key>
            <summary>NNTPClient has problems with group listings for large groups.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="stressede">Erik</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 May 2009 17:28:25 +0000</created>
                <updated>Sat, 4 Jun 2011 19:26:26 +0000</updated>
                            <resolved>Wed, 9 Mar 2011 01:16:50 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>3.0</fixVersion>
                                    <component>NNTP</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12705389" author="stressede" created="Sun, 3 May 2009 07:07:34 +0000"  >&lt;p&gt;As of today, I also need to do this check when parsing firstNum.&lt;br/&gt;
Please note that my quick fix prevents the group listing from throwing a MalformedServerReplyException,&lt;br/&gt;
but at the same time makes it impossible to retrieve articles from the alt.binaries.boneless group.&lt;/p&gt;</comment>
                            <comment id="12706010" author="rwinston@eircom.net" created="Tue, 5 May 2009 12:15:44 +0000"  >&lt;p&gt;Changed all article count fields to use long instead of int.&lt;/p&gt;</comment>
                            <comment id="12929875" author="sebb@apache.org" created="Tue, 9 Nov 2010 01:42:44 +0000"  >&lt;p&gt;The change broke binary compatibility, so cannot be part of a 2.x release.&lt;br/&gt;
Also, the change was incomplete, as not all instances of article numbers etc. were changed.&lt;/p&gt;</comment>
                            <comment id="13004323" author="sebb@apache.org" created="Wed, 9 Mar 2011 01:16:50 +0000"  >&lt;p&gt;Fixed, and examples updated and working AFAICT&lt;/p&gt;</comment>
                            <comment id="13026112" author="battousaix" created="Thu, 28 Apr 2011 04:28:02 +0000"  >&lt;p&gt;I have tried your code, but there is an error with the following line.&lt;br/&gt;
result._setNewsgroup(tokenizer.nextToken());&lt;br/&gt;
_setNewsgroup method is not visible.  &lt;/p&gt;

&lt;p&gt;Were any other modifications made?&lt;/p&gt;</comment>
                            <comment id="13028156" author="sebb@apache.org" created="Tue, 3 May 2011 11:03:57 +0000"  >&lt;p&gt;See SVN trunk for the current code.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/net/trunk/src/main/java/org/apache/commons/net/nntp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/net/trunk/src/main/java/org/apache/commons/net/nntp&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12440129">NET-298</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72065</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 29 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0y95b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>197951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>