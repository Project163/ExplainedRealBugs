<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:34:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-556] jackrabbit-packagetype validator wrongly complains about OSGI configurations in tools/config path</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-556</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;scenario: content package project&lt;br/&gt;
&lt;a href=&quot;https://github.com/stefanseifert/filevault-package-maven-plugin-validation-issues/tree/master/content-packages/sample-content&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stefanseifert/filevault-package-maven-plugin-validation-issues/tree/master/content-packages/sample-content&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;compile package with filevault-package-maven-plugin 1.1.9-SNAPSHOT using filevault 3.5.2&lt;/p&gt;

&lt;p&gt;validation fails with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ERROR] ValidationViolation: &quot;jackrabbit-packagetype: Package of type &apos;CONTENT&apos; is not supposed to contain OSGi bundles or configurations!&quot;, filePath=jcr_root\content\filevaultsample\en\tools\config\.content.xml, nodePath=/content/filevaultsample/en/tools/config, line=3
[ERROR] ValidationViolation: &quot;jackrabbit-packagetype: Package of type &apos;CONTENT&apos; is not supposed to contain OSGi bundles or configurations!&quot;, filePath=jcr_root\content\filevaultsample\en\tools\config\.content.xml, nodePath=/content/filevaultsample/en/tools/config/jcr:content, line=8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but this is wrong, as the folder does not contain any OSGi configurations or bundle. it simply has the name /config - but this surely is not enough to &quot;prove&quot; it&apos;s illegal in a CONTENT package? any CMS user may create a path with a name like this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13398802">JCRVLT-556</key>
            <summary>jackrabbit-packagetype validator wrongly complains about OSGI configurations in tools/config path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Sep 2021 21:00:03 +0000</created>
                <updated>Tue, 5 Oct 2021 14:25:36 +0000</updated>
                            <resolved>Mon, 13 Sep 2021 15:49:44 +0000</resolved>
                                    <version>3.5.4</version>
                                    <fixVersion>3.5.4</fixVersion>
                                    <component>validation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17408582" author="kwin" created="Thu, 2 Sep 2021 06:39:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert&quot; class=&quot;user-hover&quot; rel=&quot;sseifert&quot;&gt;sseifert&lt;/a&gt; Thanks for the report. Is that a regression of 3.5.2? Would you be able to add a PR with a failing test case?&lt;/p&gt;</comment>
                            <comment id="17408663" author="sseifert@pro-vision.de" created="Thu, 2 Sep 2021 08:09:42 +0000"  >&lt;p&gt;if i switch back to filevault-package-maven-plugin 1.1.8 the problem does not occur (which is based on filevault 3.5.0).&lt;br/&gt;
will try to come up with a PR.&lt;/p&gt;</comment>
                            <comment id="17408667" author="kwin" created="Thu, 2 Sep 2021 08:14:24 +0000"  >&lt;p&gt;This seems to be a regression of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-538&quot; title=&quot;PackageTypeValidator: Improve robustness of bundle/configuration and subpackage detection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-538&quot;&gt;&lt;del&gt;JCRVLT-538&lt;/del&gt;&lt;/a&gt; which detects all xml files below &lt;tt&gt;/apps/.../config|install/....xml&lt;/tt&gt; incorrectly as &lt;tt&gt;sling:osgiConfig&lt;/tt&gt; nodes.&lt;/p&gt;</comment>
                            <comment id="17408682" author="sseifert@pro-vision.de" created="Thu, 2 Sep 2021 08:38:27 +0000"  >&lt;p&gt;there is a conceptual problem in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/blob/d759ef289e6f46c652288af8ddc6d5cb42da3281/vault-validation/src/main/java/org/apache/jackrabbit/vault/validation/spi/impl/PackageTypeValidator.java#L108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/blob/d759ef289e6f46c652288af8ddc6d5cb42da3281/vault-validation/src/main/java/org/apache/jackrabbit/vault/validation/spi/impl/PackageTypeValidator.java#L108&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;i&apos;ve debugged, and the input to this method is (in my case on windows): &lt;tt&gt;content\filevaultsample\en\tools\config\.content.xml&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;ValidationExecutor.filePathToNodePath translates this to &lt;tt&gt;/content/filevaultsample/en/tools/config/.content.xml&lt;/tt&gt; - which is imho not correct, because the &quot;.content.xml&quot; is not part of the node path, only part of the file system layout.&lt;/p&gt;

&lt;p&gt;this (wrong) node path than is flagged as &quot;this is an osgi config&quot;, because if it would be something other than .content.xml it&apos;s likely an osgi config.&lt;/p&gt;

&lt;p&gt;i could provide a PR to add asserts for paths like this and fix the regex excluding it, but is it correct that ValidationExecutor.filePathToNodePath translates the file system path this way?&lt;/p&gt;</comment>
                            <comment id="17408687" author="kwin" created="Thu, 2 Sep 2021 08:42:43 +0000"  >&lt;p&gt;I think the PackageTypeValidator needs to implement DocumentViewXmlValidator (again) to properly distinguish other node types from &lt;tt&gt;sling:osgiConfig&lt;/tt&gt;. Using the file name only is not sufficient, as it is totally valid to have a regular node of arbitrary type in a file named &lt;tt&gt;&amp;lt;nodename&amp;gt;.xml&lt;/tt&gt;. If you just provide a failing test, I can pick it up from there.&lt;/p&gt;</comment>
                            <comment id="17409127" author="sseifert@pro-vision.de" created="Thu, 2 Sep 2021 21:24:23 +0000"  >&lt;p&gt;i&apos;ve created a simple test case: &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/165&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/165&lt;/a&gt;&lt;br/&gt;
but i&apos;m not sure if it&apos;s too synthetic and we probably need a full integration test here (but i did not find a better example i could adapt looking at the other test cases)&lt;/p&gt;</comment>
                            <comment id="17414275" author="kwin" created="Mon, 13 Sep 2021 15:49:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/5c2cfb491c3ec5835eb1000c48426ab7ab60a37a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/5c2cfb491c3ec5835eb1000c48426ab7ab60a37a&lt;/a&gt; contains the fix and a real integration test.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13385318">JCRVLT-538</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0uils:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>