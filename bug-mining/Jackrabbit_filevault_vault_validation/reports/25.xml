<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:34:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-496] Clarify usage of oak:index in application packages</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-496</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;Although according to &lt;a href=&quot;https://issues.apache.org/jira/browse/JCRVLT-170&quot; title=&quot;Introduce the concept of package types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCRVLT-170&quot;&gt;&lt;del&gt;JCRVLT-170&lt;/del&gt;&lt;/a&gt; application packages must not contain oak index definitions, this is necessary though for AEM as a Cloud Service (&lt;a href=&quot;https://experienceleague.adobe.com/docs/experience-manager-cloud-service/operations/indexing.html?lang=en#index-management-using-blue-green-deployments&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://experienceleague.adobe.com/docs/experience-manager-cloud-service/operations/indexing.html?lang=en#index-management-using-blue-green-deployments&lt;/a&gt; and &lt;a href=&quot;https://experienceleague.adobe.com/docs/experience-manager-cloud-service/implementing/developing/aem-project-content-package-structure.html?lang=en#mutable-vs-immutable&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://experienceleague.adobe.com/docs/experience-manager-cloud-service/implementing/developing/aem-project-content-package-structure.html?lang=en#mutable-vs-immutable&lt;/a&gt;).&lt;br/&gt;
To allow validation of such application packages there should be a flag considered, which allows for oak index definitions inside application packages.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354671">JCRVLT-496</key>
            <summary>Clarify usage of oak:index in application packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="kwin">Konrad Windszus</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jan 2021 13:13:07 +0000</created>
                <updated>Mon, 29 Mar 2021 11:23:33 +0000</updated>
                            <resolved>Thu, 25 Feb 2021 07:49:57 +0000</resolved>
                                    <version>3.4.8</version>
                                    <fixVersion>3.4.10</fixVersion>
                                    <component>vlt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17272099" author="kwin" created="Tue, 26 Jan 2021 13:15:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;: What do you think? Should index definitions be allowed by default or just if an explicit boolean flag is set inside application packages?&lt;/p&gt;</comment>
                            <comment id="17289880" author="dsuess" created="Wed, 24 Feb 2021 12:10:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt;  no special feelings. It is in the end content that&#8217;s being picked up by the runtime. But given the fact that indexes are processed ahead of the actual deployment in blue green scenarios I can follow that separating them out might be desirable.&lt;/p&gt;</comment>
                            <comment id="17289896" author="kwin" created="Wed, 24 Feb 2021 12:35:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt; Currently in &lt;a href=&quot;https://experienceleague.adobe.com/docs/experience-manager-cloud-service/operations/indexing.html?lang=en#deploying-index-definitions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://experienceleague.adobe.com/docs/experience-manager-cloud-service/operations/indexing.html?lang=en#deploying-index-definitions&lt;/a&gt; you can read:&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;There is a known issue with Jackrabbit Filevault Maven Package Plugin version 1.1.0 which does not allow you to add oak:index to modules of &amp;lt;packageType&amp;gt;application&amp;lt;/packageType&amp;gt;. To work around this, please use version 1.0.4.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Without this fix, customers need to either disable validation or use 1.0.4. So either Adobe needs to fix the documentation to state that oak:indexes should rather be part of a separate &quot;content&quot; type package or should have an interest to get this fixed....&lt;/p&gt;</comment>
                            <comment id="17289956" author="dsuess" created="Wed, 24 Feb 2021 14:17:40 +0000"  >&lt;p&gt;Ah right - the trouble here is that the index definitions live outside of the application scope (libs&amp;amp;apps) but are required while deploying. The problem being that mutable content is not being installed at the time the image with the immutable paths are installed - a solution for customers would be to create this definition with sling-repoinit.  &lt;br/&gt;
So yes I think it is a fair call to make index definitions an exception to the rule and also considered as application content.&lt;/p&gt;</comment>
                            <comment id="17289959" author="dsuess" created="Wed, 24 Feb 2021 14:18:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt; probably also has a perspective as being one of the core maintainers of the oak query engine.&lt;/p&gt;</comment>
                            <comment id="17290024" author="tmueller" created="Wed, 24 Feb 2021 15:39:46 +0000"  >&lt;p&gt;&amp;gt; Should index definitions be allowed by default or just if an explicit boolean flag is set inside application packages?&lt;/p&gt;

&lt;p&gt;Whatever we need to do, we need to verify and possibly update the documentation everywhere. Not just in the vault-doc.&lt;/p&gt;

&lt;p&gt;Right now PackageTypeValidator.java has hardcoded paths for /apps + /libs, which isn&apos;t nice. Having DEFAULT_IMMUTABLE_ROOT_NODE_NAMES is better, if there is no way to auto-detect &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/help_16.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
But the patch itself doesn&apos;t seem to introduce a flag? Maybe I didn&apos;t see it yet... but &quot;prohibitMutableContent&quot; is already there it seems.&lt;/p&gt;</comment>
                            <comment id="17290026" author="kwin" created="Wed, 24 Feb 2021 15:42:53 +0000"  >&lt;p&gt;The patch introduces a flag: See &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/124/files#diff-757a8aa9eac03a42c545be81f0a2efc430450bff88b94755259432f6faad74caR127&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/124/files#diff-757a8aa9eac03a42c545be81f0a2efc430450bff88b94755259432f6faad74caR127&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/124/files#diff-94ca8489565e8a80508dfb3a944f1c2afa1fb645fc58025085e5c5361a7dc7bbR57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/124/files#diff-94ca8489565e8a80508dfb3a944f1c2afa1fb645fc58025085e5c5361a7dc7bbR57&lt;/a&gt;. Now you can configure the immutable part.&lt;/p&gt;</comment>
                            <comment id="17290028" author="kwin" created="Wed, 24 Feb 2021 15:46:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Whatever we need to do, we need to verify and possibly update the documentation everywhere. Not just in the vault-doc.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you are referring to Adobe docs, this is outside the scope of FileVault fixes. You need to take it on yourself.&lt;/p&gt;</comment>
                            <comment id="17290753" author="kwin" created="Thu, 25 Feb 2021 07:49:57 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/fddd2c758b4f32c7bd04d9adedeb7f5375111716&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/fddd2c758b4f32c7bd04d9adedeb7f5375111716&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13368354">JCRVLT-513</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13062405">JCRVLT-170</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n01s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>