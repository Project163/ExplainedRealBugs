<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:34:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JCRVLT-485] Validation fails for nodetypes extending mix:versionable</title>
                <link>https://issues.apache.org/jira/browse/JCRVLT-485</link>
                <project id="12314920" key="JCRVLT">Jackrabbit FileVault</project>
                    <description>&lt;p&gt;when validation a content package containing data with a node type extending mix:versionable (and the protected properties are stripped out of the local content) validation failes with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ERROR] ValidationViolation: &quot;jackrabbit-nodetypes: Mandatory property &apos;jcr:predecessors&apos; missing in node with types [cq:WorkflowModel] at /var/workflow/models/dam/dam_update_asset1&quot;
[ERROR] ValidationViolation: &quot;jackrabbit-nodetypes: Mandatory property &apos;jcr:baseVersion&apos; missing in node with types [cq:WorkflowModel] at /var/workflow/models/dam/dam_update_asset1&quot;
[ERROR] ValidationViolation: &quot;jackrabbit-nodetypes: Mandatory property &apos;jcr:versionHistory&apos; missing in node with types [cq:WorkflowModel] at /var/workflow/models/dam/dam_update_asset1&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;sample project to reproduce the problem:&lt;br/&gt;
&lt;a href=&quot;https://github.com/stefanseifert/filevault-package-maven-plugin-validation-issues/tree/master/content-packages/workflow-content&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/stefanseifert/filevault-package-maven-plugin-validation-issues/tree/master/content-packages/workflow-content&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343730">JCRVLT-485</key>
            <summary>Validation fails for nodetypes extending mix:versionable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kwin">Konrad Windszus</assignee>
                                    <reporter username="sseifert">Stefan Seifert</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Dec 2020 10:22:23 +0000</created>
                <updated>Fri, 1 Jan 2021 19:00:19 +0000</updated>
                            <resolved>Wed, 9 Dec 2020 17:46:58 +0000</resolved>
                                    <version>3.4.6</version>
                                    <fixVersion>3.4.8</fixVersion>
                                    <component>vlt</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17242224" author="sseifert@pro-vision.de" created="Wed, 2 Dec 2020 10:22:44 +0000"  >&lt;p&gt;the CND for mix versionable:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[mix:versionable] &amp;gt; mix:referenceable, mix:simpleVersionable
  mixin
  - jcr:versionHistory (reference) mandatory protected ignore &amp;lt; &apos;nt:versionHistory&apos;
  - jcr:baseVersion (reference) mandatory protected ignore &amp;lt; &apos;nt:version&apos;
  - jcr:predecessors (reference) mandatory protected multiple ignore &amp;lt; &apos;nt:version&apos;
  - jcr:mergeFailed (reference) protected multiple abort &amp;lt; &apos;nt:version&apos;
  - jcr:activity (reference) protected &amp;lt; &apos;nt:activity&apos;
  - jcr:configuration (reference) protected ignore &amp;lt; &apos;nt:configuration&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the affected property are set to &quot;protected&quot;, &quot;mandatory&quot; and also to &quot;ignore&quot;. not sure what the latter means, but probable we should &quot;ignore&quot; the validation for those properties as well?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kwin&quot; class=&quot;user-hover&quot; rel=&quot;kwin&quot;&gt;kwin&lt;/a&gt; WDYT?&lt;/p&gt;</comment>
                            <comment id="17242278" author="kwin" created="Wed, 2 Dec 2020 11:38:51 +0000"  >&lt;p&gt;The &lt;tt&gt;ignore&lt;/tt&gt; specifies the on-parent versioning policy (&lt;a href=&quot;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.7.2.5%20On-Parent-Version&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.adobe.com/content/docs/en/spec/jcr/2.0/3_Repository_Model.html#3.7.2.5%20On-Parent-Version&lt;/a&gt;) and has IMHO no relevance for the validation.&lt;/p&gt;

&lt;p&gt;Regarding mandatory protected subnodes it seems that they are somehow automatically created. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseifert&quot; class=&quot;user-hover&quot; rel=&quot;sseifert&quot;&gt;sseifert&lt;/a&gt; can you confirm that those are there after an import of the attached package? I am still wondering how that happens...&lt;/p&gt;</comment>
                            <comment id="17242281" author="kwin" created="Wed, 2 Dec 2020 11:42:25 +0000"  >&lt;p&gt;Maybe &lt;tt&gt;mandatory&lt;/tt&gt; is ignored for mixins, and only has an effect on &lt;tt&gt;primaryNodeType&lt;/tt&gt;. I couldn&apos;t find anything in the JCR spec though....&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tripod&quot; class=&quot;user-hover&quot; rel=&quot;tripod&quot;&gt;tripod&lt;/a&gt; Do you have any insights on that?&lt;/p&gt;</comment>
                            <comment id="17242289" author="sseifert@pro-vision.de" created="Wed, 2 Dec 2020 11:53:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;can you confirm that those are there after an import of the attached package?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;indeed they are&lt;/p&gt;</comment>
                            <comment id="17242861" author="tripod" created="Thu, 3 Dec 2020 02:11:30 +0000"  >&lt;p&gt;I would ignore the properties form mix:versionable, since the handling of versions is done specially in filevault. Also note, that most of them have no meaning for import, since we cannot recreate the same version history.&lt;/p&gt;</comment>
                            <comment id="17243058" author="sseifert@pro-vision.de" created="Thu, 3 Dec 2020 09:41:53 +0000"  >&lt;p&gt;i tried to create a unit test to reproduce the problem - but the problem does not occur in the test. i&apos;m not sure if the test setup is correct - draft PR: &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/108&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/108&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17245230" author="sseifert@pro-vision.de" created="Mon, 7 Dec 2020 14:16:15 +0000"  >&lt;p&gt;PR which fixes the problem by checking against a list of special-handling properties:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/pull/110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/pull/110&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17246714" author="kwin" created="Wed, 9 Dec 2020 17:46:35 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/jackrabbit-filevault/commit/0fa305d5b0f6dec43e181db3fabeb32603d69501&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-filevault/commit/0fa305d5b0f6dec43e181db3fabeb32603d69501&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13348647">JCRVLT-489</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l4e0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>