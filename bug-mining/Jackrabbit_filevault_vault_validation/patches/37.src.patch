diff --git a/vault-validation/src/main/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImpl.java b/vault-validation/src/main/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImpl.java
index 23837b65..183ce877 100644
--- a/vault-validation/src/main/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImpl.java
+++ b/vault-validation/src/main/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImpl.java
@@ -633,6 +633,10 @@ public class JcrNodeTypeMetaDataImpl implements JcrNodeTypeMetaData {
             return false;
         }
 
+        if (effectiveNodeType == null) {
+            // if effective node type cannot be determined, assume the worst case (i.e. node does not match definition)
+            return false;
+        }
         for (Name requiredType : nodeDefinition.getRequiredPrimaryTypes()) {
             // type must match all of the given types
             if (!effectiveNodeType.includesNodeType(requiredType)) {
diff --git a/vault-validation/src/test/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImplTest.java b/vault-validation/src/test/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImplTest.java
index 09bac299..f2dba150 100644
--- a/vault-validation/src/test/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImplTest.java
+++ b/vault-validation/src/test/java/org/apache/jackrabbit/vault/validation/spi/impl/nodetype/JcrNodeTypeMetaDataImplTest.java
@@ -125,6 +125,27 @@ public class JcrNodeTypeMetaDataImplTest {
                 createSimpleNodeContext("myname"), "jcr:nodeType1");
     }
 
+    @Test
+    public void testChildNodeWithUnknownType() throws IllegalNameException, NamespaceExceptionInNodeName, RepositoryException {
+        NodeContext nodeContext = createSimpleNodeContext("file");
+        DefaultWorkspaceFilter filter = new DefaultWorkspaceFilter();
+        filter.add(new PathFilterSet());
+        // add node with mandatory child node
+        nodeContext = createSimpleNodeContext("file/jcr:content");
+        JcrNodeTypeMetaData file = root.addChildNode(ntManagerProvider.getNamePathResolver(),
+                ntManagerProvider.getEffectiveNodeTypeProvider(), ntManagerProvider.getNodeTypeDefinitionProvider(),
+                ntManagerProvider.getItemDefinitionProvider(), nodeContext,
+                "nt:file");
+        // mandatory child node has unknown node type
+        JcrNodeTypeMetaData content = file.addUnknownChildNode( ntManagerProvider.getNameResolver(), nodeContext, "jcr:content");
+        Collection<ValidationMessage> messages = file.finalizeValidation(ntManagerProvider.getNamePathResolver(), ntManagerProvider.getNodeTypeDefinitionProvider(),
+                ntManagerProvider.getItemDefinitionProvider(), ValidationMessageSeverity.ERROR, ValidationMessageSeverity.ERROR, filter);
+        ValidationExecutorTest.assertViolation(messages,
+                new ValidationMessage(ValidationMessageSeverity.ERROR,
+                        String.format(JcrNodeTypeMetaDataImpl.MESSAGE_MANDATORY_CHILD_NODE_MISSING, "jcr:content [nt:base]", "types [nt:file]",
+                        nodeContext)));
+    }
+    
     @Test
     public void testAddChildNode() throws IOException, InvalidNodeTypeDefinitionException, NodeTypeExistsException,
             UnsupportedRepositoryOperationException, ParseException, RepositoryException {
