{"url":"https://api.github.com/repos/JakeWharton/DiskLruCache/issues/2","repository_url":"https://api.github.com/repos/JakeWharton/DiskLruCache","labels_url":"https://api.github.com/repos/JakeWharton/DiskLruCache/issues/2/labels{/name}","comments_url":"https://api.github.com/repos/JakeWharton/DiskLruCache/issues/2/comments","events_url":"https://api.github.com/repos/JakeWharton/DiskLruCache/issues/2/events","html_url":"https://github.com/JakeWharton/DiskLruCache/issues/2","id":2763257,"node_id":"MDU6SXNzdWUyNzYzMjU3","number":2,"title":"Android aggresive cache clearing leads to crash","user":{"login":"lexs","id":191973,"node_id":"MDQ6VXNlcjE5MTk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/191973?v=4","gravatar_id":"","url":"https://api.github.com/users/lexs","html_url":"https://github.com/lexs","followers_url":"https://api.github.com/users/lexs/followers","following_url":"https://api.github.com/users/lexs/following{/other_user}","gists_url":"https://api.github.com/users/lexs/gists{/gist_id}","starred_url":"https://api.github.com/users/lexs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lexs/subscriptions","organizations_url":"https://api.github.com/users/lexs/orgs","repos_url":"https://api.github.com/users/lexs/repos","events_url":"https://api.github.com/users/lexs/events{/privacy}","received_events_url":"https://api.github.com/users/lexs/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":211421,"node_id":"MDU6TGFiZWwyMTE0MjE=","url":"https://api.github.com/repos/JakeWharton/DiskLruCache/labels/Bug%20Report","name":"Bug Report","color":"e10c02","default":false,"description":null},{"id":214902,"node_id":"MDU6TGFiZWwyMTQ5MDI=","url":"https://api.github.com/repos/JakeWharton/DiskLruCache/labels/Fixed%20Not%20Released","name":"Fixed Not Released","color":"ededed","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"swankjesse","id":133019,"node_id":"MDQ6VXNlcjEzMzAxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/133019?v=4","gravatar_id":"","url":"https://api.github.com/users/swankjesse","html_url":"https://github.com/swankjesse","followers_url":"https://api.github.com/users/swankjesse/followers","following_url":"https://api.github.com/users/swankjesse/following{/other_user}","gists_url":"https://api.github.com/users/swankjesse/gists{/gist_id}","starred_url":"https://api.github.com/users/swankjesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swankjesse/subscriptions","organizations_url":"https://api.github.com/users/swankjesse/orgs","repos_url":"https://api.github.com/users/swankjesse/repos","events_url":"https://api.github.com/users/swankjesse/events{/privacy}","received_events_url":"https://api.github.com/users/swankjesse/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"swankjesse","id":133019,"node_id":"MDQ6VXNlcjEzMzAxOQ==","avatar_url":"https://avatars.githubusercontent.com/u/133019?v=4","gravatar_id":"","url":"https://api.github.com/users/swankjesse","html_url":"https://github.com/swankjesse","followers_url":"https://api.github.com/users/swankjesse/followers","following_url":"https://api.github.com/users/swankjesse/following{/other_user}","gists_url":"https://api.github.com/users/swankjesse/gists{/gist_id}","starred_url":"https://api.github.com/users/swankjesse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/swankjesse/subscriptions","organizations_url":"https://api.github.com/users/swankjesse/orgs","repos_url":"https://api.github.com/users/swankjesse/repos","events_url":"https://api.github.com/users/swankjesse/events{/privacy}","received_events_url":"https://api.github.com/users/swankjesse/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":9,"created_at":"2012-01-08T22:21:32Z","updated_at":"2012-09-30T07:50:04Z","closed_at":"2012-09-30T07:50:04Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have the cache put inside a subdirectory in the application cache directory. On devices with low internal storage (Nexus One for example) this will eventually lead to low storage situations where Android will just clear the whole cache directory, including subdirectories.\n\nThis gives this:\n\n```\njava.io.FileNotFoundException: /data/data/<package>/cache/images/-1944396650.0.tmp (No such file or directory)\nat org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)\nat dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)\nat java.io.FileOutputStream.<init>(FileOutputStream.java:94)\nat java.io.FileOutputStream.<init>(FileOutputStream.java:66)\nat <package>.DiskLruCache$Editor.newOutputStream(DiskLruCache.java:686)\n```\n\nIt's thrown because the images directory is now gone. I though listening for ACTION_DEVICE_STORAGE_LOW could solve this but that is broadcasted after Android has cleared the directory.\n\nIf would be nice if it was possible to just reset the cache when the whole directory has gone missing or something.\n","closed_by":{"login":"JakeWharton","id":66577,"node_id":"MDQ6VXNlcjY2NTc3","avatar_url":"https://avatars.githubusercontent.com/u/66577?v=4","gravatar_id":"","url":"https://api.github.com/users/JakeWharton","html_url":"https://github.com/JakeWharton","followers_url":"https://api.github.com/users/JakeWharton/followers","following_url":"https://api.github.com/users/JakeWharton/following{/other_user}","gists_url":"https://api.github.com/users/JakeWharton/gists{/gist_id}","starred_url":"https://api.github.com/users/JakeWharton/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JakeWharton/subscriptions","organizations_url":"https://api.github.com/users/JakeWharton/orgs","repos_url":"https://api.github.com/users/JakeWharton/repos","events_url":"https://api.github.com/users/JakeWharton/events{/privacy}","received_events_url":"https://api.github.com/users/JakeWharton/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/JakeWharton/DiskLruCache/issues/2/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/JakeWharton/DiskLruCache/issues/2/timeline","performed_via_github_app":null,"state_reason":"completed"}