[{"id":8596476001,"node_id":"LE_lADOD__WI85fOZqwzwAAAAIAY9Bh","url":"https://api.github.com/repos/helix-editor/helix/issues/events/8596476001","actor":{"login":"gibbz00","id":31696304,"node_id":"MDQ6VXNlcjMxNjk2MzA0","avatar_url":"https://avatars.githubusercontent.com/u/31696304?v=4","gravatar_id":"","url":"https://api.github.com/users/gibbz00","html_url":"https://github.com/gibbz00","followers_url":"https://api.github.com/users/gibbz00/followers","following_url":"https://api.github.com/users/gibbz00/following{/other_user}","gists_url":"https://api.github.com/users/gibbz00/gists{/gist_id}","starred_url":"https://api.github.com/users/gibbz00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gibbz00/subscriptions","organizations_url":"https://api.github.com/users/gibbz00/orgs","repos_url":"https://api.github.com/users/gibbz00/repos","events_url":"https://api.github.com/users/gibbz00/events{/privacy}","received_events_url":"https://api.github.com/users/gibbz00/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-23T22:25:22Z","label":{"name":"C-bug","color":"C5DEF5"},"performed_via_github_app":null},{"id":8596815400,"node_id":"REFE_lADOD__WI85fOZqwzwAAAAIAaP4o","url":"https://api.github.com/repos/helix-editor/helix/issues/events/8596815400","actor":{"login":"gibbz00","id":31696304,"node_id":"MDQ6VXNlcjMxNjk2MzA0","avatar_url":"https://avatars.githubusercontent.com/u/31696304?v=4","gravatar_id":"","url":"https://api.github.com/users/gibbz00","html_url":"https://github.com/gibbz00","followers_url":"https://api.github.com/users/gibbz00/followers","following_url":"https://api.github.com/users/gibbz00/following{/other_user}","gists_url":"https://api.github.com/users/gibbz00/gists{/gist_id}","starred_url":"https://api.github.com/users/gibbz00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gibbz00/subscriptions","organizations_url":"https://api.github.com/users/gibbz00/orgs","repos_url":"https://api.github.com/users/gibbz00/repos","events_url":"https://api.github.com/users/gibbz00/events{/privacy}","received_events_url":"https://api.github.com/users/gibbz00/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d93f9e723d94c13b8f43c45bc1f8dc5508a5b057","commit_url":"https://api.github.com/repos/gibbz00/helix/commits/d93f9e723d94c13b8f43c45bc1f8dc5508a5b057","created_at":"2023-02-23T23:28:25Z","performed_via_github_app":null},{"actor":{"login":"gibbz00","id":31696304,"node_id":"MDQ6VXNlcjMxNjk2MzA0","avatar_url":"https://avatars.githubusercontent.com/u/31696304?v=4","gravatar_id":"","url":"https://api.github.com/users/gibbz00","html_url":"https://github.com/gibbz00","followers_url":"https://api.github.com/users/gibbz00/followers","following_url":"https://api.github.com/users/gibbz00/following{/other_user}","gists_url":"https://api.github.com/users/gibbz00/gists{/gist_id}","starred_url":"https://api.github.com/users/gibbz00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gibbz00/subscriptions","organizations_url":"https://api.github.com/users/gibbz00/orgs","repos_url":"https://api.github.com/users/gibbz00/repos","events_url":"https://api.github.com/users/gibbz00/events{/privacy}","received_events_url":"https://api.github.com/users/gibbz00/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-23T23:35:33Z","updated_at":"2023-02-23T23:35:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/helix-editor/helix/issues/6093","repository_url":"https://api.github.com/repos/helix-editor/helix","labels_url":"https://api.github.com/repos/helix-editor/helix/issues/6093/labels{/name}","comments_url":"https://api.github.com/repos/helix-editor/helix/issues/6093/comments","events_url":"https://api.github.com/repos/helix-editor/helix/issues/6093/events","html_url":"https://github.com/helix-editor/helix/pull/6093","id":1597669530,"node_id":"PR_kwDOD__WI85Kpi00","number":6093,"title":"Fix `shrink_selection` with multiple cursors.","user":{"login":"gibbz00","id":31696304,"node_id":"MDQ6VXNlcjMxNjk2MzA0","avatar_url":"https://avatars.githubusercontent.com/u/31696304?v=4","gravatar_id":"","url":"https://api.github.com/users/gibbz00","html_url":"https://github.com/gibbz00","followers_url":"https://api.github.com/users/gibbz00/followers","following_url":"https://api.github.com/users/gibbz00/following{/other_user}","gists_url":"https://api.github.com/users/gibbz00/gists{/gist_id}","starred_url":"https://api.github.com/users/gibbz00/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gibbz00/subscriptions","organizations_url":"https://api.github.com/users/gibbz00/orgs","repos_url":"https://api.github.com/users/gibbz00/repos","events_url":"https://api.github.com/users/gibbz00/events{/privacy}","received_events_url":"https://api.github.com/users/gibbz00/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-02-23T23:35:33Z","updated_at":"2023-03-09T04:08:29Z","closed_at":"2023-03-09T04:08:29Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":268424739,"node_id":"MDEwOlJlcG9zaXRvcnkyNjg0MjQ3Mzk=","name":"helix","full_name":"helix-editor/helix","private":false,"owner":{"login":"helix-editor","id":66235900,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY2MjM1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/66235900?v=4","gravatar_id":"","url":"https://api.github.com/users/helix-editor","html_url":"https://github.com/helix-editor","followers_url":"https://api.github.com/users/helix-editor/followers","following_url":"https://api.github.com/users/helix-editor/following{/other_user}","gists_url":"https://api.github.com/users/helix-editor/gists{/gist_id}","starred_url":"https://api.github.com/users/helix-editor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helix-editor/subscriptions","organizations_url":"https://api.github.com/users/helix-editor/orgs","repos_url":"https://api.github.com/users/helix-editor/repos","events_url":"https://api.github.com/users/helix-editor/events{/privacy}","received_events_url":"https://api.github.com/users/helix-editor/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/helix-editor/helix","description":"A post-modern modal text editor.","fork":false,"url":"https://api.github.com/repos/helix-editor/helix","forks_url":"https://api.github.com/repos/helix-editor/helix/forks","keys_url":"https://api.github.com/repos/helix-editor/helix/keys{/key_id}","collaborators_url":"https://api.github.com/repos/helix-editor/helix/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/helix-editor/helix/teams","hooks_url":"https://api.github.com/repos/helix-editor/helix/hooks","issue_events_url":"https://api.github.com/repos/helix-editor/helix/issues/events{/number}","events_url":"https://api.github.com/repos/helix-editor/helix/events","assignees_url":"https://api.github.com/repos/helix-editor/helix/assignees{/user}","branches_url":"https://api.github.com/repos/helix-editor/helix/branches{/branch}","tags_url":"https://api.github.com/repos/helix-editor/helix/tags","blobs_url":"https://api.github.com/repos/helix-editor/helix/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/helix-editor/helix/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/helix-editor/helix/git/refs{/sha}","trees_url":"https://api.github.com/repos/helix-editor/helix/git/trees{/sha}","statuses_url":"https://api.github.com/repos/helix-editor/helix/statuses/{sha}","languages_url":"https://api.github.com/repos/helix-editor/helix/languages","stargazers_url":"https://api.github.com/repos/helix-editor/helix/stargazers","contributors_url":"https://api.github.com/repos/helix-editor/helix/contributors","subscribers_url":"https://api.github.com/repos/helix-editor/helix/subscribers","subscription_url":"https://api.github.com/repos/helix-editor/helix/subscription","commits_url":"https://api.github.com/repos/helix-editor/helix/commits{/sha}","git_commits_url":"https://api.github.com/repos/helix-editor/helix/git/commits{/sha}","comments_url":"https://api.github.com/repos/helix-editor/helix/comments{/number}","issue_comment_url":"https://api.github.com/repos/helix-editor/helix/issues/comments{/number}","contents_url":"https://api.github.com/repos/helix-editor/helix/contents/{+path}","compare_url":"https://api.github.com/repos/helix-editor/helix/compare/{base}...{head}","merges_url":"https://api.github.com/repos/helix-editor/helix/merges","archive_url":"https://api.github.com/repos/helix-editor/helix/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/helix-editor/helix/downloads","issues_url":"https://api.github.com/repos/helix-editor/helix/issues{/number}","pulls_url":"https://api.github.com/repos/helix-editor/helix/pulls{/number}","milestones_url":"https://api.github.com/repos/helix-editor/helix/milestones{/number}","notifications_url":"https://api.github.com/repos/helix-editor/helix/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/helix-editor/helix/labels{/name}","releases_url":"https://api.github.com/repos/helix-editor/helix/releases{/id}","deployments_url":"https://api.github.com/repos/helix-editor/helix/deployments","created_at":"2020-06-01T04:26:56Z","updated_at":"2025-11-09T22:52:54Z","pushed_at":"2025-11-09T19:33:07Z","git_url":"git://github.com/helix-editor/helix.git","ssh_url":"git@github.com:helix-editor/helix.git","clone_url":"https://github.com/helix-editor/helix.git","svn_url":"https://github.com/helix-editor/helix","homepage":"https://helix-editor.com","size":65513,"stargazers_count":41185,"watchers_count":41185,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":3152,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1318,"license":{"key":"mpl-2.0","name":"Mozilla Public License 2.0","spdx_id":"MPL-2.0","url":"https://api.github.com/licenses/mpl-2.0","node_id":"MDc6TGljZW5zZTE0"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["kakoune","rust","text-editor","vim"],"visibility":"public","forks":3152,"open_issues":1318,"watchers":41185,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/helix-editor/helix/pulls/6093","html_url":"https://github.com/helix-editor/helix/pull/6093","diff_url":"https://github.com/helix-editor/helix/pull/6093.diff","patch_url":"https://github.com/helix-editor/helix/pull/6093.patch","merged_at":"2023-03-09T04:08:29Z"},"body":"Fixes #6092 \r\n\r\nCaused by some incorrect assumptions that missed an edge case in the `Selection.contains()` calculation. Tests were added accordingly.\r\n\r\n[![asciicast](https://asciinema.org/a/NINyXHNywRUe6ULYZo4nGQjCi.svg)](https://asciinema.org/a/NINyXHNywRUe6ULYZo4nGQjCi?t=23)","reactions":{"url":"https://api.github.com/repos/helix-editor/helix/issues/6093/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helix-editor/helix/issues/6093/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"dead10ck","id":846275,"node_id":"MDQ6VXNlcjg0NjI3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/846275?v=4","gravatar_id":"","url":"https://api.github.com/users/dead10ck","html_url":"https://github.com/dead10ck","followers_url":"https://api.github.com/users/dead10ck/followers","following_url":"https://api.github.com/users/dead10ck/following{/other_user}","gists_url":"https://api.github.com/users/dead10ck/gists{/gist_id}","starred_url":"https://api.github.com/users/dead10ck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dead10ck/subscriptions","organizations_url":"https://api.github.com/users/dead10ck/orgs","repos_url":"https://api.github.com/users/dead10ck/repos","events_url":"https://api.github.com/users/dead10ck/events{/privacy}","received_events_url":"https://api.github.com/users/dead10ck/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-06T04:44:13Z","updated_at":"2023-03-06T04:44:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/helix-editor/helix/issues/6198","repository_url":"https://api.github.com/repos/helix-editor/helix","labels_url":"https://api.github.com/repos/helix-editor/helix/issues/6198/labels{/name}","comments_url":"https://api.github.com/repos/helix-editor/helix/issues/6198/comments","events_url":"https://api.github.com/repos/helix-editor/helix/issues/6198/events","html_url":"https://github.com/helix-editor/helix/pull/6198","id":1610654636,"node_id":"PR_kwDOD__WI85LVApq","number":6198,"title":"`expand_selection_around`","user":{"login":"dead10ck","id":846275,"node_id":"MDQ6VXNlcjg0NjI3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/846275?v=4","gravatar_id":"","url":"https://api.github.com/users/dead10ck","html_url":"https://github.com/dead10ck","followers_url":"https://api.github.com/users/dead10ck/followers","following_url":"https://api.github.com/users/dead10ck/following{/other_user}","gists_url":"https://api.github.com/users/dead10ck/gists{/gist_id}","starred_url":"https://api.github.com/users/dead10ck/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dead10ck/subscriptions","organizations_url":"https://api.github.com/users/dead10ck/orgs","repos_url":"https://api.github.com/users/dead10ck/repos","events_url":"https://api.github.com/users/dead10ck/events{/privacy}","received_events_url":"https://api.github.com/users/dead10ck/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2101491843,"node_id":"MDU6TGFiZWwyMTAxNDkxODQz","url":"https://api.github.com/repos/helix-editor/helix/labels/C-enhancement","name":"C-enhancement","color":"C5DEF5","default":false,"description":"Category: Improvements"},{"id":3110852760,"node_id":"MDU6TGFiZWwzMTEwODUyNzYw","url":"https://api.github.com/repos/helix-editor/helix/labels/E-medium","name":"E-medium","color":"0E8A16","default":false,"description":"Call for participation: Experience needed to fix: Medium / intermediate"},{"id":4142167582,"node_id":"LA_kwDOD__WI8725HYe","url":"https://api.github.com/repos/helix-editor/helix/labels/S-waiting-on-review","name":"S-waiting-on-review","color":"5EB5EA","default":false,"description":"Status: Awaiting review from a maintainer."}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/helix-editor/helix/milestones/4","html_url":"https://github.com/helix-editor/helix/milestone/4","labels_url":"https://api.github.com/repos/helix-editor/helix/milestones/4/labels","id":9214230,"node_id":"MI_kwDOD__WI84AjJkW","number":4,"title":"next","description":"","creator":{"login":"the-mikedavis","id":21230295,"node_id":"MDQ6VXNlcjIxMjMwMjk1","avatar_url":"https://avatars.githubusercontent.com/u/21230295?v=4","gravatar_id":"","url":"https://api.github.com/users/the-mikedavis","html_url":"https://github.com/the-mikedavis","followers_url":"https://api.github.com/users/the-mikedavis/followers","following_url":"https://api.github.com/users/the-mikedavis/following{/other_user}","gists_url":"https://api.github.com/users/the-mikedavis/gists{/gist_id}","starred_url":"https://api.github.com/users/the-mikedavis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/the-mikedavis/subscriptions","organizations_url":"https://api.github.com/users/the-mikedavis/orgs","repos_url":"https://api.github.com/users/the-mikedavis/repos","events_url":"https://api.github.com/users/the-mikedavis/events{/privacy}","received_events_url":"https://api.github.com/users/the-mikedavis/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":20,"closed_issues":67,"state":"open","created_at":"2023-03-27T22:43:44Z","updated_at":"2025-09-23T14:10:59Z","due_on":null,"closed_at":null},"comments":7,"created_at":"2023-03-06T04:44:12Z","updated_at":"2025-09-15T16:04:46Z","closed_at":null,"author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":268424739,"node_id":"MDEwOlJlcG9zaXRvcnkyNjg0MjQ3Mzk=","name":"helix","full_name":"helix-editor/helix","private":false,"owner":{"login":"helix-editor","id":66235900,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY2MjM1OTAw","avatar_url":"https://avatars.githubusercontent.com/u/66235900?v=4","gravatar_id":"","url":"https://api.github.com/users/helix-editor","html_url":"https://github.com/helix-editor","followers_url":"https://api.github.com/users/helix-editor/followers","following_url":"https://api.github.com/users/helix-editor/following{/other_user}","gists_url":"https://api.github.com/users/helix-editor/gists{/gist_id}","starred_url":"https://api.github.com/users/helix-editor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helix-editor/subscriptions","organizations_url":"https://api.github.com/users/helix-editor/orgs","repos_url":"https://api.github.com/users/helix-editor/repos","events_url":"https://api.github.com/users/helix-editor/events{/privacy}","received_events_url":"https://api.github.com/users/helix-editor/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/helix-editor/helix","description":"A post-modern modal text editor.","fork":false,"url":"https://api.github.com/repos/helix-editor/helix","forks_url":"https://api.github.com/repos/helix-editor/helix/forks","keys_url":"https://api.github.com/repos/helix-editor/helix/keys{/key_id}","collaborators_url":"https://api.github.com/repos/helix-editor/helix/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/helix-editor/helix/teams","hooks_url":"https://api.github.com/repos/helix-editor/helix/hooks","issue_events_url":"https://api.github.com/repos/helix-editor/helix/issues/events{/number}","events_url":"https://api.github.com/repos/helix-editor/helix/events","assignees_url":"https://api.github.com/repos/helix-editor/helix/assignees{/user}","branches_url":"https://api.github.com/repos/helix-editor/helix/branches{/branch}","tags_url":"https://api.github.com/repos/helix-editor/helix/tags","blobs_url":"https://api.github.com/repos/helix-editor/helix/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/helix-editor/helix/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/helix-editor/helix/git/refs{/sha}","trees_url":"https://api.github.com/repos/helix-editor/helix/git/trees{/sha}","statuses_url":"https://api.github.com/repos/helix-editor/helix/statuses/{sha}","languages_url":"https://api.github.com/repos/helix-editor/helix/languages","stargazers_url":"https://api.github.com/repos/helix-editor/helix/stargazers","contributors_url":"https://api.github.com/repos/helix-editor/helix/contributors","subscribers_url":"https://api.github.com/repos/helix-editor/helix/subscribers","subscription_url":"https://api.github.com/repos/helix-editor/helix/subscription","commits_url":"https://api.github.com/repos/helix-editor/helix/commits{/sha}","git_commits_url":"https://api.github.com/repos/helix-editor/helix/git/commits{/sha}","comments_url":"https://api.github.com/repos/helix-editor/helix/comments{/number}","issue_comment_url":"https://api.github.com/repos/helix-editor/helix/issues/comments{/number}","contents_url":"https://api.github.com/repos/helix-editor/helix/contents/{+path}","compare_url":"https://api.github.com/repos/helix-editor/helix/compare/{base}...{head}","merges_url":"https://api.github.com/repos/helix-editor/helix/merges","archive_url":"https://api.github.com/repos/helix-editor/helix/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/helix-editor/helix/downloads","issues_url":"https://api.github.com/repos/helix-editor/helix/issues{/number}","pulls_url":"https://api.github.com/repos/helix-editor/helix/pulls{/number}","milestones_url":"https://api.github.com/repos/helix-editor/helix/milestones{/number}","notifications_url":"https://api.github.com/repos/helix-editor/helix/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/helix-editor/helix/labels{/name}","releases_url":"https://api.github.com/repos/helix-editor/helix/releases{/id}","deployments_url":"https://api.github.com/repos/helix-editor/helix/deployments","created_at":"2020-06-01T04:26:56Z","updated_at":"2025-11-09T22:52:54Z","pushed_at":"2025-11-09T19:33:07Z","git_url":"git://github.com/helix-editor/helix.git","ssh_url":"git@github.com:helix-editor/helix.git","clone_url":"https://github.com/helix-editor/helix.git","svn_url":"https://github.com/helix-editor/helix","homepage":"https://helix-editor.com","size":65513,"stargazers_count":41185,"watchers_count":41185,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":3152,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1318,"license":{"key":"mpl-2.0","name":"Mozilla Public License 2.0","spdx_id":"MPL-2.0","url":"https://api.github.com/licenses/mpl-2.0","node_id":"MDc6TGljZW5zZTE0"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["kakoune","rust","text-editor","vim"],"visibility":"public","forks":3152,"open_issues":1318,"watchers":41185,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/helix-editor/helix/pulls/6198","html_url":"https://github.com/helix-editor/helix/pull/6198","diff_url":"https://github.com/helix-editor/helix/pull/6198.diff","patch_url":"https://github.com/helix-editor/helix/pull/6198.patch","merged_at":null},"body":"This adds a new feature: `expand_selection_around`. With this command, one starts with an initial arbitrary selection, and then the `expand_selection_around` acts just like `expand_selection`, except that it splits the new expanded selection around the initial selection. All the while, it remembers what the initial selection was so that you can continue to expand any number of times around this initial selection. Additionally, shrinking works exactly the same way, except that once you get back down to the first expansion, the last shrink in the stack will revert back to your initial selection.\r\n\r\n[![asciicast](https://asciinema.org/a/vkBJ0hEauyR5iZWOqsgO9Pseg.svg)](https://asciinema.org/a/vkBJ0hEauyR5iZWOqsgO9Pseg)\r\n\r\n## Implementation\r\n\r\nThe existing `expand_selection` and `shrink_selection` commands are implemented by keeping a list of `Selection`s, which they push and pop off of like a stack.\r\n\r\nIn order to implement this feature, these \"object selections\" are generalized into a register of namespaced lists of `Selection`s. Currently these are keyed by hardcoded static strings; this felt cleaner than having special struct fields. Theoretically, other commands that could make use of tracking lists of `Selection`s could use this register in the future too, without specialized members.\r\n\r\nAnyway, this particular feature is implemented by keeping 3 distinct `Selection` histories:\r\n\r\n* `expand`: this serves the role of the existing object selections: it remembers your final selections at each step of the way, so that you can shrink back down to your previous selections\r\n* `expand_around_base`: this remembers your initial \"base\" selection before running the `expand_selection_around` command\r\n* `parents`: this tracks the entire span of the parent nodes as you are traversing up the syntax tree\r\n\r\nThe feature is accomplished by essentially pretending internally that we only have one selection: the entire span of a parent node. Each time we `expand_selection_around` again, this parent node is used to keep traveling up the tree. But before we actually set the final resulting selection, we take the `expand_around_base` selection and split the parent span into two around the base.\r\n\r\nFor this, it was necessary to add `Selection:: without`, which computes the set difference of two `Selection`s.\r\n\r\nIncidentally, along the way, I discovered the same bug reported in #6092, so this includes the same fix as, and could possibly supersede, #6093.\r\n\r\nAdditionally, I also noticed all the bugs that @pascalkuthe mentioned in https://github.com/helix-editor/helix/pull/6088#pullrequestreview-1314531159 and #6087, i.e. the current object selections don't track all the context that they should: they can end up getting used on the wrong document, view, and could end up getting totally out of sync with any text edits that happen between an expansion and a shrink.\r\n\r\nAs @pascalkuthe mentioned, fixing this in the general case would be somewhat complex, as it would need to track any text edits and possibly associate views with selection histories, as mentioned in https://github.com/helix-editor/helix/pull/6088#discussion_r1117986531. How this would ultimately end up interacting with the changes in this PR are unclear.\r\n\r\nBut in any case, I addressed these issues in a simple, but very aggressive way: the object selections are now cleared *any time* a view's selection is set, *except* during these expand and shrink commands. This required a breaking change in `Document::set_selection`: it has to take a mutable reference to the entire `View` now in order to clear the object selections. This is a simple way to ensure that the object selections don't get out of sync with view switches or document edits, since it's likely that every command that could cause a problematic divergence in the object selections also itself sets a selection, plus many that wouldn't. This includes normal mode movements of any kind, for example.\r\n\r\nConsequences of this include:\r\n\r\n* One can no longer do an expand, then move around, and then a shrink, and have it still go back to what you had before the expand. One could argue that this is a bug anyway.\r\n* One can no longer do an expand, switch buffers, then switch back to the first buffer, then shrink back to the selection one had before the first expand. One could argue that this is a regression, as in #6088. Personally, my opinion is that this is an ok trade-off, since the object selection history was originally intended to allow for consecutive invocations of expansions and shrinks, which is preserved, though others might disagree.\r\n* It makes the diffs quite noisy. For this reason, I very intentionally laid out the commits neatly so that this can easily be reviewed commit-by-commit.\r\n\r\nAlso, this PR changes the behavior of `shrink_selection` when there was no previous expansion. Currently, the first child is selected. However, this is often not very useful at all, since the first child often something like an open brace or parentheses. Instead, the behavior is changed to select the first child *that is strictly contained within the span of the current node* (credit and thanks to @pascalkuthe again for this idea!). The command is much more useful this way.\r\n\r\n@matoous may be interested in this PR as it builds upon their original implementation of the expand and shrink commands.\r\n\r\nBased on top of #6156 since it makes use of some of the integration testing improvements\r\nFixes #6092\r\nSupersedes #6093\r\nFixes #6087","reactions":{"url":"https://api.github.com/repos/helix-editor/helix/issues/6198/reactions","total_count":16,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":16,"eyes":0},"timeline_url":"https://api.github.com/repos/helix-editor/helix/issues/6198/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":8703013827,"node_id":"CE_lADOD__WI85fOZqwzwAAAAIGvXPD","url":"https://api.github.com/repos/helix-editor/helix/issues/events/8703013827","actor":{"login":"archseer","id":1372918,"node_id":"MDQ6VXNlcjEzNzI5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1372918?v=4","gravatar_id":"","url":"https://api.github.com/users/archseer","html_url":"https://github.com/archseer","followers_url":"https://api.github.com/users/archseer/followers","following_url":"https://api.github.com/users/archseer/following{/other_user}","gists_url":"https://api.github.com/users/archseer/gists{/gist_id}","starred_url":"https://api.github.com/users/archseer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/archseer/subscriptions","organizations_url":"https://api.github.com/users/archseer/orgs","repos_url":"https://api.github.com/users/archseer/repos","events_url":"https://api.github.com/users/archseer/events{/privacy}","received_events_url":"https://api.github.com/users/archseer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2023-03-09T04:08:30Z","state_reason":null,"performed_via_github_app":null},{"id":8703013885,"node_id":"REFE_lADOD__WI85fOZqwzwAAAAIGvXP9","url":"https://api.github.com/repos/helix-editor/helix/issues/events/8703013885","actor":{"login":"archseer","id":1372918,"node_id":"MDQ6VXNlcjEzNzI5MTg=","avatar_url":"https://avatars.githubusercontent.com/u/1372918?v=4","gravatar_id":"","url":"https://api.github.com/users/archseer","html_url":"https://github.com/archseer","followers_url":"https://api.github.com/users/archseer/followers","following_url":"https://api.github.com/users/archseer/following{/other_user}","gists_url":"https://api.github.com/users/archseer/gists{/gist_id}","starred_url":"https://api.github.com/users/archseer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/archseer/subscriptions","organizations_url":"https://api.github.com/users/archseer/orgs","repos_url":"https://api.github.com/users/archseer/repos","events_url":"https://api.github.com/users/archseer/events{/privacy}","received_events_url":"https://api.github.com/users/archseer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2cf4ce235662fcb272c684751b844b2ebc1b757f","commit_url":"https://api.github.com/repos/helix-editor/helix/commits/2cf4ce235662fcb272c684751b844b2ebc1b757f","created_at":"2023-03-09T04:08:31Z","performed_via_github_app":null},{"id":8806553706,"node_id":"REFE_lADOD__WI85fOZqwzwAAAAIM6Vhq","url":"https://api.github.com/repos/helix-editor/helix/issues/events/8806553706","actor":{"login":"sagnibak","id":23586947,"node_id":"MDQ6VXNlcjIzNTg2OTQ3","avatar_url":"https://avatars.githubusercontent.com/u/23586947?v=4","gravatar_id":"","url":"https://api.github.com/users/sagnibak","html_url":"https://github.com/sagnibak","followers_url":"https://api.github.com/users/sagnibak/followers","following_url":"https://api.github.com/users/sagnibak/following{/other_user}","gists_url":"https://api.github.com/users/sagnibak/gists{/gist_id}","starred_url":"https://api.github.com/users/sagnibak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sagnibak/subscriptions","organizations_url":"https://api.github.com/users/sagnibak/orgs","repos_url":"https://api.github.com/users/sagnibak/repos","events_url":"https://api.github.com/users/sagnibak/events{/privacy}","received_events_url":"https://api.github.com/users/sagnibak/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d905ad133e0b2b8ebc4ee39ff30c424c6c46e954","commit_url":"https://api.github.com/repos/sagnibak/helix/commits/d905ad133e0b2b8ebc4ee39ff30c424c6c46e954","created_at":"2023-03-21T14:45:07Z","performed_via_github_app":null},{"id":9715115920,"node_id":"REFE_lADOD__WI85fOZqwzwAAAAJDEOeQ","url":"https://api.github.com/repos/helix-editor/helix/issues/events/9715115920","actor":{"login":"wes-adams","id":7883354,"node_id":"MDQ6VXNlcjc4ODMzNTQ=","avatar_url":"https://avatars.githubusercontent.com/u/7883354?v=4","gravatar_id":"","url":"https://api.github.com/users/wes-adams","html_url":"https://github.com/wes-adams","followers_url":"https://api.github.com/users/wes-adams/followers","following_url":"https://api.github.com/users/wes-adams/following{/other_user}","gists_url":"https://api.github.com/users/wes-adams/gists{/gist_id}","starred_url":"https://api.github.com/users/wes-adams/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wes-adams/subscriptions","organizations_url":"https://api.github.com/users/wes-adams/orgs","repos_url":"https://api.github.com/users/wes-adams/repos","events_url":"https://api.github.com/users/wes-adams/events{/privacy}","received_events_url":"https://api.github.com/users/wes-adams/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8b90f2102aa4f31fbcb38e86c66bcb565e7d75d6","commit_url":"https://api.github.com/repos/wes-adams/helix/commits/8b90f2102aa4f31fbcb38e86c66bcb565e7d75d6","created_at":"2023-07-04T00:00:23Z","performed_via_github_app":null}]