{"url":"https://api.github.com/repos/pyca/cryptography/issues/12257","repository_url":"https://api.github.com/repos/pyca/cryptography","labels_url":"https://api.github.com/repos/pyca/cryptography/issues/12257/labels{/name}","comments_url":"https://api.github.com/repos/pyca/cryptography/issues/12257/comments","events_url":"https://api.github.com/repos/pyca/cryptography/issues/12257/events","html_url":"https://github.com/pyca/cryptography/issues/12257","id":2776920695,"node_id":"I_kwDOALYunM6lhHJ3","number":12257,"title":"Improve error when used libssl does not provide elliptic curve","user":{"login":"felixfontein","id":5781356,"node_id":"MDQ6VXNlcjU3ODEzNTY=","avatar_url":"https://avatars.githubusercontent.com/u/5781356?v=4","gravatar_id":"","url":"https://api.github.com/users/felixfontein","html_url":"https://github.com/felixfontein","followers_url":"https://api.github.com/users/felixfontein/followers","following_url":"https://api.github.com/users/felixfontein/following{/other_user}","gists_url":"https://api.github.com/users/felixfontein/gists{/gist_id}","starred_url":"https://api.github.com/users/felixfontein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/felixfontein/subscriptions","organizations_url":"https://api.github.com/users/felixfontein/orgs","repos_url":"https://api.github.com/users/felixfontein/repos","events_url":"https://api.github.com/users/felixfontein/events{/privacy}","received_events_url":"https://api.github.com/users/felixfontein/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-01-09T06:14:35Z","updated_at":"2025-04-12T03:15:09Z","closed_at":"2025-01-12T02:35:47Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When for example trying to use SECT163K1 to generate a private key with `cryptography` from Fedora 41's package repositories, an `cryptography.exceptions.InternalError` is produced:\r\n\r\n```py\r\nfrom cryptography.hazmat.primitives.asymmetric.ec import generate_private_key, SECT163K1\r\ngenerate_private_key(SECT163K1())\r\n```\r\nresults in\r\n```\r\nTraceback (most recent call last):\r\n  File \"<python-input-0>\", line 2, in <module>\r\n    generate_private_key(SECT163K1())\r\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^\r\ncryptography.exceptions.InternalError: Unknown OpenSSL error. This error is commonly encountered\r\n                        when another library is not cleaning up the OpenSSL error\r\n                        stack. If you are using cryptography with another library\r\n                        that uses OpenSSL try disabling it before reporting a bug.\r\n                        Otherwise please file an issue at\r\n                        https://github.com/pyca/cryptography/issues with\r\n                        information on how to reproduce this. ([<OpenSSLError(code=134217857, lib=16, reason=129, reason_text=unknown group)>])\r\n```\r\n\r\nThis can be reproduced by creating a podman/Docker container from `quay.io/fedora/fedora:41`, running `dnf install python-cryptography python-pip -y` to install Python and cryptography from the package repositories, and then starting `python3` and pasting the above commands.\r\n\r\n(When upgrading cryptography with pip, `python -m pip install --upgrade cryptography`, or overwriting cryptography with the same version from pip, `python -m pip install --force cryptography==43.0.0`, the error does not happen, likely because the system's libssl is not used, but the one included by cryptography.)\r\n\r\nIt would be great if the error could be improved so it doesn't say `InternalError`, but `UnsupportedAlgorithm`.","closed_by":{"login":"reaperhulk","id":161495,"node_id":"MDQ6VXNlcjE2MTQ5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/161495?v=4","gravatar_id":"","url":"https://api.github.com/users/reaperhulk","html_url":"https://github.com/reaperhulk","followers_url":"https://api.github.com/users/reaperhulk/followers","following_url":"https://api.github.com/users/reaperhulk/following{/other_user}","gists_url":"https://api.github.com/users/reaperhulk/gists{/gist_id}","starred_url":"https://api.github.com/users/reaperhulk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reaperhulk/subscriptions","organizations_url":"https://api.github.com/users/reaperhulk/orgs","repos_url":"https://api.github.com/users/reaperhulk/repos","events_url":"https://api.github.com/users/reaperhulk/events{/privacy}","received_events_url":"https://api.github.com/users/reaperhulk/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pyca/cryptography/issues/12257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pyca/cryptography/issues/12257/timeline","performed_via_github_app":null,"state_reason":"completed"}