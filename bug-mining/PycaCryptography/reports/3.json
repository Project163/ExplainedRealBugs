{"url":"https://api.github.com/repos/pyca/cryptography/issues/4095","repository_url":"https://api.github.com/repos/pyca/cryptography","labels_url":"https://api.github.com/repos/pyca/cryptography/issues/4095/labels{/name}","comments_url":"https://api.github.com/repos/pyca/cryptography/issues/4095/comments","events_url":"https://api.github.com/repos/pyca/cryptography/issues/4095/events","html_url":"https://github.com/pyca/cryptography/issues/4095","id":294190506,"node_id":"MDU6SXNzdWUyOTQxOTA1MDY=","number":4095,"title":"Per-call memory growth with derive_private_key","user":{"login":"bfxtsales","id":36127921,"node_id":"MDQ6VXNlcjM2MTI3OTIx","avatar_url":"https://avatars.githubusercontent.com/u/36127921?v=4","gravatar_id":"","url":"https://api.github.com/users/bfxtsales","html_url":"https://github.com/bfxtsales","followers_url":"https://api.github.com/users/bfxtsales/followers","following_url":"https://api.github.com/users/bfxtsales/following{/other_user}","gists_url":"https://api.github.com/users/bfxtsales/gists{/gist_id}","starred_url":"https://api.github.com/users/bfxtsales/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bfxtsales/subscriptions","organizations_url":"https://api.github.com/users/bfxtsales/orgs","repos_url":"https://api.github.com/users/bfxtsales/repos","events_url":"https://api.github.com/users/bfxtsales/events{/privacy}","received_events_url":"https://api.github.com/users/bfxtsales/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-02-04T11:36:46Z","updated_at":"2020-08-04T00:02:51Z","closed_at":"2018-02-04T14:24:08Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Would unbounded memory growth with repeated calls to derive_private_key be expected behavior, or am I doing something wrong or unsupported?  Behavior is the same across Ubuntu and Mac and multiple python versions, all with Cryptography 2.1.4, as noted below. \r\n\r\nThis snippet experiences memory growth with each call to derive_private_key (with or without the \"del sk\" line). I tried some python profilers but can't track it down.\r\n\r\n```\r\nfrom cryptography.hazmat.primitives.asymmetric.ec import SECP256K1, derive_private_key\r\nfrom cryptography.hazmat.backends import default_backend\r\nDEFAULT_BACKEND = default_backend()\r\nSECP256K1 = SECP256K1()\r\nfor i in range(0,10000000):\r\n\tsk = derive_private_key(1, SECP256K1, DEFAULT_BACKEND)\r\n\tdel sk\r\n```\r\n**Platforms**\r\nLinux ubuntu 4.13.0-32-generic #35-Ubuntu SMP Thu Jan 25 09:13:46 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux\r\nPython 2.7.14 (default, Sep 23 2017, 22:06:14) [GCC 7.2.0] on linux2\r\nPython 3.6.3 (default, Oct  3 2017, 21:45:48) [GCC 7.2.0] on linux\r\nCryptography 2.1.4\r\nOpenSSL 1.0.2g  1 Mar 2016\r\n  \r\nmacOS 10.12.6 (16G1114) Darwin 16.7.0\r\nPython 2.7.10 (default, Feb  7 2017, 00:08:15) [GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)] on darwin\r\nPython 3.6.3 (default, Oct  4 2017, 06:09:15) [GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.37)] on darwin\r\nCryptography 2.1.4\r\nOpenSSL 1.0.2n  7 Dec 2017\r\n\r\nThank you.\r\n","closed_by":{"login":"alex","id":772,"node_id":"MDQ6VXNlcjc3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/772?v=4","gravatar_id":"","url":"https://api.github.com/users/alex","html_url":"https://github.com/alex","followers_url":"https://api.github.com/users/alex/followers","following_url":"https://api.github.com/users/alex/following{/other_user}","gists_url":"https://api.github.com/users/alex/gists{/gist_id}","starred_url":"https://api.github.com/users/alex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex/subscriptions","organizations_url":"https://api.github.com/users/alex/orgs","repos_url":"https://api.github.com/users/alex/repos","events_url":"https://api.github.com/users/alex/events{/privacy}","received_events_url":"https://api.github.com/users/alex/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pyca/cryptography/issues/4095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pyca/cryptography/issues/4095/timeline","performed_via_github_app":null,"state_reason":"completed"}