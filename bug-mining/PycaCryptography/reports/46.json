{"url":"https://api.github.com/repos/pyca/cryptography/issues/5794","repository_url":"https://api.github.com/repos/pyca/cryptography","labels_url":"https://api.github.com/repos/pyca/cryptography/issues/5794/labels{/name}","comments_url":"https://api.github.com/repos/pyca/cryptography/issues/5794/comments","events_url":"https://api.github.com/repos/pyca/cryptography/issues/5794/events","html_url":"https://github.com/pyca/cryptography/issues/5794","id":804273327,"node_id":"MDU6SXNzdWU4MDQyNzMzMjc=","number":5794,"title":"Circular import error (again) in 3.4.3","user":{"login":"mat-gas","id":68234729,"node_id":"MDQ6VXNlcjY4MjM0NzI5","avatar_url":"https://avatars.githubusercontent.com/u/68234729?v=4","gravatar_id":"","url":"https://api.github.com/users/mat-gas","html_url":"https://github.com/mat-gas","followers_url":"https://api.github.com/users/mat-gas/followers","following_url":"https://api.github.com/users/mat-gas/following{/other_user}","gists_url":"https://api.github.com/users/mat-gas/gists{/gist_id}","starred_url":"https://api.github.com/users/mat-gas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mat-gas/subscriptions","organizations_url":"https://api.github.com/users/mat-gas/orgs","repos_url":"https://api.github.com/users/mat-gas/repos","events_url":"https://api.github.com/users/mat-gas/events{/privacy}","received_events_url":"https://api.github.com/users/mat-gas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-02-09T06:59:33Z","updated_at":"2021-05-11T00:00:34Z","closed_at":"2021-02-09T15:38:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Opening a new issue as the old one (https://github.com/pyca/cryptography/issues/5756) wasn't re-opened after my comment:\r\n\r\n\r\n@reaperhulk\r\n\r\nHi,\r\n\r\nstill got some circular import problems here with cryptography 3.4.3 :\r\n\r\n`AttributeError: partially initialized module 'cryptography.hazmat.primitives.asymmetric.dh' has no attribute 'DHParameters' (most likely due to a circular import)`\r\n\r\nreproducer used (gencrypto.py):\r\n\r\n```\r\npip3 install -U cryptography\r\nCollecting cryptography\r\n  Downloading cryptography-3.4.3-cp36-abi3-manylinux2014_x86_64.whl (3.2 MB)\r\n     |████████████████████████████████| 3.2 MB 5.3 MB/s \r\n\r\n\r\npython3 gencrypto.py\r\n\r\nTraceback (most recent call last):\r\n  File \"gencrypto.py\", line 2, in <module>\r\n    from cryptography.hazmat.primitives.asymmetric import dh\r\n  File \"/home/xxxxx/.local/lib/python3.8/site-packages/cryptography/hazmat/primitives/asymmetric/dh.py\", line 11, in <module>\r\n    from cryptography.hazmat.primitives import serialization\r\n  File \"/home/xxxxx/.local/lib/python3.8/site-packages/cryptography/hazmat/primitives/serialization/__init__.py\", line 15, in <module>\r\n    from cryptography.hazmat.primitives.serialization.base import (\r\n  File \"/home/xxxxx/.local/lib/python3.8/site-packages/cryptography/hazmat/primitives/serialization/base.py\", line 28, in <module>\r\n    def load_pem_parameters(data: bytes, backend=None) -> dh.DHParameters:\r\nAttributeError: partially initialized module 'cryptography.hazmat.primitives.asymmetric.dh' has no attribute 'DHParameters' (most likely due to a circular import)\r\n```\r\n\r\n**gencrypto.py**\r\n\r\n```\r\nimport time\r\nfrom cryptography.hazmat.primitives.asymmetric import dh\r\n\r\n\r\nfor i in [2048,3072,4096]:\r\n    begin=time.time()\r\n    params = dh.generate_parameters(\r\n        generator=2,\r\n        key_size=i,\r\n    )\r\n    end=time.time()\r\n    print('took {}s for {} keysize'.format(int(end-begin), i))\r\n```","closed_by":{"login":"reaperhulk","id":161495,"node_id":"MDQ6VXNlcjE2MTQ5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/161495?v=4","gravatar_id":"","url":"https://api.github.com/users/reaperhulk","html_url":"https://github.com/reaperhulk","followers_url":"https://api.github.com/users/reaperhulk/followers","following_url":"https://api.github.com/users/reaperhulk/following{/other_user}","gists_url":"https://api.github.com/users/reaperhulk/gists{/gist_id}","starred_url":"https://api.github.com/users/reaperhulk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reaperhulk/subscriptions","organizations_url":"https://api.github.com/users/reaperhulk/orgs","repos_url":"https://api.github.com/users/reaperhulk/repos","events_url":"https://api.github.com/users/reaperhulk/events{/privacy}","received_events_url":"https://api.github.com/users/reaperhulk/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pyca/cryptography/issues/5794/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pyca/cryptography/issues/5794/timeline","performed_via_github_app":null,"state_reason":"completed"}