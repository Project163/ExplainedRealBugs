[{"url":"https://api.github.com/repos/pyca/cryptography/issues/comments/2453033098","html_url":"https://github.com/pyca/cryptography/issues/11878#issuecomment-2453033098","issue_url":"https://api.github.com/repos/pyca/cryptography/issues/11878","id":2453033098,"node_id":"IC_kwDOALYunM6SNlCK","user":{"login":"alex","id":772,"node_id":"MDQ6VXNlcjc3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/772?v=4","gravatar_id":"","url":"https://api.github.com/users/alex","html_url":"https://github.com/alex","followers_url":"https://api.github.com/users/alex/followers","following_url":"https://api.github.com/users/alex/following{/other_user}","gists_url":"https://api.github.com/users/alex/gists{/gist_id}","starred_url":"https://api.github.com/users/alex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex/subscriptions","organizations_url":"https://api.github.com/users/alex/orgs","repos_url":"https://api.github.com/users/alex/repos","events_url":"https://api.github.com/users/alex/events{/privacy}","received_events_url":"https://api.github.com/users/alex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-02T16:06:08Z","updated_at":"2024-11-02T16:06:08Z","body":"This is definitely a bug, and it's a bug in derive -- it should reject this\r\nkey\r\n\r\nOn Sat, Nov 2, 2024, 11:41 AM Hanno Böck ***@***.***> wrote:\r\n\r\n> I noticed an odd behavior when accidentally creating an ECDSA key with a\r\n> too large private key value.\r\n>\r\n> Example code:\r\n>\r\n> #!/usr/bin/python3\r\n> from cryptography.hazmat.primitives.asymmetric import ec\r\n> from cryptography.hazmat.primitives import serialization\r\n> ecval = 0xE2563328DFABF68188606B91324281C1D58A4456431B09D510B35FECC9F307CA1822846FA2671371A9A81BAC0E35749D\r\n> key = ec.derive_private_key(ecval, ec.SECP256R1())\r\n> pem = key.private_bytes(encoding=serialization.Encoding.PEM, format=serialization.PrivateFormat.TraditionalOpenSSL, encryption_algorithm=serialization.NoEncryption())\r\n> print(pem)\r\n>\r\n> This creates an ECDSA key with curve secp256r1, but the private key value\r\n> is not 32 byte (as secp256r1 would expect), but 48 bytes (it comes from a\r\n> secp384r1 key). It is expected that this code will fail, but there are 2\r\n> things unusual:\r\n>\r\n>    - It does not fail on derive_private_key() (maybe it should), but only\r\n>    after trying to export the key\r\n>    - It fails with an error message indicating an internal OpenSSL error,\r\n>    indicating I should report a bug (which I hereby do). It should probably\r\n>    fail with a more helpful error message and a different exception type.\r\n>\r\n> The error I get is:\r\n>\r\n> cryptography.exceptions.InternalError: Unknown OpenSSL error. This error is commonly encountered\r\n>                         when another library is not cleaning up the OpenSSL error\r\n>                         stack. If you are using cryptography with another library\r\n>                         that uses OpenSSL try disabling it before reporting a bug.\r\n>                         Otherwise please file an issue at\r\n>                         https://github.com/pyca/cryptography/issues with\r\n>                         information on how to reproduce this. ([<OpenSSLError(code=134217828, lib=16, reason=100, reason_text=buffer too small)>, <OpenSSLError(code=134742032, lib=16, reason=524304, reason_text=EC lib)>, <OpenSSLError(code=76021773, lib=9, reason=524301, reason_text=ASN1 lib)>])\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/pyca/cryptography/issues/11878>, or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AAAAGBBMMQEAFP3LZZS6HP3Z6TXBXAVCNFSM6AAAAABRB2ROQCVHI2DSMVQWIX3LMV43ASLTON2WKOZSGYZTANJTG4YTEMA>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pyca/cryptography/issues/comments/2453033098/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alex","id":772,"node_id":"MDQ6VXNlcjc3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/772?v=4","gravatar_id":"","url":"https://api.github.com/users/alex","html_url":"https://github.com/alex","followers_url":"https://api.github.com/users/alex/followers","following_url":"https://api.github.com/users/alex/following{/other_user}","gists_url":"https://api.github.com/users/alex/gists{/gist_id}","starred_url":"https://api.github.com/users/alex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex/subscriptions","organizations_url":"https://api.github.com/users/alex/orgs","repos_url":"https://api.github.com/users/alex/repos","events_url":"https://api.github.com/users/alex/events{/privacy}","received_events_url":"https://api.github.com/users/alex/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15087295444,"node_id":"REFE_lADOALYunM6cys-gzwAAAAODRdvU","url":"https://api.github.com/repos/pyca/cryptography/issues/events/15087295444","actor":{"login":"alex","id":772,"node_id":"MDQ6VXNlcjc3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/772?v=4","gravatar_id":"","url":"https://api.github.com/users/alex","html_url":"https://github.com/alex","followers_url":"https://api.github.com/users/alex/followers","following_url":"https://api.github.com/users/alex/following{/other_user}","gists_url":"https://api.github.com/users/alex/gists{/gist_id}","starred_url":"https://api.github.com/users/alex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex/subscriptions","organizations_url":"https://api.github.com/users/alex/orgs","repos_url":"https://api.github.com/users/alex/repos","events_url":"https://api.github.com/users/alex/events{/privacy}","received_events_url":"https://api.github.com/users/alex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8f521680d1f66971576b219dd3dcfe549e543dd9","commit_url":"https://api.github.com/repos/alex/cryptography/commits/8f521680d1f66971576b219dd3dcfe549e543dd9","created_at":"2024-11-02T23:16:04Z","performed_via_github_app":null},{"id":15095582468,"node_id":"REFE_lADOALYunM6cys-gzwAAAAODxE8E","url":"https://api.github.com/repos/pyca/cryptography/issues/events/15095582468","actor":{"login":"alex","id":772,"node_id":"MDQ6VXNlcjc3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/772?v=4","gravatar_id":"","url":"https://api.github.com/users/alex","html_url":"https://github.com/alex","followers_url":"https://api.github.com/users/alex/followers","following_url":"https://api.github.com/users/alex/following{/other_user}","gists_url":"https://api.github.com/users/alex/gists{/gist_id}","starred_url":"https://api.github.com/users/alex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex/subscriptions","organizations_url":"https://api.github.com/users/alex/orgs","repos_url":"https://api.github.com/users/alex/repos","events_url":"https://api.github.com/users/alex/events{/privacy}","received_events_url":"https://api.github.com/users/alex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2f528d394cd0dfeb4dd71182eebdfbde753943e2","commit_url":"https://api.github.com/repos/alex/cryptography/commits/2f528d394cd0dfeb4dd71182eebdfbde753943e2","created_at":"2024-11-03T14:19:28Z","performed_via_github_app":null},{"id":15095613248,"node_id":"CE_lADOALYunM6cys-gzwAAAAODxMdA","url":"https://api.github.com/repos/pyca/cryptography/issues/events/15095613248","actor":{"login":"reaperhulk","id":161495,"node_id":"MDQ6VXNlcjE2MTQ5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/161495?v=4","gravatar_id":"","url":"https://api.github.com/users/reaperhulk","html_url":"https://github.com/reaperhulk","followers_url":"https://api.github.com/users/reaperhulk/followers","following_url":"https://api.github.com/users/reaperhulk/following{/other_user}","gists_url":"https://api.github.com/users/reaperhulk/gists{/gist_id}","starred_url":"https://api.github.com/users/reaperhulk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reaperhulk/subscriptions","organizations_url":"https://api.github.com/users/reaperhulk/orgs","repos_url":"https://api.github.com/users/reaperhulk/repos","events_url":"https://api.github.com/users/reaperhulk/events{/privacy}","received_events_url":"https://api.github.com/users/reaperhulk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"62f115506274b6efcf6738c1f3d3a4facf58a48c","commit_url":"https://api.github.com/repos/pyca/cryptography/commits/62f115506274b6efcf6738c1f3d3a4facf58a48c","created_at":"2024-11-03T14:33:29Z","state_reason":null,"performed_via_github_app":null},{"id":15095633543,"node_id":"REFE_lADOALYunM6cys-gzwAAAAODxRaH","url":"https://api.github.com/repos/pyca/cryptography/issues/events/15095633543","actor":{"login":"hoefling","id":4455652,"node_id":"MDQ6VXNlcjQ0NTU2NTI=","avatar_url":"https://avatars.githubusercontent.com/u/4455652?v=4","gravatar_id":"","url":"https://api.github.com/users/hoefling","html_url":"https://github.com/hoefling","followers_url":"https://api.github.com/users/hoefling/followers","following_url":"https://api.github.com/users/hoefling/following{/other_user}","gists_url":"https://api.github.com/users/hoefling/gists{/gist_id}","starred_url":"https://api.github.com/users/hoefling/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hoefling/subscriptions","organizations_url":"https://api.github.com/users/hoefling/orgs","repos_url":"https://api.github.com/users/hoefling/repos","events_url":"https://api.github.com/users/hoefling/events{/privacy}","received_events_url":"https://api.github.com/users/hoefling/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"62f115506274b6efcf6738c1f3d3a4facf58a48c","commit_url":"https://api.github.com/repos/hoefling/cryptography/commits/62f115506274b6efcf6738c1f3d3a4facf58a48c","created_at":"2024-11-03T14:43:10Z","performed_via_github_app":null},{"id":16151719121,"node_id":"LOE_lADOALYunM6cys-gzwAAAAPCt6zR","url":"https://api.github.com/repos/pyca/cryptography/issues/events/16151719121","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2025-02-02T03:05:52Z","lock_reason":"resolved","performed_via_github_app":null}]