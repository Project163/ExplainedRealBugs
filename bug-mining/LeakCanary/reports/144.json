{"url":"https://api.github.com/repos/square/leakcanary/issues/1634","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/1634/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/1634/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/1634/events","html_url":"https://github.com/square/leakcanary/issues/1634","id":527542722,"node_id":"MDU6SXNzdWU1Mjc1NDI3MjI=","number":1634,"title":"LeakCanary beta 4 fails to find leak that beta 3 does","user":{"login":"msfjarvis","id":13348378,"node_id":"MDQ6VXNlcjEzMzQ4Mzc4","avatar_url":"https://avatars.githubusercontent.com/u/13348378?v=4","gravatar_id":"","url":"https://api.github.com/users/msfjarvis","html_url":"https://github.com/msfjarvis","followers_url":"https://api.github.com/users/msfjarvis/followers","following_url":"https://api.github.com/users/msfjarvis/following{/other_user}","gists_url":"https://api.github.com/users/msfjarvis/gists{/gist_id}","starred_url":"https://api.github.com/users/msfjarvis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/msfjarvis/subscriptions","organizations_url":"https://api.github.com/users/msfjarvis/orgs","repos_url":"https://api.github.com/users/msfjarvis/repos","events_url":"https://api.github.com/users/msfjarvis/events{/privacy}","received_events_url":"https://api.github.com/users/msfjarvis/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":205873874,"node_id":"MDU6TGFiZWwyMDU4NzM4NzQ=","url":"https://api.github.com/repos/square/leakcanary/labels/type:%20bug","name":"type: bug","color":"fc2929","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/square/leakcanary/milestones/13","html_url":"https://github.com/square/leakcanary/milestone/13","labels_url":"https://api.github.com/repos/square/leakcanary/milestones/13/labels","id":4858010,"node_id":"MDk6TWlsZXN0b25lNDg1ODAxMA==","number":13,"title":"2.0-beta-5","description":"","creator":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2019-11-19T00:41:27Z","updated_at":"2019-11-25T19:07:46Z","due_on":null,"closed_at":"2019-11-25T19:07:46Z"},"comments":6,"created_at":"2019-11-23T10:54:51Z","updated_at":"2019-11-25T19:00:24Z","closed_at":"2019-11-25T19:00:24Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\r\n\r\nLeakCanary beta 3 correctly sees [BiometricPrompt](https://developer.android.com/reference/android/hardware/biometrics/BiometricPrompt.html) holding on to the `mAuthenticationCallback` field. Logcat snippets showing both versions processing the leaking event are [here](https://gist.github.com/msfjarvis/c955835b7074722c8d61f8d553c01319).\r\n\r\n### Steps to Reproduce\r\n\r\nSample project: https://github.com/msfjarvis/leakcanary-test-project\r\n\r\n1. Checkout the sample project to [`d3f9bbfedf78fc3bdb2ecc889e7bfc4637835fa3`](https://github.com/msfjarvis/leakcanary-test-project/commit/d3f9bbfedf78fc3bdb2ecc889e7bfc4637835fa3), so you can be on LeakCanary beta 3. \r\n2. Install and launch the app, authenticate with fingerprint, and then use home to go back. LeakCanary will automatically analyze and find the leak.\r\n3. Now switch to `master` and repeat step 2, LeakCanary will dump heap and analyze it again, but will fail to find any leaks.\r\n\r\n**Expected behavior:** LeakCanary beta 4 should also see the leak\r\n\r\n### Version Information\r\n\r\n* LeakCanary version: 2.0-beta-4\r\n* Android OS version: 10\r\n* Gradle version: 6.0.1\r\n\r\n### Additional Information\r\n\r\nThis exact leak also [seems to exist](https://stackoverflow.com/questions/53481621/memory-leak-but-how-can-i-pass-a-different-context-than-the-one-of-the-activity/53825372#53825372) in [FingerprintManager](https://developer.android.com/reference/android/hardware/fingerprint/FingerprintManager.html) as well and was never fixed. I haven't found any fixes or workarounds yet so an update to framework leaks might be in order.","closed_by":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/1634/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/1634/timeline","performed_via_github_app":null,"state_reason":"completed"}