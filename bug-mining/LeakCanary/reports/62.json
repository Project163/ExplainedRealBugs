{"url":"https://api.github.com/repos/square/leakcanary/issues/1070","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/1070/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/1070/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/1070/events","html_url":"https://github.com/square/leakcanary/issues/1070","id":344792209,"node_id":"MDU6SXNzdWUzNDQ3OTIyMDk=","number":1070,"title":"Exclude AccessibilityNodeInfo leak on Android P","user":{"login":"Sloy","id":545251,"node_id":"MDQ6VXNlcjU0NTI1MQ==","avatar_url":"https://avatars.githubusercontent.com/u/545251?v=4","gravatar_id":"","url":"https://api.github.com/users/Sloy","html_url":"https://github.com/Sloy","followers_url":"https://api.github.com/users/Sloy/followers","following_url":"https://api.github.com/users/Sloy/following{/other_user}","gists_url":"https://api.github.com/users/Sloy/gists{/gist_id}","starred_url":"https://api.github.com/users/Sloy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Sloy/subscriptions","organizations_url":"https://api.github.com/users/Sloy/orgs","repos_url":"https://api.github.com/users/Sloy/repos","events_url":"https://api.github.com/users/Sloy/events{/privacy}","received_events_url":"https://api.github.com/users/Sloy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/square/leakcanary/milestones/4","html_url":"https://github.com/square/leakcanary/milestone/4","labels_url":"https://api.github.com/repos/square/leakcanary/milestones/4/labels","id":3523656,"node_id":"MDk6TWlsZXN0b25lMzUyMzY1Ng==","number":4,"title":"1.6.2","description":"","creator":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":14,"state":"closed","created_at":"2018-07-25T18:31:17Z","updated_at":"2018-10-17T02:07:56Z","due_on":"2018-10-16T07:00:00Z","closed_at":"2018-10-17T02:07:56Z"},"comments":1,"created_at":"2018-07-26T10:46:52Z","updated_at":"2018-10-16T23:43:27Z","closed_at":"2018-10-16T23:43:27Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi there! I was investigating a leak related to the AccessibilityNodeInfo without much success. After a while I thought of looking into excluded references, and I was surprised to see [it's there!](https://github.com/square/leakcanary/blob/master/leakcanary-android/src/main/java/com/squareup/leakcanary/AndroidExcludedRefs.java#L326)\r\n\r\nBut it's only ignored in 8.0 (sdk 26). I'm running a device with 8.1 (sdk 27) and the leak is showing normally.\r\n\r\nI see the exclude was added [here](https://github.com/square/leakcanary/commit/e5b2b659a25689fed57ae0d1ddd2101288b866d7) but then was broken [here](https://github.com/square/leakcanary/commit/0feef7de4b0645fa19ef923a4b44e629cb2b7d67).\r\n\r\nWas that change intentional? I didn't want to submit a PR without being sure.\r\n\r\nBelow is a shortened version of the output from LeakCanary:\r\n\r\n```\r\n\r\nIn net.infojobs.mobile.android.debug:2.83.0:1600283000.\r\n* com.infojobs.app.cvedit.experience.view.fragment.EditCvExperienceFragment has leaked:\r\n* static AccessibilityNodeInfo.!(sPool)!\r\n* ↳ Pools$SynchronizedPool.!(mPool)!\r\n* ↳ array Object[].!([12])!\r\n* ↳ AccessibilityNodeInfo.!(mOriginalText)!\r\n* ↳ ReplacementTransformationMethod$SpannedReplacementCharSequence.!(mSpanned)!\r\n* ↳ SpannableStringBuilder.!(mSpans)!\r\n* ↳ array Object[].!([0])!\r\n* ↳ TextView$ChangeWatcher.!(this$0)!\r\n* ↳ MaterialEditText.mContext\r\n* ↳ EditCvExperienceActivity.fragment\r\n* ↳ EditCvExperienceFragment\r\n\r\n* Reference Key: d4c47530-d041-4c9c-a9db-2d2c7568773c\r\n* Device: OnePlus OnePlus ONEPLUS A5000 OnePlus5\r\n* Android Version: 8.1.0 API: 27 LeakCanary: 1.6.1 26145bf\r\n* Durations: watch=82939ms, gc=277ms, heap dump=4353ms, analysis=11759ms\r\n\r\n* Details:\r\n* Class android.view.accessibility.AccessibilityNodeInfo\r\n* Instance of android.util.Pools$SynchronizedPool\r\n* Array of java.lang.Object[]\r\n|   [0] = android.view.accessibility.AccessibilityNodeInfo@317533120 (0x12ed2bc0)\r\n|   [1] = android.view.accessibility.AccessibilityNodeInfo@317533288 (0x12ed2c68)\r\n|   [2] = android.view.accessibility.AccessibilityNodeInfo@317533456 (0x12ed2d10)\r\n|   [3] = android.view.accessibility.AccessibilityNodeInfo@317533624 (0x12ed2db8)\r\n|   [4] = android.view.accessibility.AccessibilityNodeInfo@317533792 (0x12ed2e60)\r\n|   [5] = android.view.accessibility.AccessibilityNodeInfo@317533960 (0x12ed2f08)\r\n|   [6] = android.view.accessibility.AccessibilityNodeInfo@317534128 (0x12ed2fb0)\r\n|   [7] = android.view.accessibility.AccessibilityNodeInfo@317534296 (0x12ed3058)\r\n|   [8] = android.view.accessibility.AccessibilityNodeInfo@317534464 (0x12ed3100)\r\n|   [9] = android.view.accessibility.AccessibilityNodeInfo@317534632 (0x12ed31a8)\r\n|   [10] = android.view.accessibility.AccessibilityNodeInfo@317534800 (0x12ed3250)\r\n|   [11] = android.view.accessibility.AccessibilityNodeInfo@317534968 (0x12ed32f8)\r\n|   [12] = android.view.accessibility.AccessibilityNodeInfo@317535136 (0x12ed33a0)\r\n|   [13] = android.view.accessibility.AccessibilityNodeInfo@317535304 (0x12ed3448)\r\n|   [14] = android.view.accessibility.AccessibilityNodeInfo@317535472 (0x12ed34f0)\r\n|   [15] = android.view.accessibility.AccessibilityNodeInfo@317535640 (0x12ed3598)\r\n|   [16] = android.view.accessibility.AccessibilityNodeInfo@317535808 (0x12ed3640)\r\n|   [17] = android.view.accessibility.AccessibilityNodeInfo@317535976 (0x12ed36e8)\r\n|   [18] = android.view.accessibility.AccessibilityNodeInfo@317536144 (0x12ed3790)\r\n|   [19] = android.view.accessibility.AccessibilityNodeInfo@317536312 (0x12ed3838)\r\n|   [20] = android.view.accessibility.AccessibilityNodeInfo@317536480 (0x12ed38e0)\r\n|   [21] = android.view.accessibility.AccessibilityNodeInfo@317536648 (0x12ed3988)\r\n|   [22] = android.view.accessibility.AccessibilityNodeInfo@317536816 (0x12ed3a30)\r\n|   [23] = android.view.accessibility.AccessibilityNodeInfo@317536984 (0x12ed3ad8)\r\n|   [24] = android.view.accessibility.AccessibilityNodeInfo@317537152 (0x12ed3b80)\r\n|   [25] = android.view.accessibility.AccessibilityNodeInfo@317537320 (0x12ed3c28)\r\n|   [26] = android.view.accessibility.AccessibilityNodeInfo@317537488 (0x12ed3cd0)\r\n|   [27] = android.view.accessibility.AccessibilityNodeInfo@317537656 (0x12ed3d78)\r\n|   [28] = android.view.accessibility.AccessibilityNodeInfo@317537824 (0x12ed3e20)\r\n|   [29] = android.view.accessibility.AccessibilityNodeInfo@317537992 (0x12ed3ec8)\r\n|   [30] = android.view.accessibility.AccessibilityNodeInfo@317538160 (0x12ed3f70)\r\n|   [31] = android.view.accessibility.AccessibilityNodeInfo@317538328 (0x12ed4018)\r\n|   [32] = android.view.accessibility.AccessibilityNodeInfo@317538496 (0x12ed40c0)\r\n|   [33] = android.view.accessibility.AccessibilityNodeInfo@317538664 (0x12ed4168)\r\n|   [34] = android.view.accessibility.AccessibilityNodeInfo@317538832 (0x12ed4210)\r\n|   [35] = android.view.accessibility.AccessibilityNodeInfo@317539000 (0x12ed42b8)\r\n|   [36] = android.view.accessibility.AccessibilityNodeInfo@317539168 (0x12ed4360)\r\n|   [37] = android.view.accessibility.AccessibilityNodeInfo@317539336 (0x12ed4408)\r\n|   [38] = android.view.accessibility.AccessibilityNodeInfo@317539504 (0x12ed44b0)\r\n|   [39] = android.view.accessibility.AccessibilityNodeInfo@317539672 (0x12ed4558)\r\n|   [40] = android.view.accessibility.AccessibilityNodeInfo@317539840 (0x12ed4600)\r\n|   [41] = android.view.accessibility.AccessibilityNodeInfo@317540008 (0x12ed46a8)\r\n|   [42] = android.view.accessibility.AccessibilityNodeInfo@317540176 (0x12ed4750)\r\n|   [43] = android.view.accessibility.AccessibilityNodeInfo@317540344 (0x12ed47f8)\r\n|   [44] = android.view.accessibility.AccessibilityNodeInfo@317540512 (0x12ed48a0)\r\n|   [45] = android.view.accessibility.AccessibilityNodeInfo@317540680 (0x12ed4948)\r\n|   [46] = android.view.accessibility.AccessibilityNodeInfo@317540848 (0x12ed49f0)\r\n|   [47] = android.view.accessibility.AccessibilityNodeInfo@317541016 (0x12ed4a98)\r\n|   [48] = android.view.accessibility.AccessibilityNodeInfo@317541184 (0x12ed4b40)\r\n|   [49] = android.view.accessibility.AccessibilityNodeInfo@317541352 (0x12ed4be8)\r\n* Instance of android.view.accessibility.AccessibilityNodeInfo\r\n|   shadow$_klass_ = android.view.accessibility.AccessibilityNodeInfo\r\n|   shadow$_monitor_ = 0\r\n* Instance of android.text.method.ReplacementTransformationMethod$SpannedReplacementCharSequence\r\n|   shadow$_klass_ = android.text.method.ReplacementTransformationMethod$SpannedReplacementCharSequence\r\n|   shadow$_monitor_ = 0\r\n* Instance of android.text.SpannableStringBuilder\r\n|   shadow$_klass_ = android.text.SpannableStringBuilder\r\n|   shadow$_monitor_ = 0\r\n* Array of java.lang.Object[]\r\n|   [0] = android.widget.TextView$ChangeWatcher@327649192 (0x138787a8)\r\n|   [1] = android.text.method.TextKeyListener@317531704 (0x12ed2638)\r\n|   [2] = android.widget.Editor$SpanController@327651088 (0x13878f10)\r\n|   [3] = android.text.method.SingleLineTransformationMethod@317326568 (0x12ea04e8)\r\n|   [4] = android.text.Selection$START@1887311256 (0x707e1598)\r\n|   [5] = android.text.Selection$END@1887311248 (0x707e1590)\r\n|   [6] = android.text.DynamicLayout$ChangeWatcher@327651112 (0x13878f28)\r\n|   [7] = null\r\n|   [8] = null\r\n* Instance of android.widget.TextView$ChangeWatcher\r\n* Instance of com.rengwuxian.materialedittext.MaterialEditText\r\n* Instance of com.infojobs.app.cvedit.experience.view.activity.phone.EditCvExperienceActivity\r\n* Instance of com.infojobs.app.cvedit.experience.view.fragment.EditCvExperienceFragment\r\n* Excluded Refs:\r\n| Field: android.os.Message.obj\r\n| Field: android.os.Message.next\r\n| Field: android.os.Message.target\r\n| Field: android.view.inputmethod.InputMethodManager.mNextServedView\r\n| Field: android.view.inputmethod.InputMethodManager.mServedView\r\n| Field: android.view.inputmethod.InputMethodManager.mServedInputConnection\r\n| Field: android.view.inputmethod.InputMethodManager.mCurRootView\r\n| Field: android.accounts.AccountManager$AmsTask$Response.this$1\r\n| Field: android.view.Choreographer$FrameDisplayEventReceiver.mMessageQueue (always)\r\n| Thread:FinalizerWatchdogDaemon (always)\r\n| Thread:main (always)\r\n| Thread:LeakCanary-Heap-Dump (always)\r\n| Class:java.lang.ref.WeakReference (always)\r\n| Class:java.lang.ref.SoftReference (always)\r\n| Class:java.lang.ref.PhantomReference (always)\r\n| Class:java.lang.ref.Finalizer (always)\r\n| Class:java.lang.ref.FinalizerReference (always)\r\n\r\n```\r\n","closed_by":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/1070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/1070/timeline","performed_via_github_app":null,"state_reason":"completed"}