{"url":"https://api.github.com/repos/square/leakcanary/issues/2214","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/2214/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/2214/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/2214/events","html_url":"https://github.com/square/leakcanary/issues/2214","id":1081505376,"node_id":"I_kwDOAhNhM85AdnZg","number":2214,"title":"Allow customizing of the heap dumping toast","user":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":205873876,"node_id":"MDU6TGFiZWwyMDU4NzM4NzY=","url":"https://api.github.com/repos/square/leakcanary/labels/type:%20enhancement","name":"type: enhancement","color":"84b6eb","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-12-15T20:55:12Z","updated_at":"2021-12-28T07:45:19Z","closed_at":"2021-12-28T07:45:19Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Currently we show a toast when dumping the heap. There are various implementations depending on whether we're on Android TV, or other things. Supporting all these devices is extra work. Also some people want to just disable the toast all together, e.g. in #2184\r\n\r\nSo instead let's turn this around and extract the toasting as something that can be replaced with whatever way one might want to let the users know the heap is dumping. That way one could implement it differently in Android TV (we can provide documentation or link to a github extension project).\r\n\r\nThe tricky part is that we need an API that allows consumers to specify when the heap is ready to be dumped, i.e. that the toast has been displayed (otherwise we'll freeze the VM before getting the chance to do that)\r\n\r\nAnother approach could be allowing for customization of the heap dumper (so you can decorate heap dumping with something that displays UI). This sorta aligns well with the new native heap dumps, but might conflate needs (i.e. if I want to customize the heap dump UI why would I want to learn about dump heap?\r\n\r\ncould see something like this:\r\n\r\n`heapDumper = ToastingDumper(NotificationDumper(DebugDumper()))` or some other way to express delegation.","closed_by":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/2214/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/2214/timeline","performed_via_github_app":null,"state_reason":"completed"}