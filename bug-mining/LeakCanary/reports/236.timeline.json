[{"id":5975229847,"node_id":"LE_lADOAhNhM85CpzRbzwAAAAFkJsWX","url":"https://api.github.com/repos/square/leakcanary/issues/events/5975229847","actor":{"login":"andronaline","id":98653549,"node_id":"U_kgDOBeFVbQ","avatar_url":"https://avatars.githubusercontent.com/u/98653549?v=4","gravatar_id":"","url":"https://api.github.com/users/andronaline","html_url":"https://github.com/andronaline","followers_url":"https://api.github.com/users/andronaline/followers","following_url":"https://api.github.com/users/andronaline/following{/other_user}","gists_url":"https://api.github.com/users/andronaline/gists{/gist_id}","starred_url":"https://api.github.com/users/andronaline/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andronaline/subscriptions","organizations_url":"https://api.github.com/users/andronaline/orgs","repos_url":"https://api.github.com/users/andronaline/repos","events_url":"https://api.github.com/users/andronaline/events{/privacy}","received_events_url":"https://api.github.com/users/andronaline/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-01-29T15:54:56Z","label":{"name":"type: bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1027746188","html_url":"https://github.com/square/leakcanary/issues/2301#issuecomment-1027746188","issue_url":"https://api.github.com/repos/square/leakcanary/issues/2301","id":1027746188,"node_id":"IC_kwDOAhNhM849QimM","user":{"login":"rvp-diconium","id":63794690,"node_id":"MDQ6VXNlcjYzNzk0Njkw","avatar_url":"https://avatars.githubusercontent.com/u/63794690?v=4","gravatar_id":"","url":"https://api.github.com/users/rvp-diconium","html_url":"https://github.com/rvp-diconium","followers_url":"https://api.github.com/users/rvp-diconium/followers","following_url":"https://api.github.com/users/rvp-diconium/following{/other_user}","gists_url":"https://api.github.com/users/rvp-diconium/gists{/gist_id}","starred_url":"https://api.github.com/users/rvp-diconium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvp-diconium/subscriptions","organizations_url":"https://api.github.com/users/rvp-diconium/orgs","repos_url":"https://api.github.com/users/rvp-diconium/repos","events_url":"https://api.github.com/users/rvp-diconium/events{/privacy}","received_events_url":"https://api.github.com/users/rvp-diconium/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-02T09:34:44Z","updated_at":"2022-02-02T09:35:55Z","body":"Just an \"up\" as it is an easily reproducible bug.\r\nI could reproduce here on emulator x86_64 API 30 and 31 with GooglePlay APIs using `\"com.squareup.leakcanary:leakcanary-android-startup:2.8\"`\r\n\r\nWhenever the \"dead canary\" popup shows up, the `ToastEventListener` leaks (or is falsely accused of leaking). ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1027746188/reactions","total_count":11,"+1":11,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rvp-diconium","id":63794690,"node_id":"MDQ6VXNlcjYzNzk0Njkw","avatar_url":"https://avatars.githubusercontent.com/u/63794690?v=4","gravatar_id":"","url":"https://api.github.com/users/rvp-diconium","html_url":"https://github.com/rvp-diconium","followers_url":"https://api.github.com/users/rvp-diconium/followers","following_url":"https://api.github.com/users/rvp-diconium/following{/other_user}","gists_url":"https://api.github.com/users/rvp-diconium/gists{/gist_id}","starred_url":"https://api.github.com/users/rvp-diconium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rvp-diconium/subscriptions","organizations_url":"https://api.github.com/users/rvp-diconium/orgs","repos_url":"https://api.github.com/users/rvp-diconium/repos","events_url":"https://api.github.com/users/rvp-diconium/events{/privacy}","received_events_url":"https://api.github.com/users/rvp-diconium/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6119016039,"node_id":"SE_lADOAhNhM85CpzRbzwAAAAFsuMZn","url":"https://api.github.com/repos/square/leakcanary/issues/events/6119016039","actor":{"login":"kronstein","id":26740995,"node_id":"MDQ6VXNlcjI2NzQwOTk1","avatar_url":"https://avatars.githubusercontent.com/u/26740995?v=4","gravatar_id":"","url":"https://api.github.com/users/kronstein","html_url":"https://github.com/kronstein","followers_url":"https://api.github.com/users/kronstein/followers","following_url":"https://api.github.com/users/kronstein/following{/other_user}","gists_url":"https://api.github.com/users/kronstein/gists{/gist_id}","starred_url":"https://api.github.com/users/kronstein/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kronstein/subscriptions","organizations_url":"https://api.github.com/users/kronstein/orgs","repos_url":"https://api.github.com/users/kronstein/repos","events_url":"https://api.github.com/users/kronstein/events{/privacy}","received_events_url":"https://api.github.com/users/kronstein/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-22T15:39:40Z","performed_via_github_app":null},{"actor":{"login":"1Ezreal","id":25078212,"node_id":"MDQ6VXNlcjI1MDc4MjEy","avatar_url":"https://avatars.githubusercontent.com/u/25078212?v=4","gravatar_id":"","url":"https://api.github.com/users/1Ezreal","html_url":"https://github.com/1Ezreal","followers_url":"https://api.github.com/users/1Ezreal/followers","following_url":"https://api.github.com/users/1Ezreal/following{/other_user}","gists_url":"https://api.github.com/users/1Ezreal/gists{/gist_id}","starred_url":"https://api.github.com/users/1Ezreal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1Ezreal/subscriptions","organizations_url":"https://api.github.com/users/1Ezreal/orgs","repos_url":"https://api.github.com/users/1Ezreal/repos","events_url":"https://api.github.com/users/1Ezreal/events{/privacy}","received_events_url":"https://api.github.com/users/1Ezreal/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-03-09T08:29:24Z","updated_at":"2022-03-09T08:29:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/1617","repository_url":"https://api.github.com/repos/Blankj/AndroidUtilCode","labels_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/1617/labels{/name}","comments_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/1617/comments","events_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/1617/events","html_url":"https://github.com/Blankj/AndroidUtilCode/issues/1617","id":1163578529,"node_id":"I_kwDOA9kUP85FWsyh","number":1617,"title":"Toast内存泄漏","user":{"login":"1Ezreal","id":25078212,"node_id":"MDQ6VXNlcjI1MDc4MjEy","avatar_url":"https://avatars.githubusercontent.com/u/25078212?v=4","gravatar_id":"","url":"https://api.github.com/users/1Ezreal","html_url":"https://github.com/1Ezreal","followers_url":"https://api.github.com/users/1Ezreal/followers","following_url":"https://api.github.com/users/1Ezreal/following{/other_user}","gists_url":"https://api.github.com/users/1Ezreal/gists{/gist_id}","starred_url":"https://api.github.com/users/1Ezreal/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/1Ezreal/subscriptions","organizations_url":"https://api.github.com/users/1Ezreal/orgs","repos_url":"https://api.github.com/users/1Ezreal/repos","events_url":"https://api.github.com/users/1Ezreal/events{/privacy}","received_events_url":"https://api.github.com/users/1Ezreal/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":416776474,"node_id":"MDU6TGFiZWw0MTY3NzY0NzQ=","url":"https://api.github.com/repos/Blankj/AndroidUtilCode/labels/bug","name":"bug","color":"ee0701","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"Blankj","id":17978187,"node_id":"MDQ6VXNlcjE3OTc4MTg3","avatar_url":"https://avatars.githubusercontent.com/u/17978187?v=4","gravatar_id":"","url":"https://api.github.com/users/Blankj","html_url":"https://github.com/Blankj","followers_url":"https://api.github.com/users/Blankj/followers","following_url":"https://api.github.com/users/Blankj/following{/other_user}","gists_url":"https://api.github.com/users/Blankj/gists{/gist_id}","starred_url":"https://api.github.com/users/Blankj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blankj/subscriptions","organizations_url":"https://api.github.com/users/Blankj/orgs","repos_url":"https://api.github.com/users/Blankj/repos","events_url":"https://api.github.com/users/Blankj/events{/privacy}","received_events_url":"https://api.github.com/users/Blankj/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"Blankj","id":17978187,"node_id":"MDQ6VXNlcjE3OTc4MTg3","avatar_url":"https://avatars.githubusercontent.com/u/17978187?v=4","gravatar_id":"","url":"https://api.github.com/users/Blankj","html_url":"https://github.com/Blankj","followers_url":"https://api.github.com/users/Blankj/followers","following_url":"https://api.github.com/users/Blankj/following{/other_user}","gists_url":"https://api.github.com/users/Blankj/gists{/gist_id}","starred_url":"https://api.github.com/users/Blankj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blankj/subscriptions","organizations_url":"https://api.github.com/users/Blankj/orgs","repos_url":"https://api.github.com/users/Blankj/repos","events_url":"https://api.github.com/users/Blankj/events{/privacy}","received_events_url":"https://api.github.com/users/Blankj/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-03-09T07:20:57Z","updated_at":"2022-03-09T08:29:24Z","closed_at":"2022-03-09T08:27:38Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":64558143,"node_id":"MDEwOlJlcG9zaXRvcnk2NDU1ODE0Mw==","name":"AndroidUtilCode","full_name":"Blankj/AndroidUtilCode","private":false,"owner":{"login":"Blankj","id":17978187,"node_id":"MDQ6VXNlcjE3OTc4MTg3","avatar_url":"https://avatars.githubusercontent.com/u/17978187?v=4","gravatar_id":"","url":"https://api.github.com/users/Blankj","html_url":"https://github.com/Blankj","followers_url":"https://api.github.com/users/Blankj/followers","following_url":"https://api.github.com/users/Blankj/following{/other_user}","gists_url":"https://api.github.com/users/Blankj/gists{/gist_id}","starred_url":"https://api.github.com/users/Blankj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Blankj/subscriptions","organizations_url":"https://api.github.com/users/Blankj/orgs","repos_url":"https://api.github.com/users/Blankj/repos","events_url":"https://api.github.com/users/Blankj/events{/privacy}","received_events_url":"https://api.github.com/users/Blankj/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/Blankj/AndroidUtilCode","description":":fire: Android developers should collect the following utils(updating).","fork":false,"url":"https://api.github.com/repos/Blankj/AndroidUtilCode","forks_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/forks","keys_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/teams","hooks_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/hooks","issue_events_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/events{/number}","events_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/events","assignees_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/assignees{/user}","branches_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/branches{/branch}","tags_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/tags","blobs_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/git/refs{/sha}","trees_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/statuses/{sha}","languages_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/languages","stargazers_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/stargazers","contributors_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/contributors","subscribers_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/subscribers","subscription_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/subscription","commits_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/commits{/sha}","git_commits_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/git/commits{/sha}","comments_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/comments{/number}","issue_comment_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/comments{/number}","contents_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/contents/{+path}","compare_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/merges","archive_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/downloads","issues_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues{/number}","pulls_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/pulls{/number}","milestones_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/milestones{/number}","notifications_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/labels{/name}","releases_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/releases{/id}","deployments_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/deployments","created_at":"2016-07-30T18:18:32Z","updated_at":"2025-11-10T13:05:26Z","pushed_at":"2024-08-15T10:38:10Z","git_url":"git://github.com/Blankj/AndroidUtilCode.git","ssh_url":"git@github.com:Blankj/AndroidUtilCode.git","clone_url":"https://github.com/Blankj/AndroidUtilCode.git","svn_url":"https://github.com/Blankj/AndroidUtilCode","homepage":"https://blankj.com/2016/07/31/android-utils-code/","size":47329,"stargazers_count":33667,"watchers_count":33667,"language":"Java","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":10705,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":325,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["android","androidx","app","bar","cache","encode","encrypt","eventbus","file","fragment","log","network","permission","reflect","regex","snackbar","spannable-string","thread-pool","toast","utils"],"visibility":"public","forks":10705,"open_issues":325,"watchers":33667,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"## 描述 Bug\r\nToast内存泄漏\r\n简洁地描述下 Bug。\r\nToast内存泄漏\r\n- AndroidUtilCode 的版本：<!-- 例如 utilcode:1.16.3 或 utilcodex:1.16.3（这里面是注释，内容需要放在外面） -->\r\n- 1.3.10\r\n- 出现 Bug 的设备型号：<!-- 例如 Nexus 5X -->\r\n- 华为P30\r\n- 设备的 Android 版本：<!-- 例如 API 27 -->\r\n- Android10\r\n\r\n## 相关代码\r\nss\r\n\r\n## 异常堆栈\r\n\r\n ┬───\r\n    │ GC Root: Thread object\r\n    │\r\n    ├─ android.net.ConnectivityThread instance\r\n    │    Leaking: NO (PathClassLoader↓ is not leaking)\r\n    │    Thread name: 'ConnectivityThread'\r\n    │    ↓ Thread.contextClassLoader\r\n    ├─ dalvik.system.PathClassLoader instance\r\n    │    Leaking: NO (ToastEventListener↓ is not leaking and A ClassLoader is never leaking)\r\n    │    ↓ ClassLoader.runtimeInternalObjects\r\n    ├─ java.lang.Object[] array\r\n    │    Leaking: NO (ToastEventListener↓ is not leaking)\r\n    │    ↓ Object[8195]\r\n    ├─ leakcanary.ToastEventListener class\r\n    │    Leaking: NO (a class is never leaking)\r\n    │    ↓ static ToastEventListener.toastCurrentlyShown\r\n    │                                ~~~~~~~~~~~~~~~~~~~\r\n    ├─ android.widget.Toast instance\r\n    │    Leaking: YES (This toast is done showing (Toast.mTN.mWM != null && Toast.mTN.mView == null))\r\n    │    Retaining 10.3 kB in 161 objects\r\n    │    mContext instance of com.small.main.MainActivity with mDestroyed = false\r\n    │    ↓ Toast.mNextView\r\n    ╰→ android.widget.FrameLayout instance\r\n    ​     Leaking: YES (ObjectWatcher was watching this because android.widget.FrameLayout received\r\n    ​     View#onDetachedFromWindow() callback)\r\n    ​     Retaining 8.4 kB in 154 objects\r\n    ​     key = aac3807b-613d-41b2-80ed-3aa51cdf6329\r\n    ​     watchDurationMillis = 27161\r\n    ​     retainedDurationMillis = 22156\r\n    ​     View not part of a window view hierarchy\r\n    ​     View.mAttachInfo is null (view detached)\r\n    ​     View.mWindowAttachCount = 1\r\n    ​     mContext instance of com.small.main.MainActivity with mDestroyed = false\r\n\r\n\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/1617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/Blankj/AndroidUtilCode/issues/1617/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":6358224887,"node_id":"RTE_lADOAhNhM85CpzRbzwAAAAF6-s_3","url":"https://api.github.com/repos/square/leakcanary/issues/events/6358224887","actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-04-03T12:55:14Z","rename":{"from":"DecorView.mMSActions / ToastEventListener.toastC....","to":"ToastEventListener leak"},"performed_via_github_app":null},{"actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-03T12:55:30Z","updated_at":"2022-04-03T12:55:30Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/square/leakcanary/issues/2325","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/2325/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/2325/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/2325/events","html_url":"https://github.com/square/leakcanary/issues/2325","id":1190653300,"node_id":"I_kwDOAhNhM85G9-10","number":2325,"title":"Toast内存泄漏 简洁地描述下 Bug。 Toast内存泄漏  leakcanary2.8.1  出现 Bug 的设备型号： redmik30 Android 版本： Android11","user":{"login":"liufudong","id":13197070,"node_id":"MDQ6VXNlcjEzMTk3MDcw","avatar_url":"https://avatars.githubusercontent.com/u/13197070?v=4","gravatar_id":"","url":"https://api.github.com/users/liufudong","html_url":"https://github.com/liufudong","followers_url":"https://api.github.com/users/liufudong/followers","following_url":"https://api.github.com/users/liufudong/following{/other_user}","gists_url":"https://api.github.com/users/liufudong/gists{/gist_id}","starred_url":"https://api.github.com/users/liufudong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/liufudong/subscriptions","organizations_url":"https://api.github.com/users/liufudong/orgs","repos_url":"https://api.github.com/users/liufudong/repos","events_url":"https://api.github.com/users/liufudong/events{/privacy}","received_events_url":"https://api.github.com/users/liufudong/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-04-02T14:46:57Z","updated_at":"2022-04-03T12:55:30Z","closed_at":"2022-04-03T12:55:30Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":34824499,"node_id":"MDEwOlJlcG9zaXRvcnkzNDgyNDQ5OQ==","name":"leakcanary","full_name":"square/leakcanary","private":false,"owner":{"login":"square","id":82592,"node_id":"MDEyOk9yZ2FuaXphdGlvbjgyNTky","avatar_url":"https://avatars.githubusercontent.com/u/82592?v=4","gravatar_id":"","url":"https://api.github.com/users/square","html_url":"https://github.com/square","followers_url":"https://api.github.com/users/square/followers","following_url":"https://api.github.com/users/square/following{/other_user}","gists_url":"https://api.github.com/users/square/gists{/gist_id}","starred_url":"https://api.github.com/users/square/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/square/subscriptions","organizations_url":"https://api.github.com/users/square/orgs","repos_url":"https://api.github.com/users/square/repos","events_url":"https://api.github.com/users/square/events{/privacy}","received_events_url":"https://api.github.com/users/square/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/square/leakcanary","description":"A memory leak detection library for Android.","fork":false,"url":"https://api.github.com/repos/square/leakcanary","forks_url":"https://api.github.com/repos/square/leakcanary/forks","keys_url":"https://api.github.com/repos/square/leakcanary/keys{/key_id}","collaborators_url":"https://api.github.com/repos/square/leakcanary/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/square/leakcanary/teams","hooks_url":"https://api.github.com/repos/square/leakcanary/hooks","issue_events_url":"https://api.github.com/repos/square/leakcanary/issues/events{/number}","events_url":"https://api.github.com/repos/square/leakcanary/events","assignees_url":"https://api.github.com/repos/square/leakcanary/assignees{/user}","branches_url":"https://api.github.com/repos/square/leakcanary/branches{/branch}","tags_url":"https://api.github.com/repos/square/leakcanary/tags","blobs_url":"https://api.github.com/repos/square/leakcanary/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/square/leakcanary/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/square/leakcanary/git/refs{/sha}","trees_url":"https://api.github.com/repos/square/leakcanary/git/trees{/sha}","statuses_url":"https://api.github.com/repos/square/leakcanary/statuses/{sha}","languages_url":"https://api.github.com/repos/square/leakcanary/languages","stargazers_url":"https://api.github.com/repos/square/leakcanary/stargazers","contributors_url":"https://api.github.com/repos/square/leakcanary/contributors","subscribers_url":"https://api.github.com/repos/square/leakcanary/subscribers","subscription_url":"https://api.github.com/repos/square/leakcanary/subscription","commits_url":"https://api.github.com/repos/square/leakcanary/commits{/sha}","git_commits_url":"https://api.github.com/repos/square/leakcanary/git/commits{/sha}","comments_url":"https://api.github.com/repos/square/leakcanary/comments{/number}","issue_comment_url":"https://api.github.com/repos/square/leakcanary/issues/comments{/number}","contents_url":"https://api.github.com/repos/square/leakcanary/contents/{+path}","compare_url":"https://api.github.com/repos/square/leakcanary/compare/{base}...{head}","merges_url":"https://api.github.com/repos/square/leakcanary/merges","archive_url":"https://api.github.com/repos/square/leakcanary/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/square/leakcanary/downloads","issues_url":"https://api.github.com/repos/square/leakcanary/issues{/number}","pulls_url":"https://api.github.com/repos/square/leakcanary/pulls{/number}","milestones_url":"https://api.github.com/repos/square/leakcanary/milestones{/number}","notifications_url":"https://api.github.com/repos/square/leakcanary/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/square/leakcanary/labels{/name}","releases_url":"https://api.github.com/repos/square/leakcanary/releases{/id}","deployments_url":"https://api.github.com/repos/square/leakcanary/deployments","created_at":"2015-04-29T23:54:16Z","updated_at":"2025-11-10T12:46:59Z","pushed_at":"2025-08-05T05:43:50Z","git_url":"git://github.com/square/leakcanary.git","ssh_url":"git@github.com:square/leakcanary.git","clone_url":"https://github.com/square/leakcanary.git","svn_url":"https://github.com/square/leakcanary","homepage":"https://square.github.io/leakcanary","size":147448,"stargazers_count":29826,"watchers_count":29826,"language":"Kotlin","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":3974,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":144,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["android","java","kotlin","kotlin-android","leak-canary","leak-trace","leakcanary","memory-leak","outofmemory","outofmemoryerror"],"visibility":"public","forks":3974,"open_issues":144,"watchers":29826,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"```┬───\r\n│ GC Root: Global variable in native code\r\n│\r\n├─ java.lang.Object[] array\r\n│    Leaking: NO (ToastEventListener↓ is not leaking)\r\n│    ↓ Object[1137]\r\n├─ leakcanary.ToastEventListener class\r\n│    Leaking: NO (a class is never leaking)\r\n│    ↓ static ToastEventListener.toastCurrentlyShown\r\n│                                ~~~~~~~~~~~~~~~~~~~\r\n├─ android.widget.Toast instance\r\n│    Leaking: UNKNOWN\r\n│    Retaining 7.9 kB in 129 objects\r\n│    mContext instance of com.szyh.smartbuild.ui.activity.login.LoginActivity\r\n│    with mDestroyed = false\r\n│    ↓ Toast.mNextView\r\n│            ~~~~~~~~~\r\n╰→ android.widget.FrameLayout instance\r\n​     Leaking: YES (ObjectWatcher was watching this because android.widget.\r\n​     FrameLayout received View#onDetachedFromWindow() callback)\r\n​     Retaining 7.9 kB in 127 objects\r\n​     key = 5c985fc5-3301-4502-94b0-1fde89ef327d\r\n​     watchDurationMillis = 10365\r\n​     retainedDurationMillis = 5363\r\n​     View not part of a window view hierarchy\r\n​     View.mAttachInfo is null (view detached)\r\n​     View.mWindowAttachCount = 1\r\n​     mContext instance of com.szyh.smartbuild.ui.activity.login.LoginActivity\r\n​     with mDestroyed = false\r\n\r\nMETADATA\r\n\r\nBuild.VERSION.SDK_INT: 30\r\nBuild.MANUFACTURER: Xiaomi\r\nLeakCanary version: 2.8.1\r\nApp process name: com.szyh.smartbuild\r\nStats: LruCache[maxSize=3000,hits=45580,misses=97099,hitRate=31%]\r\nRandomAccess[bytes=14155163,reads=97099,travel=98562363764,range=40344652,size=5\r\n8057768]\r\nAnalysis duration: 55610 ms\r\n```","reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/2325/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/2325/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-03T12:57:31Z","updated_at":"2022-04-03T12:57:31Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/square/leakcanary/issues/2328","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/2328/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/2328/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/2328/events","html_url":"https://github.com/square/leakcanary/pull/2328","id":1190923853,"node_id":"PR_kwDOAhNhM841irrj","number":2328,"title":"Fix toast event listener leak","user":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-04-03T12:57:31Z","updated_at":"2022-04-03T16:04:09Z","closed_at":"2022-04-03T16:04:08Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":34824499,"node_id":"MDEwOlJlcG9zaXRvcnkzNDgyNDQ5OQ==","name":"leakcanary","full_name":"square/leakcanary","private":false,"owner":{"login":"square","id":82592,"node_id":"MDEyOk9yZ2FuaXphdGlvbjgyNTky","avatar_url":"https://avatars.githubusercontent.com/u/82592?v=4","gravatar_id":"","url":"https://api.github.com/users/square","html_url":"https://github.com/square","followers_url":"https://api.github.com/users/square/followers","following_url":"https://api.github.com/users/square/following{/other_user}","gists_url":"https://api.github.com/users/square/gists{/gist_id}","starred_url":"https://api.github.com/users/square/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/square/subscriptions","organizations_url":"https://api.github.com/users/square/orgs","repos_url":"https://api.github.com/users/square/repos","events_url":"https://api.github.com/users/square/events{/privacy}","received_events_url":"https://api.github.com/users/square/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/square/leakcanary","description":"A memory leak detection library for Android.","fork":false,"url":"https://api.github.com/repos/square/leakcanary","forks_url":"https://api.github.com/repos/square/leakcanary/forks","keys_url":"https://api.github.com/repos/square/leakcanary/keys{/key_id}","collaborators_url":"https://api.github.com/repos/square/leakcanary/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/square/leakcanary/teams","hooks_url":"https://api.github.com/repos/square/leakcanary/hooks","issue_events_url":"https://api.github.com/repos/square/leakcanary/issues/events{/number}","events_url":"https://api.github.com/repos/square/leakcanary/events","assignees_url":"https://api.github.com/repos/square/leakcanary/assignees{/user}","branches_url":"https://api.github.com/repos/square/leakcanary/branches{/branch}","tags_url":"https://api.github.com/repos/square/leakcanary/tags","blobs_url":"https://api.github.com/repos/square/leakcanary/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/square/leakcanary/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/square/leakcanary/git/refs{/sha}","trees_url":"https://api.github.com/repos/square/leakcanary/git/trees{/sha}","statuses_url":"https://api.github.com/repos/square/leakcanary/statuses/{sha}","languages_url":"https://api.github.com/repos/square/leakcanary/languages","stargazers_url":"https://api.github.com/repos/square/leakcanary/stargazers","contributors_url":"https://api.github.com/repos/square/leakcanary/contributors","subscribers_url":"https://api.github.com/repos/square/leakcanary/subscribers","subscription_url":"https://api.github.com/repos/square/leakcanary/subscription","commits_url":"https://api.github.com/repos/square/leakcanary/commits{/sha}","git_commits_url":"https://api.github.com/repos/square/leakcanary/git/commits{/sha}","comments_url":"https://api.github.com/repos/square/leakcanary/comments{/number}","issue_comment_url":"https://api.github.com/repos/square/leakcanary/issues/comments{/number}","contents_url":"https://api.github.com/repos/square/leakcanary/contents/{+path}","compare_url":"https://api.github.com/repos/square/leakcanary/compare/{base}...{head}","merges_url":"https://api.github.com/repos/square/leakcanary/merges","archive_url":"https://api.github.com/repos/square/leakcanary/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/square/leakcanary/downloads","issues_url":"https://api.github.com/repos/square/leakcanary/issues{/number}","pulls_url":"https://api.github.com/repos/square/leakcanary/pulls{/number}","milestones_url":"https://api.github.com/repos/square/leakcanary/milestones{/number}","notifications_url":"https://api.github.com/repos/square/leakcanary/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/square/leakcanary/labels{/name}","releases_url":"https://api.github.com/repos/square/leakcanary/releases{/id}","deployments_url":"https://api.github.com/repos/square/leakcanary/deployments","created_at":"2015-04-29T23:54:16Z","updated_at":"2025-11-10T12:46:59Z","pushed_at":"2025-08-05T05:43:50Z","git_url":"git://github.com/square/leakcanary.git","ssh_url":"git@github.com:square/leakcanary.git","clone_url":"https://github.com/square/leakcanary.git","svn_url":"https://github.com/square/leakcanary","homepage":"https://square.github.io/leakcanary","size":147448,"stargazers_count":29826,"watchers_count":29826,"language":"Kotlin","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":3974,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":144,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["android","java","kotlin","kotlin-android","leak-canary","leak-trace","leakcanary","memory-leak","outofmemory","outofmemoryerror"],"visibility":"public","forks":3974,"open_issues":144,"watchers":29826,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/square/leakcanary/pulls/2328","html_url":"https://github.com/square/leakcanary/pull/2328","diff_url":"https://github.com/square/leakcanary/pull/2328.diff","patch_url":"https://github.com/square/leakcanary/pull/2328.patch","merged_at":"2022-04-03T16:04:08Z"},"body":"Fixes #2301","reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/2328/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/2328/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":6358227379,"node_id":"REFE_lADOAhNhM85CpzRbzwAAAAF6-tmz","url":"https://api.github.com/repos/square/leakcanary/issues/events/6358227379","actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ade42f792948863b4517c9638b5ffde00a776c4b","commit_url":"https://api.github.com/repos/square/leakcanary/commits/ade42f792948863b4517c9638b5ffde00a776c4b","created_at":"2022-04-03T12:57:32Z","performed_via_github_app":null},{"id":6358227498,"node_id":"MIE_lADOAhNhM85CpzRbzwAAAAF6-toq","url":"https://api.github.com/repos/square/leakcanary/issues/events/6358227498","actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-04-03T12:57:38Z","milestone":{"title":"2.8.1"},"performed_via_github_app":null},{"id":6358452438,"node_id":"CE_lADOAhNhM85CpzRbzwAAAAF6_kjW","url":"https://api.github.com/repos/square/leakcanary/issues/events/6358452438","actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2022-04-03T16:04:08Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1090389078","html_url":"https://github.com/square/leakcanary/issues/2301#issuecomment-1090389078","issue_url":"https://api.github.com/repos/square/leakcanary/issues/2301","id":1090389078,"node_id":"IC_kwDOAhNhM85A_gRW","user":{"login":"tarun10","id":20115859,"node_id":"MDQ6VXNlcjIwMTE1ODU5","avatar_url":"https://avatars.githubusercontent.com/u/20115859?v=4","gravatar_id":"","url":"https://api.github.com/users/tarun10","html_url":"https://github.com/tarun10","followers_url":"https://api.github.com/users/tarun10/followers","following_url":"https://api.github.com/users/tarun10/following{/other_user}","gists_url":"https://api.github.com/users/tarun10/gists{/gist_id}","starred_url":"https://api.github.com/users/tarun10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarun10/subscriptions","organizations_url":"https://api.github.com/users/tarun10/orgs","repos_url":"https://api.github.com/users/tarun10/repos","events_url":"https://api.github.com/users/tarun10/events{/privacy}","received_events_url":"https://api.github.com/users/tarun10/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-06T15:14:11Z","updated_at":"2022-04-06T15:14:11Z","body":"i am still facing this issue in 2.8.1 library please suggest\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1090389078/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tarun10","id":20115859,"node_id":"MDQ6VXNlcjIwMTE1ODU5","avatar_url":"https://avatars.githubusercontent.com/u/20115859?v=4","gravatar_id":"","url":"https://api.github.com/users/tarun10","html_url":"https://github.com/tarun10","followers_url":"https://api.github.com/users/tarun10/followers","following_url":"https://api.github.com/users/tarun10/following{/other_user}","gists_url":"https://api.github.com/users/tarun10/gists{/gist_id}","starred_url":"https://api.github.com/users/tarun10/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tarun10/subscriptions","organizations_url":"https://api.github.com/users/tarun10/orgs","repos_url":"https://api.github.com/users/tarun10/repos","events_url":"https://api.github.com/users/tarun10/events{/privacy}","received_events_url":"https://api.github.com/users/tarun10/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1091056032","html_url":"https://github.com/square/leakcanary/issues/2301#issuecomment-1091056032","issue_url":"https://api.github.com/repos/square/leakcanary/issues/2301","id":1091056032,"node_id":"IC_kwDOAhNhM85BCDGg","user":{"login":"tuvakov","id":9797510,"node_id":"MDQ6VXNlcjk3OTc1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/9797510?v=4","gravatar_id":"","url":"https://api.github.com/users/tuvakov","html_url":"https://github.com/tuvakov","followers_url":"https://api.github.com/users/tuvakov/followers","following_url":"https://api.github.com/users/tuvakov/following{/other_user}","gists_url":"https://api.github.com/users/tuvakov/gists{/gist_id}","starred_url":"https://api.github.com/users/tuvakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuvakov/subscriptions","organizations_url":"https://api.github.com/users/tuvakov/orgs","repos_url":"https://api.github.com/users/tuvakov/repos","events_url":"https://api.github.com/users/tuvakov/events{/privacy}","received_events_url":"https://api.github.com/users/tuvakov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-04-07T04:03:43Z","updated_at":"2022-04-07T04:03:43Z","body":"The fix will probably released in the next version. So should wait for the next version.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1091056032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tuvakov","id":9797510,"node_id":"MDQ6VXNlcjk3OTc1MTA=","avatar_url":"https://avatars.githubusercontent.com/u/9797510?v=4","gravatar_id":"","url":"https://api.github.com/users/tuvakov","html_url":"https://github.com/tuvakov","followers_url":"https://api.github.com/users/tuvakov/followers","following_url":"https://api.github.com/users/tuvakov/following{/other_user}","gists_url":"https://api.github.com/users/tuvakov/gists{/gist_id}","starred_url":"https://api.github.com/users/tuvakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tuvakov/subscriptions","organizations_url":"https://api.github.com/users/tuvakov/orgs","repos_url":"https://api.github.com/users/tuvakov/repos","events_url":"https://api.github.com/users/tuvakov/events{/privacy}","received_events_url":"https://api.github.com/users/tuvakov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6429854700,"node_id":"DEME_lADOAhNhM85CpzRbzwAAAAF_P8vs","url":"https://api.github.com/repos/square/leakcanary/issues/events/6429854700","actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2022-04-13T19:31:35Z","milestone":{"title":"2.8.1"},"performed_via_github_app":null},{"id":6429854702,"node_id":"MIE_lADOAhNhM85CpzRbzwAAAAF_P8vu","url":"https://api.github.com/repos/square/leakcanary/issues/events/6429854702","actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-04-13T19:31:35Z","milestone":{"title":"2.9"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1631328481","html_url":"https://github.com/square/leakcanary/issues/2301#issuecomment-1631328481","issue_url":"https://api.github.com/repos/square/leakcanary/issues/2301","id":1631328481,"node_id":"IC_kwDOAhNhM85hPBjh","user":{"login":"joshskeen","id":34185,"node_id":"MDQ6VXNlcjM0MTg1","avatar_url":"https://avatars.githubusercontent.com/u/34185?v=4","gravatar_id":"","url":"https://api.github.com/users/joshskeen","html_url":"https://github.com/joshskeen","followers_url":"https://api.github.com/users/joshskeen/followers","following_url":"https://api.github.com/users/joshskeen/following{/other_user}","gists_url":"https://api.github.com/users/joshskeen/gists{/gist_id}","starred_url":"https://api.github.com/users/joshskeen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshskeen/subscriptions","organizations_url":"https://api.github.com/users/joshskeen/orgs","repos_url":"https://api.github.com/users/joshskeen/repos","events_url":"https://api.github.com/users/joshskeen/events{/privacy}","received_events_url":"https://api.github.com/users/joshskeen/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-11T18:42:21Z","updated_at":"2023-07-11T18:42:21Z","body":"Present in leakcanary 2.12, looks to be similar as reported above: \r\n\r\n```\r\nandroid.net.ConnectivityThread instance\r\n│    Leaking: NO (PathClassLoader↓ is not leaking)\r\n│    Thread name: 'ConnectivityThread'\r\n│    ↓ Thread.contextClassLoader\r\n├─ dalvik.system.PathClassLoader instance\r\n│    Leaking: NO (ToastEventListener↓ is not leaking and A ClassLoader is never leaking)\r\n│    ↓ ClassLoader.runtimeInternalObjects\r\n├─ java.lang.Object[] array\r\n│    Leaking: NO (ToastEventListener↓ is not leaking)\r\n│    ↓ Object[1553]\r\n├─ leakcanary.ToastEventListener class\r\n│    Leaking: NO (a class is never leaking)\r\n│    ↓ static ToastEventListener.toastCurrentlyShown\r\n│                                ~~~~~~~~~~~~~~~~~~~\r\n├─ android.widget.Toast instance\r\n│    Leaking: YES (This toast is done showing (Toast.mTN.mWM != null && Toast.mTN.mView == null))\r\n│    Retaining 8,6 kB in 148 objects\r\n│    mContext instance of com.foobar.MainActivity with mDestroyed = false\r\n│    ↓ Toast.mNextView\r\n╰→ android.widget.FrameLayout instance\r\n​     Leaking: YES (ObjectWatcher was watching this because android.widget.FrameLayout received View#onDetachedFromWindow() callback)\r\n​     Retaining 8,6 kB in 147 objects\r\n​     key = 7c8aa03a-6102-4f7e-bd9a-416725eb8399\r\n​     watchDurationMillis = 55307\r\n​     retainedDurationMillis = 50232\r\n​     View not part of a window view hierarchy\r\n​     View.mAttachInfo is null (view detached)\r\n​     View.mWindowAttachCount = 1\r\n​     mContext instance of com.foobar.main.MainActivity with mDestroyed = false\r\n```\r\n\r\nWhen we added [additional Event types ](https://github.com/square/leakcanary/blame/main/leakcanary/leakcanary-android-core/src/main/java/leakcanary/ToastEventListener.kt#L35) did we forget to handle a case where `toastCurrentlyShown` should have also been nulled out? ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1631328481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"joshskeen","id":34185,"node_id":"MDQ6VXNlcjM0MTg1","avatar_url":"https://avatars.githubusercontent.com/u/34185?v=4","gravatar_id":"","url":"https://api.github.com/users/joshskeen","html_url":"https://github.com/joshskeen","followers_url":"https://api.github.com/users/joshskeen/followers","following_url":"https://api.github.com/users/joshskeen/following{/other_user}","gists_url":"https://api.github.com/users/joshskeen/gists{/gist_id}","starred_url":"https://api.github.com/users/joshskeen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshskeen/subscriptions","organizations_url":"https://api.github.com/users/joshskeen/orgs","repos_url":"https://api.github.com/users/joshskeen/repos","events_url":"https://api.github.com/users/joshskeen/events{/privacy}","received_events_url":"https://api.github.com/users/joshskeen/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1633538895","html_url":"https://github.com/square/leakcanary/issues/2301#issuecomment-1633538895","issue_url":"https://api.github.com/repos/square/leakcanary/issues/2301","id":1633538895,"node_id":"IC_kwDOAhNhM85hXdNP","user":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-13T04:47:02Z","updated_at":"2023-07-13T04:47:02Z","body":"> did we forget to handle a case where toastCurrentlyShown should have also been nulled out?\r\n\r\nProbably not. DumpingHeap is the start, HeapDump and HeapDumpFailed are the two possible ends.\r\n\r\nToastEventListener.toastCurrentlyShown is a static field so every heap dump should show the toast and clear the previous field value.\r\n\r\nIncluding, ironically, the heap dump that's used for the presented analysis.\r\n\r\nLooking at our internal leaks I see this:\r\n\r\n```\r\n┬───\r\n│ GC Root: Thread object\r\n│\r\n├─ android.net.ConnectivityThread instance\r\n│    Leaking: NO (PathClassLoader↓ is not leaking)\r\n│    Thread name: 'ConnectivityThread'\r\n│    ↓ Thread.contextClassLoader\r\n├─ dalvik.system.PathClassLoader instance\r\n│    Leaking: NO (ToastEventListener↓ is not leaking and A ClassLoader is never leaking)\r\n│    ↓ ClassLoader.runtimeInternalObjects\r\n├─ java.lang.Object[] array\r\n│    Leaking: NO (ToastEventListener↓ is not leaking)\r\n│    ↓ Object[1553]\r\n├─ leakcanary.ToastEventListener class\r\n│    Leaking: NO (a class is never leaking)\r\n│    ↓ static ToastEventListener.toastCurrentlyShown\r\n│                                ~~~~~~~~~~~~~~~~~~~\r\n├─ android.widget.Toast instance\r\n│    Leaking: YES (This toast is done showing (Toast.mTN.mWM != null && Toast.mTN.mView == null))\r\n│    Retaining 8,6 kB in 148 objects\r\n│    mContext instance of com.squareup.ui.main.MainActivity with mDestroyed = false\r\n│    ↓ Toast.mNextView\r\n╰→ android.widget.FrameLayout instance\r\n​     Leaking: YES (ObjectWatcher was watching this because android.widget.FrameLayout received View#onDetachedFromWindow() callback)\r\n​     Retaining 8,6 kB in 147 objects\r\n​     key = 7c8aa03a-6102-4f7e-bd9a-416725eb8399\r\n​     watchDurationMillis = 55307\r\n​     retainedDurationMillis = 50232\r\n​     View not part of a window view hierarchy\r\n​     View.mAttachInfo is null (view detached)\r\n​     View.mWindowAttachCount = 1\r\n​     mContext instance of com.squareup.ui.main.MainActivity with mDestroyed = false\r\n```\r\n\r\nWorth noting:\r\n- View.mWindowAttachCount = 1  => that toast did show.\r\n- retainedDurationMillis = 50232 => The toast has been held in memory for 50 seconds.\r\n\r\nThis would need some debugging to figure out what's going on. Maybe worth filing a new ticket, though I'm not sure how to investigate\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/comments/1633538895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false}}]