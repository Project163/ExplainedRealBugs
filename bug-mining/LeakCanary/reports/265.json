{"url":"https://api.github.com/repos/square/leakcanary/issues/1759","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/1759/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/1759/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/1759/events","html_url":"https://github.com/square/leakcanary/issues/1759","id":569294400,"node_id":"MDU6SXNzdWU1NjkyOTQ0MDA=","number":1759,"title":"Ignoring unloaded classes","user":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":205873874,"node_id":"MDU6TGFiZWwyMDU4NzM4NzQ=","url":"https://api.github.com/repos/square/leakcanary/labels/type:%20bug","name":"type: bug","color":"fc2929","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/square/leakcanary/milestones/26","html_url":"https://github.com/square/leakcanary/milestone/26","labels_url":"https://api.github.com/repos/square/leakcanary/milestones/26/labels","id":8646148,"node_id":"MI_kwDOAhNhM84Ag-4E","number":26,"title":"2.11","description":"","creator":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2022-11-11T14:36:09Z","updated_at":"2023-05-18T00:20:51Z","due_on":null,"closed_at":"2023-05-18T00:20:51Z"},"comments":3,"created_at":"2020-02-22T07:05:31Z","updated_at":"2022-11-12T20:13:21Z","closed_at":"2022-11-12T20:13:08Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Android can unload and reload classes. Currently the LeakCanary heap dump parser assumes there's only one class object for each class. Unfortunately we've found cases where there are two objects for the same class, one of which referencing instances that cannot be found, leading to crashes.\r\n\r\nPossible approaches:\r\n\r\n* Only keep classes referenced by sticky class GC Roots. On Android all classes currently loaded are held by sticky class gc roots, any other class can be ignored. However that's not true for JVMs.\r\n* Only keep reachable classes. Most correct option, however that would require a full tree traversal (ala mark and sweep) which is expansive.\r\n* Eliminate objects that reference unknown objects. There's no guarantee that unloaded classes reference unknown objects.","closed_by":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/1759/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/1759/timeline","performed_via_github_app":null,"state_reason":"completed"}