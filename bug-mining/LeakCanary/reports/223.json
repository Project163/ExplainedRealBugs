{"url":"https://api.github.com/repos/square/leakcanary/issues/1682","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/1682/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/1682/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/1682/events","html_url":"https://github.com/square/leakcanary/issues/1682","id":539585121,"node_id":"MDU6SXNzdWU1Mzk1ODUxMjE=","number":1682,"title":"New listener for customizing notifying","user":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":205873876,"node_id":"MDU6TGFiZWwyMDU4NzM4NzY=","url":"https://api.github.com/repos/square/leakcanary/labels/type:%20enhancement","name":"type: enhancement","color":"84b6eb","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-12-18T10:16:26Z","updated_at":"2021-12-28T07:45:19Z","closed_at":"2021-12-28T07:45:19Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Still need to iterate a bit on this, but this idea started from the work required for Android TV, where notifications cannot be used, and we had to come up with alternate ways to notify the user.\r\n\r\nThis brings up the general idea of a new callback API to be notified of various events happening, with a default implementation that is the current behavior.\r\n\r\nEvents (WIP):\r\n\r\n* RetainedObjects, with count of retained objects\r\n* DumpingHeap (used to display the toast)\r\n* HeapAnalysisProgress (should it provide an enum value for each step? one subclass per step?)\r\n* HeapAnalyzed (maybe separate success and failure?). Needs to provide extra information that is currently used to display notifications (count of new vs existing leaks)\r\n\r\nWe would also have to deprecate `onHeapAnalyzedListener` (but keep its API and keep it working correctly). We'll move this field to the end of Config (that breaks binary compatibility which is generally not an issue for LeakCanary, apps are expected to recompile on update).\r\n","closed_by":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/1682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/1682/timeline","performed_via_github_app":null,"state_reason":"completed"}