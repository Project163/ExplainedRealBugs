{"url":"https://api.github.com/repos/square/leakcanary/issues/1985","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/1985/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/1985/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/1985/events","html_url":"https://github.com/square/leakcanary/issues/1985","id":733743379,"node_id":"MDU6SXNzdWU3MzM3NDMzNzk=","number":1985,"title":"Track cleared refs","user":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":205873876,"node_id":"MDU6TGFiZWwyMDU4NzM4NzY=","url":"https://api.github.com/repos/square/leakcanary/labels/type:%20enhancement","name":"type: enhancement","color":"84b6eb","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/square/leakcanary/milestones/20","html_url":"https://github.com/square/leakcanary/milestone/20","labels_url":"https://api.github.com/repos/square/leakcanary/milestones/20/labels","id":5939756,"node_id":"MDk6TWlsZXN0b25lNTkzOTc1Ng==","number":20,"title":"2.6","description":"","creator":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":18,"state":"closed","created_at":"2020-10-01T17:51:14Z","updated_at":"2020-12-25T13:13:26Z","due_on":null,"closed_at":"2020-12-25T13:13:26Z"},"comments":0,"created_at":"2020-10-31T15:24:31Z","updated_at":"2020-12-07T22:25:52Z","closed_at":"2020-12-07T22:25:52Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When LeakCanary finds no strongly reachable retained instance, it currently returns a no leak found failure.\r\n\r\nWe're changing that with https://github.com/square/leakcanary/pull/1980 by adding retained instances that are not strongly reachable. Goal is to make it more obvious what's happening.\r\n\r\nThere's another case not covered: weak refs that have been cleared between the last runtime check and the heap dump.\r\n\r\nWe should surface these in the final result. Maybe simple as metadata, with the message string?\r\n\r\nWe need to find a marker that indicates that the weak ref was not empty the last time we checked the weak ref queue (vs a non GCed weak ref, which btw we shouldnt look at). Maybe a new boolean indicating when we've processed ut? Maybe Object Watcher has what we need? TBD. I'm writing this while waiting for croissants.\r\n\r\nAlso worth surfacing: weak refs pointing to ids that dont exist (need to double check current behavior on that).","closed_by":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/1985/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/1985/timeline","performed_via_github_app":null,"state_reason":"completed"}