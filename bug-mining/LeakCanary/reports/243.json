{"url":"https://api.github.com/repos/square/leakcanary/issues/2311","repository_url":"https://api.github.com/repos/square/leakcanary","labels_url":"https://api.github.com/repos/square/leakcanary/issues/2311/labels{/name}","comments_url":"https://api.github.com/repos/square/leakcanary/issues/2311/comments","events_url":"https://api.github.com/repos/square/leakcanary/issues/2311/events","html_url":"https://github.com/square/leakcanary/issues/2311","id":1132168550,"node_id":"I_kwDOAhNhM85De4Vm","number":2311,"title":"Leak Canary for sqlite connections","user":{"login":"juliocbcotta","id":70573,"node_id":"MDQ6VXNlcjcwNTcz","avatar_url":"https://avatars.githubusercontent.com/u/70573?v=4","gravatar_id":"","url":"https://api.github.com/users/juliocbcotta","html_url":"https://github.com/juliocbcotta","followers_url":"https://api.github.com/users/juliocbcotta/followers","following_url":"https://api.github.com/users/juliocbcotta/following{/other_user}","gists_url":"https://api.github.com/users/juliocbcotta/gists{/gist_id}","starred_url":"https://api.github.com/users/juliocbcotta/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/juliocbcotta/subscriptions","organizations_url":"https://api.github.com/users/juliocbcotta/orgs","repos_url":"https://api.github.com/users/juliocbcotta/repos","events_url":"https://api.github.com/users/juliocbcotta/events{/privacy}","received_events_url":"https://api.github.com/users/juliocbcotta/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":205873876,"node_id":"MDU6TGFiZWwyMDU4NzM4NzY=","url":"https://api.github.com/repos/square/leakcanary/labels/type:%20enhancement","name":"type: enhancement","color":"84b6eb","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/square/leakcanary/milestones/23","html_url":"https://github.com/square/leakcanary/milestone/23","labels_url":"https://api.github.com/repos/square/leakcanary/milestones/23/labels","id":7539052,"node_id":"MI_kwDOAhNhM84Acwls","number":23,"title":"2.9","description":"","creator":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":20,"state":"closed","created_at":"2022-01-04T09:47:49Z","updated_at":"2022-04-20T13:29:07Z","due_on":null,"closed_at":"2022-04-20T00:49:55Z"},"comments":2,"created_at":"2022-02-11T09:22:39Z","updated_at":"2022-04-15T22:59:11Z","closed_at":"2022-04-15T22:59:11Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Problem description\r\nIt seems to me, that the recommended way[1] of handling sqlite is by generating a singleton and reuse that throughout the app, so we have just one connection with sqlite, but folks may not always follow these recommendations.\r\n\r\n### Potential solutions\r\nMonitor how many instances of the same Room database exist?\r\nI found this, hope it helps\r\nhttps://stackoverflow.com/a/12138358\r\n\r\n### Additional information\r\n\r\n[1]\r\nhttps://developer.android.com/training/data-storage/room#database\r\n```\r\nNote: If your app runs in a single process, you should follow the singleton design pattern when instantiating an AppDatabase object. Each RoomDatabase instance is fairly expensive, and you rarely need access to multiple instances within a single process.\r\n\r\nIf your app runs in multiple processes, include enableMultiInstanceInvalidation() in your database builder invocation. That way, when you have an instance of AppDatabase in each process, you can invalidate the shared database file in one process, and this invalidation automatically propagates to the instances of AppDatabase within other processes.\r\n```","closed_by":{"login":"pyricau","id":557033,"node_id":"MDQ6VXNlcjU1NzAzMw==","avatar_url":"https://avatars.githubusercontent.com/u/557033?v=4","gravatar_id":"","url":"https://api.github.com/users/pyricau","html_url":"https://github.com/pyricau","followers_url":"https://api.github.com/users/pyricau/followers","following_url":"https://api.github.com/users/pyricau/following{/other_user}","gists_url":"https://api.github.com/users/pyricau/gists{/gist_id}","starred_url":"https://api.github.com/users/pyricau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pyricau/subscriptions","organizations_url":"https://api.github.com/users/pyricau/orgs","repos_url":"https://api.github.com/users/pyricau/repos","events_url":"https://api.github.com/users/pyricau/events{/privacy}","received_events_url":"https://api.github.com/users/pyricau/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/square/leakcanary/issues/2311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/square/leakcanary/issues/2311/timeline","performed_via_github_app":null,"state_reason":"completed"}