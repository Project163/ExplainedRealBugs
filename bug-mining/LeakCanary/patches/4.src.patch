diff --git a/library/leakcanary-android/src/main/java/com/squareup/leakcanary/AndroidHeapDumper.java b/library/leakcanary-android/src/main/java/com/squareup/leakcanary/AndroidHeapDumper.java
index f410065d4..130ad6d02 100644
--- a/library/leakcanary-android/src/main/java/com/squareup/leakcanary/AndroidHeapDumper.java
+++ b/library/leakcanary-android/src/main/java/com/squareup/leakcanary/AndroidHeapDumper.java
@@ -17,6 +17,7 @@ package com.squareup.leakcanary;
 
 import android.os.Debug;
 import android.util.Log;
+import com.squareup.leakcanary.internal.LeakCanaryInternals;
 import java.io.File;
 import java.io.IOException;
 
@@ -57,13 +58,17 @@ public final class AndroidHeapDumper implements HeapDumper {
    * the app process was killed.
    */
   public void cleanup() {
-    if (isExternalStorageWritable()) {
-      Log.d(TAG, "Could not attempt cleanup, external storage not mounted.");
-    }
-    File heapDumpFile = getHeapDumpFile();
-    if (heapDumpFile.exists()) {
-      Log.d(TAG, "Previous analysis did not complete correctly, cleaning: " + heapDumpFile);
-      heapDumpFile.delete();
-    }
+    LeakCanaryInternals.executeOnFileIoThread(new Runnable() {
+      @Override public void run() {
+        if (isExternalStorageWritable()) {
+          Log.d(TAG, "Could not attempt cleanup, external storage not mounted.");
+        }
+        File heapDumpFile = getHeapDumpFile();
+        if (heapDumpFile.exists()) {
+          Log.d(TAG, "Previous analysis did not complete correctly, cleaning: " + heapDumpFile);
+          heapDumpFile.delete();
+        }
+      }
+    });
   }
 }
diff --git a/library/leakcanary-android/src/main/java/com/squareup/leakcanary/internal/LeakCanaryInternals.java b/library/leakcanary-android/src/main/java/com/squareup/leakcanary/internal/LeakCanaryInternals.java
index efeaa3ab8..ffd7fcde8 100644
--- a/library/leakcanary-android/src/main/java/com/squareup/leakcanary/internal/LeakCanaryInternals.java
+++ b/library/leakcanary-android/src/main/java/com/squareup/leakcanary/internal/LeakCanaryInternals.java
@@ -25,6 +25,8 @@ import android.content.pm.ServiceInfo;
 import android.os.Environment;
 import android.util.Log;
 import java.io.File;
+import java.util.concurrent.Executor;
+import java.util.concurrent.Executors;
 
 import static android.content.pm.PackageManager.COMPONENT_ENABLED_STATE_DISABLED;
 import static android.content.pm.PackageManager.COMPONENT_ENABLED_STATE_ENABLED;
@@ -34,6 +36,12 @@ import static android.os.Environment.DIRECTORY_DOWNLOADS;
 
 public final class LeakCanaryInternals {
 
+  private static final Executor fileIoExecutor = Executors.newSingleThreadExecutor();
+
+  public static void executeOnFileIoThread(Runnable runnable) {
+    fileIoExecutor.execute(runnable);
+  }
+
   public static File storageDirectory() {
     File downloadsDirectory = Environment.getExternalStoragePublicDirectory(DIRECTORY_DOWNLOADS);
     File leakCanaryDirectory = new File(downloadsDirectory, "leakcanary");
@@ -78,12 +86,18 @@ public final class LeakCanaryInternals {
     }
   }
 
-  public static void setEnabled(Context context, Class<?> componentClass, boolean enabled) {
-    ComponentName component = new ComponentName(context, componentClass);
-    PackageManager packageManager = context.getPackageManager();
-    int newState = enabled ? COMPONENT_ENABLED_STATE_ENABLED : COMPONENT_ENABLED_STATE_DISABLED;
-    // Blocks on IPC.
-    packageManager.setComponentEnabledSetting(component, newState, DONT_KILL_APP);
+  public static void setEnabled(Context context, final Class<?> componentClass,
+      final boolean enabled) {
+    final Context appContext = context.getApplicationContext();
+    executeOnFileIoThread(new Runnable() {
+      @Override public void run() {
+        ComponentName component = new ComponentName(appContext, componentClass);
+        PackageManager packageManager = appContext.getPackageManager();
+        int newState = enabled ? COMPONENT_ENABLED_STATE_ENABLED : COMPONENT_ENABLED_STATE_DISABLED;
+        // Blocks on IPC.
+        packageManager.setComponentEnabledSetting(component, newState, DONT_KILL_APP);
+      }
+    });
   }
 
   public static boolean isInServiceProcess(Context context, Class<? extends Service> serviceClass) {
diff --git a/library/leakcanary-sample/src/main/java/com/example/leakcanary/ExampleApplication.java b/library/leakcanary-sample/src/main/java/com/example/leakcanary/ExampleApplication.java
index 220e05ec0..5330a7ca3 100644
--- a/library/leakcanary-sample/src/main/java/com/example/leakcanary/ExampleApplication.java
+++ b/library/leakcanary-sample/src/main/java/com/example/leakcanary/ExampleApplication.java
@@ -16,21 +16,22 @@
 package com.example.leakcanary;
 
 import android.app.Application;
-import android.content.Context;
+import android.os.StrictMode;
 import com.squareup.leakcanary.LeakCanary;
-import com.squareup.leakcanary.RefWatcher;
 
 public class ExampleApplication extends Application {
 
-  public static RefWatcher getRefWatcher(Context context) {
-    ExampleApplication application = (ExampleApplication) context.getApplicationContext();
-    return application.refWatcher;
-  }
-
-  private RefWatcher refWatcher;
-
   @Override public void onCreate() {
     super.onCreate();
-    refWatcher = LeakCanary.install(this);
+    enabledStrictMode();
+    LeakCanary.install(this);
+  }
+
+  private void enabledStrictMode() {
+    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder() //
+        .detectAll() //
+        .penaltyLog() //
+        .penaltyDeath() //
+        .build());
   }
 }
