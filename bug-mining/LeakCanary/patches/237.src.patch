diff --git a/leakcanary-android-core/src/main/java/leakcanary/LeakCanary.kt b/leakcanary-android-core/src/main/java/leakcanary/LeakCanary.kt
index 32e23d99c..6027cb934 100644
--- a/leakcanary-android-core/src/main/java/leakcanary/LeakCanary.kt
+++ b/leakcanary-android-core/src/main/java/leakcanary/LeakCanary.kt
@@ -203,7 +203,7 @@ object LeakCanary {
       when {
           RemoteWorkManagerHeapAnalyzer.remoteLeakCanaryServiceInClasspath ->
             RemoteWorkManagerHeapAnalyzer
-          WorkManagerHeapAnalyzer.workManagerInClasspath -> WorkManagerHeapAnalyzer
+          WorkManagerHeapAnalyzer.validWorkManagerInClasspath -> WorkManagerHeapAnalyzer
           else -> BackgroundThreadHeapAnalyzer
       }
     ),
diff --git a/leakcanary-android-core/src/main/java/leakcanary/WorkManagerHeapAnalyzer.kt b/leakcanary-android-core/src/main/java/leakcanary/WorkManagerHeapAnalyzer.kt
index d8762c92d..73a8503e9 100644
--- a/leakcanary-android-core/src/main/java/leakcanary/WorkManagerHeapAnalyzer.kt
+++ b/leakcanary-android-core/src/main/java/leakcanary/WorkManagerHeapAnalyzer.kt
@@ -15,10 +15,17 @@ import shark.SharkLog
  */
 object WorkManagerHeapAnalyzer : EventListener {
 
-  internal val workManagerInClasspath by lazy {
+  internal val validWorkManagerInClasspath by lazy {
     try {
       Class.forName("androidx.work.WorkManager")
-      true
+      // We need Data.Builder.putByteArray which was introduced in WorkManager 2.1.0.
+      // https://github.com/square/leakcanary/issues/2310
+      val dataBuilderClass = Class.forName("androidx.work.Data\$Builder")
+      dataBuilderClass.declaredMethods.any { it.name == "putByteArray" }.apply {
+        if (!this) {
+          SharkLog.d { "Could not find androidx.work.Data\$Builder.putByteArray, WorkManager should be at least 2.1.0." }
+        }
+      }
     } catch (ignored: Throwable) {
       false
     }
