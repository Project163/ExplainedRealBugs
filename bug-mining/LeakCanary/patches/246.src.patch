diff --git a/shark/src/main/java/shark/internal/ByteStringCompat.java b/shark/src/main/java/shark/internal/ByteStringCompat.java
new file mode 100644
index 000000000..efa82e7be
--- /dev/null
+++ b/shark/src/main/java/shark/internal/ByteStringCompat.java
@@ -0,0 +1,14 @@
+package shark.internal;
+
+import okio.ByteString;
+
+class ByteStringCompat {
+
+  /**
+   * This is deprecated (error) to invoke from Kotlin but invoking the Kotlin extension function
+   * leads to improper bytecode that goes through the companion class.
+   */
+  static ByteString encodeUtf8(String string) {
+    return ByteString.encodeUtf8(string);
+  }
+}
diff --git a/shark/src/main/java/shark/internal/Strings.kt b/shark/src/main/java/shark/internal/Strings.kt
index 8784aa404..91a0cc5a9 100644
--- a/shark/src/main/java/shark/internal/Strings.kt
+++ b/shark/src/main/java/shark/internal/Strings.kt
@@ -1,10 +1,8 @@
 package shark.internal
 
-import okio.ByteString.Companion.encodeUtf8
-
 internal fun String.lastSegment(segmentingChar: Char): String {
   val separator = lastIndexOf(segmentingChar)
   return if (separator == -1) this else this.substring(separator + 1)
 }
 
-internal fun String.createSHA1Hash(): String = encodeUtf8().sha1().hex()
\ No newline at end of file
+internal fun String.createSHA1Hash() = ByteStringCompat.encodeUtf8(this).sha1().hex()
