diff --git a/leakcanary-android-core/src/main/java/leakcanary/internal/HeapAnalyzerService.kt b/leakcanary-android-core/src/main/java/leakcanary/internal/HeapAnalyzerService.kt
index ef41a1857..131b9cde7 100644
--- a/leakcanary-android-core/src/main/java/leakcanary/internal/HeapAnalyzerService.kt
+++ b/leakcanary-android-core/src/main/java/leakcanary/internal/HeapAnalyzerService.kt
@@ -37,10 +37,11 @@ internal class HeapAnalyzerService : ForegroundService(
 ), OnAnalysisProgressListener {
 
   override fun onHandleIntentInForeground(intent: Intent?) {
-    if (intent == null) {
-      SharkLog.d { "HeapAnalyzerService received a null intent, ignoring." }
+    if (intent == null || !intent.hasExtra(HEAPDUMP_FILE_EXTRA)) {
+      SharkLog.d { "HeapAnalyzerService received a null or empty intent, ignoring." }
       return
     }
+
     // Since we're running in the main process we should be careful not to impact it.
     Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND)
     val heapDumpFile = intent.getSerializableExtra(HEAPDUMP_FILE_EXTRA) as File
@@ -89,7 +90,7 @@ internal class HeapAnalyzerService : ForegroundService(
       startForegroundService(context, intent)
     }
 
-    fun startForegroundService(
+    private fun startForegroundService(
       context: Context,
       intent: Intent
     ) {
