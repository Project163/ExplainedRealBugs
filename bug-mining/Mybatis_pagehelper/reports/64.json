{"url":"https://api.github.com/repos/pagehelper/Mybatis-PageHelper/issues/201","repository_url":"https://api.github.com/repos/pagehelper/Mybatis-PageHelper","labels_url":"https://api.github.com/repos/pagehelper/Mybatis-PageHelper/issues/201/labels{/name}","comments_url":"https://api.github.com/repos/pagehelper/Mybatis-PageHelper/issues/201/comments","events_url":"https://api.github.com/repos/pagehelper/Mybatis-PageHelper/issues/201/events","html_url":"https://github.com/pagehelper/Mybatis-PageHelper/issues/201","id":308806771,"node_id":"MDU6SXNzdWUzMDg4MDY3NzE=","number":201,"title":"mysql存在左右连接时，count sql语句出错","user":{"login":"DuanDuanPan","id":4475078,"node_id":"MDQ6VXNlcjQ0NzUwNzg=","avatar_url":"https://avatars.githubusercontent.com/u/4475078?v=4","gravatar_id":"","url":"https://api.github.com/users/DuanDuanPan","html_url":"https://github.com/DuanDuanPan","followers_url":"https://api.github.com/users/DuanDuanPan/followers","following_url":"https://api.github.com/users/DuanDuanPan/following{/other_user}","gists_url":"https://api.github.com/users/DuanDuanPan/gists{/gist_id}","starred_url":"https://api.github.com/users/DuanDuanPan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DuanDuanPan/subscriptions","organizations_url":"https://api.github.com/users/DuanDuanPan/orgs","repos_url":"https://api.github.com/users/DuanDuanPan/repos","events_url":"https://api.github.com/users/DuanDuanPan/events{/privacy}","received_events_url":"https://api.github.com/users/DuanDuanPan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-03-27T03:12:23Z","updated_at":"2021-10-06T08:34:11Z","closed_at":"2021-10-06T08:34:11Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"原始sql语句如下，BASE_PARENT，BASE_STUDENT，BASE_PARENT_STUDENT组成多对多\r\n`\r\nSELECT\r\n  bp.ID,\r\n  bp.NAME,\r\n  bp.PHONE,\r\n  bp.IDCODE,\r\n  bp.CREDENTIALS_PIC,\r\n  bp.ROLE,\r\n  bs.ID   child_id,\r\n  bs.NAME child_name\r\nFROM BASE_PARENT bp LEFT JOIN (BASE_STUDENT bs ,BASE_PARENT_STUDENT bst)\r\n    ON (bp.ID = bst.PARENT_ID AND bs.ID = bst.STUDENT_ID)\r\nWHERE 1 = 1\r\n`\r\n经过分页后，count 生成的sql语句如下所示\r\n`\r\nSELECT count(*)\r\nFROM BASE_PARENT bp LEFT JOIN (BASE_STUDENT bs BASE_PARENT_STUDENT bst)\r\n    ON (bp.ID = bst.PARENT_ID AND bs.ID = bst.STUDENT_ID)\r\nWHERE 1 = 1\r\n`\r\n其中LEFT JOIN后的括号中表之间的逗号被自动去除，调试发现SqlParser.getSmartCountSql函数中转化为count sql语句时出错","closed_by":{"login":"abel533","id":1787798,"node_id":"MDQ6VXNlcjE3ODc3OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1787798?v=4","gravatar_id":"","url":"https://api.github.com/users/abel533","html_url":"https://github.com/abel533","followers_url":"https://api.github.com/users/abel533/followers","following_url":"https://api.github.com/users/abel533/following{/other_user}","gists_url":"https://api.github.com/users/abel533/gists{/gist_id}","starred_url":"https://api.github.com/users/abel533/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abel533/subscriptions","organizations_url":"https://api.github.com/users/abel533/orgs","repos_url":"https://api.github.com/users/abel533/repos","events_url":"https://api.github.com/users/abel533/events{/privacy}","received_events_url":"https://api.github.com/users/abel533/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pagehelper/Mybatis-PageHelper/issues/201/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pagehelper/Mybatis-PageHelper/issues/201/timeline","performed_via_github_app":null,"state_reason":"completed"}