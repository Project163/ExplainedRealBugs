{"url":"https://api.github.com/repos/typeorm/typeorm/issues/7449","repository_url":"https://api.github.com/repos/typeorm/typeorm","labels_url":"https://api.github.com/repos/typeorm/typeorm/issues/7449/labels{/name}","comments_url":"https://api.github.com/repos/typeorm/typeorm/issues/7449/comments","events_url":"https://api.github.com/repos/typeorm/typeorm/issues/7449/events","html_url":"https://github.com/typeorm/typeorm/issues/7449","id":822921939,"node_id":"MDU6SXNzdWU4MjI5MjE5Mzk=","number":7449,"title":"getRawOne return type ought to include `undefined`","user":{"login":"osdiab","id":1890926,"node_id":"MDQ6VXNlcjE4OTA5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1890926?v=4","gravatar_id":"","url":"https://api.github.com/users/osdiab","html_url":"https://github.com/osdiab","followers_url":"https://api.github.com/users/osdiab/followers","following_url":"https://api.github.com/users/osdiab/following{/other_user}","gists_url":"https://api.github.com/users/osdiab/gists{/gist_id}","starred_url":"https://api.github.com/users/osdiab/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/osdiab/subscriptions","organizations_url":"https://api.github.com/users/osdiab/orgs","repos_url":"https://api.github.com/users/osdiab/repos","events_url":"https://api.github.com/users/osdiab/events{/privacy}","received_events_url":"https://api.github.com/users/osdiab/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":546735997,"node_id":"MDU6TGFiZWw1NDY3MzU5OTc=","url":"https://api.github.com/repos/typeorm/typeorm/labels/documentation","name":"documentation","color":"f9d0c4","default":true,"description":null},{"id":2454823078,"node_id":"MDU6TGFiZWwyNDU0ODIzMDc4","url":"https://api.github.com/repos/typeorm/typeorm/labels/requires%20triage","name":"requires triage","color":"f9aeb0","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"imnotjames","id":1551593,"node_id":"MDQ6VXNlcjE1NTE1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1551593?v=4","gravatar_id":"","url":"https://api.github.com/users/imnotjames","html_url":"https://github.com/imnotjames","followers_url":"https://api.github.com/users/imnotjames/followers","following_url":"https://api.github.com/users/imnotjames/following{/other_user}","gists_url":"https://api.github.com/users/imnotjames/gists{/gist_id}","starred_url":"https://api.github.com/users/imnotjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imnotjames/subscriptions","organizations_url":"https://api.github.com/users/imnotjames/orgs","repos_url":"https://api.github.com/users/imnotjames/repos","events_url":"https://api.github.com/users/imnotjames/events{/privacy}","received_events_url":"https://api.github.com/users/imnotjames/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"imnotjames","id":1551593,"node_id":"MDQ6VXNlcjE1NTE1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1551593?v=4","gravatar_id":"","url":"https://api.github.com/users/imnotjames","html_url":"https://github.com/imnotjames","followers_url":"https://api.github.com/users/imnotjames/followers","following_url":"https://api.github.com/users/imnotjames/following{/other_user}","gists_url":"https://api.github.com/users/imnotjames/gists{/gist_id}","starred_url":"https://api.github.com/users/imnotjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imnotjames/subscriptions","organizations_url":"https://api.github.com/users/imnotjames/orgs","repos_url":"https://api.github.com/users/imnotjames/repos","events_url":"https://api.github.com/users/imnotjames/events{/privacy}","received_events_url":"https://api.github.com/users/imnotjames/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2021-03-05T09:43:12Z","updated_at":"2025-01-06T14:56:54Z","closed_at":"2021-07-08T03:35:12Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Documentation Issue\r\n\r\n### What was unclear or otherwise insufficient?\r\n\r\nthe typings for `getRawOne` allow any type parameter `T` and blindly returns a `Promise<T>`, so if you use it and no matching db row is found, it will happily lie to you and say that the row is present via the type system. this isn't wrong, per se, but it's an easy footgun.\r\n\r\n### Recommended Fix\r\n\r\nmake the typing of `getRawOne` return the parameterized type ` | undefined`, in case there are no rows present. users of typeorm can use the non-null assertion syntax if they really think it's present.\r\n\r\n\r\n### Additional Context\r\n\r\nmy company's app had unexpected 500s from this, but we're used to TypeORM making undefined access errors go away, because that's something it's particularly good at, if your typings don't do unsafe things like this.\r\n\r\n\r\n### Are you willing to resolve this issue by submitting a Pull Request?\r\n\r\n<!--\r\n  Remember that first-time contributors are welcome! ðŸ™Œ\r\n-->\r\n\r\n- [x] Yes, I have the time, and I know how to start.\r\n- [ ] Yes, I have the time, but I don't know how to start. I would need guidance.\r\n- [ ] No, I don't have the time, although I believe I could do it if I had the time...\r\n- [ ] No, I don't have the time and I wouldn't even know how to start.\r\n\r\n\r\n<!--\r\n  ðŸ‘‹ Have a great day and thank you for the documentation problem report!\r\n-->\r\n","closed_by":{"login":"imnotjames","id":1551593,"node_id":"MDQ6VXNlcjE1NTE1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1551593?v=4","gravatar_id":"","url":"https://api.github.com/users/imnotjames","html_url":"https://github.com/imnotjames","followers_url":"https://api.github.com/users/imnotjames/followers","following_url":"https://api.github.com/users/imnotjames/following{/other_user}","gists_url":"https://api.github.com/users/imnotjames/gists{/gist_id}","starred_url":"https://api.github.com/users/imnotjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imnotjames/subscriptions","organizations_url":"https://api.github.com/users/imnotjames/orgs","repos_url":"https://api.github.com/users/imnotjames/repos","events_url":"https://api.github.com/users/imnotjames/events{/privacy}","received_events_url":"https://api.github.com/users/imnotjames/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/typeorm/typeorm/issues/7449/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/typeorm/typeorm/issues/7449/timeline","performed_via_github_app":null,"state_reason":"completed"}