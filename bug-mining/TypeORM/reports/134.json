{"url":"https://api.github.com/repos/typeorm/typeorm/issues/8756","repository_url":"https://api.github.com/repos/typeorm/typeorm","labels_url":"https://api.github.com/repos/typeorm/typeorm/issues/8756/labels{/name}","comments_url":"https://api.github.com/repos/typeorm/typeorm/issues/8756/comments","events_url":"https://api.github.com/repos/typeorm/typeorm/issues/8756/events","html_url":"https://github.com/typeorm/typeorm/issues/8756","id":1172952181,"node_id":"I_kwDOAyVBJc5F6dR1","number":8756,"title":"Request to improve the RepositoryNotFoundError message","user":{"login":"rolandm2017","id":17944756,"node_id":"MDQ6VXNlcjE3OTQ0NzU2","avatar_url":"https://avatars.githubusercontent.com/u/17944756?v=4","gravatar_id":"","url":"https://api.github.com/users/rolandm2017","html_url":"https://github.com/rolandm2017","followers_url":"https://api.github.com/users/rolandm2017/followers","following_url":"https://api.github.com/users/rolandm2017/following{/other_user}","gists_url":"https://api.github.com/users/rolandm2017/gists{/gist_id}","starred_url":"https://api.github.com/users/rolandm2017/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rolandm2017/subscriptions","organizations_url":"https://api.github.com/users/rolandm2017/orgs","repos_url":"https://api.github.com/users/rolandm2017/repos","events_url":"https://api.github.com/users/rolandm2017/events{/privacy}","received_events_url":"https://api.github.com/users/rolandm2017/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":364554717,"node_id":"MDU6TGFiZWwzNjQ1NTQ3MTc=","url":"https://api.github.com/repos/typeorm/typeorm/labels/new%20feature","name":"new feature","color":"fbca04","default":false,"description":null},{"id":2454823078,"node_id":"MDU6TGFiZWwyNDU0ODIzMDc4","url":"https://api.github.com/repos/typeorm/typeorm/labels/requires%20triage","name":"requires triage","color":"f9aeb0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-03-17T21:46:35Z","updated_at":"2022-03-21T13:43:48Z","closed_at":"2022-03-21T13:43:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n  Please follow the template.  If you don't, your issue may be closed.\r\n\r\n  Have a question?  This is the TypeORM issue tracker - and not the right place\r\n  for general support or questions.  Instead, check the \"Support\" Documentation\r\n  on the best places to ask questions!\r\n\r\n  https://github.com/typeorm/typeorm/blob/master/docs/support.md\r\n-->\r\n\r\n## Feature Description\r\n\r\nModify RepositoryNotFoundError to say *where* the repository was not found.\r\n\r\n### The Problem\r\n\r\nCurrently, RepositoryNotFoundError says, for example:\r\n\r\nRepositoryNotFoundError: No repository for \"FailedLoginEntity\" was found. Looks like this entity is not registered in current \"default\" connection?\r\n\r\nI know for a fact this has been caused at least 3x for me by failing to register the entity in a module. like this:\r\n\r\n```\r\n@Module({\r\n    imports: [\r\n        HttpModule,\r\n        ConfigModule.forRoot({\r\n            ignoreEnvFile: environment.production,\r\n        }),\r\n        TypeOrmModule.forRoot({\r\n            type: 'postgres',\r\n            host: process.env.DB_HOST,\r\n            port: +process.env.DB_PORT || 5432,\r\n            username: process.env.DB_USERNAME,\r\n            password: process.env.DB_PASSWORD,\r\n            database: process.env.DB_DATABASE,\r\n            entities: [\r\n                ProfileEntity,\r\n                UserProfileRelationEntity,\r\n                ProfileRoleEntity,\r\n                UserEntity,\r\n                PasswordResetTokenEntity,\r\n                RefreshTokenEntity,\r\n            ],\r\n            synchronize: true,\r\n        }),\r\n        TypeOrmModule.forFeature([\r\n            ProfileEntity,\r\n\r\n            UserEntity,\r\n            PasswordResetTokenEntity,\r\n            RefreshTokenEntity,\r\n        ]),\r\n    ],\r\n    controllers: [ProfilesSvcController],\r\n    providers: [ProfilesService, UserProfileRelationService, ProfileRolesService],\r\n    exports: [ProfilesService, UserProfileRelationService],\r\n})\r\n```\r\n\r\nMaybe it's more technically challenging that I imagine, but why can't the error direct me to *where* the entity is not registered?\r\n\r\n<!--\r\n  A clear and concise description of what the problem is, and\r\n  why it needs to be implemented as a new feature for TypeORM.\r\n\r\n  For example, \"I'm always frustrated when ...\"\r\n\r\n  Why should this be a part of TypeORM?\r\n-->\r\n\r\n\r\n### The Solution\r\n\r\n<!--\r\n  A clear and concise description of what you want to happen.\r\n\r\n  How can the requested feature be used to approach the problem it's supposed to solve?\r\n-->\r\n\r\nWhen the error is detected, typeORM can look at places the given entity is being used. Maybe look up one or two levels of of directories and down and see if the entity could be registered in a related file.\r\n\r\nMaybe I'm naive and this is a lot harder than I think it is.\r\n\r\n\r\n### Considered Alternatives\r\n\r\n<!--\r\n  A clear and concise description of any alternative solutions\r\n  or features you've considered.\r\n\r\n  If any workaround exists to the best of your knowledge, include it here.\r\n-->\r\n\r\nCould the error message simply say in the stack trace which file the error is coming from? Here's mine:\r\n\r\n```\r\nprofiles-svc_1           |     at RepositoryNotFoundError.TypeORMError [as constructor] (/app/src/error/TypeORMError.ts:7:9)\r\nprofiles-svc_1           |     at new RepositoryNotFoundError (/app/src/error/RepositoryNotFoundError.ts:10:9)\r\nprofiles-svc_1           |     at EntityManager.getRepository (/app/src/entity-manager/EntityManager.ts:987:19)\r\nprofiles-svc_1           |     at Connection.getRepository (/app/src/connection/Connection.ts:339:29)\r\nprofiles-svc_1           |     at InstanceWrapper.useFactory [as metatype] (/app/node_modules/@nestjs/typeorm/dist/typeorm.providers.js:17:30)\r\nprofiles-svc_1           |     at Injector.instantiateClass (/app/node_modules/@nestjs/core/injector/injector.js:304:55)\r\nprofiles-svc_1           |     at callback (/app/node_modules/@nestjs/core/injector/injector.js:48:41)\r\nprofiles-svc_1           |     at processTicksAndRejections (node:internal/process/task_queues:96:5)\r\nprofiles-svc_1           |     at Injector.resolveConstructorParams (/app/node_modules/@nestjs/core/injector/injector.js:124:24)\r\nprofiles-svc_1           |     at Injector.loadInstance (/app/node_modules/@nestjs/core/injector/injector.js:52:9)\r\nprofiles-svc_1           |     at Injector.loadProvider (/app/node_modules/@nestjs/core/injector/injector.js:74:9)\r\nprofiles-svc_1           |     at Injector.lookupComponentInImports (/app/node_modules/@nestjs/core/injector/injector.js:236:17)\r\nprofiles-svc_1           |     at Injector.lookupComponentInParentModules (/app/node_modules/@nestjs/core/injector/injector.js:200:33)\r\nprofiles-svc_1           |     at Injector.resolveComponentInstance (/app/node_modules/@nestjs/core/injector/injector.js:157:33)\r\nprofiles-svc_1           |     at resolveParam (/app/node_modules/@nestjs/core/injector/injector.js:108:38)\r\nprofiles-svc_1           |     at async Promise.all (index 3)\r\n```\r\nI see no clues.\r\n\r\n\r\n### Additional Context\r\n\r\nYou could cut down on users' development time significantly if the change is easy to make. Cost/benefit analysis is required of course.\r\n\r\n<!--\r\n  Add any other context about the feature request here.\r\n-->\r\n\r\n\r\n### Relevant Database Driver(s)\r\n\r\nI have no idea which databases this affects, Ive only used Postgres.\r\n\r\n<!-- Put \"yes\" instead of \"no\" to your issue's relevant databases -->\r\n\r\n| DB Type           | Relevant      |\r\n|-------------------| ---           |\r\n| `aurora-mysql`    | no            |\r\n| `aurora-postgres` | no            |\r\n| `better-sqlite3`  | no            |\r\n| `cockroachdb`     | no            |\r\n| `cordova`         | no            |\r\n| `expo`            | no            |\r\n| `mongodb`         | no            |\r\n| `mysql`           | no            |\r\n| `nativescript`    | no            |\r\n| `oracle`          | no            |\r\n| `postgres`        | no            |\r\n| `react-native`    | no            |\r\n| `sap`             | no            |\r\n| `sqlite`          | no            |\r\n| `sqlite-abstract` | no            |\r\n| `sqljs`           | no            |\r\n| `sqlserver`       | no            |\r\n\r\n\r\n### Are you willing to resolve this issue by submitting a Pull Request?\r\n\r\n<!-- Put \"‚úÖ\" (:white_check_mark:) to one of these options, left \"‚úñÔ∏è\" (:heavy_multiplication_x:) others: -->\r\n\r\n - ‚úñÔ∏è Yes, I have the time, and I know how to start.\r\n - ‚úñÔ∏è Yes, I have the time, but I don't know how to start. I would need guidance.\r\n - ‚úñÔ∏è No, I don‚Äôt have the time, but I can support (using donations) development.\r\n - ‚úÖ  No, I don‚Äôt have the time and I‚Äôm okay to wait for the community / maintainers to resolve this issue.\r\n\r\n\r\n<!--\r\n  Remember that first-time contributors are welcome! üôå\r\n  üëã Have a great day and thank you for the feature request!\r\n-->\r\n","closed_by":{"login":"pleerock","id":1753397,"node_id":"MDQ6VXNlcjE3NTMzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1753397?v=4","gravatar_id":"","url":"https://api.github.com/users/pleerock","html_url":"https://github.com/pleerock","followers_url":"https://api.github.com/users/pleerock/followers","following_url":"https://api.github.com/users/pleerock/following{/other_user}","gists_url":"https://api.github.com/users/pleerock/gists{/gist_id}","starred_url":"https://api.github.com/users/pleerock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pleerock/subscriptions","organizations_url":"https://api.github.com/users/pleerock/orgs","repos_url":"https://api.github.com/users/pleerock/repos","events_url":"https://api.github.com/users/pleerock/events{/privacy}","received_events_url":"https://api.github.com/users/pleerock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/typeorm/typeorm/issues/8756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/typeorm/typeorm/issues/8756/timeline","performed_via_github_app":null,"state_reason":"completed"}