{"url":"https://api.github.com/repos/typeorm/typeorm/issues/3933","repository_url":"https://api.github.com/repos/typeorm/typeorm","labels_url":"https://api.github.com/repos/typeorm/typeorm/issues/3933/labels{/name}","comments_url":"https://api.github.com/repos/typeorm/typeorm/issues/3933/comments","events_url":"https://api.github.com/repos/typeorm/typeorm/issues/3933/events","html_url":"https://github.com/typeorm/typeorm/issues/3933","id":428778820,"node_id":"MDU6SXNzdWU0Mjg3Nzg4MjA=","number":3933,"title":"React Native: create tables query fails in release mode with query syntax error","user":{"login":"naoey","id":3889501,"node_id":"MDQ6VXNlcjM4ODk1MDE=","avatar_url":"https://avatars.githubusercontent.com/u/3889501?v=4","gravatar_id":"","url":"https://api.github.com/users/naoey","html_url":"https://github.com/naoey","followers_url":"https://api.github.com/users/naoey/followers","following_url":"https://api.github.com/users/naoey/following{/other_user}","gists_url":"https://api.github.com/users/naoey/gists{/gist_id}","starred_url":"https://api.github.com/users/naoey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/naoey/subscriptions","organizations_url":"https://api.github.com/users/naoey/orgs","repos_url":"https://api.github.com/users/naoey/repos","events_url":"https://api.github.com/users/naoey/events{/privacy}","received_events_url":"https://api.github.com/users/naoey/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":333605716,"node_id":"MDU6TGFiZWwzMzM2MDU3MTY=","url":"https://api.github.com/repos/typeorm/typeorm/labels/question","name":"question","color":"cc317c","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2019-04-03T13:48:22Z","updated_at":"2020-05-14T15:18:18Z","closed_at":"2019-10-18T09:07:14Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Issue type:**\r\n\r\n[ ] question\r\n[x] bug report\r\n[ ] feature request\r\n[ ] documentation issue\r\n\r\n**Database system/driver:**\r\n\r\n[ ] `cordova`\r\n[ ] `mongodb`\r\n[ ] `mssql`\r\n[ ] `mysql` / `mariadb`\r\n[ ] `oracle`\r\n[ ] `postgres`\r\n[ ] `cockroachdb`\r\n[ ] `sqlite`\r\n[ ] `sqljs`\r\n[x] `react-native`\r\n[ ] `expo`\r\n\r\n**TypeORM version:**\r\n\r\n[ ] `latest`\r\n[ ] `@next`\r\n[x] `0.2.16` (or put your version here)\r\n\r\n**Steps to reproduce or a small repository showing the problem:**\r\n\r\nI only added TypeORM to my project last week. Everything was working great while developing but as soon as I began making release builds of my app the entire database stopped working. Turning on logging shows me this:\r\n```\r\n2019-04-03 19:08:05.864 [error][tid:com.facebook.react.JavaScript] 'query failed: ', 'CREATE TABLE \"temporary_t\" ()'\r\n2019-04-03 19:08:05.866 [error][tid:com.facebook.react.JavaScript] 'error: ', { message: 'near \")\": syntax error', code: 5 }\r\n```\r\n\r\nI've been unable to identify what could be causing this and from a cursory search I haven't been able to find any other reports of this issue.\r\n\r\nI believe the error is being thrown immediately on creation of the database in the root of the app, and no further database related operation work in the application. My initialisation code:\r\n```js\r\nconst sqliteConnectionManager = getConnectionManager();\r\nconst connection = sqliteConnectionManager.create({\r\n  type: 'react-native',\r\n  database: DATABASE_NAME,\r\n  synchronize: true,\r\n  logging: true,\r\n  // migrations,\r\n  entities,\r\n  location: 'default',\r\n});\r\n\r\nawait connection.connect();\r\n```\r\n\r\nI'm using plain JavaScript in this project, not TypeScript. Any help would be much appreciated.\r\n\r\nMay also be worth mentioning I'm using ES6 with decorators for defining my entities, like so:\r\n```js\r\n@Entity()\r\nclass ReferenceDataGroup {\r\n  @PrimaryColumn('text')\r\n  groupId;\r\n\r\n  @Column({ type: 'text', nullable: true })\r\n  lastModified;\r\n\r\n  @OneToMany(() => ReferenceDataValue, rdValue => rdValue.groupId, { eager: false })\r\n  values;\r\n}\r\n```","closed_by":{"login":"pleerock","id":1753397,"node_id":"MDQ6VXNlcjE3NTMzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1753397?v=4","gravatar_id":"","url":"https://api.github.com/users/pleerock","html_url":"https://github.com/pleerock","followers_url":"https://api.github.com/users/pleerock/followers","following_url":"https://api.github.com/users/pleerock/following{/other_user}","gists_url":"https://api.github.com/users/pleerock/gists{/gist_id}","starred_url":"https://api.github.com/users/pleerock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pleerock/subscriptions","organizations_url":"https://api.github.com/users/pleerock/orgs","repos_url":"https://api.github.com/users/pleerock/repos","events_url":"https://api.github.com/users/pleerock/events{/privacy}","received_events_url":"https://api.github.com/users/pleerock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/typeorm/typeorm/issues/3933/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/typeorm/typeorm/issues/3933/timeline","performed_via_github_app":null,"state_reason":"completed"}