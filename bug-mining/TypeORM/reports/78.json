{"url":"https://api.github.com/repos/typeorm/typeorm/issues/6781","repository_url":"https://api.github.com/repos/typeorm/typeorm","labels_url":"https://api.github.com/repos/typeorm/typeorm/issues/6781/labels{/name}","comments_url":"https://api.github.com/repos/typeorm/typeorm/issues/6781/comments","events_url":"https://api.github.com/repos/typeorm/typeorm/issues/6781/events","html_url":"https://github.com/typeorm/typeorm/issues/6781","id":708727131,"node_id":"MDU6SXNzdWU3MDg3MjcxMzE=","number":6781,"title":"typeorm cli migrate:run port issue getting \"config.options.port\" property must be of  type number.","user":{"login":"GLakshmiSravanthi","id":67416683,"node_id":"MDQ6VXNlcjY3NDE2Njgz","avatar_url":"https://avatars.githubusercontent.com/u/67416683?v=4","gravatar_id":"","url":"https://api.github.com/users/GLakshmiSravanthi","html_url":"https://github.com/GLakshmiSravanthi","followers_url":"https://api.github.com/users/GLakshmiSravanthi/followers","following_url":"https://api.github.com/users/GLakshmiSravanthi/following{/other_user}","gists_url":"https://api.github.com/users/GLakshmiSravanthi/gists{/gist_id}","starred_url":"https://api.github.com/users/GLakshmiSravanthi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GLakshmiSravanthi/subscriptions","organizations_url":"https://api.github.com/users/GLakshmiSravanthi/orgs","repos_url":"https://api.github.com/users/GLakshmiSravanthi/repos","events_url":"https://api.github.com/users/GLakshmiSravanthi/events{/privacy}","received_events_url":"https://api.github.com/users/GLakshmiSravanthi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2020-09-25T07:51:34Z","updated_at":"2020-10-02T17:24:07Z","closed_at":"2020-09-26T02:56:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Issue type:**\r\n\r\n<!--\r\n     Have a question?\r\n     Check the \"Support\" Documentation on the best places to ask questions!\r\n     ---\r\n     https://github.com/typeorm/typeorm/blob/master/docs/support.md\r\n-->\r\n\r\n[x ] bug report\r\n[ ] feature request\r\n[ ] documentation issue\r\n\r\n**Database system/driver:**\r\n\r\n[ ] `cordova`\r\n[ ] `mongodb`\r\n[x ] `mssql`\r\n[ ] `mysql` / `mariadb`\r\n[ ] `oracle`\r\n[ ] `postgres`\r\n[ ] `cockroachdb`\r\n[ ] `sqlite`\r\n[ ] `sqljs`\r\n[ ] `react-native`\r\n[ ] `expo`\r\n\r\n**TypeORM version:**\r\n\r\n[x ] `latest`\r\n[ ] `@next`\r\n[ ] `0.x.x` (or put your version here)\r\n\r\nWhile running the `yarn ts-node  ./node_modules/typeorm/cli.js migration:run` facing error \r\nWe are using .env file, which has the typeORM configuration. \r\n\r\n![error](https://user-images.githubusercontent.com/67416683/94231110-fb65a380-ff20-11ea-9539-ac0302f90fe8.PNG)\r\n\r\n\r\nConfigarations we placed\r\n```\r\n\r\nTYPEORM_CONNECTION=mssql\r\nTYPEORM_HOST=localhost\r\nTYPEORM_PORT=1443\r\nTYPEORM_USERNAME=XXXX\r\nTYPEORM_PASSWORD=XXXX\r\nTYPEORM_DATABASE=test\r\nTYPEORM_SYNCHRONIZE=false\r\nTYPEORM_LOGGING=error\r\nTYPEORM_LOGGER=advanced-console\r\n\r\n```\r\n\r\nthis our script file from here we are running db.migrate\r\n![image](https://user-images.githubusercontent.com/67416683/94239596-ac733a80-ff2f-11ea-9b70-4647326df516.png)\r\n\r\nSolutions we tried\r\n\r\n[ * ] This is our folder structure placed `.env` file and `ormconfig.json` are in same folder but when we are running migrations command it is taking .env file not ormconfig.json \r\n![image](https://user-images.githubusercontent.com/67416683/94238037-5d2c0a80-ff2d-11ea-8e46-d41972730bb9.png)\r\n\r\n[ * ] We tried to giving `yarn ts-node  ./node_modules/typeorm/cli.js migration:run -f ormconfig.json` but we are unable to compile\r\n![image](https://user-images.githubusercontent.com/67416683/94238495-1ab6fd80-ff2e-11ea-8790-a1852f7137eb.png)\r\n\r\n[ * ] But by renaming the .env file we are able to compile the command `yarn ts-node  ./node_modules/typeorm/cli.js migration:run -f ormconfig.json` \r\n![image](https://user-images.githubusercontent.com/67416683/94238869-944eeb80-ff2e-11ea-901f-aae474270a7e.png)\r\n\r\n[ * ] We tried pass our .env file as configuration, it results the same error \r\n![image](https://user-images.githubusercontent.com/67416683/94239117-f1e33800-ff2e-11ea-9688-dbc5fca44ff0.png)\r\n\r\n\r\n[ * ] Checked in the typeorm git repo in that `ConnectionOptionsEnvReader()` is reading the env variables and in that port is read from `port: PlatformTools.getEnvVariable(\"TYPEORM_PORT\"),` .  `getEnvVariables is returning a string`. \r\nWhich may be causing the issue ? \r\nPlease help\r\n\r\nThankyou For advance ","closed_by":{"login":"pleerock","id":1753397,"node_id":"MDQ6VXNlcjE3NTMzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1753397?v=4","gravatar_id":"","url":"https://api.github.com/users/pleerock","html_url":"https://github.com/pleerock","followers_url":"https://api.github.com/users/pleerock/followers","following_url":"https://api.github.com/users/pleerock/following{/other_user}","gists_url":"https://api.github.com/users/pleerock/gists{/gist_id}","starred_url":"https://api.github.com/users/pleerock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pleerock/subscriptions","organizations_url":"https://api.github.com/users/pleerock/orgs","repos_url":"https://api.github.com/users/pleerock/repos","events_url":"https://api.github.com/users/pleerock/events{/privacy}","received_events_url":"https://api.github.com/users/pleerock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/typeorm/typeorm/issues/6781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/typeorm/typeorm/issues/6781/timeline","performed_via_github_app":null,"state_reason":"completed"}