{"url":"https://api.github.com/repos/typeorm/typeorm/issues/7030","repository_url":"https://api.github.com/repos/typeorm/typeorm","labels_url":"https://api.github.com/repos/typeorm/typeorm/issues/7030/labels{/name}","comments_url":"https://api.github.com/repos/typeorm/typeorm/issues/7030/comments","events_url":"https://api.github.com/repos/typeorm/typeorm/issues/7030/events","html_url":"https://github.com/typeorm/typeorm/issues/7030","id":738171233,"node_id":"MDU6SXNzdWU3MzgxNzEyMzM=","number":7030,"title":"Column name aliasing broke in v 0.2.29 ","user":{"login":"ddehghan","id":717686,"node_id":"MDQ6VXNlcjcxNzY4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/717686?v=4","gravatar_id":"","url":"https://api.github.com/users/ddehghan","html_url":"https://github.com/ddehghan","followers_url":"https://api.github.com/users/ddehghan/followers","following_url":"https://api.github.com/users/ddehghan/following{/other_user}","gists_url":"https://api.github.com/users/ddehghan/gists{/gist_id}","starred_url":"https://api.github.com/users/ddehghan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddehghan/subscriptions","organizations_url":"https://api.github.com/users/ddehghan/orgs","repos_url":"https://api.github.com/users/ddehghan/repos","events_url":"https://api.github.com/users/ddehghan/events{/privacy}","received_events_url":"https://api.github.com/users/ddehghan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":333605711,"node_id":"MDU6TGFiZWwzMzM2MDU3MTE=","url":"https://api.github.com/repos/typeorm/typeorm/labels/bug","name":"bug","color":"fc2929","default":true,"description":null},{"id":628504132,"node_id":"MDU6TGFiZWw2Mjg1MDQxMzI=","url":"https://api.github.com/repos/typeorm/typeorm/labels/comp:%20query%20builder","name":"comp: query builder","color":"1d76db","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"imnotjames","id":1551593,"node_id":"MDQ6VXNlcjE1NTE1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1551593?v=4","gravatar_id":"","url":"https://api.github.com/users/imnotjames","html_url":"https://github.com/imnotjames","followers_url":"https://api.github.com/users/imnotjames/followers","following_url":"https://api.github.com/users/imnotjames/following{/other_user}","gists_url":"https://api.github.com/users/imnotjames/gists{/gist_id}","starred_url":"https://api.github.com/users/imnotjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imnotjames/subscriptions","organizations_url":"https://api.github.com/users/imnotjames/orgs","repos_url":"https://api.github.com/users/imnotjames/repos","events_url":"https://api.github.com/users/imnotjames/events{/privacy}","received_events_url":"https://api.github.com/users/imnotjames/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"imnotjames","id":1551593,"node_id":"MDQ6VXNlcjE1NTE1OTM=","avatar_url":"https://avatars.githubusercontent.com/u/1551593?v=4","gravatar_id":"","url":"https://api.github.com/users/imnotjames","html_url":"https://github.com/imnotjames","followers_url":"https://api.github.com/users/imnotjames/followers","following_url":"https://api.github.com/users/imnotjames/following{/other_user}","gists_url":"https://api.github.com/users/imnotjames/gists{/gist_id}","starred_url":"https://api.github.com/users/imnotjames/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imnotjames/subscriptions","organizations_url":"https://api.github.com/users/imnotjames/orgs","repos_url":"https://api.github.com/users/imnotjames/repos","events_url":"https://api.github.com/users/imnotjames/events{/privacy}","received_events_url":"https://api.github.com/users/imnotjames/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":14,"created_at":"2020-11-07T04:45:41Z","updated_at":"2022-11-18T21:46:49Z","closed_at":"2020-11-10T10:46:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"~~It looks like bug fix #6870 caused this regression. ~~ Edit from @imnotjames: It seems to be #4760\r\n\r\nIf you have a table with Primary key and another column with the same name, then the Primary ID name gets precedence.  0.2.28 was working correctly.\r\n\r\n\r\n## Issue Description\r\n\r\nWe have a table for example called Book which had a DB primary key in the db. But we don't want to expose this to the users so we have created another column Book_id which has a UUID which we use in our API\r\n\r\n```\r\n@Entity({name: 'website_book'})\r\nexport class Book {\r\n    @PrimaryGeneratedColumn({\r\n        type: 'integer',\r\n        name: 'id',     <========= 0.2.29 behavior \r\n    })\r\n    oldBookId: number;\r\n\r\n    @Column('int', {\r\n        nullable: false,\r\n        name: 'user_id',\r\n    })\r\n    user_id: number;\r\n\r\n    @Column('character varying', {\r\n        nullable: false,\r\n        unique: true,\r\n        length: 38,\r\n        name: 'book_id',\r\n    })\r\n    id: string;    <========= 0.2.28 behavior \r\n}\r\n```\r\n\r\n\r\n### Expected Behavior\r\n\r\n\" Book.id \" should be mapped to (book_id column in the database)\r\n\r\n### Actual Behavior\r\n\r\n\" Book.id \" is mapped to (id column in the database)\r\n\r\n\r\n### My Environment\r\n\r\nNot os or env dependent issue\r\n\r\n| TypeORM version  : 0.2.29\r\n\r\n\r\n### Relevant Database Driver(s)\r\n- [ ] `aurora-data-api`\r\n- [ ] `aurora-data-api-pg`\r\n- [ ] `better-sqlite3`\r\n- [ ] `cockroachdb`\r\n- [ ] `cordova`\r\n- [ ] `expo`\r\n- [ ] `mongodb`\r\n- [ ] `mysql`\r\n- [ ] `nativescript`\r\n- [ ] `oracle`\r\n- [X] `postgres`\r\n- [ ] `react-native`\r\n- [ ] `sap`\r\n- [ ] `sqlite`\r\n- [ ] `sqlite-abstract`\r\n- [ ] `sqljs`\r\n- [ ] `sqlserver`\r\n\r\n\r\n### Are you willing to resolve this issue by submitting a Pull Request?\r\n\r\nI can help test the resolution ","closed_by":{"login":"pleerock","id":1753397,"node_id":"MDQ6VXNlcjE3NTMzOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1753397?v=4","gravatar_id":"","url":"https://api.github.com/users/pleerock","html_url":"https://github.com/pleerock","followers_url":"https://api.github.com/users/pleerock/followers","following_url":"https://api.github.com/users/pleerock/following{/other_user}","gists_url":"https://api.github.com/users/pleerock/gists{/gist_id}","starred_url":"https://api.github.com/users/pleerock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pleerock/subscriptions","organizations_url":"https://api.github.com/users/pleerock/orgs","repos_url":"https://api.github.com/users/pleerock/repos","events_url":"https://api.github.com/users/pleerock/events{/privacy}","received_events_url":"https://api.github.com/users/pleerock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/typeorm/typeorm/issues/7030/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/typeorm/typeorm/issues/7030/timeline","performed_via_github_app":null,"state_reason":"completed"}