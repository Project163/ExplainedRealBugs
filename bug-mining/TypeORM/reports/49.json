{"url":"https://api.github.com/repos/typeorm/typeorm/issues/3379","repository_url":"https://api.github.com/repos/typeorm/typeorm","labels_url":"https://api.github.com/repos/typeorm/typeorm/issues/3379/labels{/name}","comments_url":"https://api.github.com/repos/typeorm/typeorm/issues/3379/comments","events_url":"https://api.github.com/repos/typeorm/typeorm/issues/3379/events","html_url":"https://github.com/typeorm/typeorm/issues/3379","id":396517547,"node_id":"MDU6SXNzdWUzOTY1MTc1NDc=","number":3379,"title":"Migration will keep create and drop indexes if index name is the same across tables","user":{"login":"hkjeffchan","id":695282,"node_id":"MDQ6VXNlcjY5NTI4Mg==","avatar_url":"https://avatars.githubusercontent.com/u/695282?v=4","gravatar_id":"","url":"https://api.github.com/users/hkjeffchan","html_url":"https://github.com/hkjeffchan","followers_url":"https://api.github.com/users/hkjeffchan/followers","following_url":"https://api.github.com/users/hkjeffchan/following{/other_user}","gists_url":"https://api.github.com/users/hkjeffchan/gists{/gist_id}","starred_url":"https://api.github.com/users/hkjeffchan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hkjeffchan/subscriptions","organizations_url":"https://api.github.com/users/hkjeffchan/orgs","repos_url":"https://api.github.com/users/hkjeffchan/repos","events_url":"https://api.github.com/users/hkjeffchan/events{/privacy}","received_events_url":"https://api.github.com/users/hkjeffchan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628495539,"node_id":"MDU6TGFiZWw2Mjg0OTU1Mzk=","url":"https://api.github.com/repos/typeorm/typeorm/labels/comp:%20migrations","name":"comp: migrations","color":"1d76db","default":false,"description":null},{"id":628502779,"node_id":"MDU6TGFiZWw2Mjg1MDI3Nzk=","url":"https://api.github.com/repos/typeorm/typeorm/labels/comp:%20schema%20sync","name":"comp: schema sync","color":"1d76db","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"AlexMesser","id":17142628,"node_id":"MDQ6VXNlcjE3MTQyNjI4","avatar_url":"https://avatars.githubusercontent.com/u/17142628?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexMesser","html_url":"https://github.com/AlexMesser","followers_url":"https://api.github.com/users/AlexMesser/followers","following_url":"https://api.github.com/users/AlexMesser/following{/other_user}","gists_url":"https://api.github.com/users/AlexMesser/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexMesser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexMesser/subscriptions","organizations_url":"https://api.github.com/users/AlexMesser/orgs","repos_url":"https://api.github.com/users/AlexMesser/repos","events_url":"https://api.github.com/users/AlexMesser/events{/privacy}","received_events_url":"https://api.github.com/users/AlexMesser/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"AlexMesser","id":17142628,"node_id":"MDQ6VXNlcjE3MTQyNjI4","avatar_url":"https://avatars.githubusercontent.com/u/17142628?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexMesser","html_url":"https://github.com/AlexMesser","followers_url":"https://api.github.com/users/AlexMesser/followers","following_url":"https://api.github.com/users/AlexMesser/following{/other_user}","gists_url":"https://api.github.com/users/AlexMesser/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexMesser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexMesser/subscriptions","organizations_url":"https://api.github.com/users/AlexMesser/orgs","repos_url":"https://api.github.com/users/AlexMesser/repos","events_url":"https://api.github.com/users/AlexMesser/events{/privacy}","received_events_url":"https://api.github.com/users/AlexMesser/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2019-01-07T14:53:53Z","updated_at":"2019-03-25T12:32:40Z","closed_at":"2019-03-25T12:32:40Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Issue type:**\r\n\r\n[x] bug report\r\n\r\n**Database system/driver:**\r\n\r\n[x] `mysql` / `mariadb`\r\n\r\n**TypeORM version:**\r\n\r\n[x] `latest`\r\n\r\n**Steps to reproduce or a small repository showing the problem:**\r\nalbum.ts\r\n```\r\n@Entity('album')\r\n@Index('album_id', ['id'])\r\nexport class Album {\r\n    @Column('int', {\r\n        nullable: false,\r\n        primary: true,\r\n        name: 'album_id',\r\n    })\r\n    id: number;\r\n}\r\n```\r\n\r\nalbumData.ts\r\n```\r\n@Entity('albumData')\r\n@Index('album_id', ['id'])\r\nexport class AlbumData {\r\n    @Column('int', {\r\n        nullable: false,\r\n        primary: true,\r\n        name: 'album_id',\r\n    })\r\n    id: number;\r\n}\r\n```\r\nThis migration or schema sync will keep dropping and creating the index every time because the index columnNames are ['album_id', 'album_id'] and it should be ['album_id'] only.\r\n","closed_by":{"login":"AlexMesser","id":17142628,"node_id":"MDQ6VXNlcjE3MTQyNjI4","avatar_url":"https://avatars.githubusercontent.com/u/17142628?v=4","gravatar_id":"","url":"https://api.github.com/users/AlexMesser","html_url":"https://github.com/AlexMesser","followers_url":"https://api.github.com/users/AlexMesser/followers","following_url":"https://api.github.com/users/AlexMesser/following{/other_user}","gists_url":"https://api.github.com/users/AlexMesser/gists{/gist_id}","starred_url":"https://api.github.com/users/AlexMesser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AlexMesser/subscriptions","organizations_url":"https://api.github.com/users/AlexMesser/orgs","repos_url":"https://api.github.com/users/AlexMesser/repos","events_url":"https://api.github.com/users/AlexMesser/events{/privacy}","received_events_url":"https://api.github.com/users/AlexMesser/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/typeorm/typeorm/issues/3379/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/typeorm/typeorm/issues/3379/timeline","performed_via_github_app":null,"state_reason":"completed"}