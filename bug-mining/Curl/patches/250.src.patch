diff --git a/configure.ac b/configure.ac
index 0f316d0bb..b358f9a1f 100644
--- a/configure.ac
+++ b/configure.ac
@@ -2819,6 +2819,8 @@ if test X"$want_nghttp2" != Xno; then
     dnl no nghttp2 pkg-config found and no custom directory specified,
     dnl deal with it
     AC_MSG_ERROR([--with-nghttp2 was specified but could not find libnghttp2 pkg-config file.])
+  else
+    LIB_H2="-lnghttp2"
   fi
 
   LDFLAGS="$LDFLAGS $LD_H2"
