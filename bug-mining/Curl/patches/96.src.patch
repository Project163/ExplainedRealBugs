diff --git a/configure.ac b/configure.ac
index be1d4d405..8f161254b 100644
--- a/configure.ac
+++ b/configure.ac
@@ -3536,6 +3536,7 @@ AC_CHECK_DECLS([getpwuid_r], [], [AC_DEFINE(HAVE_DECL_GETPWUID_R_MISSING, 1, "Se
 
 AC_CHECK_FUNCS([fnmatch \
   fchmod \
+  fork \
   geteuid \
   getpass_r \
   getppid \
diff --git a/m4/curl-confopts.m4 b/m4/curl-confopts.m4
index 301e2d460..f5d2d2cce 100644
--- a/m4/curl-confopts.m4
+++ b/m4/curl-confopts.m4
@@ -618,6 +618,9 @@ AC_DEFUN([CURL_CHECK_NTLM_WB], [
     test "x$SSL_ENABLED" = "x"; then
     want_ntlm_wb_file=""
     want_ntlm_wb="no"
+  elif test "x$ac_cv_func_fork" != "xyes"; then
+    dnl ntlm_wb requires fork
+    want_ntlm_wb="no"
   fi
   AC_MSG_RESULT([$want_ntlm_wb])
   if test "$want_ntlm_wb" = "yes"; then
