diff --git a/include/curl/curl.h b/include/curl/curl.h
index 1609ff6cf..dae533e32 100644
--- a/include/curl/curl.h
+++ b/include/curl/curl.h
@@ -721,6 +721,8 @@ typedef enum {
    with them. */
 #define CURLOPT_WRITEINFO CURLOPT_OBSOLETE40
 #define CURLOPT_CLOSEPOLICY CURLOPT_OBSOLETE72
+#define CURLOPT_OBSOLETE72 9999
+#define CURLOPT_OBSOLETE40 9999
 
 #endif /* !CURL_NO_OLDIES */
 
diff --git a/lib/optiontable.pl b/lib/optiontable.pl
index 511322a34..2727784e7 100755
--- a/lib/optiontable.pl
+++ b/lib/optiontable.pl
@@ -105,7 +105,7 @@ while(<STDIN>) {
     if(/^#define (CURLOPT_[^ ]*) *(CURLOPT_\S*)/) {
         my ($o, $n)=($1, $2);
         # skip obsolete ones
-        if($n !~ /OBSOLETE/) {
+        if(($n !~ /OBSOLETE/) && ($o !~ /OBSOLETE/)) {
             $o =~ s/^CURLOPT_//;
             $n =~ s/^CURLOPT_//;
             $alias{$o} = $n;
