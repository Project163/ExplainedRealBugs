diff --git a/lib/url.c b/lib/url.c
index 7764668dc..e60020bc2 100644
--- a/lib/url.c
+++ b/lib/url.c
@@ -1356,6 +1356,8 @@ static struct connectdata *allocate_conn(struct Curl_easy *data)
 
   conn->sock[FIRSTSOCKET] = CURL_SOCKET_BAD;     /* no file descriptor */
   conn->sock[SECONDARYSOCKET] = CURL_SOCKET_BAD; /* no file descriptor */
+  conn->sockfd = CURL_SOCKET_BAD;
+  conn->writesockfd = CURL_SOCKET_BAD;
   conn->connection_id = -1;    /* no ID */
   conn->port = -1; /* unknown at this point */
   conn->remote_port = -1; /* unknown at this point */
diff --git a/tests/data/test19 b/tests/data/test19
index 265a74ad8..cf735a42f 100644
--- a/tests/data/test19
+++ b/tests/data/test19
@@ -24,7 +24,7 @@ http
 attempt connect to non-listening socket
 </name>
 <command>
-%HOSTIP:%NOLISTENPORT
+--trace-config all %HOSTIP:%NOLISTENPORT
 </command>
 </client>
 
