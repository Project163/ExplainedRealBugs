diff --git a/lib/curl_mem_undef.h b/lib/curl_mem_undef.h
index b72e529dd..acc3a9226 100644
--- a/lib/curl_mem_undef.h
+++ b/lib/curl_mem_undef.h
@@ -29,13 +29,15 @@
 #undef calloc
 #undef realloc
 #undef free
-#undef send
-#undef recv
-
 #ifdef _WIN32
 #undef _tcsdup
 #endif
 
+#ifdef CURLDEBUG
+
+#undef send
+#undef recv
+
 #undef socket
 #ifdef HAVE_ACCEPT4
 #undef accept4
@@ -51,5 +53,7 @@
 #undef fdopen
 #undef fclose
 
+#endif /* CURLDEBUG */
+
 #undef HEADER_CURL_MEMORY_H
 #undef HEADER_CURL_MEMDEBUG_H
