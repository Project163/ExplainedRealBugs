diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6e6c40dd6..f0c744dd8 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -959,8 +959,10 @@ if(USE_LIBIDN2)
     check_include_file_concat("idn2.h" HAVE_IDN2_H)
   endif()
   if(NOT HAVE_LIBIDN2 OR NOT HAVE_IDN2_H)
-    find_package(PkgConfig QUIET)
-    pkg_search_module(LIBIDN2 "libidn2")
+    if(UNIX)
+      find_package(PkgConfig QUIET)
+      pkg_search_module(LIBIDN2 "libidn2")
+    endif()
     if(LIBIDN2_FOUND)
       include_directories(${LIBIDN2_INCLUDE_DIRS})
       set(HAVE_LIBIDN2 ON)
