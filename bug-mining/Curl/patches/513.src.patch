diff --git a/.github/scripts/spellcheck.words b/.github/scripts/spellcheck.words
index 3dbd8d22e..39e6dbbea 100644
--- a/.github/scripts/spellcheck.words
+++ b/.github/scripts/spellcheck.words
@@ -934,7 +934,6 @@ whitespace
 Whitespaces
 winbind
 winbuild
-winidn
 WinIDN
 WinLDAP
 winsock
diff --git a/.github/workflows/macos.yml b/.github/workflows/macos.yml
index 54473ef68..74ebca86b 100644
--- a/.github/workflows/macos.yml
+++ b/.github/workflows/macos.yml
@@ -276,7 +276,6 @@ jobs:
             install: gsasl
             generate: -DOPENSSL_ROOT_DIR=$(brew --prefix openssl) -DCURL_USE_GSASL=ON -DUSE_APPLE_IDN=ON -DENABLE_WEBSOCKETS=ON
             macos-version-min: '10.9'
-            tflags: '~1034 ~1035'  # AppleIDN issues: https://github.com/curl/curl/issues/14176
           - name: 'OpenSSL +static'
             generate: -DOPENSSL_ROOT_DIR=$(brew --prefix openssl) -DBUILD_STATIC_LIBS=ON
             macos-version-min: '10.9'
diff --git a/.github/workflows/windows.yml b/.github/workflows/windows.yml
index 3a3939fec..9cec1f8bc 100644
--- a/.github/workflows/windows.yml
+++ b/.github/workflows/windows.yml
@@ -480,7 +480,6 @@ jobs:
         run: |
           export TFLAGS='-j14 !TFTP !MQTT !WebSockets !SMTP !FTP ${{ matrix.tflags }}'
           if [[ '${{ matrix.config }}' = *'-DUSE_WIN32_IDN=ON'* ]]; then
-            TFLAGS+=' ~165'
             if [[ '${{ matrix.config }}' != *'-DENABLE_UNICODE=ON'* ]]; then
               TFLAGS+=' ~1448 ~2046 ~2047'
             fi
diff --git a/docs/KNOWN_BUGS b/docs/KNOWN_BUGS
index db21be787..f417a2103 100644
--- a/docs/KNOWN_BUGS
+++ b/docs/KNOWN_BUGS
@@ -85,6 +85,8 @@ problems may have been fixed or changed somewhat since this was written.
  11.4 HTTP test server 'connection-monitor' problems
  11.5 Connection information when using TCP Fast Open
  11.6 test cases sometimes timeout
+ 11.7 AppleIDN test failures
+ 11.8 WinIDN test failures
 
  12. LDAP
  12.1 OpenLDAP hangs after returning results
@@ -527,6 +529,16 @@ problems may have been fixed or changed somewhat since this was written.
 
  See https://github.com/curl/curl/issues/13350
 
+11.7 AppleIDN test failures
+
+ Test 1034 and 1035 fail on macOS when built to use AppleIDN.
+
+ See https://github.com/curl/curl/issues/14176
+
+11.8 WinIDN test failures
+
+ Test 165 disabled when built with WinIDN.
+
 12. LDAP
 
 12.1 OpenLDAP hangs after returning results
diff --git a/tests/FILEFORMAT.md b/tests/FILEFORMAT.md
index 9341998fd..47782d43c 100644
--- a/tests/FILEFORMAT.md
+++ b/tests/FILEFORMAT.md
@@ -426,6 +426,7 @@ SKIPPED.
 Features testable here are:
 
 - `alt-svc`
+- `AppleIDN`
 - `bearssl`
 - `brotli`
 - `c-ares`
@@ -487,6 +488,7 @@ Features testable here are:
 - `verbose-strings`
 - `wakeup`
 - `win32`
+- `WinIDN`
 - `wolfssh`
 - `wolfssl`
 - `xattr`
diff --git a/tests/data/DISABLED b/tests/data/DISABLED
index cd735634e..02593cde0 100644
--- a/tests/data/DISABLED
+++ b/tests/data/DISABLED
@@ -93,3 +93,10 @@
 %if bearssl
 313
 %endif
+%if AppleIDN
+1034
+1035
+%endif
+%if WinIDN
+165
+%endif
diff --git a/tests/runtests.pl b/tests/runtests.pl
index 1099a11b0..a4dc68e14 100755
--- a/tests/runtests.pl
+++ b/tests/runtests.pl
@@ -593,6 +593,12 @@ sub checksystemfeatures {
                 # nghttp2 supports h2c, hyper does not
                 $feature{"h2c"} = 1;
             }
+            if ($libcurl =~ /AppleIDN/) {
+                $feature{"AppleIDN"} = 1;
+            }
+            if ($libcurl =~ /WinIDN/) {
+                $feature{"WinIDN"} = 1;
+            }
             if ($libcurl =~ /libssh2/i) {
                 $feature{"libssh2"} = 1;
             }
