{"url":"https://api.github.com/repos/curl/curl/issues/14368","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/14368/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/14368/comments","events_url":"https://api.github.com/repos/curl/curl/issues/14368/events","html_url":"https://github.com/curl/curl/issues/14368","id":2446542725,"node_id":"I_kwDOAAiu0c6R00eF","number":14368,"title":"option CURLOPT_TCP_KEEPALIVE doesn't work with new version","user":{"login":"feelingseas","id":12237706,"node_id":"MDQ6VXNlcjEyMjM3NzA2","avatar_url":"https://avatars.githubusercontent.com/u/12237706?v=4","gravatar_id":"","url":"https://api.github.com/users/feelingseas","html_url":"https://github.com/feelingseas","followers_url":"https://api.github.com/users/feelingseas/followers","following_url":"https://api.github.com/users/feelingseas/following{/other_user}","gists_url":"https://api.github.com/users/feelingseas/gists{/gist_id}","starred_url":"https://api.github.com/users/feelingseas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/feelingseas/subscriptions","organizations_url":"https://api.github.com/users/feelingseas/orgs","repos_url":"https://api.github.com/users/feelingseas/repos","events_url":"https://api.github.com/users/feelingseas/events{/privacy}","received_events_url":"https://api.github.com/users/feelingseas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":940032249,"node_id":"MDU6TGFiZWw5NDAwMzIyNDk=","url":"https://api.github.com/repos/curl/curl/labels/Windows","name":"Windows","color":"0e8a16","default":false,"description":"Windows-specific"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-08-03T18:35:30Z","updated_at":"2024-08-20T07:27:43Z","closed_at":"2024-08-20T07:27:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nI use curl to request to a php web api.\r\nThe PHP server will take a long time to answer the request ,like 600 seconds.So,I need to keep alive to wait the reply.\r\nOld version 7.65.3 works well,but new version failed .I tried new two version 8.9.0,8.9.1,complied in win 10 with vs2019.\r\nmain code like this:\r\n\r\n`//http is the same,this url sleep ,eg,300s ,then reply\r\ncurl_easy_setopt(curl, CURLOPT_URL, \"https://www.some.com\");\r\ncurl_easy_setopt(curl, CURLOPT_TCP_KEEPALIVE, 1L);\r\n// \r\ncurl_easy_setopt(curl, CURLOPT_TCP_KEEPIDLE,60L);\r\n//\r\ncurl_easy_setopt(curl, CURLOPT_TCP_KEEPINTVL, 30L);\t\r\n//\r\ncurl_easy_setopt(curl, CURLOPT_TIMEOUT, 600L);//600s timeout\r\n\r\nCURLcode res = curl_easy_perform(curl);\t\r\nif(res == CURLE_OK) {\r\n\t//7.65.3 will come here\r\n} else {\r\n\t//timeout\r\n\t//new version will come here 8.9.0,8.9.1\r\n}`\n\n### I expected the following\n\nkeep alive\n\n### curl/libcurl version\n\nversion 7.65.3 works\r\nversion 8.9.0 or 8.9.1 does'nt work\n\n### operating system\n\nwin10,with openssl 3.3.1","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/14368/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/14368/timeline","performed_via_github_app":null,"state_reason":"completed"}