{"url":"https://api.github.com/repos/curl/curl/issues/14627","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/14627/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/14627/comments","events_url":"https://api.github.com/repos/curl/curl/issues/14627/events","html_url":"https://github.com/curl/curl/issues/14627","id":2477425687,"node_id":"I_kwDOAAiu0c6TqoQX","number":14627,"title":"XFERINFOFUNCTION: Description of return values is confusing","user":{"login":"Benjamin-Riefenstahl-mecom","id":55143539,"node_id":"MDQ6VXNlcjU1MTQzNTM5","avatar_url":"https://avatars.githubusercontent.com/u/55143539?v=4","gravatar_id":"","url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom","html_url":"https://github.com/Benjamin-Riefenstahl-mecom","followers_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/followers","following_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/following{/other_user}","gists_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/gists{/gist_id}","starred_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/subscriptions","organizations_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/orgs","repos_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/repos","events_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/events{/privacy}","received_events_url":"https://api.github.com/users/Benjamin-Riefenstahl-mecom/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":200869765,"node_id":"MDU6TGFiZWwyMDA4Njk3NjU=","url":"https://api.github.com/repos/curl/curl/labels/documentation","name":"documentation","color":"f7c6c7","default":true,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2024-08-21T08:32:54Z","updated_at":"2024-08-22T08:07:13Z","closed_at":"2024-08-22T07:22:27Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Specify which documentation you found a problem with\n\nThe documentation for [CURLOPT_XFERINFOFUNCTION](https://curl.se/libcurl/c/CURLOPT_XFERINFOFUNCTION.html) and [CURLOPT_PROGRESSFUNCTION](https://curl.se/libcurl/c/CURLOPT_PROGRESSFUNCTION.html) says:\r\n\r\n> If your callback function returns CURL_PROGRESSFUNC_CONTINUE it makes libcurl to continue executing the default progress function.\r\n>\r\n> Returning any other non-zero value from this callback makes libcurl abort the transfer and return [CURLE_ABORTED_BY_CALLBACK](https://curl.se/libcurl/c/libcurl-errors.html#CURLEABORTEDBYCALLBACK).\r\n\n\n### The problem\n\n\r\nIt is only implied, but not made explicit, that the usual return value is 0.  It is also not clear which actual values are valid to cause an abort, because the value for CURL_PROGRESSFUNC_CONTINUE is not documented.  I currently use `min(-42, CURL_PROGRESSFUNC_CONTINUE - 42);` but that seems rather clumsy.\r\n\r\nI suggest:\r\n\r\n> If your callback function returns CURL_PROGRESSFUNC_CONTINUE (&lt;actual value here>) it makes libcurl execute the default progress function and than continue the transfer.  If it returns CURL_PROGRESSFUNC_OK (0) the default progress function is not executed and the transfer is continued.  If it returns CURL_PROGRESSFUNC_ABORT (-1) or any other value the default progress function is not executed, the transfer is aborted and transfer function will return [CURLE_ABORTED_BY_CALLBACK](https://curl.se/libcurl/c/libcurl-errors.html#CURLEABORTEDBYCALLBACK).\r\n\r\nThis assumes of course that the constants CURL_PROGRESSFUNC_OK and CURL_PROGRESSFUNC_ABORT are actually defined in the headers.","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/14627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/14627/timeline","performed_via_github_app":null,"state_reason":"completed"}