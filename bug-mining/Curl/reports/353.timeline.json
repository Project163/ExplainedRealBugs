[{"id":11011914615,"node_id":"RTE_lADOAAiu0c53V08fzwAAAAKQXHt3","url":"https://api.github.com/repos/curl/curl/issues/events/11011914615","actor":{"login":"ohyeaah","id":56166150,"node_id":"MDQ6VXNlcjU2MTY2MTUw","avatar_url":"https://avatars.githubusercontent.com/u/56166150?v=4","gravatar_id":"","url":"https://api.github.com/users/ohyeaah","html_url":"https://github.com/ohyeaah","followers_url":"https://api.github.com/users/ohyeaah/followers","following_url":"https://api.github.com/users/ohyeaah/following{/other_user}","gists_url":"https://api.github.com/users/ohyeaah/gists{/gist_id}","starred_url":"https://api.github.com/users/ohyeaah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohyeaah/subscriptions","organizations_url":"https://api.github.com/users/ohyeaah/orgs","repos_url":"https://api.github.com/users/ohyeaah/repos","events_url":"https://api.github.com/users/ohyeaah/events{/privacy}","received_events_url":"https://api.github.com/users/ohyeaah/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2023-11-20T13:28:34Z","rename":{"from":"Bug when re-using CURL handle which was used for FTP download","to":"Bug when reusing CURL handle which was used for FTP download"},"performed_via_github_app":null},{"id":11011916522,"node_id":"RTE_lADOAAiu0c53V08fzwAAAAKQXILq","url":"https://api.github.com/repos/curl/curl/issues/events/11011916522","actor":{"login":"ohyeaah","id":56166150,"node_id":"MDQ6VXNlcjU2MTY2MTUw","avatar_url":"https://avatars.githubusercontent.com/u/56166150?v=4","gravatar_id":"","url":"https://api.github.com/users/ohyeaah","html_url":"https://github.com/ohyeaah","followers_url":"https://api.github.com/users/ohyeaah/followers","following_url":"https://api.github.com/users/ohyeaah/following{/other_user}","gists_url":"https://api.github.com/users/ohyeaah/gists{/gist_id}","starred_url":"https://api.github.com/users/ohyeaah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohyeaah/subscriptions","organizations_url":"https://api.github.com/users/ohyeaah/orgs","repos_url":"https://api.github.com/users/ohyeaah/repos","events_url":"https://api.github.com/users/ohyeaah/events{/privacy}","received_events_url":"https://api.github.com/users/ohyeaah/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2023-11-20T13:28:44Z","rename":{"from":"Bug when reusing CURL handle which was used for FTP download","to":"Bug when reusing CURL handle which was used for FTP download before"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1819286995","html_url":"https://github.com/curl/curl/issues/12367#issuecomment-1819286995","issue_url":"https://api.github.com/repos/curl/curl/issues/12367","id":1819286995,"node_id":"IC_kwDOAAiu0c5scB3T","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T15:29:25Z","updated_at":"2023-11-20T15:29:25Z","body":"> While the HTTP download is running, CURL decides to close the FTP connection of the previous request \r\n\r\nIs this what you guess is happening or have you actually seen any evidence of this? (Because I cannot understand how that would happen) Are you using the easy interface?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1819286995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1819365206","html_url":"https://github.com/curl/curl/issues/12367#issuecomment-1819365206","issue_url":"https://api.github.com/repos/curl/curl/issues/12367","id":1819365206,"node_id":"IC_kwDOAAiu0c5scU9W","user":{"login":"ohyeaah","id":56166150,"node_id":"MDQ6VXNlcjU2MTY2MTUw","avatar_url":"https://avatars.githubusercontent.com/u/56166150?v=4","gravatar_id":"","url":"https://api.github.com/users/ohyeaah","html_url":"https://github.com/ohyeaah","followers_url":"https://api.github.com/users/ohyeaah/followers","following_url":"https://api.github.com/users/ohyeaah/following{/other_user}","gists_url":"https://api.github.com/users/ohyeaah/gists{/gist_id}","starred_url":"https://api.github.com/users/ohyeaah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohyeaah/subscriptions","organizations_url":"https://api.github.com/users/ohyeaah/orgs","repos_url":"https://api.github.com/users/ohyeaah/repos","events_url":"https://api.github.com/users/ohyeaah/events{/privacy}","received_events_url":"https://api.github.com/users/ohyeaah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T16:12:28Z","updated_at":"2023-11-20T16:12:28Z","body":"@bagder I am not using the easy interface. I think it doesn't exist in PHP.\r\n\r\n> Is this what you guess is happening or have you actually seen any evidence of this?\r\n\r\nIt's what I suppose is happening. Please give me some time I will provide an example code within this week.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1819365206/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ohyeaah","id":56166150,"node_id":"MDQ6VXNlcjU2MTY2MTUw","avatar_url":"https://avatars.githubusercontent.com/u/56166150?v=4","gravatar_id":"","url":"https://api.github.com/users/ohyeaah","html_url":"https://github.com/ohyeaah","followers_url":"https://api.github.com/users/ohyeaah/followers","following_url":"https://api.github.com/users/ohyeaah/following{/other_user}","gists_url":"https://api.github.com/users/ohyeaah/gists{/gist_id}","starred_url":"https://api.github.com/users/ohyeaah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohyeaah/subscriptions","organizations_url":"https://api.github.com/users/ohyeaah/orgs","repos_url":"https://api.github.com/users/ohyeaah/repos","events_url":"https://api.github.com/users/ohyeaah/events{/privacy}","received_events_url":"https://api.github.com/users/ohyeaah/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11013953242,"node_id":"MEE_lADOAAiu0c53V08fzwAAAAKQe5ba","url":"https://api.github.com/repos/curl/curl/issues/events/11013953242","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-20T16:12:28Z","performed_via_github_app":null},{"id":11013953267,"node_id":"SE_lADOAAiu0c53V08fzwAAAAKQe5bz","url":"https://api.github.com/repos/curl/curl/issues/events/11013953267","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-20T16:12:28Z","performed_via_github_app":null},{"id":11023205732,"node_id":"LE_lADOAAiu0c53V08fzwAAAAKRCMVk","url":"https://api.github.com/repos/curl/curl/issues/events/11023205732","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-11-21T11:37:37Z","label":{"name":"needs-info","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1825965400","html_url":"https://github.com/curl/curl/issues/12367#issuecomment-1825965400","issue_url":"https://api.github.com/repos/curl/curl/issues/12367","id":1825965400,"node_id":"IC_kwDOAAiu0c5s1gVY","user":{"login":"ohyeaah","id":56166150,"node_id":"MDQ6VXNlcjU2MTY2MTUw","avatar_url":"https://avatars.githubusercontent.com/u/56166150?v=4","gravatar_id":"","url":"https://api.github.com/users/ohyeaah","html_url":"https://github.com/ohyeaah","followers_url":"https://api.github.com/users/ohyeaah/followers","following_url":"https://api.github.com/users/ohyeaah/following{/other_user}","gists_url":"https://api.github.com/users/ohyeaah/gists{/gist_id}","starred_url":"https://api.github.com/users/ohyeaah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohyeaah/subscriptions","organizations_url":"https://api.github.com/users/ohyeaah/orgs","repos_url":"https://api.github.com/users/ohyeaah/repos","events_url":"https://api.github.com/users/ohyeaah/events{/privacy}","received_events_url":"https://api.github.com/users/ohyeaah/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-24T18:00:52Z","updated_at":"2023-11-24T18:05:04Z","body":"So here is the code. I am sorry for the strange URLs I'm using but as soon as I use different URLs everything works fine.\r\n\r\nThe code performs a download of 5 URLs while reusing the CURL handle.\r\n\r\nThe URLs are:\r\n\r\nhttps://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=355\r\nhttps://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=359\r\nhttps://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=364\r\nhttps://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=365\r\nhttps://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=366\r\n\r\nThey all redirect (HTTP code 302) to a different URL.\r\n\r\nThe first URL redirects to ftp://ftp.matrox.com/pub/mga/archive/bios/2001/setup208.exe\r\nThe redirect destinations of URL 2 to 4 don't matter (none is FTP).\r\nThe last URL redirects to https://ts.hercules.com/download/video/exe/KYROBASED/3DPK-2K-7111a.exe\r\n\r\nIt should be said that `CURLINFO_HTTP_CODE` always returns the HTTP code of the redirected destination URL and not 302.\r\n\r\nYou can download the last URL on the command line using `curl --verbose` and you will see it's a normal 200 code.\r\n\r\nHowever in the PHP script below I get a `221` for the `CURLINFO_HTTP_CODE` of the last URL. This is impossible because `221` is an FTP code and doesn't exist in HTTP. The line `221 Goodbye.` also appears when using `CURLOPT_HEADERFUNCTION` (also 5. URL). That must be wrong as this is an FTP response. Both the return code and the header must come from the first request.\r\n\r\nAt the moment I am simply creating a new CURL handle to not experience the bug (which I think it is).\r\nIf it's a usage error by me then I am sorry for reporting this as a bug.\r\n\r\nPlease note it's not neccessary to close the PHP tag. Some people confuse this when they see it the first time.\r\n\r\n Here it is:\r\n\r\n```\r\n<?php\r\n\r\nfunction cexec($ch, $dumpHeaders)\r\n{\r\n  echo \"get URL \".curl_getinfo($ch, CURLINFO_EFFECTIVE_URL).\"\\n\";\r\n  if ($dumpHeaders)\r\n  {\r\n    curl_setopt($ch, CURLOPT_HEADERFUNCTION,\r\n    function($ch, $line)\r\n    {\r\n        echo \"header: $line\";\r\n        return strlen($line);\r\n    }\r\n    );\r\n  }\r\n  $ret = curl_exec($ch);\r\n  if ($ret === false)\r\n    echo \"curl_exec() returned false\\n\";\r\n  echo \"response code: \".curl_getinfo($ch, CURLINFO_HTTP_CODE).\"\\n\";\r\n}\r\n\r\n$ch = curl_init();\r\ncurl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);\r\ncurl_setopt($ch, CURLOPT_RETURNTRANSFER, true);\r\ncurl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);\r\ncurl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);\r\n\r\nfor ($i = 355; $i <= 366; $i++)\r\n{\r\n    if ($i == 356 || $i == 357 || $i == 358 || $i == 360 || $i == 361 || $i == 362 || $i == 363)\r\n        continue;\r\n    curl_setopt($ch, CURLOPT_URL, \"https://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=$i\");\r\n    cexec($ch, $i == 366);\r\n}\r\n\r\ncurl_close($ch);\r\n\r\n```\r\n\r\nOutput on the console:\r\n\r\n```\r\nget URL https://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=355\r\nresponse code: 226\r\nget URL https://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=359\r\nresponse code: 403\r\nget URL https://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=364\r\nresponse code: 404\r\nget URL https://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=365\r\nresponse code: 200\r\nget URL https://www.touslesdrivers.com/php/constructeurs/redirection.php?v_code=366\r\nheader: HTTP/2 302 \r\nheader: content-type: text/html; charset=UTF-8\r\nheader: location: https://ts.hercules.com/download/video/exe/KYROBASED/3DPK-2K-7111a.exe\r\nheader: server: HTTP\r\nheader: x-frame-options: SAMEORIGIN\r\nheader: strict-transport-security: max-age=63072000; includeSubDomains; preload\r\nheader: date: Fri, 24 Nov 2023 17:55:58 GMT\r\nheader: content-length: 0\r\nheader: \r\nheader: HTTP/2 200 \r\nheader: date: Fri, 24 Nov 2023 17:55:58 GMT\r\nheader: content-type: application/x-msdownload\r\nheader: content-length: 6844336\r\nheader: last-modified: Tue, 06 Nov 2012 10:28:12 GMT\r\nheader: etag: \"686fb0-4cdd10f1b7a58\"\r\nheader: cf-cache-status: HIT\r\nheader: age: 14979\r\nheader: expires: Fri, 24 Nov 2023 18:55:58 GMT\r\nheader: cache-control: public, max-age=3600\r\nheader: accept-ranges: bytes\r\nheader: server: cloudflare\r\nheader: cf-ray: 82b386a0eac0bb55-FRA\r\nheader: \r\nheader: 221 Goodbye.\r\nresponse code: 221\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1825965400/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ohyeaah","id":56166150,"node_id":"MDQ6VXNlcjU2MTY2MTUw","avatar_url":"https://avatars.githubusercontent.com/u/56166150?v=4","gravatar_id":"","url":"https://api.github.com/users/ohyeaah","html_url":"https://github.com/ohyeaah","followers_url":"https://api.github.com/users/ohyeaah/followers","following_url":"https://api.github.com/users/ohyeaah/following{/other_user}","gists_url":"https://api.github.com/users/ohyeaah/gists{/gist_id}","starred_url":"https://api.github.com/users/ohyeaah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ohyeaah/subscriptions","organizations_url":"https://api.github.com/users/ohyeaah/orgs","repos_url":"https://api.github.com/users/ohyeaah/repos","events_url":"https://api.github.com/users/ohyeaah/events{/privacy}","received_events_url":"https://api.github.com/users/ohyeaah/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1826437536","html_url":"https://github.com/curl/curl/issues/12367#issuecomment-1826437536","issue_url":"https://api.github.com/repos/curl/curl/issues/12367","id":1826437536,"node_id":"IC_kwDOAAiu0c5s3Tmg","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-25T22:57:58Z","updated_at":"2023-11-25T22:57:58Z","body":"Thanks for the code. I can now reproduce the problem!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1826437536/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11061581692,"node_id":"REFE_lADOAAiu0c53V08fzwAAAAKTUld8","url":"https://api.github.com/repos/curl/curl/issues/events/11061581692","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"826c862c968e20b914efc4403fe0dc37b07d99da","commit_url":"https://api.github.com/repos/curl/curl/commits/826c862c968e20b914efc4403fe0dc37b07d99da","created_at":"2023-11-25T23:12:33Z","performed_via_github_app":null},{"actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-25T23:12:44Z","updated_at":"2023-11-25T23:12:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/12405","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/12405/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/12405/comments","events_url":"https://api.github.com/repos/curl/curl/issues/12405/events","html_url":"https://github.com/curl/curl/pull/12405","id":2010824928,"node_id":"PR_kwDOAAiu0c5gXUQm","number":12405,"title":"conncache: use the closure handle when disconnecting surplus connections","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":370011580,"node_id":"MDU6TGFiZWwzNzAwMTE1ODA=","url":"https://api.github.com/repos/curl/curl/labels/connecting%20&%20proxies","name":"connecting & proxies","color":"c2e0c6","default":false,"description":null},{"id":887227423,"node_id":"MDU6TGFiZWw4ODcyMjc0MjM=","url":"https://api.github.com/repos/curl/curl/labels/tests","name":"tests","color":"a7a8e8","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-11-25T23:12:43Z","updated_at":"2023-11-26T16:51:13Z","closed_at":"2023-11-26T16:51:08Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/12405","html_url":"https://github.com/curl/curl/pull/12405","diff_url":"https://github.com/curl/curl/pull/12405.diff","patch_url":"https://github.com/curl/curl/pull/12405.patch","merged_at":null},"body":"Use the closure handle for disconnecting connection cache entries so that anything that happens during the disconnect is not stored and associated with the 'data' handle which already just finished a transfer and it is important that details from the unrelated disconnect does not taint meta-data in the data handle.\r\n\r\nLike storing the response code.\r\n\r\nReported-by: ohyeaah on github\r\nFixes #12367","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/12405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/12405/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":11063431554,"node_id":"CE_lADOAAiu0c53V08fzwAAAAKTbpGC","url":"https://api.github.com/repos/curl/curl/issues/events/11063431554","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"dbf4c4030a95b610cf86aa576ba7676736f81dc3","commit_url":"https://api.github.com/repos/curl/curl/commits/dbf4c4030a95b610cf86aa576ba7676736f81dc3","created_at":"2023-11-26T16:51:08Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"heinrich5991","id":366230,"node_id":"MDQ6VXNlcjM2NjIzMA==","avatar_url":"https://avatars.githubusercontent.com/u/366230?v=4","gravatar_id":"","url":"https://api.github.com/users/heinrich5991","html_url":"https://github.com/heinrich5991","followers_url":"https://api.github.com/users/heinrich5991/followers","following_url":"https://api.github.com/users/heinrich5991/following{/other_user}","gists_url":"https://api.github.com/users/heinrich5991/gists{/gist_id}","starred_url":"https://api.github.com/users/heinrich5991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/heinrich5991/subscriptions","organizations_url":"https://api.github.com/users/heinrich5991/orgs","repos_url":"https://api.github.com/users/heinrich5991/repos","events_url":"https://api.github.com/users/heinrich5991/events{/privacy}","received_events_url":"https://api.github.com/users/heinrich5991/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-13T22:16:00Z","updated_at":"2023-12-13T22:16:00Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/ddnet/ddnet/issues/7636","repository_url":"https://api.github.com/repos/ddnet/ddnet","labels_url":"https://api.github.com/repos/ddnet/ddnet/issues/7636/labels{/name}","comments_url":"https://api.github.com/repos/ddnet/ddnet/issues/7636/comments","events_url":"https://api.github.com/repos/ddnet/ddnet/issues/7636/events","html_url":"https://github.com/ddnet/ddnet/issues/7636","id":2036662880,"node_id":"I_kwDOAVw7Ks55ZQJg","number":7636,"title":"Curl 8.5.0 causes segfault","user":{"login":"SollyBunny","id":76408142,"node_id":"MDQ6VXNlcjc2NDA4MTQy","avatar_url":"https://avatars.githubusercontent.com/u/76408142?v=4","gravatar_id":"","url":"https://api.github.com/users/SollyBunny","html_url":"https://github.com/SollyBunny","followers_url":"https://api.github.com/users/SollyBunny/followers","following_url":"https://api.github.com/users/SollyBunny/following{/other_user}","gists_url":"https://api.github.com/users/SollyBunny/gists{/gist_id}","starred_url":"https://api.github.com/users/SollyBunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SollyBunny/subscriptions","organizations_url":"https://api.github.com/users/SollyBunny/orgs","repos_url":"https://api.github.com/users/SollyBunny/repos","events_url":"https://api.github.com/users/SollyBunny/events{/privacy}","received_events_url":"https://api.github.com/users/SollyBunny/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2023-12-11T22:46:40Z","updated_at":"2023-12-15T11:23:11Z","closed_at":"2023-12-15T10:52:41Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":22821674,"node_id":"MDEwOlJlcG9zaXRvcnkyMjgyMTY3NA==","name":"ddnet","full_name":"ddnet/ddnet","private":false,"owner":{"login":"ddnet","id":13823972,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEzODIzOTcy","avatar_url":"https://avatars.githubusercontent.com/u/13823972?v=4","gravatar_id":"","url":"https://api.github.com/users/ddnet","html_url":"https://github.com/ddnet","followers_url":"https://api.github.com/users/ddnet/followers","following_url":"https://api.github.com/users/ddnet/following{/other_user}","gists_url":"https://api.github.com/users/ddnet/gists{/gist_id}","starred_url":"https://api.github.com/users/ddnet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ddnet/subscriptions","organizations_url":"https://api.github.com/users/ddnet/orgs","repos_url":"https://api.github.com/users/ddnet/repos","events_url":"https://api.github.com/users/ddnet/events{/privacy}","received_events_url":"https://api.github.com/users/ddnet/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/ddnet/ddnet","description":"DDraceNetwork, a free cooperative platformer game","fork":false,"url":"https://api.github.com/repos/ddnet/ddnet","forks_url":"https://api.github.com/repos/ddnet/ddnet/forks","keys_url":"https://api.github.com/repos/ddnet/ddnet/keys{/key_id}","collaborators_url":"https://api.github.com/repos/ddnet/ddnet/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/ddnet/ddnet/teams","hooks_url":"https://api.github.com/repos/ddnet/ddnet/hooks","issue_events_url":"https://api.github.com/repos/ddnet/ddnet/issues/events{/number}","events_url":"https://api.github.com/repos/ddnet/ddnet/events","assignees_url":"https://api.github.com/repos/ddnet/ddnet/assignees{/user}","branches_url":"https://api.github.com/repos/ddnet/ddnet/branches{/branch}","tags_url":"https://api.github.com/repos/ddnet/ddnet/tags","blobs_url":"https://api.github.com/repos/ddnet/ddnet/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/ddnet/ddnet/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/ddnet/ddnet/git/refs{/sha}","trees_url":"https://api.github.com/repos/ddnet/ddnet/git/trees{/sha}","statuses_url":"https://api.github.com/repos/ddnet/ddnet/statuses/{sha}","languages_url":"https://api.github.com/repos/ddnet/ddnet/languages","stargazers_url":"https://api.github.com/repos/ddnet/ddnet/stargazers","contributors_url":"https://api.github.com/repos/ddnet/ddnet/contributors","subscribers_url":"https://api.github.com/repos/ddnet/ddnet/subscribers","subscription_url":"https://api.github.com/repos/ddnet/ddnet/subscription","commits_url":"https://api.github.com/repos/ddnet/ddnet/commits{/sha}","git_commits_url":"https://api.github.com/repos/ddnet/ddnet/git/commits{/sha}","comments_url":"https://api.github.com/repos/ddnet/ddnet/comments{/number}","issue_comment_url":"https://api.github.com/repos/ddnet/ddnet/issues/comments{/number}","contents_url":"https://api.github.com/repos/ddnet/ddnet/contents/{+path}","compare_url":"https://api.github.com/repos/ddnet/ddnet/compare/{base}...{head}","merges_url":"https://api.github.com/repos/ddnet/ddnet/merges","archive_url":"https://api.github.com/repos/ddnet/ddnet/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/ddnet/ddnet/downloads","issues_url":"https://api.github.com/repos/ddnet/ddnet/issues{/number}","pulls_url":"https://api.github.com/repos/ddnet/ddnet/pulls{/number}","milestones_url":"https://api.github.com/repos/ddnet/ddnet/milestones{/number}","notifications_url":"https://api.github.com/repos/ddnet/ddnet/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/ddnet/ddnet/labels{/name}","releases_url":"https://api.github.com/repos/ddnet/ddnet/releases{/id}","deployments_url":"https://api.github.com/repos/ddnet/ddnet/deployments","created_at":"2014-08-11T00:03:57Z","updated_at":"2025-11-10T09:13:56Z","pushed_at":"2025-11-10T12:07:29Z","git_url":"git://github.com/ddnet/ddnet.git","ssh_url":"git@github.com:ddnet/ddnet.git","clone_url":"https://github.com/ddnet/ddnet.git","svn_url":"https://github.com/ddnet/ddnet","homepage":"https://ddnet.org","size":371085,"stargazers_count":719,"watchers_count":719,"language":"C++","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":544,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":886,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["2d-game","ddnet","game","hacktoberfest","linux","macos","open-source-game","opengl","platformer","teeworlds","vulkan","windows"],"visibility":"public","forks":544,"open_issues":886,"watchers":719,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Updating to curl 8.5.0 leads to random segfaults in DDNet only (tw 0.7 and all other software that I use have no problems that I know of)\r\nDowngrading to curl 8.4.0 fixes it\r\n\r\nThese crashes are segfaults caused by seemingly random events from fetching a skin to master servers\r\n\r\nGDB Backtrace:\r\n```\r\n#0  0x00007ffff4833f3c in  () at /usr/lib/libcurl.so.4\r\n#1  0x00007ffff488d274 in  () at /usr/lib/libcurl.so.4\r\n#2  0x00007ffff486d0e3 in  () at /usr/lib/libcurl.so.4\r\n#3  0x00007ffff4878534 in  () at /usr/lib/libcurl.so.4\r\n#4  0x00007ffff487acb6 in curl_multi_perform () at /usr/lib/libcurl.so.4\r\n#5  0x00007ffff484adc4 in curl_easy_perform () at /usr/lib/libcurl.so.4\r\n#6  0x00005555559e963b in CHttpRequest::RunImpl(void*)\r\n    (this=0x555559684bf0, pUser=0x7fffb4000d50)\r\n    at ./src/engine/shared/http.cpp:293\r\n#7  0x00005555559e8f64 in CHttpRequest::Run() (this=0x555559684bf0)\r\n    at ./src/engine/shared/http.cpp:158\r\n#8  0x00005555559ed2f6 in CJobPool::RunBlocking(IJob*) (pJob=0x555559684bf0)\r\n    at ./src/engine/shared/jobs.cpp:106\r\n#9  0x00005555559ecfd1 in CJobPool::WorkerThread(void*) (pUser=0x555555e1d720)\r\n    at ./src/engine/shared/jobs.cpp:60\r\n#10 0x0000555555a15ef2 in thread_run(void*) (user=0x555555dddf70)\r\n    at ./src/base/system.cpp:797\r\n#11 0x00007ffff3caa9eb in  () at /usr/lib/libc.so.6\r\n#12 0x00007ffff3d2e7cc in  () at /usr/lib/libc.so.6\r\n```\r\n\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/ddnet/ddnet/issues/7636/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/ddnet/ddnet/issues/7636/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":11620951259,"node_id":"REFE_lADOAAiu0c53V08fzwAAAAK0qaTb","url":"https://api.github.com/repos/curl/curl/issues/events/11620951259","actor":{"login":"sftcd","id":5494807,"node_id":"MDQ6VXNlcjU0OTQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/5494807?v=4","gravatar_id":"","url":"https://api.github.com/users/sftcd","html_url":"https://github.com/sftcd","followers_url":"https://api.github.com/users/sftcd/followers","following_url":"https://api.github.com/users/sftcd/following{/other_user}","gists_url":"https://api.github.com/users/sftcd/gists{/gist_id}","starred_url":"https://api.github.com/users/sftcd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sftcd/subscriptions","organizations_url":"https://api.github.com/users/sftcd/orgs","repos_url":"https://api.github.com/users/sftcd/repos","events_url":"https://api.github.com/users/sftcd/events{/privacy}","received_events_url":"https://api.github.com/users/sftcd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"dbf4c4030a95b610cf86aa576ba7676736f81dc3","commit_url":"https://api.github.com/repos/defo-project/curl/commits/dbf4c4030a95b610cf86aa576ba7676736f81dc3","created_at":"2024-01-28T21:31:50Z","performed_via_github_app":null}]