[{"id":8610301046,"node_id":"LE_lADOAAiu0c5fYYE3zwAAAAIBNsR2","url":"https://api.github.com/repos/curl/curl/issues/events/8610301046","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-02-26T22:29:35Z","label":{"name":"WebSocket","color":"A51BBC"},"performed_via_github_app":null},{"id":8610301351,"node_id":"AE_lADOAAiu0c5fYYE3zwAAAAIBNsWn","url":"https://api.github.com/repos/curl/curl/issues/events/8610301351","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-02-26T22:29:49Z","assignee":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1445859817","html_url":"https://github.com/curl/curl/issues/10615#issuecomment-1445859817","issue_url":"https://api.github.com/repos/curl/curl/issues/10615","id":1445859817,"node_id":"IC_kwDOAAiu0c5WLhHp","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-27T07:55:26Z","updated_at":"2023-02-27T07:55:26Z","body":"Thanks for your report!\r\n\r\nI am not convinced your proposed fix is the best one here. If libcurl has received more data into its buffer than just PING, returning CURLE_AGAIN might then make the application go back and wait for socket activity rather than also acting on the additional websocket frames already drained from the socket.\r\n\r\nYou say \"the outer loop does not terminate\" without this, which of course is a bug but I'm curious on what makes it possible to keep looping and I was hoping maybe you can help me understand this is if you can reproduce this problem?\r\n\r\nWhen the autoping is handled, and it goes back to the outer loop, what makes it stick in the loop?\r\n\r\nLine 432 `if(!wsp->stillblen) {` - presumably this does not match\r\n\r\nLine 449: `if(!wsp->frame.bytesleft) {` - this should match, there was nothing left of the old frame\r\n\r\nwhat next? how does it get stuck?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1445859817/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1445979233","html_url":"https://github.com/curl/curl/issues/10615#issuecomment-1445979233","issue_url":"https://api.github.com/repos/curl/curl/issues/10615","id":1445979233,"node_id":"IC_kwDOAAiu0c5WL-Rh","user":{"login":"marski","id":25371746,"node_id":"MDQ6VXNlcjI1MzcxNzQ2","avatar_url":"https://avatars.githubusercontent.com/u/25371746?v=4","gravatar_id":"","url":"https://api.github.com/users/marski","html_url":"https://github.com/marski","followers_url":"https://api.github.com/users/marski/followers","following_url":"https://api.github.com/users/marski/following{/other_user}","gists_url":"https://api.github.com/users/marski/gists{/gist_id}","starred_url":"https://api.github.com/users/marski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marski/subscriptions","organizations_url":"https://api.github.com/users/marski/orgs","repos_url":"https://api.github.com/users/marski/repos","events_url":"https://api.github.com/users/marski/events{/privacy}","received_events_url":"https://api.github.com/users/marski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-27T09:23:51Z","updated_at":"2023-02-27T09:23:51Z","body":"Thank you for your swift reply! \r\n\r\nBeing focused on the application code, I didn't step through the debug build of libcurl yet, relying so far on the verbose logs to try to resolve the problem. Therefore I'm just speculating and returning `CURLE_AGAIN` might not be correct indeed. However, the expected behavior would be that after responding to a `PING` frame and any other buffered frames, the control yields to the event loop, waiting for another `EPOLLIN`. Currently, this only happens if I get another non-PING frame from the server, which gets the `curl_ws_recv` unblocked.\r\n\r\nAfter connecting to `wss://socketsbay.com/wss/v2/1/demo/` public test server and waiting for a while, I get one or more `PING` frames which get logged as:\r\n\r\n```\r\n* reached /home/marski/Sources/curl/lib/easy.c:1231\r\n* WS: 2 bytes left to decode\r\n* WS:235 received FIN bit 1\r\n* WS: received OPCODE PING\r\n* WS: received 0 bytes payload (0 left, buflen was 2)\r\n* WS: auto-respond to PING with a PONG, 0 bytes payload\r\n* WS: send OPCODE PONG\r\n* WS: set FIN\r\n* WS: send FIN bit 1 (byte 8a)\r\n* WS: send payload len 0\r\n* WS: wanted to send 6 bytes, sent 6 bytes\r\n* WS: bytesleft 0 datalen 0\r\n* reached /home/marski/Sources/curl/lib/easy.c:1231\r\n* WS: 2 bytes left to decode\r\n* WS:235 received FIN bit 1\r\n* WS: received OPCODE PING\r\n* WS: received 0 bytes payload (0 left, buflen was 2)\r\n* WS: auto-respond to PING with a PONG, 0 bytes payload\r\n* WS: send OPCODE PONG\r\n* WS: set FIN\r\n* WS: send FIN bit 1 (byte 8a)\r\n* WS: send payload len 0\r\n* WS: wanted to send 6 bytes, sent 6 bytes\r\n* WS: bytesleft 0 datalen 0\r\n* reached /home/marski/Sources/curl/lib/easy.c:1231\r\n* WS: 2 bytes left to decode\r\n* WS:235 received FIN bit 1\r\n* WS: received OPCODE PING\r\n* WS: received 0 bytes payload (0 left, buflen was 2)\r\n* WS: auto-respond to PING with a PONG, 0 bytes payload\r\n* WS: send OPCODE PONG\r\n* WS: set FIN\r\n* WS: send FIN bit 1 (byte 8a)\r\n* WS: send payload len 0\r\n* WS: wanted to send 6 bytes, sent 6 bytes\r\n* WS: bytesleft 0 datalen 0\r\n```\r\n\r\n> When the autoping is handled, and it goes back to the outer loop, what makes it stick in the loop?\r\n\r\nWhenever the client gets stuck in `curl_ws_recv` after receiving a `PING` frame and I break into the debugger, it shows the following call stack:\r\n\r\n```\r\n1  __libc_recv                            recv.c                   28  0x7ffff7ae435c \r\n2  __libc_recv                            recv.c                   23  0x7ffff7ae435c \r\n3  cf_socket_recv                                                      0x7ffff7f36055 \r\n4  bio_cf_in_read                                                      0x7ffff7f97da7 \r\n5  ??                                                                  0x7ffff76de6ae \r\n6  ??                                                                  0x7ffff76dd504 \r\n7  BIO_read                                                            0x7ffff76ddad7 \r\n8  ??                                                                  0x7ffff7930b91 \r\n9  ??                                                                  0x7ffff7934e1e \r\n10 ??                                                                  0x7ffff79326d0 \r\n11 ??                                                                  0x7ffff7939c45 \r\n12 ??                                                                  0x7ffff7944a3f \r\n13 SSL_read                                                            0x7ffff7944b47 \r\n14 ossl_recv                                                           0x7ffff7f94d60 \r\n15 ssl_cf_recv                                                         0x7ffff7f99ec7 \r\n16 Curl_read                                                           0x7ffff7f6f060 \r\n17 curl_easy_recv                                                      0x7ffff7f45dd9 \r\n18 curl_ws_recv                                                        0x7ffff7f8bca4 \r\n19 (anonymous namespace)::on_socket_event websocket.cpp            130 0x4060e7       \r\n20 EventLoop_wait                         eventloop.cpp            108 0x403525       \r\n```\r\n\r\nPerhaps the underlying `BIO`, that `SSL_read` calls into, is blocking?\r\n\r\nLet me know how else I could help you to resolve this problem.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1445979233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"marski","id":25371746,"node_id":"MDQ6VXNlcjI1MzcxNzQ2","avatar_url":"https://avatars.githubusercontent.com/u/25371746?v=4","gravatar_id":"","url":"https://api.github.com/users/marski","html_url":"https://github.com/marski","followers_url":"https://api.github.com/users/marski/followers","following_url":"https://api.github.com/users/marski/following{/other_user}","gists_url":"https://api.github.com/users/marski/gists{/gist_id}","starred_url":"https://api.github.com/users/marski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marski/subscriptions","organizations_url":"https://api.github.com/users/marski/orgs","repos_url":"https://api.github.com/users/marski/repos","events_url":"https://api.github.com/users/marski/events{/privacy}","received_events_url":"https://api.github.com/users/marski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8617364779,"node_id":"REFE_lADOAAiu0c5fYYE3zwAAAAIBoo0r","url":"https://api.github.com/repos/curl/curl/issues/events/8617364779","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ba5ac5ffcd3ae23c06f157ae0137d352305417c5","commit_url":"https://api.github.com/repos/curl/curl/commits/ba5ac5ffcd3ae23c06f157ae0137d352305417c5","created_at":"2023-02-27T15:56:43Z","performed_via_github_app":null},{"actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-27T15:56:59Z","updated_at":"2023-02-27T15:56:59Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/10625","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/10625/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/10625/comments","events_url":"https://api.github.com/repos/curl/curl/issues/10625/events","html_url":"https://github.com/curl/curl/pull/10625","id":1601461565,"node_id":"PR_kwDOAAiu0c5K2LxP","number":10625,"title":"ws: keep the socket non-blocking","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4294582278,"node_id":"LA_kwDOAAiu0c7_-iAG","url":"https://api.github.com/repos/curl/curl/labels/WebSocket","name":"WebSocket","color":"A51BBC","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-02-27T15:56:59Z","updated_at":"2023-02-27T23:39:13Z","closed_at":"2023-02-27T23:38:54Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/10625","html_url":"https://github.com/curl/curl/pull/10625","diff_url":"https://github.com/curl/curl/pull/10625.diff","patch_url":"https://github.com/curl/curl/pull/10625.patch","merged_at":null},"body":"Reported-by: marski on github\r\nFixes #10615","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/10625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/10625/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1446586743","html_url":"https://github.com/curl/curl/issues/10615#issuecomment-1446586743","issue_url":"https://api.github.com/repos/curl/curl/issues/10615","id":1446586743,"node_id":"IC_kwDOAAiu0c5WOSl3","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-27T15:57:24Z","updated_at":"2023-02-27T18:52:10Z","body":"You are right. I made it blocking for the connect_only-mode but I forget why...  I need to get rid of that and I'm sure your case will work differently! Try #10625 if you can.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1446586743/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1446621505","html_url":"https://github.com/curl/curl/issues/10615#issuecomment-1446621505","issue_url":"https://api.github.com/repos/curl/curl/issues/10615","id":1446621505,"node_id":"IC_kwDOAAiu0c5WObFB","user":{"login":"marski","id":25371746,"node_id":"MDQ6VXNlcjI1MzcxNzQ2","avatar_url":"https://avatars.githubusercontent.com/u/25371746?v=4","gravatar_id":"","url":"https://api.github.com/users/marski","html_url":"https://github.com/marski","followers_url":"https://api.github.com/users/marski/followers","following_url":"https://api.github.com/users/marski/following{/other_user}","gists_url":"https://api.github.com/users/marski/gists{/gist_id}","starred_url":"https://api.github.com/users/marski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marski/subscriptions","organizations_url":"https://api.github.com/users/marski/orgs","repos_url":"https://api.github.com/users/marski/repos","events_url":"https://api.github.com/users/marski/events{/privacy}","received_events_url":"https://api.github.com/users/marski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-27T16:15:37Z","updated_at":"2023-02-27T16:15:37Z","body":"I confirm that applying your patch from #10625 fixes the problem, and `curl_ws_recv` does not block after handling `PONG` frame. Thank you for looking into this!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1446621505/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"marski","id":25371746,"node_id":"MDQ6VXNlcjI1MzcxNzQ2","avatar_url":"https://avatars.githubusercontent.com/u/25371746?v=4","gravatar_id":"","url":"https://api.github.com/users/marski","html_url":"https://github.com/marski","followers_url":"https://api.github.com/users/marski/followers","following_url":"https://api.github.com/users/marski/following{/other_user}","gists_url":"https://api.github.com/users/marski/gists{/gist_id}","starred_url":"https://api.github.com/users/marski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marski/subscriptions","organizations_url":"https://api.github.com/users/marski/orgs","repos_url":"https://api.github.com/users/marski/repos","events_url":"https://api.github.com/users/marski/events{/privacy}","received_events_url":"https://api.github.com/users/marski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1446625297","html_url":"https://github.com/curl/curl/issues/10615#issuecomment-1446625297","issue_url":"https://api.github.com/repos/curl/curl/issues/10615","id":1446625297,"node_id":"IC_kwDOAAiu0c5WOcAR","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-02-27T16:17:35Z","updated_at":"2023-02-27T16:17:35Z","body":"Excellent, thanks for confirming!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1446625297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8621357696,"node_id":"CE_lADOAAiu0c5fYYE3zwAAAAIB33qA","url":"https://api.github.com/repos/curl/curl/issues/events/8621357696","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"3b23dbeec1e235f1c9af7c8c2660ca7e53ef6204","commit_url":"https://api.github.com/repos/curl/curl/commits/3b23dbeec1e235f1c9af7c8c2660ca7e53ef6204","created_at":"2023-02-27T23:38:53Z","state_reason":null,"performed_via_github_app":null},{"id":9866870701,"node_id":"REFE_lADOAAiu0c5fYYE3zwAAAAJMHH-t","url":"https://api.github.com/repos/curl/curl/issues/events/9866870701","actor":{"login":"bch","id":122211,"node_id":"MDQ6VXNlcjEyMjIxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/122211?v=4","gravatar_id":"","url":"https://api.github.com/users/bch","html_url":"https://github.com/bch","followers_url":"https://api.github.com/users/bch/followers","following_url":"https://api.github.com/users/bch/following{/other_user}","gists_url":"https://api.github.com/users/bch/gists{/gist_id}","starred_url":"https://api.github.com/users/bch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bch/subscriptions","organizations_url":"https://api.github.com/users/bch/orgs","repos_url":"https://api.github.com/users/bch/repos","events_url":"https://api.github.com/users/bch/events{/privacy}","received_events_url":"https://api.github.com/users/bch/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f76404a0e699fa1e67caba15f87a5b60e5172642","commit_url":"https://api.github.com/repos/bch/curl/commits/f76404a0e699fa1e67caba15f87a5b60e5172642","created_at":"2023-07-19T20:01:07Z","performed_via_github_app":null}]