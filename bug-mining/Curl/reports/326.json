{"url":"https://api.github.com/repos/curl/curl/issues/12033","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/12033/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/12033/comments","events_url":"https://api.github.com/repos/curl/curl/issues/12033/events","html_url":"https://github.com/curl/curl/issues/12033","id":1927140349,"node_id":"I_kwDOAAiu0c5y3dP9","number":12033,"title":"Test hangs in event mode","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-10-04T23:54:19Z","updated_at":"2023-10-07T20:55:03Z","closed_at":"2023-10-07T20:55:03Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\r\n\r\nTest 1233 (as well as 1272 and 1238, although I have less data about those) has been hanging 100% of the time in the event-based CI build ever since commit b5bb84cbef (PR #11939) . I can reproduce this 100% of the time on my local Linux machine by performing parallel tests enabling event mode and using the `FTP` keyword to select tests. The last log message produced by the curl under test is:\r\n```\r\n 0000: 229 Entering Passiv Mode (|||1|)\r\n```\r\n\r\nRunning with the `GOPHER` keyword causes test 1272 to hang.\r\n\r\nRunning with the `TFTP` keyword cases test 1238 to hang for about 2000 seconds until it times out and fails.\r\n\r\nThe latter two test hangs can be reproduced easily without parallel mode, but the first one seems to need it.\r\n\r\n- [X] fixed test 1233\r\n- [ ] fixed test 1238\r\n- [ ] fixed test 1272\r\n\r\n### I expected the following\r\n\r\nThe tests should pass without hanging.\r\n\r\n### curl/libcurl version\r\n\r\n8.4.0-DEV\r\n\r\n### operating system\r\n\r\nCI build machine:\r\n\r\nLinux fv-az736-78 6.2.0-1012-azure #12~22.04.1-Ubuntu SMP Thu Sep  7 14:07:14 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/12033/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/12033/timeline","performed_via_github_app":null,"state_reason":"completed"}