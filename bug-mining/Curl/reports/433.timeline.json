[{"id":12300081717,"node_id":"LE_lADOAAiu0c6EGoclzwAAAALdJFo1","url":"https://api.github.com/repos/curl/curl/issues/events/12300081717","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-03-30T08:32:19Z","label":{"name":"regression","color":"33aa3f"},"performed_via_github_app":null},{"id":12300081720,"node_id":"LE_lADOAAiu0c6EGoclzwAAAALdJFo4","url":"https://api.github.com/repos/curl/curl/issues/events/12300081720","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-03-30T08:32:19Z","label":{"name":"HTTP","color":"207de5"},"performed_via_github_app":null},{"id":12300081735,"node_id":"MEE_lADOAAiu0c6EGoclzwAAAALdJFpH","url":"https://api.github.com/repos/curl/curl/issues/events/12300081735","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-30T08:32:20Z","performed_via_github_app":null},{"id":12300081738,"node_id":"SE_lADOAAiu0c6EGoclzwAAAALdJFpK","url":"https://api.github.com/repos/curl/curl/issues/events/12300081738","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-30T08:32:20Z","performed_via_github_app":null},{"id":12300083138,"node_id":"AE_lADOAAiu0c6EGoclzwAAAALdJF_C","url":"https://api.github.com/repos/curl/curl/issues/events/12300083138","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-03-30T08:33:10Z","assignee":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2027971250","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2027971250","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2027971250,"node_id":"IC_kwDOAAiu0c544GKy","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T08:33:27Z","updated_at":"2024-03-30T08:33:27Z","body":"@icing it feels like a topic for you!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2027971250/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12300084144,"node_id":"MEE_lADOAAiu0c6EGoclzwAAAALdJGOw","url":"https://api.github.com/repos/curl/curl/issues/events/12300084144","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-30T08:33:28Z","performed_via_github_app":null},{"id":12300084145,"node_id":"SE_lADOAAiu0c6EGoclzwAAAALdJGOx","url":"https://api.github.com/repos/curl/curl/issues/events/12300084145","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-30T08:33:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028265834","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028265834","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028265834,"node_id":"IC_kwDOAAiu0c545OFq","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T16:49:23Z","updated_at":"2024-03-30T16:49:23Z","body":"I wrote up [debugit.c](https://github.com/curl/curl/files/14812693/debugit.c.txt) in an attempt to reproduce, but I fail.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028265834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028280771","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028280771","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028280771,"node_id":"IC_kwDOAAiu0c545RvD","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T16:56:49Z","updated_at":"2024-03-30T16:57:38Z","body":"@peff: as the difference between the working and the non-working command lines seems to be `http.postbuffer=65536` - is that perhaps setting the `CURLOPT_BUFFERSIZE` or `CURLOPT_UPLOAD_BUFFERSIZE` to this value?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028280771/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12301236044,"node_id":"MEE_lADOAAiu0c6EGoclzwAAAALdNfdM","url":"https://api.github.com/repos/curl/curl/issues/events/12301236044","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-30T16:56:51Z","performed_via_github_app":null},{"id":12301236053,"node_id":"SE_lADOAAiu0c6EGoclzwAAAALdNfdV","url":"https://api.github.com/repos/curl/curl/issues/events/12301236053","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-30T16:56:51Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028453933","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028453933","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028453933,"node_id":"IC_kwDOAAiu0c5458At","user":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T19:48:45Z","updated_at":"2024-03-30T19:48:45Z","body":"This bug report in Arch Linux might describe the same bug: https://gitlab.archlinux.org/archlinux/packaging/packages/curl/-/issues/6","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028453933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028456778","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028456778","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028456778,"node_id":"IC_kwDOAAiu0c5458tK","user":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T20:04:03Z","updated_at":"2024-03-30T20:04:03Z","body":"\r\nI've played a bit around with that and it seems like for some repos it works and for others it does not:\r\n- This fails:\r\n  ```PKGBUILD\r\n  source=(\"git+https://github.com/xbmc/xbmc.git\")\r\n  ```\r\n  With the following error:\r\n  ```\r\n  ==> Making package: testpkg 123-1 (Sat 30 Mar 2024 08:55:56 PM CET)\r\n  ==> WARNING: Skipping dependency checks.\r\n  ==> Retrieving sources...\r\n    -> Cloning xbmc git repo...\r\n  Cloning into bare repository '/home/chris/.cache/packaging/sources/xbmc'...\r\n  error: RPC failed; HTTP 400 curl 22 The requested URL returned error: 400\r\n  ==> ERROR: Failure while downloading xbmc git repo\r\n      Aborting...\r\n   ```\r\n  [log.txt with `GIT_TRACE_CURL=1`](https://github.com/curl/curl/files/14813181/log.txt)\r\n\r\n   \r\n- while this fails not:\r\n  ```\r\n  source=(\"git+https://github.com/christian-heusel/aur.git\")\r\n  ```\r\n\r\nI'm scratching my head now a bit whats the difference between the two as everything else stays the same. I can also confirm that the 8.6 release works as intended.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028456778/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028468329","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028468329","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028468329,"node_id":"IC_kwDOAAiu0c545_hp","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T21:04:19Z","updated_at":"2024-03-30T21:04:19Z","body":"> error: RPC failed; HTTP 400 curl 22 The requested URL returned error: 400\r\n\r\nThat looks like curl gets a HTTP response code 400 back. It smells like a different issue and probably even in the server side.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028468329/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028479392","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028479392","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028479392,"node_id":"IC_kwDOAAiu0c546COg","user":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T22:04:41Z","updated_at":"2024-03-30T22:04:41Z","body":"> That looks like curl gets a HTTP response code 400 back. It smells like a different issue and probably even in the server side.\r\n\r\nI have bisected the issue and landed on the same commit:\r\n```\r\n9369c30cd (\"lib: Curl_read/Curl_write clarifications\")\r\n```\r\n\r\n<details>\r\n\r\n<summary> Click to see bisect log </summary>\r\n\r\n```\r\ngit bisect start\r\n# status: waiting for both good and bad commits\r\n# bad: [de7b3e89218467159a7af72d58cea8425946e97d] RELEASE-PROCEDURE: remove old release dates, add new pending ones\r\ngit bisect bad de7b3e89218467159a7af72d58cea8425946e97d\r\n# status: waiting for good commit(s), bad commit known\r\n# good: [5ce164e0e9290c96eb7d502173426c0a135ec008] RELEASE-NOTES: synced\r\ngit bisect good 5ce164e0e9290c96eb7d502173426c0a135ec008\r\n# good: [17d302e56221f5040092db77d4f85086e8a20e0e] setopt: Fix disabling all protocols\r\ngit bisect good 17d302e56221f5040092db77d4f85086e8a20e0e\r\n# bad: [05268cf801a193b68411cfa298413c3e5ca79d4f] sha512_256: add support for GnuTLS and OpenSSL\r\ngit bisect bad 05268cf801a193b68411cfa298413c3e5ca79d4f\r\n# bad: [e455490c3c424f3a93717540369f77df79da727d] _VARIABLES.md: improve the description\r\ngit bisect bad e455490c3c424f3a93717540369f77df79da727d\r\n# bad: [89733e2dd26b51c16b2c9f090881127dbba58ce8] configure: build & install shell completions when enabled\r\ngit bisect bad 89733e2dd26b51c16b2c9f090881127dbba58ce8\r\n# good: [745b99e1e841cd833bc0d02fcfbf9c0e538690b3] KNOWN_BUGS: FTPS upload, FileZilla, GnuTLS and close_notify\r\ngit bisect good 745b99e1e841cd833bc0d02fcfbf9c0e538690b3\r\n# bad: [9369c30cd87c041cf983bcdfabd1570980abbaf6] lib: Curl_read/Curl_write clarifications\r\ngit bisect bad 9369c30cd87c041cf983bcdfabd1570980abbaf6\r\n# good: [65405459d58abed6d5b6ea20ccdca972aa807f9c] getparam: make --ftp-ssl work again\r\ngit bisect good 65405459d58abed6d5b6ea20ccdca972aa807f9c\r\n# good: [8d67c61c47a0dcc3e150d33ab941a205e76ce9eb] curldown: Fix email address in Copyright\r\ngit bisect good 8d67c61c47a0dcc3e150d33ab941a205e76ce9eb\r\n# first bad commit: [9369c30cd87c041cf983bcdfabd1570980abbaf6] lib: Curl_read/Curl_write clarifications\r\n```\r\n\r\n</details>","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028479392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028498240","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028498240","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028498240,"node_id":"IC_kwDOAAiu0c546G1A","user":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-30T23:44:30Z","updated_at":"2024-03-30T23:44:30Z","body":"@bagder I tried a very similar reproduction recipe, but couldn't convince it to fail. I'm not quite sure what Git is doing differently. Your question about `CURLOPT_BUFFERSIZE` is a good one, but no, we never use that option. I think the reason it is important is because it triggers Git to stream the input as `Transfer-Encoding: chunked` with a `CURLOPT_READFUNCTION` rather than feeding it all as a single buffer.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028498240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12301971655,"node_id":"MEE_lADOAAiu0c6EGoclzwAAAALdQTDH","url":"https://api.github.com/repos/curl/curl/issues/events/12301971655","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-30T23:44:31Z","performed_via_github_app":null},{"id":12301971658,"node_id":"SE_lADOAAiu0c6EGoclzwAAAALdQTDK","url":"https://api.github.com/repos/curl/curl/issues/events/12301971658","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-30T23:44:31Z","performed_via_github_app":null},{"actor":{"login":"kpcyrd","id":7763184,"node_id":"MDQ6VXNlcjc3NjMxODQ=","avatar_url":"https://avatars.githubusercontent.com/u/7763184?v=4","gravatar_id":"","url":"https://api.github.com/users/kpcyrd","html_url":"https://github.com/kpcyrd","followers_url":"https://api.github.com/users/kpcyrd/followers","following_url":"https://api.github.com/users/kpcyrd/following{/other_user}","gists_url":"https://api.github.com/users/kpcyrd/gists{/gist_id}","starred_url":"https://api.github.com/users/kpcyrd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpcyrd/subscriptions","organizations_url":"https://api.github.com/users/kpcyrd/orgs","repos_url":"https://api.github.com/users/kpcyrd/repos","events_url":"https://api.github.com/users/kpcyrd/events{/privacy}","received_events_url":"https://api.github.com/users/kpcyrd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T13:30:25Z","updated_at":"2024-03-31T13:30:25Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407","repository_url":"https://api.github.com/repos/rustls/rustls-ffi","labels_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/labels{/name}","comments_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/comments","events_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/events","html_url":"https://github.com/rustls/rustls-ffi/issues/407","id":2216943127,"node_id":"I_kwDOExNEQM6EI94X","number":407,"title":"cURL built with rustls-ffi 0.10.0; 0.12.1 unable to talk to Git https endpoints","user":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2024-03-31T12:19:57Z","updated_at":"2024-03-31T20:52:45Z","closed_at":"2024-03-31T15:15:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":320029760,"node_id":"MDEwOlJlcG9zaXRvcnkzMjAwMjk3NjA=","name":"rustls-ffi","full_name":"rustls/rustls-ffi","private":false,"owner":{"login":"rustls","id":65125397,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1MTI1Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/65125397?v=4","gravatar_id":"","url":"https://api.github.com/users/rustls","html_url":"https://github.com/rustls","followers_url":"https://api.github.com/users/rustls/followers","following_url":"https://api.github.com/users/rustls/following{/other_user}","gists_url":"https://api.github.com/users/rustls/gists{/gist_id}","starred_url":"https://api.github.com/users/rustls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rustls/subscriptions","organizations_url":"https://api.github.com/users/rustls/orgs","repos_url":"https://api.github.com/users/rustls/repos","events_url":"https://api.github.com/users/rustls/events{/privacy}","received_events_url":"https://api.github.com/users/rustls/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rustls/rustls-ffi","description":"Use Rustls from any language","fork":false,"url":"https://api.github.com/repos/rustls/rustls-ffi","forks_url":"https://api.github.com/repos/rustls/rustls-ffi/forks","keys_url":"https://api.github.com/repos/rustls/rustls-ffi/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rustls/rustls-ffi/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rustls/rustls-ffi/teams","hooks_url":"https://api.github.com/repos/rustls/rustls-ffi/hooks","issue_events_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/events{/number}","events_url":"https://api.github.com/repos/rustls/rustls-ffi/events","assignees_url":"https://api.github.com/repos/rustls/rustls-ffi/assignees{/user}","branches_url":"https://api.github.com/repos/rustls/rustls-ffi/branches{/branch}","tags_url":"https://api.github.com/repos/rustls/rustls-ffi/tags","blobs_url":"https://api.github.com/repos/rustls/rustls-ffi/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rustls/rustls-ffi/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rustls/rustls-ffi/git/refs{/sha}","trees_url":"https://api.github.com/repos/rustls/rustls-ffi/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rustls/rustls-ffi/statuses/{sha}","languages_url":"https://api.github.com/repos/rustls/rustls-ffi/languages","stargazers_url":"https://api.github.com/repos/rustls/rustls-ffi/stargazers","contributors_url":"https://api.github.com/repos/rustls/rustls-ffi/contributors","subscribers_url":"https://api.github.com/repos/rustls/rustls-ffi/subscribers","subscription_url":"https://api.github.com/repos/rustls/rustls-ffi/subscription","commits_url":"https://api.github.com/repos/rustls/rustls-ffi/commits{/sha}","git_commits_url":"https://api.github.com/repos/rustls/rustls-ffi/git/commits{/sha}","comments_url":"https://api.github.com/repos/rustls/rustls-ffi/comments{/number}","issue_comment_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/comments{/number}","contents_url":"https://api.github.com/repos/rustls/rustls-ffi/contents/{+path}","compare_url":"https://api.github.com/repos/rustls/rustls-ffi/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rustls/rustls-ffi/merges","archive_url":"https://api.github.com/repos/rustls/rustls-ffi/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rustls/rustls-ffi/downloads","issues_url":"https://api.github.com/repos/rustls/rustls-ffi/issues{/number}","pulls_url":"https://api.github.com/repos/rustls/rustls-ffi/pulls{/number}","milestones_url":"https://api.github.com/repos/rustls/rustls-ffi/milestones{/number}","notifications_url":"https://api.github.com/repos/rustls/rustls-ffi/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rustls/rustls-ffi/labels{/name}","releases_url":"https://api.github.com/repos/rustls/rustls-ffi/releases{/id}","deployments_url":"https://api.github.com/repos/rustls/rustls-ffi/deployments","created_at":"2020-12-09T17:26:05Z","updated_at":"2025-10-27T15:20:04Z","pushed_at":"2025-10-27T15:20:01Z","git_url":"git://github.com/rustls/rustls-ffi.git","ssh_url":"git@github.com:rustls/rustls-ffi.git","clone_url":"https://github.com/rustls/rustls-ffi.git","svn_url":"https://github.com/rustls/rustls-ffi","homepage":"","size":1840,"stargazers_count":154,"watchers_count":154,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":36,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":28,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cryptography","ffi","rust","ssl","tls"],"visibility":"public","forks":36,"open_issues":28,"watchers":154,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\r\n\r\nI have used GitHub as an example here, but GitLab and Bitbucket also failed in the same way.\r\n\r\n```\r\n(chroot) monolith /tmp # GIT_TRACE_CURL=1 GIT_CURL_VERBOSE=1 git clone https://github.com/kangie/kangie-tools.git\r\nCloning into 'kangie-tools'...\r\n05:45:18.595988 http.c:843              == Info: Couldn't find host github.com in the .netrc file; using defaults\r\n05:45:18.596557 http.c:843              == Info: Host github.com:443 was resolved.\r\n05:45:18.596568 http.c:843              == Info: IPv6: (none)\r\n05:45:18.596572 http.c:843              == Info: IPv4: 20.248.137.48\r\n05:45:18.596588 http.c:843              == Info:   Trying 20.248.137.48:443...\r\n05:45:18.647927 http.c:843              == Info: Connected to github.com (20.248.137.48) port 443\r\n05:45:18.647980 http.c:843              == Info: ALPN: curl offers http/1.1\r\n05:45:18.648113 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n05:45:18.648156 http.c:843              == Info: Curl_socket_check: reading would block\r\n05:45:18.703955 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n05:45:18.704143 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n05:45:18.704183 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n05:45:18.704281 http.c:843              == Info: rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\n05:45:18.704296 http.c:843              == Info: Closing connection\r\nfatal: unable to access 'https://github.com/kangie/kangie-tools.git/': rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\n(chroot) monolith /tmp # curl --version\r\ncurl 8.6.0 (x86_64-gentoo-linux-musl) libcurl/8.6.0 rustls-ffi/0.10.0/rustls/0.21.0 zlib/1.3 c-ares/1.25.0 libpsl/0.21.5\r\nRelease-Date: 2024-01-31\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets\r\n\r\n\r\nkangie@monolith /data/development/temp/curl (master) $ GIT_TRACE_CURL=1 GIT_CURL_VERBOSE=1 git fetch upstream\r\n11:07:17.509634 http.c:843              == Info: Couldn't find host github.com in the .netrc file; using defaults\r\n11:07:17.509961 http.c:843              == Info: Host github.com:443 was resolved.\r\n11:07:17.509967 http.c:843              == Info: IPv6: (none)\r\n11:07:17.509970 http.c:843              == Info: IPv4: 20.248.137.48\r\n11:07:17.509981 http.c:843              == Info:   Trying 20.248.137.48:443...\r\n11:07:17.531516 http.c:843              == Info: Connected to github.com (20.248.137.48) port 443\r\n11:07:17.531543 http.c:843              == Info: ALPN: curl offers h2,http/1.1\r\n11:07:17.531674 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n11:07:17.531691 http.c:843              == Info: Curl_socket_check: reading would block\r\n11:07:17.553442 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n11:07:17.553547 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n11:07:17.553565 http.c:843              == Info: Curl_socket_check: reading would block\r\n11:07:17.553734 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n11:07:17.553744 http.c:843              == Info: Curl_socket_check: reading would block\r\n11:07:17.553866 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n11:07:17.553885 http.c:843              == Info: rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\n11:07:17.553894 http.c:843              == Info: Closing connection\r\nfatal: unable to access 'https://github.com/curl/curl.git/': rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\nkangie@monolith /data/development/temp/curl (master) $ curl --version                       \r\ncurl 8.7.1 (x86_64-pc-linux-gnu) libcurl/8.7.1 rustls-ffi/0.12.1/rustls/0.22 zlib/1.3.1 zstd/1.5.5 c-ares/1.27.0 libpsl/0.21.5 nghttp2/1.60.0\r\nRelease-Date: 2024-03-27\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTP2 HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets zstd\r\n```\r\n\r\n### I expected the following\r\n\r\nA successful git https request.\r\n\r\n### curl/libcurl version\r\n\r\ncurl 8.7.1 (x86_64-pc-linux-gnu) libcurl/8.7.1 rustls-ffi/0.12.1/rustls/0.22 zlib/1.3.1 zstd/1.5.5 c-ares/1.27.0 libpsl/0.21.5 nghttp2/1.60.0\r\nRelease-Date: 2024-03-27\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTP2 HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets zstd\r\n\r\ncurl 8.6.0 (x86_64-gentoo-linux-musl) libcurl/8.6.0 rustls-ffi/0.10.0/rustls/0.21.0 zlib/1.3 c-ares/1.25.0 libpsl/0.21.5\r\nRelease-Date: 2024-01-31\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets\r\n\r\n### operating system\r\n\r\nGentoo Linux\r\n\r\n### configure opts\r\n\r\n```\r\n./configure --prefix=/usr --build=x86_64-gentoo-linux-musl --host=x86_64-gentoo-linux-musl --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --datarootdir=/usr/share --disable-dependency-tracking --disable-silent-rules --disable-static --docdir=/usr/share/doc/curl-8.7.1 --htmldir=/usr/share/doc/curl-8.7.1/html --with-sysroot=/ --libdir=/usr/lib --without-ca-fallback --with-ca-bundle=/etc/ssl/certs/ca-certificates.crt --without-gnutls --without-mbedtls --without-rustls --with-rustls --with-default-ssl-backend=rustls --enable-alt-svc --enable-basic-auth --enable-bearer-auth --enable-digest-auth --enable-kerberos-auth --enable-negotiate-auth --enable-aws --enable-dict --disable-ech --enable-file --enable-ftp --disable-gopher --enable-hsts --enable-http --enable-imap --disable-ldap --disable-ldaps --enable-ntlm --disable-ntlm-wb --enable-pop3 --enable-rt --enable-rtsp --disable-smb --without-libssh2 --enable-smtp --disable-telnet --enable-tftp --enable-tls-srp --enable-ares --enable-cookies --enable-dateparse --enable-dnsshuffle --enable-doh --enable-symbol-hiding --enable-http-auth --enable-ipv6 --enable-largefile --enable-manual --enable-mime --enable-netrc --enable-progress-meter --enable-proxy --enable-socketpair --disable-sspi --disable-static --enable-pthreads --enable-threaded-resolver --disable-versioned-symbols --without-amissl --without-bearssl --without-brotli --with-fish-functions-dir=/usr/share/fish/vendor_completions.d --with-nghttp2 --without-hyper --without-libidn2 --without-gssapi --without-libgsasl --with-libpsl --without-msh3 --without-nghttp3 --without-ngtcp2 --without-quiche --without-librtmp --without-schannel --without-secure-transport --without-test-caddy --without-test-httpd --without-test-nghttpx --disable-websockets --without-winidn --without-wolfssl --with-zlib --without-zstd --with-zsh-functions-dir=/usr/share/zsh/site-functions\r\n\r\n```\r\n\r\n### See Also:\r\n- https://bugs.gentoo.org/928236\r\n- cURL issue: curl/curl#13248","reactions":{"url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"actor":{"login":"rimrul","id":6178234,"node_id":"MDQ6VXNlcjYxNzgyMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/6178234?v=4","gravatar_id":"","url":"https://api.github.com/users/rimrul","html_url":"https://github.com/rimrul","followers_url":"https://api.github.com/users/rimrul/followers","following_url":"https://api.github.com/users/rimrul/following{/other_user}","gists_url":"https://api.github.com/users/rimrul/gists{/gist_id}","starred_url":"https://api.github.com/users/rimrul/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rimrul/subscriptions","organizations_url":"https://api.github.com/users/rimrul/orgs","repos_url":"https://api.github.com/users/rimrul/repos","events_url":"https://api.github.com/users/rimrul/events{/privacy}","received_events_url":"https://api.github.com/users/rimrul/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T14:30:54Z","updated_at":"2024-03-31T14:30:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/git-for-windows/git/issues/4883","repository_url":"https://api.github.com/repos/git-for-windows/git","labels_url":"https://api.github.com/repos/git-for-windows/git/issues/4883/labels{/name}","comments_url":"https://api.github.com/repos/git-for-windows/git/issues/4883/comments","events_url":"https://api.github.com/repos/git-for-windows/git/issues/4883/events","html_url":"https://github.com/git-for-windows/git/issues/4883","id":2210169007,"node_id":"I_kwDOAWJAkM6DvICv","number":4883,"title":"[New curl version] 8.7.1","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"labels":[{"id":2407642903,"node_id":"MDU6TGFiZWwyNDA3NjQyOTAz","url":"https://api.github.com/repos/git-for-windows/git/labels/component-update","name":"component-update","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/git-for-windows/git/milestones/88","html_url":"https://github.com/git-for-windows/git/milestone/88","labels_url":"https://api.github.com/repos/git-for-windows/git/milestones/88/labels","id":10598225,"node_id":"MI_kwDOAWJAkM4AobdR","number":88,"title":"v2.45.0","description":"","creator":{"login":"gitforwindowshelper[bot]","id":115591365,"node_id":"BOT_kgDOBuPIxQ","avatar_url":"https://avatars.githubusercontent.com/in/246505?v=4","gravatar_id":"","url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D","html_url":"https://github.com/apps/gitforwindowshelper","followers_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/followers","following_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/repos","events_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/gitforwindowshelper%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":19,"state":"closed","created_at":"2024-02-23T21:48:26Z","updated_at":"2024-04-29T20:41:13Z","due_on":"2024-04-29T07:00:00Z","closed_at":"2024-04-29T20:41:13Z"},"comments":10,"created_at":"2024-03-27T08:30:13Z","updated_at":"2024-05-05T11:36:46Z","closed_at":"2024-04-12T12:52:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":23216272,"node_id":"MDEwOlJlcG9zaXRvcnkyMzIxNjI3Mg==","name":"git","full_name":"git-for-windows/git","private":false,"owner":{"login":"git-for-windows","id":4571183,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ1NzExODM=","avatar_url":"https://avatars.githubusercontent.com/u/4571183?v=4","gravatar_id":"","url":"https://api.github.com/users/git-for-windows","html_url":"https://github.com/git-for-windows","followers_url":"https://api.github.com/users/git-for-windows/followers","following_url":"https://api.github.com/users/git-for-windows/following{/other_user}","gists_url":"https://api.github.com/users/git-for-windows/gists{/gist_id}","starred_url":"https://api.github.com/users/git-for-windows/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/git-for-windows/subscriptions","organizations_url":"https://api.github.com/users/git-for-windows/orgs","repos_url":"https://api.github.com/users/git-for-windows/repos","events_url":"https://api.github.com/users/git-for-windows/events{/privacy}","received_events_url":"https://api.github.com/users/git-for-windows/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/git-for-windows/git","description":"A fork of Git containing Windows-specific patches.","fork":true,"url":"https://api.github.com/repos/git-for-windows/git","forks_url":"https://api.github.com/repos/git-for-windows/git/forks","keys_url":"https://api.github.com/repos/git-for-windows/git/keys{/key_id}","collaborators_url":"https://api.github.com/repos/git-for-windows/git/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/git-for-windows/git/teams","hooks_url":"https://api.github.com/repos/git-for-windows/git/hooks","issue_events_url":"https://api.github.com/repos/git-for-windows/git/issues/events{/number}","events_url":"https://api.github.com/repos/git-for-windows/git/events","assignees_url":"https://api.github.com/repos/git-for-windows/git/assignees{/user}","branches_url":"https://api.github.com/repos/git-for-windows/git/branches{/branch}","tags_url":"https://api.github.com/repos/git-for-windows/git/tags","blobs_url":"https://api.github.com/repos/git-for-windows/git/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/git-for-windows/git/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/git-for-windows/git/git/refs{/sha}","trees_url":"https://api.github.com/repos/git-for-windows/git/git/trees{/sha}","statuses_url":"https://api.github.com/repos/git-for-windows/git/statuses/{sha}","languages_url":"https://api.github.com/repos/git-for-windows/git/languages","stargazers_url":"https://api.github.com/repos/git-for-windows/git/stargazers","contributors_url":"https://api.github.com/repos/git-for-windows/git/contributors","subscribers_url":"https://api.github.com/repos/git-for-windows/git/subscribers","subscription_url":"https://api.github.com/repos/git-for-windows/git/subscription","commits_url":"https://api.github.com/repos/git-for-windows/git/commits{/sha}","git_commits_url":"https://api.github.com/repos/git-for-windows/git/git/commits{/sha}","comments_url":"https://api.github.com/repos/git-for-windows/git/comments{/number}","issue_comment_url":"https://api.github.com/repos/git-for-windows/git/issues/comments{/number}","contents_url":"https://api.github.com/repos/git-for-windows/git/contents/{+path}","compare_url":"https://api.github.com/repos/git-for-windows/git/compare/{base}...{head}","merges_url":"https://api.github.com/repos/git-for-windows/git/merges","archive_url":"https://api.github.com/repos/git-for-windows/git/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/git-for-windows/git/downloads","issues_url":"https://api.github.com/repos/git-for-windows/git/issues{/number}","pulls_url":"https://api.github.com/repos/git-for-windows/git/pulls{/number}","milestones_url":"https://api.github.com/repos/git-for-windows/git/milestones{/number}","notifications_url":"https://api.github.com/repos/git-for-windows/git/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/git-for-windows/git/labels{/name}","releases_url":"https://api.github.com/repos/git-for-windows/git/releases{/id}","deployments_url":"https://api.github.com/repos/git-for-windows/git/deployments","created_at":"2014-08-22T07:07:36Z","updated_at":"2025-11-10T10:33:00Z","pushed_at":"2025-11-10T08:28:39Z","git_url":"git://github.com/git-for-windows/git.git","ssh_url":"git@github.com:git-for-windows/git.git","clone_url":"https://github.com/git-for-windows/git.git","svn_url":"https://github.com/git-for-windows/git","homepage":"http://gitforwindows.org/","size":355516,"stargazers_count":8941,"watchers_count":8941,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":2740,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":210,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["hacktoberfest"],"visibility":"public","forks":2740,"open_issues":210,"watchers":8941,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"\n\nhttps://github.com/curl/curl/releases/tag/curl-8_7_1","reactions":{"url":"https://api.github.com/repos/git-for-windows/git/issues/4883/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/git-for-windows/git/issues/4883/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028783257","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028783257","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028783257,"node_id":"IC_kwDOAAiu0c547MaZ","user":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T14:51:59Z","updated_at":"2024-03-31T14:51:59Z","body":"@christian-heusel I think you're seeing the same problem. Whether you see the `HTTP 400` or not depends on whether you are hitting GitHub or a different server like `git.kernel.org`.\r\n\r\nThe root of the issue is that the `POST` we are sending is truncated, and contains just the bytes `0014`. In Git's protocol that is the start of a `pkt-line`, and the server expects to see at least another `0x10` bytes of data. When stock Git programs are invoked by an HTTP server, they see the bogus input and just give up with an empty response, causing the server to send back an `HTTP 200`. But GitHub runs a custom frontend that understands both HTTP and the Git protocol, and so it actually sends the HTTP 400.\r\n\r\nBut the root cause is the same: the client's POST was invalid, because curl didn't keep invoking our `CURLOPT_READFUNCTION`.\r\n\r\nAs for why the failure is seen with one repo or not the other: it is related to the size of the remote repository. It looks like you aren't setting `http.postBuffer`. Doing so will cause you to see the failure consistently, even for `ls-remote` versus a `clone`, because _every_ request (even just asking to list the refs) will require Git to stream the `POST` data using `CURLOPT_READFUNCTION`.\r\n\r\nBut for a clone, we'll also follow that up by asking for all of the ref tips in another `POST`.  I'm guessing you are cloning with `--mirror` under the hood (or otherwise asking for all refs). In that case, `aur.git` will require a `POST` of only a few hundred bytes, and we can just buffer it. But `xbmc.git` will require over a megabyte, which is the default `http.postBuffer` size.\r\n\r\nIf you increase the buffer size (causing Git to buffer the whole request itself and then hand it to curl as a single pointer via `CURLOPT_POSTFIELDS`), then it works:\r\n\r\n```\r\ngit -c http.postbuffer=2M clone --mirror https://github.com/xbmc/xbmc.git\r\n```\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028783257/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12303958707,"node_id":"MEE_lADOAAiu0c6EGoclzwAAAALdX4Kz","url":"https://api.github.com/repos/curl/curl/issues/events/12303958707","actor":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-31T14:52:00Z","performed_via_github_app":null},{"id":12303958717,"node_id":"SE_lADOAAiu0c6EGoclzwAAAALdX4K9","url":"https://api.github.com/repos/curl/curl/issues/events/12303958717","actor":{"login":"christian-heusel","id":26827864,"node_id":"MDQ6VXNlcjI2ODI3ODY0","avatar_url":"https://avatars.githubusercontent.com/u/26827864?v=4","gravatar_id":"","url":"https://api.github.com/users/christian-heusel","html_url":"https://github.com/christian-heusel","followers_url":"https://api.github.com/users/christian-heusel/followers","following_url":"https://api.github.com/users/christian-heusel/following{/other_user}","gists_url":"https://api.github.com/users/christian-heusel/gists{/gist_id}","starred_url":"https://api.github.com/users/christian-heusel/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/christian-heusel/subscriptions","organizations_url":"https://api.github.com/users/christian-heusel/orgs","repos_url":"https://api.github.com/users/christian-heusel/repos","events_url":"https://api.github.com/users/christian-heusel/events{/privacy}","received_events_url":"https://api.github.com/users/christian-heusel/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T14:52:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028793906","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028793906","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028793906,"node_id":"IC_kwDOAAiu0c547PAy","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T15:13:34Z","updated_at":"2024-03-31T15:13:34Z","body":"@peff in the case where it stops after those first 14 bytes: can you check what happens in the next invocation of the callback? (since those 14 bytes are what is sent after the callback returns after the first invoke) If the next one returns a zero, then that would explain the issue - but something tells me that is not what is going on...","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028793906/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12304039412,"node_id":"MEE_lADOAAiu0c6EGoclzwAAAALdYL30","url":"https://api.github.com/repos/curl/curl/issues/events/12304039412","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-31T15:13:35Z","performed_via_github_app":null},{"id":12304039414,"node_id":"SE_lADOAAiu0c6EGoclzwAAAALdYL32","url":"https://api.github.com/repos/curl/curl/issues/events/12304039414","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T15:13:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028806538","html_url":"https://github.com/curl/curl/issues/13229#issuecomment-2028806538","issue_url":"https://api.github.com/repos/curl/curl/issues/13229","id":2028806538,"node_id":"IC_kwDOAAiu0c547SGK","user":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T16:00:57Z","updated_at":"2024-03-31T16:00:57Z","body":"@bagder Nope, we are only invoked once. If I instrument Git like this:\r\n\r\n```diff\r\ndiff --git a/remote-curl.c b/remote-curl.c\r\nindex 1161dc7fed..3aaf0c96cc 100644\r\n--- a/remote-curl.c\r\n+++ b/remote-curl.c\r\n@@ -682,6 +682,8 @@ static size_t rpc_out(void *ptr, size_t eltsize,\r\n \tsize_t avail = rpc->len - rpc->pos;\r\n \tenum packet_read_status status;\r\n \r\n+\twarning(\"in read func: %d bytes allowed by curl, we have %d ready\",\r\n+\t\t(int)max, (int)avail);\r\n \tif (!avail) {\r\n \t\trpc->initial_buffer = 0;\r\n \t\trpc->len = 0;\r\n@@ -720,6 +722,7 @@ static size_t rpc_out(void *ptr, size_t eltsize,\r\n \t\tavail = max;\r\n \tmemcpy(ptr, rpc->buf + rpc->pos, avail);\r\n \trpc->pos += avail;\r\n+\twarning(\"passed curl %d bytes\", (int)avail);\r\n \treturn avail;\r\n }\r\n \r\n```\r\n\r\nI get:\r\n\r\n```\r\n$ git -c http.postbuffer=65536 ls-remote https://git.kernel.org/pub/scm/git/git.git\r\nwarning: in read func: 4 bytes allowed by curl, we have 20 ready\r\nwarning: passed curl 4 bytes\r\nfatal: expected flush after ref listing\r\n```\r\n\r\nIt is interesting that curl is only offering us 4 bytes of space to write. This could be because a previous request sent only 4 bytes (in this case it is because before streaming, Git sends a \"probe\" request of just 4 bytes to make sure the endpoint works at all).\r\n\r\nAnd indeed, if I comment out that probe (in `probe_rpc()`), then curl offers us much more space, and everything works fine. So maybe the issue is that curl is confused when the `READFUNCTION` fills up its internal buffer?\r\n\r\nIt's also possible that Git isn't correctly re-setting the handle between the requests, but we do reset POSTFIELDS and POSTFIELDSIZE to NULL/0.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028806538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"peff","id":45925,"node_id":"MDQ6VXNlcjQ1OTI1","avatar_url":"https://avatars.githubusercontent.com/u/45925?v=4","gravatar_id":"","url":"https://api.github.com/users/peff","html_url":"https://github.com/peff","followers_url":"https://api.github.com/users/peff/followers","following_url":"https://api.github.com/users/peff/following{/other_user}","gists_url":"https://api.github.com/users/peff/gists{/gist_id}","starred_url":"https://api.github.com/users/peff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/peff/subscriptions","organizations_url":"https://api.github.com/users/peff/orgs","repos_url":"https://api.github.com/users/peff/repos","events_url":"https://api.github.com/users/peff/events{/privacy}","received_events_url":"https://api.github.com/users/peff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12304124814,"node_id":"MEE_lADOAAiu0c6EGoclzwAAAALdYguO","url":"https://api.github.com/repos/curl/curl/issues/events/12304124814","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-31T16:00:58Z","performed_via_github_app":null},{"id":12304124816,"node_id":"SE_lADOAAiu0c6EGoclzwAAAALdYguQ","url":"https://api.github.com/repos/curl/curl/issues/events/12304124816","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T16:00:58Z","performed_via_github_app":null}]