{"url":"https://api.github.com/repos/curl/curl/issues/18283","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/18283/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/18283/comments","events_url":"https://api.github.com/repos/curl/curl/issues/18283/events","html_url":"https://github.com/curl/curl/issues/18283","id":3321371139,"node_id":"I_kwDOAAiu0c7F-BoD","number":18283,"title":"CURLE_PARTIAL_FILE error if downloading file in blocks (CURLOPT_RANGE) larger than file size","user":{"login":"kupavcevdenis","id":29731022,"node_id":"MDQ6VXNlcjI5NzMxMDIy","avatar_url":"https://avatars.githubusercontent.com/u/29731022?v=4","gravatar_id":"","url":"https://api.github.com/users/kupavcevdenis","html_url":"https://github.com/kupavcevdenis","followers_url":"https://api.github.com/users/kupavcevdenis/followers","following_url":"https://api.github.com/users/kupavcevdenis/following{/other_user}","gists_url":"https://api.github.com/users/kupavcevdenis/gists{/gist_id}","starred_url":"https://api.github.com/users/kupavcevdenis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kupavcevdenis/subscriptions","organizations_url":"https://api.github.com/users/kupavcevdenis/orgs","repos_url":"https://api.github.com/users/kupavcevdenis/repos","events_url":"https://api.github.com/users/kupavcevdenis/events{/privacy}","received_events_url":"https://api.github.com/users/kupavcevdenis/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118197,"node_id":"MDU6TGFiZWwxODQxMTgxOTc=","url":"https://api.github.com/repos/curl/curl/labels/regression","name":"regression","color":"33aa3f","default":false,"description":null},{"id":184118265,"node_id":"MDU6TGFiZWwxODQxMTgyNjU=","url":"https://api.github.com/repos/curl/curl/labels/FTP","name":"FTP","color":"bfd4f2","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2025-08-14T08:50:54Z","updated_at":"2025-08-15T11:35:35Z","closed_at":"2025-08-15T11:35:35Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nWhen trying to download file (FTP) in blocks (CURLOPT_RANGE, 0-262144) larger than file size I get CURLE_PARTIAL_FILE error\n\nSet options.\n\nCURLOPT_HTTPGET, 1\nCURLOPT_NOBODY, 0\nCURLOPT_HEADER, 0\nCURLOPT_UPLOAD, 0\nCURLOPT_FAILONERROR, 1\nCURLOPT_FOLLOWLOCATION, 1\nCURLOPT_RANGE, 0-262144\n\nProbably the cause of the error \n[transfer: conn close on paused upload Â· curl/curl@30de937](https://github.com/curl/curl/commit/30de937bda0f65d47059d579f8a21e48ad721e28)\n\n\nDownloading 'http://win2022-0244:49161/CRLT/redirect/301/ftp://win2022-0244:11820/normal' 262144 bytes starting at pos 0...\nCURLINFO_TEXT: Host win2022-0244:49161 was resolved. \nCURLINFO_TEXT: IPv6: fe80::efaf:5e1a:1bd3:3648, 2a03:2480:68:1821:157e:98b1:4c89:ac5c \nCURLINFO_TEXT: IPv4: 10.88.0.13 \nCURLINFO_TEXT:   Trying [fe80::efaf:5e1a:1bd3:3648]:49161... \nCURLINFO_TEXT: Connected to win2022-0244 (fe80::efaf:5e1a:1bd3:3648) port 49161 \nCURLINFO_TEXT: using HTTP/1.x \nCURLINFO_HEADER_OUT: GET /CRLT/redirect/301/ftp://win2022-0244:11820/normal HTTP/1.1  Host: win2022-0244:49161  Range: bytes=0-262143  User-Agent: curl/8.0  Accept: */*    \nCURLINFO_TEXT: Request completely sent off \nCURLINFO_HEADER_IN: HTTP/1.1 301 Moved Permanently  \nCURLINFO_HEADER_IN: Location: ftp://win2022-0244:11820/normal  \nCURLINFO_HEADER_IN: Content-Type: application/octet-stream  \nCURLINFO_HEADER_IN: Accept-Ranges: bytes  \nCURLINFO_HEADER_IN: Content-Length: 13  \nCURLINFO_HEADER_IN: Connection: keep-alive  \nCURLINFO_TEXT: Ignoring the response-body \nCURLINFO_TEXT: setting size while ignoring \nCURLINFO_HEADER_IN:   \nCURLINFO_TEXT: Connection #0 to host win2022-0244 left intact \nCURLINFO_TEXT: Clear auth, redirects to port from 49161 to 11820 \nCURLINFO_TEXT: Issue another request to this URL: 'ftp://win2022-0244:11820/normal' \nCURLINFO_TEXT: Host win2022-0244:11820 was resolved. \nCURLINFO_TEXT: IPv6: fe80::efaf:5e1a:1bd3:3648, 2a03:2480:68:1821:157e:98b1:4c89:ac5c \nCURLINFO_TEXT: IPv4: 10.88.0.13 \nCURLINFO_TEXT:   Trying [fe80::efaf:5e1a:1bd3:3648]:11820... \nCURLINFO_TEXT:   Trying 10.88.0.13:11820... \nCURLINFO_TEXT: Connected to win2022-0244 (10.88.0.13) port 11820 \nCURLINFO_HEADER_IN: 220 Browser Ftp Server.  \nCURLINFO_HEADER_OUT: USER anonymous  \nCURLINFO_HEADER_IN: 230 User Logged In.  \nCURLINFO_HEADER_OUT: PWD  \nCURLINFO_HEADER_IN: 257 \"/\" is current directory.  \nCURLINFO_TEXT: Entry path is '/' \nCURLINFO_TEXT: Request has same path as previous transfer \nCURLINFO_HEADER_OUT: EPSV  \nCURLINFO_TEXT: Connect data stream passively \nCURLINFO_HEADER_IN: 500 Command not understood.  \nCURLINFO_TEXT: Failed EPSV attempt. Disabling EPSV \nCURLINFO_HEADER_OUT: PASV  \nCURLINFO_HEADER_IN: 227 Entering Passive Mode (10,88,0,13,108,79).  \nCURLINFO_TEXT: Skip 10.88.0.13 for data connection, reuse win2022-0244 instead \nCURLINFO_TEXT: Connecting to 10.88.0.13 (10.88.0.13) port 27727 \nCURLINFO_TEXT:   Trying 10.88.0.13:27727... \nCURLINFO_TEXT: Connected 2nd connection to 10.88.0.13 port 27727 \nCURLINFO_HEADER_OUT: TYPE I  \nCURLINFO_HEADER_IN: 200 Binary transfer mode active.  \nCURLINFO_HEADER_OUT: SIZE normal  \nCURLINFO_HEADER_IN: 213 37  \nCURLINFO_HEADER_OUT: RETR normal  \nCURLINFO_HEADER_IN: 150 Opening data connection.  \nCURLINFO_TEXT: Maxdownload = 262144 \nCURLINFO_TEXT: Getting file with size: 37 \nCURLINFO_TEXT: abort upload \nCURLINFO_TEXT: end of response with 262107 bytes missing \nCURLINFO_TEXT: closing connection #1 \nCURLE 18, Response 150, errno 0 URL ftp://win2022-0244:11820/normal\n\n### I expected the following\n\nThis error does not reproduce in version curl 8.6.0\n\n### curl/libcurl version\n\nlib curl 8.15.0\n\n### operating system\n\nSystem: 'Microsoft Windows NT', Version: '10.0, 20348'","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/18283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/18283/timeline","performed_via_github_app":null,"state_reason":"completed"}