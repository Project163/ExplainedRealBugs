{"url":"https://api.github.com/repos/curl/curl/issues/17949","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/17949/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/17949/comments","events_url":"https://api.github.com/repos/curl/curl/issues/17949/events","html_url":"https://github.com/curl/curl/issues/17949","id":3239135319,"node_id":"I_kwDOAAiu0c7BEUhX","number":17949,"title":"Unexpected CURL_POLL_REMOVE for unknown socket (possibly from internal admin handle)","user":{"login":"yaoy6","id":81636823,"node_id":"MDQ6VXNlcjgxNjM2ODIz","avatar_url":"https://avatars.githubusercontent.com/u/81636823?v=4","gravatar_id":"","url":"https://api.github.com/users/yaoy6","html_url":"https://github.com/yaoy6","followers_url":"https://api.github.com/users/yaoy6/followers","following_url":"https://api.github.com/users/yaoy6/following{/other_user}","gists_url":"https://api.github.com/users/yaoy6/gists{/gist_id}","starred_url":"https://api.github.com/users/yaoy6/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yaoy6/subscriptions","organizations_url":"https://api.github.com/users/yaoy6/orgs","repos_url":"https://api.github.com/users/yaoy6/repos","events_url":"https://api.github.com/users/yaoy6/events{/privacy}","received_events_url":"https://api.github.com/users/yaoy6/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":7337891242,"node_id":"LA_kwDOAAiu0c8AAAABtV9Vqg","url":"https://api.github.com/repos/curl/curl/labels/multi-event","name":"multi-event","color":"7AA259","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2025-07-17T11:02:19Z","updated_at":"2025-07-20T21:18:00Z","closed_at":"2025-07-20T21:18:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nSince curl 8.13.0, `CURLMOPT_SOCKETFUNCTION` may receive a `CURL_POLL_REMOVE` callback for a socket that was not previously registered via `CURL_POLL_IN` or `CURL_POLL_OUT`.\n\nThis appears to be caused by the internal `multi->admin` easy handle, introduced for maintenance tasks. The socket used by this handle is not exposed to application code but still triggers callback events.\n\nIf this behavior is expected, it would help to document it clearly or provide a way to identify such callbacks. Thanks in advance!\n\nExample backtrace when `CURL_POLL_REMOVE` is received for an unexpected socket:\n```\n(gdb) bt\n#0 socket_callback ()\n#1 mev_forget_socket ()\n#2 socket_close ()\n#3 cf_socket_close ()\n#4 cf_he_close ()\n#5 ssl_cf_close ()\n#6 cf_setup_close ()\n#7 cf_hc_close ()\n#8 Curl_conn_close ()\n#9 Curl_cshutdn_terminate ()\n#10 cshutdn_perform ()\n#11 multi_socket ()\n```\n\n### I expected the following\n\n_No response_\n\n### curl/libcurl version\n\ncurl 8.13.0\n\n### operating system\n\nFreeBSD","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/17949/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/17949/timeline","performed_via_github_app":null,"state_reason":"completed"}