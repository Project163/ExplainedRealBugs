[{"id":12420637683,"node_id":"AE_lADOAAiu0c6FPBtgzwAAAALkU-Pz","url":"https://api.github.com/repos/curl/curl/issues/events/12420637683","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-04-10T11:48:13Z","assignee":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":12421556588,"node_id":"REFE_lADOAAiu0c6FPBtgzwAAAALkYels","url":"https://api.github.com/repos/curl/curl/issues/events/12421556588","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"86d2d9f2aa8a221ec52c876ca32d7af8f6f7a10c","commit_url":"https://api.github.com/repos/icing/curl/commits/86d2d9f2aa8a221ec52c876ca32d7af8f6f7a10c","created_at":"2024-04-10T12:54:37Z","performed_via_github_app":null},{"actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-10T12:54:48Z","updated_at":"2024-04-10T12:54:48Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/13340","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13340/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13340/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13340/events","html_url":"https://github.com/curl/curl/pull/13340","id":2235531394,"node_id":"PR_kwDOAAiu0c5sPiGl","number":13340,"title":"cw-out, error and pause handling","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":887227423,"node_id":"MDU6TGFiZWw4ODcyMjc0MjM=","url":"https://api.github.com/repos/curl/curl/labels/tests","name":"tests","color":"a7a8e8","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-04-10T12:54:47Z","updated_at":"2024-04-16T13:52:44Z","closed_at":"2024-04-16T13:52:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/13340","html_url":"https://github.com/curl/curl/pull/13340","diff_url":"https://github.com/curl/curl/pull/13340.diff","patch_url":"https://github.com/curl/curl/pull/13340.patch","merged_at":null},"body":"- remember error encountered in invoking write callback and always fail afterwards without further invokes\r\n- do not \"finish\" transfers that have send/received everything but still paused data waiting to be delivered to the client\r\n- check behaviour in test_02_17 with h2-pausing client\r\n- refs #13337\r\n\r\nFurther stability improvements:\r\n- go not clear `data->req.keepon` at the end of send/recv. Instead leave any PAUSE bits there to hold transfers until the app unpauses\r\n- move unpausing action of client writer into `Curl_readwrite()`, since errors encountered there are transfer error. Applications do not always check errrors on `curl_easy_unpaus()` and may keep a transfer going even though it has failed.","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13340/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13340/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2047469182","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2047469182","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2047469182,"node_id":"IC_kwDOAAiu0c56CeZ-","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-10T12:55:47Z","updated_at":"2024-04-10T12:55:47Z","body":"Thanks for your excellent description. I could reproduce the problem and adapt one of our test cases to check this. Would you be able to test #13340 if this works for you as well?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2047469182/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2047999341","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2047999341","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2047999341,"node_id":"IC_kwDOAAiu0c56Ef1t","user":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-10T16:29:20Z","updated_at":"2024-04-11T05:38:04Z","body":"Thanks @icing! Now behavior looks correct in the sample and our particular application.\r\n\r\nBut unfortunately we faced with another problem in `master` branch (currently we use `curl_8-7-1` tag). By some reason callback is called twice after put transfer on pause and resume it.\r\n\r\nIn our traces it looks like the following for `curl_8-7-1`:\r\n\r\n```\r\n2024-04-10 18:28:04.059,150 [DEBUG] (transfer_handler.cpp:337) write_via_user_callback_data_callback called for request e6235717-422a-4d87-91f5-c34586cff8fe with buffer size 163\r\n2024-04-10 18:28:04.064,465 [DEBUG] (transfer_handler.cpp:374) Pause receiving for request e6235717-422a-4d87-91f5-c34586cff8fe\r\n2024-04-10 18:28:04.084,478 [DEBUG] (transfer_handler.cpp:355) Going to resume receiving for request e6235717-422a-4d87-91f5-c34586cff8fe\r\n2024-04-10 18:28:04.084,647 [DEBUG] (transfer_handler.cpp:610) Resume receiving request e6235717-422a-4d87-91f5-c34586cff8fe\r\n2024-04-10 18:28:04.084,733 [DEBUG] (transfer_handler.cpp:337) write_via_user_callback_data_callback called for request e6235717-422a-4d87-91f5-c34586cff8fe with buffer size 163\r\n2024-04-10 18:28:04.084,831 [WARN ] (transfer_handler.cpp:368) Abort request e6235717-422a-4d87-91f5-c34586cff8fe due to Want to abort\r\n```\r\n\r\nIn `master` branch:\r\n\r\n```\r\n2024-04-10 18:34:28.407,189 [DEBUG] (transfer_handler.cpp:337) write_via_user_callback_data_callback called for request aa74de12-667f-4fba-b7f9-f1a387bfebb7 with buffer size 163\r\n2024-04-10 18:34:28.412,484 [DEBUG] (transfer_handler.cpp:374) Pause receiving for request aa74de12-667f-4fba-b7f9-f1a387bfebb7\r\n2024-04-10 18:34:28.412,589 [DEBUG] (transfer_handler.cpp:337) write_via_user_callback_data_callback called for request aa74de12-667f-4fba-b7f9-f1a387bfebb7 with buffer size 163\r\n2024-04-10 18:34:28.417,917 [DEBUG] (transfer_handler.cpp:374) Pause receiving for request aa74de12-667f-4fba-b7f9-f1a387bfebb7\r\n2024-04-10 18:34:28.433,459 [DEBUG] (transfer_handler.cpp:355) Going to resume receiving for request aa74de12-667f-4fba-b7f9-f1a387bfebb7\r\n2024-04-10 18:34:28.433,660 [DEBUG] (transfer_handler.cpp:610) Resume receiving request aa74de12-667f-4fba-b7f9-f1a387bfebb7\r\n2024-04-10 18:34:28.433,741 [DEBUG] (transfer_handler.cpp:355) Going to resume receiving for request aa74de12-667f-4fba-b7f9-f1a387bfebb7\r\n2024-04-10 18:34:28.433,806 [DEBUG] (transfer_handler.cpp:337) write_via_user_callback_data_callback called for request aa74de12-667f-4fba-b7f9-f1a387bfebb7 with buffer size 163\r\n2024-04-10 18:34:28.433,888 [WARN ] (transfer_handler.cpp:368) Abort request aa74de12-667f-4fba-b7f9-f1a387bfebb7 due to Want to abort\r\n```\r\n\r\nSorry for these logs. Just our application is quite complicated (it uses `epoll` and `curl_multi_socket_action`), at the moment I don't have an idea how to reproduce this problem with short sample.\r\nBy the way, after rolled back #13271 (just `transfer.c`) all looks correct in our application. I don't know how changes in #13271 impacted on this behavior.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2047999341/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12425118090,"node_id":"MEE_lADOAAiu0c6FPBtgzwAAAALkmEGK","url":"https://api.github.com/repos/curl/curl/issues/events/12425118090","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-10T16:29:21Z","performed_via_github_app":null},{"id":12425118105,"node_id":"SE_lADOAAiu0c6FPBtgzwAAAALkmEGZ","url":"https://api.github.com/repos/curl/curl/issues/events/12425118105","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-10T16:29:21Z","performed_via_github_app":null},{"id":12432102731,"node_id":"LE_lADOAAiu0c6FPBtgzwAAAALlAtVL","url":"https://api.github.com/repos/curl/curl/issues/events/12432102731","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-04-11T06:58:00Z","label":{"name":"libcurl API","color":"fef2c0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049069666","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049069666","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049069666,"node_id":"IC_kwDOAAiu0c56IlJi","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T07:18:44Z","updated_at":"2024-04-11T07:18:44Z","body":"@pkropachev, it is difficult to understand what the log means, not knowing your application. Can you get a stack trace of the second \"pausing\" call, where it comes from?\r\n\r\nAs an aside: if you need identifiers for requests in your application (unique for all in the same multi handle), there is `CURLINFO_XFER_ID` since curl 8.2.0. But then, you might need the uuids also for other purposes, in which case disregard this advice.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049069666/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12432298306,"node_id":"MEE_lADOAAiu0c6FPBtgzwAAAALlBdFC","url":"https://api.github.com/repos/curl/curl/issues/events/12432298306","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-11T07:18:45Z","performed_via_github_app":null},{"id":12432298315,"node_id":"SE_lADOAAiu0c6FPBtgzwAAAALlBdFL","url":"https://api.github.com/repos/curl/curl/issues/events/12432298315","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-11T07:18:45Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049158323","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049158323","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049158323,"node_id":"IC_kwDOAAiu0c56I6yz","user":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T08:09:34Z","updated_at":"2024-04-11T10:16:11Z","body":"@icing, yes, sorry for that logs.\r\nWe were able to reproduce the problem that I described in my previous comment with short sample of code. This problem is specific for HTTP version 2 (all is ok for HTTP 1.1). Problem is reproduced with `libcurl` built from the current `master` branch. All is ok in case rollback #13271.\r\n\r\nAnyway, initially filed problem is fixed for us. Thank you for that! We checked the fix for HTTP 1.1 and 2.\r\nSo, I'm not sure if we should continue investigation in scope of this issue or need to raise new one.\r\n\r\nLet me describe details of the problem that we found in the `master` branch in next comment and attach a sample for reproducing.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049158323/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12432902988,"node_id":"MEE_lADOAAiu0c6FPBtgzwAAAALlDwtM","url":"https://api.github.com/repos/curl/curl/issues/events/12432902988","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-11T08:09:35Z","performed_via_github_app":null},{"id":12432902999,"node_id":"SE_lADOAAiu0c6FPBtgzwAAAALlDwtX","url":"https://api.github.com/repos/curl/curl/issues/events/12432902999","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-11T08:09:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049266151","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049266151","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049266151,"node_id":"IC_kwDOAAiu0c56JVHn","user":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T09:14:37Z","updated_at":"2024-04-11T10:18:53Z","body":"So, we use `libcurl` built from the current `master` branch.\r\n\r\n```c\r\n#include <curl/curl.h>\r\n#include <stdbool.h>\r\n#include <stdio.h>\r\n#include <unistd.h>\r\n\r\nbool paused;\r\nint call_counter;\r\n\r\nstatic size_t http_body(void *buffer, size_t size, size_t nmemb, void *userp) {\r\n  call_counter++;\r\n  fprintf(stderr, \"http_body called at %d time. Callback call is %s expected\\n\",\r\n          call_counter, !paused ? \"\" : \"NOT\");\r\n  \r\n  if (call_counter == 1) {\r\n    paused = true;\r\n    fprintf(stderr, \"Return pause\\n\");\r\n    return CURL_WRITEFUNC_PAUSE;\r\n  }\r\n  \r\n  fprintf(stderr, \"Return abort\\n\");\r\n  return CURL_WRITEFUNC_ERROR;\r\n}\r\n\r\nint main(int argc, char **argv) {\r\n  CURLM *curl_multi_handle;\r\n  CURL *curl;\r\n\r\n  const char *url = \"https://httpbin.org/stream/1\";\r\n  struct CURLMsg *msg;\r\n  int running_handles;\r\n  int msgs_left;\r\n  call_counter = 0;\r\n  paused = false;\r\n\r\n  curl_global_init(CURL_GLOBAL_DEFAULT);\r\n  curl_multi_handle = curl_multi_init();\r\n  curl = curl_easy_init();\r\n\r\n  curl_easy_setopt(curl, CURLOPT_URL, url);\r\n  curl_easy_setopt(curl, CURLOPT_BUFFERSIZE, 1024);\r\n  curl_easy_setopt(curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);\r\n  // curl_easy_setopt(curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_2_0);\r\n  curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, http_body);\r\n  curl_easy_setopt(curl, CURLOPT_VERBOSE, 1);\r\n\r\n  curl_multi_add_handle(curl_multi_handle, curl);\r\n\r\n  curl_multi_perform(curl_multi_handle, &running_handles);\r\n\r\n  while (running_handles > 0) {\r\n    usleep(100 * 1000);\r\n\r\n    /* Resume if transfer is paused */\r\n    if (paused) {\r\n      fprintf(stderr, \"Going to resume transfer\\n\");\r\n      paused = false;\r\n      curl_easy_pause(curl, CURLPAUSE_CONT);\r\n      fprintf(stderr, \"Resumed\\n\");\r\n    }\r\n\r\n    curl_multi_perform(curl_multi_handle, &running_handles);\r\n  }\r\n\r\n  msg = curl_multi_info_read(curl_multi_handle, &msgs_left);\r\n  fprintf(stderr, \"Connection finished: %s\\n\",\r\n          curl_easy_strerror(msg->data.result));\r\n\r\n  curl_multi_remove_handle(curl_multi_handle, curl);\r\n  curl_easy_cleanup(curl);\r\n  curl_multi_cleanup(curl_multi_handle);\r\n\r\n  return 0;\r\n}\r\n```\r\n\r\n1) First test with **HTTP/1.1**. In the result we get the following output:\r\n\r\n```\r\nhttp_body called at 1 time. Callback call is  expected   <--- OK for pause\r\nReturn pause\r\nGoing to resume transfer                                         \r\nhttp_body called at 2 time. Callback call is  expected   <--- OK for resume\r\nReturn abort\r\n* Failure writing output to destination, passed 205 returned 4294967295\r\nResumed\r\nhttp_body called at 3 time. Callback call is  expected\r\nReturn abort\r\n* Failure writing output to destination, passed 205 returned 4294967295\r\n* Connection #0 to host httpbin.org left intact\r\nConnection finished: Failed writing received data to disk/application\r\n```\r\n\r\nAll looks correct except the third call of callback. But this is due to the fix #13340 is not applied yet. ðŸ™‚\r\n\r\n2) Second test with **HTTP/2**.\r\n\r\nYou need to comment:\r\n\r\n```c\r\ncurl_easy_setopt(curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);\r\n```\r\n\r\nand uncomment:\r\n\r\n```c\r\ncurl_easy_setopt(curl, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_2_0);\r\n```\r\n\r\nIn the result we get the following output:\r\n\r\n```\r\nhttp_body called at 1 time. Callback call is  expected            <--- OK for pause\r\nReturn pause\r\nhttp_body called at 2 time. Callback call is NOT expected     <--- Why is this called again? We don't see \"Going to resume transfer\" before it\r\nReturn abort\r\n* Failure writing output to destination, passed 205 returned 4294967295\r\nhttp_body called at 3 time. Callback call is NOT expected\r\nReturn abort\r\n* Failure writing output to destination, passed 205 returned 4294967295\r\n* Connection #0 to host httpbin.org left intact\r\nConnection finished: Failed writing received data to disk/application\r\n```\r\n\r\nWe see that callback is called again immediately after return `CURL_WRITEFUNC_PAUSE` from it.\r\n\r\nIf we rollback #13271 and run tests again then we get correct behavior for both tests. Hope it will help.\r\nLet me know if any additional information is required.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049266151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049483499","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049483499","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049483499,"node_id":"IC_kwDOAAiu0c56KKLr","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T11:29:13Z","updated_at":"2024-04-11T11:29:13Z","body":"The log line `* Failure writing output to destination, passed 205 returned 4294967295` indicates that this was running without the fix in https://github.com/curl/curl/pull/13340 ???","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049483499/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049511332","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049511332","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049511332,"node_id":"IC_kwDOAAiu0c56KQ-k","user":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T11:41:52Z","updated_at":"2024-04-11T11:45:51Z","body":"Yes, I think so. For example, if I run test with HTTP/2 and fix from #13340 then I get the following output:\r\n\r\n```\r\nhttp_body called at 1 time. Callback call is  expected\r\nReturn pause\r\nhttp_body called at 2 time. Callback call is NOT expected     <--- This is second problem for HTTP/2 in master branch\r\nReturn abort\r\n* client returned ERROR on write of 205 bytes\r\n* Connection #0 to host httpbin.org left intact\r\nConnection finished: Failed writing received data to disk/application\r\n```\r\n\r\nTest with HTTP/1.1 and fix from #13340:\r\n\r\n```\r\nhttp_body called at 1 time. Callback call is  expected\r\nReturn pause\r\nGoing to resume transfer\r\nhttp_body called at 2 time. Callback call is  expected\r\nReturn abort\r\n* client returned ERROR on write of 205 bytes\r\nResumed\r\n* Connection #0 to host httpbin.org left intact\r\nConnection finished: Failed writing received data to disk/application\r\n```\r\n\r\nSo, the fix #13340 for initial problem works as expected.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049511332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049516787","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049516787","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049516787,"node_id":"IC_kwDOAAiu0c56KSTz","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T11:45:33Z","updated_at":"2024-04-11T11:45:33Z","body":"Ok, thanks. Just wanted to be certain what I am looking at.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049516787/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049527751","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049527751","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049527751,"node_id":"IC_kwDOAAiu0c56KU_H","user":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T11:52:28Z","updated_at":"2024-04-11T11:52:28Z","body":"This output in case using HTTP/2 is unexpected for us:\r\n\r\n```\r\nhttp_body called at 1 time. Callback call is  expected\r\nReturn pause\r\nhttp_body called at 2 time. Callback call is NOT expected  <--- ?\r\n```\r\n\r\nWe put transfer on pause by returning `CURL_WRITEFUNC_PAUSE` from callback. After that the callback is called again immediately after return `CURL_WRITEFUNC_PAUSE` from it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049527751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049627526","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049627526","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049627526,"node_id":"IC_kwDOAAiu0c56KtWG","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T12:52:00Z","updated_at":"2024-04-11T12:52:00Z","body":"The problem seems to be that `https://httpbin.org/stream/1` delivers a 502 error with a short response content of 205 bytes. Those bytes get paused by your callback, then the transfer is done and finished and tries to get rid of the buffered data one last time.\r\n\r\nNow, the discussion is: what should curl really do here for a PAUSED transfer that is done. It seems that earlier versions just discarded the data and did not try to flush it. Not sure myself what the correct behaviour is here.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049627526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049685668","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049685668","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049685668,"node_id":"IC_kwDOAAiu0c56K7ik","user":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T13:22:50Z","updated_at":"2024-04-11T13:27:00Z","body":"It's interesting. I see the same behavior with HTTP/2 in case using `https://curl.se`.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049685668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049713431","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2049713431","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2049713431,"node_id":"IC_kwDOAAiu0c56LCUX","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T13:37:06Z","updated_at":"2024-04-11T13:37:35Z","body":"I believe it will always happen on a PAUSE when the full response had been received. If you make a larger download, I'd expect this not to happen.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2049713431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2051236811","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2051236811","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2051236811,"node_id":"IC_kwDOAAiu0c56Q2PL","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T08:07:23Z","updated_at":"2024-04-12T08:07:23Z","body":"I updated #13340 to no longer \"finish\" transfers that have received everything but are paused by the client writing. I believe this should address your issue. Happy to get feedback.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2051236811/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2053609457","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2053609457","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2053609457,"node_id":"IC_kwDOAAiu0c56Z5fx","user":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-13T10:49:49Z","updated_at":"2024-04-13T10:49:49Z","body":"@icing, now the sample works correct for HTTP/1.1 and 2. There are not extra calls of the callback. Thank you!\r\n\r\nI faced with problem with our application and haven't identified the root cause of the problem yet.\r\n\r\nI use local Caddy server to download a binary file with size 10M. All looks correct in case use HTTP/2 (HTTPS). I collected \"write\" traces.\r\n\r\n```\r\n2024-04-13 13:18:19.232,088 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:695) Start transfer id=9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n*   Trying 10.122.9.44:443...\r\n* Connected to 10.122.9.44 (10.122.9.44) port 443\r\n* ALPN: curl offers h2,http/1.1\r\n* SSL connection using TLSv1.3 / TLS_AES_128_GCM_SHA256 / [blank] / UNDEF\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: [NONE]\r\n*  start date: Apr 13 09:31:31 2024 GMT\r\n*  expire date: Apr 13 21:31:31 2024 GMT\r\n*  issuer: CN=Caddy Local Authority - ECC Intermediate\r\n*  SSL certificate verify result: unable to get local issuer certificate (20), continuing anyway.\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://10.122.9.44/f10M\r\n* [HTTP/2] [1] [:method: GET]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: 10.122.9.44]\r\n* [HTTP/2] [1] [:path: /f10M]\r\n* [HTTP/2] [1] [accept: */*]\r\n> GET /f10M HTTP/2\r\nHost: 10.122.9.44\r\nAccept: */*\r\n\r\n* Request completely sent off\r\n* [WRITE] xfer_write_resp(len=7, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=3, eos=0) -> 0\r\n< HTTP/2 200\r\n* [WRITE] cw_out, wrote 13 header bytes -> 13\r\n* [WRITE] download_write header(type=c, blen=13) -> 0\r\n* [WRITE] client_write(type=c, len=13) -> 0\r\n* [WRITE] xfer_write_resp(len=3, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=13, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=5, eos=0) -> 0\r\n< accept-ranges: bytes\r\n* [WRITE] header_collect pushed(type=1, len=22) -> 0\r\n* [WRITE] cw_out, wrote 22 header bytes -> 22\r\n* [WRITE] download_write header(type=4, blen=22) -> 0\r\n* [WRITE] client_write(type=4, len=22) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=7, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=21, eos=0) -> 0\r\n< alt-svc: h3=\":443\"; ma=2592000\r\n* [WRITE] header_collect pushed(type=1, len=32) -> 0\r\n* [WRITE] cw_out, wrote 32 header bytes -> 32\r\n* [WRITE] download_write header(type=4, blen=32) -> 0\r\n* [WRITE] client_write(type=4, len=32) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=4, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=13, eos=0) -> 0\r\n< etag: \"s95wxq68qv4\"\r\n* [WRITE] header_collect pushed(type=1, len=21) -> 0\r\n* [WRITE] cw_out, wrote 21 header bytes -> 21\r\n* [WRITE] download_write header(type=4, blen=21) -> 0\r\n* [WRITE] client_write(type=4, len=21) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=13, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=29, eos=0) -> 0\r\n< last-modified: Tue, 20 Feb 2024 16:10:38 GMT\r\n* [WRITE] header_collect pushed(type=1, len=46) -> 0\r\n* [WRITE] cw_out, wrote 46 header bytes -> 46\r\n* [WRITE] download_write header(type=4, blen=46) -> 0\r\n* [WRITE] client_write(type=4, len=46) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=6, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=5, eos=0) -> 0\r\n< server: Caddy\r\n* [WRITE] header_collect pushed(type=1, len=15) -> 0\r\n* [WRITE] cw_out, wrote 15 header bytes -> 15\r\n* [WRITE] download_write header(type=4, blen=15) -> 0\r\n* [WRITE] client_write(type=4, len=15) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=14, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=8, eos=0) -> 0\r\n< content-length: 10485760\r\n* [WRITE] header_collect pushed(type=1, len=26) -> 0\r\n* [WRITE] cw_out, wrote 26 header bytes -> 26\r\n* [WRITE] download_write header(type=4, blen=26) -> 0\r\n* [WRITE] client_write(type=4, len=26) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=4, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n* [WRITE] xfer_write_resp(len=29, eos=0) -> 0\r\n< date: Sat, 13 Apr 2024 10:18:19 GMT\r\n* [WRITE] header_collect pushed(type=1, len=37) -> 0\r\n* [WRITE] cw_out, wrote 37 header bytes -> 37\r\n* [WRITE] download_write header(type=4, blen=37) -> 0\r\n* [WRITE] client_write(type=4, len=37) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n<\r\n* [WRITE] header_collect pushed(type=1, len=2) -> 0\r\n* [WRITE] cw_out, wrote 2 header bytes -> 2\r\n* [WRITE] download_write header(type=4, blen=2) -> 0\r\n* [WRITE] client_write(type=4, len=2) -> 0\r\n* [WRITE] xfer_write_resp(len=2, eos=0) -> 0\r\n2024-04-13 13:18:19.234,128 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:357) write_via_user_callback_data_callback called for request 9b9eed01-80e9-493b-ae80-f34f437e0a68 with buffer size 5921\r\n2024-04-13 13:18:19.234,190 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:361) Get access from curl callback 9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n* [WRITE] cw_out, wrote 5921 body bytes -> 5921\r\n* [WRITE] download_write body(type=1, blen=5921) -> 0\r\n* [WRITE] client_write(type=1, len=5921) -> 0\r\n* [WRITE] xfer_write_resp(len=5921, eos=0) -> 0\r\n2024-04-13 13:18:19.234,447 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:357) write_via_user_callback_data_callback called for request 9b9eed01-80e9-493b-ae80-f34f437e0a68 with buffer size 7116\r\n2024-04-13 13:18:19.234,503 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:361) Get access from curl callback 9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n2024-04-13 13:18:19.234,561 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:389) Called before get result of the previous call 9b9eed01-80e9-493b-ae80-f34f437e0a68. Reminder size is 0\r\n2024-04-13 13:18:19.234,622 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:394) Pause request 9b9eed01-80e9-493b-ae80-f34f437e0a68 due to cache size limit\r\n* [WRITE] cw_out, wrote 7116 body bytes -> 268435457\r\n* [WRITE] cw_out, PAUSE requested by client\r\n* [WRITE] download_write body(type=1, blen=7116) -> 0\r\n* [WRITE] client_write(type=1, len=7116) -> 0\r\n* [WRITE] xfer_write_resp(len=7116, eos=0) -> 0\r\n* [WRITE] download_write body(type=1, blen=3347) -> 0\r\n* [WRITE] client_write(type=1, len=3347) -> 0\r\n* [WRITE] xfer_write_resp(len=3347, eos=0) -> 0\r\n2024-04-13 13:18:19.255,546 <7F86B884A840> [DEBUG] (transfer_handler.cpp:417) Get data receive callback result for 9b9eed01-80e9-493b-ae80-f34f437e0a68 Want to abort\r\n2024-04-13 13:18:19.255,585 <7F86B884A840> [DEBUG] (transfer_handler.cpp:421) Get access from user callback 9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n2024-04-13 13:18:19.255,622 <7F86B884A840> [DEBUG] (transfer_handler.cpp:427) Going to resume 9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n2024-04-13 13:18:19.255,730 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:684) Resume receiving request 9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n* [WRITE] cw-out unpause\r\n2024-04-13 13:18:19.255,788 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:357) write_via_user_callback_data_callback called for request 9b9eed01-80e9-493b-ae80-f34f437e0a68 with buffer size 10463\r\n2024-04-13 13:18:19.255,837 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:361) Get access from curl callback 9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n2024-04-13 13:18:19.255,897 <7F8690DC4700> [WARN ] (transfer_handler.cpp:380) Abort request 9b9eed01-80e9-493b-ae80-f34f437e0a68 due to Want to abort\r\n* [WRITE] cw_out, wrote 10463 body bytes -> 4294967295\r\n* client returned ERROR on write of 10463 bytes\r\n* [WRITE] download_write body(type=1, blen=9479) -> 23\r\n* [WRITE] client_write(type=1, len=9479) -> 23\r\n* [WRITE] xfer_write_resp(len=9479, eos=0) -> 23\r\n* [WRITE] download_write body(type=1, blen=6905) -> 23\r\n* [WRITE] client_write(type=1, len=6905) -> 23\r\n* [WRITE] xfer_write_resp(len=6905, eos=0) -> 23\r\n* HTTP/2 stream 1 was not closed cleanly: unknown (err 4294966394)\r\n* [WRITE] cw-out done\r\n* Connection #0 to host 10.122.9.44 left intact\r\n2024-04-13 13:18:19.256,133 <7F8690DC4700> [DEBUG] (transfer_handler.cpp:610) Done id=9b9eed01-80e9-493b-ae80-f34f437e0a68\r\n```\r\n\r\nAfter abort the transfer I see `[WRITE] cw-out done` immediatly and transfer is finished with `Stream error in the HTTP/2 framing layer` result.\r\n\r\nIn case I use HTTP/1.1 (HTTP instead of HTTPS to force switch to 1.1) then I see that `[WRITE] cw-out done` appears after 30 seconds and trasnfer is finished with `Failed writing received data to disk/application` result.\r\n\r\n```\r\n2024-04-13 13:25:24.112,526 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:695) Start transfer id=3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n*   Trying 10.122.9.44:80...\r\n* Connected to 10.122.9.44 (10.122.9.44) port 80\r\n> GET /f10M HTTP/1.1\r\nHost: 10.122.9.44\r\nAccept: */*\r\n\r\n* Request completely sent off\r\n< HTTP/1.1 200 OK\r\n* [WRITE] cw_out, wrote 17 header bytes -> 17\r\n* [WRITE] download_write header(type=c, blen=17) -> 0\r\n* [WRITE] client_write(type=c, len=17) -> 0\r\n< Accept-Ranges: bytes\r\n* [WRITE] header_collect pushed(type=1, len=22) -> 0\r\n* [WRITE] cw_out, wrote 22 header bytes -> 22\r\n* [WRITE] download_write header(type=4, blen=22) -> 0\r\n* [WRITE] client_write(type=4, len=22) -> 0\r\n< Content-Length: 10485760\r\n* [WRITE] header_collect pushed(type=1, len=26) -> 0\r\n* [WRITE] cw_out, wrote 26 header bytes -> 26\r\n* [WRITE] download_write header(type=4, blen=26) -> 0\r\n* [WRITE] client_write(type=4, len=26) -> 0\r\n< Etag: \"s95wxq68qv4\"\r\n* [WRITE] header_collect pushed(type=1, len=21) -> 0\r\n* [WRITE] cw_out, wrote 21 header bytes -> 21\r\n* [WRITE] download_write header(type=4, blen=21) -> 0\r\n* [WRITE] client_write(type=4, len=21) -> 0\r\n< Last-Modified: Tue, 20 Feb 2024 16:10:38 GMT\r\n* [WRITE] header_collect pushed(type=1, len=46) -> 0\r\n* [WRITE] cw_out, wrote 46 header bytes -> 46\r\n* [WRITE] download_write header(type=4, blen=46) -> 0\r\n* [WRITE] client_write(type=4, len=46) -> 0\r\n< Server: Caddy\r\n* [WRITE] header_collect pushed(type=1, len=15) -> 0\r\n* [WRITE] cw_out, wrote 15 header bytes -> 15\r\n* [WRITE] download_write header(type=4, blen=15) -> 0\r\n* [WRITE] client_write(type=4, len=15) -> 0\r\n< Date: Sat, 13 Apr 2024 10:25:24 GMT\r\n* [WRITE] header_collect pushed(type=1, len=37) -> 0\r\n* [WRITE] cw_out, wrote 37 header bytes -> 37\r\n* [WRITE] download_write header(type=4, blen=37) -> 0\r\n* [WRITE] client_write(type=4, len=37) -> 0\r\n<\r\n* [WRITE] header_collect pushed(type=1, len=2) -> 0\r\n* [WRITE] cw_out, wrote 2 header bytes -> 2\r\n* [WRITE] download_write header(type=4, blen=2) -> 0\r\n* [WRITE] client_write(type=4, len=2) -> 0\r\n2024-04-13 13:25:24.113,186 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:357) write_via_user_callback_data_callback called for request 3d81db38-f708-4ebb-a01e-5aec025eb7c8 with buffer size 512\r\n2024-04-13 13:25:24.113,249 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:361) Get access from curl callback 3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n* [WRITE] cw_out, wrote 512 body bytes -> 512\r\n* [WRITE] download_write body(type=1, blen=512) -> 0\r\n* [WRITE] client_write(type=1, len=512) -> 0\r\n* [WRITE] xfer_write_resp(len=698, eos=0) -> 0\r\n2024-04-13 13:25:24.113,425 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:357) write_via_user_callback_data_callback called for request 3d81db38-f708-4ebb-a01e-5aec025eb7c8 with buffer size 16384\r\n2024-04-13 13:25:24.113,489 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:361) Get access from curl callback 3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n2024-04-13 13:25:24.113,546 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:389) Called before get result of the previous call 3d81db38-f708-4ebb-a01e-5aec025eb7c8. Reminder size is 0\r\n2024-04-13 13:25:24.113,592 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:394) Pause request 3d81db38-f708-4ebb-a01e-5aec025eb7c8 due to cache size limit\r\n* [WRITE] cw_out, wrote 16384 body bytes -> 268435457\r\n* [WRITE] cw_out, PAUSE requested by client\r\n* [WRITE] download_write body(type=1, blen=16384) -> 0\r\n* [WRITE] client_write(type=1, len=16384) -> 0\r\n* [WRITE] xfer_write_resp(len=16384, eos=0) -> 0\r\n2024-04-13 13:25:24.134,453 <7F6B75F6D840> [DEBUG] (transfer_handler.cpp:417) Get data receive callback result for 3d81db38-f708-4ebb-a01e-5aec025eb7c8 Want to abort\r\n2024-04-13 13:25:24.134,489 <7F6B75F6D840> [DEBUG] (transfer_handler.cpp:421) Get access from user callback 3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n2024-04-13 13:25:24.134,525 <7F6B75F6D840> [DEBUG] (transfer_handler.cpp:427) Going to resume 3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n2024-04-13 13:25:24.134,614 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:684) Resume receiving request 3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n* [WRITE] cw-out unpause\r\n2024-04-13 13:25:24.134,663 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:357) write_via_user_callback_data_callback called for request 3d81db38-f708-4ebb-a01e-5aec025eb7c8 with buffer size 16384\r\n2024-04-13 13:25:24.134,699 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:361) Get access from curl callback 3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n2024-04-13 13:25:24.134,741 <7F6B4E475700> [WARN ] (transfer_handler.cpp:380) Abort request 3d81db38-f708-4ebb-a01e-5aec025eb7c8 due to Want to abort\r\n* [WRITE] cw_out, wrote 16384 body bytes -> 4294967295\r\n* client returned ERROR on write of 16384 bytes\r\n\r\n<--- By some reason gets stuck 30 seconds here --->\r\n\r\n* [WRITE] download_write body(type=1, blen=16384) -> 23\r\n* [WRITE] client_write(type=1, len=16384) -> 23\r\n* [WRITE] xfer_write_resp(len=16384, eos=0) -> 23\r\n* [WRITE] cw-out done\r\n* Closing connection\r\n2024-04-13 13:25:54.113,088 <7F6B4E475700> [DEBUG] (transfer_handler.cpp:610) Done id=3d81db38-f708-4ebb-a01e-5aec025eb7c8\r\n```\r\n\r\nAt the moment I don't have any ideas why it happens. So, I need a bit more time to understand why it's happening.\r\n\r\nCould you please share if there is some place in `libcurl` that potentially can \"return\" `cw-out done` after a while due to waiting something?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2053609457/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12457610404,"node_id":"MEE_lADOAAiu0c6FPBtgzwAAAALmiAyk","url":"https://api.github.com/repos/curl/curl/issues/events/12457610404","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-13T10:49:50Z","performed_via_github_app":null},{"id":12457610410,"node_id":"SE_lADOAAiu0c6FPBtgzwAAAALmiAyq","url":"https://api.github.com/repos/curl/curl/issues/events/12457610410","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-13T10:49:50Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2056248503","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2056248503","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2056248503,"node_id":"IC_kwDOAAiu0c56j9y3","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-15T08:47:27Z","updated_at":"2024-04-15T08:47:27Z","body":"Interesting application you have there. I updated #13340 again to take care of the situation where `curl_easy_pause()` errors (due to client write failures), but the application keeps the transfer going.\r\n\r\nNow, the actual unpaused writes happen during \"normal\" transfer processing and lead to a failed transfer as they should. Thus, `curl_easy_pause()` no longer reports the error from the write callback.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2056248503/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12467752059,"node_id":"REFE_lADOAAiu0c6FPBtgzwAAAALnIsx7","url":"https://api.github.com/repos/curl/curl/issues/events/12467752059","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6b028624b98c5edfdb9ca0fe6ec13be18abc8b66","commit_url":"https://api.github.com/repos/icing/curl/commits/6b028624b98c5edfdb9ca0fe6ec13be18abc8b66","created_at":"2024-04-15T11:00:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2058486577","html_url":"https://github.com/curl/curl/issues/13337#issuecomment-2058486577","issue_url":"https://api.github.com/repos/curl/curl/issues/13337","id":2058486577,"node_id":"IC_kwDOAAiu0c56sgMx","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-16T08:06:02Z","updated_at":"2024-04-16T08:06:02Z","body":"@pkropachev it would be nice to know how the updated PR works for you. Thanks.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2058486577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12484628130,"node_id":"MEE_lADOAAiu0c6FPBtgzwAAAALoJE6i","url":"https://api.github.com/repos/curl/curl/issues/events/12484628130","actor":{"login":"pkropachev","id":34160907,"node_id":"MDQ6VXNlcjM0MTYwOTA3","avatar_url":"https://avatars.githubusercontent.com/u/34160907?v=4","gravatar_id":"","url":"https://api.github.com/users/pkropachev","html_url":"https://github.com/pkropachev","followers_url":"https://api.github.com/users/pkropachev/followers","following_url":"https://api.github.com/users/pkropachev/following{/other_user}","gists_url":"https://api.github.com/users/pkropachev/gists{/gist_id}","starred_url":"https://api.github.com/users/pkropachev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pkropachev/subscriptions","organizations_url":"https://api.github.com/users/pkropachev/orgs","repos_url":"https://api.github.com/users/pkropachev/repos","events_url":"https://api.github.com/users/pkropachev/events{/privacy}","received_events_url":"https://api.github.com/users/pkropachev/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-16T08:06:04Z","performed_via_github_app":null}]