[{"id":7446554730,"node_id":"RTE_lADOAAiu0c5SePrGzwAAAAG72Whq","url":"https://api.github.com/repos/curl/curl/issues/events/7446554730","actor":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2022-09-23T11:24:45Z","rename":{"from":"LDAPS requests to ActiveDirectory server hand until timeout","to":"LDAPS requests to ActiveDirectory server hang until timeout"},"performed_via_github_app":null},{"id":7446735994,"node_id":"LE_lADOAAiu0c5SePrGzwAAAAG73Cx6","url":"https://api.github.com/repos/curl/curl/issues/events/7446735994","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-09-23T11:54:49Z","label":{"name":"LDAP","color":"006b75"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1257076939","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1257076939","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1257076939,"node_id":"IC_kwDOAAiu0c5K7XjL","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-24T22:38:33Z","updated_at":"2022-09-24T22:38:33Z","body":"Unfortunately, LDAP(S) is not being verified in the curl test suite at all while also being little used, so regressions happen. I don't even know an LDAPS server to try your URL against in order to try to reproduce.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1257076939/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":7452682264,"node_id":"LE_lADOAAiu0c5SePrGzwAAAAG8NugY","url":"https://api.github.com/repos/curl/curl/issues/events/7452682264","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-09-24T22:38:39Z","label":{"name":"regression","color":"33aa3f"},"performed_via_github_app":null},{"id":7452682512,"node_id":"LE_lADOAAiu0c5SePrGzwAAAAG8NukQ","url":"https://api.github.com/repos/curl/curl/issues/events/7452682512","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-09-24T22:39:01Z","label":{"name":"help wanted","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1258990136","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1258990136","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1258990136,"node_id":"IC_kwDOAAiu0c5LCqo4","user":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-27T05:18:16Z","updated_at":"2022-09-27T05:19:24Z","body":"if you can give me an ip address from which you will connect, than I can give you access to one of our test AD server.\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1258990136/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1295379192","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1295379192","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1295379192,"node_id":"IC_kwDOAAiu0c5NNer4","user":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-28T19:34:17Z","updated_at":"2022-10-28T19:34:17Z","body":"Maybe try another ssl implementation for that client. i.e. take a Linux and try different precompiled curls with docker.\r\n\r\nAlone finding an affected pre-compiled binary will allow you to start talking to Microsoft as well and give them a way to repro without a need to compile \"your binary\".\r\n\r\nAnd you might get more insights on which combination broke things and which component is really to blame. Might not be curl at all.\r\n\r\nIncrease the log level of that server and dig into the logs. Maybe take a decrypted pcap. That can later be shown to others that might want to help, and you can compare the network packages from the \"good old\" with the \"bad new\" and maybe get a clue what might confuse that server.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1295379192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1295405309","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1295405309","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1295405309,"node_id":"IC_kwDOAAiu0c5NNlD9","user":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-10-28T19:53:37Z","updated_at":"2022-10-28T19:53:37Z","body":"And given you have a working and a not-working version you can simply \"git bisect\" and might be able to say which commit introduced your problem. Maybe that commit will give the clue on what might be going on.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1295405309/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1318086310","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1318086310","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1318086310,"node_id":"IC_kwDOAAiu0c5OkGam","user":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-17T05:10:40Z","updated_at":"2022-11-17T05:10:40Z","body":"I will debug it, as soon as I have time","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1318086310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1365876723","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1365876723","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1365876723,"node_id":"IC_kwDOAAiu0c5RaZ_z","user":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-27T12:46:17Z","updated_at":"2022-12-27T12:46:17Z","body":"New information about the problem (testet with the cURL version 7.87.0:\r\n\r\nIt seems, that LDAP and LDAPS only works, if the server closes the connection after the request.\r\n\r\nIf I make a LDAP request to the server, then the server closes the connection after the request and cURL gets the response.\r\nIf I make the same request as LDAPS request, then the server sends the response (all expectet data where received), but the server let the connection open. cURL waits in this situation until the configured timeout.\r\n\r\nIt seems that cURL depends on the connection close of the server. I think thats wrong. The end of the LDAP search request is the LDAP searchResDone message. This should be the end of the request and not the end of the connection. \r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1365876723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1370974737","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1370974737","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1370974737,"node_id":"IC_kwDOAAiu0c5Rt2oR","user":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T14:09:26Z","updated_at":"2023-01-04T14:09:26Z","body":"I've debugged the problem and I can tell you more details of what happens.\r\n\r\nHere a summary of a Wireshark trace which contains the problem:\r\n\r\nTLSv1.2\t571\tClient Hello\r\nTLSv1.2\t247\tServer Hello, Change Cipher Spec, Finished\r\nTLSv1.2\t161\tChange Cipher Spec, Finished\r\nLDAP\t219\tbindRequest(1) \"CN=*************,CN=*****,dc=************,dc=******,dc=*****\" simple \r\nLDAP\t155\tbindResponse(1) success \r\nLDAP\t251\tsearchRequest(2) \"dc=************,dc=******,dc=*****\" wholeSubtree \r\nLDAP\t355\tsearchResEntry(2) \"CN=*************,CN=*****,DC=************,DC=******,DC=*****\"  | searchResRef(2)  | searchResRef(2)  | searchResRef(2)  | searchResDone(2) success  [1 result]\r\n\r\nIn the first three lines of the trace the ssl connection is established.\r\nThen a LDAP bindRequest with bindResponse success follows.\r\nThen the LDAP searchRequest is sent.\r\nThe response of the searchRequest is a packet with 5 LDAP packets: \r\nThe search result searchResEntry, followed by three referrals searchResRef, followed by the successful end of the search request searchResDone.\r\n\r\nI had a breakpoint in the file openldap.c at the beginning of the function oldap_recv() and checkt the return value of the call \r\nrc = ldap_result(li->ld, lr->msgid, LDAP_MSG_ONE, &tv, &msg);\r\n\r\nldap_result() rc -> 0x61   LDAP_RES_BIND           bindResponse\r\nldap_result() rc -> 0x64   LDAP_RES_SEARCH_ENTRY   searchResEntry\r\n\r\nafter the first paket (searchResEntry) of the 5 packets of the last response, oldap_recv() and ldap_result() are never called.\r\nThe last 4 packets of the result remain in the LDAP queue.\r\nThere are continous calls of Curl_readwrite(), but with no effect. The call dont check the already received data.\r\n\r\nOnly if the timout occur or if I manually close the connection with Sysinternals Tcpview, than the last packets in the \r\nLDAP queue are reached\r\n\r\nldap_result() rc -> 0x73   LDAP_RES_SEARCH_REFERENCE\r\nldap_result() rc -> 0x73   LDAP_RES_SEARCH_REFERENCE\r\nldap_result() rc -> 0x73   LDAP_RES_SEARCH_REFERENCE\r\nldap_result() rc -> 0x65   LDAP_RES_SEARCH_RESULT\r\n\r\nI think the real problem is, that if a ldap packet contains more than one ldap packets, than only the first is processed.\r\n\r\nI dont know the cURL code good enough to fix the problem. I hope, the information helps you to fix the problem.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1370974737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1371349916","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1371349916","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1371349916,"node_id":"IC_kwDOAAiu0c5RvSOc","user":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-04T19:49:24Z","updated_at":"2023-01-04T19:49:24Z","body":"I might be able to run such a call against an AD LDAP setup i have access to, if i could repro i could maybe help.\r\n\r\nCan you please provide the exact cmdline you are using, for the bits you might have to mask please point out what example values might be. And please include all context such as kerberos `kinit` or whatever might be needed to auth. In my setup i would need to use kerberos.\r\n\r\nAnd maybe make sure to format code blocks with markdown with https://www.markdownguide.org/extended-syntax/#fenced-code-blocks and edit the comments you already did send.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1371349916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1378754764","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1378754764","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1378754764,"node_id":"IC_kwDOAAiu0c5SLiDM","user":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T13:29:36Z","updated_at":"2023-01-11T13:29:36Z","body":"I found the problem that caused the hanging ldaps connection in the file transfer.c in the function Curl_readwrite().\r\n\r\nThe function seems only to check if there are data pending on the socket and ignores already received data. So I forced the call of the function readwrite_data() with the following line:\r\n\r\n``` c\r\n  select_res |= CURL_CSELECT_IN;\r\n```\r\n\r\nI know, that is probably not the best solution, but it solves the problem with hanging ldaps connections.\r\nPlease consider the use of this change or make a similar change that checks also the received buffers and not \r\nonly the pending data on the socket.\r\n\r\nHere is the complete changed function. I've marked my change with ! Change START ! and ! Change END !\r\n\r\n``` c\r\nCURLcode Curl_readwrite(struct connectdata *conn,\r\n                        struct Curl_easy *data,\r\n                        bool *done,\r\n                        bool *comeback)\r\n{\r\n  struct SingleRequest *k = &data->req;\r\n  CURLcode result;\r\n  int didwhat = 0;\r\n\r\n  curl_socket_t fd_read;\r\n  curl_socket_t fd_write;\r\n  int select_res = conn->cselect_bits;\r\n\r\n  conn->cselect_bits = 0;\r\n\r\n  /* only use the proper socket if the *_HOLD bit is not set simultaneously as\r\n     then we are in rate limiting state in that transfer direction */\r\n\r\n  if((k->keepon & KEEP_RECVBITS) == KEEP_RECV)\r\n    fd_read = conn->sockfd;\r\n  else\r\n    fd_read = CURL_SOCKET_BAD;\r\n\r\n  if((k->keepon & KEEP_SENDBITS) == KEEP_SEND)\r\n    fd_write = conn->writesockfd;\r\n  else\r\n    fd_write = CURL_SOCKET_BAD;\r\n\r\n#if defined(USE_HTTP2) || defined(USE_HTTP3)\r\n  if(data->state.drain) {\r\n    select_res |= CURL_CSELECT_IN;\r\n    DEBUGF(infof(data, \"Curl_readwrite: forcibly told to drain data\"));\r\n  }\r\n#endif\r\n\r\n  if(!select_res) /* Call for select()/poll() only, if read/write/error\r\n                     status is not known. */\r\n    select_res = Curl_socket_check(fd_read, CURL_SOCKET_BAD, fd_write, 0);\r\n\r\n  if(select_res == CURL_CSELECT_ERR) {\r\n    failf(data, \"select/poll returned error\");\r\n    result = CURLE_SEND_ERROR;\r\n    goto out;\r\n  }\r\n\r\n#ifdef USE_HYPER\r\n  if(conn->datastream) {\r\n    result = conn->datastream(data, conn, &didwhat, done, select_res);\r\n    if(result || *done)\r\n      goto out;\r\n  }\r\n  else {\r\n#endif\r\n\r\n  /* ! Change START ! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n     The functions above does not check if there are data in some buffers, in case of \r\n     LDAPS requests to an active directory server and the use of OpenLDAP and OpenSSL\r\n     the data in the buffers are only checked within the readwrite_data function below.\r\n     so the call of the readwrite_data function is forced. If the call of the \r\n     readwrite_data function is not forced, then the connection can hang until timeout.   */\r\n\r\n  select_res |= CURL_CSELECT_IN;\r\n\r\n  /* ! Change END ! @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ */\r\n\r\n  /* We go ahead and do a read if we have a readable socket or if\r\n     the stream was rewound (in which case we have data in a\r\n     buffer) */\r\n\r\n  if((k->keepon & KEEP_RECV) && (select_res & CURL_CSELECT_IN)) {\r\n    result = readwrite_data(data, conn, k, &didwhat, done, comeback);\r\n    if(result || *done)\r\n      goto out;\r\n  }\r\n\r\n  /* If we still have writing to do, we check if we have a writable socket. */\r\n  if((k->keepon & KEEP_SEND) && (select_res & CURL_CSELECT_OUT)) {\r\n    /* write */\r\n\r\n    result = readwrite_upload(data, conn, &didwhat);\r\n    if(result)\r\n      goto out;\r\n  }\r\n#ifdef USE_HYPER\r\n  }\r\n#endif\r\n\r\n  k->now = Curl_now();\r\n  if(!didwhat) {\r\n    /* no read no write, this is a timeout? */\r\n    if(k->exp100 == EXP100_AWAITING_CONTINUE) {\r\n      /* This should allow some time for the header to arrive, but only a\r\n         very short time as otherwise it'll be too much wasted time too\r\n         often. */\r\n\r\n      /* Quoting RFC2616, section \"8.2.3 Use of the 100 (Continue) Status\":\r\n\r\n         Therefore, when a client sends this header field to an origin server\r\n         (possibly via a proxy) from which it has never seen a 100 (Continue)\r\n         status, the client SHOULD NOT wait for an indefinite period before\r\n         sending the request body.\r\n\r\n      */\r\n\r\n      timediff_t ms = Curl_timediff(k->now, k->start100);\r\n      if(ms >= data->set.expect_100_timeout) {\r\n        /* we've waited long enough, continue anyway */\r\n        k->exp100 = EXP100_SEND_DATA;\r\n        k->keepon |= KEEP_SEND;\r\n        Curl_expire_done(data, EXPIRE_100_TIMEOUT);\r\n        infof(data, \"Done waiting for 100-continue\");\r\n      }\r\n    }\r\n\r\n#ifdef ENABLE_QUIC\r\n    if(conn->transport == TRNSPRT_QUIC) {\r\n      result = Curl_quic_idle(data);\r\n      if(result)\r\n        goto out;\r\n    }\r\n#endif\r\n  }\r\n\r\n  if(Curl_pgrsUpdate(data))\r\n    result = CURLE_ABORTED_BY_CALLBACK;\r\n  else\r\n    result = Curl_speedcheck(data, k->now);\r\n  if(result)\r\n    goto out;\r\n\r\n  if(k->keepon) {\r\n    if(0 > Curl_timeleft(data, &k->now, FALSE)) {\r\n      if(k->size != -1) {\r\n        failf(data, \"Operation timed out after %\" CURL_FORMAT_TIMEDIFF_T\r\n              \" milliseconds with %\" CURL_FORMAT_CURL_OFF_T \" out of %\"\r\n              CURL_FORMAT_CURL_OFF_T \" bytes received\",\r\n              Curl_timediff(k->now, data->progress.t_startsingle),\r\n              k->bytecount, k->size);\r\n      }\r\n      else {\r\n        failf(data, \"Operation timed out after %\" CURL_FORMAT_TIMEDIFF_T\r\n              \" milliseconds with %\" CURL_FORMAT_CURL_OFF_T \" bytes received\",\r\n              Curl_timediff(k->now, data->progress.t_startsingle),\r\n              k->bytecount);\r\n      }\r\n      result = CURLE_OPERATION_TIMEDOUT;\r\n      goto out;\r\n    }\r\n  }\r\n  else {\r\n    /*\r\n     * The transfer has been performed. Just make some general checks before\r\n     * returning.\r\n     */\r\n\r\n    if(!(data->req.no_body) && (k->size != -1) &&\r\n       (k->bytecount != k->size) &&\r\n#ifdef CURL_DO_LINEEND_CONV\r\n       /* Most FTP servers don't adjust their file SIZE response for CRLFs,\r\n          so we'll check to see if the discrepancy can be explained\r\n          by the number of CRLFs we've changed to LFs.\r\n       */\r\n       (k->bytecount != (k->size + data->state.crlf_conversions)) &&\r\n#endif /* CURL_DO_LINEEND_CONV */\r\n       !k->newurl) {\r\n      failf(data, \"transfer closed with %\" CURL_FORMAT_CURL_OFF_T\r\n            \" bytes remaining to read\", k->size - k->bytecount);\r\n      result = CURLE_PARTIAL_FILE;\r\n      goto out;\r\n    }\r\n    if(!(data->req.no_body) && k->chunk &&\r\n       (conn->chunk.state != CHUNK_STOP)) {\r\n      /*\r\n       * In chunked mode, return an error if the connection is closed prior to\r\n       * the empty (terminating) chunk is read.\r\n       *\r\n       * The condition above used to check for\r\n       * conn->proto.http->chunk.datasize != 0 which is true after reading\r\n       * *any* chunk, not just the empty chunk.\r\n       *\r\n       */\r\n      failf(data, \"transfer closed with outstanding read data remaining\");\r\n      result = CURLE_PARTIAL_FILE;\r\n      goto out;\r\n    }\r\n    if(Curl_pgrsUpdate(data)) {\r\n      result = CURLE_ABORTED_BY_CALLBACK;\r\n      goto out;\r\n    }\r\n  }\r\n\r\n  /* Now update the \"done\" boolean we return */\r\n  *done = (0 == (k->keepon&(KEEP_RECV|KEEP_SEND|\r\n                            KEEP_RECV_PAUSE|KEEP_SEND_PAUSE))) ? TRUE : FALSE;\r\n  result = CURLE_OK;\r\nout:\r\n  DEBUGF(infof(data, \"Curl_readwrite(handle=%p) -> %d\", data, result));\r\n  return result;\r\n}\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1378754764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Wolfgang29","id":114228351,"node_id":"U_kgDOBs78fw","avatar_url":"https://avatars.githubusercontent.com/u/114228351?v=4","gravatar_id":"","url":"https://api.github.com/users/Wolfgang29","html_url":"https://github.com/Wolfgang29","followers_url":"https://api.github.com/users/Wolfgang29/followers","following_url":"https://api.github.com/users/Wolfgang29/following{/other_user}","gists_url":"https://api.github.com/users/Wolfgang29/gists{/gist_id}","starred_url":"https://api.github.com/users/Wolfgang29/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Wolfgang29/subscriptions","organizations_url":"https://api.github.com/users/Wolfgang29/orgs","repos_url":"https://api.github.com/users/Wolfgang29/repos","events_url":"https://api.github.com/users/Wolfgang29/events{/privacy}","received_events_url":"https://api.github.com/users/Wolfgang29/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1379404967","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1379404967","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1379404967,"node_id":"IC_kwDOAAiu0c5SOAyn","user":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-11T19:53:17Z","updated_at":"2023-01-11T19:53:17Z","body":"Cool. I guess it would make some sense to make that a commit to push to a fork and open a pull-request in this repo. That might get the whole story some attention and which patch gets merged in the end remains to be seen. Dumping diffs and code into comments of an issue will not have that same impact.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1379404967/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"henning-schild","id":7237877,"node_id":"MDQ6VXNlcjcyMzc4Nzc=","avatar_url":"https://avatars.githubusercontent.com/u/7237877?v=4","gravatar_id":"","url":"https://api.github.com/users/henning-schild","html_url":"https://github.com/henning-schild","followers_url":"https://api.github.com/users/henning-schild/followers","following_url":"https://api.github.com/users/henning-schild/following{/other_user}","gists_url":"https://api.github.com/users/henning-schild/gists{/gist_id}","starred_url":"https://api.github.com/users/henning-schild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/henning-schild/subscriptions","organizations_url":"https://api.github.com/users/henning-schild/orgs","repos_url":"https://api.github.com/users/henning-schild/repos","events_url":"https://api.github.com/users/henning-schild/events{/privacy}","received_events_url":"https://api.github.com/users/henning-schild/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1380736022","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1380736022","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1380736022,"node_id":"IC_kwDOAAiu0c5STFwW","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-01-12T17:08:07Z","updated_at":"2023-01-12T17:08:07Z","body":"I would suspect that maybe `data_pending()` is the actual function that needs attention to drain the data properly...","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1380736022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10082820342,"node_id":"LE_lADOAAiu0c5SePrGzwAAAAJY-6D2","url":"https://api.github.com/repos/curl/curl/issues/events/10082820342","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-08-14T07:06:01Z","label":{"name":"KNOWN_BUGS material","color":"d93f0b"},"performed_via_github_app":null},{"id":10096485840,"node_id":"CE_lADOAAiu0c5SePrGzwAAAAJZzCXQ","url":"https://api.github.com/repos/curl/curl/issues/events/10096485840","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ce254fa96fc7e3c6187f8439cc4cf4152be4eee3","commit_url":"https://api.github.com/repos/curl/curl/commits/ce254fa96fc7e3c6187f8439cc4cf4152be4eee3","created_at":"2023-08-15T12:21:44Z","state_reason":null,"performed_via_github_app":null},{"id":10459075010,"node_id":"REFE_lADOAAiu0c5SePrGzwAAAAJvaNHC","url":"https://api.github.com/repos/curl/curl/issues/events/10459075010","actor":{"login":"ptitSeb","id":3250792,"node_id":"MDQ6VXNlcjMyNTA3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3250792?v=4","gravatar_id":"","url":"https://api.github.com/users/ptitSeb","html_url":"https://github.com/ptitSeb","followers_url":"https://api.github.com/users/ptitSeb/followers","following_url":"https://api.github.com/users/ptitSeb/following{/other_user}","gists_url":"https://api.github.com/users/ptitSeb/gists{/gist_id}","starred_url":"https://api.github.com/users/ptitSeb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptitSeb/subscriptions","organizations_url":"https://api.github.com/users/ptitSeb/orgs","repos_url":"https://api.github.com/users/ptitSeb/repos","events_url":"https://api.github.com/users/ptitSeb/events{/privacy}","received_events_url":"https://api.github.com/users/ptitSeb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"cf2667955c831630a4e0410273b9593c116b98db","commit_url":"https://api.github.com/repos/wasix-org/curl/commits/cf2667955c831630a4e0410273b9593c116b98db","created_at":"2023-09-25T08:05:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867538221","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1867538221","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1867538221,"node_id":"IC_kwDOAAiu0c5vUF8t","user":{"login":"ozancsl","id":133976781,"node_id":"U_kgDOB_xSzQ","avatar_url":"https://avatars.githubusercontent.com/u/133976781?v=4","gravatar_id":"","url":"https://api.github.com/users/ozancsl","html_url":"https://github.com/ozancsl","followers_url":"https://api.github.com/users/ozancsl/followers","following_url":"https://api.github.com/users/ozancsl/following{/other_user}","gists_url":"https://api.github.com/users/ozancsl/gists{/gist_id}","starred_url":"https://api.github.com/users/ozancsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozancsl/subscriptions","organizations_url":"https://api.github.com/users/ozancsl/orgs","repos_url":"https://api.github.com/users/ozancsl/repos","events_url":"https://api.github.com/users/ozancsl/events{/privacy}","received_events_url":"https://api.github.com/users/ozancsl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T10:50:31Z","updated_at":"2023-12-22T11:15:14Z","body":"Is there any progress with this issue? I am having the same problem as well. I am planning to integrate active-directory to my application with curl but this issue blocks me.\r\n\r\nIt fetches the query result properly and hangs until it timeouts.\r\n\r\nBtw, ldap requests are working fine. Only ldaps hangs.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867538221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ozancsl","id":133976781,"node_id":"U_kgDOB_xSzQ","avatar_url":"https://avatars.githubusercontent.com/u/133976781?v=4","gravatar_id":"","url":"https://api.github.com/users/ozancsl","html_url":"https://github.com/ozancsl","followers_url":"https://api.github.com/users/ozancsl/followers","following_url":"https://api.github.com/users/ozancsl/following{/other_user}","gists_url":"https://api.github.com/users/ozancsl/gists{/gist_id}","starred_url":"https://api.github.com/users/ozancsl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ozancsl/subscriptions","organizations_url":"https://api.github.com/users/ozancsl/orgs","repos_url":"https://api.github.com/users/ozancsl/repos","events_url":"https://api.github.com/users/ozancsl/events{/privacy}","received_events_url":"https://api.github.com/users/ozancsl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867833365","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-1867833365","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":1867833365,"node_id":"IC_kwDOAAiu0c5vVOAV","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T15:47:39Z","updated_at":"2023-12-22T15:47:39Z","body":"Our `KNOWN_BUGS` document contains 67 issues right now. They are listed there because they are bugs we know exist in current curl. That list includes this issue. I have not seen anyone even try to work on this yet. Feel free to do so!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867833365/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11664610968,"node_id":"REFE_lADOAAiu0c5SePrGzwAAAAK3Q9aY","url":"https://api.github.com/repos/curl/curl/issues/events/11664610968","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ce254fa96fc7e3c6187f8439cc4cf4152be4eee3","commit_url":"https://api.github.com/repos/webfutureiorepo/curl/commits/ce254fa96fc7e3c6187f8439cc4cf4152be4eee3","created_at":"2024-02-01T05:09:51Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2330928069","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-2330928069","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":2330928069,"node_id":"IC_kwDOAAiu0c6K7yPF","user":{"login":"claires20080808","id":44636074,"node_id":"MDQ6VXNlcjQ0NjM2MDc0","avatar_url":"https://avatars.githubusercontent.com/u/44636074?v=4","gravatar_id":"","url":"https://api.github.com/users/claires20080808","html_url":"https://github.com/claires20080808","followers_url":"https://api.github.com/users/claires20080808/followers","following_url":"https://api.github.com/users/claires20080808/following{/other_user}","gists_url":"https://api.github.com/users/claires20080808/gists{/gist_id}","starred_url":"https://api.github.com/users/claires20080808/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claires20080808/subscriptions","organizations_url":"https://api.github.com/users/claires20080808/orgs","repos_url":"https://api.github.com/users/claires20080808/repos","events_url":"https://api.github.com/users/claires20080808/events{/privacy}","received_events_url":"https://api.github.com/users/claires20080808/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T08:32:27Z","updated_at":"2024-09-05T08:32:27Z","body":"@bagder  i met this issue in 8.6.0 version again. Could you please let me know whether this issue is fixed in latest version? In 8.9.1 ? Or is there any plan to fix in future version?\r\n\r\nThank you very much.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2330928069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"claires20080808","id":44636074,"node_id":"MDQ6VXNlcjQ0NjM2MDc0","avatar_url":"https://avatars.githubusercontent.com/u/44636074?v=4","gravatar_id":"","url":"https://api.github.com/users/claires20080808","html_url":"https://github.com/claires20080808","followers_url":"https://api.github.com/users/claires20080808/followers","following_url":"https://api.github.com/users/claires20080808/following{/other_user}","gists_url":"https://api.github.com/users/claires20080808/gists{/gist_id}","starred_url":"https://api.github.com/users/claires20080808/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/claires20080808/subscriptions","organizations_url":"https://api.github.com/users/claires20080808/orgs","repos_url":"https://api.github.com/users/claires20080808/repos","events_url":"https://api.github.com/users/claires20080808/events{/privacy}","received_events_url":"https://api.github.com/users/claires20080808/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14142861152,"node_id":"MEE_lADOAAiu0c5SePrGzwAAAANK-u9g","url":"https://api.github.com/repos/curl/curl/issues/events/14142861152","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-09-05T08:32:28Z","performed_via_github_app":null},{"id":14142861162,"node_id":"SE_lADOAAiu0c5SePrGzwAAAANK-u9q","url":"https://api.github.com/repos/curl/curl/issues/events/14142861162","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-09-05T08:32:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2330938784","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-2330938784","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":2330938784,"node_id":"IC_kwDOAAiu0c6K702g","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-05T08:37:50Z","updated_at":"2024-09-05T08:37:50Z","body":"I have no idea. I don't have any way to reproduce the problem and then consequently I also have no way to verify if any change fixed it. But I don't think anyone deliberately have fixed this.\r\n\r\n> Or is there any plan to fix in future version?\r\n\r\nIdeally all problems get fixed. But this is one of those issues that probably needs someone who can reproduce the problem to \"step up\" and debug it proper - or provide a recipe that lets others to repro the case. Until that happens, it probably remains unfixed.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2330938784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2518005853","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-2518005853","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":2518005853,"node_id":"IC_kwDOAAiu0c6WFbhd","user":{"login":"andreiaugustin","id":36695484,"node_id":"MDQ6VXNlcjM2Njk1NDg0","avatar_url":"https://avatars.githubusercontent.com/u/36695484?v=4","gravatar_id":"","url":"https://api.github.com/users/andreiaugustin","html_url":"https://github.com/andreiaugustin","followers_url":"https://api.github.com/users/andreiaugustin/followers","following_url":"https://api.github.com/users/andreiaugustin/following{/other_user}","gists_url":"https://api.github.com/users/andreiaugustin/gists{/gist_id}","starred_url":"https://api.github.com/users/andreiaugustin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreiaugustin/subscriptions","organizations_url":"https://api.github.com/users/andreiaugustin/orgs","repos_url":"https://api.github.com/users/andreiaugustin/repos","events_url":"https://api.github.com/users/andreiaugustin/events{/privacy}","received_events_url":"https://api.github.com/users/andreiaugustin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-04T16:49:05Z","updated_at":"2024-12-04T16:49:05Z","body":"Sorry to revive this, please let me know if you'd prefer a new issue.\r\n\r\nWe're experiencing problems with LDAPS as well and think it may be related to this bug.\r\n\r\nThings seem to improve when using curl 8.11.0 through the CLI, as in it does not hang anymore, but when used through the C API the problem is still there (which seems weird, I'd have expected the C API to render the same results as the CLI).\r\n\r\nHere's my builds:\r\n\r\n```\r\n[jenkins@6200e9102c92 bin]$ /curl8110-original --version\r\ncurl 8.11.0 (x86_64-pc-linux-gnu) libcurl/8.11.0 (mbedTLS/3.5.2) OpenSSL/3.0.11 zlib/1.3.1 zstd/1.4.4 libidn2/2.2.0 libssh2/1.11.0 nghttp2/1.59.0 OpenLDAP/2.4.46\r\nRelease-Date: 2024-11-06\r\nProtocols: file ftp ftps http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s scp sftp smtp smtps ws wss\r\nFeatures: alt-svc AsynchDNS HSTS HTTP2 HTTPS-proxy IDN IPv6 Largefile libz MultiSSL NTLM SSL threadsafe TLS-SRP UnixSockets zstd\r\n```\r\n\r\n```\r\n[jenkins@6200e9102c92 bin]$ /curl860 --version\r\ncurl 8.6.0 (x86_64-pc-linux-gnu) libcurl/8.6.0 (mbedTLS/3.5.2) OpenSSL/3.0.11 zlib/1.3.1 zstd/1.4.4 libidn2/2.2.0 libssh2/1.11.0 nghttp2/1.59.0 OpenLDAP/2.4.46\r\nRelease-Date: 2024-01-31\r\nProtocols: file ftp ftps http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s scp sftp smtp smtps\r\nFeatures: alt-svc AsynchDNS HSTS HTTP2 HTTPS-proxy IDN IPv6 Largefile libz MultiSSL NTLM SSL threadsafe TLS-SRP UnixSockets zstd\r\n```\r\n\r\nRunning on RHEL8, with `export CURL_SSL_BACKEND=openssl`.\r\n\r\nI've spent some time to set up an LDAPS server for testing purposes (was not a nice experience at all): \r\n\r\n`--url \"ldaps://ldaps.omnis.net:636/DC=omnis,DC=net\"`\r\n\r\n`--user \"omnis\\curl:7Sg3HfP9RTG93v\"`\r\n\r\nPlease note I am not a Windows Server expert and therefore don't know whether querying the above DC stuff is the right way to go about it, but I can see data coming back to the client which I think suffices for this bug!\r\n\r\nLet's start with the CLI, using curl 8.6.0:\r\n\r\n```\r\n[jenkins@6200e9102c92 bin]$ /curl860 -vvvv --user \"omnis\\curl:7Sg3HfP9RTG93v\" --url \"ldaps://ldaps.omnis.net:636/DC=omnis,DC=net\" -m 5\r\n* Host ldaps.omnis.net:636 was resolved.\r\n* IPv6: (none)\r\n* IPv4: 13.41.119.29\r\n*   Trying 13.41.119.29:636...\r\n* Connected to ldaps.omnis.net (13.41.119.29) port 636\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Request CERT (13):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Certificate (11):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* Server certificate:\r\n*  subject: C=GB; L=Saxmundham; O=Omnis Software Ltd; CN=*.omnis.net\r\n*  start date: Jul 30 00:00:00 2024 GMT\r\n*  expire date: Aug 14 23:59:59 2025 GMT\r\n*  subjectAltName: host \"ldaps.omnis.net\" matched cert's \"*.omnis.net\"\r\n*  issuer: C=US; O=DigiCert Inc; CN=DigiCert Global G2 TLS RSA SHA256 2020 CA1\r\n*  SSL certificate verify ok.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 2: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* LDAP local: ldaps://ldaps.omnis.net:636/DC=omnis,DC=net\r\nDN: DC=omnis,DC=net\r\n        objectClass: top\r\n        objectClass: domain\r\n        objectClass: domainDNS\r\n\r\n        distinguishedName: DC=omnis,DC=net\r\n\r\n        instanceType: 5\r\n\r\n        whenCreated: 20241204150719.0Z\r\n\r\n        whenChanged: 20241204162043.0Z\r\n\r\n        subRefs: CN=Configuration,DC=omnis,DC=net\r\n\r\n        uSNCreated: 4099\r\n\r\n        dSASignature:: AQAAACgAAAAAAAAAAAAAAAAAAAAAAAAArUW/kM9Uu0OZdOFtcye2Nw==\r\n\r\n        uSNChanged: 16407\r\n\r\n        name: omnis\r\n\r\n        objectGUID:: QPICfLbnKkqGRp6MVHthHw==\r\n\r\n        creationTime: 133777985761123267\r\n\r\n        forceLogoff: -9223372036854775808\r\n\r\n        lockoutDuration: -6000000000\r\n\r\n        lockOutObservationWindow: -6000000000\r\n\r\n        lockoutThreshold: 0\r\n\r\n        maxPwdAge: -36288000000000\r\n\r\n        minPwdAge: 0\r\n\r\n        minPwdLength: 0\r\n\r\n        modifiedCountAtLastProm: 0\r\n\r\n        nextRid: 1000\r\n\r\n        pwdProperties: 1\r\n\r\n        pwdHistoryLength: 0\r\n\r\n        objectSid:: AQQAAAAAAAUVAAAAFuj+8WJiI8aWqb7M\r\n\r\n        serverState: 1\r\n\r\n        uASCompat: 0\r\n\r\n        modifiedCount: 1\r\n\r\n        auditingPolicy:: AAE=\r\n\r\n        nTMixedDomain: 0\r\n\r\n        rIDManagerReference: CN=RID Manager$,CN=System,DC=omnis,DC=net\r\n\r\n        fSMORoleOwner: CN=NTDS Settings,CN=EC2AMAZ-TQL9KHQ,CN=Servers,CN=Default-First-Site-Name,CN=Sites,CN=Configuration,DC=omnis,DC=net\r\n\r\n        systemFlags: -1946157056\r\n\r\n        wellKnownObjects: B:32:6227F0AF1FC2410D8E3BB10615BB5B0F:CN=NTDS Quotas,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:F4BE92A4C777485E878E9421D53087DB:CN=Microsoft,CN=Program Data,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:09460C08AE1E4A4EA0F64AEE7DAA1E5A:CN=Program Data,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:22B70C67D56E4EFB91E9300FCA3DC1AA:CN=ForeignSecurityPrincipals,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:18E2EA80684F11D2B9AA00C04F79F805:CN=Deleted Objects,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:2FBAC1870ADE11D297C400C04FD8D5CD:CN=Infrastructure,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:AB8153B7768811D1ADED00C04FD8D5CD:CN=LostAndFound,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:AB1D30F3768811D1ADED00C04FD8D5CD:CN=System,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:A361B2FFFFD211D1AA4B00C04FD7D83A:OU=Domain Controllers,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:AA312825768811D1ADED00C04FD8D5CD:CN=Computers,DC=omnis,DC=net\r\n        wellKnownObjects: B:32:A9D1CA15768811D1ADED00C04FD8D5CD:CN=Users,DC=omnis,DC=net\r\n\r\n        objectCategory: CN=Domain-DNS,CN=Schema,CN=Configuration,DC=omnis,DC=net\r\n\r\n        isCriticalSystemObject: TRUE\r\n\r\n        gPLink: [LDAP://CN={31B2F340-016D-11D2-945F-00C04FB984F9},CN=Policies,CN=System,DC=omnis,DC=net;0]\r\n\r\n        dSCorePropagationData: 16010101000000.0Z\r\n\r\n        otherWellKnownObjects: B:32:683A24E2E8164BD3AF86AC3C2CF3F981:CN=Keys,DC=omnis,DC=net\r\n        otherWellKnownObjects: B:32:1EB93889E40C45DF9F0C64D23BBB6237:CN=Managed Service Accounts,DC=omnis,DC=net\r\n\r\n        masteredBy: CN=NTDS Settings,CN=EC2AMAZ-TQL9KHQ,CN=Servers,CN=Default-First-Site-Name,CN=Sites,CN=Configuration,DC=omnis,DC=net\r\n\r\n        ms-DS-MachineAccountQuota: 10\r\n\r\n        msDS-Behavior-Version: 10\r\n\r\n        msDS-PerUserTrustQuota: 1\r\n\r\n        msDS-AllUsersTrustQuota: 1000\r\n\r\n        msDS-PerUserTrustTombstonesQuota: 10\r\n\r\n        msDs-masteredBy: CN=NTDS Settings,CN=EC2AMAZ-TQL9KHQ,CN=Servers,CN=Default-First-Site-Name,CN=Sites,CN=Configuration,DC=omnis,DC=net\r\n\r\n        msDS-IsDomainFor: CN=NTDS Settings,CN=EC2AMAZ-TQL9KHQ,CN=Servers,CN=Default-First-Site-Name,CN=Sites,CN=Configuration,DC=omnis,DC=net\r\n\r\n        msDS-NcType: 0\r\n\r\n        msDS-ExpirePasswordsOnSmartCardOnlyAccounts: TRUE\r\n\r\n        dc: omnis\r\n\r\n\r\n* Operation timed out after 5001 milliseconds with 3179 bytes received\r\n* Closing connection\r\n* Send failure: Bad file descriptor\r\n* Recv failure: Bad file descriptor\r\ncurl: (28) Operation timed out after 5001 milliseconds with 3179 bytes received\r\n```\r\n\r\nAnd then the CLI using 8.11.0:\r\n\r\n```\r\n[jenkins@6200e9102c92 bin]$ /curl8110-original -vvvv --user \"omnis\\curl:7Sg3HfP9RTG93v\" --url \"ldaps://ldaps.omnis.net:636/DC=omnis,DC=net\" -m 5 > log.txt 2>&1\r\n\r\n16:38:47.484566 [0-x] == Info: [READ] client_reset, clear readers\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n^M  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     016:38:47.537179 [0-0] == Info: Host ldaps.omnis.net:636 was resolved.\r\n16:38:47.537478 [0-0] == Info: IPv6: (none)\r\n16:38:47.537608 [0-0] == Info: IPv4: 13.41.119.29\r\n16:38:47.537721 [0-0] == Info: [SETUP] added\r\n16:38:47.537811 [0-0] == Info: [HAPPY-EYEBALLS] created ipv4 (timeout 4947ms)\r\n16:38:47.537960 [0-0] == Info: [HAPPY-EYEBALLS] ipv4 starting (timeout=4947ms)\r\n16:38:47.538120 [0-0] == Info:   Trying 13.41.119.29:636...\r\n16:38:47.538252 [0-0] == Info: [TCP] cf_socket_open() -> 0, fd=5\r\n16:38:47.538423 [0-0] == Info: [TCP] local address 172.17.0.2 port 53676...\r\n16:38:47.538584 [0-0] == Info: [HAPPY-EYEBALLS] ipv4 connect -> 0, connected=0\r\n16:38:47.538738 [0-0] == Info: [TCP] adjust_pollset, !connected, POLLOUT fd=5\r\n16:38:47.538886 [0-0] == Info: [HAPPY-EYEBALLS] adjust_pollset -> 1 socks\r\n16:38:47.549108 [0-0] == Info: [TCP] not connected yet\r\n16:38:47.549232 [0-0] == Info: [HAPPY-EYEBALLS] ipv4 connect -> 0, connected=0\r\n16:38:47.549383 [0-0] == Info: [TCP] adjust_pollset, !connected, POLLOUT fd=5\r\n16:38:47.549535 [0-0] == Info: [HAPPY-EYEBALLS] adjust_pollset -> 1 socks\r\n16:38:47.588758 [0-0] == Info: [TCP] not connected yet\r\n16:38:47.588950 [0-0] == Info: [HAPPY-EYEBALLS] ipv4 connect -> 0, connected=0\r\n16:38:47.589183 [0-0] == Info: [TCP] adjust_pollset, !connected, POLLOUT fd=5\r\n16:38:47.589411 [0-0] == Info: [HAPPY-EYEBALLS] adjust_pollset -> 1 socks\r\n16:38:47.625355 [0-0] == Info: [TCP] connected\r\n16:38:47.625510 [0-0] == Info: [HAPPY-EYEBALLS] ipv4 connect -> 0, connected=1\r\n16:38:47.625662 [0-0] == Info: [HAPPY-EYEBALLS] Connected to ldaps.omnis.net (13.41.119.29) port 636\r\n16:38:47.625854 [0-0] == Info: [SSL] cf_connect()\r\n16:38:47.627064 [0-0] == Info: [SSL] No cached session ID for ldaps://ldaps.omnis.net:636\r\n16:38:47.627366 [0-0] => Send SSL data, 5 bytes (0x5)\r\n0000: .....\r\n16:38:47.627548 [0-0] == Info: TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n16:38:47.627700 [0-0] => Send SSL data, 512 bytes (0x200)\r\n0000: ......|.-A.-...........#}i!.N..4EK..]. ......>\"..=Mf...3...J..e.\r\n0040: K.......>.......,.0.........+./...$.(.k.#.'.g.....9.....3.....=.\r\n0080: <.5./.....u.........ldaps.omnis.net.............................\r\n00c0: ..............1.....*.(.........................................\r\n0100: +............-.....3.&.$... :.'kn..>.....`.ft..1.....&.F..+{....\r\n0140: ................................................................\r\n0180: ................................................................\r\n01c0: ................................................................\r\n16:38:47.628940 [0-0] == Info: [TCP] send(len=517) -> 517, err=0\r\n16:38:47.629099 [0-0] == Info: [SSL] ossl_bio_cf_out_write(len=517) -> 517, err=0\r\n16:38:47.629266 [0-0] == Info: [TCP] recv(len=5) -> -1, err=81\r\n16:38:47.629387 [0-0] == Info: [SSL] ossl_bio_cf_in_read(len=5) -> -1, err=81\r\n16:38:47.629536 [0-0] == Info: [SSL] populate_x509_store, path=/etc/pki/tls/certs/ca-bundle.crt, blob=0\r\n16:38:47.640699 [0-0] == Info:  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n16:38:47.640855 [0-0] == Info:  CApath: none\r\n16:38:47.640945 [0-0] == Info: [SSL] SSL_connect() -> err=-1, detail=2\r\n16:38:47.641078 [0-0] == Info: [SSL] SSL_connect() -> want recv\r\n16:38:47.641198 [0-0] == Info: [SSL] cf_connect() -> 0, done=0\r\n16:38:47.641325 [0-0] == Info: [SSL] adjust_pollset, POLLIN fd=5\r\n16:38:47.641453 [0-0] == Info: [TCP] adjust_pollset, !active, POLLIN fd=5\r\n16:38:47.717829 [0-0] == Info: [SSL] cf_connect()\r\n16:38:47.717979 [0-0] == Info: [TCP] recv(len=5) -> 5, err=0\r\n16:38:47.718100 [0-0] == Info: [SSL] ossl_bio_cf_in_read(len=5) -> 5, err=0\r\n16:38:47.718245 [0-0] <= Recv SSL data, 5 bytes (0x5)\r\n0000: ....z\r\n16:38:47.718373 [0-0] == Info: [TCP] recv(len=122) -> 122, err=0\r\n16:38:47.718497 [0-0] == Info: [SSL] ossl_bio_cf_in_read(len=122) -> 122, err=0\r\n16:38:47.718667 [0-0] == Info: TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n16:38:47.718826 [0-0] <= Recv SSL data, 122 bytes (0x7a)\r\n0000: ...v....s...A.e\\...,a.Xv.w.N..5......o ......>\"..=Mf...3...J..e.\r\n\r\n[MANY LINES LATER]\r\n\r\n16:40:35.234731 [0-0] == Info: [WRITE] cw_out, wrote 1 body bytes -> 1\r\n16:40:35.234847 [0-0] == Info: [WRITE] download_write body(type=1, blen=1) -> 0\r\n16:40:35.235018 [0-0] == Info: [WRITE] client_write(type=1, len=1) -> 0\r\n16:40:35.235237 [0-0] <= Recv data, 1 bytes (0x1)\r\n0000: .\r\n16:40:35.235361 [0-0] == Info: [WRITE] cw_out, wrote 1 body bytes -> 1\r\n16:40:35.235479 [0-0] == Info: [WRITE] download_write body(type=1, blen=1) -> 0\r\n16:40:35.235666 [0-0] == Info: [WRITE] client_write(type=1, len=1) -> 0\r\n16:40:35.235882 [0-0] <= Recv data, 2 bytes (0x2)\r\n0000: dc\r\n16:40:35.236024 [0-0] == Info: [WRITE] cw_out, wrote 2 body bytes -> 2\r\n16:40:35.236205 [0-0] == Info: [WRITE] download_write body(type=1, blen=2) -> 0\r\n16:40:35.236354 [0-0] == Info: [WRITE] client_write(type=1, len=2) -> 0\r\n16:40:35.236487 [0-0] <= Recv data, 1 bytes (0x1)\r\n0000: :\r\n16:40:35.236606 [0-0] == Info: [WRITE] cw_out, wrote 1 body bytes -> 1\r\n16:40:35.236721 [0-0] == Info: [WRITE] download_write body(type=1, blen=1) -> 0\r\n16:40:35.236893 [0-0] == Info: [WRITE] client_write(type=1, len=1) -> 0\r\n16:40:35.237076 [0-0] <= Recv data, 1 bytes (0x1)\r\n0000:  \r\n16:40:35.237202 [0-0] == Info: [WRITE] cw_out, wrote 1 body bytes -> 1\r\n16:40:35.237364 [0-0] == Info: [WRITE] download_write body(type=1, blen=1) -> 0\r\n16:40:35.237550 [0-0] == Info: [WRITE] client_write(type=1, len=1) -> 0\r\n16:40:35.237725 [0-0] <= Recv data, 5 bytes (0x5)\r\n0000: omnis\r\n16:40:35.237922 [0-0] == Info: [WRITE] cw_out, wrote 5 body bytes -> 5\r\n16:40:35.238109 [0-0] == Info: [WRITE] download_write body(type=1, blen=5) -> 0\r\n16:40:35.238337 [0-0] == Info: [WRITE] client_write(type=1, len=5) -> 0\r\n16:40:35.238424 [0-0] <= Recv data, 1 bytes (0x1)\r\n0000: .\r\n        dc: omnis\r\n16:40:35.238573 [0-0] == Info: [WRITE] cw_out, wrote 1 body bytes -> 1\r\n16:40:35.238749 [0-0] == Info: [WRITE] download_write body(type=1, blen=1) -> 0\r\n16:40:35.238930 [0-0] == Info: [WRITE] client_write(type=1, len=1) -> 0\r\n16:40:35.239104 [0-0] <= Recv data, 1 bytes (0x1)\r\n0000: .\r\n\r\n16:40:35.239236 [0-0] == Info: [WRITE] cw_out, wrote 1 body bytes -> 1\r\n16:40:35.239399 [0-0] == Info: [WRITE] download_write body(type=1, blen=1) -> 0\r\n16:40:35.239554 [0-0] == Info: [WRITE] client_write(type=1, len=1) -> 0\r\n16:40:35.239706 [0-0] <= Recv data, 1 bytes (0x1)\r\n0000: .\r\n\r\n16:40:35.239809 [0-0] == Info: [WRITE] cw_out, wrote 1 body bytes -> 1\r\n16:40:35.239990 [0-0] == Info: [WRITE] download_write body(type=1, blen=1) -> 0\r\n16:40:35.240137 [0-0] == Info: [WRITE] client_write(type=1, len=1) -> 0\r\n16:40:35.240298 [0-0] == Info: [WRITE] cw-out is notpaused\r\n16:40:35.240466 [0-0] == Info: [SSL] cf_recv(len=8) -> 8, 0\r\n16:40:35.240587 [0-0] == Info: [SSL] cf_recv(len=14) -> 14, 0\r\n16:40:35.240723 [0-0] == Info: abort upload\r\n16:40:35.240815 [0-0] <= Recv data, 0 bytes (0x0)\r\n16:40:35.240945 [0-0] == Info: [WRITE] download_write body(type=81, blen=0) -> 0\r\n16:40:35.241133 [0-0] == Info: [WRITE] client_write(type=81, len=0) -> 0\r\n16:40:35.241263 [0-0] == Info: [WRITE] xfer_write_resp(len=0, eos=1) -> 0\r\n16:40:35.241428 [0-0] == Info: [WRITE] cw-out is notpaused\r\n16:40:35.241620 [0-0] == Info: [WRITE] cw-out done\r\n16:40:35.241737 [0-0] == Info: [READ] client_reset, clear readers\r\n16:40:35.241897 [0-0] == Info: Connection #0 to host ldaps.omnis.net left intact\r\n```\r\n\r\nEvidently things look better in the 8.11.0 CLI, although I get the same results as 8.6.0 when using the C API (namely bad file descriptor for the socket, as probably the timeout closed them?).\r\n\r\nOver the next few days I will try an older version as our customers confirmed this happened after we upgraded to curl 8.6.0, and hopefully we can find a needle in the haystack that causes the hang through diffing.\r\n\r\nOtherwise, I will start investigating the latest source and see if I can get lucky. In the meantime, if anybody else with more experience is willing to have a go, feel free to use the test server I've set up with the details aforementioned!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2518005853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"andreiaugustin","id":36695484,"node_id":"MDQ6VXNlcjM2Njk1NDg0","avatar_url":"https://avatars.githubusercontent.com/u/36695484?v=4","gravatar_id":"","url":"https://api.github.com/users/andreiaugustin","html_url":"https://github.com/andreiaugustin","followers_url":"https://api.github.com/users/andreiaugustin/followers","following_url":"https://api.github.com/users/andreiaugustin/following{/other_user}","gists_url":"https://api.github.com/users/andreiaugustin/gists{/gist_id}","starred_url":"https://api.github.com/users/andreiaugustin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreiaugustin/subscriptions","organizations_url":"https://api.github.com/users/andreiaugustin/orgs","repos_url":"https://api.github.com/users/andreiaugustin/repos","events_url":"https://api.github.com/users/andreiaugustin/events{/privacy}","received_events_url":"https://api.github.com/users/andreiaugustin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2518035687","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-2518035687","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":2518035687,"node_id":"IC_kwDOAAiu0c6WFizn","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-04T17:02:21Z","updated_at":"2024-12-04T17:02:21Z","body":"> Evidently things look better in the 8.11.0 CLI, although I get the same results\n> as 8.6.0 when using the C API\n\nAre you absolutely sure your C program is using the correct (newer) libcurl in this case?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2518035687/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2518214881","html_url":"https://github.com/curl/curl/issues/9580#issuecomment-2518214881","issue_url":"https://api.github.com/repos/curl/curl/issues/9580","id":2518214881,"node_id":"IC_kwDOAAiu0c6WGOjh","user":{"login":"andreiaugustin","id":36695484,"node_id":"MDQ6VXNlcjM2Njk1NDg0","avatar_url":"https://avatars.githubusercontent.com/u/36695484?v=4","gravatar_id":"","url":"https://api.github.com/users/andreiaugustin","html_url":"https://github.com/andreiaugustin","followers_url":"https://api.github.com/users/andreiaugustin/followers","following_url":"https://api.github.com/users/andreiaugustin/following{/other_user}","gists_url":"https://api.github.com/users/andreiaugustin/gists{/gist_id}","starred_url":"https://api.github.com/users/andreiaugustin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreiaugustin/subscriptions","organizations_url":"https://api.github.com/users/andreiaugustin/orgs","repos_url":"https://api.github.com/users/andreiaugustin/repos","events_url":"https://api.github.com/users/andreiaugustin/events{/privacy}","received_events_url":"https://api.github.com/users/andreiaugustin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-04T18:25:59Z","updated_at":"2024-12-04T18:25:59Z","body":"Thanks @dfandrich ! It indeed was linking to the wrong libcurl.\r\n\r\nI can still see a couple bad file descriptors in my logs which I don't see when using the CLI, but it does not hang until timeout anymore:\r\n\r\n```\r\n@@@ 20241204_181456: Info - oBL_LDAPonOW3.$runQuery -- ldap log: 18:14:56.480 abort upload0\r\n@@@ 20241204_181456: Info - oBL_LDAPonOW3.$runQuery -- ldap log: 18:14:56.480 shutting down connection #00\r\n@@@ 20241204_181456: Info - oBL_LDAPonOW3.$runQuery -- ldap log: 0000  17 03 03 00 1f                                  .....0\r\n@@@ 20241204_181456: Info - oBL_LDAPonOW3.$runQuery -- ldap log: 18:14:56.480 Recv failure: Bad file descriptor0\r\n@@@ 20241204_181456: Info - oBL_LDAPonOW3.$runQuery -- ldap log: 0000  15 03 03 00 1a                                  .....0\r\n@@@ 20241204_181456: Info - oBL_LDAPonOW3.$runQuery -- ldap log: 18:14:56.480 Send failure: Bad file descriptor0\r\n@@@ 20241204_181456: Info - oBL_LDAPonOW3.$runQuery -- ldap log: 18:14:56.480 Recv failure: Bad file descriptor0\r\n```\r\n\r\nI can confirm, using the latest cURL release at time of writing (8.11.0) to communicate over LDAPS with a Windows Server 2025 running ActiveDirectory Domain Services does not hang anymore for both CLI and C API!\r\n\r\nI will leave the server running for a few more days in case somebody else would like to try it to confirm this is not a bug anymore and perhaps remove it from docs/KNOWN_BUGS (12.4) ? ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2518214881/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"andreiaugustin","id":36695484,"node_id":"MDQ6VXNlcjM2Njk1NDg0","avatar_url":"https://avatars.githubusercontent.com/u/36695484?v=4","gravatar_id":"","url":"https://api.github.com/users/andreiaugustin","html_url":"https://github.com/andreiaugustin","followers_url":"https://api.github.com/users/andreiaugustin/followers","following_url":"https://api.github.com/users/andreiaugustin/following{/other_user}","gists_url":"https://api.github.com/users/andreiaugustin/gists{/gist_id}","starred_url":"https://api.github.com/users/andreiaugustin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andreiaugustin/subscriptions","organizations_url":"https://api.github.com/users/andreiaugustin/orgs","repos_url":"https://api.github.com/users/andreiaugustin/repos","events_url":"https://api.github.com/users/andreiaugustin/events{/privacy}","received_events_url":"https://api.github.com/users/andreiaugustin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15530775285,"node_id":"MEE_lADOAAiu0c5SePrGzwAAAAOdtNL1","url":"https://api.github.com/repos/curl/curl/issues/events/15530775285","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-12-04T18:26:01Z","performed_via_github_app":null},{"id":15530775294,"node_id":"SE_lADOAAiu0c5SePrGzwAAAAOdtNL-","url":"https://api.github.com/repos/curl/curl/issues/events/15530775294","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-12-04T18:26:01Z","performed_via_github_app":null}]