[{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864025989","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864025989","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864025989,"node_id":"IC_kwDOAAiu0c5vGseF","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T08:00:34Z","updated_at":"2023-12-20T08:00:34Z","body":"when i remove ``` --limit-rate 1M ``` and run curl command, upload is fine but when i provide ```--limit-rate 1M``` i am getting below error\r\n\r\n```\r\n>\r\n* HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\r\n* Connection #0 to host 127.0.0.1 left intact\r\ncurl: (92) HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\r\n```\r\n\r\n\r\nNot provided --limit-rate 1M with curl\r\n```\r\nroot@ubuntu:~# curl -v -k -# --http2 https://127.0.0.1:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n*   Trying 127.0.0.1:8443...\r\n* Connected to 127.0.0.1 (127.0.0.1) port 8443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://127.0.0.1:8443/upload/BPS.pdf\r\n* [HTTP/2] [1] [:method: PUT]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: 127.0.0.1:8443]\r\n* [HTTP/2] [1] [:path: /upload/BPS.pdf]\r\n* [HTTP/2] [1] [user-agent: curl/8.5.1-DEV]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: 127.0.0.1:8443\r\n> User-Agent: curl/8.5.1-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* We are completely uploaded and fine\r\n< HTTP/2 201\r\n< server: nginx/1.25.3\r\n< date: Wed, 20 Dec 2023 07:56:52 GMT\r\n< content-length: 0\r\n< location: https://127.0.0.1:8443/upload/BPS.pdf\r\n<\r\n* Connection #0 to host 127.0.0.1 left intact\r\nroot@ubuntu:~#\r\n```\r\n \r\nProvided --limit-rate 1M with curl\r\n \r\n```\r\nroot@ubuntu:~# curl -v -k -# --http2 --limit-rate 1M https://127.0.0.1:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n*   Trying 127.0.0.1:8443...\r\n* Connected to 127.0.0.1 (127.0.0.1) port 8443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://127.0.0.1:8443/upload/BPS.pdf\r\n* [HTTP/2] [1] [:method: PUT]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: 127.0.0.1:8443]\r\n* [HTTP/2] [1] [:path: /upload/BPS.pdf]\r\n* [HTTP/2] [1] [user-agent: curl/8.5.1-DEV]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: 127.0.0.1:8443\r\n> User-Agent: curl/8.5.1-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\r\n* Connection #0 to host 127.0.0.1 left intact\r\ncurl: (92) HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\r\nroot@ubuntu:~#\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864025989/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864027443","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864027443","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864027443,"node_id":"IC_kwDOAAiu0c5vGs0z","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T08:01:54Z","updated_at":"2023-12-20T08:01:54Z","body":"am i missing anything here?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864027443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864052733","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864052733","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864052733,"node_id":"IC_kwDOAAiu0c5vGy_9","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T08:24:13Z","updated_at":"2023-12-20T08:24:13Z","body":"a small update\r\ni have a curl 8.2.1-DEV and upload is fine with and without ```--limit-rate 1M```\r\n```\r\nroot@ubuntu:~# /opt/bin/curl -V\r\ncurl 8.2.1-DEV (x86_64-pc-linux-gnu) libcurl/8.2.1-DEV OpenSSL/3.1.2 zlib/1.2.11 brotli/1.0.9 nghttp2/1.55.1 ngtcp2/0.17.0 nghttp3/0.13.0\r\nRelease-Date: [unreleased]\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps mqtt pop3 pop3s rtsp smb smbs smtp smtps telnet tftp\r\nFeatures: alt-svc AsynchDNS brotli HSTS HTTP2 HTTP3 HTTPS-proxy IPv6 Largefile libz NTLM NTLM_WB SSL threadsafe TLS-SRP UnixSockets\r\nroot@ubuntu:~#\r\n```\r\n```\r\nroot@ubuntu:~# /opt/bin/curl -v -k -# --http2 https://127.0.0.1:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n* processing: https://127.0.0.1:8443/upload/BPS.pdf\r\n*   Trying 127.0.0.1:8443...\r\n* Connected to 127.0.0.1 (127.0.0.1) port 8443\r\n* ALPN: offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n* using HTTP/2\r\n* h2 [:method: PUT]\r\n* h2 [:scheme: https]\r\n* h2 [:authority: 127.0.0.1:8443]\r\n* h2 [:path: /upload/BPS.pdf]\r\n* h2 [user-agent: curl/8.2.1-DEV]\r\n* h2 [accept: */*]\r\n* h2 [content-length: 30182355]\r\n* Using Stream ID: 1\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: 127.0.0.1:8443\r\n> User-Agent: curl/8.2.1-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* We are completely uploaded and fine\r\n< HTTP/2 201\r\n< server: nginx/1.25.3\r\n< date: Wed, 20 Dec 2023 08:23:33 GMT\r\n< content-length: 0\r\n< location: https://127.0.0.1:8443/upload/BPS.pdf\r\n<\r\n* Connection #0 to host 127.0.0.1 left intact\r\nroot@ubuntu:~#\r\n```\r\n```\r\nroot@ubuntu:~# /opt/bin/curl -v -k -# --http2 --limit-rate 1M https://127.0.0.1:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n* processing: https://127.0.0.1:8443/upload/BPS.pdf\r\n*   Trying 127.0.0.1:8443...\r\n* Connected to 127.0.0.1 (127.0.0.1) port 8443\r\n* ALPN: offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n* using HTTP/2\r\n* h2 [:method: PUT]\r\n* h2 [:scheme: https]\r\n* h2 [:authority: 127.0.0.1:8443]\r\n* h2 [:path: /upload/BPS.pdf]\r\n* h2 [user-agent: curl/8.2.1-DEV]\r\n* h2 [accept: */*]\r\n* h2 [content-length: 30182355]\r\n* Using Stream ID: 1\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: 127.0.0.1:8443\r\n> User-Agent: curl/8.2.1-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* We are completely uploaded and fine\r\n< HTTP/2 201\r\n< server: nginx/1.25.3\r\n< date: Wed, 20 Dec 2023 08:07:16 GMT\r\n< content-length: 0\r\n< location: https://127.0.0.1:8443/upload/BPS.pdf\r\n<\r\n* Connection #0 to host 127.0.0.1 left intact\r\nroot@ubuntu:~#\r\n```\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864052733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864053737","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864053737","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864053737,"node_id":"IC_kwDOAAiu0c5vGzPp","user":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T08:25:03Z","updated_at":"2023-12-20T08:25:03Z","body":"Interesting. Would you mind trying to reproduce with release tag curl-8_5_0?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864053737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864103640","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864103640","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864103640,"node_id":"IC_kwDOAAiu0c5vG_bY","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T09:04:44Z","updated_at":"2023-12-20T09:04:44Z","body":"tried with released curl-8_5_0 and issue is not seen\r\n\r\n```\r\nroot@ubuntu:/src/curl-8.5.0# ./src/curl -V\r\ncurl 8.5.0 (x86_64-pc-linux-gnu) libcurl/8.5.0 quictls/3.1.4 zlib/1.2.11 brotli/1.0.9 nghttp2/1.59.0-DEV ngtcp2/1.1.0 nghttp3/1.1.0\r\nRelease-Date: 2023-12-06\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps mqtt pop3 pop3s rtsp smb smbs smtp smtps telnet tftp\r\nFeatures: alt-svc AsynchDNS brotli HSTS HTTP2 HTTP3 HTTPS-proxy IPv6 Largefile libz NTLM SSL threadsafe TLS-SRP UnixSockets\r\nroot@ubuntu:/src/curl-8.5.0#\r\n```\r\n```\r\nroot@ubuntu:/src/curl-8.5.0# ./src/curl -v -k -# --http2 https://127.0.0.1:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n*   Trying 127.0.0.1:8443...\r\n* Connected to 127.0.0.1 (127.0.0.1) port 8443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://127.0.0.1:8443/upload/BPS.pdf\r\n* [HTTP/2] [1] [:method: PUT]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: 127.0.0.1:8443]\r\n* [HTTP/2] [1] [:path: /upload/BPS.pdf]\r\n* [HTTP/2] [1] [user-agent: curl/8.5.0]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: 127.0.0.1:8443\r\n> User-Agent: curl/8.5.0\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* We are completely uploaded and fine\r\n< HTTP/2 201\r\n< server: nginx/1.25.3\r\n< date: Wed, 20 Dec 2023 09:02:57 GMT\r\n< content-length: 0\r\n< location: https://127.0.0.1:8443/upload/BPS.pdf\r\n<\r\n* Connection #0 to host 127.0.0.1 left intact\r\nroot@ubuntu:/src/curl-8.5.0#\r\n```\r\n\r\n```\r\nroot@ubuntu:/src/curl-8.5.0# ./src/curl -v -k -# --http2 --limit-rate 1M https://127.0.0.1:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n*   Trying 127.0.0.1:8443...\r\n* Connected to 127.0.0.1 (127.0.0.1) port 8443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://127.0.0.1:8443/upload/BPS.pdf\r\n* [HTTP/2] [1] [:method: PUT]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: 127.0.0.1:8443]\r\n* [HTTP/2] [1] [:path: /upload/BPS.pdf]\r\n* [HTTP/2] [1] [user-agent: curl/8.5.0]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: 127.0.0.1:8443\r\n> User-Agent: curl/8.5.0\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* We are completely uploaded and fine\r\n< HTTP/2 201\r\n< server: nginx/1.25.3\r\n< date: Wed, 20 Dec 2023 09:03:44 GMT\r\n< content-length: 0\r\n< location: https://127.0.0.1:8443/upload/BPS.pdf\r\n<\r\n* Connection #0 to host 127.0.0.1 left intact\r\nroot@ubuntu:/src/curl-8.5.0#\r\n``` ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864103640/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864376935","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864376935","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864376935,"node_id":"IC_kwDOAAiu0c5vICJn","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T12:16:33Z","updated_at":"2023-12-20T12:16:33Z","body":"@Karthikdasari0423 any chance you can [bisect](https://github.com/curl/curl/wiki/how-to-git-bisect) to figure out the commit that broke it? ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864376935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11301835770,"node_id":"MEE_lADOAAiu0c56MRI4zwAAAAKhpFP6","url":"https://api.github.com/repos/curl/curl/issues/events/11301835770","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-20T12:16:33Z","performed_via_github_app":null},{"id":11301835779,"node_id":"SE_lADOAAiu0c56MRI4zwAAAAKhpFQD","url":"https://api.github.com/repos/curl/curl/issues/events/11301835779","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-20T12:16:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864380134","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864380134","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864380134,"node_id":"IC_kwDOAAiu0c5vIC7m","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T12:18:58Z","updated_at":"2023-12-20T12:18:58Z","body":"sure @bagder , i will give it a try","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864380134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11301860159,"node_id":"MEE_lADOAAiu0c56MRI4zwAAAAKhpLM_","url":"https://api.github.com/repos/curl/curl/issues/events/11301860159","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-20T12:18:58Z","performed_via_github_app":null},{"id":11301860176,"node_id":"SE_lADOAAiu0c56MRI4zwAAAAKhpLNQ","url":"https://api.github.com/repos/curl/curl/issues/events/11301860176","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-20T12:18:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864505152","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864505152","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864505152,"node_id":"IC_kwDOAAiu0c5vIhdA","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T13:47:41Z","updated_at":"2023-12-20T13:50:18Z","body":"@bagder this is the commit that broke this thing\r\nhttps://github.com/curl/curl/commit/1da640abb6886aab822ff0c0da71b1df0ca89d0f\r\n```\r\nroot@ubuntu:/src/curl_test# git log\r\ncommit 1da640abb6886aab822ff0c0da71b1df0ca89d0f (HEAD)\r\nAuthor: Daniel Stenberg <daniel@haxx.se>\r\nDate:   Mon Dec 11 19:36:27 2023 +0100\r\n\r\n    readwrite_data: loop less\r\n\r\n    This function is made to loop in order to drain incoming data\r\n    faster. Completely removing the loop has a measerably negative impact on\r\n    transfer speeds.\r\n\r\n    Downsides with the looping include\r\n\r\n    - it might call the progress callback much more seldom. Especially if\r\n      the write callback is slow.\r\n\r\n    - rate limiting becomes less exact\r\n\r\n    - a single transfer might \"starve out\" other parallel transfers\r\n\r\n    - QUIC timers for other connections can't be maintained correctly\r\n\r\n    The long term fix should be to remove the loop and optimize coming back\r\n    to avoid the transfer speed penalty.\r\n\r\n    This fix lower the max loop count to reduce the starvation problem, and\r\n    avoids the loop completely for when rate-limiting is in progress.\r\n\r\n    Ref: #12488\r\n    Ref: https://curl.se/mail/lib-2023-12/0012.html\r\n    Closes #12504\r\n\r\ncommit 8706b680108919d9cdca1acd3a17fff6a57e245c\r\nAuthor: Stefan Eissing <stefan@eissing.org>\r\nDate:   Wed Dec 13 11:25:20 2023 +0100\r\n\r\n    lib: eliminate `conn->cselect_bits`\r\n\r\n    - use `data->state.dselect_bits` everywhere instead\r\n    - remove `bool *comeback` parameter as non-zero\r\n      `data->state.dselect_bits` will indicate that IO is\r\n      incomplete.\r\n\r\nroot@ubuntu:/src/curl_test#\r\nroot@ubuntu:/src/curl_test#\r\nroot@ubuntu:/src/curl_test# ./src/curl -v -k -# --http2 --limit-rate 1M https://localhost:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n* Host localhost:8443 was resolved.\r\n* IPv6: ::1\r\n* IPv4: 127.0.0.1\r\n*   Trying [::1]:8443...\r\n* Connected to localhost (::1) port 8443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://localhost:8443/upload/BPS.pdf\r\n* [HTTP/2] [1] [:method: PUT]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: localhost:8443]\r\n* [HTTP/2] [1] [:path: /upload/BPS.pdf]\r\n* [HTTP/2] [1] [user-agent: curl/8.5.1-DEV]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: localhost:8443\r\n> User-Agent: curl/8.5.1-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n\r\n* HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\r\n* Connection #0 to host localhost left intact\r\ncurl: (92) HTTP/2 stream 1 was not closed cleanly: PROTOCOL_ERROR (err 1)\r\nroot@ubuntu:/src/curl_test#\r\nroot@ubuntu:/src/curl_test#\r\n```\r\n\r\ncommit before breakage is below\r\nhttps://github.com/curl/curl/commit/8706b680108919d9cdca1acd3a17fff6a57e245c\r\n```\r\nroot@ubuntu:/src/curl_test# git log\r\ncommit 8706b680108919d9cdca1acd3a17fff6a57e245c (HEAD)\r\nAuthor: Stefan Eissing <stefan@eissing.org>\r\nDate:   Wed Dec 13 11:25:20 2023 +0100\r\n\r\n    lib: eliminate `conn->cselect_bits`\r\n\r\n    - use `data->state.dselect_bits` everywhere instead\r\n    - remove `bool *comeback` parameter as non-zero\r\n      `data->state.dselect_bits` will indicate that IO is\r\n      incomplete.\r\n\r\n    Closes #12512\r\n\r\ncommit 0f052808b3a054bbbcdf31d16ad168e6fdd1252e\r\nAuthor: Stefan Eissing <stefan@eissing.org>\r\nDate:   Thu Dec 14 12:59:19 2023 +0100\r\n\r\n    connect: refactor `Curl_timeleft()`\r\n\r\n    - less local vars, \"better\" readability\r\n    - added documentation\r\n\r\n    Closes #12518\r\n\r\ncommit 1e4cd519355b63b26a0a9ee1f125153bfcc4995e\r\nAuthor: Dmitry Karpov <dkarpov@roku.com>\r\nDate:   Wed Dec 13 14:32:53 2023 -0800\r\n\r\n    cookie: avoid fopen with empty file name\r\n\r\n    Closes #12514\r\n\r\ncommit 246e0d805ac11aa2a2e14aee485e5deb58653b8b\r\nAuthor: Viktor Szakats <commit@vsz.me>\r\nDate:   Tue Dec 12 20:38:08 2023 +0000\r\n\r\n    tests/server: delete workaround for old-mingw\r\n\r\n    mingw-w64 1.0 comes with w32api v3.12, thus doesn't need this.\r\n\r\n    Follow-up to 38029101e2d78ba125732b3bab6ec267b80a0e72 #11625\r\n\r\nroot@ubuntu:/src/curl_test#\r\nroot@ubuntu:/src/curl_test# ./src/curl -v -k -# --http2 --limit-rate 1M https://localhost:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n* Host localhost:8443 was resolved.\r\n* IPv6: ::1\r\n* IPv4: 127.0.0.1\r\n*   Trying [::1]:8443...\r\n* Connected to localhost (::1) port 8443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://localhost:8443/upload/BPS.pdf\r\n* [HTTP/2] [1] [:method: PUT]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: localhost:8443]\r\n* [HTTP/2] [1] [:path: /upload/BPS.pdf]\r\n* [HTTP/2] [1] [user-agent: curl/8.5.1-DEV]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: localhost:8443\r\n> User-Agent: curl/8.5.1-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* We are completely uploaded and fine\r\n< HTTP/2 201\r\n< server: nginx/1.25.3\r\n< date: Wed, 20 Dec 2023 13:46:40 GMT\r\n< content-length: 0\r\n< location: https://localhost:8443/upload/BPS.pdf\r\n<\r\n* Connection #0 to host localhost left intact\r\nroot@ubuntu:/src/curl_test#\r\n```\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864505152/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11302852825,"node_id":"MEE_lADOAAiu0c56MRI4zwAAAAKhs9jZ","url":"https://api.github.com/repos/curl/curl/issues/events/11302852825","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-20T13:47:41Z","performed_via_github_app":null},{"id":11302852838,"node_id":"SE_lADOAAiu0c56MRI4zwAAAAKhs9jm","url":"https://api.github.com/repos/curl/curl/issues/events/11302852838","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-20T13:47:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864572171","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864572171","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864572171,"node_id":"IC_kwDOAAiu0c5vIx0L","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T14:30:14Z","updated_at":"2023-12-20T14:30:14Z","body":"Thanks a lot!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864572171/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864634853","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1864634853","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1864634853,"node_id":"IC_kwDOAAiu0c5vJBHl","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T15:07:47Z","updated_at":"2023-12-20T15:07:47Z","body":"np, it's my pleasure :)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1864634853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11307950785,"node_id":"REFE_lADOAAiu0c56MRI4zwAAAAKiAaLB","url":"https://api.github.com/repos/curl/curl/issues/events/11307950785","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f24b6faf9b256568a318a7809edf9ef9f4296d36","commit_url":"https://api.github.com/repos/curl/curl/commits/f24b6faf9b256568a318a7809edf9ef9f4296d36","created_at":"2023-12-20T22:08:49Z","performed_via_github_app":null},{"actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-20T22:09:17Z","updated_at":"2023-12-20T22:09:17Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/12566","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/12566/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/12566/comments","events_url":"https://api.github.com/repos/curl/curl/issues/12566/events","html_url":"https://github.com/curl/curl/pull/12566","id":2051352851,"node_id":"PR_kwDOAAiu0c5ig7FU","number":12566,"title":"Revert \"readwrite_data: loop less\"","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":194601710,"node_id":"MDU6TGFiZWwxOTQ2MDE3MTA=","url":"https://api.github.com/repos/curl/curl/labels/HTTP/2","name":"HTTP/2","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2023-12-20T22:09:16Z","updated_at":"2023-12-22T18:39:28Z","closed_at":"2023-12-22T18:39:24Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/12566","html_url":"https://github.com/curl/curl/pull/12566","diff_url":"https://github.com/curl/curl/pull/12566.diff","patch_url":"https://github.com/curl/curl/pull/12566.patch","merged_at":null},"body":"This reverts commit 1da640abb6886aab822ff0c0da71b1df0ca89d0f.\r\n\r\nThat commit fixed a few issues but it seems it introduced an even worse one. We need to rethink the approach and revert this in the mean time.\r\n\r\nFixes #12559","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/12566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/12566/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867453004","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1867453004","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1867453004,"node_id":"IC_kwDOAAiu0c5vTxJM","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T09:30:23Z","updated_at":"2023-12-22T09:30:23Z","body":"@icing do we run any h2 test case similar to this?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867453004/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11324682805,"node_id":"MEE_lADOAAiu0c56MRI4zwAAAAKjAPI1","url":"https://api.github.com/repos/curl/curl/issues/events/11324682805","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-22T09:30:23Z","performed_via_github_app":null},{"id":11324682813,"node_id":"SE_lADOAAiu0c56MRI4zwAAAAKjAPI9","url":"https://api.github.com/repos/curl/curl/issues/events/11324682813","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-22T09:30:23Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867482287","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1867482287","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1867482287,"node_id":"IC_kwDOAAiu0c5vT4Sv","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T09:57:47Z","updated_at":"2023-12-22T09:57:47Z","body":"@bagder we have download tests with ratelimit, but no upload tests. \r\n\r\nAdding one locally exposes weirdness...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867482287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11324922244,"node_id":"MEE_lADOAAiu0c56MRI4zwAAAAKjBJmE","url":"https://api.github.com/repos/curl/curl/issues/events/11324922244","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-22T09:57:47Z","performed_via_github_app":null},{"id":11324922252,"node_id":"SE_lADOAAiu0c56MRI4zwAAAAKjBJmM","url":"https://api.github.com/repos/curl/curl/issues/events/11324922252","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-22T09:57:47Z","performed_via_github_app":null},{"id":11325709836,"node_id":"REFE_lADOAAiu0c56MRI4zwAAAAKjEJ4M","url":"https://api.github.com/repos/curl/curl/issues/events/11325709836","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ca626ff518a0096b91135cbdeebc074b6ce56d78","commit_url":"https://api.github.com/repos/icing/curl/commits/ca626ff518a0096b91135cbdeebc074b6ce56d78","created_at":"2023-12-22T11:31:22Z","performed_via_github_app":null},{"actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T11:31:46Z","updated_at":"2023-12-22T11:31:46Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/12586","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/12586/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/12586/comments","events_url":"https://api.github.com/repos/curl/curl/issues/12586/events","html_url":"https://github.com/curl/curl/pull/12586","id":2053792965,"node_id":"PR_kwDOAAiu0c5ipQf4","number":12586,"title":"Fix upload rate limiting, add test cases","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":887227423,"node_id":"MDU6TGFiZWw4ODcyMjc0MjM=","url":"https://api.github.com/repos/curl/curl/labels/tests","name":"tests","color":"a7a8e8","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-12-22T11:31:46Z","updated_at":"2023-12-22T15:53:11Z","closed_at":"2023-12-22T15:53:11Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/12586","html_url":"https://github.com/curl/curl/pull/12586","diff_url":"https://github.com/curl/curl/pull/12586.diff","patch_url":"https://github.com/curl/curl/pull/12586.patch","merged_at":null},"body":"- refs #12559\r\n- add test cases for rate limiting uploads for all http versions\r\n- fix transfer loop handling of limits. Signal a re-receive attempt only on exhausting maxloops without an EAGAIN\r\n- fix `data->state.selectbits` forcing re-receive to also set re-sending when transfer is doing this.","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/12586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/12586/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867645149","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1867645149","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1867645149,"node_id":"IC_kwDOAAiu0c5vUgDd","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T12:43:46Z","updated_at":"2023-12-22T12:43:46Z","body":"@Karthikdasari0423 can you check if applying #12586 fixes this problem for you?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867645149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11326239845,"node_id":"MEE_lADOAAiu0c56MRI4zwAAAAKjGLRl","url":"https://api.github.com/repos/curl/curl/issues/events/11326239845","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-22T12:43:47Z","performed_via_github_app":null},{"id":11326239858,"node_id":"SE_lADOAAiu0c56MRI4zwAAAAKjGLRy","url":"https://api.github.com/repos/curl/curl/issues/events/11326239858","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-22T12:43:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867711994","html_url":"https://github.com/curl/curl/issues/12559#issuecomment-1867711994","issue_url":"https://api.github.com/repos/curl/curl/issues/12559","id":1867711994,"node_id":"IC_kwDOAAiu0c5vUwX6","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-22T13:51:15Z","updated_at":"2023-12-22T13:51:15Z","body":"seems to me working fine @bagder \r\n```\r\nroot@ubuntu:/src/curl_test# git log\r\ncommit ca626ff518a0096b91135cbdeebc074b6ce56d78 (HEAD, icing/up-ratelimit-fix)\r\nAuthor: Stefan Eissing <stefan@eissing.org>\r\nDate:   Fri Dec 22 12:27:59 2023 +0100\r\n\r\n    Fix upload rate limiting, add test cases\r\n\r\n    - refs #12559\r\n    - add test cases for rate limiting uploads for all\r\n      http versions\r\n    - fix transfer loop handling of limits. Signal a re-receive\r\n      attempt only on exhausting maxloops without an EAGAIN\r\n    - fix `data->state.selectbits` forcing re-receive to also\r\n      set re-sending when transfer is doing this.\r\n\r\ncommit 35380273b9311cf0741e386284310fa7ca4d005e\r\nAuthor: Stefan Eissing <stefan@eissing.org>\r\nDate:   Tue Dec 19 12:57:40 2023 +0100\r\n\r\n    http2: improved on_stream_close/data_done handling\r\n\r\n    - there seems to be a code path that cleans up easy handles without\r\n      triggering DONE or DETACH events to the connection filters. This\r\n      would explain wh nghttp2 still holds stream user data\r\n    - add GOOD check to easy handle used in on_close_callback to\r\n      prevent crashes, ASSERTs in debug builds.\r\n    - NULL the stream user data early before submitting RST\r\n    - add checks in on_stream_close() to identify UNGOOD easy handles\r\n\r\n    Reported-by: Hans-Christian Egtvedt\r\n    Fixes #10936\r\n    Closes #12562\r\n\r\ncommit ef2cf58c77fc92960695d6669648f92ca4792e9c\r\nAuthor: Daniel Stenberg <daniel@haxx.se>\r\nDate:   Fri Dec 22 09:51:20 2023 +0100\r\n\r\n    mprintf: overhaul and bugfixes\r\n\r\n    In a test case using lots of snprintf() calls using many commonly used\r\n    %-codes per call, this version is around 30% faster than previous\r\n    version.\r\n\r\nroot@ubuntu:/src/curl_test# ./src/curl -v -k -# --http2 --limit-rate 1M https://localhost:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n* Host localhost:8443 was resolved.\r\n* IPv6: ::1\r\n* IPv4: 127.0.0.1\r\n*   Trying [::1]:8443...\r\n* Connected to localhost (::1) port 8443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / X25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=ubuntu\r\n*  start date: Feb 10 15:24:51 2023 GMT\r\n*  expire date: Feb  7 15:24:51 2033 GMT\r\n*  issuer: CN=ubuntu\r\n*  SSL certificate verify result: self-signed certificate (18), continuing anyway.\r\n*   Certificate level 0: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* old SSL session ID is stale, removing\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://localhost:8443/upload/BPS.pdf\r\n* [HTTP/2] [1] [:method: PUT]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: localhost:8443]\r\n* [HTTP/2] [1] [:path: /upload/BPS.pdf]\r\n* [HTTP/2] [1] [user-agent: curl/8.6.0-DEV]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/2\r\n> Host: localhost:8443\r\n> User-Agent: curl/8.6.0-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n* We are completely uploaded and fine\r\n< HTTP/2 201\r\n< server: nginx/1.25.3\r\n< date: Fri, 22 Dec 2023 13:49:54 GMT\r\n< content-length: 0\r\n< location: https://localhost:8443/upload/BPS.pdf\r\n<\r\n* Connection #0 to host localhost left intact\r\nroot@ubuntu:/src/curl_test# rm -rfv /root/incoming/\r\nremoved '/root/incoming/BPS.pdf'\r\nremoved directory '/root/incoming/'\r\nroot@ubuntu:/src/curl_test#\r\nroot@ubuntu:/src/curl_test# ./src/curl -v -k -# --http3 --limit-rate 1M https://localhost:8443/upload/BPS.pdf -T /upload/BPS.pdf\r\n* Host localhost:8443 was resolved.\r\n* IPv6: ::1\r\n* IPv4: 127.0.0.1\r\n*   Trying [::1]:8443...\r\n* QUIC cipher selection: TLS_AES_128_GCM_SHA256:TLS_AES_256_GCM_SHA384:TLS_CHACHA20_POLY1305_SHA256:TLS_AES_128_CCM_SHA256\r\n* Skipped certificate verification\r\n* Connected to localhost (::1) port 8443\r\n* using HTTP/3\r\n* [HTTP/3] [0] OPENED stream for https://localhost:8443/upload/BPS.pdf\r\n* [HTTP/3] [0] [:method: PUT]\r\n* [HTTP/3] [0] [:scheme: https]\r\n* [HTTP/3] [0] [:authority: localhost:8443]\r\n* [HTTP/3] [0] [:path: /upload/BPS.pdf]\r\n* [HTTP/3] [0] [user-agent: curl/8.6.0-DEV]\r\n* [HTTP/3] [0] [accept: */*]\r\n* [HTTP/3] [0] [content-length: 30182355]\r\n> PUT /upload/BPS.pdf HTTP/3\r\n> Host: localhost:8443\r\n> User-Agent: curl/8.6.0-DEV\r\n> Accept: */*\r\n> Content-Length: 30182355\r\n>\r\n< HTTP/3 201\r\n< server: nginx/1.25.3\r\n< date: Fri, 22 Dec 2023 13:50:30 GMT\r\n< content-length: 0\r\n< location: https://localhost:8443/upload/BPS.pdf\r\n<\r\n* We are completely uploaded and fine\r\n* Connection #0 to host localhost left intact\r\nroot@ubuntu:/src/curl_test#\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1867711994/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false}}]