{"url":"https://api.github.com/repos/curl/curl/issues/11155","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/11155/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/11155/comments","events_url":"https://api.github.com/repos/curl/curl/issues/11155/events","html_url":"https://github.com/curl/curl/issues/11155","id":1717425187,"node_id":"I_kwDOAAiu0c5mXdQj","number":11155,"title":"curl fails to compile with gcc, `--enable-debug=yes` and --with-secure-transport","user":{"login":"FeignClaims","id":62583114,"node_id":"MDQ6VXNlcjYyNTgzMTE0","avatar_url":"https://avatars.githubusercontent.com/u/62583114?v=4","gravatar_id":"","url":"https://api.github.com/users/FeignClaims","html_url":"https://github.com/FeignClaims","followers_url":"https://api.github.com/users/FeignClaims/followers","following_url":"https://api.github.com/users/FeignClaims/following{/other_user}","gists_url":"https://api.github.com/users/FeignClaims/gists{/gist_id}","starred_url":"https://api.github.com/users/FeignClaims/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FeignClaims/subscriptions","organizations_url":"https://api.github.com/users/FeignClaims/orgs","repos_url":"https://api.github.com/users/FeignClaims/repos","events_url":"https://api.github.com/users/FeignClaims/events{/privacy}","received_events_url":"https://api.github.com/users/FeignClaims/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118221,"node_id":"MDU6TGFiZWwxODQxMTgyMjE=","url":"https://api.github.com/repos/curl/curl/labels/TLS","name":"TLS","color":"bfdadc","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2023-05-19T15:20:22Z","updated_at":"2023-05-21T12:02:50Z","closed_at":"2023-05-21T12:02:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Only file bugs here! Ask questions on the mailing lists https://curl.se/mail/\r\n\r\n     SECURITY RELATED? Post it here: https://hackerone.com/curl\r\n\r\n     There are collections of known issues to be aware of:\r\n     https://curl.se/docs/knownbugs.html\r\n     https://curl.se/docs/todo.html       -->\r\n\r\n### I did this\r\n\r\nI cloned the repository and ran the following commands:\r\n\r\n- `autoreconf --force --install`\r\n- `./configure --disable-shared --enable-static --prefix=/ '--bindir=${prefix}/bin' '--sbindir=${prefix}/bin' '--libdir=${prefix}/lib' '--includedir=${prefix}/include' '--oldincludedir=${prefix}/include' --with-libidn2=no --with-librtmp=no --with-libpsl=no --with-libgsasl=no --with-schannel=no --with-secure-transport=yes --with-brotli=no --enable-shared=no --enable-static=yes --enable-dict=yes --enable-file=yes --enable-ftp=yes --enable-gopher=yes --enable-http=yes --enable-imap=yes --enable-ldap=no --enable-mqtt=yes --enable-pop3=yes --enable-rtsp=yes --enable-smb=yes --enable-smtp=yes --enable-telnet=yes --enable-tftp=yes --enable-debug=no --enable-ares=no --enable-threaded-resolver=yes --enable-cookies=yes --enable-ipv6=yes --enable-manual=no --enable-verbose=yes --enable-symbol-hiding=no --enable-unix-sockets=yes --with-zstd=no --without-openssl --without-wolfssl --without-libssh2 --without-nghttp2 --with-zlib=/Users/feignclaims/.conan2/p/b/zlib5dc1ed3312917/p --with-ca-fallback=nO`\r\n- `make`\r\n\r\nHowever, when running `make`, I got the following error:\r\n\r\n```\r\nvtls/sectransp.c: In function 'TLSCipherNameForNumber':\r\nvtls/sectransp.c:907:3: error: 'for' loop initial declarations are only allowed in C99 or C11 mode\r\n  907 |   for(size_t i = SSL_FORTEZZA_DMS_WITH_FORTEZZA_CBC_SHA + 1;\r\n      |   ^~~\r\nvtls/sectransp.c:907:3: note: use option '-std=c99', '-std=gnu99', '-std=c11' or '-std=gnu11' to compile your code\r\n```\r\n\r\nI set `-enable-debug=no` and reconfigured it, keeping the other parameters the same, and it compiled successfully.\r\n\r\nThe issue might be caused by the `-std=gnu89` in CFLAGS, which is added when `want_warnings` is `yes` and the `compiler_id` is `GNU_C`.\r\n\r\n### I expected the following\r\n\r\nA successful compilation.\r\n\r\n### curl/libcurl version\r\n\r\ngit master branch (with latest commits a64d7de61af5fb94b70972cd0981020e729c1499)\r\n\r\n### operating system\r\n\r\nDarwin FeignClaimsdeMacBook-Air.local 22.4.0 Darwin Kernel Version 22.4.0: Mon Mar  6 21:00:41 PST 2023; root:xnu-8796.101.5~3/RELEASE_ARM64_T8103 arm64\r\n","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/11155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/11155/timeline","performed_via_github_app":null,"state_reason":"completed"}