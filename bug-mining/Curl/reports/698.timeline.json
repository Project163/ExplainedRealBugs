[{"id":17219450385,"node_id":"SE_lADOAAiu0c6yExUbzwAAAAQCW_YR","url":"https://api.github.com/repos/curl/curl/issues/events/17219450385","actor":{"login":"mxschmitt","id":17984549,"node_id":"MDQ6VXNlcjE3OTg0NTQ5","avatar_url":"https://avatars.githubusercontent.com/u/17984549?v=4","gravatar_id":"","url":"https://api.github.com/users/mxschmitt","html_url":"https://github.com/mxschmitt","followers_url":"https://api.github.com/users/mxschmitt/followers","following_url":"https://api.github.com/users/mxschmitt/following{/other_user}","gists_url":"https://api.github.com/users/mxschmitt/gists{/gist_id}","starred_url":"https://api.github.com/users/mxschmitt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mxschmitt/subscriptions","organizations_url":"https://api.github.com/users/mxschmitt/orgs","repos_url":"https://api.github.com/users/mxschmitt/repos","events_url":"https://api.github.com/users/mxschmitt/events{/privacy}","received_events_url":"https://api.github.com/users/mxschmitt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-04-11T08:06:53Z","performed_via_github_app":null},{"id":17219798525,"node_id":"AE_lADOAAiu0c6yExUbzwAAAAQCYUX9","url":"https://api.github.com/repos/curl/curl/issues/events/17219798525","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2025-04-11T08:30:51Z","assignee":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2796378429","html_url":"https://github.com/curl/curl/issues/17020#issuecomment-2796378429","issue_url":"https://api.github.com/repos/curl/curl/issues/17020","id":2796378429,"node_id":"IC_kwDOAAiu0c6mrVk9","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-11T09:39:30Z","updated_at":"2025-04-11T10:06:55Z","body":"Can you describe \"has some network errors\" more precisely? I suspect that the \"No connections available\" results from curl counting connections in shutdown against the `CURLMOPT_MAX_TOTAL_CONNECTIONS` limit.\n\nBefore, this was not done and only the \"live\" connections counted. Same for `CURLMOPT_MAX_HOST_CONNECTIONS`.\n\nI suspect this results in timeouts in the application?\n\nYou could test this by increasing the limits that WebKit seems to set.\n\n/cc @bagder \n\nIf this is indeed the issue, we need to decide who libcurl is supposed to handle this. Do we want to immediately close the oldest connection in shutdown when this pressure situation happens. Or do we prioritise a clean shutdown and the application has to adapt?\n\nI think we only get deterministic behaviour for the application, if we force close shutdowns in such situations.\n\nA PR with force closing connections in shutdown under pressure is in #17022","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2796378429/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17220776859,"node_id":"MEE_lADOAAiu0c6yExUbzwAAAAQCcDOb","url":"https://api.github.com/repos/curl/curl/issues/events/17220776859","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-04-11T09:39:32Z","performed_via_github_app":null},{"id":17220776872,"node_id":"SE_lADOAAiu0c6yExUbzwAAAAQCcDOo","url":"https://api.github.com/repos/curl/curl/issues/events/17220776872","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-04-11T09:39:32Z","performed_via_github_app":null},{"id":17221159436,"node_id":"REFE_lADOAAiu0c6yExUbzwAAAAQCdgoM","url":"https://api.github.com/repos/curl/curl/issues/events/17221159436","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4245abe40116160f203e65a90c0f29965bdf1dde","commit_url":"https://api.github.com/repos/icing/curl/commits/4245abe40116160f203e65a90c0f29965bdf1dde","created_at":"2025-04-11T10:06:14Z","performed_via_github_app":null},{"actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-11T10:06:24Z","updated_at":"2025-04-11T10:06:24Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/17022","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/17022/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/17022/comments","events_url":"https://api.github.com/repos/curl/curl/issues/17022/events","html_url":"https://github.com/curl/curl/pull/17022","id":2988203584,"node_id":"PR_kwDOAAiu0c6SPBNB","number":17022,"title":"cpool/cshutdown: force close connections under pressure","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":887227423,"node_id":"MDU6TGFiZWw4ODcyMjc0MjM=","url":"https://api.github.com/repos/curl/curl/labels/tests","name":"tests","color":"a7a8e8","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-04-11T10:06:23Z","updated_at":"2025-04-11T20:47:17Z","closed_at":"2025-04-11T20:47:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T12:40:38Z","pushed_at":"2025-11-10T12:40:38Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":40,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/17022","html_url":"https://github.com/curl/curl/pull/17022","diff_url":"https://github.com/curl/curl/pull/17022.diff","patch_url":"https://github.com/curl/curl/pull/17022.patch","merged_at":null},"body":"when CURLMOPT_MAX_HOST_CONNECTIONS or CURLMOPT_MAX_TOTAL_CONNECTIONS limits are reached, force close connections in shutdown to go below limit when possible.\r\n\r\nrefs #17020","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/17022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/17022/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":17230339515,"node_id":"CE_lADOAAiu0c6yExUbzwAAAAQDAh27","url":"https://api.github.com/repos/curl/curl/issues/events/17230339515","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ff37657e4d94cf4db80ab9652ae8e6acb84f3019","commit_url":"https://api.github.com/repos/curl/curl/commits/ff37657e4d94cf4db80ab9652ae8e6acb84f3019","created_at":"2025-04-11T20:47:17Z","state_reason":null,"performed_via_github_app":null},{"id":17230631596,"node_id":"REFE_lADOAAiu0c6yExUbzwAAAAQDBpKs","url":"https://api.github.com/repos/curl/curl/issues/events/17230631596","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ff37657e4d94cf4db80ab9652ae8e6acb84f3019","commit_url":"https://api.github.com/repos/Reality2byte/curl/commits/ff37657e4d94cf4db80ab9652ae8e6acb84f3019","created_at":"2025-04-11T21:20:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2799841520","html_url":"https://github.com/curl/curl/issues/17020#issuecomment-2799841520","issue_url":"https://api.github.com/repos/curl/curl/issues/17020","id":2799841520,"node_id":"IC_kwDOAAiu0c6m4jDw","user":{"login":"fujii","id":36109,"node_id":"MDQ6VXNlcjM2MTA5","avatar_url":"https://avatars.githubusercontent.com/u/36109?v=4","gravatar_id":"","url":"https://api.github.com/users/fujii","html_url":"https://github.com/fujii","followers_url":"https://api.github.com/users/fujii/followers","following_url":"https://api.github.com/users/fujii/following{/other_user}","gists_url":"https://api.github.com/users/fujii/gists{/gist_id}","starred_url":"https://api.github.com/users/fujii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fujii/subscriptions","organizations_url":"https://api.github.com/users/fujii/orgs","repos_url":"https://api.github.com/users/fujii/repos","events_url":"https://api.github.com/users/fujii/events{/privacy}","received_events_url":"https://api.github.com/users/fujii/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-13T07:33:57Z","updated_at":"2025-04-13T07:33:57Z","body":"I confirmed it resolved the problem. Thank you very much.\n\nWindows WebKit uses 17 and 6 for CURLMOPT_MAX_TOTAL_CONNECTIONS and CURLMOPT_MAX_HOST_CONNECTIONS.\nYes, timeout was happening. It happened just by reloading https://www.yomiuri.co.jp/ 2 or 3 times. After that, all resource requests timed out from www.yomiuri.co.jp. But, it could load pages from other sites.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2799841520/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fujii","id":36109,"node_id":"MDQ6VXNlcjM2MTA5","avatar_url":"https://avatars.githubusercontent.com/u/36109?v=4","gravatar_id":"","url":"https://api.github.com/users/fujii","html_url":"https://github.com/fujii","followers_url":"https://api.github.com/users/fujii/followers","following_url":"https://api.github.com/users/fujii/following{/other_user}","gists_url":"https://api.github.com/users/fujii/gists{/gist_id}","starred_url":"https://api.github.com/users/fujii/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fujii/subscriptions","organizations_url":"https://api.github.com/users/fujii/orgs","repos_url":"https://api.github.com/users/fujii/repos","events_url":"https://api.github.com/users/fujii/events{/privacy}","received_events_url":"https://api.github.com/users/fujii/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17413698961,"node_id":"REFE_lADOAAiu0c6yExUbzwAAAAQN7_WR","url":"https://api.github.com/repos/curl/curl/issues/events/17413698961","actor":{"login":"nbaws","id":108375408,"node_id":"U_kgDOBnWtcA","avatar_url":"https://avatars.githubusercontent.com/u/108375408?v=4","gravatar_id":"","url":"https://api.github.com/users/nbaws","html_url":"https://github.com/nbaws","followers_url":"https://api.github.com/users/nbaws/followers","following_url":"https://api.github.com/users/nbaws/following{/other_user}","gists_url":"https://api.github.com/users/nbaws/gists{/gist_id}","starred_url":"https://api.github.com/users/nbaws/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nbaws/subscriptions","organizations_url":"https://api.github.com/users/nbaws/orgs","repos_url":"https://api.github.com/users/nbaws/repos","events_url":"https://api.github.com/users/nbaws/events{/privacy}","received_events_url":"https://api.github.com/users/nbaws/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a9af7a78a055ab7c8cebc8f206072f8daae9a915","commit_url":"https://api.github.com/repos/nbaws/curl/commits/a9af7a78a055ab7c8cebc8f206072f8daae9a915","created_at":"2025-04-26T00:46:23Z","performed_via_github_app":null},{"id":17415042472,"node_id":"REFE_lADOAAiu0c6yExUbzwAAAAQOBHWo","url":"https://api.github.com/repos/curl/curl/issues/events/17415042472","actor":{"login":"nbaws","id":108375408,"node_id":"U_kgDOBnWtcA","avatar_url":"https://avatars.githubusercontent.com/u/108375408?v=4","gravatar_id":"","url":"https://api.github.com/users/nbaws","html_url":"https://github.com/nbaws","followers_url":"https://api.github.com/users/nbaws/followers","following_url":"https://api.github.com/users/nbaws/following{/other_user}","gists_url":"https://api.github.com/users/nbaws/gists{/gist_id}","starred_url":"https://api.github.com/users/nbaws/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nbaws/subscriptions","organizations_url":"https://api.github.com/users/nbaws/orgs","repos_url":"https://api.github.com/users/nbaws/repos","events_url":"https://api.github.com/users/nbaws/events{/privacy}","received_events_url":"https://api.github.com/users/nbaws/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3d9909de43344b51b18636d1481b468aec7cc478","commit_url":"https://api.github.com/repos/nbaws/curl/commits/3d9909de43344b51b18636d1481b468aec7cc478","created_at":"2025-04-26T06:30:53Z","performed_via_github_app":null},{"actor":{"login":"Neil-Vana-25","id":218118672,"node_id":"U_kgDODQA6EA","avatar_url":"https://avatars.githubusercontent.com/u/218118672?v=4","gravatar_id":"","url":"https://api.github.com/users/Neil-Vana-25","html_url":"https://github.com/Neil-Vana-25","followers_url":"https://api.github.com/users/Neil-Vana-25/followers","following_url":"https://api.github.com/users/Neil-Vana-25/following{/other_user}","gists_url":"https://api.github.com/users/Neil-Vana-25/gists{/gist_id}","starred_url":"https://api.github.com/users/Neil-Vana-25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Neil-Vana-25/subscriptions","organizations_url":"https://api.github.com/users/Neil-Vana-25/orgs","repos_url":"https://api.github.com/users/Neil-Vana-25/repos","events_url":"https://api.github.com/users/Neil-Vana-25/events{/privacy}","received_events_url":"https://api.github.com/users/Neil-Vana-25/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-26T18:09:40Z","updated_at":"2025-06-26T18:09:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/17755","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/17755/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/17755/comments","events_url":"https://api.github.com/repos/curl/curl/issues/17755/events","html_url":"https://github.com/curl/curl/issues/17755","id":3179930999,"node_id":"I_kwDOAAiu0c69ieV3","number":17755,"title":"[multi-curl] Inconsistent occurrence of CURLOPT_CLOSESOCKETFUNCTION on windows and linux","user":{"login":"Neil-Vana-25","id":218118672,"node_id":"U_kgDODQA6EA","avatar_url":"https://avatars.githubusercontent.com/u/218118672?v=4","gravatar_id":"","url":"https://api.github.com/users/Neil-Vana-25","html_url":"https://github.com/Neil-Vana-25","followers_url":"https://api.github.com/users/Neil-Vana-25/followers","following_url":"https://api.github.com/users/Neil-Vana-25/following{/other_user}","gists_url":"https://api.github.com/users/Neil-Vana-25/gists{/gist_id}","starred_url":"https://api.github.com/users/Neil-Vana-25/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Neil-Vana-25/subscriptions","organizations_url":"https://api.github.com/users/Neil-Vana-25/orgs","repos_url":"https://api.github.com/users/Neil-Vana-25/repos","events_url":"https://api.github.com/users/Neil-Vana-25/events{/privacy}","received_events_url":"https://api.github.com/users/Neil-Vana-25/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1117926199,"node_id":"MDU6TGFiZWwxMTE3OTI2MTk5","url":"https://api.github.com/repos/curl/curl/labels/libcurl%20API","name":"libcurl API","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2025-06-26T18:09:39Z","updated_at":"2025-07-02T17:03:14Z","closed_at":"2025-07-02T17:03:14Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T12:40:38Z","pushed_at":"2025-11-10T12:40:38Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":40,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\n\nOur team has a windows & linux application recently upgraded to use curl 8.14.1. Our implementation uses multi socket interface with boost::asio:: io_service as the event handler. Similar to [asiohiper.cpp](https://gist.githubusercontent.com/lijoantony/4098139/raw/cb1518752c3df7846a526dd2548913eb84c9ed79/asiohiper.cpp)\n\nOn windows everything worked fine for our application. The rough lifecycle events were: \n**Windows**: ```curl_multi_add_handle -> CURLOPT_OPENSOCKETFUNCTION -> CURLMOPT_SOCKETFUNCTION / CURLMOPT_TIMERFUNCTION -> CURLOPT_CLOSESOCKETFUNCTION  -> curl_multi_info_read -> curl_multi_remove_handle```\n\nHowever, on linux I noticed some multi-curl async network calls will have their CURLOPT_CLOSESOCKETFUNCTION occur after curl_multi_info_read's CURLMSG_DONE, or sometimes occur during the next network calls after we call curl_multi_add_handle. This caused some dangling pointers issues on our linux application due to CURLOPT_CLOSESOCKETFUNCTION 's `clientp` being already cleaned up accidentally by us. Luckily, we would be able to fix those by better memory management of what we passed as `clientp`. \n**Linux**: ```curl_multi_add_handle -> CURLOPT_OPENSOCKETFUNCTION -> CURLMOPT_SOCKETFUNCTION / CURLMOPT_TIMERFUNCTION -> curl_multi_info_read -> curl_multi_remove_handle -> CURLOPT_CLOSESOCKETFUNCTION ```\n\n\nOur main concerns around this possible bug would be \n- Is there is any expectation of when CURLOPT_CLOSESOCKETFUNCTION will be triggered in multi curl use case? Should it be before or after CURLMSG_DONE is received\n- How come windows and linux would have different behaviours\n\nI can provide some curl verbose logs and possibly some sample code in next few days, but thought to open this discussion in case it is already a known issue. \n\n_Side questions about past version behaviours_\n- For linux we had made the upgrade from curl 8.9.1. In that past version, we didn't observe the dangling pointer issues because CURLOPT_CLOSESOCKETFUNCTION was being triggered very rarely. My guess after reading https://github.com/icing/blog/blob/main/curl-all-ends-well.md, [issues/1585](https://github.com/curl/curl/issues/1585),  [issues/17020](https://github.com/curl/curl/issues/17020) was that the way connections and CURLMOPT_MAX_HOST_CONNECTIONS has been reworked? I'm still reading more to understand the changes made.\n- (Update) For windows 8.9.1, seems like CURLOPT_CLOSESOCKETFUNCTION will happen before CURLMSG_DONE. No change observed from 8.9.1 -> 8.14.1\n\n### I expected the following\n\nConsistent sequence of curl lifecycle events on windows and linux.\n\n### curl/libcurl version\n\ncurl 8.14.1 (with OpenSSL 3.0.16)\n\n### operating system\n\n(RHEL 7.6) Linux localhost.localdomain 3.10.0-1160.81.1.el7.x86_64 #1 SMP Fri Dec 16 17:29:43 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux\n\n(RHEL 8.6) Linux localhost.localdomain 4.18.0-372.9.1.el8.x86_64 #1 SMP Fri Apr 15 22:12:19 EDT 2022 x86_64 x86_64 x86_64 GNU/Linux\n","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/17755/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/17755/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]