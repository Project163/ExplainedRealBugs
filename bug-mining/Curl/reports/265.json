{"url":"https://api.github.com/repos/curl/curl/issues/11410","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/11410/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/11410/comments","events_url":"https://api.github.com/repos/curl/curl/issues/11410/events","html_url":"https://github.com/curl/curl/issues/11410","id":1794802849,"node_id":"I_kwDOAAiu0c5q-oSh","number":11410,"title":"Password provided in Location header not used in redirect request","user":{"login":"lucasnetau","id":9331242,"node_id":"MDQ6VXNlcjkzMzEyNDI=","avatar_url":"https://avatars.githubusercontent.com/u/9331242?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasnetau","html_url":"https://github.com/lucasnetau","followers_url":"https://api.github.com/users/lucasnetau/followers","following_url":"https://api.github.com/users/lucasnetau/following{/other_user}","gists_url":"https://api.github.com/users/lucasnetau/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasnetau/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasnetau/subscriptions","organizations_url":"https://api.github.com/users/lucasnetau/orgs","repos_url":"https://api.github.com/users/lucasnetau/repos","events_url":"https://api.github.com/users/lucasnetau/events{/privacy}","received_events_url":"https://api.github.com/users/lucasnetau/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118243,"node_id":"MDU6TGFiZWwxODQxMTgyNDM=","url":"https://api.github.com/repos/curl/curl/labels/HTTP","name":"HTTP","color":"207de5","default":false,"description":null},{"id":538402904,"node_id":"MDU6TGFiZWw1Mzg0MDI5MDQ=","url":"https://api.github.com/repos/curl/curl/labels/authentication","name":"authentication","color":"e99695","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":0,"created_at":"2023-07-08T06:10:44Z","updated_at":"2023-07-09T16:43:13Z","closed_at":"2023-07-09T16:43:13Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\r\n\r\n```\r\ncurl -Lv \"http://unknown:invalid@httpbin.org/redirect-to?url=http://user:pass@httpbin.org/basic-auth/user/pass\"\r\n```\r\n\r\n### I expected the following\r\n\r\n```\r\n{\r\n  \"authenticated\": true, \r\n  \"user\": \"user\"\r\n}\r\n```\r\n\r\nCurl to use the password provided in the Location: header instead of the original value. When opening the URL in Chrome the redirect occurs with the new credentials.\r\n\r\nCurl picks up the username and sent that with the redirected request, password was kept with the original value of invalid instead of pass.\r\n\r\n### I got this\r\n\r\nHTTP/1.1 401 UNAUTHORIZED\r\n\r\n```\r\n*   Trying 54.210.149.139:80...\r\n* Connected to httpbin.org (54.210.149.139) port 80 (#0)\r\n* Server auth using Basic with user 'unknown'\r\n> GET /redirect-to?url=http://user:pass@httpbin.org/basic-auth/user/pass HTTP/1.1\r\n> Host: httpbin.org\r\n> Authorization: Basic dW5rbm93bjppbnZhbGlk\r\n> User-Agent: curl/7.88.1\r\n> Accept: */*\r\n> \r\n< HTTP/1.1 302 FOUND\r\n< Date: Sat, 08 Jul 2023 05:51:30 GMT\r\n< Content-Type: text/html; charset=utf-8\r\n< Content-Length: 0\r\n< Connection: keep-alive\r\n< Server: gunicorn/19.9.0\r\n< Location: http://user:pass@httpbin.org/basic-auth/user/pass\"\r\n< Access-Control-Allow-Origin: *\r\n< Access-Control-Allow-Credentials: true\r\n< \r\n* Connection #0 to host httpbin.org left intact\r\n* Issue another request to this URL: 'http://user:pass@httpbin.org/basic-auth/user/pass\"'\r\n* Found bundle for host: 0x6000032ec060 [serially]\r\n* Can not multiplex, even if we wanted to\r\n* Re-using existing connection #0 with host httpbin.org\r\n* Server auth using Basic with user 'user'\r\n> GET /basic-auth/user/pass\" HTTP/1.1\r\n> Host: httpbin.org\r\n> Authorization: Basic dXNlcjppbnZhbGlk\r\n> User-Agent: curl/7.88.1\r\n> Accept: */*\r\n> \r\n\r\n< HTTP/1.1 401 UNAUTHORIZED\r\n< Date: Sat, 08 Jul 2023 05:51:36 GMT\r\n< Content-Length: 0\r\n< Connection: keep-alive\r\n< Server: gunicorn/19.9.0\r\n* Authentication problem. Ignoring this.\r\n< WWW-Authenticate: Basic realm=\"Fake Realm\"\r\n< Access-Control-Allow-Origin: *\r\n< Access-Control-Allow-Credentials: true\r\n< \r\n* Connection #0 to host httpbin.org left intact\r\n```\r\n\r\n### curl/libcurl version\r\n\r\ncurl 7.88.1 (x86_64-apple-darwin22.0) libcurl/7.88.1 (SecureTransport) LibreSSL/3.3.6 zlib/1.2.11 nghttp2/1.51.0\r\nRelease-Date: 2023-02-20\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ldap ldaps mqtt pop3 pop3s rtsp smb smbs smtp smtps telnet tftp\r\nFeatures: alt-svc AsynchDNS GSS-API HSTS HTTP2 HTTPS-proxy IPv6 Kerberos Largefile libz MultiSSL NTLM NTLM_WB SPNEGO SSL threadsafe UnixSockets\r\n\r\nand \r\n\r\ncurl 8.1.2 (x86_64-apple-darwin22.4.0) libcurl/8.1.2 (SecureTransport) OpenSSL/1.1.1u zlib/1.2.11 brotli/1.0.9 zstd/1.5.5 libidn2/2.3.4 libssh2/1.11.0 nghttp2/1.54.0 librtmp/2.3\r\nRelease-Date: 2023-05-30\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ldap ldaps mqtt pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftp\r\nFeatures: alt-svc AsynchDNS brotli GSS-API HSTS HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz MultiSSL NTLM NTLM_WB SPNEGO SSL threadsafe TLS-SRP UnixSockets zstd\r\n\r\n\r\n### operating system\r\n\r\nDarwin iMac.local 22.5.0 Darwin Kernel Version 22.5.0: Mon Apr 24 20:51:50 PDT 2023; root:xnu-8796.121.2~5/RELEASE_X86_64 x86_64\r\n","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/11410/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/11410/timeline","performed_via_github_app":null,"state_reason":"completed"}