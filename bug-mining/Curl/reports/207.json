{"url":"https://api.github.com/repos/curl/curl/issues/10296","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/10296/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/10296/comments","events_url":"https://api.github.com/repos/curl/curl/issues/10296/events","html_url":"https://github.com/curl/curl/issues/10296","id":1533351688,"node_id":"I_kwDOAAiu0c5bZRcI","number":10296,"title":"Cannot cross compile to Haiku with CMake","user":{"login":"Kartatz","id":105828205,"node_id":"U_kgDOBk7PbQ","avatar_url":"https://avatars.githubusercontent.com/u/105828205?v=4","gravatar_id":"","url":"https://api.github.com/users/Kartatz","html_url":"https://github.com/Kartatz","followers_url":"https://api.github.com/users/Kartatz/followers","following_url":"https://api.github.com/users/Kartatz/following{/other_user}","gists_url":"https://api.github.com/users/Kartatz/gists{/gist_id}","starred_url":"https://api.github.com/users/Kartatz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kartatz/subscriptions","organizations_url":"https://api.github.com/users/Kartatz/orgs","repos_url":"https://api.github.com/users/Kartatz/repos","events_url":"https://api.github.com/users/Kartatz/events{/privacy}","received_events_url":"https://api.github.com/users/Kartatz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184123162,"node_id":"MDU6TGFiZWwxODQxMjMxNjI=","url":"https://api.github.com/repos/curl/curl/labels/cmake","name":"cmake","color":"d4c5f9","default":false,"description":null},{"id":657824945,"node_id":"MDU6TGFiZWw2NTc4MjQ5NDU=","url":"https://api.github.com/repos/curl/curl/labels/help%20wanted","name":"help wanted","color":"fbca04","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-01-14T16:36:45Z","updated_at":"2023-03-22T13:03:43Z","closed_at":"2023-03-22T13:03:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Only file bugs here! Ask questions on the mailing lists https://curl.se/mail/\n\n     SECURITY RELATED? Post it here: https://hackerone.com/curl\n\n     There are collections of known issues to be aware of:\n     https://curl.se/docs/knownbugs.html\n     https://curl.se/docs/todo.html       -->\n\n### I did this\n\nI'm porting a personal CMake project which uses curl to Haiku OS, however libcurl build is failing with the following output:\n\n```\n$ cmake --build ./\n[8%] Building C object lib/CMakeFiles/libcurl.dir/altsvc.c.o\nIn file included from /home/kartatz/curl/lib/curl_setup.h:707,\n                 from /home/kartatz/curl/lib/altsvc.c:28:\n/home/kartatz/curl/lib/curl_setup_once.h:158:3: error: unknown type name 'Error'\n  158 |   Error Missing_definition_of_macro_sread\n      |   ^~~~~\n/home/kartatz/curl/lib/curl_setup_once.h:178:3: error: expected '=', ',', ';', 'asm' or '__attribute__' before 'Error'\n  178 |   Error Missing_definition_of_macro_swrite\n      |   ^~~~~\n/home/kartatz/curl/lib/curl_setup_once.h:178:3: error: unknown type name 'Error'\nmake[2]: *** [lib/CMakeFiles/libcurl.dir/build.make:76: lib/CMakeFiles/libcurl.dir/altsvc.c.o] Error 1\nmake[1]: *** [CMakeFiles/Makefile2:441: lib/CMakeFiles/libcurl.dir/all] Error 2\nmake: *** [Makefile:136: all] Error 2\n```\n\nHere is the complete output log of `cmake ./`:\n\n```\n$ cmake \\\n    -DCMAKE_C_COMPILER=${HOME}/unknown-unknown-haiku/bin/x86_64-unknown-haiku-gcc \\\n    -DBUILD_CURL_EXE=OFF \\\n    -DHTTP_ONLY=ON \\\n    -DENABLE_THREADED_RESOLVER=OFF \\\n    -DCURL_USE_OPENSSL=ON \\\n    -DCURL_DISABLE_ALTSVC=ON \\\n    -DCURL_DISABLE_CRYPTO_AUTH=ON \\\n    -DCURL_DISABLE_COOKIES=ON \\\n    -DCURL_DISABLE_HSTS=ON \\\n    -DCURL_DISABLE_HTTP_AUTH=ON \\\n    -DCURL_DISABLE_NETRC=ON \\\n    -DUSE_LIBIDN2=OFF \\\n    -DENABLE_UNIX_SOCKETS=OFF \\\n    -DCURL_USE_LIBSSH2=OFF \\\n    ./\n-- The C compiler identification is GNU 11.2.0\n-- Detecting C compiler ABI info\n-- Detecting C compiler ABI info - done\n-- Check for working C compiler: /home/kartatz/unknown-unknown-haiku/bin/x86_64-unknown-haiku-gcc - skipped\n-- Detecting C compile features\n-- Detecting C compile features - done\n-- curl version=[7.87.1-DEV]\n-- Performing Test OPT_pedantic\n-- Performing Test OPT_pedantic - Success\n-- Performing Test OPT_Wall\n-- Performing Test OPT_Wall - Success\n-- Performing Test OPT_W\n-- Performing Test OPT_W - Success\n-- Performing Test OPT_Wpointer_arith\n-- Performing Test OPT_Wpointer_arith - Success\n-- Performing Test OPT_Wwrite_strings\n-- Performing Test OPT_Wwrite_strings - Success\n-- Performing Test OPT_Wunused\n-- Performing Test OPT_Wunused - Success\n-- Performing Test OPT_Wshadow\n-- Performing Test OPT_Wshadow - Success\n-- Performing Test OPT_Winline\n-- Performing Test OPT_Winline - Success\n-- Performing Test OPT_Wnested_externs\n-- Performing Test OPT_Wnested_externs - Success\n-- Performing Test OPT_Wmissing_declarations\n-- Performing Test OPT_Wmissing_declarations - Success\n-- Performing Test OPT_Wmissing_prototypes\n-- Performing Test OPT_Wmissing_prototypes - Success\n-- Performing Test OPT_Wfloat_equal\n-- Performing Test OPT_Wfloat_equal - Success\n-- Performing Test OPT_Wsign_compare\n-- Performing Test OPT_Wsign_compare - Success\n-- Performing Test OPT_Wundef\n-- Performing Test OPT_Wundef - Success\n-- Performing Test OPT_Wendif_labels\n-- Performing Test OPT_Wendif_labels - Success\n-- Performing Test OPT_Wstrict_prototypes\n-- Performing Test OPT_Wstrict_prototypes - Success\n-- Performing Test OPT_Wdeclaration_after_statement\n-- Performing Test OPT_Wdeclaration_after_statement - Success\n-- Performing Test OPT_Wstrict_aliasing_3\n-- Performing Test OPT_Wstrict_aliasing_3 - Success\n-- Performing Test OPT_Wcast_align\n-- Performing Test OPT_Wcast_align - Success\n-- Performing Test OPT_Wtype_limits\n-- Performing Test OPT_Wtype_limits - Success\n-- Performing Test OPT_Wold_style_declaration\n-- Performing Test OPT_Wold_style_declaration - Success\n-- Performing Test OPT_Wmissing_parameter_type\n-- Performing Test OPT_Wmissing_parameter_type - Success\n-- Performing Test OPT_Wempty_body\n-- Performing Test OPT_Wempty_body - Success\n-- Performing Test OPT_Wclobbered\n-- Performing Test OPT_Wclobbered - Success\n-- Performing Test OPT_Wignored_qualifiers\n-- Performing Test OPT_Wignored_qualifiers - Success\n-- Performing Test OPT_Wconversion\n-- Performing Test OPT_Wconversion - Success\n-- Performing Test OPT_Wvla\n-- Performing Test OPT_Wvla - Success\n-- Performing Test OPT_Wdouble_promotion\n-- Performing Test OPT_Wdouble_promotion - Success\n-- Performing Test OPT_Wenum_conversion\n-- Performing Test OPT_Wenum_conversion - Success\n-- Performing Test OPT_Warith_conversion\n-- Performing Test OPT_Warith_conversion - Success\n-- Performing Test OPTlong_long\n-- Performing Test OPTlong_long - Success\n-- Performing Test OPTmultichar\n-- Performing Test OPTmultichar - Success\n-- Performing Test OPTformat_nonliteral\n-- Performing Test OPTformat_nonliteral - Success\n-- Performing Test OPTsign_conversion\n-- Performing Test OPTsign_conversion - Success\n-- Performing Test OPTsystem_headers\n-- Performing Test OPTsystem_headers - Success\n-- Performing Test OPTpedantic_ms_format\n-- Performing Test OPTpedantic_ms_format - Failed\n-- Performing Test HAVE_SOCKADDR_IN6_SIN6_ADDR\n-- Performing Test HAVE_SOCKADDR_IN6_SIN6_ADDR - Success\n-- Performing Test HAVE_SOCKADDR_IN6_SIN6_SCOPE_ID\n-- Performing Test HAVE_SOCKADDR_IN6_SIN6_SCOPE_ID - Success\n-- Found Perl: /usr/bin/perl (found version \"5.36.0\") \n-- Looking for connect in socket;\n-- Looking for connect in socket; - not found\n-- Looking for gethostname\n-- Looking for gethostname - found\n-- Found OpenSSL: /usr/lib/libcrypto.so (found version \"3.0.7\")  \n-- Looking for RAND_egd\n-- Looking for RAND_egd - not found\n-- Looking for OPENSSL_IS_BORINGSSL\n-- Looking for OPENSSL_IS_BORINGSSL - not found\n-- Found ZLIB: /usr/lib/libz.so (found version \"1.2.13\") \n-- Found LibPSL: /usr/lib/libpsl.so (found version \"0.21.2\") \n-- Looking for include file inttypes.h\n-- Looking for include file inttypes.h - found\n-- Looking for include files inttypes.h, sys/filio.h\n-- Looking for include files inttypes.h, sys/filio.h - not found\n-- Looking for include files inttypes.h, sys/ioctl.h\n-- Looking for include files inttypes.h, sys/ioctl.h - found\n-- Looking for 3 include files inttypes.h, ..., sys/param.h\n-- Looking for 3 include files inttypes.h, ..., sys/param.h - found\n-- Looking for 4 include files inttypes.h, ..., sys/poll.h\n-- Looking for 4 include files inttypes.h, ..., sys/poll.h - found\n-- Looking for 5 include files inttypes.h, ..., sys/resource.h\n-- Looking for 5 include files inttypes.h, ..., sys/resource.h - found\n-- Looking for 6 include files inttypes.h, ..., sys/select.h\n-- Looking for 6 include files inttypes.h, ..., sys/select.h - found\n-- Looking for 7 include files inttypes.h, ..., sys/socket.h\n-- Looking for 7 include files inttypes.h, ..., sys/socket.h - found\n-- Looking for 8 include files inttypes.h, ..., sys/sockio.h\n-- Looking for 8 include files inttypes.h, ..., sys/sockio.h - found\n-- Looking for 9 include files inttypes.h, ..., sys/stat.h\n-- Looking for 9 include files inttypes.h, ..., sys/stat.h - found\n-- Looking for 10 include files inttypes.h, ..., sys/time.h\n-- Looking for 10 include files inttypes.h, ..., sys/time.h - found\n-- Looking for 11 include files inttypes.h, ..., sys/types.h\n-- Looking for 11 include files inttypes.h, ..., sys/types.h - found\n-- Looking for 12 include files inttypes.h, ..., sys/un.h\n-- Looking for 12 include files inttypes.h, ..., sys/un.h - found\n-- Looking for 13 include files inttypes.h, ..., sys/utime.h\n-- Looking for 13 include files inttypes.h, ..., sys/utime.h - not found\n-- Looking for 13 include files inttypes.h, ..., sys/xattr.h\n-- Looking for 13 include files inttypes.h, ..., sys/xattr.h - found\n-- Looking for 14 include files inttypes.h, ..., arpa/inet.h\n-- Looking for 14 include files inttypes.h, ..., arpa/inet.h - found\n-- Looking for 15 include files inttypes.h, ..., arpa/tftp.h\n-- Looking for 15 include files inttypes.h, ..., arpa/tftp.h - found\n-- Looking for 16 include files inttypes.h, ..., fcntl.h\n-- Looking for 16 include files inttypes.h, ..., fcntl.h - found\n-- Looking for 17 include files inttypes.h, ..., idn2.h\n-- Looking for 17 include files inttypes.h, ..., idn2.h - found\n-- Looking for 18 include files inttypes.h, ..., ifaddrs.h\n-- Looking for 18 include files inttypes.h, ..., ifaddrs.h - found\n-- Looking for 19 include files inttypes.h, ..., io.h\n-- Looking for 19 include files inttypes.h, ..., io.h - not found\n-- Looking for 19 include files inttypes.h, ..., libgen.h\n-- Looking for 19 include files inttypes.h, ..., libgen.h - found\n-- Looking for 20 include files inttypes.h, ..., locale.h\n-- Looking for 20 include files inttypes.h, ..., locale.h - found\n-- Looking for 21 include files inttypes.h, ..., net/if.h\n-- Looking for 21 include files inttypes.h, ..., net/if.h - found\n-- Looking for 22 include files inttypes.h, ..., netdb.h\n-- Looking for 22 include files inttypes.h, ..., netdb.h - found\n-- Looking for 23 include files inttypes.h, ..., netinet/in.h\n-- Looking for 23 include files inttypes.h, ..., netinet/in.h - found\n-- Looking for 24 include files inttypes.h, ..., netinet/tcp.h\n-- Looking for 24 include files inttypes.h, ..., netinet/tcp.h - found\n-- Looking for linux/tcp.h\n-- Looking for linux/tcp.h - found\n-- Looking for 25 include files inttypes.h, ..., poll.h\n-- Looking for 25 include files inttypes.h, ..., poll.h - found\n-- Looking for 26 include files inttypes.h, ..., pwd.h\n-- Looking for 26 include files inttypes.h, ..., pwd.h - found\n-- Looking for 27 include files inttypes.h, ..., setjmp.h\n-- Looking for 27 include files inttypes.h, ..., setjmp.h - found\n-- Looking for 28 include files inttypes.h, ..., signal.h\n-- Looking for 28 include files inttypes.h, ..., signal.h - found\n-- Looking for 29 include files inttypes.h, ..., ssl.h\n-- Looking for 29 include files inttypes.h, ..., ssl.h - not found\n-- Looking for 29 include files inttypes.h, ..., stdatomic.h\n-- Looking for 29 include files inttypes.h, ..., stdatomic.h - found\n-- Looking for 30 include files inttypes.h, ..., stdbool.h\n-- Looking for 30 include files inttypes.h, ..., stdbool.h - found\n-- Looking for 31 include files inttypes.h, ..., stdint.h\n-- Looking for 31 include files inttypes.h, ..., stdint.h - found\n-- Looking for 32 include files inttypes.h, ..., stdlib.h\n-- Looking for 32 include files inttypes.h, ..., stdlib.h - found\n-- Looking for 33 include files inttypes.h, ..., string.h\n-- Looking for 33 include files inttypes.h, ..., string.h - found\n-- Looking for 34 include files inttypes.h, ..., strings.h\n-- Looking for 34 include files inttypes.h, ..., strings.h - found\n-- Looking for 35 include files inttypes.h, ..., stropts.h\n-- Looking for 35 include files inttypes.h, ..., stropts.h - not found\n-- Looking for 35 include files inttypes.h, ..., termio.h\n-- Looking for 35 include files inttypes.h, ..., termio.h - found\n-- Looking for 36 include files inttypes.h, ..., termios.h\n-- Looking for 36 include files inttypes.h, ..., termios.h - found\n-- Looking for 37 include files inttypes.h, ..., time.h\n-- Looking for 37 include files inttypes.h, ..., time.h - found\n-- Looking for 38 include files inttypes.h, ..., unistd.h\n-- Looking for 38 include files inttypes.h, ..., unistd.h - found\n-- Looking for 39 include files inttypes.h, ..., utime.h\n-- Looking for 39 include files inttypes.h, ..., utime.h - found\n-- Looking for 40 include files inttypes.h, ..., stddef.h\n-- Looking for 40 include files inttypes.h, ..., stddef.h - found\n-- Looking for 42 include files inttypes.h, ..., sys/utsname.h\n-- Looking for 42 include files inttypes.h, ..., sys/utsname.h - found\n-- Check size of size_t\n-- Check size of size_t - done\n-- Check size of ssize_t\n-- Check size of ssize_t - done\n-- Check size of long long\n-- Check size of long long - done\n-- Check size of long\n-- Check size of long - done\n-- Check size of int\n-- Check size of int - done\n-- Check size of __int64\n-- Check size of __int64 - failed\n-- Check size of time_t\n-- Check size of time_t - done\n-- Looking for fchmod\n-- Looking for fchmod - found\n-- Looking for basename\n-- Looking for basename - found\n-- Looking for socket\n-- Looking for socket - not found\n-- Looking for socketpair\n-- Looking for socketpair - not found\n-- Looking for recv\n-- Looking for recv - not found\n-- Looking for send\n-- Looking for send - not found\n-- Looking for sendmsg\n-- Looking for sendmsg - not found\n-- Looking for select\n-- Looking for select - found\n-- Looking for strdup\n-- Looking for strdup - found\n-- Looking for strtok_r\n-- Looking for strtok_r - found\n-- Looking for strcasecmp\n-- Looking for strcasecmp - found\n-- Looking for stricmp\n-- Looking for stricmp - not found\n-- Looking for strcmpi\n-- Looking for strcmpi - not found\n-- Looking for alarm\n-- Looking for alarm - found\n-- Looking for getppid\n-- Looking for getppid - found\n-- Looking for utimes\n-- Looking for utimes - found\n-- Looking for gettimeofday\n-- Looking for gettimeofday - found\n-- Looking for closesocket\n-- Looking for closesocket - not found\n-- Looking for sigsetjmp\n-- Looking for sigsetjmp - found\n-- Looking for getpass_r\n-- Looking for getpass_r - not found\n-- Looking for getpwuid\n-- Looking for getpwuid - found\n-- Looking for getpwuid_r\n-- Looking for getpwuid_r - found\n-- Looking for geteuid\n-- Looking for geteuid - found\n-- Looking for utime\n-- Looking for utime - found\n-- Looking for gmtime_r\n-- Looking for gmtime_r - found\n-- Looking for gethostbyname_r\n-- Looking for gethostbyname_r - not found\n-- Looking for signal\n-- Looking for signal - found\n-- Looking for strtoll\n-- Looking for strtoll - found\n-- Looking for _strtoi64\n-- Looking for _strtoi64 - not found\n-- Looking for strerror_r\n-- Looking for strerror_r - not found\n-- Looking for siginterrupt\n-- Looking for siginterrupt - found\n-- Looking for getaddrinfo\n-- Looking for getaddrinfo - not found\n-- Looking for freeaddrinfo\n-- Looking for freeaddrinfo - not found\n-- Looking for pipe\n-- Looking for pipe - found\n-- Looking for ftruncate\n-- Looking for ftruncate - found\n-- Looking for getpeername\n-- Looking for getpeername - not found\n-- Looking for getsockname\n-- Looking for getsockname - not found\n-- Looking for if_nametoindex\n-- Looking for if_nametoindex - not found\n-- Looking for getrlimit\n-- Looking for getrlimit - found\n-- Looking for setlocale\n-- Looking for setlocale - found\n-- Looking for setmode\n-- Looking for setmode - not found\n-- Looking for setrlimit\n-- Looking for setrlimit - found\n-- Looking for snprintf\n-- Looking for snprintf - found\n-- Looking for mach_absolute_time\n-- Looking for mach_absolute_time - not found\n-- Looking for inet_ntop\n-- Looking for inet_ntop - not found\n-- Looking for inet_pton\n-- Looking for inet_pton - not found\n-- Looking for fsetxattr\n-- Looking for fsetxattr - not found\n-- Check size of sa_family_t\n-- Check size of sa_family_t - done\n-- Check size of ADDRESS_FAMILY\n-- Check size of ADDRESS_FAMILY - failed\n-- Looking for sigaction\n-- Looking for sigaction - found\n-- Performing Curl Test HAVE_FCNTL_O_NONBLOCK\n-- Performing Curl Test HAVE_FCNTL_O_NONBLOCK - Success\n-- Performing Curl Test HAVE_IOCTLSOCKET\n-- Performing Curl Test HAVE_IOCTLSOCKET - Failed\n-- Performing Curl Test HAVE_IOCTLSOCKET_CAMEL\n-- Performing Curl Test HAVE_IOCTLSOCKET_CAMEL - Failed\n-- Performing Curl Test HAVE_IOCTLSOCKET_CAMEL_FIONBIO\n-- Performing Curl Test HAVE_IOCTLSOCKET_CAMEL_FIONBIO - Failed\n-- Performing Curl Test HAVE_IOCTLSOCKET_FIONBIO\n-- Performing Curl Test HAVE_IOCTLSOCKET_FIONBIO - Failed\n-- Performing Curl Test HAVE_IOCTL_FIONBIO\n-- Performing Curl Test HAVE_IOCTL_FIONBIO - Success\n-- Performing Curl Test HAVE_IOCTL_SIOCGIFADDR\n-- Performing Curl Test HAVE_IOCTL_SIOCGIFADDR - Failed\n-- Performing Curl Test HAVE_SETSOCKOPT_SO_NONBLOCK\n-- Performing Curl Test HAVE_SETSOCKOPT_SO_NONBLOCK - Failed\n-- Performing Curl Test TIME_WITH_SYS_TIME\n-- Performing Curl Test TIME_WITH_SYS_TIME - Success\n-- Performing Curl Test HAVE_O_NONBLOCK\n-- Performing Curl Test HAVE_O_NONBLOCK - Failed\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_3\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_3 - Failed\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_5\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_5 - Failed\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_6\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_6 - Failed\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_3_REENTRANT\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_3_REENTRANT - Failed\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_5_REENTRANT\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_5_REENTRANT - Failed\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_6_REENTRANT\n-- Performing Curl Test HAVE_GETHOSTBYNAME_R_6_REENTRANT - Failed\n-- Performing Curl Test HAVE_IN_ADDR_T\n-- Performing Curl Test HAVE_IN_ADDR_T - Success\n-- Performing Curl Test HAVE_BOOL_T\n-- Performing Curl Test HAVE_BOOL_T - Success\n-- Performing Curl Test STDC_HEADERS\n-- Performing Curl Test STDC_HEADERS - Success\n-- Performing Curl Test HAVE_FILE_OFFSET_BITS\n-- Performing Curl Test HAVE_FILE_OFFSET_BITS - Success\n-- Performing Curl Test HAVE_VARIADIC_MACROS_C99\n-- Performing Curl Test HAVE_VARIADIC_MACROS_C99 - Success\n-- Performing Curl Test HAVE_VARIADIC_MACROS_GCC\n-- Performing Curl Test HAVE_VARIADIC_MACROS_GCC - Success\n-- Performing Curl Test HAVE_ATOMIC\n-- Performing Curl Test HAVE_ATOMIC - Success\n-- Check size of off_t\n-- Check size of off_t - done\n-- Check size of curl_off_t\n-- Check size of curl_off_t - done\n-- Performing Curl Test HAVE_GLIBC_STRERROR_R\n-- Performing Curl Test HAVE_GLIBC_STRERROR_R - Failed\n-- Performing Curl Test HAVE_POSIX_STRERROR_R\n-- Performing Curl Test HAVE_POSIX_STRERROR_R - Success\n-- Performing Curl Test HAVE_CLOCK_GETTIME_MONOTONIC\n-- Performing Curl Test HAVE_CLOCK_GETTIME_MONOTONIC - Success\n-- Performing Curl Test HAVE_BUILTIN_AVAILABLE\n-- Performing Curl Test HAVE_BUILTIN_AVAILABLE - Failed\n-- Performing Test HAVE_MSG_NOSIGNAL\n-- Performing Test HAVE_MSG_NOSIGNAL - Success\n-- Performing Test HAVE_STRUCT_TIMEVAL\n-- Performing Test HAVE_STRUCT_TIMEVAL - Success\n-- Check size of struct sockaddr_storage\n-- Check size of struct sockaddr_storage - done\n-- Performing Test HAVE_POLL_FINE\n-- Performing Test HAVE_POLL_FINE - Failed\n-- Enabled features: SSL IPv6 libz Largefile HTTPS-proxy threadsafe PSL\n-- Enabled protocols: HTTP HTTPS\n-- Enabled SSL backends: OpenSSL\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/kartatz/curl\n```\n\nLooking at these logs I see curl was not able to find any socket-related function:\n\n```\n-- Looking for socket\n-- Looking for socket - not found\n-- Looking for socketpair\n-- Looking for socketpair - not found\n-- Looking for recv\n-- Looking for recv - not found\n-- Looking for send\n-- Looking for send - not found\n-- Looking for sendmsg\n-- Looking for sendmsg - not found\n```\n\nBut they are all properly defined in the `sys/socket.h` header:\n\n```\n$ grep --extended-regexp '(sendmsg|socketpair|socket|send|recv)\\(' \"${HOME}/unknown-unknown-haiku/x86_64-unknown-haiku/develop/headers/posix/sys/socket.h\"\nssize_t recv(int socket, void *buffer, size_t length, int flags);\nssize_t send(int socket, const void *buffer, size_t length, int flags);\nssize_t\tsendmsg(int socket, const struct msghdr *message, int flags);\nint\t\tsocket(int domain, int type, int protocol);\nint\t\tsocketpair(int domain, int type, int protocol, int socketVector[2]);\n```\n\nAfter a bit of research I found out Haiku requires all socket programs to link against `-lnetwork` ([source](https://freelists.org/post/haiku-development/gcc-ld-and-sockets-under-Haiku,1)).\n\nSo I changed the C compiler command invocation from:\n\n```\n-DCMAKE_C_COMPILER=${HOME}/unknown-unknown-haiku/bin/x86_64-unknown-haiku-gcc\n```\n\nto\n\n```\n-DCMAKE_C_COMPILER=\"${HOME}/unknown-unknown-haiku/bin/x86_64-unknown-haiku-gcc -lnetwork\"\n```\n\nAnd the build went just fine.\n\nHere is the [cross compiler](https://github.com/AmanoTeam/Haiku-Cross/releases/tag/11.2.0) I used, just in case someone want to reproduce this issue.\n\n### I expected the following\n\nLibcurl builds successful.\n\n### curl/libcurl version\n\nLatest [master](https://github.com/curl/curl/commit/6113dec2a829d4ab766428ccca9535b7a5efd012).\n\n### operating system\n\n<!-- On Unix please post the output of \"uname -a\" -->\n\n```\n$ uname -a\nLinux archlinux 6.1.5-arch2-1 #1 SMP PREEMPT_DYNAMIC Thu, 12 Jan 2023 22:42:33 +0000 x86_64 GNU/Linux\n```","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/10296/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/10296/timeline","performed_via_github_app":null,"state_reason":"completed"}