{"url":"https://api.github.com/repos/curl/curl/issues/17979","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/17979/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/17979/comments","events_url":"https://api.github.com/repos/curl/curl/issues/17979/events","html_url":"https://github.com/curl/curl/issues/17979","id":3246504515,"node_id":"I_kwDOAAiu0c7BgbpD","number":17979,"title":"cURL 8.15.0 fails to build for 64-Bit Windows XP target (mingw-w64), but not for 32-Bit Windows target","user":{"login":"lordmulder","id":470590,"node_id":"MDQ6VXNlcjQ3MDU5MA==","avatar_url":"https://avatars.githubusercontent.com/u/470590?v=4","gravatar_id":"","url":"https://api.github.com/users/lordmulder","html_url":"https://github.com/lordmulder","followers_url":"https://api.github.com/users/lordmulder/followers","following_url":"https://api.github.com/users/lordmulder/following{/other_user}","gists_url":"https://api.github.com/users/lordmulder/gists{/gist_id}","starred_url":"https://api.github.com/users/lordmulder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lordmulder/subscriptions","organizations_url":"https://api.github.com/users/lordmulder/orgs","repos_url":"https://api.github.com/users/lordmulder/repos","events_url":"https://api.github.com/users/lordmulder/events{/privacy}","received_events_url":"https://api.github.com/users/lordmulder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null},{"id":940032249,"node_id":"MDU6TGFiZWw5NDAwMzIyNDk=","url":"https://api.github.com/repos/curl/curl/labels/Windows","name":"Windows","color":"0e8a16","default":false,"description":"Windows-specific"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2025-07-20T16:46:06Z","updated_at":"2025-07-21T11:31:26Z","closed_at":"2025-07-21T11:30:30Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nI'm trying to build cURL 8.15.0 from the sources on Windows 11 with msys2/mingw-w64.\n\n```\nCFLAGS=\"-flto\" CPPFLAGS=\"-DNDEBUG -D_WIN32_WINNT=0x0501 -DNGHTTP2_STATICLIB -DNGHTTP3_STATICLIB -DNGTCP2_STATICLIB -DUNICODE -D_UNICODE\" LDFLAGS=\"-mconsole -Wl,--trace -static -flto -no-pthread LIBS=\"-liconv -lcrypt32 -lwinmm -lbrotlicommon\" ./configure --enable-static --disable-shared --enable-windows-unicode --disable-libcurl-option --disable-openssl-auto-load-config --enable-ca-search-safe --with-zlib --with-openssl --with-libidn2 --without-ca-bundle --with-zstd --with-brotli --with-librtmp --with-libssh2 --with-nghttp2 --with-ngtcp2 --with-nghttp3\nmake V=1\n```\n\n### I expected the following\n\nThe build should complete successfully, but the 64-Bit build fails with:\n```\nurl.c:1802:18: error: implicit declaration of function 'if_nametoindex' [-Wimplicit-function-declaration]\n 1802 |       scopeidx = if_nametoindex(zoneid);\n      |                  ^~~~~~~~~~~~~~\nmake[2]: *** [Makefile:3265: libcurl_la-url.lo] Error 1\n```\n\nThis is a new problem that didn't exit in 8.14.1, and it only happens when targeting 64-Bit (`mingw64.exe`).\n\nThe 32-Bit build (`mingw32.exe`) completed just fine.\n\nOne thing I noticed is that 32-Bit build has this in its `curl_config.h`:\n```\n/* Define to 1 if you have the `if_nametoindex' function. */\n/* #undef HAVE_IF_NAMETOINDEX */\n```\n\n...whereas the 64-Bit build has:\n```\n/* Define to 1 if you have the `if_nametoindex' function. */\n#define HAVE_IF_NAMETOINDEX 1\n```\n\n**Full log here:**  \nhttps://gist.github.com/lordmulder/5a05908e743d284b9cdb04302fb51f29\n\n### curl/libcurl version\n\n8.15.0\n\n### operating system\n\nWindows 11 24H2, mingw-w64 fully updated","closed_by":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/17979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/17979/timeline","performed_via_github_app":null,"state_reason":"completed"}