[{"url":"https://api.github.com/repos/curl/curl/issues/comments/2038446361","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2038446361","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2038446361,"node_id":"IC_kwDOAAiu0c55gDkZ","user":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-04T23:32:28Z","updated_at":"2024-04-04T23:43:06Z","body":"Dug around a little, and I suspect that this is intended behavior due to https://github.com/curl/curl/pull/10625, and it's just the example that needs updating, similar to https://github.com/curl/curl/issues/10760\r\n\r\nthough I'm not sure a crude busy-loop is a good example to follow either","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2038446361/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12394353286,"node_id":"LE_lADOAAiu0c6EuJmAzwAAAALiwtKG","url":"https://api.github.com/repos/curl/curl/issues/events/12394353286","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-04-08T14:51:13Z","label":{"name":"WebSocket","color":"A51BBC"},"performed_via_github_app":null},{"id":13346400476,"node_id":"AE_lADOAAiu0c6EuJmAzwAAAAMbgejc","url":"https://api.github.com/repos/curl/curl/issues/events/13346400476","actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-07-01T07:14:19Z","assignee":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":13540986230,"node_id":"REFE_lADOAAiu0c6EuJmAzwAAAAMnGw12","url":"https://api.github.com/repos/curl/curl/issues/events/13540986230","actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"732da22002f38ec1042e2107c3923de4e6d80e35","commit_url":"https://api.github.com/repos/jay/curl/commits/732da22002f38ec1042e2107c3923de4e6d80e35","created_at":"2024-07-17T18:19:09Z","performed_via_github_app":null},{"id":13540989081,"node_id":"REFE_lADOAAiu0c6EuJmAzwAAAAMnGxiZ","url":"https://api.github.com/repos/curl/curl/issues/events/13540989081","actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ba5cc0bc9e67d1be666f4eec2ca51e10386782e1","commit_url":"https://api.github.com/repos/jay/curl/commits/ba5cc0bc9e67d1be666f4eec2ca51e10386782e1","created_at":"2024-07-17T18:19:19Z","performed_via_github_app":null},{"actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-07-17T18:32:38Z","updated_at":"2024-07-17T18:32:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/14214","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/14214/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/14214/comments","events_url":"https://api.github.com/repos/curl/curl/issues/14214/events","html_url":"https://github.com/curl/curl/pull/14214","id":2414302370,"node_id":"PR_kwDOAAiu0c51re8i","number":14214,"title":"docs/examples/websocket: fix \"socket not ready\" on recv","user":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":200869765,"node_id":"MDU6TGFiZWwyMDA4Njk3NjU=","url":"https://api.github.com/repos/curl/curl/labels/documentation","name":"documentation","color":"f7c6c7","default":true,"description":null},{"id":1117926199,"node_id":"MDU6TGFiZWwxMTE3OTI2MTk5","url":"https://api.github.com/repos/curl/curl/labels/libcurl%20API","name":"libcurl API","color":"fef2c0","default":false,"description":""},{"id":4294582278,"node_id":"LA_kwDOAAiu0c7_-iAG","url":"https://api.github.com/repos/curl/curl/labels/WebSocket","name":"WebSocket","color":"A51BBC","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-07-17T18:32:38Z","updated_at":"2024-12-19T20:55:53Z","closed_at":"2024-12-19T20:42:42Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T12:40:38Z","pushed_at":"2025-11-10T12:40:38Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":40,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/14214","html_url":"https://github.com/curl/curl/pull/14214","diff_url":"https://github.com/curl/curl/pull/14214.diff","patch_url":"https://github.com/curl/curl/pull/14214.patch","merged_at":null},"body":"- Overhaul the recv_any function to block waiting for a complete websocket message from the server.\r\n\r\n- Have recv_pong and recv_header call recv_any to retrieve a complete message, rather than duplicate the efforts in each function.\r\n\r\n- Fix sleep() macro for Windows to treat the parameter as seconds instead of milliseconds.\r\n\r\n- Improve documentation of curl_ws_recv/send to better explain CURLE_AGAIN behavior.\r\n\r\n- Use echo.websocket.org instead of example.com as the example websocket server since it is a server the example actually works on.\r\n\r\nrecv_any now calls curl_ws_recv repeatedly, waiting until the socket is readable and a full websocket message is read from the server.\r\n\r\nPrior to this change the example did not handle the non-blocking behavior of curl_ws_recv. When curl_ws_recv returned CURLE_AGAIN the example would fail with \"socket not ready\".\r\n\r\nFixes https://github.com/curl/curl/issues/13288\r\nCloses #xxxx\r\n\r\n---\r\n\r\nThis is the second take. The first take is in [jay:curl:fix_websocket_example__alternate_take](https://github.com/curl/curl/compare/master...jay:curl:fix_websocket_example__alternate_take). The first take is more thorough because I wrote a blocking function that can return incomplete non-control messages when they are disrupted by a control message. However after I wrote it I thought it was too complicated for the example.\r\n\r\nThis only fixes the example for recv. Neither take covers partial sends. It's unclear to me what to do in that case. For example let's say curl_ws_send is called to send a PING with a payload of 6 bytes, but when it returns only 5 of the 6 bytes of payload were sent. What is the caller supposed to do in that case, has the PING been sent with just the 5 bytes or is it waiting to send the remaining byte and curl_ws_send has to be called again with offset?","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/14214/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/14214/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":13577931520,"node_id":"REFE_lADOAAiu0c6EuJmAzwAAAAMpTssA","url":"https://api.github.com/repos/curl/curl/issues/events/13577931520","actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1b9230ed60fe88c94f8142785a576fe9733559a4","commit_url":"https://api.github.com/repos/jay/curl/commits/1b9230ed60fe88c94f8142785a576fe9733559a4","created_at":"2024-07-19T16:50:49Z","performed_via_github_app":null},{"id":13756137897,"node_id":"REFE_lADOAAiu0c6EuJmAzwAAAAMz7gGp","url":"https://api.github.com/repos/curl/curl/issues/events/13756137897","actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"21a8485ca0208a83d570e71aa6ed5089a36c8bdf","commit_url":"https://api.github.com/repos/jay/curl/commits/21a8485ca0208a83d570e71aa6ed5089a36c8bdf","created_at":"2024-08-04T22:54:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2677675513","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2677675513","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2677675513,"node_id":"IC_kwDOAAiu0c6fmhX5","user":{"login":"MonkeybreadSoftware","id":1464807,"node_id":"MDQ6VXNlcjE0NjQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1464807?v=4","gravatar_id":"","url":"https://api.github.com/users/MonkeybreadSoftware","html_url":"https://github.com/MonkeybreadSoftware","followers_url":"https://api.github.com/users/MonkeybreadSoftware/followers","following_url":"https://api.github.com/users/MonkeybreadSoftware/following{/other_user}","gists_url":"https://api.github.com/users/MonkeybreadSoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/MonkeybreadSoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonkeybreadSoftware/subscriptions","organizations_url":"https://api.github.com/users/MonkeybreadSoftware/orgs","repos_url":"https://api.github.com/users/MonkeybreadSoftware/repos","events_url":"https://api.github.com/users/MonkeybreadSoftware/events{/privacy}","received_events_url":"https://api.github.com/users/MonkeybreadSoftware/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-24T08:04:45Z","updated_at":"2025-02-24T08:05:15Z","body":"Shouldn't you simply update the example to do `curl_ws_recv` again when you get `CURLE_AGAIN`. Better with a short pause to avoid the CPU running on 100%.\n\n```\n\tCURLcode result = curl_ws_recv(curl, buffer, sizeof(buffer), &rlen, &meta);\n\twhile (result == CURLE_AGAIN)\n\t{\n\t\tCurl_wait_ms(1);\n\t\tresult = curl_ws_recv(curl, buffer, sizeof(buffer), &rlen, &meta);\n\t}\n\n```\nThe socket has not yet received data, so you may wait a bit more for data to arrive.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2677675513/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MonkeybreadSoftware","id":1464807,"node_id":"MDQ6VXNlcjE0NjQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1464807?v=4","gravatar_id":"","url":"https://api.github.com/users/MonkeybreadSoftware","html_url":"https://github.com/MonkeybreadSoftware","followers_url":"https://api.github.com/users/MonkeybreadSoftware/followers","following_url":"https://api.github.com/users/MonkeybreadSoftware/following{/other_user}","gists_url":"https://api.github.com/users/MonkeybreadSoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/MonkeybreadSoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonkeybreadSoftware/subscriptions","organizations_url":"https://api.github.com/users/MonkeybreadSoftware/orgs","repos_url":"https://api.github.com/users/MonkeybreadSoftware/repos","events_url":"https://api.github.com/users/MonkeybreadSoftware/events{/privacy}","received_events_url":"https://api.github.com/users/MonkeybreadSoftware/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678195271","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2678195271","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2678195271,"node_id":"IC_kwDOAAiu0c6fogRH","user":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-24T11:53:46Z","updated_at":"2025-02-24T11:53:46Z","body":"it would be an improvement but there should be an actual select or callback-based API to figure out when to poll again. busy-polling as you do it will make the example correct but not fit for real-world use","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678195271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678211397","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2678211397","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2678211397,"node_id":"IC_kwDOAAiu0c6fokNF","user":{"login":"MonkeybreadSoftware","id":1464807,"node_id":"MDQ6VXNlcjE0NjQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1464807?v=4","gravatar_id":"","url":"https://api.github.com/users/MonkeybreadSoftware","html_url":"https://github.com/MonkeybreadSoftware","followers_url":"https://api.github.com/users/MonkeybreadSoftware/followers","following_url":"https://api.github.com/users/MonkeybreadSoftware/following{/other_user}","gists_url":"https://api.github.com/users/MonkeybreadSoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/MonkeybreadSoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonkeybreadSoftware/subscriptions","organizations_url":"https://api.github.com/users/MonkeybreadSoftware/orgs","repos_url":"https://api.github.com/users/MonkeybreadSoftware/repos","events_url":"https://api.github.com/users/MonkeybreadSoftware/events{/privacy}","received_events_url":"https://api.github.com/users/MonkeybreadSoftware/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-24T12:00:29Z","updated_at":"2025-02-24T12:00:29Z","body":"well, in a real world app, the app would have a timer to periodically check and call curl_ws_recv to see if data arrived.\n\nFor the point of view of the CURL library, I think returning CURLE_AGAIN should be fine as there is not yet something to do.\nThe example could be updated. I may make a pr for this.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678211397/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MonkeybreadSoftware","id":1464807,"node_id":"MDQ6VXNlcjE0NjQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1464807?v=4","gravatar_id":"","url":"https://api.github.com/users/MonkeybreadSoftware","html_url":"https://github.com/MonkeybreadSoftware","followers_url":"https://api.github.com/users/MonkeybreadSoftware/followers","following_url":"https://api.github.com/users/MonkeybreadSoftware/following{/other_user}","gists_url":"https://api.github.com/users/MonkeybreadSoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/MonkeybreadSoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonkeybreadSoftware/subscriptions","organizations_url":"https://api.github.com/users/MonkeybreadSoftware/orgs","repos_url":"https://api.github.com/users/MonkeybreadSoftware/repos","events_url":"https://api.github.com/users/MonkeybreadSoftware/events{/privacy}","received_events_url":"https://api.github.com/users/MonkeybreadSoftware/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678235045","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2678235045","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2678235045,"node_id":"IC_kwDOAAiu0c6fop-l","user":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-24T12:10:36Z","updated_at":"2025-02-24T12:10:36Z","body":"> well, in a real world app, the app would have a timer to periodically check and call curl_ws_recv to see if data arrived.\n\nI'm saying that this is not good enough. there is no reason an idle socket should have to use the CPU except API limitations, and if you do this, you have to adjust the timer to not add too much latency.\n\nI can't remember the details but I vaguely remember that select-ing the underlying raw socket worked for me.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678235045/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678238638","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2678238638","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2678238638,"node_id":"IC_kwDOAAiu0c6foq2u","user":{"login":"MonkeybreadSoftware","id":1464807,"node_id":"MDQ6VXNlcjE0NjQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1464807?v=4","gravatar_id":"","url":"https://api.github.com/users/MonkeybreadSoftware","html_url":"https://github.com/MonkeybreadSoftware","followers_url":"https://api.github.com/users/MonkeybreadSoftware/followers","following_url":"https://api.github.com/users/MonkeybreadSoftware/following{/other_user}","gists_url":"https://api.github.com/users/MonkeybreadSoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/MonkeybreadSoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonkeybreadSoftware/subscriptions","organizations_url":"https://api.github.com/users/MonkeybreadSoftware/orgs","repos_url":"https://api.github.com/users/MonkeybreadSoftware/repos","events_url":"https://api.github.com/users/MonkeybreadSoftware/events{/privacy}","received_events_url":"https://api.github.com/users/MonkeybreadSoftware/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-02-24T12:12:08Z","updated_at":"2025-02-24T12:12:08Z","body":"You can also use Select here.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2678238638/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MonkeybreadSoftware","id":1464807,"node_id":"MDQ6VXNlcjE0NjQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/1464807?v=4","gravatar_id":"","url":"https://api.github.com/users/MonkeybreadSoftware","html_url":"https://github.com/MonkeybreadSoftware","followers_url":"https://api.github.com/users/MonkeybreadSoftware/followers","following_url":"https://api.github.com/users/MonkeybreadSoftware/following{/other_user}","gists_url":"https://api.github.com/users/MonkeybreadSoftware/gists{/gist_id}","starred_url":"https://api.github.com/users/MonkeybreadSoftware/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MonkeybreadSoftware/subscriptions","organizations_url":"https://api.github.com/users/MonkeybreadSoftware/orgs","repos_url":"https://api.github.com/users/MonkeybreadSoftware/repos","events_url":"https://api.github.com/users/MonkeybreadSoftware/events{/privacy}","received_events_url":"https://api.github.com/users/MonkeybreadSoftware/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2735199681","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2735199681","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2735199681,"node_id":"IC_kwDOAAiu0c6jB9XB","user":{"login":"artazhang","id":34409331,"node_id":"MDQ6VXNlcjM0NDA5MzMx","avatar_url":"https://avatars.githubusercontent.com/u/34409331?v=4","gravatar_id":"","url":"https://api.github.com/users/artazhang","html_url":"https://github.com/artazhang","followers_url":"https://api.github.com/users/artazhang/followers","following_url":"https://api.github.com/users/artazhang/following{/other_user}","gists_url":"https://api.github.com/users/artazhang/gists{/gist_id}","starred_url":"https://api.github.com/users/artazhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artazhang/subscriptions","organizations_url":"https://api.github.com/users/artazhang/orgs","repos_url":"https://api.github.com/users/artazhang/repos","events_url":"https://api.github.com/users/artazhang/events{/privacy}","received_events_url":"https://api.github.com/users/artazhang/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-03-19T02:59:02Z","updated_at":"2025-06-27T08:34:32Z","body":"I don't know if you've dealt with this issue. I've encountered a similar problem. My solution is to check if the HTTP header contains \"HTTP/1.1 101 Switching Protocols\" during HTTP authentication and the WebSocket protocol upgrade. I use a blocking semaphore to wait for the completion of the header information confirmation. At this point, I believe the protocol has been upgraded, so I use curl_ws_send() to send data.\n\n```c\ncurl_easy_setopt(curl_, CURLOPT_HEADERFUNCTION,\n                           &header_callback);\nauto ret = notification_.wait(3); // wait 3 seconds timeout for websocket connect\n\nif(!ret){\n// timeout connect error\nreturn false;\n}\n\nsize_t header_callback(char* data, size_t size,size_t nmemb, void* userp) {\n  auto total_size = size * nmemb;\n  if (userp == nullptr) {\n    return total_size;\n  }\n  // makesure the websocket connection is established\n  if (strstr(data, \"HTTP/1.1 101 Switching Protocols\") != nullptr) {\n    notification_.Notify();\n  }\n  return total_size;\n}\n``` \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2735199681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"artazhang","id":34409331,"node_id":"MDQ6VXNlcjM0NDA5MzMx","avatar_url":"https://avatars.githubusercontent.com/u/34409331?v=4","gravatar_id":"","url":"https://api.github.com/users/artazhang","html_url":"https://github.com/artazhang","followers_url":"https://api.github.com/users/artazhang/followers","following_url":"https://api.github.com/users/artazhang/following{/other_user}","gists_url":"https://api.github.com/users/artazhang/gists{/gist_id}","starred_url":"https://api.github.com/users/artazhang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/artazhang/subscriptions","organizations_url":"https://api.github.com/users/artazhang/orgs","repos_url":"https://api.github.com/users/artazhang/repos","events_url":"https://api.github.com/users/artazhang/events{/privacy}","received_events_url":"https://api.github.com/users/artazhang/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2810283980","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2810283980","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2810283980,"node_id":"IC_kwDOAAiu0c6ngYfM","user":{"login":"hdante","id":1185012,"node_id":"MDQ6VXNlcjExODUwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1185012?v=4","gravatar_id":"","url":"https://api.github.com/users/hdante","html_url":"https://github.com/hdante","followers_url":"https://api.github.com/users/hdante/followers","following_url":"https://api.github.com/users/hdante/following{/other_user}","gists_url":"https://api.github.com/users/hdante/gists{/gist_id}","starred_url":"https://api.github.com/users/hdante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hdante/subscriptions","organizations_url":"https://api.github.com/users/hdante/orgs","repos_url":"https://api.github.com/users/hdante/repos","events_url":"https://api.github.com/users/hdante/events{/privacy}","received_events_url":"https://api.github.com/users/hdante/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-16T17:47:33Z","updated_at":"2025-04-16T17:47:33Z","body":"Hello, everyone, I confirm (with `strace`) that the socket is in non-blocking mode and fails with EAGAIN. @untitaker, blocking is already supported and a busy-loop is not required:\n\n```c\ncurl_easy_setopt(curl, CURLOPT_URL, URI);\ncurl_easy_setopt(curl, CURLOPT_CONNECT_ONLY, 2);\n\nres = curl_easy_perform(curl);\nif(res != CURLE_OK)\n\tpanic(\"curl_easy_perform() failed: %s\\n\", curl_easy_strerror(res));\n\nres = curl_easy_getinfo(curl, CURLINFO_ACTIVESOCKET, &sk);\nif(res != CURLE_OK)\n\tpanic(\"CURLINFO_ACTIVESOCKET failed: %s\\n\", curl_easy_strerror(res));\n\nwhile (!done) {\n\tpoll(&(struct pollfd){ .fd = sk, .events = POLLIN }, 1, -1);\n\n\tdo {\n\t\tres = curl_ws_recv(curl, buff, sizeof(buff), &r, &meta);\n\n\t\tif (res == CURLE_OK)\n\t\t\tdone = process(buff, sizeof(buff));\n\t\telse if (res != CURLE_AGAIN)\n\t\t\tpanic(\"curl_ws_recv() failed: %s\\n\", curl_easy_strerror(res));\n\t} while (res == CURLE_OK);\n}\n\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2810283980/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hdante","id":1185012,"node_id":"MDQ6VXNlcjExODUwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1185012?v=4","gravatar_id":"","url":"https://api.github.com/users/hdante","html_url":"https://github.com/hdante","followers_url":"https://api.github.com/users/hdante/followers","following_url":"https://api.github.com/users/hdante/following{/other_user}","gists_url":"https://api.github.com/users/hdante/gists{/gist_id}","starred_url":"https://api.github.com/users/hdante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hdante/subscriptions","organizations_url":"https://api.github.com/users/hdante/orgs","repos_url":"https://api.github.com/users/hdante/repos","events_url":"https://api.github.com/users/hdante/events{/privacy}","received_events_url":"https://api.github.com/users/hdante/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17293411631,"node_id":"MEE_lADOAAiu0c6EuJmAzwAAAAQGxIUv","url":"https://api.github.com/repos/curl/curl/issues/events/17293411631","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-04-16T17:47:34Z","performed_via_github_app":null},{"id":17293411657,"node_id":"SE_lADOAAiu0c6EuJmAzwAAAAQGxIVJ","url":"https://api.github.com/repos/curl/curl/issues/events/17293411657","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-04-16T17:47:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2812535637","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2812535637","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2812535637,"node_id":"IC_kwDOAAiu0c6no-NV","user":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-17T11:11:52Z","updated_at":"2025-04-17T11:12:17Z","body":"okay, that works, thanks. i'm not entirely sure how/why i can poll on the underlying socket for any amount of bytes, and then also be able to expect that the wrapping websocket parser is also immediately ready to give me an entire message. but i guess in that case I might just spin for a very short time.\n\nin that case, this is just a documentation issue.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2812535637/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"untitaker","id":837573,"node_id":"MDQ6VXNlcjgzNzU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/837573?v=4","gravatar_id":"","url":"https://api.github.com/users/untitaker","html_url":"https://github.com/untitaker","followers_url":"https://api.github.com/users/untitaker/followers","following_url":"https://api.github.com/users/untitaker/following{/other_user}","gists_url":"https://api.github.com/users/untitaker/gists{/gist_id}","starred_url":"https://api.github.com/users/untitaker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/untitaker/subscriptions","organizations_url":"https://api.github.com/users/untitaker/orgs","repos_url":"https://api.github.com/users/untitaker/repos","events_url":"https://api.github.com/users/untitaker/events{/privacy}","received_events_url":"https://api.github.com/users/untitaker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2813886865","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2813886865","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2813886865,"node_id":"IC_kwDOAAiu0c6nuIGR","user":{"login":"hdante","id":1185012,"node_id":"MDQ6VXNlcjExODUwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1185012?v=4","gravatar_id":"","url":"https://api.github.com/users/hdante","html_url":"https://github.com/hdante","followers_url":"https://api.github.com/users/hdante/followers","following_url":"https://api.github.com/users/hdante/following{/other_user}","gists_url":"https://api.github.com/users/hdante/gists{/gist_id}","starred_url":"https://api.github.com/users/hdante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hdante/subscriptions","organizations_url":"https://api.github.com/users/hdante/orgs","repos_url":"https://api.github.com/users/hdante/repos","events_url":"https://api.github.com/users/hdante/events{/privacy}","received_events_url":"https://api.github.com/users/hdante/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-17T19:55:51Z","updated_at":"2025-04-17T19:55:51Z","body":"Hello, you can't do that, you can only poll for the existence of a single byte and then make some progress in receiving the whole websocket packet, even if the progress just means buffering that single byte and going back to blocking. Not a problem at all, no spin necessary at all.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2813886865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hdante","id":1185012,"node_id":"MDQ6VXNlcjExODUwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1185012?v=4","gravatar_id":"","url":"https://api.github.com/users/hdante","html_url":"https://github.com/hdante","followers_url":"https://api.github.com/users/hdante/followers","following_url":"https://api.github.com/users/hdante/following{/other_user}","gists_url":"https://api.github.com/users/hdante/gists{/gist_id}","starred_url":"https://api.github.com/users/hdante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hdante/subscriptions","organizations_url":"https://api.github.com/users/hdante/orgs","repos_url":"https://api.github.com/users/hdante/repos","events_url":"https://api.github.com/users/hdante/events{/privacy}","received_events_url":"https://api.github.com/users/hdante/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2990117172","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-2990117172","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":2990117172,"node_id":"IC_kwDOAAiu0c6yOZE0","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-20T07:29:08Z","updated_at":"2025-06-20T07:29:08Z","body":"To summarise:\n\n- the solution proposed by @hdante works and solves the problem\n- the curl example code in `docs/example/websockt.c` needs an update. This is held back by lack of platform agnostic \"poll\". Alternative would be a libcurl API extension like `curl_multi_wait()` but for a single easy handle.\n\nWe need to update the example. It is currently misleading.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2990117172/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":18241074626,"node_id":"MEE_lADOAAiu0c6EuJmAzwAAAAQ_QLXC","url":"https://api.github.com/repos/curl/curl/issues/events/18241074626","actor":{"login":"hdante","id":1185012,"node_id":"MDQ6VXNlcjExODUwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1185012?v=4","gravatar_id":"","url":"https://api.github.com/users/hdante","html_url":"https://github.com/hdante","followers_url":"https://api.github.com/users/hdante/followers","following_url":"https://api.github.com/users/hdante/following{/other_user}","gists_url":"https://api.github.com/users/hdante/gists{/gist_id}","starred_url":"https://api.github.com/users/hdante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hdante/subscriptions","organizations_url":"https://api.github.com/users/hdante/orgs","repos_url":"https://api.github.com/users/hdante/repos","events_url":"https://api.github.com/users/hdante/events{/privacy}","received_events_url":"https://api.github.com/users/hdante/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-06-20T07:29:09Z","performed_via_github_app":null},{"id":18241074655,"node_id":"SE_lADOAAiu0c6EuJmAzwAAAAQ_QLXf","url":"https://api.github.com/repos/curl/curl/issues/events/18241074655","actor":{"login":"hdante","id":1185012,"node_id":"MDQ6VXNlcjExODUwMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1185012?v=4","gravatar_id":"","url":"https://api.github.com/users/hdante","html_url":"https://github.com/hdante","followers_url":"https://api.github.com/users/hdante/followers","following_url":"https://api.github.com/users/hdante/following{/other_user}","gists_url":"https://api.github.com/users/hdante/gists{/gist_id}","starred_url":"https://api.github.com/users/hdante/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hdante/subscriptions","organizations_url":"https://api.github.com/users/hdante/orgs","repos_url":"https://api.github.com/users/hdante/repos","events_url":"https://api.github.com/users/hdante/events{/privacy}","received_events_url":"https://api.github.com/users/hdante/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-06-20T07:29:09Z","performed_via_github_app":null},{"actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-20T07:32:44Z","updated_at":"2025-06-20T07:32:44Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/15780","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/15780/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/15780/comments","events_url":"https://api.github.com/repos/curl/curl/issues/15780/events","html_url":"https://github.com/curl/curl/issues/15780","id":2750420273,"node_id":"I_kwDOAAiu0c6j8BUx","number":15780,"title":"Websocket fails to keep connected when using curl_multi API","user":{"login":"pksadiq","id":1289514,"node_id":"MDQ6VXNlcjEyODk1MTQ=","avatar_url":"https://avatars.githubusercontent.com/u/1289514?v=4","gravatar_id":"","url":"https://api.github.com/users/pksadiq","html_url":"https://github.com/pksadiq","followers_url":"https://api.github.com/users/pksadiq/followers","following_url":"https://api.github.com/users/pksadiq/following{/other_user}","gists_url":"https://api.github.com/users/pksadiq/gists{/gist_id}","starred_url":"https://api.github.com/users/pksadiq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pksadiq/subscriptions","organizations_url":"https://api.github.com/users/pksadiq/orgs","repos_url":"https://api.github.com/users/pksadiq/repos","events_url":"https://api.github.com/users/pksadiq/events{/privacy}","received_events_url":"https://api.github.com/users/pksadiq/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":698723912,"node_id":"MDU6TGFiZWw2OTg3MjM5MTI=","url":"https://api.github.com/repos/curl/curl/labels/not-a-curl-bug","name":"not-a-curl-bug","color":"d4c5f9","default":false,"description":"This is not a bug in curl"},{"id":4294582278,"node_id":"LA_kwDOAAiu0c7_-iAG","url":"https://api.github.com/repos/curl/curl/labels/WebSocket","name":"WebSocket","color":"A51BBC","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2024-12-19T13:57:44Z","updated_at":"2025-07-10T09:21:43Z","closed_at":"2025-07-10T09:21:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T12:40:38Z","pushed_at":"2025-11-10T12:40:38Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":40,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":40,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\n\nI was trying to write a small program using libcurl websocket API. When using the curl_multi APIs, it seems to be returning after some time (instead of blocking until close/error):\r\n\r\n<details>\r\n  <summary>C source for the test</summary>\r\n\r\n  ```c\r\n  /* curl.c\r\n   *\r\n   * Compile: cc -ggdb curl.c $(pkg-config --cflags --libs libcurl) -o curl\r\n   * Run: ./curl\r\n   *\r\n   * Author: Mohammed Sadiq <www.sadiqpk.org>\r\n   *\r\n   * SPDX-License-Identifier: curl OR CC0-1.0\r\n   */\r\n\r\n  #undef NDEBUG\r\n  #include <assert.h>\r\n  #include <curl/curl.h>\r\n  #include <string.h>\r\n  #include <unistd.h>\r\n\r\n  int\r\n  main (void)\r\n  {\r\n    const struct curl_ws_frame *meta = NULL;\r\n    CURLM *multi;\r\n    CURL *easy;\r\n    CURLMcode mc;\r\n    CURLcode c;\r\n    int pending, still_running;\r\n\r\n    multi = curl_multi_init ();\r\n    easy = curl_easy_init ();\r\n\r\n    c = curl_easy_setopt (easy, CURLOPT_VERBOSE, 1L);\r\n    assert (!c);\r\n\r\n    c = curl_easy_setopt (easy, CURLOPT_URL, \"wss://echo.websocket.org\");\r\n    assert (!c);\r\n    c = curl_easy_setopt (easy, CURLOPT_CONNECT_ONLY, 2L);\r\n    assert (!c);\r\n\r\n    mc = curl_multi_add_handle (multi, easy);\r\n    assert (!mc);\r\n\r\n    do\r\n      {\r\n        CURLMsg *message;\r\n\r\n        mc = curl_multi_perform (multi, &still_running);\r\n\r\n        if (!mc)\r\n          mc = curl_multi_poll (multi, NULL, 0, 1000, NULL);\r\n\r\n        if (mc)\r\n          {\r\n            fprintf (stderr, \"Error %d\\n\", mc);\r\n            break;\r\n          }\r\n\r\n        do\r\n          {\r\n            message = curl_multi_info_read (multi, &pending);\r\n            if (message && message->msg == CURLMSG_DONE)\r\n              {\r\n                char buffer[2048] = { 0 };\r\n                size_t sent, rlen;\r\n\r\n                memset (buffer, '\\0', sizeof(buffer));\r\n\r\n                /* present received data */\r\n                c = curl_ws_recv (easy, buffer, sizeof (buffer) - 1, &rlen, &meta);\r\n                printf (\"XXXXXXXXXXXXXXXXXX receiving status: %d, data: %s\\n\", c, buffer);\r\n\r\n                /* Send some data */\r\n                c = curl_ws_send (easy, \"hello\", strlen (\"hello\"), &sent, 0, CURLWS_TEXT);\r\n                printf (\"XXXXXXXXXXXXXXXXXX sending status: %d size: %lu\\n\", c, sent);\r\n              }\r\n        } while (message);\r\n    } while (still_running);\r\n  }\r\n  ```\r\n</details>\r\n\r\n\n\n### I expected the following\n\nwebsocket is supposed to stay connected until the client/server initiates close request/on error. The the application should be running, and I should be receiving an echo of the message send to the websocket.org echo service.\n\n### curl/libcurl version\n\n8.11.1-1 (as packaged in Debian) and 9fce2c55d from master (tested with [jhbuild](https://gitlab.gnome.org/GNOME/jhbuild))\n\n### operating system\n\nDebian GNU/Linux sid","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/15780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/15780/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/3048239846","html_url":"https://github.com/curl/curl/issues/13288#issuecomment-3048239846","issue_url":"https://api.github.com/repos/curl/curl/issues/13288","id":3048239846,"node_id":"IC_kwDOAAiu0c61sHLm","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-07-08T10:08:30Z","updated_at":"2025-07-08T10:08:30Z","body":"I beefed up the example code in `docs/examples/websocket.c` in #17860. It shows now that one must expect `CURLE_AGAIN` on sending and receiving and should give users a better start at this.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/3048239846/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":18523760132,"node_id":"CE_lADOAAiu0c6EuJmAzwAAAARQGiYE","url":"https://api.github.com/repos/curl/curl/issues/events/18523760132","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"fa0ed1fe4f7de6519dfc5519728e3710bfe077fc","commit_url":"https://api.github.com/repos/curl/curl/commits/fa0ed1fe4f7de6519dfc5519728e3710bfe077fc","created_at":"2025-07-08T11:07:00Z","state_reason":null,"performed_via_github_app":null},{"id":18523991993,"node_id":"REFE_lADOAAiu0c6EuJmAzwAAAARQHa-5","url":"https://api.github.com/repos/curl/curl/issues/events/18523991993","actor":{"login":"dyhkwong","id":50692134,"node_id":"MDQ6VXNlcjUwNjkyMTM0","avatar_url":"https://avatars.githubusercontent.com/u/50692134?v=4","gravatar_id":"","url":"https://api.github.com/users/dyhkwong","html_url":"https://github.com/dyhkwong","followers_url":"https://api.github.com/users/dyhkwong/followers","following_url":"https://api.github.com/users/dyhkwong/following{/other_user}","gists_url":"https://api.github.com/users/dyhkwong/gists{/gist_id}","starred_url":"https://api.github.com/users/dyhkwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dyhkwong/subscriptions","organizations_url":"https://api.github.com/users/dyhkwong/orgs","repos_url":"https://api.github.com/users/dyhkwong/repos","events_url":"https://api.github.com/users/dyhkwong/events{/privacy}","received_events_url":"https://api.github.com/users/dyhkwong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fa0ed1fe4f7de6519dfc5519728e3710bfe077fc","commit_url":"https://api.github.com/repos/dyhkwong/curl/commits/fa0ed1fe4f7de6519dfc5519728e3710bfe077fc","created_at":"2025-07-08T11:20:47Z","performed_via_github_app":null}]