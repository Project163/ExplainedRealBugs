{"url":"https://api.github.com/repos/curl/curl/issues/11576","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/11576/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/11576/comments","events_url":"https://api.github.com/repos/curl/curl/issues/11576/events","html_url":"https://github.com/curl/curl/issues/11576","id":1832988111,"node_id":"I_kwDOAAiu0c5tQS3P","number":11576,"title":"y2038: tests should not be failing if system date is set further than year 2037ish","user":{"login":"kanavin","id":1011938,"node_id":"MDQ6VXNlcjEwMTE5Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1011938?v=4","gravatar_id":"","url":"https://api.github.com/users/kanavin","html_url":"https://github.com/kanavin","followers_url":"https://api.github.com/users/kanavin/followers","following_url":"https://api.github.com/users/kanavin/following{/other_user}","gists_url":"https://api.github.com/users/kanavin/gists{/gist_id}","starred_url":"https://api.github.com/users/kanavin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kanavin/subscriptions","organizations_url":"https://api.github.com/users/kanavin/orgs","repos_url":"https://api.github.com/users/kanavin/repos","events_url":"https://api.github.com/users/kanavin/events{/privacy}","received_events_url":"https://api.github.com/users/kanavin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":228248612,"node_id":"MDU6TGFiZWwyMjgyNDg2MTI=","url":"https://api.github.com/repos/curl/curl/labels/enhancement","name":"enhancement","color":"FCFD96","default":true,"description":null},{"id":887227423,"node_id":"MDU6TGFiZWw4ODcyMjc0MjM=","url":"https://api.github.com/repos/curl/curl/labels/tests","name":"tests","color":"a7a8e8","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2023-08-02T11:23:11Z","updated_at":"2023-08-14T07:04:49Z","closed_at":"2023-08-14T07:04:49Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\r\n\r\nTo test the readiness of Yocto stack for Y2038 we run qemu virtual machines with RTC set to some day in 2040. This causes many of curl's tests to fail on both 32 bit and 64 bit systems: the reason is that curl's test cookies seem to set their expiry date to 2037 or so. \r\n\r\nI would propose to set the expiry date to far enough in the future that it won't have to be tweaked in our lifetimes: this way real Y2038 issues in curl (or in things it depends on) can be exposed and fixed (it's well possible there are none, but that needs confirmation too).\r\n\r\nFailures seen:\r\nTESTFAIL: These test cases failed: 31 46 53 61 62 172 179 327 329 420 1104 1216 1415 \r\n\r\nIf there's agreement on this, I can prepare the patch.\r\n\r\n### I expected the following\r\n\r\nI expected 100% pass rate, same as when virtual machine's RTC is set to today.\r\n\r\n### curl/libcurl version\r\n\r\n8.2.0\r\n\r\n### operating system\r\n\r\nLinux qemux86-64 6.1.38-yocto-standard #1 SMP PREEMPT_DYNAMIC Thu Jul  6 18:52:54 UTC 2023 x86_64 GNU/Linux","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/11576/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/11576/timeline","performed_via_github_app":null,"state_reason":"completed"}