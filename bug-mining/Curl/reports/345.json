{"url":"https://api.github.com/repos/curl/curl/issues/12257","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/12257/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/12257/comments","events_url":"https://api.github.com/repos/curl/curl/issues/12257/events","html_url":"https://github.com/curl/curl/issues/12257","id":1976361851,"node_id":"I_kwDOAAiu0c51zON7","number":12257,"title":"autotools + libressl builds fail with: unknown type name 'uint32_t'","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null},{"id":184118197,"node_id":"MDU6TGFiZWwxODQxMTgxOTc=","url":"https://api.github.com/repos/curl/curl/labels/regression","name":"regression","color":"33aa3f","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-11-03T14:44:39Z","updated_at":"2023-11-06T10:12:49Z","closed_at":"2023-11-06T10:12:49Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\r\n\r\nLibreSSL publishes its own `arc4random`, which then gets detected by autotools\r\nwhen building curl.\r\n\r\nThen fails when compiling `lib/rand.c`:\r\n```\r\n../../lib/rand.c:37:1: error: unknown type name 'uint32_t'\r\n   37 | uint32_t arc4random(void);\r\n      | ^\r\n1 error generated.\r\n```\r\n\r\nProbably caused by: 755ddbe901cd0c921fbc3ac5b3775c0dc683bc73 #10672\r\n\r\nI'm guessing autotools shouldn't detect `HAVE_ARC4RANDOM` when it's provided\r\nnot by the system, but by a library dependency (with its prototype also present\r\nin that dependency's headers) (LibreSSL probably shouldn't publish such function\r\noutside of its own namespace in the first place, but it does). If we want to use it \r\nanyway, we should use a C89 type in our replacement prototype? Or, together with\r\n`HAVE_STDINT_H` and after including `stdint.h`.\r\n\r\n### I expected the following\r\n\r\nSuccessful build.\r\n\r\n### curl/libcurl version\r\n\r\n8.5.0-DEV\r\n\r\n### operating system\r\n\r\nany","closed_by":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/12257/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/12257/timeline","performed_via_github_app":null,"state_reason":"completed"}