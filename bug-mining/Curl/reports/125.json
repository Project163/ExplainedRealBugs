{"url":"https://api.github.com/repos/curl/curl/issues/10120","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/10120/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/10120/comments","events_url":"https://api.github.com/repos/curl/curl/issues/10120/events","html_url":"https://github.com/curl/curl/issues/10120","id":1504220302,"node_id":"I_kwDOAAiu0c5ZqJSO","number":10120,"title":"curl doesn't update cookie file","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4809646275,"node_id":"LA_kwDOAAiu0c8AAAABHq1gww","url":"https://api.github.com/repos/curl/curl/labels/cookies","name":"cookies","color":"bfdadc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2022-12-20T09:08:40Z","updated_at":"2022-12-20T12:50:54Z","closed_at":"2022-12-20T12:50:54Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Discussed in https://github.com/curl/curl/discussions/10117\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **BratSinot** December 19, 2022</sup>\r\nGreetings!\r\n\r\nI have some file with cookie and I want curl to use that file and update it with new cookies from response. I try to use this:\r\n```\r\ncurl \\\r\n  -b cookie.sub \\\r\n  -c cookie.sub \\\r\n  -d \"$(jq -rc --arg ID \"$ID\" '.[0].id = $ID' json/handshake.json)\" \\\r\n  -H 'Content-Type: application/json' \\\r\n  '[::1]:8017/notifications' |\r\n  jq -r '.[0].clientId'\r\n```\r\nbut curl ignores `set-cookies` from response (response have `set-cookies`, I check it through Wireshark). How can I overcome this behaviour?\r\n\r\ncookie.sub:\r\n```\r\n# Netscape HTTP Cookie File\r\n# https://curl.se/docs/http-cookies.html\r\n# This file was generated by libcurl! Edit at your own risk.\r\n\r\n#HttpOnly_::1\tFALSE\t/notifications/\tFALSE\t0\t<manual set cookie name>\t<cookie value>\r\n```\r\n\r\nCurl version:\r\n```\r\nâœ— curl --version\r\ncurl 7.85.0 (x86_64-apple-darwin22.0) libcurl/7.85.0 (SecureTransport) LibreSSL/3.3.6 zlib/1.2.11 nghttp2/1.47.0\r\nRelease-Date: 2022-08-31\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ldap ldaps mqtt pop3 pop3s rtsp smb smbs smtp smtps telnet tftp\r\nFeatures: alt-svc AsynchDNS GSS-API HSTS HTTP2 HTTPS-proxy IPv6 Kerberos Largefile libz MultiSSL NTLM NTLM_WB SPNEGO SSL threadsafe UnixSockets\r\n```</div>","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/10120/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/10120/timeline","performed_via_github_app":null,"state_reason":"completed"}