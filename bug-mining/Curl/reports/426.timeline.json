[{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023850781","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2023850781","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2023850781,"node_id":"IC_kwDOAAiu0c54oYMd","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T19:56:04Z","updated_at":"2024-03-27T19:56:04Z","body":"CC @inglor","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023850781/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12272387862,"node_id":"MEE_lADOAAiu0c6D1RvzzwAAAALbfccW","url":"https://api.github.com/repos/curl/curl/issues/events/12272387862","actor":{"login":"inglor","id":301857,"node_id":"MDQ6VXNlcjMwMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/301857?v=4","gravatar_id":"","url":"https://api.github.com/users/inglor","html_url":"https://github.com/inglor","followers_url":"https://api.github.com/users/inglor/followers","following_url":"https://api.github.com/users/inglor/following{/other_user}","gists_url":"https://api.github.com/users/inglor/gists{/gist_id}","starred_url":"https://api.github.com/users/inglor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inglor/subscriptions","organizations_url":"https://api.github.com/users/inglor/orgs","repos_url":"https://api.github.com/users/inglor/repos","events_url":"https://api.github.com/users/inglor/events{/privacy}","received_events_url":"https://api.github.com/users/inglor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-27T19:56:06Z","performed_via_github_app":null},{"id":12272387876,"node_id":"SE_lADOAAiu0c6D1RvzzwAAAALbfcck","url":"https://api.github.com/repos/curl/curl/issues/events/12272387876","actor":{"login":"inglor","id":301857,"node_id":"MDQ6VXNlcjMwMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/301857?v=4","gravatar_id":"","url":"https://api.github.com/users/inglor","html_url":"https://github.com/inglor","followers_url":"https://api.github.com/users/inglor/followers","following_url":"https://api.github.com/users/inglor/following{/other_user}","gists_url":"https://api.github.com/users/inglor/gists{/gist_id}","starred_url":"https://api.github.com/users/inglor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inglor/subscriptions","organizations_url":"https://api.github.com/users/inglor/orgs","repos_url":"https://api.github.com/users/inglor/repos","events_url":"https://api.github.com/users/inglor/events{/privacy}","received_events_url":"https://api.github.com/users/inglor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-27T19:56:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023883896","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2023883896","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2023883896,"node_id":"IC_kwDOAAiu0c54ogR4","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T20:14:30Z","updated_at":"2024-03-27T20:14:30Z","body":"CC @icing (for commit authorship)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023883896/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12272623118,"node_id":"MEE_lADOAAiu0c6D1RvzzwAAAALbgV4O","url":"https://api.github.com/repos/curl/curl/issues/events/12272623118","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-27T20:14:31Z","performed_via_github_app":null},{"id":12272623123,"node_id":"SE_lADOAAiu0c6D1RvzzwAAAALbgV4T","url":"https://api.github.com/repos/curl/curl/issues/events/12272623123","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-27T20:14:31Z","performed_via_github_app":null},{"id":12272679560,"node_id":"AE_lADOAAiu0c6D1RvzzwAAAALbgjqI","url":"https://api.github.com/repos/curl/curl/issues/events/12272679560","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-03-27T20:19:13Z","assignee":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023901197","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2023901197","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2023901197,"node_id":"IC_kwDOAAiu0c54okgN","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T20:21:38Z","updated_at":"2024-03-27T20:21:38Z","body":"Browsing the auracle sources, I do not see how exactly the changed write handling can lead to a CURLE_WRITE_ERROR. The callback in auracle is quite simple and never returns an error.\r\n\r\nI think we need an auracle debug handler that emits more of curls messages in order to find out what is going wrong here. Any chances of giving that a try, @inglor?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023901197/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12272714583,"node_id":"MEE_lADOAAiu0c6D1RvzzwAAAALbgsNX","url":"https://api.github.com/repos/curl/curl/issues/events/12272714583","actor":{"login":"inglor","id":301857,"node_id":"MDQ6VXNlcjMwMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/301857?v=4","gravatar_id":"","url":"https://api.github.com/users/inglor","html_url":"https://github.com/inglor","followers_url":"https://api.github.com/users/inglor/followers","following_url":"https://api.github.com/users/inglor/following{/other_user}","gists_url":"https://api.github.com/users/inglor/gists{/gist_id}","starred_url":"https://api.github.com/users/inglor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inglor/subscriptions","organizations_url":"https://api.github.com/users/inglor/orgs","repos_url":"https://api.github.com/users/inglor/repos","events_url":"https://api.github.com/users/inglor/events{/privacy}","received_events_url":"https://api.github.com/users/inglor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-27T20:21:40Z","performed_via_github_app":null},{"id":12272714588,"node_id":"SE_lADOAAiu0c6D1RvzzwAAAALbgsNc","url":"https://api.github.com/repos/curl/curl/issues/events/12272714588","actor":{"login":"inglor","id":301857,"node_id":"MDQ6VXNlcjMwMTg1Nw==","avatar_url":"https://avatars.githubusercontent.com/u/301857?v=4","gravatar_id":"","url":"https://api.github.com/users/inglor","html_url":"https://github.com/inglor","followers_url":"https://api.github.com/users/inglor/followers","following_url":"https://api.github.com/users/inglor/following{/other_user}","gists_url":"https://api.github.com/users/inglor/gists{/gist_id}","starred_url":"https://api.github.com/users/inglor/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/inglor/subscriptions","organizations_url":"https://api.github.com/users/inglor/orgs","repos_url":"https://api.github.com/users/inglor/repos","events_url":"https://api.github.com/users/inglor/events{/privacy}","received_events_url":"https://api.github.com/users/inglor/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-27T20:21:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023954168","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2023954168","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2023954168,"node_id":"IC_kwDOAAiu0c54oxb4","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T20:45:21Z","updated_at":"2024-03-27T20:45:21Z","body":"Oh, `auracle` reads an environment variable `AURACLE_DEBUG`. Does that give any clues?\r\n```\r\n% AURACLE_DEBUG=1 auracle clone st\r\n* Host aur.archlinux.org:443 was resolved.\r\n* IPv6: 2a01:4f9:c010:50::1\r\n* IPv4: 95.216.144.15\r\n*   Trying 95.216.144.15:443...\r\n* Connected to aur.archlinux.org (95.216.144.15) port 443\r\n* ALPN: curl offers h2,http/1.1\r\n*  CAfile: /etc/ssl/certs/ca-certificates.crt\r\n*  CApath: none\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / x25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=aur.archlinux.org\r\n*  start date: Mar 11 22:47:13 2024 GMT\r\n*  expire date: Jun  9 22:47:12 2024 GMT\r\n*  subjectAltName: host \"aur.archlinux.org\" matched cert's \"aur.archlinux.org\"\r\n*  issuer: C=US; O=Let's Encrypt; CN=R3\r\n*  SSL certificate verify ok.\r\n*   Certificate level 0: Public key type RSA (4096/152 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 2: Public key type RSA (4096/152 Bits/secBits), signed using sha256WithRSAEncryption\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://aur.archlinux.org/rpc?v=5&type=info&arg[]=st\r\n* [HTTP/2] [1] [:method: GET]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: aur.archlinux.org]\r\n* [HTTP/2] [1] [:path: /rpc?v=5&type=info&arg[]=st]\r\n* [HTTP/2] [1] [user-agent: Auracle/0]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [accept-encoding: deflate, gzip, br, zstd]\r\n> GET /rpc?v=5&type=info&arg[]=st HTTP/2\r\nHost: aur.archlinux.org\r\nUser-Agent: Auracle/0\r\nAccept: */*\r\nAccept-Encoding: deflate, gzip, br, zstd\r\n\r\n* Request completely sent off\r\n* old SSL session ID is stale, removing\r\n< HTTP/2 200 \r\n< server: nginx\r\n< date: Wed, 27 Mar 2024 20:43:01 GMT\r\n< content-type: application/json\r\n< strict-transport-security: max-age=31536000; includeSubdomains; preload\r\n< content-encoding: br\r\n< \r\n* Connection #0 to host aur.archlinux.org left intact\r\nerror: UNKNOWN: \r\n```\r\nThe same with `curl 8.6.0`:\r\n```\r\n% AURACLE_DEBUG=1 auracle clone st\r\n* Host aur.archlinux.org:443 was resolved.\r\n* IPv6: 2a01:4f9:c010:50::1\r\n* IPv4: 95.216.144.15\r\n*   Trying 95.216.144.15:443...\r\n* Connected to aur.archlinux.org (95.216.144.15) port 443\r\n* ALPN: curl offers h2,http/1.1\r\n*  CAfile: /etc/ssl/certs/ca-certificates.crt\r\n*  CApath: none\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / x25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=aur.archlinux.org\r\n*  start date: Mar 11 22:47:13 2024 GMT\r\n*  expire date: Jun  9 22:47:12 2024 GMT\r\n*  subjectAltName: host \"aur.archlinux.org\" matched cert's \"aur.archlinux.org\"\r\n*  issuer: C=US; O=Let's Encrypt; CN=R3\r\n*  SSL certificate verify ok.\r\n*   Certificate level 0: Public key type RSA (4096/152 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 2: Public key type RSA (4096/152 Bits/secBits), signed using sha256WithRSAEncryption\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://aur.archlinux.org/rpc?v=5&type=info&arg[]=st\r\n* [HTTP/2] [1] [:method: GET]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: aur.archlinux.org]\r\n* [HTTP/2] [1] [:path: /rpc?v=5&type=info&arg[]=st]\r\n* [HTTP/2] [1] [user-agent: Auracle/0]\r\n* [HTTP/2] [1] [accept: */*]\r\n* [HTTP/2] [1] [accept-encoding: deflate, gzip, br, zstd]\r\n> GET /rpc?v=5&type=info&arg[]=st HTTP/2\r\nHost: aur.archlinux.org\r\nUser-Agent: Auracle/0\r\nAccept: */*\r\nAccept-Encoding: deflate, gzip, br, zstd\r\n\r\n* old SSL session ID is stale, removing\r\n< HTTP/2 200 \r\n< server: nginx\r\n< date: Wed, 27 Mar 2024 20:44:41 GMT\r\n< content-type: application/json\r\n< strict-transport-security: max-age=31536000; includeSubdomains; preload\r\n< content-encoding: br\r\n< \r\n* Connection #0 to host aur.archlinux.org left intact\r\nclone complete: /home/user/st\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2023954168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024027158","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024027158","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024027158,"node_id":"IC_kwDOAAiu0c54pDQW","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T21:32:08Z","updated_at":"2024-03-27T21:32:08Z","body":"I can reproduce what's likely the same issue with this command:\n\n    docker run --rm curlimages/curl -v --compressed 'https://aur.archlinux.org/rpc?v=5&type=info&arg'\n\nwhich results in \n\n    curl: (23) Failed writing received data to disk/application\n\nThe key is the addition of --compressed which results in Brotli being\nnegotiated and used. \n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024027158/reactions","total_count":3,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":2},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T21:50:43Z","updated_at":"2024-03-27T21:50:43Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/13212","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13212/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13212/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13212/events","html_url":"https://github.com/curl/curl/issues/13212","id":2211950374,"node_id":"I_kwDOAAiu0c6D168m","number":13212,"title":"--compressed fails with error 23","user":{"login":"finkjsc","id":125934322,"node_id":"U_kgDOB4Ga8g","avatar_url":"https://avatars.githubusercontent.com/u/125934322?v=4","gravatar_id":"","url":"https://api.github.com/users/finkjsc","html_url":"https://github.com/finkjsc","followers_url":"https://api.github.com/users/finkjsc/followers","following_url":"https://api.github.com/users/finkjsc/following{/other_user}","gists_url":"https://api.github.com/users/finkjsc/gists{/gist_id}","starred_url":"https://api.github.com/users/finkjsc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/finkjsc/subscriptions","organizations_url":"https://api.github.com/users/finkjsc/orgs","repos_url":"https://api.github.com/users/finkjsc/repos","events_url":"https://api.github.com/users/finkjsc/events{/privacy}","received_events_url":"https://api.github.com/users/finkjsc/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-27T21:37:24Z","updated_at":"2024-03-28T15:22:18Z","closed_at":"2024-03-28T15:22:18Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\n\ncurl --compressed -o \"test.txt\" \"https://www.troyhunt.com/rss/\"\n\n### I expected the following\n\nOutput file to be written without error, but fails with error 23: Failed writing received data to disk/application.\r\n\r\nOddly the file is written correctly but still the error persists.\r\n\r\nWorks without --compressed.\r\n\r\nMost other URL's work, but many now fail with this error.\r\n\r\nVersions before 8.7.1 worked without this error.\r\n\r\n\n\n### curl/libcurl version\n\ncurl 8.7.1 (x86_64-w64-mingw32) libcurl/8.7.1 LibreSSL/3.8.3 zlib/1.3.1 brotli/1.1.0 zstd/1.5.5 WinIDN libpsl/0.21.5 libssh2/1.11.0 nghttp2/1.60.0 ngtcp2/1.4.0 nghttp3/1.2.0\r\nRelease-Date: 2024-03-27\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp ws wss\r\nFeatures: alt-svc AsynchDNS brotli HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM PSL SPNEGO SSL SSPI threadsafe UnixSockets zstd\n\n### operating system\n\nWindows 10 Pro 22H2","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13212/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024110784","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024110784","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024110784,"node_id":"IC_kwDOAAiu0c54pXrA","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T22:46:32Z","updated_at":"2024-03-27T22:46:32Z","body":"Could you test that theory by modifying the auracle source to comment out the `CURLOPT_ACCEPT_ENCODING` option setting and/or replacing the empty string `\"\"` that's it's likely being set to with `\"gzip\"` or another method?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024110784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024163261","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024163261","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024163261,"node_id":"IC_kwDOAAiu0c54pke9","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-27T23:46:30Z","updated_at":"2024-03-27T23:46:30Z","body":"Confirmed to work:\r\n```\r\n% AURACLE_DEBUG=1 auracle/build/auracle clone st\r\n* Host aur.archlinux.org:443 was resolved.\r\n* IPv6: 2a01:4f9:c010:50::1\r\n* IPv4: 95.216.144.15\r\n*   Trying 95.216.144.15:443...\r\n* Connected to aur.archlinux.org (95.216.144.15) port 443\r\n* ALPN: curl offers h2,http/1.1\r\n*  CAfile: /etc/ssl/certs/ca-certificates.crt\r\n*  CApath: none\r\n* SSL connection using TLSv1.3 / TLS_AES_256_GCM_SHA384 / x25519 / RSASSA-PSS\r\n* ALPN: server accepted h2\r\n* Server certificate:\r\n*  subject: CN=aur.archlinux.org\r\n*  start date: Mar 11 22:47:13 2024 GMT\r\n*  expire date: Jun  9 22:47:12 2024 GMT\r\n*  subjectAltName: host \"aur.archlinux.org\" matched cert's \"aur.archlinux.org\"\r\n*  issuer: C=US; O=Let's Encrypt; CN=R3\r\n*  SSL certificate verify ok.\r\n*   Certificate level 0: Public key type RSA (4096/152 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 1: Public key type RSA (2048/112 Bits/secBits), signed using sha256WithRSAEncryption\r\n*   Certificate level 2: Public key type RSA (4096/152 Bits/secBits), signed using sha256WithRSAEncryption\r\n* using HTTP/2\r\n* [HTTP/2] [1] OPENED stream for https://aur.archlinux.org/rpc?v=5&type=info&arg[]=st\r\n* [HTTP/2] [1] [:method: GET]\r\n* [HTTP/2] [1] [:scheme: https]\r\n* [HTTP/2] [1] [:authority: aur.archlinux.org]\r\n* [HTTP/2] [1] [:path: /rpc?v=5&type=info&arg[]=st]\r\n* [HTTP/2] [1] [user-agent: Auracle/0]\r\n* [HTTP/2] [1] [accept: */*]\r\n> GET /rpc?v=5&type=info&arg[]=st HTTP/2\r\nHost: aur.archlinux.org\r\nUser-Agent: Auracle/0\r\nAccept: */*\r\n\r\n* Request completely sent off\r\n* old SSL session ID is stale, removing\r\n< HTTP/2 200 \r\n< server: nginx\r\n< date: Wed, 27 Mar 2024 23:45:00 GMT\r\n< content-type: application/json\r\n< content-length: 532\r\n< strict-transport-security: max-age=31536000; includeSubdomains; preload\r\n< \r\n* Connection #0 to host aur.archlinux.org left intact\r\nupdate complete: /home/user/st\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024163261/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024235938","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024235938","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024235938,"node_id":"IC_kwDOAAiu0c54p2Oi","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T01:24:18Z","updated_at":"2024-03-28T01:24:18Z","body":"I've also confirmed that adding -H 'Accept-Encoding: zstd' or -H\n'Accept-Encoding: gzip' alongside --compressed also fixes the problem.\nThe last commit to touch Brotli directly was\nd7b6ce64ce0ad787ad2ed3ee05c94938a6b4f551 but that code doesn't show this\nproblem.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024235938/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024252951","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024252951","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024252951,"node_id":"IC_kwDOAAiu0c54p6YX","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T01:47:19Z","updated_at":"2024-03-28T01:47:19Z","body":"I was able to bisect the problem to this commit:\n\ncommit 463472a2d6e3301c1468b5323b856cb67a91f579 (HEAD, refs/bisect/bad)\nAuthor: Stefan Eissing ***@***.***>\nDate:   Wed Feb 7 12:05:05 2024 +0100\n\n    lib: move client writer into own source\n\n    Refactoring of the client writer that passes the data to the\n    client/application's callback functions.\n\n    - split out into own source cw-out.[ch] from sendf.c\n\n    - move tempwrite and tempcount from data->state into the context of the\n      client writer\n\n    - redesign the 3 tempwrite dynbufs as a linked list of dynbufs. On\n      paused transfers, this allows to \"record\" interleaved HEADER/BODY\n      chunks to be \"played back\" in the same order on unpausing.\n\n    - keep the overall size limit of all buffered data to DYN_PAUSE_BUFFER.\n      On exceeding that, return CURLE_TOO_LARGE instead of\n      CURLE_OUT_OF_MEMORY as before.\n\n    - add method to be called when a transfer is DONE to allow writing of\n      any data still buffered\n\n    - when paused, record HEADER writes exactly as they come for later\n      playback. HEADERs are documented to be written one-by-one.\n\n    Closes #12898\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024252951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024436835","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024436835","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024436835,"node_id":"IC_kwDOAAiu0c54qnRj","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T05:28:42Z","updated_at":"2024-03-28T05:28:42Z","body":"> I was able to bisect the problem to this commit: commit [463472a](https://github.com/curl/curl/commit/463472a2d6e3301c1468b5323b856cb67a91f579)\r\n\r\nI had bisected already, see initial post. But we came to the same conclusion. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024436835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024461113","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024461113","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024461113,"node_id":"IC_kwDOAAiu0c54qtM5","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T05:59:11Z","updated_at":"2024-03-28T05:59:11Z","body":"I missed that line completely! At least it's confirmed","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024461113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024600748","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024600748","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024600748,"node_id":"IC_kwDOAAiu0c54rPSs","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T07:49:11Z","updated_at":"2024-03-28T07:49:11Z","body":"Yes, definitely no wasted time. I had thought about doing another `git bisect` myself, just to be sure I did not mess up. After all it is not obvious why the commit could have influence to the observed behavior - more like the contrary.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024600748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024725115","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024725115","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024725115,"node_id":"IC_kwDOAAiu0c54rtp7","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T09:10:52Z","updated_at":"2024-03-28T09:10:52Z","body":"It's this `CURLE_WRITE_ERROR` being passed through:\r\nhttps://github.com/curl/curl/blob/c77bdf17f7d7db399ce370fac5f06d1b43267993/lib/content_encoding.c#L676\r\n\r\nWondering if this is correct... Is an ended stream a write error here? I guess no.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024725115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024728595","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024728595","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024728595,"node_id":"IC_kwDOAAiu0c54rugT","user":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T09:13:01Z","updated_at":"2024-03-28T09:13:01Z","body":"Is this correct by any chance?\r\n```diff\r\ndiff --git a/lib/content_encoding.c b/lib/content_encoding.c\r\nindex c1abf24e8..03452fee0 100644\r\n--- a/lib/content_encoding.c\r\n+++ b/lib/content_encoding.c\r\n@@ -673,7 +673,7 @@ static CURLcode brotli_do_write(struct Curl_easy *data,\r\n     return Curl_cwriter_write(data, writer->next, type, buf, nbytes);\r\n \r\n   if(!bp->br)\r\n-    return CURLE_WRITE_ERROR;  /* Stream already ended. */\r\n+    return CURLE_OK;  /* Stream already ended. */\r\n \r\n   decomp = malloc(DSIZ);\r\n   if(!decomp)\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024728595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eworm-de","id":970853,"node_id":"MDQ6VXNlcjk3MDg1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/970853?v=4","gravatar_id":"","url":"https://api.github.com/users/eworm-de","html_url":"https://github.com/eworm-de","followers_url":"https://api.github.com/users/eworm-de/followers","following_url":"https://api.github.com/users/eworm-de/following{/other_user}","gists_url":"https://api.github.com/users/eworm-de/gists{/gist_id}","starred_url":"https://api.github.com/users/eworm-de/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eworm-de/subscriptions","organizations_url":"https://api.github.com/users/eworm-de/orgs","repos_url":"https://api.github.com/users/eworm-de/repos","events_url":"https://api.github.com/users/eworm-de/events{/privacy}","received_events_url":"https://api.github.com/users/eworm-de/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024785213","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024785213","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024785213,"node_id":"IC_kwDOAAiu0c54r8U9","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T09:43:18Z","updated_at":"2024-03-28T09:43:18Z","body":"\r\n\r\n> Am 28.03.2024 um 10:13 schrieb Christian Hesse ***@***.***>:\r\n> \r\n> \r\n> Is this correct by any chance?\r\n> diff --git a/lib/content_encoding.c b/lib/content_encoding.c\r\n> index c1abf24e8..03452fee0 100644\r\n> --- a/lib/content_encoding.c\r\n> +++ b/lib/content_encoding.c\r\n> @@ -673,7 +673,7 @@ static CURLcode brotli_do_write(struct Curl_easy *data,\r\n> return Curl_cwriter_write(data, writer->next, type, buf, nbytes);\r\n> \r\n> if(!bp->br)\r\n> - return CURLE_WRITE_ERROR; /* Stream already ended. */\r\n> + return CURLE_OK; /* Stream already ended. */\r\n> \r\n> decomp = malloc(DSIZ);\r\n> if(!decomp)\r\n\r\nAh, you found it as well. There is a 0-length write at the end which the brotli encoding does not like. The fix I have in mind is slightly different. I'll have a PR soon.\r\n\r\n\r\n> \r\n> Reply to this email directly, view it on GitHub, or unsubscribe.\r\n> You are receiving this because you were assigned.Message ID: ***@***.***>\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024785213/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12279077593,"node_id":"REFE_lADOAAiu0c6D1RvzzwAAAALb49rZ","url":"https://api.github.com/repos/curl/curl/issues/events/12279077593","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8188569bc39516d900886eb1dbeeff98ed302e60","commit_url":"https://api.github.com/repos/icing/curl/commits/8188569bc39516d900886eb1dbeeff98ed302e60","created_at":"2024-03-28T10:10:38Z","performed_via_github_app":null},{"actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T10:10:49Z","updated_at":"2024-03-28T10:10:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/13219","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13219/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13219/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13219/events","html_url":"https://github.com/curl/curl/pull/13219","id":2212831011,"node_id":"PR_kwDOAAiu0c5rCGbt","number":13219,"title":"brotli and others, simply pass through 0-length writes","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118197,"node_id":"MDU6TGFiZWwxODQxMTgxOTc=","url":"https://api.github.com/repos/curl/curl/labels/regression","name":"regression","color":"33aa3f","default":false,"description":null},{"id":887227423,"node_id":"MDU6TGFiZWw4ODcyMjc0MjM=","url":"https://api.github.com/repos/curl/curl/labels/tests","name":"tests","color":"a7a8e8","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-03-28T10:10:48Z","updated_at":"2024-08-10T07:58:28Z","closed_at":"2024-03-28T15:22:19Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/13219","html_url":"https://github.com/curl/curl/pull/13219","diff_url":"https://github.com/curl/curl/pull/13219.diff","patch_url":"https://github.com/curl/curl/pull/13219.patch","merged_at":null},"body":"- refs #13212 and #13209\r\n- curl's transfer handling may write 0-length chunks at the end of the download with an EOS flag. (HTTP/2 does this commonly)\r\n- content encoders need to pass-through such a write and not count this as error in case they are finished decoding","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13219/reactions","total_count":7,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":7,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13219/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024837495","html_url":"https://github.com/curl/curl/issues/13209#issuecomment-2024837495","issue_url":"https://api.github.com/repos/curl/curl/issues/13209","id":2024837495,"node_id":"IC_kwDOAAiu0c54sJF3","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-28T10:11:39Z","updated_at":"2024-03-28T10:11:39Z","body":"Please see #13219 for a fix.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2024837495/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12283395104,"node_id":"CE_lADOAAiu0c6D1RvzzwAAAALcJbwg","url":"https://api.github.com/repos/curl/curl/issues/events/12283395104","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b30d694a027eb771c02a3db0dee0ca03ccab7377","commit_url":"https://api.github.com/repos/curl/curl/commits/b30d694a027eb771c02a3db0dee0ca03ccab7377","created_at":"2024-03-28T15:22:18Z","state_reason":null,"performed_via_github_app":null},{"id":12284019001,"node_id":"REFE_lADOAAiu0c6D1RvzzwAAAALcL0E5","url":"https://api.github.com/repos/curl/curl/issues/events/12284019001","actor":{"login":"dyhkwong","id":50692134,"node_id":"MDQ6VXNlcjUwNjkyMTM0","avatar_url":"https://avatars.githubusercontent.com/u/50692134?v=4","gravatar_id":"","url":"https://api.github.com/users/dyhkwong","html_url":"https://github.com/dyhkwong","followers_url":"https://api.github.com/users/dyhkwong/followers","following_url":"https://api.github.com/users/dyhkwong/following{/other_user}","gists_url":"https://api.github.com/users/dyhkwong/gists{/gist_id}","starred_url":"https://api.github.com/users/dyhkwong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dyhkwong/subscriptions","organizations_url":"https://api.github.com/users/dyhkwong/orgs","repos_url":"https://api.github.com/users/dyhkwong/repos","events_url":"https://api.github.com/users/dyhkwong/events{/privacy}","received_events_url":"https://api.github.com/users/dyhkwong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b30d694a027eb771c02a3db0dee0ca03ccab7377","commit_url":"https://api.github.com/repos/dyhkwong/curl/commits/b30d694a027eb771c02a3db0dee0ca03ccab7377","created_at":"2024-03-28T16:05:21Z","performed_via_github_app":null},{"actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T08:22:26Z","updated_at":"2024-03-29T08:22:26Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/13226","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13226/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13226/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13226/events","html_url":"https://github.com/curl/curl/issues/13226","id":2214894102,"node_id":"I_kwDOAAiu0c6EBJoW","number":13226,"title":"Spurious CURLE_WRITE_ERROR at transfer end with Brotli encoding","user":{"login":"fds242","id":274402,"node_id":"MDQ6VXNlcjI3NDQwMg==","avatar_url":"https://avatars.githubusercontent.com/u/274402?v=4","gravatar_id":"","url":"https://api.github.com/users/fds242","html_url":"https://github.com/fds242","followers_url":"https://api.github.com/users/fds242/followers","following_url":"https://api.github.com/users/fds242/following{/other_user}","gists_url":"https://api.github.com/users/fds242/gists{/gist_id}","starred_url":"https://api.github.com/users/fds242/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fds242/subscriptions","organizations_url":"https://api.github.com/users/fds242/orgs","repos_url":"https://api.github.com/users/fds242/repos","events_url":"https://api.github.com/users/fds242/events{/privacy}","received_events_url":"https://api.github.com/users/fds242/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":204913352,"node_id":"MDU6TGFiZWwyMDQ5MTMzNTI=","url":"https://api.github.com/repos/curl/curl/labels/duplicate","name":"duplicate","color":"ffffff","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-29T08:09:50Z","updated_at":"2024-03-29T08:22:36Z","closed_at":"2024-03-29T08:22:26Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\n\nEnabling libcurl's built-in Brotli encoding support with curl 8.7.1 results in a spurious CURLE_WRITE_ERROR at the end of transfers when using HTTP/2 or HTTP/3.\r\nThere was no such issue with curl 8.6.0 or earlier.\r\n\r\nIt's caused by these lines in `lib/content_encoding.c` in `brotli_do_write()`:\r\n```\r\n  if(!bp->br)\r\n    return CURLE_WRITE_ERROR;  /* Stream already ended. */\r\n```\r\nA change in curl 8.7.1 is causing this function to be called with `nbytes == 0` when not using http/1.x, which is not properly handled.\r\n\r\nEasy to reproduce with the `curl` tool:\r\n\r\n`curl --http2 --compressed -i https://curl.se`\r\n`curl --http3-only --compressed -i https://curl.se`\r\n\r\n> HTTP/3 200 \r\n> content-length: 3313\r\n> server: nginx/1.21.1\r\n> content-type: text/html\r\n> [...]\r\n> **content-encoding: br**\r\n> \r\n> [...]\r\n> `</html>`\r\n> curl: (23) Failed writing received data to disk/application\r\n\r\nRequires curl to be built with support for brotli and HTTP/2 or HTTP/3.\r\nThere's no error if you force HTTP/1.1, eg. `curl --http1.1 --compressed -i https://curl.se`\r\n\r\nI changed the code in the above function like this as a workaround:\r\n```\r\n  if(!bp->br) {\r\n\tif (nbytes == 0)\r\n\t  return CURLE_OK;\r\n    return CURLE_WRITE_ERROR;  /* Stream already ended. */\r\n  }\r\n```\r\nBut perhaps the better question is why this function is even getting called with `nbytes == 0` in the first place, and a better fix is elsewhere. If I may suggest, reusing this CURLE_WRITE_ERROR error code for Content-Encoding _decoding issues_ made me initially waste time looking in all the wrong places. A different error code or at least failf() messages would be quite helpful in future issues around here.\n\n### I expected the following\n\nThe transfer finishing successfully with `CURLE_OK`.\n\n### curl/libcurl version\n\ncurl 8.7.1\n\n### operating system\n\nmacOS 14.4.1 (most likely any)","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13226/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"p-d-boiko","id":79691246,"node_id":"MDQ6VXNlcjc5NjkxMjQ2","avatar_url":"https://avatars.githubusercontent.com/u/79691246?v=4","gravatar_id":"","url":"https://api.github.com/users/p-d-boiko","html_url":"https://github.com/p-d-boiko","followers_url":"https://api.github.com/users/p-d-boiko/followers","following_url":"https://api.github.com/users/p-d-boiko/following{/other_user}","gists_url":"https://api.github.com/users/p-d-boiko/gists{/gist_id}","starred_url":"https://api.github.com/users/p-d-boiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p-d-boiko/subscriptions","organizations_url":"https://api.github.com/users/p-d-boiko/orgs","repos_url":"https://api.github.com/users/p-d-boiko/repos","events_url":"https://api.github.com/users/p-d-boiko/events{/privacy}","received_events_url":"https://api.github.com/users/p-d-boiko/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-29T10:26:49Z","updated_at":"2024-03-29T10:26:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/tj/n/issues/798","repository_url":"https://api.github.com/repos/tj/n","labels_url":"https://api.github.com/repos/tj/n/issues/798/labels{/name}","comments_url":"https://api.github.com/repos/tj/n/issues/798/comments","events_url":"https://api.github.com/repos/tj/n/issues/798/events","html_url":"https://github.com/tj/n/issues/798","id":2213413387,"node_id":"I_kwDOABKpdc6D7gIL","number":798,"title":"n latest curl: (23) Failed writing received data to disk/application","user":{"login":"p-d-boiko","id":79691246,"node_id":"MDQ6VXNlcjc5NjkxMjQ2","avatar_url":"https://avatars.githubusercontent.com/u/79691246?v=4","gravatar_id":"","url":"https://api.github.com/users/p-d-boiko","html_url":"https://github.com/p-d-boiko","followers_url":"https://api.github.com/users/p-d-boiko/followers","following_url":"https://api.github.com/users/p-d-boiko/following{/other_user}","gists_url":"https://api.github.com/users/p-d-boiko/gists{/gist_id}","starred_url":"https://api.github.com/users/p-d-boiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/p-d-boiko/subscriptions","organizations_url":"https://api.github.com/users/p-d-boiko/orgs","repos_url":"https://api.github.com/users/p-d-boiko/repos","events_url":"https://api.github.com/users/p-d-boiko/events{/privacy}","received_events_url":"https://api.github.com/users/p-d-boiko/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-03-28T14:40:43Z","updated_at":"2024-04-21T00:39:15Z","closed_at":"2024-03-29T10:26:48Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":1223029,"node_id":"MDEwOlJlcG9zaXRvcnkxMjIzMDI5","name":"n","full_name":"tj/n","private":false,"owner":{"login":"tj","id":25254,"node_id":"MDQ6VXNlcjI1MjU0","avatar_url":"https://avatars.githubusercontent.com/u/25254?v=4","gravatar_id":"","url":"https://api.github.com/users/tj","html_url":"https://github.com/tj","followers_url":"https://api.github.com/users/tj/followers","following_url":"https://api.github.com/users/tj/following{/other_user}","gists_url":"https://api.github.com/users/tj/gists{/gist_id}","starred_url":"https://api.github.com/users/tj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tj/subscriptions","organizations_url":"https://api.github.com/users/tj/orgs","repos_url":"https://api.github.com/users/tj/repos","events_url":"https://api.github.com/users/tj/events{/privacy}","received_events_url":"https://api.github.com/users/tj/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/tj/n","description":"Node version management","fork":false,"url":"https://api.github.com/repos/tj/n","forks_url":"https://api.github.com/repos/tj/n/forks","keys_url":"https://api.github.com/repos/tj/n/keys{/key_id}","collaborators_url":"https://api.github.com/repos/tj/n/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/tj/n/teams","hooks_url":"https://api.github.com/repos/tj/n/hooks","issue_events_url":"https://api.github.com/repos/tj/n/issues/events{/number}","events_url":"https://api.github.com/repos/tj/n/events","assignees_url":"https://api.github.com/repos/tj/n/assignees{/user}","branches_url":"https://api.github.com/repos/tj/n/branches{/branch}","tags_url":"https://api.github.com/repos/tj/n/tags","blobs_url":"https://api.github.com/repos/tj/n/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/tj/n/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/tj/n/git/refs{/sha}","trees_url":"https://api.github.com/repos/tj/n/git/trees{/sha}","statuses_url":"https://api.github.com/repos/tj/n/statuses/{sha}","languages_url":"https://api.github.com/repos/tj/n/languages","stargazers_url":"https://api.github.com/repos/tj/n/stargazers","contributors_url":"https://api.github.com/repos/tj/n/contributors","subscribers_url":"https://api.github.com/repos/tj/n/subscribers","subscription_url":"https://api.github.com/repos/tj/n/subscription","commits_url":"https://api.github.com/repos/tj/n/commits{/sha}","git_commits_url":"https://api.github.com/repos/tj/n/git/commits{/sha}","comments_url":"https://api.github.com/repos/tj/n/comments{/number}","issue_comment_url":"https://api.github.com/repos/tj/n/issues/comments{/number}","contents_url":"https://api.github.com/repos/tj/n/contents/{+path}","compare_url":"https://api.github.com/repos/tj/n/compare/{base}...{head}","merges_url":"https://api.github.com/repos/tj/n/merges","archive_url":"https://api.github.com/repos/tj/n/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/tj/n/downloads","issues_url":"https://api.github.com/repos/tj/n/issues{/number}","pulls_url":"https://api.github.com/repos/tj/n/pulls{/number}","milestones_url":"https://api.github.com/repos/tj/n/milestones{/number}","notifications_url":"https://api.github.com/repos/tj/n/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/tj/n/labels{/name}","releases_url":"https://api.github.com/repos/tj/n/releases{/id}","deployments_url":"https://api.github.com/repos/tj/n/deployments","created_at":"2011-01-05T14:53:19Z","updated_at":"2025-11-09T06:49:29Z","pushed_at":"2025-11-08T22:03:38Z","git_url":"git://github.com/tj/n.git","ssh_url":"git@github.com:tj/n.git","clone_url":"https://github.com/tj/n.git","svn_url":"https://github.com/tj/n","homepage":"","size":3370,"stargazers_count":19425,"watchers_count":19425,"language":"Shell","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":764,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":5,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":764,"open_issues":5,"watchers":19425,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"# Bug Report\r\n\r\ncommand `n latest` fails with the error message:\r\n```\r\ncurl: (23) Failed writing received data to disk/application\r\n\r\nError: failed to download version index (https://nodejs.org/dist/index.tab)\r\n```\r\n\r\n## Summary\r\n\r\n\r\n## Steps to Reproduce\r\n\r\nIn linux CLI run command `n latest` or `n lts`\r\n\r\n## Expected Behaviour\r\n\r\nRequested version of node should be downloaded and installed\r\n\r\n## Actual Behaviour\r\n\r\nThe command fails writing downloaded version index file\r\n\r\n## Other Information\r\n\r\n`n` is installed in user's home directory, so user permissions is unlikely reason\r\n\r\n## Configuration Details\r\n\r\n<!--\r\nRun these commands and copy in the info.\r\n-->\r\n\r\n```bash\r\n$ n --version\r\nv9.2.1\r\n\r\n$ command -v node\r\n/home/user/.local/software/n/bin/node\r\n\r\n$ node -p process.platform\r\nlinux\r\n\r\n$ which n\r\n/home/user/.npm-global/bin/n\r\n```\r\n\r\nI would appreciate some hints how to find out where curl is attempting to store the version index file","reactions":{"url":"https://api.github.com/repos/tj/n/issues/798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/tj/n/issues/798/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]