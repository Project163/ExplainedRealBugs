{"url":"https://api.github.com/repos/curl/curl/issues/9917","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/9917/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/9917/comments","events_url":"https://api.github.com/repos/curl/curl/issues/9917/events","html_url":"https://github.com/curl/curl/issues/9917","id":1449773600,"node_id":"I_kwDOAAiu0c5Wacog","number":9917,"title":"Regression: Build fails on CentOS 7.","user":{"login":"stephan57160","id":37693621,"node_id":"MDQ6VXNlcjM3NjkzNjIx","avatar_url":"https://avatars.githubusercontent.com/u/37693621?v=4","gravatar_id":"","url":"https://api.github.com/users/stephan57160","html_url":"https://github.com/stephan57160","followers_url":"https://api.github.com/users/stephan57160/followers","following_url":"https://api.github.com/users/stephan57160/following{/other_user}","gists_url":"https://api.github.com/users/stephan57160/gists{/gist_id}","starred_url":"https://api.github.com/users/stephan57160/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stephan57160/subscriptions","organizations_url":"https://api.github.com/users/stephan57160/orgs","repos_url":"https://api.github.com/users/stephan57160/repos","events_url":"https://api.github.com/users/stephan57160/events{/privacy}","received_events_url":"https://api.github.com/users/stephan57160/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null},{"id":184118197,"node_id":"MDU6TGFiZWwxODQxMTgxOTc=","url":"https://api.github.com/repos/curl/curl/labels/regression","name":"regression","color":"33aa3f","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2022-11-15T13:18:46Z","updated_at":"2022-11-28T12:14:34Z","closed_at":"2022-11-28T12:14:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\r\n\r\nOn CentOS 7, the following script:\r\n```\r\ngit clone https://github.com/curl/curl.git\r\ncd curl\r\n./buildconf 2> /dev/null\r\n./configure xxx --prefix=${HOME}/CURL --without-ssl\r\nmake -j4\r\n```\r\n\r\nfails with:\r\n```\r\n  CC       slist_wc.o\r\n  CC       tool_binmode.o\r\n  CC       tool_bname.o\r\n  CC       tool_cb_dbg.o\r\n...\r\n../include/curl/curl.h:2831:24: note: in expansion of macro 'CURL_DEPRECATED'\r\n   CURLINFO_SIZE_UPLOAD CURL_DEPRECATED(7.55.0, \"Use CURLINFO_SIZE_UPLOAD_T\")\r\n                        ^\r\n../include/curl/curl.h:42:5: error: expected ',' or '}' before '__attribute__'\r\n     __attribute__((deprecated(\"since \" # version \". \" message)))\r\n     ^\r\n../include/curl/curl.h:2831:24: note: in expansion of macro 'CURL_DEPRECATED'\r\n   CURLINFO_SIZE_UPLOAD CURL_DEPRECATED(7.55.0, \"Use CURLINFO_SIZE_UPLOAD_T\")\r\n                        ^\r\nmake[2]: *** [slist_wc.o] Error 1\r\nmake[2]: *** Waiting for unfinished jobs....\r\nmake[2]: *** [tool_bname.o] Error 1\r\nmake[2]: *** [tool_binmode.o] Error 1\r\nmake[2]: *** [tool_cb_dbg.o] Error 1\r\nmake[2]: Leaving directory `/home/cbox_dev/git/zproject-android-testing/curl/src'\r\nmake[1]: *** [all-recursive] Error 1\r\nmake[1]: Leaving directory `/home/cbox_dev/git/zproject-android-testing/curl/src'\r\nmake: *** [all-recursive] Error 1\r\n```\r\n\r\nCurrent git log gives:\r\n```\r\n# git log --oneline -n 1\r\n6967571bf (HEAD -> master, origin/master, origin/HEAD) lib: feature deprecation warnings in gcc >= 4.3\r\n```\r\n\r\nThe exact same script works well, if CURL source tree is reset to following commit:\r\n```\r\n# git reset --hard 980510926d97e0513c4495473618473b41695836\r\nHEAD is now at 980510926 log2changes.pl: wrap long lines at 80 columns\r\n...\r\n  CC       tool_writeout_json.o\r\n  CC       tool_xattr.o\r\n  CC       nonblock.o\r\n  CC       dynbuf.o\r\n  CCLD     curl\r\nmake[2]: Leaving directory `/home/cbox_dev/git/zproject-android-testing/curl/src'\r\nmake[1]: Leaving directory `/home/cbox_dev/git/zproject-android-testing/curl/src'\r\nmake[1]: Entering directory `/home/cbox_dev/git/zproject-android-testing/curl'\r\nmake[1]: Nothing to be done for `all-am'.\r\nmake[1]: Leaving directory `/home/cbox_dev/git/zproject-android-testing/curl'\r\n```\r\n\r\n```\r\n# gcc --version\r\ngcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-44)\r\nCopyright (C) 2015 Free Software Foundation, Inc.\r\nThis is free software; see the source for copying conditions.  There is NO\r\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\r\n```\r\n\r\n### I expected the following\r\n\r\nCURL should build like previously.\r\n\r\n### Note\r\n\r\nThis script extracted from [CZMQ](https://github.com/zeromq/czmq) build system.\r\n\r\n@bluca for your information.\r\n","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/9917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/9917/timeline","performed_via_github_app":null,"state_reason":"completed"}