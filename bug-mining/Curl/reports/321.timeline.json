[{"id":10364744524,"node_id":"LE_lADOAAiu0c5w7byazwAAAAJpyXNM","url":"https://api.github.com/repos/curl/curl/issues/events/10364744524","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-09-13T21:18:17Z","label":{"name":"cmake","color":"d4c5f9"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1718405735","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1718405735","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1718405735,"node_id":"IC_kwDOAAiu0c5mbMpn","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-13T22:41:20Z","updated_at":"2023-09-21T22:35:36Z","body":"~~`CURL_STATICLIB` is supposed to be defined via `INTERFACE_COMPILE_DEFINITIONS \"CURL_STATICLIB\"` automatically in CMake. I wonder if the right codepath isn't hit in `lib/CMakeLists.txt` or this CMake option isn't effective in this particular build case.~~\r\n\r\n~~[ `CPPFLAG_CURL_STATICLIB` is autotools-specific. As a temporary workaround we can pass this via `-DCMAKE_C_FLAGS=-DCURL_STATICLIB` to CMake builds. ]~~","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1718405735/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1728376287","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1728376287","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1728376287,"node_id":"IC_kwDOAAiu0c5nBO3f","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-20T20:24:05Z","updated_at":"2023-09-21T23:24:01Z","body":"@Mathias-Fuchs: Can you post the invocation of CMake that replicates this issue?\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1728376287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10427433586,"node_id":"MEE_lADOAAiu0c5w7byazwAAAAJthgJy","url":"https://api.github.com/repos/curl/curl/issues/events/10427433586","actor":{"login":"Mathias-Fuchs","id":16633899,"node_id":"MDQ6VXNlcjE2NjMzODk5","avatar_url":"https://avatars.githubusercontent.com/u/16633899?v=4","gravatar_id":"","url":"https://api.github.com/users/Mathias-Fuchs","html_url":"https://github.com/Mathias-Fuchs","followers_url":"https://api.github.com/users/Mathias-Fuchs/followers","following_url":"https://api.github.com/users/Mathias-Fuchs/following{/other_user}","gists_url":"https://api.github.com/users/Mathias-Fuchs/gists{/gist_id}","starred_url":"https://api.github.com/users/Mathias-Fuchs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mathias-Fuchs/subscriptions","organizations_url":"https://api.github.com/users/Mathias-Fuchs/orgs","repos_url":"https://api.github.com/users/Mathias-Fuchs/repos","events_url":"https://api.github.com/users/Mathias-Fuchs/events{/privacy}","received_events_url":"https://api.github.com/users/Mathias-Fuchs/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-09-20T20:24:05Z","performed_via_github_app":null},{"id":10427433592,"node_id":"SE_lADOAAiu0c5w7byazwAAAAJthgJ4","url":"https://api.github.com/repos/curl/curl/issues/events/10427433592","actor":{"login":"Mathias-Fuchs","id":16633899,"node_id":"MDQ6VXNlcjE2NjMzODk5","avatar_url":"https://avatars.githubusercontent.com/u/16633899?v=4","gravatar_id":"","url":"https://api.github.com/users/Mathias-Fuchs","html_url":"https://github.com/Mathias-Fuchs","followers_url":"https://api.github.com/users/Mathias-Fuchs/followers","following_url":"https://api.github.com/users/Mathias-Fuchs/following{/other_user}","gists_url":"https://api.github.com/users/Mathias-Fuchs/gists{/gist_id}","starred_url":"https://api.github.com/users/Mathias-Fuchs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mathias-Fuchs/subscriptions","organizations_url":"https://api.github.com/users/Mathias-Fuchs/orgs","repos_url":"https://api.github.com/users/Mathias-Fuchs/repos","events_url":"https://api.github.com/users/Mathias-Fuchs/events{/privacy}","received_events_url":"https://api.github.com/users/Mathias-Fuchs/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-09-20T20:24:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730096041","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1730096041","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1730096041,"node_id":"IC_kwDOAAiu0c5nHyup","user":{"login":"alexsharoff","id":707030,"node_id":"MDQ6VXNlcjcwNzAzMA==","avatar_url":"https://avatars.githubusercontent.com/u/707030?v=4","gravatar_id":"","url":"https://api.github.com/users/alexsharoff","html_url":"https://github.com/alexsharoff","followers_url":"https://api.github.com/users/alexsharoff/followers","following_url":"https://api.github.com/users/alexsharoff/following{/other_user}","gists_url":"https://api.github.com/users/alexsharoff/gists{/gist_id}","starred_url":"https://api.github.com/users/alexsharoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexsharoff/subscriptions","organizations_url":"https://api.github.com/users/alexsharoff/orgs","repos_url":"https://api.github.com/users/alexsharoff/repos","events_url":"https://api.github.com/users/alexsharoff/events{/privacy}","received_events_url":"https://api.github.com/users/alexsharoff/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-21T18:29:31Z","updated_at":"2023-09-21T18:29:31Z","body":"IIRC, INTERFACE_COMPILE_DEFINITIONS will only affect the targets linking against the Curl static library. The static library itself will compile without `-DCURL_STATICLIB`, resulting in `CURL_EXTERN` expanding to `__declspec(dllexport)`. This is not good, because it makes DLLs or EXEs that link against static Curl unexpectedly export symbols.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730096041/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alexsharoff","id":707030,"node_id":"MDQ6VXNlcjcwNzAzMA==","avatar_url":"https://avatars.githubusercontent.com/u/707030?v=4","gravatar_id":"","url":"https://api.github.com/users/alexsharoff","html_url":"https://github.com/alexsharoff","followers_url":"https://api.github.com/users/alexsharoff/followers","following_url":"https://api.github.com/users/alexsharoff/following{/other_user}","gists_url":"https://api.github.com/users/alexsharoff/gists{/gist_id}","starred_url":"https://api.github.com/users/alexsharoff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexsharoff/subscriptions","organizations_url":"https://api.github.com/users/alexsharoff/orgs","repos_url":"https://api.github.com/users/alexsharoff/repos","events_url":"https://api.github.com/users/alexsharoff/events{/privacy}","received_events_url":"https://api.github.com/users/alexsharoff/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730481927","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1730481927","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1730481927,"node_id":"IC_kwDOAAiu0c5nJQ8H","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-21T23:23:27Z","updated_at":"2023-09-21T23:23:27Z","body":"You're right!\r\n\r\nHaven't made tests yet, but it now seems safe to always define `CURL_STATICLIB` for both shared and static libs in CMake, because we control DLL exports via `libcurl.def`.\r\n\r\n[ Also `libcurl.def` should probably only be used when `HIDES_CURL_PRIVATE_SYMBOLS` is defined. Also we should probably delete `INTERFACE_COMPILE_DEFINITIONS \"CURL_STATICLIB\"` from `LIB_OBJECT`. ]\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730481927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10441702931,"node_id":"LE_lADOAAiu0c5w7byazwAAAAJuX74T","url":"https://api.github.com/repos/curl/curl/issues/events/10441702931","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-09-22T00:44:00Z","label":{"name":"Windows","color":"0e8a16"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730665632","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1730665632","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1730665632,"node_id":"IC_kwDOAAiu0c5nJ9yg","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T01:40:44Z","updated_at":"2023-09-22T01:40:44Z","body":"```diff\r\n--- CMakeLists.txt\t2023-09-22\r\n+++ CMakeLists.txt-PAT\t2023-09-22\r\n@@ -127,8 +127,7 @@\r\n   add_library(${LIB_OBJECT} OBJECT ${HHEADERS} ${CSOURCES})\r\n   target_link_libraries(${LIB_OBJECT} PRIVATE ${CURL_LIBS})\r\n   set_target_properties(${LIB_OBJECT} PROPERTIES\r\n-    COMPILE_DEFINITIONS \"BUILDING_LIBCURL\"\r\n-    INTERFACE_COMPILE_DEFINITIONS \"CURL_STATICLIB\"\r\n+    COMPILE_DEFINITIONS \"BUILDING_LIBCURL;CURL_STATICLIB\"\r\n     POSITION_INDEPENDENT_CODE ON)\r\n   if(HIDES_CURL_PRIVATE_SYMBOLS)\r\n     set_target_properties(${LIB_OBJECT} PROPERTIES\r\n@@ -160,7 +159,7 @@\r\n   set_target_properties(${LIB_STATIC} PROPERTIES\r\n     PREFIX \"\" OUTPUT_NAME \"${LIBCURL_OUTPUT_NAME}\"\r\n     SUFFIX \"${STATIC_LIB_SUFFIX}${CMAKE_STATIC_LIBRARY_SUFFIX}\"\r\n-    COMPILE_DEFINITIONS \"BUILDING_LIBCURL\"\r\n+    COMPILE_DEFINITIONS \"BUILDING_LIBCURL;CURL_STATICLIB\"\r\n     INTERFACE_COMPILE_DEFINITIONS \"CURL_STATICLIB\")\r\n   if(HIDES_CURL_PRIVATE_SYMBOLS)\r\n     set_target_properties(${LIB_STATIC} PROPERTIES\r\n@@ -186,7 +185,7 @@\r\n   list(APPEND libcurl_export ${LIB_SHARED})\r\n   add_library(${LIB_SHARED} SHARED ${LIB_SOURCE})\r\n   add_library(${PROJECT_NAME}::${LIB_SHARED} ALIAS ${LIB_SHARED})\r\n-  if(WIN32)\r\n+  if(WIN32 AND HIDES_CURL_PRIVATE_SYMBOLS)\r\n     set_property(TARGET ${LIB_SHARED} APPEND PROPERTY SOURCES libcurl.rc ${CURL_SOURCE_DIR}/libcurl.def)\r\n   endif()\r\n   target_link_libraries(${LIB_SHARED} PRIVATE ${CURL_LIBS})\r\n@@ -194,7 +193,7 @@\r\n   set_target_properties(${LIB_SHARED} PROPERTIES\r\n     PREFIX \"\" OUTPUT_NAME \"${LIBCURL_OUTPUT_NAME}\"\r\n     IMPORT_PREFIX \"\" IMPORT_SUFFIX \"${IMPORT_LIB_SUFFIX}${CMAKE_IMPORT_LIBRARY_SUFFIX}\"\r\n-    COMPILE_DEFINITIONS \"BUILDING_LIBCURL\"\r\n+    COMPILE_DEFINITIONS \"BUILDING_LIBCURL;CURL_STATICLIB\"\r\n     POSITION_INDEPENDENT_CODE ON)\r\n   if(HIDES_CURL_PRIVATE_SYMBOLS)\r\n     set_target_properties(${LIB_SHARED} PROPERTIES\r\n```\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730665632/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730867110","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1730867110","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1730867110,"node_id":"IC_kwDOAAiu0c5nKu-m","user":{"login":"jzakrzewski","id":4115327,"node_id":"MDQ6VXNlcjQxMTUzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/4115327?v=4","gravatar_id":"","url":"https://api.github.com/users/jzakrzewski","html_url":"https://github.com/jzakrzewski","followers_url":"https://api.github.com/users/jzakrzewski/followers","following_url":"https://api.github.com/users/jzakrzewski/following{/other_user}","gists_url":"https://api.github.com/users/jzakrzewski/gists{/gist_id}","starred_url":"https://api.github.com/users/jzakrzewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzakrzewski/subscriptions","organizations_url":"https://api.github.com/users/jzakrzewski/orgs","repos_url":"https://api.github.com/users/jzakrzewski/repos","events_url":"https://api.github.com/users/jzakrzewski/events{/privacy}","received_events_url":"https://api.github.com/users/jzakrzewski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T06:22:10Z","updated_at":"2023-09-22T06:22:10Z","body":"Defining `CURL_STATICLIB` for a shared library seems a bit odd, though.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730867110/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jzakrzewski","id":4115327,"node_id":"MDQ6VXNlcjQxMTUzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/4115327?v=4","gravatar_id":"","url":"https://api.github.com/users/jzakrzewski","html_url":"https://github.com/jzakrzewski","followers_url":"https://api.github.com/users/jzakrzewski/followers","following_url":"https://api.github.com/users/jzakrzewski/following{/other_user}","gists_url":"https://api.github.com/users/jzakrzewski/gists{/gist_id}","starred_url":"https://api.github.com/users/jzakrzewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzakrzewski/subscriptions","organizations_url":"https://api.github.com/users/jzakrzewski/orgs","repos_url":"https://api.github.com/users/jzakrzewski/repos","events_url":"https://api.github.com/users/jzakrzewski/events{/privacy}","received_events_url":"https://api.github.com/users/jzakrzewski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730929126","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1730929126","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1730929126,"node_id":"IC_kwDOAAiu0c5nK-Hm","user":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T07:21:08Z","updated_at":"2023-09-22T07:21:08Z","body":"> Defining `CURL_STATICLIB` for a shared library seems a bit odd, though.\r\n\r\nWhen you build shared and static together the curl tool is supposed to use the shared one if I'm not mistaken.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1730929126/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jay","id":965580,"node_id":"MDQ6VXNlcjk2NTU4MA==","avatar_url":"https://avatars.githubusercontent.com/u/965580?v=4","gravatar_id":"","url":"https://api.github.com/users/jay","html_url":"https://github.com/jay","followers_url":"https://api.github.com/users/jay/followers","following_url":"https://api.github.com/users/jay/following{/other_user}","gists_url":"https://api.github.com/users/jay/gists{/gist_id}","starred_url":"https://api.github.com/users/jay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jay/subscriptions","organizations_url":"https://api.github.com/users/jay/orgs","repos_url":"https://api.github.com/users/jay/repos","events_url":"https://api.github.com/users/jay/events{/privacy}","received_events_url":"https://api.github.com/users/jay/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731135271","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1731135271","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1731135271,"node_id":"IC_kwDOAAiu0c5nLwcn","user":{"login":"jzakrzewski","id":4115327,"node_id":"MDQ6VXNlcjQxMTUzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/4115327?v=4","gravatar_id":"","url":"https://api.github.com/users/jzakrzewski","html_url":"https://github.com/jzakrzewski","followers_url":"https://api.github.com/users/jzakrzewski/followers","following_url":"https://api.github.com/users/jzakrzewski/following{/other_user}","gists_url":"https://api.github.com/users/jzakrzewski/gists{/gist_id}","starred_url":"https://api.github.com/users/jzakrzewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzakrzewski/subscriptions","organizations_url":"https://api.github.com/users/jzakrzewski/orgs","repos_url":"https://api.github.com/users/jzakrzewski/repos","events_url":"https://api.github.com/users/jzakrzewski/events{/privacy}","received_events_url":"https://api.github.com/users/jzakrzewski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T09:49:25Z","updated_at":"2023-09-22T09:49:25Z","body":"> When you build shared and static together the curl tool is supposed to use the shared one if I'm not mistaken.\r\n\r\nThat's not what I'm referring to. I mean it's odd to build a shared library, that has `CURL_STATICLIB` defined. \r\nAdditionally, every user of the built shared library should probably also define it, which is counter-intuitive.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731135271/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jzakrzewski","id":4115327,"node_id":"MDQ6VXNlcjQxMTUzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/4115327?v=4","gravatar_id":"","url":"https://api.github.com/users/jzakrzewski","html_url":"https://github.com/jzakrzewski","followers_url":"https://api.github.com/users/jzakrzewski/followers","following_url":"https://api.github.com/users/jzakrzewski/following{/other_user}","gists_url":"https://api.github.com/users/jzakrzewski/gists{/gist_id}","starred_url":"https://api.github.com/users/jzakrzewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzakrzewski/subscriptions","organizations_url":"https://api.github.com/users/jzakrzewski/orgs","repos_url":"https://api.github.com/users/jzakrzewski/repos","events_url":"https://api.github.com/users/jzakrzewski/events{/privacy}","received_events_url":"https://api.github.com/users/jzakrzewski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731188411","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1731188411","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1731188411,"node_id":"IC_kwDOAAiu0c5nL9a7","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T10:30:06Z","updated_at":"2023-09-22T10:30:06Z","body":"We use `CURL_STATICLIB` when building libcurl to disable `__declspec(dllexport)` (or equivalent). By using `libcurl.def`, `__declspec(dllexport)` is now unnecessary for shared libcurl. It means both static and shared can be built using the same flags. Meaning we can now use `CURL_STATICLIB` to tell `curl.h` to omit `__declspec`, otherwise it's adding it by default. \r\n\r\nThis is how curl-for-win builds were built all along via `Makefile.mk`/`Makefile.m32`.\r\n\r\nNot defining `CURL_STATICLIB` now means that the libcurl API will be explicitly exported by default, for both static and shared libcurl, which is indeed not what was intended, though the binaries should link and run without issues. The issue is that binaries linking to the static libcurl now also export the libcurl API.\r\n\r\nI'm working on a PR that fixes this issue and some other ones I found while looking into this.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731188411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10445968096,"node_id":"REFE_lADOAAiu0c5w7byazwAAAAJuoNLg","url":"https://api.github.com/repos/curl/curl/issues/events/10445968096","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5a272613fcb19926d527d51ec1ec0dc600fc1789","commit_url":"https://api.github.com/repos/vszakats/curl/commits/5a272613fcb19926d527d51ec1ec0dc600fc1789","created_at":"2023-09-22T10:44:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731219215","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1731219215","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1731219215,"node_id":"IC_kwDOAAiu0c5nME8P","user":{"login":"jzakrzewski","id":4115327,"node_id":"MDQ6VXNlcjQxMTUzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/4115327?v=4","gravatar_id":"","url":"https://api.github.com/users/jzakrzewski","html_url":"https://github.com/jzakrzewski","followers_url":"https://api.github.com/users/jzakrzewski/followers","following_url":"https://api.github.com/users/jzakrzewski/following{/other_user}","gists_url":"https://api.github.com/users/jzakrzewski/gists{/gist_id}","starred_url":"https://api.github.com/users/jzakrzewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzakrzewski/subscriptions","organizations_url":"https://api.github.com/users/jzakrzewski/orgs","repos_url":"https://api.github.com/users/jzakrzewski/repos","events_url":"https://api.github.com/users/jzakrzewski/events{/privacy}","received_events_url":"https://api.github.com/users/jzakrzewski/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T10:55:59Z","updated_at":"2023-09-22T10:55:59Z","body":"Thanks for the explanation, I get it now.\r\nI guess only the name of this define is a little weird now.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731219215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jzakrzewski","id":4115327,"node_id":"MDQ6VXNlcjQxMTUzMjc=","avatar_url":"https://avatars.githubusercontent.com/u/4115327?v=4","gravatar_id":"","url":"https://api.github.com/users/jzakrzewski","html_url":"https://github.com/jzakrzewski","followers_url":"https://api.github.com/users/jzakrzewski/followers","following_url":"https://api.github.com/users/jzakrzewski/following{/other_user}","gists_url":"https://api.github.com/users/jzakrzewski/gists{/gist_id}","starred_url":"https://api.github.com/users/jzakrzewski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzakrzewski/subscriptions","organizations_url":"https://api.github.com/users/jzakrzewski/orgs","repos_url":"https://api.github.com/users/jzakrzewski/repos","events_url":"https://api.github.com/users/jzakrzewski/events{/privacy}","received_events_url":"https://api.github.com/users/jzakrzewski/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T10:56:13Z","updated_at":"2023-09-22T10:56:13Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/11914","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/11914/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/11914/comments","events_url":"https://api.github.com/repos/curl/curl/issues/11914/events","html_url":"https://github.com/curl/curl/pull/11914","id":1908682921,"node_id":"PR_kwDOAAiu0c5a-sWm","number":11914,"title":"cmake: lib `CURL_STATICLIB` fixes (Windows)","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null},{"id":184118197,"node_id":"MDU6TGFiZWwxODQxMTgxOTc=","url":"https://api.github.com/repos/curl/curl/labels/regression","name":"regression","color":"33aa3f","default":false,"description":null},{"id":184123162,"node_id":"MDU6TGFiZWwxODQxMjMxNjI=","url":"https://api.github.com/repos/curl/curl/labels/cmake","name":"cmake","color":"d4c5f9","default":false,"description":null},{"id":940032249,"node_id":"MDU6TGFiZWw5NDAwMzIyNDk=","url":"https://api.github.com/repos/curl/curl/labels/Windows","name":"Windows","color":"0e8a16","default":false,"description":"Windows-specific"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-09-22T10:56:12Z","updated_at":"2023-09-25T22:11:28Z","closed_at":"2023-09-25T22:09:54Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/11914","html_url":"https://github.com/curl/curl/pull/11914","diff_url":"https://github.com/curl/curl/pull/11914.diff","patch_url":"https://github.com/curl/curl/pull/11914.patch","merged_at":null},"body":"- always define `CURL_STATICLIB` when building libcurl for Windows.\r\n\r\n  This disables `__declspec(dllexport)` for exported libcurl symbols.\r\n  In normal mode (hide symbols) these exported symbols are specified\r\n  via `libcurl.def`. When not hiding symbols, all symbols are exported\r\n  by default.\r\n\r\n  Regression from 1199308dbc902c52be67fc805c72dd2582520d30\r\n\r\n  Fixes #11844\r\n\r\n- fix to omit `libcurl.def` when not hiding private symbols.\r\n\r\n  Regression from 2ebc74c36a19a1700af394c16855ce144d9878e3\r\n\r\n- fix `ENABLED_DEBUG=ON` + shared curl tool Windows builds by also\r\n  omitting `libcurl.def` in this case, and exporting all symbols\r\n  instead. This ensures that a shared curl tool can access all debug\r\n  functions which are not normally exported from libcurl DLL.\r\n\r\n- delete `INTERFACE_COMPILE_DEFINITIONS \"CURL_STATICLIB\"` for \"objects\"\r\n  target.\r\n\r\n  Follow-up to 2ebc74c36a19a1700af394c16855ce144d9878e3\r\n\r\n- delete duplicate `BUILDING_LIBCURL` definitions.\r\n\r\n- fix `HIDES_CURL_PRIVATE_SYMBOLS` to not overwrite earlier build settings.\r\n\r\n  Follow-up to 1199308dbc902c52be67fc805c72dd2582520d30\r\n\r\nCloses #11914\r\n","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/11914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/11914/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731290269","html_url":"https://github.com/curl/curl/issues/11844#issuecomment-1731290269","issue_url":"https://api.github.com/repos/curl/curl/issues/11844","id":1731290269,"node_id":"IC_kwDOAAiu0c5nMWSd","user":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-22T11:53:36Z","updated_at":"2023-09-22T11:54:30Z","body":"The name is weird now indeed. There is no standard, but many times this matter is handled by a `*_EXPORTS` macro. Such macro is automatically defined by some build tools, including CMake.\r\n\r\nAnother issue is that `CURL_STATICLIB` overrides (in `curl.h`) any custom `CURL_EXTERN_SYMBOL` value that is used on non-Windows platforms, even for static builds. So `CURL_STATICLIB` is also Windows-specific.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1731290269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10446654233,"node_id":"REFE_lADOAAiu0c5w7byazwAAAAJuq0sZ","url":"https://api.github.com/repos/curl/curl/issues/events/10446654233","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7930b65ade9d4226b6360e7beb7cd518d5965d8f","commit_url":"https://api.github.com/repos/vszakats/curl/commits/7930b65ade9d4226b6360e7beb7cd518d5965d8f","created_at":"2023-09-22T12:04:20Z","performed_via_github_app":null},{"id":10453043486,"node_id":"REFE_lADOAAiu0c5w7byazwAAAAJvDMke","url":"https://api.github.com/repos/curl/curl/issues/events/10453043486","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4b84249ef88ccebd423c13c5f02f79251925ae54","commit_url":"https://api.github.com/repos/vszakats/curl/commits/4b84249ef88ccebd423c13c5f02f79251925ae54","created_at":"2023-09-23T11:06:25Z","performed_via_github_app":null},{"id":10453574932,"node_id":"REFE_lADOAAiu0c5w7byazwAAAAJvFOUU","url":"https://api.github.com/repos/curl/curl/issues/events/10453574932","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fd7bb9072844bde62591216547c27cf84f58c13f","commit_url":"https://api.github.com/repos/vszakats/curl/commits/fd7bb9072844bde62591216547c27cf84f58c13f","created_at":"2023-09-23T16:47:35Z","performed_via_github_app":null},{"id":10453985195,"node_id":"LE_lADOAAiu0c5w7byazwAAAAJvGyer","url":"https://api.github.com/repos/curl/curl/issues/events/10453985195","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-09-23T20:25:55Z","label":{"name":"regression","color":"33aa3f"},"performed_via_github_app":null},{"id":10456146127,"node_id":"REFE_lADOAAiu0c5w7byazwAAAAJvPCDP","url":"https://api.github.com/repos/curl/curl/issues/events/10456146127","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"352ffe18eb97ddbee55f07ae7e221dfe4c8ccac4","commit_url":"https://api.github.com/repos/vszakats/curl/commits/352ffe18eb97ddbee55f07ae7e221dfe4c8ccac4","created_at":"2023-09-24T23:21:42Z","performed_via_github_app":null},{"id":10467955971,"node_id":"CE_lADOAAiu0c5w7byazwAAAAJv8FUD","url":"https://api.github.com/repos/curl/curl/issues/events/10467955971","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a8ebde99f7beffb8df33f797180da077eac169db","commit_url":"https://api.github.com/repos/curl/curl/commits/a8ebde99f7beffb8df33f797180da077eac169db","created_at":"2023-09-25T22:09:54Z","state_reason":null,"performed_via_github_app":null},{"id":11664614827,"node_id":"REFE_lADOAAiu0c5w7byazwAAAAK3Q-Wr","url":"https://api.github.com/repos/curl/curl/issues/events/11664614827","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a8ebde99f7beffb8df33f797180da077eac169db","commit_url":"https://api.github.com/repos/webfutureiorepo/curl/commits/a8ebde99f7beffb8df33f797180da077eac169db","created_at":"2024-02-01T05:10:21Z","performed_via_github_app":null}]