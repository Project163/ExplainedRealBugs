{"url":"https://api.github.com/repos/curl/curl/issues/12048","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/12048/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/12048/comments","events_url":"https://api.github.com/repos/curl/curl/issues/12048/events","html_url":"https://github.com/curl/curl/issues/12048","id":1930974813,"node_id":"I_kwDOAAiu0c5zGFZd","number":12048,"title":"Command line variable expansion fails for filename options (8.3.0)","user":{"login":"PBudmark","id":16946832,"node_id":"MDQ6VXNlcjE2OTQ2ODMy","avatar_url":"https://avatars.githubusercontent.com/u/16946832?v=4","gravatar_id":"","url":"https://api.github.com/users/PBudmark","html_url":"https://github.com/PBudmark","followers_url":"https://api.github.com/users/PBudmark/followers","following_url":"https://api.github.com/users/PBudmark/following{/other_user}","gists_url":"https://api.github.com/users/PBudmark/gists{/gist_id}","starred_url":"https://api.github.com/users/PBudmark/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PBudmark/subscriptions","organizations_url":"https://api.github.com/users/PBudmark/orgs","repos_url":"https://api.github.com/users/PBudmark/repos","events_url":"https://api.github.com/users/PBudmark/events{/privacy}","received_events_url":"https://api.github.com/users/PBudmark/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":192912238,"node_id":"MDU6TGFiZWwxOTI5MTIyMzg=","url":"https://api.github.com/repos/curl/curl/labels/cmdline%20tool","name":"cmdline tool","color":"006b75","default":false,"description":null}],"state":"closed","locked":false,"assignee":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-10-06T21:52:48Z","updated_at":"2023-10-07T22:30:28Z","closed_at":"2023-10-07T22:30:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\r\n\r\nI am using curl 8.3.0 on Windows 10 Home 64bit\r\nMy intention was to set an environment variable BASE to part of file name, like\r\n  SET BASE=231006_2200\r\n\r\nand then use a fixed config file to retrieve JSON from some url,\r\nwhere the config file uses BASE to build file names for headers, stderr and output:\r\n```\r\n# config file curl-K\r\n--variable %BASE\r\n--expand-dump-header \"{{BASE}}_headers\"\r\n--expand-stderr \"{{BASE}}_stderr\"\r\n--expand-output \"{{BASE}}_output\"\r\n--verbose\r\n--url \"https://www.w3schools.com/js/json_demo.txt\"\r\n```\r\n\r\ncurl -q --config curl-K\r\n\r\n```\r\nWarning: curl-K:3: warning: '--expand-dump-header' variable expansion failure\r\nWarning: curl-K:4: warning: '--expand-stderr' variable expansion failure\r\nWarning: curl-K:5: warning: '--expand-output' variable expansion failure\r\n*   Trying 192.229.133.221:443...\r\n* Connected to www.w3schools.com (192.229.133.221) port 443\r\n* ALPN: curl offers h2,http/1.1\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n<---cut--->\r\n< content-length: 197\r\n<\r\n﻿{\r\n    \"name\":\"John\",\r\n    \"age\":31,\r\n    \"pets\":[\r\n        { \"animal\":\"dog\", \"name\":\"Fido\" },\r\n        { \"animal\":\"cat\", \"name\":\"Felix\" },\r\n        { \"animal\":\"hamster\", \"name\":\"Lightning\" }\r\n    ]\r\n}\r\n```\r\n\r\n\r\n### I expected the following\r\n\r\nHeaders written into 231006_2200_headers, verbose output into 231006_2200_stderr and JSON output into 231006_2200_output,\r\nbut variable expansion is not available for these options, \r\nas they are described as ARG_FILENAME in src/tool_getparam.c, array aliases.\r\nThe code at line 828 only allows expansion for options described as ARG_STRING, as --url and --data and others\r\n\r\n### curl/libcurl version\r\n\r\ncurl 8.3.0 (x86_64-w64-mingw32) libcurl/8.3.0 OpenSSL/3.1.2 (Schannel) zlib/1.3 brotli/1.1.0 zstd/1.5.5 WinIDN libssh2/1.11.0 nghttp2/1.56.0 ngtcp2/0.19.1 nghttp3/0.15.0\r\nRelease-Date: 2023-09-13\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ldap ldaps mqtt pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp ws wss\r\nFeatures: alt-svc AsynchDNS brotli HSTS HTTP2 HTTP3 HTTPS-proxy IDN IPv6 Kerberos Largefile libz MultiSSL NTLM SPNEGO SSL SSPI threadsafe UnixSockets zstd\r\n\r\n\r\n### operating system\r\n\r\nFrom Windows Settings About:\r\nWindows specifications\r\nEdition\tWindows 10 Home\r\nVersion\t22H2\r\nInstalled on\t‎2020-‎11-‎02\r\nOS build\t19045.3448\r\nExperience\tWindows Feature Experience Pack 1000.19044.1000.0\r\n","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/12048/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/12048/timeline","performed_via_github_app":null,"state_reason":"completed"}