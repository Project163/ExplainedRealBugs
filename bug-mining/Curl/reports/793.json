{"url":"https://api.github.com/repos/curl/curl/issues/18493","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/18493/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/18493/comments","events_url":"https://api.github.com/repos/curl/curl/issues/18493/events","html_url":"https://github.com/curl/curl/issues/18493","id":3393997505,"node_id":"I_kwDOAAiu0c7KTErB","number":18493,"title":"New SSIZE_MAX broke IBMi build","user":{"login":"andrewkirillov-ibm","id":152863221,"node_id":"U_kgDOCRyB9Q","avatar_url":"https://avatars.githubusercontent.com/u/152863221?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewkirillov-ibm","html_url":"https://github.com/andrewkirillov-ibm","followers_url":"https://api.github.com/users/andrewkirillov-ibm/followers","following_url":"https://api.github.com/users/andrewkirillov-ibm/following{/other_user}","gists_url":"https://api.github.com/users/andrewkirillov-ibm/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewkirillov-ibm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewkirillov-ibm/subscriptions","organizations_url":"https://api.github.com/users/andrewkirillov-ibm/orgs","repos_url":"https://api.github.com/users/andrewkirillov-ibm/repos","events_url":"https://api.github.com/users/andrewkirillov-ibm/events{/privacy}","received_events_url":"https://api.github.com/users/andrewkirillov-ibm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-09-08T12:28:22Z","updated_at":"2025-09-08T12:53:39Z","closed_at":"2025-09-08T12:53:39Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nAs we are approaching release now and have RC3, I grabbed the latest code from the master branch and built it on OS400 (V7R4M0). The build failed:\n```\nCZM1003:  /QIBM/include/sys/limits.h, 144.9: CZM0213(30) Macro name SSIZE_MAX cannot be redefined.\n...\nCZS0601:  Module ALTSVC is not created because statement errors occurred.\nCZM0613:  The compilation failed.\n```\n\nI see the new `SSIZE_MAX` was introduced about a week ago here:\nhttps://github.com/curl/curl/pull/18426\n\nThen there was an update to include `stdint.h` earlier in the header file, so that `#ifndef` works correctly.\nhttps://github.com/curl/curl/commit/598078dcf8a5bfc5597f68dd068986f5cd9030d0\n\nThe problem is that similar was not done for `limits.h`\n\nOn my Linux system, I have `SIZE_MAX` in `stdint.h`, but `SSIZE_MAX` is missing in `limits.h` (as the code comment suggests, some systems don' have it).\n\nOn the IBMi system I have both: `SIZE_MAX` in `stdint.h` and `SSIZE_MAX` in `limits.h`.\n\nHowever, as `limits.h` is not included from `curl_setup.h`, we get CURL version of `SSIZE_MAX`. Later on, when `limits.h` is included, the IBMi compiler gets upset.\n\n### I expected the following\n\nI expect a clean build.\n\n### curl/libcurl version\n\n8.16.0-DEV (master branch as of September 8)\n\n### operating system\n\nOS400 V7R4M0","closed_by":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/18493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/18493/timeline","performed_via_github_app":null,"state_reason":"completed"}