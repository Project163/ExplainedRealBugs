{"url":"https://api.github.com/repos/curl/curl/issues/15580","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/15580/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/15580/comments","events_url":"https://api.github.com/repos/curl/curl/issues/15580/events","html_url":"https://github.com/curl/curl/issues/15580","id":2659242385,"node_id":"I_kwDOAAiu0c6egNGR","number":15580,"title":"AIX build is broken","user":{"login":"andrewkirillov-ibm","id":152863221,"node_id":"U_kgDOCRyB9Q","avatar_url":"https://avatars.githubusercontent.com/u/152863221?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewkirillov-ibm","html_url":"https://github.com/andrewkirillov-ibm","followers_url":"https://api.github.com/users/andrewkirillov-ibm/followers","following_url":"https://api.github.com/users/andrewkirillov-ibm/following{/other_user}","gists_url":"https://api.github.com/users/andrewkirillov-ibm/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewkirillov-ibm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewkirillov-ibm/subscriptions","organizations_url":"https://api.github.com/users/andrewkirillov-ibm/orgs","repos_url":"https://api.github.com/users/andrewkirillov-ibm/repos","events_url":"https://api.github.com/users/andrewkirillov-ibm/events{/privacy}","received_events_url":"https://api.github.com/users/andrewkirillov-ibm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-11-14T15:46:17Z","updated_at":"2024-11-15T21:56:44Z","closed_at":"2024-11-15T21:56:44Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nBuilding curl 8.11.0 on AIX system using XL C compiler:\r\nhttps://www.ibm.com/docs/en/xl-c-and-cpp-aix/16.1?topic=cc-highly-configurable-compiler\r\n\r\n```\r\nexport PATH=$PATH:/opt/IBM/xlc/16.1.0/bin\r\nexport CC=xlc_r\r\n./configure --without-ssl --without-libpsl\r\nmake\r\n```\r\n\r\nThis results in a failed build:\r\n```\r\n\"var.h\", line 30.8: 1506-334 (S) Identifier var has already been defined on line 64 of \"/usr/include/sys/var.h\".\r\nmake: The error code from the last command is 1.\r\n```\r\n\r\nThe reason for this failure is a recent fix to #14880. In that fix we now include pthread.h from curl_setup.h The problem is that AIX systems have a sys/var.h system header. That header gets included through a chain with pthread.h. Also that header defines a \"struct var\" type. CURL also defines \"struct var\" in src/var.h. And so, as we now pull pthreads.h from one of the main curl headers, the system var structures conflicts with the curl's one.\r\n\n\n### I expected the following\n\nClean build\n\n### curl/libcurl version\n\n8.11.0\n\n### operating system\n\nAIX 7.2\r\nIBM XL C/C++ for AIX, V16.1.0","closed_by":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/15580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/15580/timeline","performed_via_github_app":null,"state_reason":"completed"}