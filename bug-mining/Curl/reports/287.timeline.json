[{"id":9363356188,"node_id":"LE_lADOAAiu0c5nF0TPzwAAAAIuGXoc","url":"https://api.github.com/repos/curl/curl/issues/events/9363356188","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-05-28T21:47:59Z","label":{"name":"build","color":"bfdadc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1569364094","html_url":"https://github.com/curl/curl/issues/11215#issuecomment-1569364094","issue_url":"https://api.github.com/repos/curl/curl/issues/11215","id":1569364094,"node_id":"IC_kwDOAAiu0c5diph-","user":{"login":"nickzman","id":52866,"node_id":"MDQ6VXNlcjUyODY2","avatar_url":"https://avatars.githubusercontent.com/u/52866?v=4","gravatar_id":"","url":"https://api.github.com/users/nickzman","html_url":"https://github.com/nickzman","followers_url":"https://api.github.com/users/nickzman/followers","following_url":"https://api.github.com/users/nickzman/following{/other_user}","gists_url":"https://api.github.com/users/nickzman/gists{/gist_id}","starred_url":"https://api.github.com/users/nickzman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickzman/subscriptions","organizations_url":"https://api.github.com/users/nickzman/orgs","repos_url":"https://api.github.com/users/nickzman/repos","events_url":"https://api.github.com/users/nickzman/events{/privacy}","received_events_url":"https://api.github.com/users/nickzman/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T01:38:19Z","updated_at":"2023-05-31T01:38:19Z","body":"Are you sure that you have the latest command line developer tools installed? I've seen this sort of thing happen when building curl & either the command line tools were not installed, or an old version was installed.\r\n\r\nYou can make sure by running `xcode-select --install` from the command line.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1569364094/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nickzman","id":52866,"node_id":"MDQ6VXNlcjUyODY2","avatar_url":"https://avatars.githubusercontent.com/u/52866?v=4","gravatar_id":"","url":"https://api.github.com/users/nickzman","html_url":"https://github.com/nickzman","followers_url":"https://api.github.com/users/nickzman/followers","following_url":"https://api.github.com/users/nickzman/following{/other_user}","gists_url":"https://api.github.com/users/nickzman/gists{/gist_id}","starred_url":"https://api.github.com/users/nickzman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nickzman/subscriptions","organizations_url":"https://api.github.com/users/nickzman/orgs","repos_url":"https://api.github.com/users/nickzman/repos","events_url":"https://api.github.com/users/nickzman/events{/privacy}","received_events_url":"https://api.github.com/users/nickzman/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1570481934","html_url":"https://github.com/curl/curl/issues/11215#issuecomment-1570481934","issue_url":"https://api.github.com/repos/curl/curl/issues/11215","id":1570481934,"node_id":"IC_kwDOAAiu0c5dm6cO","user":{"login":"afalkenhahn","id":6772528,"node_id":"MDQ6VXNlcjY3NzI1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6772528?v=4","gravatar_id":"","url":"https://api.github.com/users/afalkenhahn","html_url":"https://github.com/afalkenhahn","followers_url":"https://api.github.com/users/afalkenhahn/followers","following_url":"https://api.github.com/users/afalkenhahn/following{/other_user}","gists_url":"https://api.github.com/users/afalkenhahn/gists{/gist_id}","starred_url":"https://api.github.com/users/afalkenhahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afalkenhahn/subscriptions","organizations_url":"https://api.github.com/users/afalkenhahn/orgs","repos_url":"https://api.github.com/users/afalkenhahn/repos","events_url":"https://api.github.com/users/afalkenhahn/events{/privacy}","received_events_url":"https://api.github.com/users/afalkenhahn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T15:45:55Z","updated_at":"2023-05-31T15:46:17Z","body":"Thanks for the comment but running `xcode-select --install` didn't change anything. As I said above, when compiling a little test program using **the same line** as found in `config.log` there is no problem at all so it's a bit weird what's going on with `configure`. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1570481934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"afalkenhahn","id":6772528,"node_id":"MDQ6VXNlcjY3NzI1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6772528?v=4","gravatar_id":"","url":"https://api.github.com/users/afalkenhahn","html_url":"https://github.com/afalkenhahn","followers_url":"https://api.github.com/users/afalkenhahn/followers","following_url":"https://api.github.com/users/afalkenhahn/following{/other_user}","gists_url":"https://api.github.com/users/afalkenhahn/gists{/gist_id}","starred_url":"https://api.github.com/users/afalkenhahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afalkenhahn/subscriptions","organizations_url":"https://api.github.com/users/afalkenhahn/orgs","repos_url":"https://api.github.com/users/afalkenhahn/repos","events_url":"https://api.github.com/users/afalkenhahn/events{/privacy}","received_events_url":"https://api.github.com/users/afalkenhahn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1570637853","html_url":"https://github.com/curl/curl/issues/11215#issuecomment-1570637853","issue_url":"https://api.github.com/repos/curl/curl/issues/11215","id":1570637853,"node_id":"IC_kwDOAAiu0c5dnggd","user":{"login":"afalkenhahn","id":6772528,"node_id":"MDQ6VXNlcjY3NzI1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6772528?v=4","gravatar_id":"","url":"https://api.github.com/users/afalkenhahn","html_url":"https://github.com/afalkenhahn","followers_url":"https://api.github.com/users/afalkenhahn/followers","following_url":"https://api.github.com/users/afalkenhahn/following{/other_user}","gists_url":"https://api.github.com/users/afalkenhahn/gists{/gist_id}","starred_url":"https://api.github.com/users/afalkenhahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afalkenhahn/subscriptions","organizations_url":"https://api.github.com/users/afalkenhahn/orgs","repos_url":"https://api.github.com/users/afalkenhahn/repos","events_url":"https://api.github.com/users/afalkenhahn/events{/privacy}","received_events_url":"https://api.github.com/users/afalkenhahn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-31T17:35:53Z","updated_at":"2023-05-31T17:35:53Z","body":"FWIW here is the full output of `configure`: (see below for an analysis)\r\n\r\n```\r\nchecking whether to enable maintainer-specific portions of Makefiles... no\r\nchecking whether make supports nested variables... yes\r\nchecking whether to enable debug build options... no\r\nchecking whether to enable compiler optimizer... (assumed) yes\r\nchecking whether to enable strict compiler warnings... no\r\nchecking whether to enable compiler warnings as errors... no\r\nchecking whether to enable curl debug memory tracking... no\r\nchecking whether to enable hiding of library internal symbols... yes\r\nchecking whether to enable c-ares for DNS lookups... no\r\nchecking whether to disable dependency on -lrt... (assumed no)\r\nchecking whether to enable ECH support... no\r\nchecking for path separator... :\r\nchecking for sed... /usr/bin/sed\r\nchecking for grep... /usr/bin/grep\r\nchecking that grep -E works... yes\r\nchecking for aarch64-apple-darwin-ar... no\r\nchecking for ar... /usr/bin/ar\r\nchecking for a BSD-compatible install... /usr/bin/install -c\r\nchecking for aarch64-apple-darwin-gcc... /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables... \r\nchecking whether we are cross compiling... yes\r\nchecking for suffix of object files... o\r\nchecking whether the compiler supports GNU C... yes\r\nchecking whether /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang accepts -g... yes\r\nchecking for /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang option to enable C11 features... none needed\r\nchecking whether /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang understands -c and -o together... yes\r\nchecking how to run the C preprocessor... /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -E\r\nchecking for stdio.h... yes\r\nchecking for stdlib.h... yes\r\nchecking for string.h... yes\r\nchecking for inttypes.h... yes\r\nchecking for stdint.h... yes\r\nchecking for strings.h... yes\r\nchecking for sys/stat.h... yes\r\nchecking for sys/types.h... yes\r\nchecking for unistd.h... yes\r\nchecking for stdatomic.h... yes\r\nchecking if _Atomic is available... yes\r\nchecking for a sed that does not truncate output... (cached) /usr/bin/sed\r\nchecking for code coverage support... no\r\nchecking whether build environment is sane... yes\r\nchecking for aarch64-apple-darwin-strip... no\r\nchecking for strip... strip\r\nconfigure: WARNING: using cross tools not prefixed with host triplet\r\nchecking for a race-free mkdir -p... ../install-sh -c -d\r\nchecking for gawk... no\r\nchecking for mawk... no\r\nchecking for nawk... no\r\nchecking for awk... awk\r\nchecking whether make sets $(MAKE)... yes\r\nchecking whether make supports the include directive... yes (GNU style)\r\nchecking dependency style of /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang... gcc3\r\nchecking curl version... 8.0.1\r\nchecking for httpd... /usr/sbin/httpd\r\nchecking for apachectl... /usr/sbin/apachectl\r\nchecking for apxs... no\r\nconfigure: apxs not in PATH, httpd tests disabled\r\nchecking for nghttpx... no\r\nchecking for caddy... no\r\nchecking build system type... aarch64-apple-darwin22.3.0\r\nchecking host system type... aarch64-apple-darwin\r\nchecking for grep that handles long lines and -e... (cached) /usr/bin/grep\r\nchecking for egrep... /usr/bin/grep -E\r\nchecking if OS is AIX (to define _ALL_SOURCE)... no\r\nchecking if _THREAD_SAFE is already defined... no\r\nchecking if _THREAD_SAFE is actually needed... no\r\nchecking if _THREAD_SAFE is onwards defined... no\r\nchecking if _REENTRANT is already defined... no\r\nchecking if _REENTRANT is actually needed... no\r\nchecking if _REENTRANT is onwards defined... no\r\nchecking for special C compiler options needed for large files... no\r\nchecking for _FILE_OFFSET_BITS value needed for large files... no\r\nchecking how to print strings... printf\r\nchecking for a sed that does not truncate output... (cached) /usr/bin/sed\r\nchecking for fgrep... /usr/bin/grep -F\r\nchecking for ld used by /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang... /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld\r\nchecking if the linker (/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld) is GNU ld... no\r\nchecking for BSD- or MS-compatible name lister (nm)... no\r\nchecking for aarch64-apple-darwin-dumpbin... no\r\nchecking for aarch64-apple-darwin-link... no\r\nchecking for dumpbin... no\r\nchecking for link... link -dump\r\nchecking the name lister (nm) interface... BSD nm\r\nchecking whether ln -s works... yes\r\nchecking the maximum length of command line arguments... 786432\r\nchecking how to convert aarch64-apple-darwin22.3.0 file names to aarch64-apple-darwin format... func_convert_file_noop\r\nchecking how to convert aarch64-apple-darwin22.3.0 file names to toolchain format... func_convert_file_noop\r\nchecking for /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld option to reload object files... -r\r\nchecking for aarch64-apple-darwin-file... no\r\nchecking for file... file\r\nchecking for aarch64-apple-darwin-objdump... no\r\nchecking for objdump... objdump\r\nchecking how to recognize dependent libraries... pass_all\r\nchecking for aarch64-apple-darwin-dlltool... no\r\nchecking for dlltool... no\r\nchecking how to associate runtime and link libraries... printf %s\\n\r\nchecking for aarch64-apple-darwin-ar... /usr/bin/ar\r\nchecking for archiver @FILE support... no\r\nchecking for aarch64-apple-darwin-strip... strip\r\nchecking for aarch64-apple-darwin-ranlib... no\r\nchecking for ranlib... ranlib\r\nchecking command to parse nm output from /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang object... ok\r\nchecking for sysroot... no\r\nchecking for a working dd... /bin/dd\r\nchecking how to truncate binary pipes... /bin/dd bs=4096 count=1\r\nchecking for aarch64-apple-darwin-mt... no\r\nchecking for mt... no\r\nchecking if : is a manifest tool... no\r\nchecking for aarch64-apple-darwin-dsymutil... no\r\nchecking for dsymutil... dsymutil\r\nchecking for aarch64-apple-darwin-nmedit... no\r\nchecking for nmedit... nmedit\r\nchecking for aarch64-apple-darwin-lipo... no\r\nchecking for lipo... lipo\r\nchecking for aarch64-apple-darwin-otool... no\r\nchecking for otool... otool\r\nchecking for aarch64-apple-darwin-otool64... no\r\nchecking for otool64... no\r\nchecking for -single_module linker flag... yes\r\nchecking for -exported_symbols_list linker flag... yes\r\nchecking for -force_load linker flag... yes\r\nchecking for dlfcn.h... yes\r\nchecking for objdir... .libs\r\nchecking if /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang supports -fno-rtti -fno-exceptions... yes\r\nchecking for /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang option to produce PIC... -fno-common -DPIC\r\nchecking if /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang PIC flag -fno-common -DPIC works... yes\r\nchecking if /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang static flag -static works... no\r\nchecking if /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang supports -c -o file.o... yes\r\nchecking if /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang supports -c -o file.o... (cached) yes\r\nchecking whether the /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang linker (/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld) supports shared libraries... yes\r\nchecking dynamic linker characteristics... darwin dyld\r\nchecking how to hardcode library paths into programs... immediate\r\nchecking whether stripping libraries is possible... yes\r\nchecking if libtool supports shared libraries... yes\r\nchecking whether to build shared libraries... no\r\nchecking whether to build static libraries... yes\r\nchecking whether to build shared libraries with -version-info... yes\r\nchecking whether to build shared libraries with -no-undefined... no\r\nchecking whether to build shared libraries with -mimpure-text... no\r\nchecking whether to build shared libraries with PIC... yes\r\nchecking whether to build static libraries with PIC... yes\r\nchecking whether to build shared libraries only... no\r\nchecking whether to build static libraries only... yes\r\nchecking for aarch64-apple-darwin-windres... no\r\nchecking for windres... no\r\nchecking for inline... inline\r\nchecking if cpp -P is needed... no\r\nchecking if compiler is DEC/Compaq/HP C... no\r\nchecking if compiler is HP-UX C... no\r\nchecking if compiler is IBM C... no\r\nchecking if compiler is Intel C... no\r\nchecking if compiler is clang... yes\r\nchecking if compiler is xlclang... no\r\nchecking if compiler is GNU C... no\r\nchecking if compiler is LCC... no\r\nchecking if compiler is SGI MIPSpro C... no\r\nchecking if compiler is SGI MIPS C... no\r\nchecking if compiler is SunPro C... no\r\nchecking if compiler is Tiny C... no\r\nchecking if compiler accepts some basic options... yes\r\nconfigure: compiler options added: -Qunused-arguments -Wno-pointer-bool-conversion \r\nchecking if compiler optimizer assumed setting might be used... no\r\nchecking if compiler halts on compilation errors... yes\r\nchecking if compiler halts on negative sized arrays... yes\r\nchecking if compiler halts on function prototype mismatch... yes\r\nchecking if compiler supports hiding library internal symbols... yes\r\nchecking for windows.h... no\r\nchecking whether build target is a native Windows one... no\r\nchecking whether build target supports WIN32 file API... no\r\nchecking whether build target supports WIN32 crypto API... no\r\nchecking for good-to-use Darwin CFLAGS... yes\r\nchecking whether /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang accepts -Werror=partial-availability... yes\r\nchecking whether to link macOS CoreFoundation and SystemConfiguration framework... no\r\nchecking to see if the compiler supports __builtin_available()... yes\r\nchecking whether to support http... yes\r\nchecking whether to support ftp... yes\r\nchecking whether to support file... yes\r\nchecking whether to support ldap... yes\r\nchecking whether to support ldaps... yes\r\nchecking whether to support rtsp... yes\r\nchecking whether to support proxies... yes\r\nchecking whether to support dict... yes\r\nchecking whether to support telnet... yes\r\nchecking whether to support tftp... yes\r\nchecking whether to support pop3... yes\r\nchecking whether to support imap... yes\r\nchecking whether to support smb... yes\r\nchecking whether to support smtp... yes\r\nchecking whether to support gopher... yes\r\nchecking whether to support mqtt... no\r\nchecking whether to provide built-in manual... yes\r\nchecking whether to enable generation of C code... yes\r\nchecking whether to use libgcc... no\r\nchecking if X/Open network library is required... no\r\nchecking for gethostbyname... yes\r\nchecking for windows.h... (cached) no\r\nchecking for winsock2.h... (cached) no\r\nchecking for proto/bsdsocket.h... no\r\nchecking for connect in libraries... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/time.h... yes\r\nchecking for monotonic clock_gettime... no\r\nchecking for aarch64-apple-darwin-pkg-config... no\r\nchecking for pkg-config... no\r\nchecking for inflateEnd in -lz... yes\r\nchecking for zlib.h... yes\r\nconfigure: found both libz and libz.h header\r\nchecking for BrotliDecoderDecompress in -lbrotlidec... no\r\nchecking for brotli/decode.h... no\r\nchecking for ZSTD_createDStream in -lzstd... no\r\nchecking for zstd.h... no\r\nchecking for lber.h... no\r\nchecking for ldap.h... no\r\nchecking for ldap_ssl.h... no\r\nchecking for LDAP libraries... cannot find LDAP libraries\r\nconfigure: WARNING: Cannot find libraries for LDAP support: LDAP disabled\r\nchecking whether to enable IPv6... yes\r\nchecking if struct sockaddr_in6 has sin6_scope_id member... yes\r\nchecking if argv can be written to... no\r\nconfigure: WARNING: the previous check could not be made default was used\r\nchecking if GSS-API support is requested... no\r\nchecking whether to enable Windows native SSL/TLS... no\r\nchecking whether to enable Secure Transport... yes\r\nchecking whether to enable Amiga native SSL/TLS (AmiSSL v5)... no\r\nconfigure: built with one SSL backend\r\nchecking for library containing psl_builtin... no\r\nconfigure: WARNING: libpsl was not found\r\nchecking for library containing gsasl_init... no\r\nconfigure: WARNING: libgsasl was not found\r\nchecking for RTMP_Init in -lrtmp... no\r\nchecking whether versioned symbols are wanted... no\r\nchecking whether to enable Windows native IDN (Windows native builds only)... no\r\nchecking whether to build with libidn2... (assumed) yes\r\nchecking for aarch64-apple-darwin-pkg-config... no\r\nchecking for pkg-config... no\r\nconfigure: IDN_LIBS: \"-lidn2\"\r\nconfigure: IDN_LDFLAGS: \"\"\r\nconfigure: IDN_CPPFLAGS: \"\"\r\nconfigure: IDN_DIR: \"\"\r\nchecking if idn2_lookup_ul can be linked... no\r\nchecking for idn2.h... no\r\nconfigure: WARNING: Cannot find libraries for IDN support: IDN disabled\r\nchecking for aarch64-apple-darwin-pkg-config... no\r\nchecking for pkg-config... no\r\nchecking for nghttp2_session_set_local_window_size in -lnghttp2... no\r\nchecking for aarch64-apple-darwin-pkg-config... no\r\nchecking for pkg-config... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/time.h... (cached) yes\r\nchecking for sys/select.h... yes\r\nchecking for sys/socket.h... yes\r\nchecking for sys/ioctl.h... yes\r\nchecking for sys/uio.h... yes\r\nchecking for unistd.h... (cached) yes\r\nchecking for stdlib.h... (cached) yes\r\nchecking for arpa/inet.h... yes\r\nchecking for net/if.h... yes\r\nchecking for netinet/in.h... yes\r\nchecking for netinet/in6.h... no\r\nchecking for sys/un.h... yes\r\nchecking for linux/tcp.h... no\r\nchecking for netinet/tcp.h... yes\r\nchecking for netinet/udp.h... yes\r\nchecking for netdb.h... yes\r\nchecking for sys/sockio.h... yes\r\nchecking for sys/stat.h... (cached) yes\r\nchecking for sys/param.h... yes\r\nchecking for termios.h... yes\r\nchecking for termio.h... no\r\nchecking for fcntl.h... yes\r\nchecking for io.h... no\r\nchecking for pwd.h... yes\r\nchecking for utime.h... yes\r\nchecking for sys/utime.h... no\r\nchecking for sys/poll.h... yes\r\nchecking for poll.h... yes\r\nchecking for socket.h... no\r\nchecking for sys/resource.h... yes\r\nchecking for libgen.h... yes\r\nchecking for locale.h... yes\r\nchecking for stdbool.h... yes\r\nchecking for arpa/tftp.h... no\r\nchecking for sys/filio.h... yes\r\nchecking for sys/wait.h... yes\r\nchecking for setjmp.h... yes\r\nchecking for an ANSI C-conforming const... yes\r\nchecking for compiler support of C99 variadic macro style... yes\r\nchecking for compiler support of old gcc variadic macro style... yes\r\nchecking for size_t... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/time.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking for struct timeval... yes\r\nchecking size of size_t... 8\r\nchecking size of long... 8\r\nchecking size of int... 4\r\nchecking size of time_t... 8\r\nchecking size of off_t... 8\r\nchecking size of curl_off_t... 8\r\nchecking for long long... yes\r\nchecking for ssize_t... yes\r\nchecking for bool... yes\r\nchecking for sa_family_t... yes\r\nchecking for suseconds_t... yes\r\nchecking if time_t is unsigned... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for poll.h... (cached) yes\r\nchecking for sys/poll.h... (cached) yes\r\nchecking for in_addr_t... yes\r\nchecking for struct sockaddr_storage... yes\r\nchecking for sys/select.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking for select... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking for recv... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking for send... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking for MSG_NOSIGNAL... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for unistd.h... (cached) yes\r\nchecking if alarm can be linked... yes\r\nchecking if alarm is prototyped... no\r\nchecking if alarm might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for string.h... (cached) yes\r\nchecking for strings.h... (cached) yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for libgen.h... (cached) yes\r\nchecking if basename can be linked... yes\r\nchecking if basename is prototyped... no\r\nchecking if basename might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for socket.h... (cached) no\r\nchecking if closesocket can be linked... no\r\nchecking if closesocket might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking if CloseSocket can be linked... no\r\nchecking if CloseSocket might be used... no\r\nchecking if connect can be linked... yes\r\nchecking if connect is prototyped... no\r\nchecking if connect might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for unistd.h... (cached) yes\r\nchecking for fcntl.h... (cached) yes\r\nchecking if fcntl can be linked... yes\r\nchecking if fcntl is prototyped... no\r\nchecking if fcntl might be used... no\r\nchecking for windows.h... (cached) no\r\nchecking for winsock2.h... (cached) no\r\nchecking for ws2tcpip.h... (cached) no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for netdb.h... (cached) yes\r\nchecking if freeaddrinfo can be linked... yes\r\nchecking if freeaddrinfo is prototyped... no\r\nchecking if freeaddrinfo might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/xattr.h... yes\r\nchecking if fsetxattr can be linked... yes\r\nchecking if fsetxattr is prototyped... no\r\nchecking if fsetxattr might be used... no\r\nchecking if ftruncate can be linked... yes\r\nchecking if ftruncate is prototyped... no\r\nchecking if ftruncate might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for stdlib.h... (cached) yes\r\nchecking if getaddrinfo can be linked... yes\r\nchecking if getaddrinfo is prototyped... no\r\nchecking if getaddrinfo might be used... no\r\nchecking if gethostbyname can be linked... yes\r\nchecking if gethostbyname is prototyped... no\r\nchecking if gethostbyname might be used... no\r\nchecking if gethostbyname_r can be linked... no\r\nchecking if gethostbyname_r might be used... no\r\nchecking if gethostname can be linked... yes\r\nchecking if gethostname is prototyped... no\r\nchecking if gethostname might be used... no\r\nchecking if getpeername can be linked... yes\r\nchecking if getpeername is prototyped... no\r\nchecking if getpeername might be used... no\r\nchecking if getsockname can be linked... yes\r\nchecking if getsockname is prototyped... no\r\nchecking if getsockname might be used... no\r\nchecking for net/if.h... (cached) yes\r\nchecking if if_nametoindex can be linked... yes\r\nchecking if if_nametoindex is prototyped... no\r\nchecking if if_nametoindex might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking for netinet/in.h... (cached) yes\r\nchecking for ifaddrs.h... yes\r\nchecking if getifaddrs can be linked... yes\r\nchecking if getifaddrs is prototyped... no\r\nchecking if getifaddrs might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/time.h... (cached) yes\r\nchecking if gmtime_r can be linked... yes\r\nchecking if gmtime_r is prototyped... no\r\nchecking if gmtime_r might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/socket.h... (cached) yes\r\nchecking for netinet/in.h... (cached) yes\r\nchecking for arpa/inet.h... (cached) yes\r\nchecking if inet_ntop can be linked... yes\r\nchecking if inet_ntop is prototyped... no\r\nchecking if inet_ntop might be used... no\r\nchecking if inet_pton can be linked... yes\r\nchecking if inet_pton is prototyped... no\r\nchecking if inet_pton might be used... no\r\nchecking if ioctlsocket can be linked... no\r\nchecking if ioctlsocket might be used... no\r\nchecking if IoctlSocket can be linked... no\r\nchecking if IoctlSocket might be used... no\r\nchecking if memrchr can be linked... no\r\nchecking if memrchr seems a macro... no\r\nchecking if memrchr might be used... no\r\nchecking if poll can be linked... yes\r\nchecking if poll is prototyped... no\r\nchecking if poll might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for signal.h... yes\r\nchecking if sigaction can be linked... yes\r\nchecking if sigaction is prototyped... no\r\nchecking if sigaction might be used... no\r\nchecking if siginterrupt can be linked... yes\r\nchecking if siginterrupt is prototyped... no\r\nchecking if siginterrupt might be used... no\r\nchecking if signal can be linked... yes\r\nchecking if signal is prototyped... no\r\nchecking if signal might be used... no\r\nchecking for sys/types.h... (cached) yes\r\nchecking for setjmp.h... (cached) yes\r\nchecking if sigsetjmp can be linked... yes\r\nchecking if sigsetjmp is prototyped... no\r\nchecking if sigsetjmp might be used... no\r\nchecking if socket can be linked... yes\r\nchecking if socket is prototyped... no\r\nchecking if socket might be used... no\r\nchecking if socketpair can be linked... yes\r\nchecking if socketpair is prototyped... no\r\nchecking if socketpair might be used... no\r\nchecking if strcasecmp can be linked... yes\r\nchecking if strcasecmp is prototyped... no\r\nchecking if strcasecmp might be used... no\r\nchecking if strcmpi can be linked... no\r\nchecking if strcmpi might be used... no\r\nchecking if strdup can be linked... yes\r\nchecking if strdup is prototyped... no\r\nchecking if strdup might be used... no\r\nchecking if strerror_r can be linked... yes\r\nchecking if strerror_r is prototyped... no\r\nchecking if strerror_r might be used... no\r\nchecking if stricmp can be linked... no\r\nchecking if stricmp might be used... no\r\nchecking if strtok_r can be linked... yes\r\nchecking if strtok_r is prototyped... no\r\nchecking if strtok_r might be used... no\r\nchecking if strtoll can be linked... yes\r\nchecking if strtoll is prototyped... no\r\nchecking if strtoll might be used... no\r\nchecking for /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang options needed to detect all undeclared functions... none needed\r\nchecking whether getpwuid_r is declared... yes\r\nchecking for fnmatch... yes\r\nchecking for fchmod... yes\r\nchecking for fork... yes\r\nchecking for geteuid... yes\r\nchecking for getpass_r... no\r\nchecking deeper for getpass_r... but still no\r\nchecking for getppid... yes\r\nchecking for getpwuid... yes\r\nchecking for getpwuid_r... yes\r\nchecking for getrlimit... yes\r\nchecking for gettimeofday... yes\r\nchecking for if_nametoindex... yes\r\nchecking for mach_absolute_time... yes\r\nchecking for pipe... yes\r\nchecking for sched_yield... yes\r\nchecking for sendmsg... yes\r\nchecking for setlocale... yes\r\nchecking for setmode... yes\r\nchecking for setrlimit... yes\r\nchecking for snprintf... yes\r\nchecking for utime... yes\r\nchecking for utimes... yes\r\nchecking for arc4random... yes\r\nchecking how to set a socket into non-blocking mode... unknown\r\nconfigure: WARNING: cannot determine non-blocking socket method.\r\nchecking for perl... /usr/bin/perl\r\nchecking for gnroff... no\r\nchecking for nroff... no\r\nconfigure: WARNING: disabling built-in manual\r\nchecking whether to enable the threaded resolver... yes\r\nchecking whether to use POSIX threads for threaded resolver... auto\r\nchecking for pthread.h... yes\r\nchecking for pthread_create... yes\r\nchecking convert -I options to -isystem... yes\r\nchecking whether to enable verbose strings... yes\r\nchecking whether to enable SSPI support (Windows native builds only)... no\r\nchecking whether to enable cryptographic authentication methods... yes\r\nchecking whether to support NTLM... yes\r\nchecking whether to enable NTLM delegation to winbind's helper... yes\r\nchecking whether to enable TLS-SRP authentication... yes\r\nchecking whether to enable Unix domain sockets... auto\r\nchecking for struct sockaddr_un.sun_path... yes\r\nchecking whether to support cookies... yes\r\nchecking whether to support socketpair... yes\r\nchecking whether to support HTTP authentication... yes\r\nchecking whether to support DoH... yes\r\nchecking whether to support the MIME API... yes\r\nchecking whether to support date parsing... yes\r\nchecking whether to support netrc parsing... yes\r\nchecking whether to support progress-meter... yes\r\nchecking whether to support DNS shuffling... yes\r\nchecking whether to support curl_easy_option*... yes\r\nchecking whether to support alt-svc... yes\r\nchecking whether to support headers-api... yes\r\nchecking whether to support HSTS... yes\r\nchecking whether to support WebSockets... no\r\nchecking whether hiding of library internal symbols will actually happen... yes\r\nchecking that generated files are newer than configure... done\r\nconfigure: creating ./config.status\r\nconfig.status: creating Makefile\r\nconfig.status: creating docs/Makefile\r\nconfig.status: creating docs/examples/Makefile\r\nconfig.status: creating docs/libcurl/Makefile\r\nconfig.status: creating docs/libcurl/opts/Makefile\r\nconfig.status: creating docs/cmdline-opts/Makefile\r\nconfig.status: creating include/Makefile\r\nconfig.status: creating include/curl/Makefile\r\nconfig.status: creating src/Makefile\r\nconfig.status: creating lib/Makefile\r\nconfig.status: creating scripts/Makefile\r\nconfig.status: creating lib/libcurl.vers\r\nconfig.status: creating lib/libcurl.plist\r\nconfig.status: creating tests/Makefile\r\nconfig.status: creating tests/config\r\nconfig.status: creating tests/certs/Makefile\r\nconfig.status: creating tests/certs/scripts/Makefile\r\nconfig.status: creating tests/data/Makefile\r\nconfig.status: creating tests/server/Makefile\r\nconfig.status: creating tests/libtest/Makefile\r\nconfig.status: creating tests/unit/Makefile\r\nconfig.status: creating tests/http/config.ini\r\nconfig.status: creating tests/http/Makefile\r\nconfig.status: creating packages/Makefile\r\nconfig.status: creating packages/vms/Makefile\r\nconfig.status: creating curl-config\r\nconfig.status: creating libcurl.pc\r\nconfig.status: creating lib/curl_config.h\r\nconfig.status: executing depfiles commands\r\nconfig.status: executing libtool commands\r\nconfigure: Configured to build curl/libcurl:\r\n\r\n  Host setup:       aarch64-apple-darwin\r\n  Install prefix:   /usr/local\r\n  Compiler:         /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\r\n   CFLAGS:          -arch arm64 -O2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator16.2.sdk -mios-simulator-version-min=8.0 -Qunused-arguments -Wno-pointer-bool-conversion -Werror=partial-availability\r\n   CPPFLAGS:        \r\n   LDFLAGS:         -arch arm64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator16.2.sdk -mios-simulator-version-min=8.0 -framework CoreFoundation -framework Security\r\n   LIBS:            -lz\r\n\r\n  curl version:     8.0.1\r\n  SSL:              enabled (Secure Transport)\r\n  SSH:              no      (--with-{libssh,libssh2})\r\n  zlib:             enabled\r\n  brotli:           no      (--with-brotli)\r\n  zstd:             no      (--with-zstd)\r\n  GSS-API:          no      (--with-gssapi)\r\n  GSASL:            no      (libgsasl not found)\r\n  TLS-SRP:          no      (--enable-tls-srp)\r\n  resolver:         POSIX threaded\r\n  IPv6:             enabled\r\n  Unix sockets:     enabled\r\n  IDN:              no      (--with-{libidn2,winidn})\r\n  Build libcurl:    Shared=no, Static=yes\r\n  Built-in manual:  no      (--enable-manual)\r\n  --libcurl option: enabled (--disable-libcurl-option)\r\n  Verbose errors:   enabled (--disable-verbose)\r\n  Code coverage:    disabled\r\n  SSPI:             no      (--enable-sspi)\r\n  ca cert bundle:   no\r\n  ca cert path:     \r\n  ca fallback:      \r\n  LDAP:             no      (--enable-ldap / --with-ldap-lib / --with-lber-lib)\r\n  LDAPS:            no      (--enable-ldaps)\r\n  RTSP:             enabled\r\n  RTMP:             no      (--with-librtmp)\r\n  PSL:              no      (libpsl not found)\r\n  Alt-svc:          enabled (--disable-alt-svc)\r\n  Headers API:      enabled (--disable-headers-api)\r\n  HSTS:             enabled (--disable-hsts)\r\n  HTTP1:            enabled (internal)\r\n  HTTP2:            no      (--with-nghttp2, --with-hyper)\r\n  HTTP3:            no      (--with-ngtcp2, --with-quiche --with-msh3)\r\n  ECH:              no      (--enable-ech)\r\n  WebSockets:       no      (--enable-websockets)\r\n  Protocols:        DICT FILE FTP FTPS GOPHER GOPHERS HTTP HTTPS IMAP IMAPS MQTT POP3 POP3S RTSP SMB SMBS SMTP SMTPS TELNET TFTP\r\n  Features:         AsynchDNS HSTS HTTPS-proxy IPv6 Largefile NTLM NTLM_WB SSL UnixSockets alt-svc libz threadsafe\r\n```\r\n\r\nWhat is confusing is this:\r\n\r\n1. Checking for `sys/types.h` actually succeeds!\r\n2. But later `checking if fcntl is prototyped` fails because the file `sys/types.h` is missing! How come? Here is the relevant passage from `config.log`:\r\n\r\n```\r\nconfigure:36501: checking if fcntl is prototyped\r\nconftest.c:115:12: fatal error: 'sys/types.h' file not found\r\n#  include <sys/types.h>\r\n           ^~~~~~~~~~~~~\r\n1 error generated.\r\nconfigure:36519: result: no\r\n```\r\n\r\nHow can it be that `configure` first says that `sys/types.h` is available while later failing because it is not available! I don't get that. The fact that the check whether fcntl is prototyped fails then causes lots of other troubles, e.g. it causes `configure` to skip `checking if fcntl O_NONBLOCK is compilable` which in turn leads to `HAVE_FCNTL_O_NONBLOCK` being undefined which in turn leads to curl being uncompilable because `nonblock.c` fails to compile because no non-blocking method was found/set/used.\r\n\r\nWhat's going on?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1570637853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"afalkenhahn","id":6772528,"node_id":"MDQ6VXNlcjY3NzI1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6772528?v=4","gravatar_id":"","url":"https://api.github.com/users/afalkenhahn","html_url":"https://github.com/afalkenhahn","followers_url":"https://api.github.com/users/afalkenhahn/followers","following_url":"https://api.github.com/users/afalkenhahn/following{/other_user}","gists_url":"https://api.github.com/users/afalkenhahn/gists{/gist_id}","starred_url":"https://api.github.com/users/afalkenhahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afalkenhahn/subscriptions","organizations_url":"https://api.github.com/users/afalkenhahn/orgs","repos_url":"https://api.github.com/users/afalkenhahn/repos","events_url":"https://api.github.com/users/afalkenhahn/events{/privacy}","received_events_url":"https://api.github.com/users/afalkenhahn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9792522184,"node_id":"LE_lADOAAiu0c5nF0TPzwAAAAJHrgfI","url":"https://api.github.com/repos/curl/curl/issues/events/9792522184","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-07-11T21:47:42Z","label":{"name":"KNOWN_BUGS material","color":"d93f0b"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1647041134","html_url":"https://github.com/curl/curl/issues/11215#issuecomment-1647041134","issue_url":"https://api.github.com/repos/curl/curl/issues/11215","id":1647041134,"node_id":"IC_kwDOAAiu0c5iK9pu","user":{"login":"ryandesign","id":429209,"node_id":"MDQ6VXNlcjQyOTIwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/429209?v=4","gravatar_id":"","url":"https://api.github.com/users/ryandesign","html_url":"https://github.com/ryandesign","followers_url":"https://api.github.com/users/ryandesign/followers","following_url":"https://api.github.com/users/ryandesign/following{/other_user}","gists_url":"https://api.github.com/users/ryandesign/gists{/gist_id}","starred_url":"https://api.github.com/users/ryandesign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryandesign/subscriptions","organizations_url":"https://api.github.com/users/ryandesign/orgs","repos_url":"https://api.github.com/users/ryandesign/repos","events_url":"https://api.github.com/users/ryandesign/events{/privacy}","received_events_url":"https://api.github.com/users/ryandesign/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-24T00:57:46Z","updated_at":"2023-07-24T00:58:25Z","body":"All of the \"is prototyped\" checks are failing for you. The same happened to me when following someone else's recipe for building for iOS. \r\n\r\n> What is confusing is this:\r\n> \r\n> 1. Checking for `sys/types.h` actually succeeds!\r\n\r\nThese checks are performed by the compiler. The compiler uses CPPFLAGS and CFLAGS. You're setting the `-isysroot` flag in CFLAGS which tells the compiler where the headers are so it succeeds.\r\n\r\n> 2. But later `checking if fcntl is prototyped` fails because the file `sys/types.h` is missing! How come?\r\n\r\nThese checks are performed by the preprocessor. The preprocessor only uses CPPFLAGS, not CFLAGS nor LDFLAGS. You haven't set `-isysroot` in CPPFLAGS so it doesn't know where the headers are.\r\n\r\nWhat the recipe I followed and yours have in common is that they set CC to the path to clang within the Xcode default toolchain directory and they haven't added the `-isysroot` flag in CPPFLAGS. This combination seems to be problematic.\r\n\r\nThere are a couple possible solutions:\r\n\r\n1. Also set CPPFLAGS:\r\n\r\n    ```\r\n    export CPPFLAGS =\"-arch arm64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator16.2.sdk -mios-simulator-version-min=8.0\"\r\n    ```\r\n\r\n2. Don't set CC. When you don't set CC, the default compiler will be used, and it seems to use the default (macOS) SDK. On the other hand, when you set `CC=\"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\"`, that compiler doesn't appear to have any default SDK and you have to tell it what SDK to use. Not setting CC is essentially what the documentation says to do:\r\n\r\n    https://github.com/curl/curl/blob/3c0a91077c2af4a34f5ac177dd5ec8149ce479d7/docs/INSTALL.md?plain=1#L362-L369\r\n\r\n    That \"works\" in that it builds, but I'm not convinced it's correct. Because it's not setting CC, the default compiler is used. Because it's not setting CPPFLAGS, all those configure script checks to see whether something \"is prototyped\" are checking the default (macOS) SDK, not the other (e.g. iOS) SDK you want. Conceivably there could be differences between the macOS and iOS SDKs such that this would matter.\r\n\r\n3. Set CC such that the `-isysroot`, `-arch`, and `-m` flags are in there; then you don't need to set them in CFLAGS, CPPFLAGS, or LDFLAGS:\r\n\r\n    ```\r\n    export CC=\"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch arm64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator16.2.sdk -mios-simulator-version-min=8.0\"\r\n    ```\r\n\r\n4. Set CC to use `xcrun` which takes care of setting the sysroot for you; this seems simplest. Here's my slightly modified version of the script from the documentation; I believe this will correctly test the capabilities of the intended SDK:\r\n\r\n    ```\r\n    export ARCH=arm64\r\n    export SDK=iphoneos\r\n    export DEPLOYMENT_TARGET=11.0\r\n    \r\n    export CC=\"xcrun -sdk $SDK cc -arch $ARCH -m$SDK-version-min=$DEPLOYMENT_TARGET\"\r\n    ./configure --host=$ARCH-apple-darwin --prefix $(pwd)/artifacts --with-secure-transport\r\n    make -j8\r\n    make install\r\n    ```\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1647041134/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ryandesign","id":429209,"node_id":"MDQ6VXNlcjQyOTIwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/429209?v=4","gravatar_id":"","url":"https://api.github.com/users/ryandesign","html_url":"https://github.com/ryandesign","followers_url":"https://api.github.com/users/ryandesign/followers","following_url":"https://api.github.com/users/ryandesign/following{/other_user}","gists_url":"https://api.github.com/users/ryandesign/gists{/gist_id}","starred_url":"https://api.github.com/users/ryandesign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryandesign/subscriptions","organizations_url":"https://api.github.com/users/ryandesign/orgs","repos_url":"https://api.github.com/users/ryandesign/repos","events_url":"https://api.github.com/users/ryandesign/events{/privacy}","received_events_url":"https://api.github.com/users/ryandesign/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9959951144,"node_id":"CE_lADOAAiu0c5nF0TPzwAAAAJRqMso","url":"https://api.github.com/repos/curl/curl/issues/events/9959951144","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"2e8a3d7cb73c85a9aa151e263315f8a496dbb9d4","commit_url":"https://api.github.com/repos/curl/curl/commits/2e8a3d7cb73c85a9aa151e263315f8a496dbb9d4","created_at":"2023-07-31T06:54:14Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1658729367","html_url":"https://github.com/curl/curl/issues/11215#issuecomment-1658729367","issue_url":"https://api.github.com/repos/curl/curl/issues/11215","id":1658729367,"node_id":"IC_kwDOAAiu0c5i3jOX","user":{"login":"ryandesign","id":429209,"node_id":"MDQ6VXNlcjQyOTIwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/429209?v=4","gravatar_id":"","url":"https://api.github.com/users/ryandesign","html_url":"https://github.com/ryandesign","followers_url":"https://api.github.com/users/ryandesign/followers","following_url":"https://api.github.com/users/ryandesign/following{/other_user}","gists_url":"https://api.github.com/users/ryandesign/gists{/gist_id}","starred_url":"https://api.github.com/users/ryandesign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryandesign/subscriptions","organizations_url":"https://api.github.com/users/ryandesign/orgs","repos_url":"https://api.github.com/users/ryandesign/repos","events_url":"https://api.github.com/users/ryandesign/events{/privacy}","received_events_url":"https://api.github.com/users/ryandesign/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-31T16:28:27Z","updated_at":"2023-07-31T16:28:27Z","body":"It's not a bug though. It's a user error for supplying incomplete information to the build system. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1658729367/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ryandesign","id":429209,"node_id":"MDQ6VXNlcjQyOTIwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/429209?v=4","gravatar_id":"","url":"https://api.github.com/users/ryandesign","html_url":"https://github.com/ryandesign","followers_url":"https://api.github.com/users/ryandesign/followers","following_url":"https://api.github.com/users/ryandesign/following{/other_user}","gists_url":"https://api.github.com/users/ryandesign/gists{/gist_id}","starred_url":"https://api.github.com/users/ryandesign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryandesign/subscriptions","organizations_url":"https://api.github.com/users/ryandesign/orgs","repos_url":"https://api.github.com/users/ryandesign/repos","events_url":"https://api.github.com/users/ryandesign/events{/privacy}","received_events_url":"https://api.github.com/users/ryandesign/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1659811790","html_url":"https://github.com/curl/curl/issues/11215#issuecomment-1659811790","issue_url":"https://api.github.com/repos/curl/curl/issues/11215","id":1659811790,"node_id":"IC_kwDOAAiu0c5i7rfO","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-01T08:20:47Z","updated_at":"2023-08-01T08:20:47Z","body":"ok, thanks! I will revert that","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1659811790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9973384893,"node_id":"REFE_lADOAAiu0c5nF0TPzwAAAAJSdca9","url":"https://api.github.com/repos/curl/curl/issues/events/9973384893","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"15c40a32b7a153138941584e5717772e4da7a17c","commit_url":"https://api.github.com/repos/curl/curl/commits/15c40a32b7a153138941584e5717772e4da7a17c","created_at":"2023-08-01T08:22:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1684378009","html_url":"https://github.com/curl/curl/issues/11215#issuecomment-1684378009","issue_url":"https://api.github.com/repos/curl/curl/issues/11215","id":1684378009,"node_id":"IC_kwDOAAiu0c5kZZGZ","user":{"login":"afalkenhahn","id":6772528,"node_id":"MDQ6VXNlcjY3NzI1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6772528?v=4","gravatar_id":"","url":"https://api.github.com/users/afalkenhahn","html_url":"https://github.com/afalkenhahn","followers_url":"https://api.github.com/users/afalkenhahn/followers","following_url":"https://api.github.com/users/afalkenhahn/following{/other_user}","gists_url":"https://api.github.com/users/afalkenhahn/gists{/gist_id}","starred_url":"https://api.github.com/users/afalkenhahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afalkenhahn/subscriptions","organizations_url":"https://api.github.com/users/afalkenhahn/orgs","repos_url":"https://api.github.com/users/afalkenhahn/repos","events_url":"https://api.github.com/users/afalkenhahn/events{/privacy}","received_events_url":"https://api.github.com/users/afalkenhahn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-18T19:59:49Z","updated_at":"2023-08-18T19:59:49Z","body":"I'm a bit late but I just wanted to confirm that I could indeed fix the issue by setting `CPPFLAGS`. Thanks @ryandesign for the detailed information!\r\n\r\nInterestingly, I build for non-simulator iOS on a different machine using an older version of Xcode and on that machine setting `CPPFLAGS` isn't necessary to build curl, `CFLAGS` is sufficient. That's why I never thought of setting `CPPFLAGS` as well but apparently it's necessary with newer Xcode versions and/or Macs.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1684378009/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"afalkenhahn","id":6772528,"node_id":"MDQ6VXNlcjY3NzI1Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/6772528?v=4","gravatar_id":"","url":"https://api.github.com/users/afalkenhahn","html_url":"https://github.com/afalkenhahn","followers_url":"https://api.github.com/users/afalkenhahn/followers","following_url":"https://api.github.com/users/afalkenhahn/following{/other_user}","gists_url":"https://api.github.com/users/afalkenhahn/gists{/gist_id}","starred_url":"https://api.github.com/users/afalkenhahn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afalkenhahn/subscriptions","organizations_url":"https://api.github.com/users/afalkenhahn/orgs","repos_url":"https://api.github.com/users/afalkenhahn/repos","events_url":"https://api.github.com/users/afalkenhahn/events{/privacy}","received_events_url":"https://api.github.com/users/afalkenhahn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10133213644,"node_id":"MEE_lADOAAiu0c5nF0TPzwAAAAJb_JHM","url":"https://api.github.com/repos/curl/curl/issues/events/10133213644","actor":{"login":"ryandesign","id":429209,"node_id":"MDQ6VXNlcjQyOTIwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/429209?v=4","gravatar_id":"","url":"https://api.github.com/users/ryandesign","html_url":"https://github.com/ryandesign","followers_url":"https://api.github.com/users/ryandesign/followers","following_url":"https://api.github.com/users/ryandesign/following{/other_user}","gists_url":"https://api.github.com/users/ryandesign/gists{/gist_id}","starred_url":"https://api.github.com/users/ryandesign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryandesign/subscriptions","organizations_url":"https://api.github.com/users/ryandesign/orgs","repos_url":"https://api.github.com/users/ryandesign/repos","events_url":"https://api.github.com/users/ryandesign/events{/privacy}","received_events_url":"https://api.github.com/users/ryandesign/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-18T19:59:49Z","performed_via_github_app":null},{"id":10133213653,"node_id":"SE_lADOAAiu0c5nF0TPzwAAAAJb_JHV","url":"https://api.github.com/repos/curl/curl/issues/events/10133213653","actor":{"login":"ryandesign","id":429209,"node_id":"MDQ6VXNlcjQyOTIwOQ==","avatar_url":"https://avatars.githubusercontent.com/u/429209?v=4","gravatar_id":"","url":"https://api.github.com/users/ryandesign","html_url":"https://github.com/ryandesign","followers_url":"https://api.github.com/users/ryandesign/followers","following_url":"https://api.github.com/users/ryandesign/following{/other_user}","gists_url":"https://api.github.com/users/ryandesign/gists{/gist_id}","starred_url":"https://api.github.com/users/ryandesign/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ryandesign/subscriptions","organizations_url":"https://api.github.com/users/ryandesign/orgs","repos_url":"https://api.github.com/users/ryandesign/repos","events_url":"https://api.github.com/users/ryandesign/events{/privacy}","received_events_url":"https://api.github.com/users/ryandesign/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-18T19:59:49Z","performed_via_github_app":null},{"id":10459072013,"node_id":"REFE_lADOAAiu0c5nF0TPzwAAAAJvaMYN","url":"https://api.github.com/repos/curl/curl/issues/events/10459072013","actor":{"login":"ptitSeb","id":3250792,"node_id":"MDQ6VXNlcjMyNTA3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3250792?v=4","gravatar_id":"","url":"https://api.github.com/users/ptitSeb","html_url":"https://github.com/ptitSeb","followers_url":"https://api.github.com/users/ptitSeb/followers","following_url":"https://api.github.com/users/ptitSeb/following{/other_user}","gists_url":"https://api.github.com/users/ptitSeb/gists{/gist_id}","starred_url":"https://api.github.com/users/ptitSeb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptitSeb/subscriptions","organizations_url":"https://api.github.com/users/ptitSeb/orgs","repos_url":"https://api.github.com/users/ptitSeb/repos","events_url":"https://api.github.com/users/ptitSeb/events{/privacy}","received_events_url":"https://api.github.com/users/ptitSeb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d6fec8336410c50188f2e3628f3ab54f795cd154","commit_url":"https://api.github.com/repos/wasix-org/curl/commits/d6fec8336410c50188f2e3628f3ab54f795cd154","created_at":"2023-09-25T08:04:45Z","performed_via_github_app":null},{"id":10459072428,"node_id":"REFE_lADOAAiu0c5nF0TPzwAAAAJvaMes","url":"https://api.github.com/repos/curl/curl/issues/events/10459072428","actor":{"login":"ptitSeb","id":3250792,"node_id":"MDQ6VXNlcjMyNTA3OTI=","avatar_url":"https://avatars.githubusercontent.com/u/3250792?v=4","gravatar_id":"","url":"https://api.github.com/users/ptitSeb","html_url":"https://github.com/ptitSeb","followers_url":"https://api.github.com/users/ptitSeb/followers","following_url":"https://api.github.com/users/ptitSeb/following{/other_user}","gists_url":"https://api.github.com/users/ptitSeb/gists{/gist_id}","starred_url":"https://api.github.com/users/ptitSeb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ptitSeb/subscriptions","organizations_url":"https://api.github.com/users/ptitSeb/orgs","repos_url":"https://api.github.com/users/ptitSeb/repos","events_url":"https://api.github.com/users/ptitSeb/events{/privacy}","received_events_url":"https://api.github.com/users/ptitSeb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a3e78af8de7e5278c2f466b1b259d52fdc04dce6","commit_url":"https://api.github.com/repos/wasix-org/curl/commits/a3e78af8de7e5278c2f466b1b259d52fdc04dce6","created_at":"2023-09-25T08:04:47Z","performed_via_github_app":null},{"id":12238548981,"node_id":"REFE_lADOAAiu0c5nF0TPzwAAAALZeW_1","url":"https://api.github.com/repos/curl/curl/issues/events/12238548981","actor":{"login":"jonrumsey","id":25487366,"node_id":"MDQ6VXNlcjI1NDg3MzY2","avatar_url":"https://avatars.githubusercontent.com/u/25487366?v=4","gravatar_id":"","url":"https://api.github.com/users/jonrumsey","html_url":"https://github.com/jonrumsey","followers_url":"https://api.github.com/users/jonrumsey/followers","following_url":"https://api.github.com/users/jonrumsey/following{/other_user}","gists_url":"https://api.github.com/users/jonrumsey/gists{/gist_id}","starred_url":"https://api.github.com/users/jonrumsey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonrumsey/subscriptions","organizations_url":"https://api.github.com/users/jonrumsey/orgs","repos_url":"https://api.github.com/users/jonrumsey/repos","events_url":"https://api.github.com/users/jonrumsey/events{/privacy}","received_events_url":"https://api.github.com/users/jonrumsey/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2e8a3d7cb73c85a9aa151e263315f8a496dbb9d4","commit_url":"https://api.github.com/repos/jonrumsey/curl/commits/2e8a3d7cb73c85a9aa151e263315f8a496dbb9d4","created_at":"2024-03-25T18:01:07Z","performed_via_github_app":null}]