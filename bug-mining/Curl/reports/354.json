{"url":"https://api.github.com/repos/curl/curl/issues/12409","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/12409/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/12409/comments","events_url":"https://api.github.com/repos/curl/curl/issues/12409/events","html_url":"https://github.com/curl/curl/issues/12409","id":2011861004,"node_id":"I_kwDOAAiu0c536pAM","number":12409,"title":"In a config file, headers are not handled the same as on the CLI (header not sent)","user":{"login":"Jiehong","id":1061229,"node_id":"MDQ6VXNlcjEwNjEyMjk=","avatar_url":"https://avatars.githubusercontent.com/u/1061229?v=4","gravatar_id":"","url":"https://api.github.com/users/Jiehong","html_url":"https://github.com/Jiehong","followers_url":"https://api.github.com/users/Jiehong/followers","following_url":"https://api.github.com/users/Jiehong/following{/other_user}","gists_url":"https://api.github.com/users/Jiehong/gists{/gist_id}","starred_url":"https://api.github.com/users/Jiehong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Jiehong/subscriptions","organizations_url":"https://api.github.com/users/Jiehong/orgs","repos_url":"https://api.github.com/users/Jiehong/repos","events_url":"https://api.github.com/users/Jiehong/events{/privacy}","received_events_url":"https://api.github.com/users/Jiehong/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":192912238,"node_id":"MDU6TGFiZWwxOTI5MTIyMzg=","url":"https://api.github.com/repos/curl/curl/labels/cmdline%20tool","name":"cmdline tool","color":"006b75","default":false,"description":null},{"id":698723912,"node_id":"MDU6TGFiZWw2OTg3MjM5MTI=","url":"https://api.github.com/repos/curl/curl/labels/not-a-curl-bug","name":"not-a-curl-bug","color":"d4c5f9","default":false,"description":"This is not a bug in curl"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-11-27T09:30:35Z","updated_at":"2023-11-27T13:06:07Z","closed_at":"2023-11-27T13:03:24Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nWhen using --config, and with the cli, I get different results.\r\n\r\n## Using the CLI\r\n\r\n```bash\r\n$ curl -v --request POST --header 'Authorization: Bearer xxxx' --url https://example.com\r\n```\r\n\r\nI get the following output:\r\n\r\n```\r\n*   Trying 93.184.216.34:443...\r\n* Connected to example.com (93.184.216.34) port 443\r\n(...)\r\n> POST / HTTP/1.1\r\n> Host: example.com\r\n> User-Agent: curl/8.4.0\r\n> Accept: */*\r\n> Authorization: Bearer xxxx\r\n>\r\n(...)\r\n< HTTP/1.1 200 OK\r\n```\r\n\r\n## Using a config file\r\n\r\nWith the following config file named `test.curl`:\r\n\r\n```\r\nrequest = POST\r\nheader = Authorization: Bearer xxxx\r\nurl = https://example.com\r\n```\r\n\r\nAnd then running it:\r\n\r\n```bash\r\n$ curl -v --config test.curl\r\nWarning: ./test.curl:2: warning: 'header' uses unquoted whitespace in the line\r\nWarning: that may cause side-effects\r\n*   Trying 93.184.216.34:443...\r\n* Connected to example.com (93.184.216.34) port 443\r\n(...)\r\n> POST / HTTP/1.1\r\n> Host: example.com\r\n> User-Agent: curl/8.4.0\r\n> Accept: */*\r\n>\r\n(...)\r\n< HTTP/1.1 200 OK\r\n```\n\n### I expected the following\n\nUsing the config file, I expected the exact same as the CLI output.\r\n\r\nIn particular, the Authorization header should be sent as described.\r\n\r\nNote that changing the header line in the config file to:\r\n\r\n```\r\nheader = 'Authorization: Bearer xxx'\r\n```\r\n\r\nDoes not remove the curl warning, and still does not send that header.\r\n\r\n> By the way, I realise it should be better to just use `oauth2-bearer` instead of creating the header by hand, but I have the same issue with any other headers.\n\n### curl/libcurl version\n\ncurl 8.4.0 (aarch64-apple-darwin22.6.0) libcurl/8.4.0 (SecureTransport) OpenSSL/3.1.4 zlib/1.2.11 brotli/1.1.0 zstd/1.5.5 libidn2/2.3.4 libssh2/1.11.0 nghttp2/1.58.0 librtmp/2.3 OpenLDAP/2.6.6\r\nRelease-Date: 2023-10-11\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ldap ldaps mqtt pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftp\r\nFeatures: alt-svc AsynchDNS brotli GSS-API HSTS HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz MultiSSL NTLM SPNEGO SSL threadsafe TLS-SRP UnixSockets zstd\n\n### operating system\n\nDarwin my-name 22.6.0 Darwin Kernel Version 22.6.0: Thu Nov  2 07:43:25 PDT 2023; root:xnu-8796.141.3.701.17~6/RELEASE_ARM64_T6020 arm64","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/12409/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/12409/timeline","performed_via_github_app":null,"state_reason":"completed"}