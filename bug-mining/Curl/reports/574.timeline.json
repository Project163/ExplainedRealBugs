[{"id":14518356520,"node_id":"LE_lADOAAiu0c6Y9aB4zwAAAANhXIoo","url":"https://api.github.com/repos/curl/curl/issues/events/14518356520","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-04T12:15:26Z","label":{"name":"TLS","color":"bfdadc"},"performed_via_github_app":null},{"id":14518356528,"node_id":"LE_lADOAAiu0c6Y9aB4zwAAAANhXIow","url":"https://api.github.com/repos/curl/curl/issues/events/14518356528","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-04T12:15:26Z","label":{"name":"Windows","color":"0e8a16"},"performed_via_github_app":null},{"id":14521336912,"node_id":"LE_lADOAAiu0c6Y9aB4zwAAAANhigRQ","url":"https://api.github.com/repos/curl/curl/issues/events/14521336912","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-04T15:59:15Z","label":{"name":"help wanted","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2402587577","html_url":"https://github.com/curl/curl/issues/15149#issuecomment-2402587577","issue_url":"https://api.github.com/repos/curl/curl/issues/15149","id":2402587577,"node_id":"IC_kwDOAAiu0c6PNJO5","user":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-09T15:00:09Z","updated_at":"2024-10-09T15:00:09Z","body":"I spent a few minutes on this issue and came up with this **proof of concept**.\r\n```\r\ncurl.exe -ILv --cacert ca.pem --ssl-revoke-best-effort https://127.0.0.1/\r\n*   Trying 127.0.0.1:443...\r\n* schannel: disabled automatic use of client certificate\r\n* schannel: using IP address, SNI is not supported by OS.\r\n* ALPN: curl offers http/1.1\r\n* schannel: added 1 certificate(s) from CA file 'ca.pem'\r\nVerification was successful ...\r\n* ALPN: server accepted http/1.1\r\n* Connected to 127.0.0.1 (127.0.0.1) port 443\r\n* using HTTP/1.x\r\n> HEAD / HTTP/1.1\r\n> Host: 127.0.0.1\r\n> User-Agent: curl/8.10.1\r\n> Accept: */*\r\n>\r\n< HTTP/1.1 200 OK\r\nHTTP/1.1 200 OK\r\n< Server: nginx/1.27.2\r\nServer: nginx/1.27.2\r\n< Date: Wed, 09 Oct 2024 13:01:59 GMT\r\nDate: Wed, 09 Oct 2024 13:01:59 GMT\r\n< Content-Type: text/html\r\nContent-Type: text/html\r\n< Content-Length: 615\r\nContent-Length: 615\r\n< Last-Modified: Wed, 02 Oct 2024 15:13:20 GMT\r\nLast-Modified: Wed, 02 Oct 2024 15:13:20 GMT\r\n< Connection: keep-alive\r\nConnection: keep-alive\r\n< ETag: \"66fd6310-267\"\r\nETag: \"66fd6310-267\"\r\n< Accept-Ranges: bytes\r\nAccept-Ranges: bytes\r\n<\r\n\r\n* Connection #0 to host 127.0.0.1 left intact\r\n```\r\n```\r\ncurl.exe -V\r\ncurl 8.10.1 (Windows) libcurl/8.10.1 Schannel\r\nRelease-Date: 2024-09-18\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp smb smbs smtp smtps telnet tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTPS-proxy IPv6 Kerberos Largefile NTLM SPNEGO SSL SSPI threadsafe UnixSockets\r\n```\r\n```C\r\nBOOL hostname_is_ip(PCRYPT_DATA_BLOB ipblob, LPCSTR hostname)\r\n{\r\n    IN_ADDR ipv4addr;\r\n    IN6_ADDR ipv6addr;\r\n    BOOL result = FALSE;\r\n\r\n    INT iret = InetPton(AF_INET, hostname, &ipv4addr);\r\n    if (iret == 1)\r\n    {\r\n        ipblob->cbData = sizeof(IN_ADDR);\r\n        memcpy(&ipblob->pbData, &ipv4addr, sizeof(IN_ADDR));\r\n        result = TRUE;\r\n    }\r\n    else\r\n    {\r\n        iret = InetPton(AF_INET6, hostname, &ipv6addr);\r\n        if (iret == 1)\r\n        {\r\n            ipblob->cbData = sizeof(IN6_ADDR);\r\n            memcpy(&ipblob->pbData, &ipv6addr, sizeof(IN6_ADDR));\r\n            result = TRUE;\r\n        }\r\n    }\r\n\r\n    return result;\r\n}\r\n\r\nCURLcode Curl_verify_san_ip(PCCERT_CONTEXT ctx, PCRYPT_DATA_BLOB ipblob)\r\n{\r\n    PCERT_INFO cert_info = NULL;\r\n    PCERT_EXTENSION extension = NULL;\r\n    CRYPT_DECODE_PARA decode_para = { sizeof(CRYPT_DECODE_PARA) };\r\n    PCERT_ALT_NAME_INFO alt_name_info = NULL;\r\n    DWORD alt_name_info_size = 0;\r\n    CURLcode result = CURLE_PEER_FAILED_VERIFICATION;\r\n\r\n    cert_info = ctx->pCertInfo;\r\n    if (!cert_info)\r\n    {\r\n        return result;\r\n    }\r\n    extension = CertFindExtension(szOID_SUBJECT_ALT_NAME2,\r\n        cert_info->cExtension,\r\n        cert_info->rgExtension);\r\n    if (!extension)\r\n    {\r\n        return result;\r\n    }\r\n\r\n    if (!CryptDecodeObjectEx(X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\r\n        szOID_SUBJECT_ALT_NAME2,\r\n        extension->Value.pbData,\r\n        extension->Value.cbData,\r\n        CRYPT_DECODE_ALLOC_FLAG | CRYPT_DECODE_NOCOPY_FLAG,\r\n        &decode_para,\r\n        &alt_name_info,\r\n        &alt_name_info_size))\r\n    {\r\n        return result;\r\n    }\r\n\r\n    for (DWORD i = 0; i < alt_name_info->cAltEntry; ++i)\r\n    {\r\n        PCERT_ALT_NAME_ENTRY entry = &alt_name_info->rgAltEntry[i];\r\n        if (entry->dwAltNameChoice == CERT_ALT_NAME_IP_ADDRESS)\r\n        {\r\n            if (entry->IPAddress.cbData == ipblob->cbData)\r\n            {\r\n                //\r\n                if (!memcmp(entry->IPAddress.pbData, &ipblob->pbData, entry->IPAddress.cbData))\r\n                {\r\n                    result = CURLE_OK;\r\n                    printf(\"Verification was successful ...\\n\");\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n```\r\nYou can add the function call to line 497:\r\n```C\r\nBYTE ipblob[32] = { 0 };\r\nif (hostname_is_ip(ipblob, conn_hostname))\r\n{\r\n   result = Curl_verify_san_ip(pCertContextServer, ipblob);\r\n}\r\nelse\r\n{ // rest of the code }\r\n```\r\nhttps://github.com/curl/curl/blob/5ee43bb82e1a5259c5dea482e9921419aee887bb/lib/vtls/schannel_verify.c#L497-L499\r\n\r\n**Note:** This (pseudo) code isn't even real code, it's unfinished, very crude and requires further development/testing/debugging/analysis.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2402587577/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14669544754,"node_id":"LE_lADOAAiu0c6Y9aB4zwAAAANqX30y","url":"https://api.github.com/repos/curl/curl/issues/events/14669544754","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-16T07:17:33Z","label":{"name":"KNOWN_BUGS material","color":"d93f0b"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2415969040","html_url":"https://github.com/curl/curl/issues/15149#issuecomment-2415969040","issue_url":"https://api.github.com/repos/curl/curl/issues/15149","id":2415969040,"node_id":"IC_kwDOAAiu0c6QAMMQ","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T07:39:11Z","updated_at":"2024-10-16T07:39:11Z","body":"1. `conn->bits.ipv6_ip` is true of the provided host name for the connection is an IPv6 numerical address.\r\n2. It would be better to provide an actual (draft?) pull request for the change so that we can see how it is actually indented to work","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2415969040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2416712303","html_url":"https://github.com/curl/curl/issues/15149#issuecomment-2416712303","issue_url":"https://api.github.com/repos/curl/curl/issues/15149","id":2416712303,"node_id":"IC_kwDOAAiu0c6QDBpv","user":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-16T12:32:56Z","updated_at":"2024-10-16T12:32:56Z","body":"Hi Daniel,\r\n\r\nI haven't had time to review the code yet and it's hodgepodge of different formats and whatnot. I'm attaching the entire file, feel free to take a look. I'll submit a PR later (probably after some discussion).\r\n[schannel_verify.txt](https://github.com/user-attachments/files/17395622/schannel_verify.txt)\r\n```\r\ncurl.exe -ILv --cacert ca.pem --ssl-revoke-best-effort https://localhost/\r\n* Host localhost:443 was resolved.\r\n* IPv6: ::1\r\n* IPv4: 127.0.0.1\r\n*   Trying [::1]:443...\r\n* schannel: disabled automatic use of client certificate\r\n* ALPN: curl offers http/1.1\r\n* schannel: added 1 certificate(s) from CA file 'ca.pem'\r\n* schannel: connection hostname (localhost) validated against certificate name (localhost)\r\n* ALPN: server accepted http/1.1\r\n* Connected to localhost (::1) port 443\r\n* using HTTP/1.x\r\n> HEAD / HTTP/1.1\r\n> Host: localhost\r\n> User-Agent: curl/8.11.0-DEV\r\n> Accept: */*\r\n>\r\n< HTTP/1.1 200 OK\r\nHTTP/1.1 200 OK\r\n< Server: nginx/1.27.2\r\nServer: nginx/1.27.2\r\n< Date: Wed, 16 Oct 2024 10:41:28 GMT\r\nDate: Wed, 16 Oct 2024 10:41:28 GMT\r\n< Content-Type: text/html\r\nContent-Type: text/html\r\n< Content-Length: 615\r\nContent-Length: 615\r\n< Last-Modified: Wed, 02 Oct 2024 15:13:19 GMT\r\nLast-Modified: Wed, 02 Oct 2024 15:13:19 GMT\r\n< Connection: keep-alive\r\nConnection: keep-alive\r\n< ETag: \"66fd630f-267\"\r\nETag: \"66fd630f-267\"\r\n< Accept-Ranges: bytes\r\nAccept-Ranges: bytes\r\n<\r\n\r\n* Connection #0 to host localhost left intact\r\n```\r\n```\r\ncurl.exe -ILv --cacert ca.pem --ssl-revoke-best-effort https://[::1]/\r\n*   Trying [::1]:443...\r\n* schannel: disabled automatic use of client certificate\r\n* schannel: using IP address, SNI is not supported by OS.\r\n* ALPN: curl offers http/1.1\r\n* schannel: added 1 certificate(s) from CA file 'ca.pem'\r\n* schannel: connection hostname (::1) matched cert's IP address!\r\n* ALPN: server accepted http/1.1\r\n* Connected to ::1 (::1) port 443\r\n* using HTTP/1.x\r\n> HEAD / HTTP/1.1\r\n> Host: [::1]\r\n> User-Agent: curl/8.11.0-DEV\r\n> Accept: */*\r\n>\r\n< HTTP/1.1 200 OK\r\nHTTP/1.1 200 OK\r\n< Server: nginx/1.27.2\r\nServer: nginx/1.27.2\r\n< Date: Wed, 16 Oct 2024 10:41:48 GMT\r\nDate: Wed, 16 Oct 2024 10:41:48 GMT\r\n< Content-Type: text/html\r\nContent-Type: text/html\r\n< Content-Length: 615\r\nContent-Length: 615\r\n< Last-Modified: Wed, 02 Oct 2024 15:13:19 GMT\r\nLast-Modified: Wed, 02 Oct 2024 15:13:19 GMT\r\n< Connection: keep-alive\r\nConnection: keep-alive\r\n< ETag: \"66fd630f-267\"\r\nETag: \"66fd630f-267\"\r\n< Accept-Ranges: bytes\r\nAccept-Ranges: bytes\r\n<\r\n\r\n* Connection #0 to host ::1 left intact\r\n```\r\n```\r\ncurl.exe -V\r\ncurl 8.11.0-DEV (Windows) libcurl/8.11.0-DEV Schannel\r\nRelease-Date: [unreleased]\r\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ipfs ipns ldap ldaps mqtt pop3 pop3s rtsp smb smbs smtp smtps telnet tftp ws wss\r\nFeatures: alt-svc AsynchDNS HSTS HTTPS-proxy IPv6 Kerberos Largefile NTLM SPNEGO SSL SSPI threadsafe UnixSockets\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2416712303/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2422449838","html_url":"https://github.com/curl/curl/issues/15149#issuecomment-2422449838","issue_url":"https://api.github.com/repos/curl/curl/issues/15149","id":2422449838,"node_id":"IC_kwDOAAiu0c6QY6au","user":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-18T13:13:05Z","updated_at":"2024-10-18T13:13:05Z","body":"@elvinasp Could you rebuild the curl using the following patch in your lab environment?\r\n\r\n```diff\r\ndiff --git a/lib/vtls/schannel_verify.c b/lib/vtls/schannel_verify.c\r\nindex 9a166c281..fe755f1d0 100644\r\n--- a/lib/vtls/schannel_verify.c\r\n+++ b/lib/vtls/schannel_verify.c\r\n@@ -343,7 +343,9 @@ cleanup:\r\n static DWORD cert_get_name_string(struct Curl_easy *data,\r\n                                   CERT_CONTEXT *cert_context,\r\n                                   LPTSTR host_names,\r\n-                                  DWORD length)\r\n+                                  DWORD length,\r\n+                                  PCERT_ALT_NAME_INFO alt_name_info,\r\n+                                  BOOL Win8_compat)\r\n {\r\n   DWORD actual_length = 0;\r\n #if defined(CURL_WINDOWS_UWP)\r\n@@ -351,21 +353,16 @@ static DWORD cert_get_name_string(struct Curl_easy *data,\r\n   (void)cert_context;\r\n   (void)host_names;\r\n   (void)length;\r\n+  (void)alt_name_info;\r\n+  (void)Win8_compat;\r\n #else\r\n   BOOL compute_content = FALSE;\r\n-  CERT_INFO *cert_info = NULL;\r\n-  CERT_EXTENSION *extension = NULL;\r\n-  CRYPT_DECODE_PARA decode_para = {0, 0, 0};\r\n-  CERT_ALT_NAME_INFO *alt_name_info = NULL;\r\n-  DWORD alt_name_info_size = 0;\r\n-  BOOL ret_val = FALSE;\r\n   LPTSTR current_pos = NULL;\r\n   DWORD i;\r\n \r\n #ifdef CERT_NAME_SEARCH_ALL_NAMES_FLAG\r\n   /* CERT_NAME_SEARCH_ALL_NAMES_FLAG is available from Windows 8 onwards. */\r\n-  if(curlx_verify_windows_version(6, 2, 0, PLATFORM_WINNT,\r\n-                                  VERSION_GREATER_THAN_EQUAL)) {\r\n+  if(Win8_compat) {\r\n     /* CertGetNameString will provide the 8-bit character string without\r\n      * any decoding */\r\n     DWORD name_flags =\r\n@@ -388,43 +385,6 @@ static DWORD cert_get_name_string(struct Curl_easy *data,\r\n     *host_names = '\\0';\r\n   }\r\n \r\n-  if(!cert_context) {\r\n-    failf(data, \"schannel: Null certificate context.\");\r\n-    return actual_length;\r\n-  }\r\n-\r\n-  cert_info = cert_context->pCertInfo;\r\n-  if(!cert_info) {\r\n-    failf(data, \"schannel: Null certificate info.\");\r\n-    return actual_length;\r\n-  }\r\n-\r\n-  extension = CertFindExtension(szOID_SUBJECT_ALT_NAME2,\r\n-                                cert_info->cExtension,\r\n-                                cert_info->rgExtension);\r\n-  if(!extension) {\r\n-    failf(data, \"schannel: CertFindExtension() returned no extension.\");\r\n-    return actual_length;\r\n-  }\r\n-\r\n-  decode_para.cbSize = sizeof(CRYPT_DECODE_PARA);\r\n-\r\n-  ret_val =\r\n-    CryptDecodeObjectEx(X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\r\n-                        szOID_SUBJECT_ALT_NAME2,\r\n-                        extension->Value.pbData,\r\n-                        extension->Value.cbData,\r\n-                        CRYPT_DECODE_ALLOC_FLAG | CRYPT_DECODE_NOCOPY_FLAG,\r\n-                        &decode_para,\r\n-                        &alt_name_info,\r\n-                        &alt_name_info_size);\r\n-  if(!ret_val) {\r\n-    failf(data,\r\n-          \"schannel: CryptDecodeObjectEx() returned no alternate name \"\r\n-          \"information.\");\r\n-    return actual_length;\r\n-  }\r\n-\r\n   current_pos = host_names;\r\n \r\n   /* Iterate over the alternate names and populate host_names. */\r\n@@ -467,6 +427,83 @@ static DWORD cert_get_name_string(struct Curl_easy *data,\r\n   return actual_length;\r\n }\r\n \r\n+BOOL hostname_is_ip(PCRYPT_DATA_BLOB ip_blob,\r\n+                    LPCSTR hostname)\r\n+{\r\n+  IN_ADDR ia;\r\n+  IN6_ADDR ia6;\r\n+  BOOL result = FALSE;\r\n+\r\n+  INT res = InetPton(AF_INET, hostname, &ia);\r\n+  if(res == 1) {\r\n+    ip_blob->cbData = sizeof(IN_ADDR);\r\n+    memcpy(&ip_blob->pbData, &ia, sizeof(IN_ADDR));\r\n+    result = TRUE;\r\n+  }\r\n+  else {\r\n+    res = InetPton(AF_INET6, hostname, &ia6);\r\n+    if(res == 1) {\r\n+      ip_blob->cbData = sizeof(IN6_ADDR);\r\n+      memcpy(&ip_blob->pbData, &ia6, sizeof(IN6_ADDR));\r\n+      result = TRUE;\r\n+    }\r\n+  }\r\n+  return result;\r\n+}\r\n+\r\n+BOOL get_alt_name_info(struct Curl_easy *data,\r\n+                       PCCERT_CONTEXT ctx,\r\n+                       PCERT_ALT_NAME_INFO *alt_name_info,\r\n+                       LPDWORD alt_name_info_size)\r\n+{\r\n+  BOOL result = FALSE;\r\n+#if defined(CURL_WINDOWS_UWP)\r\n+  (void)data;\r\n+  (void)ctx;\r\n+  (void)alt_name_info;\r\n+  (void)alt_name_info_size;\r\n+#else\r\n+  PCERT_INFO cert_info = NULL;\r\n+  PCERT_EXTENSION extension = NULL;\r\n+  CRYPT_DECODE_PARA decode_para = { sizeof(CRYPT_DECODE_PARA) };\r\n+\r\n+  if(!ctx) {\r\n+    failf(data, \"schannel: Null certificate context.\");\r\n+    return result;\r\n+  }\r\n+\r\n+  cert_info = ctx->pCertInfo;\r\n+  if(!cert_info) {\r\n+    failf(data, \"schannel: Null certificate info.\");\r\n+    return result;\r\n+  }\r\n+\r\n+  extension = CertFindExtension(szOID_SUBJECT_ALT_NAME2,\r\n+                                cert_info->cExtension,\r\n+                                cert_info->rgExtension);\r\n+  if(!extension) {\r\n+    failf(data, \"schannel: CertFindExtension() returned no extension.\");\r\n+    return result;\r\n+  }\r\n+\r\n+  if(!CryptDecodeObjectEx(X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\r\n+                          szOID_SUBJECT_ALT_NAME2,\r\n+                          extension->Value.pbData,\r\n+                          extension->Value.cbData,\r\n+                          CRYPT_DECODE_ALLOC_FLAG | CRYPT_DECODE_NOCOPY_FLAG,\r\n+                          &decode_para,\r\n+                          alt_name_info,\r\n+                          alt_name_info_size)) {\r\n+    failf(data,\r\n+          \"schannel: CryptDecodeObjectEx() returned no alternate name \"\r\n+          \"information.\");\r\n+    return result;\r\n+  }\r\n+  result = TRUE;\r\n+#endif\r\n+  return result;\r\n+}\r\n+\r\n /* Verify the server's hostname */\r\n CURLcode Curl_verify_host(struct Curl_cfilter *cf,\r\n                           struct Curl_easy *data)\r\n@@ -481,6 +518,12 @@ CURLcode Curl_verify_host(struct Curl_cfilter *cf,\r\n   size_t hostlen = strlen(conn_hostname);\r\n   DWORD len = 0;\r\n   DWORD actual_len = 0;\r\n+  PCERT_ALT_NAME_INFO alt_name_info = NULL;\r\n+  DWORD alt_name_info_size = 0;\r\n+  BYTE ip_blob[32] = { 0 };\r\n+  BOOL Win8_compat;\r\n+  PCRYPT_DATA_BLOB p = (PCRYPT_DATA_BLOB)ip_blob;\r\n+  DWORD i;\r\n \r\n   sspi_status =\r\n     Curl_pSecFn->QueryContextAttributes(&BACKEND->ctxt->ctxt_handle,\r\n@@ -491,97 +534,123 @@ CURLcode Curl_verify_host(struct Curl_cfilter *cf,\r\n     char buffer[STRERROR_LEN];\r\n     failf(data, \"schannel: Failed to read remote certificate context: %s\",\r\n           Curl_sspi_strerror(sspi_status, buffer, sizeof(buffer)));\r\n-    result = CURLE_PEER_FAILED_VERIFICATION;\r\n     goto cleanup;\r\n   }\r\n \r\n-  /* Determine the size of the string needed for the cert hostname */\r\n-  len = cert_get_name_string(data, pCertContextServer, NULL, 0);\r\n-  if(len == 0) {\r\n-    failf(data,\r\n-          \"schannel: CertGetNameString() returned no \"\r\n-          \"certificate name information\");\r\n-    result = CURLE_PEER_FAILED_VERIFICATION;\r\n-    goto cleanup;\r\n+  Win8_compat = curlx_verify_windows_version(6, 2, 0, PLATFORM_WINNT,\r\n+                                             VERSION_GREATER_THAN_EQUAL);\r\n+  if(hostname_is_ip(p, conn_hostname) || !Win8_compat) {\r\n+    if(!get_alt_name_info(data, pCertContextServer,\r\n+                          &alt_name_info, &alt_name_info_size)) {\r\n+      goto cleanup;\r\n+    }\r\n   }\r\n \r\n-  /* CertGetNameString guarantees that the returned name will not contain\r\n-   * embedded null bytes. This appears to be undocumented behavior.\r\n-   */\r\n-  cert_hostname_buff = (LPTSTR)malloc(len * sizeof(TCHAR));\r\n-  if(!cert_hostname_buff) {\r\n-    result = CURLE_OUT_OF_MEMORY;\r\n-    goto cleanup;\r\n+  if(p->cbData) {\r\n+    for(i = 0; i < alt_name_info->cAltEntry; ++i) {\r\n+      PCERT_ALT_NAME_ENTRY entry = &alt_name_info->rgAltEntry[i];\r\n+      if(entry->dwAltNameChoice == CERT_ALT_NAME_IP_ADDRESS) {\r\n+        if(entry->IPAddress.cbData == p->cbData) {\r\n+          if(!memcmp(entry->IPAddress.pbData, &p->pbData,\r\n+                     entry->IPAddress.cbData)) {\r\n+            result = CURLE_OK;\r\n+            infof(data,\r\n+             \"schannel: connection hostname (%s) matched cert's IP address!\",\r\n+             conn_hostname);\r\n+            break;\r\n+          }\r\n+        }\r\n+      }\r\n+    }\r\n   }\r\n-  actual_len = cert_get_name_string(\r\n-    data, pCertContextServer, (LPTSTR)cert_hostname_buff, len);\r\n \r\n-  /* Sanity check */\r\n-  if(actual_len != len) {\r\n-    failf(data,\r\n-          \"schannel: CertGetNameString() returned certificate \"\r\n-          \"name information of unexpected size\");\r\n-    result = CURLE_PEER_FAILED_VERIFICATION;\r\n-    goto cleanup;\r\n-  }\r\n+  else {\r\n+    /* Determine the size of the string needed for the cert hostname */\r\n+    len = cert_get_name_string(data, pCertContextServer,\r\n+                               NULL, 0, alt_name_info, Win8_compat);\r\n+    if(len == 0) {\r\n+      failf(data,\r\n+            \"schannel: CertGetNameString() returned no \"\r\n+            \"certificate name information\");\r\n+      goto cleanup;\r\n+    }\r\n \r\n-  /* cert_hostname_buff contains all DNS names, where each name is\r\n-   * null-terminated and the last DNS name is double null-terminated. Due to\r\n-   * this encoding, use the length of the buffer to iterate over all names.\r\n-   */\r\n-  result = CURLE_PEER_FAILED_VERIFICATION;\r\n-  while(cert_hostname_buff_index < len &&\r\n-        cert_hostname_buff[cert_hostname_buff_index] != TEXT('\\0') &&\r\n-        result == CURLE_PEER_FAILED_VERIFICATION) {\r\n+    /* CertGetNameString guarantees that the returned name will not contain\r\n+     * embedded null bytes. This appears to be undocumented behavior.\r\n+     */\r\n+    cert_hostname_buff = (LPTSTR)malloc(len * sizeof(TCHAR));\r\n+    if(!cert_hostname_buff) {\r\n+      result = CURLE_OUT_OF_MEMORY;\r\n+      goto cleanup;\r\n+    }\r\n+    actual_len = cert_get_name_string(data, pCertContextServer,\r\n+                 (LPTSTR)cert_hostname_buff, len, alt_name_info, Win8_compat);\r\n \r\n-    char *cert_hostname;\r\n+    /* Sanity check */\r\n+    if(actual_len != len) {\r\n+      failf(data,\r\n+      \"schannel: CertGetNameString() returned certificate \"\r\n+      \"name information of unexpected size\");\r\n+      goto cleanup;\r\n+    }\r\n \r\n-    /* Comparing the cert name and the connection hostname encoded as UTF-8\r\n-     * is acceptable since both values are assumed to use ASCII\r\n-     * (or some equivalent) encoding\r\n+    /* cert_hostname_buff contains all DNS names, where each name is\r\n+     * null-terminated and the last DNS name is double null-terminated. Due to\r\n+     * this encoding, use the length of the buffer to iterate over all names.\r\n      */\r\n-    cert_hostname = curlx_convert_tchar_to_UTF8(\r\n+    while(cert_hostname_buff_index < len &&\r\n+          cert_hostname_buff[cert_hostname_buff_index] != TEXT('\\0') &&\r\n+          result == CURLE_PEER_FAILED_VERIFICATION) {\r\n+\r\n+      char *cert_hostname;\r\n+\r\n+      /* Comparing the cert name and the connection hostname encoded as UTF-8\r\n+       * is acceptable since both values are assumed to use ASCII\r\n+       * (or some equivalent) encoding\r\n+       */\r\n+      cert_hostname = curlx_convert_tchar_to_UTF8(\r\n       &cert_hostname_buff[cert_hostname_buff_index]);\r\n-    if(!cert_hostname) {\r\n-      result = CURLE_OUT_OF_MEMORY;\r\n-    }\r\n-    else {\r\n-      if(Curl_cert_hostcheck(cert_hostname, strlen(cert_hostname),\r\n-                             conn_hostname, hostlen)) {\r\n-        infof(data,\r\n-              \"schannel: connection hostname (%s) validated \"\r\n-              \"against certificate name (%s)\",\r\n-              conn_hostname, cert_hostname);\r\n-        result = CURLE_OK;\r\n+      if(!cert_hostname) {\r\n+        result = CURLE_OUT_OF_MEMORY;\r\n       }\r\n       else {\r\n-        size_t cert_hostname_len;\r\n+        if(Curl_cert_hostcheck(cert_hostname, strlen(cert_hostname),\r\n+                               conn_hostname, hostlen)) {\r\n+          infof(data,\r\n+                \"schannel: connection hostname (%s) validated \"\r\n+                \"against certificate name (%s)\",\r\n+                conn_hostname, cert_hostname);\r\n+          result = CURLE_OK;\r\n+        }\r\n+        else {\r\n+          size_t cert_hostname_len;\r\n \r\n-        infof(data,\r\n-              \"schannel: connection hostname (%s) did not match \"\r\n-              \"against certificate name (%s)\",\r\n-              conn_hostname, cert_hostname);\r\n+          infof(data,\r\n+                \"schannel: connection hostname (%s) did not match \"\r\n+                \"against certificate name (%s)\",\r\n+                conn_hostname, cert_hostname);\r\n \r\n-        cert_hostname_len =\r\n-          _tcslen(&cert_hostname_buff[cert_hostname_buff_index]);\r\n+          cert_hostname_len =\r\n+            _tcslen(&cert_hostname_buff[cert_hostname_buff_index]);\r\n \r\n-        /* Move on to next cert name */\r\n-        cert_hostname_buff_index += cert_hostname_len + 1;\r\n+          /* Move on to next cert name */\r\n+          cert_hostname_buff_index += cert_hostname_len + 1;\r\n \r\n-        result = CURLE_PEER_FAILED_VERIFICATION;\r\n+          result = CURLE_PEER_FAILED_VERIFICATION;\r\n+        }\r\n+        curlx_unicodefree(cert_hostname);\r\n       }\r\n-      curlx_unicodefree(cert_hostname);\r\n     }\r\n-  }\r\n \r\n-  if(result == CURLE_PEER_FAILED_VERIFICATION) {\r\n-    failf(data,\r\n-          \"schannel: CertGetNameString() failed to match \"\r\n-          \"connection hostname (%s) against server certificate names\",\r\n-          conn_hostname);\r\n+    if(result == CURLE_PEER_FAILED_VERIFICATION) {\r\n+      failf(data,\r\n+            \"schannel: CertGetNameString() failed to match \"\r\n+            \"connection hostname (%s) against server certificate names\",\r\n+            conn_hostname);\r\n+    }\r\n+    else if(result != CURLE_OK)\r\n+      failf(data, \"schannel: server certificate name verification failed\");\r\n   }\r\n-  else if(result != CURLE_OK)\r\n-    failf(data, \"schannel: server certificate name verification failed\");\r\n \r\n cleanup:\r\n   Curl_safefree(cert_hostname_buff);\r\n@@ -592,7 +661,6 @@ cleanup:\r\n   return result;\r\n }\r\n \r\n-\r\n #ifdef HAS_MANUAL_VERIFY_API\r\n /* Verify the server's certificate and hostname */\r\n CURLcode Curl_verify_certificate(struct Curl_cfilter *cf,\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2422449838/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14720612607,"node_id":"MEE_lADOAAiu0c6Y9aB4zwAAAANtarj_","url":"https://api.github.com/repos/curl/curl/issues/events/14720612607","actor":{"login":"elvinasp","id":18209016,"node_id":"MDQ6VXNlcjE4MjA5MDE2","avatar_url":"https://avatars.githubusercontent.com/u/18209016?v=4","gravatar_id":"","url":"https://api.github.com/users/elvinasp","html_url":"https://github.com/elvinasp","followers_url":"https://api.github.com/users/elvinasp/followers","following_url":"https://api.github.com/users/elvinasp/following{/other_user}","gists_url":"https://api.github.com/users/elvinasp/gists{/gist_id}","starred_url":"https://api.github.com/users/elvinasp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvinasp/subscriptions","organizations_url":"https://api.github.com/users/elvinasp/orgs","repos_url":"https://api.github.com/users/elvinasp/repos","events_url":"https://api.github.com/users/elvinasp/events{/privacy}","received_events_url":"https://api.github.com/users/elvinasp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-10-18T13:13:06Z","performed_via_github_app":null},{"id":14720612635,"node_id":"SE_lADOAAiu0c6Y9aB4zwAAAANtarkb","url":"https://api.github.com/repos/curl/curl/issues/events/14720612635","actor":{"login":"elvinasp","id":18209016,"node_id":"MDQ6VXNlcjE4MjA5MDE2","avatar_url":"https://avatars.githubusercontent.com/u/18209016?v=4","gravatar_id":"","url":"https://api.github.com/users/elvinasp","html_url":"https://github.com/elvinasp","followers_url":"https://api.github.com/users/elvinasp/followers","following_url":"https://api.github.com/users/elvinasp/following{/other_user}","gists_url":"https://api.github.com/users/elvinasp/gists{/gist_id}","starred_url":"https://api.github.com/users/elvinasp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/elvinasp/subscriptions","organizations_url":"https://api.github.com/users/elvinasp/orgs","repos_url":"https://api.github.com/users/elvinasp/repos","events_url":"https://api.github.com/users/elvinasp/events{/privacy}","received_events_url":"https://api.github.com/users/elvinasp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-10-18T13:13:06Z","performed_via_github_app":null},{"actor":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-27T12:12:30Z","updated_at":"2024-10-27T12:12:30Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/15421","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/15421/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/15421/comments","events_url":"https://api.github.com/repos/curl/curl/issues/15421/events","html_url":"https://github.com/curl/curl/pull/15421","id":2616554667,"node_id":"PR_kwDOAAiu0c6AAx3Q","number":15421,"title":"fix schannel tls cert verification by IP SAN","user":{"login":"edmcln","id":151375304,"node_id":"U_kgDOCQXNyA","avatar_url":"https://avatars.githubusercontent.com/u/151375304?v=4","gravatar_id":"","url":"https://api.github.com/users/edmcln","html_url":"https://github.com/edmcln","followers_url":"https://api.github.com/users/edmcln/followers","following_url":"https://api.github.com/users/edmcln/following{/other_user}","gists_url":"https://api.github.com/users/edmcln/gists{/gist_id}","starred_url":"https://api.github.com/users/edmcln/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/edmcln/subscriptions","organizations_url":"https://api.github.com/users/edmcln/orgs","repos_url":"https://api.github.com/users/edmcln/repos","events_url":"https://api.github.com/users/edmcln/events{/privacy}","received_events_url":"https://api.github.com/users/edmcln/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118221,"node_id":"MDU6TGFiZWwxODQxMTgyMjE=","url":"https://api.github.com/repos/curl/curl/labels/TLS","name":"TLS","color":"bfdadc","default":false,"description":""},{"id":940032249,"node_id":"MDU6TGFiZWw5NDAwMzIyNDk=","url":"https://api.github.com/repos/curl/curl/labels/Windows","name":"Windows","color":"0e8a16","default":false,"description":"Windows-specific"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2024-10-27T12:12:29Z","updated_at":"2024-11-01T07:32:12Z","closed_at":"2024-10-31T08:00:26Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T12:39:01Z","pushed_at":"2025-11-10T12:39:05Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":42,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":42,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/15421","html_url":"https://github.com/curl/curl/pull/15421","diff_url":"https://github.com/curl/curl/pull/15421.diff","patch_url":"https://github.com/curl/curl/pull/15421.patch","merged_at":null},"body":"Fixes https://github.com/curl/curl/issues/15149","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/15421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/15421/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":14969736807,"node_id":"CDE_lADOAAiu0c6Y9aB4zwAAAAN8RA5n","url":"https://api.github.com/repos/curl/curl/issues/events/14969736807","actor":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"comment_deleted","commit_id":null,"commit_url":null,"created_at":"2024-10-28T21:22:29Z","performed_via_github_app":null},{"id":15026696841,"node_id":"CE_lADOAAiu0c6Y9aB4zwAAAAN_qTKJ","url":"https://api.github.com/repos/curl/curl/issues/events/15026696841","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"9640a8ef6f0db21da2ee7864423aa28cc3cecce2","commit_url":"https://api.github.com/repos/curl/curl/commits/9640a8ef6f0db21da2ee7864423aa28cc3cecce2","created_at":"2024-10-31T08:00:26Z","state_reason":null,"performed_via_github_app":null},{"id":15027750979,"node_id":"REFE_lADOAAiu0c6Y9aB4zwAAAAN_uUhD","url":"https://api.github.com/repos/curl/curl/issues/events/15027750979","actor":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9640a8ef6f0db21da2ee7864423aa28cc3cecce2","commit_url":"https://api.github.com/repos/vszakats/curl/commits/9640a8ef6f0db21da2ee7864423aa28cc3cecce2","created_at":"2024-10-31T09:18:11Z","performed_via_github_app":null},{"id":17418997804,"node_id":"REFE_lADOAAiu0c6Y9aB4zwAAAAQOQNAs","url":"https://api.github.com/repos/curl/curl/issues/events/17418997804","actor":{"login":"pps83","id":1614246,"node_id":"MDQ6VXNlcjE2MTQyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1614246?v=4","gravatar_id":"","url":"https://api.github.com/users/pps83","html_url":"https://github.com/pps83","followers_url":"https://api.github.com/users/pps83/followers","following_url":"https://api.github.com/users/pps83/following{/other_user}","gists_url":"https://api.github.com/users/pps83/gists{/gist_id}","starred_url":"https://api.github.com/users/pps83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pps83/subscriptions","organizations_url":"https://api.github.com/users/pps83/orgs","repos_url":"https://api.github.com/users/pps83/repos","events_url":"https://api.github.com/users/pps83/events{/privacy}","received_events_url":"https://api.github.com/users/pps83/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bbb8862b97cc1cf7744854805122a223f89a7b50","commit_url":"https://api.github.com/repos/pps83/curl/commits/bbb8862b97cc1cf7744854805122a223f89a7b50","created_at":"2025-04-26T22:32:56Z","performed_via_github_app":null}]