[{"id":11181103777,"node_id":"LE_lADOAAiu0c55B6VGzwAAAAKachqh","url":"https://api.github.com/repos/curl/curl/issues/events/11181103777","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-07T12:00:55Z","label":{"name":"memory-leak","color":"c7def8"},"performed_via_github_app":null},{"id":11181103782,"node_id":"LE_lADOAAiu0c55B6VGzwAAAAKachqm","url":"https://api.github.com/repos/curl/curl/issues/events/11181103782","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-07T12:00:55Z","label":{"name":"name lookup","color":"0052cc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1845219693","html_url":"https://github.com/curl/curl/issues/12481#issuecomment-1845219693","issue_url":"https://api.github.com/repos/curl/curl/issues/12481","id":1845219693,"node_id":"IC_kwDOAAiu0c5t-9Ft","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-07T12:01:47Z","updated_at":"2023-12-07T12:01:47Z","body":"see #12406 for pending \"negative caching\"","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1845219693/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11181115734,"node_id":"LE_lADOAAiu0c55B6VGzwAAAAKacklW","url":"https://api.github.com/repos/curl/curl/issues/events/11181115734","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-07T12:01:57Z","label":{"name":"Windows","color":"0e8a16"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1845221266","html_url":"https://github.com/curl/curl/issues/12481#issuecomment-1845221266","issue_url":"https://api.github.com/repos/curl/curl/issues/12481","id":1845221266,"node_id":"IC_kwDOAAiu0c5t-9eS","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-07T12:02:51Z","updated_at":"2023-12-07T12:02:51Z","body":"> In my case, I ended up writing [code that uses GetAddrInfoExW on Win8](https://github.com/pps83/curl/commit/046c78285d64ff8c620c6b50299f59539357bf0e). Let me know if it's something worth to add to libcurl, and I'll make a PR.\r\n\r\nBy your description it certainly sounds like a worthwhile idea. Please do!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1845221266/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1845234623","html_url":"https://github.com/curl/curl/issues/12481#issuecomment-1845234623","issue_url":"https://api.github.com/repos/curl/curl/issues/12481","id":1845234623,"node_id":"IC_kwDOAAiu0c5t_Au_","user":{"login":"pps83","id":1614246,"node_id":"MDQ6VXNlcjE2MTQyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1614246?v=4","gravatar_id":"","url":"https://api.github.com/users/pps83","html_url":"https://github.com/pps83","followers_url":"https://api.github.com/users/pps83/followers","following_url":"https://api.github.com/users/pps83/following{/other_user}","gists_url":"https://api.github.com/users/pps83/gists{/gist_id}","starred_url":"https://api.github.com/users/pps83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pps83/subscriptions","organizations_url":"https://api.github.com/users/pps83/orgs","repos_url":"https://api.github.com/users/pps83/repos","events_url":"https://api.github.com/users/pps83/events{/privacy}","received_events_url":"https://api.github.com/users/pps83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-07T12:12:43Z","updated_at":"2023-12-07T12:13:03Z","body":"[Use GetAddrInfoExW for async DNS resolution on win8](https://github.com/curl/curl/pull/12482) ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1845234623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pps83","id":1614246,"node_id":"MDQ6VXNlcjE2MTQyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1614246?v=4","gravatar_id":"","url":"https://api.github.com/users/pps83","html_url":"https://github.com/pps83","followers_url":"https://api.github.com/users/pps83/followers","following_url":"https://api.github.com/users/pps83/following{/other_user}","gists_url":"https://api.github.com/users/pps83/gists{/gist_id}","starred_url":"https://api.github.com/users/pps83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pps83/subscriptions","organizations_url":"https://api.github.com/users/pps83/orgs","repos_url":"https://api.github.com/users/pps83/repos","events_url":"https://api.github.com/users/pps83/events{/privacy}","received_events_url":"https://api.github.com/users/pps83/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11253743829,"node_id":"LE_lADOAAiu0c55B6VGzwAAAAKexoDV","url":"https://api.github.com/repos/curl/curl/issues/events/11253743829","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-14T22:58:27Z","label":{"name":"feature-request","color":"5319e7"},"performed_via_github_app":null},{"id":11320718759,"node_id":"CE_lADOAAiu0c55B6VGzwAAAAKixHWn","url":"https://api.github.com/repos/curl/curl/issues/events/11320718759","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"a6bbc87f9e9ffb46a1801dfb983e7534825ed56b","commit_url":"https://api.github.com/repos/curl/curl/commits/a6bbc87f9e9ffb46a1801dfb983e7534825ed56b","created_at":"2023-12-21T22:27:08Z","state_reason":null,"performed_via_github_app":null},{"id":11620951733,"node_id":"REFE_lADOAAiu0c55B6VGzwAAAAK0qaa1","url":"https://api.github.com/repos/curl/curl/issues/events/11620951733","actor":{"login":"sftcd","id":5494807,"node_id":"MDQ6VXNlcjU0OTQ4MDc=","avatar_url":"https://avatars.githubusercontent.com/u/5494807?v=4","gravatar_id":"","url":"https://api.github.com/users/sftcd","html_url":"https://github.com/sftcd","followers_url":"https://api.github.com/users/sftcd/followers","following_url":"https://api.github.com/users/sftcd/following{/other_user}","gists_url":"https://api.github.com/users/sftcd/gists{/gist_id}","starred_url":"https://api.github.com/users/sftcd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sftcd/subscriptions","organizations_url":"https://api.github.com/users/sftcd/orgs","repos_url":"https://api.github.com/users/sftcd/repos","events_url":"https://api.github.com/users/sftcd/events{/privacy}","received_events_url":"https://api.github.com/users/sftcd/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a6bbc87f9e9ffb46a1801dfb983e7534825ed56b","commit_url":"https://api.github.com/repos/defo-project/curl/commits/a6bbc87f9e9ffb46a1801dfb983e7534825ed56b","created_at":"2024-01-28T21:32:02Z","performed_via_github_app":null},{"actor":{"login":"pps83","id":1614246,"node_id":"MDQ6VXNlcjE2MTQyNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1614246?v=4","gravatar_id":"","url":"https://api.github.com/users/pps83","html_url":"https://github.com/pps83","followers_url":"https://api.github.com/users/pps83/followers","following_url":"https://api.github.com/users/pps83/following{/other_user}","gists_url":"https://api.github.com/users/pps83/gists{/gist_id}","starred_url":"https://api.github.com/users/pps83/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pps83/subscriptions","organizations_url":"https://api.github.com/users/pps83/orgs","repos_url":"https://api.github.com/users/pps83/repos","events_url":"https://api.github.com/users/pps83/events{/privacy}","received_events_url":"https://api.github.com/users/pps83/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-09-08T23:45:14Z","updated_at":"2024-09-08T23:45:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/13509","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13509/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13509/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13509/events","html_url":"https://github.com/curl/curl/issues/13509","id":2272109830,"node_id":"I_kwDOAAiu0c6HbaUG","number":13509,"title":"Windows DNS resolution: Curl crash when GetAddrInfoExW callback invoked on shutdown","user":{"login":"Ch40zz","id":3965591,"node_id":"MDQ6VXNlcjM5NjU1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/3965591?v=4","gravatar_id":"","url":"https://api.github.com/users/Ch40zz","html_url":"https://github.com/Ch40zz","followers_url":"https://api.github.com/users/Ch40zz/followers","following_url":"https://api.github.com/users/Ch40zz/following{/other_user}","gists_url":"https://api.github.com/users/Ch40zz/gists{/gist_id}","starred_url":"https://api.github.com/users/Ch40zz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Ch40zz/subscriptions","organizations_url":"https://api.github.com/users/Ch40zz/orgs","repos_url":"https://api.github.com/users/Ch40zz/repos","events_url":"https://api.github.com/users/Ch40zz/events{/privacy}","received_events_url":"https://api.github.com/users/Ch40zz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118205,"node_id":"MDU6TGFiZWwxODQxMTgyMDU=","url":"https://api.github.com/repos/curl/curl/labels/crash","name":"crash","color":"bfe5bf","default":false,"description":null},{"id":657824945,"node_id":"MDU6TGFiZWw2NTc4MjQ5NDU=","url":"https://api.github.com/repos/curl/curl/labels/help%20wanted","name":"help wanted","color":"fbca04","default":true,"description":null},{"id":940032249,"node_id":"MDU6TGFiZWw5NDAwMzIyNDk=","url":"https://api.github.com/repos/curl/curl/labels/Windows","name":"Windows","color":"0e8a16","default":false,"description":"Windows-specific"},{"id":975635480,"node_id":"MDU6TGFiZWw5NzU2MzU0ODA=","url":"https://api.github.com/repos/curl/curl/labels/name%20lookup","name":"name lookup","color":"0052cc","default":false,"description":"DNS and related tech"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":21,"created_at":"2024-04-30T17:29:53Z","updated_at":"2024-11-21T23:34:44Z","closed_at":"2024-09-08T15:41:48Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\r\n\r\nWe are using libcurl in our C++ project on windows 10 and noticed strange issues after upgrading our curl from 8.3.0 to 8.6.0 or later. After spending some time reproducing the issue, we managed to get an ASAN stacktrace of the exact crash:\r\n```\r\n=================================================================\r\n==41196==ERROR: AddressSanitizer: heap-use-after-free on address 0x12184f8b06cc at pc 0x7ffbe4b442c4 bp 0x00c7a3dfdcf0 sp 0x00c7a3dfd480\r\nREAD of size 36 at 0x12184f8b06cc thread T-1\r\n==41196==WARNING: Failed to use and restart external symbolizer!\r\n++++++++++++++++++++++++++++++++++++++++deinit\r\n    #0 0x7ffbe4b442c3 in _asan_wrap_memmove+0x193 (C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\\VC\\Tools\\MSVC\\14.39.33519\\bin\\HostX64\\x64\\clang_rt.asan_dynamic-x86_64.dll+0x1800342c3)\r\n    #1 0x7ffd4bc46936 in NdrFullPointerFree+0xd36 (C:\\WINDOWS\\System32\\RPCRT4.dll+0x180006936)\r\n    #2 0x7ffd4bd1d87c in NdrMesSimpleTypeEncodeAll+0x6e2c (C:\\WINDOWS\\System32\\RPCRT4.dll+0x1800dd87c)\r\n    #3 0x7ffd4bd1aa74 in NdrMesSimpleTypeEncodeAll+0x4024 (C:\\WINDOWS\\System32\\RPCRT4.dll+0x1800daa74)\r\n    #4 0x7ffd4bd1dc6f in NdrClientCall3+0xef (C:\\WINDOWS\\System32\\RPCRT4.dll+0x1800ddc6f)\r\n    #5 0x7ffd4a348fb0 in DnsGetAdaptersInfo+0xe40 (C:\\WINDOWS\\SYSTEM32\\DNSAPI.dll+0x180008fb0)\r\n    #6 0x7ffd4a3486bf in DnsGetAdaptersInfo+0x54f (C:\\WINDOWS\\SYSTEM32\\DNSAPI.dll+0x1800086bf)\r\n    #7 0x7ffd4a34c616 in DnsQueryEx+0x9b6 (C:\\WINDOWS\\SYSTEM32\\DNSAPI.dll+0x18000c616)\r\n    #8 0x7ffd4a34bdc5 in DnsQueryEx+0x165 (C:\\WINDOWS\\SYSTEM32\\DNSAPI.dll+0x18000bdc5)\r\n    #9 0x7ffd4a65b162 in WSPStartup+0x1902 (C:\\WINDOWS\\system32\\mswsock.dll+0x18000b162)\r\n    #10 0x7ffd4a65af33 in WSPStartup+0x16d3 (C:\\WINDOWS\\system32\\mswsock.dll+0x18000af33)\r\n    #11 0x7ffd4a65a60d in WSPStartup+0xdad (C:\\WINDOWS\\system32\\mswsock.dll+0x18000a60d)\r\n    #12 0x7ffd4d7c9e79 in WSALookupServiceBeginW+0x1139 (C:\\WINDOWS\\System32\\WS2_32.dll+0x180009e79)\r\n    #13 0x7ffd4d8e0cd8 in RtlDeactivateActivationContext+0x2c8 (C:\\WINDOWS\\SYSTEM32\\ntdll.dll+0x180070cd8)\r\n    #14 0x7ffd4d8c31b9 in TpReleaseCleanupGroupMembers+0xad9 (C:\\WINDOWS\\SYSTEM32\\ntdll.dll+0x1800531b9)\r\n    #15 0x7ffd4d717343 in BaseThreadInitThunk+0x13 (C:\\WINDOWS\\System32\\KERNEL32.DLL+0x180017343)\r\n    #16 0x7ffd4d8c26b0 in RtlUserThreadStart+0x20 (C:\\WINDOWS\\SYSTEM32\\ntdll.dll+0x1800526b0)\r\n\r\n0x12184f8b06cc is located 140 bytes inside of 180-byte region [0x12184f8b0640,0x12184f8b06f4)\r\nfreed by thread T0 here:\r\n    #0 0x7ffbe4b4f585 in _asan_wrap_RtlFreeHeap+0x4d5 (C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\\VC\\Tools\\MSVC\\14.39.33519\\bin\\HostX64\\x64\\clang_rt.asan_dynamic-x86_64.dll+0x18003f585)\r\n    #1 0x7ffd4a359747 in DnsApiFree+0x37 (C:\\WINDOWS\\SYSTEM32\\DNSAPI.dll+0x180019747)\r\n    #2 0x7ffd4a66cfff in Tcpip6_WSHGetWildcardSockaddr+0xc48f (C:\\WINDOWS\\system32\\mswsock.dll+0x18001cfff)\r\n    #3 0x7ffd4a65f6f6 in Tcpip6_WSHAddressToString+0xe6 (C:\\WINDOWS\\system32\\mswsock.dll+0x18000f6f6)\r\n    #4 0x7ffd4d7c1b41 in Ordinal487+0x1b41 (C:\\WINDOWS\\System32\\WS2_32.dll+0x180001b41)\r\n    #5 0x7ffd4d7d3350 in WSACreateEvent+0xf0 (C:\\WINDOWS\\System32\\WS2_32.dll+0x180013350)\r\n    #6 0x7ffd4d7d022b in WSCEnumProtocols+0x97b (C:\\WINDOWS\\System32\\WS2_32.dll+0x18001022b)\r\n    #7 0x7ffd4d7cfb33 in WSCEnumProtocols+0x283 (C:\\WINDOWS\\System32\\WS2_32.dll+0x18000fb33)\r\n    #8 0x7ffd4d7d03d9 in WahEnumerateHandleContexts+0xf9 (C:\\WINDOWS\\System32\\WS2_32.dll+0x1800103d9)\r\n    #9 0x7ffd4d7d04f5 in WSACleanup+0xe5 (C:\\WINDOWS\\System32\\WS2_32.dll+0x1800104f5)\r\n    #10 0x7ffbe6a5a472 in Curl_win32_cleanup C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\system_win32.c:164\r\n    #11 0x7ffbe6a3eaba in curl_global_cleanup C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\easy.c:291\r\n    ...\r\n    #19 0x7ff65bae75ab in __scrt_common_main_seh D:\\a\\_work\\1\\s\\src\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl:288    #20 0x7ffd4d717343 in BaseThreadInitThunk+0x13 (C:\\WINDOWS\\System32\\KERNEL32.DLL+0x180017343)\r\n    #21 0x7ffd4d8c26b0 in RtlUserThreadStart+0x20 (C:\\WINDOWS\\SYSTEM32\\ntdll.dll+0x1800526b0)\r\n\r\npreviously allocated by thread T3 here:\r\n    #0 0x7ffbe4b4ed29 in _asan_wrap_RtlAllocateHeap+0x179 (C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\\VC\\Tools\\MSVC\\14.39.33519\\bin\\HostX64\\x64\\clang_rt.asan_dynamic-x86_64.dll+0x18003ed29)\r\n    #1 0x7ffd4a65aafe in WSPStartup+0x129e (C:\\WINDOWS\\system32\\mswsock.dll+0x18000aafe)\r\n    #2 0x7ffd4a65a2a7 in WSPStartup+0xa47 (C:\\WINDOWS\\system32\\mswsock.dll+0x18000a2a7)\r\n    #3 0x7ffd4d7c9089 in WSALookupServiceBeginW+0x349 (C:\\WINDOWS\\System32\\WS2_32.dll+0x180009089)\r\n    #4 0x7ffd4d7c8e48 in WSALookupServiceBeginW+0x108 (C:\\WINDOWS\\System32\\WS2_32.dll+0x180008e48)\r\n    #5 0x7ffd4d7c83bf in GetNameInfoW+0x133f (C:\\WINDOWS\\System32\\WS2_32.dll+0x1800083bf)\r\n    #6 0x7ffd4d7c81c8 in GetNameInfoW+0x1148 (C:\\WINDOWS\\System32\\WS2_32.dll+0x1800081c8)\r\n    #7 0x7ffd4d7c6a76 in GetAddrInfoW+0xf56 (C:\\WINDOWS\\System32\\WS2_32.dll+0x180006a76)\r\n    #8 0x7ffd4d7c4390 in GetAddrInfoExW+0x4e0 (C:\\WINDOWS\\System32\\WS2_32.dll+0x180004390)\r\n    #9 0x7ffbe6a4a755 in init_resolve_thread C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\asyn-thread.c:657\r\n    #10 0x7ffbe6a49cd5 in Curl_resolver_getaddrinfo C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\asyn-thread.c:940\r\n    #11 0x7ffbe6a61049 in Curl_resolv C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\hostip.c:814\r\n    #12 0x7ffbe6a551c6 in resolve_fresh C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\url.c:3297\r\n    #13 0x7ffbe6a535b1 in create_conn C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\url.c:3802\r\n    #14 0x7ffbe6a51979 in Curl_connect C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\url.c:3873\r\n    #15 0x7ffbe6a407b8 in multi_runsingle C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\multi.c:2002\r\n    #16 0x7ffbe6a3fc00 in curl_multi_perform C:\\vcpkg\\buildtrees\\curl\\src\\curl-8_6_0-f17d00bdb6.clean\\lib\\multi.c:2780\r\n    ...\r\n    #20 0x7ffbe6afd455 in thread_start<unsigned int (__cdecl*)(void *),1> minkernel\\crts\\ucrt\\src\\appcrt\\startup\\thread.cpp:97\r\n    #21 0x7ffbe4b5ebde in _asan_default_suppressions__dll+0x122e (C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\\VC\\Tools\\MSVC\\14.39.33519\\bin\\HostX64\\x64\\clang_rt.asan_dynamic-x86_64.dll+0x18004ebde)\r\n    #22 0x7ffd4d717343 in BaseThreadInitThunk+0x13 (C:\\WINDOWS\\System32\\KERNEL32.DLL+0x180017343)\r\n    #23 0x7ffd4d8c26b0 in RtlUserThreadStart+0x20 (C:\\WINDOWS\\SYSTEM32\\ntdll.dll+0x1800526b0)\r\n\r\nThread T3 created by T0 here:\r\n    #0 0x7ffbe4b60897 in _asan_wrap_CreateThread+0x77 (C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\\VC\\Tools\\MSVC\\14.39.33519\\bin\\HostX64\\x64\\clang_rt.asan_dynamic-x86_64.dll+0x180050897)\r\n    #1 0x7ffbe6afd59e in _beginthreadex minkernel\\crts\\ucrt\\src\\appcrt\\startup\\thread.cpp:209\r\n    ...\r\n    #10 0x7ff65bae75ab in __scrt_common_main_seh D:\\a\\_work\\1\\s\\src\\vctools\\crt\\vcstartup\\src\\startup\\exe_common.inl:288    #11 0x7ffd4d717343 in BaseThreadInitThunk+0x13 (C:\\WINDOWS\\System32\\KERNEL32.DLL+0x180017343)\r\n    #12 0x7ffd4d8c26b0 in RtlUserThreadStart+0x20 (C:\\WINDOWS\\SYSTEM32\\ntdll.dll+0x1800526b0)\r\n\r\nSUMMARY: AddressSanitizer: heap-use-after-free (C:\\Program Files\\Microsoft Visual Studio\\2022\\Professional\\VC\\Tools\\MSVC\\14.39.33519\\bin\\HostX64\\x64\\clang_rt.asan_dynamic-x86_64.dll+0x1800342c3) in _asan_wrap_memmove+0x193\r\nShadow bytes around the buggy address:\r\n  0x043b59796080: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\r\n  0x043b59796090: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fa\r\n  0x043b597960a0: fa fa fa fa fa fa fa fa 00 00 00 00 00 00 00 00\r\n  0x043b597960b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00\r\n  0x043b597960c0: fa fa fa fa fa fa fa fa fd fd fd fd fd fd fd fd\r\n=>0x043b597960d0: fd fd fd fd fd fd fd fd fd[fd]fd fd fd fd fd fa\r\n  0x043b597960e0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x043b597960f0: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x043b59796100: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x043b59796110: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\n  0x043b59796120: fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa fa\r\nShadow byte legend (one shadow byte represents 8 application bytes):\r\n  Addressable:           00\r\n  Partially addressable: 01 02 03 04 05 06 07\r\n  Heap left redzone:       fa\r\n  Freed heap region:       fd\r\n  Stack left redzone:      f1\r\n  Stack mid redzone:       f2\r\n  Stack right redzone:     f3\r\n  Stack after return:      f5\r\n  Stack use after scope:   f8\r\n  Global redzone:          f9\r\n  Global init order:       f6\r\n  Poisoned by user:        f7\r\n  Container overflow:      fc\r\n  Array cookie:            ac\r\n  Intra object redzone:    bb\r\n  ASan internal:           fe\r\n  Left alloca redzone:     ca\r\n  Right alloca redzone:    cb\r\n```\r\n\r\nWhat happens here is that a DNS resolver thread created by `GetAddrInfoExW` did not terminate yet, however curl is already shutting down, deinitializing Winsock with `WSACleanup()` leading to an access violation.\r\n\r\nAfter investigating recent changes we came to the conclusion that there is most likely a bug in the current async windows DNS resolution code around `GetAddrInfoExW` implemented in https://github.com/curl/curl/pull/12482.\r\nWe tried a few things to verify this:\r\n - Use Curl 8.5.0 or older => works\r\n - Use Curl 8.6.0 or newer => crashes\r\n - Use Curl 8.6.0 or newer with c-ares => works\r\n\r\nOur test looks as follows:\r\n- Initialize curl, create 1 thread to process all curl multi requests\r\n- Create a second thread to push work to the first thread\r\n- Shutdown all the new threads, join them, then deinit curl\r\n\r\nWe made sure that everything is thread safe by using proper locking mechanisms, the issue is reproducable roughly 60% of the time per run. The bug is most likely the cause of `Curl_resolver_kill` -> `Curl_resolver_cancel()` -> `destroy_async_data()` which then has this code: https://github.com/curl/curl/blob/0199104e944c1625056b4cf78b6cdb14a7b82e3e/lib/asyn-thread.c#L555-L569\r\n\r\nClosing the completion event handle in the first branch (not done) seems like a bad idea as the next call to `Curl_GetAddrInfoExCancel()` might not finish instantly. We then would wait for `WaitForSingleObject(td->complete_ev, INFINITE);` but this will instantly return with an error as the handle is closed. This is however just a theory and not verified yet.\r\n\r\n### I expected the following\r\n\r\nCurl shutdown / multi close properly stops all running DNS requests and doesn't crash.\r\nTests for the Windows implementation would also be great.\r\n\r\n### curl/libcurl version\r\n\r\n`>= curl 8.6.0`\r\n\r\n### operating system\r\n\r\nWindows 10 22H2","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13509/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13509/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]