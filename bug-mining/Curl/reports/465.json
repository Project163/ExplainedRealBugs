{"url":"https://api.github.com/repos/curl/curl/issues/13767","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13767/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13767/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13767/events","html_url":"https://github.com/curl/curl/issues/13767","id":2315887446,"node_id":"I_kwDOAAiu0c6KCaNW","number":13767,"title":"Document that CURLOPT_SSL_VERIFYHOST applies to SSH","user":{"login":"abbeyj","id":99402,"node_id":"MDQ6VXNlcjk5NDAy","avatar_url":"https://avatars.githubusercontent.com/u/99402?v=4","gravatar_id":"","url":"https://api.github.com/users/abbeyj","html_url":"https://github.com/abbeyj","followers_url":"https://api.github.com/users/abbeyj/followers","following_url":"https://api.github.com/users/abbeyj/following{/other_user}","gists_url":"https://api.github.com/users/abbeyj/gists{/gist_id}","starred_url":"https://api.github.com/users/abbeyj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abbeyj/subscriptions","organizations_url":"https://api.github.com/users/abbeyj/orgs","repos_url":"https://api.github.com/users/abbeyj/repos","events_url":"https://api.github.com/users/abbeyj/events{/privacy}","received_events_url":"https://api.github.com/users/abbeyj/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":200869765,"node_id":"MDU6TGFiZWwyMDA4Njk3NjU=","url":"https://api.github.com/repos/curl/curl/labels/documentation","name":"documentation","color":"f7c6c7","default":true,"description":null},{"id":269086135,"node_id":"MDU6TGFiZWwyNjkwODYxMzU=","url":"https://api.github.com/repos/curl/curl/labels/SCP/SFTP","name":"SCP/SFTP","color":"bfd4f2","default":false,"description":null},{"id":1117926199,"node_id":"MDU6TGFiZWwxMTE3OTI2MTk5","url":"https://api.github.com/repos/curl/curl/labels/libcurl%20API","name":"libcurl API","color":"fef2c0","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-24T17:24:21Z","updated_at":"2024-05-26T10:01:37Z","closed_at":"2024-05-26T10:01:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n\nThe documentation for `CURLOPT_SSL_VERIFYHOST` (https://curl.se/libcurl/c/CURLOPT_SSL_VERIFYHOST.html) says that it applies to TLS protocols.  It speaks about certificates and what fields in the certificates are examined.  It doesn't mention SSH or the sftp protocol at all.\r\n\r\nSince c92d2e14cfb0db662f958effd2ac86f995cf1b5a this setting is also used by SSH, at least when using the libssh backend.  It is somewhat surprising that changing a `CURLOPT_SSL_*` setting could affect an sftp:// connection.  I would have assumed that this setting could only impact SSL/TLS connections and that the settings that affected an SSH connection would all match `CURLOPT_SSH_*`.\r\n\r\nThe fact that this setting is used by SSH should be documented.  The documentation should also describe exactly what this setting does for SSH.  The existing documentation which refers to certificates is not adequate since the SSH verification code does not deal with certificates.  The interaction with `CURLOPT_SSH_KNOWNHOSTS`, `CURLOPT_SSH_HOST_PUBLIC_KEY_MD5`, `CURLOPT_SSH_KEYFUNCTION`, etc. should probably also be described somewhere.\r\n\r\nAlternatively, maybe this setting should not be used by the libssh backend.  That would restore parity with the libssh2 backend.  It would also fix the documentation for https://curl.se/libcurl/c/CURLOPT_SSH_KNOWNHOSTS.html which currently implies that not setting this option will not perform known host checking.  I think that's true for the libssh2 backend, but not true for the libssh backend.\r\n\r\nPossibly tangentially related: https://curl.se/libcurl/c/CURLOPT_SSH_KEYFUNCTION.html claims that \"The callback is only called if CURLOPT_SSH_KNOWNHOSTS is also set.\" which I think is true for libssh2 but not true for libssh.\r\n\n\n### I expected the following\n\n_No response_\n\n### curl/libcurl version\n\ngit HEAD\n\n### operating system\n\nN/A","closed_by":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13767/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13767/timeline","performed_via_github_app":null,"state_reason":"completed"}