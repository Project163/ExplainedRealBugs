[{"id":15775568470,"node_id":"RTE_lADOAAiu0c6kl0n6zwAAAAOsTBJW","url":"https://api.github.com/repos/curl/curl/issues/events/15775568470","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-12-28T02:14:18Z","rename":{"from":"curl_mime_subparts() fails if the input mime_handle as already been used in a transfer","to":"curl_easy_perform() fails if a nested mime_handle was already used in a transfer"},"performed_via_github_app":null},{"id":15777605749,"node_id":"LE_lADOAAiu0c6kl0n6zwAAAAOsayh1","url":"https://api.github.com/repos/curl/curl/issues/events/15777605749","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-12-28T14:18:19Z","label":{"name":"libcurl API","color":"fef2c0"},"performed_via_github_app":null},{"id":15777605751,"node_id":"LE_lADOAAiu0c6kl0n6zwAAAAOsayh3","url":"https://api.github.com/repos/curl/curl/issues/events/15777605751","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-12-28T14:18:19Z","label":{"name":"MIME","color":"A458D7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2567503650","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2567503650","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2567503650,"node_id":"IC_kwDOAAiu0c6ZCP8i","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T09:44:30Z","updated_at":"2025-01-02T09:44:30Z","body":"Any chance you can provide an example code (in C) that shows this happening? Maybe by adjusting https://curl.se/libcurl/c/smtp-mime.html ? This way we would be sure we understand your issue exactly.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2567503650/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2567786144","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2567786144","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2567786144,"node_id":"IC_kwDOAAiu0c6ZDU6g","user":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T13:35:53Z","updated_at":"2025-01-02T13:35:53Z","body":"> Any chance you can provide an example code (in C) that shows this happening? Maybe by adjusting https://curl.se/libcurl/c/smtp-mime.html ? This way we would be sure we understand your issue exactly.\r\n\r\nI'm kind of embarassed to say that I'm not really fluent in C at all (wrapping libcurl has featured a steep learning curve for me, lol)... but I think I can get there since that mime example you kindly linked looks fairly complete and consists mainly of curl functions. It might be a couple days for my thick head to figure out the compiler process.\r\n\r\nIf I can't figure it out reasonably quickly I'll at least come back with the equivalent raw DLL calls in AHK, heavily commented so you can follow.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2567786144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568112866","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2568112866","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2568112866,"node_id":"IC_kwDOAAiu0c6ZEkri","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T17:21:10Z","updated_at":"2025-01-02T17:21:10Z","body":"yeah, you can probably start with a rough psedu-code style version and I can try to convert that for us and then we can take it step by step","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568112866/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568118959","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2568118959","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2568118959,"node_id":"IC_kwDOAAiu0c6ZEmKv","user":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T17:26:17Z","updated_at":"2025-01-02T17:26:17Z","body":"> yeah, you can probably start with a rough psedu-code style version and I can try to convert that for us and then we can take it step by step\r\n\r\nWhew, cuz I'm struggling lol\r\n![image](https://github.com/user-attachments/assets/860387dc-acba-4a82-b4ca-950d7a343c0b)\r\n\r\nI'll type something up real quick.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568118959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568424712","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2568424712","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2568424712,"node_id":"IC_kwDOAAiu0c6ZFw0I","user":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T21:50:50Z","updated_at":"2025-01-02T21:50:50Z","body":"I apologize for taking so long, I had to tend to something. ^^;\r\n\r\nAnyways, the simplified instructions to replicate:\r\n- initialize libcurl (curl_global_sslset / curl_global_init)\r\n- initialize easy_handle \r\n   - +relevant setopts\r\n- initialize mime_handle1 \r\n   - `curl_easy_setopt(easy_handle,CURLOPT_MIMEPOST,mime_handle1)`\r\n   - +add any random data as mime_parts\r\n- execute the transfer via curl_easy_perform\r\n   - (this uploads as expected, and returns 0)\r\n- initialize mime_handle2\r\n   - `curl_easy_setopt(easy_handle,CURLOPT_MIMEPOST,mime_handle2)`\r\n   - `mime_part = curl_mime_addpart(mime_handle2)`\r\n   - `curl_mime_subparts(mime_part,mime_handle1)`\r\n      - (this returns 0)\r\n- execute the transfer via curl_easy_perform\r\n   - (this returns 26)\r\n\r\nNotably, if we do everything the same _except_ execute the first transfer, the now-only transfer will execute as normal.\r\n\r\nUsing my class to partially intialize variables, I have written a lengthy breakdown of the functions I've invoked to get to the error:\r\nhttps://pastebin.com/HW9YWNx5\r\n\r\nUsing that script, my class' error handling function captured the following info:\r\n```\r\n[1]\r\n    [error code] => 26\r\n    [error family] => Curlcode\r\n    [error string1] => Failed to open/read local data from file/application\r\n    [error string2] => client mime read EOF fail, only 226/426 of needed bytes read\r\n    [invoked LibQurl method] => Sync\r\n    [invoked curl function] => curl_easy_perform\r\n    [options snapshot]\r\n        [1]\r\n            [ACCEPT_ENCODING] =>\r\n            [CAINFO] => C:\\Projects\\troubleshooting libcurl MIME\\Lib\\Aris\\Qriist\\LibQurl@v0.90.0\\bin\\curl-ca-bundle.crt\r\n            [ERRORBUFFER] => [BUFFER]\r\n            [FOLLOWLOCATION] => 1\r\n            [HEADERDATA] => 142004192\r\n            [HEADERFUNCTION] => 11309248\r\n            [MAXREDIRS] => 30\r\n            [MIMEPOST] => 11092016\r\n            [WRITEDATA] => 150974528\r\n            [WRITEFUNCTION] => 11309120\r\n    [timestamp] => 20250102205126\r\n```\r\nFinally, for sake of completion, here is the returned body from that script's first transfer to demonstrate that the mime functions are working as expected under most circumstances.\r\n```\r\n{\r\n  \"args\": {}, \r\n  \"data\": \"\", \r\n  \"files\": {}, \r\n  \"form\": {\r\n    \"sample part 1\": \"sample data 1\"\r\n  }, \r\n  \"headers\": {\r\n    \"Accept\": \"*/*\", \r\n    \"Accept-Encoding\": \"deflate, gzip, br, zstd\", \r\n    \"Content-Length\": \"199\", \r\n    \"Content-Type\": \"multipart/form-data; boundary=------------------------rvUfRysNoCwUdgNjvgcrC4\", \r\n    \"Host\": \"httpbin.org\", \r\n    \"X-Amzn-Trace-Id\": \"Root=1-6776fc4e-0e58cc64596234e6450f3dfc\"\r\n  }, \r\n  \"json\": null, \r\n  \"method\": \"POST\", \r\n  \"origin\": \"73.134.67.54\", \r\n  \"url\": \"https://httpbin.org/anything\"\r\n}\r\n```\r\n\r\nAssuming it's not user error on my part, I do think this \"locking\" could be intended behavior, if for no other reason than the way mime_handles are tightly integrated with their respective easy_handles.\r\n\r\nIt's not really a problem that subparting previously used mime_handles creates a failure, I was just suprised since I didn't see it in the documentation.\r\n\r\nIf this is indeed a bug, then I think a check (+appropriate error code) at the curl_mime_subparts function would be a good idea.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568424712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568479148","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2568479148","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2568479148,"node_id":"IC_kwDOAAiu0c6ZF-Gs","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T22:50:43Z","updated_at":"2025-01-03T19:59:21Z","body":"If I understand the description, this should be a C version of the code?\r\n\r\n~~~c\r\n#include <stdio.h>\r\n#include <curl/curl.h>\r\n\r\n/* write callback that does nothing */\r\nsize_t write_it(char *ptr, size_t size, size_t nmemb, void *userdata)\r\n{\r\n  return size * nmemb;\r\n}\r\n\r\nint main(void)\r\n{\r\n  CURL *curl;\r\n  CURLcode res;\r\n\r\n  curl_global_init(CURL_GLOBAL_ALL);\r\n\r\n  curl = curl_easy_init();\r\n  if(curl) {\r\n    curl_mime *mime1;\r\n    curl_mimepart *part1;\r\n    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_it);\r\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://localhost/\");\r\n\r\n    mime1 = curl_mime_init(curl);\r\n    part1 = curl_mime_addpart(mime1);\r\n    curl_mime_data(part1, \"<title>hello</title>\", CURL_ZERO_TERMINATED);\r\n    curl_mime_type(part1, \"text/html\");\r\n    curl_mime_name(part1, \"data\");\r\n\r\n    curl_easy_setopt(curl, CURLOPT_MIMEPOST, mime1);\r\n    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);\r\n\r\n    /* Perform the request, res gets the return code */\r\n    res = curl_easy_perform(curl);\r\n    /* Check for errors */\r\n    if(res != CURLE_OK)\r\n      fprintf(stderr, \"curl_easy_perform() 1 failed: %s\\n\",\r\n              curl_easy_strerror(res));\r\n\r\n    /* phase two, create a mime struct using the mime1 handle */\r\n    {\r\n      curl_mime *mime2 = curl_mime_init(curl);\r\n      curl_mimepart *part2 = curl_mime_addpart(mime2);\r\n\r\n      CURLcode rc = curl_mime_subparts(part2, mime1);\r\n\r\n      printf(\"rc = %d\\n\", (int)rc);\r\n\r\n      /* use the new mime setup */\r\n      curl_easy_setopt(curl, CURLOPT_MIMEPOST, mime2);\r\n\r\n      /* Perform the request, res gets the return code */\r\n      res = curl_easy_perform(curl);\r\n      /* Check for errors */\r\n      if(res != CURLE_OK)\r\n        fprintf(stderr, \"curl_easy_perform() 2 failed: %s\\n\",\r\n                curl_easy_strerror(res));\r\n    }\r\n    /* always cleanup */\r\n    curl_easy_cleanup(curl);\r\n  }\r\n  return 0;\r\n}\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568479148/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568506387","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2568506387","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2568506387,"node_id":"IC_kwDOAAiu0c6ZGEwT","user":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-02T23:13:37Z","updated_at":"2025-01-02T23:15:28Z","body":"> If I understand the description, this should be a C version of the code?\r\n\r\nJust to make sure I'm grokking things correctly:\r\n\r\n- Variables with an asterisk (ie, `curl_mime *mime1;`) are pointers to that kind of struct, while those without (ie, `CURLcode res;`) are enums of that type?\r\n- And this line...\r\n   - `CURLcode rc = curl_mime_subparts(part2, mime1);`\r\n   - ...assigns `rc` as a `CURLcode` type integer that can still be used later on?\r\n\r\nIf my limited C managed to understand that correctly, then yep, that looks good!\r\n\r\n(Now here is the part where you tell me it works on your end, haha. ^^; )","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568506387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568811413","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2568811413","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2568811413,"node_id":"IC_kwDOAAiu0c6ZHPOV","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T07:51:14Z","updated_at":"2025-01-03T07:51:14Z","body":"Your understanding of the code seems correct, yes.\r\n\r\nWhen I run this, I get a `rc = 43` in the output, meaning that this line fails:\r\n\r\n~~~c\r\n      CURLcode rc = curl_mime_subparts(part2, mime1);\r\n~~~\r\n\r\n43 means `CURLE_BAD_FUNCTION_ARGUMENT`.\r\n\r\nIs this perhaps the problem you see as well? It seems to come from here:\r\n\r\nhttps://github.com/curl/curl/blob/abf8062449f0a5000284bebdcea3c692cc6e3de4/lib/mime.c#L1550C1-L1551C1\r\n\r\nI'll take a deeper look.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568811413/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568847142","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2568847142","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2568847142,"node_id":"IC_kwDOAAiu0c6ZHX8m","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T08:27:55Z","updated_at":"2025-01-03T08:27:55Z","body":"I think this minor tweak reproduces the original report:\r\n\r\n~~~c\r\n#include <stdio.h>\r\n#include <curl/curl.h>\r\n\r\n/* write callback that does nothing */\r\nsize_t write_it(char *ptr, size_t size, size_t nmemb, void *userdata)\r\n{\r\n  return size * nmemb;\r\n}\r\n\r\nint main(void)\r\n{\r\n  CURL *curl;\r\n  CURLcode res;\r\n\r\n  curl_global_init(CURL_GLOBAL_ALL);\r\n\r\n  curl = curl_easy_init();\r\n  if(curl) {\r\n    curl_mime *mime1;\r\n    curl_mimepart *part1;\r\n    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_it);\r\n    curl_easy_setopt(curl, CURLOPT_URL, \"http://localhost/\");\r\n\r\n    mime1 = curl_mime_init(curl);\r\n    part1 = curl_mime_addpart(mime1);\r\n    curl_mime_data(part1, \"<title>hello</title>\", CURL_ZERO_TERMINATED);\r\n    curl_mime_type(part1, \"text/html\");\r\n    curl_mime_name(part1, \"data\");\r\n\r\n    curl_easy_setopt(curl, CURLOPT_MIMEPOST, mime1);\r\n    curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);\r\n\r\n    /* Perform the request, res gets the return code */\r\n    res = curl_easy_perform(curl);\r\n    /* Check for errors */\r\n    if(res != CURLE_OK)\r\n      fprintf(stderr, \"curl_easy_perform() 1 failed: %s\\n\",\r\n              curl_easy_strerror(res));\r\n\r\n    /* phase two, create a mime struct using the mime1 handle */\r\n    {\r\n      curl_mime *mime2 = curl_mime_init(curl);\r\n      curl_mimepart *part2 = curl_mime_addpart(mime2);\r\n\r\n      /* use the new mime setup */\r\n      curl_easy_setopt(curl, CURLOPT_MIMEPOST, mime2);\r\n      CURLcode rc = curl_mime_subparts(part2, mime1);\r\n\r\n      printf(\"rc = %d\\n\", (int)rc);\r\n\r\n\r\n      /* Perform the request, res gets the return code */\r\n      res = curl_easy_perform(curl);\r\n      /* Check for errors */\r\n      if(res != CURLE_OK)\r\n        fprintf(stderr, \"curl_easy_perform() 2 failed: %s\\n\",\r\n                curl_easy_strerror(res));\r\n    }\r\n    /* always cleanup */\r\n    curl_easy_cleanup(curl);\r\n  }\r\n  return 0;\r\n}\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2568847142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15806898802,"node_id":"AE_lADOAAiu0c6kl0n6zwAAAAOuKiJy","url":"https://api.github.com/repos/curl/curl/issues/events/15806898802","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2025-01-03T12:02:59Z","assignee":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569489961","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569489961","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569489961,"node_id":"IC_kwDOAAiu0c6ZJ04p","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T16:21:15Z","updated_at":"2025-01-03T16:21:15Z","body":"/cc @monnerat for info.\r\n\r\nThere seems to be some state that is not reset properly when the same mime part is used again like this. The problem is easily reproducible but I have yet to find the exact culprit.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569489961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15809015831,"node_id":"MEE_lADOAAiu0c6kl0n6zwAAAAOuSnAX","url":"https://api.github.com/repos/curl/curl/issues/events/15809015831","actor":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-01-03T16:21:16Z","performed_via_github_app":null},{"id":15809015840,"node_id":"SE_lADOAAiu0c6kl0n6zwAAAAOuSnAg","url":"https://api.github.com/repos/curl/curl/issues/events/15809015840","actor":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-01-03T16:21:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569689471","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569689471","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569689471,"node_id":"IC_kwDOAAiu0c6ZKll_","user":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T19:06:20Z","updated_at":"2025-01-03T19:06:20Z","body":"> Your understanding of the code seems correct, yes.\r\n\r\nGood, seems we're communicating effectively then. :D\r\n\r\n> I think this minor tweak reproduces the original report:\r\n\r\nI apologize I didn't catch the difference at a glance, but at least you caught it yourself pretty quickly.\r\n\r\nA thought had occurred to me earlier that the error might have been something relating to the DLL interface, like maybe Windows was butchering a buffer or whatever. That you were able to reproduce the issue without using a DLL cancels that idea, though, which is good since that would likely be harder to troubleshoot.\r\n\r\nNow that you've been able to reproduce the bug on your end I think that my usefulness to the conversation has ended. If there's anything more you need from me (to test a fixed build, perhaps) by all means ask! ^_^","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569689471/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569729035","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569729035","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569729035,"node_id":"IC_kwDOAAiu0c6ZKvQL","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T19:42:47Z","updated_at":"2025-01-03T19:42:47Z","body":"Yes, I'll get back. Just need some time to get to the bottom of this while juggling some other things at the same time.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569729035/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569729719","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569729719","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569729719,"node_id":"IC_kwDOAAiu0c6ZKva3","user":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T19:43:26Z","updated_at":"2025-01-03T19:43:26Z","body":"> There seems to be some state that is not reset properly when the same mime part is used again like this.\r\n\r\nFirst, you can reassign mime handle 1 because you still own it after using it within a `CURLOPT_MIMEPOST` setopt, while you could'nt do that if it were previously used in a `curl_mime_subparts`, as the latter takes ownership of the handle. That said, I don't know why you get error 43 since calling again setopt(`CURLOPT_MIMEPOST`) clears the parent pointer in the previous mime struct (last line of `mime_subparts_unbind`).\r\n\r\nNext, I don't think you reproduced the initial error, which has code 26 (caused by a premature EOF).\r\nSince we do not know how the parts data are initilalized, I can imagine it is with `curl_mime_data_cb` and there is a problem with the seek/read callback. Just a guess...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569729719/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569744129","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569744129","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569744129,"node_id":"IC_kwDOAAiu0c6ZKy8B","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T19:56:48Z","updated_at":"2025-01-03T19:57:42Z","body":"> I don't think you reproduced the initial error, which has code 26 (caused by a premature EOF).\r\n\r\nYes I do. Try the last code snippet I show you here a few comments up and you should see a 26.\r\n\r\n> Since we do not know how the parts data are initilalized\r\n\r\nMy example reproduces it and we know how they are initialized!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569744129/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569746046","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569746046","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569746046,"node_id":"IC_kwDOAAiu0c6ZKzZ-","user":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T19:58:34Z","updated_at":"2025-01-03T19:58:34Z","body":"> Yes I do. Try the last code I show you here and you should see a 26.\r\n\r\nSorry, I did not realized code erroring 43 was not the one listed.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569746046/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569746611","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569746611","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569746611,"node_id":"IC_kwDOAAiu0c6ZKziz","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T19:59:11Z","updated_at":"2025-01-03T19:59:11Z","body":"Nah, that was a bit unclear on my behalf. My first one was not doing the same thing, the second one does.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569746611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569749123","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569749123","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569749123,"node_id":"IC_kwDOAAiu0c6ZK0KD","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T20:01:34Z","updated_at":"2025-01-03T20:01:34Z","body":"My code example can also, exactly as @Qriist mentioned, be modified so that the first transfer is skipped and then magically the second transfer works (which then is the only transfer of course). Indicating that it is the transfer itself and use of the mime data that somehow makes the second use of it break.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569749123/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15810592012,"node_id":"MEE_lADOAAiu0c6kl0n6zwAAAAOuYn0M","url":"https://api.github.com/repos/curl/curl/issues/events/15810592012","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-01-03T20:01:36Z","performed_via_github_app":null},{"id":15810592021,"node_id":"SE_lADOAAiu0c6kl0n6zwAAAAOuYn0V","url":"https://api.github.com/repos/curl/curl/issues/events/15810592021","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-01-03T20:01:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569751867","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569751867","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569751867,"node_id":"IC_kwDOAAiu0c6ZK007","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T20:04:01Z","updated_at":"2025-01-03T20:04:01Z","body":"Here's a third version of [mime-15842.c](https://github.com/user-attachments/files/18303401/mime-15842.c.txt) that also has a debug callback to display the sent formpost data.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569751867/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569753493","html_url":"https://github.com/curl/curl/issues/15842#issuecomment-2569753493","issue_url":"https://api.github.com/repos/curl/curl/issues/15842","id":2569753493,"node_id":"IC_kwDOAAiu0c6ZK1OV","user":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-03T20:05:40Z","updated_at":"2025-01-03T20:06:18Z","body":"> Yes, I'll get back. Just need some time to get to the bottom of this while juggling some other things at the same time.\r\n\r\nNo rush at all! :)\r\n\r\n\r\n> Next, I don't think you reproduced the initial error, which has code 26 (caused by a premature EOF). Since we do not know how the parts data are initilalized, I can imagine it is with `curl_mime_data_cb` and there is a problem with the seek/read callback. Just a guess...\r\n\r\nNo, I was definitely using the non-callback version, `curl_mime_data()`.\r\n\r\nThat said, I just tested `curl_mime_filedata()`. It reported the same issue. \r\n\r\nOn a lark I also tried without adding _any_ data to mime1 and it, too, failed.\r\n\r\nLiterally just: init mime1 -> perform -> init mime2 -> subparts -> perform returns 26\r\n\r\nOne thing I noticed was that the easy handle error buffer string is reporting seemingly very high buffer sizes compared to the data passed. My error handler I posted above reported 226/426 bytes read, when I passed 26 total bytes (13 each for title/data), and the 168 byte binary file I attempted just now reported 316/766 bytes read. (The size discrepency could just be encoding, though.)\r\n\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2569753493/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Qriist","id":26832022,"node_id":"MDQ6VXNlcjI2ODMyMDIy","avatar_url":"https://avatars.githubusercontent.com/u/26832022?v=4","gravatar_id":"","url":"https://api.github.com/users/Qriist","html_url":"https://github.com/Qriist","followers_url":"https://api.github.com/users/Qriist/followers","following_url":"https://api.github.com/users/Qriist/following{/other_user}","gists_url":"https://api.github.com/users/Qriist/gists{/gist_id}","starred_url":"https://api.github.com/users/Qriist/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Qriist/subscriptions","organizations_url":"https://api.github.com/users/Qriist/orgs","repos_url":"https://api.github.com/users/Qriist/repos","events_url":"https://api.github.com/users/Qriist/events{/privacy}","received_events_url":"https://api.github.com/users/Qriist/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15811872181,"node_id":"REFE_lADOAAiu0c6kl0n6zwAAAAOudgW1","url":"https://api.github.com/repos/curl/curl/issues/events/15811872181","actor":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"04b7ed6ea7026ca67f3ba2932b5b3410ef41de56","commit_url":"https://api.github.com/repos/monnerat/curl/commits/04b7ed6ea7026ca67f3ba2932b5b3410ef41de56","created_at":"2025-01-04T00:53:16Z","performed_via_github_app":null},{"id":15811876690,"node_id":"REFE_lADOAAiu0c6kl0n6zwAAAAOudhdS","url":"https://api.github.com/repos/curl/curl/issues/events/15811876690","actor":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"58724a2672e69fac5d58e61194f6cd0271370637","commit_url":"https://api.github.com/repos/monnerat/curl/commits/58724a2672e69fac5d58e61194f6cd0271370637","created_at":"2025-01-04T00:55:28Z","performed_via_github_app":null},{"id":15811884007,"node_id":"REFE_lADOAAiu0c6kl0n6zwAAAAOudjPn","url":"https://api.github.com/repos/curl/curl/issues/events/15811884007","actor":{"login":"monnerat","id":227821,"node_id":"MDQ6VXNlcjIyNzgyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/227821?v=4","gravatar_id":"","url":"https://api.github.com/users/monnerat","html_url":"https://github.com/monnerat","followers_url":"https://api.github.com/users/monnerat/followers","following_url":"https://api.github.com/users/monnerat/following{/other_user}","gists_url":"https://api.github.com/users/monnerat/gists{/gist_id}","starred_url":"https://api.github.com/users/monnerat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/monnerat/subscriptions","organizations_url":"https://api.github.com/users/monnerat/orgs","repos_url":"https://api.github.com/users/monnerat/repos","events_url":"https://api.github.com/users/monnerat/events{/privacy}","received_events_url":"https://api.github.com/users/monnerat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b7a9dae47160db8e517a589503370e1dea3252ab","commit_url":"https://api.github.com/repos/monnerat/curl/commits/b7a9dae47160db8e517a589503370e1dea3252ab","created_at":"2025-01-04T00:58:27Z","performed_via_github_app":null}]