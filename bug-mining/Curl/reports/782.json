{"url":"https://api.github.com/repos/curl/curl/issues/18320","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/18320/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/18320/comments","events_url":"https://api.github.com/repos/curl/curl/issues/18320/events","html_url":"https://github.com/curl/curl/issues/18320","id":3336651134,"node_id":"I_kwDOAAiu0c7G4UF-","number":18320,"title":"Unable to build curl with openssl-quic","user":{"login":"devkdas","id":92445174,"node_id":"U_kgDOBYKZ9g","avatar_url":"https://avatars.githubusercontent.com/u/92445174?v=4","gravatar_id":"","url":"https://api.github.com/users/devkdas","html_url":"https://github.com/devkdas","followers_url":"https://api.github.com/users/devkdas/followers","following_url":"https://api.github.com/users/devkdas/following{/other_user}","gists_url":"https://api.github.com/users/devkdas/gists{/gist_id}","starred_url":"https://api.github.com/users/devkdas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/devkdas/subscriptions","organizations_url":"https://api.github.com/users/devkdas/orgs","repos_url":"https://api.github.com/users/devkdas/repos","events_url":"https://api.github.com/users/devkdas/events{/privacy}","received_events_url":"https://api.github.com/users/devkdas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null},{"id":1141438010,"node_id":"MDU6TGFiZWwxMTQxNDM4MDEw","url":"https://api.github.com/repos/curl/curl/labels/HTTP/3","name":"HTTP/3","color":"97fceb","default":false,"description":"h3 or quic related"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2025-08-20T05:48:06Z","updated_at":"2025-08-20T09:33:00Z","closed_at":"2025-08-20T09:31:56Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### I did this\n```\nClone latest curl\nautoreconf -fi\nLDFLAGS=\"-Wl,-rpath,/var/local/openssl/lib\" ./configure --with-openssl=/var/local/openssl --with-openssl-quic --with-nghttp3=/var/local/nghttp3\nmake\n```\n```\nroot@ubuntu:/src/curl_openssl# git log\ncommit faa2db202b9b90a157f1204d1e028b377042841b (HEAD -> master, origin/master, origin/HEAD)\nAuthor: Stefan Eissing <stefan@eissing.org>\nDate:   Tue Aug 19 15:46:34 2025 +0200\n\n    ares: handle channel being destroyed early\n\n    We are destroying the ares channel already when we shutdown\n    resolving. Querying the pollset afterwards is still happening,\n    especially in event based processing and needs to work in the\n    absence of a channel.\n```\n### I expected the following\n```\nExpected it to work.\n```\n### curl/libcurl version\n```\nroot@ubuntu:/src/curl_openssl# curl -V\ncurl 7.81.0 (x86_64-pc-linux-gnu) libcurl/7.81.0 OpenSSL/3.0.2 zlib/1.2.11 brotli/1.1.0 zstd/1.4.8 libidn2/2.3.2 libpsl/0.21.0 (+libidn2/2.3.2) libssh/0.9.6/openssl/zlib nghttp2/1.43.0 librtmp/2.3 OpenLDAP/2.5.19\nRelease-Date: 2022-01-05\nProtocols: dict file ftp ftps gopher gophers http https imap imaps ldap ldaps mqtt pop3 pop3s rtmp rtsp scp sftp smb smbs smtp smtps telnet tftp\nFeatures: alt-svc AsynchDNS brotli GSS-API HSTS HTTP2 HTTPS-proxy IDN IPv6 Kerberos Largefile libz NTLM NTLM_WB PSL SPNEGO SSL TLS-SRP UnixSockets zstd\nroot@ubuntu:/src/curl_openssl#\n```\n### operating system\n```\nroot@ubuntu:/src/curl_openssl# uname -a\nLinux ubuntu 5.15.0-151-generic #161-Ubuntu SMP Tue Jul 22 14:25:40 UTC 2025 x86_64 x86_64 x86_64 GNU/Linux\nroot@ubuntu:/src/curl_openssl#\n```","closed_by":{"login":"vszakats","id":1446897,"node_id":"MDQ6VXNlcjE0NDY4OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1446897?v=4","gravatar_id":"","url":"https://api.github.com/users/vszakats","html_url":"https://github.com/vszakats","followers_url":"https://api.github.com/users/vszakats/followers","following_url":"https://api.github.com/users/vszakats/following{/other_user}","gists_url":"https://api.github.com/users/vszakats/gists{/gist_id}","starred_url":"https://api.github.com/users/vszakats/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vszakats/subscriptions","organizations_url":"https://api.github.com/users/vszakats/orgs","repos_url":"https://api.github.com/users/vszakats/repos","events_url":"https://api.github.com/users/vszakats/events{/privacy}","received_events_url":"https://api.github.com/users/vszakats/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/curl/curl/issues/18320/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/18320/timeline","performed_via_github_app":null,"state_reason":"completed"}