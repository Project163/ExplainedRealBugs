[{"actor":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T12:19:58Z","updated_at":"2024-03-31T12:19:58Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407","repository_url":"https://api.github.com/repos/rustls/rustls-ffi","labels_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/labels{/name}","comments_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/comments","events_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/events","html_url":"https://github.com/rustls/rustls-ffi/issues/407","id":2216943127,"node_id":"I_kwDOExNEQM6EI94X","number":407,"title":"cURL built with rustls-ffi 0.10.0; 0.12.1 unable to talk to Git https endpoints","user":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2024-03-31T12:19:57Z","updated_at":"2024-03-31T20:52:45Z","closed_at":"2024-03-31T15:15:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":320029760,"node_id":"MDEwOlJlcG9zaXRvcnkzMjAwMjk3NjA=","name":"rustls-ffi","full_name":"rustls/rustls-ffi","private":false,"owner":{"login":"rustls","id":65125397,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1MTI1Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/65125397?v=4","gravatar_id":"","url":"https://api.github.com/users/rustls","html_url":"https://github.com/rustls","followers_url":"https://api.github.com/users/rustls/followers","following_url":"https://api.github.com/users/rustls/following{/other_user}","gists_url":"https://api.github.com/users/rustls/gists{/gist_id}","starred_url":"https://api.github.com/users/rustls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rustls/subscriptions","organizations_url":"https://api.github.com/users/rustls/orgs","repos_url":"https://api.github.com/users/rustls/repos","events_url":"https://api.github.com/users/rustls/events{/privacy}","received_events_url":"https://api.github.com/users/rustls/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rustls/rustls-ffi","description":"Use Rustls from any language","fork":false,"url":"https://api.github.com/repos/rustls/rustls-ffi","forks_url":"https://api.github.com/repos/rustls/rustls-ffi/forks","keys_url":"https://api.github.com/repos/rustls/rustls-ffi/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rustls/rustls-ffi/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rustls/rustls-ffi/teams","hooks_url":"https://api.github.com/repos/rustls/rustls-ffi/hooks","issue_events_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/events{/number}","events_url":"https://api.github.com/repos/rustls/rustls-ffi/events","assignees_url":"https://api.github.com/repos/rustls/rustls-ffi/assignees{/user}","branches_url":"https://api.github.com/repos/rustls/rustls-ffi/branches{/branch}","tags_url":"https://api.github.com/repos/rustls/rustls-ffi/tags","blobs_url":"https://api.github.com/repos/rustls/rustls-ffi/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rustls/rustls-ffi/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rustls/rustls-ffi/git/refs{/sha}","trees_url":"https://api.github.com/repos/rustls/rustls-ffi/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rustls/rustls-ffi/statuses/{sha}","languages_url":"https://api.github.com/repos/rustls/rustls-ffi/languages","stargazers_url":"https://api.github.com/repos/rustls/rustls-ffi/stargazers","contributors_url":"https://api.github.com/repos/rustls/rustls-ffi/contributors","subscribers_url":"https://api.github.com/repos/rustls/rustls-ffi/subscribers","subscription_url":"https://api.github.com/repos/rustls/rustls-ffi/subscription","commits_url":"https://api.github.com/repos/rustls/rustls-ffi/commits{/sha}","git_commits_url":"https://api.github.com/repos/rustls/rustls-ffi/git/commits{/sha}","comments_url":"https://api.github.com/repos/rustls/rustls-ffi/comments{/number}","issue_comment_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/comments{/number}","contents_url":"https://api.github.com/repos/rustls/rustls-ffi/contents/{+path}","compare_url":"https://api.github.com/repos/rustls/rustls-ffi/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rustls/rustls-ffi/merges","archive_url":"https://api.github.com/repos/rustls/rustls-ffi/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rustls/rustls-ffi/downloads","issues_url":"https://api.github.com/repos/rustls/rustls-ffi/issues{/number}","pulls_url":"https://api.github.com/repos/rustls/rustls-ffi/pulls{/number}","milestones_url":"https://api.github.com/repos/rustls/rustls-ffi/milestones{/number}","notifications_url":"https://api.github.com/repos/rustls/rustls-ffi/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rustls/rustls-ffi/labels{/name}","releases_url":"https://api.github.com/repos/rustls/rustls-ffi/releases{/id}","deployments_url":"https://api.github.com/repos/rustls/rustls-ffi/deployments","created_at":"2020-12-09T17:26:05Z","updated_at":"2025-10-27T15:20:04Z","pushed_at":"2025-10-27T15:20:01Z","git_url":"git://github.com/rustls/rustls-ffi.git","ssh_url":"git@github.com:rustls/rustls-ffi.git","clone_url":"https://github.com/rustls/rustls-ffi.git","svn_url":"https://github.com/rustls/rustls-ffi","homepage":"","size":1840,"stargazers_count":154,"watchers_count":154,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":36,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":28,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cryptography","ffi","rust","ssl","tls"],"visibility":"public","forks":36,"open_issues":28,"watchers":154,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\r\n\r\nI have used GitHub as an example here, but GitLab and Bitbucket also failed in the same way.\r\n\r\n```\r\n(chroot) monolith /tmp # GIT_TRACE_CURL=1 GIT_CURL_VERBOSE=1 git clone https://github.com/kangie/kangie-tools.git\r\nCloning into 'kangie-tools'...\r\n05:45:18.595988 http.c:843              == Info: Couldn't find host github.com in the .netrc file; using defaults\r\n05:45:18.596557 http.c:843              == Info: Host github.com:443 was resolved.\r\n05:45:18.596568 http.c:843              == Info: IPv6: (none)\r\n05:45:18.596572 http.c:843              == Info: IPv4: 20.248.137.48\r\n05:45:18.596588 http.c:843              == Info:   Trying 20.248.137.48:443...\r\n05:45:18.647927 http.c:843              == Info: Connected to github.com (20.248.137.48) port 443\r\n05:45:18.647980 http.c:843              == Info: ALPN: curl offers http/1.1\r\n05:45:18.648113 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n05:45:18.648156 http.c:843              == Info: Curl_socket_check: reading would block\r\n05:45:18.703955 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n05:45:18.704143 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n05:45:18.704183 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n05:45:18.704281 http.c:843              == Info: rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\n05:45:18.704296 http.c:843              == Info: Closing connection\r\nfatal: unable to access 'https://github.com/kangie/kangie-tools.git/': rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\n(chroot) monolith /tmp # curl --version\r\ncurl 8.6.0 (x86_64-gentoo-linux-musl) libcurl/8.6.0 rustls-ffi/0.10.0/rustls/0.21.0 zlib/1.3 c-ares/1.25.0 libpsl/0.21.5\r\nRelease-Date: 2024-01-31\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets\r\n\r\n\r\nkangie@monolith /data/development/temp/curl (master) $ GIT_TRACE_CURL=1 GIT_CURL_VERBOSE=1 git fetch upstream\r\n11:07:17.509634 http.c:843              == Info: Couldn't find host github.com in the .netrc file; using defaults\r\n11:07:17.509961 http.c:843              == Info: Host github.com:443 was resolved.\r\n11:07:17.509967 http.c:843              == Info: IPv6: (none)\r\n11:07:17.509970 http.c:843              == Info: IPv4: 20.248.137.48\r\n11:07:17.509981 http.c:843              == Info:   Trying 20.248.137.48:443...\r\n11:07:17.531516 http.c:843              == Info: Connected to github.com (20.248.137.48) port 443\r\n11:07:17.531543 http.c:843              == Info: ALPN: curl offers h2,http/1.1\r\n11:07:17.531674 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n11:07:17.531691 http.c:843              == Info: Curl_socket_check: reading would block\r\n11:07:17.553442 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n11:07:17.553547 http.c:843              == Info: rustls_connection wants us to write_tls.\r\n11:07:17.553565 http.c:843              == Info: Curl_socket_check: reading would block\r\n11:07:17.553734 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n11:07:17.553744 http.c:843              == Info: Curl_socket_check: reading would block\r\n11:07:17.553866 http.c:843              == Info: rustls_connection wants us to read_tls.\r\n11:07:17.553885 http.c:843              == Info: rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\n11:07:17.553894 http.c:843              == Info: Closing connection\r\nfatal: unable to access 'https://github.com/curl/curl.git/': rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\nkangie@monolith /data/development/temp/curl (master) $ curl --version                       \r\ncurl 8.7.1 (x86_64-pc-linux-gnu) libcurl/8.7.1 rustls-ffi/0.12.1/rustls/0.22 zlib/1.3.1 zstd/1.5.5 c-ares/1.27.0 libpsl/0.21.5 nghttp2/1.60.0\r\nRelease-Date: 2024-03-27\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTP2 HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets zstd\r\n```\r\n\r\n### I expected the following\r\n\r\nA successful git https request.\r\n\r\n### curl/libcurl version\r\n\r\ncurl 8.7.1 (x86_64-pc-linux-gnu) libcurl/8.7.1 rustls-ffi/0.12.1/rustls/0.22 zlib/1.3.1 zstd/1.5.5 c-ares/1.27.0 libpsl/0.21.5 nghttp2/1.60.0\r\nRelease-Date: 2024-03-27\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTP2 HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets zstd\r\n\r\ncurl 8.6.0 (x86_64-gentoo-linux-musl) libcurl/8.6.0 rustls-ffi/0.10.0/rustls/0.21.0 zlib/1.3 c-ares/1.25.0 libpsl/0.21.5\r\nRelease-Date: 2024-01-31\r\nProtocols: dict file ftp ftps http https imap imaps ipfs ipns mqtt pop3 pop3s rtsp smtp smtps tftp\r\nFeatures: alt-svc AsynchDNS HSTS HTTPS-proxy IPv6 Largefile libz PSL SSL threadsafe UnixSockets\r\n\r\n### operating system\r\n\r\nGentoo Linux\r\n\r\n### configure opts\r\n\r\n```\r\n./configure --prefix=/usr --build=x86_64-gentoo-linux-musl --host=x86_64-gentoo-linux-musl --mandir=/usr/share/man --infodir=/usr/share/info --datadir=/usr/share --sysconfdir=/etc --localstatedir=/var/lib --datarootdir=/usr/share --disable-dependency-tracking --disable-silent-rules --disable-static --docdir=/usr/share/doc/curl-8.7.1 --htmldir=/usr/share/doc/curl-8.7.1/html --with-sysroot=/ --libdir=/usr/lib --without-ca-fallback --with-ca-bundle=/etc/ssl/certs/ca-certificates.crt --without-gnutls --without-mbedtls --without-rustls --with-rustls --with-default-ssl-backend=rustls --enable-alt-svc --enable-basic-auth --enable-bearer-auth --enable-digest-auth --enable-kerberos-auth --enable-negotiate-auth --enable-aws --enable-dict --disable-ech --enable-file --enable-ftp --disable-gopher --enable-hsts --enable-http --enable-imap --disable-ldap --disable-ldaps --enable-ntlm --disable-ntlm-wb --enable-pop3 --enable-rt --enable-rtsp --disable-smb --without-libssh2 --enable-smtp --disable-telnet --enable-tftp --enable-tls-srp --enable-ares --enable-cookies --enable-dateparse --enable-dnsshuffle --enable-doh --enable-symbol-hiding --enable-http-auth --enable-ipv6 --enable-largefile --enable-manual --enable-mime --enable-netrc --enable-progress-meter --enable-proxy --enable-socketpair --disable-sspi --disable-static --enable-pthreads --enable-threaded-resolver --disable-versioned-symbols --without-amissl --without-bearssl --without-brotli --with-fish-functions-dir=/usr/share/fish/vendor_completions.d --with-nghttp2 --without-hyper --without-libidn2 --without-gssapi --without-libgsasl --with-libpsl --without-msh3 --without-nghttp3 --without-ngtcp2 --without-quiche --without-librtmp --without-schannel --without-secure-transport --without-test-caddy --without-test-httpd --without-test-nghttpx --disable-websockets --without-winidn --without-wolfssl --with-zlib --without-zstd --with-zsh-functions-dir=/usr/share/zsh/site-functions\r\n\r\n```\r\n\r\n### See Also:\r\n- https://bugs.gentoo.org/928236\r\n- cURL issue: curl/curl#13248","reactions":{"url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/407/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"id":12303343942,"node_id":"SE_lADOAAiu0c6EI9hvzwAAAALdViFG","url":"https://api.github.com/repos/curl/curl/issues/events/12303343942","actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T12:41:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028748769","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028748769","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028748769,"node_id":"IC_kwDOAAiu0c547D_h","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T13:45:29Z","updated_at":"2024-03-31T13:45:29Z","body":"/cc @jsha ideas?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028748769/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12303690987,"node_id":"MEE_lADOAAiu0c6EI9hvzwAAAALdW2zr","url":"https://api.github.com/repos/curl/curl/issues/events/12303690987","actor":{"login":"jsha","id":220205,"node_id":"MDQ6VXNlcjIyMDIwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/220205?v=4","gravatar_id":"","url":"https://api.github.com/users/jsha","html_url":"https://github.com/jsha","followers_url":"https://api.github.com/users/jsha/followers","following_url":"https://api.github.com/users/jsha/following{/other_user}","gists_url":"https://api.github.com/users/jsha/gists{/gist_id}","starred_url":"https://api.github.com/users/jsha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsha/subscriptions","organizations_url":"https://api.github.com/users/jsha/orgs","repos_url":"https://api.github.com/users/jsha/repos","events_url":"https://api.github.com/users/jsha/events{/privacy}","received_events_url":"https://api.github.com/users/jsha/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-31T13:45:30Z","performed_via_github_app":null},{"id":12303690988,"node_id":"SE_lADOAAiu0c6EI9hvzwAAAALdW2zs","url":"https://api.github.com/repos/curl/curl/issues/events/12303690988","actor":{"login":"jsha","id":220205,"node_id":"MDQ6VXNlcjIyMDIwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/220205?v=4","gravatar_id":"","url":"https://api.github.com/users/jsha","html_url":"https://github.com/jsha","followers_url":"https://api.github.com/users/jsha/followers","following_url":"https://api.github.com/users/jsha/following{/other_user}","gists_url":"https://api.github.com/users/jsha/gists{/gist_id}","starred_url":"https://api.github.com/users/jsha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jsha/subscriptions","organizations_url":"https://api.github.com/users/jsha/orgs","repos_url":"https://api.github.com/users/jsha/repos","events_url":"https://api.github.com/users/jsha/events{/privacy}","received_events_url":"https://api.github.com/users/jsha/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T13:45:30Z","performed_via_github_app":null},{"id":12303691223,"node_id":"LE_lADOAAiu0c6EI9hvzwAAAALdW23X","url":"https://api.github.com/repos/curl/curl/issues/events/12303691223","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-03-31T13:45:38Z","label":{"name":"TLS","color":"bfdadc"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028749695","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028749695","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028749695,"node_id":"IC_kwDOAAiu0c547EN_","user":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T13:47:04Z","updated_at":"2024-03-31T13:48:13Z","body":"@bagder We're debugging this over in https://github.com/rustls/rustls-ffi/issues/407\r\n\r\nMy [initial findings](https://github.com/rustls/rustls-ffi/issues/407#issuecomment-2028742034) seem to point to it being an issue specific to dynamically linking librustls w/ curl.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028749695/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12303697087,"node_id":"MEE_lADOAAiu0c6EI9hvzwAAAALdW4S_","url":"https://api.github.com/repos/curl/curl/issues/events/12303697087","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-31T13:47:06Z","performed_via_github_app":null},{"id":12303697089,"node_id":"SE_lADOAAiu0c6EI9hvzwAAAALdW4TB","url":"https://api.github.com/repos/curl/curl/issues/events/12303697089","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T13:47:06Z","performed_via_github_app":null},{"actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T15:14:33Z","updated_at":"2024-03-31T15:14:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/13200","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13200/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13200/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13200/events","html_url":"https://github.com/curl/curl/issues/13200","id":2210596743,"node_id":"I_kwDOAAiu0c6DwweH","number":13200,"title":"Regression in rustls pkg-config detection","user":{"login":"kpcyrd","id":7763184,"node_id":"MDQ6VXNlcjc3NjMxODQ=","avatar_url":"https://avatars.githubusercontent.com/u/7763184?v=4","gravatar_id":"","url":"https://api.github.com/users/kpcyrd","html_url":"https://github.com/kpcyrd","followers_url":"https://api.github.com/users/kpcyrd/followers","following_url":"https://api.github.com/users/kpcyrd/following{/other_user}","gists_url":"https://api.github.com/users/kpcyrd/gists{/gist_id}","starred_url":"https://api.github.com/users/kpcyrd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpcyrd/subscriptions","organizations_url":"https://api.github.com/users/kpcyrd/orgs","repos_url":"https://api.github.com/users/kpcyrd/repos","events_url":"https://api.github.com/users/kpcyrd/events{/privacy}","received_events_url":"https://api.github.com/users/kpcyrd/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null},{"id":184118197,"node_id":"MDU6TGFiZWwxODQxMTgxOTc=","url":"https://api.github.com/repos/curl/curl/labels/regression","name":"regression","color":"33aa3f","default":false,"description":null},{"id":184118221,"node_id":"MDU6TGFiZWwxODQxMTgyMjE=","url":"https://api.github.com/repos/curl/curl/labels/TLS","name":"TLS","color":"bfdadc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2024-03-27T11:49:43Z","updated_at":"2024-04-10T05:34:31Z","closed_at":"2024-03-30T21:42:29Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### I did this\n\nI tried to compile the latest curl release with the rustls TLS backend.\r\n\r\nThis is the error I get during configure:\r\n\r\n```\r\n[...]\r\nchecking for mit-krb5-gssapi options with pkg-config... found\r\nchecking for gss.h... no\r\nchecking for gssapi/gssapi.h... yes\r\nchecking for gssapi/gssapi_generic.h... yes\r\nchecking for gssapi/gssapi_krb5.h... yes\r\nchecking if GSS-API headers declare GSS_C_NT_HOSTBASED_SERVICE... yes\r\nchecking for pkg-config... (cached) /usr/bin/pkg-config\r\nchecking for mit-krb5-gssapi options with pkg-config... found\r\nchecking if we can link against GSS-API library... yes\r\nchecking whether to enable Windows native SSL/TLS... no\r\nchecking whether to enable Secure Transport... no\r\nchecking whether to enable Amiga native SSL/TLS (AmiSSL v5)... no\r\nchecking for pkg-config... (cached) /usr/bin/pkg-config\r\nchecking for rustls options with pkg-config... found\r\nconfigure: pkg-config: SSL_LIBS: \"-lrustls\"\r\nconfigure: pkg-config: SSL_LDFLAGS: \"\"\r\nconfigure: pkg-config: SSL_CPPFLAGS: \"\"\r\nconfigure: detected rustls\r\nconfigure: error: TLS not detected, you will not be able to use HTTPS, FTPS, NTLM and more.\r\nUse --with-openssl, --with-gnutls, --with-wolfssl, --with-mbedtls, --with-schannel, --with-secure-transport, --with-amissl, --with-bearssl or --with-rustls to address this.\r\n```\r\n\r\npkg-config is correctly setup for librustls:\r\n\r\n```\r\n% pacman -Ql librustls\r\nlibrustls /usr/\r\nlibrustls /usr/include/\r\nlibrustls /usr/include/rustls.h\r\nlibrustls /usr/lib/\r\nlibrustls /usr/lib/librustls.so\r\nlibrustls /usr/lib/librustls.so.0.12.1\r\nlibrustls /usr/lib/pkgconfig/\r\nlibrustls /usr/lib/pkgconfig/rustls.pc\r\nlibrustls /usr/share/\r\nlibrustls /usr/share/licenses/\r\nlibrustls /usr/share/licenses/librustls/\r\nlibrustls /usr/share/licenses/librustls/LICENSE-APACHE\r\nlibrustls /usr/share/licenses/librustls/LICENSE-ISC\r\nlibrustls /usr/share/licenses/librustls/LICENSE-MIT\r\n```\r\n\r\nThe configure options used are:\r\n\r\n```\r\n--prefix='/usr'\r\n--mandir='/usr/share/man'\r\n--disable-ldap\r\n--disable-ldaps\r\n--disable-manual\r\n--enable-ipv6\r\n--enable-threaded-resolver\r\n--with-gssapi\r\n--with-libssh2\r\n--with-random='/dev/urandom'\r\n--with-ca-bundle='/etc/ssl/certs/ca-certificates.crt'\r\n--with-rustls\r\n--without-openssl\r\n--disable-shared\r\n```\r\n\r\nI noticed this is due to #13179, reverting 647e86a3efe1eea7a2a456c009cfe1eb55fe48eb fixes the build.\r\n\r\n**Full configure output:**\r\n\r\n<details>\r\n\r\n```\r\nchecking whether to enable maintainer-specific portions of Makefiles... no\r\nchecking whether make supports nested variables... yes\r\nchecking whether to enable debug build options... no\r\nchecking whether to enable compiler optimizer... (assumed) yes\r\nchecking whether to enable strict compiler warnings... no\r\nchecking whether to enable compiler warnings as errors... no\r\nchecking whether to enable curl debug memory tracking... no\r\nchecking whether to enable hiding of library internal symbols... yes\r\nchecking whether to enable c-ares for DNS lookups... no\r\nchecking whether to disable dependency on -lrt... (assumed no)\r\nchecking whether to enable ECH support... no\r\nchecking for path separator... :\r\nchecking for sed... /usr/bin/sed\r\nchecking for grep... /usr/bin/grep\r\nchecking that grep -E works... yes\r\nchecking for ar... /usr/bin/ar\r\nchecking for a BSD-compatible install... /usr/bin/install -c\r\nchecking for gcc... gcc\r\nchecking whether the C compiler works... yes\r\nchecking for C compiler default output file name... a.out\r\nchecking for suffix of executables... \r\nchecking whether we are cross compiling... no\r\nchecking for suffix of object files... o\r\nchecking whether the compiler supports GNU C... yes\r\nchecking whether gcc accepts -g... yes\r\nchecking for gcc option to enable C11 features... none needed\r\nchecking whether gcc understands -c and -o together... yes\r\nchecking how to run the C preprocessor... gcc -E\r\nchecking for stdio.h... yes\r\nchecking for stdlib.h... yes\r\nchecking for string.h... yes\r\nchecking for inttypes.h... yes\r\nchecking for stdint.h... yes\r\nchecking for strings.h... yes\r\nchecking for sys/stat.h... yes\r\nchecking for sys/types.h... yes\r\nchecking for unistd.h... yes\r\nchecking for stdatomic.h... yes\r\nchecking if _Atomic is available... yes\r\nchecking for a sed that does not truncate output... (cached) /usr/bin/sed\r\nchecking for code coverage support... no\r\nchecking whether build environment is sane... yes\r\nchecking for a race-free mkdir -p... /usr/bin/mkdir -p\r\nchecking for gawk... gawk\r\nchecking whether make sets $(MAKE)... yes\r\nchecking whether make supports the include directive... yes (GNU style)\r\nchecking dependency style of gcc... gcc3\r\nchecking curl version... 8.7.1\r\nchecking for httpd... no\r\nchecking for apache2... no\r\nchecking for apachectl... no\r\nchecking for apxs... no\r\nconfigure: httpd/apache2 not in PATH, http tests disabled\r\nconfigure: apxs not in PATH, http tests disabled\r\nchecking for nghttpx... no\r\nchecking for caddy... no\r\nchecking build system type... x86_64-pc-linux-gnu\r\nchecking host system type... x86_64-pc-linux-gnu\r\nchecking for egrep -e... /usr/bin/grep -E\r\nchecking if OS is AIX (to define _ALL_SOURCE)... no\r\nchecking if _THREAD_SAFE is already defined... no\r\nchecking if _THREAD_SAFE is actually needed... no\r\nchecking if _THREAD_SAFE is onwards defined... no\r\nchecking if _REENTRANT is already defined... no\r\nchecking if _REENTRANT is actually needed... no\r\nchecking if _REENTRANT is onwards defined... no\r\nchecking for gcc option to enable large file support... none needed\r\nchecking how to print strings... printf\r\nchecking for a sed that does not truncate output... (cached) /usr/bin/sed\r\nchecking for grep that handles long lines and -e... (cached) /usr/bin/grep\r\nchecking for egrep... /usr/bin/grep -E\r\nchecking for fgrep... /usr/bin/grep -F\r\nchecking for ld used by gcc... /usr/bin/ld\r\nchecking if the linker (/usr/bin/ld) is GNU ld... yes\r\nchecking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B\r\nchecking the name lister (/usr/bin/nm -B) interface... BSD nm\r\nchecking whether ln -s works... yes\r\nchecking the maximum length of command line arguments... 1572864\r\nchecking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop\r\nchecking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop\r\nchecking for /usr/bin/ld option to reload object files... -r\r\nchecking for file... file\r\nchecking for objdump... objdump\r\nchecking how to recognize dependent libraries... pass_all\r\nchecking for dlltool... no\r\nchecking how to associate runtime and link libraries... printf %s\\n\r\nchecking for archiver @FILE support... @\r\nchecking for strip... strip\r\nchecking for ranlib... ranlib\r\nchecking command to parse /usr/bin/nm -B output from gcc object... ok\r\nchecking for sysroot... no\r\nchecking for a working dd... /usr/bin/dd\r\nchecking how to truncate binary pipes... /usr/bin/dd bs=4096 count=1\r\nchecking for mt... no\r\nchecking if : is a manifest tool... no\r\nchecking for dlfcn.h... yes\r\nchecking for objdir... .libs\r\nchecking if gcc supports -fno-rtti -fno-exceptions... no\r\nchecking for gcc option to produce PIC... -fPIC -DPIC\r\nchecking if gcc PIC flag -fPIC -DPIC works... yes\r\nchecking if gcc static flag -static works... yes\r\nchecking if gcc supports -c -o file.o... yes\r\nchecking if gcc supports -c -o file.o... (cached) yes\r\nchecking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes\r\nchecking dynamic linker characteristics... GNU/Linux ld.so\r\nchecking how to hardcode library paths into programs... immediate\r\nchecking whether stripping libraries is possible... yes\r\nchecking if libtool supports shared libraries... yes\r\nchecking whether to build shared libraries... no\r\nchecking whether to build static libraries... yes\r\nchecking whether to build shared libraries with -version-info... yes\r\nchecking whether to build shared libraries with -no-undefined... no\r\nchecking whether to build shared libraries with -mimpure-text... no\r\nchecking whether to build shared libraries with PIC... yes\r\nchecking whether to build static libraries with PIC... yes\r\nchecking whether to build shared libraries only... no\r\nchecking whether to build static libraries only... yes\r\nchecking for windres... no\r\nchecking for inline... inline\r\nchecking if cpp -P is needed... yes\r\nchecking if cpp -P works... yes\r\nchecking if compiler is DEC/Compaq/HP C... no\r\nchecking if compiler is HP-UX C... no\r\nchecking if compiler is IBM C... no\r\nchecking if compiler is Intel C... no\r\nchecking if compiler is clang... no\r\nchecking if compiler is GNU C... yes\r\nchecking compiler version... gcc '1302' (raw: '13.2.1')\r\nchecking if compiler is SGI MIPSpro C... no\r\nchecking if compiler is SGI MIPS C... no\r\nchecking if compiler is SunPro C... no\r\nchecking if compiler is Tiny C... no\r\nchecking whether build target is a native Windows one... no\r\nchecking if compiler accepts some basic options... yes\r\nconfigure: compiler options added: -Werror-implicit-function-declaration \r\nchecking if compiler optimizer assumed setting might be used... no\r\nchecking if compiler accepts strict warning options... yes\r\nconfigure: compiler options added: -Wno-system-headers \r\nchecking if compiler halts on compilation errors... yes\r\nchecking if compiler halts on negative sized arrays... yes\r\nchecking if compiler halts on function prototype mismatch... yes\r\nchecking if compiler supports hiding library internal symbols... yes\r\nchecking whether build target supports WIN32 file API... no\r\nchecking whether build target supports WIN32 crypto API... no\r\nchecking for good-to-use Darwin CFLAGS... no\r\nchecking whether to link macOS CoreFoundation, CoreServices, and SystemConfiguration frameworks... no\r\nchecking to see if the compiler supports __builtin_available()... no\r\nchecking whether to support http... yes\r\nchecking whether to support ftp... yes\r\nchecking whether to support file... yes\r\nchecking whether to support ldap... no\r\nchecking whether to support ldaps... no\r\nchecking whether to support rtsp... yes\r\nchecking whether to support proxies... yes\r\nchecking whether to support dict... yes\r\nchecking whether to support telnet... yes\r\nchecking whether to support tftp... yes\r\nchecking whether to support pop3... yes\r\nchecking whether to support imap... yes\r\nchecking whether to support smb... yes\r\nchecking whether to support smtp... yes\r\nchecking whether to support gopher... yes\r\nchecking whether to support mqtt... no\r\nchecking whether to build documentation... yes\r\nchecking whether to provide built-in manual... no\r\nchecking whether to enable generation of C code... yes\r\nchecking whether to use libgcc... no\r\nchecking if X/Open network library is required... no\r\nchecking for gethostbyname... yes\r\nchecking whether build target is a native Windows one... (cached) no\r\nchecking for proto/bsdsocket.h... no\r\nchecking for connect in libraries... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/time.h... yes\r\nchecking for monotonic clock_gettime... yes\r\nchecking for clock_gettime in libraries... no additional lib required\r\nchecking if monotonic clock_gettime works... yes\r\nchecking for sys/types.h... (cached) yes\r\nchecking for sys/time.h... (cached) yes\r\nchecking for raw monotonic clock_gettime... yes\r\nchecking for pkg-config... /usr/bin/pkg-config\r\nchecking for zlib options with pkg-config... found\r\nchecking for zlib.h... yes\r\nconfigure: found both libz and libz.h header\r\nchecking for BrotliDecoderDecompress in -lbrotlidec... yes\r\nchecking for brotli/decode.h... yes\r\nchecking for ZSTD_createDStream in -lzstd... yes\r\nchecking for zstd.h... yes\r\nchecking whether to enable IPv6... yes\r\nchecking if struct sockaddr_in6 has sin6_scope_id member... yes\r\nchecking if argv can be written to... yes\r\nchecking if GSS-API support is requested... yes\r\nchecking for pkg-config... (cached) /usr/bin/pkg-config\r\nchecking for mit-krb5-gssapi options with pkg-config... found\r\nchecking for gss.h... no\r\nchecking for gssapi/gssapi.h... yes\r\nchecking for gssapi/gssapi_generic.h... yes\r\nchecking for gssapi/gssapi_krb5.h... yes\r\nchecking if GSS-API headers declare GSS_C_NT_HOSTBASED_SERVICE... yes\r\nchecking for pkg-config... (cached) /usr/bin/pkg-config\r\nchecking for mit-krb5-gssapi options with pkg-config... found\r\nchecking if we can link against GSS-API library... yes\r\nchecking whether to enable Windows native SSL/TLS... no\r\nchecking whether to enable Secure Transport... no\r\nchecking whether to enable Amiga native SSL/TLS (AmiSSL v5)... no\r\nchecking for pkg-config... (cached) /usr/bin/pkg-config\r\nchecking for rustls options with pkg-config... found\r\nconfigure: pkg-config: SSL_LIBS: \"-lrustls\"\r\nconfigure: pkg-config: SSL_LDFLAGS: \"\"\r\nconfigure: pkg-config: SSL_CPPFLAGS: \"\"\r\nconfigure: detected rustls\r\nconfigure: error: TLS not detected, you will not be able to use HTTPS, FTPS, NTLM and more.\r\nUse --with-openssl, --with-gnutls, --with-wolfssl, --with-mbedtls, --with-schannel, --with-secure-transport, --with-amissl, --with-bearssl or --with-rustls to address this.\r\n```\r\n\r\n</details>\n\n### I expected the following\n\nThe build passes without reverting any commits.\n\n### curl/libcurl version\n\ncurl 8.7.1\n\n### operating system\n\nArch Linux","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13200/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13200/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028794743","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028794743","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028794743,"node_id":"IC_kwDOAAiu0c547PN3","user":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T15:16:16Z","updated_at":"2024-03-31T15:16:16Z","body":"@bagder Our investigation in https://github.com/rustls/rustls-ffi/issues/407 points to this being a continuation of the problem reported in https://github.com/curl/curl/issues/13200\r\n\r\nI've closed the rustls-ffi issue. I recommend we close this issue as well and consolidate remediation in a re-opened #13200. WDYT?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028794743/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12304045410,"node_id":"MEE_lADOAAiu0c6EI9hvzwAAAALdYNVi","url":"https://api.github.com/repos/curl/curl/issues/events/12304045410","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-31T15:16:17Z","performed_via_github_app":null},{"id":12304045411,"node_id":"SE_lADOAAiu0c6EI9hvzwAAAALdYNVj","url":"https://api.github.com/repos/curl/curl/issues/events/12304045411","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T15:16:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028796583","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028796583","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028796583,"node_id":"IC_kwDOAAiu0c547Pqn","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T15:23:21Z","updated_at":"2024-03-31T15:23:38Z","body":"IMO, we might as well just stick to this issue now as it identifies the current situation.\r\n\r\nIt baffles me how we can break rustls by linking it wrongly?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028796583/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028796879","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028796879","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028796879,"node_id":"IC_kwDOAAiu0c547PvP","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T15:24:30Z","updated_at":"2024-03-31T15:24:30Z","body":"Also, it seems our test suite is not good enough on the TLS front since it did not detect this regression.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028796879/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028797591","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028797591","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028797591,"node_id":"IC_kwDOAAiu0c547P6X","user":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T15:27:37Z","updated_at":"2024-03-31T15:48:15Z","body":"> It baffles me how we can break rustls by linking it wrongly?\r\n\r\nThis is mysterious to me as well and I would like to understand more about what's going on. In general we're advertising the newly added dynamic linking support as experimental for this exact reason. \r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028797591/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028838330","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028838330","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028838330,"node_id":"IC_kwDOAAiu0c547Z26","user":{"login":"kpcyrd","id":7763184,"node_id":"MDQ6VXNlcjc3NjMxODQ=","avatar_url":"https://avatars.githubusercontent.com/u/7763184?v=4","gravatar_id":"","url":"https://api.github.com/users/kpcyrd","html_url":"https://github.com/kpcyrd","followers_url":"https://api.github.com/users/kpcyrd/followers","following_url":"https://api.github.com/users/kpcyrd/following{/other_user}","gists_url":"https://api.github.com/users/kpcyrd/gists{/gist_id}","starred_url":"https://api.github.com/users/kpcyrd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpcyrd/subscriptions","organizations_url":"https://api.github.com/users/kpcyrd/orgs","repos_url":"https://api.github.com/users/kpcyrd/repos","events_url":"https://api.github.com/users/kpcyrd/events{/privacy}","received_events_url":"https://api.github.com/users/kpcyrd/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T17:43:25Z","updated_at":"2024-03-31T17:43:25Z","body":"Copying over from https://github.com/curl/curl/issues/13200, I'd suggest reverting both 9c4209837094781d5eef69ae6bcad0e86b64bf99 and 647e86a3efe1eea7a2a456c009cfe1eb55fe48eb.\r\n\r\nI suspect the original Gentoo issue this was meant to fix may not be present anymore now that Gentoo has [net-libs/rustls-ffi 0.12.1](https://packages.gentoo.org/packages/net-libs/rustls-ffi).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028838330/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kpcyrd","id":7763184,"node_id":"MDQ6VXNlcjc3NjMxODQ=","avatar_url":"https://avatars.githubusercontent.com/u/7763184?v=4","gravatar_id":"","url":"https://api.github.com/users/kpcyrd","html_url":"https://github.com/kpcyrd","followers_url":"https://api.github.com/users/kpcyrd/followers","following_url":"https://api.github.com/users/kpcyrd/following{/other_user}","gists_url":"https://api.github.com/users/kpcyrd/gists{/gist_id}","starred_url":"https://api.github.com/users/kpcyrd/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kpcyrd/subscriptions","organizations_url":"https://api.github.com/users/kpcyrd/orgs","repos_url":"https://api.github.com/users/kpcyrd/repos","events_url":"https://api.github.com/users/kpcyrd/events{/privacy}","received_events_url":"https://api.github.com/users/kpcyrd/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028879145","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028879145","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028879145,"node_id":"IC_kwDOAAiu0c547j0p","user":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T19:06:38Z","updated_at":"2024-03-31T19:06:38Z","body":"> Copying over from #13200, I'd suggest reverting both [9c42098](https://github.com/curl/curl/commit/9c4209837094781d5eef69ae6bcad0e86b64bf99) and [647e86a](https://github.com/curl/curl/commit/647e86a3efe1eea7a2a456c009cfe1eb55fe48eb).\r\n> \r\n> I suspect the original Gentoo issue this was meant to fix may not be present anymore now that Gentoo has [net-libs/rustls-ffi 0.12.1](https://packages.gentoo.org/packages/net-libs/rustls-ffi).\r\n\r\nIf we do that builds on musl might break, which was the initial driver for using pkg-config. The original m4 was not suitable (though I will revert and do some testing to validate this after a few more hours of sleep).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028879145/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028882294","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028882294","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028882294,"node_id":"IC_kwDOAAiu0c547kl2","user":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T19:21:14Z","updated_at":"2024-03-31T19:21:14Z","body":"Can we go back to this: how on earth can you link something *wrongly* ? It feels like until we know what the error is, blindly reverting it to the previous state might fix it for the short term but it does not seem like a stable solution since we don't know what actually broke the build.\r\n\r\nWhen I build curl with rustls (both current git) I can get HTTPS from github perfectly fine, but I build with it statically. I believe that is what the CI builds with rustls do as well.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028882294/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028888087","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028888087","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028888087,"node_id":"IC_kwDOAAiu0c547mAX","user":{"login":"correabuscar","id":106607441,"node_id":"U_kgDOBlqzUQ","avatar_url":"https://avatars.githubusercontent.com/u/106607441?v=4","gravatar_id":"","url":"https://api.github.com/users/correabuscar","html_url":"https://github.com/correabuscar","followers_url":"https://api.github.com/users/correabuscar/followers","following_url":"https://api.github.com/users/correabuscar/following{/other_user}","gists_url":"https://api.github.com/users/correabuscar/gists{/gist_id}","starred_url":"https://api.github.com/users/correabuscar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/correabuscar/subscriptions","organizations_url":"https://api.github.com/users/correabuscar/orgs","repos_url":"https://api.github.com/users/correabuscar/repos","events_url":"https://api.github.com/users/correabuscar/events{/privacy}","received_events_url":"https://api.github.com/users/correabuscar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T19:48:28Z","updated_at":"2024-03-31T20:17:04Z","body":"There are some interesting diffs between the bad vs good dirs, on my Gentoo, but here's what jumps out to me:\r\n\r\n```diff\r\ndiff -upr curl-8.7.1.BAD/temp/build-abi_x86_64.amd64.log curl-8.7.1.GOOD/temp/build-abi_x86_64.amd64.log\r\n--- curl-8.7.1.BAD/temp/build-abi_x86_64.amd64.log\t2024-03-31 21:43:34.320394425 +0200\r\n+++ curl-8.7.1.GOOD/temp/build-abi_x86_64.amd64.log\t2024-03-31 21:45:17.977062047 +0200\r\n@@ -628,9 +629,9 @@ configure: Configured to build curl/libc\r\n   Install prefix:   /usr\r\n   Compiler:         x86_64-pc-linux-gnu-gcc\r\n    CFLAGS:          -march=skylake -mtune=skylake -mprefer-vector-width=128 -O2 -pipe -frecord-gcc-switches -ggdb -fvar-tracking-assignments -fno-omit-frame-pointer -ftrack-macro-expansion=2 -fstack-protector-all -Wno-trigraphs -fno-schedule-insns2 -fno-delete-null-pointer-checks -D_FORTIFY_SOURCE=2 -rdynamic -flifetime-dse=1 -Werror-implicit-function-declaration\r\n-   CPPFLAGS:        \r\n-   LDFLAGS:         \r\n-   LIBS:            -lnghttp2 -lpsl -lrustls -lzstd -lzstd -lz\r\n+   CPPFLAGS:        -isystem /include\r\n+   LDFLAGS:         -Wl,-O1,--sort-common,--as-needed,-z,relro -L/lib\r\n+   LIBS:            -lnghttp2 -lpsl -lrustls -lpthread -ldl -lm -lzstd -lzstd -lz\r\n \r\n   curl version:     8.7.1\r\n   SSL:              enabled (rustls)\r\n@@ -652,8 +653,8 @@ configure: Configured to build curl/libc\r\n   Verbose errors:   enabled (--disable-verbose)\r\n   Code coverage:    disabled\r\n   SSPI:             no      (--enable-sspi)\r\n-  ca cert bundle:   no\r\n-  ca cert path:     \r\n+  ca cert bundle:   /etc/ssl/certs/ca-certificates.crt\r\n+  ca cert path:     no\r\n   ca fallback:      no\r\n   LDAP:             no      (--enable-ldap / --with-ldap-lib / --with-lber-lib)\r\n   LDAPS:            no      (--enable-ldaps)\r\n```\r\n\r\n**EDIT**: for who wants the whole diff (this if after configure phase on Gentoo was run): https://gist.github.com/correabuscar/65ea0d516d74f444342969196f37be84","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028888087/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"correabuscar","id":106607441,"node_id":"U_kgDOBlqzUQ","avatar_url":"https://avatars.githubusercontent.com/u/106607441?v=4","gravatar_id":"","url":"https://api.github.com/users/correabuscar","html_url":"https://github.com/correabuscar","followers_url":"https://api.github.com/users/correabuscar/followers","following_url":"https://api.github.com/users/correabuscar/following{/other_user}","gists_url":"https://api.github.com/users/correabuscar/gists{/gist_id}","starred_url":"https://api.github.com/users/correabuscar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/correabuscar/subscriptions","organizations_url":"https://api.github.com/users/correabuscar/orgs","repos_url":"https://api.github.com/users/correabuscar/repos","events_url":"https://api.github.com/users/correabuscar/events{/privacy}","received_events_url":"https://api.github.com/users/correabuscar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028889785","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028889785","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028889785,"node_id":"IC_kwDOAAiu0c547ma5","user":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T19:56:36Z","updated_at":"2024-03-31T20:03:17Z","body":"@correabuscar Good eye! That does seem to be the critical difference. If I manually specify a `--cacert` matching the removed default that I don't need with the static build, or the build w/ the pkg-config changes reverted, then a \"broken\" build begins to work:\r\n\r\n```\r\n$ LD_LIBRARY_PATH=/tmp/librustls-0.13.0/lib ./src/curl https://example.com\r\ncurl: (60) rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\nMore details here: https://curl.se/docs/sslcerts.html\r\n\r\ncurl failed to verify the legitimacy of the server and therefore could not\r\nestablish a secure connection to it. To learn more about this situation and\r\nhow to fix it, please visit the web page mentioned above.\r\n\r\n$ LD_LIBRARY_PATH=/tmp/librustls-0.13.0/lib ./src/curl --cacert /etc/ssl/certs/ca-certificates.crt https://example.com\r\n<!doctype html>\r\n<html>\r\n<head>\r\n    <title>Example Domain</title>\r\n\r\n<snipped>\r\n```\r\n\r\nSo I think the question is why the pkg-config changes are changing the default ca cert bundle and it's not a question of linking issues (as bagder's intuition seemed to know all along :laughing: )\r\n\r\nEdit: I've also filed https://github.com/rustls/rustls-ffi/issues/409 to look into the error rustls-ffi is returning. I expected this situation to provoke a much easier to diagnose error indicating an unknown issuer.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028889785/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12304688529,"node_id":"MEE_lADOAAiu0c6EI9hvzwAAAALdaqWR","url":"https://api.github.com/repos/curl/curl/issues/events/12304688529","actor":{"login":"correabuscar","id":106607441,"node_id":"U_kgDOBlqzUQ","avatar_url":"https://avatars.githubusercontent.com/u/106607441?v=4","gravatar_id":"","url":"https://api.github.com/users/correabuscar","html_url":"https://github.com/correabuscar","followers_url":"https://api.github.com/users/correabuscar/followers","following_url":"https://api.github.com/users/correabuscar/following{/other_user}","gists_url":"https://api.github.com/users/correabuscar/gists{/gist_id}","starred_url":"https://api.github.com/users/correabuscar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/correabuscar/subscriptions","organizations_url":"https://api.github.com/users/correabuscar/orgs","repos_url":"https://api.github.com/users/correabuscar/repos","events_url":"https://api.github.com/users/correabuscar/events{/privacy}","received_events_url":"https://api.github.com/users/correabuscar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-31T19:56:37Z","performed_via_github_app":null},{"id":12304688531,"node_id":"SE_lADOAAiu0c6EI9hvzwAAAALdaqWT","url":"https://api.github.com/repos/curl/curl/issues/events/12304688531","actor":{"login":"correabuscar","id":106607441,"node_id":"U_kgDOBlqzUQ","avatar_url":"https://avatars.githubusercontent.com/u/106607441?v=4","gravatar_id":"","url":"https://api.github.com/users/correabuscar","html_url":"https://github.com/correabuscar","followers_url":"https://api.github.com/users/correabuscar/followers","following_url":"https://api.github.com/users/correabuscar/following{/other_user}","gists_url":"https://api.github.com/users/correabuscar/gists{/gist_id}","starred_url":"https://api.github.com/users/correabuscar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/correabuscar/subscriptions","organizations_url":"https://api.github.com/users/correabuscar/orgs","repos_url":"https://api.github.com/users/correabuscar/repos","events_url":"https://api.github.com/users/correabuscar/events{/privacy}","received_events_url":"https://api.github.com/users/correabuscar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-31T19:56:37Z","performed_via_github_app":null},{"actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T20:01:45Z","updated_at":"2024-03-31T20:01:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rustls/rustls-ffi/issues/409","repository_url":"https://api.github.com/repos/rustls/rustls-ffi","labels_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/409/labels{/name}","comments_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/409/comments","events_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/409/events","html_url":"https://github.com/rustls/rustls-ffi/issues/409","id":2217162447,"node_id":"I_kwDOExNEQM6EJzbP","number":409,"title":"Investigate error returned for an unknown issuer","user":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-03-31T20:01:45Z","updated_at":"2024-04-15T16:34:48Z","closed_at":"2024-04-15T16:34:48Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":320029760,"node_id":"MDEwOlJlcG9zaXRvcnkzMjAwMjk3NjA=","name":"rustls-ffi","full_name":"rustls/rustls-ffi","private":false,"owner":{"login":"rustls","id":65125397,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY1MTI1Mzk3","avatar_url":"https://avatars.githubusercontent.com/u/65125397?v=4","gravatar_id":"","url":"https://api.github.com/users/rustls","html_url":"https://github.com/rustls","followers_url":"https://api.github.com/users/rustls/followers","following_url":"https://api.github.com/users/rustls/following{/other_user}","gists_url":"https://api.github.com/users/rustls/gists{/gist_id}","starred_url":"https://api.github.com/users/rustls/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rustls/subscriptions","organizations_url":"https://api.github.com/users/rustls/orgs","repos_url":"https://api.github.com/users/rustls/repos","events_url":"https://api.github.com/users/rustls/events{/privacy}","received_events_url":"https://api.github.com/users/rustls/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rustls/rustls-ffi","description":"Use Rustls from any language","fork":false,"url":"https://api.github.com/repos/rustls/rustls-ffi","forks_url":"https://api.github.com/repos/rustls/rustls-ffi/forks","keys_url":"https://api.github.com/repos/rustls/rustls-ffi/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rustls/rustls-ffi/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rustls/rustls-ffi/teams","hooks_url":"https://api.github.com/repos/rustls/rustls-ffi/hooks","issue_events_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/events{/number}","events_url":"https://api.github.com/repos/rustls/rustls-ffi/events","assignees_url":"https://api.github.com/repos/rustls/rustls-ffi/assignees{/user}","branches_url":"https://api.github.com/repos/rustls/rustls-ffi/branches{/branch}","tags_url":"https://api.github.com/repos/rustls/rustls-ffi/tags","blobs_url":"https://api.github.com/repos/rustls/rustls-ffi/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rustls/rustls-ffi/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rustls/rustls-ffi/git/refs{/sha}","trees_url":"https://api.github.com/repos/rustls/rustls-ffi/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rustls/rustls-ffi/statuses/{sha}","languages_url":"https://api.github.com/repos/rustls/rustls-ffi/languages","stargazers_url":"https://api.github.com/repos/rustls/rustls-ffi/stargazers","contributors_url":"https://api.github.com/repos/rustls/rustls-ffi/contributors","subscribers_url":"https://api.github.com/repos/rustls/rustls-ffi/subscribers","subscription_url":"https://api.github.com/repos/rustls/rustls-ffi/subscription","commits_url":"https://api.github.com/repos/rustls/rustls-ffi/commits{/sha}","git_commits_url":"https://api.github.com/repos/rustls/rustls-ffi/git/commits{/sha}","comments_url":"https://api.github.com/repos/rustls/rustls-ffi/comments{/number}","issue_comment_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/comments{/number}","contents_url":"https://api.github.com/repos/rustls/rustls-ffi/contents/{+path}","compare_url":"https://api.github.com/repos/rustls/rustls-ffi/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rustls/rustls-ffi/merges","archive_url":"https://api.github.com/repos/rustls/rustls-ffi/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rustls/rustls-ffi/downloads","issues_url":"https://api.github.com/repos/rustls/rustls-ffi/issues{/number}","pulls_url":"https://api.github.com/repos/rustls/rustls-ffi/pulls{/number}","milestones_url":"https://api.github.com/repos/rustls/rustls-ffi/milestones{/number}","notifications_url":"https://api.github.com/repos/rustls/rustls-ffi/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rustls/rustls-ffi/labels{/name}","releases_url":"https://api.github.com/repos/rustls/rustls-ffi/releases{/id}","deployments_url":"https://api.github.com/repos/rustls/rustls-ffi/deployments","created_at":"2020-12-09T17:26:05Z","updated_at":"2025-10-27T15:20:04Z","pushed_at":"2025-10-27T15:20:01Z","git_url":"git://github.com/rustls/rustls-ffi.git","ssh_url":"git@github.com:rustls/rustls-ffi.git","clone_url":"https://github.com/rustls/rustls-ffi.git","svn_url":"https://github.com/rustls/rustls-ffi","homepage":"","size":1840,"stargazers_count":154,"watchers_count":154,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":false,"forks_count":36,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":28,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cryptography","ffi","rust","ssl","tls"],"visibility":"public","forks":36,"open_issues":28,"watchers":154,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"In a downstream application (https://github.com/curl/curl/issues/13248) that wasn't configured with CA certificates connecting to `https://example.com` provokes an odd `BadSignature` error when I would expect something indicating an unknown issuer.\r\n\r\n> rustls_connection_process_new_packets: invalid peer certificate: BadSignature\r\n\r\nFiling this as a reminder to look into what's going on here.","reactions":{"url":"https://api.github.com/repos/rustls/rustls-ffi/issues/409/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rustls/rustls-ffi/issues/409/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T20:21:18Z","updated_at":"2024-03-31T20:21:18Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/13251","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/13251/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/13251/comments","events_url":"https://api.github.com/repos/curl/curl/issues/13251/events","html_url":"https://github.com/curl/curl/pull/13251","id":2217168582,"node_id":"PR_kwDOAAiu0c5rQjqP","number":13251,"title":"m4: reposition USE_RUSTLS=\"yes\" for pkg-config ","user":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":184118182,"node_id":"MDU6TGFiZWwxODQxMTgxODI=","url":"https://api.github.com/repos/curl/curl/labels/build","name":"build","color":"bfdadc","default":false,"description":null},{"id":184118221,"node_id":"MDU6TGFiZWwxODQxMTgyMjE=","url":"https://api.github.com/repos/curl/curl/labels/TLS","name":"TLS","color":"bfdadc","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2024-03-31T20:21:17Z","updated_at":"2024-03-31T21:42:09Z","closed_at":"2024-03-31T21:23:29Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/13251","html_url":"https://github.com/curl/curl/pull/13251","diff_url":"https://github.com/curl/curl/pull/13251.diff","patch_url":"https://github.com/curl/curl/pull/13251.patch","merged_at":null},"body":"It's necessary to set this var to \"yes\" _after_ AC_DEFINE and AC_SUBST in order for a later `test` to pass so that `check_for_ca_bundle=1` ends up being set. This is in turn required for the default CA certificate bundle to be set when building w/ rustls & pkg-config.\r\n\r\nBefore the pkg-config changes [the success case configuration](https://github.com/curl/curl/blob/b564a5f5d5280387a88025c5f90260017847add4/m4/curl-rustls.m4#L55-L58) looked like:\r\n\r\n1. AC_DEFINE...\r\n2. AC_SUBST...\r\n3. RUSTLS_ENABLED=1\r\n4. USE_RUSTLS=yes\r\n\r\nI think that while that order of operations was preserved in https://github.com/curl/curl/commit/647e86a3efe1eea7a2a456c009cfe1eb55fe48eb, in https://github.com/curl/curl/commit/9c4209837094781d5eef69ae6bcad0e86b64bf99 the order changed to:\r\n\r\n1. USE_RUSTLS=\"yes\"\r\n2. AC_DEFINE...\r\n3. AC_SUBST...\r\n4. RUSTLS_ENABLED=1\r\n\r\nThis in turn seems to result in no default CA certificate bundle being set when using rustls & pkg-config. Moving the `USE_RUSTLS` back to the position it was before seems to resolve the issue.\r\n\r\nResolves https://github.com/curl/curl/issues/13248","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/13251/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/13251/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028896071","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028896071","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028896071,"node_id":"IC_kwDOAAiu0c547n9H","user":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T20:24:23Z","updated_at":"2024-03-31T20:24:49Z","body":"> So I think the question is why the pkg-config changes are changing the default ca cert bundle\r\n\r\nI opened a PR (https://github.com/curl/curl/pull/13251) with a patch that seems to resolve the problem for me locally.\r\n\r\n```\r\n$ LD_LIBRARY_PATH=/tmp/librustls-0.13.0/lib ./configure --with-rustls=/tmp/librustls-0.13.0\r\n<snipped>\r\nconfigure: Configured to build curl/libcurl:\r\n\r\n  Host setup:       x86_64-pc-linux-gnu\r\n  Install prefix:   /usr/local\r\n  Compiler:         gcc\r\n   CFLAGS:          -Werror-implicit-function-declaration -O2 -Wno-system-headers\r\n   CPPFLAGS:        -isystem /tmp/librustls-0.13.0/include\r\n   LDFLAGS:         -L/tmp/librustls-0.13.0/lib\r\n   LIBS:            -lrustls -lz\r\n\r\n  curl version:     8.7.2-DEV\r\n  SSL:              enabled (rustls)\r\n<snipped>\r\n  ca cert bundle:   /etc/ssl/certs/ca-certificates.crt\r\n  ca cert path:     no\r\n  ca fallback:      no\r\n<snipped>\r\n\r\n  WARNING:  rustls enabled but marked EXPERIMENTAL. Use with caution!\r\n  \r\n$ make\r\n<snipped>\r\n\r\n$ LD_LIBRARY_PATH=/tmp/librustls-0.13.0/lib ./src/curl https://example.com\r\n<!doctype html>\r\n<html>\r\n....\r\n```\r\n\r\nSomeone more familiar with m4 might want to double check this is the right fix. My longstanding feud with autotools has perhaps evolved into a phobia after this weekend :zany_face: ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028896071/reactions","total_count":3,"+1":1,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cpu","id":292650,"node_id":"MDQ6VXNlcjI5MjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/292650?v=4","gravatar_id":"","url":"https://api.github.com/users/cpu","html_url":"https://github.com/cpu","followers_url":"https://api.github.com/users/cpu/followers","following_url":"https://api.github.com/users/cpu/following{/other_user}","gists_url":"https://api.github.com/users/cpu/gists{/gist_id}","starred_url":"https://api.github.com/users/cpu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cpu/subscriptions","organizations_url":"https://api.github.com/users/cpu/orgs","repos_url":"https://api.github.com/users/cpu/repos","events_url":"https://api.github.com/users/cpu/events{/privacy}","received_events_url":"https://api.github.com/users/cpu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028900407","html_url":"https://github.com/curl/curl/issues/13248#issuecomment-2028900407","issue_url":"https://api.github.com/repos/curl/curl/issues/13248","id":2028900407,"node_id":"IC_kwDOAAiu0c547pA3","user":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-31T20:45:20Z","updated_at":"2024-03-31T20:45:20Z","body":"> My longstanding feud with autotools has perhaps evolved into a phobia after this weekend \r\n\r\nI share your sentiment. Thanks for looking into this while I slept off my Sunday!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/2028900407/reactions","total_count":3,"+1":1,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12304813580,"node_id":"CE_lADOAAiu0c6EI9hvzwAAAALdbI4M","url":"https://api.github.com/repos/curl/curl/issues/events/12304813580","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"5a50cb5a18a141a463148562dab83fa3be1a3b90","commit_url":"https://api.github.com/repos/curl/curl/commits/5a50cb5a18a141a463148562dab83fa3be1a3b90","created_at":"2024-03-31T21:23:29Z","state_reason":null,"performed_via_github_app":null},{"id":12306614441,"node_id":"REFE_lADOAAiu0c6EI9hvzwAAAALdiAip","url":"https://api.github.com/repos/curl/curl/issues/events/12306614441","actor":{"login":"Kangie","id":9733178,"node_id":"MDQ6VXNlcjk3MzMxNzg=","avatar_url":"https://avatars.githubusercontent.com/u/9733178?v=4","gravatar_id":"","url":"https://api.github.com/users/Kangie","html_url":"https://github.com/Kangie","followers_url":"https://api.github.com/users/Kangie/followers","following_url":"https://api.github.com/users/Kangie/following{/other_user}","gists_url":"https://api.github.com/users/Kangie/gists{/gist_id}","starred_url":"https://api.github.com/users/Kangie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kangie/subscriptions","organizations_url":"https://api.github.com/users/Kangie/orgs","repos_url":"https://api.github.com/users/Kangie/repos","events_url":"https://api.github.com/users/Kangie/events{/privacy}","received_events_url":"https://api.github.com/users/Kangie/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5a50cb5a18a141a463148562dab83fa3be1a3b90","commit_url":"https://api.github.com/repos/Kangie/curl/commits/5a50cb5a18a141a463148562dab83fa3be1a3b90","created_at":"2024-04-01T05:07:24Z","performed_via_github_app":null},{"actor":{"login":"LeSuisse","id":737767,"node_id":"MDQ6VXNlcjczNzc2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/737767?v=4","gravatar_id":"","url":"https://api.github.com/users/LeSuisse","html_url":"https://github.com/LeSuisse","followers_url":"https://api.github.com/users/LeSuisse/followers","following_url":"https://api.github.com/users/LeSuisse/following{/other_user}","gists_url":"https://api.github.com/users/LeSuisse/gists{/gist_id}","starred_url":"https://api.github.com/users/LeSuisse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeSuisse/subscriptions","organizations_url":"https://api.github.com/users/LeSuisse/orgs","repos_url":"https://api.github.com/users/LeSuisse/repos","events_url":"https://api.github.com/users/LeSuisse/events{/privacy}","received_events_url":"https://api.github.com/users/LeSuisse/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-07T16:15:14Z","updated_at":"2024-04-07T16:15:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/NixOS/nixpkgs/issues/299580","repository_url":"https://api.github.com/repos/NixOS/nixpkgs","labels_url":"https://api.github.com/repos/NixOS/nixpkgs/issues/299580/labels{/name}","comments_url":"https://api.github.com/repos/NixOS/nixpkgs/issues/299580/comments","events_url":"https://api.github.com/repos/NixOS/nixpkgs/issues/299580/events","html_url":"https://github.com/NixOS/nixpkgs/pull/299580","id":2211863614,"node_id":"PR_kwDOAEVQ_M5q-1zI","number":299580,"title":"curl: 8.6.0 -> 8.7.1","user":{"login":"LeSuisse","id":737767,"node_id":"MDQ6VXNlcjczNzc2Nw==","avatar_url":"https://avatars.githubusercontent.com/u/737767?v=4","gravatar_id":"","url":"https://api.github.com/users/LeSuisse","html_url":"https://github.com/LeSuisse","followers_url":"https://api.github.com/users/LeSuisse/followers","following_url":"https://api.github.com/users/LeSuisse/following{/other_user}","gists_url":"https://api.github.com/users/LeSuisse/gists{/gist_id}","starred_url":"https://api.github.com/users/LeSuisse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LeSuisse/subscriptions","organizations_url":"https://api.github.com/users/LeSuisse/orgs","repos_url":"https://api.github.com/users/LeSuisse/repos","events_url":"https://api.github.com/users/LeSuisse/events{/privacy}","received_events_url":"https://api.github.com/users/LeSuisse/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":126506420,"node_id":"MDU6TGFiZWwxMjY1MDY0MjA=","url":"https://api.github.com/repos/NixOS/nixpkgs/labels/1.severity:%20security","name":"1.severity: security","color":"e11d21","default":false,"description":"Issues which raise a security issue, or PRs that fix one"},{"id":731734523,"node_id":"MDU6TGFiZWw3MzE3MzQ1MjM=","url":"https://api.github.com/repos/NixOS/nixpkgs/labels/10.rebuild-linux:%20501+","name":"10.rebuild-linux: 501+","color":"d93f0b","default":false,"description":"This PR causes many rebuilds on Linux and should normally target the staging branches."},{"id":731735740,"node_id":"MDU6TGFiZWw3MzE3MzU3NDA=","url":"https://api.github.com/repos/NixOS/nixpkgs/labels/10.rebuild-darwin:%20501+","name":"10.rebuild-darwin: 501+","color":"d93f0b","default":false,"description":"This PR causes many rebuilds on Darwin and should normally target the staging branches."},{"id":1214722289,"node_id":"MDU6TGFiZWwxMjE0NzIyMjg5","url":"https://api.github.com/repos/NixOS/nixpkgs/labels/10.rebuild-darwin:%205001+","name":"10.rebuild-darwin: 5001+","color":"b60205","default":false,"description":"This PR causes many rebuilds on Darwin and must target the staging branches."},{"id":1215578560,"node_id":"MDU6TGFiZWwxMjE1NTc4NTYw","url":"https://api.github.com/repos/NixOS/nixpkgs/labels/10.rebuild-linux:%205001+","name":"10.rebuild-linux: 5001+","color":"b60205","default":false,"description":"This PR causes many rebuilds on Linux and must target the staging branches."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2024-03-27T20:37:14Z","updated_at":"2024-04-24T20:29:24Z","closed_at":"2024-04-10T06:07:22Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":4542716,"node_id":"MDEwOlJlcG9zaXRvcnk0NTQyNzE2","name":"nixpkgs","full_name":"NixOS/nixpkgs","private":false,"owner":{"login":"NixOS","id":487568,"node_id":"MDEyOk9yZ2FuaXphdGlvbjQ4NzU2OA==","avatar_url":"https://avatars.githubusercontent.com/u/487568?v=4","gravatar_id":"","url":"https://api.github.com/users/NixOS","html_url":"https://github.com/NixOS","followers_url":"https://api.github.com/users/NixOS/followers","following_url":"https://api.github.com/users/NixOS/following{/other_user}","gists_url":"https://api.github.com/users/NixOS/gists{/gist_id}","starred_url":"https://api.github.com/users/NixOS/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/NixOS/subscriptions","organizations_url":"https://api.github.com/users/NixOS/orgs","repos_url":"https://api.github.com/users/NixOS/repos","events_url":"https://api.github.com/users/NixOS/events{/privacy}","received_events_url":"https://api.github.com/users/NixOS/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/NixOS/nixpkgs","description":"Nix Packages collection & NixOS","fork":false,"url":"https://api.github.com/repos/NixOS/nixpkgs","forks_url":"https://api.github.com/repos/NixOS/nixpkgs/forks","keys_url":"https://api.github.com/repos/NixOS/nixpkgs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/NixOS/nixpkgs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/NixOS/nixpkgs/teams","hooks_url":"https://api.github.com/repos/NixOS/nixpkgs/hooks","issue_events_url":"https://api.github.com/repos/NixOS/nixpkgs/issues/events{/number}","events_url":"https://api.github.com/repos/NixOS/nixpkgs/events","assignees_url":"https://api.github.com/repos/NixOS/nixpkgs/assignees{/user}","branches_url":"https://api.github.com/repos/NixOS/nixpkgs/branches{/branch}","tags_url":"https://api.github.com/repos/NixOS/nixpkgs/tags","blobs_url":"https://api.github.com/repos/NixOS/nixpkgs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/NixOS/nixpkgs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/NixOS/nixpkgs/git/refs{/sha}","trees_url":"https://api.github.com/repos/NixOS/nixpkgs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/NixOS/nixpkgs/statuses/{sha}","languages_url":"https://api.github.com/repos/NixOS/nixpkgs/languages","stargazers_url":"https://api.github.com/repos/NixOS/nixpkgs/stargazers","contributors_url":"https://api.github.com/repos/NixOS/nixpkgs/contributors","subscribers_url":"https://api.github.com/repos/NixOS/nixpkgs/subscribers","subscription_url":"https://api.github.com/repos/NixOS/nixpkgs/subscription","commits_url":"https://api.github.com/repos/NixOS/nixpkgs/commits{/sha}","git_commits_url":"https://api.github.com/repos/NixOS/nixpkgs/git/commits{/sha}","comments_url":"https://api.github.com/repos/NixOS/nixpkgs/comments{/number}","issue_comment_url":"https://api.github.com/repos/NixOS/nixpkgs/issues/comments{/number}","contents_url":"https://api.github.com/repos/NixOS/nixpkgs/contents/{+path}","compare_url":"https://api.github.com/repos/NixOS/nixpkgs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/NixOS/nixpkgs/merges","archive_url":"https://api.github.com/repos/NixOS/nixpkgs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/NixOS/nixpkgs/downloads","issues_url":"https://api.github.com/repos/NixOS/nixpkgs/issues{/number}","pulls_url":"https://api.github.com/repos/NixOS/nixpkgs/pulls{/number}","milestones_url":"https://api.github.com/repos/NixOS/nixpkgs/milestones{/number}","notifications_url":"https://api.github.com/repos/NixOS/nixpkgs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/NixOS/nixpkgs/labels{/name}","releases_url":"https://api.github.com/repos/NixOS/nixpkgs/releases{/id}","deployments_url":"https://api.github.com/repos/NixOS/nixpkgs/deployments","created_at":"2012-06-04T02:49:46Z","updated_at":"2025-11-10T11:51:56Z","pushed_at":"2025-11-10T12:14:47Z","git_url":"git://github.com/NixOS/nixpkgs.git","ssh_url":"git@github.com:NixOS/nixpkgs.git","clone_url":"https://github.com/NixOS/nixpkgs.git","svn_url":"https://github.com/NixOS/nixpkgs","homepage":"","size":2449256,"stargazers_count":22379,"watchers_count":22379,"language":"Nix","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":17187,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":17043,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","linux","nix","nixos","nixpkgs"],"visibility":"public","forks":17187,"open_issues":17043,"watchers":22379,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/NixOS/nixpkgs/pulls/299580","html_url":"https://github.com/NixOS/nixpkgs/pull/299580","diff_url":"https://github.com/NixOS/nixpkgs/pull/299580.diff","patch_url":"https://github.com/NixOS/nixpkgs/pull/299580.patch","merged_at":"2024-04-10T06:07:22Z"},"body":"## Description of changes\r\n\r\nFixes CVE-2024-2466, CVE-2024-2398, CVE-2024-2379 and CVE-2024-2004.\r\n\r\nChanges:\r\nhttps://curl.se/changes.html#8_7_1\r\n<!--\r\nFor package updates please link to a changelog or describe changes, this helps your fellow maintainers discover breaking updates.\r\nFor new packages please briefly describe the package or provide a link to its homepage.\r\n-->\r\n\r\n## Things done\r\n\r\n<!-- Please check what applies. Note that these are not hard requirements but merely serve as information for reviewers. -->\r\n\r\n- Built on platform(s)\r\n  - [x] x86_64-linux up to `curlFull` and `curl.passthru.tests`\r\n  - [x] aarch64-linux up to `curlFull` and `curl.passthru.tests`\r\n  - [ ] x86_64-darwin\r\n  - [ ] aarch64-darwin\r\n- For non-Linux: Is sandboxing enabled in `nix.conf`? (See [Nix manual](https://nixos.org/manual/nix/stable/command-ref/conf-file.html))\r\n  - [ ] `sandbox = relaxed`\r\n  - [ ] `sandbox = true`\r\n- [ ] Tested, as applicable:\r\n  - [NixOS test(s)](https://nixos.org/manual/nixos/unstable/index.html#sec-nixos-tests) (look inside [nixos/tests](https://github.com/NixOS/nixpkgs/blob/master/nixos/tests))\r\n  - and/or [package tests](https://nixos.org/manual/nixpkgs/unstable/#sec-package-tests)\r\n  - or, for functions and \"core\" functionality, tests in [lib/tests](https://github.com/NixOS/nixpkgs/blob/master/lib/tests) or [pkgs/test](https://github.com/NixOS/nixpkgs/blob/master/pkgs/test)\r\n  - made sure NixOS tests are [linked](https://nixos.org/manual/nixpkgs/unstable/#ssec-nixos-tests-linking) to the relevant packages\r\n- [ ] Tested compilation of all packages that depend on this change using `nix-shell -p nixpkgs-review --run \"nixpkgs-review rev HEAD\"`. Note: all changes have to be committed, also see [nixpkgs-review usage](https://github.com/Mic92/nixpkgs-review#usage)\r\n- [ ] Tested basic functionality of all binary files (usually in `./result/bin/`)\r\n- [24.05 Release Notes](https://github.com/NixOS/nixpkgs/blob/master/nixos/doc/manual/release-notes/rl-2405.section.md) (or backporting [23.05](https://github.com/NixOS/nixpkgs/blob/master/nixos/doc/manual/release-notes/rl-2305.section.md) and [23.11](https://github.com/NixOS/nixpkgs/blob/master/nixos/doc/manual/release-notes/rl-2311.section.md) Release notes)\r\n  - [ ] (Package updates) Added a release notes entry if the change is major or breaking\r\n  - [ ] (Module updates) Added a release notes entry if the change is significant\r\n  - [ ] (Module addition) Added a release notes entry if adding a new NixOS module\r\n- [x] Fits [CONTRIBUTING.md](https://github.com/NixOS/nixpkgs/blob/master/CONTRIBUTING.md).\r\n\r\n<!--\r\nTo help with the large amounts of pull requests, we would appreciate your\r\nreviews of other pull requests, especially simple package updates. Just leave a\r\ncomment describing what you have tested in the relevant package/service.\r\nReviewing helps to reduce the average time-to-merge for everyone.\r\nThanks a lot if you do!\r\n\r\nList of open PRs: https://github.com/NixOS/nixpkgs/pulls\r\nReviewing guidelines: https://github.com/NixOS/nixpkgs/blob/master/pkgs/README.md#reviewing-contributions\r\n-->\r\n\r\n---\r\n\r\nAdd a :+1: [reaction] to [pull requests you find important].\r\n\r\n[reaction]: https://github.blog/2016-03-10-add-reactions-to-pull-requests-issues-and-comments/\r\n[pull requests you find important]: https://github.com/NixOS/nixpkgs/pulls?q=is%3Aopen+sort%3Areactions-%2B1-desc\r\n","reactions":{"url":"https://api.github.com/repos/NixOS/nixpkgs/issues/299580/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/NixOS/nixpkgs/issues/299580/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]