[{"id":9834013079,"node_id":"AE_lADOAAiu0c5rto2mzwAAAAJKJyGX","url":"https://api.github.com/repos/curl/curl/issues/events/9834013079","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-07-17T07:12:33Z","assignee":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637528801","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1637528801","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1637528801,"node_id":"IC_kwDOAAiu0c5hmrTh","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-17T07:38:22Z","updated_at":"2023-07-17T07:38:22Z","body":"sorry, forget print the `bt`, and already updated","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637528801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637774934","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1637774934","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1637774934,"node_id":"IC_kwDOAAiu0c5hnnZW","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-17T10:08:21Z","updated_at":"2023-07-17T10:08:21Z","body":"Thanks for the details and test program. I modified this a bit to compile it in plain C (see below). With this, I am unable to reproduce the issue. Do you see the crash every time?:\r\n\r\n```\r\n#include <unistd.h>\r\n#include \"curl/curl.h\"\r\n\r\nstatic size_t mycurl_onrecv_body(char *ptr, size_t size,\r\n                                 size_t nmemb, void *userdata)\r\n{\r\n    (void)ptr;\r\n    (void)userdata;\r\n    return size * nmemb;\r\n}\r\n\r\nstatic void mycurl_process(CURLM *multi_handle)\r\n{\r\n    CURLMsg *curl_msg = NULL;\r\n    int msgs_left = 0;\r\n    while((curl_msg = curl_multi_info_read(multi_handle, &msgs_left))) {\r\n        if(curl_msg->msg == CURLMSG_DONE) {\r\n            CURL *http_handle = curl_msg->easy_handle;\r\n            CURLcode code = curl_msg->data.result;\r\n            curl_multi_remove_handle(multi_handle, http_handle);\r\n            printf(\"handle %p finished -> %d\\n\", (void*)http_handle, code);\r\n            curl_easy_cleanup(http_handle);\r\n        }\r\n    }\r\n    return;\r\n}\r\n\r\nint main(void)\r\n{\r\n    CURLM *multi_handle;\r\n    CURL *http_handle;\r\n    int reqid = 0, i, count;\r\n    const char *urls[] = {\r\n        \"https://cloudflare-quic.com/\",\r\n        \"https://cloudflare-quic.com/\",\r\n        \"https://cloudflare-quic.com/\",\r\n        NULL\r\n    };\r\n\r\n    curl_global_init(CURL_GLOBAL_ALL);\r\n    printf(\"%s\\n\", curl_version());\r\n\r\n    multi_handle = curl_multi_init();\r\n\r\n    count = 5;\r\n    while(count--) {\r\n        int still_running = 0;\r\n        for(i = 0; urls[i]; ++i) {\r\n            printf(\"New Request[%d]: %s\\n\", reqid++, urls[i]);\r\n            http_handle = curl_easy_init();\r\n            curl_easy_setopt(http_handle, CURLOPT_URL, urls[i]);\r\n            curl_easy_setopt(http_handle, CURLOPT_VERBOSE, 1L);\r\n            curl_easy_setopt(http_handle, CURLOPT_WRITEFUNCTION, mycurl_onrecv_body);\r\n            curl_easy_setopt(http_handle, CURLOPT_CONNECTTIMEOUT_MS, 5000L);\r\n            curl_easy_setopt(http_handle, CURLOPT_TIMEOUT_MS, 10000L);\r\n            curl_easy_setopt(http_handle, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_3ONLY);\r\n            curl_multi_add_handle(multi_handle, http_handle);\r\n        }\r\n\r\n        do {\r\n            int numfds = 0;\r\n            curl_multi_wait(multi_handle, NULL, 0, 10, &numfds);\r\n            curl_multi_perform(multi_handle, &still_running);\r\n            mycurl_process(multi_handle);\r\n        } while(still_running);\r\n        sleep(1);\r\n    }\r\n\r\n    curl_multi_cleanup(multi_handle);\r\n    return 0;\r\n}\r\n```\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637774934/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637818516","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1637818516","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1637818516,"node_id":"IC_kwDOAAiu0c5hnyCU","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-17T10:26:02Z","updated_at":"2023-07-17T10:26:02Z","body":"@icing yes, I tried the test program aboved and compiled with `gcc`, it crash as well and always crash on the first request. The full output is:\r\n```\r\n[build]$ gdb temp \r\nGNU gdb (GDB) Red Hat Enterprise Linux 7.6.1-100.el7_4.1\r\nCopyright (C) 2013 Free Software Foundation, Inc.\r\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\r\nThis is free software: you are free to change and redistribute it.\r\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\r\nand \"show warranty\" for details.\r\nThis GDB was configured as \"x86_64-redhat-linux-gnu\".\r\nFor bug reporting instructions, please see:\r\n<http://www.gnu.org/software/gdb/bugs/>...\r\nReading symbols from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/build/temp...done.\r\n(gdb) r\r\nStarting program: /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/build/temp \r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib64/libthread_db.so.1\".\r\nlibcurl/8.1.2 BoringSSL zlib/1.2.7 brotli/1.0.9 nghttp2/1.41.0 quiche/0.17.1\r\nNew Request[0]: https://cloudflare-quic.com/\r\nNew Request[1]: https://cloudflare-quic.com/\r\nNew Request[2]: https://cloudflare-quic.com/\r\n[New Thread 0x7ffff6a24700 (LWP 54457)]\r\n* Found bundle for host: 0x60d3e0 [serially]\r\n* Server doesn't support multiplex (yet)\r\n* Connection #0 is still name resolving, can't reuse\r\n[New Thread 0x7ffff6223700 (LWP 54458)]\r\n* Found bundle for host: 0x60d3e0 [serially]\r\n* Server doesn't support multiplex (yet)\r\n* Connection #0 is still name resolving, can't reuse\r\n* Connection #1 is still name resolving, can't reuse\r\n[New Thread 0x7ffff5a22700 (LWP 54459)]\r\n*   Trying 104.22.9.38:443...\r\n[Thread 0x7ffff5a22700 (LWP 54459) exited]\r\n[Thread 0x7ffff6a24700 (LWP 54457) exited]\r\n[Thread 0x7ffff6223700 (LWP 54458) exited]\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* Hostname 'cloudflare-quic.com' was found in DNS cache\r\n*   Trying 104.22.9.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* Hostname 'cloudflare-quic.com' was found in DNS cache\r\n*   Trying 104.22.9.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n*   Trying [2606:4700:10::6816:826]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:826: Network is unreachable\r\n*   Trying [2606:4700:10::ac43:9eb]:443...\r\n* Immediate connect fail for 2606:4700:10::ac43:9eb: Network is unreachable\r\n*   Trying [2606:4700:10::6816:926]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:926: Network is unreachable\r\n*   Trying [2606:4700:10::6816:826]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:826: Network is unreachable\r\n*   Trying [2606:4700:10::ac43:9eb]:443...\r\n* Immediate connect fail for 2606:4700:10::ac43:9eb: Network is unreachable\r\n*   Trying [2606:4700:10::6816:926]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:926: Network is unreachable\r\n*   Trying [2606:4700:10::6816:826]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:826: Network is unreachable\r\n*   Trying [2606:4700:10::ac43:9eb]:443...\r\n* Immediate connect fail for 2606:4700:10::ac43:9eb: Network is unreachable\r\n*   Trying [2606:4700:10::6816:926]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:926: Network is unreachable\r\n* ipv4 connect timeout after 2490ms, move on!\r\n*   Trying 172.67.9.235:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* ipv4 connect timeout after 2462ms, move on!\r\n* ipv4 connect timeout after 2449ms, move on!\r\n*   Trying 172.67.9.235:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n*   Trying 172.67.9.235:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n*  subjectAltName: host \"cloudflare-quic.com\" matched cert's \"cloudflare-quic.com\"\r\n* Connected to cloudflare-quic.com (172.67.9.235) port 443 (#0)\r\n* using HTTP/3\r\n* Using HTTP/3 Stream ID: 0 (easy handle 0x604700)\r\n> GET / HTTP/3\r\nHost: cloudflare-quic.com\r\nAccept: */*\r\n\r\n< HTTP/3 200 \r\n< date: Mon, 17 Jul 2023 10:17:48 GMT\r\n< content-type: text/html\r\n< content-length: 125959\r\n< server: cloudflare\r\n< cf-ray: 7e81bcbbb83a9e6b-SJC\r\n< alt-svc: h3=\":443\"; ma=86400\r\n< \r\n* Connection #0 to host cloudflare-quic.com left intact\r\nhandle 0x604700 finished -> 0\r\n* ipv4 connect timeout after 1245ms, move on!\r\n*   Trying 104.22.8.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* ipv4 connect timeout after 1223ms, move on!\r\n*   Trying 104.22.8.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n*  subjectAltName: host \"cloudflare-quic.com\" matched cert's \"cloudflare-quic.com\"\r\n* Connected to cloudflare-quic.com (104.22.8.38) port 443 (#1)\r\n* using HTTP/3\r\n* Using HTTP/3 Stream ID: 0 (easy handle 0x605c60)\r\n> GET / HTTP/3\r\nHost: cloudflare-quic.com\r\nAccept: */*\r\n\r\n\r\nProgram received signal SIGSEGV, Segmentation fault.\r\nbufcp_take (pchunk=<synthetic pointer>, pool=0x848d68) at bufq.c:191\r\n191         pool->spare = chunk->next;\r\nMissing separate debuginfos, use: debuginfo-install libgcc-4.8.5-16.el7_4.2.x86_64 zlib-1.2.7-17.el7.x86_64\r\n(gdb) \r\n(gdb) bt\r\n#0  bufcp_take (pchunk=<synthetic pointer>, pool=0x848d68) at bufq.c:191\r\n#1  get_spare (q=0x8ec878) at bufq.c:338\r\n#2  get_non_full_tail (q=q@entry=0x8ec878) at bufq.c:387\r\n#3  0x00007ffff76818b0 in Curl_bufq_write (q=0x8ec878, buf=buf@entry=0x7ffff79f19e0 \"HTTP/3 \", len=len@entry=7, err=err@entry=0x7fffffffdb0c) at bufq.c:412\r\n#4  0x00007ffff76e6adb in write_resp_raw (data=<optimized out>, mem=mem@entry=0x7ffff79f19e0, memlen=memlen@entry=7, cf=<optimized out>) at vquic/curl_quiche.c:356\r\n#5  0x00007ffff76e6bbc in cb_each_header (name=<optimized out>, name_len=<optimized out>, value=0xe34980 \"200\", value_len=3, argp=0x7fffffffdbb0) at vquic/curl_quiche.c:384\r\n#6  0x00007ffff76fba3c in quiche_h3_event_for_each_header () from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/deps/curl/lib/libcurl.so.4\r\n#7  0x00007ffff76e6fc8 in h3_process_event (ev=0x935160, stream3_id=0, data=0x605c60, cf=0xd619f0) at vquic/curl_quiche.c:515\r\n#8  cf_poll_events (data=0x605c60, cf=0xd619f0) at vquic/curl_quiche.c:591\r\n#9  cf_process_ingress (cf=cf@entry=0xd619f0, data=data@entry=0x605c60) at vquic/curl_quiche.c:680\r\n#10 0x00007ffff76e709f in cf_quiche_recv () at vquic/curl_quiche.c:841\r\n#11 0x00007ffff76c1117 in Curl_read (data=data@entry=0x605c60, sockfd=<optimized out>, buf=buf@entry=0x60e690 \"\", sizerequested=sizerequested@entry=16384, \r\n    n=n@entry=0x7fffffffdcf0) at sendf.c:415\r\n#12 0x00007ffff76d2950 in readwrite_data (comeback=0x7fffffffdd6f, done=0x7fffffffdd6d, didwhat=<synthetic pointer>, k=0x605d30, conn=0x6126a0, data=0x605c60)\r\n    at transfer.c:461\r\n#13 Curl_readwrite (conn=0x6126a0, data=data@entry=0x605c60, done=done@entry=0x7fffffffdd6d, comeback=comeback@entry=0x7fffffffdd6f) at transfer.c:1115\r\n#14 0x00007ffff76b89e4 in multi_runsingle (multi=multi@entry=0x603010, nowp=nowp@entry=0x7fffffffddd0, data=0x605c60) at multi.c:2448\r\n#15 0x00007ffff76ba3aa in curl_multi_perform (multi=0x603010, running_handles=0x7fffffffdecc) at multi.c:2745\r\n#16 0x0000000000400f4c in main () at /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/temp.c:63\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637818516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9835918599,"node_id":"MEE_lADOAAiu0c5rto2mzwAAAAJKRDUH","url":"https://api.github.com/repos/curl/curl/issues/events/9835918599","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-17T10:26:02Z","performed_via_github_app":null},{"id":9835918613,"node_id":"SE_lADOAAiu0c5rto2mzwAAAAJKRDUV","url":"https://api.github.com/repos/curl/curl/issues/events/9835918613","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-17T10:26:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637828305","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1637828305","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1637828305,"node_id":"IC_kwDOAAiu0c5hn0bR","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-17T10:30:00Z","updated_at":"2023-07-17T10:30:00Z","body":"And found a new crash stack, with the same c test program:\r\n```\r\nProgram received signal SIGSEGV, Segmentation fault.\r\n__memcpy_sse2_unaligned () at ../sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S:37\r\n37      ../sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S: No such file or directory.\r\n(gdb) \r\n(gdb) bt\r\n#0  __memcpy_sse2_unaligned () at ../sysdeps/x86_64/multiarch/memcpy-sse2-unaligned.S:37\r\n#1  0x00007ffff7711fab in quiche::stream::RecvBuf::emit::hf79108df733a69dc () from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/deps/curl/lib/libcurl.so.4\r\n#2  0x00007ffff791cb65 in quiche::Connection::stream_recv::h85cc83393b74bc7a () from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/deps/curl/lib/libcurl.so.4\r\n#3  0x00007ffff76fcd74 in quiche::h3::stream::Stream::try_consume_data::h9ad1effc9976f6da ()\r\n   from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/deps/curl/lib/libcurl.so.4\r\n#4  0x00007ffff7707d89 in quiche::h3::Connection::recv_body::hac9d766d92f7f4f3 () from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/deps/curl/lib/libcurl.so.4\r\n#5  0x00007ffff76fbd2a in quiche_h3_recv_body () from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/deps/curl/lib/libcurl.so.4\r\n#6  0x00007ffff76e6768 in stream_resp_read (reader_ctx=<optimized out>, buf=<optimized out>, len=<optimized out>, err=0x7fffffffdba4) at vquic/curl_quiche.c:422\r\n#7  0x00007ffff7681dfc in chunk_slurpn (err=0x7fffffffdba4, reader_ctx=0x7fffffffdbb0, reader=0x7ffff76e6720 <stream_resp_read>, max_len=9653683, chunk=0x934e38)\r\n    at bufq.c:109\r\n#8  Curl_bufq_sipn (q=0x8ec878, max_len=<optimized out>, reader=0x7ffff76e6720 <stream_resp_read>, reader_ctx=0x7fffffffdbb0, err=0x7fffffffdba4) at bufq.c:597\r\n#9  0x00007ffff7681ed3 in bufq_slurpn (max_len=0, err=0x7fffffffdba4, reader_ctx=0x7fffffffdbb0, reader=0x7ffff76e6720 <stream_resp_read>, q=0x8ec878) at bufq.c:626\r\n#10 Curl_bufq_slurp (q=q@entry=0x8ec878, reader=reader@entry=0x7ffff76e6720 <stream_resp_read>, reader_ctx=reader_ctx@entry=0x7fffffffdbb0, err=err@entry=0x7fffffffdba4)\r\n    at bufq.c:658\r\n#11 0x00007ffff76e6f1a in cf_recv_body (data=0x6071c0, cf=0xe5e180) at vquic/curl_quiche.c:458\r\n#12 h3_process_event (ev=0xf60d00, stream3_id=0, data=0x6071c0, cf=0xe5e180) at vquic/curl_quiche.c:526\r\n#13 cf_poll_events (data=0x6071c0, cf=0xe5e180) at vquic/curl_quiche.c:591\r\n#14 cf_process_ingress (cf=cf@entry=0xe5e180, data=data@entry=0x6071c0) at vquic/curl_quiche.c:680\r\n#15 0x00007ffff76e709f in cf_quiche_recv () at vquic/curl_quiche.c:841\r\n#16 0x00007ffff76c1117 in Curl_read (data=data@entry=0x6071c0, sockfd=<optimized out>, buf=buf@entry=0x6135c0 \"\", sizerequested=sizerequested@entry=16384, \r\n    n=n@entry=0x7fffffffdcf0) at sendf.c:415\r\n#17 0x00007ffff76d2950 in readwrite_data (comeback=0x7fffffffdd6f, done=0x7fffffffdd6d, didwhat=<synthetic pointer>, k=0x607290, conn=0x6175d0, data=0x6071c0)\r\n    at transfer.c:461\r\n#18 Curl_readwrite (conn=0x6175d0, data=data@entry=0x6071c0, done=done@entry=0x7fffffffdd6d, comeback=comeback@entry=0x7fffffffdd6f) at transfer.c:1115\r\n---Type <return> to continue, or q <return> to quit---\r\n#19 0x00007ffff76b89e4 in multi_runsingle (multi=multi@entry=0x603010, nowp=nowp@entry=0x7fffffffddd0, data=0x6071c0) at multi.c:2448\r\n#20 0x00007ffff76ba3aa in curl_multi_perform (multi=0x603010, running_handles=0x7fffffffdecc) at multi.c:2745\r\n#21 0x0000000000400f4c in main () at /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/temp.c:63\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637828305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637873160","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1637873160","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1637873160,"node_id":"IC_kwDOAAiu0c5hn_YI","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-17T10:48:29Z","updated_at":"2023-07-17T10:48:29Z","body":"> @icing yes, I tried the test program aboved and compiled with `gcc`, it crash as well and always crash on the first request. The full output is:\r\n\r\nfix: not always crash, but high probability\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1637873160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9836122606,"node_id":"MEE_lADOAAiu0c5rto2mzwAAAAJKR1Hu","url":"https://api.github.com/repos/curl/curl/issues/events/9836122606","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-17T10:48:29Z","performed_via_github_app":null},{"id":9836122623,"node_id":"SE_lADOAAiu0c5rto2mzwAAAAJKR1H_","url":"https://api.github.com/repos/curl/curl/issues/events/9836122623","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-17T10:48:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1638254593","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1638254593","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1638254593,"node_id":"IC_kwDOAAiu0c5hpcgB","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-17T14:22:07Z","updated_at":"2023-07-17T14:22:07Z","body":"On my machine, it never does. Still looking. \r\n\r\nWhat are the values of `chunk->next` and `chunk` when it crashes? This looks like a use after free, but I find no code path for that to happen...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1638254593/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639199472","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1639199472","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1639199472,"node_id":"IC_kwDOAAiu0c5htDLw","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T02:41:14Z","updated_at":"2023-07-18T02:41:14Z","body":"rebuild with `-Og`, the `bt` info and param are showed below. It seems that ... `pool` is alreay in an invalid address?\r\n```\r\nProgram received signal SIGBUS, Bus error.\r\nbufcp_take (pool=0x1a9da98, pchunk=pchunk@entry=0x7fffffffda18) at bufq.c:191\r\n191         pool->spare = chunk->next;\r\n(gdb) \r\n(gdb) bt\r\n#0  bufcp_take (pool=0x1a9da98, pchunk=pchunk@entry=0x7fffffffda18) at bufq.c:191\r\n#1  0x00007ffff7681445 in get_spare (q=q@entry=0x1bc0048) at bufq.c:338\r\n#2  0x00007ffff7681568 in get_non_full_tail (q=q@entry=0x1bc0048) at bufq.c:387\r\n#3  0x00007ffff768185c in Curl_bufq_write (q=0x1bc0048, buf=buf@entry=0x7ffff79ed982 \"HTTP/3 \", len=len@entry=7, err=err@entry=0x7fffffffda9c) at bufq.c:412\r\n#4  0x00007ffff76e2ed1 in write_resp_raw (cf=<optimized out>, data=<optimized out>, mem=mem@entry=0x7ffff79ed982, memlen=memlen@entry=7) at vquic/curl_quiche.c:356\r\n#5  0x00007ffff76e2f71 in cb_each_header (name=<optimized out>, name_len=<optimized out>, value=0x1ccb190 \"200\", value_len=3, argp=0x7fffffffdb00) at vquic/curl_quiche.c:384\r\n#6  0x00007ffff76f7d60 in quiche_h3_event_for_each_header () from /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/deps/curl/lib/libcurl.so.4\r\n#7  0x00007ffff76e317b in h3_process_event (cf=cf@entry=0x1c85960, data=data@entry=0x615bd0, stream3_id=stream3_id@entry=0, ev=0x1d67230) at vquic/curl_quiche.c:515\r\n#8  0x00007ffff76e32b7 in cf_poll_events (cf=cf@entry=0x1c85960, data=data@entry=0x615bd0) at vquic/curl_quiche.c:591\r\n#9  0x00007ffff76e334d in cf_process_ingress (cf=cf@entry=0x1c85960, data=data@entry=0x615bd0) at vquic/curl_quiche.c:680\r\n#10 0x00007ffff76e3860 in cf_quiche_recv (cf=0x1c85960, data=0x615bd0, buf=0x1ab3580 \"\", len=16384, err=0x7fffffffdc7c) at vquic/curl_quiche.c:841\r\n#11 0x00007ffff7687b87 in Curl_cf_def_recv (cf=<optimized out>, data=<optimized out>, buf=<optimized out>, len=<optimized out>, err=<optimized out>) at cfilters.c:99\r\n#12 0x00007ffff7687b87 in Curl_cf_def_recv (cf=<optimized out>, data=<optimized out>, buf=<optimized out>, len=<optimized out>, err=<optimized out>) at cfilters.c:99\r\n#13 0x00007ffff7687b87 in Curl_cf_def_recv (cf=<optimized out>, data=<optimized out>, buf=<optimized out>, len=<optimized out>, err=<optimized out>) at cfilters.c:99\r\n#14 0x00007ffff7687cb7 in Curl_conn_recv (data=<optimized out>, num=<optimized out>, buf=<optimized out>, len=<optimized out>, code=0x7fffffffdc7c) at cfilters.c:180\r\n#15 0x00007ffff76be8aa in Curl_read (data=data@entry=0x615bd0, sockfd=<optimized out>, buf=buf@entry=0x1ab3580 \"\", sizerequested=sizerequested@entry=16384, \r\n    n=n@entry=0x7fffffffdcd8) at sendf.c:415\r\n#16 0x00007ffff76ce295 in readwrite_data (data=data@entry=0x615bd0, conn=conn@entry=0x1ab7590, k=k@entry=0x615ca0, didwhat=didwhat@entry=0x7fffffffdd2c, \r\n    done=done@entry=0x7fffffffdd9b, comeback=comeback@entry=0x7fffffffdd87) at transfer.c:461\r\n#17 0x00007ffff76cf5d6 in Curl_readwrite (conn=0x1ab7590, data=data@entry=0x615bd0, done=done@entry=0x7fffffffdd9b, comeback=comeback@entry=0x7fffffffdd87)\r\n    at transfer.c:1115\r\n#18 0x00007ffff76b7d72 in multi_runsingle (multi=multi@entry=0x603010, nowp=nowp@entry=0x7fffffffde70, data=data@entry=0x615bd0) at multi.c:2448\r\n#19 0x00007ffff76b8425 in curl_multi_perform (multi=multi@entry=0x603010, running_handles=running_handles@entry=0x7fffffffded8) at multi.c:2745\r\n#20 0x0000000000400ced in main () at /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/temp.c:65\r\n(gdb)  \r\n(gdb) p *pool\r\n$1 = {spare = 0x56434341494b5007, chunk_size = 312159073664503089, spare_count = 3555102911988239370, spare_max = 433564935608938507}\r\n(gdb)  \r\n(gdb) p *chunk\r\nCannot access memory at address 0x56434341494b5007\r\n(gdb)  \r\n(gdb) p *chunk->next\r\nCannot access memory at address 0x56434341494b5007\r\n```\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639199472/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639266078","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1639266078","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1639266078,"node_id":"IC_kwDOAAiu0c5htTce","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T03:17:52Z","updated_at":"2023-07-18T03:17:52Z","body":"By the way, I found that although the previous version `libcurl/8.0.1+quiche/0.16.0` not crash, but will get a `CURLE_WEIRD_SERVER_REPLY` error, the fail info is `Header without colon` in http.c:3756 (curl-8.0.1 release). Maybe caused by the same problem.\r\n```\r\nNew Request[6]: https://cloudflare-quic.com/\r\nNew Request[7]: https://cloudflare-quic.com/\r\nNew Request[8]: https://cloudflare-quic.com/\r\n* Hostname cloudflare-quic.com was found in DNS cache\r\n*   Trying 104.22.8.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* Hostname cloudflare-quic.com was found in DNS cache\r\n*   Trying 104.22.8.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* Hostname cloudflare-quic.com was found in DNS cache\r\n*   Trying 104.22.8.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n*   Trying [2606:4700:10::ac43:9eb]:443...\r\n* Immediate connect fail for 2606:4700:10::ac43:9eb: Network is unreachable\r\n*   Trying [2606:4700:10::6816:826]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:826: Network is unreachable\r\n*   Trying [2606:4700:10::6816:926]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:926: Network is unreachable\r\n*   Trying [2606:4700:10::ac43:9eb]:443...\r\n* Immediate connect fail for 2606:4700:10::ac43:9eb: Network is unreachable\r\n*   Trying [2606:4700:10::6816:826]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:826: Network is unreachable\r\n*   Trying [2606:4700:10::6816:926]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:926: Network is unreachable\r\n*   Trying [2606:4700:10::ac43:9eb]:443...\r\n* Immediate connect fail for 2606:4700:10::ac43:9eb: Network is unreachable\r\n*   Trying [2606:4700:10::6816:826]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:826: Network is unreachable\r\n*   Trying [2606:4700:10::6816:926]:443...\r\n* Immediate connect fail for 2606:4700:10::6816:926: Network is unreachable\r\n* ipv4 connect timeout after 2500ms, move on!\r\n*   Trying 104.22.9.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* ipv4 connect timeout after 2500ms, move on!\r\n*   Trying 104.22.9.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n* ipv4 connect timeout after 2500ms, move on!\r\n*   Trying 104.22.9.38:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n*  subjectAltName: host \"cloudflare-quic.com\" matched cert's \"cloudflare-quic.com\"\r\n* Connected to cloudflare-quic.com (104.22.9.38) port 443 (#8)\r\n* using HTTP/3\r\n* h2h3 [:method: GET]\r\n* h2h3 [:path: /]\r\n* h2h3 [:scheme: https]\r\n* h2h3 [:authority: cloudflare-quic.com]\r\n* h2h3 [accept: */*]\r\n* Using HTTP/3 Stream ID: 0 (easy handle 0x8470e0)\r\n> GET / HTTP/3\r\nHost: cloudflare-quic.com\r\naccept: */*\r\n\r\n*  subjectAltName: host \"cloudflare-quic.com\" matched cert's \"cloudflare-quic.com\"\r\n* Connected to cloudflare-quic.com (104.22.9.38) port 443 (#6)\r\n* using HTTP/3\r\n* h2h3 [:method: GET]\r\n* h2h3 [:path: /]\r\n* h2h3 [:scheme: https]\r\n* h2h3 [:authority: cloudflare-quic.com]\r\n* h2h3 [accept: */*]\r\n* Using HTTP/3 Stream ID: 0 (easy handle 0x6133d0)\r\n> GET / HTTP/3\r\nHost: cloudflare-quic.com\r\naccept: */*\r\n\r\n< HTTP/3 200 \r\n< date: Tue, 18 Jul 2023 03:05:13 GMT\r\n< content-type: text/html\r\n< content-length: 125959\r\n< server: cloudflare\r\n< cf-ray: 7e8780750f21aaa6-SJC\r\n< alt-svc: h3=\":443\"; ma=86400\r\n* ipv4 connect timeout after 1248ms, move on!\r\n*   Trying 172.67.9.235:443...\r\n*  CAfile: /etc/pki/tls/certs/ca-bundle.crt\r\n*  CApath: none\r\n\r\nBreakpoint 1, verify_header (data=data@entry=0x6133d0) at http.c:3756\r\n3756          failf(data, \"Header without colon\");\r\nMissing separate debuginfos, use: debuginfo-install libgcc-4.8.5-16.el7_4.2.x86_64 zlib-1.2.7-17.el7.x86_64\r\n\r\n(gdb) bt\r\n#0  verify_header (data=data@entry=0x6133d0) at http.c:3756\r\n#1  0x00007ffff76b0f90 in Curl_http_readwrite_headers (data=data@entry=0x6133d0, conn=conn@entry=0x61f620, nread=nread@entry=0x7fffffffdce8, \r\n    stop_reading=stop_reading@entry=0x7fffffffdce0) at http.c:4309\r\n#2  0x00007ffff76d928c in readwrite_data (data=data@entry=0x6133d0, conn=conn@entry=0x61f620, k=k@entry=0x6134a0, didwhat=didwhat@entry=0x7fffffffdd3c, \r\n    done=done@entry=0x7fffffffddab, comeback=comeback@entry=0x7fffffffdd97) at transfer.c:522\r\n#3  0x00007ffff76da432 in Curl_readwrite (conn=0x61f620, data=data@entry=0x6133d0, done=done@entry=0x7fffffffddab, comeback=comeback@entry=0x7fffffffdd97) at transfer.c:1119\r\n#4  0x00007ffff76c2d27 in multi_runsingle (multi=multi@entry=0x603010, nowp=nowp@entry=0x7fffffffde80, data=data@entry=0x6133d0) at multi.c:2443\r\n#5  0x00007ffff76c33d3 in curl_multi_perform (multi=multi@entry=0x603010, running_handles=running_handles@entry=0x7fffffffded8) at multi.c:2729\r\n#6  0x0000000000400ced in main () at /data/yldata/git_workspace/ThirdPartyLibs/libcurl/demo/temp.c:65\r\n\r\n(gdb) p *k\r\n$2 = {size = 125959, maxdownload = 125959, bytecount = 0, writebytecount = 0, headerbytecount = 179, deductheadercount = 0, pendingheader = 0, start = {tv_sec = 106326379, \r\n    tv_usec = 991654}, badheader = HEADER_NORMAL, headerline = 8, \r\n  str = 0x62069d \"date: Tue, 18 Jul 2023 03:05:14 GMT\\r\\ncontent-type: text/html\\r\\ncontent-length: 125959\\r\\nserver: cloudflare\\r\\ncf-ray: 7e878079de6a9669-SJC\\r\\nalt-svc: h3=\\\":443\\\"; ma=86400\\r\\n\\r\\n<!DOCTYPE html>\\n<html lang=\\\"en\\\" \"..., offset = 0, httpcode = 200, keepon = 1, start100 = {tv_sec = 0, tv_usec = 0}, \r\n  exp100 = EXP100_SEND_DATA, upgr101 = UPGR101_INIT, writer_stack = 0x0, timeofdoc = 0, bodywrites = 0, location = 0x0, newurl = 0x0, upload_present = 0, \r\n  upload_fromhere = 0x0, p = {file = 0xf3f440, ftp = 0xf3f440, http = 0xf3f440, imap = 0xf3f440, ldap = 0xf3f440, mqtt = 0xf3f440, pop3 = 0xf3f440, rtsp = 0xf3f440, \r\n    smb = 0xf3f440, smtp = 0xf3f440, ssh = 0xf3f440, telnet = 0xf3f440}, doh = 0x0, setcookies = 0 '\\000', writer_stack_depth = 0 '\\000', header = 1, content_range = 0, \r\n  upload_done = 1, ignorebody = 0, http_bodyless = 0, chunk = 0, ignore_cl = 0, upload_chunky = 0, getheader = 1, forbidchunk = 0, no_body = 0}\r\n\r\n(gdb) p header\r\n$5 = 0x1cb2a70 \"HTTP/3 200 \\r\\n\"\r\n(gdb) p hlen\r\n$6 = 13\r\n(gdb) p ptr\r\n$7 = 0x0\r\n\r\n(gdb) set print elements 0\r\n(gdb) p k->str\r\n$13 = 0x62069d \"date: Tue, 18 Jul 2023 03:05:14 GMT\\r\\ncontent-type: text/html\\r\\ncontent-length: 125959\\r\\nserver: cloudflare\\r\\ncf-ray: 7e878079de6a9669-SJC\\r\\nalt-svc: h3=\\\":443\\\"; ma=86400\\r\\n\\r\\n<!DOCTYPE html>\\n<html lang=\\\"en\\\" itemscope=\\\"\\\" itemtype=\\\"http://schema.org/Article\\\"><head><meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\">\\n    <title>QUIC | Cloudflare</title>\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1\\\">\\n    <meta name=\\\"description\\\" content=\\\"Cloudflare Supports QUIC\\\">\\n    <link rel=\\\"canonical\\\" href=\\\"https://cloudflare-quic.com\\\">\\n    <meta itemprop=\\\"name\\\" content=\\\"QUIC | Cloudflare\\\">\\n    <meta itemprop=\\\"description\\\" content=\\\"Cloudflare Supports QUIC\\\">\\n    <meta itemprop=\\\"image\\\" content=\\\"https://www.cloudflare.com/img/cf-facebook-card.png\\\">\\n    <meta name=\\\"twitter:card\\\" content=\\\"summary\\\">\\n    <meta name=\\\"twitter:title\\\" content=\\\"QUIC | Cloudflare\\\">\\n    <meta name=\\\"twitter:description\\\" content=\\\"Cloudflare Supports QUIC\\\">\\n    <meta name=\\\"twitter:site\\\" content=\\\"@cloudflare\\\">\\n    <meta name=\\\"twitter:creator\\\" content=\\\"@cloudflare\\\">\\n    <meta name=\\\"twitter:image\\\" content=\\\"https://www.cloudflare.com/img/cf-twitter-card.png\\\">\\n    <meta property=\\\"og:title\\\" content=\\\"QUIC | Cloudflare\\\">\\n    <meta property=\\\"og:type\\\" content=\\\"article\\\">\\n    <meta property=\\\"og:url\\\" content=\\\"https://cloudflare-quic.com\\\">\\n    <meta property=\\\"og:image\\\" content=\\\"https://www.cloudflare.com/img/cf-facebook-card.png\\\">\\n    <meta property=\\\"og:description\\\" content=\\\"Cloudflare Supports QUIC\\\">\\n    <meta property=\\\"og:site_name\\\" content=\\\"Cloudflare\\\">\\n    <meta class=\\\"swiftype\\\" name=\\\"language\\\" data-type=\\\"string\\\" content=\\\"en\\\">\\n    <meta class=\\\"swiftype\\\" name=\\\"title\\\" data-type=\\\"string\\\" content=\\\"QUIC\\\">\\n    <meta class=\\\"swiftype\\\" name=\\\"description\\\" data-type=\\\"string\\\" content=\\\"Cloudflare Supports QUIC\\\">\\n    <meta class=\\\"swiftype\\\" name=\\\"url\\\" data-type=\\\"enum\\\" content=\\\"https://cloudflare-quic.com\\\">\\n    <link rel=\\\"icon\\\" type=\\\"image/x-icon\\\" href=\\\"https://www.cloudflare.com/favicon.ico\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"57x57\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-57x57.png\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"114x114\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-114x114.png\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"72x72\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-72x72.png\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"144x144\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-144x144.png\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"60x60\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-60x60.png\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"120x120\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-120x120.png\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"76x76\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-76x76.png\\\">\\n    <link rel=\\\"apple-touch-icon-precomposed\\\" sizes=\\\"152x152\\\" href=\\\"https://www.cloudflare.com/apple-touch-icon-152x152.png\\\">\\n    <link rel=\\\"icon\\\" type=\\\"image/png\\\" href=\\\"https://www.cloudflare.com/favicon-196x196.png\\\" sizes=\\\"196x196\\\">\\n    <link rel=\\\"icon\\\" type=\\\"image/png\\\" href=\\\"https://www.cloudflare.com/favicon-96x96.png\\\" sizes=\\\"96x96\\\">\\n    <link rel=\\\"icon\\\" type=\\\"image/png\\\" href=\\\"https://www.cloudflare.com/favicon-32x32.png\\\" sizes=\\\"32x32\\\">\\n    <link rel=\\\"icon\\\" type=\\\"image/png\\\" href=\\\"https://www.cloudflare.com/favicon-16x16.png\\\" sizes=\\\"16x16\\\">\\n    <link rel=\\\"icon\\\" type=\\\"image/png\\\" href=\\\"https://www.cloudflare.com/favicon-128.png\\\" sizes=\\\"128x128\\\">\\n    <meta name=\\\"application-name\\\" content=\\\"Cloudflare\\\">\\n    <meta name=\\\"msapplication-TileColor\\\" content=\\\"#FFFFFF\\\">\\n    <meta name=\\\"msapplication-TileImage\\\" content=\\\"/mstile-144x144.png\\\">\\n    <meta name=\\\"msapplication-square70x70logo\\\" content=\\\"/mstile-70x70.png\\\">\\n    <meta name=\\\"msapplication-square150x150logo\\\" content=\\\"/mstile-150x150.png\\\">\\n    <meta name=\\\"msapplication-wide310x150logo\\\" content=\\\"/mstile-310x150.png\\\">\\n    <meta name=\\\"msapplication-square310x310logo\\\" content=\\\"/mstile-310x310.png\\\">\\n    <noscript><style>.nojs-hide{display: none;}</style></noscript>\\n    <style>.async-hide {opacity: 0 !important}</style>\\n    <style> html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}b,strong{font-weight:bolder}img{border-style:none}button,input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button{text-transform:none}[type=submit],button{-webkit-appearance:button}[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}a,---Type <return> to continue, or q <return> to quit---\r\nbody,div,footer,form,h1,h2,h4,header,html,input[type=text],li,nav,p,section,table,td,tr,ul{box-sizing:border-box}img{max-width:100%}.b{font-weight:700!important}/*!normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css*/html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}a{background-color:transparent}b,strong{font-weight:bolder}img{border-style:none}button,input{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button{text-transform:none}[type=submit],button{-webkit-appearance:button}[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,Oxygen,Ubuntu,Cantarell,fira sans,droid sans,helvetica neue,sans-serif}.hidden-element{display:none}.header-language-picker-dropdown{list-style-type:none;margin:0;padding:0}.header-language-picker-dropdown li{line-height:1.7em}.header-language-picker-dropdown li a{text-decoration:none}.top-nav__item-list a{text-decoration:none}/*!normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css*/html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}b,strong{font-weight:inherit}b,strong{font-weight:bolder}img{border-style:none}button,input{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button{text-transform:none}[type=submit],button{-webkit-appearance:button}[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}canvas{display:inline-block}*{box-sizing:border-box;font-weight:300}body{font-size:16px;line-height:1.7em;font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,Oxygen,Ubuntu,Cantarell,fira sans,droid sans,helvetica neue,sans-serif;color:#424242;-ms-scroll-chaining:none;overscroll-behavior:none}button{border:none;outline:0}button:focus{outline:auto;outline-color:#0055dc}.site-content{margin:100px 0 0;width:100%}@media(min-width:1000px){.site-content{margin:100px 0 0}}section{position:relative;height:100%;z-index:0}a:link{color:#3475c0;text-decoration:none;font-weight:300}a:visited{color:#3475c0;font\"\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639266078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639752877","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1639752877","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1639752877,"node_id":"IC_kwDOAAiu0c5hvKSt","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T08:26:35Z","updated_at":"2023-07-18T08:26:35Z","body":"quiche seems to have bugs handling more than one connection: https://github.com/cloudflare/quiche/issues/1554\r\n\r\nI see this in local tests that quiche events get mixed up and some requests stall. Until we have verified that quiche is fixed, I would rest the analysis here.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639752877/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639922891","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1639922891","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1639922891,"node_id":"IC_kwDOAAiu0c5hvzzL","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T10:04:30Z","updated_at":"2023-07-18T10:04:30Z","body":"Thanks! ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1639922891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"LPardue","id":6571445,"node_id":"MDQ6VXNlcjY1NzE0NDU=","avatar_url":"https://avatars.githubusercontent.com/u/6571445?v=4","gravatar_id":"","url":"https://api.github.com/users/LPardue","html_url":"https://github.com/LPardue","followers_url":"https://api.github.com/users/LPardue/followers","following_url":"https://api.github.com/users/LPardue/following{/other_user}","gists_url":"https://api.github.com/users/LPardue/gists{/gist_id}","starred_url":"https://api.github.com/users/LPardue/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/LPardue/subscriptions","organizations_url":"https://api.github.com/users/LPardue/orgs","repos_url":"https://api.github.com/users/LPardue/repos","events_url":"https://api.github.com/users/LPardue/events{/privacy}","received_events_url":"https://api.github.com/users/LPardue/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T12:24:34Z","updated_at":"2023-07-18T12:24:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/cloudflare/quiche/issues/1554","repository_url":"https://api.github.com/repos/cloudflare/quiche","labels_url":"https://api.github.com/repos/cloudflare/quiche/issues/1554/labels{/name}","comments_url":"https://api.github.com/repos/cloudflare/quiche/issues/1554/comments","events_url":"https://api.github.com/repos/cloudflare/quiche/issues/1554/events","html_url":"https://github.com/cloudflare/quiche/issues/1554","id":1787989038,"node_id":"I_kwDOCP5sDM5qkowu","number":1554,"title":"Quiche-server can't handle more than one connection","user":{"login":"DerLary","id":73441327,"node_id":"MDQ6VXNlcjczNDQxMzI3","avatar_url":"https://avatars.githubusercontent.com/u/73441327?v=4","gravatar_id":"","url":"https://api.github.com/users/DerLary","html_url":"https://github.com/DerLary","followers_url":"https://api.github.com/users/DerLary/followers","following_url":"https://api.github.com/users/DerLary/following{/other_user}","gists_url":"https://api.github.com/users/DerLary/gists{/gist_id}","starred_url":"https://api.github.com/users/DerLary/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DerLary/subscriptions","organizations_url":"https://api.github.com/users/DerLary/orgs","repos_url":"https://api.github.com/users/DerLary/repos","events_url":"https://api.github.com/users/DerLary/events{/privacy}","received_events_url":"https://api.github.com/users/DerLary/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2023-07-04T13:59:24Z","updated_at":"2024-04-27T01:58:36Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":150891532,"node_id":"MDEwOlJlcG9zaXRvcnkxNTA4OTE1MzI=","name":"quiche","full_name":"cloudflare/quiche","private":false,"owner":{"login":"cloudflare","id":314135,"node_id":"MDEyOk9yZ2FuaXphdGlvbjMxNDEzNQ==","avatar_url":"https://avatars.githubusercontent.com/u/314135?v=4","gravatar_id":"","url":"https://api.github.com/users/cloudflare","html_url":"https://github.com/cloudflare","followers_url":"https://api.github.com/users/cloudflare/followers","following_url":"https://api.github.com/users/cloudflare/following{/other_user}","gists_url":"https://api.github.com/users/cloudflare/gists{/gist_id}","starred_url":"https://api.github.com/users/cloudflare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cloudflare/subscriptions","organizations_url":"https://api.github.com/users/cloudflare/orgs","repos_url":"https://api.github.com/users/cloudflare/repos","events_url":"https://api.github.com/users/cloudflare/events{/privacy}","received_events_url":"https://api.github.com/users/cloudflare/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/cloudflare/quiche","description":" Savoury implementation of the QUIC transport protocol and HTTP/3","fork":false,"url":"https://api.github.com/repos/cloudflare/quiche","forks_url":"https://api.github.com/repos/cloudflare/quiche/forks","keys_url":"https://api.github.com/repos/cloudflare/quiche/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cloudflare/quiche/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cloudflare/quiche/teams","hooks_url":"https://api.github.com/repos/cloudflare/quiche/hooks","issue_events_url":"https://api.github.com/repos/cloudflare/quiche/issues/events{/number}","events_url":"https://api.github.com/repos/cloudflare/quiche/events","assignees_url":"https://api.github.com/repos/cloudflare/quiche/assignees{/user}","branches_url":"https://api.github.com/repos/cloudflare/quiche/branches{/branch}","tags_url":"https://api.github.com/repos/cloudflare/quiche/tags","blobs_url":"https://api.github.com/repos/cloudflare/quiche/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cloudflare/quiche/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cloudflare/quiche/git/refs{/sha}","trees_url":"https://api.github.com/repos/cloudflare/quiche/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cloudflare/quiche/statuses/{sha}","languages_url":"https://api.github.com/repos/cloudflare/quiche/languages","stargazers_url":"https://api.github.com/repos/cloudflare/quiche/stargazers","contributors_url":"https://api.github.com/repos/cloudflare/quiche/contributors","subscribers_url":"https://api.github.com/repos/cloudflare/quiche/subscribers","subscription_url":"https://api.github.com/repos/cloudflare/quiche/subscription","commits_url":"https://api.github.com/repos/cloudflare/quiche/commits{/sha}","git_commits_url":"https://api.github.com/repos/cloudflare/quiche/git/commits{/sha}","comments_url":"https://api.github.com/repos/cloudflare/quiche/comments{/number}","issue_comment_url":"https://api.github.com/repos/cloudflare/quiche/issues/comments{/number}","contents_url":"https://api.github.com/repos/cloudflare/quiche/contents/{+path}","compare_url":"https://api.github.com/repos/cloudflare/quiche/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cloudflare/quiche/merges","archive_url":"https://api.github.com/repos/cloudflare/quiche/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cloudflare/quiche/downloads","issues_url":"https://api.github.com/repos/cloudflare/quiche/issues{/number}","pulls_url":"https://api.github.com/repos/cloudflare/quiche/pulls{/number}","milestones_url":"https://api.github.com/repos/cloudflare/quiche/milestones{/number}","notifications_url":"https://api.github.com/repos/cloudflare/quiche/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cloudflare/quiche/labels{/name}","releases_url":"https://api.github.com/repos/cloudflare/quiche/releases{/id}","deployments_url":"https://api.github.com/repos/cloudflare/quiche/deployments","created_at":"2018-09-29T18:22:05Z","updated_at":"2025-11-10T10:54:16Z","pushed_at":"2025-11-10T10:05:26Z","git_url":"git://github.com/cloudflare/quiche.git","ssh_url":"git@github.com:cloudflare/quiche.git","clone_url":"https://github.com/cloudflare/quiche.git","svn_url":"https://github.com/cloudflare/quiche","homepage":"https://docs.quic.tech/quiche/","size":24810,"stargazers_count":10854,"watchers_count":10854,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":891,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":266,"license":{"key":"bsd-2-clause","name":"BSD 2-Clause \"Simplified\" License","spdx_id":"BSD-2-Clause","url":"https://api.github.com/licenses/bsd-2-clause","node_id":"MDc6TGljZW5zZTQ="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["http3","network-programming","protocol","quic","rust"],"visibility":"public","forks":891,"open_issues":266,"watchers":10854,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hello,\r\n\r\nI am currently working on my Bachelor's Thesis, and we plan to use the quiche client and server application to test QUIC stacks. When opening a single connection from the client to the server, everything works fine. However, when opening multiple connections simultaneously to the server, only one request gets completed correctly, while the others seem to be starved.\r\n\r\nSpecifically, we have a testbed of machines connected to each other via Gigabit Ethernet. We use one machine to start the server and another machine to start the client application. On the server machine, I have placed two files (file1 and file2) of the same size, 100MB each, which are then requested by the clients. In most cases, only one request is completed correctly, while the others end with a timeout.\r\n\r\n# Steps to reproduce:\r\n\r\n1. Place two 100MB files on the server (file1 and file2).\r\n2. Start the server: ``/home/test/quiche/target/debug/quiche-server --cert /home/test/quiche/apps/src/bin/cert.crt --key /home/test/quiche/apps/src/bin/cert.key --listen 0.0.0.0:4000 --root /home/test/server_files/ --cc-algorithm cubic\r\n``\r\n3. Start the clients: ``/home/test/quiche/target/debug/quiche-client --cc-algorithm cubic --no-verify https://137.226.59.170:4000/file1 --dump-responses /home/test/req`` and the same command with file2 for another client on the same machine.\r\nNote: The clients are started manually directly one after another.\r\nAfter approximately 8 seconds, one of the clients will terminate correctly (not necessarily the one that was started first), while the other terminates after an additional 30 seconds with the error: ``[ERROR quiche_apps::common] connection timed out after 37.510056927s and only completed 0/1 requests.\r\n``\r\nWhen inspecting the requested files, it can be seen that only about 10% of the timed-out connection was received, specifically 12,872,599 bytes out of 104,857,600 bytes in this exact run.\r\nThe same error occurs when starting the clients from different machines to the same server.\r\nI have attached the sqlog file for both the client and server sides. The server-096b5... corresponds to the correct client request of client-e633c..., and the server-fb153... corresponds to the timed-out client-fc2582. [sqlogs.zip](https://github.com/cloudflare/quiche/files/11949797/sqlogs.zip)\r\n\r\n## Visualization\r\nAdditionally, we have modified the quiche stack to include the Spin Bit logic (spinning the Spin Bit once every RTT to measure the cwnd). Using this modification, we conducted tests by emulating a bandwidth of 50 Mbps, 5ms RTT, and using a Droptail queue with a size equal to the BDP. We placed a classifier in the middle to track the cwnd and compare the results with the values in the logging file.\r\nThe following graph shows the cwnd in bytes per RTT (one Spin Bit cycle) [quiche_NOT_successfull.pdf](https://github.com/cloudflare/quiche/files/11949842/quiche_NOT_successfull.pdf)\r\n.\r\nHere we can also observe that one connection starves until it gets terminated.\r\n\r\nCould there be any flaws in handling multiple connections in ``/quiche/apps/src/bin/quiche-server.rs``, such as when the break statement is used within the for loop over all clients, potentially leaving the loop without considering the remaining clients?\r\n\r\nThank you in advance for your assistance.\r\n\r\nBest regards,\r\nLars","reactions":{"url":"https://api.github.com/repos/cloudflare/quiche/issues/1554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/cloudflare/quiche/issues/1554/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T15:40:33Z","updated_at":"2023-07-18T15:40:33Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/curl/curl/issues/11462","repository_url":"https://api.github.com/repos/curl/curl","labels_url":"https://api.github.com/repos/curl/curl/issues/11462/labels{/name}","comments_url":"https://api.github.com/repos/curl/curl/issues/11462/comments","events_url":"https://api.github.com/repos/curl/curl/issues/11462/events","html_url":"https://github.com/curl/curl/pull/11462","id":1810205116,"node_id":"PR_kwDOAAiu0c5VzP12","number":11462,"title":"HTTP/3, quiche, fix lookup of transfer at multi","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1141438010,"node_id":"MDU6TGFiZWwxMTQxNDM4MDEw","url":"https://api.github.com/repos/curl/curl/labels/HTTP/3","name":"HTTP/3","color":"97fceb","default":false,"description":"h3 or quic related"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2023-07-18T15:40:32Z","updated_at":"2023-07-19T07:29:22Z","closed_at":"2023-07-19T07:29:22Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":569041,"node_id":"MDEwOlJlcG9zaXRvcnk1NjkwNDE=","name":"curl","full_name":"curl/curl","private":false,"owner":{"login":"curl","id":16928085,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE2OTI4MDg1","avatar_url":"https://avatars.githubusercontent.com/u/16928085?v=4","gravatar_id":"","url":"https://api.github.com/users/curl","html_url":"https://github.com/curl","followers_url":"https://api.github.com/users/curl/followers","following_url":"https://api.github.com/users/curl/following{/other_user}","gists_url":"https://api.github.com/users/curl/gists{/gist_id}","starred_url":"https://api.github.com/users/curl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/curl/subscriptions","organizations_url":"https://api.github.com/users/curl/orgs","repos_url":"https://api.github.com/users/curl/repos","events_url":"https://api.github.com/users/curl/events{/privacy}","received_events_url":"https://api.github.com/users/curl/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/curl/curl","description":"A command line tool and library for transferring data with URL syntax, supporting DICT, FILE, FTP, FTPS, GOPHER, GOPHERS, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, MQTT, POP3, POP3S, RTMP, RTMPS, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET, TFTP, WS and WSS. libcurl offers a myriad of powerful features","fork":false,"url":"https://api.github.com/repos/curl/curl","forks_url":"https://api.github.com/repos/curl/curl/forks","keys_url":"https://api.github.com/repos/curl/curl/keys{/key_id}","collaborators_url":"https://api.github.com/repos/curl/curl/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/curl/curl/teams","hooks_url":"https://api.github.com/repos/curl/curl/hooks","issue_events_url":"https://api.github.com/repos/curl/curl/issues/events{/number}","events_url":"https://api.github.com/repos/curl/curl/events","assignees_url":"https://api.github.com/repos/curl/curl/assignees{/user}","branches_url":"https://api.github.com/repos/curl/curl/branches{/branch}","tags_url":"https://api.github.com/repos/curl/curl/tags","blobs_url":"https://api.github.com/repos/curl/curl/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/curl/curl/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/curl/curl/git/refs{/sha}","trees_url":"https://api.github.com/repos/curl/curl/git/trees{/sha}","statuses_url":"https://api.github.com/repos/curl/curl/statuses/{sha}","languages_url":"https://api.github.com/repos/curl/curl/languages","stargazers_url":"https://api.github.com/repos/curl/curl/stargazers","contributors_url":"https://api.github.com/repos/curl/curl/contributors","subscribers_url":"https://api.github.com/repos/curl/curl/subscribers","subscription_url":"https://api.github.com/repos/curl/curl/subscription","commits_url":"https://api.github.com/repos/curl/curl/commits{/sha}","git_commits_url":"https://api.github.com/repos/curl/curl/git/commits{/sha}","comments_url":"https://api.github.com/repos/curl/curl/comments{/number}","issue_comment_url":"https://api.github.com/repos/curl/curl/issues/comments{/number}","contents_url":"https://api.github.com/repos/curl/curl/contents/{+path}","compare_url":"https://api.github.com/repos/curl/curl/compare/{base}...{head}","merges_url":"https://api.github.com/repos/curl/curl/merges","archive_url":"https://api.github.com/repos/curl/curl/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/curl/curl/downloads","issues_url":"https://api.github.com/repos/curl/curl/issues{/number}","pulls_url":"https://api.github.com/repos/curl/curl/pulls{/number}","milestones_url":"https://api.github.com/repos/curl/curl/milestones{/number}","notifications_url":"https://api.github.com/repos/curl/curl/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/curl/curl/labels{/name}","releases_url":"https://api.github.com/repos/curl/curl/releases{/id}","deployments_url":"https://api.github.com/repos/curl/curl/deployments","created_at":"2010-03-18T22:32:22Z","updated_at":"2025-11-10T09:41:55Z","pushed_at":"2025-11-10T12:18:24Z","git_url":"git://github.com/curl/curl.git","ssh_url":"git@github.com:curl/curl.git","clone_url":"https://github.com/curl/curl.git","svn_url":"https://github.com/curl/curl","homepage":"https://curl.se/","size":118458,"stargazers_count":39830,"watchers_count":39830,"language":"C","has_issues":true,"has_projects":false,"has_downloads":false,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6941,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":43,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","client","curl","ftp","gopher","hacktoberfest","http","https","imaps","ldap","libcurl","library","mqtt","pop3","scp","sftp","transfer-data","transferring-data","user-agent","websocket"],"visibility":"public","forks":6941,"open_issues":43,"watchers":39830,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/curl/curl/pulls/11462","html_url":"https://github.com/curl/curl/pull/11462","diff_url":"https://github.com/curl/curl/pull/11462.diff","patch_url":"https://github.com/curl/curl/pull/11462.patch","merged_at":null},"body":"- refs #11449 where weirdness in quiche multi connection tranfers was observed\r\n- fixes lookup of transfer for a quiche event to take the connection into account\r\n- formerly, a transfer with the same stream_id, but on another connection could be found","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/11462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/curl/curl/issues/11462/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9852162720,"node_id":"REFE_lADOAAiu0c5rto2mzwAAAAJLPBKg","url":"https://api.github.com/repos/curl/curl/issues/events/9852162720","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bb3ea50bea16f3f0385aec257db2dd0e6a0a05ed","commit_url":"https://api.github.com/repos/icing/curl/commits/bb3ea50bea16f3f0385aec257db2dd0e6a0a05ed","created_at":"2023-07-18T15:40:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1640479986","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1640479986","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1640479986,"node_id":"IC_kwDOAAiu0c5hx7zy","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-18T15:42:35Z","updated_at":"2023-07-18T15:42:35Z","body":"@Cering please check #11462 for a possible fix to your problems.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1640479986/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9852185873,"node_id":"MEE_lADOAAiu0c5rto2mzwAAAAJLPG0R","url":"https://api.github.com/repos/curl/curl/issues/events/9852185873","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-18T15:42:36Z","performed_via_github_app":null},{"id":9852185906,"node_id":"SE_lADOAAiu0c5rto2mzwAAAAJLPG0y","url":"https://api.github.com/repos/curl/curl/issues/events/9852185906","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-18T15:42:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641295980","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1641295980","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1641295980,"node_id":"IC_kwDOAAiu0c5h1DBs","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T02:40:17Z","updated_at":"2023-07-19T02:40:17Z","body":"> @Cering please check #11462 for a possible fix to your problems.\r\n\r\nThanks, I add this commit to `curl-8.1.2` release code, unfortunately, the test program still crash on the line `pool->spare = chunk->next;` in bufq.c:191, and the `bt` info same with above :(","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641295980/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9857222004,"node_id":"MEE_lADOAAiu0c5rto2mzwAAAAJLiUV0","url":"https://api.github.com/repos/curl/curl/issues/events/9857222004","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-07-19T02:40:17Z","performed_via_github_app":null},{"id":9857222012,"node_id":"SE_lADOAAiu0c5rto2mzwAAAAJLiUV8","url":"https://api.github.com/repos/curl/curl/issues/events/9857222012","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-07-19T02:40:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641529268","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1641529268","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1641529268,"node_id":"IC_kwDOAAiu0c5h17-0","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T07:03:06Z","updated_at":"2023-07-19T07:03:06Z","body":"Well, at least the `CURLE_WEIRD_SERVER_REPLY` thing is fixed now. Still hunting the pool spare crash...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641529268/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9858922808,"node_id":"REFE_lADOAAiu0c5rto2mzwAAAAJLozk4","url":"https://api.github.com/repos/curl/curl/issues/events/9858922808","actor":{"login":"bagder","id":177011,"node_id":"MDQ6VXNlcjE3NzAxMQ==","avatar_url":"https://avatars.githubusercontent.com/u/177011?v=4","gravatar_id":"","url":"https://api.github.com/users/bagder","html_url":"https://github.com/bagder","followers_url":"https://api.github.com/users/bagder/followers","following_url":"https://api.github.com/users/bagder/following{/other_user}","gists_url":"https://api.github.com/users/bagder/gists{/gist_id}","starred_url":"https://api.github.com/users/bagder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bagder/subscriptions","organizations_url":"https://api.github.com/users/bagder/orgs","repos_url":"https://api.github.com/users/bagder/repos","events_url":"https://api.github.com/users/bagder/events{/privacy}","received_events_url":"https://api.github.com/users/bagder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3b4ecdd0a89a202592e9959321d6cc5ceaca238d","commit_url":"https://api.github.com/repos/curl/curl/commits/3b4ecdd0a89a202592e9959321d6cc5ceaca238d","created_at":"2023-07-19T07:29:22Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641694629","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1641694629","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1641694629,"node_id":"IC_kwDOAAiu0c5h2kWl","user":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T08:54:51Z","updated_at":"2023-07-19T08:54:51Z","body":"I understood the problem now. It was staring me in the face from the beginning:\r\n\r\nYour example runs into several failed CONNECT attempts for ipv6 addresses before finally succeeding for ipv4. A bug in curl's quiche implementation did H3 initialization for the transfer too early, before the CONNECT was successful. This led to references from the H3 state to a connect attempt that had failed and was free'ed. My attempts to reproduce never had these failed connects, so the error did not show up.\r\n\r\nPlease see #11469 for the fix of this issue.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641694629/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9859837290,"node_id":"LE_lADOAAiu0c5rto2mzwAAAAJLsS1q","url":"https://api.github.com/repos/curl/curl/issues/events/9859837290","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-07-19T08:56:24Z","label":{"name":"HTTP/3","color":"97fceb"},"performed_via_github_app":null},{"id":9859837303,"node_id":"LE_lADOAAiu0c5rto2mzwAAAAJLsS13","url":"https://api.github.com/repos/curl/curl/issues/events/9859837303","actor":{"login":"icing","id":15102,"node_id":"MDQ6VXNlcjE1MTAy","avatar_url":"https://avatars.githubusercontent.com/u/15102?v=4","gravatar_id":"","url":"https://api.github.com/users/icing","html_url":"https://github.com/icing","followers_url":"https://api.github.com/users/icing/followers","following_url":"https://api.github.com/users/icing/following{/other_user}","gists_url":"https://api.github.com/users/icing/gists{/gist_id}","starred_url":"https://api.github.com/users/icing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/icing/subscriptions","organizations_url":"https://api.github.com/users/icing/orgs","repos_url":"https://api.github.com/users/icing/repos","events_url":"https://api.github.com/users/icing/events{/privacy}","received_events_url":"https://api.github.com/users/icing/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-07-19T08:56:24Z","label":{"name":"quiche","color":"953CA8"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641881580","html_url":"https://github.com/curl/curl/issues/11449#issuecomment-1641881580","issue_url":"https://api.github.com/repos/curl/curl/issues/11449","id":1641881580,"node_id":"IC_kwDOAAiu0c5h3R_s","user":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-07-19T11:06:30Z","updated_at":"2023-07-19T11:06:30Z","body":"> Please see https://github.com/curl/curl/pull/11469 for the fix of this issue.\r\n\r\n@icing Great! The test program is never crashed after update.\r\n\r\nIt seems this bug introduced from #10772 in `curl-8.1.0`?\r\n\r\nI am using `curl-8.0.1` for service now, and not found this crash. Before update to the latest curl version, do I need to update #11469 on `curl-8.0.1`'s code?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/curl/curl/issues/comments/1641881580/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Cering","id":9027486,"node_id":"MDQ6VXNlcjkwMjc0ODY=","avatar_url":"https://avatars.githubusercontent.com/u/9027486?v=4","gravatar_id":"","url":"https://api.github.com/users/Cering","html_url":"https://github.com/Cering","followers_url":"https://api.github.com/users/Cering/followers","following_url":"https://api.github.com/users/Cering/following{/other_user}","gists_url":"https://api.github.com/users/Cering/gists{/gist_id}","starred_url":"https://api.github.com/users/Cering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cering/subscriptions","organizations_url":"https://api.github.com/users/Cering/orgs","repos_url":"https://api.github.com/users/Cering/repos","events_url":"https://api.github.com/users/Cering/events{/privacy}","received_events_url":"https://api.github.com/users/Cering/received_events","type":"User","user_view_type":"public","site_admin":false}}]