{"url":"https://api.github.com/repos/yewstack/yew/issues/996","repository_url":"https://api.github.com/repos/yewstack/yew","labels_url":"https://api.github.com/repos/yewstack/yew/issues/996/labels{/name}","comments_url":"https://api.github.com/repos/yewstack/yew/issues/996/comments","events_url":"https://api.github.com/repos/yewstack/yew/issues/996/events","html_url":"https://github.com/yewstack/yew/issues/996","id":575411029,"node_id":"MDU6SXNzdWU1NzU0MTEwMjk=","number":996,"title":"[web-sys] yew 0.13 fails to compile","user":{"login":"Rulliam","id":51701962,"node_id":"MDQ6VXNlcjUxNzAxOTYy","avatar_url":"https://avatars.githubusercontent.com/u/51701962?v=4","gravatar_id":"","url":"https://api.github.com/users/Rulliam","html_url":"https://github.com/Rulliam","followers_url":"https://api.github.com/users/Rulliam/followers","following_url":"https://api.github.com/users/Rulliam/following{/other_user}","gists_url":"https://api.github.com/users/Rulliam/gists{/gist_id}","starred_url":"https://api.github.com/users/Rulliam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rulliam/subscriptions","organizations_url":"https://api.github.com/users/Rulliam/orgs","repos_url":"https://api.github.com/users/Rulliam/repos","events_url":"https://api.github.com/users/Rulliam/events{/privacy}","received_events_url":"https://api.github.com/users/Rulliam/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":792840709,"node_id":"MDU6TGFiZWw3OTI4NDA3MDk=","url":"https://api.github.com/repos/yewstack/yew/labels/bug","name":"bug","color":"75ad20","default":true,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-03-04T13:42:38Z","updated_at":"2020-03-04T16:25:08Z","closed_at":"2020-03-04T15:57:40Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Problem**\r\n<!-- A clear and concise description of what the bug is. -->\r\n\r\nI want to update my project from std_web to web_sys.\r\nWhen trying to build an `empty` (or not) project with the new feature `web_sys`, yew 0.13 does not compile.\r\n\r\n**Steps To Reproduce**\r\nSteps to reproduce the behavior:\r\n1. `cargo new --lib project`\r\n2. Cargo.toml\r\n```yml\r\n[package]\r\nname = \"project\"\r\nversion = \"0.1.0\"\r\nedition = \"2018\"\r\n\r\n[dependencies]\r\nyew = { version = \"0.13\", features = [\"web_sys\"] }\r\n\r\n[lib]\r\ncrate-type = [\"cdylib\", \"rlib\"]\r\n```\r\n3. src/lib.rs\r\n```rust\r\nfn main() {\r\n    println!(\"Hello, world!\");\r\n}\r\n```\r\n4. Run `cargo wasm build` or `wasm-pack build` (it will be the same error with both)\r\n5. See error\r\n```bash\r\n   Compiling yew v0.13.0\r\nerror[E0308]: mismatched types\r\n   --> /home/user/.cargo/registry/src/github.com-1ecc6299db9ec823/yew-0.13.0/src/virtual_dom/vtext.rs:113:9\r\n    |\r\n60  |       ) -> Option<Node> {\r\n    |            ------------ expected `std::option::Option<web_sys::features::gen_Node::Node>` because of return type\r\n...\r\n113 | /         self.reference.as_ref().map(|t| {\r\n114 | |             let node = cfg_match! {\r\n115 | |                 feature = \"std_web\" => t.as_node(),\r\n116 | |                 feature = \"web_sys\" => t.deref(),\r\n117 | |             };\r\n118 | |             node.to_owned()\r\n119 | |         })\r\n    | |__________^ expected struct `web_sys::features::gen_Node::Node`, found struct `web_sys::features::gen_CharacterData::CharacterData`\r\n    |\r\n    = note: expected enum `std::option::Option<web_sys::features::gen_Node::Node>`\r\n               found enum `std::option::Option<web_sys::features::gen_CharacterData::CharacterData>`\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0308`.\r\nerror: could not compile `yew`.\r\n\r\nTo learn more, run the command again with --verbose.\r\nFailed to run cargo. Exit code was: 101\r\n```\r\n\r\n**Expected behavior**\r\nI was expecting yew to build, but maybe am I doing something wrong ?\r\n\r\n**Environment:**\r\n - Yew v0.13\r\n - Rust v1.41.1\r\n - Target wasm32-unknown-unknown\r\n - web-sys v0.3.36\r\n - OS: ubuntu\r\n","closed_by":{"login":"jstarry","id":1076145,"node_id":"MDQ6VXNlcjEwNzYxNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1076145?v=4","gravatar_id":"","url":"https://api.github.com/users/jstarry","html_url":"https://github.com/jstarry","followers_url":"https://api.github.com/users/jstarry/followers","following_url":"https://api.github.com/users/jstarry/following{/other_user}","gists_url":"https://api.github.com/users/jstarry/gists{/gist_id}","starred_url":"https://api.github.com/users/jstarry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jstarry/subscriptions","organizations_url":"https://api.github.com/users/jstarry/orgs","repos_url":"https://api.github.com/users/jstarry/repos","events_url":"https://api.github.com/users/jstarry/events{/privacy}","received_events_url":"https://api.github.com/users/jstarry/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yewstack/yew/issues/996/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yewstack/yew/issues/996/timeline","performed_via_github_app":null,"state_reason":"completed"}