{"url":"https://api.github.com/repos/yewstack/yew/issues/638","repository_url":"https://api.github.com/repos/yewstack/yew","labels_url":"https://api.github.com/repos/yewstack/yew/issues/638/labels{/name}","comments_url":"https://api.github.com/repos/yewstack/yew/issues/638/comments","events_url":"https://api.github.com/repos/yewstack/yew/issues/638/events","html_url":"https://github.com/yewstack/yew/issues/638","id":493629524,"node_id":"MDU6SXNzdWU0OTM2Mjk1MjQ=","number":638,"title":"#[derive(Properties)] fails for some trait bounds","user":{"login":"astraw","id":30176,"node_id":"MDQ6VXNlcjMwMTc2","avatar_url":"https://avatars.githubusercontent.com/u/30176?v=4","gravatar_id":"","url":"https://api.github.com/users/astraw","html_url":"https://github.com/astraw","followers_url":"https://api.github.com/users/astraw/followers","following_url":"https://api.github.com/users/astraw/following{/other_user}","gists_url":"https://api.github.com/users/astraw/gists{/gist_id}","starred_url":"https://api.github.com/users/astraw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/astraw/subscriptions","organizations_url":"https://api.github.com/users/astraw/orgs","repos_url":"https://api.github.com/users/astraw/repos","events_url":"https://api.github.com/users/astraw/events{/privacy}","received_events_url":"https://api.github.com/users/astraw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2019-09-14T14:39:12Z","updated_at":"2019-09-23T00:16:57Z","closed_at":"2019-09-23T00:16:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Thanks for filing a yew issue! We appreciate it :-) -->\r\n\r\n#### Description\r\n\r\n**I'm submitting a bug report.** \r\n\r\nWith 0.8.0, an ability to auto-derive the `Properties` trait was introduced, but this fails to compile when certain trait bounds are specified. This is still true on current master (24d39f97e3e2818896b1338cb11b4db6eff76491).\r\n\r\n#### Expected Results\r\n\r\nThis compiles without error:\r\n\r\n```\r\nuse std::str::FromStr;\r\n\r\n#[derive(Properties, Clone)]\r\npub struct Compiles<T: FromStr + Clone>\r\n    where\r\n        <T as FromStr>::Err: Clone,\r\n{\r\n    #[props(required)]\r\n    value: Result<T, <T as FromStr>::Err>,\r\n}\r\n```\r\n\r\nNote the trait bounds on `T` and on `<T as FromStr>::Err`. Namely, they are:\r\n\r\n```\r\nT: FromStr + Clone\r\n<T as FromStr>::Err: Clone\r\n```\r\n\r\nThis is expected. I would also expect that the auto-derive of Properties could handle the case where the trait bound in put in a where clause.\r\n\r\n#### Actual Results\r\n\r\nHowever, if I use this\r\n\r\n```\r\nuse std::str::FromStr;\r\n\r\n#[derive(Properties, Clone)]\r\npub struct FailsToCompile<T>\r\n    where\r\n        T: FromStr + Clone,\r\n        <T as FromStr>::Err: Clone,\r\n{\r\n    #[props(required)]\r\n    value: Result<T, <T as FromStr>::Err>,\r\n}\r\n```\r\n\r\nI get the following compilation error:\r\n\r\n```\r\nerror[E0277]: the trait bound `T: std::str::FromStr` is not satisfied\r\n  --> examples/props_traits/src/lib.rs:31:10\r\n   |\r\n31 | #[derive(Properties, Clone)]\r\n   |          ^^^^^^^^^^ the trait `std::str::FromStr` is not implemented for `T`\r\n   |\r\n   = help: consider adding a `where T: std::str::FromStr` bound\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0277`.\r\nerror: Could not compile `props_traits`.\r\n```\r\n\r\nThe compiler suggests to add the trait bound `T: FromStr`, but this is already present. So it seems the derive macro fails to include the trait bound specified.\r\n\r\n#### Context (Environment)\r\n\r\n<!-- precise nightly or stable -->\r\n- Rust: 1.37.0\r\n\r\n<!-- if you're not on a tagged version precise the commit hash -->\r\n- yew: 24d39f97e3e2818896b1338cb11b4db6eff76491\r\n","closed_by":{"login":"bors[bot]","id":26634292,"node_id":"MDM6Qm90MjY2MzQyOTI=","avatar_url":"https://avatars.githubusercontent.com/in/1847?v=4","gravatar_id":"","url":"https://api.github.com/users/bors%5Bbot%5D","html_url":"https://github.com/apps/bors","followers_url":"https://api.github.com/users/bors%5Bbot%5D/followers","following_url":"https://api.github.com/users/bors%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/bors%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/bors%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bors%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/bors%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/bors%5Bbot%5D/repos","events_url":"https://api.github.com/users/bors%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/bors%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/yewstack/yew/issues/638/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/yewstack/yew/issues/638/timeline","performed_via_github_app":null,"state_reason":"completed"}