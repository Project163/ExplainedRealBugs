{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3503","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3503/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3503/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3503/events","html_url":"https://github.com/pytest-dev/pytest/issues/3503","id":326167924,"node_id":"MDU6SXNzdWUzMjYxNjc5MjQ=","number":3503,"title":"3.6.0 breaking test: internal error loading conftest.py","user":{"login":"sbouchut","id":38036228,"node_id":"MDQ6VXNlcjM4MDM2MjI4","avatar_url":"https://avatars.githubusercontent.com/u/38036228?v=4","gravatar_id":"","url":"https://api.github.com/users/sbouchut","html_url":"https://github.com/sbouchut","followers_url":"https://api.github.com/users/sbouchut/followers","following_url":"https://api.github.com/users/sbouchut/following{/other_user}","gists_url":"https://api.github.com/users/sbouchut/gists{/gist_id}","starred_url":"https://api.github.com/users/sbouchut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbouchut/subscriptions","organizations_url":"https://api.github.com/users/sbouchut/orgs","repos_url":"https://api.github.com/users/sbouchut/repos","events_url":"https://api.github.com/users/sbouchut/events{/privacy}","received_events_url":"https://api.github.com/users/sbouchut/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":224849193,"node_id":"MDU6TGFiZWwyMjQ4NDkxOTM=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20bug","name":"type: bug","color":"fc2929","default":false,"description":"problem that needs to be addressed"},{"id":315571544,"node_id":"MDU6TGFiZWwzMTU1NzE1NDQ=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20regression","name":"type: regression","color":"f7c6c7","default":false,"description":"indicates a problem that was introduced in a release which was working previously"},{"id":702619195,"node_id":"MDU6TGFiZWw3MDI2MTkxOTU=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/topic:%20rewrite","name":"topic: rewrite","color":"0e8a16","default":false,"description":"related to the assertion rewrite mechanism"}],"state":"closed","locked":false,"assignee":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":8,"created_at":"2018-05-24T15:12:48Z","updated_at":"2018-05-26T00:24:46Z","closed_at":"2018-05-26T00:24:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"No error with 3.5.1. Since 3.6.0 I get an unexpected error.\r\n\r\n```python\r\npytest --basetemp=/builds/company/project/.tox/py27/tmp --cov=project --no-cov-on-fail --html reports/test-reports/pytest-py27.html --self-contained-html --junitxml reports/test-reports/pytest-py27.xml tests --dburl postgresql://login:password@postgres:5432/tests\r\n\r\nTraceback (most recent call last):\r\n  File \"/builds/forcity/ewan/.tox/py27/local/lib/python2.7/site-packages/_pytest/config.py\", line 376, in _importconftest\r\n    mod = conftestpath.pyimport()\r\n  File \"/builds/forcity/ewan/.tox/py27/local/lib/python2.7/site-packages/py/_path/local.py\", line 668, in pyimport\r\n    __import__(modname)\r\n  File \"/builds/forcity/ewan/.tox/py27/local/lib/python2.7/site-packages/_pytest/assertion/rewrite.py\", line 145, in find_module\r\n    _write_pyc(state, co, source_stat, pyc)\r\n  File \"/builds/forcity/ewan/.tox/py27/local/lib/python2.7/site-packages/_pytest/assertion/rewrite.py\", line 269, in _write_pyc\r\n    marshal.dump(co, fp.file)\r\nTypeError: marshal.dump() 2nd arg must be file\r\nERROR: could not load /builds/forcity/ewan/tests/conftest.py\r\n```\r\n\r\n```\r\npip freeze\r\n\r\namqp==1.4.9\r\nanyjson==0.3.3\r\narrow==0.12.1\r\nasn1crypto==0.24.0\r\natomicwrites==1.1.5\r\nattrs==18.1.0\r\nbackports.functools-lru-cache==1.5\r\nbcrypt==3.1.4\r\nbottle==0.12.13\r\nbulb==0.1.4\r\ncertifi==2018.4.16\r\ncffi==1.11.5\r\nchardet==3.0.4\r\ncimkit==3.6.1\r\nclick==6.7\r\nclick-plugins==1.0.3\r\ncligj==0.4.0\r\nconfigparser==3.5.0\r\ncoverage==4.5.1\r\ncryptography==2.2.2\r\ncycler==0.10.0\r\ndescartes==1.1.0\r\nenum-compat==0.0.2\r\nenum34==1.1.6\r\neventlet==0.20.1\r\nproject==0.4.1rc1\r\nFiona==1.7.11.post2\r\nflake8==3.5.0\r\nflake8-html==0.4.0\r\ncompany-classes==0.20.0rc0\r\ncompany-modelingtoolkit==1.6.0\r\ncompanyalchemy==0.10.0\r\nfuncsigs==1.0.2\r\nfunctools32==3.2.3.post2\r\nGeoAlchemy2==0.2.6\r\ngeojson==2.4.0\r\ngeopandas==0.3.0\r\ngreenlet==0.4.13\r\nhypothesis==3.57.0\r\nidna==2.6\r\ninvoke==1.0.0\r\nipaddress==1.0.22\r\nJinja2==2.10\r\njsonschema==2.6.0\r\nkiwisolver==1.0.1\r\nkombu==3.0.37\r\nlumis-commons==0.0.1\r\nMarkupSafe==1.0\r\nmatplotlib==2.2.2\r\nmccabe==0.6.1\r\nmock==2.0.0\r\nmore-itertools==4.2.0\r\nmunch==2.3.2\r\nnameko==2.8.5\r\nNameko-Logger==1.6.1\r\nnumexpr==2.6.5\r\nnumpy==1.14.3\r\norca==1.4.0\r\npandas==0.23.0\r\nparamiko==2.4.1\r\npath.py==11.0.1\r\npatsy==0.5.0\r\npbr==4.0.3\r\npluggy==0.6.0\r\nprettytable==0.7.2\r\npsycopg2==2.7.4\r\npy==1.5.3\r\npyasn1==0.4.3\r\npycodestyle==2.3.1\r\npycparser==2.18\r\npyflakes==1.6.0\r\nPygments==2.2.0\r\nPyNaCl==1.2.1\r\npyparsing==2.2.0\r\npyproj==1.9.5.1\r\npytest==3.6.0\r\npytest-cov==2.5.1\r\npytest-company-db==0.3.1\r\npytest-html==1.18.0\r\npytest-metadata==1.7.0\r\npython-dateutil==2.7.3\r\npytz==2018.4\r\nPyYAML==3.12\r\nrequests==2.18.4\r\nretrying==1.3.3\r\nRtree==0.8.3\r\nscipy==1.1.0\r\nShapely==1.6.4.post1\r\nsimplejson==3.15.0\r\nsix==1.11.0\r\nSQLAlchemy==1.2.7\r\nSQLAlchemy-Utils==0.33.3\r\nstatsmodels==0.8.0\r\nstructlog==18.1.0\r\nsubprocess32==3.5.1\r\ntables==3.4.3\r\ntblib==1.3.2\r\ntoolz==0.9.0\r\ntox==3.0.0\r\nujson==1.35\r\nurbansim==3.1.1\r\nurllib3==1.22\r\nvirtualenv==16.0.0\r\nWerkzeug==0.14.1\r\nwrapt==1.10.11\r\nyapf==0.22.0\r\nzbox==1.2.0\r\n```","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3503/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3503/timeline","performed_via_github_app":null,"state_reason":"completed"}