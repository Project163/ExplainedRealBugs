{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/8983","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8983/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8983/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8983/events","html_url":"https://github.com/pytest-dev/pytest/issues/8983","id":963292436,"node_id":"MDU6SXNzdWU5NjMyOTI0MzY=","number":8983,"title":"pytest -k doesn't work with \"\\\"?","user":{"login":"nguydavi","id":842462,"node_id":"MDQ6VXNlcjg0MjQ2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/842462?v=4","gravatar_id":"","url":"https://api.github.com/users/nguydavi","html_url":"https://github.com/nguydavi","followers_url":"https://api.github.com/users/nguydavi/followers","following_url":"https://api.github.com/users/nguydavi/following{/other_user}","gists_url":"https://api.github.com/users/nguydavi/gists{/gist_id}","starred_url":"https://api.github.com/users/nguydavi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nguydavi/subscriptions","organizations_url":"https://api.github.com/users/nguydavi/orgs","repos_url":"https://api.github.com/users/nguydavi/repos","events_url":"https://api.github.com/users/nguydavi/events{/privacy}","received_events_url":"https://api.github.com/users/nguydavi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":240511787,"node_id":"MDU6TGFiZWwyNDA1MTE3ODc=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/topic:%20selection","name":"topic: selection","color":"c2e0c6","default":false,"description":"related to test selection from the command line"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2021-08-07T19:43:36Z","updated_at":"2021-08-08T14:15:53Z","closed_at":"2021-08-08T14:15:53Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Discussed in https://github.com/pytest-dev/pytest/discussions/8982\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **nguydavi** August  7, 2021</sup>\r\nHey!\r\n\r\nI've been trying to use `pytest -k` passing the name I got by parametrizing my test. For example,\r\n\r\n```\r\n$ pytest -vk 'test_solution[foo.py-5\\n10\\n-16\\n]' validate.py\r\n=========================================================================================================== test session starts ============================================================================================================platform linux -- Python 3.8.10, pytest-6.2.4, py-1.10.0, pluggy-0.13.1 -- /usr/bin/python3\r\ncachedir: .pytest_cache\r\nrootdir: /home/david/foo\r\ncollected 4 items\r\n\r\n========================================================================================================== no tests ran in 0.01s ===========================================================================================================ERROR: Wrong expression passed to '-k': test_solution[foo.py-5\\n10\\n-16\\n]: at column 23: unexpected character \"\\\"\r\n```\r\n\r\nNote the error message\r\n```\r\nERROR: Wrong expression passed to '-k': test_solution[foo.py-5\\n10\\n-16\\n]: at column 23: unexpected character \"\\\"\r\n```\r\n\r\nI tried escaping the `\\` but that didn't work, the only way I can make it work is to remove the backslashes completely,\r\n\r\n```\r\n$ pytest -vk 'test_solution[foo.py-5 and 10' validate.py\r\n```\r\n\r\nIs `\\` just not supported by `-k` ? Or am I missing something ?\r\n\r\nThanks!\r\n\r\nEDIT:\r\nA possible test case\r\n```\r\n@pytest.mark.parametrize(\r\n    \"param1, param2\",\r\n    [\r\n        pytest.param(\r\n            '5\\n10\\n', '16\\n'\r\n        ),\r\n    ],\r\n)\r\ndef test_solution(param1, param2):\r\n  pass\r\n```\r\nWhich is then referred by `pytest` as `test_solution[5\\n10\\n-16\\n]` . Essentially a new line character `\\n` in the string brings the issue (or any escaped character probably)</div>","closed_by":{"login":"bluetech","id":1223550,"node_id":"MDQ6VXNlcjEyMjM1NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1223550?v=4","gravatar_id":"","url":"https://api.github.com/users/bluetech","html_url":"https://github.com/bluetech","followers_url":"https://api.github.com/users/bluetech/followers","following_url":"https://api.github.com/users/bluetech/following{/other_user}","gists_url":"https://api.github.com/users/bluetech/gists{/gist_id}","starred_url":"https://api.github.com/users/bluetech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluetech/subscriptions","organizations_url":"https://api.github.com/users/bluetech/orgs","repos_url":"https://api.github.com/users/bluetech/repos","events_url":"https://api.github.com/users/bluetech/events{/privacy}","received_events_url":"https://api.github.com/users/bluetech/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/8983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8983/timeline","performed_via_github_app":null,"state_reason":"completed"}