[{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804644477","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804644477","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804644477,"node_id":"IC_kwDOAjwLdc5rkLB9","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T20:34:29Z","updated_at":"2023-11-09T20:34:29Z","body":"I even got the ENOENT case:\r\n\r\n```\r\n____________ TestLocalPath.test_make_numbered_dir_multiprocess_safe ____________\r\n[gw7] linux -- Python 3.12.0 /usr/bin/python3\r\nmultiprocessing.pool.RemoteTraceback: \r\n\"\"\"\r\nTraceback (most recent call last):\r\n  File \"/builddir/build/BUILDROOT/pytest-7.4.3-1.fc40.x86_64/usr/lib/python3.12/site-packages/_pytest/_py/error.py\", line 85, in checked_call\r\n    return func(*args, **kwargs)\r\n           ^^^^^^^^^^^^^^^^^^^^^\r\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/pytest-of-mockbuild/pytest-2/popen-gw7/test_make_numbered_dir_multipr0/repro-483/foo'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib64/python3.12/multiprocessing/pool.py\", line 125, in worker\r\n    result = (True, func(*args, **kwds))\r\n                    ^^^^^^^^^^^^^^^^^^^\r\n  File \"/builddir/build/BUILD/pytest-7.4.3/testing/_py/test_local.py\", line 552, in batch_make_numbered_dirs\r\n    file_.write_text(\"%s\" % i, encoding=\"utf-8\")\r\n  File \"/builddir/build/BUILDROOT/pytest-7.4.3-1.fc40.x86_64/usr/lib/python3.12/site-packages/_pytest/_py/path.py\", line 905, in write_text\r\n    with self.open(\"w\", encoding=encoding) as f:\r\n         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/builddir/build/BUILDROOT/pytest-7.4.3-1.fc40.x86_64/usr/lib/python3.12/site-packages/_pytest/_py/path.py\", line 760, in open\r\n    return error.checked_call(io.open, self.strpath, mode, encoding=encoding)\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"/builddir/build/BUILDROOT/pytest-7.4.3-1.fc40.x86_64/usr/lib/python3.12/site-packages/_pytest/_py/error.py\", line 101, in checked_call\r\n    raise cls(f\"{func.__name__}{args!r}\")\r\npy.error.ENOENT: [No such file or directory]: open('/tmp/pytest-of-mockbuild/pytest-2/popen-gw7/test_make_numbered_dir_multipr0/repro-483/foo', 'w')\r\n\"\"\"\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nself = <test_local.TestLocalPath object at 0x7f5d81dfac90>\r\ntmpdir = local('/tmp/pytest-of-mockbuild/pytest-2/popen-gw7/test_make_numbered_dir_multipr0')\r\n\r\n    def test_make_numbered_dir_multiprocess_safe(self, tmpdir):\r\n        # https://github.com/pytest-dev/py/issues/30\r\n        with multiprocessing.Pool() as pool:\r\n            results = [\r\n                pool.apply_async(batch_make_numbered_dirs, [tmpdir, 100])\r\n                for _ in range(20)\r\n            ]\r\n            for r in results:\r\n>               assert r.get()\r\n\r\n/builddir/build/BUILD/pytest-7.4.3/testing/_py/test_local.py:879: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <multiprocessing.pool.ApplyResult object at 0x7f5d80f65fa0>\r\ntimeout = None\r\n\r\n    def get(self, timeout=None):\r\n        self.wait(timeout)\r\n        if not self.ready():\r\n            raise TimeoutError\r\n        if self._success:\r\n            return self._value\r\n        else:\r\n>           raise self._value\r\nE           py.error.ENOENT: [No such file or directory]: open('/tmp/pytest-of-mockbuild/pytest-2/popen-gw7/test_make_numbered_dir_multipr0/repro-483/foo', 'w')\r\n\r\n/usr/lib64/python3.12/multiprocessing/pool.py:774: ENOENT\r\n```\r\n\r\nWhat I don't understand is this:\r\n\r\nThe exceptions are expected in the try-except cause. This seems as if the classes of the thrown exceptions differed :/","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804644477/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804666056","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804666056","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804666056,"node_id":"IC_kwDOAjwLdc5rkQTI","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T20:50:08Z","updated_at":"2023-11-09T20:50:08Z","body":"I've stared at this for 2 hours now and I am not a tiny bit more clever. Enough for today.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804666056/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804691880","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804691880","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804691880,"node_id":"IC_kwDOAjwLdc5rkWmo","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T21:11:45Z","updated_at":"2023-11-09T21:11:45Z","body":"The raise comes from here:\r\n\r\nhttps://github.com/pytest-dev/pytest/blob/6fe43912be43a0d75bcada54aaa18d4448fc39ac/src/_pytest/_py/path.py#L1365-L1366","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804691880/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804695389","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804695389","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804695389,"node_id":"IC_kwDOAjwLdc5rkXdd","user":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T21:14:45Z","updated_at":"2023-11-09T21:14:45Z","body":"Py.error is a horrible hack from back when python 2.x didn't have distinct exceptions for distinct fs interaction issues\n\nAs far as I am concerned, that particular method is non essential\n\n\n\nPytest itself has an Implementation of it since the efforts to drop pyllib\n\n@asottile I believe it may be fair to mark this one as xfail on modern windows ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804695389/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10918099955,"node_id":"MEE_lADOAjwLdc52ZJxjzwAAAAKKxPvz","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10918099955","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-09T21:14:46Z","performed_via_github_app":null},{"id":10918099962,"node_id":"SE_lADOAjwLdc52ZJxjzwAAAAKKxPv6","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10918099962","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-09T21:14:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804706810","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804706810","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804706810,"node_id":"IC_kwDOAjwLdc5rkaP6","user":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T21:24:09Z","updated_at":"2023-11-09T21:24:09Z","body":"hmm I think the test might actually be pointing out that there's broken behaviour here -- I'll debug it a bit","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804706810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804714313","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804714313","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804714313,"node_id":"IC_kwDOAjwLdc5rkcFJ","user":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T21:30:32Z","updated_at":"2023-11-09T21:30:32Z","body":"yeah on my VM with 5 cores I can reproduce this every once in a while via:\r\n\r\n```\r\n$ pytest -n10 --count 100 $(git grep -l test_make_numbered_dir_multiprocess_safe) -k test_make_numbered_dir_multiprocess_safe\r\n...\r\n________ TestLocalPath.test_make_numbered_dir_multiprocess_safe[4-100] _________\r\n[gw1] linux -- Python 3.10.12 /tmp/pytest/venv/bin/python\r\nmultiprocessing.pool.RemoteTraceback: \r\n\"\"\"\r\nTraceback (most recent call last):\r\n  File \"/tmp/pytest/src/_pytest/_py/error.py\", line 85, in checked_call\r\n    return func(*args, **kwargs)\r\nFileNotFoundError: [Errno 2] No such file or directory: '/tmp/pytest-of-asottile/pytest-4/popen-gw1/test_make_numbered_dir_multipr1/repro-825/foo'\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/usr/lib/python3.10/multiprocessing/pool.py\", line 125, in worker\r\n    result = (True, func(*args, **kwds))\r\n  File \"/tmp/pytest/testing/_py/test_local.py\", line 552, in batch_make_numbered_dirs\r\n    file_.write_text(\"%s\" % i, encoding=\"utf-8\")\r\n  File \"/tmp/pytest/src/_pytest/_py/path.py\", line 909, in write_text\r\n    with self.open(\"w\", encoding=encoding) as f:\r\n  File \"/tmp/pytest/src/_pytest/_py/path.py\", line 762, in open\r\n    return error.checked_call(\r\n  File \"/tmp/pytest/src/_pytest/_py/error.py\", line 101, in checked_call\r\n    raise cls(f\"{func.__name__}{args!r}\")\r\npy.error.ENOENT: [No such file or directory]: open('/tmp/pytest-of-asottile/pytest-4/popen-gw1/test_make_numbered_dir_multipr1/repro-825/foo', 'w')\r\n\"\"\"\r\n\r\nThe above exception was the direct cause of the following exception:\r\n\r\nself = <test_local.TestLocalPath object at 0x7f656d975540>\r\ntmpdir = local('/tmp/pytest-of-asottile/pytest-4/popen-gw1/test_make_numbered_dir_multipr1')\r\n\r\n    def test_make_numbered_dir_multiprocess_safe(self, tmpdir):\r\n        # https://github.com/pytest-dev/py/issues/30\r\n        with multiprocessing.Pool() as pool:\r\n            results = [\r\n                pool.apply_async(batch_make_numbered_dirs, [tmpdir, 100])\r\n                for _ in range(20)\r\n            ]\r\n            for r in results:\r\n>               assert r.get()\r\n\r\ntesting/_py/test_local.py:879: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <multiprocessing.pool.ApplyResult object at 0x7f6566d5c790>\r\ntimeout = None\r\n\r\n    def get(self, timeout=None):\r\n        self.wait(timeout)\r\n        if not self.ready():\r\n            raise TimeoutError\r\n        if self._success:\r\n            return self._value\r\n        else:\r\n>           raise self._value\r\nE           py.error.ENOENT: [No such file or directory]: open('/tmp/pytest-of-asottile/pytest-4/popen-gw1/test_make_numbered_dir_multipr1/repro-825/foo', 'w')\r\n\r\n/usr/lib/python3.10/multiprocessing/pool.py:774: ENOENT\r\n=========================== short test summary info ============================\r\nFAILED testing/_py/test_local.py::TestLocalPath::test_make_numbered_dir_multiprocess_safe[4-100] - py.error.ENOENT: [No such file or directory]: open('/tmp/pytest-of-asottile...\r\n======================== 1 failed, 99 passed in 44.37s =========================\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804714313/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804775265","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804775265","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804775265,"node_id":"IC_kwDOAjwLdc5rkq9h","user":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T22:21:19Z","updated_at":"2023-11-09T22:21:19Z","body":"setting `keep=None` on the `make_numbered_dir` call makes the race go away (other procs are collecting directories that are in use between the make_numbered_dir call and the attempt to write a file into it) -- but it makes the test way slower","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804775265/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804786533","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1804786533","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1804786533,"node_id":"IC_kwDOAjwLdc5rkttl","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-09T22:32:05Z","updated_at":"2023-11-09T22:32:05Z","body":"I've also noticed the test is explicitly removing the lock files and wasn't sure why. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1804786533/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805522808","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1805522808","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1805522808,"node_id":"IC_kwDOAjwLdc5rnhd4","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T11:06:03Z","updated_at":"2023-11-10T11:06:03Z","body":"The exception that both me and @asottile reproduced locally seems \"obvious\". Even if `make_numbered_dir` is thread-safe, the `batch_make_numbered_dirs` function in the test is not. It tries to write to `<dir>/foo` when `<dir>` was already removed by a faster thread. I think this is a race condition in the test.\r\n\r\n---\r\n\r\nHowever, the exception I see in the Fedora build system is coming from within `make_numbered_dir` itself and I still don't understand what is going on there :(","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805522808/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10923860856,"node_id":"MEE_lADOAjwLdc52ZJxjzwAAAAKLHON4","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10923860856","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-10T11:06:04Z","performed_via_github_app":null},{"id":10923860868,"node_id":"SE_lADOAjwLdc52ZJxjzwAAAAKLHOOE","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10923860868","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-10T11:06:04Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805636040","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1805636040","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1805636040,"node_id":"IC_kwDOAjwLdc5rn9HI","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T12:16:41Z","updated_at":"2023-11-10T13:54:56Z","body":"I added some debug prints, got a reproducer and postprocessed the output. Unfortunately, I forgot to log when a directory is deleted...\r\n\r\n```\r\nP1: mkdir 0\r\nP1: lock 0\r\nP2: found maxnum 0\r\nP2: mkdir 1\r\nP3: found maxnum 0\r\nP3: mkdir 1\r\nP2: lock 1\r\nP5: found maxnum 0\r\nP5: mkdir 1\r\nP1: found maxnum 1\r\nP1: mkdir 2\r\nP3: error 1 py.error.EEXIST 'File exists': mkdir('.../repro-1',) \r\nP1: lock 2\r\nP5: error 1 py.error.EEXIST 'File exists': mkdir('.../repro-1',) \r\nP3: found maxnum 2\r\nP3: mkdir 3\r\nP3: lock 3\r\nP2: found maxnum 3\r\nP2: mkdir 4\r\nP1: found maxnum 3\r\nP1: mkdir 4\r\nP1: lock 4\r\nP2: error 4 py.error.EEXIST 'File exists': mkdir('.../repro-4',) \r\nP2: found maxnum 4\r\nP2: mkdir 5\r\nP2: lock 5\r\nP3: found maxnum 5\r\nP3: mkdir 6\r\nP3: lock 6\r\nP1: found maxnum 6\r\nP1: mkdir 7\r\nP1: lock 7\r\nP5: mkdir 0\r\nP6: mkdir 0\r\nP2: found maxnum 7\r\nP2: mkdir 8\r\nP5: lock 0\r\nP2: lock 8\r\nP4: found maxnum 7\r\nP4: mkdir 8\r\nP6: error 0 py.error.EEXIST 'File exists': mkdir('.../repro-0',) \r\nP3: found maxnum 8\r\nP3: mkdir 9\r\nP6: found maxnum 8\r\nP3: lock 9\r\nP6: mkdir 9\r\nP6: error 9 py.error.EEXIST 'File exists': mkdir('.../repro-9',) \r\nP4: error 8 py.error.EEXIST 'File exists': mkdir('.../repro-8',) \r\nP6: found maxnum 9\r\nP6: mkdir 10\r\nP6: lock 10\r\nP4: found maxnum 9\r\nP4: mkdir 10\r\nP4: error 10 py.error.EEXIST 'File exists': mkdir('.../repro-10',) \r\nP4: found maxnum 10\r\nP4: mkdir 11\r\nP4: lock 11\r\nP2: found maxnum 11\r\nP2: mkdir 12\r\nP2: lock 12\r\nP5: found maxnum 12\r\nP5: mkdir 13\r\nP5: lock 13\r\nP2: found maxnum 13\r\nP2: mkdir 14\r\nP2: lock 14\r\nP5: found maxnum 14\r\nP5: mkdir 15\r\nP5: lock 15\r\nP6: found maxnum 13\r\nP6: mkdir 14\r\nP4: found maxnum 15\r\nP4: mkdir 16\r\nP6: error 14 py.error.EEXIST 'File exists': mkdir('.../repro-14',) \r\nP4: lock 16\r\nP6: found maxnum 16\r\nP6: mkdir 17\r\nP5: found maxnum 16\r\nP2: found maxnum 16\r\nP5: mkdir 17\r\nP2: mkdir 17\r\nP6: lock 17\r\nP2: error 17 py.error.EEXIST 'File exists': mkdir('.../repro-17',) \r\nP3: found maxnum 16\r\nP5: error 17 py.error.EEXIST 'File exists': mkdir('.../repro-17',) \r\nP3: mkdir 17\r\nP3: error 17 py.error.EEXIST 'File exists': mkdir('.../repro-17',) \r\nP2: found maxnum 17\r\nP2: mkdir 18\r\nP5: found maxnum 17\r\nP5: mkdir 18\r\nP1: found maxnum 17\r\nP2: lock 18\r\nP1: mkdir 18\r\nP5: error 18 py.error.EEXIST 'File exists': mkdir('.../repro-18',) \r\nP3: found maxnum 17\r\nP3: mkdir 18\r\nP3: error 18 py.error.EEXIST 'File exists': mkdir('.../repro-18',) \r\nP1: error 18 py.error.EEXIST 'File exists': mkdir('.../repro-18',) \r\nP5: found maxnum 18\r\nP5: mkdir 19\r\nP5: lock 19\r\nP1: found maxnum 18\r\nP1: mkdir 19\r\nP1: error 19 py.error.EEXIST 'File exists': mkdir('.../repro-19',) \r\nP4: found maxnum 19\r\nP1: found maxnum 19\r\nP4: mkdir 20\r\nP1: mkdir 20\r\nP4: lock 20\r\nP1: error 20 py.error.EEXIST 'File exists': mkdir('.../repro-20',) \r\nP1: found maxnum 20\r\nP1: mkdir 21\r\nP1: lock 21\r\nP6: found maxnum 21\r\nP6: mkdir 22\r\nP6: lock 22\r\nP3: found maxnum 18\r\nP3: mkdir 19\r\nP3: error 19 py.error.EEXIST 'File exists': mkdir('.../repro-19',) \r\nP5: found maxnum 22\r\nP5: mkdir 23\r\nP3: found maxnum 22\r\nP3: mkdir 23\r\nP5: lock 23\r\nP4: found maxnum 23\r\nP4: mkdir 24\r\nP4: lock 24\r\nP4: found maxnum 24\r\nP4: mkdir 25\r\nP4: lock 25\r\nP4: found maxnum 25\r\nP4: mkdir 26\r\nP4: lock 26\r\nP4: found maxnum 26\r\nP4: mkdir 27\r\nP4: lock 27\r\nP3: error 23 py.error.EEXIST 'File exists': mkdir('.../repro-23',) \r\nP2: found maxnum 22\r\nP2: mkdir 23\r\nP3: found maxnum 27\r\nP3: mkdir 28\r\nP2: error 23 py.error.EEXIST 'File exists': mkdir('.../repro-23',) \r\nP3: lock 28\r\nP2: found maxnum 28\r\nP2: mkdir 29\r\nP4: found maxnum 27\r\nP4: mkdir 28\r\nP2: lock 29\r\nP6: found maxnum 29\r\nP6: mkdir 30\r\nP6: lock 30\r\nP4: error 28 py.error.EEXIST 'File exists': mkdir('.../repro-28',) \r\nP5: found maxnum 29\r\nP5: mkdir 30\r\nP4: found maxnum 30\r\nP4: mkdir 31\r\nP5: error 30 py.error.EEXIST 'File exists': mkdir('.../repro-30',) \r\nP1: found maxnum 30\r\nP5: found maxnum 30\r\nP1: mkdir 31\r\nP5: mkdir 31\r\nP1: lock 31\r\nP5: error 31 py.error.EEXIST 'File exists': mkdir('.../repro-31',) \r\nP4: error 31 py.error.EEXIST 'File exists': mkdir('.../repro-31',) \r\nP5: found maxnum 31\r\nP5: mkdir 32\r\nP5: lock 32\r\nP4: found maxnum 31\r\nP4: mkdir 32\r\nP4: error 32 py.error.EEXIST 'File exists': mkdir('.../repro-32',) \r\nP3: found maxnum 32\r\nP3: mkdir 33\r\nP3: lock 33\r\nP4: found maxnum 32\r\nP4: mkdir 33\r\nP2: found maxnum 32\r\nP2: mkdir 33\r\nP4: error 33 py.error.EEXIST 'File exists': mkdir('.../repro-33',) \r\nP2: error 33 py.error.EEXIST 'File exists': mkdir('.../repro-33',) \r\nP4: found maxnum 33\r\nP4: mkdir 34\r\nP2: found maxnum 33\r\nP4: lock 34\r\nP2: mkdir 34\r\nP2: error 34 py.error.EEXIST 'File exists': mkdir('.../repro-34',) \r\nP1: found maxnum 34\r\nP1: mkdir 35\r\nP5: found maxnum 34\r\nP5: mkdir 35\r\nP1: lock 35\r\nP5: error 35 py.error.EEXIST 'File exists': mkdir('.../repro-35',) \r\nP5: found maxnum 35\r\nP5: mkdir 36\r\nP5: lock 36\r\nP4: found maxnum 36\r\nP4: mkdir 37\r\nP4: lock 37\r\nP4: found maxnum 37\r\nP4: mkdir 38\r\nP4: lock 38\r\nP6: found maxnum 33\r\nP2: found maxnum 33\r\nP6: mkdir 34\r\nP2: mkdir 34\r\nP6: lock 34\r\nP1: found maxnum 37\r\nP1: mkdir 38\r\nP2: error 34 py.error.EEXIST 'File exists': mkdir('.../repro-34',) CRASH\r\n```\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805636040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805646977","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1805646977","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1805646977,"node_id":"IC_kwDOAjwLdc5rn_yB","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T12:25:45Z","updated_at":"2023-11-10T13:55:54Z","body":"What confuses me is that P6 and P2 found 33, while at least 38 should have existed :/\r\n\r\nnevertheless, trying with logged deletes.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805646977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805708144","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1805708144","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1805708144,"node_id":"IC_kwDOAjwLdc5roOtw","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T13:15:11Z","updated_at":"2023-11-10T13:15:11Z","body":"Here is a mew sequence with more information. Note that the events not necessarily happened exactly in this order:\r\n\r\n```\r\nP2: listdir []\r\nP4: listdir []\r\nP2: found maxnum -1\r\nP4: found maxnum -1\r\nP2: mkdir 0\r\nP4: mkdir 0\r\nP4: lock 0\r\nP2: error 0 py.error.EEXIST 'File exists': mkdir('repro-0',) \r\nP2: listdir [repro-0]\r\nP2: found maxnum 0\r\nP2: mkdir 1\r\nP2: lock 1\r\nP1: listdir [repro-0, repro-1, repro-username]\r\nP4: listdir [repro-0, repro-1, repro-username]\r\nP4: found maxnum 1\r\nP4: mkdir 2\r\nP4: lock 2\r\nP1: found maxnum 1\r\nP1: mkdir 2\r\nP4: listdir [repro-0, repro-1, repro-2, repro-username]\r\nP4: found maxnum 2\r\nP4: mkdir 3\r\nP4: lock 3\r\nP4: listdir [repro-0, repro-1, repro-2, repro-3, repro-username]\r\nP4: found maxnum 3\r\nP4: mkdir 4\r\nP4: lock 4\r\nP4: delete repro-0\r\nP1: error 2 py.error.EEXIST 'File exists': mkdir('repro-2',) \r\nP3: listdir [repro-1, repro-2]\r\nP3: found maxnum 2\r\nP3: mkdir 3\r\nP6: listdir [repro-1, repro-2, repro-3, repro-4, repro-username]\r\nP8: listdir [repro-1, repro-2, repro-3, repro-4, repro-username]\r\nP6: found maxnum 4\r\nP3: error 3 py.error.EEXIST 'File exists': mkdir('repro-3',) \r\nP6: mkdir 5\r\nP5: listdir [repro-1, repro-2, repro-3, repro-4, repro-username]\r\nP3: listdir [repro-1, repro-2, repro-3, repro-4, repro-username]\r\nP8: found maxnum 4\r\nP6: lock 5\r\nP5: found maxnum 4\r\nP8: mkdir 5\r\nP5: mkdir 5\r\nP3: found maxnum 4\r\nP3: mkdir 5\r\nP3: error 5 py.error.EEXIST 'File exists': mkdir('repro-5',) \r\nP6: delete repro-1\r\nP5: error 5 py.error.EEXIST 'File exists': mkdir('repro-5',) \r\nP3: listdir [repro-1, repro-2, repro-3, repro-4, repro-username, repro-5]\r\nP3: found maxnum 5\r\nP5: listdir [repro-1, repro-2, repro-3, repro-4, repro-username, repro-5]\r\nP3: mkdir 6\r\nP8: error 5 py.error.EEXIST 'File exists': mkdir('repro-5',) \r\nP5: found maxnum 5\r\nP5: mkdir 6\r\nP3: lock 6\r\nP5: error 6 py.error.EEXIST 'File exists': mkdir('repro-6',) \r\nP5: listdir [repro-2, repro-3, repro-4, repro-username, repro-5, repro-6, repro-garbage-...]\r\nP5: found maxnum 6\r\nP5: mkdir 7\r\nP5: lock 7\r\nP5: delete repro-2\r\nP7: listdir [repro-2, repro-3, repro-4, repro-username]\r\nP7: found maxnum 4\r\nP7: mkdir 5\r\nP1: listdir [repro-3, repro-4, repro-username, repro-5]\r\nP3: delete repro-garbage-...\r\nP1: found maxnum 5\r\nP1: mkdir 6\r\nP1: error 6 py.error.EEXIST 'File exists': mkdir('repro-6',) \r\nP1: listdir [repro-3, repro-4, repro-username, repro-5, repro-6, repro-garbage-..., repro-7, repro-garbage-...]\r\nP7: error 5 py.error.EEXIST 'File exists': mkdir('repro-5',) \r\nP1: found maxnum 7\r\nP5: delete repro-3\r\nP1: mkdir 8\r\nP3: listdir [repro-3, repro-4, repro-5, repro-6, repro-7, repro-username]\r\nP1: lock 8\r\nP3: found maxnum 7\r\nP3: mkdir 8\r\nP3: error 8 py.error.EEXIST 'File exists': mkdir('repro-8',) \r\nP4: listdir [repro-3, repro-4, repro-5]\r\nP4: found maxnum 5\r\nP4: mkdir 6\r\nP7: listdir [repro-3, repro-4, repro-5, repro-6, repro-7, repro-username]\r\nP7: found maxnum 7\r\nP7: mkdir 8\r\nP7: error 8 py.error.EEXIST 'File exists': mkdir('repro-8',) \r\nP7: listdir [repro-3, repro-4, repro-5, repro-6, repro-7, repro-username, repro-8]\r\nP7: found maxnum 8\r\nP7: mkdir 9\r\nP4: error 6 py.error.EEXIST 'File exists': mkdir('repro-6',) \r\nP7: lock 9\r\nP2: listdir [repro-3, repro-4, repro-5]\r\nP1: delete repro-3\r\nP2: found maxnum 5\r\nP2: mkdir 6\r\nP1: delete repro-4\r\nP2: error 6 py.error.EEXIST 'File exists': mkdir('repro-6',) \r\nP2: listdir [repro-3, repro-4, repro-5, repro-6, repro-7, repro-username, repro-8, repro-9]\r\nP2: found maxnum 9\r\nP2: mkdir 10\r\nP2: lock 10\r\nP2: delete repro-3\r\nP2: delete repro-5\r\nP2: delete repro-6\r\nP3: listdir [repro-3, repro-4, repro-5, repro-6, repro-7, repro-username, repro-8]\r\nP3: found maxnum 8\r\nP3: mkdir 9\r\nP8: listdir [repro-3, repro-5, repro-7]\r\nP3: error 9 py.error.EEXIST 'File exists': mkdir('repro-9',) \r\nP8: found maxnum 7\r\nP8: mkdir 8\r\nP3: listdir [repro-3, repro-5, repro-7, repro-username, repro-8, repro-9, repro-garbage-..., repro-10, repro-garbage-...]\r\nP8: error 8 py.error.EEXIST 'File exists': mkdir('repro-8',) \r\nP3: found maxnum 10\r\nP3: mkdir 11\r\nP3: lock 11\r\nP3: delete repro-3\r\nP2: delete repro-garbage-...\r\nP3: delete repro-5\r\nP3: delete repro-7\r\nP3: delete repro-garbage-...\r\nP4: listdir [repro-5, repro-7, repro-8, repro-9]\r\nP7: delete repro-5\r\nP2: listdir [repro-5, repro-7, repro-8, repro-9, repro-10, repro-11, repro-username, repro-garbage-...]\r\nP5: delete repro-garbage-...\r\nP2: found maxnum 11\r\nP2: mkdir 12\r\nP4: found maxnum 9\r\nP4: mkdir 10\r\nP6: listdir [repro-7, repro-8, repro-9, repro-10, repro-11, repro-username, repro-garbage-...]\r\nP6: found maxnum 11\r\nP6: mkdir 12\r\nP6: error 12 py.error.EEXIST 'File exists': mkdir('repro-12',) \r\nP2: lock 12\r\nP6: listdir [repro-7, repro-8, repro-9, repro-10, repro-11, repro-garbage-..., repro-12, repro-username]\r\nP6: found maxnum 12\r\nP6: mkdir 13\r\nP2: delete repro-7\r\nP2: delete repro-8\r\nP2: delete repro-garbage-...\r\nP8: listdir [repro-7, repro-8, repro-9, repro-10, repro-11]\r\nP8: found maxnum 11\r\nP8: mkdir 12\r\nP4: error 10 py.error.EEXIST 'File exists': mkdir('repro-10',) \r\nP5: listdir [repro-7, repro-8, repro-9, repro-10, repro-11, repro-12]\r\nP5: found maxnum 12\r\nP5: mkdir 13\r\nP6: lock 13\r\nP5: error 13 py.error.EEXIST 'File exists': mkdir('repro-13',) \r\nP5: listdir [repro-7, repro-8, repro-9, repro-10, repro-11, repro-12, repro-13]\r\nP5: found maxnum 13\r\nP5: mkdir 14\r\nP5: lock 14\r\nP5: delete repro-7\r\nP2: listdir [repro-8, repro-9, repro-10, repro-11, repro-12, repro-13, repro-username, repro-14, repro-garbage-...]\r\nP2: found maxnum 14\r\nP2: mkdir 15\r\nP2: lock 15\r\nP5: delete repro-8\r\nP2: delete repro-8\r\nP2: delete repro-9\r\nP2: delete repro-10\r\nP5: delete repro-9\r\nP5: delete repro-10\r\nP2: delete repro-11\r\nP8: error 12 py.error.EEXIST 'File exists': mkdir('repro-12',) \r\nP4: listdir [repro-9, repro-11, repro-12, repro-13]\r\nP4: found maxnum 13\r\nP4: mkdir 14\r\nP4: error 14 py.error.EEXIST 'File exists': mkdir('repro-14',) \r\nP5: listdir [repro-9, repro-11, repro-12, repro-13, repro-14, repro-15, repro-username]\r\nP3: listdir [repro-9, repro-11, repro-12]\r\nP3: found maxnum 12\r\nP3: mkdir 13\r\nP5: found maxnum 15\r\nP5: mkdir 16\r\nP3: error 13 py.error.EEXIST 'File exists': mkdir('repro-13',) \r\nP5: lock 16\r\nP6: delete repro-7\r\nP2: listdir [repro-9, repro-12, repro-13, repro-14, repro-15, repro-16, repro-username]\r\nP2: found maxnum 16\r\nP2: mkdir 17\r\nP2: lock 17\r\nP8: listdir [repro-9, repro-12, repro-13, repro-14, repro-15, repro-16]\r\nP8: found maxnum 16\r\nP8: mkdir 17\r\nP6: delete repro-8\r\nP6: delete repro-9\r\nP8: error 17 py.error.EEXIST 'File exists': mkdir('repro-17',) \r\nP1: listdir [repro-9, repro-12, repro-13, repro-14, repro-15]\r\nP1: found maxnum 15\r\nP1: mkdir 16\r\nP1: error 16 py.error.EEXIST 'File exists': mkdir('repro-16',) \r\nP1: listdir [repro-12, repro-13, repro-14, repro-15, repro-16, repro-username, repro-17, repro-garbage-...]\r\nP1: found maxnum 17\r\nP1: mkdir 18\r\nP1: lock 18\r\nP1: delete repro-12\r\nP1: delete repro-13\r\nP1: delete repro-14\r\nP1: delete repro-garbage-...\r\nP4: listdir [repro-13, repro-15, repro-16]\r\nP4: found maxnum 16\r\nP4: mkdir 17\r\nP3: listdir [repro-13, repro-15, repro-16]\r\nP4: error 17 py.error.EEXIST 'File exists': mkdir('repro-17',) \r\nP3: found maxnum 16\r\nP3: mkdir 17\r\nP3: error 17 py.error.EEXIST 'File exists': mkdir('repro-17',) \r\nP2: delete repro-9\r\nP7: listdir [repro-13, repro-15, repro-16]\r\nP7: found maxnum 16\r\nP7: mkdir 17\r\nP2: delete repro-12\r\nP3: listdir [repro-13, repro-15, repro-16, repro-17, repro-18, repro-username]\r\nP2: delete repro-13\r\nP3: found maxnum 18\r\nP3: mkdir 19\r\nP3: lock 19\r\nP2: listdir [repro-13, repro-15, repro-16, repro-17, repro-18, repro-19, repro-username]\r\nP2: found maxnum 19\r\nP2: mkdir 20\r\nP2: lock 20\r\nP2: delete repro-13\r\nP2: delete repro-15\r\nP2: delete repro-16\r\nP2: listdir [repro-13, repro-17, repro-18, repro-19, repro-20, repro-username]\r\nP2: found maxnum 20\r\nP2: mkdir 21\r\nP2: lock 21\r\nP2: delete repro-13\r\nP2: delete repro-17\r\nP3: delete repro-13\r\nP2: listdir [repro-13, repro-18, repro-19, repro-20, repro-21, repro-username]\r\nP7: lock 17\r\nP2: found maxnum 21\r\nP2: mkdir 22\r\nP2: lock 22\r\nP8: listdir [repro-13, repro-18]\r\nP8: found maxnum 18\r\nP4: listdir [repro-13, repro-18, repro-19]\r\nP8: mkdir 19\r\nP4: found maxnum 19\r\nP4: mkdir 20\r\nP4: error 20 py.error.EEXIST 'File exists': mkdir('repro-20',) \r\nP6: listdir [repro-13, repro-18, repro-19, repro-20, repro-21, repro-17, repro-22, repro-username]\r\nP6: found maxnum 22\r\nP6: mkdir 23\r\nP6: lock 23\r\nP8: error 19 py.error.EEXIST 'File exists': mkdir('repro-19',) \r\nP8: listdir [repro-13, repro-18, repro-19, repro-20, repro-21, repro-17, repro-22, repro-username, repro-23]\r\nP4: listdir [repro-13, repro-18, repro-19, repro-20, repro-21, repro-17, repro-22, repro-username]\r\nP6: delete repro-13\r\nP4: found maxnum 22\r\nP4: mkdir 23\r\nP4: error 23 py.error.EEXIST 'File exists': mkdir('repro-23',) \r\nP8: found maxnum 23\r\nP8: mkdir 24\r\nP8: lock 24\r\nP7: delete repro-garbage-...\r\nP6: delete repro-18\r\nP8: delete repro-18\r\nP8: delete repro-19\r\nP8: delete repro-20\r\nP1: listdir [repro-19]\r\nP1: found maxnum 19\r\nP1: mkdir 20\r\nP6: delete repro-19\r\nP6: delete repro-17\r\nP1: lock 20\r\nP5: listdir [repro-13, repro-18, repro-19]\r\nP5: found maxnum 19\r\nP5: mkdir 20\r\nP8: delete repro-17\r\nP5: error 20 py.error.EEXIST 'File exists': mkdir('repro-20',) \r\nP3: listdir [repro-19, repro-21, repro-17, repro-22, repro-23, repro-24, repro-20, repro-username]\r\nP5: listdir [repro-19, repro-21, repro-17, repro-22, repro-23, repro-24, repro-20, repro-username]\r\nP3: found maxnum 24\r\nP3: mkdir 25\r\nP5: found maxnum 24\r\nP4: listdir [repro-19, repro-21, repro-17, repro-22, repro-23, repro-24, repro-20]\r\nP5: mkdir 25\r\nP3: lock 25\r\nP5: error 25 py.error.EEXIST 'File exists': mkdir('repro-25',) \r\nP5: listdir [repro-19, repro-21, repro-17, repro-22, repro-23, repro-24, repro-20, repro-username, repro-25]\r\nP3: delete repro-19\r\nP5: found maxnum 25\r\nP4: found maxnum 24\r\nP5: mkdir 26\r\nP4: mkdir 25\r\nP5: lock 26\r\nP4: error 25 py.error.EEXIST 'File exists': mkdir('repro-25',) \r\nP4: listdir [repro-21, repro-17, repro-22, repro-23, repro-24, repro-20, repro-username, repro-25, repro-26, repro-garbage-...]\r\nP5: delete repro-21\r\nP4: found maxnum 26\r\nP4: mkdir 27\r\nP3: delete repro-21\r\nP4: lock 27\r\nP3: delete repro-17\r\nP3: delete repro-20\r\nP4: delete repro-17\r\nP2: delete repro-17\r\nP7: listdir [repro-22, repro-23, repro-24, repro-20, repro-25]\r\nP7: found maxnum 25\r\nP7: mkdir 26\r\nP4: delete repro-22\r\nP4: delete repro-23\r\nP5: delete repro-17\r\nP7: error 26 py.error.EEXIST 'File exists': mkdir('repro-26',) \r\nP5: delete repro-22\r\nP6: listdir [repro-22, repro-23, repro-24, repro-20, repro-25, repro-26, repro-27, repro-garbage-...]\r\nP7: listdir [repro-22, repro-23, repro-24, repro-20, repro-25, repro-26, repro-27, repro-garbage-...]\r\nP5: delete repro-20\r\nP6: found maxnum 27\r\nP6: mkdir 28\r\nP7: found maxnum 27\r\nP7: mkdir 28\r\nP6: lock 28\r\nP7: error 28 py.error.EEXIST 'File exists': mkdir('repro-28',) \r\nP6: delete repro-22\r\nP6: delete repro-23\r\nP6: delete repro-24\r\nP6: delete repro-garbage-...\r\nP6: delete repro-garbage-...\r\nP5: delete repro-garbage-...\r\nP6: listdir [repro-22, repro-23, repro-24, repro-25, repro-26, repro-27, repro-28, repro-username]\r\nP6: found maxnum 28\r\nP6: mkdir 29\r\nP6: lock 29\r\nP6: delete repro-22\r\nP6: delete repro-23\r\nP6: delete repro-24\r\nP6: delete repro-25\r\nP6: listdir [repro-23, repro-25, repro-26, repro-27, repro-28, repro-29, repro-username]\r\nP6: found maxnum 29\r\nP6: mkdir 30\r\nP6: lock 30\r\nP6: delete repro-23\r\nP6: delete repro-25\r\nP6: delete repro-26\r\nP6: listdir [repro-23, repro-25, repro-26, repro-27, repro-28, repro-29, repro-30, repro-username]\r\nP6: found maxnum 30\r\nP6: mkdir 31\r\nP6: lock 31\r\nP6: delete repro-23\r\nP6: delete repro-25\r\nP6: delete repro-26\r\nP6: delete repro-27\r\nP6: listdir [repro-23, repro-25, repro-26, repro-27, repro-28, repro-29, repro-30, repro-31, repro-username]\r\nP6: found maxnum 31\r\nP6: mkdir 32\r\nP6: lock 32\r\nP6: delete repro-23\r\nP6: delete repro-25\r\nP6: delete repro-26\r\nP6: delete repro-27\r\nP6: delete repro-28\r\nP6: listdir [repro-23, repro-25, repro-26, repro-27, repro-29, repro-30, repro-31, repro-32, repro-username]\r\nP6: found maxnum 32\r\nP6: mkdir 33\r\nP6: lock 33\r\nP6: delete repro-23\r\nP6: delete repro-25\r\nP6: delete repro-26\r\nP6: delete repro-27\r\nP6: delete repro-29\r\nP6: listdir [repro-23, repro-25, repro-26, repro-27, repro-30, repro-31, repro-32, repro-33, repro-username]\r\nP6: found maxnum 33\r\nP6: mkdir 34\r\nP6: lock 34\r\nP6: delete repro-23\r\nP6: delete repro-25\r\nP6: delete repro-26\r\nP6: delete repro-27\r\nP6: delete repro-30\r\nP6: listdir [repro-23, repro-25, repro-26, repro-27, repro-31, repro-32, repro-33, repro-34, repro-username]\r\nP6: found maxnum 34\r\nP6: mkdir 35\r\nP6: lock 35\r\nP6: delete repro-23\r\nP6: delete repro-25\r\nP6: delete repro-26\r\nP6: delete repro-27\r\nP6: delete repro-31\r\nP6: listdir [repro-23, repro-25, repro-26, repro-27, repro-32, repro-33, repro-34, repro-35, repro-username]\r\nP6: found maxnum 35\r\nP6: mkdir 36\r\nP6: lock 36\r\nP6: delete repro-23\r\nP6: delete repro-25\r\nP6: delete repro-26\r\nP6: delete repro-27\r\nP6: delete repro-32\r\nP8: listdir [repro-23, repro-25, repro-26, repro-27]\r\nP8: found maxnum 27\r\nP8: mkdir 28\r\nP8: lock 28\r\nP7: listdir [repro-25, repro-26, repro-27]\r\nP7: found maxnum 27\r\nP7: mkdir 28\r\nP7: error 28 py.error.EEXIST 'File exists': mkdir('repro-28',) \r\nP7: raise 28 py.error.EEXIST 'File exists': mkdir('repro-28',) \r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805708144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805721112","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1805721112","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1805721112,"node_id":"IC_kwDOAjwLdc5roR4Y","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T13:24:23Z","updated_at":"2023-11-10T13:24:56Z","body":"I think I know what *might* be going on. The `listdir` thing calls [`os.listdir`](https://docs.python.org/3/library/os.html#os.listdir) under the hood. The documentation explicitly states that:\r\n\r\n> If a file is removed from or added to the directory during the call of this function, whether a name for that file be included is unspecified.\r\n\r\nIf in our example, P7 fails to create repro-28 once, it proceeds to list the directory again. *While listing the directory* repro-28 has been removed and newer directories were created, however, as this happens during the listing, the result only contains repro-27 as the highest number (which might happen, according to the docs). Hence, it tries to create repro-28 for the second time and raises.\r\n\r\nI have no proof of this assumption, but it sounds plausible to me.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805721112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805769259","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1805769259","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1805769259,"node_id":"IC_kwDOAjwLdc5rodor","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T13:52:25Z","updated_at":"2023-11-10T13:52:25Z","body":"If my hypothesis is correct, I believe a fix is to stop raising when `lastmax == maxnum`. This is a problem, however, as there is no way for the function to eventually terminate if the exceptions keep happening repeatedly :(","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805769259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805955820","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1805955820","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1805955820,"node_id":"IC_kwDOAjwLdc5rpLLs","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T15:37:01Z","updated_at":"2023-11-10T15:37:01Z","body":"However, there cannot be an infinite number of directories, so I assume just trying again and again is OK, at least if it was error.EEXIST.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1805955820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806072837","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1806072837","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1806072837,"node_id":"IC_kwDOAjwLdc5rpnwF","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T16:48:45Z","updated_at":"2023-11-10T16:48:45Z","body":"Currently, I have something liek this:\r\n\r\n```diff\r\ndiff --git a/src/_pytest/_py/path.py b/src/_pytest/_py/path.py\r\nindex 24348525a..658721ac0 100644\r\n--- a/src/_pytest/_py/path.py\r\n+++ b/src/_pytest/_py/path.py\r\n@@ -1339,7 +1339,6 @@ class LocalPath:\r\n             atexit.register(try_remove_lockfile)\r\n \r\n         # compute the maximum number currently in use with the prefix\r\n-        lastmax = None\r\n         while True:\r\n             maxnum = -1\r\n             for path in rootdir.listdir():\r\n@@ -1350,22 +1349,22 @@ class LocalPath:\r\n             # make the new directory\r\n             try:\r\n                 udir = rootdir.mkdir(prefix + str(maxnum + 1))\r\n-                if lock_timeout:\r\n-                    lockfile = create_lockfile(udir)\r\n-                    atexit_remove_lockfile(lockfile)\r\n-            except (error.EEXIST, error.ENOENT, error.EBUSY):\r\n+            except (error.EEXIST, error.EBUSY):\r\n                 # race condition (1): another thread/process created the dir\r\n-                #                     in the meantime - try again\r\n-                # race condition (2): another thread/process spuriously acquired\r\n-                #                     lock treating empty directory as candidate\r\n-                #                     for removal - try again\r\n-                # race condition (3): another thread/process tried to create the lock at\r\n-                #                     the same time (happened in Python 3.3 on Windows)\r\n-                # https://ci.appveyor.com/project/pytestbot/py/build/1.0.21/job/ffi85j4c0lqwsfwa\r\n-                if lastmax == maxnum:\r\n-                    raise\r\n-                lastmax = maxnum\r\n+                #                     in the meantime/at the same time - try again\r\n                 continue\r\n+            if lock_timeout:\r\n+                try:\r\n+                    lockfile = create_lockfile(udir)\r\n+                    atexit_remove_lockfile(lockfile)\r\n+                except (error.EEXIST, error.ENOENT, error.EBUSY):\r\n+                    # race condition (2): another thread/process spuriously acquired\r\n+                    #                     lock treating empty directory as candidate\r\n+                    #                     for removal - try again\r\n+                    # race condition (3): another thread/process tried to create the lock at\r\n+                    #                     the same time (happened in Python 3.3 on Windows)\r\n+                    # https://ci.appveyor.com/project/pytestbot/py/build/1.0.21/job/ffi85j4c0lqwsfwa\r\n+                    continue\r\n             break\r\n \r\n         def get_mtime(path):\r\n```\r\n\r\nThat is:\r\n\r\n```python\r\n        # compute the maximum number currently in use with the prefix\r\n        while True:\r\n            maxnum = -1\r\n            for path in rootdir.listdir():\r\n                num = parse_num(path)\r\n                if num is not None:\r\n                    maxnum = max(maxnum, num)\r\n\r\n            # make the new directory\r\n            try:\r\n                udir = rootdir.mkdir(prefix + str(maxnum + 1))\r\n            except (error.EEXIST, error.EBUSY):\r\n                # race condition (1): another thread/process created the dir\r\n                #                     in the meantime/at the same time - try again\r\n                continue\r\n            if lock_timeout:\r\n                try:\r\n                    lockfile = create_lockfile(udir)\r\n                    atexit_remove_lockfile(lockfile)\r\n                except (error.EEXIST, error.ENOENT, error.EBUSY):\r\n                    # race condition (2): another thread/process spuriously acquired\r\n                    #                     lock treating empty directory as candidate\r\n                    #                     for removal - try again\r\n                    # race condition (3): another thread/process tried to create the lock at\r\n                    #                     the same time (happened in Python 3.3 on Windows)\r\n                    # https://ci.appveyor.com/project/pytestbot/py/build/1.0.21/job/ffi85j4c0lqwsfwa\r\n                    continue\r\n            break\r\n```\r\n\r\nI believe this approach is more correct regarding `ENOENT` happening when `mkdir` is called -- we would not want to continue trying in that case because it means the `rootdir` has been deleted.\r\n\r\nHowever, I am not sure about `EBUSY` -- is it possible that the filesystem where we are trying to create the directories is dead and we keep getting this over and over again, never existing?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806072837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806078292","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1806078292","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1806078292,"node_id":"IC_kwDOAjwLdc5rppFU","user":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T16:53:07Z","updated_at":"2023-11-10T16:53:07Z","body":"Let's take a look at the difference between the pyllib implementation and the modern one in pytest\n\nI'm inclined to choose to get rid of the method in the shim even before completely removing local path from pytest ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806078292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806203193","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1806203193","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1806203193,"node_id":"IC_kwDOAjwLdc5rqHk5","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T18:19:22Z","updated_at":"2023-11-10T18:19:22Z","body":"The new implementation is different indeed. Instead of cleverness, it seems to use brute force.\r\n\r\nhttps://github.com/pytest-dev/pytest/blob/6fe43912be43a0d75bcada54aaa18d4448fc39ac/src/_pytest/pathlib.py#L228-L246","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806203193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806253734","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1806253734","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1806253734,"node_id":"IC_kwDOAjwLdc5rqT6m","user":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T18:46:22Z","updated_at":"2023-11-10T18:46:22Z","body":"The new code is split up together with it's layers (cleanup and cleanup locks)\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806253734/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806391999","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1806391999","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1806391999,"node_id":"IC_kwDOAjwLdc5rq1q_","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T20:29:14Z","updated_at":"2023-11-10T20:29:14Z","body":"Anyway, do I propose just to rip off make_numbered_dir from py.path and remove the test for it?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806391999/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806533494","html_url":"https://github.com/pytest-dev/pytest/issues/11603#issuecomment-1806533494","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11603","id":1806533494,"node_id":"IC_kwDOAjwLdc5rrYN2","user":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-10T22:50:31Z","updated_at":"2023-11-10T22:50:31Z","body":"@asottile @nicoddemus any opinion on dropping that bit of our shim for the 8.x release?\r\n\r\n @hroncok unfortunately on the 7.x series we can only mark the test as non-strict xfail","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/1806533494/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"RonnyPfannschmidt","id":156838,"node_id":"MDQ6VXNlcjE1NjgzOA==","avatar_url":"https://avatars.githubusercontent.com/u/156838?v=4","gravatar_id":"","url":"https://api.github.com/users/RonnyPfannschmidt","html_url":"https://github.com/RonnyPfannschmidt","followers_url":"https://api.github.com/users/RonnyPfannschmidt/followers","following_url":"https://api.github.com/users/RonnyPfannschmidt/following{/other_user}","gists_url":"https://api.github.com/users/RonnyPfannschmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/RonnyPfannschmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RonnyPfannschmidt/subscriptions","organizations_url":"https://api.github.com/users/RonnyPfannschmidt/orgs","repos_url":"https://api.github.com/users/RonnyPfannschmidt/repos","events_url":"https://api.github.com/users/RonnyPfannschmidt/events{/privacy}","received_events_url":"https://api.github.com/users/RonnyPfannschmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10930294567,"node_id":"MEE_lADOAjwLdc52ZJxjzwAAAAKLfw8n","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10930294567","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-10T22:50:32Z","performed_via_github_app":null},{"id":10930294572,"node_id":"SE_lADOAjwLdc52ZJxjzwAAAAKLfw8s","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10930294572","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-10T22:50:32Z","performed_via_github_app":null},{"id":10930294583,"node_id":"MEE_lADOAjwLdc52ZJxjzwAAAAKLfw83","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10930294583","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-10T22:50:32Z","performed_via_github_app":null},{"id":10930294589,"node_id":"SE_lADOAjwLdc52ZJxjzwAAAAKLfw89","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10930294589","actor":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-10T22:50:32Z","performed_via_github_app":null},{"id":10930294596,"node_id":"MEE_lADOAjwLdc52ZJxjzwAAAAKLfw9E","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/10930294596","actor":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-10T22:50:32Z","performed_via_github_app":null}]