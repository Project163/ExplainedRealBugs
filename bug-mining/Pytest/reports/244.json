{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/8790","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8790/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8790/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8790/events","html_url":"https://github.com/pytest-dev/pytest/issues/8790","id":927953588,"node_id":"MDU6SXNzdWU5Mjc5NTM1ODg=","number":8790,"title":"Add note about exit code in example code for pytest.main()","user":{"login":"ingomueller-net","id":1036898,"node_id":"MDQ6VXNlcjEwMzY4OTg=","avatar_url":"https://avatars.githubusercontent.com/u/1036898?v=4","gravatar_id":"","url":"https://api.github.com/users/ingomueller-net","html_url":"https://github.com/ingomueller-net","followers_url":"https://api.github.com/users/ingomueller-net/followers","following_url":"https://api.github.com/users/ingomueller-net/following{/other_user}","gists_url":"https://api.github.com/users/ingomueller-net/gists{/gist_id}","starred_url":"https://api.github.com/users/ingomueller-net/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ingomueller-net/subscriptions","organizations_url":"https://api.github.com/users/ingomueller-net/orgs","repos_url":"https://api.github.com/users/ingomueller-net/repos","events_url":"https://api.github.com/users/ingomueller-net/events{/privacy}","received_events_url":"https://api.github.com/users/ingomueller-net/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":224849196,"node_id":"MDU6TGFiZWwyMjQ4NDkxOTY=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/status:%20help%20wanted","name":"status: help wanted","color":"159818","default":false,"description":"developers would like help from experts on this topic"},{"id":224853680,"node_id":"MDU6TGFiZWwyMjQ4NTM2ODA=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20docs","name":"type: docs","color":"fbca04","default":false,"description":"documentation improvement, missing or needing clarification"},{"id":240426349,"node_id":"MDU6TGFiZWwyNDA0MjYzNDk=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/good%20first%20issue","name":"good first issue","color":"bfe5bf","default":true,"description":"easy issue that is friendly to new contributor"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2021-06-23T07:37:05Z","updated_at":"2021-06-27T13:29:16Z","closed_at":"2021-06-27T13:29:16Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have just noticed that I have been calling `pytest.main()` for years in several projects and ignored the exit code. This is obviously really bad for unit tests; the only reason I have not noticed is that I have used the `python -m pytest` invocation method in CI -- until today.\r\n\r\nThe problem, in my opinion, is that the one [example in the documentation](https://docs.pytest.org/en/6.2.x/usage.html#calling-pytest-from-python-code) ignores the exit code as well. It does mention that the function returns the exit code but giving an example where that code is used would be more explicit. For example:\r\n\r\n```python\r\nif __name__ == '__main__':\r\n    sys.exit(pytest.main(sys.argv))\r\n\r\n```","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/8790/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8790/timeline","performed_via_github_app":null,"state_reason":"completed"}