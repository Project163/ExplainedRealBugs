[{"id":12385568834,"node_id":"LE_lADOAjwLdc6E67CTzwAAAALiPMhC","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12385568834","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-04-08T00:35:40Z","label":{"name":"topic: collection","color":"006b75"},"performed_via_github_app":null},{"actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-08T00:36:06Z","updated_at":"2024-04-08T00:36:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/jaraco/keyring/issues/676","repository_url":"https://api.github.com/repos/jaraco/keyring","labels_url":"https://api.github.com/repos/jaraco/keyring/issues/676/labels{/name}","comments_url":"https://api.github.com/repos/jaraco/keyring/issues/676/comments","events_url":"https://api.github.com/repos/jaraco/keyring/issues/676/events","html_url":"https://github.com/jaraco/keyring/issues/676","id":2230018405,"node_id":"I_kwDOAd0Iv86E62Fl","number":676,"title":"Windows and MacOS units fail discovery on Linux","user":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-04-08T00:00:41Z","updated_at":"2024-04-08T00:37:17Z","closed_at":null,"author_association":"OWNER","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":31262911,"node_id":"MDEwOlJlcG9zaXRvcnkzMTI2MjkxMQ==","name":"keyring","full_name":"jaraco/keyring","private":false,"owner":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/jaraco/keyring","description":null,"fork":false,"url":"https://api.github.com/repos/jaraco/keyring","forks_url":"https://api.github.com/repos/jaraco/keyring/forks","keys_url":"https://api.github.com/repos/jaraco/keyring/keys{/key_id}","collaborators_url":"https://api.github.com/repos/jaraco/keyring/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/jaraco/keyring/teams","hooks_url":"https://api.github.com/repos/jaraco/keyring/hooks","issue_events_url":"https://api.github.com/repos/jaraco/keyring/issues/events{/number}","events_url":"https://api.github.com/repos/jaraco/keyring/events","assignees_url":"https://api.github.com/repos/jaraco/keyring/assignees{/user}","branches_url":"https://api.github.com/repos/jaraco/keyring/branches{/branch}","tags_url":"https://api.github.com/repos/jaraco/keyring/tags","blobs_url":"https://api.github.com/repos/jaraco/keyring/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/jaraco/keyring/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/jaraco/keyring/git/refs{/sha}","trees_url":"https://api.github.com/repos/jaraco/keyring/git/trees{/sha}","statuses_url":"https://api.github.com/repos/jaraco/keyring/statuses/{sha}","languages_url":"https://api.github.com/repos/jaraco/keyring/languages","stargazers_url":"https://api.github.com/repos/jaraco/keyring/stargazers","contributors_url":"https://api.github.com/repos/jaraco/keyring/contributors","subscribers_url":"https://api.github.com/repos/jaraco/keyring/subscribers","subscription_url":"https://api.github.com/repos/jaraco/keyring/subscription","commits_url":"https://api.github.com/repos/jaraco/keyring/commits{/sha}","git_commits_url":"https://api.github.com/repos/jaraco/keyring/git/commits{/sha}","comments_url":"https://api.github.com/repos/jaraco/keyring/comments{/number}","issue_comment_url":"https://api.github.com/repos/jaraco/keyring/issues/comments{/number}","contents_url":"https://api.github.com/repos/jaraco/keyring/contents/{+path}","compare_url":"https://api.github.com/repos/jaraco/keyring/compare/{base}...{head}","merges_url":"https://api.github.com/repos/jaraco/keyring/merges","archive_url":"https://api.github.com/repos/jaraco/keyring/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/jaraco/keyring/downloads","issues_url":"https://api.github.com/repos/jaraco/keyring/issues{/number}","pulls_url":"https://api.github.com/repos/jaraco/keyring/pulls{/number}","milestones_url":"https://api.github.com/repos/jaraco/keyring/milestones{/number}","notifications_url":"https://api.github.com/repos/jaraco/keyring/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/jaraco/keyring/labels{/name}","releases_url":"https://api.github.com/repos/jaraco/keyring/releases{/id}","deployments_url":"https://api.github.com/repos/jaraco/keyring/deployments","created_at":"2015-02-24T14:10:21Z","updated_at":"2025-11-06T00:35:16Z","pushed_at":"2025-05-14T06:54:46Z","git_url":"git://github.com/jaraco/keyring.git","ssh_url":"git@github.com:jaraco/keyring.git","clone_url":"https://github.com/jaraco/keyring.git","svn_url":"https://github.com/jaraco/keyring","homepage":null,"size":4005,"stargazers_count":1381,"watchers_count":1381,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":175,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":90,"license":null,"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":175,"open_issues":90,"watchers":1381,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Just tested 25.1.0 and looks like now Windows and MacOS units are executed on Linux\r\n```console\r\n+ PYTHONPATH=/home/tkloczko/rpmbuild/BUILDROOT/python-keyring-25.1.0~no_loopy_deps-2.fc37.x86_64/usr/lib64/python3.10/site-packages:/home/tkloczko/rpmbuild/BUILDROOT/python-keyring-25.1.0~no_loopy_deps-2.fc37.x86_64/usr/lib/python3.10/site-packages\r\n+ dbus-run-session -- /usr/bin/pytest -ra -m 'not network'\r\n==================================================================================== test session starts ====================================================================================\r\nplatform linux -- Python 3.10.14, pytest-8.1.1, pluggy-1.4.0\r\nrootdir: /home/tkloczko/rpmbuild/BUILD/keyring-25.1.0\r\nconfigfile: pytest.ini\r\nplugins: flake8-1.1.1\r\ncollected 83 items / 2 errors\r\n\r\n========================================================================================== ERRORS ===========================================================================================\r\n______________________________________________________________________ ERROR collecting tests/backends/test_Windows.py ______________________________________________________________________\r\ntests/backends/test_Windows.py:10: in <module>\r\n    not keyring.backends.Windows.WinVaultKeyring.viable, reason=\"Needs Windows\"\r\nE   AttributeError: module 'keyring.backends' has no attribute 'Windows'\r\n_______________________________________________________________________ ERROR collecting tests/backends/test_macOS.py _______________________________________________________________________\r\ntests/backends/test_macOS.py:9: in <module>\r\n    not keyring.backends.macOS.Keyring.viable,\r\nE   AttributeError: module 'keyring.backends' has no attribute 'macOS'\r\n================================================================================== short test summary info ==================================================================================\r\nERROR tests/backends/test_Windows.py - AttributeError: module 'keyring.backends' has no attribute 'Windows'\r\nERROR tests/backends/test_macOS.py - AttributeError: module 'keyring.backends' has no attribute 'macOS'\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 2 errors during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n===================================================================================== 2 errors in 0.36s =====================================================================================\r\n```\r\n\r\n_Originally posted by @kloczek in https://github.com/jaraco/keyring/issues/581#issuecomment-2041182832_\r\n            ","reactions":{"url":"https://api.github.com/repos/jaraco/keyring/issues/676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/jaraco/keyring/issues/676/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2041924511","html_url":"https://github.com/pytest-dev/pytest/issues/12194#issuecomment-2041924511","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12194","id":2041924511,"node_id":"IC_kwDOAjwLdc55tUuf","user":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-08T06:00:29Z","updated_at":"2024-04-08T06:00:29Z","body":"It occurred to me that the fix in #12169 might also address this issue, but it does not:\r\n\r\n```\r\n draft @ pip-run git+https://github.com/pytest-dev/pytest@refs/pull/12169/head -- -m pytest --import-mode importlib --doctest-modules\r\n  WARNING: Did not find branch or tag 'refs/pull/12169/head', assuming revision or ref.\r\n============================================================== test session starts ===============================================================\r\nplatform darwin -- Python 3.12.2, pytest-8.2.0.dev95+g1e22e0f70, pluggy-1.4.0\r\nrootdir: /Users/jaraco/draft\r\ncollected 0 items / 1 error                                                                                                                      \r\n\r\n===================================================================== ERRORS =====================================================================\r\n_______________________________________________________ ERROR collecting test_something.py _______________________________________________________\r\ntest_something.py:4: in <module>\r\n    foo.bar.baz\r\nE   AttributeError: module 'foo' has no attribute 'bar'\r\n============================================================ short test summary info =============================================================\r\nERROR test_something.py - AttributeError: module 'foo' has no attribute 'bar'\r\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n================================================================ 1 error in 0.03s ================================================================\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2041924511/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2042607740","html_url":"https://github.com/pytest-dev/pytest/issues/12194#issuecomment-2042607740","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12194","id":2042607740,"node_id":"IC_kwDOAjwLdc55v7h8","user":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-08T12:21:58Z","updated_at":"2024-04-08T12:21:58Z","body":"Thanks @jaraco, I can reproduce the issue (also verified that #12169 does not fix this).\r\n\r\nWill investigate which incantation is necessary for this to work. \r\n\r\nCurrently we import modules in `--importmode=importlib` using this snippet:\r\n\r\nhttps://github.com/pytest-dev/pytest/blob/74f05648d5ea9e69d75f27a77972756ee32f6730/src/_pytest/pathlib.py#L635-L641\r\n\r\n ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2042607740/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12391951064,"node_id":"MEE_lADOAjwLdc6E67CTzwAAAALinirY","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12391951064","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-08T12:21:59Z","performed_via_github_app":null},{"id":12391951072,"node_id":"SE_lADOAjwLdc6E67CTzwAAAALinirg","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12391951072","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-08T12:21:59Z","performed_via_github_app":null},{"id":12391951436,"node_id":"AE_lADOAjwLdc6E67CTzwAAAALinixM","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12391951436","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-04-08T12:22:01Z","assignee":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2045446960","html_url":"https://github.com/pytest-dev/pytest/issues/12194#issuecomment-2045446960","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12194","id":2045446960,"node_id":"IC_kwDOAjwLdc556wsw","user":{"login":"flying-sheep","id":291575,"node_id":"MDQ6VXNlcjI5MTU3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/291575?v=4","gravatar_id":"","url":"https://api.github.com/users/flying-sheep","html_url":"https://github.com/flying-sheep","followers_url":"https://api.github.com/users/flying-sheep/followers","following_url":"https://api.github.com/users/flying-sheep/following{/other_user}","gists_url":"https://api.github.com/users/flying-sheep/gists{/gist_id}","starred_url":"https://api.github.com/users/flying-sheep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flying-sheep/subscriptions","organizations_url":"https://api.github.com/users/flying-sheep/orgs","repos_url":"https://api.github.com/users/flying-sheep/repos","events_url":"https://api.github.com/users/flying-sheep/events{/privacy}","received_events_url":"https://api.github.com/users/flying-sheep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-09T15:16:58Z","updated_at":"2024-04-09T16:30:48Z","body":"I found an issue that might be related. If not, please direct me in the right direction.\r\n\r\nMy problem so far is that I haven’t figured out a minimal reproducer yet: Somehow the `_frozen_importlib_external.PathFinder` finds the a namespace module for our real life example but not in the test suite.\r\n\r\n<details>\r\n\r\n<summary>Minimal (not yet) reproducer:</summary>\r\n\r\n```console\r\n$ mkdir bar\r\n$ mkdir foo\r\n$ touch foo/bar.py\r\n$ tree \r\n+ foo/\r\n|  + bar.py\r\n+ bar/\r\n```\r\n\r\nNow running a pytest test that imports `foo.bar` leads to this traceback (simplified, oldest to newest)\r\n\r\n```py\r\nmod = import_path('foo/bar.py', mode='importlib', root='.')\r\n→\r\nmod = _import_module_using_spec('foo.bar', 'foo/bar.py', '.')\r\n→\r\nspec = meta_importer.find_spec('foo.bar', ['.'])\r\n```\r\n\r\nwhere `meta_importer` is a `_frozen_importlib_external.PathFinder` instance, and the module created from the spec returned by the last expression is\r\n\r\n```\r\n>>> importlib.util.module_from_spec(spec)\r\n<module 'foo.bar' (namespace) from ['./bar']>\r\n```\r\n\r\ninstead of\r\n\r\n```\r\n>>> importlib.util.module_from_spec(spec)\r\n<module 'foo.bar' from ['./foo/bar.py']>\r\n```\r\n\r\nThe documentation of [`MetaPathFinder.find_spec`](https://docs.python.org/3/library/importlib.html#importlib.abc.MetaPathFinder.find_spec) says:\r\n\r\n>  If this is a top-level import, path will be None.\r\n\r\nand since `_import_module_using_spec` says it “imports a module by its canonical name”, that means `path` *should* be none and you should call\r\n\r\n```py\r\nmeta_importer.find_spec('foo.bar', None)\r\n```\r\n\r\nright?\r\n\r\n</details>","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2045446960/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"flying-sheep","id":291575,"node_id":"MDQ6VXNlcjI5MTU3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/291575?v=4","gravatar_id":"","url":"https://api.github.com/users/flying-sheep","html_url":"https://github.com/flying-sheep","followers_url":"https://api.github.com/users/flying-sheep/followers","following_url":"https://api.github.com/users/flying-sheep/following{/other_user}","gists_url":"https://api.github.com/users/flying-sheep/gists{/gist_id}","starred_url":"https://api.github.com/users/flying-sheep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flying-sheep/subscriptions","organizations_url":"https://api.github.com/users/flying-sheep/orgs","repos_url":"https://api.github.com/users/flying-sheep/repos","events_url":"https://api.github.com/users/flying-sheep/events{/privacy}","received_events_url":"https://api.github.com/users/flying-sheep/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"flying-sheep","id":291575,"node_id":"MDQ6VXNlcjI5MTU3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/291575?v=4","gravatar_id":"","url":"https://api.github.com/users/flying-sheep","html_url":"https://github.com/flying-sheep","followers_url":"https://api.github.com/users/flying-sheep/followers","following_url":"https://api.github.com/users/flying-sheep/following{/other_user}","gists_url":"https://api.github.com/users/flying-sheep/gists{/gist_id}","starred_url":"https://api.github.com/users/flying-sheep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flying-sheep/subscriptions","organizations_url":"https://api.github.com/users/flying-sheep/orgs","repos_url":"https://api.github.com/users/flying-sheep/repos","events_url":"https://api.github.com/users/flying-sheep/events{/privacy}","received_events_url":"https://api.github.com/users/flying-sheep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-09T16:35:49Z","updated_at":"2024-04-09T16:35:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/scverse/scanpy/issues/2993","repository_url":"https://api.github.com/repos/scverse/scanpy","labels_url":"https://api.github.com/repos/scverse/scanpy/issues/2993/labels{/name}","comments_url":"https://api.github.com/repos/scverse/scanpy/issues/2993/comments","events_url":"https://api.github.com/repos/scverse/scanpy/issues/2993/events","html_url":"https://github.com/scverse/scanpy/issues/2993","id":2233447197,"node_id":"I_kwDOBMnt3c6FH7Md","number":2993,"title":"Tests fail with pytest 8.1 when a `data` dir exists","user":{"login":"ivirshup","id":8238804,"node_id":"MDQ6VXNlcjgyMzg4MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/8238804?v=4","gravatar_id":"","url":"https://api.github.com/users/ivirshup","html_url":"https://github.com/ivirshup","followers_url":"https://api.github.com/users/ivirshup/followers","following_url":"https://api.github.com/users/ivirshup/following{/other_user}","gists_url":"https://api.github.com/users/ivirshup/gists{/gist_id}","starred_url":"https://api.github.com/users/ivirshup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivirshup/subscriptions","organizations_url":"https://api.github.com/users/ivirshup/orgs","repos_url":"https://api.github.com/users/ivirshup/repos","events_url":"https://api.github.com/users/ivirshup/events{/privacy}","received_events_url":"https://api.github.com/users/ivirshup/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/scverse/scanpy/milestones/26","html_url":"https://github.com/scverse/scanpy/milestone/26","labels_url":"https://api.github.com/repos/scverse/scanpy/milestones/26/labels","id":10796235,"node_id":"MI_kwDOBMnt3c4ApLzL","number":26,"title":"1.10.2","description":"on-merge: backport to 1.10.x","creator":{"login":"ivirshup","id":8238804,"node_id":"MDQ6VXNlcjgyMzg4MDQ=","avatar_url":"https://avatars.githubusercontent.com/u/8238804?v=4","gravatar_id":"","url":"https://api.github.com/users/ivirshup","html_url":"https://github.com/ivirshup","followers_url":"https://api.github.com/users/ivirshup/followers","following_url":"https://api.github.com/users/ivirshup/following{/other_user}","gists_url":"https://api.github.com/users/ivirshup/gists{/gist_id}","starred_url":"https://api.github.com/users/ivirshup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ivirshup/subscriptions","organizations_url":"https://api.github.com/users/ivirshup/orgs","repos_url":"https://api.github.com/users/ivirshup/repos","events_url":"https://api.github.com/users/ivirshup/events{/privacy}","received_events_url":"https://api.github.com/users/ivirshup/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":73,"state":"closed","created_at":"2024-04-09T11:47:03Z","updated_at":"2024-06-25T12:09:33Z","due_on":null,"closed_at":"2024-06-25T12:09:33Z"},"comments":13,"created_at":"2024-04-09T13:29:39Z","updated_at":"2024-12-16T11:33:27Z","closed_at":"2024-04-29T13:54:13Z","author_association":"MEMBER","type":{"id":16125042,"node_id":"IT_kwDOBa5AT84A9gxy","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-02-11T19:55:28Z","updated_at":"2024-07-26T14:17:13Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":80342493,"node_id":"MDEwOlJlcG9zaXRvcnk4MDM0MjQ5Mw==","name":"scanpy","full_name":"scverse/scanpy","private":false,"owner":{"login":"scverse","id":95305807,"node_id":"O_kgDOBa5ATw","avatar_url":"https://avatars.githubusercontent.com/u/95305807?v=4","gravatar_id":"","url":"https://api.github.com/users/scverse","html_url":"https://github.com/scverse","followers_url":"https://api.github.com/users/scverse/followers","following_url":"https://api.github.com/users/scverse/following{/other_user}","gists_url":"https://api.github.com/users/scverse/gists{/gist_id}","starred_url":"https://api.github.com/users/scverse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scverse/subscriptions","organizations_url":"https://api.github.com/users/scverse/orgs","repos_url":"https://api.github.com/users/scverse/repos","events_url":"https://api.github.com/users/scverse/events{/privacy}","received_events_url":"https://api.github.com/users/scverse/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/scverse/scanpy","description":"Single-cell analysis in Python. Scales to >100M cells.","fork":false,"url":"https://api.github.com/repos/scverse/scanpy","forks_url":"https://api.github.com/repos/scverse/scanpy/forks","keys_url":"https://api.github.com/repos/scverse/scanpy/keys{/key_id}","collaborators_url":"https://api.github.com/repos/scverse/scanpy/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/scverse/scanpy/teams","hooks_url":"https://api.github.com/repos/scverse/scanpy/hooks","issue_events_url":"https://api.github.com/repos/scverse/scanpy/issues/events{/number}","events_url":"https://api.github.com/repos/scverse/scanpy/events","assignees_url":"https://api.github.com/repos/scverse/scanpy/assignees{/user}","branches_url":"https://api.github.com/repos/scverse/scanpy/branches{/branch}","tags_url":"https://api.github.com/repos/scverse/scanpy/tags","blobs_url":"https://api.github.com/repos/scverse/scanpy/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/scverse/scanpy/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/scverse/scanpy/git/refs{/sha}","trees_url":"https://api.github.com/repos/scverse/scanpy/git/trees{/sha}","statuses_url":"https://api.github.com/repos/scverse/scanpy/statuses/{sha}","languages_url":"https://api.github.com/repos/scverse/scanpy/languages","stargazers_url":"https://api.github.com/repos/scverse/scanpy/stargazers","contributors_url":"https://api.github.com/repos/scverse/scanpy/contributors","subscribers_url":"https://api.github.com/repos/scverse/scanpy/subscribers","subscription_url":"https://api.github.com/repos/scverse/scanpy/subscription","commits_url":"https://api.github.com/repos/scverse/scanpy/commits{/sha}","git_commits_url":"https://api.github.com/repos/scverse/scanpy/git/commits{/sha}","comments_url":"https://api.github.com/repos/scverse/scanpy/comments{/number}","issue_comment_url":"https://api.github.com/repos/scverse/scanpy/issues/comments{/number}","contents_url":"https://api.github.com/repos/scverse/scanpy/contents/{+path}","compare_url":"https://api.github.com/repos/scverse/scanpy/compare/{base}...{head}","merges_url":"https://api.github.com/repos/scverse/scanpy/merges","archive_url":"https://api.github.com/repos/scverse/scanpy/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/scverse/scanpy/downloads","issues_url":"https://api.github.com/repos/scverse/scanpy/issues{/number}","pulls_url":"https://api.github.com/repos/scverse/scanpy/pulls{/number}","milestones_url":"https://api.github.com/repos/scverse/scanpy/milestones{/number}","notifications_url":"https://api.github.com/repos/scverse/scanpy/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/scverse/scanpy/labels{/name}","releases_url":"https://api.github.com/repos/scverse/scanpy/releases{/id}","deployments_url":"https://api.github.com/repos/scverse/scanpy/deployments","created_at":"2017-01-29T11:31:11Z","updated_at":"2025-11-07T17:35:27Z","pushed_at":"2025-11-07T17:35:24Z","git_url":"git://github.com/scverse/scanpy.git","ssh_url":"git@github.com:scverse/scanpy.git","clone_url":"https://github.com/scverse/scanpy.git","svn_url":"https://github.com/scverse/scanpy","homepage":"https://scanpy.readthedocs.io","size":43680,"stargazers_count":2248,"watchers_count":2248,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":false,"forks_count":675,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":560,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause","node_id":"MDc6TGljZW5zZTU="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["anndata","bioinformatics","data-science","machine-learning","python","scanpy","scverse","transcriptomics","visualize-data"],"visibility":"public","forks":675,"open_issues":560,"watchers":2248,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"First reported by @lazappi, but now confirmed by me.\r\n\r\nTests error during collection for a fresh dev install.\r\n\r\n```\r\nmamba create -yn scanpy-dev \"python=3.12\"\r\nconda activate scanpy-dev\r\npip install -e \".[dev,test]\" pytest-xdist  # pytest-xdist isn't required, but makes this faster\r\nconda deactivate scanpy-dev\r\nconda activate scanpy-dev\r\npytest -n auto\r\n```\r\n\r\nFirst everything fails since `dask-expr` isn't installed. This must be someone upstream pinning dask, but is easily solvable by adding dask-expr to the environment.\r\n\r\n```\r\npip install dask-expr\r\npytest -n auto\r\n```\r\n\r\n\r\n<details>\r\n<summary> Failures </summary>\r\n\r\n```\r\nFAILED scanpy/tests/test_score_genes.py::test_score_with_reference - TypeError: 'module' object is not callable\r\nFAILED scanpy/tests/test_scrublet.py::test_scrublet[True-sparse] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nFAILED scanpy/tests/test_scrublet.py::test_scrublet[True-dense] - ImportError: cannot import name '_paul15' from 'scanpy.testing._helpers.data' (unknown location)\r\nFAILED scanpy/tests/test_scrublet.py::test_scrublet[False-sparse] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nFAILED scanpy/tests/test_scrublet.py::test_scrublet[False-dense] - ImportError: cannot import name '_paul15' from 'scanpy.testing._helpers.data' (unknown location)\r\nFAILED scanpy/tests/test_scrublet.py::test_scrublet_batched - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nFAILED scanpy/tests/test_scrublet.py::test_scrublet_data - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nFAILED scanpy/tests/test_scrublet.py::test_scrublet_simulate_doublets - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/external/test_harmony_integrate.py\r\nERROR scanpy/tests/external/test_harmony_timeseries.py\r\nERROR scanpy/tests/external/test_palantir.py\r\nERROR scanpy/tests/external/test_sam.py\r\nERROR scanpy/tests/external/test_scanorama_integrate.py\r\nERROR scanpy/tests/external/test_wishbone.py\r\nERROR scanpy/tests/test_aggregated.py\r\nERROR scanpy/tests/test_clustering.py\r\nERROR scanpy/tests/test_dendrogram.py\r\nERROR scanpy/tests/test_deprecations.py\r\nERROR scanpy/tests/test_embedding.py\r\nERROR scanpy/tests/test_embedding_density.py\r\nERROR scanpy/tests/test_embedding_plots.py\r\nERROR scanpy/tests/test_filter_rank_genes_groups.py\r\nERROR scanpy/tests/test_get.py\r\nERROR scanpy/tests/test_highly_variable_genes.py\r\nERROR scanpy/tests/test_ingest.py\r\nERROR scanpy/tests/test_metrics.py\r\nERROR scanpy/tests/test_neighbors_key_added.py\r\nERROR scanpy/tests/test_paga.py\r\nERROR scanpy/tests/test_pca.py\r\nERROR scanpy/tests/test_plotting.py\r\nERROR scanpy/tests/test_preprocessing.py\r\nERROR scanpy/tests/test_queries.py\r\nERROR scanpy/tests/test_rank_genes_groups.py\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_warnings[toarray-float32] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[toarray-float32-theta0] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[toarray-float32-theta1] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[toarray-float32-params2-Pearson residuals require `clip>=0` or `clip=None`.] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-no_hvg-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-no_hvg-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-no_hvg-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-no_hvg-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_default-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_default-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[csr_matrix-float32-params2-Pearson residuals require `clip>=0` or `clip=None`.] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-no_hvg-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-no_hvg-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-no_hvg-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-no_hvg-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_default-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_default-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_default-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_default-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_opt_out-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-float32-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-float32-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_warnings[csr_matrix-int64] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_opt_out-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[csr_matrix-int64-theta0] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[csr_matrix-int64-theta1] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[csr_matrix-int64-params2-Pearson residuals require `clip>=0` or `clip=None`.] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_opt_out-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-no_hvg-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-no_hvg-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-hvg_opt_out-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-no_hvg-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-mask-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-no_hvg-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_default-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-mask-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_default-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-mask-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_default-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_default-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-float32-mask-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_opt_out-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-mask-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-float32-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-mask-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-mask-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_opt_out-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-int64-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-float32-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-int64-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_opt_out-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-int64-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[csr_matrix-int64-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-hvg_opt_out-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[csr_matrix-int64-mask-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_default-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_default-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_opt_out-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_opt_out-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_opt_out-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-hvg_opt_out-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-mask-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-mask-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-mask-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-float32-mask-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-float32-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-float32-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-float32-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-float32-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_warnings[toarray-int64] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[toarray-int64-theta0] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[toarray-int64-theta1] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[toarray-int64-params2-Pearson residuals require `clip>=0` or `clip=None`.] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-no_hvg-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-no_hvg-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-no_hvg-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[expected_doublet_rate-0.1] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[synthetic_doublet_umi_subsampling-0.8] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[knn_dist_metric-manhattan] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[normalize_variance-False] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[log_transform-True] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[mean_center-False] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[n_prin_comps-10] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[n_neighbors-2] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_scrublet.py::test_scrublet_params[threshold-0.1] - ImportError: cannot import name '_pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-no_hvg-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_default-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_default-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_default-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_default-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_opt_out-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_opt_out-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_opt_out-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-hvg_opt_out-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-mask-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-mask-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-mask-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_pca[toarray-int64-mask-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-int64-30-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-int64-30-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-int64-50-100] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_recipe[toarray-int64-50-200] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_warnings[csr_matrix-float32] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[csr_matrix-float32-theta0] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\nERROR scanpy/tests/test_normalization.py::test_normalize_pearson_residuals_errors[csr_matrix-float32-theta1] - ImportError: cannot import name 'pbmc3k' from 'scanpy.testing._helpers.data' (unknown location)\r\n=========================================================== 8 failed, 670 passed, 40 skipped, 3 xfailed, 400 warnings, 130 errors in 44.70s ============================================================\r\n```\r\n\r\n</details> \r\n\r\nNow we get a ton of failures due to a failure to import test dataset helpers\r\n\r\n-----\r\n\r\nPinning `pytest<8` seems to resolve the issue.\r\n\r\n@flying-sheep any ideas? Any idea why CI is working with pytest 8.1.1 while we get failures locally?\r\n\r\n\r\n### Environment info\r\n\r\nMy environments are both using ubuntu\r\n\r\n<details>\r\n<summary> My working env </summary>\r\n\r\n```\r\n# packages in environment at /mnt/workspace/mambaforge/envs/scanpy-dev2:\r\n#\r\n# Name                    Version                   Build  Channel\r\n_libgcc_mutex             0.1                 conda_forge    conda-forge\r\n_openmp_mutex             4.5                       2_gnu    conda-forge\r\nanndata                   0.10.7                   pypi_0    pypi\r\narray-api-compat          1.6                      pypi_0    pypi\r\nasciitree                 0.3.3                    pypi_0    pypi\r\nattrs                     23.2.0                   pypi_0    pypi\r\nbzip2                     1.0.8                hd590300_5    conda-forge\r\nca-certificates           2024.2.2             hbcca054_0    conda-forge\r\ncfgv                      3.4.0                    pypi_0    pypi\r\nclick                     8.1.7                    pypi_0    pypi\r\ncloudpickle               3.0.0                    pypi_0    pypi\r\ncontourpy                 1.2.1                    pypi_0    pypi\r\ncoverage                  7.4.4                    pypi_0    pypi\r\ncycler                    0.12.1                   pypi_0    pypi\r\ndask                      2024.4.1                 pypi_0    pypi\r\ndask-expr                 1.0.10                   pypi_0    pypi\r\ndistlib                   0.3.8                    pypi_0    pypi\r\nexecnet                   2.1.1                    pypi_0    pypi\r\nfasteners                 0.19                     pypi_0    pypi\r\nfilelock                  3.13.3                   pypi_0    pypi\r\nfonttools                 4.51.0                   pypi_0    pypi\r\nfsspec                    2024.3.1                 pypi_0    pypi\r\nh5py                      3.10.0                   pypi_0    pypi\r\nidentify                  2.5.35                   pypi_0    pypi\r\nigraph                    0.11.4                   pypi_0    pypi\r\nimageio                   2.34.0                   pypi_0    pypi\r\niniconfig                 2.0.0                    pypi_0    pypi\r\njoblib                    1.4.0                    pypi_0    pypi\r\nkiwisolver                1.4.5                    pypi_0    pypi\r\nlazy-loader               0.4                      pypi_0    pypi\r\nld_impl_linux-64          2.40                 h41732ed_0    conda-forge\r\nlegacy-api-wrap           1.4                      pypi_0    pypi\r\nleidenalg                 0.10.2                   pypi_0    pypi\r\nlibexpat                  2.6.2                h59595ed_0    conda-forge\r\nlibffi                    3.4.2                h7f98852_5    conda-forge\r\nlibgcc-ng                 13.2.0               h807b86a_5    conda-forge\r\nlibgomp                   13.2.0               h807b86a_5    conda-forge\r\nlibnsl                    2.0.1                hd590300_0    conda-forge\r\nlibsqlite                 3.45.2               h2797004_0    conda-forge\r\nlibuuid                   2.38.1               h0b41bf4_0    conda-forge\r\nlibxcrypt                 4.4.36               hd590300_1    conda-forge\r\nlibzlib                   1.2.13               hd590300_5    conda-forge\r\nllvmlite                  0.42.0                   pypi_0    pypi\r\nlocket                    1.0.0                    pypi_0    pypi\r\nmatplotlib                3.8.4                    pypi_0    pypi\r\nnatsort                   8.4.0                    pypi_0    pypi\r\nncurses                   6.4.20240210         h59595ed_0    conda-forge\r\nnetworkx                  3.3                      pypi_0    pypi\r\nnodeenv                   1.8.0                    pypi_0    pypi\r\nnumba                     0.59.1                   pypi_0    pypi\r\nnumcodecs                 0.12.1                   pypi_0    pypi\r\nnumpy                     1.26.4                   pypi_0    pypi\r\nopenssl                   3.2.1                hd590300_1    conda-forge\r\npackaging                 24.0                     pypi_0    pypi\r\npandas                    2.2.1                    pypi_0    pypi\r\npartd                     1.4.1                    pypi_0    pypi\r\npatsy                     0.5.6                    pypi_0    pypi\r\npbr                       6.0.0                    pypi_0    pypi\r\npillow                    10.3.0                   pypi_0    pypi\r\npip                       24.0               pyhd8ed1ab_0    conda-forge\r\nplatformdirs              4.2.0                    pypi_0    pypi\r\npluggy                    1.4.0                    pypi_0    pypi\r\npre-commit                3.7.0                    pypi_0    pypi\r\nprofimp                   0.1.0                    pypi_0    pypi\r\npyarrow                   15.0.2                   pypi_0    pypi\r\npynndescent               0.5.12                   pypi_0    pypi\r\npyparsing                 3.1.2                    pypi_0    pypi\r\npytest                    7.4.4                    pypi_0    pypi\r\npytest-cov                5.0.0                    pypi_0    pypi\r\npytest-mock               3.14.0                   pypi_0    pypi\r\npytest-nunit              1.0.7                    pypi_0    pypi\r\npytest-xdist              3.5.0                    pypi_0    pypi\r\npython                    3.12.2          hab00c5b_0_cpython    conda-forge\r\npython-dateutil           2.9.0.post0              pypi_0    pypi\r\npytz                      2024.1                   pypi_0    pypi\r\npyyaml                    6.0.1                    pypi_0    pypi\r\nreadline                  8.2                  h8228510_1    conda-forge\r\nscanpy                    1.10.0rc2.dev33+g9c8c095d          pypi_0    pypi\r\nscikit-image              0.22.0                   pypi_0    pypi\r\nscikit-learn              1.4.1.post1              pypi_0    pypi\r\nscipy                     1.13.0                   pypi_0    pypi\r\nseaborn                   0.13.2                   pypi_0    pypi\r\nsession-info              1.0.0                    pypi_0    pypi\r\nsetuptools                69.2.0             pyhd8ed1ab_0    conda-forge\r\nsetuptools-scm            8.0.4                    pypi_0    pypi\r\nsix                       1.16.0                   pypi_0    pypi\r\nstatsmodels               0.14.1                   pypi_0    pypi\r\nstdlib-list               0.10.0                   pypi_0    pypi\r\ntexttable                 1.7.0                    pypi_0    pypi\r\nthreadpoolctl             3.4.0                    pypi_0    pypi\r\ntifffile                  2024.2.12                pypi_0    pypi\r\ntk                        8.6.13          noxft_h4845f30_101    conda-forge\r\ntoolz                     0.12.1                   pypi_0    pypi\r\ntqdm                      4.66.2                   pypi_0    pypi\r\ntyping-extensions         4.11.0                   pypi_0    pypi\r\ntzdata                    2024.1                   pypi_0    pypi\r\numap-learn                0.5.6                    pypi_0    pypi\r\nvirtualenv                20.25.1                  pypi_0    pypi\r\nwheel                     0.43.0             pyhd8ed1ab_1    conda-forge\r\nxz                        5.2.6                h166bdaf_0    conda-forge\r\nzarr                      2.17.2                   pypi_0    pypi\r\n```\r\n\r\n</details>\r\n\r\n\r\n<details>\r\n<summary>  My failing env </summary>\r\n\r\n```\r\n# packages in environment at /mnt/workspace/mambaforge/envs/scanpy-dev2:\r\n#\r\n# Name                    Version                   Build  Channel\r\n_libgcc_mutex             0.1                 conda_forge    conda-forge\r\n_openmp_mutex             4.5                       2_gnu    conda-forge\r\nanndata                   0.10.7                   pypi_0    pypi\r\narray-api-compat          1.6                      pypi_0    pypi\r\nasciitree                 0.3.3                    pypi_0    pypi\r\nattrs                     23.2.0                   pypi_0    pypi\r\nbzip2                     1.0.8                hd590300_5    conda-forge\r\nca-certificates           2024.2.2             hbcca054_0    conda-forge\r\ncfgv                      3.4.0                    pypi_0    pypi\r\nclick                     8.1.7                    pypi_0    pypi\r\ncloudpickle               3.0.0                    pypi_0    pypi\r\ncontourpy                 1.2.1                    pypi_0    pypi\r\ncoverage                  7.4.4                    pypi_0    pypi\r\ncycler                    0.12.1                   pypi_0    pypi\r\ndask                      2024.4.1                 pypi_0    pypi\r\ndask-expr                 1.0.10                   pypi_0    pypi\r\ndistlib                   0.3.8                    pypi_0    pypi\r\nexecnet                   2.1.1                    pypi_0    pypi\r\nfasteners                 0.19                     pypi_0    pypi\r\nfilelock                  3.13.3                   pypi_0    pypi\r\nfonttools                 4.51.0                   pypi_0    pypi\r\nfsspec                    2024.3.1                 pypi_0    pypi\r\nh5py                      3.10.0                   pypi_0    pypi\r\nidentify                  2.5.35                   pypi_0    pypi\r\nigraph                    0.11.4                   pypi_0    pypi\r\nimageio                   2.34.0                   pypi_0    pypi\r\niniconfig                 2.0.0                    pypi_0    pypi\r\njoblib                    1.4.0                    pypi_0    pypi\r\nkiwisolver                1.4.5                    pypi_0    pypi\r\nlazy-loader               0.4                      pypi_0    pypi\r\nld_impl_linux-64          2.40                 h41732ed_0    conda-forge\r\nlegacy-api-wrap           1.4                      pypi_0    pypi\r\nleidenalg                 0.10.2                   pypi_0    pypi\r\nlibexpat                  2.6.2                h59595ed_0    conda-forge\r\nlibffi                    3.4.2                h7f98852_5    conda-forge\r\nlibgcc-ng                 13.2.0               h807b86a_5    conda-forge\r\nlibgomp                   13.2.0               h807b86a_5    conda-forge\r\nlibnsl                    2.0.1                hd590300_0    conda-forge\r\nlibsqlite                 3.45.2               h2797004_0    conda-forge\r\nlibuuid                   2.38.1               h0b41bf4_0    conda-forge\r\nlibxcrypt                 4.4.36               hd590300_1    conda-forge\r\nlibzlib                   1.2.13               hd590300_5    conda-forge\r\nllvmlite                  0.42.0                   pypi_0    pypi\r\nlocket                    1.0.0                    pypi_0    pypi\r\nmatplotlib                3.8.4                    pypi_0    pypi\r\nnatsort                   8.4.0                    pypi_0    pypi\r\nncurses                   6.4.20240210         h59595ed_0    conda-forge\r\nnetworkx                  3.3                      pypi_0    pypi\r\nnodeenv                   1.8.0                    pypi_0    pypi\r\nnumba                     0.59.1                   pypi_0    pypi\r\nnumcodecs                 0.12.1                   pypi_0    pypi\r\nnumpy                     1.26.4                   pypi_0    pypi\r\nopenssl                   3.2.1                hd590300_1    conda-forge\r\npackaging                 24.0                     pypi_0    pypi\r\npandas                    2.2.1                    pypi_0    pypi\r\npartd                     1.4.1                    pypi_0    pypi\r\npatsy                     0.5.6                    pypi_0    pypi\r\npbr                       6.0.0                    pypi_0    pypi\r\npillow                    10.3.0                   pypi_0    pypi\r\npip                       24.0               pyhd8ed1ab_0    conda-forge\r\nplatformdirs              4.2.0                    pypi_0    pypi\r\npluggy                    1.4.0                    pypi_0    pypi\r\npre-commit                3.7.0                    pypi_0    pypi\r\nprofimp                   0.1.0                    pypi_0    pypi\r\npyarrow                   15.0.2                   pypi_0    pypi\r\npynndescent               0.5.12                   pypi_0    pypi\r\npyparsing                 3.1.2                    pypi_0    pypi\r\npytest                    8.1.1                    pypi_0    pypi\r\npytest-cov                5.0.0                    pypi_0    pypi\r\npytest-mock               3.14.0                   pypi_0    pypi\r\npytest-nunit              1.0.7                    pypi_0    pypi\r\npytest-xdist              3.5.0                    pypi_0    pypi\r\npython                    3.12.2          hab00c5b_0_cpython    conda-forge\r\npython-dateutil           2.9.0.post0              pypi_0    pypi\r\npytz                      2024.1                   pypi_0    pypi\r\npyyaml                    6.0.1                    pypi_0    pypi\r\nreadline                  8.2                  h8228510_1    conda-forge\r\nscanpy                    1.10.0rc2.dev33+g9c8c095d          pypi_0    pypi\r\nscikit-image              0.22.0                   pypi_0    pypi\r\nscikit-learn              1.4.1.post1              pypi_0    pypi\r\nscipy                     1.13.0                   pypi_0    pypi\r\nseaborn                   0.13.2                   pypi_0    pypi\r\nsession-info              1.0.0                    pypi_0    pypi\r\nsetuptools                69.2.0             pyhd8ed1ab_0    conda-forge\r\nsetuptools-scm            8.0.4                    pypi_0    pypi\r\nsix                       1.16.0                   pypi_0    pypi\r\nstatsmodels               0.14.1                   pypi_0    pypi\r\nstdlib-list               0.10.0                   pypi_0    pypi\r\ntexttable                 1.7.0                    pypi_0    pypi\r\nthreadpoolctl             3.4.0                    pypi_0    pypi\r\ntifffile                  2024.2.12                pypi_0    pypi\r\ntk                        8.6.13          noxft_h4845f30_101    conda-forge\r\ntoolz                     0.12.1                   pypi_0    pypi\r\ntqdm                      4.66.2                   pypi_0    pypi\r\ntyping-extensions         4.11.0                   pypi_0    pypi\r\ntzdata                    2024.1                   pypi_0    pypi\r\numap-learn                0.5.6                    pypi_0    pypi\r\nvirtualenv                20.25.1                  pypi_0    pypi\r\nwheel                     0.43.0             pyhd8ed1ab_1    conda-forge\r\nxz                        5.2.6                h166bdaf_0    conda-forge\r\nzarr                      2.17.2                   pypi_0    pypi\r\n```\r\n\r\n</details>\r\n\r\nLuke's environment: MacOS Ventura 13.4.1. Intel MacBook pro\r\n\r\n<details>\r\n<summary> Luke's failing env </summary>\r\n\r\n```\r\n# packages in environment at /Users/luke.zappia/miniconda3/envs/scanpy-dev:\r\n#\r\n# Name                    Version                   Build  Channel\r\nanndata                   0.10.6                   pypi_0    pypi\r\narray-api-compat          1.4.1                    pypi_0    pypi\r\nasciitree                 0.3.3                    pypi_0    pypi\r\nattrs                     23.2.0                   pypi_0    pypi\r\nbzip2                     1.0.8                h10d778d_5    conda-forge\r\nca-certificates           2024.2.2             h8857fd0_0    conda-forge\r\ncfgv                      3.4.0                    pypi_0    pypi\r\nclick                     8.1.7                    pypi_0    pypi\r\ncloudpickle               3.0.0                    pypi_0    pypi\r\ncontourpy                 1.2.0                    pypi_0    pypi\r\ncoverage                  7.4.4                    pypi_0    pypi\r\ncycler                    0.12.1                   pypi_0    pypi\r\ndask                      2024.3.0                 pypi_0    pypi\r\ndistlib                   0.3.8                    pypi_0    pypi\r\nexecnet                   2.1.1                    pypi_0    pypi\r\nfasteners                 0.19                     pypi_0    pypi\r\nfilelock                  3.13.3                   pypi_0    pypi\r\nfonttools                 4.49.0                   pypi_0    pypi\r\nfsspec                    2024.2.0                 pypi_0    pypi\r\nh5py                      3.10.0                   pypi_0    pypi\r\nidentify                  2.5.35                   pypi_0    pypi\r\nigraph                    0.11.4                   pypi_0    pypi\r\nimageio                   2.34.0                   pypi_0    pypi\r\niniconfig                 2.0.0                    pypi_0    pypi\r\njoblib                    1.3.2                    pypi_0    pypi\r\nkiwisolver                1.4.5                    pypi_0    pypi\r\nlazy-loader               0.3                      pypi_0    pypi\r\nlegacy-api-wrap           1.4                      pypi_0    pypi\r\nleidenalg                 0.10.2                   pypi_0    pypi\r\nlibexpat                  2.6.2                h73e2aa4_0    conda-forge\r\nlibffi                    3.4.2                h0d85af4_5    conda-forge\r\nlibsqlite                 3.45.2               h92b6c6a_0    conda-forge\r\nlibzlib                   1.2.13               h8a1eda9_5    conda-forge\r\nllvmlite                  0.42.0                   pypi_0    pypi\r\nlocket                    1.0.0                    pypi_0    pypi\r\nmatplotlib                3.8.3                    pypi_0    pypi\r\nnatsort                   8.4.0                    pypi_0    pypi\r\nncurses                   6.4                  h93d8f39_2    conda-forge\r\nnetworkx                  3.2.1                    pypi_0    pypi\r\nnodeenv                   1.8.0                    pypi_0    pypi\r\nnumba                     0.59.0                   pypi_0    pypi\r\nnumcodecs                 0.12.1                   pypi_0    pypi\r\nnumpy                     1.26.4                   pypi_0    pypi\r\nopenssl                   3.2.1                hd75f5a5_0    conda-forge\r\npackaging                 24.0                     pypi_0    pypi\r\npandas                    2.2.1                    pypi_0    pypi\r\npartd                     1.4.1                    pypi_0    pypi\r\npatsy                     0.5.6                    pypi_0    pypi\r\npbr                       6.0.0                    pypi_0    pypi\r\npillow                    10.2.0                   pypi_0    pypi\r\npip                       24.0               pyhd8ed1ab_0    conda-forge\r\nplatformdirs              4.2.0                    pypi_0    pypi\r\npluggy                    1.4.0                    pypi_0    pypi\r\npre-commit                3.7.0                    pypi_0    pypi\r\nprofimp                   0.1.0                    pypi_0    pypi\r\npynndescent               0.5.11                   pypi_0    pypi\r\npyparsing                 3.1.2                    pypi_0    pypi\r\npytest                    8.1.1                    pypi_0    pypi\r\npytest-cov                4.1.0                    pypi_0    pypi\r\npytest-mock               3.12.0                   pypi_0    pypi\r\npytest-nunit              1.0.7                    pypi_0    pypi\r\npytest-xdist              3.5.0                    pypi_0    pypi\r\npython                    3.12.2          h9f0c242_0_cpython    conda-forge\r\npython-dateutil           2.9.0.post0              pypi_0    pypi\r\npytz                      2024.1                   pypi_0    pypi\r\npyyaml                    6.0.1                    pypi_0    pypi\r\nreadline                  8.2                  h9e318b2_1    conda-forge\r\nscanpy                    1.10.0rc2.dev16+g60aa7180          pypi_0    pypi\r\nscikit-image              0.22.0                   pypi_0    pypi\r\nscikit-learn              1.4.1.post1              pypi_0    pypi\r\nscipy                     1.12.0                   pypi_0    pypi\r\nseaborn                   0.13.2                   pypi_0    pypi\r\nsession-info              1.0.0                    pypi_0    pypi\r\nsetuptools                69.2.0             pyhd8ed1ab_0    conda-forge\r\nsetuptools-scm            8.0.4                    pypi_0    pypi\r\nsix                       1.16.0                   pypi_0    pypi\r\nstatsmodels               0.14.1                   pypi_0    pypi\r\nstdlib-list               0.10.0                   pypi_0    pypi\r\ntexttable                 1.7.0                    pypi_0    pypi\r\nthreadpoolctl             3.3.0                    pypi_0    pypi\r\ntifffile                  2024.2.12                pypi_0    pypi\r\ntk                        8.6.13               h1abcd95_1    conda-forge\r\ntoolz                     0.12.1                   pypi_0    pypi\r\ntqdm                      4.66.2                   pypi_0    pypi\r\ntyping-extensions         4.11.0                   pypi_0    pypi\r\ntzdata                    2024.1                   pypi_0    pypi\r\numap-learn                0.5.5                    pypi_0    pypi\r\nvirtualenv                20.25.1                  pypi_0    pypi\r\nwheel                     0.42.0             pyhd8ed1ab_0    conda-forge\r\nxz                        5.2.6                h775f41a_0    conda-forge\r\nzarr                      2.17.1                   pypi_0    pypi\r\n```\r\n\r\n</details>\r\n\r\n\r\n## TODO:\r\n\r\n- [ ] Unpin pytest","reactions":{"url":"https://api.github.com/repos/scverse/scanpy/issues/2993/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/scverse/scanpy/issues/2993/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2046288801","html_url":"https://github.com/pytest-dev/pytest/issues/12194#issuecomment-2046288801","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12194","id":2046288801,"node_id":"IC_kwDOAjwLdc559-Oh","user":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-10T01:22:57Z","updated_at":"2024-04-10T01:22:57Z","body":"Thanks for the tip. I did find that adding this patch works around the issue (at least in the repro):\r\n\r\n```diff\r\ndiff --git a/src/_pytest/pathlib.py b/src/_pytest/pathlib.py\r\nindex 254d9d946..bb26a433f 100644\r\n--- a/src/_pytest/pathlib.py\r\n+++ b/src/_pytest/pathlib.py\r\n@@ -638,6 +638,7 @@ def _import_module_using_spec(\r\n         assert spec is not None\r\n         mod = importlib.util.module_from_spec(spec)\r\n         sys.modules[module_name] = mod\r\n+        _set_name_in_parent(mod)\r\n         spec.loader.exec_module(mod)  # type: ignore[union-attr]\r\n         if insert_modules:\r\n             insert_missing_modules(sys.modules, module_name)\r\n@@ -646,6 +647,13 @@ def _import_module_using_spec(\r\n     return None\r\n \r\n \r\n+def _set_name_in_parent(mod):\r\n+    parent, sep, name = mod.__name__.rpartition(\".\")\r\n+    if not sep:\r\n+        return\r\n+    setattr(sys.modules[parent], name, mod)\r\n+\r\n+\r\n def spec_matches_module_path(\r\n     module_spec: Optional[ModuleSpec], module_path: Path\r\n ) -> bool:\r\n```\r\n\r\nI wonder if there's similar logic in CPython's importlib logic that should be modeled.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2046288801/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2046296923","html_url":"https://github.com/pytest-dev/pytest/issues/12194#issuecomment-2046296923","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12194","id":2046296923,"node_id":"IC_kwDOAjwLdc55-ANb","user":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-10T01:29:33Z","updated_at":"2024-04-10T01:29:33Z","body":"Here's [where that happens in CPython](https://github.com/python/cpython/blob/73906d5c908c1e0b73c5436faeff7d93698fc074/Lib/importlib/_bootstrap.py#L1335-L1342). Doesn't seem to be particularly re-usable, but at least shows how that behavior is implemented there.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2046296923/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2049962929","html_url":"https://github.com/pytest-dev/pytest/issues/12194#issuecomment-2049962929","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12194","id":2049962929,"node_id":"IC_kwDOAjwLdc56L_Ox","user":{"login":"flying-sheep","id":291575,"node_id":"MDQ6VXNlcjI5MTU3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/291575?v=4","gravatar_id":"","url":"https://api.github.com/users/flying-sheep","html_url":"https://github.com/flying-sheep","followers_url":"https://api.github.com/users/flying-sheep/followers","following_url":"https://api.github.com/users/flying-sheep/following{/other_user}","gists_url":"https://api.github.com/users/flying-sheep/gists{/gist_id}","starred_url":"https://api.github.com/users/flying-sheep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flying-sheep/subscriptions","organizations_url":"https://api.github.com/users/flying-sheep/orgs","repos_url":"https://api.github.com/users/flying-sheep/repos","events_url":"https://api.github.com/users/flying-sheep/events{/privacy}","received_events_url":"https://api.github.com/users/flying-sheep/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-11T15:27:50Z","updated_at":"2024-04-11T15:27:50Z","body":"My issue is fixed with #12169, but I found that the change in #12207 avoids the wrong loader altogether.\r\n\r\n@jaraco does that one fix your problem?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2049962929/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"flying-sheep","id":291575,"node_id":"MDQ6VXNlcjI5MTU3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/291575?v=4","gravatar_id":"","url":"https://api.github.com/users/flying-sheep","html_url":"https://github.com/flying-sheep","followers_url":"https://api.github.com/users/flying-sheep/followers","following_url":"https://api.github.com/users/flying-sheep/following{/other_user}","gists_url":"https://api.github.com/users/flying-sheep/gists{/gist_id}","starred_url":"https://api.github.com/users/flying-sheep/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/flying-sheep/subscriptions","organizations_url":"https://api.github.com/users/flying-sheep/orgs","repos_url":"https://api.github.com/users/flying-sheep/repos","events_url":"https://api.github.com/users/flying-sheep/events{/privacy}","received_events_url":"https://api.github.com/users/flying-sheep/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12438302820,"node_id":"MEE_lADOAjwLdc6E67CTzwAAAALlYXBk","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12438302820","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-11T15:27:51Z","performed_via_github_app":null},{"id":12438302833,"node_id":"SE_lADOAjwLdc6E67CTzwAAAALlYXBx","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12438302833","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-11T15:27:51Z","performed_via_github_app":null},{"actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-12T18:54:50Z","updated_at":"2024-04-12T18:54:50Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12208","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12208/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12208/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12208/events","html_url":"https://github.com/pytest-dev/pytest/pull/12208","id":2240730702,"node_id":"PR_kwDOAjwLdc5shfIX","number":12208,"title":"importlib: set children as attribute of parent modules","user":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pytest-dev/pytest/milestones/43","html_url":"https://github.com/pytest-dev/pytest/milestone/43","labels_url":"https://api.github.com/repos/pytest-dev/pytest/milestones/43/labels","id":10816999,"node_id":"MI_kwDOAjwLdc4ApQ3n","number":43,"title":"8.2","description":"","creator":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2024-04-14T12:35:22Z","updated_at":"2024-11-08T11:10:56Z","due_on":null,"closed_at":"2024-11-08T11:10:56Z"},"comments":9,"created_at":"2024-04-12T18:54:49Z","updated_at":"2024-04-20T11:43:44Z","closed_at":"2024-04-20T11:31:34Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":37489525,"node_id":"MDEwOlJlcG9zaXRvcnkzNzQ4OTUyNQ==","name":"pytest","full_name":"pytest-dev/pytest","private":false,"owner":{"login":"pytest-dev","id":8897583,"node_id":"MDEyOk9yZ2FuaXphdGlvbjg4OTc1ODM=","avatar_url":"https://avatars.githubusercontent.com/u/8897583?v=4","gravatar_id":"","url":"https://api.github.com/users/pytest-dev","html_url":"https://github.com/pytest-dev","followers_url":"https://api.github.com/users/pytest-dev/followers","following_url":"https://api.github.com/users/pytest-dev/following{/other_user}","gists_url":"https://api.github.com/users/pytest-dev/gists{/gist_id}","starred_url":"https://api.github.com/users/pytest-dev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pytest-dev/subscriptions","organizations_url":"https://api.github.com/users/pytest-dev/orgs","repos_url":"https://api.github.com/users/pytest-dev/repos","events_url":"https://api.github.com/users/pytest-dev/events{/privacy}","received_events_url":"https://api.github.com/users/pytest-dev/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pytest-dev/pytest","description":"The pytest framework makes it easy to write small tests, yet scales to support complex functional testing","fork":false,"url":"https://api.github.com/repos/pytest-dev/pytest","forks_url":"https://api.github.com/repos/pytest-dev/pytest/forks","keys_url":"https://api.github.com/repos/pytest-dev/pytest/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pytest-dev/pytest/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pytest-dev/pytest/teams","hooks_url":"https://api.github.com/repos/pytest-dev/pytest/hooks","issue_events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/events{/number}","events_url":"https://api.github.com/repos/pytest-dev/pytest/events","assignees_url":"https://api.github.com/repos/pytest-dev/pytest/assignees{/user}","branches_url":"https://api.github.com/repos/pytest-dev/pytest/branches{/branch}","tags_url":"https://api.github.com/repos/pytest-dev/pytest/tags","blobs_url":"https://api.github.com/repos/pytest-dev/pytest/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pytest-dev/pytest/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pytest-dev/pytest/git/refs{/sha}","trees_url":"https://api.github.com/repos/pytest-dev/pytest/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pytest-dev/pytest/statuses/{sha}","languages_url":"https://api.github.com/repos/pytest-dev/pytest/languages","stargazers_url":"https://api.github.com/repos/pytest-dev/pytest/stargazers","contributors_url":"https://api.github.com/repos/pytest-dev/pytest/contributors","subscribers_url":"https://api.github.com/repos/pytest-dev/pytest/subscribers","subscription_url":"https://api.github.com/repos/pytest-dev/pytest/subscription","commits_url":"https://api.github.com/repos/pytest-dev/pytest/commits{/sha}","git_commits_url":"https://api.github.com/repos/pytest-dev/pytest/git/commits{/sha}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/comments{/number}","issue_comment_url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments{/number}","contents_url":"https://api.github.com/repos/pytest-dev/pytest/contents/{+path}","compare_url":"https://api.github.com/repos/pytest-dev/pytest/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pytest-dev/pytest/merges","archive_url":"https://api.github.com/repos/pytest-dev/pytest/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pytest-dev/pytest/downloads","issues_url":"https://api.github.com/repos/pytest-dev/pytest/issues{/number}","pulls_url":"https://api.github.com/repos/pytest-dev/pytest/pulls{/number}","milestones_url":"https://api.github.com/repos/pytest-dev/pytest/milestones{/number}","notifications_url":"https://api.github.com/repos/pytest-dev/pytest/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pytest-dev/pytest/labels{/name}","releases_url":"https://api.github.com/repos/pytest-dev/pytest/releases{/id}","deployments_url":"https://api.github.com/repos/pytest-dev/pytest/deployments","created_at":"2015-06-15T20:28:27Z","updated_at":"2025-11-09T16:32:44Z","pushed_at":"2025-11-09T09:33:29Z","git_url":"git://github.com/pytest-dev/pytest.git","ssh_url":"git@github.com:pytest-dev/pytest.git","clone_url":"https://github.com/pytest-dev/pytest.git","svn_url":"https://github.com/pytest-dev/pytest","homepage":"https://pytest.org","size":37842,"stargazers_count":13254,"watchers_count":13254,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":2933,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":953,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hacktoberfest","python","test","testing","unit-testing"],"visibility":"public","forks":2933,"open_issues":953,"watchers":13254,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pytest-dev/pytest/pulls/12208","html_url":"https://github.com/pytest-dev/pytest/pull/12208","diff_url":"https://github.com/pytest-dev/pytest/pull/12208.diff","patch_url":"https://github.com/pytest-dev/pytest/pull/12208.patch","merged_at":"2024-04-20T11:31:33Z"},"body":"Now `importlib` mode will correctly set the imported modules as an attribute of their parent modules.\r\n\r\nAs helpfully posted on #12194, that's how the Python import module works so we should follow suit.\r\n\r\nIn addition, we also try to import the parent modules as part of the process of importing a child module, again mirroring how Python importing works.\r\n\r\nBecause of the latter, I think it is more prudent to *not* backport this and release this in the next minor release: I fear importing the parent module like we are doing here might trigger some side effect in test suites in the wild, which would count as a change in behavior.\r\n\r\nFix #12194\r\n","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12208/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12208/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":12458148390,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAALmkEIm","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12458148390","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"31ffd948f9bc238cf0afee77f891f686c6f1bbbc","commit_url":"https://api.github.com/repos/nicoddemus/pytest/commits/31ffd948f9bc238cf0afee77f891f686c6f1bbbc","created_at":"2024-04-13T14:43:48Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2053727097","html_url":"https://github.com/pytest-dev/pytest/issues/12194#issuecomment-2053727097","issue_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12194","id":2053727097,"node_id":"IC_kwDOAjwLdc56aWN5","user":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-04-13T18:36:59Z","updated_at":"2024-04-13T18:36:59Z","body":"> My issue is fixed with #12169, but I found that the change in #12207 avoids the wrong loader altogether.\r\n> \r\n> @jaraco does that one fix your problem?\r\n\r\nJust checked and it does not.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/comments/2053727097/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12458594173,"node_id":"MEE_lADOAjwLdc6E67CTzwAAAALmlw99","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12458594173","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-04-13T18:37:01Z","performed_via_github_app":null},{"id":12458594176,"node_id":"SE_lADOAjwLdc6E67CTzwAAAALmlw-A","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12458594176","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-04-13T18:37:01Z","performed_via_github_app":null},{"id":12490956017,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAALohNzx","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12490956017","actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7ad4f2fa9fb2b030d3ecc231fc24de181705622d","commit_url":"https://api.github.com/repos/jaraco/skeleton/commits/7ad4f2fa9fb2b030d3ecc231fc24de181705622d","created_at":"2024-04-16T14:31:53Z","performed_via_github_app":null},{"id":12547579275,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAALr5N2L","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12547579275","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"70dd4b08806436d0e93850a7faf8a0e751241781","commit_url":"https://api.github.com/repos/nicoddemus/pytest/commits/70dd4b08806436d0e93850a7faf8a0e751241781","created_at":"2024-04-20T11:17:53Z","performed_via_github_app":null},{"id":12547603176,"node_id":"CE_lADOAjwLdc6E67CTzwAAAALr5Tro","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12547603176","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-04-20T11:31:35Z","state_reason":null,"performed_via_github_app":null},{"id":12547603191,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAALr5Tr3","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12547603191","actor":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ff806b239e6fb542ef1c9a5feb7cfad229a433df","commit_url":"https://api.github.com/repos/pytest-dev/pytest/commits/ff806b239e6fb542ef1c9a5feb7cfad229a433df","created_at":"2024-04-20T11:31:35Z","performed_via_github_app":null},{"id":12565810409,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAALs-wzp","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12565810409","actor":{"login":"clrpackages","id":20404730,"node_id":"MDQ6VXNlcjIwNDA0NzMw","avatar_url":"https://avatars.githubusercontent.com/u/20404730?v=4","gravatar_id":"","url":"https://api.github.com/users/clrpackages","html_url":"https://github.com/clrpackages","followers_url":"https://api.github.com/users/clrpackages/followers","following_url":"https://api.github.com/users/clrpackages/following{/other_user}","gists_url":"https://api.github.com/users/clrpackages/gists{/gist_id}","starred_url":"https://api.github.com/users/clrpackages/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clrpackages/subscriptions","organizations_url":"https://api.github.com/users/clrpackages/orgs","repos_url":"https://api.github.com/users/clrpackages/repos","events_url":"https://api.github.com/users/clrpackages/events{/privacy}","received_events_url":"https://api.github.com/users/clrpackages/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"71e1db69aa9ba80cf1f2603058c3983614219773","commit_url":"https://api.github.com/repos/clearlinux-pkgs/pypi-jaraco.functools/commits/71e1db69aa9ba80cf1f2603058c3983614219773","created_at":"2024-04-22T21:09:37Z","performed_via_github_app":null},{"id":12624121191,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAALwdM1n","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12624121191","actor":{"login":"clrpackages","id":20404730,"node_id":"MDQ6VXNlcjIwNDA0NzMw","avatar_url":"https://avatars.githubusercontent.com/u/20404730?v=4","gravatar_id":"","url":"https://api.github.com/users/clrpackages","html_url":"https://github.com/clrpackages","followers_url":"https://api.github.com/users/clrpackages/followers","following_url":"https://api.github.com/users/clrpackages/following{/other_user}","gists_url":"https://api.github.com/users/clrpackages/gists{/gist_id}","starred_url":"https://api.github.com/users/clrpackages/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clrpackages/subscriptions","organizations_url":"https://api.github.com/users/clrpackages/orgs","repos_url":"https://api.github.com/users/clrpackages/repos","events_url":"https://api.github.com/users/clrpackages/events{/privacy}","received_events_url":"https://api.github.com/users/clrpackages/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9676fd92311669931ce60602a073c0ad343126dc","commit_url":"https://api.github.com/repos/clearlinux-pkgs/pypi-inflect/commits/9676fd92311669931ce60602a073c0ad343126dc","created_at":"2024-04-26T13:46:15Z","performed_via_github_app":null},{"id":12662506248,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAALyvoMI","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12662506248","actor":{"login":"clrpackages","id":20404730,"node_id":"MDQ6VXNlcjIwNDA0NzMw","avatar_url":"https://avatars.githubusercontent.com/u/20404730?v=4","gravatar_id":"","url":"https://api.github.com/users/clrpackages","html_url":"https://github.com/clrpackages","followers_url":"https://api.github.com/users/clrpackages/followers","following_url":"https://api.github.com/users/clrpackages/following{/other_user}","gists_url":"https://api.github.com/users/clrpackages/gists{/gist_id}","starred_url":"https://api.github.com/users/clrpackages/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clrpackages/subscriptions","organizations_url":"https://api.github.com/users/clrpackages/orgs","repos_url":"https://api.github.com/users/clrpackages/repos","events_url":"https://api.github.com/users/clrpackages/events{/privacy}","received_events_url":"https://api.github.com/users/clrpackages/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a7e41d615451a8b8a1dcd3c00f1c8b5fc0e1dc42","commit_url":"https://api.github.com/repos/clearlinux-pkgs/pypi-keyring/commits/a7e41d615451a8b8a1dcd3c00f1c8b5fc0e1dc42","created_at":"2024-04-30T18:50:46Z","performed_via_github_app":null},{"id":12843253275,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAAL9hH4b","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/12843253275","actor":{"login":"clrpackages","id":20404730,"node_id":"MDQ6VXNlcjIwNDA0NzMw","avatar_url":"https://avatars.githubusercontent.com/u/20404730?v=4","gravatar_id":"","url":"https://api.github.com/users/clrpackages","html_url":"https://github.com/clrpackages","followers_url":"https://api.github.com/users/clrpackages/followers","following_url":"https://api.github.com/users/clrpackages/following{/other_user}","gists_url":"https://api.github.com/users/clrpackages/gists{/gist_id}","starred_url":"https://api.github.com/users/clrpackages/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clrpackages/subscriptions","organizations_url":"https://api.github.com/users/clrpackages/orgs","repos_url":"https://api.github.com/users/clrpackages/repos","events_url":"https://api.github.com/users/clrpackages/events{/privacy}","received_events_url":"https://api.github.com/users/clrpackages/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c1306f5ccc567a044aae3f4b4cd7c6c125d22ceb","commit_url":"https://api.github.com/repos/clearlinux-pkgs/pypi-zipp/commits/c1306f5ccc567a044aae3f4b4cd7c6c125d22ceb","created_at":"2024-05-17T06:12:14Z","performed_via_github_app":null},{"id":13204428419,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAAMTC5aD","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/13204428419","actor":{"login":"clrpackages","id":20404730,"node_id":"MDQ6VXNlcjIwNDA0NzMw","avatar_url":"https://avatars.githubusercontent.com/u/20404730?v=4","gravatar_id":"","url":"https://api.github.com/users/clrpackages","html_url":"https://github.com/clrpackages","followers_url":"https://api.github.com/users/clrpackages/followers","following_url":"https://api.github.com/users/clrpackages/following{/other_user}","gists_url":"https://api.github.com/users/clrpackages/gists{/gist_id}","starred_url":"https://api.github.com/users/clrpackages/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clrpackages/subscriptions","organizations_url":"https://api.github.com/users/clrpackages/orgs","repos_url":"https://api.github.com/users/clrpackages/repos","events_url":"https://api.github.com/users/clrpackages/events{/privacy}","received_events_url":"https://api.github.com/users/clrpackages/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4b2d8c6ae57ad37b719b60f0d47362e042c56257","commit_url":"https://api.github.com/repos/clearlinux-pkgs/pypi-jaraco.text/commits/4b2d8c6ae57ad37b719b60f0d47362e042c56257","created_at":"2024-06-18T17:29:34Z","performed_via_github_app":null},{"id":13232047951,"node_id":"REFE_lADOAjwLdc6E67CTzwAAAAMUsQdP","url":"https://api.github.com/repos/pytest-dev/pytest/issues/events/13232047951","actor":{"login":"clrpackages","id":20404730,"node_id":"MDQ6VXNlcjIwNDA0NzMw","avatar_url":"https://avatars.githubusercontent.com/u/20404730?v=4","gravatar_id":"","url":"https://api.github.com/users/clrpackages","html_url":"https://github.com/clrpackages","followers_url":"https://api.github.com/users/clrpackages/followers","following_url":"https://api.github.com/users/clrpackages/following{/other_user}","gists_url":"https://api.github.com/users/clrpackages/gists{/gist_id}","starred_url":"https://api.github.com/users/clrpackages/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clrpackages/subscriptions","organizations_url":"https://api.github.com/users/clrpackages/orgs","repos_url":"https://api.github.com/users/clrpackages/repos","events_url":"https://api.github.com/users/clrpackages/events{/privacy}","received_events_url":"https://api.github.com/users/clrpackages/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8f59b0f8e735d6fefe51aa3545cf8a7379d34d27","commit_url":"https://api.github.com/repos/clearlinux-pkgs/pypi-tempora/commits/8f59b0f8e735d6fefe51aa3545cf8a7379d34d27","created_at":"2024-06-20T16:57:07Z","performed_via_github_app":null},{"actor":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-21T21:22:50Z","updated_at":"2024-06-21T21:22:50Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pypa/setuptools/issues/4430","repository_url":"https://api.github.com/repos/pypa/setuptools","labels_url":"https://api.github.com/repos/pypa/setuptools/issues/4430/labels{/name}","comments_url":"https://api.github.com/repos/pypa/setuptools/issues/4430/comments","events_url":"https://api.github.com/repos/pypa/setuptools/issues/4430/events","html_url":"https://github.com/pypa/setuptools/pull/4430","id":2367266417,"node_id":"PR_kwDOA0bv8c5zOU4U","number":4430,"title":"Refresh package metadata with jaraco/skeleton","user":{"login":"jaraco","id":308610,"node_id":"MDQ6VXNlcjMwODYxMA==","avatar_url":"https://avatars.githubusercontent.com/u/308610?v=4","gravatar_id":"","url":"https://api.github.com/users/jaraco","html_url":"https://github.com/jaraco","followers_url":"https://api.github.com/users/jaraco/followers","following_url":"https://api.github.com/users/jaraco/following{/other_user}","gists_url":"https://api.github.com/users/jaraco/gists{/gist_id}","starred_url":"https://api.github.com/users/jaraco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jaraco/subscriptions","organizations_url":"https://api.github.com/users/jaraco/orgs","repos_url":"https://api.github.com/users/jaraco/repos","events_url":"https://api.github.com/users/jaraco/events{/privacy}","received_events_url":"https://api.github.com/users/jaraco/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-06-21T21:22:49Z","updated_at":"2024-07-01T16:13:04Z","closed_at":"2024-07-01T16:13:02Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":54980593,"node_id":"MDEwOlJlcG9zaXRvcnk1NDk4MDU5Mw==","name":"setuptools","full_name":"pypa/setuptools","private":false,"owner":{"login":"pypa","id":647025,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY0NzAyNQ==","avatar_url":"https://avatars.githubusercontent.com/u/647025?v=4","gravatar_id":"","url":"https://api.github.com/users/pypa","html_url":"https://github.com/pypa","followers_url":"https://api.github.com/users/pypa/followers","following_url":"https://api.github.com/users/pypa/following{/other_user}","gists_url":"https://api.github.com/users/pypa/gists{/gist_id}","starred_url":"https://api.github.com/users/pypa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pypa/subscriptions","organizations_url":"https://api.github.com/users/pypa/orgs","repos_url":"https://api.github.com/users/pypa/repos","events_url":"https://api.github.com/users/pypa/events{/privacy}","received_events_url":"https://api.github.com/users/pypa/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pypa/setuptools","description":"Official project repository for the Setuptools build system","fork":false,"url":"https://api.github.com/repos/pypa/setuptools","forks_url":"https://api.github.com/repos/pypa/setuptools/forks","keys_url":"https://api.github.com/repos/pypa/setuptools/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pypa/setuptools/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pypa/setuptools/teams","hooks_url":"https://api.github.com/repos/pypa/setuptools/hooks","issue_events_url":"https://api.github.com/repos/pypa/setuptools/issues/events{/number}","events_url":"https://api.github.com/repos/pypa/setuptools/events","assignees_url":"https://api.github.com/repos/pypa/setuptools/assignees{/user}","branches_url":"https://api.github.com/repos/pypa/setuptools/branches{/branch}","tags_url":"https://api.github.com/repos/pypa/setuptools/tags","blobs_url":"https://api.github.com/repos/pypa/setuptools/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pypa/setuptools/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pypa/setuptools/git/refs{/sha}","trees_url":"https://api.github.com/repos/pypa/setuptools/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pypa/setuptools/statuses/{sha}","languages_url":"https://api.github.com/repos/pypa/setuptools/languages","stargazers_url":"https://api.github.com/repos/pypa/setuptools/stargazers","contributors_url":"https://api.github.com/repos/pypa/setuptools/contributors","subscribers_url":"https://api.github.com/repos/pypa/setuptools/subscribers","subscription_url":"https://api.github.com/repos/pypa/setuptools/subscription","commits_url":"https://api.github.com/repos/pypa/setuptools/commits{/sha}","git_commits_url":"https://api.github.com/repos/pypa/setuptools/git/commits{/sha}","comments_url":"https://api.github.com/repos/pypa/setuptools/comments{/number}","issue_comment_url":"https://api.github.com/repos/pypa/setuptools/issues/comments{/number}","contents_url":"https://api.github.com/repos/pypa/setuptools/contents/{+path}","compare_url":"https://api.github.com/repos/pypa/setuptools/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pypa/setuptools/merges","archive_url":"https://api.github.com/repos/pypa/setuptools/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pypa/setuptools/downloads","issues_url":"https://api.github.com/repos/pypa/setuptools/issues{/number}","pulls_url":"https://api.github.com/repos/pypa/setuptools/pulls{/number}","milestones_url":"https://api.github.com/repos/pypa/setuptools/milestones{/number}","notifications_url":"https://api.github.com/repos/pypa/setuptools/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pypa/setuptools/labels{/name}","releases_url":"https://api.github.com/repos/pypa/setuptools/releases{/id}","deployments_url":"https://api.github.com/repos/pypa/setuptools/deployments","created_at":"2016-03-29T14:02:33Z","updated_at":"2025-11-09T17:13:32Z","pushed_at":"2025-10-31T08:00:32Z","git_url":"git://github.com/pypa/setuptools.git","ssh_url":"git@github.com:pypa/setuptools.git","clone_url":"https://github.com/pypa/setuptools.git","svn_url":"https://github.com/pypa/setuptools","homepage":"https://pypi.org/project/setuptools/","size":47702,"stargazers_count":2774,"watchers_count":2774,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1327,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":666,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1327,"open_issues":666,"watchers":2774,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pypa/setuptools/pulls/4430","html_url":"https://github.com/pypa/setuptools/pull/4430","diff_url":"https://github.com/pypa/setuptools/pull/4430.diff","patch_url":"https://github.com/pypa/setuptools/pull/4430.patch","merged_at":"2024-07-01T16:13:02Z"},"body":"- **Pin against pytest 8.1.x due to pytest-dev/pytest#12194.**\n- **Move project metadata to `pyproject.toml` (jaraco/skeleton#122)**\n- **Allow macos on Python 3.8 to fail as GitHub CI has dropped support.**\n- **Move project.urls to appear in the order that ini2toml generates it. Remove project.scripts.**\n- **Revert \"Allow macos on Python 3.8 to fail as GitHub CI has dropped support.\"**\n- **Rename extras to align with core metadata spec.**\n- **Prefer \"Source\" to \"Homepage\" for the repository label.**\n\n<!-- First time contributors: Take a moment to review https://setuptools.pypa.io/en/latest/development/developer-guide.html! -->\n<!-- Remove sections if not applicable -->\n\n## Summary of changes\n\n<!-- Summary goes here -->\n\nCloses <!-- issue number here -->\n\n### Pull Request Checklist\n- [ ] Changes have tests\n- [ ] News fragment added in [`newsfragments/`].\n  _(See [documentation][PR docs] for details)_\n\n\n[`newsfragments/`]: https://github.com/pypa/setuptools/tree/master/newsfragments\n[PR docs]:\nhttps://setuptools.pypa.io/en/latest/development/developer-guide.html#making-a-pull-request\n","reactions":{"url":"https://api.github.com/repos/pypa/setuptools/issues/4430/reactions","total_count":2,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":2,"eyes":0},"timeline_url":"https://api.github.com/repos/pypa/setuptools/issues/4430/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]