{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3964","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3964/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3964/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3964/events","html_url":"https://github.com/pytest-dev/pytest/issues/3964","id":358694209,"node_id":"MDU6SXNzdWUzNTg2OTQyMDk=","number":3964,"title":"live logging is not working from a function called by @unittest.skipIf","user":{"login":"attila123","id":1728046,"node_id":"MDQ6VXNlcjE3MjgwNDY=","avatar_url":"https://avatars.githubusercontent.com/u/1728046?v=4","gravatar_id":"","url":"https://api.github.com/users/attila123","html_url":"https://github.com/attila123","followers_url":"https://api.github.com/users/attila123/followers","following_url":"https://api.github.com/users/attila123/following{/other_user}","gists_url":"https://api.github.com/users/attila123/gists{/gist_id}","starred_url":"https://api.github.com/users/attila123/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/attila123/subscriptions","organizations_url":"https://api.github.com/users/attila123/orgs","repos_url":"https://api.github.com/users/attila123/repos","events_url":"https://api.github.com/users/attila123/events{/privacy}","received_events_url":"https://api.github.com/users/attila123/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-09-10T16:14:12Z","updated_at":"2025-10-14T16:23:38Z","closed_at":"2018-09-19T18:47:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Based on an example at https://stackoverflow.com/questions/4673373/logging-within-py-test-tests let's create the following files in a directory:\r\n\r\n```\r\n# pytest.ini\r\n[pytest]\r\nlog_cli = 1\r\nlog_cli_level = INFO\r\nlog_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)\r\nlog_cli_date_format=%Y-%m-%d %H:%M:%S\r\n```\r\n\r\nand\r\n\r\n```\r\n# test_spam.py\r\n\r\nimport logging\r\nimport os\r\nimport unittest\r\n\r\n\r\nLOGGER = logging.getLogger(__name__)\r\n\r\ndef test_eggs():\r\n    LOGGER.info('eggs info')\r\n    LOGGER.warning('eggs warning')\r\n    LOGGER.error('eggs error')\r\n    LOGGER.critical('eggs critical')\r\n    assert True\r\n    \r\n# Looks like needs to be moved out of the test class so that @unittest.skipIf can see it\r\ndef _are_test_env_variables_set():\r\n    LOGGER.critical('### critical from _are_test_env_variables_set()')\r\n    return os.environ.get('FOO') is not None\r\n\r\n\r\nclass TestSomeTestClass(unittest.TestCase):\r\n    def setUp(self):\r\n        LOGGER.critical('### critical from setUp()')\r\n\r\n    @unittest.skipIf(not _are_test_env_variables_set(),\r\n                     \"test environment variables need to be set\")\r\n    def test_foo(self):\r\n        LOGGER.critical('### critical from test_foo()')\r\n        assert True\r\n```\r\n\r\nRun from the directory with the FOO variable being set, e.g.:\r\n\r\n```\r\n$ FOO=foo pytest test_spam.py\r\n======================================================================== test session starts =========================================================================\r\nplatform linux -- Python 3.7.0, pytest-3.8.0, py-1.6.0, pluggy-0.7.1 -- /usr/bin/python\r\ncachedir: .pytest_cache\r\nrootdir: /home/avangel/pytest-test, inifile: pytest.ini\r\ncollected 2 items                                                                                                                                                    \r\n\r\ntest_spam.py::test_eggs \r\n--------------------------------------------------------------------------- live log call ----------------------------------------------------------------------------\r\n2018-09-10 18:05:24 [    INFO] eggs info (test_spam.py:11)\r\n2018-09-10 18:05:24 [ WARNING] eggs warning (test_spam.py:12)\r\n2018-09-10 18:05:24 [   ERROR] eggs error (test_spam.py:13)\r\n2018-09-10 18:05:24 [CRITICAL] eggs critical (test_spam.py:14)\r\nPASSED                                                                                                                                                         [ 50%]\r\ntest_spam.py::TestSomeTestClass::test_foo \r\n--------------------------------------------------------------------------- live log call ----------------------------------------------------------------------------\r\n2018-09-10 18:05:24 [CRITICAL] ### critical from setUp() (test_spam.py:25)\r\n2018-09-10 18:05:24 [CRITICAL] ### critical from test_foo() (test_spam.py:30)\r\nPASSED                                                                                                                                                         [100%]\r\n\r\n====================================================================== 2 passed in 0.01 seconds ======================================================================\r\n```\r\n\r\nAs you can see logs from both setUp() and test_foo() appear, but not from _are_test_env_variables_set().\r\n\r\n(you can also run with `pytest test_spam.py` in which case even setUp() is not seem to be executed, but I guess it is OK)\r\n\r\n","closed_by":{"login":"twmr","id":206581,"node_id":"MDQ6VXNlcjIwNjU4MQ==","avatar_url":"https://avatars.githubusercontent.com/u/206581?v=4","gravatar_id":"","url":"https://api.github.com/users/twmr","html_url":"https://github.com/twmr","followers_url":"https://api.github.com/users/twmr/followers","following_url":"https://api.github.com/users/twmr/following{/other_user}","gists_url":"https://api.github.com/users/twmr/gists{/gist_id}","starred_url":"https://api.github.com/users/twmr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/twmr/subscriptions","organizations_url":"https://api.github.com/users/twmr/orgs","repos_url":"https://api.github.com/users/twmr/repos","events_url":"https://api.github.com/users/twmr/events{/privacy}","received_events_url":"https://api.github.com/users/twmr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3964/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3964/timeline","performed_via_github_app":null,"state_reason":"completed"}