{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/13010","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13010/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13010/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13010/events","html_url":"https://github.com/pytest-dev/pytest/issues/13010","id":2705275936,"node_id":"I_kwDOAjwLdc6hPzwg","number":13010,"title":"pytest.approx Raises misleading error for Sequences/Collections containing different strings","user":{"login":"marcelotrevisani","id":7882269,"node_id":"MDQ6VXNlcjc4ODIyNjk=","avatar_url":"https://avatars.githubusercontent.com/u/7882269?v=4","gravatar_id":"","url":"https://api.github.com/users/marcelotrevisani","html_url":"https://github.com/marcelotrevisani","followers_url":"https://api.github.com/users/marcelotrevisani/followers","following_url":"https://api.github.com/users/marcelotrevisani/following{/other_user}","gists_url":"https://api.github.com/users/marcelotrevisani/gists{/gist_id}","starred_url":"https://api.github.com/users/marcelotrevisani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcelotrevisani/subscriptions","organizations_url":"https://api.github.com/users/marcelotrevisani/orgs","repos_url":"https://api.github.com/users/marcelotrevisani/repos","events_url":"https://api.github.com/users/marcelotrevisani/events{/privacy}","received_events_url":"https://api.github.com/users/marcelotrevisani/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1087456003,"node_id":"MDU6TGFiZWwxMDg3NDU2MDAz","url":"https://api.github.com/repos/pytest-dev/pytest/labels/topic:%20approx","name":"topic: approx","color":"11d6a1","default":false,"description":"related to pytest.approx function"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-11-29T14:32:46Z","updated_at":"2024-11-30T12:31:53Z","closed_at":"2024-11-30T12:31:53Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi folks,\r\n\r\nI was using ``pytest.approx`` and I found a scenario when using ``approx`` in a collection or sequence that can have multiples types, the problem arise when doing:\r\n\r\n```python\r\ndef test_approx_str():\r\n    assert [1.0, 2.0, \"abc\"] == approx([1.0, 2.0, \"aaa\"])\r\n```\r\n\r\nI was expecting pytest to bypass the approx for ``str`` type, but I am seeing the following error:\r\n\r\n```bash\r\n\r\n    def test_approx_str():\r\n>       assert [1.0, 2.0, \"abc\"] == approx([1.0, 2.0, \"aaa\"])\r\nE       AssertionError: assert [1.0, 2.0, 'abc'] == approx([1.0 Â±...2.0e-06, aaa])\r\nE         \r\nE         (pytest_assertion plugin: representation of details failed: /tmp/test_a/.venv/lib/python3.12/site-packages/_pytest/python_api.py:343: TypeError: unsupported operand type(s) for -: 'str' and 'str'.\r\nE          Probably an object has a faulty __repr__.)\r\n\r\ntest_foo.py:5: AssertionError\r\n```\r\n\r\nlet me know if you need more info about this \r\n\r\n\r\n```markdown\r\nPackage   Version\r\n--------- -------\r\niniconfig 2.0.0\r\npackaging 24.2\r\npluggy    1.5.0\r\npytest    8.3.3\r\n```\r\n\r\n\r\n- [ ] a detailed description of the bug or problem you are having\r\n- [ ] output of `pip list` from the virtual environment you are using\r\n- [ ] pytest and operating system versions\r\n- [ ] minimal example if possible\r\n","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/13010/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13010/timeline","performed_via_github_app":null,"state_reason":"completed"}