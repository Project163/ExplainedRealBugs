{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3745","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3745/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3745/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3745/events","html_url":"https://github.com/pytest-dev/pytest/issues/3745","id":346129387,"node_id":"MDU6SXNzdWUzNDYxMjkzODc=","number":3745,"title":"absolute cache_dir path seems to be broken with 3.7.0","user":{"login":"dedsm","id":263208,"node_id":"MDQ6VXNlcjI2MzIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/263208?v=4","gravatar_id":"","url":"https://api.github.com/users/dedsm","html_url":"https://github.com/dedsm","followers_url":"https://api.github.com/users/dedsm/followers","following_url":"https://api.github.com/users/dedsm/following{/other_user}","gists_url":"https://api.github.com/users/dedsm/gists{/gist_id}","starred_url":"https://api.github.com/users/dedsm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dedsm/subscriptions","organizations_url":"https://api.github.com/users/dedsm/orgs","repos_url":"https://api.github.com/users/dedsm/repos","events_url":"https://api.github.com/users/dedsm/events{/privacy}","received_events_url":"https://api.github.com/users/dedsm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":315571544,"node_id":"MDU6TGFiZWwzMTU1NzE1NDQ=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20regression","name":"type: regression","color":"f7c6c7","default":false,"description":"indicates a problem that was introduced in a release which was working previously"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-07-31T10:33:41Z","updated_at":"2018-08-01T10:09:23Z","closed_at":"2018-08-01T10:09:23Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Thanks for submitting an issue!\r\n\r\nHere's a quick checklist in what to include:\r\n\r\n- After upgrading to 3.7.0 I'm not able to run the tests, it seems that having an absolute path of the cache_dir causes the issue.\r\n- pip list:\r\n```apipkg (1.5)\r\natomicwrites (1.1.5)\r\nattrs (18.1.0)\r\nbackcall (0.1.0)\r\ncertifi (2018.4.16)\r\nchardet (3.0.4)\r\ncoverage (4.5.1)\r\ndecorator (4.3.0)\r\nDjango (2.0.7)\r\ndjango-cors-headers (2.4.0)\r\ndjango-environ (0.4.5)\r\ndjango-extensions (2.1.0)\r\ndjango-filter (2.0.0)\r\ndjango-pdb (0.6.2)\r\ndjango-queryinspect (1.0.0)\r\ndjangorestframework (3.8.2)\r\ndjangorestframework-gis (0.13)\r\ndry-rest-permissions (0.1.10)\r\nexecnet (1.5.0)\r\nfactory-boy (2.11.1)\r\nfake-factory (9999.9.9)\r\nFaker (0.8.17)\r\nflake8 (3.5.0)\r\nfuture (0.16.0)\r\nidna (2.7)\r\ninflection (0.3.1)\r\ninvoke (1.0.0)\r\nipdb (0.11)\r\nipython (6.5.0)\r\nipython-genutils (0.2.0)\r\nisort (4.3.4)\r\njedi (0.12.1)\r\nmccabe (0.6.1)\r\nmore-itertools (4.2.0)\r\nnumpy (1.15.0)\r\npandas (0.23.3)\r\nparso (0.3.1)\r\npexpect (4.6.0)\r\npickleshare (0.7.4)\r\npip (9.0.1)\r\npluggy (0.6.0)\r\nprompt-toolkit (1.0.15)\r\npsycopg2 (2.7.5)\r\nptyprocess (0.6.0)\r\npudb (2018.1)\r\npy (1.5.4)\r\npycodestyle (2.3.1)\r\npycryptodomex (3.6.4)\r\npyflakes (1.6.0)\r\nPygments (2.2.0)\r\npyjwkest (1.4.0)\r\npylibmc (1.5.2)\r\npytest (3.7.0)\r\npytest-cache (1.0)\r\npytest-cov (2.5.1)\r\npytest-django (3.3.3)\r\npytest-env (0.6.2)\r\npytest-factoryboy (2.0.1)\r\npytest-faker (2.0.0)\r\npytest-flake8 (1.0.2)\r\npytest-forked (0.2)\r\npytest-isort (0.2.0)\r\npytest-mock (1.10.0)\r\npytest-xdist (1.22.5)\r\npython-dateutil (2.7.3)\r\npytz (2018.5)\r\nPyYAML (3.13)\r\nraven (6.9.0)\r\nrequests (2.19.1)\r\nsetuptools (38.2.4)\r\nsimplegeneric (0.8.1)\r\nsix (1.11.0)\r\ntext-unidecode (1.2)\r\ntox (3.0.0)\r\ntraitlets (4.3.2)\r\nurllib3 (1.23)\r\nurwid (2.0.1)\r\nvirtualenv (16.0.0)\r\nwcwidth (0.1.7)\r\nwheel (0.30.0)\r\nwhitenoise (3.3.1)\r\n```\r\n\r\nrunning pytest fails with\r\n```INTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/_pytest/main.py\", line 176, in wrap_session\r\nINTERNALERROR>     config.hook.pytest_sessionstart(session=session)\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/hooks.py\", line 258, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 67, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 61, in <lambda>\r\nINTERNALERROR>     firstresult=hook.spec_opts.get('firstresult'),\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 201, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 76, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 180, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/_pytest/terminal.py\", line 512, in pytest_sessionstart\r\nINTERNALERROR>     config=self.config, startdir=self.startdir\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/hooks.py\", line 258, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 67, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/manager.py\", line 61, in <lambda>\r\nINTERNALERROR>     firstresult=hook.spec_opts.get('firstresult'),\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 201, in _multicall\r\nINTERNALERROR>     return outcome.get_result()\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 76, in get_result\r\nINTERNALERROR>     raise ex[1].with_traceback(ex[2])\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/pluggy/callers.py\", line 180, in _multicall\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"/output/.tox/py36/lib/python3.6/site-packages/_pytest/cacheprovider.py\", line 315, in pytest_report_header\r\nINTERNALERROR>     relpath = config.cache._cachedir.relative_to(config.rootdir)\r\nINTERNALERROR>   File \"/usr/local/lib/python3.6/pathlib.py\", line 870, in relative_to\r\nINTERNALERROR>     .format(str(self), str(formatted)))\r\nINTERNALERROR> ValueError: '{cache_dir}' does not start with '{rootdir}'\r\n```\r\n","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3745/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3745/timeline","performed_via_github_app":null,"state_reason":"completed"}