{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12446","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12446/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12446/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12446/events","html_url":"https://github.com/pytest-dev/pytest/issues/12446","id":2344375829,"node_id":"I_kwDOAjwLdc6LvFYV","number":12446,"title":"pytest 8.2.0 calls `@property`s during unittest collection","user":{"login":"grzegorzmiazga","id":50963322,"node_id":"MDQ6VXNlcjUwOTYzMzIy","avatar_url":"https://avatars.githubusercontent.com/u/50963322?v=4","gravatar_id":"","url":"https://api.github.com/users/grzegorzmiazga","html_url":"https://github.com/grzegorzmiazga","followers_url":"https://api.github.com/users/grzegorzmiazga/followers","following_url":"https://api.github.com/users/grzegorzmiazga/following{/other_user}","gists_url":"https://api.github.com/users/grzegorzmiazga/gists{/gist_id}","starred_url":"https://api.github.com/users/grzegorzmiazga/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/grzegorzmiazga/subscriptions","organizations_url":"https://api.github.com/users/grzegorzmiazga/orgs","repos_url":"https://api.github.com/users/grzegorzmiazga/repos","events_url":"https://api.github.com/users/grzegorzmiazga/events{/privacy}","received_events_url":"https://api.github.com/users/grzegorzmiazga/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":288470366,"node_id":"MDU6TGFiZWwyODg0NzAzNjY=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20performance","name":"type: performance","color":"207de5","default":false,"description":"performance or memory problem/improvement"},{"id":315571544,"node_id":"MDU6TGFiZWwzMTU1NzE1NDQ=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20regression","name":"type: regression","color":"f7c6c7","default":false,"description":"indicates a problem that was introduced in a release which was working previously"},{"id":346031262,"node_id":"MDU6TGFiZWwzNDYwMzEyNjI=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/plugin:%20unittest","name":"plugin: unittest","color":"006b75","default":false,"description":"related to the unittest integration builtin plugin"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2024-06-10T16:36:52Z","updated_at":"2024-09-08T14:45:06Z","closed_at":"2024-09-08T14:45:06Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Since 8.2.0 and changes to [unittest collecting](https://github.com/pytest-dev/pytest/commit/1a5e0eb71d2af0ad113ccd9ee596c7d724d7a4b6) pytests behaves now slightly differently. If there is  @property defined in unittest class it is called during tests collection. This leads to some absurd behaviour with each property being collected twice. Attached example takes 20s to collect instead of 0.01s\r\n\r\n```\r\nimport unittest\r\nfrom time import sleep\r\n\r\nclass TestClass(unittest.TestCase):\r\n\r\n    @property\r\n    def variable(self):\r\n        print('My collection sleep')\r\n        sleep(10)\r\n\r\n\r\nclass MyTest(TestClass):\r\n    def test_simple(self):\r\n        assert True\r\n```\r\n\r\npip list output:\r\n\r\n```\r\npip list\r\nPackage                   Version\r\n------------------------- ---------\r\nattrs                     23.2.0\r\ncffi                      1.16.0\r\ncryptography              42.0.8\r\nexceptiongroup            1.2.1\r\niniconfig                 2.0.0\r\njsonschema                4.22.0\r\njsonschema-specifications 2023.12.1\r\npackaging                 24.1\r\npip                       22.0.4\r\npluggy                    1.5.0\r\npycparser                 2.22\r\npyOpenSSL                 24.1.0\r\npytest                    8.2.2\r\nreferencing               0.35.1\r\nrpds-py                   0.18.1\r\nsetuptools                58.1.0\r\ntomli                     2.0.1\r\n```","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12446/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12446/timeline","performed_via_github_app":null,"state_reason":"completed"}