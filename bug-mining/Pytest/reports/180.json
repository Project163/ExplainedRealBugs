{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/6404","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/6404/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/6404/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/6404/events","html_url":"https://github.com/pytest-dev/pytest/issues/6404","id":545398860,"node_id":"MDU6SXNzdWU1NDUzOTg4NjA=","number":6404,"title":"Python 3.9: DeprecationWarning: The parser module","user":{"login":"hroncok","id":2401856,"node_id":"MDQ6VXNlcjI0MDE4NTY=","avatar_url":"https://avatars.githubusercontent.com/u/2401856?v=4","gravatar_id":"","url":"https://api.github.com/users/hroncok","html_url":"https://github.com/hroncok","followers_url":"https://api.github.com/users/hroncok/followers","following_url":"https://api.github.com/users/hroncok/following{/other_user}","gists_url":"https://api.github.com/users/hroncok/gists{/gist_id}","starred_url":"https://api.github.com/users/hroncok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hroncok/subscriptions","organizations_url":"https://api.github.com/users/hroncok/orgs","repos_url":"https://api.github.com/users/hroncok/repos","events_url":"https://api.github.com/users/hroncok/events{/privacy}","received_events_url":"https://api.github.com/users/hroncok/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":295629164,"node_id":"MDU6TGFiZWwyOTU2MjkxNjQ=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20refactoring","name":"type: refactoring","color":"0052cc","default":false,"description":"internal improvements to the code"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2020-01-05T10:23:03Z","updated_at":"2020-01-06T16:16:20Z","closed_at":"2020-01-06T16:08:06Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello. We are trying to build pytest with Python 3.9 in Fedora.\r\n\r\nWe are still on 4.x for various reasons, but the code raising DeprecationWarning is still present on 5.x.\r\n\r\nThis is outptut of the tests:\r\n\r\n```\r\n+ /builddir/build/BUILDROOT/pytest-4.6.8-1.fc32.x86_64/usr/bin/pytest-3.9 -r s testing\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.9.0a2, pytest-4.6.8, py-1.8.0, pluggy-0.13.0\r\nhypothesis profile 'default' -> database=DirectoryBasedExampleDatabase('/builddir/build/BUILD/pytest-4.6.8/.hypothesis/examples')\r\nrootdir: /builddir/build/BUILD/pytest-4.6.8, inifile: tox.ini, testpaths: testing\r\nplugins: hypothesis-4.23.8\r\ncollected 2452 items                                                           \r\n\r\ntesting/acceptance_test.py .......                                       [  0%]\r\ntesting/deprecated_test.py ....                                          [  0%]\r\ntesting/test_argcomplete.py ..                                           [  0%]\r\ntesting/test_assertion.py .............................................. [  2%]\r\n.....s.                                                                  [  2%]\r\ntesting/test_assertrewrite.py ....................                       [  3%]\r\ntesting/test_capture.py ..........s.........s............s........s...s. [  5%]\r\n                                                                         [  5%]\r\ntesting/test_collection.py .                                             [  5%]\r\ntesting/test_compat.py ......                                            [  5%]\r\ntesting/test_config.py .............................                     [  6%]\r\ntesting/test_conftest.py ...........                                     [  7%]\r\ntesting/test_doctest.py .....                                            [  7%]\r\ntesting/test_entry_points.py .                                           [  7%]\r\ntesting/test_junitxml.py ....                                            [  7%]\r\ntesting/test_mark.py ................                                    [  8%]\r\ntesting/test_monkeypatch.py .................ss.............s.           [  9%]\r\ntesting/test_nodes.py .........                                          [ 10%]\r\ntesting/test_nose.py ss                                                  [ 10%]\r\ntesting/test_parseopt.py ............................                    [ 11%]\r\ntesting/test_pastebin.py .                                               [ 11%]\r\ntesting/test_pathlib.py .....................................            [ 12%]\r\ntesting/test_pdb.py .                                                    [ 13%]\r\ntesting/test_pluginmanager.py .........                                  [ 13%]\r\ntesting/test_pytester.py ...............                                 [ 13%]\r\ntesting/test_recwarn.py ....................................             [ 15%]\r\ntesting/test_resultlog.py ....                                           [ 15%]\r\ntesting/test_runner.py .............                                     [ 16%]\r\ntesting/test_skipping.py .                                               [ 16%]\r\ntesting/test_terminal.py .............................                   [ 17%]\r\ntesting/test_tmpdir.py ....s............                                 [ 18%]\r\ntesting/test_warnings.py .                                               [ 18%]\r\ntesting/code/test_code.py .........s......                               [ 18%]\r\ntesting/code/test_excinfo.py ..............s........s................... [ 20%]\r\n..................................................                       [ 22%]\r\ntesting/code/test_source.py ...........FF............................... [ 24%]\r\n.......................                                                  [ 25%]\r\ntesting/freeze/tests/test_trivial.py ..                                  [ 25%]\r\ntesting/io/test_saferepr.py .......                                      [ 25%]\r\ntesting/logging/test_fixture.py ........                                 [ 25%]\r\ntesting/logging/test_formatter.py ..                                     [ 26%]\r\ntesting/logging/test_reporting.py ..                                     [ 26%]\r\ntesting/python/approx.py .sssss..........................sssss.......... [ 28%]\r\n.ss.                                                                     [ 28%]\r\ntesting/python/collect.py ..                                             [ 28%]\r\ntesting/python/fixtures.py ....                                          [ 28%]\r\ntesting/python/integration.py ..x.                                       [ 28%]\r\ntesting/python/metafunc.py .................................             [ 29%]\r\ntesting/python/raises.py .....................ssssss                     [ 31%]\r\ntesting/freeze/tests/test_doctest.txt .                                  [ 31%]\r\ntesting/acceptance_test.py ............................................. [ 32%]\r\n..x...................                                                   [ 33%]\r\ntesting/deprecated_test.py ...........                                   [ 34%]\r\ntesting/test_assertion.py .......................................        [ 35%]\r\ntesting/test_assertrewrite.py ........................s..ssss........... [ 37%]\r\n......                                                                   [ 37%]\r\ntesting/test_cacheprovider.py .......................................... [ 39%]\r\n....                                                                     [ 39%]\r\ntesting/test_capture.py ......x....................s.................... [ 41%]\r\n.s..................                                                     [ 42%]\r\ntesting/test_collection.py ............................x................ [ 44%]\r\n..........................                                               [ 45%]\r\ntesting/test_compat.py ..                                                [ 45%]\r\ntesting/test_config.py ..........x...................................... [ 47%]\r\n......................................                                   [ 49%]\r\ntesting/test_conftest.py .........................................       [ 50%]\r\ntesting/test_doctest.py ................................................ [ 52%]\r\n...................................................s.                    [ 54%]\r\ntesting/test_helpconfig.py .......                                       [ 55%]\r\ntesting/test_junitxml.py ............................................... [ 57%]\r\n......s..x..............                                                 [ 57%]\r\ntesting/test_mark.py ..................................................x [ 60%]\r\n.........                                                                [ 60%]\r\ntesting/test_monkeypatch.py ....                                         [ 60%]\r\ntesting/test_nodes.py .                                                  [ 60%]\r\ntesting/test_nose.py sssssssssssssssss                                   [ 61%]\r\ntesting/test_pastebin.py ...                                             [ 61%]\r\ntesting/test_pdb.py ...................                                  [ 62%]\r\ntesting/test_pluginmanager.py ...............                            [ 62%]\r\ntesting/test_pytester.py x.....................                          [ 63%]\r\ntesting/test_recwarn.py ..                                               [ 63%]\r\ntesting/test_reports.py ..............                                   [ 64%]\r\ntesting/test_resultlog.py ......                                         [ 64%]\r\ntesting/test_runner.py .....................sssssss....ssss.x........... [ 66%]\r\n........                                                                 [ 66%]\r\ntesting/test_runner_xunit.py .............                               [ 67%]\r\ntesting/test_session.py .......................                          [ 68%]\r\ntesting/test_skipping.py ...s........................................... [ 70%]\r\n............................                                             [ 71%]\r\ntesting/test_stepwise.py ........                                        [ 71%]\r\ntesting/test_terminal.py .......................................s....... [ 73%]\r\n............................................sss.....s                    [ 75%]\r\ntesting/test_tmpdir.py ..........                                        [ 76%]\r\ntesting/test_unittest.py .....................sssssss..................s [ 78%]\r\n.....                                                                    [ 78%]\r\ntesting/test_warnings.py .......s.....................s........          [ 79%]\r\ntesting/code/test_excinfo.py ...                                         [ 80%]\r\ntesting/examples/test_issue519.py .                                      [ 80%]\r\ntesting/logging/test_fixture.py ..                                       [ 80%]\r\ntesting/logging/test_reporting.py .....................................  [ 81%]\r\ntesting/python/approx.py .                                               [ 81%]\r\ntesting/python/collect.py .............................................. [ 83%]\r\n...........................                                              [ 84%]\r\ntesting/python/fixtures.py ............................................. [ 86%]\r\n........................x............................................... [ 89%]\r\n.....................................................                    [ 91%]\r\ntesting/python/integration.py ....ssss.......                            [ 92%]\r\ntesting/python/metafunc.py ............................................. [ 94%]\r\n.....x..............                                                     [ 94%]\r\ntesting/python/raises.py ...                                             [ 95%]\r\ntesting/python/setup_only.py ........................                    [ 96%]\r\ntesting/python/setup_plan.py .                                           [ 96%]\r\ntesting/python/show_fixtures_per_test.py ......                          [ 96%]\r\ntesting/test_modimport.py .............................................. [ 98%]\r\n....                                                                     [ 98%]\r\ntesting/test_parseopt.py s                                               [ 98%]\r\ntesting/test_pdb.py sssssssssssssssssssssssssssssssssss                  [ 99%]\r\ntesting/test_pytester.py s                                               [ 99%]\r\ntesting/test_terminal.py ss                                              [ 99%]\r\ntesting/test_unittest.py s                                               [100%]\r\n\r\n=================================== FAILURES ===================================\r\n_______________________________ test_isparseable _______________________________\r\n\r\n    def test_isparseable():\r\n>       assert Source(\"hello\").isparseable()\r\n\r\n/builddir/build/BUILD/pytest-4.6.8/testing/code/test_source.py:130: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <_pytest._code.source.Source object at 0x7f25d53afaf0>, deindent = True\r\n\r\n    def isparseable(self, deindent=True):\r\n        \"\"\" return True if source is parseable, heuristically\r\n            deindenting it by default.\r\n        \"\"\"\r\n>       from parser import suite as syntax_checker\r\nE       DeprecationWarning: The parser module is deprecated and will be removed in future versions of Python\r\n\r\n/builddir/build/BUILDROOT/pytest-4.6.8-1.fc32.x86_64/usr/lib/python3.9/site-packages/_pytest/_code/source.py:126: DeprecationWarning\r\n__________________________ TestAccesses.test_getrange __________________________\r\n\r\nself = <test_source.TestAccesses object at 0x7f25d5c02670>\r\n\r\n    def test_getrange(self):\r\n        x = self.source[0:2]\r\n>       assert x.isparseable()\r\n\r\n/builddir/build/BUILD/pytest-4.6.8/testing/code/test_source.py:150: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \r\n\r\nself = <_pytest._code.source.Source object at 0x7f25d59a7190>, deindent = True\r\n\r\n    def isparseable(self, deindent=True):\r\n        \"\"\" return True if source is parseable, heuristically\r\n            deindenting it by default.\r\n        \"\"\"\r\n>       from parser import suite as syntax_checker\r\nE       DeprecationWarning: The parser module is deprecated and will be removed in future versions of Python\r\n\r\n/builddir/build/BUILDROOT/pytest-4.6.8-1.fc32.x86_64/usr/lib/python3.9/site-packages/_pytest/_code/source.py:126: DeprecationWarning\r\n=============================== warnings summary ===============================\r\ntesting/test_warnings.py::test_group_warnings_by_message\r\n  /builddir/build/BUILD/pytest-4.6.8/testing/test_warnings.py:701: PytestExperimentalApiWarning: testdir.copy_example is an experimental api that may change over time\r\n    testdir.copy_example(\"warnings/test_group_warnings_by_message.py\")\r\n\r\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n=========================== short test summary info ============================\r\n...\r\n= 2 failed, 2309 passed, 130 skipped, 11 xfailed, 1 warnings in 167.85 seconds =\r\n```\r\n\r\nI will try to reproduce outside of our build environment.","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/6404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/6404/timeline","performed_via_github_app":null,"state_reason":"completed"}