{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3125","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3125/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3125/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3125/events","html_url":"https://github.com/pytest-dev/pytest/issues/3125","id":289205977,"node_id":"MDU6SXNzdWUyODkyMDU5Nzc=","number":3125,"title":"Incremental testing from example in documentation","user":{"login":"kam1sh","id":14600211,"node_id":"MDQ6VXNlcjE0NjAwMjEx","avatar_url":"https://avatars.githubusercontent.com/u/14600211?v=4","gravatar_id":"","url":"https://api.github.com/users/kam1sh","html_url":"https://github.com/kam1sh","followers_url":"https://api.github.com/users/kam1sh/followers","following_url":"https://api.github.com/users/kam1sh/following{/other_user}","gists_url":"https://api.github.com/users/kam1sh/gists{/gist_id}","starred_url":"https://api.github.com/users/kam1sh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kam1sh/subscriptions","organizations_url":"https://api.github.com/users/kam1sh/orgs","repos_url":"https://api.github.com/users/kam1sh/repos","events_url":"https://api.github.com/users/kam1sh/events{/privacy}","received_events_url":"https://api.github.com/users/kam1sh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":224853680,"node_id":"MDU6TGFiZWwyMjQ4NTM2ODA=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20docs","name":"type: docs","color":"fbca04","default":false,"description":"documentation improvement, missing or needing clarification"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-01-17T10:02:09Z","updated_at":"2020-01-29T11:37:36Z","closed_at":"2020-01-29T11:37:36Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"At first, thank you for pytest. This is great framework for testing with good interface and reporting. \r\nI wanted to separate my test case into steps, for example:\r\n```\r\nclass TestCreateUser(object):\r\n    def test_create_user(self, webdriver):\r\n        assert True\r\n    def test_user_login(self, webdriver):\r\n        assert False\r\n    def test_user_logout(self, webdriver):\r\n        assert True\r\n    def test_delete_user(self, webdriver):\r\n        assert True\r\n```\r\nI did it just because it looks nice in report. You know, if one part of scenario fails, you could see which part failed, with no need to read tracebacks.  \r\nSo, I used code from [documentation](https://github.com/pytest-dev/pytest/blob/3.3.2/doc/en/example/simple.rst#incremental-testing---test-steps), and now if one step fails, the next methods will not be executed.  \r\nBut today I discovered, if methods use parameters or fixture with parameters, weird things starts happening:\r\n\r\n> test_create_user.py::TestCreateUser::test_create_user[chrome] PASSED                                                                                                                                         test_create_user.py::TestCreateUser::test_user_login[chrome] FAILED                                                                                                                                          test_create_user.py::TestCreateUser::test_user_logout[chrome] xfail                                                                                                                                          test_create_user.py::TestCreateUser::test_delete_user[chrome] xfail                                                                                                                                          \r\n> %other tests% PASSED\r\n> test_create_user.py::TestCreateUser::test_create_user[firefox] xfail                                                                                                                                         test_create_user.py::TestCreateUser::test_user_login[firefox] xfail                                                                                                                                          test_create_user.py::TestCreateUser::test_user_logout[firefox] xfail                                                                                                                                         test_create_user.py::TestCreateUser::test_delete_user[firefox] xfail                                                                                                                                         \r\n\r\nAs you can see, if once class method has FAILED state, the next steps will be xfailed even with different param. This is the first bug with this code.  \r\nThe second bug -- next steps also will be xfailed, if current test have been skipped with `@pytest.mark.skip`:\r\n\r\n> test_create_user.py::TestCreateUser::test_create_user[chrome] PASSED                                                                                                                                         test_create_user.py::TestCreateUser::test_user_login[chrome] SKIPPED                                                                                                                                         test_create_user.py::TestCreateUser::test_user_logout[chrome] xfail                                                                                                                                          test_create_user.py::TestCreateUser::test_delete_user[chrome] xfail                                                                                                                                          \r\n\r\nI tried to fix first bug manually, but I don't know well pytest API. Eventually, I decided not to use incremental testing at all.  \r\n...but I'll be glad if you fix this code in future releases.\r\nMy testing environment is: Python 3.6.3, pytest-3.3.2, py-1.5.2, pluggy-0.6.0","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3125/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3125/timeline","performed_via_github_app":null,"state_reason":"completed"}