{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3661","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3661/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3661/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3661/events","html_url":"https://github.com/pytest-dev/pytest/issues/3661","id":338434863,"node_id":"MDU6SXNzdWUzMzg0MzQ4NjM=","number":3661,"title":"deprecate calling fixtures as functions","user":{"login":"ikonst","id":1186084,"node_id":"MDQ6VXNlcjExODYwODQ=","avatar_url":"https://avatars.githubusercontent.com/u/1186084?v=4","gravatar_id":"","url":"https://api.github.com/users/ikonst","html_url":"https://github.com/ikonst","followers_url":"https://api.github.com/users/ikonst/followers","following_url":"https://api.github.com/users/ikonst/following{/other_user}","gists_url":"https://api.github.com/users/ikonst/gists{/gist_id}","starred_url":"https://api.github.com/users/ikonst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ikonst/subscriptions","organizations_url":"https://api.github.com/users/ikonst/orgs","repos_url":"https://api.github.com/users/ikonst/repos","events_url":"https://api.github.com/users/ikonst/events{/privacy}","received_events_url":"https://api.github.com/users/ikonst/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":323103543,"node_id":"MDU6TGFiZWwzMjMxMDM1NDM=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20feature-branch","name":"type: feature-branch","color":"0052cc","default":false,"description":"new feature or API change, should be merged into features branch"},{"id":659419768,"node_id":"MDU6TGFiZWw2NTk0MTk3Njg=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20deprecation","name":"type: deprecation","color":"e99695","default":false,"description":"feature that will be removed in the future"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pytest-dev/pytest/milestones/18","html_url":"https://github.com/pytest-dev/pytest/milestone/18","labels_url":"https://api.github.com/repos/pytest-dev/pytest/milestones/18/labels","id":3302847,"node_id":"MDk6TWlsZXN0b25lMzMwMjg0Nw==","number":18,"title":"3.7","description":"","creator":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":2,"state":"closed","created_at":"2018-04-26T22:52:45Z","updated_at":"2018-09-18T21:05:08Z","due_on":null,"closed_at":"2018-09-18T21:05:08Z"},"comments":4,"created_at":"2018-07-05T05:50:57Z","updated_at":"2018-07-29T05:03:18Z","closed_at":"2018-07-28T15:16:31Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"We often declare fixtures in the same module that uses them. I've seen people new to the codebase, especially ones who haven't been heavy pytest users before, often use the fixtures interchangeably as functions, i.e.\r\n```py\r\n@pytest.fixture\r\ndef model():\r\n   ...\r\n\r\ndef test_foo(model):\r\n   my_model = model\r\n\r\ndef test_bar():\r\n   my_model = model()\r\n```\r\n\r\nThe fixtures are intentionally made callable, but I'd argue that in many codebases, the the dual use of a fixture in this way breeds confusion and can mislead a novice programmer. For example, if the fixture requires other fixtures, i.e.\r\n```py\r\n@pytest.fixture(params=[1, 2])\r\ndef parent_model(request):\r\n   ...\r\n\r\n@pytest.fixture\r\ndef model(parent_model):\r\n   ...\r\n```\r\na novice programmer might conclude that _they_ need to provide the `parent_model` parameter to `model()`, not knowing that they're supposed to leave it up to the fixture resolution (which could e.g. result in a parameterized fixture).\r\n\r\nI'd like to propose introducing a flag such as `strict_fixtures` to make fixtures fail fast (with a clear explanation) if they're called as functions.","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3661/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3661/timeline","performed_via_github_app":null,"state_reason":"completed"}