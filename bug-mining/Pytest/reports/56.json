{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3219","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3219/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3219/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3219/events","html_url":"https://github.com/pytest-dev/pytest/issues/3219","id":297017557,"node_id":"MDU6SXNzdWUyOTcwMTc1NTc=","number":3219,"title":"pytest.skip in pytest_itemcollected hook raises INTERNALERROR","user":{"login":"bechaos","id":36439848,"node_id":"MDQ6VXNlcjM2NDM5ODQ4","avatar_url":"https://avatars.githubusercontent.com/u/36439848?v=4","gravatar_id":"","url":"https://api.github.com/users/bechaos","html_url":"https://github.com/bechaos","followers_url":"https://api.github.com/users/bechaos/followers","following_url":"https://api.github.com/users/bechaos/following{/other_user}","gists_url":"https://api.github.com/users/bechaos/gists{/gist_id}","starred_url":"https://api.github.com/users/bechaos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bechaos/subscriptions","organizations_url":"https://api.github.com/users/bechaos/orgs","repos_url":"https://api.github.com/users/bechaos/repos","events_url":"https://api.github.com/users/bechaos/events{/privacy}","received_events_url":"https://api.github.com/users/bechaos/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":224849198,"node_id":"MDU6TGFiZWwyMjQ4NDkxOTg=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20question","name":"type: question","color":"cc317c","default":false,"description":"general question, might be closed after 2 weeks of inactivity"},{"id":240511492,"node_id":"MDU6TGFiZWwyNDA1MTE0OTI=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/topic:%20collection","name":"topic: collection","color":"006b75","default":false,"description":"related to the collection phase"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":20,"created_at":"2018-02-14T08:55:30Z","updated_at":"2018-09-02T14:40:35Z","closed_at":"2018-09-02T14:40:35Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello,\r\n\r\nI have tried to find anything in documentation about hooks and skip, but i was not able to. Calling `pytest.skip` in other hooks e.g. `pytest_runtest_call`, `pytest_generate_tests` or `pytest_runtest_setup` skips item fine.\r\nHowever when called in `pytest_itemcollected` i get:\r\n```\r\nINTERNALERROR> Traceback (most recent call last):\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\main.py\", line 98, in wrap_session\r\nINTERNALERROR>     session.exitstatus = doit(config, session) or 0\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\main.py\", line 132, in _main\r\nINTERNALERROR>     config.hook.pytest_collection(session=session)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 745, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 339, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 334, in <lambda>\r\nINTERNALERROR>     _MultiCall(methods, kwargs, hook.spec_opts).execute()\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 614, in execute\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\main.py\", line 141, in pytest_collection\r\nINTERNALERROR>     return session.perform_collect()\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\main.py\", line 600, in perform_collect\r\nINTERNALERROR>     items = self._perform_collect(args, genitems)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\main.py\", line 636, in _perform_collect\r\nINTERNALERROR>     self.items.extend(self.genitems(node))\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\main.py\", line 772, in genitems\r\nINTERNALERROR>     for x in self.genitems(subnode):\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\main.py\", line 765, in genitems\r\nINTERNALERROR>     node.ihook.pytest_itemcollected(item=node)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 745, in __call__\r\nINTERNALERROR>     return self._hookexec(self, self._nonwrappers + self._wrappers, kwargs)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 339, in _hookexec\r\nINTERNALERROR>     return self._inner_hookexec(hook, methods, kwargs)\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 334, in <lambda>\r\nINTERNALERROR>     _MultiCall(methods, kwargs, hook.spec_opts).execute()\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\vendored_packages\\pluggy.py\", line 614, in execute\r\nINTERNALERROR>     res = hook_impl.function(*args)\r\nINTERNALERROR>   File \"D:\\workspace\\sdt\\sdt-test\\us_test\\conftest.py\", line 208, in pytest_itemcollected\r\nINTERNALERROR>     pytest.skip()\r\nINTERNALERROR>   File \"...\\pytest-3.0.6-py2.7.egg\\_pytest\\runner.py\", line 529, in skip\r\nINTERNALERROR>     raise Skipped(msg=msg)\r\nINTERNALERROR> Skipped: <Skipped instance>\r\n```\r\nThank you for your time.\r\n","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/3219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/3219/timeline","performed_via_github_app":null,"state_reason":"completed"}