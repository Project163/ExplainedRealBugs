{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12363","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12363/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12363/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12363/events","html_url":"https://github.com/pytest-dev/pytest/issues/12363","id":2315181407,"node_id":"I_kwDOAjwLdc6J_t1f","number":12363,"title":"Link canonical documentation to discourage search engines from linking old docs","user":{"login":"jfrost-mo","id":113985160,"node_id":"U_kgDOBstGiA","avatar_url":"https://avatars.githubusercontent.com/u/113985160?v=4","gravatar_id":"","url":"https://api.github.com/users/jfrost-mo","html_url":"https://github.com/jfrost-mo","followers_url":"https://api.github.com/users/jfrost-mo/followers","following_url":"https://api.github.com/users/jfrost-mo/following{/other_user}","gists_url":"https://api.github.com/users/jfrost-mo/gists{/gist_id}","starred_url":"https://api.github.com/users/jfrost-mo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jfrost-mo/subscriptions","organizations_url":"https://api.github.com/users/jfrost-mo/orgs","repos_url":"https://api.github.com/users/jfrost-mo/repos","events_url":"https://api.github.com/users/jfrost-mo/events{/privacy}","received_events_url":"https://api.github.com/users/jfrost-mo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-05-24T11:37:41Z","updated_at":"2024-05-26T10:21:32Z","closed_at":"2024-05-26T10:21:32Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nThanks for suggesting a feature!\r\n\r\nQuick check-list while suggesting features:\r\n-->\r\n\r\n#### What's the problem this feature will solve?\r\n<!-- What are you trying to do, that you are unable to achieve with pytest as it currently stands? -->\r\n\r\nCurrently when you search for a pytest feature on the web you often get linked to an old version of the documentation. This isn't ideal, as newer versions of the documentation have improvements, and its also rare that you are running the multi year old version that is often linked to.\r\n\r\n#### Describe the solution you'd like\r\n<!-- A clear and concise description of what you want to happen. -->\r\n\r\nFortunately this situation can be resolved by adding a `<link rel=\"canonical\" href=\"url of page in stable version\">` tag onto all of the documentation pages. This can be done with sphinx by specifying the [html_baseurl](https://www.sphinx-doc.org/en/master/usage/configuration.html#confval-html_baseurl) in the `conf.py`.\r\n\r\n```python\r\nhtml_baseurl = \"https://docs.pytest.org/en/stable/\"\r\n```\r\n\r\n<!-- Provide examples of real-world use cases that this would enable and how it solves the problem described above. -->\r\nThis would cause search engines indexing older versions of the page, as well as versions on other domains, such as the readthedocs.io temporary URLs, to relate all of these pages in the index, and show the canonical one in search results. After a few months the old pages should disappear from search results, and only the stable version will be shown.\r\n\r\n#### Alternative Solutions\r\n<!-- Have you tried to workaround the problem using a pytest plugin or other tools? Or a different approach to solving this issue? Please elaborate here. -->\r\n\r\nAccording to [the documentation](https://docs.readthedocs.io/en/stable/guides/canonical-urls.html#sphinx), ReadTheDocs should already be adding this, however it doesn't seem to be present on any pages. According to a different part of the [ReadTheDocs docs](https://docs.readthedocs.io/en/stable/canonical-urls.html#how-read-the-docs-generates-canonical-urls), you might need to enable this for custom domains:\r\n\r\n> If you want your custom domain to be set as the canonical, you need to set `Canonical:  This domain is the primary one where the documentation is served from` in the Admin > Domains section of your project settings.\r\n\r\nIt is worth checking if that is set first, before doing anything here.","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12363/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12363/timeline","performed_via_github_app":null,"state_reason":"completed"}