{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/2909","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2909/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2909/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2909/events","html_url":"https://github.com/pytest-dev/pytest/issues/2909","id":272877367,"node_id":"MDU6SXNzdWUyNzI4NzczNjc=","number":2909,"title":"Improve error message for fixtures with circular dependencies","user":{"login":"HaleTom","id":13854417,"node_id":"MDQ6VXNlcjEzODU0NDE3","avatar_url":"https://avatars.githubusercontent.com/u/13854417?v=4","gravatar_id":"","url":"https://api.github.com/users/HaleTom","html_url":"https://github.com/HaleTom","followers_url":"https://api.github.com/users/HaleTom/followers","following_url":"https://api.github.com/users/HaleTom/following{/other_user}","gists_url":"https://api.github.com/users/HaleTom/gists{/gist_id}","starred_url":"https://api.github.com/users/HaleTom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/HaleTom/subscriptions","organizations_url":"https://api.github.com/users/HaleTom/orgs","repos_url":"https://api.github.com/users/HaleTom/repos","events_url":"https://api.github.com/users/HaleTom/events{/privacy}","received_events_url":"https://api.github.com/users/HaleTom/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":224853076,"node_id":"MDU6TGFiZWwyMjQ4NTMwNzY=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/topic:%20reporting","name":"topic: reporting","color":"fef2c0","default":false,"description":"related to terminal output and user-facing messages and errors"},{"id":604021555,"node_id":"MDU6TGFiZWw2MDQwMjE1NTU=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/topic:%20fixtures","name":"topic: fixtures","color":"5319e7","default":false,"description":"anything involving fixtures directly or indirectly"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-11-10T09:53:54Z","updated_at":"2018-10-22T07:12:30Z","closed_at":"2018-10-20T16:49:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm getting an error saying that a fixture is not found, even though it is in the list of `available fixtures`.\r\n\r\n```\r\n$ pytest test_linked.py\r\n============================= test session starts ==============================\r\nplatform linux -- Python 3.6.3, pytest-3.2.3, py-1.4.34, pluggy-0.4.0\r\nrootdir: /home/ravi/prj/nn, inifile:\r\ncollected 1 item\r\n\r\ntest_linked.py E\r\n\r\n==================================== ERRORS ====================================\r\n_____________________ ERROR at setup of test_linked_thing ______________________\r\nfile /home/ravi/prj/nn/test_linked.py, line 19\r\n  def test_linked_thing(linked_thing_1, linked_thing_2):\r\nfile /home/ravi/prj/nn/test_linked.py, line 9\r\n  @pytest.fixture\r\n  def linked_thing_1(linked_thing_2):\r\nfile /home/ravi/prj/nn/test_linked.py, line 14\r\n  @pytest.fixture\r\n  def linked_thing_2(linked_thing_1):\r\nE       fixture 'linked_thing_1' not found\r\n>       available fixtures: cache, capfd, capsys, doctest_namespace, linked_thing_1, linked_thing_2, monkeypatch, pytestconfig, record_xml_property, recwarn, tmpdir, tmpdir_factory\r\n>       use 'pytest --fixtures [testpath]' for help on them.\r\n\r\n/home/ravi/prj/nn/test_linked.py:14\r\n=========================== 1 error in 0.01 seconds ============================\r\n$\r\n```\r\n\r\n**test_linked.py**\r\n```\r\nimport pytest\r\n\r\nclass LinkedThing:\r\n    def __init__(self, other_linked_thing):\r\n        self.link = other_linked_thing\r\n\r\n@pytest.fixture\r\ndef linked_thing_1(linked_thing_2):\r\n    return LinkedThing(linked_thing_2)\r\n\r\n@pytest.fixture\r\ndef linked_thing_2(linked_thing_1):\r\n    return LinkedThing(linked_thing_1)\r\n\r\ndef test_linked_thing(linked_thing_1, linked_thing_2):\r\n    assert 1\r\n```\r\n\r\n**Environment:**\r\n```\r\n$ pytest --version\r\nThis is pytest version 3.2.3, imported from /home/ravi/.local/share/virtualenvs/nn/lib/python3.6/site-packages/pytest.py\r\n$ uname -a\r\nLinux svelte 4.13.11-1-MANJARO #1 SMP PREEMPT Thu Nov 2 13:37:46 UTC 2017 x86_64 GNU/Linux\r\n$ pip list --format=columns\r\nPackage           Version  \r\n----------------- ---------\r\ncertifi           2017.11.5\r\nchardet           3.0.4    \r\ncolorama          0.3.9    \r\ndocopt            0.6.2    \r\ngevent            1.2.2    \r\ngreenlet          0.4.12   \r\nidna              2.6      \r\nnumpy             1.13.3   \r\npbr               3.1.1    \r\npigar             0.7.1    \r\npip               9.0.1    \r\npip-autoremove    0.9.0    \r\npipreqs           0.4.9    \r\npy                1.4.34   \r\npytest            3.2.3    \r\nrequests          2.18.4   \r\nsetuptools        36.6.0   \r\nsix               1.11.0   \r\nstevedore         1.27.1   \r\nurllib3           1.22     \r\nvirtualenv        15.1.0   \r\nvirtualenv-clone  0.2.6    \r\nvirtualenvwrapper 4.8.2    \r\nwheel             0.30.0   \r\nyarg              0.1.9 \r\n```\r\n\r\nIs there a work-around?","closed_by":{"login":"crazymerlyn","id":6919679,"node_id":"MDQ6VXNlcjY5MTk2Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/6919679?v=4","gravatar_id":"","url":"https://api.github.com/users/crazymerlyn","html_url":"https://github.com/crazymerlyn","followers_url":"https://api.github.com/users/crazymerlyn/followers","following_url":"https://api.github.com/users/crazymerlyn/following{/other_user}","gists_url":"https://api.github.com/users/crazymerlyn/gists{/gist_id}","starred_url":"https://api.github.com/users/crazymerlyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/crazymerlyn/subscriptions","organizations_url":"https://api.github.com/users/crazymerlyn/orgs","repos_url":"https://api.github.com/users/crazymerlyn/repos","events_url":"https://api.github.com/users/crazymerlyn/events{/privacy}","received_events_url":"https://api.github.com/users/crazymerlyn/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/2909/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2909/timeline","performed_via_github_app":null,"state_reason":"completed"}