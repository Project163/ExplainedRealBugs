{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/8733","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8733/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8733/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8733/events","html_url":"https://github.com/pytest-dev/pytest/issues/8733","id":912382483,"node_id":"MDU6SXNzdWU5MTIzODI0ODM=","number":8733,"title":"Pytest run fails under Python 3.10.0-beta.2 on Windows","user":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2021-06-05T18:24:33Z","updated_at":"2021-11-02T12:55:18Z","closed_at":"2021-06-13T10:25:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"```python-traceback\r\nTraceback (most recent call last):\r\n  ...\r\n  File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\capture.py\", line 90, in _readline_workaround\r\n    import readline  # noqa: F401\r\n  File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\readline.py\", line 34, in <module>\r\n    rl = Readline()\r\n  File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\rlmain.py\", line 422, in __init__\r\n    BaseReadline.__init__(self)\r\n  File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\rlmain.py\", line 62, in __init__\r\n    mode.init_editing_mode(None)\r\n  File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\modes\\emacs.py\", line 633, in init_editing_mode\r\n    self._bind_key('space',       self.self_insert)\r\n  File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\modes\\basemode.py\", line 162, in _bind_key\r\n    if not callable(func):\r\n  File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\py3k_compat.py\", line 8, in callable\r\n    return isinstance(x, collections.Callable)\r\nAttributeError: module 'collections' has no attribute 'Callable'\r\n```\r\n\r\n<details>\r\n  <summary>full traceback</summary>\r\n  \r\n  ```python-traceback\r\n  Traceback (most recent call last):\r\n    File \"C:\\hostedtoolcache\\windows\\Python\\3.10.0-beta.2\\x64\\lib\\runpy.py\", line 196, in _run_module_as_main\r\n      return _run_code(code, main_globals, None,\r\n    File \"C:\\hostedtoolcache\\windows\\Python\\3.10.0-beta.2\\x64\\lib\\runpy.py\", line 86, in _run_code\r\n      exec(code, run_globals)\r\n    File \"D:\\a\\gstore\\gstore\\.venv\\Scripts\\py.test.exe\\__main__.py\", line 7, in <module>\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 185, in console_main\r\n      code = main()\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 143, in main\r\n      config = _prepareconfig(args, plugins)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 318, in _prepareconfig\r\n      config = pluginmanager.hook.pytest_cmdline_parse(\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\hooks.py\", line 286, in __call__\r\n      return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\manager.py\", line 93, in _hookexec\r\n      return self._inner_hookexec(hook, methods, kwargs)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\manager.py\", line 84, in <lambda>\r\n      self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\callers.py\", line 203, in _multicall\r\n      gen.send(outcome)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\helpconfig.py\", line 100, in pytest_cmdline_parse\r\n      config: Config = outcome.get_result()\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\callers.py\", line 80, in get_result\r\n      raise ex[1].with_traceback(ex[2])\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\callers.py\", line 187, in _multicall\r\n      res = hook_impl.function(*args)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 1003, in pytest_cmdline_parse\r\n      self.parse(args)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 1283, in parse\r\n      self._preparse(args, addopts=addopts)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\config\\__init__.py\", line 1191, in _preparse\r\n      self.hook.pytest_load_initial_conftests(\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\hooks.py\", line 286, in __call__\r\n      return self._hookexec(self, self.get_hookimpls(), kwargs)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\manager.py\", line 93, in _hookexec\r\n      return self._inner_hookexec(hook, methods, kwargs)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\manager.py\", line 84, in <lambda>\r\n      self._inner_hookexec = lambda hook, methods, kwargs: hook.multicall(\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\callers.py\", line 208, in _multicall\r\n      return outcome.get_result()\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\callers.py\", line 80, in get_result\r\n      raise ex[1].with_traceback(ex[2])\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pluggy\\callers.py\", line 182, in _multicall\r\n      next(gen)  # first yield\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\capture.py\", line 157, in pytest_load_initial_conftests\r\n      _readline_workaround()\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\_pytest\\capture.py\", line 90, in _readline_workaround\r\n      import readline  # noqa: F401\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\readline.py\", line 34, in <module>\r\n      rl = Readline()\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\rlmain.py\", line 422, in __init__\r\n      BaseReadline.__init__(self)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\rlmain.py\", line 62, in __init__\r\n      mode.init_editing_mode(None)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\modes\\emacs.py\", line 633, in init_editing_mode\r\n      self._bind_key('space',       self.self_insert)\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\modes\\basemode.py\", line 162, in _bind_key\r\n      if not callable(func):\r\n    File \"d:\\a\\gstore\\gstore\\.venv\\lib\\site-packages\\pyreadline\\py3k_compat.py\", line 8, in callable\r\n      return isinstance(x, collections.Callable)\r\n  AttributeError: module 'collections' has no attribute 'Callable'\r\n  ```\r\n</details>\r\n\r\nI discovered this in the [GitHub Actions](https://github.com/sergeyklay/gstore/pull/43/checks?check_run_id=2753902882), with Pytest 6.2.4 on Microsoft Windows Server 2019 and 3.10.0-beta.2 from [actions/setup-python@v2.2.2](https://github.com/actions/setup-python). Unfortunately I don't have a smaller reproducing example than that. Please let me know if I can provide more info.\r\n\r\n----\r\n\r\n**P.S.** Everything is OK with the same Python and pytest versions on macOs and Linux.","closed_by":{"login":"sergeyklay","id":1256298,"node_id":"MDQ6VXNlcjEyNTYyOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1256298?v=4","gravatar_id":"","url":"https://api.github.com/users/sergeyklay","html_url":"https://github.com/sergeyklay","followers_url":"https://api.github.com/users/sergeyklay/followers","following_url":"https://api.github.com/users/sergeyklay/following{/other_user}","gists_url":"https://api.github.com/users/sergeyklay/gists{/gist_id}","starred_url":"https://api.github.com/users/sergeyklay/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sergeyklay/subscriptions","organizations_url":"https://api.github.com/users/sergeyklay/orgs","repos_url":"https://api.github.com/users/sergeyklay/repos","events_url":"https://api.github.com/users/sergeyklay/events{/privacy}","received_events_url":"https://api.github.com/users/sergeyklay/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/8733/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/8733/timeline","performed_via_github_app":null,"state_reason":"completed"}