{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/13477","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13477/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13477/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13477/events","html_url":"https://github.com/pytest-dev/pytest/issues/13477","id":3111932947,"node_id":"I_kwDOAjwLdc65fFQT","number":13477,"title":"Undocumented removal of `PytestReturnNotNoneWarning`","user":{"login":"cliffckerr","id":3239256,"node_id":"MDQ6VXNlcjMyMzkyNTY=","avatar_url":"https://avatars.githubusercontent.com/u/3239256?v=4","gravatar_id":"","url":"https://api.github.com/users/cliffckerr","html_url":"https://github.com/cliffckerr","followers_url":"https://api.github.com/users/cliffckerr/followers","following_url":"https://api.github.com/users/cliffckerr/following{/other_user}","gists_url":"https://api.github.com/users/cliffckerr/gists{/gist_id}","starred_url":"https://api.github.com/users/cliffckerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cliffckerr/subscriptions","organizations_url":"https://api.github.com/users/cliffckerr/orgs","repos_url":"https://api.github.com/users/cliffckerr/repos","events_url":"https://api.github.com/users/cliffckerr/events{/privacy}","received_events_url":"https://api.github.com/users/cliffckerr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":240739369,"node_id":"MDU6TGFiZWwyNDA3MzkzNjk=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20backward%20compatibility","name":"type: backward compatibility","color":"f7c6c7","default":false,"description":"might present some backward compatibility issues which should be carefully noted in the changelog"},{"id":315571544,"node_id":"MDU6TGFiZWwzMTU1NzE1NDQ=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20regression","name":"type: regression","color":"f7c6c7","default":false,"description":"indicates a problem that was introduced in a release which was working previously"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2025-06-02T23:35:06Z","updated_at":"2025-06-16T21:32:16Z","closed_at":"2025-06-16T21:32:16Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"It looks like https://github.com/pytest-dev/pytest/pull/12346 got merged without reference to some of the previous discussions, e.g. https://github.com/pytest-dev/pytest/issues/10465.\n\nWith `pytest` 8.4, this change causes workflows to fail if they return non-`None` values (which can be useful for debugging interactively by running the file directly as well as via `pytest`).\n\nAt minimum, the deprecation documentation does not say that this feature was removed:\nhttps://docs.pytest.org/en/stable/deprecations.html#returning-non-none-value-in-test-functions\n\nHowever, other users mentioned other issues with the current implementation as well, e.g. trying to print the full return value can cause problems with large objects or binary data (see example below).\n\nIn terms of a solution, I would like to ask that there be a config option to skip this (similar to `--doctest-ignore-import-errors`). I agree that newbie users should be protected from this gotcha -- but I don't think that means this feature should be forcibly removed for everyone!\n\n---\n\nHere's an example of a test that causes an implicit `pytest` error as it tries to print the object being returned:\n\n```py\ndef test_bad_repr():\n\n    class BadRepr:\n        def __repr__(self):\n            raise Exception('Bad repr')\n\n    bad_repr = BadRepr()\n\n    return bad_repr\n```\nwhich fails with:\n```py\n====================================================== FAILURES ======================================================\n___________________________________________________ test_bad_repr ____________________________________________________\n\nself = <[Exception('Bad repr') raised in repr()] BadRepr object at 0x72b1c228cc20>\n\n    def __repr__(self):\n>       raise Exception('Bad repr')\nE       Exception: Bad repr\n\ntest_bad_repr.py:6: Exception\n============================================== short test summary info ===============================================\nFAILED test_bad_repr.py::test_bad_repr - Exception: Bad repr\n================================================= 1 failed in 0.07s ==================================================\n```\n\nThis is a pretty confusing failure, as at no point is it clear from the error why the object repr is being called in the first place, and this error is raised instead of the return-not-None test failure.","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/13477/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/13477/timeline","performed_via_github_app":null,"state_reason":"completed"}