{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12204","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12204/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12204/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12204/events","html_url":"https://github.com/pytest-dev/pytest/issues/12204","id":2235288925,"node_id":"I_kwDOAjwLdc6FO81d","number":12204,"title":"ExceptionGroup traceback of session fixture unlimitedly grows from test to test","user":{"login":"tkukushkin","id":1482516,"node_id":"MDQ6VXNlcjE0ODI1MTY=","avatar_url":"https://avatars.githubusercontent.com/u/1482516?v=4","gravatar_id":"","url":"https://api.github.com/users/tkukushkin","html_url":"https://github.com/tkukushkin","followers_url":"https://api.github.com/users/tkukushkin/followers","following_url":"https://api.github.com/users/tkukushkin/following{/other_user}","gists_url":"https://api.github.com/users/tkukushkin/gists{/gist_id}","starred_url":"https://api.github.com/users/tkukushkin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tkukushkin/subscriptions","organizations_url":"https://api.github.com/users/tkukushkin/orgs","repos_url":"https://api.github.com/users/tkukushkin/repos","events_url":"https://api.github.com/users/tkukushkin/events{/privacy}","received_events_url":"https://api.github.com/users/tkukushkin/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-04-10T10:45:32Z","updated_at":"2024-04-29T17:02:45Z","closed_at":"2024-04-29T17:02:45Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"My session fixture can raise `ExceptionGroup` and I see huge traceback which grows unlimitedly from test to test.\r\n\r\npip list:\r\n```\r\niniconfig 2.0.0  \r\npackaging 24.0   \r\npluggy    1.4.0  \r\npytest    8.1.1 \r\n```\r\n\r\nOperation system: macOS 14.3\r\nPython: 3.12.0\r\n\r\nExample:\r\n```python\r\nimport pytest\r\n\r\n@pytest.fixture(scope='session', autouse=True)\r\ndef f1():\r\n    raise ExceptionGroup('', [ValueError()])\r\n\r\ndef test_smth1():\r\n    pass\r\n\r\ndef test_smth2():\r\n    pass\r\n\r\ndef test_smth3():\r\n    pass\r\n```\r\n\r\nWith such code I get 495 lines of logs:\r\n\r\n<details><summary>Details</summary>\r\n<pre><code>\r\n============================= test session starts ==============================\r\nplatform darwin -- Python 3.12.0, pytest-8.0.0, pluggy-1.3.0\r\nrootdir: /Users/tkukushkin/Projects/test/tests\r\nconfigfile: pytest.ini\r\nplugins: cov-4.1.0\r\ncollected 3 items\r\n\r\ntests/test_foo.py EEE                                                    [100%]\r\n\r\n==================================== ERRORS ====================================\r\n_________________________ ERROR at setup of test_smth1 _________________________\r\n  + Exception Group Traceback (most recent call last):\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 345, in from_call\r\n  |     result: Optional[TResult] = func()\r\n  |                                 ^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 266, in <lambda>\r\n  |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise\r\n  |             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 85, in pytest_runtest_setup\r\n  |     yield from unraisable_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 833, in pytest_runtest_setup\r\n  |     yield from self._runtest_for(item, \"setup\")\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 822, in _runtest_for\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/capture.py\", line 877, in pytest_runtest_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 82, in pytest_runtest_setup\r\n  |     yield from thread_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 161, in pytest_runtest_setup\r\n  |     item.session._setupstate.setup(item)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 517, in setup\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 514, in setup\r\n  |     col.setup()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/python.py\", line 1839, in setup\r\n  |     self._request._fillfixtures()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 693, in _fillfixtures\r\n  |     item.funcargs[argname] = self.getfixturevalue(argname)\r\n  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 547, in getfixturevalue\r\n  |     fixturedef = self._get_active_fixturedef(argname)\r\n  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 566, in _get_active_fixturedef\r\n  |     self._compute_fixture_value(fixturedef)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 652, in _compute_fixture_value\r\n  |     fixturedef.execute(request=subrequest)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1095, in execute\r\n  |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\r\n  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1149, in pytest_fixture_setup\r\n  |     result = call_fixture_func(fixturefunc, request, kwargs)\r\n  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 923, in call_fixture_func\r\n  |     fixture_result = fixturefunc(**kwargs)\r\n  |                      ^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/Projects/test/tests/test_foo.py\", line 6, in f1\r\n  |     raise ExceptionGroup('', [ValueError('foo')])\r\n  | ExceptionGroup:  (1 sub-exception)\r\n  +-+---------------- 1 ----------------\r\n    | ValueError: foo\r\n    +------------------------------------\r\n_________________________ ERROR at setup of test_smth2 _________________________\r\n  + Exception Group Traceback (most recent call last):\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 345, in from_call\r\n  |     result: Optional[TResult] = func()\r\n  |                                 ^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 266, in <lambda>\r\n  |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise\r\n  |             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 85, in pytest_runtest_setup\r\n  |     yield from unraisable_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 833, in pytest_runtest_setup\r\n  |     yield from self._runtest_for(item, \"setup\")\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 822, in _runtest_for\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/capture.py\", line 877, in pytest_runtest_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 82, in pytest_runtest_setup\r\n  |     yield from thread_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 161, in pytest_runtest_setup\r\n  |     item.session._setupstate.setup(item)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 517, in setup\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 514, in setup\r\n  |     col.setup()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/python.py\", line 1839, in setup\r\n  |     self._request._fillfixtures()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 693, in _fillfixtures\r\n  |     item.funcargs[argname] = self.getfixturevalue(argname)\r\n  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 547, in getfixturevalue\r\n  |     fixturedef = self._get_active_fixturedef(argname)\r\n  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 566, in _get_active_fixturedef\r\n  |     self._compute_fixture_value(fixturedef)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 652, in _compute_fixture_value\r\n  |     fixturedef.execute(request=subrequest)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1085, in execute\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 345, in from_call\r\n  |     result: Optional[TResult] = func()\r\n  |                                 ^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 266, in <lambda>\r\n  |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise\r\n  |             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 85, in pytest_runtest_setup\r\n  |     yield from unraisable_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 833, in pytest_runtest_setup\r\n  |     yield from self._runtest_for(item, \"setup\")\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 822, in _runtest_for\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/capture.py\", line 877, in pytest_runtest_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 82, in pytest_runtest_setup\r\n  |     yield from thread_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 161, in pytest_runtest_setup\r\n  |     item.session._setupstate.setup(item)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 517, in setup\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 514, in setup\r\n  |     col.setup()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/python.py\", line 1839, in setup\r\n  |     self._request._fillfixtures()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 693, in _fillfixtures\r\n  |     item.funcargs[argname] = self.getfixturevalue(argname)\r\n  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 547, in getfixturevalue\r\n  |     fixturedef = self._get_active_fixturedef(argname)\r\n  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 566, in _get_active_fixturedef\r\n  |     self._compute_fixture_value(fixturedef)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 652, in _compute_fixture_value\r\n  |     fixturedef.execute(request=subrequest)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1095, in execute\r\n  |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\r\n  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1149, in pytest_fixture_setup\r\n  |     result = call_fixture_func(fixturefunc, request, kwargs)\r\n  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 923, in call_fixture_func\r\n  |     fixture_result = fixturefunc(**kwargs)\r\n  |                      ^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/Projects/test/tests/test_foo.py\", line 6, in f1\r\n  |     raise ExceptionGroup('', [ValueError('foo')])\r\n  | ExceptionGroup:  (1 sub-exception)\r\n  +-+---------------- 1 ----------------\r\n    | ValueError: foo\r\n    +------------------------------------\r\n_________________________ ERROR at setup of test_smth3 _________________________\r\n  + Exception Group Traceback (most recent call last):\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 345, in from_call\r\n  |     result: Optional[TResult] = func()\r\n  |                                 ^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 266, in <lambda>\r\n  |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise\r\n  |             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 85, in pytest_runtest_setup\r\n  |     yield from unraisable_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 833, in pytest_runtest_setup\r\n  |     yield from self._runtest_for(item, \"setup\")\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 822, in _runtest_for\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/capture.py\", line 877, in pytest_runtest_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 82, in pytest_runtest_setup\r\n  |     yield from thread_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 161, in pytest_runtest_setup\r\n  |     item.session._setupstate.setup(item)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 517, in setup\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 514, in setup\r\n  |     col.setup()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/python.py\", line 1839, in setup\r\n  |     self._request._fillfixtures()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 693, in _fillfixtures\r\n  |     item.funcargs[argname] = self.getfixturevalue(argname)\r\n  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 547, in getfixturevalue\r\n  |     fixturedef = self._get_active_fixturedef(argname)\r\n  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 566, in _get_active_fixturedef\r\n  |     self._compute_fixture_value(fixturedef)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 652, in _compute_fixture_value\r\n  |     fixturedef.execute(request=subrequest)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1085, in execute\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 345, in from_call\r\n  |     result: Optional[TResult] = func()\r\n  |                                 ^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 266, in <lambda>\r\n  |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise\r\n  |             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 85, in pytest_runtest_setup\r\n  |     yield from unraisable_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 833, in pytest_runtest_setup\r\n  |     yield from self._runtest_for(item, \"setup\")\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 822, in _runtest_for\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/capture.py\", line 877, in pytest_runtest_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 82, in pytest_runtest_setup\r\n  |     yield from thread_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 161, in pytest_runtest_setup\r\n  |     item.session._setupstate.setup(item)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 517, in setup\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 514, in setup\r\n  |     col.setup()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/python.py\", line 1839, in setup\r\n  |     self._request._fillfixtures()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 693, in _fillfixtures\r\n  |     item.funcargs[argname] = self.getfixturevalue(argname)\r\n  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 547, in getfixturevalue\r\n  |     fixturedef = self._get_active_fixturedef(argname)\r\n  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 566, in _get_active_fixturedef\r\n  |     self._compute_fixture_value(fixturedef)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 652, in _compute_fixture_value\r\n  |     fixturedef.execute(request=subrequest)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1085, in execute\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 345, in from_call\r\n  |     result: Optional[TResult] = func()\r\n  |                                 ^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 266, in <lambda>\r\n  |     lambda: ihook(item=item, **kwds), when=when, reraise=reraise\r\n  |             ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 85, in pytest_runtest_setup\r\n  |     yield from unraisable_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/unraisableexception.py\", line 65, in unraisable_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 833, in pytest_runtest_setup\r\n  |     yield from self._runtest_for(item, \"setup\")\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/logging.py\", line 822, in _runtest_for\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/capture.py\", line 877, in pytest_runtest_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 82, in pytest_runtest_setup\r\n  |     yield from thread_exception_runtest_hook()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/threadexception.py\", line 63, in thread_exception_runtest_hook\r\n  |     yield\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 161, in pytest_runtest_setup\r\n  |     item.session._setupstate.setup(item)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 517, in setup\r\n  |     raise exc\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/runner.py\", line 514, in setup\r\n  |     col.setup()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/python.py\", line 1839, in setup\r\n  |     self._request._fillfixtures()\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 693, in _fillfixtures\r\n  |     item.funcargs[argname] = self.getfixturevalue(argname)\r\n  |                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 547, in getfixturevalue\r\n  |     fixturedef = self._get_active_fixturedef(argname)\r\n  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 566, in _get_active_fixturedef\r\n  |     self._compute_fixture_value(fixturedef)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 652, in _compute_fixture_value\r\n  |     fixturedef.execute(request=subrequest)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1095, in execute\r\n  |     result = ihook.pytest_fixture_setup(fixturedef=self, request=request)\r\n  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_hooks.py\", line 493, in __call__\r\n  |     return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_manager.py\", line 115, in _hookexec\r\n  |     return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\r\n  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 113, in _multicall\r\n  |     raise exception.with_traceback(exception.__traceback__)\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 96, in _multicall\r\n  |     teardown.throw(exception)  # type: ignore[union-attr]\r\n  |     ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\r\n  |     return (yield)\r\n  |             ^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/pluggy/_callers.py\", line 77, in _multicall\r\n  |     res = hook_impl.function(*args)\r\n  |           ^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 1149, in pytest_fixture_setup\r\n  |     result = call_fixture_func(fixturefunc, request, kwargs)\r\n  |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/.pyenv/versions/3.12.0/lib/python3.12/site-packages/_pytest/fixtures.py\", line 923, in call_fixture_func\r\n  |     fixture_result = fixturefunc(**kwargs)\r\n  |                      ^^^^^^^^^^^^^^^^^^^^^\r\n  |   File \"/Users/tkukushkin/Projects/test/tests/test_foo.py\", line 6, in f1\r\n  |     raise ExceptionGroup('', [ValueError('foo')])\r\n  | ExceptionGroup:  (1 sub-exception)\r\n  +-+---------------- 1 ----------------\r\n    | ValueError: foo\r\n    +------------------------------------\r\n=========================== short test summary info ============================\r\nERROR tests/test_foo.py::test_smth1 - ExceptionGroup:  (1 sub-exception)\r\nERROR tests/test_foo.py::test_smth2 - ExceptionGroup:  (1 sub-exception)\r\nERROR tests/test_foo.py::test_smth3 - ExceptionGroup:  (1 sub-exception)\r\n============================== 3 errors in 0.02s ===============================\r\n</code></pre>\r\n</details> \r\n\r\nTraceback of first test: 95 lines\r\nTraceback of second test: 159 lines\r\nTraceback of third test: 223 lines\r\n\r\nIn more complex example with several hundred of tests I got 2.7 GiB logs :-)\r\n","closed_by":{"login":"bluetech","id":1223550,"node_id":"MDQ6VXNlcjEyMjM1NTA=","avatar_url":"https://avatars.githubusercontent.com/u/1223550?v=4","gravatar_id":"","url":"https://api.github.com/users/bluetech","html_url":"https://github.com/bluetech","followers_url":"https://api.github.com/users/bluetech/followers","following_url":"https://api.github.com/users/bluetech/following{/other_user}","gists_url":"https://api.github.com/users/bluetech/gists{/gist_id}","starred_url":"https://api.github.com/users/bluetech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bluetech/subscriptions","organizations_url":"https://api.github.com/users/bluetech/orgs","repos_url":"https://api.github.com/users/bluetech/repos","events_url":"https://api.github.com/users/bluetech/events{/privacy}","received_events_url":"https://api.github.com/users/bluetech/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/12204/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/12204/timeline","performed_via_github_app":null,"state_reason":"completed"}