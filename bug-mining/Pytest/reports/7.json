{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/2959","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2959/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2959/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2959/events","html_url":"https://github.com/pytest-dev/pytest/issues/2959","id":277305565,"node_id":"MDU6SXNzdWUyNzczMDU1NjU=","number":2959,"title":"pytest 3.3.0 immutable fixture params","user":{"login":"popravich","id":323442,"node_id":"MDQ6VXNlcjMyMzQ0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/323442?v=4","gravatar_id":"","url":"https://api.github.com/users/popravich","html_url":"https://github.com/popravich","followers_url":"https://api.github.com/users/popravich/followers","following_url":"https://api.github.com/users/popravich/following{/other_user}","gists_url":"https://api.github.com/users/popravich/gists{/gist_id}","starred_url":"https://api.github.com/users/popravich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/popravich/subscriptions","organizations_url":"https://api.github.com/users/popravich/orgs","repos_url":"https://api.github.com/users/popravich/repos","events_url":"https://api.github.com/users/popravich/events{/privacy}","received_events_url":"https://api.github.com/users/popravich/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":315571544,"node_id":"MDU6TGFiZWwzMTU1NzE1NDQ=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20regression","name":"type: regression","color":"f7c6c7","default":false,"description":"indicates a problem that was introduced in a release which was working previously"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2017-11-28T09:02:11Z","updated_at":"2017-11-30T21:56:04Z","closed_at":"2017-11-30T21:56:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Before v3.3.0 it was possible to mutate fixture parameters, since v3.3.0 params gets \"frozen\"\r\n(I guess its introduced with this commit 07b2b18a01a3ba12757a4eb1c0e082922f5299e5)\r\n\r\nI was using this feature to setup fixture parameters based on command-line options:\r\n```python\r\nBINS = []\r\n\r\n@pytest.fixture(scope='session', params=BINS, ids=...)\r\ndef server_bin(request):\r\n    return request.param\r\n\r\n@pytest.fixture(scope='session')\r\ndef run_server(server_bin):\r\n    pass # start application\r\n\r\ndef pytest_configure(config):\r\n    BINS[:] = config.getoption('--server')[:]\r\n```\r\n* Here is the real use case https://github.com/aio-libs/aioredis/blob/pyup/tests/conftest.py#L245-L254\r\n* Here are the travis builds [before](https://travis-ci.org/aio-libs/aioredis/jobs/307971350#L685) and [after](https://travis-ci.org/aio-libs/aioredis/jobs/308313356#L699) update;\r\n\r\nSo my questions:\r\n* Is this new behavior intended or its a bug?\r\n* And if its intended what is new way to make dynamic parameters?\r\n","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/2959/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/2959/timeline","performed_via_github_app":null,"state_reason":"completed"}