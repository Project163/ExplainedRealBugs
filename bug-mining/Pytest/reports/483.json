{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/11777","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11777/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11777/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11777/events","html_url":"https://github.com/pytest-dev/pytest/issues/11777","id":2067855385,"node_id":"I_kwDOAjwLdc57QPgZ","number":11777,"title":"Verbosity setting does not affect truncation of sequences when comparing their length","user":{"login":"dpitch40","id":1520538,"node_id":"MDQ6VXNlcjE1MjA1Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1520538?v=4","gravatar_id":"","url":"https://api.github.com/users/dpitch40","html_url":"https://github.com/dpitch40","followers_url":"https://api.github.com/users/dpitch40/followers","following_url":"https://api.github.com/users/dpitch40/following{/other_user}","gists_url":"https://api.github.com/users/dpitch40/gists{/gist_id}","starred_url":"https://api.github.com/users/dpitch40/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dpitch40/subscriptions","organizations_url":"https://api.github.com/users/dpitch40/orgs","repos_url":"https://api.github.com/users/dpitch40/repos","events_url":"https://api.github.com/users/dpitch40/events{/privacy}","received_events_url":"https://api.github.com/users/dpitch40/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":224849198,"node_id":"MDU6TGFiZWwyMjQ4NDkxOTg=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20question","name":"type: question","color":"cc317c","default":false,"description":"general question, might be closed after 2 weeks of inactivity"},{"id":224853076,"node_id":"MDU6TGFiZWwyMjQ4NTMwNzY=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/topic:%20reporting","name":"topic: reporting","color":"fef2c0","default":false,"description":"related to terminal output and user-facing messages and errors"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2024-01-05T18:33:33Z","updated_at":"2024-04-10T11:07:19Z","closed_at":"2024-04-10T11:07:19Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"If a comparison on the length of a sequence fails, the sequence is truncated in the failure explanation regardless of the verbosity setting.\r\n\r\nExample script:\r\n\r\n```python\r\ndef test_list():\r\n    l = list(range(50))\r\n    assert l == []\r\n\r\ndef test_list_len():\r\n    l = list(range(50))\r\n    assert len(l) == 49\r\n\r\ndef test_dict():\r\n    d = dict(zip(range(50), range(50)))\r\n    assert d == {}\r\n\r\ndef test_dict_len():\r\n    d = dict(zip(range(50), range(50)))\r\n    assert len(d) == 49\r\n```\r\nOutput of `python3 -m pytest test_truncation.py`:\r\n\r\n```\r\n====================================================== FAILURES ======================================================\r\n_____________________________________________________ test_list ______________________________________________________\r\n\r\n    def test_list():\r\n        l = list(range(50))\r\n>       assert l == []\r\nE       assert [0, 1, 2, 3, 4, 5, ...] == []\r\nE         Left contains 50 more items, first extra item: 0\r\nE         Use -v to get more diff\r\n\r\ntest_truncation.py:3: AssertionError\r\n___________________________________________________ test_list_len ____________________________________________________\r\n\r\n    def test_list_len():\r\n        l = list(range(50))\r\n>       assert len(l) == 49\r\nE       assert 50 == 49\r\nE        +  where 50 = len([0, 1, 2, 3, 4, 5, ...])\r\n\r\ntest_truncation.py:7: AssertionError\r\n_____________________________________________________ test_dict ______________________________________________________\r\n\r\n    def test_dict():\r\n        d = dict(zip(range(50), range(50)))\r\n>       assert d == {}\r\nE       AssertionError: assert {0: 0, 1: 1, 2: 2, 3: 3, ...} == {}\r\nE         Left contains 50 more items:\r\nE         {0: 0,\r\nE          1: 1,\r\nE          2: 2,\r\nE          3: 3,\r\nE          4: 4,\r\nE          5: 5,...\r\nE         \r\nE         ...Full output truncated (45 lines hidden), use '-vv' to show\r\n\r\ntest_truncation.py:11: AssertionError\r\n___________________________________________________ test_dict_len ____________________________________________________\r\n\r\n    def test_dict_len():\r\n        d = dict(zip(range(50), range(50)))\r\n>       assert len(d) == 49\r\nE       assert 50 == 49\r\nE        +  where 50 = len({0: 0, 1: 1, 2: 2, 3: 3, ...})\r\n\r\ntest_truncation.py:15: AssertionError\r\n============================================== short test summary info ===============================================\r\nFAILED test_truncation.py::test_list - assert [0, 1, 2, 3, 4, 5, ...] == []\r\nFAILED test_truncation.py::test_list_len - assert 50 == 49\r\nFAILED test_truncation.py::test_dict - AssertionError: assert {0: 0, 1: 1, 2: 2, 3: 3, ...} == {}\r\nFAILED test_truncation.py::test_dict_len - assert 50 == 49\r\n```\r\n\r\nOutput of `python3 -m pytest test_truncation.py -v`:\r\n\r\n```\r\n====================================================== FAILURES ======================================================\r\n_____________________________________________________ test_list ______________________________________________________\r\n\r\n    def test_list():\r\n        l = list(range(50))\r\n>       assert l == []\r\nE       AssertionError: assert [0, 1, 2, 3, 4, 5, ...] == []\r\nE         Left contains 50 more items, first extra item: 0\r\nE         Full diff:\r\nE           [\r\nE         -  ,\r\nE         +  0,\r\nE         ?  +\r\nE         +  1,...\r\nE         \r\nE         ...Full output truncated (49 lines hidden), use '-vv' to show\r\n\r\ntest_truncation.py:3: AssertionError\r\n___________________________________________________ test_list_len ____________________________________________________\r\n\r\n    def test_list_len():\r\n        l = list(range(50))\r\n>       assert len(l) == 49\r\nE       assert 50 == 49\r\nE        +  where 50 = len([0, 1, 2, 3, 4, 5, ...])\r\n\r\ntest_truncation.py:7: AssertionError\r\n_____________________________________________________ test_dict ______________________________________________________\r\n\r\n    def test_dict():\r\n        d = dict(zip(range(50), range(50)))\r\n>       assert d == {}\r\nE       AssertionError: assert {0: 0, 1: 1, 2: 2, 3: 3, ...} == {}\r\nE         Left contains 50 more items:\r\nE         {0: 0,\r\nE          1: 1,\r\nE          2: 2,\r\nE          3: 3,\r\nE          4: 4,\r\nE          5: 5,...\r\nE         \r\nE         ...Full output truncated (98 lines hidden), use '-vv' to show\r\n\r\ntest_truncation.py:11: AssertionError\r\n___________________________________________________ test_dict_len ____________________________________________________\r\n\r\n    def test_dict_len():\r\n        d = dict(zip(range(50), range(50)))\r\n>       assert len(d) == 49\r\nE       assert 50 == 49\r\nE        +  where 50 = len({0: 0, 1: 1, 2: 2, 3: 3, ...})\r\n\r\ntest_truncation.py:15: AssertionError\r\n============================================== short test summary info ===============================================\r\nFAILED test_truncation.py::test_list - AssertionError: assert [0, 1, 2, 3, 4, 5, ...] == []\r\nFAILED test_truncation.py::test_list_len - assert 50 == 49\r\nFAILED test_truncation.py::test_dict - AssertionError: assert {0: 0, 1: 1, 2: 2, 3: 3, ...} == {}\r\nFAILED test_truncation.py::test_dict_len - assert 50 == 49\r\n```\r\n\r\nOutput of `python3 -m pytest test_truncation.py -vv`:\r\n\r\n```\r\n====================================================== FAILURES ======================================================\r\n_____________________________________________________ test_list ______________________________________________________\r\n\r\n    def test_list():\r\n        l = list(range(50))\r\n>       assert l == []\r\nE       assert [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49] == []\r\nE         Left contains 50 more items, first extra item: 0\r\nE         Full diff:\r\nE           [\r\nE         -  ,\r\nE         +  0,\r\nE         ?  +\r\nE         +  1,\r\nE         +  2,\r\nE         +  3,\r\nE         +  4,\r\nE         +  5,\r\nE         +  6,\r\nE         +  7,\r\nE         +  8,\r\nE         +  9,\r\nE         +  10,\r\nE         +  11,\r\nE         +  12,\r\nE         +  13,\r\nE         +  14,\r\nE         +  15,\r\nE         +  16,\r\nE         +  17,\r\nE         +  18,\r\nE         +  19,\r\nE         +  20,\r\nE         +  21,\r\nE         +  22,\r\nE         +  23,\r\nE         +  24,\r\nE         +  25,\r\nE         +  26,\r\nE         +  27,\r\nE         +  28,\r\nE         +  29,\r\nE         +  30,\r\nE         +  31,\r\nE         +  32,\r\nE         +  33,\r\nE         +  34,\r\nE         +  35,\r\nE         +  36,\r\nE         +  37,\r\nE         +  38,\r\nE         +  39,\r\nE         +  40,\r\nE         +  41,\r\nE         +  42,\r\nE         +  43,\r\nE         +  44,\r\nE         +  45,\r\nE         +  46,\r\nE         +  47,\r\nE         +  48,\r\nE         +  49,\r\nE           ]\r\n\r\ntest_truncation.py:3: AssertionError\r\n___________________________________________________ test_list_len ____________________________________________________\r\n\r\n    def test_list_len():\r\n        l = list(range(50))\r\n>       assert len(l) == 49\r\nE       assert 50 == 49\r\nE        +  where 50 = len([0, 1, 2, 3, 4, 5, ...])\r\n\r\ntest_truncation.py:7: AssertionError\r\n_____________________________________________________ test_dict ______________________________________________________\r\n\r\n    def test_dict():\r\n        d = dict(zip(range(50), range(50)))\r\n>       assert d == {}\r\nE       assert {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13, 14: 14, 15: 15, 16: 16, 17: 17, 18: 18, 19: 19, 20: 20, 21: 21, 22: 22, 23: 23, 24: 24, 25: 25, 26: 26, 27: 27, 28: 28, 29: 29, 30: 30, 31: 31, 32: 32, 33: 33, 34: 34, 35: 35, 36: 36, 37: 37, 38: 38, 39: 39, 40: 40, 41: 41, 42: 42, 43: 43, 44: 44, 45: 45, 46: 46, 47: 47, 48: 48, 49: 49} == {}\r\nE         Left contains 50 more items:\r\nE         {0: 0,\r\nE          1: 1,\r\nE          2: 2,\r\nE          3: 3,\r\nE          4: 4,\r\nE          5: 5,\r\nE          6: 6,\r\nE          7: 7,\r\nE          8: 8,\r\nE          9: 9,\r\nE          10: 10,\r\nE          11: 11,\r\nE          12: 12,\r\nE          13: 13,\r\nE          14: 14,\r\nE          15: 15,\r\nE          16: 16,\r\nE          17: 17,\r\nE          18: 18,\r\nE          19: 19,\r\nE          20: 20,\r\nE          21: 21,\r\nE          22: 22,\r\nE          23: 23,\r\nE          24: 24,\r\nE          25: 25,\r\nE          26: 26,\r\nE          27: 27,\r\nE          28: 28,\r\nE          29: 29,\r\nE          30: 30,\r\nE          31: 31,\r\nE          32: 32,\r\nE          33: 33,\r\nE          34: 34,\r\nE          35: 35,\r\nE          36: 36,\r\nE          37: 37,\r\nE          38: 38,\r\nE          39: 39,\r\nE          40: 40,\r\nE          41: 41,\r\nE          42: 42,\r\nE          43: 43,\r\nE          44: 44,\r\nE          45: 45,\r\nE          46: 46,\r\nE          47: 47,\r\nE          48: 48,\r\nE          49: 49}\r\nE         Full diff:\r\nE           {\r\nE         -  ,\r\nE         +  0: 0,\r\nE         +  1: 1,\r\nE         +  2: 2,\r\nE         +  3: 3,\r\nE         +  4: 4,\r\nE         +  5: 5,\r\nE         +  6: 6,\r\nE         +  7: 7,\r\nE         +  8: 8,\r\nE         +  9: 9,\r\nE         +  10: 10,\r\nE         +  11: 11,\r\nE         +  12: 12,\r\nE         +  13: 13,\r\nE         +  14: 14,\r\nE         +  15: 15,\r\nE         +  16: 16,\r\nE         +  17: 17,\r\nE         +  18: 18,\r\nE         +  19: 19,\r\nE         +  20: 20,\r\nE         +  21: 21,\r\nE         +  22: 22,\r\nE         +  23: 23,\r\nE         +  24: 24,\r\nE         +  25: 25,\r\nE         +  26: 26,\r\nE         +  27: 27,\r\nE         +  28: 28,\r\nE         +  29: 29,\r\nE         +  30: 30,\r\nE         +  31: 31,\r\nE         +  32: 32,\r\nE         +  33: 33,\r\nE         +  34: 34,\r\nE         +  35: 35,\r\nE         +  36: 36,\r\nE         +  37: 37,\r\nE         +  38: 38,\r\nE         +  39: 39,\r\nE         +  40: 40,\r\nE         +  41: 41,\r\nE         +  42: 42,\r\nE         +  43: 43,\r\nE         +  44: 44,\r\nE         +  45: 45,\r\nE         +  46: 46,\r\nE         +  47: 47,\r\nE         +  48: 48,\r\nE         +  49: 49,\r\nE           }\r\n\r\ntest_truncation.py:11: AssertionError\r\n___________________________________________________ test_dict_len ____________________________________________________\r\n\r\n    def test_dict_len():\r\n        d = dict(zip(range(50), range(50)))\r\n>       assert len(d) == 49\r\nE       assert 50 == 49\r\nE        +  where 50 = len({0: 0, 1: 1, 2: 2, 3: 3, ...})\r\n\r\ntest_truncation.py:15: AssertionError\r\n============================================== short test summary info ===============================================\r\nFAILED test_truncation.py::test_list - assert [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28,...\r\nFAILED test_truncation.py::test_list_len - assert 50 == 49\r\nFAILED test_truncation.py::test_dict - assert {0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10, 11: 11, 12: 12, 13: 13, 14: 14, 15: 1...\r\nFAILED test_truncation.py::test_dict_len - assert 50 == 49\r\n```\r\n\r\nWhy are the sequences always truncated in the explanations of the length comparison failures, regardless of verbosity?\r\n\r\nPython 3.10.12, pytest-7.4.4, my OS is Linux Mint 21.2.\r\n\r\n`pip list` output attached:\r\n\r\n[pip_list.txt](https://github.com/pytest-dev/pytest/files/13845351/pip_list.txt)","closed_by":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/11777/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/11777/timeline","performed_via_github_app":null,"state_reason":"completed"}