{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/5275","repository_url":"https://api.github.com/repos/pytest-dev/pytest","labels_url":"https://api.github.com/repos/pytest-dev/pytest/issues/5275/labels{/name}","comments_url":"https://api.github.com/repos/pytest-dev/pytest/issues/5275/comments","events_url":"https://api.github.com/repos/pytest-dev/pytest/issues/5275/events","html_url":"https://github.com/pytest-dev/pytest/issues/5275","id":444964754,"node_id":"MDU6SXNzdWU0NDQ5NjQ3NTQ=","number":5275,"title":"Technical aspects related to Python 2.7 and 3.4 support (pytest 5.0)","user":{"login":"nicoddemus","id":1085180,"node_id":"MDQ6VXNlcjEwODUxODA=","avatar_url":"https://avatars.githubusercontent.com/u/1085180?v=4","gravatar_id":"","url":"https://api.github.com/users/nicoddemus","html_url":"https://github.com/nicoddemus","followers_url":"https://api.github.com/users/nicoddemus/followers","following_url":"https://api.github.com/users/nicoddemus/following{/other_user}","gists_url":"https://api.github.com/users/nicoddemus/gists{/gist_id}","starred_url":"https://api.github.com/users/nicoddemus/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicoddemus/subscriptions","organizations_url":"https://api.github.com/users/nicoddemus/orgs","repos_url":"https://api.github.com/users/nicoddemus/repos","events_url":"https://api.github.com/users/nicoddemus/events{/privacy}","received_events_url":"https://api.github.com/users/nicoddemus/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":224849844,"node_id":"MDU6TGFiZWwyMjQ4NDk4NDQ=","url":"https://api.github.com/repos/pytest-dev/pytest/labels/type:%20proposal","name":"type: proposal","color":"006b75","default":false,"description":"proposal for a new feature, often to gather opinions or design the API around the new feature"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":39,"created_at":"2019-05-16T13:44:12Z","updated_at":"2020-01-04T21:24:57Z","closed_at":"2020-01-04T21:24:57Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This issue is to discuss the technical aspects of pytest dropping Python 2 and 3.4 in pytest 5.0 and long term support of the 4.6 series.\r\n\r\nFor a more user-centric point of view, please see [Python 2.7 and 3.4 support plan](https://docs.pytest.org/en/latest/py27-py34-deprecation.html) in the docs.\r\n\r\n---\r\n\r\n(This post has since then edited from the original version after the discussion that took place here).\r\n\r\nUnless decided otherwise, the last pytest version to support **Python 2.7 and 3.4** will be the **4.5** series, which is the last minor release on PyPI. \r\n\r\nThis issue contains the agreed process on how we will proceed with the pytest 5.0 release and long term support plans for the 4.5 series. \r\n\r\n## What goes into 4.6.X releases\r\n\r\nNew 4.6.X releases will contain *bug fixes* only:\r\n\r\n* A bug *will* be fixed/ported if, in a normal release, we would merge it in the `master` branch: often we apply bug fixes to the `features` branch because even though we are fixing a bug, it may break test suites, so we often take the safest route. Those bugs are often not critical, and won't be ported to the maintenance branch.\r\n* No new features will be added on this branch, however small. \r\n\r\n## Who will handle porting bugs\r\n\r\nAfter a PR for a bug fix is merged, and the bug is applicable to the 4.6.X series according to the rules stated previously:\r\n\r\nWe expect **core maintainers** who provided the initial bug fix to also create a new PR porting the bug.\r\n\r\nFrom **other contributors** we expect core maintainers to step up to create a new PR porting the bug if the original contributor is not interested in doing so. @nicoddemus and @asottile applied to be the forefront here, but will gladly accept help from other core maintainers.\r\n\r\n## When will 4.6.X releases happen\r\n\r\nNew 4.6.X releases will happen after we have a few bugs in place to release, or if a few weeks have passed (say a single bug has been fixed a month after the latest 4.5.X release). No hard rules here (as with any other pytest release really), just a ballpark.\r\n\r\n## Backporting changes into the 4.6 release\r\n\r\n1. `git fetch --all --prune`\r\n2. `git checkout origin/4.6-maintenance -b backport-XXXX`  # use the PR number here\r\n3. Locate the merge commit on the PR, in the \"merged\" message, for example:\r\n\r\n   > nicoddemus merged commit 0f8b462 into pytest-dev:features\r\n\r\n4. `git cherry-pick -m1 REVISION`  # use the revision you found in 3.\r\n5. open a PR targeting `4.6-maintenance`: prefix the message with `[4.6]` so it is an obvious backport, delete the PR body (it usually contains a duplicated commit message)\r\n\r\nNote for backport PRs a review is not necessary -- though if it it falls into one of these categories a review is strongly suggested:\r\n- The cherry-pick did not apply cleanly\r\n- This is a bugfix for only the 4.6.x series\r\n\r\n# Steps for the first 5.0 release\r\n\r\n1. The absolute first step is to mark `features` as Python 3 only: ‚úîÔ∏è  \r\n    * Update `setup.py` classifiers and `python_requires` to declare pytest only supports Python 3.5+.\r\n    * Drop Python<3.5 from CI.\r\n    * Update the \"Python 2.7 and 3.4 support plan\".  \r\n1. After `4.6` is released, we push a `pytest4-maintenance` branch pointing to `4.6.0` initially. ‚úîÔ∏è\r\n2. The next step is to run `pyupgrade --py3-plus` (I guess @asottile plans to volunteer here :wink:); ‚úîÔ∏è\r\n1. Turn warnings into errors. ‚úîÔ∏è\r\n1. Release 5.0. üéâ\r\n\r\n## When will we start the 5.0 release process\r\n\r\nIt is my opinion that we can proceed with the steps above right away, as we are quickly approaching end of May.\r\n\r\nIf nobody opposes, I plan to start with the first step this week or early next week. \r\n\r\n","closed_by":{"login":"asottile","id":1810591,"node_id":"MDQ6VXNlcjE4MTA1OTE=","avatar_url":"https://avatars.githubusercontent.com/u/1810591?v=4","gravatar_id":"","url":"https://api.github.com/users/asottile","html_url":"https://github.com/asottile","followers_url":"https://api.github.com/users/asottile/followers","following_url":"https://api.github.com/users/asottile/following{/other_user}","gists_url":"https://api.github.com/users/asottile/gists{/gist_id}","starred_url":"https://api.github.com/users/asottile/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/asottile/subscriptions","organizations_url":"https://api.github.com/users/asottile/orgs","repos_url":"https://api.github.com/users/asottile/repos","events_url":"https://api.github.com/users/asottile/events{/privacy}","received_events_url":"https://api.github.com/users/asottile/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pytest-dev/pytest/issues/5275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pytest-dev/pytest/issues/5275/timeline","performed_via_github_app":null,"state_reason":"completed"}