diff --git a/src/c/tests/quorum.cfg b/src/c/tests/quorum.cfg
index aa2dd8ce8..cb0aa81c8 100644
--- a/src/c/tests/quorum.cfg
+++ b/src/c/tests/quorum.cfg
@@ -1,7 +1,7 @@
 tickTime=500
 initLimit=10
 syncLimit=5
-dataDir=/tmp/zkdata
+dataDir=TMPDIR/zkdata
 clientPort=22181
 server.1=localhost:22881:33881
 server.2=localhost:22882:33882
diff --git a/src/c/tests/zkServer.sh b/src/c/tests/zkServer.sh
index b19e8702c..64e5a0491 100755
--- a/src/c/tests/zkServer.sh
+++ b/src/c/tests/zkServer.sh
@@ -157,11 +157,14 @@ startReadOnly)
         echo "this target is for unit tests only"
         exit 2
     else
-        mkdir -p "${base_dir}/build/tmp/zkdata"
-        rm -f "${base_dir}/build/tmp/zkdata/myid" && echo 1 > "${base_dir}/build/tmp/zkdata/myid"
+        tmpdir="${base_dir}/build/tmp"
+        mkdir -p "${tmpdir}/zkdata"
+        rm -f "${tmpdir}/zkdata/myid" && echo 1 > "${tmpdir}/zkdata/myid"
+
+        sed "s#TMPDIR#${tmpdir}#g" ${base_dir}/src/c/tests/quorum.cfg > "${tmpdir}/quorum.cfg"
 
         # force read-only mode
-        java -cp "$CLASSPATH" -Dreadonlymode.enabled=true org.apache.zookeeper.server.quorum.QuorumPeerMain ${base_dir}/src/c/tests/quorum.cfg &> "${base_dir}/build/tmp/zk.log" &
+        java -cp "$CLASSPATH" -Dreadonlymode.enabled=true org.apache.zookeeper.server.quorum.QuorumPeerMain ${tmpdir}/quorum.cfg &> "${tmpdir}/zk.log" &
         pid=$!
         echo -n $pid > "${base_dir}/build/tmp/zk.pid"
         sleep 3 # wait until read-only server is up
