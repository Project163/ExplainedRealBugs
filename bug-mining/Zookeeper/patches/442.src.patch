diff --git a/CHANGES.txt b/CHANGES.txt
index 3e35a1c56..569fc124d 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -169,6 +169,9 @@ BUGFIXES:
 
   ZOOKEEPER-1395. node-watcher double-free redux (Mike Lundy via henryr)
    
+  ZOOKEEPER-1439. c sdk: core in log_env for lack of checking the output
+  argument *pwp* of getpwuid_r (Yubing Yin via michim)
+
 IMPROVEMENTS:
 
   ZOOKEEPER-1170. Fix compiler (eclipse) warnings: unused imports,
diff --git a/src/c/src/zookeeper.c b/src/c/src/zookeeper.c
index 622c132ee..7223a6a32 100644
--- a/src/c/src/zookeeper.c
+++ b/src/c/src/zookeeper.c
@@ -739,7 +739,7 @@ static void log_env() {
 
 #if defined(HAVE_GETUID) && defined(HAVE_GETPWUID_R)
   uid = getuid();
-  if (!getpwuid_r(uid, &pw, buf, sizeof(buf), &pwp)) {
+  if (!getpwuid_r(uid, &pw, buf, sizeof(buf), &pwp) && pwp) {
     LOG_INFO(("Client environment:user.home=%s", pw.pw_dir));
   } else {
     LOG_INFO(("Client environment:user.home=<NA>"));
