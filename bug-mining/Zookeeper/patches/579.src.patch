diff --git a/CHANGES.txt b/CHANGES.txt
index 73b76731c..81a9367fc 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -564,6 +564,9 @@ BUGFIXES:
   ZOOKEEPER-1779. ReconfigTest littering the source root with test files
   (Abhiraj Butala via michim)
 
+  ZOOKEEPER-1888. ZkCli.cmd commands fail with "'java' is not recognized as an
+  internal or external command" (Ivan Mitic via michim)
+
 IMPROVEMENTS:
 
   ZOOKEEPER-1170. Fix compiler (eclipse) warnings: unused imports,
diff --git a/bin/zkCli.cmd b/bin/zkCli.cmd
index 3ee9d6d56..2feb81502 100644
--- a/bin/zkCli.cmd
+++ b/bin/zkCli.cmd
@@ -18,7 +18,7 @@ setlocal
 call "%~dp0zkEnv.cmd"
 
 set ZOOMAIN=org.apache.zookeeper.ZooKeeperMain
-java "-Dzookeeper.log.dir=%ZOO_LOG_DIR%" "-Dzookeeper.root.logger=%ZOO_LOG4J_PROP%" -cp "%CLASSPATH%" %ZOOMAIN% %*
+call %JAVA% "-Dzookeeper.log.dir=%ZOO_LOG_DIR%" "-Dzookeeper.root.logger=%ZOO_LOG4J_PROP%" -cp "%CLASSPATH%" %ZOOMAIN% %*
 
 endlocal
 
diff --git a/bin/zkEnv.cmd b/bin/zkEnv.cmd
index 5fda35330..849db9518 100644
--- a/bin/zkEnv.cmd
+++ b/bin/zkEnv.cmd
@@ -32,3 +32,16 @@ SET CLASSPATH=%~dp0..\build\classes;%~dp0..\build\lib\*;%CLASSPATH%
 
 set ZOOCFG=%ZOOCFGDIR%\zoo.cfg
 
+@REM setup java environment variables
+
+if not defined JAVA_HOME (
+  echo Error: JAVA_HOME is not set.
+  goto :eof
+)
+
+if not exist %JAVA_HOME%\bin\java.exe (
+  echo Error: JAVA_HOME is incorrectly set.
+  goto :eof
+)
+
+set JAVA=%JAVA_HOME%\bin\java
\ No newline at end of file
diff --git a/bin/zkServer.cmd b/bin/zkServer.cmd
index 1c2061f62..5bca84083 100644
--- a/bin/zkServer.cmd
+++ b/bin/zkServer.cmd
@@ -19,7 +19,6 @@ call "%~dp0zkEnv.cmd"
 
 set ZOOMAIN=org.apache.zookeeper.server.quorum.QuorumPeerMain
 echo on
-java "-Dzookeeper.log.dir=%ZOO_LOG_DIR%" "-Dzookeeper.root.logger=%ZOO_LOG4J_PROP%" -cp "%CLASSPATH%" %ZOOMAIN% "%ZOOCFG%" %*
+call %JAVA% "-Dzookeeper.log.dir=%ZOO_LOG_DIR%" "-Dzookeeper.root.logger=%ZOO_LOG4J_PROP%" -cp "%CLASSPATH%" %ZOOMAIN% "%ZOOCFG%" %*
 
 endlocal
-
