diff --git a/CHANGES.txt b/CHANGES.txt
index dcba5d357..2dff2d4bb 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -284,6 +284,8 @@ BUGFIXES:
   ZOOKEEPER-2385 Zookeeper trunk build is failing on windows
   (Arshad Mohammad via phunt)
 
+  ZOOKEEPER-2388 Unit tests failing on Solaris (Arshad Mohammad via phunt)
+
 IMPROVEMENTS:
   ZOOKEEPER-1660 Documentation for Dynamic Reconfiguration (Reed Wanderman-Milne via shralex)  
 
diff --git a/src/java/test/org/apache/zookeeper/server/quorum/LocalPeerBeanTest.java b/src/java/test/org/apache/zookeeper/server/quorum/LocalPeerBeanTest.java
index 3cecfbcb4..96688ffdd 100644
--- a/src/java/test/org/apache/zookeeper/server/quorum/LocalPeerBeanTest.java
+++ b/src/java/test/org/apache/zookeeper/server/quorum/LocalPeerBeanTest.java
@@ -25,6 +25,7 @@
 import java.net.InetAddress;
 import java.net.InetSocketAddress;
 
+import org.apache.zookeeper.PortAssignment;
 import org.apache.zookeeper.server.ServerCnxnFactory;
 import org.junit.Test;
 
@@ -49,7 +50,7 @@ public void testClientAddress() throws Exception {
          * Case 2: When only client port is configured
          */
         ServerCnxnFactory cnxnFactory = ServerCnxnFactory.createFactory();
-        int clientPort = 2181;
+        int clientPort = PortAssignment.unique();
         InetSocketAddress address = new InetSocketAddress(clientPort);
         cnxnFactory.configure(address, 5, false);
         quorumPeer.setCnxnFactory(cnxnFactory);
@@ -64,15 +65,15 @@ public void testClientAddress() throws Exception {
         /**
          * Case 3: When both client port and client address is configured
          */
-        InetAddress clientIP = InetAddress.getByAddress(new byte[] { 127, 0, 0,
-                2 });
+        clientPort = PortAssignment.unique();
+        InetAddress clientIP = InetAddress.getLoopbackAddress();
         address = new InetSocketAddress(clientIP, clientPort);
         cnxnFactory = ServerCnxnFactory.createFactory();
         cnxnFactory.configure(address, 5, false);
         quorumPeer.setCnxnFactory(cnxnFactory);
 
         result = remotePeerBean.getClientAddress();
-        String expectedResult = "127.0.0.2:" + clientPort;
+        String expectedResult = clientIP.getHostAddress() + ":" + clientPort;
         assertEquals(expectedResult, result);
         // cleanup
         cnxnFactory.shutdown();
diff --git a/src/java/test/org/apache/zookeeper/server/quorum/QuorumPeerTest.java b/src/java/test/org/apache/zookeeper/server/quorum/QuorumPeerTest.java
index 8e1df919d..fae7e5bb1 100644
--- a/src/java/test/org/apache/zookeeper/server/quorum/QuorumPeerTest.java
+++ b/src/java/test/org/apache/zookeeper/server/quorum/QuorumPeerTest.java
@@ -22,6 +22,7 @@
 
 import java.io.File;
 import java.io.IOException;
+import java.net.InetAddress;
 import java.net.InetSocketAddress;
 import java.util.HashMap;
 import java.util.Map;
@@ -47,12 +48,12 @@ public void testQuorumPeerListendOnSpecifiedClientIP() throws IOException {
         long myId = 1;
         File dataDir = ClientBase.createTmpDir();
         int clientPort = PortAssignment.unique();
-        String clientIP = "127.0.0.2";
         Map<Long, QuorumServer> peersView = new HashMap<Long, QuorumServer>();
+        InetAddress clientIP = InetAddress.getLoopbackAddress();
 
         peersView.put(Long.valueOf(myId),
-                new QuorumServer(myId, new InetSocketAddress("127.0.0.1", PortAssignment.unique()),
-                        new InetSocketAddress("127.0.0.1", PortAssignment.unique()),
+                new QuorumServer(myId, new InetSocketAddress(clientIP, PortAssignment.unique()),
+                        new InetSocketAddress(clientIP, PortAssignment.unique()),
                         new InetSocketAddress(clientIP, clientPort), LearnerType.PARTICIPANT));
 
         /**
@@ -61,7 +62,7 @@ public void testQuorumPeerListendOnSpecifiedClientIP() throws IOException {
         QuorumPeer peer1 = new QuorumPeer(peersView, dataDir, dataDir, clientPort, electionAlg, myId, tickTime,
                 initLimit, syncLimit);
         String hostString1 = peer1.cnxnFactory.getLocalAddress().getHostString();
-        assertEquals(clientIP, hostString1);
+        assertEquals(clientIP.getHostAddress(), hostString1);
 
         // cleanup
         peer1.shutdown();
@@ -71,15 +72,14 @@ public void testQuorumPeerListendOnSpecifiedClientIP() throws IOException {
          */
         peersView.clear();
         clientPort = PortAssignment.unique();
-        clientIP = "127.0.0.3";
         peersView.put(Long.valueOf(myId),
-                new QuorumServer(myId, new InetSocketAddress("127.0.0.1", PortAssignment.unique()),
-                        new InetSocketAddress("127.0.0.1", PortAssignment.unique()),
+                new QuorumServer(myId, new InetSocketAddress(clientIP, PortAssignment.unique()),
+                        new InetSocketAddress(clientIP, PortAssignment.unique()),
                         new InetSocketAddress(clientIP, clientPort), LearnerType.PARTICIPANT));
         QuorumPeer peer2 = new QuorumPeer(peersView, dataDir, dataDir, clientPort, electionAlg, myId, tickTime,
                 initLimit, syncLimit);
         String hostString2 = peer2.cnxnFactory.getLocalAddress().getHostString();
-        assertEquals(clientIP, hostString2);
+        assertEquals(clientIP.getHostAddress(), hostString2);
         // cleanup
         peer2.shutdown();
     }
