diff --git a/CHANGES.txt b/CHANGES.txt
index 5aa703560..cb02a5041 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -86,6 +86,9 @@ BUGFIXES:
   if the test method is annotated with an expected exception (Chris Nauroth
   via rgs)
 
+  ZOOKEEPER-2124 Allow Zookeeper version string to have underscore '_'
+  (Chris Nauroth via rgs)
+
 IMPROVEMENTS:
   ZOOKEEPER-1660 Documentation for Dynamic Reconfiguration (Reed Wanderman-Milne via shralex)  
 
diff --git a/build.xml b/build.xml
index 783e3cb9b..b3ed3846c 100644
--- a/build.xml
+++ b/build.xml
@@ -1018,10 +1018,21 @@ xmlns:maven="antlib:org.apache.maven.artifact.ant">
     </target>
 
     <target name="rpm" depends="package-native, tar" description="Make rpm package">
+      <!--The RPM spec file format disallows hyphen in the version.  Replace with
+          underscore to support version tags like -alpha or -SNAPSHOT.-->
+      <loadresource property="rpm.version">
+        <propertyresource name="version" />
+        <filterchain>
+          <tokenfilter>
+            <replacestring from="-" to="_" />
+          </tokenfilter>
+        </filterchain>
+      </loadresource>
       <subant target="rpm">
         <!--Pass down the version in case its needed again and the target
             distribution directory so contribs know where to install to.-->
         <property name="version" value="${version}"/>
+        <property name="rpm.version" value="${rpm.version}"/>
         <property name="dist.dir" value="${dist.dir}"/>
         <fileset file="${contrib.dir}/build.xml"/>
         <fileset file="${recipes.dir}/build.xml"/>
@@ -1047,7 +1058,7 @@ xmlns:maven="antlib:org.apache.maven.artifact.ant">
         <filterchain>
           <replacetokens>
             <token key="final.name" value="${final.name}" />
-            <token key="version" value="${version}" />
+            <token key="version" value="${rpm.version}" />
             <token key="package.release" value="${package.release}" />
             <token key="package.build.dir" value="${package.build.dir}" />
             <token key="package.prefix" value="${package.prefix}" />
diff --git a/src/contrib/zkpython/build.xml b/src/contrib/zkpython/build.xml
index d8254d14b..029d4f29c 100644
--- a/src/contrib/zkpython/build.xml
+++ b/src/contrib/zkpython/build.xml
@@ -132,7 +132,7 @@
         <filterchain>
           <replacetokens>
             <token key="final.name" value="${name}" />
-            <token key="version" value="${version}" />
+            <token key="version" value="${rpm.version}" />
             <token key="package.release" value="${package.release}" />
             <token key="package.build.dir" value="${package.build.dir}" />
             <token key="package.prefix" value="${package.prefix}" />
