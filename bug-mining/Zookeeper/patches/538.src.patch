diff --git a/CHANGES.txt b/CHANGES.txt
index 7cde84ab9..7ec1d3a7b 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -400,6 +400,9 @@ BUGFIXES:
   ZOOKEEPER-1655. Make jline dependency optional in maven pom
   (Thomas Weise via phunt)
 
+  ZOOKEEPER-1770. NullPointerException in SnapshotFormatter
+  (Germ√°n Blanco via phunt)
+
 IMPROVEMENTS:
 
   ZOOKEEPER-1170. Fix compiler (eclipse) warnings: unused imports,
diff --git a/src/java/main/org/apache/zookeeper/server/SnapshotFormatter.java b/src/java/main/org/apache/zookeeper/server/SnapshotFormatter.java
index 865dfbdbd..0ecab73d0 100644
--- a/src/java/main/org/apache/zookeeper/server/SnapshotFormatter.java
+++ b/src/java/main/org/apache/zookeeper/server/SnapshotFormatter.java
@@ -87,7 +87,11 @@ private void printZnode(DataTree dataTree, String name) {
         synchronized(n) { // keep findbugs happy
             System.out.println(name);
             printStat(n.stat);
-            System.out.println("  dataLength = " + n.data.length);
+            if (n.data != null) {
+                System.out.println("  dataLength = " + n.data.length);
+            } else {
+                System.out.println("  no data");
+            }
             children = n.getChildren();
         }
         if (children != null) {
diff --git a/src/java/test/data/invalidsnap/version-2/snapshot.273 b/src/java/test/data/invalidsnap/version-2/snapshot.273
new file mode 100644
index 000000000..3146f5656
Binary files /dev/null and b/src/java/test/data/invalidsnap/version-2/snapshot.273 differ
diff --git a/src/java/test/org/apache/zookeeper/test/InvalidSnapshotTest.java b/src/java/test/org/apache/zookeeper/test/InvalidSnapshotTest.java
index abe838d2a..4bf4fb19f 100644
--- a/src/java/test/org/apache/zookeeper/test/InvalidSnapshotTest.java
+++ b/src/java/test/org/apache/zookeeper/test/InvalidSnapshotTest.java
@@ -70,6 +70,17 @@ public void testSnapshotFormatter() throws Exception {
         SnapshotFormatter.main(args);
     }
     
+    /**
+     * Verify the SnapshotFormatter by running it on a known file with one null data.
+     */
+    @Test
+    public void testSnapshotFormatterWithNull() throws Exception {
+        File snapDir = new File(testData, "invalidsnap");
+        File snapfile = new File(new File(snapDir, "version-2"), "snapshot.273");
+        String[] args = {snapfile.getCanonicalFile().toString()};
+        SnapshotFormatter.main(args);
+    }
+    
     /**
      * test the snapshot
      * @throws Exception an exception could be expected
