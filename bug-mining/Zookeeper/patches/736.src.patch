diff --git a/CHANGES.txt b/CHANGES.txt
index 224f5b900..04af8bcf7 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -249,6 +249,9 @@ BUGFIXES:
 
   ZOOKEEPER-412: checkstyle target fails trunk build (Akihiro Suda via cnauroth)
 
+  ZOOKEEPER-2297: NPE is thrown while creating "key manager" and "trust manager"
+  (Arshad Mohammad via rakeshr)
+
 IMPROVEMENTS:
   ZOOKEEPER-1660 Documentation for Dynamic Reconfiguration (Reed Wanderman-Milne via shralex)  
 
diff --git a/src/java/main/org/apache/zookeeper/server/auth/ProviderRegistry.java b/src/java/main/org/apache/zookeeper/server/auth/ProviderRegistry.java
index e261bcf1e..406015f84 100644
--- a/src/java/main/org/apache/zookeeper/server/auth/ProviderRegistry.java
+++ b/src/java/main/org/apache/zookeeper/server/auth/ProviderRegistry.java
@@ -39,10 +39,8 @@ public static void initialize() {
                 return;
             IPAuthenticationProvider ipp = new IPAuthenticationProvider();
             DigestAuthenticationProvider digp = new DigestAuthenticationProvider();
-            X509AuthenticationProvider x509p = new X509AuthenticationProvider();
             authenticationProviders.put(ipp.getScheme(), ipp);
             authenticationProviders.put(digp.getScheme(), digp);
-            authenticationProviders.put(x509p.getScheme(), x509p);
             Enumeration<Object> en = System.getProperties().keys();
             while (en.hasMoreElements()) {
                 String k = (String) en.nextElement();
diff --git a/src/java/test/org/apache/zookeeper/test/SSLAuthTest.java b/src/java/test/org/apache/zookeeper/test/SSLAuthTest.java
index 0bba28e6c..3b026fef7 100644
--- a/src/java/test/org/apache/zookeeper/test/SSLAuthTest.java
+++ b/src/java/test/org/apache/zookeeper/test/SSLAuthTest.java
@@ -43,6 +43,7 @@ public void setUp() throws Exception {
         System.setProperty(X509Util.SSL_TRUSTSTORE_LOCATION, testDataPath + "/ssl/testTrustStore.jks");
         System.setProperty(X509Util.SSL_TRUSTSTORE_PASSWD, "testpass");
         System.setProperty("javax.net.debug", "ssl");
+        System.setProperty("zookeeper.authProvider.x509", "org.apache.zookeeper.server.auth.X509AuthenticationProvider");
 
         String host = "localhost";
         int port = PortAssignment.unique();
diff --git a/src/java/test/org/apache/zookeeper/test/SSLTest.java b/src/java/test/org/apache/zookeeper/test/SSLTest.java
index 11317517f..ad7ec8afe 100644
--- a/src/java/test/org/apache/zookeeper/test/SSLTest.java
+++ b/src/java/test/org/apache/zookeeper/test/SSLTest.java
@@ -50,6 +50,7 @@ public void setup() {
         System.setProperty(X509Util.SSL_KEYSTORE_PASSWD, "testpass");
         System.setProperty(X509Util.SSL_TRUSTSTORE_LOCATION, testDataPath + "/ssl/testTrustStore.jks");
         System.setProperty(X509Util.SSL_TRUSTSTORE_PASSWD, "testpass");
+        System.setProperty("zookeeper.authProvider.x509", "org.apache.zookeeper.server.auth.X509AuthenticationProvider");
     }
 
     @After
