diff --git a/CHANGES.txt b/CHANGES.txt
index 865855414..c2019c7af 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -64,6 +64,9 @@ BUGFIXES:
   ZOOKEEPER-377. running ant cppunit tests, a failure still results in 
   BUILD SUCCESSFUL (giri via mahadev)
 
+  ZOOKEEPER-382. zookeeper cpp tests fails on 64 bit machines with gcc 4.1.2
+  (mahadev via phunt)
+
 IMPROVEMENTS:
   ZOOKEEPER-308. improve the atomic broadcast performance 3x.
   (breed via mahadev)
diff --git a/src/c/tests/TestClient.cc b/src/c/tests/TestClient.cc
index f221e2b24..89420f2fe 100644
--- a/src/c/tests/TestClient.cc
+++ b/src/c/tests/TestClient.cc
@@ -270,7 +270,8 @@ public:
     static zhandle_t *async_zk;
 
     static void statCompletion(int rc, const struct Stat *stat, const void *data) {
-        CPPUNIT_ASSERT_EQUAL((int)data, rc);
+        int tmp = (int) (long) data;
+        CPPUNIT_ASSERT_EQUAL(tmp, rc);
     }
 
     static void stringCompletion(int rc, const char *value, const void *data) {
@@ -288,7 +289,8 @@ public:
     }
 
     static void voidCompletion(int rc, const void *data) {
-        CPPUNIT_ASSERT_EQUAL((int)data, rc);
+        int tmp = (int) (long) data;
+        CPPUNIT_ASSERT_EQUAL(tmp, rc);
     }
 
     static void verifyCreateFails(const char *path, zhandle_t *zk) {
