diff --git a/CHANGES.txt b/CHANGES.txt
index 9c6904d75..a548ac3c4 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -47,6 +47,9 @@ joffe via mahadev)
   ZOOKEEPER-248.  QuorumPeer should use Map interface instead of 
 HashMap implementation. (nitay joffe via mahadev)
 
+  ZOOKEEPER-241. Build of a distro fails after clean target is run. (patrick
+hunt via mahadev)
+
 IMPROVEMENTS:
    
    ZOOKEEPER-64. Log system env information when initializing server and
diff --git a/src/java/main/org/apache/zookeeper/version/util/VerGen.java b/src/java/main/org/apache/zookeeper/version/util/VerGen.java
index 6996273ab..e85f4e197 100644
--- a/src/java/main/org/apache/zookeeper/version/util/VerGen.java
+++ b/src/java/main/org/apache/zookeeper/version/util/VerGen.java
@@ -59,6 +59,9 @@ static void generateFile(File outputDir, int maj, int min, int micro, int rev,
             w.write("    public static final int MAJOR=" + maj + ";\n");
             w.write("    public static final int MINOR=" + min + ";\n");
             w.write("    public static final int MICRO=" + micro + ";\n");
+            if (rev < 0) {
+                System.out.println("Unknown REVISION number, using " + rev);
+            }
             w.write("    public static final int REVISION=" + rev + ";\n");
             w.write("    public static final String BUILD_DATE=\"" + buildDate
                     + "\";\n");
@@ -108,7 +111,12 @@ public static void main(String[] args) {
             int maj = Integer.parseInt(v[0]);
             int min = Integer.parseInt(v[1]);
             int micro = Integer.parseInt(v[2]);
-            int rev = Integer.parseInt(args[1]);
+            int rev;
+            try {
+                rev = Integer.parseInt(args[1]);
+            } catch (NumberFormatException e) {
+                rev = -1;
+            }
             generateFile(new File("."), maj, min, micro, rev, args[2]);
         } catch (NumberFormatException e) {
             System.err
