diff --git a/zookeeper-server/src/test/java/org/apache/zookeeper/server/Emulate353TTLTest.java b/zookeeper-server/src/test/java/org/apache/zookeeper/server/Emulate353TTLTest.java
index c601a27d6..286fe4ed3 100644
--- a/zookeeper-server/src/test/java/org/apache/zookeeper/server/Emulate353TTLTest.java
+++ b/zookeeper-server/src/test/java/org/apache/zookeeper/server/Emulate353TTLTest.java
@@ -29,6 +29,8 @@
 
 import java.util.concurrent.atomic.AtomicLong;
 
+import static org.hamcrest.CoreMatchers.equalTo;
+
 public class Emulate353TTLTest extends ClientBase {
     private TestableZooKeeper zk;
 
@@ -83,6 +85,16 @@ public void test353TTL()
         Assert.assertNull("Ttl node should have been deleted", zk.exists("/foo", false));
     }
 
+    @Test
+    public void testEphemeralOwner_emulationTTL() {
+        Assert.assertThat(EphemeralType.get(-1), equalTo(EphemeralType.TTL));
+    }
+
+    @Test
+    public void testEphemeralOwner_emulationContainer() {
+        Assert.assertThat(EphemeralType.get(EphemeralType.CONTAINER_EPHEMERAL_OWNER), equalTo(EphemeralType.CONTAINER));
+    }
+
     private ContainerManager newContainerManager(final AtomicLong fakeElapsed) {
         return new ContainerManager(serverFactory.getZooKeeperServer()
                 .getZKDatabase(), serverFactory.getZooKeeperServer().firstProcessor, 1, 100) {
diff --git a/zookeeper-server/src/test/java/org/apache/zookeeper/server/EphemeralTypeTest.java b/zookeeper-server/src/test/java/org/apache/zookeeper/server/EphemeralTypeTest.java
index 40863f5ee..5c61ffc05 100644
--- a/zookeeper-server/src/test/java/org/apache/zookeeper/server/EphemeralTypeTest.java
+++ b/zookeeper-server/src/test/java/org/apache/zookeeper/server/EphemeralTypeTest.java
@@ -24,6 +24,8 @@
 import org.junit.Before;
 import org.junit.Test;
 
+import static org.hamcrest.CoreMatchers.equalTo;
+
 public class EphemeralTypeTest {
     @Before
     public void setUp() {
@@ -70,15 +72,28 @@ public void testNonSpecial() {
 
     @Test
     public void testServerIds() {
-        for ( int i = 0; i < 255; ++i ) {
-            Assert.assertEquals(EphemeralType.NORMAL, EphemeralType.get(SessionTrackerImpl.initializeNextSession(i)));
+        for ( int i = 0; i <= EphemeralType.MAX_EXTENDED_SERVER_ID; ++i ) {
+            EphemeralType.validateServerId(i);
         }
         try {
-            Assert.assertEquals(EphemeralType.TTL, EphemeralType.get(SessionTrackerImpl.initializeNextSession(255)));
-            Assert.fail("Should have thrown IllegalArgumentException");
-        } catch (IllegalArgumentException e) {
+            EphemeralType.validateServerId(EphemeralType.MAX_EXTENDED_SERVER_ID + 1);
+            Assert.fail("Should have thrown RuntimeException");
+        } catch (RuntimeException e) {
             // expected
         }
-        Assert.assertEquals(EphemeralType.NORMAL, EphemeralType.get(SessionTrackerImpl.initializeNextSession(EphemeralType.MAX_EXTENDED_SERVER_ID)));
+    }
+
+    @Test
+    public void testEphemeralOwner_extendedFeature_TTL() {
+        // 0xff = Extended feature is ON
+        // 0x0000 = Extended type id TTL (0)
+        Assert.assertThat(EphemeralType.get(0xff00000000000000L), equalTo(EphemeralType.TTL));
+    }
+
+    @Test(expected = IllegalArgumentException.class)
+    public void testEphemeralOwner_extendedFeature_extendedTypeUnsupported() {
+        // 0xff = Extended feature is ON
+        // 0x0001 = Unsupported extended type id (1)
+        EphemeralType.get(0xff00010000000000L);
     }
 }
