diff --git a/src/java/test/org/apache/zookeeper/server/ZooKeeperServerMainTest.java b/src/java/test/org/apache/zookeeper/server/ZooKeeperServerMainTest.java
index 4065020ed..5b1ef0348 100644
--- a/src/java/test/org/apache/zookeeper/server/ZooKeeperServerMainTest.java
+++ b/src/java/test/org/apache/zookeeper/server/ZooKeeperServerMainTest.java
@@ -177,16 +177,22 @@ public void testStandalone() throws Exception {
     public void testWithoutAutoCreateDataLogDir() throws Exception {
         ClientBase.setupTestEnv();
         System.setProperty(FileTxnSnapLog.ZOOKEEPER_DATADIR_AUTOCREATE, "false");
-        final int CLIENT_PORT = PortAssignment.unique();
-
-        MainThread main = new MainThread(CLIENT_PORT, false, null);
-        String args[] = new String[1];
-        args[0] = main.confFile.toString();
-        main.start();
+        try {
+            final int CLIENT_PORT = PortAssignment.unique();
 
-        Assert.assertFalse("waiting for server being up", ClientBase
-                .waitForServerUp("127.0.0.1:" + CLIENT_PORT,
-                        CONNECTION_TIMEOUT / 2));
+            MainThread main = new MainThread(CLIENT_PORT, false, null);
+            String args[] = new String[1];
+            args[0] = main.confFile.toString();
+            main.start();
+
+            Assert.assertFalse("waiting for server being up", ClientBase
+                    .waitForServerUp("127.0.0.1:" + CLIENT_PORT,
+                            CONNECTION_TIMEOUT / 2));
+        } finally {
+            // resets "zookeeper.datadir.autocreate" flag
+            System.setProperty(FileTxnSnapLog.ZOOKEEPER_DATADIR_AUTOCREATE,
+                    FileTxnSnapLog.ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT);
+        }
     }
 
     /**
