diff --git a/CHANGES.txt b/CHANGES.txt
index d5ee5691b..67c7edb17 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -7,24 +7,26 @@ BUGFIXES:
 Backward compatible changes:
 
 BUGFIXES: 
-  ZOOKEEPER-469. make sure CPPUNIT_CFLAGS isn't overwritten (chris via
-mahadev)
+  ZOOKEEPER-469. make sure CPPUNIT_CFLAGS isn't overwritten
+  (chris via mahadev)
 
   ZOOKEEPER-471. update zkperl for 3.2.x branch (chris via mahadev)
 
   ZOOKEEPER-470. include unistd.h for sleep() in c tests (chris via mahadev)
 
-  ZOOKEEPR-460. bad testRetry in cppunit tests (hudson failure) (giri via
-mahadev)
+  ZOOKEEPR-460. bad testRetry in cppunit tests (hudson failure)
+  (giri via mahadev)
 
   ZOOKEEPER-467.  Change log level in BookieHandle. (flavio via mahadev)
 
   ZOOKEEPER-482. ignore sigpipe in testRetry to avoid silent immediate
-failure. (chris via mahadev)
+  failure. (chris via mahadev)
+
+  ZOOKEEPER-487. setdata on root (/) crashes the servers (mahadev via phunt)
 
 IMPROVEMENTS:
   ZOOKEEPER-473. cleanup junit tests to eliminate false positives due to
-"socket reuse" and failure to close client (phunt via mahadev)
+  "socket reuse" and failure to close client (phunt via mahadev)
  
   ZOOKEEPER-488. Fix zkServer.sh to add clover.jar in classpath
   (Giridharan Kesavan via gkesavan)  
diff --git a/src/java/main/org/apache/zookeeper/common/PathTrie.java b/src/java/main/org/apache/zookeeper/common/PathTrie.java
index f2850801a..44aefe2af 100644
--- a/src/java/main/org/apache/zookeeper/common/PathTrie.java
+++ b/src/java/main/org/apache/zookeeper/common/PathTrie.java
@@ -248,6 +248,9 @@ public String findMaxPrefix(String path) {
         if (path == null) {
             return null;
         }
+        if ("/".equals(path)) {
+            return path;
+        }
         String[] pathComponents = path.split("/");
         TrieNode parent = rootNode;
         List<String> components = new ArrayList<String>();
diff --git a/src/java/test/org/apache/zookeeper/test/QuorumQuotaTest.java b/src/java/test/org/apache/zookeeper/test/QuorumQuotaTest.java
index d66353cc3..e1f531b42 100644
--- a/src/java/test/org/apache/zookeeper/test/QuorumQuotaTest.java
+++ b/src/java/test/org/apache/zookeeper/test/QuorumQuotaTest.java
@@ -49,6 +49,7 @@ protected void tearDown() throws Exception {
 
     public void testQuotaWithQuorum() throws Exception {
         ZooKeeper zk = createClient();
+        zk.setData("/", "some".getBytes(), -1);
         zk.create("/a", "some".getBytes(), Ids.OPEN_ACL_UNSAFE,
                 CreateMode.PERSISTENT);
         int i = 0;
diff --git a/src/java/test/org/apache/zookeeper/test/ZooKeeperQuotaTest.java b/src/java/test/org/apache/zookeeper/test/ZooKeeperQuotaTest.java
index 63d878c2c..9741cc129 100644
--- a/src/java/test/org/apache/zookeeper/test/ZooKeeperQuotaTest.java
+++ b/src/java/test/org/apache/zookeeper/test/ZooKeeperQuotaTest.java
@@ -53,7 +53,8 @@ public void testQuota() throws IOException,
         InterruptedException, KeeperException {
         final ZooKeeper zk = createClient();
         final String path = "/a/b/v";
-
+        // making sure setdata works on /
+        zk.setData("/", "some".getBytes(), -1);
         zk.create("/a", "some".getBytes(), Ids.OPEN_ACL_UNSAFE,
                 CreateMode.PERSISTENT);
 
