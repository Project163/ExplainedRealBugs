diff --git a/CHANGES.txt b/CHANGES.txt
index ed3cf1f16..d50dfe8e4 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -133,6 +133,9 @@ name (should not be) (phunt via mahadev)
 
   ZOOKEEPER-94. JMX tests are needed to verify that the JMX MBeans work
 properly (phunt via mahadev)
+
+  ZOOKEEPER-404. nightly build failed on hudson. (henry robinson and pat via
+mahadev)
  
 NEW FEATURES:
 
diff --git a/src/contrib/zkpython/build.xml b/src/contrib/zkpython/build.xml
index 47ac80804..0bc317b0a 100644
--- a/src/contrib/zkpython/build.xml
+++ b/src/contrib/zkpython/build.xml
@@ -61,22 +61,46 @@
 
     <target name="python-test">
       <exec executable="${test.src.dir}/run_tests.sh" failonerror="true">
-	<arg value="${test.src.dir}"/>
+        <arg value="${test.src.dir}"/>
       </exec>
     </target>
 
-    <target name="build">
+    <target name="compile">
       <exec executable="python" failonerror="true">
-	<arg value="${python.src.dir}/setup.py"/>
-	<arg value="build"/>
+        <arg value="${python.src.dir}/setup.py"/>
+        <arg value="build"/>
+        <arg value="--build-base=${build.dir}"/>
       </exec>
     </target>
 
-    <target name="install" depends="build">
+    <target name="install" depends="compile">
       <exec executable="python" failonerror="true">
-	<arg value="${python.src.dir}/setup.py"/>
-	<arg value="install"/>
+        <arg value="${python.src.dir}/setup.py"/>
+        <arg value="build"/>
+        <arg value="--build-base=${build.dir}"/>
+        <arg value="install"/>
       </exec>
     </target>
+
+    <target name="package" unless="skip.contrib">
+      <echo message="contrib: ${name}"/>
+
+      <mkdir dir="${build.dir}"/>
+      <copy todir="${build.dir}">
+        <fileset dir="${basedir}">
+          <exclude name="**/VERSION"/>
+        </fileset>
+      </copy>
+      <exec executable="echo" output="${build.dir}/VERSION">
+        <arg line="${version}" />
+      </exec>
+
+      <mkdir dir="${dist.dir}/contrib/${name}"/>
+      <copy todir="${dist.dir}/contrib/${name}">
+        <fileset dir="${build.dir}">
+          <exclude name="**/temp*"/>
+        </fileset>
+      </copy>
+    </target>
 </project>
 
