<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:59:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2573] Modify Info.REVISION to adapt git repo</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2573</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Modify &lt;tt&gt;org.apache.zookeeper.version.Info.REVISION&lt;/tt&gt; to store git repo revision&lt;br/&gt;
Currently &lt;tt&gt;org.apache.zookeeper.version.Info.REVISION&lt;/tt&gt; stores the svn repo revision which is of type int&lt;br/&gt;
But after migrating to git repo the git repo&apos;s revision(commit 63f5132716c08b3d8f18993bf98eb46eb42f80fb) can not be stored in this variable.&lt;br/&gt;
So either we should modify this variable to string to introduce new variable to store the git revision and leave the svn revision variable unchanged.&lt;br/&gt;
build.xml, and org.apache.zookeeper.version.util.VerGen also need to be modified. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13003857">ZOOKEEPER-2573</key>
            <summary>Modify Info.REVISION to adapt git repo</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="eribeiro">Edward Ribeiro</assignee>
                                    <reporter username="arshad.mohammad">Mohammad Arshad</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Sep 2016 13:35:48 +0000</created>
                <updated>Tue, 11 Apr 2017 22:45:59 +0000</updated>
                            <resolved>Wed, 25 Jan 2017 12:52:27 +0000</resolved>
                                    <version>3.4.9</version>
                    <version>3.5.2</version>
                                    <fixVersion>3.4.10</fixVersion>
                    <fixVersion>3.5.3</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>build</component>
                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15477313" author="arshad.mohammad" created="Fri, 9 Sep 2016 15:22:26 +0000"  >&lt;ol&gt;
	&lt;li&gt;shall we modify &lt;tt&gt;org.apache.zookeeper.version.Info.REVISION&lt;/tt&gt; from int to String and store the git revision in it&lt;br/&gt;
 or introduce new variable &lt;tt&gt;org.apache.zookeeper.version.Info.GIT_REVISION&lt;/tt&gt; for git revision?&lt;/li&gt;
	&lt;li&gt;I would prefer to modify it from int to String, if there is no backward compatibility concern. It is not an exposed interface, so backward compatibility should be a concern here.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Any thoughts ?&lt;/p&gt;</comment>
                            <comment id="15477316" author="phunt" created="Fri, 9 Sep 2016 15:23:01 +0000"  >&lt;p&gt;Perhaps we should simplify and just remove revision?&lt;/p&gt;</comment>
                            <comment id="15491473" author="arshad.mohammad" created="Wed, 14 Sep 2016 21:18:08 +0000"  >&lt;p&gt;revision gives very good information in analyzing whether a particular fix included in the build, specially in private builds. If we have option to remove this , we definitely have option to change it. I think it is better to change &lt;tt&gt;org.apache.zookeeper.version.Info.REVISION&lt;/tt&gt; from int to String and store the git revision.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;phunt&lt;/a&gt; shall I submit the patch for this?&lt;/p&gt;</comment>
                            <comment id="15713597" author="hanm" created="Fri, 2 Dec 2016 00:58:47 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think it is better to change org.apache.zookeeper.version.Info.REVISION from int to String and store the git revision.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 on the idea. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arshad.mohammad&quot; class=&quot;user-hover&quot; rel=&quot;arshad.mohammad&quot;&gt;arshad.mohammad&lt;/a&gt;, are you still interested working on a fix for this issue? If so, please go ahead and submit a pull request, so we can get this in for 3.5.3.&lt;/p&gt;</comment>
                            <comment id="15783312" author="githubbot" created="Wed, 28 Dec 2016 17:23:37 +0000"  >&lt;p&gt;GitHub user eribeiro opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;: Modify Info.REVISION to adapt git repo&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/eribeiro/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eribeiro/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #137&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c0c0daf3ebee0d280e592a0d262ffc0939f6f762&lt;br/&gt;
Author: Edward Ribeiro &amp;lt;edward.ribeiro@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-12-28T17:21:31Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;: Modify Info.REVISION to adapt git repo&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15783323" author="eribeiro" created="Wed, 28 Dec 2016 17:29:58 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arshad.mohammad&quot; class=&quot;user-hover&quot; rel=&quot;arshad.mohammad&quot;&gt;arshad.mohammad&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanm&quot; class=&quot;user-hover&quot; rel=&quot;hanm&quot;&gt;hanm&lt;/a&gt;, I hope you don&apos;t mind, but I decided to take a stab at this issue. I would be really glad if you could test it, mainly in a Windows env, that I don&apos;t have access. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;One minor issue I faced is that I think we could use the first 8 characters of the git SHA-1. On unix-like plataforms this is straighforward, just a matter of adding a call to &lt;tt&gt;cut&lt;/tt&gt; command as below: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;git rev-parse HEAD | cut -c1-8
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is that on Windows there&apos;s no equivalent to &lt;tt&gt;cut&lt;/tt&gt;, and it seemed cumbersome to add an equivalent. So, I left the full sha1 code as of now:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;git rev-parse HEAD
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;*&lt;b&gt;The patch is target at branch-3.4, but I was able to cherry-pick the commit to branch-3.5 and master&lt;/b&gt;*.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=breed&quot; class=&quot;user-hover&quot; rel=&quot;breed&quot;&gt;breed&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;phunt&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;fpj&lt;/a&gt;, could you also see if the patch is okay, please?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="15823820" author="githubbot" created="Mon, 16 Jan 2017 11:44:38 +0000"  >&lt;p&gt;Github user rakeshadr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96212537&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96212537&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/lastRevision.sh &amp;#8212;&lt;br/&gt;
    @@ -16,6 +16,6 @@&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Find the current revision, store it in a file&lt;br/&gt;
     FILE=$1&lt;br/&gt;
    -LASTREV=`svn info | grep &apos;^Revision&apos; | sed -e &apos;s/Revision: *//&apos;`&lt;br/&gt;
    +LASTREV=`git rev-parse HEAD | cut -c1-8`
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Thanks @eribeiro for the patch. Any specific reason to use only the first 8 characters of the git SHA-1. Will this be helpful in analyzing whether a particular fix included in the release?&lt;/p&gt;

&lt;p&gt;    How about keeping the complete SHA-1?&lt;/p&gt;</comment>
                            <comment id="15823877" author="githubbot" created="Mon, 16 Jan 2017 12:29:08 +0000"  >&lt;p&gt;Github user rakeshadr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96218924&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96218924&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/Version.java &amp;#8212;&lt;br/&gt;
    @@ -20,7 +20,7 @@&lt;/p&gt;

&lt;p&gt;     public class Version implements org.apache.zookeeper.version.Info {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static int getRevision() {&lt;br/&gt;
    +    public static String getRevision() {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Since this is not an exposed interface it is OK to change the signature. But, I&apos;m curious to know that any other project or users depending on the revision number.&lt;/p&gt;</comment>
                            <comment id="15823939" author="githubbot" created="Mon, 16 Jan 2017 13:08:56 +0000"  >&lt;p&gt;Github user eribeiro commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96225530&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96225530&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/lastRevision.sh &amp;#8212;&lt;br/&gt;
    @@ -16,6 +16,6 @@&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Find the current revision, store it in a file&lt;br/&gt;
     FILE=$1&lt;br/&gt;
    -LASTREV=`svn info | grep &apos;^Revision&apos; | sed -e &apos;s/Revision: *//&apos;`&lt;br/&gt;
    +LASTREV=`git rev-parse HEAD | cut -c1-8`
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Hi @rakeskadr, usually the first 8 characters of commit are enough to identify the commit.&lt;/p&gt;

&lt;p&gt;    But I think putting the whole SHA-1 is nice, because the more context the better. Also, it simplifies the code even more (to substr the sha1 is annoying on windows).&lt;/p&gt;

&lt;p&gt;    Thanks for pointing out!&lt;/p&gt;</comment>
                            <comment id="15823942" author="githubbot" created="Mon, 16 Jan 2017 13:10:27 +0000"  >&lt;p&gt;Github user eribeiro commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96225742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96225742&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/Version.java &amp;#8212;&lt;br/&gt;
    @@ -20,7 +20,7 @@&lt;/p&gt;

&lt;p&gt;     public class Version implements org.apache.zookeeper.version.Info {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static int getRevision() {&lt;br/&gt;
    +    public static String getRevision() {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Good question! Um... Maybe we should contact folks at Kafka, HBase and other projects for feedback? Anyone has a clue?&lt;/p&gt;</comment>
                            <comment id="15827356" author="githubbot" created="Wed, 18 Jan 2017 03:04:15 +0000"  >&lt;p&gt;Github user rakeshadr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96560053&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96560053&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/lastRevision.sh &amp;#8212;&lt;br/&gt;
    @@ -16,6 +16,6 @@&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Find the current revision, store it in a file&lt;br/&gt;
     FILE=$1&lt;br/&gt;
    -LASTREV=`svn info | grep &apos;^Revision&apos; | sed -e &apos;s/Revision: *//&apos;`&lt;br/&gt;
    +LASTREV=`git rev-parse HEAD | cut -c1-8`
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    @eribeiro, could you please update the patch accordingly.&lt;/p&gt;</comment>
                            <comment id="15827362" author="githubbot" created="Wed, 18 Jan 2017 03:14:54 +0000"  >&lt;p&gt;Github user eribeiro commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96560786&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96560786&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/lastRevision.sh &amp;#8212;&lt;br/&gt;
    @@ -16,6 +16,6 @@&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Find the current revision, store it in a file&lt;br/&gt;
     FILE=$1&lt;br/&gt;
    -LASTREV=`svn info | grep &apos;^Revision&apos; | sed -e &apos;s/Revision: *//&apos;`&lt;br/&gt;
    +LASTREV=`git rev-parse HEAD | cut -c1-8`
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;    Done.&lt;/p&gt;</comment>
                            <comment id="15828080" author="githubbot" created="Wed, 18 Jan 2017 13:48:03 +0000"  >&lt;p&gt;Github user eribeiro commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96636920&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96636920&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/Version.java &amp;#8212;&lt;br/&gt;
    @@ -20,7 +20,7 @@&lt;/p&gt;

&lt;p&gt;     public class Version implements org.apache.zookeeper.version.Info {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static int getRevision() {&lt;br/&gt;
    +    public static String getRevision() {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    @rakeshadr My Google searches didn&apos;t bring anything about external  ZK revision number use. Of course, many in-house systems can rely on it. So, I am clueless about the best strategy here. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    It would be quite annoying to break internal build tools, but this is an unfortunate side effect of a fundamental infra change (VCS). &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    @fpj wdyt?&lt;/p&gt;</comment>
                            <comment id="15828193" author="githubbot" created="Wed, 18 Jan 2017 14:44:38 +0000"  >&lt;p&gt;Github user rakeshadr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r96649084&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r96649084&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/Version.java &amp;#8212;&lt;br/&gt;
    @@ -20,7 +20,7 @@&lt;/p&gt;

&lt;p&gt;     public class Version implements org.apache.zookeeper.version.Info {&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public static int getRevision() {&lt;br/&gt;
    +    public static String getRevision() {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    I have checked with my HBase colleagues, they said no dependency with &quot;revision&quot;. From ZK point of view, not required to maintain backward compatibility as this is not exposed interface. Still, if any concerns, then we can deprecate and create a new GIT_REVISION or REVISION_HASH etc as this change will go to stable branch-3.4&lt;/p&gt;</comment>
                            <comment id="15828395" author="githubbot" created="Wed, 18 Jan 2017 16:56:39 +0000"  >&lt;p&gt;Github user eribeiro commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @rakeshadr I did a couple of changes, including the ones you suggested. Please, take a look whenever possible. Cheers!&lt;/p&gt;</comment>
                            <comment id="15833861" author="githubbot" created="Mon, 23 Jan 2017 03:26:08 +0000"  >&lt;p&gt;Github user arshadmohammad commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r97247778&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r97247778&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/lastRevision.bat &amp;#8212;&lt;br/&gt;
    @@ -16,8 +16,9 @@ rem See the License for the specific language governing permissions and&lt;br/&gt;
     rem limitations under the License.&lt;/p&gt;

&lt;p&gt;     rem Find the current revision, store it in a file, for DOS&lt;br/&gt;
    -svn info | findstr Revision &amp;gt; %1&lt;br/&gt;
    +git rev-parse HEAD &amp;gt; %1&lt;/p&gt;

&lt;p&gt;    -For /F &quot;tokens=1,2 delims= &quot; %%a In (%1) Do (&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo lastRevision=%%b&amp;gt; %1&lt;br/&gt;
    +For /F &quot;tokens=* delims= &quot; %%a In (%1) Do (
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This is not working. May be you can replace with all the script with following script:&lt;br/&gt;
    for /f &quot;delims=&quot; %%i in (&apos;git rev-parse HEAD&apos;) do set rev=%%i&lt;br/&gt;
    echo lastRevision=%rev% &amp;gt; %1&lt;/p&gt;</comment>
                            <comment id="15833863" author="githubbot" created="Mon, 23 Jan 2017 03:30:11 +0000"  >&lt;p&gt;Github user eribeiro commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137#discussion_r97248046&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137#discussion_r97248046&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/lastRevision.bat &amp;#8212;&lt;br/&gt;
    @@ -16,8 +16,9 @@ rem See the License for the specific language governing permissions and&lt;br/&gt;
     rem limitations under the License.&lt;/p&gt;

&lt;p&gt;     rem Find the current revision, store it in a file, for DOS&lt;br/&gt;
    -svn info | findstr Revision &amp;gt; %1&lt;br/&gt;
    +git rev-parse HEAD &amp;gt; %1&lt;/p&gt;

&lt;p&gt;    -For /F &quot;tokens=1,2 delims= &quot; %%a In (%1) Do (&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;echo lastRevision=%%b&amp;gt; %1&lt;br/&gt;
    +For /F &quot;tokens=* delims= &quot; %%a In (%1) Do (
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Thanks @arshadmohammad!&lt;/p&gt;

&lt;p&gt;    I was hoping for some committer/contributor with access to a Windows box to help me out with the BAT script. Did you test it?&lt;/p&gt;</comment>
                            <comment id="15833881" author="githubbot" created="Mon, 23 Jan 2017 04:12:54 +0000"  >&lt;p&gt;Github user rakeshadr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1 latest changes looks good to me. @hanm, @arshadmohammad, could you please pitch in and let me know your feedback on latest changes as you have reviewed earlier, Thanks!&lt;/p&gt;</comment>
                            <comment id="15835023" author="githubbot" created="Mon, 23 Jan 2017 18:41:04 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    lgtm, though I don&apos;t have a windows box to test changes on lastRevision.bat.&lt;/p&gt;</comment>
                            <comment id="15835103" author="githubbot" created="Mon, 23 Jan 2017 19:35:28 +0000"  >&lt;p&gt;Github user arshadmohammad commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I verified on windows. Other than one minor problem the current changes look good to me.&lt;br/&gt;
    commit hash is getting added with one extra space at the end.&lt;br/&gt;
    here is srvr command output&lt;br/&gt;
    -------------------------------------------------------&lt;br/&gt;
    Zookeeper version: 3.4.10-SNAPSHOT-3271f3d03d75c675ec1e466434eee0834cb9841a , built on 01/23/2017 19:11 GMT&lt;br/&gt;
    Latency min/avg/max: 0/1/31&lt;br/&gt;
    Received: 52&lt;br/&gt;
    Sent: 51&lt;br/&gt;
    Connections: 2&lt;br/&gt;
    Outstanding: 0&lt;br/&gt;
    Zxid: 0x1&lt;br/&gt;
    Mode: standalone&lt;br/&gt;
    Node count: 4&lt;br/&gt;
    ------------------------&lt;/p&gt;

&lt;p&gt;    There is space after 3271f3d03d75c675ec1e466434eee0834cb9841a&lt;/p&gt;


</comment>
                            <comment id="15835105" author="githubbot" created="Mon, 23 Jan 2017 19:38:52 +0000"  >&lt;p&gt;Github user arshadmohammad commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I think we should handle it in the VerGen. Can we trim and then assign the value to rev variable&lt;br/&gt;
    As:&lt;br/&gt;
    rev=rev.trim()&lt;/p&gt;</comment>
                            <comment id="15835139" author="githubbot" created="Mon, 23 Jan 2017 19:57:21 +0000"  >&lt;p&gt;Github user eribeiro commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @arshadmohammad, gonna do that.&lt;/p&gt;</comment>
                            <comment id="15835564" author="githubbot" created="Tue, 24 Jan 2017 02:47:36 +0000"  >&lt;p&gt;Github user rakeshadr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @eribeiro, Earlier with svn revision(integer value), if there is NFE while parsing arg&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; then it suppress this exception and returns -1. The outer try-catch block guards the from #parseVersionString() function. IIUC, that is reason for separate try-catch blocks.&lt;/p&gt;

&lt;p&gt;    Anyway, now with the git rev hash the inner try-catch block is not needed as we are dealing with String value. I could see you have removed the inner try-catch block, that looks OK to me. Still we need to maintain the outer try-catch block where it guards MAJ, MINOR, MICRO parsing, right?&lt;/p&gt;</comment>
                            <comment id="15835816" author="githubbot" created="Tue, 24 Jan 2017 07:58:59 +0000"  >&lt;p&gt;Github user eribeiro commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Right. Thanks for the explanation, @rakeshadr!&lt;/p&gt;</comment>
                            <comment id="15836198" author="githubbot" created="Tue, 24 Jan 2017 14:46:06 +0000"  >&lt;p&gt;Github user arshadmohammad commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @eribeiro  for working on this issue. &lt;br/&gt;
    LGTM +1&lt;/p&gt;</comment>
                            <comment id="15836208" author="githubbot" created="Tue, 24 Jan 2017 14:57:49 +0000"  >&lt;p&gt;Github user rakeshadr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @arshadmohammad, @hanm  for the reviews.&lt;/p&gt;

&lt;p&gt;    @eribeiro , it looks like &quot;build.xml&quot; changes has conflicts in branch-3.5 and master. Could you please create another pull request for committing your changes into branch-3.5 and master. I will commit both this PR and the new PR together. Thanks!&lt;/p&gt;</comment>
                            <comment id="15836409" author="githubbot" created="Tue, 24 Jan 2017 18:26:12 +0000"  >&lt;p&gt;GitHub user eribeiro opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;: Modify Info.REVISION to adapt git repo&lt;/p&gt;

&lt;p&gt;    @rakeshadr Hi, I have created this PR. The commit can be cherry picked on master too.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/eribeiro/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/eribeiro/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;-3.5&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #155&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7ca175dfadf5220a3495e3e19de4b933df37fc50&lt;br/&gt;
Author: Edward Ribeiro &amp;lt;edward.ribeiro@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-12-28T17:21:31Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;: Modify Info.REVISION to adapt git repo&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15836431" author="githubbot" created="Tue, 24 Jan 2017 18:30:14 +0000"  >&lt;p&gt;Github user eribeiro commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    HI @rakeshadr, I have just created a PR targeting branch-3.5 (&lt;a href=&quot;https://github.com/apache/zookeeper/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155&lt;/a&gt; ). It can be applied to master too. In fact, I was able to apply PR 155 to branch-3.4 so you may try to use it instead of this one, if you prefer. Otherwise you can squash and merge this one on branch-3.4 and 155 on branch-3.5 and master.&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;</comment>
                            <comment id="15837510" author="githubbot" created="Wed, 25 Jan 2017 10:06:13 +0000"  >&lt;p&gt;Github user rakeshadr commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155#discussion_r97743121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155#discussion_r97743121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/version/util/VerGen.java &amp;#8212;&lt;br/&gt;
    @@ -149,11 +150,9 @@ public static void main(String[] args) &lt;/p&gt;
{
                             &quot;Invalid version number format, must be \&quot;x.y.z(-.*)?\&quot;&quot;);
                     System.exit(1);
                 }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;int rev;&lt;/li&gt;
	&lt;li&gt;try 
{
    -                rev = Integer.parseInt(args[1]);
    -            }
&lt;p&gt; catch (NumberFormatException e) {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;rev = -1;&lt;br/&gt;
    +            String rev = args&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;;&lt;br/&gt;
    +            if (rev == null || rev.trim().isEmpty()) 
{
    +                rev = &quot;-1&quot;;
                 }
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Else block is missing. Could you add rev.trim() function.&lt;/p&gt;

</comment>
                            <comment id="15837523" author="githubbot" created="Wed, 25 Jan 2017 10:16:27 +0000"  >&lt;p&gt;Github user eribeiro commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155#discussion_r97746755&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155#discussion_r97746755&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/version/util/VerGen.java &amp;#8212;&lt;br/&gt;
    @@ -149,11 +150,9 @@ public static void main(String[] args) &lt;/p&gt;
{
                             &quot;Invalid version number format, must be \&quot;x.y.z(-.*)?\&quot;&quot;);
                     System.exit(1);
                 }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;int rev;&lt;/li&gt;
	&lt;li&gt;try 
{
    -                rev = Integer.parseInt(args[1]);
    -            }
&lt;p&gt; catch (NumberFormatException e) {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;rev = -1;&lt;br/&gt;
    +            String rev = args&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;;&lt;br/&gt;
    +            if (rev == null || rev.trim().isEmpty()) 
{
    +                rev = &quot;-1&quot;;
                 }
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Oh, really sorry about that. :disappointed: I squashed the commits from #137, but for whatever reason this latest change didn&apos;t make through. :thinking: Well, gonna change now. Thanks for pointing out! &lt;/p&gt;</comment>
                            <comment id="15837549" author="githubbot" created="Wed, 25 Jan 2017 10:34:55 +0000"  >&lt;p&gt;Github user rakeshadr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks @eribeiro.&lt;br/&gt;
    +1 LGTM, I will merge this shortly.&lt;/p&gt;</comment>
                            <comment id="15837567" author="githubbot" created="Wed, 25 Jan 2017 10:56:24 +0000"  >&lt;p&gt;Github user eribeiro commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for your patience and support @rakeshadr. &lt;/p&gt;

&lt;p&gt;    Indeed, I tried to `git apply` the patch: &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155.diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155.diff&lt;/a&gt; on branch-3.4 and it failed as you wrote before. :disappointed:&lt;/p&gt;

&lt;p&gt;    *&lt;b&gt;Oddly enough&lt;/b&gt;*, if I apply this patch to master or branch-3.5 (`git apply 155.diff`) then switched to branch-3.4 the did a `git cherry-pick &amp;lt;commit&amp;gt;` and it worked. But I am suspicious if this was okay (I did a quick test here now).&lt;/p&gt;

</comment>
                            <comment id="15837623" author="githubbot" created="Wed, 25 Jan 2017 12:04:17 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/155&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/155&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15837643" author="githubbot" created="Wed, 25 Jan 2017 12:28:06 +0000"  >&lt;p&gt;Github user rakeshadr commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @eribeiro, I have cherry picked the changes to branch-3.4 using #155 pull request. Could you please verify the branch-3.4 changes once and close this PR. Thanks!&lt;/p&gt;</comment>
                            <comment id="15837646" author="rakeshr" created="Wed, 25 Jan 2017 12:32:17 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;eribeiro&lt;/a&gt; for the contribution. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanm&quot; class=&quot;user-hover&quot; rel=&quot;hanm&quot;&gt;hanm&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arshad.mohammad&quot; class=&quot;user-hover&quot; rel=&quot;arshad.mohammad&quot;&gt;arshad.mohammad&lt;/a&gt; for the reviews.&lt;/p&gt;

&lt;p&gt;Committed to branch-3.4:&lt;br/&gt;
&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=zookeeper.git;a=commit;h=d6bbfd76d24c044073764c5d074a9198c69fafab&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=zookeeper.git;a=commit;h=d6bbfd76d24c044073764c5d074a9198c69fafab&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Committed to branch-3.5:&lt;br/&gt;
&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=zookeeper.git;a=commit;h=41da3c8e3c39f81aa0f667199c5f4eb3d5a28adc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=zookeeper.git;a=commit;h=41da3c8e3c39f81aa0f667199c5f4eb3d5a28adc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Committed to master:&lt;br/&gt;
&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=zookeeper.git;a=commit;h=8771ffdaacb87126a485ae740558f6a288ab980b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=zookeeper.git;a=commit;h=8771ffdaacb87126a485ae740558f6a288ab980b&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15837671" author="hudson" created="Wed, 25 Jan 2017 12:43:56 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #3250 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3250/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3250/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;: Modify Info.REVISION to adapt git repo (rakeshr: rev 8771ffdaacb87126a485ae740558f6a288ab980b)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/lastRevision.bat&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/Version.java&lt;/li&gt;
	&lt;li&gt;(edit) build.xml&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/version/util/VerGen.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/VerGenTest.java&lt;/li&gt;
	&lt;li&gt;(edit) src/lastRevision.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15837672" author="githubbot" created="Wed, 25 Jan 2017 12:43:59 +0000"  >&lt;p&gt;Github user eribeiro commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @rakeshadr Sure! Doing it right now! Thanks! :+1: &lt;/p&gt;</comment>
                            <comment id="15837686" author="githubbot" created="Wed, 25 Jan 2017 12:52:04 +0000"  >&lt;p&gt;Github user eribeiro closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/137&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15965045" author="githubbot" created="Tue, 11 Apr 2017 22:26:45 +0000"  >&lt;p&gt;GitHub user hanm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/224&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/224&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;: Introduce a python script that generates flaky tests report.&lt;/p&gt;

&lt;p&gt;    The script is self explaining, here are some notes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;The original work is done by Appy at Cloudera HBase team.&lt;/li&gt;
	&lt;li&gt;The script is customized to fit ZooKeeper&apos;s use cases, in particular ZooKeeper allows duplicate test runs, unlike HBase. For example same test could be run three times, one by the test itself, one by Netty test suite, and one by NIO test suite. Script is updated to account for this factor when processing and analyzing test results.&lt;/li&gt;
	&lt;li&gt;There will be an Apache Jenkins job set up to run this script on regular basis and publish results dashboard somewhere publicly accessible. For a preview of the dashboard, see &lt;a href=&quot;http://home.apache.org/~hanm/dashboard/report.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://home.apache.org/~hanm/dashboard/report.html&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hanm/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hanm/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/224.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/224.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #224&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8ef788a5d38e32b333a08e0cf1bf6a9d7fbaa013&lt;br/&gt;
Author: Michael Han &amp;lt;hanm@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-04-11T22:21:07Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2573&quot; title=&quot;Modify Info.REVISION to adapt git repo&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2573&quot;&gt;&lt;del&gt;ZOOKEEPER-2573&lt;/del&gt;&lt;/a&gt;: Introduce a python script for generating flaky test report.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15965052" author="hanm" created="Tue, 11 Apr 2017 22:30:48 +0000"  >&lt;p&gt;please ignore the previous posts by bot ^ - the pull request accidentally used wrong JIRA number.&lt;/p&gt;</comment>
                            <comment id="15965071" author="hadoopqa" created="Tue, 11 Apr 2017 22:45:59 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/536//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/536//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/536//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/536//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/536//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/536//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33fyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>After the migration of ZooKeeper&amp;#39;s version control system from &amp;#39;svn repo&amp;#39; to &amp;#39;apache git repo&amp;#39; the revision info becomes git&amp;#39;s SHA-1 hash value.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>