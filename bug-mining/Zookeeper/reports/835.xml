<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:00:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2872] Interrupted snapshot sync causes data loss</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2872</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;There is a way for observers to permanently lose data from their local data tree while remaining members of good standing with the ensemble and continuing to serve client traffic when the following chain of events occurs.&lt;/p&gt;

&lt;p&gt;1. The observer dies in epoch N from machine failure.&lt;br/&gt;
2. The observer comes back up in epoch N+1 and requests a snapshot sync to catch up.&lt;br/&gt;
3. The machine powers off before the snapshot is synced to disc and after some txn&apos;s have been logged (depending on the OS, this can happen!).&lt;br/&gt;
4. The observer comes back a second time and replays its most recent snapshot (epoch &amp;lt;= N) as well as the txn logs (epoch N+1). &lt;br/&gt;
5. A diff sync is requested from the leader and the observer broadcasts availability.&lt;/p&gt;

&lt;p&gt;In this scenario, any commits from epoch N that the observer did not receive before it died the first time will never be exposed to the observer and no part of the ensemble will complain. &lt;/p&gt;

&lt;p&gt;This situation is not unique to observers and can happen to any learner. As a simple fix, fsync-ing the snapshots received from the leader will avoid the case of missing snapshots causing data loss.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13093873">ZOOKEEPER-2872</key>
            <summary>Interrupted snapshot sync causes data loss</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="enixon">Brian Nixon</assignee>
                                    <reporter username="enixon">Brian Nixon</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 10 Aug 2017 18:07:29 +0000</created>
                <updated>Mon, 3 Jan 2022 04:49:16 +0000</updated>
                            <resolved>Thu, 11 Feb 2021 19:19:12 +0000</resolved>
                                    <version>3.4.10</version>
                    <version>3.5.3</version>
                    <version>3.6.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16122076" author="githubbot" created="Thu, 10 Aug 2017 18:41:21 +0000"  >&lt;p&gt;GitHub user enixon opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2872&quot; title=&quot;Interrupted snapshot sync causes data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2872&quot;&gt;&lt;del&gt;ZOOKEEPER-2872&lt;/del&gt;&lt;/a&gt;: Interrupted snapshot sync causes data loss&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/enixon/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/enixon/zookeeper&lt;/a&gt; snap-sync&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #333&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 39bd1a3eb9171a014845fff97648341cbfb40a11&lt;br/&gt;
Author: Brian Nixon &amp;lt;nixon@fb.com&amp;gt;&lt;br/&gt;
Date:   2017-08-01T20:25:51Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2872&quot; title=&quot;Interrupted snapshot sync causes data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2872&quot;&gt;&lt;del&gt;ZOOKEEPER-2872&lt;/del&gt;&lt;/a&gt;: Interrupted snapshot sync causes data loss&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16122093" author="hadoopqa" created="Thu, 10 Aug 2017 18:50:35 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/937//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/937//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/937//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/937//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/937//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/937//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16122615" author="githubbot" created="Fri, 11 Aug 2017 00:44:19 +0000"  >&lt;p&gt;Github user enixon commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    AtomicFileOutputStream performs an fsync when the stream is closed with the following.&lt;br/&gt;
    &quot;((FileOutputStream) out).getFD().sync();&quot;&lt;/p&gt;
</comment>
                            <comment id="16122684" author="hadoopqa" created="Fri, 11 Aug 2017 01:53:44 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/938//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/938//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/938//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/938//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/938//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/938//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16123755" author="hadoopqa" created="Fri, 11 Aug 2017 18:01:21 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/939//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/939//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/939//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/939//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/939//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/939//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16124802" author="githubbot" created="Sun, 13 Aug 2017 05:15:56 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I am now wondering why we should not fsync snapshot taking at all cases. It seems to be a useful property to have for snapshot serialization, and will make code simpler. Any performance considerations that lead to the conclusion of only applying fsync snapshot when it&apos;s a SNAP sync?&lt;/p&gt;</comment>
                            <comment id="16124803" author="githubbot" created="Sun, 13 Aug 2017 05:19:14 +0000"  >&lt;p&gt;Github user hanm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333#discussion_r132832594&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333#discussion_r132832594&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/quorum/Learner.java &amp;#8212;&lt;br/&gt;
    @@ -364,6 +364,7 @@ protected void syncWithLeader(long newLeaderZxid) throws Exception{&lt;br/&gt;
             readPacket(qp);&lt;br/&gt;
             LinkedList&amp;lt;Long&amp;gt; packetsCommitted = new LinkedList&amp;lt;Long&amp;gt;();&lt;br/&gt;
             LinkedList&amp;lt;PacketInFlight&amp;gt; packetsNotCommitted = new LinkedList&amp;lt;PacketInFlight&amp;gt;();&lt;br/&gt;
    +        boolean syncSnapshot = false;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    We can level this variable definition up so it&apos;s clustered with `snapshotNeed` boolean.&lt;/p&gt;

&lt;p&gt;    Another possibility is to get ride of this variable and use existing `snapshotNeeded` - but that will do fysnc snapshot for TRUNC sync, which the existing patch will not. &lt;/p&gt;</comment>
                            <comment id="16124805" author="githubbot" created="Sun, 13 Aug 2017 05:19:45 +0000"  >&lt;p&gt;Github user hanm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333#discussion_r132832602&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333#discussion_r132832602&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/quorum/Learner.java &amp;#8212;&lt;br/&gt;
    @@ -364,6 +364,7 @@ protected void syncWithLeader(long newLeaderZxid) throws Exception{&lt;br/&gt;
             readPacket(qp);&lt;br/&gt;
             LinkedList&amp;lt;Long&amp;gt; packetsCommitted = new LinkedList&amp;lt;Long&amp;gt;();&lt;br/&gt;
             LinkedList&amp;lt;PacketInFlight&amp;gt; packetsNotCommitted = new LinkedList&amp;lt;PacketInFlight&amp;gt;();&lt;br/&gt;
    +        boolean syncSnapshot = false;&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    Another possibility as I just commented is to get rid of this variable and always Fsync snapshot serialization.&lt;/p&gt;</comment>
                            <comment id="16129963" author="githubbot" created="Thu, 17 Aug 2017 05:46:11 +0000"  >&lt;p&gt;Github user enixon commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    We contemplated doing an fsync for every snapshot and decided against. You&apos;re taking a guaranteed io spike each time. That&apos;s fine when you&apos;re just syncing with the quorum but during normal operation, it seems best to keep snapshot taking a lighter weight operation.&lt;/p&gt;</comment>
                            <comment id="16129973" author="hadoopqa" created="Thu, 17 Aug 2017 06:02:22 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/942//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/942//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/942//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/942//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/942//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/942//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16130996" author="githubbot" created="Thu, 17 Aug 2017 18:48:08 +0000"  >&lt;p&gt;Github user enixon commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I am unable to reproduce the test failure in Zab1_0Test&lt;/p&gt;</comment>
                            <comment id="16131683" author="githubbot" created="Fri, 18 Aug 2017 04:02:40 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt; it seems best to keep snapshot taking a lighter weight operation.&lt;/p&gt;

&lt;p&gt;    Sounds reasonable.&lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt; I am unable to reproduce the test failure in Zab1_0Test&lt;/p&gt;

&lt;p&gt;    I think it&apos;s a flaky test. Filed &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2877&quot; title=&quot;Flaky Test: org.apache.zookeeper.server.quorum.Zab1_0Test.testNormalRun&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2877&quot;&gt;ZOOKEEPER-2877&lt;/a&gt; for this.&lt;/p&gt;</comment>
                            <comment id="16131702" author="githubbot" created="Fri, 18 Aug 2017 04:33:05 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16131705" author="githubbot" created="Fri, 18 Aug 2017 04:36:10 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Committed to master: 0706b40afad079f19fe9f76c99bbb7ec69780dbd&lt;/p&gt;

&lt;p&gt;    Pending JIRA resolve after fixing merge conflicts and commit into branch-3.4 and 3.5.&lt;/p&gt;</comment>
                            <comment id="16131747" author="hudson" created="Fri, 18 Aug 2017 05:35:25 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #3503 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3503/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3503/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2872&quot; title=&quot;Interrupted snapshot sync causes data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2872&quot;&gt;&lt;del&gt;ZOOKEEPER-2872&lt;/del&gt;&lt;/a&gt;: Interrupted snapshot sync causes data loss (hanm: rev 0706b40afad079f19fe9f76c99bbb7ec69780dbd)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/server/quorum/Zab1_0Test.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/test/TruncateTest.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/quorum/Learner.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/persistence/SnapShot.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/persistence/FileSnap.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/ZooKeeperServer.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/persistence/FileTxnSnapLog.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16729136" author="nixon" created="Wed, 26 Dec 2018 18:42:45 +0000"  >&lt;p&gt;Now that the patch is merged, was there any further work here?&lt;/p&gt;</comment>
                            <comment id="17282584" author="mrkvm" created="Wed, 10 Feb 2021 17:16:49 +0000"  >&lt;p&gt;Does the fix for this issue supersede the patch provided for the similar issue in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2310&quot; title=&quot;Snapshot files must be synced to prevent inconsistency or data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2310&quot;&gt;&lt;del&gt;ZOOKEEPER-2310&lt;/del&gt;&lt;/a&gt;? I&apos;m working on updating an internal version of ZK at my company to the 3.6.2 release, and we had previously applied that patch, but I&apos;m hoping we can do away with it in favor of this work.&lt;/p&gt;</comment>
                            <comment id="17283312" author="nixon" created="Thu, 11 Feb 2021 19:17:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mrkvm&quot; class=&quot;user-hover&quot; rel=&quot;mrkvm&quot;&gt;mrkvm&lt;/a&gt;, looking over &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2310&quot; title=&quot;Snapshot files must be synced to prevent inconsistency or data loss&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2310&quot;&gt;&lt;del&gt;ZOOKEEPER-2310&lt;/del&gt;&lt;/a&gt; it&apos;s my opinion that the patch submitted here suffices to cover both issues. I&apos;ll update the tickets accordingly.&lt;/p&gt;</comment>
                            <comment id="17283313" author="mrkvm" created="Thu, 11 Feb 2021 19:19:55 +0000"  >&lt;p&gt;Great, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=enixon&quot; class=&quot;user-hover&quot; rel=&quot;enixon&quot;&gt;enixon&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="12909478">ZOOKEEPER-2310</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13419975">ZOOKEEPER-4433</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3inmv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>