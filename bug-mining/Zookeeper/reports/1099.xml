<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:04:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2108] Compilation error in ZkAdaptor.cc with GCC 4.7 or later</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2108</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Debian and Fedora have a patch fixing a compilation failure in ZkAdaptor.cc but it doesn&apos;t appear to be fixed in the upcoming version 3.5.0. This issue is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-470&quot; title=&quot;include unistd.h for sleep() in c tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-470&quot;&gt;&lt;del&gt;ZOOKEEPER-470&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1795&quot; title=&quot;unable to build c client on ubuntu&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1795&quot;&gt;&lt;del&gt;ZOOKEEPER-1795&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The error is :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;g++ -DHAVE_CONFIG_H -I. -I..   -D_FORTIFY_SOURCE=2 -I/home/ebourg/packaging/zookeeper/src/contrib/zktreeutil/../../c/include -I/home/ebourg/packaging/zookeeper/src/contrib/zktreeutil/../../c/generated -I../include -I/usr/local/include -I/usr/include -I/usr/include/libxml2 -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -MT ZkAdaptor.o -MD -MP -MF .deps/ZkAdaptor.Tpo -c -o ZkAdaptor.o ZkAdaptor.cc
ZkAdaptor.cc: In member function &#8216;void zktreeutil::ZooKeeperAdapter::reconnect()&#8217;:
ZkAdaptor.cc:220:21: error: &#8216;sleep&#8217; was not declared in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; scope
             sleep (1);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is fixed by including unistd.h in ZkAdaptor.cc or  ZkAdaptor.h&lt;/p&gt;

&lt;p&gt;The Debian patch:&lt;br/&gt;
&lt;a href=&quot;https://sources.debian.net/src/zookeeper/3.4.5%2Bdfsg-2/debian/patches/ftbfs-gcc-4.7.diff/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sources.debian.net/src/zookeeper/3.4.5%2Bdfsg-2/debian/patches/ftbfs-gcc-4.7.diff/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;and the Fedora patch:&lt;br/&gt;
&lt;a href=&quot;http://pkgs.fedoraproject.org/cgit/zookeeper.git/tree/zookeeper-3.4.5-zktreeutil-gcc.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pkgs.fedoraproject.org/cgit/zookeeper.git/tree/zookeeper-3.4.5-zktreeutil-gcc.patch&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12770070">ZOOKEEPER-2108</key>
            <summary>Compilation error in ZkAdaptor.cc with GCC 4.7 or later</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ebourg">Emmanuel Bourg</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 26 Jan 2015 12:19:14 +0000</created>
                <updated>Fri, 4 Aug 2023 11:28:33 +0000</updated>
                            <resolved>Wed, 4 May 2022 14:50:21 +0000</resolved>
                                    <version>3.4.6</version>
                                    <fixVersion>3.9.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="16949529" author="rajsura" created="Fri, 11 Oct 2019 15:02:40 +0000"  >&lt;p&gt;Yes, this still does exist in 3.5.5 branch too. Also, apart from that I am encountering additional issue as below:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have used multiple versions of GCC and the issue exists in both the cases (gcc-4.8.5 and gcc-7.3.1).&lt;/p&gt;

&lt;p&gt;I have followed the instructions given in README.txt. Also, due to restructuring in 3.5.5, I had to update ZOOKEEPER_PATH in configure.ac as below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
# Zookeeper C client
ZOOKEEPER_PATH=${BUILD_PATH}/../../zookeeper-client/zookeeper-client-c
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I am encountering these errors during &quot;make&quot; phase:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ make
make all-recursive
make[1]: Entering directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/bar2/zookeeper-3.5.5-SNAPSHOT/zookeeper-contrib/zookeeper-contrib-zktreeutil&apos;&lt;/span&gt;
Making all in src
make[2]: Entering directory &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/bar2/zookeeper-3.5.5-SNAPSHOT/zookeeper-contrib/zookeeper-contrib-zktreeutil/src&apos;&lt;/span&gt;
g++ -DHAVE_CONFIG_H -I. -I.. -I/tmp/bar2/zookeeper-3.5.5-SNAPSHOT/zookeeper-contrib/zookeeper-contrib-zktreeutil/../../zookeeper-client/zookeeper-client-c/include -I/tmp/bar2/zookeeper-3.5.5-SNAPSHOT/zookeeper-contrib/zookeeper-contri
b-zktreeutil/../../zookeeper-client/zookeeper-client-c/generated -I../include -I/usr/local/include -I/usr/include -I/usr/include/libxml2 -g -O2 -MT ZkAdaptor.o -MD -MP -MF .deps/ZkAdaptor.Tpo -c -o ZkAdaptor.o ZkAdaptor.cc
ZkAdaptor.cc: In member function &#8216;bool zktreeutil::ZooKeeperAdapter::createNode(&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; string&amp;amp;, &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; string&amp;amp;, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, bool)&#8217;:
ZkAdaptor.cc:276:18: error: &#8216;zoo_create&#8217; was not declared in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; scope
 rc = zoo_create( mp_zkHandle,
 ^~~~~~~~~~
ZkAdaptor.cc:276:18: note: suggested alternative: &#8216;zoo_create&#8217;
 rc = zoo_create( mp_zkHandle,
 ^~~~~~~~~~
 zoo_create
ZkAdaptor.cc: At global scope:
ZkAdaptor.cc:334:26: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; version) &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt;(ZooKeeperException)
 ^~~~~
ZkAdaptor.cc: In member function &#8216;bool zktreeutil::ZooKeeperAdapter::deleteNode(&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; string&amp;amp;, bool, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;)&#8217;:
ZkAdaptor.cc:344:18: error: &#8216;zoo_delete&#8217; was not declared in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; scope
 rc = zoo_delete( mp_zkHandle, path.c_str(), version );
 ^~~~~~~~~~
ZkAdaptor.cc:344:18: note: suggested alternative: &#8216;zoo_delete&#8217;
 rc = zoo_delete( mp_zkHandle, path.c_str(), version );
 ^~~~~~~~~~
 zoo_delete
ZkAdaptor.cc: At global scope:
ZkAdaptor.cc:383:77: warning: dynamic exception specifications are deprecated in C++11 [-Wdeprecated]
 vector&amp;lt; string &amp;gt; ZooKeeperAdapter::getNodeChildren (&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; string &amp;amp;path) &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; (ZooKeeperException)
 ^~~~~
ZkAdaptor.cc: In member function &#8216;std::vector&amp;lt;std::basic_string&amp;lt;&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;&amp;gt; &amp;gt; zktreeutil::ZooKeeperAdapter::getNodeChildren(&lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; string&amp;amp;)&#8217;:
ZkAdaptor.cc:395:18: error: &#8216;zoo_get_children&#8217; was not declared in &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; scope
 rc = zoo_get_children( mp_zkHandle,
 ^~~~~~~~~~~~~~~~
ZkAdaptor.cc:395:18: note: suggested alternative: &#8216;zoo_get_children&#8217;
 rc = zoo_get_children( mp_zkHandle,
 ^~~~~~~~~~~~~~~~
 zoo_get_children
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Its weird because, &quot;zookeeper.h&quot; is accessible and these are still defined in there.&lt;/p&gt;

&lt;p&gt;Am I missing something here? Thanks!&lt;/p&gt;</comment>
                            <comment id="17531761" author="symat" created="Wed, 4 May 2022 14:50:21 +0000"  >&lt;p&gt;Issue resolved by pull request 1870&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/1870&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/1870&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 27 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24sov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>