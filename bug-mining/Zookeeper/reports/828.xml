<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:00:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2841] ZooKeeper public include files leak porting changes</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2841</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;The fundamental problem is that the port of the C client to Windows is now close to six years old, with very few updates. This port leaks a lot of changes that should be internal to ZooKeeper, and many of those changes are simply no longer relevant. The correct thing to do is attempt to refactor the Windows port for new versions of ZooKeeper, removing dead/unneeded porting code, and moving dangerous porting code to C files instead of public headers.&lt;/p&gt;

&lt;p&gt;Two primary examples of this problem are &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2491&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;ZOOKEEPER-2491&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/MESOS-7541&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;MESOS-7541&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The first issue stems from this ancient porting code:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#define snprintf _snprintf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; in &lt;a href=&quot;https://github.com/apache/zookeeper/blob/ddf0364903bf7ac7cd25b2e1927f0d9d3c7203c4/src/c/include/winconfig.h#L179&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;winconfig.h&lt;/a&gt;. Newer versions of Windows C libraries define &lt;tt&gt;snprintf&lt;/tt&gt; as a function, and so it cannot be redefined.&lt;/p&gt;

&lt;p&gt;The second issue comes from this undocumented change:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#undef AF_INET6
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;again in &lt;a href=&quot;https://github.com/apache/zookeeper/blob/ddf0364903bf7ac7cd25b2e1927f0d9d3c7203c4/src/c/include/winconfig.h#L169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;winconfig.h&lt;/a&gt; which breaks any library that uses IPv6 and &lt;tt&gt;winsock2.h&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Furthermore, the inclusion of the following defines and headers causes terrible problems for consuming libraries, as they leak into ZooKeeper&apos;s public headers:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#define _CRT_SECURE_NO_WARNINGS
#define WIN32_LEAN_AND_MEAN
#include &amp;lt;Windows.h&amp;gt;
#include &amp;lt;Winsock2.h&amp;gt;
#include &amp;lt;winstdint.h&amp;gt;
#include &amp;lt;process.h&amp;gt;
#include &amp;lt;ws2tcpip.h&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Depending on the order that a project includes or compiles files, this may or may not cause &lt;tt&gt;WIN32_LEAN_AND_MEAN&lt;/tt&gt; to become unexpectedly defined, and &lt;tt&gt;windows.h&lt;/tt&gt; to be unexpectedly included. This problem is exacberated by the fact that the &lt;tt&gt;winsock2.h&lt;/tt&gt; and &lt;tt&gt;windows.h&lt;/tt&gt; headers are order-dependent (if you read up on this, you&apos;ll see that defining &lt;tt&gt;WIN32_LEAN_AND_MEAN&lt;/tt&gt; was meant to work-around this).&lt;/p&gt;

&lt;p&gt;Going forward, porting changes should live next to where they are used, preferably in source files, not header files, so they remain contained.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10 with Visual Studio 2017&lt;/p&gt;</environment>
        <key id="13085619">ZOOKEEPER-2841</key>
            <summary>ZooKeeper public include files leak porting changes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andschwa">Andrew Schwartzmeyer</assignee>
                                    <reporter username="andschwa">Andrew Schwartzmeyer</reporter>
                        <labels>
                            <label>windows</label>
                    </labels>
                <created>Fri, 7 Jul 2017 22:48:30 +0000</created>
                <updated>Tue, 1 Aug 2017 17:34:19 +0000</updated>
                            <resolved>Tue, 1 Aug 2017 15:48:53 +0000</resolved>
                                                    <fixVersion>3.4.11</fixVersion>
                    <fixVersion>3.5.4</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>c client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16078807" author="githubbot" created="Fri, 7 Jul 2017 22:56:17 +0000"  >&lt;p&gt;GitHub user andschwa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;: ZooKeeper public include files leak porting changes&lt;/p&gt;

&lt;p&gt;    This PR includes the patches &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; title=&quot;Add CMake build system for better cross-platform support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2756&quot;&gt;&lt;del&gt;ZOOKEEPER-2756&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&lt;/a&gt;) and &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&lt;/a&gt;), and can supplant PR #255.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andschwa/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andschwa/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #306&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 187ce8acc1707a0dd20752b624a3fa5648706f97&lt;br/&gt;
Author: Andrew Schwartzmeyer &amp;lt;andrew@schwartzmeyer.com&amp;gt;&lt;br/&gt;
Date:   2017-04-10T23:12:40Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; title=&quot;Add CMake build system for better cross-platform support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2756&quot;&gt;&lt;del&gt;ZOOKEEPER-2756&lt;/del&gt;&lt;/a&gt;: Add CMake build system for better cross-platform support&lt;/p&gt;

&lt;p&gt;    This notably lacks Solaris and libtool support.&lt;/p&gt;

&lt;p&gt;    Almost everything else from Autotools has been ported,&lt;br/&gt;
    including header/function/library checks, and all targets&lt;br/&gt;
    (zookeeper, hashtable, cli, load_gen, and tests).&lt;/p&gt;

&lt;p&gt;    Both Linux and Windows are supported.&lt;/p&gt;

&lt;p&gt;    The primary work involved (other than the writing of `CMakeLists.txt`)&lt;br/&gt;
    was transitioning the hand-written `winconfig.h` to an&lt;br/&gt;
    auto-generated `config.h` file, and guarding code with `#ifdef&lt;br/&gt;
    HAVE_FEATURE`. The `cmake_config.h.in` template was modeled after&lt;br/&gt;
    the Autotools config file so that the feature guards share the same&lt;br/&gt;
    names.&lt;/p&gt;

&lt;p&gt;    While `load_gen.c` looks at first glance as if it were ported to Windows,&lt;br/&gt;
    it never actually was, so the erroneous `#include &quot;win32port.h&quot;` was&lt;br/&gt;
    removed, and the target is not built on Windows.&lt;/p&gt;

&lt;p&gt;    There are existent warnings which this patch did not attempt to fix.&lt;/p&gt;

&lt;p&gt;    A guard was placed around `#define snprintf` in order to enable&lt;br/&gt;
    compiling with modern versions of MSVC.&lt;/p&gt;

&lt;p&gt;    Fixed DLL_EXPORT and USE_STATIC_LIB redefinition.&lt;/p&gt;

&lt;p&gt;    As this commit deprecates (and breaks) the previously existing Visual&lt;br/&gt;
    Studio solutions and projects, they&apos;ve been removed.&lt;/p&gt;

&lt;p&gt;    Building tests on Windows is still not supported.&lt;/p&gt;

&lt;p&gt;commit 22a378ae2a7c30657326b6a602b62116ab7c050a&lt;br/&gt;
Author: Andrew Schwartzmeyer &amp;lt;andrew@schwartzmeyer.com&amp;gt;&lt;br/&gt;
Date:   2017-07-07T22:35:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;: ZooKeeper public include files leak porting changes&lt;/p&gt;

&lt;p&gt;    This patch refactors the Windows port of the C client. Notably, it moves&lt;br/&gt;
    as much porting code as possible out of the publicly included&lt;br/&gt;
    `winconfig.h` header and into the relevant source files. This also&lt;br/&gt;
    removes `winstdint.h` as it has been replaced by `&amp;lt;stdint.h&amp;gt;`. It fixes&lt;br/&gt;
    problems for upstream libraries by removing `#undef AF_INET6` and&lt;br/&gt;
    `#include &amp;lt;windows.h&amp;gt;`.&lt;/p&gt;

&lt;p&gt;    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially&lt;br/&gt;
    remove `include/winconfig.h` altogether.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16078814" author="hadoopqa" created="Fri, 7 Jul 2017 23:08:32 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16078885" author="githubbot" created="Sat, 8 Jul 2017 01:19:32 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Is this &lt;span class=&quot;error&quot;&gt;&amp;#91;failing test&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870/testReport/org.apache.zookeeper.server.quorum/ReconfigDuringLeaderSyncTest/testDuringLeaderSync/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/870/testReport/org.apache.zookeeper.server.quorum/ReconfigDuringLeaderSyncTest/testDuringLeaderSync/&lt;/a&gt;) my fault? It&apos;s... odd.&lt;/p&gt;</comment>
                            <comment id="16078937" author="githubbot" created="Sat, 8 Jul 2017 03:58:40 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm I&apos;m not sure how you guys like to do dependent patches. &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; title=&quot;Add CMake build system for better cross-platform support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2756&quot;&gt;&lt;del&gt;ZOOKEEPER-2756&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt; should both be taken to resolve problems using the C client in other projects (e.g. Mesos &#128521;), and the latter depends on the former. I&apos;ve confirmed that 2756 (first commit) allows us to build with Visual Studio 2017 (and on Linux, because CMake!), and that 2841 (second commit) resolves &lt;a href=&quot;https://issues.apache.org/jira/browse/MESOS-7541&quot; title=&quot;Cannot compile without pre-compiled headers on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MESOS-7541&quot;&gt;&lt;del&gt;MESOS-7541&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/MESOS-7541&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MESOS-7541&lt;/a&gt;), and should eliminate a lot of problems that projects which include ZooKeeper headers can encounter on Windows. That said, the two patches are clearly two very separate pieces of work.&lt;/p&gt;</comment>
                            <comment id="16079321" author="githubbot" created="Sat, 8 Jul 2017 21:26:59 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt; Is this failing test my fault? It&apos;s... odd.&lt;/p&gt;

&lt;p&gt;    No it&apos;s not your fault. This is a known flaky test, and I will have a patch for this soon.&lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt; I&apos;m not sure how you guys like to do dependent patches. &lt;/p&gt;

&lt;p&gt;    It&apos;s OK to include &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;  in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; title=&quot;Add CMake build system for better cross-platform support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2756&quot;&gt;&lt;del&gt;ZOOKEEPER-2756&lt;/del&gt;&lt;/a&gt;; otherwise it might take years to get the improvement in because the lack of love on the C client. While we are at this, let&apos;s get both in. &lt;/p&gt;</comment>
                            <comment id="16079334" author="githubbot" created="Sat, 8 Jul 2017 21:50:25 +0000"  >&lt;p&gt;Github user hanm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306#discussion_r126290847&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306#discussion_r126290847&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/c/CMakeLists.txt &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,220 @@&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +&lt;br/&gt;
    +cmake_minimum_required(VERSION 3.6)&lt;br/&gt;
    +&lt;br/&gt;
    +project(zookeeper VERSION 3.5.2)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    The version here should be 3.5.3. I think you got 3.5.2 because when you start working on this, 3.5.3 was not released. &lt;/p&gt;</comment>
                            <comment id="16079336" author="githubbot" created="Sat, 8 Jul 2017 21:52:57 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm Awesome! The patches seem to be working well, and I think we don&apos;t need to worry about maintaining compatibility with, say, Visual Studio 2008, in new versions of the ZooKeeper client. Old versions of the client are still available for those in need, and it&apos;s more important that current versions of VS/MSVC are supported.&lt;/p&gt;

&lt;p&gt;    Thanks for your help in this!&lt;/p&gt;</comment>
                            <comment id="16079338" author="githubbot" created="Sat, 8 Jul 2017 21:53:27 +0000"  >&lt;p&gt;Github user hanm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306#discussion_r126290881&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306#discussion_r126290881&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/c/include/winconfig.h &amp;#8212;&lt;br/&gt;
    @@ -1,196 +1,15 @@&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;arpa/inet.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_ARPA_INET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;dlfcn.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_DLFCN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;fcntl.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_FCNTL_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.c&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.h&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getcwd&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETCWD&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostbyname&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETHOSTBYNAME&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostname&apos; function. */&lt;br/&gt;
    -#define HAVE_GETHOSTNAME 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getlogin&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETLOGIN&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getpwuid_r&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETPWUID_R&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gettimeofday&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETTIMEOFDAY&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getuid&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETUID&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;inttypes.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_INTTYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memmove&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMMOVE&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;memory.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_MEMORY_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memset&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMSET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netdb.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETDB_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netinet/in.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETINET_IN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `poll&apos; function. */&lt;br/&gt;
    -#undef HAVE_POLL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `socket&apos; function. */&lt;br/&gt;
    -#undef HAVE_SOCKET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdint.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STDINT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdlib.h&amp;gt; header file. */&lt;br/&gt;
    -#define HAVE_STDLIB_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strchr&apos; function. */&lt;br/&gt;
    -#define HAVE_STRCHR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strdup&apos; function. */&lt;br/&gt;
    -#define HAVE_STRDUP 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strerror&apos; function. */&lt;br/&gt;
    -#define HAVE_STRERROR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;strings.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRINGS_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;string.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRING_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strtol&apos; function. */&lt;br/&gt;
    -#undef HAVE_STRTOL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/socket.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_SOCKET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/stat.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_STAT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/time.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TIME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/types.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/utsname.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_UTSNAME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;unistd.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_UNISTD_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the sub-directory in which libtool stores uninstalled libraries.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -#define LT_OBJDIR&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if your C compiler doesn&apos;t accept -c and -o together. */&lt;br/&gt;
    -/* #undef NO_MINUS_C_MINUS_O */&lt;br/&gt;
    -&lt;br/&gt;
    -/* Name of package */&lt;br/&gt;
    -#define PACKAGE &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the address where bug reports for this package should be sent. */&lt;br/&gt;
    -#define PACKAGE_BUGREPORT &quot;user@zookeeper.apache.org&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name of this package. */&lt;br/&gt;
    -#define PACKAGE_NAME &quot;zookeeper C client&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name and version of this package. */&lt;br/&gt;
    -#define PACKAGE_STRING &quot;zookeeper C client 3.5.0 win32&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the one symbol short name of this package. */&lt;br/&gt;
    -#define PACKAGE_TARNAME &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the home page for this package. */&lt;br/&gt;
    -#define PACKAGE_URL &quot;&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the version of this package. */&lt;br/&gt;
    -#define PACKAGE_VERSION &quot;3.5.0&quot;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    This 3.5.0 indicates the base version of this file you were using when start the patch is pretty old. Could you rebase the pull request on latest master? &lt;/p&gt;</comment>
                            <comment id="16079342" author="githubbot" created="Sat, 8 Jul 2017 22:10:47 +0000"  >&lt;p&gt;Github user andschwa commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306#discussion_r126291131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306#discussion_r126291131&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/c/include/winconfig.h &amp;#8212;&lt;br/&gt;
    @@ -1,196 +1,15 @@&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;arpa/inet.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_ARPA_INET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;dlfcn.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_DLFCN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;fcntl.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_FCNTL_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.c&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.h&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getcwd&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETCWD&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostbyname&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETHOSTBYNAME&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostname&apos; function. */&lt;br/&gt;
    -#define HAVE_GETHOSTNAME 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getlogin&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETLOGIN&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getpwuid_r&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETPWUID_R&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gettimeofday&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETTIMEOFDAY&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getuid&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETUID&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;inttypes.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_INTTYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memmove&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMMOVE&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;memory.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_MEMORY_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memset&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMSET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netdb.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETDB_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netinet/in.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETINET_IN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `poll&apos; function. */&lt;br/&gt;
    -#undef HAVE_POLL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `socket&apos; function. */&lt;br/&gt;
    -#undef HAVE_SOCKET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdint.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STDINT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdlib.h&amp;gt; header file. */&lt;br/&gt;
    -#define HAVE_STDLIB_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strchr&apos; function. */&lt;br/&gt;
    -#define HAVE_STRCHR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strdup&apos; function. */&lt;br/&gt;
    -#define HAVE_STRDUP 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strerror&apos; function. */&lt;br/&gt;
    -#define HAVE_STRERROR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;strings.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRINGS_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;string.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRING_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strtol&apos; function. */&lt;br/&gt;
    -#undef HAVE_STRTOL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/socket.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_SOCKET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/stat.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_STAT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/time.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TIME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/types.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/utsname.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_UTSNAME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;unistd.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_UNISTD_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the sub-directory in which libtool stores uninstalled libraries.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -#define LT_OBJDIR&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if your C compiler doesn&apos;t accept -c and -o together. */&lt;br/&gt;
    -/* #undef NO_MINUS_C_MINUS_O */&lt;br/&gt;
    -&lt;br/&gt;
    -/* Name of package */&lt;br/&gt;
    -#define PACKAGE &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the address where bug reports for this package should be sent. */&lt;br/&gt;
    -#define PACKAGE_BUGREPORT &quot;user@zookeeper.apache.org&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name of this package. */&lt;br/&gt;
    -#define PACKAGE_NAME &quot;zookeeper C client&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name and version of this package. */&lt;br/&gt;
    -#define PACKAGE_STRING &quot;zookeeper C client 3.5.0 win32&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the one symbol short name of this package. */&lt;br/&gt;
    -#define PACKAGE_TARNAME &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the home page for this package. */&lt;br/&gt;
    -#define PACKAGE_URL &quot;&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the version of this package. */&lt;br/&gt;
    -#define PACKAGE_VERSION &quot;3.5.0&quot;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    It should be freshly rebased as of yesterday, but yeah I didn&apos;t catch the version update.&lt;/p&gt;</comment>
                            <comment id="16079343" author="githubbot" created="Sat, 8 Jul 2017 22:11:08 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Should we put the CMake files in a dedicated folder called &quot;windows&quot; or something like that? Otherwise we will have the CMakeList file, and the existing makefile and config files (which are not touched by this pull request) coexisting under the C client folder. This might create confusions for user because makefile can be generated from the CMakeList file, so the question of which makefile is the source of truth and so on... &lt;/p&gt;

&lt;p&gt;    Ultimately we might drop existing makefiles in favor of the CMake so build files across every platform are generated by a single source of truth (cmakelist), but that&apos;s more scope of work (the ant build file has to be modified and the system requirements of ZK has to be updated to make cmake a dependency for source installations etc to avoid break existing workflows), so for now I think it&apos;s good to scope cmake so it only impact windows C client builds.&lt;/p&gt;</comment>
                            <comment id="16079344" author="githubbot" created="Sat, 8 Jul 2017 22:11:21 +0000"  >&lt;p&gt;Github user andschwa commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306#discussion_r126291135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306#discussion_r126291135&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/c/CMakeLists.txt &amp;#8212;&lt;br/&gt;
    @@ -0,0 +1,220 @@&lt;br/&gt;
    +# Licensed to the Apache Software Foundation (ASF) under one&lt;br/&gt;
    +# or more contributor license agreements.  See the NOTICE file&lt;br/&gt;
    +# distributed with this work for additional information&lt;br/&gt;
    +# regarding copyright ownership.  The ASF licenses this file&lt;br/&gt;
    +# to you under the Apache License, Version 2.0 (the&lt;br/&gt;
    +# &quot;License&quot;); you may not use this file except in compliance&lt;br/&gt;
    +# with the License.  You may obtain a copy of the License at&lt;br/&gt;
    +#&lt;br/&gt;
    +#     &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
    +#&lt;br/&gt;
    +# Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
    +# distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
    +# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
    +# See the License for the specific language governing permissions and&lt;br/&gt;
    +# limitations under the License.&lt;br/&gt;
    +&lt;br/&gt;
    +cmake_minimum_required(VERSION 3.6)&lt;br/&gt;
    +&lt;br/&gt;
    +project(zookeeper VERSION 3.5.2)&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    I can fix it up in a few minutes here.&lt;/p&gt;</comment>
                            <comment id="16079356" author="hadoopqa" created="Sat, 8 Jul 2017 23:01:53 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/871//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16079362" author="githubbot" created="Sat, 8 Jul 2017 23:15:33 +0000"  >&lt;p&gt;Github user andschwa commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306#discussion_r126292294&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306#discussion_r126292294&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/c/include/winconfig.h &amp;#8212;&lt;br/&gt;
    @@ -1,196 +1,15 @@&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;arpa/inet.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_ARPA_INET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;dlfcn.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_DLFCN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;fcntl.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_FCNTL_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.c&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.h&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getcwd&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETCWD&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostbyname&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETHOSTBYNAME&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostname&apos; function. */&lt;br/&gt;
    -#define HAVE_GETHOSTNAME 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getlogin&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETLOGIN&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getpwuid_r&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETPWUID_R&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gettimeofday&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETTIMEOFDAY&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getuid&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETUID&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;inttypes.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_INTTYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memmove&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMMOVE&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;memory.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_MEMORY_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memset&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMSET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netdb.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETDB_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netinet/in.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETINET_IN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `poll&apos; function. */&lt;br/&gt;
    -#undef HAVE_POLL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `socket&apos; function. */&lt;br/&gt;
    -#undef HAVE_SOCKET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdint.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STDINT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdlib.h&amp;gt; header file. */&lt;br/&gt;
    -#define HAVE_STDLIB_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strchr&apos; function. */&lt;br/&gt;
    -#define HAVE_STRCHR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strdup&apos; function. */&lt;br/&gt;
    -#define HAVE_STRDUP 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strerror&apos; function. */&lt;br/&gt;
    -#define HAVE_STRERROR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;strings.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRINGS_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;string.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRING_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strtol&apos; function. */&lt;br/&gt;
    -#undef HAVE_STRTOL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/socket.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_SOCKET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/stat.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_STAT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/time.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TIME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/types.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/utsname.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_UTSNAME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;unistd.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_UNISTD_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the sub-directory in which libtool stores uninstalled libraries.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -#define LT_OBJDIR&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if your C compiler doesn&apos;t accept -c and -o together. */&lt;br/&gt;
    -/* #undef NO_MINUS_C_MINUS_O */&lt;br/&gt;
    -&lt;br/&gt;
    -/* Name of package */&lt;br/&gt;
    -#define PACKAGE &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the address where bug reports for this package should be sent. */&lt;br/&gt;
    -#define PACKAGE_BUGREPORT &quot;user@zookeeper.apache.org&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name of this package. */&lt;br/&gt;
    -#define PACKAGE_NAME &quot;zookeeper C client&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name and version of this package. */&lt;br/&gt;
    -#define PACKAGE_STRING &quot;zookeeper C client 3.5.0 win32&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the one symbol short name of this package. */&lt;br/&gt;
    -#define PACKAGE_TARNAME &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the home page for this package. */&lt;br/&gt;
    -#define PACKAGE_URL &quot;&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the version of this package. */&lt;br/&gt;
    -#define PACKAGE_VERSION &quot;3.5.0&quot;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    (Actually, this is old because `winconfig.h` is unmaintained. I just checked the tip of `master`, it&apos;s still 3.5.0 in this file. My changes make the set based off the single version variable in the CMake build file instead.)&lt;/p&gt;</comment>
                            <comment id="16079363" author="githubbot" created="Sat, 8 Jul 2017 23:16:32 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm the PR is rebased, retested, and has some extra notes in it now for some weird CMake things.&lt;/p&gt;

&lt;p&gt;    I would not put the CMake files in a separate folder. There are couple of reasons for this:&lt;/p&gt;


&lt;ul&gt;
	&lt;li&gt;It is a very strong convention with CMake that the top level `CMakeLists.txt` file exists at the top level of the source directory (thus making variables like `CMAKE_SOURCE_DIR` make sense). This is also necessary for the macro `ExternalProject_Add` to be used with older (pre 3.8) versions of CMake, when it didn&apos;t have the `SOURCE_SUBDIR` option. (This macro is often used by other projects, e.g. Mesos, to download and build a dependency.)&lt;/li&gt;
	&lt;li&gt;The CMake system can also be used on Linux platforms (in fact, it&apos;s even setup to build and run the tests with `ctest`). If `cmake` has not been invoked, or if `autoconf`/`configure` have not been invoked, they will not interfere with each other (so the source files themselves can co-exist). It&apos;s only the generated files, and only on systems that use `make`, that may become confusing. But this confusion is easily cleared up by asking: which configure system did you invoke? So I don&apos;t think it&apos;ll be much of a problem. (We have both Autotools and CMake concurrently in Mesos, with the eventual plan of deprecating the former with the latter. Developers still using Autotools have been just fine ignoring CMake.)&lt;/li&gt;
	&lt;li&gt;CMake can easily build out-of-tree. I&apos;ve tested this, as I usually build with `mkdir build; cd build; cmake ..; cmake --build .`. So you can use the Autotools and CMake systems concurrently, if you&apos;re, say, testing both systems.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    &amp;gt; Ultimately we might drop existing makefiles in favor of the CMake&lt;/p&gt;

&lt;p&gt;    That would be fantastic :smile:&lt;/p&gt;

&lt;p&gt;    The only annoying thing is that, until that day, there are now two systems to maintain. I&apos;d posit that this is better than the previous situation where there was the Linux system, and then at least, what, three? Windows systems being (not) maintained. If (when) CMake does get broken on Linux because a change was made to Autotools and not replicated to CMake, it won&apos;t be the end of the world. You&apos;ll have one working system, and someone (like me) will end up fixing the other system. Not the greatest situation, but not the worst.&lt;/p&gt;

&lt;p&gt;    So all that said, leaving CMake available for both operating systems I think is the right thing to do. The scope of impact is still only on Windows, as we&apos;re deprecating (deleting) the previous build files, and we&apos;re adding a choice for Linux developers. (When ZooKeeper 3.5.3 is released, I&apos;ll replace Mesos&apos;s if/else code to build ZK on Linux and Windows with a &lt;em&gt;single&lt;/em&gt; piece of code, using CMake. It&apos;ll be awesome.)&lt;/p&gt;</comment>
                            <comment id="16079364" author="githubbot" created="Sat, 8 Jul 2017 23:20:43 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Just to give you an idea of what we currently have to do in order to use the ZooKeeper C Client in Mesos, we have &lt;span class=&quot;error&quot;&gt;&amp;#91;this&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/cmake/Mesos3rdpartyConfigure.cmake#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/cmake/Mesos3rdpartyConfigure.cmake#L51&lt;/a&gt;) and &lt;span class=&quot;error&quot;&gt;&amp;#91;this&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/zookeeper-3.5.2-alpha.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/zookeeper-3.5.2-alpha.patch&lt;/a&gt;) and &lt;span class=&quot;error&quot;&gt;&amp;#91;this&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/CMakeLists.txt#L394&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/CMakeLists.txt#L394&lt;/a&gt;), all to work around the current state of the client build system.&lt;/p&gt;

&lt;p&gt;    My goal is that, with these changes, almost everything can be replaced with just this &lt;span class=&quot;error&quot;&gt;&amp;#91;one piece of code&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/CMakeLists.txt#L424&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/mesos/blob/b4f8d1f588841b0a7395c24630963be5620db7cb/3rdparty/CMakeLists.txt#L424&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16079369" author="githubbot" created="Sat, 8 Jul 2017 23:37:59 +0000"  >&lt;p&gt;Github user hanm commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306#discussion_r126292628&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306#discussion_r126292628&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/c/include/winconfig.h &amp;#8212;&lt;br/&gt;
    @@ -1,196 +1,15 @@&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;arpa/inet.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_ARPA_INET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;dlfcn.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_DLFCN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;fcntl.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_FCNTL_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.c&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.h&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getcwd&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETCWD&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostbyname&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETHOSTBYNAME&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostname&apos; function. */&lt;br/&gt;
    -#define HAVE_GETHOSTNAME 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getlogin&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETLOGIN&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getpwuid_r&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETPWUID_R&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gettimeofday&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETTIMEOFDAY&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getuid&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETUID&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;inttypes.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_INTTYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memmove&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMMOVE&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;memory.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_MEMORY_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memset&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMSET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netdb.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETDB_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netinet/in.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETINET_IN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `poll&apos; function. */&lt;br/&gt;
    -#undef HAVE_POLL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `socket&apos; function. */&lt;br/&gt;
    -#undef HAVE_SOCKET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdint.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STDINT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdlib.h&amp;gt; header file. */&lt;br/&gt;
    -#define HAVE_STDLIB_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strchr&apos; function. */&lt;br/&gt;
    -#define HAVE_STRCHR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strdup&apos; function. */&lt;br/&gt;
    -#define HAVE_STRDUP 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strerror&apos; function. */&lt;br/&gt;
    -#define HAVE_STRERROR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;strings.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRINGS_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;string.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRING_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strtol&apos; function. */&lt;br/&gt;
    -#undef HAVE_STRTOL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/socket.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_SOCKET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/stat.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_STAT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/time.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TIME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/types.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/utsname.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_UTSNAME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;unistd.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_UNISTD_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the sub-directory in which libtool stores uninstalled libraries.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -#define LT_OBJDIR&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if your C compiler doesn&apos;t accept -c and -o together. */&lt;br/&gt;
    -/* #undef NO_MINUS_C_MINUS_O */&lt;br/&gt;
    -&lt;br/&gt;
    -/* Name of package */&lt;br/&gt;
    -#define PACKAGE &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the address where bug reports for this package should be sent. */&lt;br/&gt;
    -#define PACKAGE_BUGREPORT &quot;user@zookeeper.apache.org&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name of this package. */&lt;br/&gt;
    -#define PACKAGE_NAME &quot;zookeeper C client&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name and version of this package. */&lt;br/&gt;
    -#define PACKAGE_STRING &quot;zookeeper C client 3.5.0 win32&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the one symbol short name of this package. */&lt;br/&gt;
    -#define PACKAGE_TARNAME &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the home page for this package. */&lt;br/&gt;
    -#define PACKAGE_URL &quot;&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the version of this package. */&lt;br/&gt;
    -#define PACKAGE_VERSION &quot;3.5.0&quot;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Yes, your observation is correct. We only bump versions encoded in this file of master branch when we do a major release (e.g. from 3.4.x to 3.5.0). The same file in branch-3.5 contains more up to date version number for previous release (3.5.3 for 3.5, and 3.4.10 for 3.4). So this issue is not a problem.&lt;/p&gt;</comment>
                            <comment id="16079373" author="githubbot" created="Sat, 8 Jul 2017 23:45:46 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @andschwa Thanks for clarification regarding the coexisting of CMake and makefile. I agree and let&apos;s keep the current folder structure, but I think some documentations would be good to help clarify the case. How about document the build toolchain for windows in the README file under the same folder? &lt;/p&gt;</comment>
                            <comment id="16079423" author="githubbot" created="Sun, 9 Jul 2017 02:39:00 +0000"  >&lt;p&gt;Github user andschwa commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306#discussion_r126294494&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306#discussion_r126294494&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/c/include/winconfig.h &amp;#8212;&lt;br/&gt;
    @@ -1,196 +1,15 @@&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;arpa/inet.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_ARPA_INET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;dlfcn.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_DLFCN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;fcntl.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_FCNTL_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.c&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_C 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the file `generated/zookeeper.jute.h&apos;. */&lt;br/&gt;
    -#define HAVE_GENERATED_ZOOKEEPER_JUTE_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getcwd&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETCWD&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostbyname&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETHOSTBYNAME&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gethostname&apos; function. */&lt;br/&gt;
    -#define HAVE_GETHOSTNAME 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getlogin&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETLOGIN&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getpwuid_r&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETPWUID_R&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `gettimeofday&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETTIMEOFDAY&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `getuid&apos; function. */&lt;br/&gt;
    -#undef HAVE_GETUID&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;inttypes.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_INTTYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memmove&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMMOVE&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;memory.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_MEMORY_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `memset&apos; function. */&lt;br/&gt;
    -#undef HAVE_MEMSET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netdb.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETDB_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;netinet/in.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_NETINET_IN_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `poll&apos; function. */&lt;br/&gt;
    -#undef HAVE_POLL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `socket&apos; function. */&lt;br/&gt;
    -#undef HAVE_SOCKET&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdint.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STDINT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;stdlib.h&amp;gt; header file. */&lt;br/&gt;
    -#define HAVE_STDLIB_H 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strchr&apos; function. */&lt;br/&gt;
    -#define HAVE_STRCHR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strdup&apos; function. */&lt;br/&gt;
    -#define HAVE_STRDUP 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strerror&apos; function. */&lt;br/&gt;
    -#define HAVE_STRERROR 1&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;strings.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRINGS_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;string.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_STRING_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the `strtol&apos; function. */&lt;br/&gt;
    -#undef HAVE_STRTOL&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/socket.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_SOCKET_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/stat.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_STAT_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/time.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TIME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/types.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_TYPES_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;sys/utsname.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_SYS_UTSNAME_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if you have the &amp;lt;unistd.h&amp;gt; header file. */&lt;br/&gt;
    -#undef HAVE_UNISTD_H&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the sub-directory in which libtool stores uninstalled libraries.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*/&lt;br/&gt;
    -#define LT_OBJDIR&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to 1 if your C compiler doesn&apos;t accept -c and -o together. */&lt;br/&gt;
    -/* #undef NO_MINUS_C_MINUS_O */&lt;br/&gt;
    -&lt;br/&gt;
    -/* Name of package */&lt;br/&gt;
    -#define PACKAGE &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the address where bug reports for this package should be sent. */&lt;br/&gt;
    -#define PACKAGE_BUGREPORT &quot;user@zookeeper.apache.org&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name of this package. */&lt;br/&gt;
    -#define PACKAGE_NAME &quot;zookeeper C client&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the full name and version of this package. */&lt;br/&gt;
    -#define PACKAGE_STRING &quot;zookeeper C client 3.5.0 win32&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the one symbol short name of this package. */&lt;br/&gt;
    -#define PACKAGE_TARNAME &quot;c-client-src&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the home page for this package. */&lt;br/&gt;
    -#define PACKAGE_URL &quot;&quot;&lt;br/&gt;
    -&lt;br/&gt;
    -/* Define to the version of this package. */&lt;br/&gt;
    -#define PACKAGE_VERSION &quot;3.5.0&quot;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Ah, that makes more sense!&lt;/p&gt;</comment>
                            <comment id="16079426" author="githubbot" created="Sun, 9 Jul 2017 02:55:51 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm ah, documentation for it would indeed be good! Can do. Anything else you need for this? If not, I&apos;ll get the readme fixed up Monday morning and ping you afterward.&lt;/p&gt;</comment>
                            <comment id="16080754" author="githubbot" created="Mon, 10 Jul 2017 18:00:37 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm I ended up just adding it &lt;span class=&quot;error&quot;&gt;&amp;#91;straight to the src/c/README&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/zookeeper/pull/306/files#diff-a722fe5ba032cb8da6c78d0e929f4ac5R74&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306/files#diff-a722fe5ba032cb8da6c78d0e929f4ac5R74&lt;/a&gt;), let me know if you think it should have more/less etc.&lt;/p&gt;</comment>
                            <comment id="16080780" author="hadoopqa" created="Mon, 10 Jul 2017 18:09:31 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/874//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16080793" author="hadoopqa" created="Mon, 10 Jul 2017 18:19:50 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/875//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16080812" author="githubbot" created="Mon, 10 Jul 2017 18:30:42 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hey, yay, Jenkins passed!&lt;/p&gt;</comment>
                            <comment id="16081625" author="githubbot" created="Tue, 11 Jul 2017 04:10:48 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @andschwa &lt;br/&gt;
    Patch looks good to me. The readme update looks good too. &lt;/p&gt;

&lt;p&gt;    I also verified Linux and Mac c client builds with the patch. Unfortunately I don&apos;t have a windows box to test. Can you please describe what kinds of test / integration test you did on windows? &lt;/p&gt;

&lt;p&gt;    There are two remaining issues:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Can you please update the pull request description by adding a brief description on what this patch is for and how it did it. The pull request description will be part of commit message, and it&apos;s good to have a informative commit message.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;This pull request is targeting master, which is not going to be released soon. branch-3.5 and branch-3.4 are branches for next releases, are you going to send separate pull requests to those branches, or you are fine just with this merged into master?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16081634" author="githubbot" created="Tue, 11 Jul 2017 04:26:34 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt; Can you please describe what kinds of test / integration test you did on windows?&lt;/p&gt;

&lt;p&gt;    Unfortunately, we don&apos;t have the unit tests building on Windows (under any tools). So I ensured I could reliably build the project with CMake and get the expected outputs. Moreover, I have a &lt;span class=&quot;error&quot;&gt;&amp;#91;zk-test branch&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/andschwa/mesos/tree/zk-test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andschwa/mesos/tree/zk-test&lt;/a&gt;) in Mesos where I updated our system to apply these patches to the 3.5.2 release, and build with them (verifying that the second patch resolved &lt;a href=&quot;https://issues.apache.org/jira/browse/MESOS-7541&quot; title=&quot;Cannot compile without pre-compiled headers on Windows&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MESOS-7541&quot;&gt;&lt;del&gt;MESOS-7541&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/MESOS-7541&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MESOS-7541&lt;/a&gt;)). I verified I could link to the libraries as expected, and ran some tests (though I&apos;d like to give a full `mesos-test` pass of our entire suite).&lt;/p&gt;

&lt;p&gt;    Furthermore, we have been building and using the first patch (the addition of the CMake build, but not the re-port changes) since &lt;span class=&quot;error&quot;&gt;&amp;#91;April 25&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/mesos/commit/6e64ffaca365ed1e28256d7cb87bf9e1af626a75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/mesos/commit/6e64ffaca365ed1e28256d7cb87bf9e1af626a75&lt;/a&gt;) with no problems; so I&apos;d say the CMake system is thoroughly tested for Windows (at least in its previous form, but only some cosmetics, e.g. TODOs/comments/default option for building unit tests, were changed when I updated this PR).&lt;/p&gt;

&lt;p&gt;    &amp;gt; Can you please update the pull request description by adding a brief description on what this patch is for and how it did it. The pull request description will be part of commit message, and it&apos;s good to have a informative commit message.&lt;/p&gt;

&lt;p&gt;    Wouldn&apos;t you rather use the two commit messages, a58a5a95aef9cafc267a1b4a2bdb37f9e9e26363 and c550a3e3babcaa3b3891280ac2d61b89fd294d06 as-is (those should be two links to the commits with their respective messages, but the ASF bot might not copy them since they&apos;re automatic from GitHub)? These are the patches as I&apos;d commit them (as in, I wouldn&apos;t squash them into one, since they&apos;re resolving two bugs).&lt;/p&gt;

&lt;p&gt;    &amp;gt; This pull request is targeting master, which is not going to be released soon. branch-3.5 and branch-3.4 are branches for next releases, are you going to send separate pull requests to those branches, or you are fine just with this merged into master?&lt;/p&gt;

&lt;p&gt;    I would be happy to provide backports of these two patches, especially for branch-3.5, so that I can remove the manual patch step in Mesos&apos;s build process as soon as possible &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;. But first, let&apos;s figure out the patch messages. I could copy them into the PR description, but then I&apos;m afraid it&apos;s going to be squashed as one patch instead of the two logical patches. I could replace this PR with two separate PRs, one for each patch, and then repeat that for the two branches; but I&apos;m not sure you want that either.&lt;/p&gt;</comment>
                            <comment id="16081645" author="githubbot" created="Tue, 11 Jul 2017 04:38:31 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    If we want two commits, then we need two pull requests. Two (or more ) commits appertain to a single pull request will be squashed to a single commit at commit time by our commit script. I think it&apos;s fine to have this pull request resolve both issue with a single commit.&lt;/p&gt;

&lt;p&gt;    I can massage the commit message at commit time to include the messages from both commit, or you could update the pull request description with both message, I am ok with either way.&lt;/p&gt;</comment>
                            <comment id="16081666" author="githubbot" created="Tue, 11 Jul 2017 05:02:01 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm ah, I see! That is no problem. I have taken the two messages, improved them a bit as one message, and updated the description. It will be easier to backport it this way.&lt;/p&gt;</comment>
                            <comment id="16081670" author="githubbot" created="Tue, 11 Jul 2017 05:10:09 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm I&apos;m going to let you take care of the title, maybe it should be:&lt;/p&gt;

&lt;p&gt;    &amp;gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; title=&quot;Add CMake build system for better cross-platform support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2756&quot;&gt;&lt;del&gt;ZOOKEEPER-2756&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;: Improve cross-platform support with CMake and refactor&lt;/p&gt;

&lt;p&gt;    But I don&apos;t know.&lt;/p&gt;</comment>
                            <comment id="16083421" author="githubbot" created="Wed, 12 Jul 2017 04:21:59 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for update. LGTM. Will merge by end of this week. Give a few more days in case someone has additional feedback for this.&lt;/p&gt;</comment>
                            <comment id="16084856" author="githubbot" created="Wed, 12 Jul 2017 22:43:00 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm I&apos;m likewise giving this some more testing too. I&apos;m integrating the patch into Mesos on the Linux side (where we were building with Autotools), and porting our ZooKeeper-explicit unit tests to Windows (because apparently they weren&apos;t). We do have tests that I&apos;ve run that indirectly tested the ZooKeeper client, but I want certain tests. Expect a small update by the end of the week.&lt;/p&gt;</comment>
                            <comment id="16086210" author="githubbot" created="Thu, 13 Jul 2017 18:51:00 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    This &lt;span class=&quot;error&quot;&gt;&amp;#91;here&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/zookeeper/pull/306/files#diff-1ea258ac6b9efc24b67d2c2a704cfe5fR145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306/files#diff-1ea258ac6b9efc24b67d2c2a704cfe5fR145&lt;/a&gt;) is all I changed; it ensures that the `config.h` file is always put into the source `include` directory, which is what upstream projects include. This was needed because `zookeeper.h` includes the file, so this makes sure it exists next to it (instead of in the binary directory, which works for the ZK build, but if it&apos;s out-of-tree, is misplaced for upstream consumption).&lt;/p&gt;</comment>
                            <comment id="16086234" author="hadoopqa" created="Thu, 13 Jul 2017 19:01:23 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/882//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16086418" author="githubbot" created="Thu, 13 Jul 2017 21:07:50 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    looks good. test failures are irrelevant (we should really get the flaky tests fixed soon.).&lt;/p&gt;</comment>
                            <comment id="16090446" author="githubbot" created="Mon, 17 Jul 2017 19:53:11 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I managed to get the Mesos unit tests for ZooKeeper ported to our CMake system, which much more thoroughly exercises the C client. I&apos;ve integrated this patch and the CMake system with the Mesos build on Linux, and all our tests passed:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Auth&lt;br/&gt;
    [       OK ] ZooKeeperTest.Auth (6923 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation&lt;br/&gt;
    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (46 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Create&lt;br/&gt;
    [       OK ] ZooKeeperTest.Create (6770 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetector&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetector (57 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling&lt;br/&gt;
    2017-07-14 15:23:18,510:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:43434&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-14 15:23:18,510:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2384: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:43434&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    2017-07-14 15:23:18,514:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2384: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:43434&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    2017-07-14 15:23:18,514:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2384: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:43434&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (50 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (54 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderContender&lt;br/&gt;
    2017-07-14 15:23:18,630:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-14 15:23:18,632:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2428: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-112, errno=116(Stale file handle): sessionId=0x10000305fd80000 has expired.&lt;br/&gt;
    2017-07-14 15:23:18,655:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-14 15:23:18,657:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2428: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-112, errno=116(Stale file handle): sessionId=0x10000305fd80001 has expired.&lt;br/&gt;
    2017-07-14 15:23:18,676:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-14 15:23:18,677:29970(0x7f01dffff700):ZOO_ERROR@handle_socket_error_msg@2384: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    2017-07-14 15:23:18,688:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2384: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    2017-07-14 15:23:18,688:29970(0x7f01e4d0a700):ZOO_ERROR@handle_socket_error_msg@2384: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:38085&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderContender (304 ms)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest (14204 ms total)&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; Global test environment tear-down&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;==========&amp;#93;&lt;/span&gt; 7 tests from 1 test case ran. (14376 ms total)&lt;br/&gt;
    [  PASSED  ] 7 tests.&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    And then I brought these changes over to Windows too, and while it&apos;s currently building with &lt;sub&gt;some&lt;/sub&gt; a lot of irrelevant-to-this-patch hacks, they pass:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Auth&lt;br/&gt;
    [       OK ] ZooKeeperTest.Auth (7101 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation&lt;br/&gt;
    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (737 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Create&lt;br/&gt;
    [       OK ] ZooKeeperTest.Create (6752 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetector&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetector (107 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling&lt;br/&gt;
    2017-07-17 12:52:08,546:15936(0x3334):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:54312&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (68 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (72 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderContender&lt;br/&gt;
    2017-07-17 12:52:08,709:15936(0x47c8):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:54336&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    2017-07-17 12:52:08,714:15936(0x47c8):ZOO_ERROR@handle_socket_error_msg@2428: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:54336&amp;#93;&lt;/span&gt; zk retcode=-112, errno=19(No such device): sessionId=0x1001b9dddba0000 has expired.&lt;br/&gt;
    2017-07-17 12:52:08,749:15936(0x39b8):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:54336&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    2017-07-17 12:52:08,754:15936(0x39b8):ZOO_ERROR@handle_socket_error_msg@2428: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:54336&amp;#93;&lt;/span&gt; zk retcode=-112, errno=19(No such device): sessionId=0x1001b9dddba0001 has expired.&lt;br/&gt;
    2017-07-17 12:52:08,788:15936(0xb94):ZOO_ERROR@handle_socket_error_msg@2409: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:54336&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderContender (701 ms)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest (15548 ms total)&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; Global test environment tear-down&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;==========&amp;#93;&lt;/span&gt; 7 tests from 1 test case ran. (16724 ms total)&lt;br/&gt;
    [  PASSED  ] 7 tests.&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="16090704" author="githubbot" created="Mon, 17 Jul 2017 22:31:48 +0000"  >&lt;p&gt;GitHub user andschwa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;: ZooKeeper public include files leak porting change&lt;/p&gt;

&lt;p&gt;    This patch primarily adds a cross-platform CMake build system. This is in&lt;br/&gt;
    addition to the Autotools system on Linux, until it can be deprecated, and this&lt;br/&gt;
    replaces the existing committed Visual Studio Solutions for Windows.&lt;/p&gt;

&lt;p&gt;    As this commit deprecates (and breaks) the previously existing Visual Studio&lt;br/&gt;
    solutions and projects, they&apos;ve been removed. Building on Windows now requires&lt;br/&gt;
    CMake, but this enables the support of any code-supported Visual Studio version.&lt;br/&gt;
    Support for Visual Studio 2017 was explicitly added by this patch, and support&lt;br/&gt;
    for future versions, barring software bugs, should be available automatically&lt;br/&gt;
    through CMake.&lt;/p&gt;

&lt;p&gt;    The notable features lacking in comparison to Autotools are Solaris support,&lt;br/&gt;
    shared library builds, whitelisted symbol exports, libtool integration, and&lt;br/&gt;
    doxygen document generation. Almost everything else from Autotools has been&lt;br/&gt;
    ported, including header/function/library checks, and all targets (zookeeper,&lt;br/&gt;
    hashtable, cli, load_gen, and tests).&lt;/p&gt;

&lt;p&gt;    The primary work involved for CMake (other than the writing of `CMakeLists.txt`)&lt;br/&gt;
    was transitioning the hand-written `winconfig.h` to an auto-generated `config.h`&lt;br/&gt;
    file, and guarding code with `#ifdef HAVE_FEATURE`. The `cmake_config.h.in`&lt;br/&gt;
    template was modeled after the Autotools config file so that the feature guards&lt;br/&gt;
    share the same names.&lt;/p&gt;

&lt;p&gt;    This patch also refactors the Windows port of the C client. Notably, it moves as&lt;br/&gt;
    much porting code as possible out of the publicly included `winconfig.h` header&lt;br/&gt;
    and into the relevant source files, or the private `winport.h` header.&lt;/p&gt;

&lt;p&gt;    While `load_gen.c` looks at first glance as if it were ported to Windows, it&lt;br/&gt;
    never actually was, so the erroneous `#include &quot;win32port.h&quot;` was removed, and&lt;br/&gt;
    the target is not built on Windows.&lt;/p&gt;

&lt;p&gt;    The `include/winstdint.h` header was removed as it has been replaced by&lt;br/&gt;
    `&amp;lt;stdint.h&amp;gt;`. This might break very old versions of Visual Studio; but in those&lt;br/&gt;
    cases, previous versions of the client are available.&lt;/p&gt;

&lt;p&gt;    A bug for upstream libraries including the ZooKeeper headers was fixed by&lt;br/&gt;
    removing `#undef AF_INET6` entirely, and removing `#include &amp;lt;windows.h&amp;gt;`, as it&lt;br/&gt;
    &quot;pulls in the world&quot; and should not be included publicly.&lt;/p&gt;

&lt;p&gt;    A guard was placed around `#define snprintf` in order to enable compiling with&lt;br/&gt;
    modern versions of MSVC, including Visual Studio 2015.&lt;/p&gt;

&lt;p&gt;    A problem with `DLL_EXPORT` and `USE_STATIC_LIB` being redefined was fixed.&lt;/p&gt;

&lt;p&gt;    There are existent warnings which this patch did not attempt to fix.&lt;/p&gt;

&lt;p&gt;    Building tests on Windows is not supported, but was not previously supported.&lt;br/&gt;
    The tests need to be ported.&lt;/p&gt;

&lt;p&gt;    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially remove&lt;br/&gt;
    `include/winconfig.h` altogether.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andschwa/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andschwa/zookeeper&lt;/a&gt; cmake-backport-3.5&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #311&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 081833e9899afd4937075038f78bb4faff446ef4&lt;br/&gt;
Author: Andrew Schwartzmeyer &amp;lt;andrew@schwartzmeyer.com&amp;gt;&lt;br/&gt;
Date:   2017-04-10T23:12:40Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; title=&quot;Add CMake build system for better cross-platform support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2756&quot;&gt;&lt;del&gt;ZOOKEEPER-2756&lt;/del&gt;&lt;/a&gt;: Add CMake build system for better cross-platform support&lt;/p&gt;

&lt;p&gt;    This notably lacks Solaris and libtool support.&lt;/p&gt;

&lt;p&gt;    Almost everything else from Autotools has been ported,&lt;br/&gt;
    including header/function/library checks, and all targets&lt;br/&gt;
    (zookeeper, hashtable, cli, load_gen, and tests).&lt;/p&gt;

&lt;p&gt;    Both Linux and Windows are supported.&lt;/p&gt;

&lt;p&gt;    The primary work involved (other than the writing of `CMakeLists.txt`)&lt;br/&gt;
    was transitioning the hand-written `winconfig.h` to an&lt;br/&gt;
    auto-generated `config.h` file, and guarding code with `#ifdef&lt;br/&gt;
    HAVE_FEATURE`. The `cmake_config.h.in` template was modeled after&lt;br/&gt;
    the Autotools config file so that the feature guards share the same&lt;br/&gt;
    names.&lt;/p&gt;

&lt;p&gt;    While `load_gen.c` looks at first glance as if it were ported to Windows,&lt;br/&gt;
    it never actually was, so the erroneous `#include &quot;win32port.h&quot;` was&lt;br/&gt;
    removed, and the target is not built on Windows.&lt;/p&gt;

&lt;p&gt;    There are existent warnings which this patch did not attempt to fix.&lt;/p&gt;

&lt;p&gt;    A guard was placed around `#define snprintf` in order to enable&lt;br/&gt;
    compiling with modern versions of MSVC.&lt;/p&gt;

&lt;p&gt;    Fixed DLL_EXPORT and USE_STATIC_LIB redefinition.&lt;/p&gt;

&lt;p&gt;    As this commit deprecates (and breaks) the previously existing Visual&lt;br/&gt;
    Studio solutions and projects, they&apos;ve been removed.&lt;/p&gt;

&lt;p&gt;    Building tests on Windows is still not supported.&lt;/p&gt;

&lt;p&gt;commit 49f9558dea6504e5f082edd0d4d5191503c54235&lt;br/&gt;
Author: Andrew Schwartzmeyer &amp;lt;andrew@schwartzmeyer.com&amp;gt;&lt;br/&gt;
Date:   2017-07-07T22:35:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;: ZooKeeper public include files leak porting changes&lt;/p&gt;

&lt;p&gt;    This patch refactors the Windows port of the C client. Notably, it moves&lt;br/&gt;
    as much porting code as possible out of the publicly included&lt;br/&gt;
    `winconfig.h` header and into the relevant source files. This also&lt;br/&gt;
    removes `winstdint.h` as it has been replaced by `&amp;lt;stdint.h&amp;gt;`. It fixes&lt;br/&gt;
    problems for upstream libraries by removing `#undef AF_INET6` and&lt;br/&gt;
    `#include &amp;lt;windows.h&amp;gt;`.&lt;/p&gt;

&lt;p&gt;    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially&lt;br/&gt;
    remove `include/winconfig.h` altogether.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16090709" author="githubbot" created="Mon, 17 Jul 2017 22:32:54 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm this backports #306 to `branch-3.5`. I rebuilt and retested, all looks good. Since original branch came from `master` the version was already what I believe to be correct at `3.5.3`.&lt;/p&gt;</comment>
                            <comment id="16090756" author="githubbot" created="Mon, 17 Jul 2017 22:58:47 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hm... it might not backport so easily to `branch-3.4`. Let me know how badly it&apos;s wanted.&lt;/p&gt;</comment>
                            <comment id="16090919" author="hadoopqa" created="Tue, 18 Jul 2017 01:08:58 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/884//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16091116" author="githubbot" created="Tue, 18 Jul 2017 05:10:43 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for the extra efforts on integration testing, @andschwa. I&apos;ll commit this tomorrow.&lt;/p&gt;</comment>
                            <comment id="16091117" author="githubbot" created="Tue, 18 Jul 2017 05:13:06 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @andschwa branch-3.4 is the stable branch that we actually ship - I assume your use case (Mesos on windows?) will integrate with that version as well. &lt;/p&gt;</comment>
                            <comment id="16091779" author="githubbot" created="Tue, 18 Jul 2017 16:17:59 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm oh..  good to know! Okay I&apos;ll give it another whack, thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16091877" author="githubbot" created="Tue, 18 Jul 2017 17:42:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16091881" author="hanm" created="Tue, 18 Jul 2017 17:45:48 +0000"  >&lt;p&gt;Committed to master. &lt;a href=&quot;https://github.com/apache/zookeeper/commit/f60928787a908f358a64763f802a6d0371ad4404&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/f60928787a908f358a64763f802a6d0371ad4404&lt;/a&gt;. Will resolve JIRA after committing ported patch to branch-3.4 and 3.5.&lt;/p&gt;</comment>
                            <comment id="16091885" author="githubbot" created="Tue, 18 Jul 2017 17:48:35 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @andschwa This patch just landed on master. Thanks for your contribution. I&apos;ll review the branch-3.5 port and commit it later this week if it looks good.&lt;/p&gt;</comment>
                            <comment id="16091894" author="githubbot" created="Tue, 18 Jul 2017 17:52:38 +0000"  >&lt;p&gt;GitHub user andschwa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;: ZooKeeper public include files leak porting changes&lt;/p&gt;

&lt;p&gt;    This patch primarily adds a cross-platform CMake build system. This is in&lt;br/&gt;
    addition to the Autotools system on Linux, until it can be deprecated, and this&lt;br/&gt;
    replaces the existing committed Visual Studio Solutions for Windows.&lt;/p&gt;

&lt;p&gt;    As this commit deprecates (and breaks) the previously existing Visual Studio&lt;br/&gt;
    solutions and projects, they&apos;ve been removed. Building on Windows now requires&lt;br/&gt;
    CMake, but this enables the support of any code-supported Visual Studio version.&lt;br/&gt;
    Support for Visual Studio 2017 was explicitly added by this patch, and support&lt;br/&gt;
    for future versions, barring software bugs, should be available automatically&lt;br/&gt;
    through CMake.&lt;/p&gt;

&lt;p&gt;    The notable features lacking in comparison to Autotools are Solaris support,&lt;br/&gt;
    shared library builds, whitelisted symbol exports, libtool integration, and&lt;br/&gt;
    doxygen document generation. Almost everything else from Autotools has been&lt;br/&gt;
    ported, including header/function/library checks, and all targets (zookeeper,&lt;br/&gt;
    hashtable, cli, load_gen, and tests).&lt;/p&gt;

&lt;p&gt;    The primary work involved for CMake (other than the writing of `CMakeLists.txt`)&lt;br/&gt;
    was transitioning the hand-written `winconfig.h` to an auto-generated `config.h`&lt;br/&gt;
    file, and guarding code with `#ifdef HAVE_FEATURE`. The `cmake_config.h.in`&lt;br/&gt;
    template was modeled after the Autotools config file so that the feature guards&lt;br/&gt;
    share the same names.&lt;/p&gt;

&lt;p&gt;    This patch also refactors the Windows port of the C client. Notably, it moves as&lt;br/&gt;
    much porting code as possible out of the publicly included `winconfig.h` header&lt;br/&gt;
    and into the relevant source files, or the private `winport.h` header.&lt;/p&gt;

&lt;p&gt;    While `load_gen.c` looks at first glance as if it were ported to Windows, it&lt;br/&gt;
    never actually was, so the erroneous `#include &quot;win32port.h&quot;` was removed, and&lt;br/&gt;
    the target is not built on Windows.&lt;/p&gt;

&lt;p&gt;    The `include/winstdint.h` header was removed as it has been replaced by&lt;br/&gt;
    `&amp;lt;stdint.h&amp;gt;`. This might break very old versions of Visual Studio; but in those&lt;br/&gt;
    cases, previous versions of the client are available.&lt;/p&gt;

&lt;p&gt;    A bug for upstream libraries including the ZooKeeper headers was fixed by&lt;br/&gt;
    removing `#undef AF_INET6` entirely, and removing `#include &amp;lt;windows.h&amp;gt;`, as it&lt;br/&gt;
    &quot;pulls in the world&quot; and should not be included publicly.&lt;/p&gt;

&lt;p&gt;    A guard was placed around `#define snprintf` in order to enable compiling with&lt;br/&gt;
    modern versions of MSVC, including Visual Studio 2015.&lt;/p&gt;

&lt;p&gt;    A problem with `DLL_EXPORT` and `USE_STATIC_LIB` being redefined was fixed.&lt;/p&gt;

&lt;p&gt;    There are existent warnings which this patch did not attempt to fix.&lt;/p&gt;

&lt;p&gt;    Building tests on Windows is not supported, but was not previously supported.&lt;br/&gt;
    The tests need to be ported.&lt;/p&gt;

&lt;p&gt;    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially remove&lt;br/&gt;
    `include/winconfig.h` altogether.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andschwa/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andschwa/zookeeper&lt;/a&gt; cmake-backport-3.4&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #313&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8b903e3089a575bbead03275c7d1e8591245cca0&lt;br/&gt;
Author: Andrew Schwartzmeyer &amp;lt;andrew@schwartzmeyer.com&amp;gt;&lt;br/&gt;
Date:   2017-04-10T23:12:40Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2756&quot; title=&quot;Add CMake build system for better cross-platform support&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2756&quot;&gt;&lt;del&gt;ZOOKEEPER-2756&lt;/del&gt;&lt;/a&gt;: Add CMake build system for better cross-platform support&lt;/p&gt;

&lt;p&gt;    This notably lacks Solaris and libtool support.&lt;/p&gt;

&lt;p&gt;    Almost everything else from Autotools has been ported,&lt;br/&gt;
    including header/function/library checks, and all targets&lt;br/&gt;
    (zookeeper, hashtable, cli, load_gen, and tests).&lt;/p&gt;

&lt;p&gt;    Both Linux and Windows are supported.&lt;/p&gt;

&lt;p&gt;    The primary work involved (other than the writing of `CMakeLists.txt`)&lt;br/&gt;
    was transitioning the hand-written `winconfig.h` to an&lt;br/&gt;
    auto-generated `config.h` file, and guarding code with `#ifdef&lt;br/&gt;
    HAVE_FEATURE`. The `cmake_config.h.in` template was modeled after&lt;br/&gt;
    the Autotools config file so that the feature guards share the same&lt;br/&gt;
    names.&lt;/p&gt;

&lt;p&gt;    While `load_gen.c` looks at first glance as if it were ported to Windows,&lt;br/&gt;
    it never actually was, so the erroneous `#include &quot;win32port.h&quot;` was&lt;br/&gt;
    removed, and the target is not built on Windows.&lt;/p&gt;

&lt;p&gt;    There are existent warnings which this patch did not attempt to fix.&lt;/p&gt;

&lt;p&gt;    A guard was placed around `#define snprintf` in order to enable&lt;br/&gt;
    compiling with modern versions of MSVC.&lt;/p&gt;

&lt;p&gt;    Fixed DLL_EXPORT and USE_STATIC_LIB redefinition.&lt;/p&gt;

&lt;p&gt;    As this commit deprecates (and breaks) the previously existing Visual&lt;br/&gt;
    Studio solutions and projects, they&apos;ve been removed.&lt;/p&gt;

&lt;p&gt;    Building tests on Windows is still not supported.&lt;/p&gt;

&lt;p&gt;commit bf53c535bcda4a92728140770482919055573ba0&lt;br/&gt;
Author: Andrew Schwartzmeyer &amp;lt;andrew@schwartzmeyer.com&amp;gt;&lt;br/&gt;
Date:   2017-07-07T22:35:37Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2841&quot; title=&quot;ZooKeeper public include files leak porting changes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2841&quot;&gt;&lt;del&gt;ZOOKEEPER-2841&lt;/del&gt;&lt;/a&gt;: ZooKeeper public include files leak porting changes&lt;/p&gt;

&lt;p&gt;    This patch refactors the Windows port of the C client. Notably, it moves&lt;br/&gt;
    as much porting code as possible out of the publicly included&lt;br/&gt;
    `winconfig.h` header and into the relevant source files. This also&lt;br/&gt;
    removes `winstdint.h` as it has been replaced by `&amp;lt;stdint.h&amp;gt;`. It fixes&lt;br/&gt;
    problems for upstream libraries by removing `#undef AF_INET6` and&lt;br/&gt;
    `#include &amp;lt;windows.h&amp;gt;`.&lt;/p&gt;

&lt;p&gt;    Future work should resolve the `ACL` / `ZKACL` conflict, and potentially&lt;br/&gt;
    remove `include/winconfig.h` altogether.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16091905" author="githubbot" created="Tue, 18 Jul 2017 17:58:00 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm this backports #306 to `branch-3.4`. I think I caught everything, but do give it a review. The build changed a bit between 3.4 and 3.5, so I had to remove some files from `CMakeLists.txt`, and I set the version to `3.4.10`. Then there were some fixes I had to do a bit differently (moved the `#define random` into `zookeeper.c` since `addrvec.c` wasn&apos;t created yet, reapply the changes I made to `zookeeper_interest` by hand, and one trivial merge conflict in `recordio.h`).&lt;/p&gt;

&lt;p&gt;    I build and ran the tests on Linux, all passing save:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
    1: Zookeeper_simpleSystem::testAsyncWatcherAutoResetterminate called after throwing an instance of &apos;CppUnit::Exception&apos;&lt;br/&gt;
    1:   what():  equality assertion failed&lt;br/&gt;
    1: - Expected: -101&lt;br/&gt;
    1: - Actual  : -4&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    which is odd. Is it a flaky test, or very machine dependent?&lt;/p&gt;

&lt;p&gt;    I built on Windows, and it all compiled and linked successfully. If you want, I can integration test it. I probably should anyway so I can move Mesos on Windows back to down to ZK 3.4 instead of 3.5.&lt;/p&gt;</comment>
                            <comment id="16091907" author="githubbot" created="Tue, 18 Jul 2017 17:58:51 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/306&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thanks for all your help @hanm! I added a PR for the `branch-3.4` port too.&lt;/p&gt;</comment>
                            <comment id="16091965" author="hadoopqa" created="Tue, 18 Jul 2017 18:29:36 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/886//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16092563" author="githubbot" created="Wed, 19 Jul 2017 04:51:17 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @andschwa Thanks for update. I will review this later this week in detail. Regarding the &quot;flaky&quot; test, AFAIK, this one is not particularly flaky (and in general, there are a lot less flaky tests in C client tests comparing to Java tests). The pre-commit build is green though. Did you observe fairly consistent failures for this `Zookeeper_simpleSystem::testAsyncWatcherAutoResetterminate`? One thing we can try is to run this test with and without your patch and see if there are any difference. Re integration tests - if you have time yeah please go ahead and try it.&lt;/p&gt;</comment>
                            <comment id="16093648" author="githubbot" created="Wed, 19 Jul 2017 19:26:11 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm While the Windows version of Mesos had been using ZooKeeper 3.5.2, the Linux version was using ZooKeeper 3.4.8. I took this patch and cherry-picked back to 3.4.8, and changed the Windows version of Mesos to use 3.4.8 with this patch. However, I also needed 97e598b6c (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1643&quot; title=&quot;Windows: fetch_and_add not 64bit-compatible, may not be correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1643&quot;&gt;&lt;del&gt;ZOOKEEPER-1643&lt;/del&gt;&lt;/a&gt;) in order to build, which is not in `branch-3.4`. Would you be willing to backport &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1643&quot; title=&quot;Windows: fetch_and_add not 64bit-compatible, may not be correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1643&quot;&gt;&lt;del&gt;ZOOKEEPER-1643&lt;/del&gt;&lt;/a&gt; too? If so, then we can switch to the next 3.4 release without any patches at all.&lt;/p&gt;

&lt;p&gt;    As for `Zookeeper_simpleSystem::testAsyncWatcherAutoReset`, I observed it failing consistently even on `branch-3.4` built with Autotools (i.e. none of my changes at all). I&apos;m inferring that it&apos;s a machine issue, and since it didn&apos;t fail on Jenkins, I don&apos;t think we need to worry about it.&lt;/p&gt;

&lt;p&gt;    Furthermore, with this patch &lt;em&gt;and&lt;/em&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1643&quot; title=&quot;Windows: fetch_and_add not 64bit-compatible, may not be correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1643&quot;&gt;&lt;del&gt;ZOOKEEPER-1643&lt;/del&gt;&lt;/a&gt; (currently in this branch), I was able to integration test with Mesos on Windows and Linux successfully.&lt;/p&gt;

&lt;p&gt;    CentOS 7:&lt;br/&gt;
    ```&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;==========&amp;#93;&lt;/span&gt; Running 7 tests from 1 test case.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; Global test environment set-up.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Auth&lt;br/&gt;
    [       OK ] ZooKeeperTest.Auth (6898 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation&lt;br/&gt;
    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (46 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Create&lt;br/&gt;
    [       OK ] ZooKeeperTest.Create (6728 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetector&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetector (70 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling&lt;br/&gt;
    2017-07-19 12:13:30,626:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:45292&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:30,642:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1757: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:45292&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (51 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (74 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderContender&lt;br/&gt;
    2017-07-19 12:13:30,759:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:44849&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:34,096:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1799: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:44849&amp;#93;&lt;/span&gt; zk retcode=-112, errno=116(Stale file handle): sessionId=0x15d5c44fa610000 has expired.&lt;br/&gt;
    2017-07-19 12:13:34,119:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:44849&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:34,121:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1799: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:44849&amp;#93;&lt;/span&gt; zk retcode=-112, errno=116(Stale file handle): sessionId=0x15d5c44fa610001 has expired.&lt;br/&gt;
    2017-07-19 12:13:34,142:200313(0x7fd96cfff700):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:44849&amp;#93;&lt;/span&gt; zk retcode=-4, errno=112(Host is down): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:34,153:200313(0x7fd99cb08700):ZOO_ERROR@handle_socket_error_msg@1757: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:44849&amp;#93;&lt;/span&gt; zk retcode=-4, errno=111(Connection refused): server refused to accept the client&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderContender (6787 ms)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest (20654 ms total)&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; Global test environment tear-down&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;==========&amp;#93;&lt;/span&gt; 7 tests from 1 test case ran. (20795 ms total)&lt;br/&gt;
    [  PASSED  ] 7 tests.&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    Windows 10:&lt;br/&gt;
    ```&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;==========&amp;#93;&lt;/span&gt; Running 7 tests from 1 test case.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; Global test environment set-up.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Auth&lt;br/&gt;
    [       OK ] ZooKeeperTest.Auth (7641 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.SessionTimeoutNegotiation&lt;br/&gt;
    [       OK ] ZooKeeperTest.SessionTimeoutNegotiation (71 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.Create&lt;br/&gt;
    [       OK ] ZooKeeperTest.Create (7018 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetector&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetector (93 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorTimeoutHandling&lt;br/&gt;
    2017-07-19 12:13:55,269:18232(0x53d8):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57541&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:55,271:18232(0x53d8):ZOO_ERROR@handle_socket_error_msg@1519: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57541&amp;#93;&lt;/span&gt; zk retcode=-4, errno=140(Unknown error): failed to send a handshake packet: Unknown error&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorTimeoutHandling (76 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderDetectorCancellationHandling&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderDetectorCancellationHandling (66 ms)&lt;br/&gt;
    [ RUN      ] ZooKeeperTest.LeaderContender&lt;br/&gt;
    2017-07-19 12:13:55,470:18232(0xaf4):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57557&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:55,473:18232(0xaf4):ZOO_ERROR@handle_socket_error_msg@1799: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57557&amp;#93;&lt;/span&gt; zk retcode=-112, errno=19(No such device): sessionId=0x15d5c455ad70000 has expired.&lt;br/&gt;
    2017-07-19 12:13:55,519:18232(0x4dfc):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57557&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:55,523:18232(0x4dfc):ZOO_ERROR@handle_socket_error_msg@1799: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57557&amp;#93;&lt;/span&gt; zk retcode=-112, errno=19(No such device): sessionId=0x15d5c455ad70001 has expired.&lt;br/&gt;
    2017-07-19 12:13:55,562:18232(0xc0c):ZOO_ERROR@handle_socket_error_msg@1781: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57557&amp;#93;&lt;/span&gt; zk retcode=-4, errno=32(Broken pipe): failed while receiving a server response&lt;br/&gt;
    2017-07-19 12:13:55,564:18232(0xc0c):ZOO_ERROR@handle_socket_error_msg@1519: Socket &lt;span class=&quot;error&quot;&gt;&amp;#91;127.0.0.1:57557&amp;#93;&lt;/span&gt; zk retcode=-4, errno=140(Unknown error): failed to send a handshake packet: Unknown error&lt;br/&gt;
    [       OK ] ZooKeeperTest.LeaderContender (714 ms)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; 7 tests from ZooKeeperTest (15727 ms total)&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;----------&amp;#93;&lt;/span&gt; Global test environment tear-down&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;==========&amp;#93;&lt;/span&gt; 7 tests from 1 test case ran. (16802 ms total)&lt;br/&gt;
    [  PASSED  ] 7 tests.&lt;br/&gt;
    ```&lt;/p&gt;</comment>
                            <comment id="16093653" author="githubbot" created="Wed, 19 Jul 2017 19:29:15 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    `branch-3.5` has &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1643&quot; title=&quot;Windows: fetch_and_add not 64bit-compatible, may not be correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1643&quot;&gt;&lt;del&gt;ZOOKEEPER-1643&lt;/del&gt;&lt;/a&gt;, so this patch should just be good to go. It was integration tested.&lt;/p&gt;</comment>
                            <comment id="16093654" author="hadoopqa" created="Wed, 19 Jul 2017 19:30:02 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 12 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/892//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16093655" author="hadoopqa" created="Wed, 19 Jul 2017 19:30:02 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/893//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16093656" author="githubbot" created="Wed, 19 Jul 2017 19:30:21 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;This tree&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/andschwa/zookeeper/tree/cmake-backport-3.4.8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andschwa/zookeeper/tree/cmake-backport-3.4.8&lt;/a&gt;) is the exact patch I tested on Windows with the 3.4.8 tarball.&lt;/p&gt;</comment>
                            <comment id="16093709" author="hadoopqa" created="Wed, 19 Jul 2017 20:00:23 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/891//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16094172" author="githubbot" created="Thu, 20 Jul 2017 04:52:36 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt; Would you be willing to backport &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1643&quot; title=&quot;Windows: fetch_and_add not 64bit-compatible, may not be correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1643&quot;&gt;&lt;del&gt;ZOOKEEPER-1643&lt;/del&gt;&lt;/a&gt; too? &lt;/p&gt;

&lt;p&gt;    Sounds good to me. I don&apos;t see why this change should not be part of 3.4 release.&lt;/p&gt;

&lt;p&gt;    &amp;gt;&amp;gt; I observed it failing consistently even on branch-3.4 built with Autotools&lt;/p&gt;

&lt;p&gt;    Hmm, that is interesting. I did not remember this test was ever on radar. I&apos;ll try run it on my env and see what i got.&lt;/p&gt;</comment>
                            <comment id="16104045" author="githubbot" created="Thu, 27 Jul 2017 22:50:15 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Regarding `testAsyncWatcherAutoResetterminate`:&lt;br/&gt;
    I ran c tests on linux and don&apos;t observe consistent failure of  with this patch.  &lt;/p&gt;

&lt;p&gt;    Otherwise lgtm, I am merging this in 3.4.&lt;/p&gt;</comment>
                            <comment id="16104050" author="githubbot" created="Thu, 27 Jul 2017 22:55:36 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Actually, @andschwa Can you please update the PR to remove the port of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1643&quot; title=&quot;Windows: fetch_and_add not 64bit-compatible, may not be correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1643&quot;&gt;&lt;del&gt;ZOOKEEPER-1643&lt;/del&gt;&lt;/a&gt; (&lt;a href=&quot;https://github.com/apache/zookeeper/pull/313/commits/7776bd61c625c8b363655ab7244fa9f33e5f2198)?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313/commits/7776bd61c625c8b363655ab7244fa9f33e5f2198)?&lt;/a&gt; I will do a separate commit to pick that up into branch-3.4 after this PR being merged. &lt;/p&gt;

&lt;p&gt;    Doing it separately avoid messing up two different credentials associated with two separate commits - that is  a limitation of current commit script we have. Plus back port of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1643&quot; title=&quot;Windows: fetch_and_add not 64bit-compatible, may not be correct&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1643&quot;&gt;&lt;del&gt;ZOOKEEPER-1643&lt;/del&gt;&lt;/a&gt; deserves its separate commit for the record.&lt;/p&gt;</comment>
                            <comment id="16104054" author="githubbot" created="Thu, 27 Jul 2017 22:58:40 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM. The failing precommit test is not relevant to this patch and should already be fixed by commit 837b37636201ee9aca4cbbb962d18a7883e14c1b. &lt;/p&gt;</comment>
                            <comment id="16104056" author="githubbot" created="Thu, 27 Jul 2017 23:02:57 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Committed to 3.5. Thanks for the work, and please close the pull request. @andschwa &lt;/p&gt;</comment>
                            <comment id="16104083" author="githubbot" created="Thu, 27 Jul 2017 23:34:18 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thank you!&lt;/p&gt;</comment>
                            <comment id="16104084" author="githubbot" created="Thu, 27 Jul 2017 23:34:19 +0000"  >&lt;p&gt;Github user andschwa closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/311&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/311&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16105682" author="githubbot" created="Fri, 28 Jul 2017 21:11:02 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm I figured you&apos;d probably need that given your commit scripts. Fixing.&lt;/p&gt;</comment>
                            <comment id="16105685" author="githubbot" created="Fri, 28 Jul 2017 21:11:56 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    It&apos;s fixed now.&lt;/p&gt;</comment>
                            <comment id="16105687" author="hadoopqa" created="Fri, 28 Jul 2017 21:15:10 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 9 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/907//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16109131" author="hanm" created="Tue, 1 Aug 2017 15:48:54 +0000"  >&lt;p&gt;Resolving issue after committing to 3.5 and 3.4:&lt;br/&gt;
3.5: &lt;a href=&quot;https://github.com/apache/zookeeper/commit/2c08d794dfd89408aff3c853f68753555ed6acea&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/2c08d794dfd89408aff3c853f68753555ed6acea&lt;/a&gt;&lt;br/&gt;
3.4: &lt;a href=&quot;https://github.com/apache/zookeeper/commit/ce67fdd46fdc2eba8f4d546739dc486a5cd2dbb4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/ce67fdd46fdc2eba8f4d546739dc486a5cd2dbb4&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16109135" author="githubbot" created="Tue, 1 Aug 2017 15:49:47 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @andschwa merged, please close this pull request.&lt;/p&gt;</comment>
                            <comment id="16109370" author="githubbot" created="Tue, 1 Aug 2017 17:34:18 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Huzzah!&lt;/p&gt;</comment>
                            <comment id="16109371" author="githubbot" created="Tue, 1 Aug 2017 17:34:19 +0000"  >&lt;p&gt;Github user andschwa closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/313&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/313&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310051">
                    <name>Supercedes</name>
                                            <outwardlinks description="supercedes">
                                        <issuelink>
            <issuekey id="12993119">ZOOKEEPER-2491</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13063941">ZOOKEEPER-2756</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3h9hj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>cmake is added to replace the existing hardcoded (and outdated) visual studio solutions for windows platform.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>