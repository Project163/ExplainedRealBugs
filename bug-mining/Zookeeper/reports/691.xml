<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:57:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2178] Native client fails compilation on Windows.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2178</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Due to several recent changes, the native client fails to compile on Windows:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-827&quot; title=&quot;enable r/o mode in C client library&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-827&quot;&gt;&lt;del&gt;ZOOKEEPER-827&lt;/del&gt;&lt;/a&gt; (read-only mode) mismatched a function return type between the declaration and definition.&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1626&quot; title=&quot;Zookeeper C client should be tolerant of clock adjustments &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1626&quot;&gt;&lt;del&gt;ZOOKEEPER-1626&lt;/del&gt;&lt;/a&gt; (monotonic clock for tolerance to time adjustments) added an include of unistd.h, which does not exist on Windows.&lt;/li&gt;
	&lt;li&gt;Additionally, &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1626&quot; title=&quot;Zookeeper C client should be tolerant of clock adjustments &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1626&quot;&gt;&lt;del&gt;ZOOKEEPER-1626&lt;/del&gt;&lt;/a&gt; did not implement a code path for accessing the Windows monotonic clock.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="12826750">ZOOKEEPER-2178</key>
            <summary>Native client fails compilation on Windows.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cnauroth">Chris Nauroth</assignee>
                                    <reporter username="cnauroth">Chris Nauroth</reporter>
                        <labels>
                    </labels>
                <created>Sat, 2 May 2015 20:29:14 +0000</created>
                <updated>Tue, 14 Mar 2017 04:32:31 +0000</updated>
                            <resolved>Mon, 1 Jun 2015 06:48:26 +0000</resolved>
                                    <version>3.5.0</version>
                                    <fixVersion>3.5.1</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>c client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14525468" author="cnauroth" created="Sat, 2 May 2015 20:32:32 +0000"  >&lt;p&gt;I spotted the problem while reviewing Jenkins builds:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/view/All/job/ZooKeeper-trunk-WinVS2008/1783/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/All/job/ZooKeeper-trunk-WinVS2008/1783/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m attaching a patch.  Testing through the native CLI looks good so far.&lt;/p&gt;

&lt;p&gt;This corrects the mismatched method signature, removes the include of unistd.h, and implements calls to &lt;tt&gt;QueryPerformanceCounter&lt;/tt&gt; for Windows.  We still include unistd.h on non-Windows, because there was an existing include of unistd.h guarded by an &lt;tt&gt;#ifndef _WIN32&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Here is the relevant API documentation for the Windows functions called by the patch:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/ms644905(v=vs.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://msdn.microsoft.com/en-us/library/ms644905(v=vs.85).aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/ms644904(VS.85).aspx&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://msdn.microsoft.com/en-us/library/ms644904(VS.85).aspx&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/dn553408(v=vs.85).aspx#examples_for_acquiring_time_stamps&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://msdn.microsoft.com/en-us/library/dn553408(v=vs.85).aspx#examples_for_acquiring_time_stamps&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14566985" author="michim" created="Mon, 1 Jun 2015 06:45:28 +0000"  >&lt;p&gt;+1 good catch. Thanks Chris!&lt;/p&gt;</comment>
                            <comment id="14566986" author="michim" created="Mon, 1 Jun 2015 06:48:26 +0000"  >&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1682823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1682823&lt;/a&gt;&lt;br/&gt;
branch-3.5: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1682825&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1682825&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14566990" author="hadoopqa" created="Mon, 1 Jun 2015 06:53:46 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12729979/ZOOKEEPER-2178.001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12729979/ZOOKEEPER-2178.001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1682701.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2733//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2733//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2733//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2733//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2733//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2733//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14567000" author="hudson" created="Mon, 1 Jun 2015 07:05:32 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2711 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2711/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2711/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2178&quot; title=&quot;Native client fails compilation on Windows.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2178&quot;&gt;&lt;del&gt;ZOOKEEPER-2178&lt;/del&gt;&lt;/a&gt; Native client fails compilation on Windows. (Chris Nauroth via michim) (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1682823&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1682823&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/src/zookeeper.c&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14567002" author="michim" created="Mon, 1 Jun 2015 07:11:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk-WinVS2008/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk-WinVS2008/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14567392" author="cnauroth" created="Mon, 1 Jun 2015 14:59:30 +0000"  >&lt;p&gt;Michi, thank you for the review and commit.&lt;/p&gt;</comment>
                            <comment id="15923534" author="githubbot" created="Tue, 14 Mar 2017 04:13:06 +0000"  >&lt;p&gt;GitHub user hanm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2178&quot; title=&quot;Native client fails compilation on Windows.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2178&quot;&gt;&lt;del&gt;ZOOKEEPER-2178&lt;/del&gt;&lt;/a&gt;: fix flaky StandaloneDisabledTest&lt;/p&gt;

&lt;p&gt;    The flaky (that existing for a long time) is caused by a ghost server that although not appear in the quorum&apos;s config but still up and running and send requests to the quorum &lt;/p&gt;
{2, 3, 4}
&lt;p&gt;. Fix is simply kill the server 1 after it&apos;s used. Verified that with the fix the test survive stress test (100+ runs) while w/o the fix the tests fails frequently, on internal Jenkins machine.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hanm/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hanm/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2178&quot; title=&quot;Native client fails compilation on Windows.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2178&quot;&gt;&lt;del&gt;ZOOKEEPER-2178&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/190.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/190.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #190&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 85d4fb7fb5769a7c95b93588ab2357aa3d7f4242&lt;br/&gt;
Author: Michael Han &amp;lt;hanm@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-03-14T03:48:03Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2178&quot; title=&quot;Native client fails compilation on Windows.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2178&quot;&gt;&lt;del&gt;ZOOKEEPER-2178&lt;/del&gt;&lt;/a&gt;: org.apache.zookeeper.server.quorum.StandaloneDisabledTest fails intermittently.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15923536" author="githubbot" created="Tue, 14 Mar 2017 04:13:52 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/190&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/190&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @shralex You might want to take a look at this one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15923542" author="hanm" created="Tue, 14 Mar 2017 04:19:12 +0000"  >&lt;p&gt;^ ignore above comments made by build bot please. Wrong JIRA number was used &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15923557" author="hadoopqa" created="Tue, 14 Mar 2017 04:32:31 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/408//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/408//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/408//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/408//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/408//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/408//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12469841">ZOOKEEPER-827</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12628594">ZOOKEEPER-1626</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12729979" name="ZOOKEEPER-2178.001.patch" size="1744" author="cnauroth" created="Sat, 2 May 2015 20:32:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2e7sn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>