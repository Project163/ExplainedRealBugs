<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:54:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-1646] mt c client tests fail on Ubuntu Raring</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1646</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Misc tests fail in the c client binding under the current Ubuntu development release:&lt;/p&gt;

&lt;p&gt;./zktest-mt &lt;br/&gt;
 ZooKeeper server startedRunning &lt;br/&gt;
Zookeeper_clientretry::testRetry ZooKeeper server started ZooKeeper server started : elapsed 9315 : OK&lt;br/&gt;
Zookeeper_operations::testAsyncWatcher1 : assertion : elapsed 1054&lt;br/&gt;
Zookeeper_operations::testAsyncGetOperation : assertion : elapsed 1055&lt;br/&gt;
Zookeeper_operations::testOperationsAndDisconnectConcurrently1 : assertion : elapsed 1066&lt;br/&gt;
Zookeeper_operations::testOperationsAndDisconnectConcurrently2 : elapsed 0 : OK&lt;br/&gt;
Zookeeper_operations::testConcurrentOperations1 : assertion : elapsed 1055&lt;br/&gt;
Zookeeper_init::testBasic : elapsed 1 : OK&lt;br/&gt;
Zookeeper_init::testAddressResolution : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testMultipleAddressResolution : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testNullAddressString : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testEmptyAddressString : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testOneSpaceAddressString : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testTwoSpacesAddressString : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testInvalidAddressString1 : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testInvalidAddressString2 : elapsed 175 : OK&lt;br/&gt;
Zookeeper_init::testNonexistentHost : elapsed 92 : OK&lt;br/&gt;
Zookeeper_init::testOutOfMemory_init : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testOutOfMemory_getaddrs1 : elapsed 0 : OK&lt;br/&gt;
Zookeeper_init::testOutOfMemory_getaddrs2 : elapsed 1 : OK&lt;br/&gt;
Zookeeper_init::testPermuteAddrsList : elapsed 0 : OK&lt;br/&gt;
Zookeeper_close::testIOThreadStoppedOnExpire : assertion : elapsed 1056&lt;br/&gt;
Zookeeper_close::testCloseUnconnected : elapsed 0 : OK&lt;br/&gt;
Zookeeper_close::testCloseUnconnected1 : elapsed 91 : OK&lt;br/&gt;
Zookeeper_close::testCloseConnected1 : assertion : elapsed 1056&lt;br/&gt;
Zookeeper_close::testCloseFromWatcher1 : assertion : elapsed 1076&lt;br/&gt;
Zookeeper_simpleSystem::testAsyncWatcherAutoReset ZooKeeper server started : elapsed 12155 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testDeserializeString : elapsed 0 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testNullData : elapsed 1031 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testIPV6 : elapsed 1005 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testPath : elapsed 1024 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testPathValidation : elapsed 1053 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testPing : elapsed 17287 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testAcl : elapsed 1019 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testChroot : elapsed 3052 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testAuth : assertion : elapsed 7010&lt;br/&gt;
Zookeeper_simpleSystem::testHangingClient : elapsed 1015 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testWatcherAutoResetWithGlobal ZooKeeper server started ZooKeeper server started ZooKeeper server started : elapsed 20556 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testWatcherAutoResetWithLocal ZooKeeper server started ZooKeeper server started ZooKeeper server started : elapsed 20563 : OK&lt;br/&gt;
Zookeeper_simpleSystem::testGetChildren2 : elapsed 1041 : OK&lt;br/&gt;
Zookeeper_multi::testCreate : elapsed 1017 : OK&lt;br/&gt;
Zookeeper_multi::testCreateDelete : elapsed 1007 : OK&lt;br/&gt;
Zookeeper_multi::testInvalidVersion : elapsed 1011 : OK&lt;br/&gt;
Zookeeper_multi::testNestedCreate : elapsed 1009 : OK&lt;br/&gt;
Zookeeper_multi::testSetData : elapsed 6019 : OK&lt;br/&gt;
Zookeeper_multi::testUpdateConflict : elapsed 1014 : OK&lt;br/&gt;
Zookeeper_multi::testDeleteUpdateConflict : elapsed 1007 : OK&lt;br/&gt;
Zookeeper_multi::testAsyncMulti : elapsed 2001 : OK&lt;br/&gt;
Zookeeper_multi::testMultiFail : elapsed 1006 : OK&lt;br/&gt;
Zookeeper_multi::testCheck : elapsed 1020 : OK&lt;br/&gt;
Zookeeper_multi::testWatch : elapsed 2013 : OK&lt;br/&gt;
Zookeeper_watchers::testDefaultSessionWatcher1zktest-mt: tests/ZKMocks.cc:271: SyncedBoolCondition DeliverWatchersWrapper::isDelivered() const: Assertion `i&amp;lt;1000&apos; failed.&lt;br/&gt;
Aborted (core dumped)&lt;/p&gt;

&lt;p&gt;It would appear that the zookeeper connection does not transition to connected within the required time; I increased the time allowed but no change.&lt;/p&gt;

&lt;p&gt;Ubuntu raring has glibc 2.17; the test suite works fine on previous Ubuntu releases and this is the only difference that stood out.&lt;/p&gt;

&lt;p&gt;Interestingly the cli_mt worked just fine connecting to the same zookeeper instance that the tests left lying around so I&apos;m assuming this is a test error rather than an actual bug.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu 13.04 (raring), glibc 2.17&lt;/p&gt;</environment>
        <key id="12631918">ZOOKEEPER-1646</key>
            <summary>mt c client tests fail on Ubuntu Raring</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="phunt">Patrick D. Hunt</assignee>
                                    <reporter username="javacruft">James Page</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Feb 2013 10:07:43 +0000</created>
                <updated>Thu, 13 Mar 2014 18:17:03 +0000</updated>
                            <resolved>Thu, 17 Oct 2013 17:08:55 +0000</resolved>
                                    <version>3.4.5</version>
                    <version>3.5.0</version>
                                    <fixVersion>3.4.6</fixVersion>
                    <fixVersion>3.5.0</fixVersion>
                                    <component>c client</component>
                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13791725" author="phunt" created="Thu, 10 Oct 2013 17:48:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1646&quot; title=&quot;mt c client tests fail on Ubuntu Raring&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1646&quot;&gt;&lt;del&gt;ZOOKEEPER-1646&lt;/del&gt;&lt;/a&gt; is the same issue as my comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1742&quot; title=&quot;&amp;quot;make check&amp;quot; doesn&amp;#39;t work on macos&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1742&quot;&gt;ZOOKEEPER-1742&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;see: &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1742?focusedCommentId=13790629&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13790629&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-1742?focusedCommentId=13790629&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13790629&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13794249" author="fpj" created="Mon, 14 Oct 2013 16:25:43 +0000"  >&lt;p&gt;Just so that I understand, in your comment in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1742&quot; title=&quot;&amp;quot;make check&amp;quot; doesn&amp;#39;t work on macos&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1742&quot;&gt;ZOOKEEPER-1742&lt;/a&gt;, you say that you&apos;re observing this problem only on trunk, so why is it a blocker for 3.4.6?&lt;/p&gt;</comment>
                            <comment id="13794273" author="phunt" created="Mon, 14 Oct 2013 16:59:48 +0000"  >&lt;p&gt;I reported two issues on &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1742&quot; title=&quot;&amp;quot;make check&amp;quot; doesn&amp;#39;t work on macos&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1742&quot;&gt;ZOOKEEPER-1742&lt;/a&gt;; one that only happens on 3.4 branch (this one), and another one that only happens on trunk (&quot;tests/TestReconfigServer.cc:128:16: error: &#8216;sleep&#8217; was not declared in this scope&quot;)&lt;/p&gt;

&lt;p&gt;I&apos;m looking into this one. So far I&apos;ve figured out it doesn&apos;t seem to be a timing issue - the notification is never sent to the watcher, even after extending the timeout to 10 seconds (from 1). However I haven&apos;t gotten much further - the C++ code is cumbersome.&lt;/p&gt;</comment>
                            <comment id="13794641" author="phunt" created="Mon, 14 Oct 2013 23:37:18 +0000"  >&lt;p&gt;Once &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1795&quot; title=&quot;unable to build c client on ubuntu&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1795&quot;&gt;&lt;del&gt;ZOOKEEPER-1795&lt;/del&gt;&lt;/a&gt; is applied I&apos;m seeing this on trunk as well.&lt;/p&gt;</comment>
                            <comment id="13796483" author="phunt" created="Wed, 16 Oct 2013 06:55:22 +0000"  >&lt;p&gt;Oddly the problem only occurs when -O2 compiler flag is used. When I drop -O2 the test passes.&lt;/p&gt;

&lt;p&gt;It seems that glibc is doing some magic under the covers, see this for background:&lt;br/&gt;
&lt;a href=&quot;https://wiki.ubuntu.com/ToolChain/CompilerFlags#A-D_FORTIFY_SOURCE.3D2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://wiki.ubuntu.com/ToolChain/CompilerFlags#A-D_FORTIFY_SOURCE.3D2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the case of the poll system call it&apos;s interposing a &quot;fortified&quot; poll call as can be seen in this file&lt;br/&gt;
&lt;a href=&quot;http://code.woboq.org/userspace/glibc/io/bits/poll2.h.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://code.woboq.org/userspace/glibc/io/bits/poll2.h.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;which is causing our poll mock to be ignored, but only when -O2 is used - inlining the function it seems.&lt;/p&gt;

&lt;p&gt;I have a basic patch that looks like it addresses the issue, I&apos;ll clean it up and submit soon.&lt;/p&gt;</comment>
                            <comment id="13796498" author="phunt" created="Wed, 16 Oct 2013 07:25:12 +0000"  >&lt;p&gt;This patch fixes the issue for me on raring.&lt;/p&gt;</comment>
                            <comment id="13796526" author="hadoopqa" created="Wed, 16 Oct 2013 08:05:14 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12608671/ZOOKEEPER-1646.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12608671/ZOOKEEPER-1646.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1532152.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1701//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1701//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1701//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1701//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1701//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/1701//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13798082" author="mahadev" created="Thu, 17 Oct 2013 16:53:15 +0000"  >&lt;p&gt;+1 for the patch. Nice catch Pat!&lt;/p&gt;</comment>
                            <comment id="13798102" author="phunt" created="Thu, 17 Oct 2013 17:08:55 +0000"  >&lt;p&gt;Committed to 3.4.6 and trunk.&lt;/p&gt;</comment>
                            <comment id="13799014" author="hudson" created="Fri, 18 Oct 2013 11:09:04 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2093 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2093/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2093/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1646&quot; title=&quot;mt c client tests fail on Ubuntu Raring&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1646&quot;&gt;&lt;del&gt;ZOOKEEPER-1646&lt;/del&gt;&lt;/a&gt;. mt c client tests fail on Ubuntu Raring (phunt) (phunt: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1533161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1533161&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/c/tests/LibCMocks.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13933742" author="fpj" created="Thu, 13 Mar 2014 18:17:03 +0000"  >&lt;p&gt;Closing issues after releasing 3.4.6.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12664858">ZOOKEEPER-1742</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12673756">ZOOKEEPER-1795</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12608671" name="ZOOKEEPER-1646.patch" size="711" author="phunt" created="Wed, 16 Oct 2013 07:25:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312414</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1hwwv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>312760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>