<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:58:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2467] NullPointerException when redo Command is passed negative value</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2467</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;When negative value of argument is passed to redo command .&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;zk: localhost:2181(CONNECTED) 0&amp;#93;&lt;/span&gt; redo -1&lt;br/&gt;
Exception in thread &quot;main&quot; java.lang.NullPointerException&lt;br/&gt;
        at java.util.StringTokenizer.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
        at java.util.StringTokenizer.&amp;lt;init&amp;gt;(Unknown Source)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeperMain$MyCommandOptions.parseCommand(ZooKeeperMain.java:227)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeperMain.processZKCmd(ZooKeeperMain.java:645)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeperMain.processCmd(ZooKeeperMain.java:588)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeperMain.executeLine(ZooKeeperMain.java:360)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeperMain.run(ZooKeeperMain.java:323)&lt;br/&gt;
        at org.apache.zookeeper.ZooKeeperMain.main(ZooKeeperMain.java:282)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux , windows&lt;/p&gt;</environment>
        <key id="12987367">ZOOKEEPER-2467</key>
            <summary>NullPointerException when redo Command is passed negative value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshsingh">Rakesh Kumar Singh</assignee>
                                    <reporter username="joshi.shankar">Joshi Shankar</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jul 2016 02:51:02 +0000</created>
                <updated>Fri, 31 Mar 2017 09:01:13 +0000</updated>
                            <resolved>Sun, 16 Oct 2016 13:18:38 +0000</resolved>
                                    <version>3.4.8</version>
                    <version>3.5.1</version>
                    <version>3.5.2</version>
                                    <fixVersion>3.4.10</fixVersion>
                    <fixVersion>3.5.3</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>java client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15365515" author="joshi.shankar" created="Thu, 7 Jul 2016 02:54:03 +0000"  >&lt;p&gt;will provide patch for this.&lt;/p&gt;</comment>
                            <comment id="15370162" author="hadoopqa" created="Mon, 11 Jul 2016 04:49:00 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12817025/ZOOKEEPER-2467.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12817025/ZOOKEEPER-2467.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1750739.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3269//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3269//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3269//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3269//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3269//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3269//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15401806" author="hadoopqa" created="Mon, 1 Aug 2016 10:29:29 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12821299/ZOOKEEPER-2467.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12821299/ZOOKEEPER-2467.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1754582.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3313//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3313//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15401808" author="hadoopqa" created="Mon, 1 Aug 2016 10:35:23 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12821299/ZOOKEEPER-2467.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12821299/ZOOKEEPER-2467.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1754582.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3314//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3314//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15401811" author="fpj" created="Mon, 1 Aug 2016 10:37:26 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshi.shankar&quot; class=&quot;user-hover&quot; rel=&quot;joshi.shankar&quot;&gt;joshi.shankar&lt;/a&gt;, the change makes sense. I&apos;m wondering if in the test case would be better to try/catch any exception that comes across and fail the test rather than let the exception bubble up.&lt;/p&gt;</comment>
                            <comment id="15401815" author="joshi.shankar" created="Mon, 1 Aug 2016 10:40:11 +0000"  >&lt;p&gt;will do it.. Thanks &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15402313" author="hadoopqa" created="Mon, 1 Aug 2016 16:09:32 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12821348/ZOOKEEPER-2467-1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12821348/ZOOKEEPER-2467-1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1754582.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3316//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3316//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15402407" author="hadoopqa" created="Mon, 1 Aug 2016 16:58:38 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12821354/ZOOKEEPER-2467-final.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12821354/ZOOKEEPER-2467-final.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1754582.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3317//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3317//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3317//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3317//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3317//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3317//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15402711" author="fpj" created="Mon, 1 Aug 2016 19:55:06 +0000"  >&lt;p&gt;Thanks for the updated patch, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshi.shankar&quot; class=&quot;user-hover&quot; rel=&quot;joshi.shankar&quot;&gt;joshi.shankar&lt;/a&gt;. I have a few comments, though:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;The format seems to be broken, the try/catch block doesn&apos;t have the right indentation.&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;testCliCommandsNotEchoingUsage&lt;/tt&gt; is not the best method to include this test. We aren&apos;t testing whether redo is echoing usage, but instead that it isn&apos;t throwing an NPE with negative values. One suggestion is to have a test case called &lt;tt&gt;testRedoNegativeCmdNumber&lt;/tt&gt; in the same class and add the redo test there.&lt;/li&gt;
	&lt;li&gt;The test cases in the &lt;tt&gt;ZooKeeperTest&lt;/tt&gt; class throw &lt;tt&gt;Exception&lt;/tt&gt; so it is actually better that we do it to follow the pattern here. We should still fail in the case it throws an exception, but instead of swallowing it, I suggest we rethrow.&lt;/li&gt;
	&lt;li&gt;We might consider adding an implementation of &lt;tt&gt;RedoCommand&lt;/tt&gt; that extends &lt;tt&gt;CliCommand&lt;/tt&gt; to be able to check the output, like in &lt;tt&gt;testSortedLs()&lt;/tt&gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Here is roughly how it should look like:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;   @Test
    public void testRedoNegativeCmdNumber() throws Exception {
       try {
           String cmd = &quot;redo -1&quot;;
           zkMain.executeLine(cmd);
           // check that the output matches
           ...
       } (Exception e) {
           fail(&quot;Failed to excute redo command with negative number&quot;);
           throw e;
       }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;  </comment>
                            <comment id="15402714" author="fpj" created="Mon, 1 Aug 2016 19:55:37 +0000"  >&lt;p&gt;Canceling to sort out comments and suggestions.&lt;/p&gt;</comment>
                            <comment id="15551646" author="rakeshsingh" created="Thu, 6 Oct 2016 11:11:08 +0000"  >&lt;p&gt;Pls review&lt;/p&gt;</comment>
                            <comment id="15551689" author="hadoopqa" created="Thu, 6 Oct 2016 11:36:27 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12831939/ZOOKEEPER-2467.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12831939/ZOOKEEPER-2467.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 8d0154bcc21e58b6166eb5e360f72ce37699e072.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3467//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3467//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3467//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3467//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3467//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3467//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15551693" author="rakeshr" created="Thu, 6 Oct 2016 11:38:38 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshsingh&quot; class=&quot;user-hover&quot; rel=&quot;rakeshsingh&quot;&gt;rakeshsingh&lt;/a&gt; for your interest and taking this ahead. Would you mind reading &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2467?focusedCommentId=15402711&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-15402711&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Flavio&apos;s comments&lt;/a&gt; and addressing the same.&lt;/p&gt;</comment>
                            <comment id="15551805" author="rakeshsingh" created="Thu, 6 Oct 2016 12:27:04 +0000"  >&lt;p&gt;Thanks Joshi for this issue, as i had offline discussion with you i am taking this issue forward for complete.&lt;/p&gt;</comment>
                            <comment id="15554209" author="rakeshsingh" created="Fri, 7 Oct 2016 05:45:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;rakeshr&lt;/a&gt; i have covered 3 suggestions mentioned by Flavio Junqueira but i feel 4th point is not valid. As redo command is not any specific (separate) command but calling other commands and hence it calls the corresponding exec() implementation and we may not be able to define any sepefic exec() implementation for redo command.&lt;/p&gt;</comment>
                            <comment id="15554216" author="rakeshsingh" created="Fri, 7 Oct 2016 05:48:16 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;fpj&lt;/a&gt;, i have covered 3 suggestions mentioned by you but i think 4th point may not be valid. As redo command is not any specific (separate) command but calling other commands and hence it calls the corresponding exec() implementation and we may not be able to define any sepefic exec() implementation for redo command. Pls input your feedback. Thanks&lt;/p&gt;</comment>
                            <comment id="15557916" author="fpj" created="Sat, 8 Oct 2016 12:52:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;//&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2587&quot; title=&quot;Not handled negative scenario for redo command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2587&quot;&gt;&lt;del&gt;ZOOKEEPER-2587&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2467&quot; title=&quot;NullPointerException when redo Command is passed negative value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2467&quot;&gt;&lt;del&gt;ZOOKEEPER-2467&lt;/del&gt;&lt;/a&gt; : Not handled negative scenario for redo command&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Refer only to &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2467&quot; title=&quot;NullPointerException when redo Command is passed negative value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2467&quot;&gt;&lt;del&gt;ZOOKEEPER-2467&lt;/del&gt;&lt;/a&gt;, please. Also, say instead something like &quot;Testing negative number for redo command&quot;.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;catch(Exception e)&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Don&apos;t catch an exception generically, only the one you&apos;re testing for and let the others bubble up if any.&lt;/p&gt;

&lt;p&gt;Indentation and formating in general are broken, please review it.&lt;/p&gt;</comment>
                            <comment id="15559137" author="rakeshr" created="Sun, 9 Oct 2016 02:57:06 +0000"  >&lt;p&gt;Like &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;fpj&lt;/a&gt; mentioned earlier, it is good to assert the output/error message. One idea is to redirect the err stream something similar to &lt;tt&gt;ZooKeeperTest#testCliCommandsNotEchoingUsage&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;How about something like,&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-comment&quot;&gt;// ZOOKEEPER-2467 : Testing negative number &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; redo command
&lt;/span&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testCliCommandHandleNegativeScenarioForRedoCmd()
            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ZooKeeper zk = createClient();
        ZooKeeperMain zkMain = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ZooKeeperMain(zk);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; cmd1 = &lt;span class=&quot;code-quote&quot;&gt;&quot;redo -1&quot;&lt;/span&gt;;

        &lt;span class=&quot;code-comment&quot;&gt;// setup redirect out/err streams to get &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.in/err, use &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// judiciously!
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PrintStream systemErr = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.err; &lt;span class=&quot;code-comment&quot;&gt;// get current err
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ByteArrayOutputStream errContent = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayOutputStream();
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setErr(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PrintStream(errContent));
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            zkMain.executeLine(cmd1);
            Assert.assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Command index out of range&quot;&lt;/span&gt;,
                    errContent.toString().trim());
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// revert redirect of out/err streams - important step!
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setErr(systemErr);
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15574431" author="rakeshsingh" created="Fri, 14 Oct 2016 06:40:29 +0000"  >&lt;p&gt;Uploading patch. Pls review and submit if fine.&lt;/p&gt;</comment>
                            <comment id="15574433" author="rakeshsingh" created="Fri, 14 Oct 2016 06:40:59 +0000"  >&lt;p&gt;Thanks Rakesh.&lt;/p&gt;</comment>
                            <comment id="15574492" author="hadoopqa" created="Fri, 14 Oct 2016 07:10:00 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12833310/ZOOKEEPER-2467.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12833310/ZOOKEEPER-2467.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision f78061aafb19b102c37cb6d744ec6258d5f5b66e.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3490//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3490//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3490//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3490//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3490//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3490//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15575545" author="rakeshr" created="Fri, 14 Oct 2016 14:42:48 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshkumarsingh&quot; class=&quot;user-hover&quot; rel=&quot;rakeshkumarsingh&quot;&gt;rakeshkumarsingh&lt;/a&gt;. +1, latest patch looks good to me.&lt;/p&gt;

&lt;p&gt;I will wait one more day to see any comments from others and commit this during weekend.&lt;/p&gt;</comment>
                            <comment id="15579952" author="hadoopqa" created="Sun, 16 Oct 2016 13:09:18 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12833640/ZOOKEEPER-2467.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12833640/ZOOKEEPER-2467.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 422058c222a8a31ec7cfd4113fbdc036181f751d.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 4 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3491//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3491//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15579964" author="rakeshr" created="Sun, 16 Oct 2016 13:18:38 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;fpj&lt;/a&gt; for the reviews.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshsingh&quot; class=&quot;user-hover&quot; rel=&quot;rakeshsingh&quot;&gt;rakeshsingh&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joshi.shankar&quot; class=&quot;user-hover&quot; rel=&quot;joshi.shankar&quot;&gt;joshi.shankar&lt;/a&gt; for the contribution.&lt;/p&gt;

&lt;p&gt;Branch 3.4: Committed git revision a601b032915e85a5f693e7ef247700fefb950a12.&lt;br/&gt;
Branch 3.5: Committed git revision 3cd87f06911c6fd806364bf46ae074e7c6096452.&lt;br/&gt;
Trunk: Committed git revision 422058c222a8a31ec7cfd4113fbdc036181f751d.&lt;/p&gt;</comment>
                            <comment id="15579968" author="rakeshr" created="Sun, 16 Oct 2016 13:21:00 +0000"  >&lt;p&gt;Attached committed patches to the jira. Following are the modifictions.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Test case is renamed to &lt;tt&gt;testRedoWithNegativeCmdNumber&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;Used &lt;tt&gt;System.setOut()&lt;/tt&gt; in branch3-4 patch&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15579998" author="hudson" created="Sun, 16 Oct 2016 13:47:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #3121 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3121/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3121/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2467&quot; title=&quot;NullPointerException when redo Command is passed negative value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2467&quot;&gt;&lt;del&gt;ZOOKEEPER-2467&lt;/del&gt;&lt;/a&gt;: NullPointerException when redo Command is passed (rakeshr: rev 422058c222a8a31ec7cfd4113fbdc036181f751d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/ZooKeeperMain.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/ZooKeeperTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="13005342">ZOOKEEPER-2587</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12821348" name="ZOOKEEPER-2467-1.patch" size="3005" author="joshi.shankar" created="Mon, 1 Aug 2016 16:05:15 +0000"/>
                            <attachment id="12833641" name="ZOOKEEPER-2467-br3-4.patch" size="2644" author="rakeshr" created="Sun, 16 Oct 2016 13:21:00 +0000"/>
                            <attachment id="12821354" name="ZOOKEEPER-2467-final.patch" size="3029" author="joshi.shankar" created="Mon, 1 Aug 2016 16:32:46 +0000"/>
                            <attachment id="12833640" name="ZOOKEEPER-2467.patch" size="2682" author="rakeshr" created="Sun, 16 Oct 2016 13:06:26 +0000"/>
                            <attachment id="12833310" name="ZOOKEEPER-2467.patch" size="2578" author="rakeshsingh" created="Fri, 14 Oct 2016 06:40:29 +0000"/>
                            <attachment id="12831939" name="ZOOKEEPER-2467.patch" size="2187" author="rakeshsingh" created="Thu, 6 Oct 2016 11:11:08 +0000"/>
                            <attachment id="12821299" name="ZOOKEEPER-2467.patch" size="1368" author="joshi.shankar" created="Mon, 1 Aug 2016 10:22:02 +0000"/>
                            <attachment id="12817025" name="ZOOKEEPER-2467.patch" size="1368" author="joshi.shankar" created="Sun, 10 Jul 2016 09:49:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 5 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i30ms7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>