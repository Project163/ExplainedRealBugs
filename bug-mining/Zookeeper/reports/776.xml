<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:58:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2579] ZooKeeper server should verify that dataDir and snapDir are writeable before starting</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2579</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;If the directories specified for the dataDir or the snapDir are not writeable, the server does not fail until it actually tries to write there. It should fail when it starts.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13004716">ZOOKEEPER-2579</key>
            <summary>ZooKeeper server should verify that dataDir and snapDir are writeable before starting</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abrahamfine">Abraham Fine</assignee>
                                    <reporter username="abrahamfine">Abraham Fine</reporter>
                        <labels>
                    </labels>
                <created>Tue, 13 Sep 2016 20:49:38 +0000</created>
                <updated>Fri, 31 Mar 2017 09:01:08 +0000</updated>
                            <resolved>Sun, 18 Sep 2016 21:37:06 +0000</resolved>
                                    <version>3.4.9</version>
                    <version>3.5.2</version>
                                    <fixVersion>3.4.10</fixVersion>
                    <fixVersion>3.5.3</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15488433" author="hadoopqa" created="Tue, 13 Sep 2016 21:11:19 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12828330/ZOOKEEPER-2579.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12828330/ZOOKEEPER-2579.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision b2a484cfe743116d2531fe5d1e1d78b3960c511e.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3424//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3424//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3424//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3424//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3424//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3424//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15488459" author="hadoopqa" created="Tue, 13 Sep 2016 21:19:20 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12828332/ZOOKEEPER-2579_3.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12828332/ZOOKEEPER-2579_3.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision b2a484cfe743116d2531fe5d1e1d78b3960c511e.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3425//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3425//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15490298" author="eribeiro" created="Wed, 14 Sep 2016 12:20:50 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abrahamfine&quot; class=&quot;user-hover&quot; rel=&quot;abrahamfine&quot;&gt;abrahamfine&lt;/a&gt;, &lt;/p&gt;

&lt;p&gt;Nice patch. We badly deserve to exercise as much of the &lt;tt&gt;FileTxnSnapLog&lt;/tt&gt; as possible. It has been in the root of some annoying bugs that impact its reliability. Thanks! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;By the way, are you really sure you want to incur the burden of starting up a ZK instance to test an exception, using a brittle test assertion (if I understood correctly the test will pass if the server doesn&apos;t start up on time, right?), when you can just write a simpler unit test to exercise this specific part? See my attachment for ideas of how you can test your patch.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                            <comment id="15490314" author="hadoopqa" created="Wed, 14 Sep 2016 12:29:24 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12828447/FileTxnSnapLogTest.java&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12828447/FileTxnSnapLogTest.java&lt;/a&gt;&lt;br/&gt;
  against trunk revision b2a484cfe743116d2531fe5d1e1d78b3960c511e.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3429//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3429//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15494457" author="abrahamfine" created="Thu, 15 Sep 2016 20:36:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;eribeiro&lt;/a&gt; Thanks for the feedback. &lt;/p&gt;

&lt;p&gt;The reason that I went with the more brittle test that involves checking to see if the server starts up is because I felt that type of test better verifies the behavior that I wanted to achieve with this jira. The tests that I wrote verify that incorrect permissioning prevents the server from starting, as opposed to just verifying the behavior of the FileTxnLog (we do something similar with testWithoutAutoCreateDataLogDir).&lt;/p&gt;

&lt;p&gt;I guess it would be reasonable to say that the tests that I wrote are more like integration tests while the tests that you attached are true unit tests. I guess it could be argued that most of the tests in ZooKeeperServerMainTest are really integration tests.&lt;/p&gt;

&lt;p&gt;It would be possible to include both types of test instead of needing to choose. What do you think?&lt;/p&gt;
</comment>
                            <comment id="15494580" author="eribeiro" created="Thu, 15 Sep 2016 21:35:07 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I guess it would be reasonable to say that the tests that I wrote are more like integration tests while the tests that you attached are true unit tests. I guess it could be argued that most of the tests in ZooKeeperServerMainTest are really integration tests.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yup, I agree.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;It would be possible to include both types of test instead of needing to choose. What do you think?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sounds good to me. In fact, it&apos;s up to you leave the &lt;tt&gt;FileTxnSnapLogTest.java&lt;/tt&gt; or not. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Let&apos;s see what the committers say, but I am okay with either approach, at first. &lt;/p&gt;

&lt;p&gt;&lt;b&gt;By the way, thanks for pointing out &lt;tt&gt;testWithoutAutoCreateDataLogDir&lt;/tt&gt; because it reminded me that it would be nice to include the timeout (i.e., &lt;tt&gt;@Test(timeout = 30000)&lt;/tt&gt;) in those kind of tests. Please, update your patch accordingly. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;Best regards,&lt;/p&gt;</comment>
                            <comment id="15496939" author="abrahamfine" created="Fri, 16 Sep 2016 17:58:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;eribeiro&lt;/a&gt; updated &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15496943" author="hadoopqa" created="Fri, 16 Sep 2016 17:59:37 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12828868/ZOOKEEPER-2579_3.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12828868/ZOOKEEPER-2579_3.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision b2a484cfe743116d2531fe5d1e1d78b3960c511e.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3435//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3435//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15501685" author="phunt" created="Sun, 18 Sep 2016 21:37:06 +0000"  >&lt;p&gt;committed to 3.4.10, 3.5.3, and trunk. Thanks Abe! Thanks for the reviews Edward!&lt;/p&gt;</comment>
                            <comment id="15501760" author="hudson" created="Sun, 18 Sep 2016 22:36:36 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #3089 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3089/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3089/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2579&quot; title=&quot;ZooKeeper server should verify that dataDir and snapDir are writeable before starting&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2579&quot;&gt;&lt;del&gt;ZOOKEEPER-2579&lt;/del&gt;&lt;/a&gt;: ZooKeeper server should verify that dataDir and snapDir (phunt: rev ec20c5434cc8a334b3fd25e27d26dccf4793c8f3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/persistence/FileTxnSnapLog.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/server/ZooKeeperServerMainTest.java&lt;/li&gt;
	&lt;li&gt;(edit) CHANGES.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12828447" name="FileTxnSnapLogTest.java" size="2680" author="eribeiro" created="Wed, 14 Sep 2016 12:20:50 +0000"/>
                            <attachment id="12828867" name="ZOOKEEPER-2579.patch" size="6577" author="abrahamfine" created="Fri, 16 Sep 2016 17:56:51 +0000"/>
                            <attachment id="12828330" name="ZOOKEEPER-2579.patch" size="6543" author="abrahamfine" created="Tue, 13 Sep 2016 20:51:29 +0000"/>
                            <attachment id="12828868" name="ZOOKEEPER-2579_3.4.patch" size="6634" author="abrahamfine" created="Fri, 16 Sep 2016 17:58:06 +0000"/>
                            <attachment id="12828332" name="ZOOKEEPER-2579_3.4.patch" size="6600" author="abrahamfine" created="Tue, 13 Sep 2016 21:11:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i33l9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>