<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:59:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2786] Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2786</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;This test is broken on 3.4 and 3.5, but is broken in &quot;different&quot; ways. Please see the individual pull requests for detailed descriptions for the issues faced in both branches.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13073523">ZOOKEEPER-2786</key>
            <summary>Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abrahamfine">Abraham Fine</assignee>
                                    <reporter username="abrahamfine">Abraham Fine</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 May 2017 18:33:01 +0000</created>
                <updated>Wed, 9 Aug 2017 19:26:47 +0000</updated>
                            <resolved>Wed, 9 Aug 2017 18:31:48 +0000</resolved>
                                    <version>3.4.10</version>
                    <version>3.5.3</version>
                                    <fixVersion>3.4.11</fixVersion>
                    <fixVersion>3.5.4</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16017867" author="githubbot" created="Fri, 19 May 2017 19:11:09 +0000"  >&lt;p&gt;GitHub user afine opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/259&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;p&gt;    On branch 3.5, testNonExistingOpCode appears to always take 30 seconds to execute (far too long): &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper_branch35_jdk7/967/testReport/org.apache.zookeeper.test/ClientTest/testNonExistingOpCode/history/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper_branch35_jdk7/967/testReport/org.apache.zookeeper.test/ClientTest/testNonExistingOpCode/history/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The reason for this is a call to `zk.testableWaitForShutdown(CONNECTION_TIMEOUT)` while waiting for the client to disconnect after it sent a request with a bad opcode to the server. The call to `testableWaitForShutdown` never actually asserts anything and effectively just hangs for CONNECTION_TIMEOUT (30 seconds) and returns because the client reconnects to the server. &lt;/p&gt;

&lt;p&gt;    This patch replaces `zk.testableWaitForShutdown(CONNECTION_TIMEOUT)` with `watcher.waitForDisconnected(5000)` which is a better way to detect if we have been disconnected.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/afine/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/afine/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;_br3.5&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/259.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/259.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #259&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16017880" author="githubbot" created="Fri, 19 May 2017 19:17:45 +0000"  >&lt;p&gt;GitHub user afine opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/260&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;p&gt;    On branch 3.4 we attempt to check that an invalid opcode in a request causes the server to disconnect the client with:&lt;/p&gt;

&lt;p&gt;    ```&lt;br/&gt;
            try &lt;/p&gt;
{
                zk.exists(&quot;/m1&quot;, false);
                fail(&quot;The connection should have been closed&quot;);
            }
&lt;p&gt; catch (KeeperException.ConnectionLossException expected) {&lt;br/&gt;
            }&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    This can run into a race with the reconnection logic in `ClientCnxn.java`&lt;a href=&quot;https://github.com/apache/zookeeper/blob/branch-3.4/src/java/main/org/apache/zookeeper/ClientCnxn.java#L1052&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/blob/branch-3.4/src/java/main/org/apache/zookeeper/ClientCnxn.java#L1052&lt;/a&gt; We should use a watcher instead to track disconnects.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/afine/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/afine/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/260.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/260.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #260&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16017918" author="hadoopqa" created="Fri, 19 May 2017 19:45:19 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/719//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/719//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/719//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/719//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/719//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/719//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16017948" author="hadoopqa" created="Fri, 19 May 2017 20:03:05 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    -1 findbugs.  The patch appears to introduce 90 new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/720//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/720//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/720//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/720//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/720//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/720//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16051170" author="githubbot" created="Thu, 15 Jun 2017 22:33:19 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/259&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    lgtm. testableWaitForShutdown was introduced in zookeeper-2609, after reviewing that patch I have no idea why the change was made. I think it was a mistake.&lt;/p&gt;</comment>
                            <comment id="16051171" author="githubbot" created="Thu, 15 Jun 2017 22:33:51 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/260&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    lgtm.&lt;/p&gt;</comment>
                            <comment id="16051172" author="githubbot" created="Thu, 15 Jun 2017 22:35:28 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/259&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16051173" author="hanm" created="Thu, 15 Jun 2017 22:36:17 +0000"  >&lt;p&gt;Issue resolved by pull request 260&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/260&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16051174" author="hanm" created="Thu, 15 Jun 2017 22:38:13 +0000"  >&lt;p&gt;Committed to master: &lt;a href=&quot;https://github.com/apache/zookeeper/commit/c38febe2dde261babc459b27bb84ef5d11da88df&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/c38febe2dde261babc459b27bb84ef5d11da88df&lt;/a&gt; &lt;br/&gt;
3.5:&lt;a href=&quot;https://github.com/apache/zookeeper/commit/c89784cc57bdcc88de89da6993d758225585d33e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/c89784cc57bdcc88de89da6993d758225585d33e&lt;/a&gt;&lt;br/&gt;
3.4:&lt;a href=&quot;https://github.com/apache/zookeeper/commit/83e0ab896991dc89af22e4a3b82af47f208d7f26&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/83e0ab896991dc89af22e4a3b82af47f208d7f26&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16051180" author="githubbot" created="Thu, 15 Jun 2017 22:54:00 +0000"  >&lt;p&gt;Github user afine closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/260&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16051201" author="hudson" created="Thu, 15 Jun 2017 23:26:11 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build ZooKeeper-trunk #3429 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3429/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3429/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: (hanm: rev c38febe2dde261babc459b27bb84ef5d11da88df)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/test/ClientTest.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/TestableZooKeeper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16053321" author="hanm" created="Sun, 18 Jun 2017 21:47:15 +0000"  >&lt;p&gt;Latest test failure: &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper_branch35_jdk7/1007/testReport/junit/org.apache.zookeeper.test/ClientTest/testNonExistingOpCode/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper_branch35_jdk7/1007/testReport/junit/org.apache.zookeeper.test/ClientTest/testNonExistingOpCode/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16054675" author="githubbot" created="Mon, 19 Jun 2017 20:20:54 +0000"  >&lt;p&gt;GitHub user afine opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;p&gt;    As @hanm noticed and mentioned on the JIRA this flaky test can still fail. The reason is that we can reconnect before calling `watcher.waitForDisconnected(5000);` We need to make sure that we only process a single event from the watcher. Using a `synchronized (watcher)` provides that guarantee here. &lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/afine/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/afine/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;_3.5_fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/286.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #286&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 0c2bd6455eeab14a4f57499f0f3f6dda52fea1c0&lt;br/&gt;
Author: Abraham Fine &amp;lt;afine@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-06-19T20:17:11Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16054682" author="githubbot" created="Mon, 19 Jun 2017 20:26:28 +0000"  >&lt;p&gt;GitHub user afine opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/287&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/287&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://github.com/apache/zookeeper/pull/286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286&lt;/a&gt; for description.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/afine/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/afine/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;_3.4_fix&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/287.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/287.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #287&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f95320a2b5225077c5137013d883e58786d3616b&lt;br/&gt;
Author: Abraham Fine &amp;lt;afine@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-06-19T20:17:11Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16054684" author="abrahamfine" created="Mon, 19 Jun 2017 20:27:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanm&quot; class=&quot;user-hover&quot; rel=&quot;hanm&quot;&gt;hanm&lt;/a&gt; for noticing. I submitted a PR which I believe should fix this failure (&lt;a href=&quot;https://github.com/apache/zookeeper/pull/286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286&lt;/a&gt;, &lt;a href=&quot;https://github.com/apache/zookeeper/pull/286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286&lt;/a&gt;).  &lt;/p&gt;</comment>
                            <comment id="16054694" author="hadoopqa" created="Mon, 19 Jun 2017 20:38:23 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/805//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/805//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/805//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/805//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/805//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/805//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16054734" author="hadoopqa" created="Mon, 19 Jun 2017 21:02:37 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/806//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/806//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/806//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/806//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/806//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/806//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16055050" author="hadoopqa" created="Tue, 20 Jun 2017 02:04:17 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 javadoc.  The javadoc tool appears to have generated 1 warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/810//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/810//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/810//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/810//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/810//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/810//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16055056" author="hadoopqa" created="Tue, 20 Jun 2017 02:18:24 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/809//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/809//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/809//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/809//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/809//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/809//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16070689" author="hanm" created="Fri, 30 Jun 2017 20:44:15 +0000"  >&lt;p&gt;Issue resolved by pull request 286&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16070690" author="githubbot" created="Fri, 30 Jun 2017 20:44:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16070691" author="githubbot" created="Fri, 30 Jun 2017 20:44:29 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/286&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM, merged to master and 3.5.&lt;/p&gt;</comment>
                            <comment id="16070695" author="githubbot" created="Fri, 30 Jun 2017 20:46:31 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/287&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/287&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM, merged to 3.4 &lt;a href=&quot;https://github.com/apache/zookeeper/commit/4638b5585210ecbd7e709989467cb179abd67080&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/4638b5585210ecbd7e709989467cb179abd67080&lt;/a&gt;. &lt;br/&gt;
    Please close the PR.&lt;/p&gt;</comment>
                            <comment id="16071000" author="hudson" created="Sat, 1 Jul 2017 05:04:17 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build ZooKeeper-trunk #3449 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3449/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3449/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: (hanm: rev eab6e7a139eed285973950b8d4f95dfc3d52b5a6)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/test/ClientTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16071479" author="hanm" created="Sun, 2 Jul 2017 03:37:20 +0000"  >&lt;p&gt;Looks like still failing: &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk-openjdk7/1530/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk-openjdk7/1530/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16077277" author="githubbot" created="Thu, 6 Jul 2017 22:26:37 +0000"  >&lt;p&gt;Github user afine closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/287&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/287&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16086354" author="hanm" created="Thu, 13 Jul 2017 20:35:40 +0000"  >&lt;p&gt;Reopen this jira because the test that&apos;s supposed to be fixed by this is still failing (and more frequently recently).&lt;/p&gt;</comment>
                            <comment id="16113399" author="githubbot" created="Thu, 3 Aug 2017 20:11:18 +0000"  >&lt;p&gt;GitHub user afine opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/327&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt; Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;p&gt;    This is the third time this failure has popped up. This time it seemed to only impact tests run using NettyServerCnxnFactory (so it only impacts 3.5 and master) and I was able to get it to pop up with sufficient frequency when running the tests locally. &lt;/p&gt;

&lt;p&gt;    The issue is caused by improper handling of netty&apos;s futures. When we call `channel.write(wrappedBuffer(sendBuffer));` the write is completed asynchronously. The close call `channel.close();` is also asynchronous. So we can run into the case where the close occurs before a write.&lt;/p&gt;

&lt;p&gt;    This patch changes our close call to be a callback for the completion of an empty write. This way we are guaranteed that the channel has &quot;drained&quot; before a close. &lt;/p&gt;

&lt;p&gt;    My primary concern with this patch is the channel being used while it is closing (between the write of an empty buffer and the execution of the close callback). I have added a `closingChannel` boolean to track that, which I believe is sufficient. Let me know if anyone finds a situation where that is not the case.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/afine/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/afine/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;_third_times_a_charm&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/327.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/327.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #327&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 6e16b20cd2f768e9a027f1d9306ae8126188edb4&lt;br/&gt;
Author: Abraham Fine &amp;lt;afine@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-08-03T20:02:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16113432" author="hadoopqa" created="Thu, 3 Aug 2017 20:31:50 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +0 tests included.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/924//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/924//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/924//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/924//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/924//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/924//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16114744" author="hadoopqa" created="Fri, 4 Aug 2017 18:10:44 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +0 tests included.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/925//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/925//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/925//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/925//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/925//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/925//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16120419" author="githubbot" created="Wed, 9 Aug 2017 18:31:46 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/327&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16120420" author="hanm" created="Wed, 9 Aug 2017 18:31:48 +0000"  >&lt;p&gt;Issue resolved by pull request 327&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/327&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16120426" author="githubbot" created="Wed, 9 Aug 2017 18:35:01 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/327&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/327&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    The following up Netty fix to this flaky test is committed to master: e104175bb47baeb800354078c015e78bfcb7c953 and 3.5 23962f12395ada67e689b8ff57573fc1398a54eb&lt;/p&gt;</comment>
                            <comment id="16120510" author="hudson" created="Wed, 9 Aug 2017 19:26:47 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build ZooKeeper-trunk #3491 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3491/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3491/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2786&quot; title=&quot;Flaky test: org.apache.zookeeper.test.ClientTest.testNonExistingOpCode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2786&quot;&gt;&lt;del&gt;ZOOKEEPER-2786&lt;/del&gt;&lt;/a&gt;: Flaky test: (hanm: rev e104175bb47baeb800354078c015e78bfcb7c953)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/NettyServerCnxn.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 14 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3f8lb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>