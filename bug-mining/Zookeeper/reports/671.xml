<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:56:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-1865] Fix retry logic in Learner.connectToLeader() </title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-1865</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;We discovered a long leader election time today in one of our prod ensemble.&lt;/p&gt;

&lt;p&gt;Here is the description of the event. &lt;/p&gt;

&lt;p&gt;Before the old leader goes down, it is able to announce notification message. So 3 out 5 (including the old leader) elected the old leader to be a new leader for the next epoch. While, the old leader is being rebooted, 2 other machines are trying to connect to the old leader.  So the quorum couldn&apos;t form until those 2 machines give up and move to the next round of leader election.&lt;/p&gt;

&lt;p&gt;This is because Learner.connectToLeader() use a simple retry logic. The contract for this method is that it should never spend longer that initLimit trying to connect to the leader.  In our outage, each sock.connect() is probably blocked for initLimit and it is called 5 times.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12690156">ZOOKEEPER-1865</key>
            <summary>Fix retry logic in Learner.connectToLeader() </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="4" iconUrl="https://issues.apache.org/jira/images/icons/statuses/reopened.png" description="This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.">Reopened</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ecarter">Edward Carter</assignee>
                                    <reporter username="thawan">Thawan Kooburat</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jan 2014 00:51:50 +0000</created>
                <updated>Thu, 3 Feb 2022 08:50:22 +0000</updated>
                                                                            <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14055477" author="hadoopqa" created="Tue, 8 Jul 2014 20:33:19 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12654667/ZOOKEEPER-1865.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12654667/ZOOKEEPER-1865.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1608872.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    -1 javac.  The patch appears to cause tar ant target to fail.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 1.3.9) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2181//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2181//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2181//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2181//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2181//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2181//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14056672" author="ecarter" created="Wed, 9 Jul 2014 19:55:22 +0000"  >&lt;p&gt;The new unit test in the patch failed to build on Jenkins because it uses InetAddress.getLoopbackAddress(), which was introduced in Java 7.  Are there plans to require Java 7 or later for Zookeeper in the near future?&lt;/p&gt;</comment>
                            <comment id="14056715" author="fpj" created="Wed, 9 Jul 2014 20:29:11 +0000"  >&lt;p&gt;I don&apos;t think we have made plans to have such a requirement, but you can propose and see what others think. I don&apos;t object.&lt;/p&gt;</comment>
                            <comment id="14069826" author="phunt" created="Tue, 22 Jul 2014 05:00:24 +0000"  >&lt;p&gt;Can we address this issue w/o jdk7?&lt;/p&gt;</comment>
                            <comment id="14264314" author="rakeshr" created="Mon, 5 Jan 2015 08:04:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;Are there plans to require Java 7 or later for Zookeeper in the near future?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ecarter&quot; class=&quot;user-hover&quot; rel=&quot;ecarter&quot;&gt;ecarter&lt;/a&gt;, since &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1963&quot; title=&quot;Make JDK 7 the minimum requirement for Zookeeper&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1963&quot;&gt;&lt;del&gt;ZOOKEEPER-1963&lt;/del&gt;&lt;/a&gt; is in, we can go ahead with this. &lt;br/&gt;
BTW could you tell me the reason for (self.initLimit - self.syncLimit). Also, there could be chance of self.syncLimit &amp;gt; self.initLimit and evaluate to negative integer?&lt;/p&gt;</comment>
                            <comment id="14264368" author="hadoopqa" created="Mon, 5 Jan 2015 09:00:28 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12654667/ZOOKEEPER-1865.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12654667/ZOOKEEPER-1865.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1646992.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2475//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2475//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2475//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2475//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2475//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2475//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14273122" author="fournc" created="Mon, 12 Jan 2015 00:49:33 +0000"  >&lt;p&gt;I&apos;m not super crazy jazzed with all the inline calls to System.currentTimeMillis tbh. Feels like it will be a nightmare to test. Why not make it an overridable method to check this invariant?&lt;/p&gt;</comment>
                            <comment id="14280916" author="jaredc" created="Fri, 16 Jan 2015 22:24:26 +0000"  >&lt;p&gt;We just hit this in our internal testing today too.&lt;/p&gt;

&lt;p&gt;connect() throws a SocketTimeoutException if the specified timeout was reached.  This isn&apos;t perfect, but could this be leveraged to assume connect was &quot;fast&quot; if that exception wasn&apos;t thrown, and it was &quot;slow&quot; otherwise?  Unfortunately, if connect() takes just under the timeout to throw a different error, then we&apos;ll &quot;lose&quot; that time.  Probably not ideal, but wanted to suggest it as an option.&lt;/p&gt;</comment>
                            <comment id="14294500" author="jaredc" created="Wed, 28 Jan 2015 00:43:48 +0000"  >&lt;p&gt;Alternate patch using nanoTime instead of currentTimeMillis.  No unittests yet.&lt;/p&gt;</comment>
                            <comment id="14294503" author="jaredc" created="Wed, 28 Jan 2015 00:44:33 +0000"  >&lt;p&gt;Camille, we didn&apos;t like the use of currentTimeMillis because its not safe against time jumps and we&apos;ve had problems with that in the past, so I&apos;m thinking of polishing up the patch I just attached that uses System.nanoTime instead.  What do you think of that approach?&lt;/p&gt;

&lt;p&gt;Do you have suggestions for some good tests that can leverage the nanoTime overridable method without further poking into the internals of connectToLeader?  Or were you thinking we should use it in already existing tests?&lt;/p&gt;</comment>
                            <comment id="14294516" author="hadoopqa" created="Wed, 28 Jan 2015 00:53:40 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12694892/ZOOKEEPER-1865-nanoTime-noUT.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12694892/ZOOKEEPER-1865-nanoTime-noUT.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1655082.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2496//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2496//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14298153" author="jaredc" created="Fri, 30 Jan 2015 03:17:21 +0000"  >&lt;p&gt;Corrected diff format.&lt;/p&gt;</comment>
                            <comment id="14299499" author="hadoopqa" created="Sat, 31 Jan 2015 01:04:35 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12695662/ZOOKEEPER-1865-nanoTime.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12695662/ZOOKEEPER-1865-nanoTime.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1655910.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2499//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2499//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2499//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2499//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2499//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2499//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14299516" author="jaredc" created="Sat, 31 Jan 2015 01:18:15 +0000"  >&lt;p&gt;Are the core unit tests stable?  I don&apos;t believe either of the failures were caused by my patch (there would be a specific new exception printed in the logs).&lt;/p&gt;</comment>
                            <comment id="14362071" author="fournc" created="Sat, 14 Mar 2015 22:34:08 +0000"  >&lt;p&gt;I&apos;m going to retrigger a build. Can&apos;t believe this patch has been open for a year...&lt;/p&gt;</comment>
                            <comment id="14362090" author="hadoopqa" created="Sat, 14 Mar 2015 23:21:41 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12695662/ZOOKEEPER-1865-nanoTime.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12695662/ZOOKEEPER-1865-nanoTime.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1666760.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2566//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2566//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2566//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2566//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2566//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2566//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14362102" author="fournc" created="Sat, 14 Mar 2015 23:39:43 +0000"  >&lt;p&gt;So, the test as written does not actually exhibit the error we&apos;re fixing; if we revert the meaningful change you&apos;ve proposed to Learner it will still pass. I updated it a bit to get it to fail with the (mostly) old code (modulo some helper methods you wrote), and pass with the new code. Have attached. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;michim&lt;/a&gt; if you have a chance to look at this quickly it would be nice to get this into 3.5.1&lt;/p&gt;</comment>
                            <comment id="14362103" author="fournc" created="Sat, 14 Mar 2015 23:42:16 +0000"  >&lt;p&gt;fix test, leaves Learner changes as-is&lt;/p&gt;</comment>
                            <comment id="14362116" author="hadoopqa" created="Sun, 15 Mar 2015 00:34:37 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12704626/ZOOKEEPER-1865-testfix.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12704626/ZOOKEEPER-1865-testfix.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1666764.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2568//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2568//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2568//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2568//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2568//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2568//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14362117" author="hadoopqa" created="Sun, 15 Mar 2015 00:37:04 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12704626/ZOOKEEPER-1865-testfix.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12704626/ZOOKEEPER-1865-testfix.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1666764.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2569//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2569//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2569//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2569//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2569//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2569//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14362282" author="michim" created="Sun, 15 Mar 2015 07:51:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14362285" author="michim" created="Sun, 15 Mar 2015 07:57:57 +0000"  >&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1666784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1666784&lt;/a&gt;&lt;br/&gt;
branch-3.5: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1666785&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1666785&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14362341" author="hudson" created="Sun, 15 Mar 2015 11:15:49 +0000"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2629 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2629/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2629/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1865&quot; title=&quot;Fix retry logic in Learner.connectToLeader() &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1865&quot;&gt;ZOOKEEPER-1865&lt;/a&gt; Fix retry logic in Learner.connectToLeader() (Edward Carter via michim) (michim: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1666784&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1666784&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/main/org/apache/zookeeper/server/quorum/Learner.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/test/org/apache/zookeeper/server/quorum/LearnerTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14362567" author="michim" created="Sun, 15 Mar 2015 21:47:00 +0000"  >&lt;p&gt;Do you think the test failure is related to this patch? It&apos;s failing intermittently on my box as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://paste.apache.org/fQih?action=download&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://paste.apache.org/fQih?action=download&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14362585" author="fournc" created="Sun, 15 Mar 2015 22:09:55 +0000"  >&lt;p&gt;Not sure, I can&apos;t get it to fail but let me look.&lt;/p&gt;</comment>
                            <comment id="14362592" author="fournc" created="Sun, 15 Mar 2015 22:19:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michim&quot; class=&quot;user-hover&quot; rel=&quot;michim&quot;&gt;michim&lt;/a&gt; is this failing on trunk or precommit builds? Can you point to the build that you saw fail besides your local?&lt;/p&gt;</comment>
                            <comment id="14362598" author="michim" created="Sun, 15 Mar 2015 22:28:15 +0000"  >&lt;p&gt;It failed on trunk: &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2629/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2629/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The failure might not be related to this patch. I just ran the test without this patch and it still failed. It looks like the test is timing dependent. It fails if 2 snapshots don&apos;t finish within 200ms.&lt;/p&gt;</comment>
                            <comment id="16695365" author="mkedwards" created="Wed, 21 Nov 2018 23:31:04 +0000"  >&lt;p&gt;Is this reproducible in current 3.5?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12695662" name="ZOOKEEPER-1865-nanoTime.patch" size="6517" author="jaredc" created="Sat, 31 Jan 2015 00:13:48 +0000"/>
                            <attachment id="12704626" name="ZOOKEEPER-1865-testfix.patch" size="7012" author="fournc" created="Sat, 14 Mar 2015 23:42:16 +0000"/>
                            <attachment id="12654667" name="ZOOKEEPER-1865.patch" size="3610" author="ecarter" created="Tue, 8 Jul 2014 20:25:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369113</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rmbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369418</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>