<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:56:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2064] Prevent resource leak in various classes</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2064</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;In various classes, there is potential resource leak.&lt;br/&gt;
e.g. LogIterator / RandomAccessFileReader is not closed upon return from the method.&lt;/p&gt;

&lt;p&gt;Corresponding close() should be called to prevent resource leak.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12749599">ZOOKEEPER-2064</key>
            <summary>Prevent resource leak in various classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhihyu@ebaysf.com">Ted Yu</assignee>
                                    <reporter username="yuzhihong@gmail.com">Ted Yu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Oct 2014 19:57:54 +0000</created>
                <updated>Sun, 30 Nov 2014 11:23:33 +0000</updated>
                            <resolved>Sat, 29 Nov 2014 15:57:09 +0000</resolved>
                                                    <fixVersion>3.4.7</fixVersion>
                    <fixVersion>3.5.1</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14178948" author="yuzhihong@gmail.com" created="Tue, 21 Oct 2014 19:58:43 +0000"  >&lt;p&gt;Tentative patch.&lt;/p&gt;</comment>
                            <comment id="14178952" author="hadoopqa" created="Tue, 21 Oct 2014 20:01:40 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12676159/2064-v1.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12676159/2064-v1.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1632209.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2396//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2396//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14208838" author="yuzhihong@gmail.com" created="Wed, 12 Nov 2014 22:48:07 +0000"  >&lt;p&gt;patch v2 is based on latest trunk.&lt;/p&gt;</comment>
                            <comment id="14208887" author="hadoopqa" created="Wed, 12 Nov 2014 23:32:06 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12681166/2064-v2.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12681166/2064-v2.txt&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1637293.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2440//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2440//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2440//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2440//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2440//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2440//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14208924" author="yuzhihong@gmail.com" created="Wed, 12 Nov 2014 23:49:54 +0000"  >&lt;p&gt;I ran the failed tests locally.&lt;br/&gt;
ReconfigRecoveryTest#testCurrentObserverIsParticipantInNewConfig fails with or without my patch.&lt;/p&gt;</comment>
                            <comment id="14208931" author="yuzhihong@gmail.com" created="Wed, 12 Nov 2014 23:51:31 +0000"  >&lt;p&gt;Correction:&lt;br/&gt;
ReconfigRecoveryTest#testCurrentServersAreObserversInNextConfig failed with patch&lt;br/&gt;
ReconfigRecoveryTest#testCurrentObserverIsParticipantInNewConfig failed without patch.&lt;/p&gt;</comment>
                            <comment id="14220082" author="yuzhihong@gmail.com" created="Thu, 20 Nov 2014 21:54:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Mdanielle&quot; class=&quot;user-hover&quot; rel=&quot;Mdanielle&quot;&gt;Mdanielle&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phunt&quot; class=&quot;user-hover&quot; rel=&quot;phunt&quot;&gt;phunt&lt;/a&gt;:&lt;br/&gt;
Mind taking a look ?&lt;/p&gt;</comment>
                            <comment id="14220138" author="fpj" created="Thu, 20 Nov 2014 22:33:46 +0000"  >&lt;p&gt;The patch looks good, I&apos;ve just made a small format change. &lt;/p&gt;</comment>
                            <comment id="14220142" author="yuzhihong@gmail.com" created="Thu, 20 Nov 2014 22:35:26 +0000"  >&lt;p&gt;Thanks Flavio.&lt;/p&gt;</comment>
                            <comment id="14220145" author="fpj" created="Thu, 20 Nov 2014 22:36:59 +0000"  >&lt;p&gt;The test cases failing are also unrelated to this patch, check &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1806&quot; title=&quot;testCurrentServersAreObserversInNextConfig failing frequently on trunk with non-jdk6&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1806&quot;&gt;&lt;del&gt;ZOOKEEPER-1806&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1807&quot; title=&quot;Observers spam each other creating connections to the election addr&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1807&quot;&gt;&lt;del&gt;ZOOKEEPER-1807&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14220211" author="hadoopqa" created="Thu, 20 Nov 2014 23:26:10 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12682763/ZOOKEEPER-2064.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12682763/ZOOKEEPER-2064.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1640635.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2441//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2441//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2441//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2441//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2441//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2441//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14222985" author="fpj" created="Mon, 24 Nov 2014 13:42:27 +0000"  >&lt;p&gt;I&apos;m +1 on this one, if no one else has anything to say, I&apos;ll check this in.&lt;/p&gt;</comment>
                            <comment id="14228805" author="fpj" created="Sat, 29 Nov 2014 15:57:09 +0000"  >&lt;p&gt;+1, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tedyu%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;tedyu@apache.org&quot;&gt;tedyu@apache.org&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Trunk: Committed revision 1642438.&lt;br/&gt;
3.5: Committed revision 1642440.&lt;br/&gt;
3.4: Committed revision 1642441.&lt;/p&gt;</comment>
                            <comment id="14229080" author="hudson" created="Sun, 30 Nov 2014 11:23:33 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2517 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2517/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2517/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2064&quot; title=&quot;Prevent resource leak in various classes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2064&quot;&gt;&lt;del&gt;ZOOKEEPER-2064&lt;/del&gt;&lt;/a&gt; Prevent resource leak in various classes (Ted Yu via fpj) (fpj: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1642438&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1642438&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/contrib/loggraph/src/java/org/apache/zookeeper/graph/Log4JSource.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/contrib/loggraph/src/java/org/apache/zookeeper/graph/RandomAccessFileReader.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/contrib/loggraph/src/java/org/apache/zookeeper/graph/servlets/NumEvents.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/contrib/loggraph/src/java/org/apache/zookeeper/graph/servlets/StaticContent.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/contrib/rest/src/java/org/apache/zookeeper/server/jersey/cfg/RestCfg.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/systest/org/apache/zookeeper/test/system/GenerateLoad.java&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/java/systest/org/apache/zookeeper/test/system/QuorumPeerInstance.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12676159" name="2064-v1.txt" size="5663" author="yuzhihong@gmail.com" created="Tue, 21 Oct 2014 19:58:43 +0000"/>
                            <attachment id="12681166" name="2064-v2.txt" size="5112" author="yuzhihong@gmail.com" created="Wed, 12 Nov 2014 22:48:07 +0000"/>
                            <attachment id="12682763" name="ZOOKEEPER-2064.patch" size="5106" author="fpj" created="Thu, 20 Nov 2014 22:33:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 51 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21f1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>