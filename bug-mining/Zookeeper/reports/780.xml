<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:58:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2556] peerType remains as &quot;observer&quot; in zoo.cfg even though we change the node from observer to participant runtime</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2556</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;peerType remains as &quot;observer&quot; in zoo.cfg even though we change the node from observer to participant runtime&lt;/p&gt;

&lt;p&gt;Steps to reproduce:-&lt;br/&gt;
1. Start zookeeper in cluster with one node as observer by configuring &lt;br/&gt;
peerType=observer in zoo.cfg and server.2=10.18.219.50:2888:3888:observer;2181&lt;br/&gt;
2. Start the cluster&lt;br/&gt;
3. start a client and change the node from observer to participant, the configuration related to peertype remained same though other things like clientport got from zoo.cfg&lt;/p&gt;

&lt;p&gt;&amp;gt;reconfig -remove 2 -add 2=10.18.219.50:2888:3888:participant;2181&lt;/p&gt;

&lt;p&gt;We should either remove this parameter or update with correct node type at run time&lt;/p&gt;</description>
                <environment></environment>
        <key id="13002881">ZOOKEEPER-2556</key>
            <summary>peerType remains as &quot;observer&quot; in zoo.cfg even though we change the node from observer to participant runtime</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rakeshsingh">Rakesh Kumar Singh</assignee>
                                    <reporter username="rakeshsingh">Rakesh Kumar Singh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Sep 2016 10:43:54 +0000</created>
                <updated>Thu, 3 Nov 2016 16:48:36 +0000</updated>
                            <resolved>Thu, 3 Nov 2016 15:41:36 +0000</resolved>
                                    <version>3.5.1</version>
                    <version>3.5.2</version>
                                                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15515492" author="shralex" created="Fri, 23 Sep 2016 05:49:03 +0000"  >&lt;p&gt;Thanks for reporting this! Removing this from static config seems like a one-line change in editStaticConfig (QuorumPeerConfig.java). There&apos;s a bunch of parameters that are already being removed, so you can just add it there.&lt;/p&gt;</comment>
                            <comment id="15515520" author="rakeshsingh" created="Fri, 23 Sep 2016 06:03:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;shralex&lt;/a&gt;Thanks for feedback. &lt;/p&gt;</comment>
                            <comment id="15528384" author="rakeshsingh" created="Wed, 28 Sep 2016 04:50:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;shralex&lt;/a&gt; Do i need to add testcase for this change.?&lt;/p&gt;</comment>
                            <comment id="15528397" author="shralex" created="Wed, 28 Sep 2016 04:56:38 +0000"  >&lt;p&gt;I think so, but take a look at testReconfigRemoveClientFromStatic in src/java/test/org/apache/zookeeper/server/quorum/ReconfigLegacyTest.java&lt;br/&gt;
I think its pretty close to what you need. Maybe just change and rename that test&lt;br/&gt;
to include all the parameters removed from static config.&lt;/p&gt;</comment>
                            <comment id="15528438" author="rakeshsingh" created="Wed, 28 Sep 2016 05:15:10 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;shralex&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15551085" author="rakeshsingh" created="Thu, 6 Oct 2016 06:52:34 +0000"  >&lt;p&gt;pls review&lt;/p&gt;</comment>
                            <comment id="15551151" author="hadoopqa" created="Thu, 6 Oct 2016 07:19:20 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12831901/ZOOKEEPER-2556.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12831901/ZOOKEEPER-2556.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 8d0154bcc21e58b6166eb5e360f72ce37699e072.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3465//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3465//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3465//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3465//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3465//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3465//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15581238" author="rakeshsingh" created="Mon, 17 Oct 2016 05:10:08 +0000"  >&lt;p&gt;Pls review and commit if looks fine.&lt;/p&gt;</comment>
                            <comment id="15604278" author="shralex" created="Tue, 25 Oct 2016 05:39:28 +0000"  >&lt;p&gt;Hi, thanks for the patch! I have only one suggestion.&lt;br/&gt;
Instead of a new separate test for peerType, perhaps you could add a few more lines to one of the existing tests. Looking at this again perhaps the best one would be testConfigFileBackwardCompatibility() where it already checks that &quot;server.&quot; and &quot;clientPort&quot; are being removed, you could add that &quot;peerType&quot; is also being removed.&lt;/p&gt;

&lt;p&gt;Alex&lt;/p&gt;</comment>
                            <comment id="15607753" author="rakeshsingh" created="Wed, 26 Oct 2016 07:40:51 +0000"  >&lt;p&gt;Thanks for feedback, changed based on feedback.&lt;/p&gt;</comment>
                            <comment id="15607790" author="shralex" created="Wed, 26 Oct 2016 07:56:25 +0000"  >&lt;p&gt;looks good, but I think the check that peerType is not in cfg shouldn&apos;t be in the inner loop.&lt;/p&gt;</comment>
                            <comment id="15607813" author="hadoopqa" created="Wed, 26 Oct 2016 08:06:53 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12835282/ZOOKEEPER-2556.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12835282/ZOOKEEPER-2556.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision f6349d16fcd5f04b560095417fd2a1813ac3e855.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3500//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3500//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3500//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3500//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3500//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3500//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15607838" author="rakeshsingh" created="Wed, 26 Oct 2016 08:22:39 +0000"  >&lt;p&gt;Thanks. Changes are done.&lt;/p&gt;</comment>
                            <comment id="15607877" author="hadoopqa" created="Wed, 26 Oct 2016 08:44:11 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12835288/ZOOKEEPER-2556.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12835288/ZOOKEEPER-2556.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision f6349d16fcd5f04b560095417fd2a1813ac3e855.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 6 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3501//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3501//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3501//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3501//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3501//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3501//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15609825" author="shralex" created="Wed, 26 Oct 2016 22:00:31 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hanm&quot; class=&quot;user-hover&quot; rel=&quot;hanm&quot;&gt;hanm&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=breed&quot; class=&quot;user-hover&quot; rel=&quot;breed&quot;&gt;breed&lt;/a&gt;, would you guys be able to commit this ? I still need to learn the new git procedure &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15610049" author="hanm" created="Wed, 26 Oct 2016 23:37:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shralex&quot; class=&quot;user-hover&quot; rel=&quot;shralex&quot;&gt;shralex&lt;/a&gt; I don&apos;t have write access &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Also one suggestion - given that we have git merge script integrated in the repo maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshsingh&quot; class=&quot;user-hover&quot; rel=&quot;rakeshsingh&quot;&gt;rakeshsingh&lt;/a&gt; should create a PR for &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2556&quot; title=&quot;peerType remains as &amp;quot;observer&amp;quot; in zoo.cfg even though we change the node from observer to participant runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2556&quot;&gt;&lt;del&gt;ZOOKEEPER-2556&lt;/del&gt;&lt;/a&gt; and then a committer can merge the PR. The benefit of committing through PR is the contributors get their credit in commit history, i.e. see &lt;a href=&quot;https://github.com/apache/zookeeper/commit/f6349d16fcd5f04b560095417fd2a1813ac3e855&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="15633196" author="shralex" created="Thu, 3 Nov 2016 15:42:05 +0000"  >&lt;p&gt;Committed. Thanks again Rakesh!&lt;/p&gt;</comment>
                            <comment id="15633425" author="hudson" created="Thu, 3 Nov 2016 16:48:36 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build ZooKeeper-trunk #3142 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3142/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3142/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2556&quot; title=&quot;peerType remains as &amp;quot;observer&amp;quot; in zoo.cfg even though we change the node from observer to participant runtime&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2556&quot;&gt;&lt;del&gt;ZOOKEEPER-2556&lt;/del&gt;&lt;/a&gt;: peerType not removed from static config file (Rakesh (shralex: rev bcb07a09b06c91243ed244f04a71b8daf629e286)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/server/quorum/ReconfigLegacyTest.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/server/quorum/QuorumPeerTestBase.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/quorum/QuorumPeerConfig.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835288" name="ZOOKEEPER-2556.patch" size="8177" author="rakeshsingh" created="Wed, 26 Oct 2016 08:22:39 +0000"/>
                            <attachment id="12835282" name="ZOOKEEPER-2556.patch" size="8093" author="rakeshsingh" created="Wed, 26 Oct 2016 07:39:31 +0000"/>
                            <attachment id="12831901" name="ZOOKEEPER-2556.patch" size="8265" author="rakeshsingh" created="Thu, 6 Oct 2016 06:51:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i339xz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Committed. Thanks again Rakesh!</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>