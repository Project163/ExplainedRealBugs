<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:01:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-3007] Potential NPE in ReferenceCountedACLCache#deserialize </title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-3007</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Inspired by ZK-3006 ,&#160;I develop a simple static analysis tool to find other Potential NPE like ZK-3006. This bug is found by this tool ,and I have carefully studied it.&#160; But i am a&#160;newbie at here so i may be wrong, hope someone could confirm it and help me&#160;improve this tool.&lt;/p&gt;
&lt;h3&gt;&lt;a name=&quot;Bug%C2%A0describtion%3A&quot;&gt;&lt;/a&gt;Bug&#160;describtion:&lt;/h3&gt;

&lt;p&gt;callee BinaryInputArchive#startVector will return null:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Index startVector(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; tag) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; len = readInt(tag);
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (len == -1) {
     &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and caller&#160;ReferenceCountedACLCache#deserialize&#160; call it without null check&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;Index j = ia.startVector(&lt;span class=&quot;code-quote&quot;&gt;&quot;acls&quot;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!j.done()) {
  ACL acl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ACL();
  acl.deserialize(ia, &lt;span class=&quot;code-quote&quot;&gt;&quot;acl&quot;&lt;/span&gt;);
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but all the other 14 caller of&#160;BinaryInputArchive#startVector performs null checker like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;Index vidx1 = a_.startVector(&lt;span class=&quot;code-quote&quot;&gt;&quot;acl&quot;&lt;/span&gt;);
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (vidx1!= &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
     &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (; !vidx1.done(); vidx1.incr()){
     .....
    }
   }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;so i think we also need add null check in caller&#160;ReferenceCountedACLCache#deserialize&#160; just like other 14 caller&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13147853">ZOOKEEPER-3007</key>
            <summary>Potential NPE in ReferenceCountedACLCache#deserialize </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xiaoheipangzi">lujie</assignee>
                                    <reporter username="xiaoheipangzi">lujie</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Mar 2018 07:30:58 +0000</created>
                <updated>Tue, 17 Jul 2018 04:50:00 +0000</updated>
                            <resolved>Thu, 26 Apr 2018 22:24:44 +0000</resolved>
                                    <version>3.6.0</version>
                                    <fixVersion>3.5.4</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                    <fixVersion>3.4.13</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16413834" author="githubbot" created="Mon, 26 Mar 2018 13:18:22 +0000"  >&lt;p&gt;GitHub user brettKK opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-3007&quot; title=&quot;Potential NPE in ReferenceCountedACLCache#deserialize &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-3007&quot;&gt;&lt;del&gt;ZOOKEEPER-3007&lt;/del&gt;&lt;/a&gt;:Potential NPE in ReferenceCountedACLCache#deserialize&lt;/p&gt;

&lt;p&gt;    @LJ1043041006 found a potential NPE in ZK&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;    callee BinaryInputArchive#startVector will return null:&lt;br/&gt;
    ```&lt;br/&gt;
    // code placeholder&lt;br/&gt;
    public Index startVector(String tag) throws IOException {&lt;br/&gt;
        int len = readInt(tag);&lt;br/&gt;
         if (len == -1) &lt;/p&gt;
{
         return null;
    }
&lt;p&gt;    ```&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;    and caller ReferenceCountedACLCache#deserialize  call it without null check&lt;br/&gt;
    ```&lt;br/&gt;
    // code placeholder&lt;br/&gt;
    Index j = ia.startVector(&quot;acls&quot;);&lt;br/&gt;
    while (!j.done()) &lt;/p&gt;
{
      ACL acl = new ACL();
      acl.deserialize(ia, &quot;acl&quot;);
    }
&lt;p&gt;    ```&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/brettKK/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/brettKK/zookeeper&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #495&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16413851" author="githubbot" created="Mon, 26 Mar 2018 13:32:15 +0000"  >&lt;p&gt;Github user LJ1043041006 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495#discussion_r177089527&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495#discussion_r177089527&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/ReferenceCountedACLCache.java &amp;#8212;&lt;br/&gt;
    @@ -109,16 +109,18 @@ public synchronized void deserialize(InputArchive ia) throws IOException {&lt;br/&gt;
                 }&lt;br/&gt;
                 List&amp;lt;ACL&amp;gt; aclList = new ArrayList&amp;lt;ACL&amp;gt;();&lt;br/&gt;
                 Index j = ia.startVector(&quot;acls&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;while (!j.done()) {&lt;/li&gt;
	&lt;li&gt;ACL acl = new ACL();&lt;/li&gt;
	&lt;li&gt;acl.deserialize(ia, &quot;acl&quot;);&lt;/li&gt;
	&lt;li&gt;aclList.add(acl);&lt;/li&gt;
	&lt;li&gt;j.incr();&lt;br/&gt;
    +            if (j != null) {&lt;br/&gt;
    +                while (!j.done()) 
{
    +                    ACL acl = new ACL();
    +                    acl.deserialize(ia, &quot;acl&quot;);
    +                    aclList.add(acl);
    +                    j.incr();
    +                }
&lt;p&gt;    +                longKeyMap.put(val, aclList);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    should we move 199~122 out of if to avoid endless loop?&lt;/p&gt;</comment>
                            <comment id="16414935" author="githubbot" created="Tue, 27 Mar 2018 02:56:23 +0000"  >&lt;p&gt;Github user maoling commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495#discussion_r177294282&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495#discussion_r177294282&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/ReferenceCountedACLCache.java &amp;#8212;&lt;br/&gt;
    @@ -109,16 +109,18 @@ public synchronized void deserialize(InputArchive ia) throws IOException {&lt;br/&gt;
                 }&lt;br/&gt;
                 List&amp;lt;ACL&amp;gt; aclList = new ArrayList&amp;lt;ACL&amp;gt;();&lt;br/&gt;
                 Index j = ia.startVector(&quot;acls&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;while (!j.done()) {&lt;/li&gt;
	&lt;li&gt;ACL acl = new ACL();&lt;/li&gt;
	&lt;li&gt;acl.deserialize(ia, &quot;acl&quot;);&lt;/li&gt;
	&lt;li&gt;aclList.add(acl);&lt;/li&gt;
	&lt;li&gt;j.incr();&lt;br/&gt;
    +            if (j != null) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;can we have a more elegant way to process this NPE ?&lt;/li&gt;
	&lt;li&gt;BTW. incorrect commit message.   `git commit --amend -m &quot;your new message&quot;` to modify it&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16414961" author="githubbot" created="Tue, 27 Mar 2018 03:20:25 +0000"  >&lt;p&gt;Github user LJ1043041006 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495#discussion_r177296763&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495#discussion_r177296763&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/ReferenceCountedACLCache.java &amp;#8212;&lt;br/&gt;
    @@ -109,16 +109,18 @@ public synchronized void deserialize(InputArchive ia) throws IOException {&lt;br/&gt;
                 }&lt;br/&gt;
                 List&amp;lt;ACL&amp;gt; aclList = new ArrayList&amp;lt;ACL&amp;gt;();&lt;br/&gt;
                 Index j = ia.startVector(&quot;acls&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;while (!j.done()) {&lt;/li&gt;
	&lt;li&gt;ACL acl = new ACL();&lt;/li&gt;
	&lt;li&gt;acl.deserialize(ia, &quot;acl&quot;);&lt;/li&gt;
	&lt;li&gt;aclList.add(acl);&lt;/li&gt;
	&lt;li&gt;j.incr();&lt;br/&gt;
    +            if (j != null) {&lt;br/&gt;
    +                while (!j.done()) 
{
    +                    ACL acl = new ACL();
    +                    acl.deserialize(ia, &quot;acl&quot;);
    +                    aclList.add(acl);
    +                    j.incr();
    +                }
&lt;p&gt;    +                longKeyMap.put(val, aclList);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Can we move code at line 119~123 out of null-checker, because it may cause endless loop due to i &amp;gt; 0 may always hold&lt;/p&gt;</comment>
                            <comment id="16415210" author="githubbot" created="Tue, 27 Mar 2018 08:21:53 +0000"  >&lt;p&gt;Github user anmolnar commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495#discussion_r177343134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495#discussion_r177343134&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/ReferenceCountedACLCache.java &amp;#8212;&lt;br/&gt;
    @@ -109,16 +109,18 @@ public synchronized void deserialize(InputArchive ia) throws IOException {&lt;br/&gt;
                 }&lt;br/&gt;
                 List&amp;lt;ACL&amp;gt; aclList = new ArrayList&amp;lt;ACL&amp;gt;();&lt;br/&gt;
                 Index j = ia.startVector(&quot;acls&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;while (!j.done()) {&lt;/li&gt;
	&lt;li&gt;ACL acl = new ACL();&lt;/li&gt;
	&lt;li&gt;acl.deserialize(ia, &quot;acl&quot;);&lt;/li&gt;
	&lt;li&gt;aclList.add(acl);&lt;/li&gt;
	&lt;li&gt;j.incr();&lt;br/&gt;
    +            if (j != null) {&lt;br/&gt;
    +                while (!j.done()) 
{
    +                    ACL acl = new ACL();
    +                    acl.deserialize(ia, &quot;acl&quot;);
    +                    aclList.add(acl);
    +                    j.incr();
    +                }
&lt;p&gt;    +                longKeyMap.put(val, aclList);&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    +1 &lt;br/&gt;
    Only the inner while-loop uses the `j` variable, so nothing else should be inside the check.&lt;/p&gt;</comment>
                            <comment id="16415220" author="githubbot" created="Tue, 27 Mar 2018 08:26:22 +0000"  >&lt;p&gt;Github user anmolnar commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @brettKK Thanks for the fix. It&apos;d be nice to add at least a unit test to cover the issue.&lt;/p&gt;

&lt;p&gt;    I think adding the check alone is not enough here. Looking at the `serialize()` method, if `map` field is greater than 0, both `long` and `acls` fields must also be present.&lt;br/&gt;
    In other words, in `deserialize()` if (i&amp;gt;0) then both `long` and `acls` are mandatory. As a consequence  the else branch of the check should also be implemented and an exception should be thrown indicating that the archive cannot be deserialise, because the format is incorrect.&lt;/p&gt;

&lt;p&gt;    Does it make sense?&lt;/p&gt;</comment>
                            <comment id="16415231" author="githubbot" created="Tue, 27 Mar 2018 08:37:27 +0000"  >&lt;p&gt;Github user LJ1043041006 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @brettKK &lt;br/&gt;
    so if we change code like this :&lt;br/&gt;
    `Index j = ia.startVector(&quot;acls&quot;);&lt;br/&gt;
    if (j == null)&lt;/p&gt;
{
       throw new IOException(&quot;errmessage&quot;);
    }
&lt;p&gt;    while (!j.done)&lt;br/&gt;
    ..........&lt;br/&gt;
    `&lt;br/&gt;
     @maoling this change can be elegant to check null?&lt;br/&gt;
    @anmolnar this change can be correct?&lt;/p&gt;</comment>
                            <comment id="16415248" author="githubbot" created="Tue, 27 Mar 2018 08:50:34 +0000"  >&lt;p&gt;Github user LJ1043041006 commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495#discussion_r177351128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495#discussion_r177351128&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/ReferenceCountedACLCache.java &amp;#8212;&lt;br/&gt;
    @@ -109,16 +109,18 @@ public synchronized void deserialize(InputArchive ia) throws IOException {&lt;br/&gt;
                 }&lt;br/&gt;
                 List&amp;lt;ACL&amp;gt; aclList = new ArrayList&amp;lt;ACL&amp;gt;();&lt;br/&gt;
                 Index j = ia.startVector(&quot;acls&quot;);&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;while (!j.done()) {&lt;/li&gt;
	&lt;li&gt;ACL acl = new ACL();&lt;/li&gt;
	&lt;li&gt;acl.deserialize(ia, &quot;acl&quot;);&lt;/li&gt;
	&lt;li&gt;aclList.add(acl);&lt;/li&gt;
	&lt;li&gt;j.incr();&lt;br/&gt;
    +            if (j != null) {
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    just as @anmolnar  review, we should throw exception if j == null, so add code just like &lt;/p&gt;

&lt;p&gt;    if (j == null)&lt;/p&gt;
{
        throw Exception(error_message);
    }
&lt;p&gt;    @maoling can this change be elegant? &lt;/p&gt;
</comment>
                            <comment id="16415411" author="githubbot" created="Tue, 27 Mar 2018 10:52:26 +0000"  >&lt;p&gt;Github user brettKK commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    yeah&#65292; I will fix it @anmolnar @maoling @LJ1043041006 &lt;/p&gt;</comment>
                            <comment id="16415452" author="githubbot" created="Tue, 27 Mar 2018 11:42:35 +0000"  >&lt;p&gt;Github user anmolnar commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @LJ1043041006 Looking good.&lt;br/&gt;
    RuntimeException might suit better, but I&apos;m not sure.&lt;/p&gt;</comment>
                            <comment id="16444214" author="githubbot" created="Thu, 19 Apr 2018 15:14:06 +0000"  >&lt;p&gt;Github user lujiefsi commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Can we close it???&lt;/p&gt;</comment>
                            <comment id="16444275" author="githubbot" created="Thu, 19 Apr 2018 15:47:48 +0000"  >&lt;p&gt;Github user brettKK closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16444277" author="githubbot" created="Thu, 19 Apr 2018 15:47:58 +0000"  >&lt;p&gt;GitHub user brettKK reopened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-3007&quot; title=&quot;Potential NPE in ReferenceCountedACLCache#deserialize &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-3007&quot;&gt;&lt;del&gt;ZOOKEEPER-3007&lt;/del&gt;&lt;/a&gt;:Potential NPE in ReferenceCountedACLCache#deserialize&lt;/p&gt;

&lt;p&gt;    @LJ1043041006 found a potential NPE in ZK&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;    callee BinaryInputArchive#startVector will return null:&lt;br/&gt;
    ```&lt;br/&gt;
    // code placeholder&lt;br/&gt;
    public Index startVector(String tag) throws IOException {&lt;br/&gt;
        int len = readInt(tag);&lt;br/&gt;
         if (len == -1) &lt;/p&gt;
{
         return null;
    }
&lt;p&gt;    ```&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;    and caller ReferenceCountedACLCache#deserialize  call it without null check&lt;br/&gt;
    ```&lt;br/&gt;
    // code placeholder&lt;br/&gt;
    Index j = ia.startVector(&quot;acls&quot;);&lt;br/&gt;
    while (!j.done()) &lt;/p&gt;
{
      ACL acl = new ACL();
      acl.deserialize(ia, &quot;acl&quot;);
    }
&lt;p&gt;    ```&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/brettKK/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/brettKK/zookeeper&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #495&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7d8d5230c5a87faef94d038a258b159a322f3f5e&lt;br/&gt;
Author: gongleigl.gong &amp;lt;gongleigl.gong@...&amp;gt;&lt;br/&gt;
Date:   2018-03-26T13:16:06Z&lt;/p&gt;

&lt;p&gt;    d&lt;/p&gt;

&lt;p&gt;commit 700dfb7f48f774dd215e5bf19340a4b61eda3397&lt;br/&gt;
Author: gongleigl.gong &amp;lt;gongleigl.gong@...&amp;gt;&lt;br/&gt;
Date:   2018-03-27T16:38:28Z&lt;/p&gt;

&lt;p&gt;    fix NPE bug&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16444307" author="hadoopqa" created="Thu, 19 Apr 2018 16:07:07 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1601//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1601//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1601//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1601//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1601//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1601//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16447121" author="hadoopqa" created="Sun, 22 Apr 2018 07:15:18 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    -1 contrib tests.  The patch failed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1612//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1612//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1612//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1612//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1612//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1612//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16447132" author="hadoopqa" created="Sun, 22 Apr 2018 07:32:01 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1614//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1614//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1614//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1614//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1614//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1614//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16451452" author="githubbot" created="Wed, 25 Apr 2018 00:42:28 +0000"  >&lt;p&gt;Github user phunt commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495#discussion_r183918644&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495#discussion_r183918644&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: src/java/main/org/apache/zookeeper/server/ReferenceCountedACLCache.java &amp;#8212;&lt;br/&gt;
    @@ -109,6 +109,10 @@ public synchronized void deserialize(InputArchive ia) throws IOException {&lt;br/&gt;
                 }&lt;br/&gt;
                 List&amp;lt;ACL&amp;gt; aclList = new ArrayList&amp;lt;ACL&amp;gt;();&lt;br/&gt;
                 Index j = ia.startVector(&quot;acls&quot;);&lt;br/&gt;
    +            if (j == null) {&lt;br/&gt;
    +                LOG.error(&quot;ERROR: incorrent format of InputArchive&quot; + ia);&lt;br/&gt;
    &amp;#8212; End diff &amp;#8211;&lt;/p&gt;

&lt;p&gt;    You don&apos;t need an ERROR in the text here or on the next line. It&apos;s already LOG&apos;d as an error. Same for the next line - it&apos;s a RTE.&lt;/p&gt;

&lt;p&gt;    Also you need a space  &quot;... of InputArchive&quot; -&amp;gt; &quot;.... of InputArchive &quot; (notice space at the end. Otw the text of ia is just appended w/o the space. Also notice that ia doesn&apos;t have a toString, so I&apos;m not sure how helpful that is.... it&apos;s fine to leave I guess.&lt;/p&gt;</comment>
                            <comment id="16451456" author="githubbot" created="Wed, 25 Apr 2018 00:44:07 +0000"  >&lt;p&gt;Github user phunt commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I ran out of time to answer this question, perhaps you can tell me - what happens when the RTE is thrown? Is the caller handling it appropriately/reasonably, or are we just pushing the problem somewhere else?&lt;/p&gt;</comment>
                            <comment id="16451484" author="githubbot" created="Wed, 25 Apr 2018 01:11:30 +0000"  >&lt;p&gt;Github user lujiefsi commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @phunt :&lt;br/&gt;
    I think the reason that @brettKK  use RuntimeException to replace NullPointerException is :(1)NullPointerException  is subclass of RuntimeException (2) give the semantic reason instead  ugly NPE.(3)@brettkk may dost not think over what happens when the RTE is thrown. He/She may just do it due to (2) .&lt;/p&gt;</comment>
                            <comment id="16451508" author="githubbot" created="Wed, 25 Apr 2018 01:49:52 +0000"  >&lt;p&gt;Github user phunt commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Understood on throwing the exception (1&amp;amp;2). I&apos;m interested in 3 - when it is thrown is it handled correctly or some unexpected sideeffect. If we&apos;re going to try to fix we should really ensure we fix it.&lt;/p&gt;</comment>
                            <comment id="16451529" author="githubbot" created="Wed, 25 Apr 2018 02:26:59 +0000"  >&lt;p&gt;Github user lujiefsi commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @phunt &lt;br/&gt;
    I got it. I have found all &quot;deserialize&quot; root caller and callsite postion:&lt;br/&gt;
    (1)QuorumPeer#1208,#1154,#1152,#1182,#1154,#1194,#1195: their code have same format:&lt;br/&gt;
    ` try &lt;/p&gt;
{
                       //root caller
                        }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
                            LOG.warn(&quot;Unexpected exception&quot;,e);
           }
&lt;p&gt;    } `   &lt;br/&gt;
    So i think the RuntimeException in the patch  is ok in here&lt;br/&gt;
    (2)QuorumPeer#860,852:  there is another &quot;throw new RuntimeException&quot; at #520. So i think the RuntimeException in the patch  is ok in here&lt;br/&gt;
    (3)ZooKeeperServerMain#64  SnapshotFormatter#53 : these two caller are main function, when run into RuntimeException , it will exit, I am not sure the &quot;RuntimeException&quot; in the patch  whether is ok in here.&lt;/p&gt;
</comment>
                            <comment id="16451558" author="hadoopqa" created="Wed, 25 Apr 2018 03:16:12 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1628//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1628//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1628//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1628//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1628//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1628//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16453098" author="githubbot" created="Wed, 25 Apr 2018 21:15:17 +0000"  >&lt;p&gt;Github user phunt commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok, that (call site analysis) makes sense. &lt;/p&gt;

&lt;p&gt;    I&apos;m afraid I was unclear, when I said&lt;/p&gt;

&lt;p&gt;    &quot;You don&apos;t need an ERROR in the text here or on the next line.&quot;&lt;/p&gt;

&lt;p&gt;    What I mean is that the text string should not start with &quot;ERROR&quot; given the error string is in an exception and the logging (from one of the callers) will determine the severity to assign. As such my recommendation would be something like:&lt;/p&gt;

&lt;p&gt;    &amp;gt; throw new RuntimeException(&quot;Incorrect format of InputArchive when deserialize DataTree - missing acls&quot;);&lt;/p&gt;

&lt;p&gt;    Notice: 1) the removal of &quot;ERROR&quot; and the addition of &quot;missing acls&quot; in order to give the person diagnosing the problem a bit more insight (otw they have to find the source line in order to get more insight into what they formatting issue might be).&lt;/p&gt;

&lt;p&gt;    If you clear this up (this one line) I think we should be good for commit.&lt;/p&gt;

&lt;p&gt;    Thanks!&lt;/p&gt;</comment>
                            <comment id="16453380" author="hadoopqa" created="Thu, 26 Apr 2018 02:33:03 +0000"  >&lt;p&gt;-1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1632//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1632//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1632//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1632//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1632//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/1632//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16453722" author="githubbot" created="Thu, 26 Apr 2018 09:02:13 +0000"  >&lt;p&gt;Github user lujiefsi commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Seems that unit test error is not caused by this patch?&lt;/p&gt;</comment>
                            <comment id="16455476" author="githubbot" created="Thu, 26 Apr 2018 22:22:49 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16455480" author="phunt" created="Thu, 26 Apr 2018 22:24:44 +0000"  >&lt;p&gt;Issue resolved by pull request 495&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16455481" author="githubbot" created="Thu, 26 Apr 2018 22:25:37 +0000"  >&lt;p&gt;Github user phunt commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/495&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/495&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    +1. Yes, it looks like those failures are unrelated (tests passed for me). Thanks @lujiefsi and @brettKK &lt;/p&gt;</comment>
                            <comment id="16455558" author="hudson" created="Thu, 26 Apr 2018 23:34:30 +0000"  >&lt;p&gt;FAILURE: Integrated in Jenkins build ZooKeeper-trunk #3821 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3821/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3821/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-3007&quot; title=&quot;Potential NPE in ReferenceCountedACLCache#deserialize &quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-3007&quot;&gt;&lt;del&gt;ZOOKEEPER-3007&lt;/del&gt;&lt;/a&gt;: Potential NPE in ReferenceCountedACLCache#deserialize (phunt: rev 2c0168ad37b529447ac8cb1bf866d014f8a97981)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/java/test/org/apache/zookeeper/server/ReferenceCountedACLCacheTest.java&lt;/li&gt;
	&lt;li&gt;(edit) src/java/main/org/apache/zookeeper/server/ReferenceCountedACLCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 29 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rron:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>