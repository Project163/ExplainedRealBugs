<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:05:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2332] Zookeeper failed to start for empty txn log</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2332</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;We found that the zookeeper server with version 3.4.6 failed to start for there is a empty txn log in log dir.  &lt;br/&gt;
I think we should skip the empty log file during restoring the datatree. &lt;br/&gt;
Any suggestion?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2015-11-27 19:16:16,887 [myid:] - ERROR [main:ZooKeeperServerMain@63] - Unexpected exception, exiting abnormally
java.io.EOFException
at java.io.DataInputStream.readInt(DataInputStream.java:392)
at org.apache.jute.BinaryInputArchive.readInt(BinaryInputArchive.java:63)
at org.apache.zookeeper.server.persistence.FileHeader.deserialize(FileHeader.java:64)
at org.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.inStreamCreated(FileTxnLog.java:576)
at org.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.createInputArchive(FileTxnLog.java:595)
at org.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.goToNextLog(FileTxnLog.java:561)
at org.apache.zookeeper.server.persistence.FileTxnLog$FileTxnIterator.next(FileTxnLog.java:643)
at org.apache.zookeeper.server.persistence.FileTxnSnapLog.restore(FileTxnSnapLog.java:158)
at org.apache.zookeeper.server.ZKDatabase.loadDataBase(ZKDatabase.java:223)
at org.apache.zookeeper.server.ZooKeeperServer.loadData(ZooKeeperServer.java:272)
at org.apache.zookeeper.server.ZooKeeperServer.startdata(ZooKeeperServer.java:399)
at org.apache.zookeeper.server.NIOServerCnxnFactory.startup(NIOServerCnxnFactory.java:122)
at org.apache.zookeeper.server.ZooKeeperServerMain.runFromConfig(ZooKeeperServerMain.java:113)
at org.apache.zookeeper.server.ZooKeeperServerMain.initializeAndRun(ZooKeeperServerMain.java:86)
at org.apache.zookeeper.server.ZooKeeperServerMain.main(ZooKeeperServerMain.java:52)
at org.apache.zookeeper.server.quorum.QuorumPeerMain.initializeAndRun(QuorumPeerMain.java:116)
at org.apache.zookeeper.server.quorum.QuorumPeerMain.main(QuorumPeerMain.java:78)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12916641">ZOOKEEPER-2332</key>
            <summary>Zookeeper failed to start for empty txn log</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fanyang">fanyang</assignee>
                                    <reporter username="liushaohui">Shaohui Liu</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 27 Nov 2015 13:42:02 +0000</created>
                <updated>Thu, 24 Oct 2024 20:09:31 +0000</updated>
                            <resolved>Wed, 18 Sep 2024 20:35:31 +0000</resolved>
                                    <version>3.4.6</version>
                                    <fixVersion>3.10.0</fixVersion>
                    <fixVersion>3.9.3</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>20</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="12600">3.5h</timespent>
                                <comments>
                            <comment id="15031549" author="liushaohui" created="Mon, 30 Nov 2015 09:34:17 +0000"  >&lt;p&gt;First patch to fix this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt;&lt;br/&gt;
Could you help to review this small patch? Thanks a lot.&lt;/p&gt;</comment>
                            <comment id="15031589" author="hadoopqa" created="Mon, 30 Nov 2015 09:53:28 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1715590.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2969//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2969//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2969//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2969//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2969//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2969//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15043513" author="rgs" created="Sat, 5 Dec 2015 21:27:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;liushaohui&lt;/a&gt;: how did the empty txnlog happened in the first place? I am bit worried that by doing this we might introduce inconsistencies... If a txnlog is corrupted, we should just give up.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fpj&quot; class=&quot;user-hover&quot; rel=&quot;fpj&quot;&gt;fpj&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;rakeshr&lt;/a&gt;: thoughts?&lt;/p&gt;</comment>
                            <comment id="15043514" author="rgs" created="Sat, 5 Dec 2015 21:28:30 +0000"  >&lt;p&gt;Actually, I am very worried - not a little &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15043541" author="fpj" created="Sat, 5 Dec 2015 22:27:51 +0000"  >&lt;p&gt;We add a header to each txn log file, so if it is missing, then I assume the server crashed before it had a chance to write it. It might be ok to skip this file, but I need to think a bit about corner cases.&lt;/p&gt;</comment>
                            <comment id="15044328" author="liushaohui" created="Mon, 7 Dec 2015 03:47:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;how did the empty txnlog happened in the first place?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The zookeeper server was killed after creating a new txn log file before flushing the log header to the log.&lt;br/&gt;
So a txn log is left without a valid header and makes the the zookeeper server fail to start.&lt;br/&gt;
See: FileTxnLog.java#207&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (logStream==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
               &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(LOG.isInfoEnabled()){
                    LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Creating &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; log file: log.&quot;&lt;/span&gt; +  
                            &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.toHexString(hdr.getZxid()));
               }
               
               logFileWrite = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(logDir, (&lt;span class=&quot;code-quote&quot;&gt;&quot;log.&quot;&lt;/span&gt; + 
                       &lt;span class=&quot;code-object&quot;&gt;Long&lt;/span&gt;.toHexString(hdr.getZxid())));
               fos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileOutputStream(logFileWrite);
               logStream=&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedOutputStream(fos);
               oa = BinaryOutputArchive.getArchive(logStream);
               FileHeader fhdr = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileHeader(TXNLOG_MAGIC,VERSION, dbId);
               fhdr.serialize(oa, &lt;span class=&quot;code-quote&quot;&gt;&quot;fileheader&quot;&lt;/span&gt;);
               &lt;span class=&quot;code-comment&quot;&gt;// Make sure that the magic number is written before padding.
&lt;/span&gt;               logStream.flush();
               currentSize = fos.getChannel().position();
               streamsToFlush.add(fos);
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15044420" author="rakeshr" created="Mon, 7 Dec 2015 06:07:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=liushaohui&quot; class=&quot;user-hover&quot; rel=&quot;liushaohui&quot;&gt;liushaohui&lt;/a&gt; for working on this. Yes, an empty file would be created with the statement &lt;tt&gt;fos = new FileOutputStream(logFileWrite);&lt;/tt&gt;. I&apos;m just adding one more case &lt;a href=&quot;https://github.com/apache/zookeeper/blob/trunk/src/java/main/org/apache/zookeeper/server/persistence/FileSnap.java#L225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FileSnap.java#L225&lt;/a&gt; of empty snapshot file creation. Skipping the empty file is an easy approach, here we need to see cases like, file is corrupted and becomes empty etc.&lt;/p&gt;</comment>
                            <comment id="15045593" author="cnauroth" created="Mon, 7 Dec 2015 19:59:26 +0000"  >&lt;blockquote&gt;&lt;p&gt;The zookeeper server was killed after creating a new txn log file before flushing the log header to the log.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This sounds like a case where we should rely on an atomicity guarantee from the file system to make sure that the new log file is committed in a consistent state.  For example:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Create new log file named log.&amp;lt;zxid&amp;gt;.new.&lt;/li&gt;
	&lt;li&gt;Write and flush header.&lt;/li&gt;
	&lt;li&gt;Atomically rename log.&amp;lt;zxid&amp;gt;.new to log.&amp;lt;zxid&amp;gt;.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;This would ensure that any file named log.&amp;#42; that is not named log.&amp;#42;.new is a valid transaction log file containing at least a complete header.  After that, the pre-existing log file padding and checksumming logic should be sufficient to protect against things like a partially serialized transaction.  At read time, the code can self-recover from prior errors by ignoring and deleting leftover &quot;uncommitted&quot; log.&amp;#42;.new files.&lt;/p&gt;

&lt;p&gt;I think this would be less brittle than trying to detect a bad log file at load time.&lt;/p&gt;</comment>
                            <comment id="15046315" author="rakeshr" created="Tue, 8 Dec 2015 04:07:43 +0000"  >&lt;blockquote&gt;&lt;p&gt;This sounds like a case where we should rely on an atomicity guarantee from the file system to make sure that the new log file is committed in a consistent state.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Its a good point. How about using &lt;tt&gt;org.apache.zookeeper.common.AtomicFileOutputStream&lt;/tt&gt;, which will be helpful to ensure atomicity. While writing the file its using a temporary file, &lt;tt&gt;.tmp&lt;/tt&gt; suffix and finally renames to original file.&lt;/p&gt;</comment>
                            <comment id="15046409" author="cnauroth" created="Tue, 8 Dec 2015 05:48:26 +0000"  >&lt;p&gt;Yes, something similar to &lt;tt&gt;AtomicFileOutputStream&lt;/tt&gt; would work well.  The current implementation of &lt;tt&gt;AtomicFileOutputStream&lt;/tt&gt; isn&apos;t an exact fit for this, because the &quot;commit&quot; is tightly coupled to closing the file.  In this case, we&apos;d want to commit (atomically rename) without closing the file, so that we can keep appending transactions to the open log file.&lt;/p&gt;</comment>
                            <comment id="15167862" author="hadoopqa" created="Thu, 25 Feb 2016 20:55:20 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1729259.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3049//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3049//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3049//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3049//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3049//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3049//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15589719" author="evolvah" created="Wed, 19 Oct 2016 20:00:40 +0000"  >&lt;p&gt;I&apos;ve seen this problem happen on a system that ran out of disk space due to other application filling up the disk. The entry for the transaction log file was created on the file system but ZooKeeper was not able to write anything into it. After the system was rebooted and disk space was released, ZooKeeper failed to start.&lt;/p&gt;

&lt;p&gt;I think this is a two-fold problem.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;On one hand, ZooKeeper should not be creating corrupted log or snapshot files.&lt;/li&gt;
	&lt;li&gt;On the other hand, it should not explode with an unhandled exception if it does come across an invalid log file.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Before opening a snapshot file, ZooKeeper does some quick and inexpensive validation and rejects the corrupted snapshots. It does not validate the log files and does not handle read/parse errors in case if came across a corrupted log file.&lt;/p&gt;

&lt;p&gt;The defect is reproducible on the heads of master, branch-3.5, and branch-3.4.&lt;/p&gt;</comment>
                            <comment id="15589773" author="hadoopqa" created="Wed, 19 Oct 2016 20:29:50 +0000"  >&lt;p&gt;+1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision cef5978969bedfe066f903834a9ea4af6d508844.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3494//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3494//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3494//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3494//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3494//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3494//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16695462" author="mkedwards" created="Thu, 22 Nov 2018 01:48:17 +0000"  >&lt;p&gt;Still an issue in branch-3.5?  Serious?&lt;/p&gt;</comment>
                            <comment id="16695463" author="hadoopqa" created="Thu, 22 Nov 2018 01:51:14 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12774789/ZOOKEEPER-2332-v001.diff&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1507f67a06175155003722297daeb60bc912af1d.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3719//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3719//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="17259580" author="ztzg" created="Wed, 6 Jan 2021 10:30:47 +0000"  >&lt;p&gt;This is marked as a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2376&quot; title=&quot;Server fails to start if there is a zero-length TxnLog file present in the log directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2376&quot;&gt;&lt;del&gt;ZOOKEEPER-2376&lt;/del&gt;&lt;/a&gt;, which has been resolved.  Should I resolve?&lt;/p&gt;</comment>
                            <comment id="17818696" author="fanyang" created="Tue, 20 Feb 2024 08:02:50 +0000"  >&lt;p&gt;Hello everyone, I&apos;m creating a new PR to fix this.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/2141&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/2141&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think a distinction should be made between a case where the empty txn log is at the end of the list, and a case where the empty txn log is in the middle of the list. In the former case, it is safe to delete the empty txn log, but in the latter case, this may indicate a real occurrence of data corruption (e.g. loss of filesystem metadata). So this PR I&apos;m submitting only automatically handles the former case.&lt;/p&gt;</comment>
                            <comment id="17885711" author="kezhuw" created="Sun, 29 Sep 2024 13:35:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andor&quot; class=&quot;user-hover&quot; rel=&quot;andor&quot;&gt;andor&lt;/a&gt;&#160;Could you assign this to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fanyang&quot; class=&quot;user-hover&quot; rel=&quot;fanyang&quot;&gt;fanyang&lt;/a&gt;? &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12944637">ZOOKEEPER-2376</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13571109">ZOOKEEPER-4813</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12627839">ZOOKEEPER-1621</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12774789" name="ZOOKEEPER-2332-v001.diff" size="2395" author="liushaohui" created="Mon, 30 Nov 2015 09:34:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p0fr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>