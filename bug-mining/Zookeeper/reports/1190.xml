<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:06:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-4736] socket fd leak</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-4736</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;if network service is unavailable, as &quot;ifdown eth0&quot; or &quot;service network stop&quot; and so on, zk-client process running on this node will&#160; &#160;experience fd leakage &#12290;it happens for invoking&#160; &quot;new Zookeeper(..)&quot;.&#160;&lt;/p&gt;

&lt;p&gt;when &#160;&#160;network service is unavailable, ClientCnxn::SendThread::run() method will continuely do startConnect()&#65292;and suffer exception &quot;SocketException: Network is unreachable&quot;. Exception handlers catch this exception and do SendThread::cleanup() to do some clean operation,but because&#160; in ClientCnxnSocketNIO::registerAndConnect method socket is registed to selector firstly and do&#160; sock.connect operation leading the fd of sock can&apos;t be closed.&lt;/p&gt;

&lt;p&gt;Changing the order of sock.connect and sock.register can solve this issue&#65292;and it will not affect Original sense because of the sock.reister take effect when&#160; selector.select(waitTimeOut) is triggered&lt;/p&gt;</description>
                <environment>&lt;p&gt;zookeeper 3.6.3&#160;&lt;/p&gt;</environment>
        <key id="13547329">ZOOKEEPER-4736</key>
            <summary>socket fd leak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lchq">lchq</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 15 Aug 2023 03:48:56 +0000</created>
                <updated>Thu, 30 Oct 2025 20:22:55 +0000</updated>
                            <resolved>Thu, 30 Oct 2025 20:22:25 +0000</resolved>
                                    <version>3.6.3</version>
                    <version>3.7.0</version>
                    <version>3.8.0</version>
                    <version>3.9.0</version>
                                    <fixVersion>3.10.0</fixVersion>
                    <fixVersion>3.9.5</fixVersion>
                                    <component>java client</component>
                    <component>server</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="18034253" author="andorm" created="Thu, 30 Oct 2025 20:22:25 +0000"  >&lt;p&gt;Issue resolved by pull request 2047&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/2047&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/2047&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13062198" name="4cea510a57af58c08e73d146e8535ee4.jpg" size="317987" author="lchq" created="Tue, 15 Aug 2023 03:48:49 +0000"/>
                            <attachment id="13062197" name="IMG_20230815_114433.jpg" size="239394" author="lchq" created="Tue, 15 Aug 2023 03:48:49 +0000"/>
                            <attachment id="13062199" name="a632150451be7e6648702326e9b216c9.jpg" size="262796" author="lchq" created="Tue, 15 Aug 2023 05:42:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jsa0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>