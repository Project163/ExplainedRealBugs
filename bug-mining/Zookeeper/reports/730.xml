<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:57:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2299] NullPointerException in LocalPeerBean for ClientAddress</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2299</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;When clientPortAddress is not configured LocalPeerBean throws NullPointerException.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected Behavior:&lt;/b&gt;&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;When only clientPort is configured ClientAddress value should be 0.0.0.0:clientPort or 0:0:0:0:0:0:0:0:clientPort&lt;/li&gt;
	&lt;li&gt;When both clientPort clientPortAddress are configured then expected value is clientPortAddress:clientPort&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12907027">ZOOKEEPER-2299</key>
            <summary>NullPointerException in LocalPeerBean for ClientAddress</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="arshad.mohammad">Mohammad Arshad</assignee>
                                    <reporter username="arshad.mohammad">Mohammad Arshad</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2015 09:28:54 +0000</created>
                <updated>Thu, 21 Jul 2016 20:18:35 +0000</updated>
                            <resolved>Mon, 7 Dec 2015 05:08:40 +0000</resolved>
                                                    <fixVersion>3.5.2</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>jmx</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14968881" author="hadoopqa" created="Thu, 22 Oct 2015 09:47:47 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12768006/ZOOKEEPER-2299-01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12768006/ZOOKEEPER-2299-01.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1709293.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 2 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2922//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2922//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2922//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2922//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2922//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2922//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14969102" author="rakeshr" created="Thu, 22 Oct 2015 12:39:27 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arshad.mohammad&quot; class=&quot;user-hover&quot; rel=&quot;arshad.mohammad&quot;&gt;arshad.mohammad&lt;/a&gt; for reporting this. I could see the unit test case is written to simulate the scenario. Could you tell me the way &lt;tt&gt;qp.myClientAddr&lt;/tt&gt; would become null value in the real cluster. &lt;/p&gt;

&lt;p&gt;Also, just one quick comment about the patch. Say, if someone use secureClientPort, server will use &lt;tt&gt;peer.secureCnxnFactory&lt;/tt&gt; to handle the connections. &lt;tt&gt;peer.cnxnFactory&lt;/tt&gt; will be null, again this patch will throw NPE, right?&lt;/p&gt;</comment>
                            <comment id="14969136" author="arshad.mohammad" created="Thu, 22 Oct 2015 13:11:57 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;rakeshr&lt;/a&gt; for looking into the issue.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;blockquote&gt;
&lt;p&gt;Could you tell me the way qp.myClientAddr would become null value in the real cluster.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;scenario is as follows&lt;br/&gt;
1) in zoo.cfg clientPort is configured but clientPortAddress is not configured(which is valid configuration).&lt;br/&gt;
2) in zoo.cfg servers have following configuration, not added client information&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;server.1=localhost:2888:3888:participant
server.2=localhost:2889:3889:participant
server.3=localhost:2890:3890:participant&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Remark:&lt;tt&gt;qp.myClientAddr&lt;/tt&gt;  is not null only when   client ip is specified in dynamic configuration&lt;br/&gt;
like  server.1=localhost:2888:3888:participant;localhost:2181&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;yes, if only secureClientPort is configured &lt;tt&gt;peer.cnxnFactory&lt;/tt&gt; will be null.&lt;br/&gt;
I am returning blank string in this case.&lt;br/&gt;
&lt;font color=&quot;blue&quot;&gt;I don&apos;t think we should show secure client address in ClientAddress property.&lt;br/&gt;
There should be different jmx property  SecureClientAddress. What you say? Can I raise septate ticket to add SecureClientAddress and SecureClientPort jmx property?&lt;/font&gt;&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14969466" author="rakeshr" created="Thu, 22 Oct 2015 17:04:05 +0000"  >&lt;blockquote&gt;&lt;p&gt;Can I raise separate ticket to add SecureClientAddress and SecureClientPort jmx property?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yeah, Agreed for &lt;tt&gt;SecureClientPort&lt;/tt&gt; jmx property. I think address is not required as it will be same, right?&lt;/p&gt;</comment>
                            <comment id="14969507" author="eribeiro" created="Thu, 22 Oct 2015 17:30:23 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arshad.mohammad&quot; class=&quot;user-hover&quot; rel=&quot;arshad.mohammad&quot;&gt;arshad.mohammad&lt;/a&gt;, very nice patch, again. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; My only suggestion would be to use a more meaningful name for unit tests. &lt;/p&gt;
</comment>
                            <comment id="14969517" author="eribeiro" created="Thu, 22 Oct 2015 17:36:25 +0000"  >&lt;p&gt;Oops, hit enter before finishing the text. So, &lt;tt&gt;testClientAddress&lt;/tt&gt; is a very generic name, probably very similar to other similar/equal names around. I think a more appropriate test name would be &lt;tt&gt;testClientAddressShouldNotBeNull&lt;/tt&gt; or something alike, up to you. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I am fond of Uncle Bob Martin recommendation that test methods should be named the more clearly as possible and the places I worked enforced this too. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; You can see some traditional recommendations here: &lt;a href=&quot;https://dzone.com/articles/7-popular-unit-test-naming&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://dzone.com/articles/7-popular-unit-test-naming&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14973113" author="arshad.mohammad" created="Sun, 25 Oct 2015 07:12:03 +0000"  >&lt;p&gt;SecureClientAddress also required as it is configurable and can be different from ClientAddress.  Created Jira &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2300&quot; title=&quot;Expose SecureClientPort and SecureClientAddress JMX properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2300&quot;&gt;&lt;del&gt;ZOOKEEPER-2300&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14973120" author="arshad.mohammad" created="Sun, 25 Oct 2015 07:30:50 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eribeiro&quot; class=&quot;user-hover&quot; rel=&quot;eribeiro&quot;&gt;eribeiro&lt;/a&gt; for your review comments.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;In the test case I am testing the complete ClientAddress feature, all three scenarios are tested. If I go for the naming convention you are suggesting I have to split the test case into three which will take more when executed.&lt;/li&gt;
	&lt;li&gt;In my previous patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt; suggested to have smaller test case name.  &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2269?focusedCommentId=14738160&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14738160&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;Comment &lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;So not changing the test case name.&lt;/p&gt;</comment>
                            <comment id="14973932" author="arshad.mohammad" created="Mon, 26 Oct 2015 09:35:57 +0000"  >&lt;p&gt;Some test cases were failed because there is another problem in the code. Created another jira &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2301&quot; title=&quot;QuorumPeer does not listen on passed client IP in the constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2301&quot;&gt;&lt;del&gt;ZOOKEEPER-2301&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14973936" author="arshad.mohammad" created="Mon, 26 Oct 2015 09:39:08 +0000"  >&lt;p&gt;If &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2299&quot; title=&quot;NullPointerException in LocalPeerBean for ClientAddress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2299&quot;&gt;&lt;del&gt;ZOOKEEPER-2299&lt;/del&gt;&lt;/a&gt; is commited before &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2301&quot; title=&quot;QuorumPeer does not listen on passed client IP in the constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2301&quot;&gt;&lt;del&gt;ZOOKEEPER-2301&lt;/del&gt;&lt;/a&gt;, two test cases in &lt;tt&gt;org.apache.zookeeper.test.ReconfigTest&lt;/tt&gt; will fail&lt;/p&gt;</comment>
                            <comment id="15044137" author="rgs" created="Sun, 6 Dec 2015 20:57:46 +0000"  >&lt;p&gt;lgtm, +1. Please resubmit so CI can run once &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2301&quot; title=&quot;QuorumPeer does not listen on passed client IP in the constructor&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2301&quot;&gt;&lt;del&gt;ZOOKEEPER-2301&lt;/del&gt;&lt;/a&gt; is applied. Thanks!&lt;/p&gt;</comment>
                            <comment id="15044383" author="rgs" created="Mon, 7 Dec 2015 05:08:40 +0000"  >&lt;p&gt;Applied:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/zookeeper/commit/8df65c700673cff3e78b58b27efe1a618a6e8732&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/8df65c700673cff3e78b58b27efe1a618a6e8732&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/commit/addbf268630e48a1f29816eebe3e4adee813f225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/addbf268630e48a1f29816eebe3e4adee813f225&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=arshad.mohammad&quot; class=&quot;user-hover&quot; rel=&quot;arshad.mohammad&quot;&gt;arshad.mohammad&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="15044402" author="hudson" created="Mon, 7 Dec 2015 05:45:40 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2822 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2822/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2822/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2299&quot; title=&quot;NullPointerException in LocalPeerBean for ClientAddress&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2299&quot;&gt;&lt;del&gt;ZOOKEEPER-2299&lt;/del&gt;&lt;/a&gt;: NullPointerException in LocalPeerBean for ClientAddress&lt;br/&gt;
(Arshad Mohammad via rgs) (rgs: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1718253&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1718253&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;trunk/src/java/main/org/apache/zookeeper/server/quorum/LocalPeerBean.java&lt;/li&gt;
	&lt;li&gt;trunk/src/java/test/org/apache/zookeeper/server/quorum/LocalPeerBeanTest.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12907720">ZOOKEEPER-2301</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12768006" name="ZOOKEEPER-2299-01.patch" size="4241" author="arshad.mohammad" created="Thu, 22 Oct 2015 09:38:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nddb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>