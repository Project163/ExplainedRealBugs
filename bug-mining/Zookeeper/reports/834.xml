<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:00:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2874] Windows Debug builds don&apos;t link with `/MTd`</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2874</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;While not apparent when building ZooKeeper stand-alone, further testing when linking with Mesos revealed it was ZooKeeper that was causing the warning:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;LIBCMTD.lib(initializers.obj) : warning LNK4098: defaultlib &apos;libcmt.lib&apos; conflicts with use of other libs; use /NODEFAULTLIB:library [C:\Users\andschwa\src\mesos\build\src\slave\mesos-agent.vcxproj]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As Mesos is linking with &lt;tt&gt;/MTd&lt;/tt&gt; in Debug configuration (which is the most common practice).&lt;/p&gt;

&lt;p&gt;Once I found the source of the warning, the fix is trivial and I am posting a patch.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 10 using CMake&lt;/p&gt;</environment>
        <key id="13094214">ZOOKEEPER-2874</key>
            <summary>Windows Debug builds don&apos;t link with `/MTd`</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andschwa">Andrew Schwartzmeyer</assignee>
                                    <reporter username="andschwa">Andrew Schwartzmeyer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Aug 2017 22:02:53 +0000</created>
                <updated>Fri, 18 Aug 2017 05:35:24 +0000</updated>
                            <resolved>Fri, 18 Aug 2017 04:21:30 +0000</resolved>
                                                    <fixVersion>3.4.11</fixVersion>
                    <fixVersion>3.5.4</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16124180" author="githubbot" created="Fri, 11 Aug 2017 22:08:41 +0000"  >&lt;p&gt;GitHub user andschwa opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2874&quot; title=&quot;Windows Debug builds don&amp;#39;t link with `/MTd`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2874&quot;&gt;&lt;del&gt;ZOOKEEPER-2874&lt;/del&gt;&lt;/a&gt;: Windows Debug builds don&apos;t link with `/MTd`&lt;/p&gt;

&lt;p&gt;    When building in Debug configuration, this logic ensures that `/MTd` is&lt;br/&gt;
    used instead of just `/MT`, which on Windows means to link to the&lt;br/&gt;
    multi-threaded (debug) version of the standard library.&lt;/p&gt;

&lt;p&gt;    When the user does not add `/MT` as a compile option manually, CMake&lt;br/&gt;
    would otherwise link to the correct one. Because we are overriding it&lt;br/&gt;
    for threaded compilations, we also must ensure that Debug configurations&lt;br/&gt;
    are specially handled.&lt;/p&gt;

&lt;p&gt;    Furthermore, this must be done using a generator expression over&lt;br/&gt;
    configuration time logic because the Visual Studio CMake generators are&lt;br/&gt;
    &quot;multi-configuration generators&quot;, that is, the configuration is chosen&lt;br/&gt;
    at build time instead of compile time. The generator expression handles&lt;br/&gt;
    this scenario, but checking `CMAKE_BUILD_CONFIG` would not.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/andschwa/zookeeper&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/andschwa/zookeeper&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2874&quot; title=&quot;Windows Debug builds don&amp;#39;t link with `/MTd`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2874&quot;&gt;&lt;del&gt;ZOOKEEPER-2874&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/335.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #335&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 554e20e1f63c02e058f05010868c3f6b5a4b1f2c&lt;br/&gt;
Author: Andrew Schwartzmeyer &amp;lt;andrew@schwartzmeyer.com&amp;gt;&lt;br/&gt;
Date:   2017-08-11T22:03:28Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2874&quot; title=&quot;Windows Debug builds don&amp;#39;t link with `/MTd`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2874&quot;&gt;&lt;del&gt;ZOOKEEPER-2874&lt;/del&gt;&lt;/a&gt;: Windows Debug builds don&apos;t link with `/MTd`&lt;/p&gt;

&lt;p&gt;    When building in Debug configuration, this logic ensures that `/MTd` is&lt;br/&gt;
    used instead of just `/MT`, which on Windows means to link to the&lt;br/&gt;
    multi-threaded (debug) version of the standard library.&lt;/p&gt;

&lt;p&gt;    When the user does not add `/MT` as a compile option manually, CMake&lt;br/&gt;
    would otherwise link to the correct one. Because we are overriding it&lt;br/&gt;
    for threaded compilations, we also must ensure that Debug configurations&lt;br/&gt;
    are specially handled.&lt;/p&gt;

&lt;p&gt;    Furthermore, this must be done using a generator expression over&lt;br/&gt;
    configuration time logic because the Visual Studio CMake generators are&lt;br/&gt;
    &quot;multi-configuration generators&quot;, that is, the configuration is chosen&lt;br/&gt;
    at build time instead of compile time. The generator expression handles&lt;br/&gt;
    this scenario, but checking `CMAKE_BUILD_CONFIG` would not.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16124181" author="githubbot" created="Fri, 11 Aug 2017 22:09:42 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @hanm This should be backported to 3.5 and 3.4 as well; it should be a trivial cherry-pick, but let me know if you&apos;d like two more PRs.&lt;/p&gt;</comment>
                            <comment id="16124186" author="githubbot" created="Fri, 11 Aug 2017 22:15:22 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Built on Windows:&lt;/p&gt;

&lt;p&gt;    ```powershell&lt;br/&gt;
    &amp;gt; cmake --build . --config Debug&lt;br/&gt;
    &amp;gt; cmake --build . --config Release&lt;br/&gt;
    &amp;gt; rg libcmt&lt;br/&gt;
    cli.dir\Debug\cli.tlog\link.read.1.tlog&lt;br/&gt;
    17:C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2017\COMMUNITY\VC\TOOLS\MSVC\14.10.25017\LIB\X86\LIBCMTD.LIB&lt;/p&gt;

&lt;p&gt;    cli.dir\Release\cli.tlog\link.read.1.tlog&lt;br/&gt;
    17:C:\PROGRAM FILES (X86)\MICROSOFT VISUAL STUDIO\2017\COMMUNITY\VC\TOOLS\MSVC\14.10.25017\LIB\X86\LIBCMT.LIB&lt;br/&gt;
    ```&lt;/p&gt;

&lt;p&gt;    As you can see from the logs, the correct library is now being linked. I&apos;ve also integration tested this with Mesos, and it has eliminated the warning.&lt;/p&gt;</comment>
                            <comment id="16124218" author="hadoopqa" created="Fri, 11 Aug 2017 22:46:46 +0000"  >&lt;p&gt;+1 overall.  GitHub Pull Request  Build&lt;/p&gt;


&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +0 tests included.  The patch appears to be a documentation patch that doesn&apos;t require tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/940//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/940//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/940//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/940//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/940//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-github-pr-build/940//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16131692" author="githubbot" created="Fri, 18 Aug 2017 04:21:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16131693" author="hanm" created="Fri, 18 Aug 2017 04:21:30 +0000"  >&lt;p&gt;Issue resolved by pull request 335&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16131695" author="githubbot" created="Fri, 18 Aug 2017 04:23:11 +0000"  >&lt;p&gt;Github user hanm commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Committed to master: ab182d4561f1c6725af0e89e0b76d92186732195&lt;br/&gt;
    branch-3.5: 8f68c04838c3d034bcef7e937a3c23f3cfef8065&lt;br/&gt;
    branch-3.4: b903a07c4944cb0a90045e686b7c3f153aee6153&lt;/p&gt;</comment>
                            <comment id="16131698" author="githubbot" created="Fri, 18 Aug 2017 04:28:01 +0000"  >&lt;p&gt;Github user andschwa commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/zookeeper/pull/335&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/335&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Thank you @hanm!&lt;/p&gt;</comment>
                            <comment id="16131746" author="hudson" created="Fri, 18 Aug 2017 05:35:24 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #3503 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/3503/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/3503/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2874&quot; title=&quot;Windows Debug builds don&amp;#39;t link with `/MTd`&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2874&quot;&gt;&lt;del&gt;ZOOKEEPER-2874&lt;/del&gt;&lt;/a&gt;: Windows Debug builds don&apos;t link with `/MTd` (hanm: rev ab182d4561f1c6725af0e89e0b76d92186732195)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) src/c/CMakeLists.txt&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ippj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>