<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:57:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2156] If JAVA_HOME is not set zk startup and fetching status command execution result misleads user.</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2156</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;If JAVA_HOME is not set,  zk startup and fetching status command execution result misleads user.&lt;/p&gt;

&lt;p&gt;1. Eventhough zk startup has failed since JAVA_HOME is not set , on CLI it displays that zk STARTED.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#:~/Apr3rd/zookeeper-3.4.6/bin&amp;gt; ./zkServer.sh start
JMX enabled by default
Using config: /home/REX/Apr3rd/zookeeper-3.4.6/bin/../conf/zoo.cfg
Starting zookeeper ... STARTED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2.  Fetching zk status when JAVA_HOME is not set displays that process not running .&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;#:~/Apr3rd/zookeeper-3.4.6/bin&amp;gt; ./zkServer.sh status
JMX enabled by default
Using config: /home/REX/Apr3rd/zookeeper-3.4.6/bin/../conf/zoo.cfg
Error contacting service. It is probably not running.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12787904">ZOOKEEPER-2156</key>
            <summary>If JAVA_HOME is not set zk startup and fetching status command execution result misleads user.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andreina">J.Andreina</assignee>
                                    <reporter username="andreina">J.Andreina</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Apr 2015 05:03:39 +0000</created>
                <updated>Thu, 21 Jul 2016 20:18:24 +0000</updated>
                            <resolved>Wed, 20 May 2015 07:36:49 +0000</resolved>
                                                    <fixVersion>3.5.2</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                    <component>scripts</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14394065" author="andreina" created="Fri, 3 Apr 2015 05:05:33 +0000"  >&lt;p&gt;Attached an initial patch , where there is a check if JAVA_HOME is set . If not command execution will exit with proper error message.&lt;/p&gt;

&lt;p&gt;Please review the patch.&lt;/p&gt;</comment>
                            <comment id="14394069" author="hadoopqa" created="Fri, 3 Apr 2015 05:11:20 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12709168/ZOOKEEPER-2156.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12709168/ZOOKEEPER-2156.1.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1669825.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    -1 patch.  The patch command could not apply the patch.&lt;/p&gt;

&lt;p&gt;Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2599//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2599//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14394086" author="andreina" created="Fri, 3 Apr 2015 05:32:36 +0000"  >&lt;p&gt;Updated the patch with latest trunk code. &lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="14394128" author="hadoopqa" created="Fri, 3 Apr 2015 06:26:47 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12709171/ZOOKEEPER-2156.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12709171/ZOOKEEPER-2156.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1669825.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2600//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2600//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2600//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2600//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2600//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2600//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14394137" author="andreina" created="Fri, 3 Apr 2015 06:41:15 +0000"  >&lt;p&gt;Testcase failures are not related to this patch&lt;/p&gt;</comment>
                            <comment id="14394151" author="hadoopqa" created="Fri, 3 Apr 2015 06:52:21 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12709183/ZOOKEEPER-2156.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12709183/ZOOKEEPER-2156.2.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1669825.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2601//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2601//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2601//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2601//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2601//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2601//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14483872" author="rgs" created="Tue, 7 Apr 2015 19:28:04 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andreina&quot; class=&quot;user-hover&quot; rel=&quot;andreina&quot;&gt;andreina&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;If JAVA_HOME isn&apos;t set, we default to whatever is available in $Path. See:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/zookeeper/commit/90ef80c0a2593207be5436acf0270c1e160f0c78&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/commit/90ef80c0a2593207be5436acf0270c1e160f0c78&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Maybe your patch should only error out if JAVA_HOME isn&apos;t set &lt;b&gt;and&lt;/b&gt; there&apos;s no java in the $PATH?&lt;/p&gt;</comment>
                            <comment id="14484673" author="andreina" created="Wed, 8 Apr 2015 04:03:44 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt; for reviewing and correcting me. &lt;br/&gt;
Have updated the patch as per your suggestion . &lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="14484718" author="hadoopqa" created="Wed, 8 Apr 2015 05:01:39 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12723821/ZOOKEEPER-2156.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12723821/ZOOKEEPER-2156.3.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1671889.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2604//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2604//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2604//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2604//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2604//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2604//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14488919" author="andreina" created="Fri, 10 Apr 2015 05:06:39 +0000"  >&lt;p&gt;Hope there is no need of testcase for this jira .&lt;br/&gt;
Please review the patch and give your feedback.&lt;/p&gt;</comment>
                            <comment id="14488996" author="rakeshr" created="Fri, 10 Apr 2015 06:04:23 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andreina&quot; class=&quot;user-hover&quot; rel=&quot;andreina&quot;&gt;andreina&lt;/a&gt;, patch looks nice.
&lt;br class=&quot;atl-forced-newline&quot; /&gt;
Just few thoughts. Missed JAVA_HOME checks in few places, &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cases like, &lt;tt&gt;start-foreground&lt;/tt&gt;, &lt;tt&gt;print-cmd&lt;/tt&gt; in zkServer.sh script.&lt;/li&gt;
	&lt;li&gt;zkCli.sh and zkCleanup.sh scripts.&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;Can we try move the verification checks to &lt;tt&gt;zkEnv.sh&lt;/tt&gt; script to avoid duplicating the logic. If we move outside it will even verify the condition for &lt;tt&gt;help/usage&lt;/tt&gt; also. But I feel it is ok.&lt;/p&gt;</comment>
                            <comment id="14492351" author="andreina" created="Mon, 13 Apr 2015 12:43:19 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;rakeshr&lt;/a&gt; for reviewing the patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Can we try move the verification checks to zkEnv.sh script to avoid duplicating the logic&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I too agree with this point. Updated the patch accordingly . &lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="14492399" author="hadoopqa" created="Mon, 13 Apr 2015 13:37:54 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12724929/ZOOKEEPER-2156.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12724929/ZOOKEEPER-2156.4.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1672934.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2632//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2632//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2632//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2632//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2632//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2632//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14493531" author="andreina" created="Tue, 14 Apr 2015 04:06:55 +0000"  >&lt;p&gt;Testcase failures are not related to this patch.&lt;/p&gt;</comment>
                            <comment id="14495755" author="rakeshr" created="Wed, 15 Apr 2015 06:48:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andreina&quot; class=&quot;user-hover&quot; rel=&quot;andreina&quot;&gt;andreina&lt;/a&gt; for taking care of this. +1 latest patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="14496113" author="andreina" created="Wed, 15 Apr 2015 12:15:33 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;rakeshr&lt;/a&gt; for reviewing the patch.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt; can you please review and let me know your feedback. &lt;/p&gt;</comment>
                            <comment id="14496151" author="fournc" created="Wed, 15 Apr 2015 13:13:16 +0000"  >&lt;p&gt;I think this patch is fine but isn&apos;t the problem that we had an error that we didn&apos;t detect and reported success in starting the server, not that we didn&apos;t check JAVA_HOME etc properly? I am not a bash shell script expert but seems like we also need to fix this so that it doesn&apos;t claim to have started the process when in fact it couldn&apos;t start it due to some failure. &lt;/p&gt;</comment>
                            <comment id="14497783" author="andreina" created="Thu, 16 Apr 2015 08:48:12 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fournc&quot; class=&quot;user-hover&quot; rel=&quot;fournc&quot;&gt;fournc&lt;/a&gt; for your comments.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;we had an error that we didn&apos;t detect and reported success in starting the server&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I agree with you . I came across a scenario where if myid file does not exist , zk startup will return success eventhough startup has failed. I think we can handle startup failure and return proper error message in a seperate jira. (Provide your feedback. If it sounds good ill raise a jira)&lt;/p&gt;

&lt;p&gt;In this jira , like description says if JAVA is not set in either JAVA_HOME or PATH , then zk operations will fail with error message.&lt;br/&gt;
Have verified the same with the patch , for different combinations of setting java in JAVA_HOME and PATH. &lt;/p&gt;
</comment>
                            <comment id="14504889" author="andreina" created="Tue, 21 Apr 2015 12:46:12 +0000"  >&lt;p&gt;Raised a separate jira for handling the startup failure and displaying proper error message. (&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2173&quot; title=&quot;ZK startup failure should be handled with proper error message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2173&quot;&gt;&lt;del&gt;ZOOKEEPER-2173&lt;/del&gt;&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="14541648" author="rakeshr" created="Wed, 13 May 2015 09:24:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fournc&quot; class=&quot;user-hover&quot; rel=&quot;fournc&quot;&gt;fournc&lt;/a&gt; concerns has been addressed and committed the changes as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2173&quot; title=&quot;ZK startup failure should be handled with proper error message&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2173&quot;&gt;&lt;del&gt;ZOOKEEPER-2173&lt;/del&gt;&lt;/a&gt;. Now, I think we can take up this jira ahead.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt; since you had reviewed the patch earlier, would you be interested in reviewing the latest patch again&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14547724" author="rgs" created="Mon, 18 May 2015 08:39:30 +0000"  >&lt;p&gt;lgtm, except for the indentation in this block:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-  JAVA=java
+echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Error: JAVA_HOME is not set and java could not be found in PATH.&quot;&lt;/span&gt; 1&amp;gt;&amp;amp;2
+    exit 1
 fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;any reason for not indenting that echo statement properly?&lt;/p&gt;</comment>
                            <comment id="14547725" author="rgs" created="Mon, 18 May 2015 08:39:41 +0000"  >&lt;p&gt;lgtm, except for the indentation in this block:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-  JAVA=java
+echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Error: JAVA_HOME is not set and java could not be found in PATH.&quot;&lt;/span&gt; 1&amp;gt;&amp;amp;2
+    exit 1
 fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;any reason for not indenting that echo statement properly?&lt;/p&gt;</comment>
                            <comment id="14547728" author="rgs" created="Mon, 18 May 2015 08:39:58 +0000"  >&lt;p&gt;lgtm, except for the indentation in this block:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-  JAVA=java
+echo &lt;span class=&quot;code-quote&quot;&gt;&quot;Error: JAVA_HOME is not set and java could not be found in PATH.&quot;&lt;/span&gt; 1&amp;gt;&amp;amp;2
+    exit 1
 fi
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;any reason for not indenting that echo statement properly?&lt;/p&gt;</comment>
                            <comment id="14547743" author="andreina" created="Mon, 18 May 2015 08:51:38 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;rakeshr&lt;/a&gt; for reviewing the patch .&lt;/p&gt;

&lt;p&gt;Have updated the patch as per the comments from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt;&lt;br/&gt;
Please review.&lt;/p&gt;</comment>
                            <comment id="14547805" author="hadoopqa" created="Mon, 18 May 2015 10:00:49 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12733491/ZOOKEEPER-2156.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12733491/ZOOKEEPER-2156.5.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1679951.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    +1 core tests.  The patch passed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2701//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2701//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2701//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2701//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2701//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2701//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14547810" author="andreina" created="Mon, 18 May 2015 10:04:32 +0000"  >&lt;p&gt;Testcase is not required as the patch is to check whether java set or not.&lt;/p&gt;</comment>
                            <comment id="14551944" author="rakeshr" created="Wed, 20 May 2015 07:36:34 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andreina&quot; class=&quot;user-hover&quot; rel=&quot;andreina&quot;&gt;andreina&lt;/a&gt; for the contribution.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fournc&quot; class=&quot;user-hover&quot; rel=&quot;fournc&quot;&gt;fournc&lt;/a&gt; for the reviews.&lt;/p&gt;

&lt;p&gt;Committed to trunk : &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1680471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1680471&lt;/a&gt;&lt;br/&gt;
Committed to br3.5 : &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1680473&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1680473&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;IMO after releasing 3.5.1 version, we may need to update the &lt;tt&gt;CHANGES.txt&lt;/tt&gt; by moving this entry to 3.5.2 section. Please see the discussion &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1077?focusedCommentId=14548454&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14548454&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14551998" author="andreina" created="Wed, 20 May 2015 08:36:29 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rakeshr&quot; class=&quot;user-hover&quot; rel=&quot;rakeshr&quot;&gt;rakeshr&lt;/a&gt; for the commit.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=fournc&quot; class=&quot;user-hover&quot; rel=&quot;fournc&quot;&gt;fournc&lt;/a&gt; for reviewing.&lt;/p&gt;</comment>
                            <comment id="14552137" author="hudson" created="Wed, 20 May 2015 11:10:44 +0000"  >&lt;p&gt;FAILURE: Integrated in ZooKeeper-trunk #2697 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2697/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2697/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2156&quot; title=&quot;If JAVA_HOME is not set zk startup and fetching status command execution result misleads user.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2156&quot;&gt;&lt;del&gt;ZOOKEEPER-2156&lt;/del&gt;&lt;/a&gt;: If JAVA_HOME is not set zk startup and fetching status command execution result misleads user (J.Andreina via rakeshr) (rakeshr: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1680471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1680471&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/bin/zkEnv.sh&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12822629">ZOOKEEPER-2173</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12709168" name="ZOOKEEPER-2156.1.patch" size="1321" author="andreina" created="Fri, 3 Apr 2015 05:05:33 +0000"/>
                            <attachment id="12709183" name="ZOOKEEPER-2156.2.patch" size="908" author="andreina" created="Fri, 3 Apr 2015 05:57:46 +0000"/>
                            <attachment id="12723821" name="ZOOKEEPER-2156.3.patch" size="924" author="andreina" created="Wed, 8 Apr 2015 04:03:44 +0000"/>
                            <attachment id="12724929" name="ZOOKEEPER-2156.4.patch" size="614" author="andreina" created="Mon, 13 Apr 2015 12:43:42 +0000"/>
                            <attachment id="12733491" name="ZOOKEEPER-2156.5.patch" size="577" author="andreina" created="Mon, 18 May 2015 08:52:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27qo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>