<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 08:56:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2124] Allow Zookeeper version string to have underscore &apos;_&apos;</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2124</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Using Bigtop or other RPM build for Zookeeper, there is a problem with using the hyphen &apos;-&apos; character in the version string:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[bigdata@bdvs1166 bigtop]$ gradle zookeeper-rpm
:buildSrc:compileJava UP-TO-DATE
:buildSrc:compileGroovy UP-TO-DATE
:buildSrc:processResources UP-TO-DATE
:buildSrc:classes UP-TO-DATE
:buildSrc:jar UP-TO-DATE
:buildSrc:assemble UP-TO-DATE
:buildSrc:compileTestJava UP-TO-DATE
:buildSrc:compileTestGroovy UP-TO-DATE
:buildSrc:processTestResources UP-TO-DATE
:buildSrc:testClasses UP-TO-DATE
:buildSrc:test UP-TO-DATE
:buildSrc:check UP-TO-DATE
:buildSrc:build UP-TO-DATE
:zookeeper_vardefines
:zookeeper-download
:zookeeper-tar
Copy /home/bigdata/bigtop/dl/zookeeper-3.4.6-IBM-1.tar.gz to /home/bigdata/bigtop/build/zookeeper/tar/zookeeper-3.4.6-IBM-1.tar.gz
:zookeeper-srpm
error: line 64: Illegal char &apos;-&apos; in: Version: 3.4.6-IBM-1
:zookeeper-srpm FAILED

FAILURE: Build failed with an exception.

* Where:
Script &apos;/home/bigdata/bigtop/packages.gradle&apos; line: 462

* What went wrong:
Execution failed for task &apos;:zookeeper-srpm&apos;.
&amp;gt; Process &apos;command &apos;rpmbuild&apos;&apos; finished with non-zero exit value 1

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, according to the &lt;a href=&quot;http://mojo.codehaus.org/rpm-maven-plugin/ident-params.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;rpm-maven-plugin&lt;/a&gt; documentation:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
version
The version number to use for the RPM package. By default, this is the project version. This value cannot contain a dash (-) due to contraints in the RPM file naming convention. Any specified value will be truncated at the first dash

release
The release number of the RPM.
Beginning with release 2.0-beta-2, this is an optional parameter. By default, the release will be generated from the modifier portion of the project version using the following rules:
If no modifier exists, the release will be 1.
If the modifier ends with SNAPSHOT, the timestamp (in UTC) of the build will be appended to end.
All instances of &apos;-&apos; in the modifier will be replaced with &apos;_&apos;.
If a modifier exists and does not end with SNAPSHOT, &quot;_1&quot; will be appended to end.

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should allow underscore &apos;_&apos; as part of the version string. e.g. &lt;br/&gt;
3.4.6_abc_1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12776511">ZOOKEEPER-2124</key>
            <summary>Allow Zookeeper version string to have underscore &apos;_&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cnauroth">Chris Nauroth</assignee>
                                    <reporter username="jinghe">Jerry He</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Feb 2015 18:58:43 +0000</created>
                <updated>Mon, 14 Sep 2015 20:35:34 +0000</updated>
                            <resolved>Sun, 24 May 2015 06:38:14 +0000</resolved>
                                    <version>3.4.6</version>
                                    <fixVersion>3.4.7</fixVersion>
                    <fixVersion>3.5.1</fixVersion>
                    <fixVersion>3.6.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14329383" author="jinghe" created="Fri, 20 Feb 2015 19:15:24 +0000"  >&lt;p&gt;In org.apache.zookeeper.version.util.VerGen, we have:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Version parseVersionString(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; input) {
        Version result = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Version();

        Pattern p = Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;^(\\d+)\\.(\\d+)\\.(\\d+)((\\.\\d+)*)(-(.+))?$&quot;&lt;/span&gt;);
        Matcher m = p.matcher(input);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We can update the pattern to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Pattern p = Pattern.compile(&lt;span class=&quot;code-quote&quot;&gt;&quot;^(\\d+)\\.(\\d+)\\.(\\d+)((\\.\\d+)*)([-_](.+))?$&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14330424" author="jinghe" created="Sat, 21 Feb 2015 20:47:48 +0000"  >&lt;p&gt;Attached a patch.  Please help review.  Thanks in advance.&lt;/p&gt;</comment>
                            <comment id="14330446" author="hadoopqa" created="Sat, 21 Feb 2015 21:37:08 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12700055/ZOOKEEPER-1911-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12700055/ZOOKEEPER-1911-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1658888.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2523//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2523//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2523//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2523//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2523//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2523//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14330450" author="hadoopqa" created="Sat, 21 Feb 2015 21:46:27 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12700058/ZOOKEEPER-2124-trunk.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12700058/ZOOKEEPER-2124-trunk.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1658888.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2524//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2524//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2524//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2524//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2524//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2524//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14332380" author="michim" created="Sun, 22 Feb 2015 21:17:40 +0000"  >&lt;p&gt;Thank you for the patch Jerry. Allowing underscore sounds fine to me. Could you add a testcase in VerGenTest.java?&lt;/p&gt;</comment>
                            <comment id="14337531" author="jinghe" created="Thu, 26 Feb 2015 00:06:21 +0000"  >&lt;p&gt;Hi, Michi&lt;/p&gt;

&lt;p&gt;Thanks for your comment. &lt;br/&gt;
After looking in it and thinking about it further, now I think Zookeeper has a valid and consistent version scheme:  maj.min.micro&lt;span class=&quot;error&quot;&gt;&amp;#91;-qualifier&amp;#93;&lt;/span&gt;.&lt;br/&gt;
The parser allows additional number version after the micro with additional &quot;.&quot;&lt;br/&gt;
Everything after the dash &quot;-&quot; is the qualifier.&lt;br/&gt;
This complies to and is consistent with conventional standard.  For example, &lt;a href=&quot;http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-syntax.html#pom-reationships-sect-versions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://books.sonatype.com/mvnref-book/reference/pom-relationships-sect-pom-syntax.html#pom-reationships-sect-versions&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Zookeeper only allows numeric values for the maj.min.micro seem to follow conventional standard too. Any non-numeric char should go into the qualifier.&lt;br/&gt;
Therefore I don&apos;t see there is a need to change here.&lt;/p&gt;

&lt;p&gt;What do you think?  I intend to close this JIRA as &apos;Won&apos;t Fix&apos; after a few days.&lt;/p&gt;</comment>
                            <comment id="14344432" author="michim" created="Tue, 3 Mar 2015 03:22:41 +0000"  >&lt;p&gt;Sounds good. Thanks Jerry!&lt;/p&gt;</comment>
                            <comment id="14500261" author="cnauroth" created="Fri, 17 Apr 2015 17:36:27 +0000"  >&lt;p&gt;I just encountered this while trying to build an rpm from the 3.5.1-alpha release candidate.  The &lt;tt&gt;ant rpm&lt;/tt&gt; command fails as follows:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rpm:
     [copy] Copying 1 file to /tmp/zkpython_build_cnauroth/SOURCES
      [rpm] Building the RPM based on the zkpython.spec file
      [rpm] error: line 51: Illegal &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt; in: Version: 3.5.1-alpha
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I see the earlier comment that the versioning scheme already follows a consistent standard.  That makes sense, but if &lt;tt&gt;ant rpm&lt;/tt&gt; actually doesn&apos;t work, then should we reopen this issue and fix it?&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="14500346" author="jinghe" created="Fri, 17 Apr 2015 18:15:42 +0000"  >&lt;p&gt;Hi, Chris&lt;/p&gt;

&lt;p&gt;rpm does not like the &apos;-&apos; in the version string.  I see we have two options to fix this:&lt;br/&gt;
1.  Specifically specify the rpm version string to be different from the real zookeeper version string. For example, let the rpm version string to be 3.5.1_alpha.  But no change to the zookeeper version string.&lt;br/&gt;
Bigtop has two properties:&lt;br/&gt;
ZOOKEEPER_BASE_VERSION=&lt;br/&gt;
ZOOKEEPER_PKG_VERSION=&lt;br/&gt;
I ended up having these two to be different.  I am not sure if this is a good practice.&lt;/p&gt;

&lt;p&gt;2.  Modify the zookeeper version scheme to allow more flexibility.&lt;/p&gt;</comment>
                            <comment id="14500358" author="cnauroth" created="Fri, 17 Apr 2015 18:24:46 +0000"  >&lt;p&gt;I suppose another option could be:&lt;/p&gt;

&lt;p&gt;3. Put logic in build.xml to replace hyphen with underscore in the version string before token replacement into the zookeeper.spec file.&lt;/p&gt;

&lt;p&gt;I don&apos;t have a strong preference as long as &lt;tt&gt;ant rpm&lt;/tt&gt; can succeed.  #3 would achieve that and still preserve the existing versioning scheme if that&apos;s what the project prefers.&lt;/p&gt;</comment>
                            <comment id="14500679" author="jinghe" created="Fri, 17 Apr 2015 21:12:06 +0000"  >&lt;p&gt;Agree, and I don&apos;t have strong preference either.&lt;/p&gt;</comment>
                            <comment id="14503481" author="cnauroth" created="Mon, 20 Apr 2015 19:37:13 +0000"  >&lt;p&gt;I&apos;m attaching a patch for consideration that replaces hyphen with underscore automatically in build.xml.  While testing this, I also discovered an old email thread with some rpm fixes that never made it into the source tree.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/zookeeper-user/201212.mbox/%3C50D2D481.8010507@pt-consulting.eu%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/zookeeper-user/201212.mbox/%3C50D2D481.8010507@pt-consulting.eu%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m not including those fixes in my patch file, because I think it would be more appropriate to track them separately and ensure they get credited to the original author if accepted.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1604&quot; title=&quot;remove rpm/deb/... packaging&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1604&quot;&gt;&lt;del&gt;ZOOKEEPER-1604&lt;/del&gt;&lt;/a&gt; was an old proposal to remove the packaging entirely from the project.  I&apos;m going to follow up on that to see if there has been a resolution to that discussion.&lt;/p&gt;</comment>
                            <comment id="14503548" author="hadoopqa" created="Mon, 20 Apr 2015 20:31:28 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12726641/ZOOKEEPER-2124.001.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12726641/ZOOKEEPER-2124.001.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1672934.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2640//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2640//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2640//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2640//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2640//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2640//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14503568" author="cnauroth" created="Mon, 20 Apr 2015 20:43:42 +0000"  >&lt;p&gt;See below for an abridged list of the test failures, which I pulled from the Jenkins console log.  I expect any test failures are unrelated to this patch, because it&apos;s a change in the rpm packaging only.  Jenkins doesn&apos;t cover this in test runs.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     [exec]     [junit] 2015-04-20 19:48:07,327 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@62] - TEST METHOD FAILED testReadArrayOffsetLength_LengthTooLarge
     [exec]     [junit] java.lang.IndexOutOfBoundsException

     [exec]     [junit] 2015-04-20 19:50:46,555 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@62] - TEST METHOD FAILED testTooManySnapshotsNonessential
     [exec]     [junit] org.apache.zookeeper.server.quorum.SnapshotThrottleException: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; snapshot would make 6 concurrently in progress; maximum is 5

     [exec]     [junit] 2015-04-20 19:50:46,575 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@62] - TEST METHOD FAILED testTryWithResourceThrottle
     [exec]     [junit] org.apache.zookeeper.server.quorum.SnapshotThrottleException: &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; snapshot would make 2 concurrently in progress; maximum is 1

     [exec]     [junit] 2015-04-20 19:50:53,062 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@62] - TEST METHOD FAILED connectionRetryTimeoutTest
     [exec]     [junit] java.io.IOException: Test injected Socket.connect() error.

     [exec]     [junit] 2015-04-20 20:25:20,473 [myid:] - INFO  [main:JUnit4ZKTestRunner$LoggedInvokeMethod@62] - TEST METHOD FAILED testTwoInvalidHostAddresses
     [exec]     [junit] java.lang.IllegalArgumentException: A HostProvider may not be empty!

     [exec]      [exec] Zookeeper_readOnly::testReadOnly : elapsed 4081 : OK
     [exec]      [exec] /home/jenkins/jenkins-slave/workspace/PreCommit-ZOOKEEPER-Build/trunk/src/c/tests/TestReconfig.cc:183: Assertion: equality assertion failed [Expected: 1, Actual  : 0]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14503569" author="fpj" created="Mon, 20 Apr 2015 20:44:33 +0000"  >&lt;p&gt;I had a quick look and the patch seems ok to me. I want to build with ant rpm before I +1 it. I can&apos;t do it from this computer.&lt;/p&gt;</comment>
                            <comment id="14503614" author="fpj" created="Mon, 20 Apr 2015 21:05:27 +0000"  >&lt;p&gt;There are multiple jiras open for TestReconfig.cc, I think the latest is &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2152&quot; title=&quot;Intermittent failure in TestReconfig.cc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2152&quot;&gt;&lt;del&gt;ZOOKEEPER-2152&lt;/del&gt;&lt;/a&gt;. In general, I agree that the changes here shouldn&apos;t cause test failures.&lt;/p&gt;</comment>
                            <comment id="14503703" author="jinghe" created="Mon, 20 Apr 2015 21:34:07 +0000"  >&lt;p&gt;lgtm. thanks.&lt;br/&gt;
Please re-assign this JIRA to you, Chris.&lt;/p&gt;</comment>
                            <comment id="14503709" author="cnauroth" created="Mon, 20 Apr 2015 21:37:21 +0000"  >&lt;p&gt;Jerry, thanks for taking a look at the patch.&lt;/p&gt;</comment>
                            <comment id="14526236" author="rgs" created="Mon, 4 May 2015 04:42:11 +0000"  >&lt;p&gt;+1, lgtm.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;: are you planning on backporting this for 3.4 (so that we can include it with 3.4.7)? Thanks!&lt;/p&gt;</comment>
                            <comment id="14526311" author="rgs" created="Mon, 4 May 2015 06:33:51 +0000"  >&lt;p&gt;Merged:&lt;/p&gt;

&lt;p&gt;trunk: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1677529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1677529&lt;/a&gt;&lt;br/&gt;
branch-3.5: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1677530&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1677530&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Leaving open until we get a patch for 3.4. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14526542" author="hudson" created="Mon, 4 May 2015 11:24:32 +0000"  >&lt;p&gt;SUCCESS: Integrated in ZooKeeper-trunk #2681 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/2681/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/2681/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2124&quot; title=&quot;Allow Zookeeper version string to have underscore &amp;#39;_&amp;#39;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2124&quot;&gt;&lt;del&gt;ZOOKEEPER-2124&lt;/del&gt;&lt;/a&gt; Allow Zookeeper version string to have underscore &apos;_&apos;&lt;/p&gt;

&lt;p&gt;(Chris Nauroth via rgs) (rgs: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1677529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1677529&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/zookeeper/trunk/CHANGES.txt&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/zookeeper/trunk/src/contrib/zkpython/build.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14526870" author="cnauroth" created="Mon, 4 May 2015 17:08:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rgs&quot; class=&quot;user-hover&quot; rel=&quot;rgs&quot;&gt;rgs&lt;/a&gt;, thank you for the commit.  I&apos;m attaching a branch-3.4 patch.  The patch command was able to apply the trunk patch with a bit of fuzzing, so the differences in the branch-3.4 patch file are just cosmetic.&lt;/p&gt;

&lt;p&gt;Just as a reminder, I had left an earlier comment explaining that the rpm build doesn&apos;t fully work without also applying some spec file patches that had turned up on the mailing list a while ago.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2124?focusedCommentId=14503481&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14503481&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/ZOOKEEPER-2124?focusedCommentId=14503481&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14503481&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/zookeeper-user/201212.mbox/%3C50D2D481.8010507@pt-consulting.eu%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/zookeeper-user/201212.mbox/%3C50D2D481.8010507@pt-consulting.eu%3E&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I didn&apos;t include them in my original patch, because I wanted to make sure the original author received credit.  For reference, I&apos;m attaching a separate patch file that consolidates those spec file changes from the mailing list.&lt;/p&gt;</comment>
                            <comment id="14526953" author="hadoopqa" created="Mon, 4 May 2015 18:02:25 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12730211/zookeeper-rpm-spec-files.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12730211/zookeeper-rpm-spec-files.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision 1677529.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2675//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2675//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2675//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2675//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2675//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/2675//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="14557656" author="michim" created="Sun, 24 May 2015 06:36:09 +0000"  >&lt;p&gt;+1 for the 3.4 patch. Thanks Chris!&lt;/p&gt;</comment>
                            <comment id="14557658" author="michim" created="Sun, 24 May 2015 06:38:14 +0000"  >&lt;p&gt;branch-3.4: &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1681418&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1681418&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14557740" author="cnauroth" created="Sun, 24 May 2015 13:45:26 +0000"  >&lt;p&gt;Raul and Michi, thank you for the reviews and the commit.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12624197">ZOOKEEPER-1604</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12864014">ZOOKEEPER-2275</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12730210" name="ZOOKEEPER-2124-branch-3.4.001.patch" size="2295" author="cnauroth" created="Mon, 4 May 2015 17:08:39 +0000"/>
                            <attachment id="12726641" name="ZOOKEEPER-2124.001.patch" size="2297" author="cnauroth" created="Mon, 20 Apr 2015 19:37:13 +0000"/>
                            <attachment id="12730211" name="zookeeper-rpm-spec-files.patch" size="4782" author="cnauroth" created="Mon, 4 May 2015 17:08:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25v9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>