<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:02:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[ZOOKEEPER-2282] chroot not stripped from path in asynchronous callbacks</title>
                <link>https://issues.apache.org/jira/browse/ZOOKEEPER-2282</link>
                <project id="12310801" key="ZOOKEEPER">ZooKeeper</project>
                    <description>&lt;p&gt;Callbacks passed to &lt;span class=&quot;error&quot;&gt;&amp;#91;zoo_acreate&amp;#93;&lt;/span&gt;, &lt;span class=&quot;error&quot;&gt;&amp;#91;zoo_async&amp;#93;&lt;/span&gt;, and &lt;span class=&quot;error&quot;&gt;&amp;#91;zoo_amulti&amp;#93;&lt;/span&gt; (for create ops) are called on paths that include the chroot. This is analagous to issue 1027, which fixed this bug for synchronous calls.&lt;br/&gt;
I&apos;ve created a patch to fix this in trunk&lt;/p&gt;</description>
                <environment>&lt;p&gt;Centos 6.6&lt;/p&gt;</environment>
        <key id="12901075">ZOOKEEPER-2282</key>
            <summary>chroot not stripped from path in asynchronous callbacks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="agrasso">Andrew Grasso</assignee>
                                    <reporter username="agrasso">Andrew Grasso</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 28 Sep 2015 17:19:48 +0000</created>
                <updated>Fri, 14 Feb 2020 15:23:48 +0000</updated>
                            <resolved>Fri, 27 Sep 2019 13:43:56 +0000</resolved>
                                    <version>3.4.6</version>
                    <version>3.5.0</version>
                                    <fixVersion>3.6.0</fixVersion>
                    <fixVersion>3.5.7</fixVersion>
                                    <component>c client</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>5</watches>
                                    <workratio workratioPercent="116"/>
                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="85" backgroundColor="#89afd7"/>
                                                    <row percentage="15" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="85" backgroundColor="#89afd7"/>
                                                    <row percentage="15" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="3600">1h</timeoriginalestimate>
                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="4200">1h 10m</timespent>
                                <comments>
                            <comment id="15264041" author="agrasso" created="Fri, 29 Apr 2016 13:25:30 +0000"  >&lt;p&gt;This appears not to have been fixed. The test code for chroot stripping contains the following comment:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;// the c client async callbacks do&lt;br/&gt;
// not callback with the path, so&lt;br/&gt;
// we dont need to test taht for now&lt;br/&gt;
// we should fix that though soon!&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is incorrect. Adding a test for the correctness of chroot stripping for async callbacks (e.g. create) causes the test to fail.&lt;/p&gt;

&lt;p&gt;This patch is against release 3.4.6&lt;/p&gt;</comment>
                            <comment id="15514079" author="agrasso" created="Thu, 22 Sep 2016 18:24:07 +0000"  >&lt;p&gt;Fixed patches to apply cleanly&lt;/p&gt;</comment>
                            <comment id="15514300" author="hadoopqa" created="Thu, 22 Sep 2016 19:45:35 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12829901/ZOOKEEPER-2282.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12829901/ZOOKEEPER-2282.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision ec20c5434cc8a334b3fd25e27d26dccf4793c8f3.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    -1 tests included.  The patch doesn&apos;t appear to include any new or modified tests.&lt;br/&gt;
                        Please justify why no new tests are needed for this patch.&lt;br/&gt;
                        Also please list what manual steps were performed to verify this patch.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3449//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3449//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3449//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3449//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3449//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3449//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15514325" author="agrasso" created="Thu, 22 Sep 2016 19:57:28 +0000"  >&lt;p&gt;Combine fix and tests&lt;/p&gt;</comment>
                            <comment id="15514515" author="hadoopqa" created="Thu, 22 Sep 2016 21:24:59 +0000"  >&lt;p&gt;-1 overall.  Here are the results of testing the latest attachment &lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12829924/ZOOKEEPER-2282.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12829924/ZOOKEEPER-2282.patch&lt;/a&gt;&lt;br/&gt;
  against trunk revision ec20c5434cc8a334b3fd25e27d26dccf4793c8f3.&lt;/p&gt;

&lt;p&gt;    +1 @author.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    +1 tests included.  The patch appears to include 3 new or modified tests.&lt;/p&gt;

&lt;p&gt;    +1 javadoc.  The javadoc tool did not generate any warning messages.&lt;/p&gt;

&lt;p&gt;    +1 javac.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    +1 findbugs.  The patch does not introduce any new Findbugs (version 2.0.3) warnings.&lt;/p&gt;

&lt;p&gt;    +1 release audit.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    -1 core tests.  The patch failed core unit tests.&lt;/p&gt;

&lt;p&gt;    +1 contrib tests.  The patch passed contrib unit tests.&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3450//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3450//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3450//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3450//artifact/trunk/build/test/findbugs/newPatchFindbugsWarnings.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3450//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-ZOOKEEPER-Build/3450//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="15514664" author="hanm" created="Thu, 22 Sep 2016 22:30:27 +0000"  >&lt;p&gt;looks like the failed C test in build 3450 is relevant to the change in patch:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;     [exec]      [exec] terminate called after throwing an instance of &apos;CppUnit::Exception&apos;
     [exec]      [exec]   what():  equality assertion failed
     [exec]      [exec] - Expected: 0
     [exec]      [exec] - Actual  : -110
     [exec]      [exec] 
     [exec]      [exec] Zookeeper_simpleSystem::testChrootFAIL: zktest-mt
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16850070" author="resuna" created="Tue, 28 May 2019 19:34:01 +0000"  >&lt;p&gt;What version will this fix be available in? Applying the patch is not straightforward.&lt;/p&gt;</comment>
                            <comment id="16918741" author="ztzg" created="Thu, 29 Aug 2019 16:01:28 +0000"  >&lt;p&gt;I have recently pushed a GitHub &quot;pull request&quot; which addresses this:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/zookeeper/pull/1066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/1066&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It is remarquably similar to the patch attached to this issue (I spotted it too late), but also avoids the aforementioned test failure.&lt;/p&gt;</comment>
                            <comment id="16939470" author="andorm" created="Fri, 27 Sep 2019 13:43:56 +0000"  >&lt;p&gt;Issue resolved by pull request 1066&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/zookeeper/pull/1066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/zookeeper/pull/1066&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16939527" author="hudson" created="Fri, 27 Sep 2019 15:10:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build ZooKeeper-trunk #714 (See &lt;a href=&quot;https://builds.apache.org/job/ZooKeeper-trunk/714/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/ZooKeeper-trunk/714/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2282&quot; title=&quot;chroot not stripped from path in asynchronous callbacks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2282&quot;&gt;&lt;del&gt;ZOOKEEPER-2282&lt;/del&gt;&lt;/a&gt;: C Client: chroot not stripped in asynchronous callbacks (andor: rev 1e7fae31af634ccfb85cde17fa634d188145b9b7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) zookeeper-client/zookeeper-client-c/src/zookeeper.c&lt;/li&gt;
	&lt;li&gt;(edit) zookeeper-client/zookeeper-client-c/tests/TestClient.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16939717" author="hudson" created="Fri, 27 Sep 2019 19:40:57 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build Zookeeper-trunk-single-thread #553 (See &lt;a href=&quot;https://builds.apache.org/job/Zookeeper-trunk-single-thread/553/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Zookeeper-trunk-single-thread/553/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-2282&quot; title=&quot;chroot not stripped from path in asynchronous callbacks&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-2282&quot;&gt;&lt;del&gt;ZOOKEEPER-2282&lt;/del&gt;&lt;/a&gt;: C Client: chroot not stripped in asynchronous callbacks (andor: rev 1e7fae31af634ccfb85cde17fa634d188145b9b7)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) zookeeper-client/zookeeper-client-c/src/zookeeper.c&lt;/li&gt;
	&lt;li&gt;(edit) zookeeper-client/zookeeper-client-c/tests/TestClient.cc&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12502255">ZOOKEEPER-1027</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12829924" name="ZOOKEEPER-2282.patch" size="2898" author="agrasso" created="Thu, 22 Sep 2016 19:57:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 7 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2md6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>