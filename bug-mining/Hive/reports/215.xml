<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:53:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-690] ScriptOperator still times out</title>
                <link>https://issues.apache.org/jira/browse/HIVE-690</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The code is using exp_interval instead of exp_int in the &quot;scheduleAtFxiedRate&quot;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; exp_interval = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
      &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; exp_int;
      exp_interval = &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.decode(hconf.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;mapred.tasktracker.expiry.interval&quot;&lt;/span&gt;));
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (exp_interval != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        exp_int = exp_interval.intValue() / 2;
      &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        exp_int = 300000;

      rpTimer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Timer(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
      rpTimer.scheduleAtFixedRate(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ReporterTask(reporter), 0, exp_interval);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12431399">HIVE-690</key>
            <summary>ScriptOperator still times out</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jul 2009 19:24:07 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:40 +0000</updated>
                            <resolved>Mon, 27 Jul 2009 20:43:27 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12735132" author="namit" created="Fri, 24 Jul 2009 19:26:24 +0000"  >&lt;p&gt;This might explain some timeouts&lt;/p&gt;</comment>
                            <comment id="12735151" author="zshao" created="Fri, 24 Jul 2009 20:32:17 +0000"  >&lt;p&gt;This patch fixes the problem.&lt;br/&gt;
It also changes the naming convention to the Java naming convention.&lt;/p&gt;</comment>
                            <comment id="12735152" author="athusoo" created="Fri, 24 Jul 2009 20:47:33 +0000"  >&lt;p&gt;That is my bad. &lt;/p&gt;

&lt;p&gt;We should just fix this by reading stderr from the spawned process and sending updates to the tracker if something has been written to stderr instead of indefinitely sending updates as that may lead to processes not getting cleaned up?&lt;/p&gt;</comment>
                            <comment id="12735169" author="indigoviolet" created="Fri, 24 Jul 2009 21:28:53 +0000"  >&lt;p&gt;I believe that it is sufficient to track stderr output to see if the process is alive.&lt;/p&gt;</comment>
                            <comment id="12735229" author="zshao" created="Sat, 25 Jul 2009 01:36:16 +0000"  >&lt;p&gt;The major goal of status reporting is probably more for the detecting dead process/dead node than for infinite loops.&lt;/p&gt;

&lt;p&gt;Also, users will probably just output stderr messages using timers in their python code.&lt;br/&gt;
If that&apos;s the case, it does not prevent our users&apos; program from infinite loop.&lt;/p&gt;

&lt;p&gt;I think we should check this fix in first (after all it&apos;s so simple a fix). Thoughts?&lt;/p&gt;</comment>
                            <comment id="12735231" author="athusoo" created="Sat, 25 Jul 2009 02:50:58 +0000"  >&lt;p&gt;Instead of asking the users to have a timer in python to send information to stderr a better approach (and the one that we can strongly recommend) would be to check some stats that are maintained by the main loop and only report stderr when those stats have changed. With the current approach that is just not possible, so application errors can easily be amplified. That was the concern that Joy had raised with the previous fix (after it got checked in).&lt;/p&gt;</comment>
                            <comment id="12735458" author="zshao" created="Mon, 27 Jul 2009 04:16:43 +0000"  >&lt;p&gt;Escalating this issue to blocker since there is currently no way for a user script to run over 10 minutes without creating an output row.&lt;/p&gt;</comment>
                            <comment id="12735468" author="zshao" created="Mon, 27 Jul 2009 05:28:46 +0000"  >&lt;p&gt;This patch fixes the current timer approach (with a configurable option), and adds the capability to do &quot;reporter.progress()&quot; for each stderr line (but no more frequently than once per minute).&lt;/p&gt;</comment>
                            <comment id="12735633" author="namit" created="Mon, 27 Jul 2009 15:49:46 +0000"  >&lt;p&gt;By default, the auto progress is false, which means that the timer would also be off.&lt;br/&gt;
It is a change from the existing behavior - is that acceptable ?&lt;/p&gt;</comment>
                            <comment id="12735685" author="zshao" created="Mon, 27 Jul 2009 17:52:54 +0000"  >&lt;p&gt;The old timer code was never useful because the timeout is the same as the expiry period, so the behavior didn&apos;t change actually.&lt;/p&gt;

&lt;p&gt;I think this is what we want. If we set it to true by default, it is very easy for some programs to enter infinite loops and never finish.&lt;br/&gt;
We should enable it only with users&apos; explicit command &quot;set hive.script.auto.progress=true;&quot;.&lt;/p&gt;</comment>
                            <comment id="12735721" author="namit" created="Mon, 27 Jul 2009 19:16:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Running tests right now&lt;/p&gt;</comment>
                            <comment id="12735762" author="namit" created="Mon, 27 Jul 2009 20:43:27 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12422745">HIVE-410</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12424112">HIVE-457</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12414470" name="HIVE-690.1.patch" size="1353" author="zshao" created="Fri, 24 Jul 2009 20:32:17 +0000"/>
                            <attachment id="12414585" name="HIVE-690.2.patch" size="5225" author="zshao" created="Mon, 27 Jul 2009 05:28:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73359</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lb8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122472</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>