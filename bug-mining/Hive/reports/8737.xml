<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:26:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-28337] Process timestamps at UTC timezone instead of local timezone in MetaStoreUtils</title>
                <link>https://issues.apache.org/jira/browse/HIVE-28337</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently in MetaStoreUtils, the conversion to/from timestamp and string makes use of LocalDateTime in the local time zone while processing timestamps. This causes issue with representing timestamps &lt;b&gt;as mentioned below&lt;/b&gt;. Instead, while dealing with timestamps it is proposed to use java.time.Instant to represent a point on the time-line, which would overcome the issue with representing such timestamps. Accordingly the test class for MetaStoreUtils (TestMetaStoreUtils) has also been modified to account for these changes.&lt;/p&gt;



&lt;p&gt;&lt;ins&gt;Failing scenario:&lt;/ins&gt;&lt;br/&gt;
Timestamps in time-zones which observe daylight savings during which the clock is set forward(typicallly 2:00 AM - 3:00 AM)&lt;/p&gt;

&lt;p&gt;Example: 2417-03-26T02:08:43 in Europe/Paris is invalid, and would get converted to 2417-03-26T03:08:43 by Timestamp.valueOf() method, when instead we want to represent the original timestamp without conversion.&lt;/p&gt;

&lt;p&gt;This is happening due to representing timestamp as LocalDateTime in TestMetaStoreUtils, which is independent of the time-zone of the timestamp. This LocalDateTime timestamp when combined with time-zone is leading to invalid timestamp.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13582990">HIVE-28337</key>
            <summary>Process timestamps at UTC timezone instead of local timezone in MetaStoreUtils</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kiranvelumuri">Kiran Velumuri</assignee>
                                    <reporter username="kiranvelumuri">Kiran Velumuri</reporter>
                        <labels>
                            <label>hive-4.0.1-merged</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 18 Jun 2024 06:21:26 +0000</created>
                <updated>Tue, 29 Jul 2025 14:51:38 +0000</updated>
                            <resolved>Mon, 23 Sep 2024 09:07:19 +0000</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                    <fixVersion>4.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17856721" author="zabetak" created="Fri, 21 Jun 2024 10:08:36 +0000"  >&lt;p&gt;The description of the ticket implies that there is a bug in the testing methodology but I would argue that the bug is in the production code instead.&lt;/p&gt;

&lt;p&gt;The test aims to ensure that the conversion from/to string does not alter the value in any way no matter the timezone. The DATE, and TIMESTAMP datatypes in standard SQL are timezone agnostic and the &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Different+TIMESTAMP+types&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;same semantics are adopted in Hive&lt;/a&gt;. There are still various known issues in Hive for dates/timestamps that fall into DST shift and the&#160;MetaStoreUtils API is probably affected.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17859569" author="JIRAUSER302611" created="Mon, 24 Jun 2024 05:44:05 +0000"  >&lt;p&gt;Yes, I agree with you regarding the intention and purpose of the test as changing the test would not fix the underlying issue. I am looking into this and would re-work my PR taking the MetaStoreUtils APIs into account.&lt;/p&gt;</comment>
                            <comment id="17883787" author="zabetak" created="Mon, 23 Sep 2024 09:07:19 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/hive/commit/e31811bb7c6670ab1f725adde3aa2b012ca64415&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/e31811bb7c6670ab1f725adde3aa2b012ca64415&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the PR &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kiranvelumuri&quot; class=&quot;user-hover&quot; rel=&quot;kiranvelumuri&quot;&gt;kiranvelumuri&lt;/a&gt; and for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wechar&quot; class=&quot;user-hover&quot; rel=&quot;wechar&quot;&gt;wechar&lt;/a&gt; !&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13565409">HIVE-28014</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13069558" name="image-2024-06-18-12-42-05-646.png" size="208400" author="kiranvelumuri" created="Tue, 18 Jun 2024 07:12:07 +0000"/>
                            <attachment id="13069559" name="image-2024-06-18-12-42-31-472.png" size="38724" author="kiranvelumuri" created="Tue, 18 Jun 2024 07:12:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pux4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>