<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:02:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3396] hive.stats.reliable config causes FileSinkOperator to fail when writing empty file</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3396</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With the configs hive.stats.reliable and hive.stats.autogather are set to true, and using either the HBase or JDBC Stats Publishers, if a FileSinkOperator does not receive any rows, and hence collects no stats, it will throw an exception.&lt;/p&gt;

&lt;p&gt;Related, if hive.stats.reliable is set to false it will still log a warning which seems unnecessary.&lt;/p&gt;

&lt;p&gt;Repro:&lt;/p&gt;

&lt;p&gt;create table tmptable(key string, value string) partitioned by (part string);&lt;/p&gt;

&lt;p&gt;set hive.stats.autogather=true;&lt;br/&gt;
set hive.stats.reliable=true;&lt;/p&gt;

&lt;p&gt;insert overwrite table tmptable partition (part = &apos;1&apos;) select * from src where key = &apos;no_such_value&apos;;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12603922">HIVE-3396</key>
            <summary>hive.stats.reliable config causes FileSinkOperator to fail when writing empty file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Aug 2012 23:00:46 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:48 +0000</updated>
                            <resolved>Fri, 24 Aug 2012 23:28:24 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Statistics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13437148" author="kevinwilfong" created="Fri, 17 Aug 2012 23:37:36 +0000"  >&lt;p&gt;Posted a diff &lt;a href=&quot;https://reviews.facebook.net/D4737&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D4737&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13437343" author="namit" created="Sat, 18 Aug 2012 15:06:56 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Kevin, can you take care of committing this after running the tests etc.&lt;/p&gt;</comment>
                            <comment id="13441595" author="kevinwilfong" created="Fri, 24 Aug 2012 23:28:24 +0000"  >&lt;p&gt;Committed, thanks Namit.&lt;/p&gt;</comment>
                            <comment id="13441818" author="hudson" created="Sat, 25 Aug 2012 09:06:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1627 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1627/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1627/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3396&quot; title=&quot;hive.stats.reliable config causes FileSinkOperator to fail when writing empty file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3396&quot;&gt;&lt;del&gt;HIVE-3396&lt;/del&gt;&lt;/a&gt;. hive.stats.reliable config causes FileSinkOperator to fail when writing empty file. (kevinwilfong reviewed by njain) (Revision 1377146)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1377146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1377146&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats_empty_partition.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_stats_empty_partition.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/stats_empty_partition.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/stats_empty_partition.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548194" author="hudson" created="Wed, 9 Jan 2013 10:24:46 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3396&quot; title=&quot;hive.stats.reliable config causes FileSinkOperator to fail when writing empty file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3396&quot;&gt;&lt;del&gt;HIVE-3396&lt;/del&gt;&lt;/a&gt;. hive.stats.reliable config causes FileSinkOperator to fail when writing empty file. (kevinwilfong reviewed by njain) (Revision 1377146)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1377146&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1377146&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/java/org/apache/hadoop/hive/hbase/HBaseStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/queries/positive/hbase_stats_empty_partition.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/src/test/results/positive/hbase_stats_empty_partition.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/stats/jdbc/JDBCStatsPublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/stats_empty_partition.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/stats_empty_partition.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550208" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:48 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12541432" name="HIVE-3396.1.patch.txt" size="9622" author="kevinwilfong" created="Fri, 17 Aug 2012 23:38:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240090</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00x33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>