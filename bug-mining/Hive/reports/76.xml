<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:51:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-276] input3_limit.q fails under 0.17</title>
                <link>https://issues.apache.org/jira/browse/HIVE-276</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The plan ql/src/test/results/clientpositive/input3_limit.q.out shows that there are 2 map-reduce jobs:&lt;/p&gt;

&lt;p&gt;The first one is distributed and sorted as is specified by the query. The reducer side has LIMIT 20.&lt;/p&gt;

&lt;p&gt;The second one (single reducer job imposed by LIMIT 20) does not have the same sort order, so the final result is non-deterministic.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12414151">HIVE-276</key>
            <summary>input3_limit.q fails under 0.17</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Feb 2009 22:33:26 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:43 +0000</updated>
                            <resolved>Thu, 19 Feb 2009 04:42:34 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12670925" author="zshao" created="Thu, 5 Feb 2009 22:33:45 +0000"  >&lt;p&gt;To test, try: ant -Dhadoop.version=0.17.0 -Dtestcase=TestCliDriver -Dqfile=input3_limit.q test&lt;/p&gt;</comment>
                            <comment id="12670926" author="zshao" created="Thu, 5 Feb 2009 22:35:34 +0000"  >&lt;p&gt;The query is: &quot;INSERT OVERWRITE TABLE T2 SELECT * FROM (SELECT * FROM T1 DISTRIBUTE BY key SORT BY key, value) T ;&quot;&lt;/p&gt;

&lt;p&gt;Maybe we should propagate the SORT ORDER to the second map-reduce job that LIMIT imposes.&lt;/p&gt;</comment>
                            <comment id="12672741" author="zshao" created="Wed, 11 Feb 2009 19:35:22 +0000"  >&lt;p&gt;Modified the query to do another SORT at the end.&lt;/p&gt;

&lt;p&gt;I also thought about propagating the sort order to the reduce sink operator of limit, but that does not seem very easy to do.&lt;/p&gt;</comment>
                            <comment id="12673104" author="athusoo" created="Fri, 13 Feb 2009 00:46:16 +0000"  >&lt;p&gt;sorry. I thought you were not working on this.&lt;/p&gt;</comment>
                            <comment id="12673105" author="athusoo" created="Fri, 13 Feb 2009 00:49:59 +0000"  >&lt;p&gt;I think it is easier to just put a sort by in the final select.&lt;/p&gt;

&lt;p&gt;SELECT * FROM T2 SORT BY T2.key, T2.value;&lt;/p&gt;


&lt;p&gt;instead of&lt;/p&gt;

&lt;p&gt;SELECT * FROM T2;&lt;/p&gt;
</comment>
                            <comment id="12674869" author="zshao" created="Thu, 19 Feb 2009 02:41:03 +0000"  >&lt;p&gt;Incorporated Ashish&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="12674870" author="rsm" created="Thu, 19 Feb 2009 02:45:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good.&lt;/p&gt;</comment>
                            <comment id="12674890" author="zshao" created="Thu, 19 Feb 2009 04:42:34 +0000"  >&lt;p&gt;trunk: Committed revision 745721.&lt;br/&gt;
branch 0.2: Committed revision 745723.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12400031" name="HIVE-276.1.patch" size="5389" author="zshao" created="Wed, 11 Feb 2009 19:35:22 +0000"/>
                            <attachment id="12400468" name="HIVE-276.2.patch" size="1120" author="zshao" created="Thu, 19 Feb 2009 02:41:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73653</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 40 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-276&quot; title=&quot;input3_limit.q fails under 0.17&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-276&quot;&gt;&lt;strike&gt;HIVE-276&lt;/strike&gt;&lt;/a&gt;. Fix input3_limit.q for hadoop 0.17. (zshao)</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>