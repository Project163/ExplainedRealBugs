<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:27:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-29055] TestHplSqlViaBeeLine#testHplSqlExitConditionHandler is broken and passes silently</title>
                <link>https://issues.apache.org/jira/browse/HIVE-29055</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TestHplSqlViaBeeLine#testHplSqlExitConditionHandler runs and checks stderr for the string &quot;Exit CONDITION Handler invoked.&quot;, which is present, but only because stderr contains the query itself:  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13077240/13077240_hive_29055_stderr.log&quot; title=&quot;hive_29055_stderr.log attached to HIVE-29055&quot;&gt;hive_29055_stderr.log&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; , this output was captured from &lt;a href=&quot;https://github.com/apache/hive/blob/925df927248c1be11b84df3e8a0c3e43955e133e/itests/hive-unit/src/test/java/org/apache/hive/beeline/TestHplSqlViaBeeLine.java#L1433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;tried the same with MiniHS2, exit condition handler was never invoked:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
mvn install -Dtest=StartMiniHS2Cluster -DminiHS2.clusterType=llap -DminiHS2.conf=&lt;span class=&quot;code-quote&quot;&gt;&quot;target/testconf/llap/hive-site.xml&quot;&lt;/span&gt;  -DminiHS2.run=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -DminiHS2.usePortsFromConf=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -pl itests/hive-unit -Pitests -nsu

beeline -u &lt;span class=&quot;code-quote&quot;&gt;&quot;jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;;retries=30;mode=hplsql&quot;&lt;/span&gt; -n $USER&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;gt; CREATE PROCEDURE p1()
&lt;/span&gt;. . . . . . . . . . . . . . . . . . . .&amp;gt; BEGIN
. . . . . . . . . . . . . . . . . . . .&amp;gt;  PRINT(&lt;span class=&quot;code-quote&quot;&gt;&apos;Exit CONDITION Handler invoked.&apos;&lt;/span&gt;);
. . . . . . . . . . . . . . . . . . . .&amp;gt; END;
. . . . . . . . . . . . . . . . . . . .&amp;gt; DECLARE cnt_condition CONDITION;
. . . . . . . . . . . . . . . . . . . .&amp;gt; DECLARE EXIT HANDLER FOR cnt_condition
. . . . . . . . . . . . . . . . . . . .&amp;gt;  p1();
. . . . . . . . . . . . . . . . . . . .&amp;gt; IF 1 &amp;lt;&amp;gt; 2 THEN
. . . . . . . . . . . . . . . . . . . .&amp;gt;  SIGNAL cnt_condition;
. . . . . . . . . . . . . . . . . . . .&amp;gt; END IF;
. . . . . . . . . . . . . . . . . . . .&amp;gt; /
No rows affected (0.579 seconds)
0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;whereas the continue handler seems to work:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;gt; DROP TABLE IF EXISTS result;
&lt;/span&gt;. . . . . . . . . . . . . . . . . . . .&amp;gt; CREATE TABLE result (s string);
. . . . . . . . . . . . . . . . . . . .&amp;gt; CREATE PROCEDURE p1()
. . . . . . . . . . . . . . . . . . . .&amp;gt; BEGIN
. . . . . . . . . . . . . . . . . . . .&amp;gt;  INSERT INTO result VALUES(&lt;span class=&quot;code-quote&quot;&gt;&apos;Continue CONDITION Handler invoked.&apos;&lt;/span&gt;);
. . . . . . . . . . . . . . . . . . . .&amp;gt; END;
. . . . . . . . . . . . . . . . . . . .&amp;gt; DECLARE cnt_condition CONDITION;
. . . . . . . . . . . . . . . . . . . .&amp;gt; DECLARE CONTINUE HANDLER FOR cnt_condition
. . . . . . . . . . . . . . . . . . . .&amp;gt;  p1();
. . . . . . . . . . . . . . . . . . . .&amp;gt; IF 1 &amp;lt;&amp;gt; 2 THEN
. . . . . . . . . . . . . . . . . . . .&amp;gt;  SIGNAL cnt_condition;
. . . . . . . . . . . . . . . . . . . .&amp;gt; END IF;
. . . . . . . . . . . . . . . . . . . .&amp;gt; SELECT * FROM result;
. . . . . . . . . . . . . . . . . . . .&amp;gt; /

...
actual work
...

INFO  : Continue CONDITION Handler invoked.
INFO  :
+--------------------------------------+
|               result.s               |
+--------------------------------------+
| Continue CONDITION Handler invoked.  |
+--------------------------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="13622089">HIVE-29055</key>
            <summary>TestHplSqlViaBeeLine#testHplSqlExitConditionHandler is broken and passes silently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Dayakar">Dayakar M</assignee>
                                    <reporter username="abstractdog">L&#225;szl&#243; Bodor</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sun, 29 Jun 2025 20:37:52 +0000</created>
                <updated>Thu, 3 Jul 2025 14:45:52 +0000</updated>
                            <resolved>Thu, 3 Jul 2025 14:45:52 +0000</resolved>
                                                    <fixVersion>4.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17986788" author="abstractdog" created="Sun, 29 Jun 2025 20:49:23 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Dayakar&quot; class=&quot;user-hover&quot; rel=&quot;Dayakar&quot;&gt;Dayakar&lt;/a&gt; can you recall the context from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-28215&quot; title=&quot;Signalling CONDITION HANDLER is not working in HPLSQL.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-28215&quot;&gt;&lt;del&gt;HIVE-28215&lt;/del&gt;&lt;/a&gt; and how it was tested that time? for me now it doesn&apos;t seem to be working&lt;br/&gt;
thanks in advance!&lt;/p&gt;</comment>
                            <comment id="17987094" author="dayakar" created="Tue, 1 Jul 2025 06:15:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abstractdog&quot; class=&quot;user-hover&quot; rel=&quot;abstractdog&quot;&gt;abstractdog&lt;/a&gt; , It looks a bug, its not invoking Exit Condition Handler. Let me check and fix the issue. Thanks for finding and raising the issue.&lt;/p&gt;</comment>
                            <comment id="17987182" author="dayakar" created="Tue, 1 Jul 2025 10:41:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abstractdog&quot; class=&quot;user-hover&quot; rel=&quot;abstractdog&quot;&gt;abstractdog&lt;/a&gt; Further checking and debugging found that its a testcode issue, I will fix the test code and raise a PR for the same.&lt;/p&gt;</comment>
                            <comment id="17993104" author="abstractdog" created="Thu, 3 Jul 2025 14:45:44 +0000"  >&lt;p&gt;merged to master, thanks a lot &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Dayakar&quot; class=&quot;user-hover&quot; rel=&quot;Dayakar&quot;&gt;Dayakar&lt;/a&gt; for fixing this!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13577095">HIVE-28215</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13398788">HIVE-25495</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13077240" name="hive_29055_stderr.log" size="11565" author="abstractdog" created="Sun, 29 Jun 2025 20:39:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1wj7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>