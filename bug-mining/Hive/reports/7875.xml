<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:19:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-24671] Semijoinremoval should not run into an NPE in case the SJ filter contains an UDF</title>
                <link>https://issues.apache.org/jira/browse/HIVE-24671</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
set hive.optimize.index.filter=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
set hive.support.concurrency=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
set hive.txn.manager=org.apache.hadoop.hive.ql.lockmgr.DbTxnManager;
set hive.exec.dynamic.partition.mode=nonstrict;
set hive.exec.dynamic.partition=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
set hive.vectorized.execution.enabled=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;



drop table &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exists t1;
drop table &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exists t2;

create table t1 (
        v1 string
);

create table t2 (
        v2 string
);

insert into t1 values (&lt;span class=&quot;code-quote&quot;&gt;&apos;e123456789&apos;&lt;/span&gt;),(&lt;span class=&quot;code-quote&quot;&gt;&apos;x123456789&apos;&lt;/span&gt;);
insert into t2 values
(&lt;span class=&quot;code-quote&quot;&gt;&apos;123&apos;&lt;/span&gt;),
 (&lt;span class=&quot;code-quote&quot;&gt;&apos;e123456789&apos;&lt;/span&gt;);


-- alter table t1 update statistics set (&lt;span class=&quot;code-quote&quot;&gt;&apos;numRows&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;9348843574&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;rawDataSize&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt;);

alter table t1 update statistics set (&lt;span class=&quot;code-quote&quot;&gt;&apos;numRows&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;934884357&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;rawDataSize&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt;);
alter table t2 update statistics set (&lt;span class=&quot;code-quote&quot;&gt;&apos;numRows&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;9348&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;rawDataSize&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt;);

alter table t1 update statistics &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; column v1 set (&lt;span class=&quot;code-quote&quot;&gt;&apos;numNulls&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;numDVs&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;15541355&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;avgColLen&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;10.0&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;maxColLen&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;10&apos;&lt;/span&gt;);
alter table t2 update statistics &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; column v2 set (&lt;span class=&quot;code-quote&quot;&gt;&apos;numNulls&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;numDVs&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;155&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;avgColLen&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;5.0&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;maxColLen&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;10&apos;&lt;/span&gt;);
-- alter table t2 update statistics &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; column k set (&lt;span class=&quot;code-quote&quot;&gt;&apos;numNulls&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;numDVs&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;13876472&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;avgColLen&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;15.9836&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;maxColLen&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;16&apos;&lt;/span&gt;);

explain
select v1,v2 from t1 join t2 on (substr(v1,1,3) = v2);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;results in:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 java.lang.NullPointerException
	at org.apache.hadoop.hive.ql.parse.TezCompiler.removeSemijoinOptimizationByBenefit(TezCompiler.java:1944)
	at org.apache.hadoop.hive.ql.parse.TezCompiler.semijoinRemovalBasedTransformations(TezCompiler.java:544)
	at org.apache.hadoop.hive.ql.parse.TezCompiler.optimizeOperatorPlan(TezCompiler.java:240)
	at org.apache.hadoop.hive.ql.parse.TaskCompiler.compile(TaskCompiler.java:161)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.compilePlan(SemanticAnalyzer.java:12467)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:12672)
	at org.apache.hadoop.hive.ql.parse.CalcitePlanner.analyzeInternal(CalcitePlanner.java:455)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:301)
	at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:171)
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13353551">HIVE-24671</key>
            <summary>Semijoinremoval should not run into an NPE in case the SJ filter contains an UDF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kgyrtkirk">Zoltan Haindrich</assignee>
                                    <reporter username="kgyrtkirk">Zoltan Haindrich</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 20 Jan 2021 14:50:31 +0000</created>
                <updated>Tue, 26 Jan 2021 07:23:54 +0000</updated>
                            <resolved>Tue, 26 Jan 2021 07:23:54 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17271927" author="kkasa" created="Tue, 26 Jan 2021 07:23:54 +0000"  >&lt;p&gt;Pushed to master, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kgyrtkirk&quot; class=&quot;user-hover&quot; rel=&quot;kgyrtkirk&quot;&gt;kgyrtkirk&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13272061">HIVE-22572</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mt4w:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>