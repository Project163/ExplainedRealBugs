<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:26:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-28772] Clear REPL_TXN_MAP table on DR when deleting replication policy</title>
                <link>https://issues.apache.org/jira/browse/HIVE-28772</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently, if you create scheduled queries for repl dump and repl load, then by design during incremental replication transactions can span across multiple replication runs.&lt;/p&gt;

&lt;p&gt;And if OPEN_TXN is replicated, then on the DR side it will add an entry in the REPL_TXN_MAP table to keep track of open transactions for that database.&lt;/p&gt;

&lt;p&gt;But before replaying COMMIT_TXN/ABORT_TXN, if user deletes the policy and drops the database on the DR to re-bootstrap, then we are not cleaning up the REPL_TXN_MAP table&lt;/p&gt;

&lt;p&gt;Which can lead to 2 major issues:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;It can bring down AcidHouseKeeper cleaner services, which clean up transaction-related tables in the HMS, because it reads the database name in the REPL_TXN_MAP and tries to get the database information for that and fails with a database doesn&apos;t exist error. This can bloat up the HMS.&lt;/li&gt;
	&lt;li&gt;If user creates a policy quickly before AcidHouseKeeper kicks in the in that case newly created database will be marked as repl incompatible from the AcidHouseKeeper while cleaning up the TXNS and REPL_TXN_MAP table after 11 days&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="13609297">HIVE-28772</key>
            <summary>Clear REPL_TXN_MAP table on DR when deleting replication policy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="harshalk">Harshal Patel</assignee>
                                    <reporter username="harshalk">Harshal Patel</reporter>
                        <labels>
                            <label>Replication</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 21 Feb 2025 04:08:18 +0000</created>
                <updated>Tue, 29 Jul 2025 14:51:19 +0000</updated>
                            <resolved>Fri, 7 Mar 2025 07:11:29 +0000</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                    <component>repl</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ucpc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>