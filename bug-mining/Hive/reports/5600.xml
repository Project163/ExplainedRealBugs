<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:54:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-16667] PostgreSQL metastore handling of CLOB types for COLUMNS_V2.TYPE_NAME and other field is incorrect</title>
                <link>https://issues.apache.org/jira/browse/HIVE-16667</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The CLOB JDO type introduced with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12274&quot; title=&quot;Increase width of columns used for general configuration in the metastore.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12274&quot;&gt;&lt;del&gt;HIVE-12274&lt;/del&gt;&lt;/a&gt; does not work correctly with PostgreSQL. The value is written out-of-band and the LOB handle is written,as an INT, into the table. SELECTs return the INT value, which should had been read via the &lt;tt&gt;lo_get&lt;/tt&gt; PG built-in, and then cast into string.&lt;/p&gt;

&lt;p&gt;Furthermore, the behavior is different between fields upgraded from earlier metastore versions (they retain their string storage) vs. values inserted after the upgrade (inserted as LOB roots).&lt;/p&gt;

&lt;p&gt;Teh code in &lt;tt&gt;MetasoreDirectSql.getPartitionsFromPartitionIds/extractSqlClob&lt;/tt&gt; expects the underlying JDO/Datanucleus to map the column to a &lt;tt&gt;Clob&lt;/tt&gt; but that does not happen, the value is a Java String containing the int which is the LOB root saved by PG.&lt;/p&gt;

&lt;p&gt;This manifests at runtime with errors like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; select * from srcpart;
Failed with exception java.io.IOException:java.lang.IllegalArgumentException: Error: type expected at the position 0 of &lt;span class=&quot;code-quote&quot;&gt;&apos;24030:24031&apos;&lt;/span&gt; but &lt;span class=&quot;code-quote&quot;&gt;&apos;24030&apos;&lt;/span&gt; is found.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the 24030:24031 should be &apos;string:string&apos;.&lt;/p&gt;

&lt;p&gt;repro:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE srcpart (key STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;, value STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;) PARTITIONED BY (ds STRING, hr STRING) STORED AS TEXTFILE;
LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&quot;${hiveconf:test.data.dir}/kv1.txt&quot;&lt;/span&gt; OVERWRITE INTO TABLE srcpart PARTITION (ds=&lt;span class=&quot;code-quote&quot;&gt;&quot;2008-04-09&quot;&lt;/span&gt;, hr=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt;);
select * from srcpart;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I did not see the issue being hit by non-partitioned/textfile tables, but that is just the luck of the path taken by the code. Inspection of my PG metastore shows all the CLOB fields suffering from this issue.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13072020">HIVE-16667</key>
            <summary>PostgreSQL metastore handling of CLOB types for COLUMNS_V2.TYPE_NAME and other field is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ngangam">Naveen Gangam</assignee>
                                    <reporter username="rusanu">Remus Rusanu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 May 2017 13:54:34 +0000</created>
                <updated>Wed, 23 May 2018 00:00:20 +0000</updated>
                            <resolved>Sat, 10 Jun 2017 09:59:39 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16011121" author="thejas" created="Mon, 15 May 2017 18:58:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pxiong&quot; class=&quot;user-hover&quot; rel=&quot;pxiong&quot;&gt;pxiong&lt;/a&gt; FYI, this looks like a blocker for 2.3.0 release.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt; Have you tried similar tests after the changes with postgres ?&lt;/p&gt;

&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;aihuaxu&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16012429" author="aihuaxu" created="Tue, 16 May 2017 14:00:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt; Can you take a look? I remember you did the tests against various DBs?&lt;/p&gt;</comment>
                            <comment id="16012468" author="ngangam" created="Tue, 16 May 2017 14:20:27 +0000"  >&lt;p&gt;I am taking a look. I have run upgrade tests with postgres as well.&lt;/p&gt;</comment>
                            <comment id="16012469" author="rusanu" created="Tue, 16 May 2017 14:23:18 +0000"  >&lt;p&gt;The problem will not reproduce on Hive tables that were present at metastore upgrade. It must be a (partitioned?) table, created after the upgrade.&lt;/p&gt;</comment>
                            <comment id="16012517" author="ngangam" created="Tue, 16 May 2017 14:57:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; Could you please post the full stack trace if you still have it? I do not know of these nuanes across these different DBs, so apologize if some of these questions seem obvious.&lt;/p&gt;

&lt;p&gt;In the upgrade script, when we cast the existing String values as text, shouldnt the existing columns values also be treated the same as any new inserts? If not, is there an alternate way of making existing column values be the same format as new values during the upgrade?&lt;br/&gt;
&lt;tt&gt;alter table &quot;COLUMNS_V2&quot; alter column &quot;TYPE_NAME&quot; type text using cast(&quot;TYPE_NAME&quot; as text);&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;If the JDO mapping file defines a column as CLOB, wouldnt the column type be of Clob irrespective of the underlying DB? Thanks &lt;/p&gt;</comment>
                            <comment id="16012594" author="rusanu" created="Tue, 16 May 2017 15:35:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt; I think the easiest is to set up a local PG metastore, inititalize it with schematool, then run the repro I attached.    &lt;/p&gt;

&lt;p&gt;Like you, I would have expected the value to come as Clob, but is String in the debugger.&lt;/p&gt;</comment>
                            <comment id="16014175" author="ngangam" created="Wed, 17 May 2017 15:07:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; I have run some tests with my postgres installation running on &lt;tt&gt;Linux &amp;lt;snip&amp;gt; 2.6.32-504.16.2.el6.x86_64 #1 SMP Wed Apr 22 06:48:29 UTC 2015 x86_64 x86_64 x86_64 GNU/Linux&lt;/tt&gt; and the CLOB values inserted into the database are inline.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive1=&amp;gt; \d &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS&quot;&lt;/span&gt;
                      Table &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt;.TABLE_PARAMS&quot;&lt;/span&gt;
   Column    |          Type          |            Modifiers            
-------------+------------------------+---------------------------------
 TBL_ID      | bigint                 | not &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 PARAM_KEY   | character varying(256) | not &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
 PARAM_VALUE | text                   | &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; NULL::character varying
Indexes:
    &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS_pkey&quot;&lt;/span&gt; PRIMARY KEY, btree (&lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_KEY&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS_N49&quot;&lt;/span&gt; btree (&lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_ID&quot;&lt;/span&gt;)
Foreign-key constraints:
    &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS_TBL_ID_fkey&quot;&lt;/span&gt; FOREIGN KEY (&lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_ID&quot;&lt;/span&gt;) REFERENCES &lt;span class=&quot;code-quote&quot;&gt;&quot;TBLS&quot;&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_ID&quot;&lt;/span&gt;) DEFERRABLE

hive1=&amp;gt; select &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_VALUE&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS&quot;&lt;/span&gt;;
1
 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 0
 46055
 1494964727
 0
 1
 46069
 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 1494964728
 0
 0
 1
 &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
 15812
 1494964729
 0
 0
 1494964729
 STRING,myField2 : STRING, myField3 : STRING, myField4 : STRING, myField5 : STRING, myField6 : STRING, myField7 : STRING, myField8 : STRING, myField9 : STRING, myField10 : STRING, myField11 : STRING, my
Field12 : STRING, myField13 : STRING, myField14 : STRING, myField15 : STRING, myField16 : STRING, myField17 : STRING, myField18 : STRING, myField19 : STRING, myField20 : STRING, myField21 : STRING, myFi
eld22 : STRING, myField23 : STRING, myField24 : STRING, myField25 : STRING, 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The last value has been snipped for brevity but it is a long value beyond the prior 4000 character limit. I am not sure why my &quot;text&quot; values are inline whereas your values show an integer. Could this be a database config setting? Thanks&lt;/p&gt;</comment>
                            <comment id="16014204" author="rusanu" created="Wed, 17 May 2017 15:24:08 +0000"  >&lt;p&gt;What PG and PG client version do you have?&lt;/p&gt;</comment>
                            <comment id="16014224" author="ngangam" created="Wed, 17 May 2017 15:34:42 +0000"  >&lt;p&gt;I am at 8.4.20 for both server and client.&lt;/p&gt;</comment>
                            <comment id="16014306" author="ngangam" created="Wed, 17 May 2017 16:02:27 +0000"  >&lt;p&gt;the last value reported above for column &lt;tt&gt;PARAM_VALUE&lt;/tt&gt; is roughly 21k in length. Is your value much larger?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive1=&amp;gt; select max(length(&lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_VALUE&quot;&lt;/span&gt;)) from &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS&quot;&lt;/span&gt;;
  max  
-------
 20879
(1 row)

hive1=&amp;gt; select version();
                                                      version                                                      
-------------------------------------------------------------------------------------------------------------------
 PostgreSQL 8.4.20 on x86_64-redhat-linux-gnu, compiled by GCC gcc (GCC) 4.4.7 20120313 (Red Hat 4.4.7-18), 64-bit
(1 row)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16014370" author="rusanu" created="Wed, 17 May 2017 16:43:15 +0000"  >&lt;p&gt;For me it happens with even tiny strings, like &lt;tt&gt;INT&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;metastore=# select *, CAST(lo_get(CAST(&lt;span class=&quot;code-quote&quot;&gt;&quot;TYPE_NAME&quot;&lt;/span&gt; as bigint)) as TEXT) from &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2&quot;&lt;/span&gt;  LIMIT 1;
CD_ID | COMMENT | COLUMN_NAME | TYPE_NAME | INTEGER_IDX |  lo_get
-------+---------+-------------+-----------+-------------+----------
     2 |         | customer    | 21664     |           0 | \x696e74
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Can you tell me what JDBC Driver do you use? My settings are:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &amp;lt;property&amp;gt;
        &amp;lt;name&amp;gt;javax.jdo.option.ConnectionURL&amp;lt;/name&amp;gt;
        &amp;lt;value&amp;gt;jdbc:postgresql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:5432/metastore&amp;lt;/value&amp;gt;
&lt;/span&gt;    &amp;lt;/property&amp;gt;
    &amp;lt;property&amp;gt;
        &amp;lt;name&amp;gt;javax.jdo.option.ConnectionDriverName&amp;lt;/name&amp;gt;
        &amp;lt;value&amp;gt;org.postgresql.Driver&amp;lt;/value&amp;gt;
    &amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I think the classpath resolves the driver to &lt;tt&gt;postgresql-9.3-1102-jdbc3.jar&lt;/tt&gt;. The PG server itself is 9.6.2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;rrusanu=# select version();
                                                    version
----------------------------------------------------------------------------------------------------------------
 PostgreSQL 9.6.2 on x86_64-apple-darwin15.6.0, compiled by Apple LLVM version 8.0.0 (clang-800.0.42.1), 64-bit
(1 row)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="16014383" author="rusanu" created="Wed, 17 May 2017 16:54:10 +0000"  >&lt;p&gt;BTW, to show &lt;tt&gt;PARAM_VALUE&lt;/tt&gt; value in PG:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;metastore=# select &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_VALUE&quot;&lt;/span&gt;, lo_get(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_VALUE&quot;&lt;/span&gt; as INT)) from &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS&quot;&lt;/span&gt; limit 3;
 PARAM_VALUE |         lo_get
-------------+------------------------
 21665       | \x31343934333230383636
 21742       | \x30
 21743       | \x30
(3 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16014450" author="ngangam" created="Wed, 17 May 2017 17:26:22 +0000"  >&lt;p&gt;I only have these 2 jars for the driver. It has to be one of them &lt;tt&gt;postgresql-9.0-801.jdbc4.jar&lt;/tt&gt; and &lt;tt&gt;postgresql-9.1-901.jdbc4.jar&lt;/tt&gt;. They are exactly the same size, so I am assuming they are the same.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; CREATE TABLE srcpart (key STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;, value STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;) PARTITIONED BY (ds STRING, hr STRING) STORED AS TEXTFILE;
OK
Time taken: 13.775 seconds
hive&amp;gt; LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/ngangam/apache/hive/data/files/kv1.txt&quot;&lt;/span&gt; OVERWRITE INTO TABLE srcpart PARTITION (ds=&lt;span class=&quot;code-quote&quot;&gt;&quot;2008-04-09&quot;&lt;/span&gt;,hr=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt;);
Loading data to table &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.srcpart partition (ds=2008-04-09, hr=11)
OK
Time taken: 132.365 seconds
hive&amp;gt; select * from srcpart;
OK
238	val_238	2008-04-09	11
86	val_86	2008-04-09	11
311	val_311	2008-04-09	11
27	val_27	2008-04-09	11
165	val_165	2008-04-09	11
409	val_409	2008-04-09	11
....
200	val_200	2008-04-09	11
97	val_97	2008-04-09	11
Time taken: 17.693 seconds, Fetched: 500 row(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My hive-site.xml has the following .. should be the same as yours as far as connection params and a driver are concerned. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;javax.jdo.option.ConnectionDriverName&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;org.postgresql.Driver&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
  &amp;lt;property&amp;gt;
    &amp;lt;name&amp;gt;javax.jdo.option.ConnectionUserName&amp;lt;/name&amp;gt;
    &amp;lt;value&amp;gt;hive1&amp;lt;/value&amp;gt;
  &amp;lt;/property&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16014727" author="ngangam" created="Wed, 17 May 2017 20:43:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; Thank you for your continued help. &lt;br/&gt;
I dont quite understand the need to use &lt;tt&gt;lo_get&lt;/tt&gt; on a text column. For me, its working without any transformation. Could you please elaborate? Thanks&lt;/p&gt;</comment>
                            <comment id="16014828" author="ngangam" created="Wed, 17 May 2017 21:54:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; I created a new database &lt;tt&gt;apachehive&lt;/tt&gt; as a new user &lt;tt&gt;apachehive&lt;/tt&gt; within postgres using &lt;tt&gt;create user apachehive createdb createuser password &apos;apachehive&apos;; create database apachehive owner apachehive&lt;/tt&gt;. I then installed the hive schema for 3.0.0. &lt;br/&gt;
I can now see that the text columns are storing integers.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;apachehive=# select * from &lt;span class=&quot;code-quote&quot;&gt;&quot;TBLS&quot;&lt;/span&gt;;
 TBL_ID | CREATE_TIME | DB_ID | LAST_ACCESS_TIME |  OWNER  | RETENTION | SD_ID |     TBL_NAME     |    TBL_TYPE    | VIEW_EXPANDED_TEXT | VIEW_ORIGINAL_TEXT | IS_REWRITE_ENABLED 
--------+-------------+-------+------------------+---------+-----------+-------+------------------+----------------+--------------------+--------------------+--------------------
      1 |  1495055598 |     1 |                0 | ngangam |         0 |     1 | srcpart          | MANAGED_TABLE  |                    |                    | f
      2 |  1495055786 |     1 |                0 | ngangam |         0 |     3 | largeserdeparams | EXTERNAL_TABLE |                    |                    | f
      3 |  1495055859 |     1 |                0 | ngangam |         0 |     4 | largetblparams   | EXTERNAL_TABLE |                    |                    | f
(3 rows)

apachehive=# select * from &lt;span class=&quot;code-quote&quot;&gt;&quot;TABLE_PARAMS&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_ID&quot;&lt;/span&gt;=2;
 TBL_ID |       PARAM_KEY       | PARAM_VALUE 
--------+-----------------------+-------------
      2 | EXTERNAL              | 24881
      2 | transient_lastDdlTime | 24880
(2 rows)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, I am able to retrieve the values correctly using both JDO and DirectSQL, without any changes to the code. Please see the results and the hive CLI output in the attached files. I am wondering if somehow your JDO mapping file does NOT reflect this change to CLOB so JDO layer is treating it as a String while the value is CLOB. &lt;/p&gt;

&lt;p&gt;Would you be able to retry by starting with a fresh DB and installing just 3.0.0 schema (instead of upgrading from an older hive release)? In my prior tests, I was using an upgraded schema (initially installed hive1.1.0 schema and then upgraded to hive3.0.0 using the upgrade scripts). In that database, the &lt;tt&gt;text&lt;/tt&gt; values for columns still seem to be stored in-line. I am wondering if this was due to the fact that it was initally a &lt;tt&gt;character&lt;/tt&gt; type and then converted to &lt;tt&gt;text&lt;/tt&gt;.&lt;br/&gt;
Thanks&lt;/p&gt;</comment>
                            <comment id="16015291" author="rusanu" created="Thu, 18 May 2017 06:38:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt; Thanks! I Can you please run the repro I attached originally?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE srcpart (key STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;, value STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;) PARTITIONED BY (ds STRING, hr STRING) STORED AS TEXTFILE;
LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&quot;${hiveconf:test.data.dir}/kv1.txt&quot;&lt;/span&gt; OVERWRITE INTO TABLE srcpart PARTITION (ds=&lt;span class=&quot;code-quote&quot;&gt;&quot;2008-04-09&quot;&lt;/span&gt;, hr=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt;);
select * from srcpart;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is a reason for this specific repro. If simply look at any CLOB field, like &lt;tt&gt;TABLE_PARAMS.PARAM_VALUE&lt;/tt&gt;, then this field may well be loaded by JDO, via the ObjectStore. JDO knows how to handle this field appropriately. But my repro triggers a code path which goes through the &lt;a href=&quot;https://github.com/apache/hive/blob/master/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreDirectSql.java#L787&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MetasoreDirectSql.getPartitionsFromPartitionIds&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &lt;span class=&quot;code-comment&quot;&gt;// Get FieldSchema stuff &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; any.
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!colss.isEmpty()) {
      &lt;span class=&quot;code-comment&quot;&gt;// We are skipping the CDS table here, as it seems to be totally useless.
&lt;/span&gt;      queryText = &lt;span class=&quot;code-quote&quot;&gt;&quot;select \&quot;&lt;/span&gt;CD_ID\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;COMMENT\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;COLUMN_NAME\&lt;span class=&quot;code-quote&quot;&gt;&quot;, \&quot;&lt;/span&gt;TYPE_NAME\&quot;&quot;
          + &lt;span class=&quot;code-quote&quot;&gt;&quot; from \&quot;&lt;/span&gt;COLUMNS_V2\&lt;span class=&quot;code-quote&quot;&gt;&quot; where \&quot;&lt;/span&gt;CD_ID\&lt;span class=&quot;code-quote&quot;&gt;&quot; in (&quot;&lt;/span&gt; + colIds + &lt;span class=&quot;code-quote&quot;&gt;&quot;) and \&quot;&lt;/span&gt;INTEGER_IDX\&lt;span class=&quot;code-quote&quot;&gt;&quot; &amp;gt;= 0&quot;&lt;/span&gt;
          + &lt;span class=&quot;code-quote&quot;&gt;&quot; order by \&quot;&lt;/span&gt;CD_ID\&lt;span class=&quot;code-quote&quot;&gt;&quot; asc, \&quot;&lt;/span&gt;INTEGER_IDX\&lt;span class=&quot;code-quote&quot;&gt;&quot; asc&quot;&lt;/span&gt;;
      loopJoinOrderedResult(colss, queryText, 0, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ApplyFunc&amp;lt;List&amp;lt;FieldSchema&amp;gt;&amp;gt;() {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void apply(List&amp;lt;FieldSchema&amp;gt; t, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] fields) {
          t.add(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FieldSchema((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)fields[2], extractSqlClob(fields[3]), (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)fields[1]));
        }});
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This particular code is the one I&apos;m reporting the problem on. For me, this does not handle Clobs appropriately and reads the lob handle value instead of the lob content.&lt;/p&gt;
</comment>
                            <comment id="16015729" author="ngangam" created="Thu, 18 May 2017 13:19:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; I did run the exact repro you provided. Thats the first test in the attached HiveCLIOutput.txt file.&lt;/p&gt;</comment>
                            <comment id="16015775" author="rusanu" created="Thu, 18 May 2017 13:51:09 +0000"  >&lt;p&gt;Can you confirm with a debugger that that line is being executed? I want to figure out whether is a different Hive setting that causes this code not to run in your case, or the line is being executed but behave differently (loads the lobs as strings), which would point toward a difference in Env/PG/JDO/Driver.&lt;/p&gt;</comment>
                            <comment id="16015780" author="ngangam" created="Thu, 18 May 2017 13:55:45 +0000"  >&lt;p&gt;I will use a standalone JDBC client to be able to play around with this.&lt;/p&gt;</comment>
                            <comment id="16015947" author="ngangam" created="Thu, 18 May 2017 15:29:06 +0000"  >&lt;p&gt;I am able to reproduce the issue now. Nothing has changed since last night except I rebuilt the product from scratch this morning. So the HiveConf changes for it to use DirectSQL might not have picked up last night.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; CREATE TABLE srcpart (key STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;, value STRING COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&apos;&lt;/span&gt;) PARTITIONED BY (ds STRING, hr STRING) STORED AS TEXTFILE;
OK
Time taken: 11.637 seconds
hive&amp;gt; LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&quot;/Users/ngangam/THIRD/apache/hive/data/files/kv1.txt&quot;&lt;/span&gt; OVERWRITE INTO TABLE srcpart PARTITION (ds=&lt;span class=&quot;code-quote&quot;&gt;&quot;2008-04-09&quot;&lt;/span&gt;,hr=&lt;span class=&quot;code-quote&quot;&gt;&quot;11&quot;&lt;/span&gt;);
Loading data to table &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.srcpart partition (ds=2008-04-09, hr=11)
OK
Time taken: 132.753 seconds
hive&amp;gt; select * from srcpart;
OK
Failed with exception java.io.IOException:java.lang.IllegalArgumentException: Error: type expected at the position 0 of &lt;span class=&quot;code-quote&quot;&gt;&apos;25200:25201&apos;&lt;/span&gt; but &lt;span class=&quot;code-quote&quot;&gt;&apos;25200&apos;&lt;/span&gt; is found.
Time taken: 24.4 seconds
hive&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let me debug thru this and see if I can come up with a fix. So from ur experience, how do we determine if text is being stored in-line or out-of-line by the database?&lt;/p&gt;</comment>
                            <comment id="16015957" author="rusanu" created="Thu, 18 May 2017 15:41:10 +0000"  >&lt;p&gt;While debugging this I found that there is a relevant JDO driver setting: &lt;tt&gt;DatastoreAdapter.CLOB_SET_USING_SETSTRING&lt;/tt&gt;, that controls this, see &lt;a href=&quot;https://github.com/datanucleus/datanucleus-rdbms/blob/master/src/main/java/org/datanucleus/store/rdbms/mapping/datastore/ClobRDBMSMapping.java#L60&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ClobRDBMSMapping.setString&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setString(PreparedStatement ps, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; param, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getDatastoreAdapter().supportsOption(DatastoreAdapter.CLOB_SET_USING_SETSTRING))
        {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.setString(ps, param ,value);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        {
            setObject(ps, param, value);
        }
    }
...
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getString(ResultSet rs, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; param)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getDatastoreAdapter().supportsOption(DatastoreAdapter.CLOB_SET_USING_SETSTRING))
        {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getString(rs, param);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) getObject(rs, param);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;However, I could not find any way to &lt;b&gt;configure&lt;/b&gt; this. It is pre-set for &lt;a href=&quot;https://github.com/datanucleus/datanucleus-rdbms/blob/master/src/main/java/org/datanucleus/store/rdbms/adapter/MySQLAdapter.java#L119&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MySQL Adapter&lt;/a&gt;, but not for PG. I don&apos;t know if the connection URL/string can somehow set this preference/setting. My experience with Datanucleus is rather limited.&lt;/p&gt;</comment>
                            <comment id="16017812" author="ngangam" created="Fri, 19 May 2017 18:37:50 +0000"  >&lt;p&gt;I have tried a couple of means to force PosgresSQL to store the values inline instead of TOASTed values via OIDs.  According to their documentation, setting storage to &lt;tt&gt;PLAIN || MAIN&lt;/tt&gt; should force the DB to store them in-line.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;The TOAST code recognizes four different strategies &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; storing TOAST-able columns:
PLAIN prevents either compression or out-of-line storage; furthermore it disables use of single-&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; headers &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; varlena types. This is the only possible strategy &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; columns of non-TOAST-able data types.

EXTENDED allows both compression and out-of-line storage. This is the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; most TOAST-able data types. Compression will be attempted first, then out-of-line storage &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the row is still too big.

EXTERNAL allows out-of-line storage but not compression. Use of EXTERNAL will make substring operations on wide text and bytea columns faster (at the penalty of increased storage space) because these operations are optimized to fetch only the required parts of the out-of-line value when it is not compressed.

MAIN allows compression but not out-of-line storage. (Actually, out-of-line storage will still be performed &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; such columns, but only as a last resort when there is no other way to make the row small enough.)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Even with either of the setting, I cannot get it to store these values in-line.&lt;/p&gt;

&lt;p&gt;I am still researching .. based on a hint in a usergroups, I found this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2&quot;&lt;/span&gt;;
CD_ID | COMMENT | COLUMN_NAME | TYPE_NAME | INTEGER_IDX 
-------+---------+-------------+-----------+-------------
    1 | &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; | key        | 27118    |          0
    1 | &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; | value      | 27119    |          1
(2 rows)

select &lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;COMMENT&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMN_NAME&quot;&lt;/span&gt;, convert_from(loread(lo_open(&lt;span class=&quot;code-quote&quot;&gt;&quot;TYPE_NAME&quot;&lt;/span&gt;::&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, x&lt;span class=&quot;code-quote&quot;&gt;&apos;40000&apos;&lt;/span&gt;::&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;), x&lt;span class=&quot;code-quote&quot;&gt;&apos;40000&apos;&lt;/span&gt;::&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;),  &lt;span class=&quot;code-quote&quot;&gt;&apos;UTF8&apos;&lt;/span&gt;) as &lt;span class=&quot;code-quote&quot;&gt;&quot;TYPE_NAME&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt; in (1) and &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; &amp;gt;= 0 order by &lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt; asc, &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; asc;
CD_ID | COMMENT | COLUMN_NAME | TYPE_NAME 
-------+---------+-------------+-----------
    1 | &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; | key        | string
    1 | &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; | value      | string
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While the above conversion works fine in native client, the same does not work via hive/JDO. However, the overall request to getPartitions succeeds because it falls back to using datanucleus when DirectSQL fails.&lt;/p&gt;

&lt;p&gt;{{2017-05-19T11:24:46,604  WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-7-thread-2&amp;#93;&lt;/span&gt; metastore.MetaStoreDirectSql: Getting partitions:query=select &quot;CD_ID&quot;, &quot;COMMENT&quot;, &quot;COLUMN_NAME&quot;, convert_from(loread(lo_open(&quot;TYPE_NAME&quot;::int, x&apos;40000&apos;::int), x&apos;40000&apos;::int),  &apos;UTF8&apos;) as &quot;TYPE_NAME&quot; from &quot;COLUMNS_V2&quot; where &quot;CD_ID&quot; in (1) and &quot;INTEGER_IDX&quot; &amp;gt;= 0 order by &quot;CD_ID&quot; asc, &quot;INTEGER_IDX&quot; asc&lt;/p&gt;

&lt;p&gt;2017-05-19T11:24:46,605  WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-7-thread-2&amp;#93;&lt;/span&gt; metastore.ObjectStore: Falling back to ORM path due to direct SQL failure (this is not an error): SQL query &quot;select &quot;CD_ID&quot;, &quot;COMMENT&quot;, &quot;COLUMN_NAME&quot;, convert_from(loread(lo_open(&quot;TYPE_NAME&quot;::int, x&apos;40000&apos;::int), x&apos;40000&apos;::int),  &apos;UTF8&apos;) as &quot;TYPE_NAME&quot; from &quot;COLUMNS_V2&quot; where &quot;CD_ID&quot; in (1) and &quot;INTEGER_IDX&quot; &amp;gt;= 0 order by &quot;CD_ID&quot; asc, &quot;INTEGER_IDX&quot; asc&quot; requires 3 parameters yet none have been supplied at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:636) at }}&lt;/p&gt;
</comment>
                            <comment id="16017815" author="ngangam" created="Fri, 19 May 2017 18:40:11 +0000"  >&lt;p&gt;I have looked thru the code to see if there is a way to set &lt;tt&gt;CLOB_SET_USING_SETSTRING&lt;/tt&gt;. There is no API to add to &lt;tt&gt;supportedOptions&lt;/tt&gt; list. and like you said it is only enabled for MySQL.&lt;/p&gt;</comment>
                            <comment id="16019988" author="ngangam" created="Mon, 22 May 2017 18:36:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; I have tried a couple of means to change the query in direct sql to get it to read thru the &lt;tt&gt;text&lt;/tt&gt; columns. They work via native postgresql client &lt;tt&gt;psql&lt;/tt&gt; but fail via JDO. I have also tried to alter the table definition to force in-line storage of the column &lt;tt&gt;plain || main&lt;/tt&gt; value but it seems to have no impact on how it is actually persisted. This is going to need a bit more research.&lt;/p&gt;

&lt;p&gt;Unblocking the release is now a priority. Until we can figure out a proper solution, we can fix it so that extractSqlClob throws an exception if the value is not clob type and that should get it to retry using ORM. I have test this fix locally and seems to be working. Thoughts?&lt;/p&gt;</comment>
                            <comment id="16020185" author="ngangam" created="Mon, 22 May 2017 20:55:33 +0000"  >&lt;p&gt;Attaching a patch that would allow the fallback to ORM for Clob datatypes, so the pre-commits gets run to ensure there are no test failures. This should unblock the release.&lt;/p&gt;</comment>
                            <comment id="16020285" author="hiveqa" created="Mon, 22 May 2017 22:14:41 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12869329/HIVE-16667.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12869329/HIVE-16667.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 10742 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5386/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5386/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5386/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5386/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5386/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5386/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12869329 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16020759" author="rusanu" created="Tue, 23 May 2017 07:28:23 +0000"  >&lt;p&gt;I don&apos;t see how your patch will address the problem of mixing  pre v3.0 upgraded tables and post v.30 created one. the new ones will store the &lt;tt&gt;TYPE_NAME&lt;/tt&gt; as a LOB handle, while the upgraded ones will have the inlined string value.&lt;/p&gt;

&lt;p&gt;Can we explore instead reverting the column type mapping to &lt;tt&gt;VARCHAR&lt;/tt&gt; in the package.jdo, (or &lt;tt&gt;LONGVARCHAR&lt;/tt&gt; if need be) instead of &lt;tt&gt;CLOB&lt;/tt&gt;? Keep the metastore upgrade scripts, change the underlying storage tyopes to respective large types, but have JDO map them to String, not Clob. On my testing with PG, this works correctly on all cases I tested (my repro, your large serde DDL from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12274&quot; title=&quot;Increase width of columns used for general configuration in the metastore.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12274&quot;&gt;&lt;del&gt;HIVE-12274&lt;/del&gt;&lt;/a&gt;), and should handle upgrade correctly. But I did not test this with other metastore engines, Oracle, MySQL etc.&lt;/p&gt;</comment>
                            <comment id="16039623" author="ngangam" created="Tue, 6 Jun 2017 20:56:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; I have had a chance to test with VARCHAR in the JDO mappings file with Oracle, Postgres and Derby. Seems to be working without any issues.&lt;br/&gt;
I am uploading the patch with the changes. Could you please review it when you get a chance? Thanks&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2017-06-06T15:50:41,716 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 280.51028ms + 0.084425ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; join &lt;span class=&quot;code-quote&quot;&gt;&quot;TBLS&quot;&lt;/span&gt; on &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_ID&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;TBLS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_ID&quot;&lt;/span&gt;     and &lt;span class=&quot;code-quote&quot;&gt;&quot;TBLS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;TBL_NAME&quot;&lt;/span&gt; = ?   &lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt; join &lt;span class=&quot;code-quote&quot;&gt;&quot;DBS&quot;&lt;/span&gt; on &lt;span class=&quot;code-quote&quot;&gt;&quot;TBLS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;DB_ID&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;DBS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;DB_ID&quot;&lt;/span&gt;      and &lt;span class=&quot;code-quote&quot;&gt;&quot;DBS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;NAME&quot;&lt;/span&gt; = ? ]
2017-06-06T15:50:41,858 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 141.674264ms + 0.379869ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SERDES&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;SERDE_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;CREATE_TIME&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;LAST_ACCESS_TIME&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;INPUT_FORMAT&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;IS_COMPRESSED&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;IS_STOREDASSUBDIRECTORIES&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;LOCATION&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;NUM_BUCKETS&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;OUTPUT_FORMAT&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SERDES&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;NAME&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SERDES&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;SLIB&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;  left &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; join &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt; on &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITIONS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt;   left &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; join &lt;span class=&quot;code-quote&quot;&gt;&quot;SERDES&quot;&lt;/span&gt; on &lt;span class=&quot;code-quote&quot;&gt;&quot;SDS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;SERDE_ID&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;SERDES&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;SERDE_ID&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt; in (1) order by &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_NAME&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,002 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 142.592725ms + 0.294649ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_KEY&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_VALUE&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITION_PARAMS&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt; in (1) and &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_KEY&quot;&lt;/span&gt; is not &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; order by &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,142 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 139.308419ms + 0.229592ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_KEY_VAL&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;PARTITION_KEY_VALS&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt; in (1) and &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; &amp;gt;= 0 order by &lt;span class=&quot;code-quote&quot;&gt;&quot;PART_ID&quot;&lt;/span&gt; asc, &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,281 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 139.136081ms + 0.092378ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_KEY&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_VALUE&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_PARAMS&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; in (2) and &lt;span class=&quot;code-quote&quot;&gt;&quot;PARAM_KEY&quot;&lt;/span&gt; is not &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; order by &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,423 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 141.601391ms + 0.08076ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMN_NAME&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SORT_COLS&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;ORDER&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;SORT_COLS&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; in (2) and &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; &amp;gt;= 0 order by &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; asc, &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,564 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 140.216113ms + 0.114448ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;BUCKET_COL_NAME&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;BUCKETING_COLS&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; in (2) and &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; &amp;gt;= 0 order by &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; asc, &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,703 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 139.086542ms + 0.094296ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SKEWED_COL_NAME&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;SKEWED_COL_NAMES&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; in (2) and &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; &amp;gt;= 0 order by &lt;span class=&quot;code-quote&quot;&gt;&quot;SD_ID&quot;&lt;/span&gt; asc, &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,847 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 142.786353ms + 0.433393ms, the query is [select &lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;COMMENT&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMN_NAME&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;TYPE_NAME&quot;&lt;/span&gt; from &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2&quot;&lt;/span&gt; where &lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt; in (1) and &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; &amp;gt;= 0 order by &lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt; asc, &lt;span class=&quot;code-quote&quot;&gt;&quot;INTEGER_IDX&quot;&lt;/span&gt; asc]
2017-06-06T15:50:42,990 DEBUG [pool-7-thread-4] metastore.MetaStoreDirectSql: Direct SQL query in 142.115654m
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16039922" author="hiveqa" created="Wed, 7 Jun 2017 00:34:38 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12871687/HIVE-16667.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12871687/HIVE-16667.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 264 failed/errored test(s), 6622 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestAccumuloCliDriver.testCliDriver[accumulo_index] (batchId=228)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=237)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=1)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=10)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=11)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=12)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=13)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=14)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=15)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=16)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=17)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=18)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=19)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=2)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=20)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=21)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=22)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=23)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=24)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=25)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=26)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=27)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=28)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=29)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=3)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=30)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=31)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=32)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=33)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=34)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=35)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=36)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=37)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=38)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=39)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=4)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=40)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=41)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=42)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=43)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=44)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=45)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=46)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=47)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=48)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=49)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=5)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=50)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=51)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=52)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=53)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=54)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=55)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=56)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=57)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=58)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=59)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=6)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=60)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=61)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=62)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=63)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=64)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=65)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=66)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=67)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=68)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=69)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=7)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=70)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=71)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=72)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=73)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=74)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=75)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=76)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=77)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=79)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=8)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=80)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=81)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=82)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=83)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=84)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=85)
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver (batchId=9)
org.apache.hadoop.hive.cli.TestCompareCliDriver.org.apache.hadoop.hive.cli.TestCompareCliDriver (batchId=233)
org.apache.hadoop.hive.cli.TestContribCliDriver.testCliDriver[serde_s3] (batchId=231)
org.apache.hadoop.hive.cli.TestContribNegativeCliDriver.org.apache.hadoop.hive.cli.TestContribNegativeCliDriver (batchId=234)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=142)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapCliDriver (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=144)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=146)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=147)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=148)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=149)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=152)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=153)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=154)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=155)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=156)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=157)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=158)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=159)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=160)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver (batchId=161)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=167)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=168)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver (batchId=169)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=98)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver (batchId=99)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=88)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=89)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.org.apache.hadoop.hive.cli.TestNegativeCliDriver (batchId=90)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query78] (batchId=232)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=102)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=104)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=105)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=107)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=108)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=109)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=110)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=111)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=112)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=113)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=114)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=116)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=117)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=118)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=120)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=122)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=123)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=124)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=125)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=126)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=127)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=128)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=129)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=130)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=131)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=132)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=133)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=134)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=135)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=136)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=137)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=138)
org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver.org.apache.hadoop.hive.cli.TestSparkNegativeCliDriver (batchId=239)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[ambiguous_join_col] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[duplicate_alias] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[garbage] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[insert_wrong_number_columns] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_create_table] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_dot] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_function_param2] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_index] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[invalid_select] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[macro_reserved_word] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[missing_overwrite] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[nonkey_groupby] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[quoted_string] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column1] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column2] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column3] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column4] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column5] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_column6] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function1] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function2] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function3] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_function4] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table1] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[unknown_table2] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct1] (batchId=236)
org.apache.hadoop.hive.ql.parse.TestParseNegativeDriver.testCliDriver[wrong_distinct2] (batchId=236)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testColumnarStorePushdown (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testColumnarStorePushdown2 (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testConvertBooleanToInt (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testDatePartitionPushUp (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testGetInputBytes (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testProjectionsBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testReadDataBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testReadDataPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testReadMissingPartitionBasicNeg (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testReadPartitionedBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testSchemaLoadBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testSchemaLoadComplex (batchId=180)
org.apache.hive.hcatalog.pig.TestAvroHCatLoader.testSchemaLoadPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testColumnarStorePushdown (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testColumnarStorePushdown2 (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testConvertBooleanToInt (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testDatePartitionPushUp (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testGetInputBytes (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testProjectionsBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadMissingPartitionBasicNeg (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadPartitionedBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testSchemaLoadBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testSchemaLoadComplex (batchId=180)
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testSchemaLoadPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestParquetHCatLoader.testColumnarStorePushdown (batchId=180)
org.apache.hive.hcatalog.pig.TestParquetHCatLoader.testConvertBooleanToInt (batchId=180)
org.apache.hive.hcatalog.pig.TestParquetHCatLoader.testGetInputBytes (batchId=180)
org.apache.hive.hcatalog.pig.TestParquetHCatLoader.testReadDataPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestParquetHCatLoader.testSchemaLoadBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestParquetHCatLoader.testSchemaLoadComplex (batchId=180)
org.apache.hive.hcatalog.pig.TestParquetHCatLoader.testSchemaLoadPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testColumnarStorePushdown (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testColumnarStorePushdown2 (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testConvertBooleanToInt (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testDatePartitionPushUp (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testGetInputBytes (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testProjectionsBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testReadDataBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testReadDataPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testReadMissingPartitionBasicNeg (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testReadPartitionedBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testSchemaLoadBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testSchemaLoadComplex (batchId=180)
org.apache.hive.hcatalog.pig.TestRCFileHCatLoader.testSchemaLoadPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testColumnarStorePushdown (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testColumnarStorePushdown2 (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testConvertBooleanToInt (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testDatePartitionPushUp (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testGetInputBytes (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testProjectionsBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testReadDataBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testReadDataPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testReadMissingPartitionBasicNeg (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testReadPartitionedBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testSchemaLoadBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testSchemaLoadComplex (batchId=180)
org.apache.hive.hcatalog.pig.TestSequenceFileHCatLoader.testSchemaLoadPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testColumnarStorePushdown (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testColumnarStorePushdown2 (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testConvertBooleanToInt (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testDatePartitionPushUp (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testGetInputBytes (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testProjectionsBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testReadDataBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testReadDataPrimitiveTypes (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testReadMissingPartitionBasicNeg (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testReadPartitionedBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testSchemaLoadBasic (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testSchemaLoadComplex (batchId=180)
org.apache.hive.hcatalog.pig.TestTextFileHCatLoader.testSchemaLoadPrimitiveTypes (batchId=180)
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testDataTypes (batchId=226)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5555/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5555/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5555/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5555/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5555/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5555/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 264 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12871687 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16040097" author="ngangam" created="Wed, 7 Jun 2017 03:27:35 +0000"  >&lt;p&gt;The unit test failures are related to the patch. I had not specified VARCHAR length in the mapping hoping the datanucleus would map it max length permitted for &lt;tt&gt;java.lang.String&lt;/tt&gt;. Based on the error message in the test failures &lt;tt&gt;Caused by: java.sql.SQLDataException: A truncation error was encountered trying to shrink VARCHAR &apos;{&quot;BASIC_STATS&quot;:&quot;true&quot;,&quot;COLUMN_STATS&quot;:{&quot;c_bigint&quot;:&quot;true&quot;,&quot;c_b&amp;amp;&apos; to length 255&lt;/tt&gt;&lt;br/&gt;
it appears that it is attempting to limit to 255 which is too short. I then tried testing with max length which also caused problems with DERBY as it has a checks the lengh&lt;br/&gt;
&lt;a href=&quot;https://fossies.org/dox/db-derby-10.13.1.1-src/interfaceorg_1_1apache_1_1derby_1_1iapi_1_1reference_1_1Limits.html#a4e223303a7751ae27dfdd8e62e993588&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://fossies.org/dox/db-derby-10.13.1.1-src/interfaceorg_1_1apache_1_1derby_1_1iapi_1_1reference_1_1Limits.html#a4e223303a7751ae27dfdd8e62e993588&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;So for I think we are kinda limited to ~32k for max value. As this is an improvement compared to where we were at and only a limitation for derby, we should use this value for this release and fix the postgres issue in the next release.&lt;/p&gt;

&lt;p&gt;I am uploading a patch with a length in the JDO mapping file. &lt;/p&gt;</comment>
                            <comment id="16040454" author="hiveqa" created="Wed, 7 Jun 2017 08:03:26 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12871754/HIVE-16667.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12871754/HIVE-16667.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10820 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query78] (batchId=232)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5563/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5563/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5563/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5563/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5563/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5563/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12871754 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16041374" author="ngangam" created="Wed, 7 Jun 2017 18:26:13 +0000"  >&lt;p&gt;These failures do not appear to be related to the patch. The prior build also has these failures. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rusanu&quot; class=&quot;user-hover&quot; rel=&quot;rusanu&quot;&gt;rusanu&lt;/a&gt; Could you please review the patch when you get a chance? Thanks&lt;/p&gt;</comment>
                            <comment id="16041390" author="rusanu" created="Wed, 7 Jun 2017 18:37:26 +0000"  >&lt;p&gt;LGTM&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="16045481" author="rusanu" created="Sat, 10 Jun 2017 09:59:39 +0000"  >&lt;p&gt;Fixed with &lt;a href=&quot;https://git1-us-west.apache.org/repos/asf?p=hive.git;a=commit;h=5861b6af52839794c18f5aa686c24aabdb737b93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git1-us-west.apache.org/repos/asf?p=hive.git;a=commit;h=5861b6af52839794c18f5aa686c24aabdb737b93&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Note that any PostgreSQL metastore DB created between &lt;tt&gt;b3462503ec6cc6aebb375c30d9295e59411a4ea7&lt;/tt&gt; and &lt;tt&gt;5861b6af52839794c18f5aa686c24aabdb737b93&lt;/tt&gt; will have to be recreated as it contains invalid values (IDs). &lt;/p&gt;</comment>
                            <comment id="16045845" author="lefty@hortonworks.com" created="Sun, 11 Jun 2017 06:02:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;, you committed this to branch-2.3 as well as master, so the fix version should include 2.3.0.  (Are you also going to commit it to branch-2 for 2.4.0+?)&lt;/p&gt;

&lt;p&gt;See commit 8563794b4e7f4175773a70af4145032dfcc6454e.&lt;/p&gt;</comment>
                            <comment id="16046583" author="ngangam" created="Mon, 12 Jun 2017 13:53:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; I intend to commit this to branch-2 as well for 2.3. I have seeing build issues with branch-2 which I have been able to resolve. I will commit it today. Thanks&lt;/p&gt;</comment>
                            <comment id="16047444" author="lefty@hortonworks.com" created="Tue, 13 Jun 2017 05:34:53 +0000"  >&lt;p&gt;Thanks Naveen, and sorry for pestering you.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16486365" author="vgarg" created="Wed, 23 May 2018 00:00:20 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12908275">HIVE-12274</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12871687" name="HIVE-16667.2.patch" size="2222" author="ngangam" created="Tue, 6 Jun 2017 20:57:34 +0000"/>
                            <attachment id="12871754" name="HIVE-16667.3.patch" size="2098" author="ngangam" created="Wed, 7 Jun 2017 03:28:13 +0000"/>
                            <attachment id="12869329" name="HIVE-16667.patch" size="2672" author="ngangam" created="Mon, 22 May 2017 20:55:33 +0000"/>
                            <attachment id="12868612" name="HiveCLIOutput.txt" size="100705" author="ngangam" created="Wed, 17 May 2017 21:55:04 +0000"/>
                            <attachment id="12868613" name="PostgresDBOutput.txt" size="3043" author="ngangam" created="Wed, 17 May 2017 21:55:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ezcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>