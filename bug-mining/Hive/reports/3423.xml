<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:32:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10140] Window boundary is not compared correctly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10140</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&#8220;ROWS between 10 preceding and 2 preceding&#8221; is not handled correctly.&lt;/p&gt;

&lt;p&gt;Underlying error: Window range invalid, start boundary is greater than end boundary: window(start=range(10 PRECEDING), end=range(2 PRECEDING))&lt;/p&gt;

&lt;p&gt;If I change it to &#8220;2 preceding and 10 preceding&#8221;, the syntax works but the results are 0 of course.&lt;/p&gt;


&lt;p&gt;Reason for the function: during analysis, it is sometimes desired to design the window to filter the most recent events, in the case of the events&apos; responses are not available yet. There is a workaround for this, but it is better/more proper to fix the bug. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12786762">HIVE-10140</key>
            <summary>Window boundary is not compared correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aihuaxu">Aihua Xu</assignee>
                                    <reporter username="zhangyii">Yi Zhang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Mar 2015 16:02:33 +0000</created>
                <updated>Tue, 16 Feb 2016 23:52:09 +0000</updated>
                            <resolved>Tue, 5 May 2015 17:04:49 +0000</resolved>
                                    <version>0.13.0</version>
                    <version>0.14.0</version>
                    <version>1.0.0</version>
                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>PTF-Windowing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14518017" author="aihuaxu" created="Tue, 28 Apr 2015 20:49:03 +0000"  >&lt;p&gt;Let me take a look. &lt;/p&gt;</comment>
                            <comment id="14521531" author="aihuaxu" created="Thu, 30 Apr 2015 14:05:47 +0000"  >&lt;p&gt;Yes, we have some issues in there. It should work like the oracle analytic windows functions as follows.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions004.htm#SQLRF06174&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/cd/E11882_01/server.112/e41084/functions004.htm#SQLRF06174&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://www.orafaq.com/node/55&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.orafaq.com/node/55&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14521651" author="aihuaxu" created="Thu, 30 Apr 2015 15:28:21 +0000"  >&lt;p&gt;We should fix this before &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10555&quot; title=&quot;Improve windowing spec of range based windowing to support additional range formats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10555&quot;&gt;&lt;del&gt;HIVE-10555&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14521800" author="aihuaxu" created="Thu, 30 Apr 2015 16:46:13 +0000"  >&lt;p&gt;When it&apos;s preceding, valid boundary should be &quot;between 2 preceding and 1 preceding&quot;. &lt;/p&gt;

&lt;p&gt;The result for preceding window before was wrong. I will correct that in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10555&quot; title=&quot;Improve windowing spec of range based windowing to support additional range formats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10555&quot;&gt;&lt;del&gt;HIVE-10555&lt;/del&gt;&lt;/a&gt;. So the unit test result actually was incorrect, just want to show we support such range.&lt;/p&gt;</comment>
                            <comment id="14523238" author="hiveqa" created="Fri, 1 May 2015 14:19:52 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12729525/HIVE-10140.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12729525/HIVE-10140.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 8881 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_histogram_numeric
org.apache.hive.jdbc.TestSSL.testSSLConnectionWithProperty
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3681/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3681/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3681/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3681/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3681/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3681/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12729525 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14523257" author="aihuaxu" created="Fri, 1 May 2015 14:33:28 +0000"  >&lt;p&gt;The unit tests are not related to the change.&lt;/p&gt;</comment>
                            <comment id="14523261" author="aihuaxu" created="Fri, 1 May 2015 14:39:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; Can you help review the change? The change is to make the supported window boundary to &quot;between 10 preceding and 2 preceding&quot;. I notice window boundary with &quot;preceding&quot; only doesn&apos;t work properly and will fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10555&quot; title=&quot;Improve windowing spec of range based windowing to support additional range formats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10555&quot;&gt;&lt;del&gt;HIVE-10555&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14523700" author="ashutoshc" created="Fri, 1 May 2015 19:00:46 +0000"  >&lt;p&gt;You are right. In existing Hive implementation we got it backwards. Patch looks good except for one thing. If I am reading the oracle documentation you pointed correctly, than for either of &lt;tt&gt;ROWS between 10 preceding and 2 preceding&lt;/tt&gt; or &lt;tt&gt;ROWS between 2 preceding and 10 preceding&lt;/tt&gt; your patch will treat them as &lt;tt&gt;ROWS between 10 preceding and 2 preceding&lt;/tt&gt;, whereas oracle seems to consider &lt;tt&gt;ROWS between 2 preceding and 10 preceding&lt;/tt&gt; as illegal expression and throws error of similar effect which Hive was throwing (although for opposite case).&lt;/p&gt;</comment>
                            <comment id="14523705" author="ashutoshc" created="Fri, 1 May 2015 19:02:20 +0000"  >&lt;p&gt;It will be great if you can test these cases with oracle and/or postgres and check whats their behavior for such queries.&lt;/p&gt;</comment>
                            <comment id="14523751" author="aihuaxu" created="Fri, 1 May 2015 19:20:13 +0000"  >&lt;p&gt;In my patch, &lt;tt&gt;ROWS between 2 preceding and 10 preceding&lt;/tt&gt; will be treated as illegal expression as well. &lt;/p&gt;</comment>
                            <comment id="14523754" author="aihuaxu" created="Fri, 1 May 2015 19:22:13 +0000"  >&lt;p&gt;&lt;tt&gt;Window range invalid, start boundary is greater than end boundary: window(start=range(2 PRECEDING), end=range(10 PRECEDING))&lt;/tt&gt; error will be thrown. &lt;/p&gt;</comment>
                            <comment id="14523756" author="aihuaxu" created="Fri, 1 May 2015 19:24:04 +0000"  >&lt;p&gt;Yes. I verified against Oracle. Trying to follow what Oracle has. Seems what Oracle has makes sense and more straightforward.&lt;/p&gt;</comment>
                            <comment id="14523952" author="ashutoshc" created="Fri, 1 May 2015 21:09:09 +0000"  >&lt;p&gt;Ok.. Thanks for testing this out. +1&lt;/p&gt;</comment>
                            <comment id="14528804" author="ashutoshc" created="Tue, 5 May 2015 17:04:49 +0000"  >&lt;p&gt;Committed to master. Thanks, Aihua!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="12826329">HIVE-10555</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12729525" name="HIVE-10140.patch" size="5493" author="aihuaxu" created="Thu, 30 Apr 2015 16:41:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27jpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>