<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:48:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-15061] Metastore types are sometimes case sensitive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15061</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Impala recently encountered an issue with the metastore (&lt;a href=&quot;https://issues.cloudera.org/browse/IMPALA-4260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;IMPALA-4260&lt;/a&gt; ) where column stats would get dropped when adding a column to a table.&lt;/p&gt;

&lt;p&gt;The reason seems to be that Hive does a case sensitive check on the column stats types during an &quot;alter table&quot; and expects the types to be all lower case. This case sensitive check doesn&apos;t appear to happen when the stats are set in the first place.&lt;/p&gt;

&lt;p&gt;We&apos;re solving this on the Impala end by storing types in the metastore as all lower case, but Hive&apos;s behavior here is very confusing. It should either always be case sensitive, so that you can&apos;t create column stats with types that Hive considers invalid, or it should never be case sensitive.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015254">HIVE-15061</key>
            <summary>Metastore types are sometimes case sensitive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctang">Chaoyu Tang</assignee>
                                    <reporter username="twmarshall">Thomas Tauber-Marshall</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2016 22:12:45 +0000</created>
                <updated>Thu, 8 Dec 2016 14:10:05 +0000</updated>
                            <resolved>Mon, 31 Oct 2016 21:09:22 +0000</resolved>
                                    <version>1.1.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>API</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15608633" author="ctang.ma" created="Wed, 26 Oct 2016 14:34:22 +0000"  >&lt;p&gt;I can take a look.&lt;/p&gt;</comment>
                            <comment id="15609006" author="ctang.ma" created="Wed, 26 Oct 2016 16:57:56 +0000"  >&lt;p&gt;In Hive alter table, both column name and type in the newTable object have been converted to lower case before it is passed to HMS APIs, therefore there won&apos;t be the case sensitive issues as seen in Impala. Impala might do the same way as Hive to work around this issue (which seems Impala is doing), or we might seek a way to validate column names/types and do the case conversion in HMS alter table.&lt;/p&gt;</comment>
                            <comment id="15609998" author="ctang.ma" created="Wed, 26 Oct 2016 23:13:06 +0000"  >&lt;p&gt;This patch is to fix the following issues:&lt;br/&gt;
1. alterTableUpdateTableColumnStats and updatePartColumnStatsForAlterColumns did not ignore the case when they compare the columns to determine if their stats should be updated or deleted&lt;br/&gt;
2. update_table_column_statistics/update_partition_column_statistics allow the uppercase column type to be populated to HMS backend DB&lt;/p&gt;</comment>
                            <comment id="15610000" author="ctang.ma" created="Wed, 26 Oct 2016 23:14:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;aihuaxu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohitsabharwal&quot; class=&quot;user-hover&quot; rel=&quot;mohitsabharwal&quot;&gt;mohitsabharwal&lt;/a&gt;, could you review the patch since you have done something related. Thanks&lt;/p&gt;</comment>
                            <comment id="15610425" author="hiveqa" created="Thu, 27 Oct 2016 02:44:07 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835429/HIVE-15061.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835429/HIVE-15061.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 10621 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[parquet_columnar] (batchId=6)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[parquet_create] (batchId=78)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[parquet_table_with_subschema] (batchId=9)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_complex_all] (batchId=54)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[orc_create] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_complex_all] (batchId=146)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
org.apache.hive.hcatalog.pig.TestHCatLoaderComplexSchema.testSyntheticComplexSchema[1] (batchId=170)
org.apache.hive.hcatalog.pig.TestTextFileHCatStorer.testWriteVarchar (batchId=170)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1834/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1834/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1834/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1834/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1834/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1834/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835429 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15615483" author="ctang.ma" created="Fri, 28 Oct 2016 13:55:46 +0000"  >&lt;p&gt;Reattached patch to trigger the precommit test&lt;/p&gt;</comment>
                            <comment id="15617092" author="hiveqa" created="Sat, 29 Oct 2016 00:50:38 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835876/HIVE-15061.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835876/HIVE-15061.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 10626 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.druid.TestHiveDruidQueryBasedInputFormat.testCreateSplitsIntervals (batchId=229)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1871/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1871/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1871/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1871/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1871/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1871/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835876 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15622176" author="ctang.ma" created="Mon, 31 Oct 2016 13:39:09 +0000"  >&lt;p&gt;The failed test seems not related to the patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;aihuaxu&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohitsabharwal&quot; class=&quot;user-hover&quot; rel=&quot;mohitsabharwal&quot;&gt;mohitsabharwal&lt;/a&gt; could you review it, thanks.&lt;/p&gt;</comment>
                            <comment id="15622361" author="mohitsabharwal" created="Mon, 31 Oct 2016 14:51:08 +0000"  >&lt;p&gt;LGTM +1&lt;/p&gt;

&lt;p&gt;(I double-checked other places where coltypes are set&lt;br/&gt;
like StatObjectConverter - found that we are converting&lt;br/&gt;
to lower case there already)&lt;/p&gt;</comment>
                            <comment id="15623428" author="ctang.ma" created="Mon, 31 Oct 2016 21:09:22 +0000"  >&lt;p&gt;Committed to 2.2.0 and 2.1.1. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohitsabharwal&quot; class=&quot;user-hover&quot; rel=&quot;mohitsabharwal&quot;&gt;mohitsabharwal&lt;/a&gt; for reviewing the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12835876" name="HIVE-15061.1.patch" size="2518" author="ctang" created="Fri, 28 Oct 2016 20:05:32 +0000"/>
                            <attachment id="12835607" name="HIVE-15061.1.patch" size="2518" author="ctang" created="Thu, 27 Oct 2016 15:23:08 +0000"/>
                            <attachment id="12835429" name="HIVE-15061.patch" size="3658" author="ctang" created="Wed, 26 Oct 2016 23:13:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35e3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>