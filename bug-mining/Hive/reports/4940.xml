<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:48:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7224] Set incremental printing to true by default in Beeline</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7224</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7221&quot; title=&quot;Beeline buffers the entire output file in memory before writing to stdout&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7221&quot;&gt;&lt;del&gt;HIVE-7221&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;By default beeline tries to buffer the entire output relation before printing it on stdout. This can cause OOM when the output relation is large. However, beeline has the option of incremental prints. We should keep that as the default.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12720910">HIVE-7224</key>
            <summary>Set incremental printing to true by default in Beeline</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stakiar">Sahil Takiar</assignee>
                                    <reporter username="vgumashta">Vaibhav Gumashta</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jun 2014 16:56:51 +0000</created>
                <updated>Sun, 7 May 2017 18:47:37 +0000</updated>
                            <resolved>Tue, 27 Sep 2016 22:43:19 +0000</resolved>
                                    <version>0.13.0</version>
                    <version>1.0.0</version>
                    <version>1.1.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>Beeline</component>
                    <component>Clients</component>
                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>14</watches>
                                                                                                                                                            <comments>
                            <comment id="14029421" author="vgumashta" created="Thu, 12 Jun 2014 17:09:00 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14030092" author="lefty@hortonworks.com" created="Fri, 13 Jun 2014 00:25:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vaibhavgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vaibhavgumashta&quot;&gt;vaibhavgumashta&lt;/a&gt;, thanks for documenting &quot;--incremental&quot; in the wiki.  We can add the default with version information after this jira commits.&lt;/p&gt;

&lt;p&gt;Do you have time to deal with other Beeline doc issues that I raised in a comment on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6173&quot; title=&quot;Beeline doesn&amp;#39;t accept --hiveconf option as Hive CLI does&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6173&quot;&gt;&lt;del&gt;HIVE-6173&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HiveServer2 Clients:  Beeline Command Options (--incremental) &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6173?focusedCommentId=13888556&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13888556&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HIVE-6173 comment:  Beeline doc issues &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14030414" author="hiveqa" created="Fri, 13 Jun 2014 09:18:04 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12650083/HIVE-7224.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12650083/HIVE-7224.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5535 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.beeline.TestBeeLineWithArgs.testNullEmpty
org.apache.hive.beeline.TestBeeLineWithArgs.testNullEmptyCmdArg
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.hcatalog.templeton.tool.TestTempletonUtils.testPropertiesParsing
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/453/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/453/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/453/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/453/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-453/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-453/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12650083&lt;/p&gt;</comment>
                            <comment id="14031434" author="thejas" created="Sat, 14 Jun 2014 03:28:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; It looks like the way the column sizes are estimated is different in case of incremental and buffered mode. In case of incremental mode, it seems to look at the ResultSetMetadata.getColumnDisplaySize to estimate how much width is to be given for each column. Can you check how different the formatting is with these two modes ?&lt;/p&gt;</comment>
                            <comment id="14031435" author="thejas" created="Sat, 14 Jun 2014 03:29:04 +0000"  >&lt;p&gt;I am more concerned about the column width used because the table output format tends to truncate results . See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6928&quot; title=&quot;Beeline should not chop off &amp;quot;describe extended&amp;quot; results by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6928&quot;&gt;&lt;del&gt;HIVE-6928&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14031645" author="vgumashta" created="Sat, 14 Jun 2014 18:21:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; Sure, let me look at that. If that is the case, I think we should have it consistent for both incremental/non-incremental fetches.&lt;/p&gt;

&lt;p&gt;On the column truncation issue, I think we should not truncate columns by default. What do you think?&lt;/p&gt;</comment>
                            <comment id="14031708" author="thejas" created="Sat, 14 Jun 2014 21:36:46 +0000"  >&lt;blockquote&gt;&lt;p&gt;On the column truncation issue, I think we should not truncate columns by default. What do you think?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree, truncation is bad. That is the opinion I express in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6928&quot; title=&quot;Beeline should not chop off &amp;quot;describe extended&amp;quot; results by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6928&quot;&gt;&lt;del&gt;HIVE-6928&lt;/del&gt;&lt;/a&gt; also.&lt;/p&gt;</comment>
                            <comment id="14066639" author="xingwen" created="Fri, 18 Jul 2014 17:59:41 +0000"  >&lt;p&gt;We would like to report that &quot;--incremental=true&quot; in Beeline is not compatible with Binary columns (at least for queries like  &quot;select * from some_table_with_a_binary_column limit 10;&quot;). The error trace we got was:&lt;br/&gt;
Error: Invalid column type: -2 (state=,code=0)&lt;br/&gt;
java.sql.SQLException: Invalid column type: -2&lt;br/&gt;
at org.apache.hive.jdbc.JdbcColumn.columnDisplaySize(JdbcColumn.java:94)&lt;br/&gt;
at org.apache.hive.jdbc.HiveResultSetMetaData.getColumnDisplaySize(HiveResultSetMetaData.java:60)&lt;br/&gt;
at org.apache.hive.beeline.IncrementalRows.&amp;lt;init&amp;gt;(IncrementalRows.java:55)&lt;br/&gt;
at org.apache.hive.beeline.BeeLine.print(BeeLine.java:1570)&lt;br/&gt;
at org.apache.hive.beeline.Commands.execute(Commands.java:745)&lt;br/&gt;
at org.apache.hive.beeline.Commands.sql(Commands.java:657)&lt;br/&gt;
at org.apache.hive.beeline.BeeLine.dispatch(BeeLine.java:794)&lt;br/&gt;
at org.apache.hive.beeline.BeeLine.begin(BeeLine.java:661)&lt;br/&gt;
at org.apache.hive.beeline.BeeLine.mainWithInputRedirection(BeeLine.java:366)&lt;br/&gt;
at org.apache.hive.beeline.BeeLine.main(BeeLine.java:349)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.util.RunJar.main(RunJar.java:208)&lt;/p&gt;

&lt;p&gt;The error was gone when we reverted back to &quot; &quot;--incremental=false&quot;.&lt;/p&gt;

&lt;p&gt;BTW: we are using Hive 0.12.&lt;/p&gt;</comment>
                            <comment id="14066688" author="thejas" created="Fri, 18 Jul 2014 18:24:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xingwen&quot; class=&quot;user-hover&quot; rel=&quot;xingwen&quot;&gt;xingwen&lt;/a&gt; Thanks for the information. Looks like we have another issue to be fixed here. Please open another jira to track this if you can.&lt;/p&gt;</comment>
                            <comment id="14066886" author="xingwen" created="Fri, 18 Jul 2014 21:13:09 +0000"  >&lt;p&gt;Ticket file. See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7448&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-7448&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14281532" author="qwertymaniac" created="Sat, 17 Jan 2015 20:46:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7448&quot; title=&quot;--incremental=true in Beeline is not compatible with Binary columns (at least for select * from ...)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7448&quot;&gt;&lt;del&gt;HIVE-7448&lt;/del&gt;&lt;/a&gt; is resolved in 0.13 via &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3611&quot; title=&quot;Hive JDBC doesn&amp;#39;t support BINARY column&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3611&quot;&gt;&lt;del&gt;HIVE-3611&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Can this patch go in? I got no review authority, but the patch change appears good enough to me.&lt;/p&gt;

&lt;p&gt;(Except the unwanted changes such as whitespace fixes, which should ideally just be done across all the source files with a direct, single commit than by polluting random commits with such changes &amp;#8211; but thats just IMHO).&lt;/p&gt;</comment>
                            <comment id="14535996" author="sushanth" created="Sat, 9 May 2015 00:11:33 +0000"  >&lt;p&gt;Removing fix version of 1.2.0 in preparation of release, since this is not a blocker for 1.2.0.&lt;/p&gt;</comment>
                            <comment id="14681110" author="thejas" created="Tue, 11 Aug 2015 02:08:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; can you please rebase ?&lt;/p&gt;</comment>
                            <comment id="14694158" author="vgumashta" created="Wed, 12 Aug 2015 20:59:52 +0000"  >&lt;p&gt;Rebased patch.&lt;/p&gt;</comment>
                            <comment id="14694553" author="hiveqa" created="Thu, 13 Aug 2015 02:03:08 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12750158/HIVE-7224.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12750158/HIVE-7224.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 13 failed/errored test(s), 9348 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.beeline.TestBeeLineWithArgs.testCSV2OutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testCSVOutput
org.apache.hive.beeline.TestBeeLineWithArgs.testCSVOutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testDSVOutput
org.apache.hive.beeline.TestBeeLineWithArgs.testDSVOutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testNullEmpty
org.apache.hive.beeline.TestBeeLineWithArgs.testNullEmptyCmdArg
org.apache.hive.beeline.TestBeeLineWithArgs.testTSV2Output
org.apache.hive.beeline.TestBeeLineWithArgs.testTSV2OutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testTSVOutput
org.apache.hive.beeline.TestBeeLineWithArgs.testTSVOutputWithDoubleQuotes
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testSparkQuery
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testTempTable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4941/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4941/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4941/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4941/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4941/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4941/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 13 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12750158 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14741319" author="xuefuz" created="Fri, 11 Sep 2015 18:36:51 +0000"  >&lt;p&gt;Reattached the same patch to trigger precommit test run.&lt;/p&gt;</comment>
                            <comment id="14742077" author="hiveqa" created="Sat, 12 Sep 2015 14:55:37 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12755464/HIVE-7224.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12755464/HIVE-7224.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 14 failed/errored test(s), 9424 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.metastore.txn.TestCompactionTxnHandler.testRevokeTimedOutWorkers
org.apache.hive.beeline.TestBeeLineWithArgs.testCSV2OutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testCSVOutput
org.apache.hive.beeline.TestBeeLineWithArgs.testCSVOutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testDSVOutput
org.apache.hive.beeline.TestBeeLineWithArgs.testDSVOutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testNullEmpty
org.apache.hive.beeline.TestBeeLineWithArgs.testNullEmptyCmdArg
org.apache.hive.beeline.TestBeeLineWithArgs.testTSV2Output
org.apache.hive.beeline.TestBeeLineWithArgs.testTSV2OutputWithDoubleQuotes
org.apache.hive.beeline.TestBeeLineWithArgs.testTSVOutput
org.apache.hive.beeline.TestBeeLineWithArgs.testTSVOutputWithDoubleQuotes
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5255/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5255/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5255/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5255/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5255/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5255/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 14 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12755464 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14791342" author="xuefuz" created="Thu, 17 Sep 2015 00:06:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt;, it looks like that the patch has caused some test failure. Could you please investigate? Thanks.&lt;/p&gt;</comment>
                            <comment id="14791681" author="vgumashta" created="Thu, 17 Sep 2015 07:01:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; Sure, I&apos;ll look into the test failures.&lt;/p&gt;</comment>
                            <comment id="15348880" author="stakiar" created="Fri, 24 Jun 2016 23:33:47 +0000"  >&lt;p&gt;Attaching a new, re-based patch in order to trigger build and see if the test failures are still present.&lt;/p&gt;</comment>
                            <comment id="15348886" author="stakiar" created="Fri, 24 Jun 2016 23:37:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; I wanted to help moving this ticket forward, it seems there were some test failures related to this change. Is it ok if I assign this ticket to myself and start working on resolving the test failures? &lt;/p&gt;</comment>
                            <comment id="15348937" author="vgumashta" created="Sat, 25 Jun 2016 00:18:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;stakiar&lt;/a&gt; Sure, thanks for taking it up.&lt;/p&gt;</comment>
                            <comment id="15358108" author="hiveqa" created="Fri, 1 Jul 2016 00:32:14 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12813155/HIVE-7224.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12813155/HIVE-7224.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 23 failed/errored test(s), 10288 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vector_complex_all
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vector_complex_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.org.apache.hadoop.hive.cli.TestMiniTezCliDriver
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_join1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_sortmerge_join_10
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_simple_select
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_deleteAnalyze
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_metadataonly1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part_all_complex
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_complex_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_decimal_udf
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_groupby6
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_string_concat
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_varchar_mapjoin1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_17
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorization_limit
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_math_funcs
org.apache.hadoop.hive.llap.tezplugins.TestLlapTaskSchedulerService.testDelayedLocalityNodeCommErrorImmediateAllocation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-330/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-330/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 23 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12813155 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15358180" author="stakiar" created="Fri, 1 Jul 2016 01:05:44 +0000"  >&lt;p&gt;None of these test failures seem related to the given change. All Beeline tests are passing.&lt;/p&gt;

&lt;p&gt;The new patch I attached is a rebased version of the previous patch.&lt;/p&gt;

&lt;p&gt;Is there anything else blocking this from being merged?&lt;/p&gt;</comment>
                            <comment id="15359913" author="vgumashta" created="Sat, 2 Jul 2016 01:55:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;stakiar&lt;/a&gt; Thanks a lot for taking this up. In the previous iterations, we&apos;ve had issues with TestBeeLineWithArgs which was failing. From the tests listed here: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/testReport&lt;/a&gt;, doesn&apos;t look like those tests were run. Can you verify?&lt;/p&gt;</comment>
                            <comment id="15359914" author="vgumashta" created="Sat, 2 Jul 2016 01:56:42 +0000"  >&lt;p&gt;Actually it does seem those tests were run and pass now: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/testReport/org.apache.hive.beeline/TestBeeLineWithArgs/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/330/testReport/org.apache.hive.beeline/TestBeeLineWithArgs/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15359920" author="vgumashta" created="Sat, 2 Jul 2016 02:07:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;stakiar&lt;/a&gt; I&apos;ll do some quick manual testing and post my feedback. I think this looks good to go in.&lt;/p&gt;</comment>
                            <comment id="15361610" author="stakiar" created="Mon, 4 Jul 2016 17:13:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt;! Let me know if you need any help with the manual testing.&lt;/p&gt;</comment>
                            <comment id="15362826" author="vgumashta" created="Tue, 5 Jul 2016 17:30:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;stakiar&lt;/a&gt; There seems to be an issue with the column width estimation when incremental printing is enabled by default. An example (output of describe table):&lt;br/&gt;
With incremental true:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;| search_engine   | string          |                 |
| exclude_hit     | string          |                 |
| hier1           | string          |                 |
| hier2           | string          |                 |
| hier3           | string          |                 |
| hier4           | string          |                 |
| hier5           | string          |                 |
| browser         | string          |                 |
| post_browser_height | string          |                 |
| post_browser_width | string          |                 |
| post_cookies    | string          |                 |
| post_java_enabled | string          |                 |
| post_persistent_cookie | string          |                 |
| color           | string          |                 |
| connection_type | string          |                 |
| country         | string          |                 |
| domain          | string          |                 |
| post_t_time_info | string          |                 |
| javascript      | string          |                 |
| language        | string          |                 |
| os              | string          |                 |
| plugins         | string          |                 |
| resolution      | string          |                 |
| last_hit_time_gmt | string          |                 |
| first_hit_time_gmt | string          |                 |
| visit_start_time_gmt | string          |                 |
| last_purchase_time_gmt | string          |                 |
+-----------------+-----------------+-----------------+--+
|    col_name     |    data_type    |     comment     |
+-----------------+-----------------+-----------------+--+
| last_purchase_num | string          |                 |
| first_hit_page_url | string          |                 |
| first_hit_pagename | string          |                 |
| visit_start_page_url | string          |                 |
| visit_start_pagename | string          |                 |
| first_hit_referrer | string          |                 |
| visit_referrer  | string          |                 |
| visit_search_engine | string          |                 |
| visit_num       | string          |                 |
| visit_page_num  | string          |                 |
| prev_page       | string          |                 |
| geo_city        | string          |                 |
| geo_country     | string          |                 |
| geo_region      | string          |                 |
| duplicate_purchase | string          |                 |
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With incremental false:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;| search_engine            | string                |                       |
| exclude_hit              | string                |                       |
| hier1                    | string                |                       |
| hier2                    | string                |                       |
| hier3                    | string                |                       |
| hier4                    | string                |                       |
| hier5                    | string                |                       |
| browser                  | string                |                       |
| post_browser_height      | string                |                       |
| post_browser_width       | string                |                       |
| post_cookies             | string                |                       |
| post_java_enabled        | string                |                       |
| post_persistent_cookie   | string                |                       |
| color                    | string                |                       |
| connection_type          | string                |                       |
| country                  | string                |                       |
| domain                   | string                |                       |
| post_t_time_info         | string                |                       |
| javascript               | string                |                       |
| language                 | string                |                       |
| os                       | string                |                       |
| plugins                  | string                |                       |
| resolution               | string                |                       |
| last_hit_time_gmt        | string                |                       |
| first_hit_time_gmt       | string                |                       |
| visit_start_time_gmt     | string                |                       |
| last_purchase_time_gmt   | string                |                       |
+--------------------------+-----------------------+-----------------------+--+
|         col_name         |       data_type       |        comment        |
+--------------------------+-----------------------+-----------------------+--+
| last_purchase_num        | string                |                       |
| first_hit_page_url       | string                |                       |
| first_hit_pagename       | string                |                       |
| visit_start_page_url     | string                |                       |
| visit_start_pagename     | string                |                       |
| first_hit_referrer       | string                |                       |
| visit_referrer           | string                |                       |
| visit_search_engine      | string                |                       |
| visit_num                | string                |                       |
| visit_page_num           | string                |                       |
| prev_page                | string                |                       |
| geo_city                 | string                |                       |
| geo_country              | string                |                       |
| geo_region               | string                |                       |
| duplicate_purchase       | string                |                       |
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think we&apos;ll need to fix this before we can get this in.&lt;/p&gt;</comment>
                            <comment id="15362947" author="stakiar" created="Tue, 5 Jul 2016 18:27:34 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; I&apos;ll dig into it some more and see what I can find.&lt;/p&gt;</comment>
                            <comment id="15363001" author="stakiar" created="Tue, 5 Jul 2016 18:51:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; is seems the behavior you are seeing is by design. Looking at &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&lt;/a&gt; the following explanation of the &lt;tt&gt;--incremental&lt;/tt&gt; property suggests that this is expected:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Defaults to false. When set to false, the entire result set is fetched and buffered before being displayed, yielding optimal display column sizing. When set to true, result rows are displayed immediately as they are fetched, yielding lower latency and memory usage at the price of extra display column padding. Setting --incremental=true is recommended if you encounter an OutOfMemory on the client side (due to the fetched result set size being large).&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So it seems there is a tradeoff when using &lt;tt&gt;--incremental&lt;/tt&gt; that the column padding won&apos;t be optimal, but memory usage will be better. This makes sense since the &lt;tt&gt;IncrementalRows&lt;/tt&gt; class that controls this logic doesn&apos;t do any buffering of rows, so it cannot predict what the optimal column width should be since it only looks at one row at a time.&lt;/p&gt;

&lt;p&gt;I think a better approach for the &lt;tt&gt;IncrementalRows&lt;/tt&gt; class would be to instead buffer 1000 rows at a time (by default, this value can be configurable), this way it can optimally set the column width for each set of 1000 rows. This shouldn&apos;t introduce memory issues unless each row is huge, in which case the use can decrease the buffer size to say 100 or 10.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="15363091" author="vgumashta" created="Tue, 5 Jul 2016 19:35:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;stakiar&lt;/a&gt; I agree that buffering would improve usability. Would you like to take a shot at it?&lt;/p&gt;</comment>
                            <comment id="15363180" author="thejas" created="Tue, 5 Jul 2016 20:36:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think a better approach for the IncrementalRows class would be to instead buffer 1000 rows at a time (by default, this value can be configurable), this way it can optimally set the column width for each set of 1000 rows.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I think it is better to keep the column width to be consistent across all rows in the output, rather than adjust it every 1000 rows. The purpose of using optimal display size is primarily to make it easier to read. If we change the column width periodically, it doesn&apos;t help with that. Also, if there is some application that assumes the column width remains the same across rows, that might break. &lt;/p&gt;

&lt;p&gt;ie, beeline could buffer only the first 1000 rows and use that to determine the optimal column width, and then output the rest unbuffered. Not having to buffer the remaining rows could also be better for performance.&lt;/p&gt;
</comment>
                            <comment id="15363295" author="stakiar" created="Tue, 5 Jul 2016 21:34:19 +0000"  >&lt;blockquote&gt;
&lt;p&gt;I think it is better to keep the column width to be consistent across all rows in the output, rather than adjust it every 1000 rows.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Thanks for the input &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;! To clarify, what would happen if Beeline uses the first 1000 rows to calculate the width, but then row 1001th is longer than that width. In that case the width would have to be widened for that row, right? I think that is what the current implementation of &lt;tt&gt;--incremental&lt;/tt&gt; is doing.&lt;/p&gt;

&lt;p&gt;I like the idea of keeping the width the same for all rows, even in incremental mode, but I&apos;m not sure how it would work. Thoughts?&lt;/p&gt;</comment>
                            <comment id="15363688" author="thejas" created="Wed, 6 Jul 2016 03:22:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;To clarify, what would happen if Beeline uses the first 1000 rows to calculate the width, but then row 1001th is longer than that width. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;If 1001th row has column larger than the precomputed column width, that particular row would have the column with larger width to accommodate it. This would mean some rows have the separator &quot;|&quot; out of alignment with previous row. However, even if we recompute every 1000 rows, we could still  have misalignment every 1000 rows.&lt;/p&gt;

&lt;p&gt;I looked at where the Row width gets used. The width is getting used only when --outputformat=table (ie TableOutputFormat class) is used .&lt;br/&gt;
If someone is working on very large outputs, it is likely to be processed by other applications and not human eyes, and a *sv (eg csv) format is likely to be used. It doesn&apos;t make any sense waste cpu cycles computing the width in those cases. This is also the case where performance impact of this computation would be more visible.&lt;/p&gt;

&lt;p&gt;ie, If we can selectively enable buffering and width calculation only for TableOutputFormat, I don&apos;t think it would matter if we stick to column width based on first 1000 rows or recompute every 1000 rows.&lt;br/&gt;
Looks like the Row subclasses have access to beeline options and would be able to determine what the output format is.&lt;/p&gt;</comment>
                            <comment id="15364704" author="stakiar" created="Wed, 6 Jul 2016 17:34:29 +0000"  >&lt;p&gt;Thanks for the explanation &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;!&lt;/p&gt;

&lt;p&gt;So if my understanding is correct, one approach would be to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Modify the logic so that the width is only calculated if &lt;tt&gt;TableOutputFormat&lt;/tt&gt; is used
	&lt;ul&gt;
		&lt;li&gt;This will save CPU cycles when the outputformat = a delimiter separated value format&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;Modify &lt;tt&gt;IncrementalRows&lt;/tt&gt; so that it re-calculates the width every 1000 rows
	&lt;ul&gt;
		&lt;li&gt;I think the advantage of doing it every 1000 rows is just for human readability purposes&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Does that sound reasonable to you?&lt;/p&gt;</comment>
                            <comment id="15364739" author="thejas" created="Wed, 6 Jul 2016 17:52:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;stakiar&lt;/a&gt;&lt;br/&gt;
That sounds good to me.&lt;/p&gt;</comment>
                            <comment id="15364745" author="thejas" created="Wed, 6 Jul 2016 17:55:10 +0000"  >&lt;p&gt;You can probably add a method like isWidthFormatted in OutputFormat which TableOutputFormat would then set to true. Then pass the value to the Row constructors.&lt;/p&gt;</comment>
                            <comment id="15364826" author="stakiar" created="Wed, 6 Jul 2016 18:28:52 +0000"  >&lt;p&gt;Sounds good! Thanks for all the suggestions! I just created two sub-tasks to encapsulate this work.&lt;/p&gt;</comment>
                            <comment id="15465960" author="stakiar" created="Mon, 5 Sep 2016 23:32:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; the subtasks we discussed for this JIRA have been resolved. I&apos;ve reattached the patch to see if there are new test failures reported by Hive QA. Assuming there are no test failures, are there any other items needed before merging this change?&lt;/p&gt;</comment>
                            <comment id="15465971" author="hiveqa" created="Mon, 5 Sep 2016 23:42:23 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12827105/HIVE-7224.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12827105/HIVE-7224.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1110/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1110/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1110/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1110/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1110/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1110/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.8.0_25 ]]
+ export JAVA_HOME=/usr/java/jdk1.8.0_25
+ JAVA_HOME=/usr/java/jdk1.8.0_25
+ export PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+ PATH=/usr/java/jdk1.8.0_25/bin/:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-MASTER-Build-1110/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at e870ae1 HIVE-14697: Can not access kerberized HS2 Web UI (Chaoyu Tang, reviewed by Jimmy Xiang)
+ git clean -f -d
Removing ql/src/test/queries/clientpositive/double_precision.q
Removing ql/src/test/results/clientpositive/double_precision.q.out
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at e870ae1 HIVE-14697: Can not access kerberized HS2 Web UI (Chaoyu Tang, reviewed by Jimmy Xiang)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
error: patch failed: beeline/src/java/org/apache/hive/beeline/BeeLineOpts.java:71
error: beeline/src/java/org/apache/hive/beeline/BeeLineOpts.java: patch does not apply
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12827105 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15465989" author="stakiar" created="Mon, 5 Sep 2016 23:57:24 +0000"  >&lt;p&gt;Rebasing patch&lt;/p&gt;</comment>
                            <comment id="15466087" author="hiveqa" created="Tue, 6 Sep 2016 01:17:34 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12827107/HIVE-7224.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12827107/HIVE-7224.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 10443 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestBeeLineWithArgs - did not produce a TEST-*.xml file
TestHiveCli - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.org.apache.hadoop.hive.cli.TestCliDriver
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[vector_join_part_col_char]
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[acid_bucket_pruning]
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1111/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1111/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1111/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/1111/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1111/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-1111/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12827107 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15527624" author="stakiar" created="Tue, 27 Sep 2016 22:36:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt; can this be merged? The change simply sets Beeline&apos;s incremental property to true. There were a few subtasks that needed to be completed before this could be merged, but they are all resolved now.&lt;/p&gt;</comment>
                            <comment id="15527645" author="spena" created="Tue, 27 Sep 2016 22:38:59 +0000"  >&lt;p&gt;Sure.&lt;br/&gt;
+1&lt;/p&gt;

</comment>
                            <comment id="15528498" author="lefty@hortonworks.com" created="Wed, 28 Sep 2016 05:48:09 +0000"  >&lt;p&gt;Doc note:  The change of default for --incremental needs to be documented in the wiki for Hive 2.2.0.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HiveServer2 Clients &amp;#8211; Beeline Command Options &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Added a TODOC2.2 label.&lt;/p&gt;</comment>
                            <comment id="15531225" author="stakiar" created="Wed, 28 Sep 2016 23:29:46 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; could you grant me permission to edit the wiki page? Username is &quot;stakiar&quot;&lt;/p&gt;</comment>
                            <comment id="15532054" author="lefty@hortonworks.com" created="Thu, 29 Sep 2016 07:40:06 +0000"  >&lt;p&gt;Done.  Welcome to the Hive wiki team, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stakiar&quot; class=&quot;user-hover&quot; rel=&quot;stakiar&quot;&gt;stakiar&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15981770" author="stakiar" created="Mon, 24 Apr 2017 19:55:27 +0000"  >&lt;p&gt;This didn&apos;t go into the 2.2 release, seems its going into the 2.3 release. I&apos;ve updated the wiki to reflect this: &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12720766">HIVE-7221</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12728271">HIVE-7448</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12709131">HIVE-6928</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12954799">HIVE-13393</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12650083" name="HIVE-7224.1.patch" size="1337" author="vgumashta" created="Thu, 12 Jun 2014 17:09:00 +0000"/>
                            <attachment id="12755464" name="HIVE-7224.2.patch" size="622" author="xuefuz" created="Fri, 11 Sep 2015 18:36:51 +0000"/>
                            <attachment id="12750158" name="HIVE-7224.2.patch" size="622" author="vgumashta" created="Wed, 12 Aug 2015 20:59:52 +0000"/>
                            <attachment id="12813155" name="HIVE-7224.3.patch" size="614" author="stakiar" created="Fri, 24 Jun 2016 23:33:24 +0000"/>
                            <attachment id="12827105" name="HIVE-7224.4.patch" size="614" author="stakiar" created="Mon, 5 Sep 2016 23:31:25 +0000"/>
                            <attachment id="12827107" name="HIVE-7224.5.patch" size="651" author="stakiar" created="Mon, 5 Sep 2016 23:57:23 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12987240">HIVE-14169</subtask>
                            <subtask id="12987242">HIVE-14170</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399109</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 30 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wpiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>399226</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>