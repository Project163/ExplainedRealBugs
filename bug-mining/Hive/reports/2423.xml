<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:22:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7618] TestDDLWithRemoteMetastoreSecondNamenode unit test failure</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7618</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Looks like TestDDLWithRemoteMetastoreSecondNamenode started failing after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6584&quot; title=&quot;Add HiveHBaseTableSnapshotInputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6584&quot;&gt;&lt;del&gt;HIVE-6584&lt;/del&gt;&lt;/a&gt; was committed.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestDDLWithRemoteMetastoreSecondNamenode.testCreateTableWithIndexAndPartitionsNonDefaultNameNode:272-&amp;gt;createTableAndCheck:201-&amp;gt;createTableAndCheck:219 Table should be located in the second filesystem expected:&amp;lt;[hdfs]&amp;gt; but was:&amp;lt;[pfile]&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12732108">HIVE-7618</key>
            <summary>TestDDLWithRemoteMetastoreSecondNamenode unit test failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdere">Jason Dere</assignee>
                                    <reporter username="jdere">Jason Dere</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Aug 2014 19:25:59 +0000</created>
                <updated>Thu, 13 Nov 2014 19:42:23 +0000</updated>
                            <resolved>Sun, 10 Aug 2014 02:05:51 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14086731" author="jdere" created="Tue, 5 Aug 2014 20:50:55 +0000"  >&lt;p&gt;Reverting one line from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6584&quot; title=&quot;Add HiveHBaseTableSnapshotInputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6584&quot;&gt;&lt;del&gt;HIVE-6584&lt;/del&gt;&lt;/a&gt; seems to allow the test to pass. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;ndimiduk&lt;/a&gt;, would this change affect &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6584&quot; title=&quot;Add HiveHBaseTableSnapshotInputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6584&quot;&gt;&lt;del&gt;HIVE-6584&lt;/del&gt;&lt;/a&gt; at all?&lt;/p&gt;</comment>
                            <comment id="14087080" author="ndimiduk" created="Wed, 6 Aug 2014 01:24:35 +0000"  >&lt;p&gt;This will cause failure in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6584&quot; title=&quot;Add HiveHBaseTableSnapshotInputFormat&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6584&quot;&gt;&lt;del&gt;HIVE-6584&lt;/del&gt;&lt;/a&gt;. Reason being, StorageHandler tables don&apos;t have a location, so this makeLocationQualified constructs locations that don&apos;t exist. IIRC, this resulted in an HBase table being assigned a location in the warehouse, which then confuses other pieces.&lt;/p&gt;</comment>
                            <comment id="14087082" author="ndimiduk" created="Wed, 6 Aug 2014 01:25:16 +0000"  >&lt;p&gt;Can the test be updated to explicitly set a foreign hdfs for its location?&lt;/p&gt;</comment>
                            <comment id="14087698" author="hiveqa" created="Wed, 6 Aug 2014 14:11:13 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12659945/HIVE-7618.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12659945/HIVE-7618.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5877 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_mixed_case
org.apache.hadoop.hive.cli.TestHBaseMinimrCliDriver.testCliDriver_hbase_bulk
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/186/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/186/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/186/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/186/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-186/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-186/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12659945&lt;/p&gt;</comment>
                            <comment id="14088295" author="jdere" created="Wed, 6 Aug 2014 21:30:11 +0000"  >&lt;p&gt;I think the point of the test is that the test case should work properly without explicitly setting the table location. What I think we need here is a way to determine if the StorageHandler needs a location or not. We can either &lt;br/&gt;
1. Add a new method to the StorageHandler interface (needsLocation()?), which we use in place of StorageDescriptor.isSetLocation(). The downside to this would be that this may break any existing 3rd party StorageHandlers, as mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6853&quot; title=&quot;show create table for hbase tables should exclude LOCATION &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6853&quot;&gt;&lt;del&gt;HIVE-6853&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
2. DDLTask already has some HBaseStorageHandler-specific logic in showCreateTable(). We could make this logic into a needsLocation() routine within DDLTask itself, and use it in a similar way as described in (1).&lt;/p&gt;</comment>
                            <comment id="14088340" author="jdere" created="Wed, 6 Aug 2014 21:54:39 +0000"  >&lt;p&gt;Trying out option (2) - attaching patch v2.&lt;/p&gt;</comment>
                            <comment id="14088450" author="ndimiduk" created="Wed, 6 Aug 2014 23:13:15 +0000"  >&lt;p&gt;Option (1) would pave the way for migrating all these baked-in storage systems over to the StorageHandler interface &amp;#8211; a healthy thing for the long-term success of Hive, IMHO. That&apos;s a larger conversation though.&lt;/p&gt;</comment>
                            <comment id="14088453" author="ndimiduk" created="Wed, 6 Aug 2014 23:15:27 +0000"  >&lt;p&gt;Anyway, +1 for your patch v2. It&apos;s 80% of what we&apos;d want for option (1) anyway. Would be best if DDLTask didn&apos;t need that nasty hack.&lt;/p&gt;</comment>
                            <comment id="14088544" author="jdere" created="Thu, 7 Aug 2014 00:51:43 +0000"  >&lt;p&gt;If anyone else wants to chime in on if it&apos;s ok to break compatibility, I&apos;d be willing to try (1). &lt;/p&gt;</comment>
                            <comment id="14088923" author="hiveqa" created="Thu, 7 Aug 2014 07:03:24 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12660244/HIVE-7618.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12660244/HIVE-7618.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 5883 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/201/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/201/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/201/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/201/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-201/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-201/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12660244&lt;/p&gt;</comment>
                            <comment id="14091126" author="sushanth" created="Fri, 8 Aug 2014 18:41:11 +0000"  >&lt;p&gt;+1 on the patch as it currently stands.&lt;/p&gt;

&lt;p&gt;While I am, in theory, in favour of adding this to the SH interface, I think we should hold off on that for now. I would rather open discussion with the hive group at large in re-architecting StorageHandlers in general, trying to do the following:&lt;/p&gt;

&lt;p&gt;a) Deprecation/removal of HiveOutputFormat/HiveRecordWriter in general, in favour of using M/R definitions of the same, and having Committer semantics included.&lt;br/&gt;
b) Rearchitecting/refactoring native Hive storage in a way that makes everything go through the SH interface, rather than having special-casing for SH and native&lt;br/&gt;
c) Support for notion of SH per partition, rather than SH per table&lt;br/&gt;
d) Notion of possible plan modifications by SH for any add-on tasks that are required.&lt;/p&gt;

&lt;p&gt;And if we&apos;re making that many changes, it&apos;s likely that we will break SHs significantly at that time, and I&apos;d rather do it once rather than have a constant stream of breaking.&lt;/p&gt;

&lt;p&gt;I&apos;d like to see us pursue that as a major initiative in the 0.15 timeframe, if possible. I&apos;ll shoot out a mail to the list on that regard.&lt;/p&gt;</comment>
                            <comment id="14091973" author="ashutoshc" created="Sun, 10 Aug 2014 02:05:51 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Jason!&lt;/p&gt;</comment>
                            <comment id="14210748" author="thejas" created="Thu, 13 Nov 2014 19:42:23 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12659945" name="HIVE-7618.1.patch" size="783" author="jdere" created="Tue, 5 Aug 2014 20:50:55 +0000"/>
                            <attachment id="12660244" name="HIVE-7618.2.patch" size="3329" author="jdere" created="Wed, 6 Aug 2014 21:54:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410137</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ykbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>