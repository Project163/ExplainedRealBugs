<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:26:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8518] Compile time skew join optimization returns duplicated results</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8518</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Compile time skew join optimization clones the join operator tree and unions the results.&lt;br/&gt;
The problem here is that we don&apos;t properly insert the predicate for the cloned join (relying on an assert statement).&lt;/p&gt;

&lt;p&gt;To reproduce the issue, run the simple query:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from tbl1 join tbl2 on tbl1.key=tbl2.key;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And suppose there&apos;s some skew in tbl1 (specify skew with CREATE or ALTER statement).&lt;br/&gt;
Duplicated results will be returned if you set hive.optimize.skewjoin.compiletime=true.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12749184">HIVE-8518</key>
            <summary>Compile time skew join optimization returns duplicated results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lirui">Rui Li</assignee>
                                    <reporter username="lirui">Rui Li</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Oct 2014 08:26:27 +0000</created>
                <updated>Mon, 10 Aug 2015 22:33:51 +0000</updated>
                            <resolved>Tue, 21 Oct 2014 17:45:15 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>Logical Optimizer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14176755" author="lirui" created="Mon, 20 Oct 2014 09:33:13 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14176961" author="hiveqa" created="Mon, 20 Oct 2014 15:11:31 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12675794/HIVE-8518.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12675794/HIVE-8518.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6565 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1352/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1352/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1352/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1352/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1352/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1352/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12675794&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PreCommit-HIVE-TRUNK-Build&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14177061" author="xuefuz" created="Mon, 20 Oct 2014 16:15:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ruili&quot; class=&quot;user-hover&quot; rel=&quot;ruili&quot;&gt;ruili&lt;/a&gt;, patch looks good. I&apos;m wondering if it makes sense to add a test case for this. Thanks.&lt;/p&gt;</comment>
                            <comment id="14177807" author="lirui" created="Tue, 21 Oct 2014 01:43:46 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt;, I find there&apos;re already several unit tests for compile time skew join, e.g. skewjoinopt1.q. They all passed the pre-commit test. That makes sense because the assert statement is triggered in UT so the patch here won&apos;t change test results.&lt;/p&gt;</comment>
                            <comment id="14177840" author="xuefuz" created="Tue, 21 Oct 2014 02:16:23 +0000"  >&lt;p&gt;Okay. Thanks for the explanation.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14178719" author="xuefuz" created="Tue, 21 Oct 2014 17:45:15 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks to Rui for the contribution.&lt;/p&gt;</comment>
                            <comment id="14178998" author="xuefuz" created="Tue, 21 Oct 2014 20:17:14 +0000"  >&lt;p&gt;This would be a good candidate for 0.14 also.&lt;/p&gt;</comment>
                            <comment id="14179446" author="lirui" created="Wed, 22 Oct 2014 01:25:27 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; for the review!&lt;br/&gt;
Could you also merge this to spark branch? Thanks!&lt;/p&gt;</comment>
                            <comment id="14179480" author="xuefuz" created="Wed, 22 Oct 2014 02:12:23 +0000"  >&lt;p&gt;I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt; is in the middle of merging trunk to branch. This, in addition to a few other important patches will be included, I assume.&lt;/p&gt;</comment>
                            <comment id="14179483" author="lirui" created="Wed, 22 Oct 2014 02:17:50 +0000"  >&lt;p&gt;OK got it.&lt;/p&gt;</comment>
                            <comment id="14179484" author="brocknoland" created="Wed, 22 Oct 2014 02:18:14 +0000"  >&lt;p&gt;There is some results difference s that I cannot account for. Since I am off the rest of the week I think we should merge any individual fixes we want using &lt;tt&gt;svn merge -c$num ^/hive/trunk&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;I will finish the rest of the merge this weekend.&lt;/p&gt;</comment>
                            <comment id="14179500" author="xuefuz" created="Wed, 22 Oct 2014 02:54:04 +0000"  >&lt;p&gt;Merged. Not sure if I screwed up anything though.&lt;/p&gt;</comment>
                            <comment id="14179517" author="lirui" created="Wed, 22 Oct 2014 03:14:30 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt;! Everything seems fine from the git log.&lt;/p&gt;</comment>
                            <comment id="14179538" author="brocknoland" created="Wed, 22 Oct 2014 03:51:12 +0000"  >&lt;p&gt;lgtm as well. Thank you!!&lt;/p&gt;</comment>
                            <comment id="14680886" author="jdere" created="Mon, 10 Aug 2015 22:33:38 +0000"  >&lt;p&gt;Included this fix to branch-1.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12749434">HIVE-8535</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12675794" name="HIVE-8518.1.patch" size="1264" author="lirui" created="Mon, 20 Oct 2014 09:29:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21chb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>