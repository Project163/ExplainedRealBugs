<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:12:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5506] Hive SPLIT function does not return array correctly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-5506</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hello all, I think I have outlined a bug in the hive split function:&lt;/p&gt;

&lt;p&gt;Summary: When calling split on a string of data, it will only return all array items if the the last array item has a value. For example, if I have a string of text delimited by tab with 7 columns, and the first four are filled, but the last three are blank, split will only return a 4 position array. If  any number of &quot;middle&quot; columns are empty, but the last item still has a value, then it will return the proper number of columns.  This was tested in Hive 0.9 and hive 0.11. &lt;/p&gt;

&lt;p&gt;Data:&lt;br/&gt;
(Note \t represents a tab char, \x09 the line endings should be \n (UNIX style) not sure what email will do to them).  Basically my data is 7 lines of data with the first 7 letters separated by tab.  On some lines I&apos;ve left out certain letters, but kept the number of tabs exactly the same.  &lt;/p&gt;

&lt;p&gt;input.txt&lt;br/&gt;
a\tb\tc\td\te\tf\tg&lt;br/&gt;
a\tb\tc\td\te\t\tg&lt;br/&gt;
a\tb\t\td\t\tf\tg&lt;br/&gt;
\t\t\td\te\tf\tg&lt;br/&gt;
a\tb\tc\td\t\t\t&lt;br/&gt;
a\t\t\t\te\tf\tg&lt;br/&gt;
a\t\t\td\t\t\tg&lt;/p&gt;

&lt;p&gt;I then created a table with one column from that data:&lt;/p&gt;


&lt;p&gt;DROP TABLE tmp_jo_tab_test;&lt;br/&gt;
CREATE table tmp_jo_tab_test (message_line STRING)&lt;br/&gt;
STORED AS TEXTFILE;&lt;/p&gt;

&lt;p&gt;LOAD DATA LOCAL INPATH &apos;/tmp/input.txt&apos;&lt;br/&gt;
OVERWRITE INTO TABLE tmp_jo_tab_test;&lt;/p&gt;

&lt;p&gt;Ok just to validate I created a python counting script:&lt;/p&gt;

&lt;p&gt;#!/usr/bin/python&lt;/p&gt;

&lt;p&gt;import sys&lt;/p&gt;


&lt;p&gt;for line in sys.stdin:&lt;br/&gt;
    line = line&lt;span class=&quot;error&quot;&gt;&amp;#91;0:-1&amp;#93;&lt;/span&gt;&lt;br/&gt;
    out = line.split(&quot;\t&quot;)&lt;br/&gt;
    print len(out)&lt;/p&gt;

&lt;p&gt;The output there is : &lt;br/&gt;
$ cat input.txt |./cnt_tabs.py&lt;br/&gt;
7&lt;br/&gt;
7&lt;br/&gt;
7&lt;br/&gt;
7&lt;br/&gt;
7&lt;br/&gt;
7&lt;br/&gt;
7&lt;/p&gt;

&lt;p&gt;Based on that information, split on tab should return me 7 for each line as well:&lt;/p&gt;

&lt;p&gt;hive -e &quot;select size(split(message_line, &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;t&apos;)) from tmp_jo_tab_test;&quot;&lt;/p&gt;

&lt;p&gt;7&lt;br/&gt;
7&lt;br/&gt;
7&lt;br/&gt;
7&lt;br/&gt;
4&lt;br/&gt;
7&lt;br/&gt;
7&lt;/p&gt;

&lt;p&gt;However it does not.  It would appear that the line where only the first four letters are filled in(and blank is passed in on the last three) only returns 4 splits, where there should technically be 7, 4 for letters included, and three blanks.  &lt;/p&gt;

&lt;p&gt;a\tb\tc\td\t\t\t &lt;/p&gt;</description>
                <environment>&lt;p&gt;Hive&lt;/p&gt;</environment>
        <key id="12673112">HIVE-5506</key>
            <summary>Hive SPLIT function does not return array correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vikram.dixit">Vikram Dixit K</assignee>
                                    <reporter username="mandoskippy">John Omernik</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Oct 2013 21:17:35 +0000</created>
                <updated>Wed, 23 Oct 2013 21:50:31 +0000</updated>
                            <resolved>Tue, 22 Oct 2013 20:38:15 +0000</resolved>
                                    <version>0.9.0</version>
                    <version>0.10.0</version>
                    <version>0.11.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>SQL</component>
                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13795786" author="vikram.dixit" created="Tue, 15 Oct 2013 23:18:02 +0000"  >&lt;p&gt;This should fix this issue.&lt;/p&gt;</comment>
                            <comment id="13795789" author="vikram.dixit" created="Tue, 15 Oct 2013 23:23:21 +0000"  >&lt;p&gt;Missed the input file.&lt;/p&gt;</comment>
                            <comment id="13796596" author="hiveqa" created="Wed, 16 Oct 2013 09:18:50 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12608605/HIVE-5506.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12608605/HIVE-5506.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 4412 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_split
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1136/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1136/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1136/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1136/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests failed with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13797303" author="vikram.dixit" created="Wed, 16 Oct 2013 21:46:10 +0000"  >&lt;p&gt;Fix for failing test case. Golden file updated.&lt;/p&gt;</comment>
                            <comment id="13797351" author="vikram.dixit" created="Wed, 16 Oct 2013 22:14:48 +0000"  >&lt;p&gt;Missed the input file again.&lt;/p&gt;</comment>
                            <comment id="13797566" author="ashutoshc" created="Thu, 17 Oct 2013 03:27:25 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13797670" author="hiveqa" created="Thu, 17 Oct 2013 07:02:17 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12608816/HIVE-5506.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12608816/HIVE-5506.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4412 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1151/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1151/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1151/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1151/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13802235" author="ashutoshc" created="Tue, 22 Oct 2013 20:38:15 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Vikram!&lt;/p&gt;</comment>
                            <comment id="13802561" author="hudson" created="Wed, 23 Oct 2013 03:34:16 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2416 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2416/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2416/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5506&quot; title=&quot;Hive SPLIT function does not return array correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5506&quot;&gt;&lt;del&gt;HIVE-5506&lt;/del&gt;&lt;/a&gt; : Hive SPLIT function does not return array correctly (Vikram Dixit via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/input.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFSplit.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/split.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/split.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_split.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13802618" author="hudson" created="Wed, 23 Oct 2013 05:35:52 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #151 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/151/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/151/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5506&quot; title=&quot;Hive SPLIT function does not return array correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5506&quot;&gt;&lt;del&gt;HIVE-5506&lt;/del&gt;&lt;/a&gt; : Hive SPLIT function does not return array correctly (Vikram Dixit via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/input.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFSplit.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/split.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/split.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_split.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13802826" author="hudson" created="Wed, 23 Oct 2013 11:44:18 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hive-trunk-hadoop1-ptest #214 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/214/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/214/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5506&quot; title=&quot;Hive SPLIT function does not return array correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5506&quot;&gt;&lt;del&gt;HIVE-5506&lt;/del&gt;&lt;/a&gt; : Hive SPLIT function does not return array correctly (Vikram Dixit via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/input.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFSplit.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/split.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/split.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_split.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13803378" author="hudson" created="Wed, 23 Oct 2013 21:50:31 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-hadoop2 #518 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/518/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/518/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5506&quot; title=&quot;Hive SPLIT function does not return array correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5506&quot;&gt;&lt;del&gt;HIVE-5506&lt;/del&gt;&lt;/a&gt; : Hive SPLIT function does not return array correctly (Vikram Dixit via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534775&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/input.txt&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDFSplit.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/split.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/split.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_split.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12608605" name="HIVE-5506.1.patch" size="2739" author="vikram.dixit" created="Tue, 15 Oct 2013 23:23:21 +0000"/>
                            <attachment id="12608816" name="HIVE-5506.2.patch" size="3239" author="vikram.dixit" created="Wed, 16 Oct 2013 22:14:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1otcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353022</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>HIVE SPLIT UDF</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>