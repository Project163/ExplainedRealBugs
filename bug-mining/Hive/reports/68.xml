<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:51:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-262] outer join gets some duplicate rows in some scenarios</title>
                <link>https://issues.apache.org/jira/browse/HIVE-262</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;SELECT * FROM src src1 JOIN src src2 ON (src1.key = src2.key AND src1.key &amp;lt; 10) RIGHT OUTER JOIN src src3 ON (src1.key = src3.key AND src3.key &amp;lt; 20);&lt;/p&gt;


&lt;p&gt;returns duplicate rows for outer join&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413589">HIVE-262</key>
            <summary>outer join gets some duplicate rows in some scenarios</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Jan 2009 02:08:05 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:47 +0000</updated>
                            <resolved>Wed, 4 Feb 2009 01:38:07 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12668720" author="namit" created="Fri, 30 Jan 2009 02:55:44 +0000"  >&lt;p&gt;forgot to update parse result files&lt;/p&gt;</comment>
                            <comment id="12668980" author="zshao" created="Fri, 30 Jan 2009 19:05:54 +0000"  >&lt;p&gt;Does this happen to only 2 consecutive joins with the same set of the keys?&lt;/p&gt;</comment>
                            <comment id="12669040" author="dhruba" created="Fri, 30 Jan 2009 21:39:45 +0000"  >&lt;p&gt;I marked this a s a Blocker, to indicate that this should definiotely go into the 0.20 branch.&lt;/p&gt;</comment>
                            <comment id="12669044" author="namit" created="Fri, 30 Jan 2009 21:51:39 +0000"  >&lt;p&gt;Does this happen to only 2 consecutive joins with the same set of the keys?  ----&amp;gt; YES&lt;/p&gt;</comment>
                            <comment id="12669286" author="namit" created="Sat, 31 Jan 2009 23:28:38 +0000"  >&lt;p&gt;Ashish suggested the following approach:&lt;/p&gt;

&lt;p&gt;Based on join conditions, create a set of all tables being joined (no outer join), and if one of them is null for a given value, all of them become null.&lt;/p&gt;

&lt;p&gt;For example,&lt;/p&gt;

&lt;p&gt;A join B on A.c1=B.c1 join C on A.c1=C.c1 right outer join D on A.c1=D.c1&lt;/p&gt;

&lt;p&gt;A,B,C belong to the same group (since A joins with B and A joins with C).&lt;/p&gt;

&lt;p&gt;So, for a given key (c1), if there is no row corresponding to either of A, B, or C - assume that&lt;br/&gt;
there is no row for all of them for that key.&lt;/p&gt;

&lt;p&gt;That works for the example above, and the approach is different from the patch&lt;/p&gt;</comment>
                            <comment id="12669288" author="namit" created="Sat, 31 Jan 2009 23:34:06 +0000"  >&lt;p&gt;However, the above does not work for the following:&lt;/p&gt;


&lt;p&gt;A left outer join B on A.c1=B.c1 right outer join C on B.c1=C.c1&lt;/p&gt;

&lt;p&gt;Consider the following rows for a given value of c1:&lt;/p&gt;

&lt;p&gt;A --&amp;gt; a1 a2&lt;br/&gt;
B -&amp;gt; null&lt;br/&gt;
C -&amp;gt; c1 c2&lt;/p&gt;

&lt;p&gt;Since there is no join, no pruning will happen, and the following output will be produced&lt;/p&gt;

&lt;p&gt;null null c1&lt;br/&gt;
null null c1&lt;br/&gt;
null null c2&lt;br/&gt;
null null c2&lt;/p&gt;

&lt;p&gt;whereas the correct output is:&lt;/p&gt;

&lt;p&gt;null null c1&lt;br/&gt;
null null c2&lt;/p&gt;

&lt;p&gt;Note that 2 extra rows will be produced.&lt;/p&gt;

&lt;p&gt;So, I think the patch&apos;s approach should be better&lt;/p&gt;</comment>
                            <comment id="12669848" author="namit" created="Tue, 3 Feb 2009 02:22:15 +0000"  >&lt;p&gt;need to add more tests&lt;/p&gt;</comment>
                            <comment id="12670085" author="athusoo" created="Tue, 3 Feb 2009 19:59:50 +0000"  >&lt;p&gt;can you add explain plans for the new test cases. Otherwise this looks good.&lt;/p&gt;</comment>
                            <comment id="12670185" author="namit" created="Tue, 3 Feb 2009 23:59:17 +0000"  >&lt;p&gt;added explains to test&lt;/p&gt;</comment>
                            <comment id="12670207" author="athusoo" created="Wed, 4 Feb 2009 01:11:13 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good to me.&lt;/p&gt;

&lt;p&gt;I am running the tests right now and will commit once they pass.&lt;/p&gt;</comment>
                            <comment id="12670210" author="athusoo" created="Wed, 4 Feb 2009 01:38:07 +0000"  >&lt;p&gt;committed. Thanks Namit!!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12399324" name="patch-262.3.txt" size="20381" author="namit" created="Tue, 3 Feb 2009 02:24:17 +0000"/>
                            <attachment id="12399087" name="patch.262.1.txt" size="13002" author="namit" created="Fri, 30 Jan 2009 02:14:32 +0000"/>
                            <attachment id="12399409" name="patch.262.4.txt" size="30592" author="namit" created="Tue, 3 Feb 2009 23:58:53 +0000"/>
                            <attachment id="12399089" name="patch262.2.txt" size="18884" author="namit" created="Fri, 30 Jan 2009 02:55:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73662</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8tr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122080</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>