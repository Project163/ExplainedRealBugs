<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:28:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8909] Hive doesn&apos;t correctly read Parquet nested types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8909</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Parquet&apos;s Avro and Thrift object models don&apos;t produce the same parquet type representation for lists and maps that Hive does. In the Parquet community, we&apos;ve defined what should be written and backward-compatibility rules for existing data written by parquet-avro and parquet-thrift in &lt;a href=&quot;https://issues.apache.org/jira/browse/PARQUET-113&quot; title=&quot;Clarify parquet-format specification for LIST and MAP structures.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PARQUET-113&quot;&gt;&lt;del&gt;PARQUET-113&lt;/del&gt;&lt;/a&gt;. We need to implement those rules in the Hive Converter classes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12756268">HIVE-8909</key>
            <summary>Hive doesn&apos;t correctly read Parquet nested types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rdblue">Ryan Blue</assignee>
                                    <reporter username="rdblue">Ryan Blue</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Nov 2014 00:46:15 +0000</created>
                <updated>Mon, 11 Dec 2017 03:02:00 +0000</updated>
                            <resolved>Sun, 23 Nov 2014 17:54:39 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14217177" author="rdblue" created="Wed, 19 Nov 2014 01:01:21 +0000"  >&lt;p&gt;This patch implements the rules from &lt;a href=&quot;https://issues.apache.org/jira/browse/PARQUET-113&quot; title=&quot;Clarify parquet-format specification for LIST and MAP structures.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PARQUET-113&quot;&gt;&lt;del&gt;PARQUET-113&lt;/del&gt;&lt;/a&gt;, which required some restructuring of the existing converters. The included TestArrayCompatibility tests will run on trunk and can be used to verify that the current array representation has not been changed and to see the current behavior for Avro, Thrift, and repeated types without annotations.&lt;/p&gt;

&lt;p&gt;This patch has the following behavior consequences:&lt;br/&gt;
1. Avro and Thrift data structures that could be read previously will match the original Avro or Thrift type. This is the case when Avro stored, for example, a &lt;tt&gt;array&amp;lt;struct&amp;lt;f1: int&amp;gt;&amp;gt;&lt;/tt&gt;. This structure matched Hive&apos;s 3-level representation of arrays, so it could be read, although the inner Avro record level was discarded by the SerDe and the type in Hive would be &lt;tt&gt;array&amp;lt;int&amp;gt;&lt;/tt&gt;.&lt;br/&gt;
2. Lists must be annotated with &lt;tt&gt;LIST&lt;/tt&gt; and maps with &lt;tt&gt;MAP&lt;/tt&gt;. This was assumed by the previous version. This is a safe change because all Parquet object models have correctly used these annotations.&lt;br/&gt;
3. Repeated groups with 3 or more fields and repeated primitive types are now supported.&lt;/p&gt;

&lt;p&gt;The Hive SerDe expects an extra &lt;tt&gt;ArrayWritable&lt;/tt&gt; layer from the Parquet &lt;tt&gt;Converter&lt;/tt&gt;. This expectation has been preserved and all list and map structures artificially include it so that the SerDe doesn&apos;t need to be changed. This should be done as a follow-up issue.&lt;/p&gt;</comment>
                            <comment id="14217179" author="rdblue" created="Wed, 19 Nov 2014 01:02:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt;, and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mickaellcr&quot; class=&quot;user-hover&quot; rel=&quot;mickaellcr&quot;&gt;mickaellcr&lt;/a&gt;, I think you will all be interested in this issue, which fixes Hive with data written by other formats.&lt;/p&gt;</comment>
                            <comment id="14217190" author="brocknoland" created="Wed, 19 Nov 2014 01:10:07 +0000"  >&lt;p&gt;Excellent work! In terms of ordering this patch and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8359&quot; title=&quot;Map containing null values are not correctly written in Parquet files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8359&quot;&gt;&lt;del&gt;HIVE-8359&lt;/del&gt;&lt;/a&gt;, I assume that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8359&quot; title=&quot;Map containing null values are not correctly written in Parquet files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8359&quot;&gt;&lt;del&gt;HIVE-8359&lt;/del&gt;&lt;/a&gt; should go in first?&lt;/p&gt;</comment>
                            <comment id="14217199" author="rdblue" created="Wed, 19 Nov 2014 01:15:16 +0000"  >&lt;p&gt;Yes, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8359&quot; title=&quot;Map containing null values are not correctly written in Parquet files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8359&quot;&gt;&lt;del&gt;HIVE-8359&lt;/del&gt;&lt;/a&gt; should go in first. This should also be followed up with a patch that implements the write rules for &lt;a href=&quot;https://issues.apache.org/jira/browse/PARQUET-113&quot; title=&quot;Clarify parquet-format specification for LIST and MAP structures.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PARQUET-113&quot;&gt;&lt;del&gt;PARQUET-113&lt;/del&gt;&lt;/a&gt;, which is really just renaming the fields that Hive currently produces. I&apos;m also particularly interested in thorough testing for this, but I haven&apos;t done much Hive testing myself. That&apos;s why this includes unit tests but not HQL tests. If someone could help me out with that to make sure this doesn&apos;t cause regressions, I would be grateful!&lt;/p&gt;</comment>
                            <comment id="14218252" author="spena" created="Wed, 19 Nov 2014 18:09:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;rdblue&lt;/a&gt;, is this ticket related to the different nested types found on this document?&lt;br/&gt;
&lt;a href=&quot;https://github.com/rdblue/incubator-parquet-format/blob/PARQUET-113-add-list-and-map-spec/LogicalTypes.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rdblue/incubator-parquet-format/blob/PARQUET-113-add-list-and-map-spec/LogicalTypes.md&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14218286" author="rdblue" created="Wed, 19 Nov 2014 18:32:19 +0000"  >&lt;p&gt;Yes. It implements the rules for reading lists in existing data:&lt;/p&gt;

&lt;p&gt;1. If the repeated field is not a group, then its type is the element type and elements are required.&lt;br/&gt;
2. If the repeated field is a group with multiple fields, then its type is the element type and elements are required.&lt;br/&gt;
3. If the repeated field is a group with one field and is named either &quot;array&quot; or uses the LIST-annotated group&apos;s name with &quot;_tuple&quot; appended then the repeated type is the element type and elements are required.&lt;br/&gt;
4. Otherwise, the repeated field&apos;s type is the element type with the repeated field&apos;s repetition.&lt;/p&gt;

&lt;p&gt;It also structures the converters to match the other projects. LIST and MAP will use ElementConverter and KeyValueConverter and the list version supports these rules while matching the ArrayWritable structure expected by the SerDe (confirmed by tests that pass in both trunk and this patch).&lt;/p&gt;

&lt;p&gt;Repeated groups that aren&apos;t annotated are deserialized into lists as before, but I changed this to put less work on the DataWritableGroupConverter that is now called StructConverter. Struct needs to support repeated inner groups, but rather than keeping a second array of objects, it passes its start() and end() calls to the repeated children converters, which use them to add the correct object to the struct. It&apos;s an easier-to-follow method that produces the same result. (By all means, please verify this!)&lt;/p&gt;</comment>
                            <comment id="14218323" author="brocknoland" created="Wed, 19 Nov 2014 19:07:52 +0000"  >&lt;p&gt;FYI - I think this patch will need a rebase post &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6914&quot; title=&quot;parquet-hive cannot write nested map (map value is map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6914&quot;&gt;&lt;del&gt;HIVE-6914&lt;/del&gt;&lt;/a&gt;. Additionally once ready, please click &lt;tt&gt;Submit Patch&lt;/tt&gt; to have the patch tested.&lt;/p&gt;</comment>
                            <comment id="14218692" author="rdblue" created="Wed, 19 Nov 2014 23:14:06 +0000"  >&lt;p&gt;Rebased patch on Sergio&apos;s changes. This didn&apos;t conflict except for the change to ArrayWritableGroupConverter, which was removed (so any change would conflict).&lt;/p&gt;</comment>
                            <comment id="14219776" author="brocknoland" created="Thu, 20 Nov 2014 18:47:09 +0000"  >&lt;p&gt;Reuploading patch with correct name.&lt;/p&gt;</comment>
                            <comment id="14220018" author="spena" created="Thu, 20 Nov 2014 21:20:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;rdblue&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The are a few parquet query tests in the following path:&lt;br/&gt;
ql/src/test/queries/clientpositive/parquet_*.q&lt;br/&gt;
ql/src/test/results/clientpositive/parquet_*.q.out&lt;/p&gt;

&lt;p&gt;The data files that are used by those queries tests are here (just read the *.q file to know which one is used):&lt;br/&gt;
data/files/*&lt;/p&gt;</comment>
                            <comment id="14220032" author="brocknoland" created="Thu, 20 Nov 2014 21:28:03 +0000"  >&lt;p&gt;After adding a .q file you generate the .q.out file via:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;cd itests
mvn test -Dtest=TestCliDriver -Dqfile=my_parquet.q -Dtest.output.overwrite=true -Phadoop-2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ#HiveDeveloperFAQ-HowdoIupdatetheoutputofaCliDrivertestcase?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/HiveDeveloperFAQ#HiveDeveloperFAQ-HowdoIupdatetheoutputofaCliDrivertestcase?&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14220207" author="rdblue" created="Thu, 20 Nov 2014 23:23:15 +0000"  >&lt;p&gt;I&apos;m attaching a tarball with all of the files from the array compatibility tests. These can be used to add the .q tests.&lt;/p&gt;</comment>
                            <comment id="14220376" author="rdblue" created="Fri, 21 Nov 2014 01:38:17 +0000"  >&lt;p&gt;Updated patch with q tests for all of the cases in TestArrayCompatibility. I also added a q test that copies nested_complex.q that produces the same results.&lt;/p&gt;</comment>
                            <comment id="14220485" author="brocknoland" created="Fri, 21 Nov 2014 03:52:12 +0000"  >
&lt;p&gt;parquet_array_null_element&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: parquet.io.ParquetDecodingException: Can not read value at 0 in block 0 in file pfile:/Users/noland/workspaces/hive-apache/hive/itests/qtest/target/warehouse/parquet_array_null_element/000000_0
  at parquet.hadoop.InternalParquetRecordReader.nextKeyValue(InternalParquetRecordReader.java:213)
  at parquet.hadoop.ParquetRecordReader.nextKeyValue(ParquetRecordReader.java:204)
  at org.apache.hadoop.hive.ql.io.parquet.read.ParquetRecordReaderWrapper.&amp;lt;init&amp;gt;(ParquetRecordReaderWrapper.java:102)
  at org.apache.hadoop.hive.ql.io.parquet.read.ParquetRecordReaderWrapper.&amp;lt;init&amp;gt;(ParquetRecordReaderWrapper.java:71)
  at org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat.getRecordReader(MapredParquetInputFormat.java:71)
  at org.apache.hadoop.hive.ql.exec.FetchOperator.getRecordReader(FetchOperator.java:504)
  at org.apache.hadoop.hive.ql.exec.FetchOperator.getNextRow(FetchOperator.java:594)
  ... 29 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: 1
  at org.apache.hadoop.hive.ql.io.parquet.convert.HiveStructConverter.set(HiveStructConverter.java:96)
  at org.apache.hadoop.hive.ql.io.parquet.convert.HiveCollectionConverter.end(HiveCollectionConverter.java:65)
  at parquet.io.RecordReaderImplementation.read(RecordReaderImplementation.java:410)
  at parquet.hadoop.InternalParquetRecordReader.nextKeyValue(InternalParquetRecordReader.java:194)
  ... 35 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14220487" author="brocknoland" created="Fri, 21 Nov 2014 03:55:43 +0000"  >&lt;p&gt;Not sure which test this is from:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: parquet.io.ParquetDecodingException: Can not read value at 0 in block 0 in file pfile:/Users/noland/workspaces/hive-apache/hive/itests/qtest/target/warehouse/parquet_jointable2/000000_0
  at parquet.hadoop.InternalParquetRecordReader.nextKeyValue(InternalParquetRecordReader.java:213)
  at parquet.hadoop.ParquetRecordReader.nextKeyValue(ParquetRecordReader.java:204)
  at org.apache.hadoop.hive.ql.io.parquet.read.ParquetRecordReaderWrapper.&amp;lt;init&amp;gt;(ParquetRecordReaderWrapper.java:102)
  at org.apache.hadoop.hive.ql.io.parquet.read.ParquetRecordReaderWrapper.&amp;lt;init&amp;gt;(ParquetRecordReaderWrapper.java:71)
  at org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat.getRecordReader(MapredParquetInputFormat.java:71)
  at org.apache.hadoop.hive.ql.io.CombineHiveRecordReader.&amp;lt;init&amp;gt;(CombineHiveRecordReader.java:65)
  ... 16 more
Caused by: java.lang.ArrayIndexOutOfBoundsException: 2
  at org.apache.hadoop.hive.ql.io.parquet.convert.HiveStructConverter.set(HiveStructConverter.java:96)
  at org.apache.hadoop.hive.ql.io.parquet.convert.ETypeConverter$BinaryConverter.addBinary(ETypeConverter.java:219)
  at parquet.column.impl.ColumnReaderImpl$2$6.writeValue(ColumnReaderImpl.java:306)
  at parquet.column.impl.ColumnReaderImpl.writeCurrentValueToConverter(ColumnReaderImpl.java:353)
  at parquet.io.RecordReaderImplementation.read(RecordReaderImplementation.java:402)
  at parquet.hadoop.InternalParquetRecordReader.nextKeyValue(InternalParquetRecordReader.java:194)
  ... 21 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;All failed parquet tests with the patch:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  &amp;lt;testcase name=&quot;testCliDriver_parquet_array_null_element&quot; classname=&quot;org.apache.hadoop.hive.cli.TestCliDriver&quot; time=&quot;4.945&quot;&amp;gt;
  &amp;lt;testcase name=&quot;testCliDriver_parquet_create&quot; classname=&quot;org.apache.hadoop.hive.cli.TestCliDriver&quot; time=&quot;4.416&quot;&amp;gt;
  &amp;lt;testcase name=&quot;testCliDriver_parquet_decimal&quot; classname=&quot;org.apache.hadoop.hive.cli.TestCliDriver&quot; time=&quot;5.478&quot;&amp;gt;
  &amp;lt;testcase name=&quot;testCliDriver_parquet_join&quot; classname=&quot;org.apache.hadoop.hive.cli.TestCliDriver&quot; time=&quot;8.928&quot;&amp;gt;
  &amp;lt;testcase name=&quot;testCliDriver_parquet_types&quot; classname=&quot;org.apache.hadoop.hive.cli.TestCliDriver&quot; time=&quot;4.094&quot;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14221024" author="hiveqa" created="Fri, 21 Nov 2014 15:20:18 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12682794/HIVE-8909.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12682794/HIVE-8909.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 18 failed/errored test(s), 6687 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_null_element
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_of_multi_field_struct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_of_optional_elements
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_of_required_elements
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_of_single_field_struct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_of_structs
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_of_unannotated_groups
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_array_of_unannotated_primitives
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_avro_array_of_primitives
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_avro_array_of_single_field_struct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_create
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_decimal
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_thrift_array_of_primitives
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_thrift_array_of_single_field_struct
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_types
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.hcatalog.streaming.TestStreaming.testRemainingTransactions
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1856/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1856/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1856/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1856/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1856/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1856/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 18 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12682794 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14221083" author="brocknoland" created="Fri, 21 Nov 2014 16:15:21 +0000"  >&lt;p&gt;I don&apos;t believe the test infra can unwrap the binary files since it uses svn. We&apos;ll have to verify t g em locally. &lt;/p&gt;</comment>
                            <comment id="14221138" author="rdblue" created="Fri, 21 Nov 2014 17:19:47 +0000"  >&lt;p&gt;Subversion can handle binaries if they&apos;re checked in though. Could we add the test files and update the patch so they aren&apos;t included?&lt;/p&gt;</comment>
                            <comment id="14221149" author="brocknoland" created="Fri, 21 Nov 2014 17:31:34 +0000"  >&lt;p&gt;Typically we just run the tests manually but I don&apos;t see harm in checking in the binary files now and I just did so. Thus we won&apos;t want to submit them on the patch which fixes the failures I mentioned earlier.&lt;/p&gt;</comment>
                            <comment id="14221230" author="spena" created="Fri, 21 Nov 2014 18:44:17 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;rdblue&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you post the patch in the review board?&lt;/p&gt;</comment>
                            <comment id="14221268" author="rdblue" created="Fri, 21 Nov 2014 18:59:57 +0000"  >&lt;p&gt;Adding patch without the data files.&lt;/p&gt;</comment>
                            <comment id="14221386" author="spena" created="Fri, 21 Nov 2014 20:30:50 +0000"  >&lt;p&gt;Looks good &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;rdblue&lt;/a&gt;. I run the tests locally and they&apos;re running correctly as well.&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="14221416" author="brocknoland" created="Fri, 21 Nov 2014 20:55:53 +0000"  >&lt;p&gt;I am still seeing the regressions mentioned here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8909?focusedCommentId=14220487&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14220487&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-8909?focusedCommentId=14220487&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-14220487&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt; do those tests fail for you?&lt;/p&gt;</comment>
                            <comment id="14221428" author="spena" created="Fri, 21 Nov 2014 21:05:48 +0000"  >&lt;p&gt;They didn&apos;t&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn test -Phadoop-2 -Dtest=TestCliDriver -Dqfile=parquet_array_of_optional_elements.q,parquet_array_of_required_elements.q,parquet_array_of_single_field_struct.q,parquet_array_of_structs.q,parquet_array_of_unannotated_groups.q,parquet_array_of_unannotated_primitives.q,parquet_avro_array_of_primitives.q,parquet_avro_array_of_single_field_struct.q,parquet_nested_complex.q,parquet_thrift_array_of_primitives.q,parquet_thrift_array_of_single_field_struct.q

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running org.apache.hadoop.hive.cli.TestCliDriver
Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 80.949 sec - in org.apache.hadoop.hive.cli.TestCliDriver

Results :

Tests run: 12, Failures: 0, Errors: 0, Skipped: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I run the first two tests (parquet_array_null_element,parquet_array_of_multi_field_struct) manually before running the 12 tests, and they passed.&lt;/p&gt;</comment>
                            <comment id="14221496" author="rdblue" created="Fri, 21 Nov 2014 22:12:17 +0000"  >&lt;p&gt;Fixed projection bug and added tests for map structures.&lt;/p&gt;</comment>
                            <comment id="14221506" author="rdblue" created="Fri, 21 Nov 2014 22:26:30 +0000"  >&lt;p&gt;Fixed typo in new map tests (thanks Sergio!)&lt;/p&gt;</comment>
                            <comment id="14221540" author="spena" created="Fri, 21 Nov 2014 22:55:50 +0000"  >&lt;p&gt;+1 again &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14221639" author="brocknoland" created="Sat, 22 Nov 2014 00:25:57 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;thank you!!&lt;/p&gt;</comment>
                            <comment id="14222359" author="hiveqa" created="Sun, 23 Nov 2014 11:52:11 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12682975/HIVE-8909.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12682975/HIVE-8909.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6681 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.hcatalog.streaming.TestStreaming.testEndpointConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1875/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1875/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1875/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1875/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1875/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1875/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12682975 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14222435" author="brocknoland" created="Sun, 23 Nov 2014 17:54:57 +0000"  >&lt;p&gt;Thank you so much!! I have committed this to trunk!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12736022">PARQUET-83</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13122502">HIVE-18211</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12770818">HIVE-9502</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12708602">HIVE-6914</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12729207">PARQUET-26</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12757131">HIVE-8949</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12682313" name="HIVE-8909-1.patch" size="61834" author="rdblue" created="Wed, 19 Nov 2014 01:01:21 +0000"/>
                            <attachment id="12682522" name="HIVE-8909-2.patch" size="61860" author="rdblue" created="Wed, 19 Nov 2014 23:14:06 +0000"/>
                            <attachment id="12682708" name="HIVE-8909.2.patch" size="61860" author="brocknoland" created="Thu, 20 Nov 2014 18:47:09 +0000"/>
                            <attachment id="12682794" name="HIVE-8909.3.patch" size="120652" author="rdblue" created="Fri, 21 Nov 2014 01:38:17 +0000"/>
                            <attachment id="12682938" name="HIVE-8909.4.patch" size="112376" author="rdblue" created="Fri, 21 Nov 2014 18:59:57 +0000"/>
                            <attachment id="12682968" name="HIVE-8909.5.patch" size="132324" author="rdblue" created="Fri, 21 Nov 2014 22:12:17 +0000"/>
                            <attachment id="12682975" name="HIVE-8909.6.patch" size="132339" author="rdblue" created="Fri, 21 Nov 2014 22:26:30 +0000"/>
                            <attachment id="12682775" name="parquet-test-data.tar.gz" size="1268" author="rdblue" created="Thu, 20 Nov 2014 23:23:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22j8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>