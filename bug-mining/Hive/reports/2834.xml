<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:26:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7282] HCatLoader fail to load Orc map with null key</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7282</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Here is the stack:&lt;br/&gt;
Get exception:&lt;br/&gt;
AttemptID:attempt_1403634189382_0011_m_000000_0 Info:Error: org.apache.pig.backend.executionengine.ExecException: ERROR 6018: Error converting read value to tuple&lt;br/&gt;
at org.apache.hive.hcatalog.pig.HCatBaseLoader.getNext(HCatBaseLoader.java:76)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.HCatLoader.getNext(HCatLoader.java:58)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigRecordReader.nextKeyValue(PigRecordReader.java:211)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:533)&lt;br/&gt;
at org.apache.hadoop.mapreduce.task.MapContextImpl.nextKeyValue(MapContextImpl.java:80)&lt;br/&gt;
at org.apache.hadoop.mapreduce.lib.map.WrappedMapper$Context.nextKeyValue(WrappedMapper.java:91)&lt;br/&gt;
at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)&lt;br/&gt;
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:340)&lt;br/&gt;
at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:167)&lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1557)&lt;br/&gt;
at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:162)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.transformToPigMap(PigHCatUtil.java:469)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.extractPigObject(PigHCatUtil.java:404)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.transformToTuple(PigHCatUtil.java:456)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.PigHCatUtil.transformToTuple(PigHCatUtil.java:374)&lt;br/&gt;
at org.apache.hive.hcatalog.pig.HCatBaseLoader.getNext(HCatBaseLoader.java:64)&lt;br/&gt;
... 13 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12723477">HIVE-7282</key>
            <summary>HCatLoader fail to load Orc map with null key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Jun 2014 21:23:05 +0000</created>
                <updated>Thu, 13 Nov 2014 19:41:58 +0000</updated>
                            <resolved>Thu, 30 Oct 2014 18:30:21 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14042713" author="daijy" created="Tue, 24 Jun 2014 21:28:53 +0000"  >&lt;p&gt;Attach patch. Will add testcase later.&lt;/p&gt;</comment>
                            <comment id="14044316" author="daijy" created="Thu, 26 Jun 2014 03:39:59 +0000"  >&lt;p&gt;Add test case.&lt;/p&gt;</comment>
                            <comment id="14046250" author="ekoifman" created="Fri, 27 Jun 2014 18:43:09 +0000"  >&lt;p&gt;Would it not make more sense to add the new test to TestHCatLoaderComplexSchema, so that it&apos;s run with both ORC and RCFile?&lt;/p&gt;</comment>
                            <comment id="14046273" author="ekoifman" created="Fri, 27 Jun 2014 18:52:49 +0000"  >&lt;p&gt;Also, can &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5020&quot; title=&quot;HCat reading null-key map entries causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5020&quot;&gt;HIVE-5020&lt;/a&gt; now be closed as duplicate?&lt;/p&gt;</comment>
                            <comment id="14049228" author="sushanth" created="Tue, 1 Jul 2014 19:31:47 +0000"  >&lt;p&gt;While this protects the difference between orc and rcfile from HCat, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5020&quot; title=&quot;HCat reading null-key map entries causes NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5020&quot;&gt;HIVE-5020&lt;/a&gt; is about the differences in behaviour between rcfile and orc in how they handle nulls in maps, and should not be closed until hive has a consistent behaviour. I would actually prefer to solve this in a consistent manner in hive before applying this to hcat, as explained in comments in that jira. I&apos;ll try to revive the discussion there.&lt;/p&gt;</comment>
                            <comment id="14050870" author="daijy" created="Wed, 2 Jul 2014 23:35:40 +0000"  >&lt;p&gt;When I digging more, I feel disallow null map key is more proper. Reasons are:&lt;br/&gt;
1. This can solve the semantic difference between orc and rcfile&lt;br/&gt;
2. Allow null map key seems risky, it will break assumption of some other code, eg, LazyMap&lt;/p&gt;</comment>
                            <comment id="14050878" author="ekoifman" created="Wed, 2 Jul 2014 23:46:49 +0000"  >&lt;p&gt;I agree that null key in a map is a bad idea.  Since we still have to deal with data which already has been written with null key, could we add some table property that will let user say &quot;if data contains a map with null key, replace null with &apos;my_value&apos; on read&quot;.  (Perhaps the same property can be used to change a null key to &apos;my_value&apos; on write to support existing writers, but this of course won&apos;t work for all cases.)  This way null key can be disallowed.&lt;/p&gt;</comment>
                            <comment id="14175399" author="daijy" created="Fri, 17 Oct 2014 19:09:14 +0000"  >&lt;p&gt;Resync the patch with trunk. Also in the new patch, I skip the null key entries in the map, this is consistent with null key handling in other part of Hive (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8115&quot; title=&quot;Hive select query hang when fields contain map&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8115&quot;&gt;&lt;del&gt;HIVE-8115&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="14175585" author="hiveqa" created="Fri, 17 Oct 2014 21:41:16 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12675550/HIVE-7282.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12675550/HIVE-7282.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6569 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_cbo_correctness
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1321/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1321/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1321/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12675550&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;PreCommit-HIVE-TRUNK-Build&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14190492" author="sushanth" created="Thu, 30 Oct 2014 17:59:23 +0000"  >&lt;p&gt;+1, looks good to me.&lt;/p&gt;</comment>
                            <comment id="14190555" author="daijy" created="Thu, 30 Oct 2014 18:30:21 +0000"  >&lt;p&gt;Patch committed to both trunk and 0.14 branch.&lt;/p&gt;</comment>
                            <comment id="14210667" author="thejas" created="Thu, 13 Nov 2014 19:41:58 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12662490">HIVE-5020</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12662490">HIVE-5020</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12652290" name="HIVE-7282-1.patch" size="2100" author="daijy" created="Tue, 24 Jun 2014 21:28:53 +0000"/>
                            <attachment id="12652543" name="HIVE-7282-2.patch" size="4588" author="daijy" created="Thu, 26 Jun 2014 03:39:59 +0000"/>
                            <attachment id="12675550" name="HIVE-7282.3.patch" size="5491" author="daijy" created="Fri, 17 Oct 2014 19:09:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401664</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1x4y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>401736</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>