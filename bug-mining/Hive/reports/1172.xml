<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:05:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4174] Round UDF converts BigInts to double</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4174</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Chen Chun pointed out on the hive-user mailing list that round() in Hive 0.10 returns&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select round(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(1234560 as BIGINT)), round(&lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt;(12345670 as BIGINT)) from test limit 1;

&lt;span class=&quot;code-comment&quot;&gt;//hive 0.10
&lt;/span&gt;1234560.0  1.234567E7
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is not consistent with MySQL(&lt;a href=&quot;http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_round&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_round&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;which quotes&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;The &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; type is the same type as that of the first argument (assuming that it is integer, &lt;span class=&quot;code-object&quot;&gt;double&lt;/span&gt;, or decimal). This means that &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; an integer argument, the result is an integer (no decimal places)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12637026">HIVE-4174</key>
            <summary>Round UDF converts BigInts to double</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chenchun">Chun Chen</assignee>
                                    <reporter username="mgrover">Mark Grover</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Mar 2013 14:17:00 +0000</created>
                <updated>Thu, 16 May 2013 21:10:52 +0000</updated>
                            <resolved>Wed, 3 Apr 2013 08:45:32 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13612762" author="phabricator@reviews.facebook.net" created="Mon, 25 Mar 2013 16:01:14 +0000"  >&lt;p&gt;chenchun requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4174&quot; title=&quot;Round UDF converts BigInts to double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4174&quot;&gt;&lt;del&gt;HIVE-4174&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Round UDF converts BigInts to double&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;Round UDF return type be the same type as that of the first argument&lt;/p&gt;

&lt;p&gt;Chen Chun pointed out on the hive-user mailing list that round() in Hive 0.10 returns&lt;/p&gt;

&lt;p&gt;select round(cast(1234560 as BIGINT)), round(cast(12345670 as BIGINT)) from test limit 1;&lt;/p&gt;

&lt;p&gt;//hive 0.10&lt;br/&gt;
1234560.0  1.234567E7&lt;/p&gt;

&lt;p&gt;This is not consistent with MySQL(&lt;a href=&quot;http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_round&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_round&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;which quotes&lt;/p&gt;

&lt;p&gt;The return type is the same type as that of the first argument (assuming that it is integer, double, or decimal). This means that for an integer argument, the result is an integer (no decimal places)&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D9687&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D9687&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_round_3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_round.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_round_3.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/23127/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/23127/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, chenchun&lt;/p&gt;</comment>
                            <comment id="13620676" author="namit" created="Wed, 3 Apr 2013 06:50:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13620678" author="phabricator@reviews.facebook.net" created="Wed, 3 Apr 2013 06:51:14 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4174&quot; title=&quot;Round UDF converts BigInts to double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4174&quot;&gt;&lt;del&gt;HIVE-4174&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Round UDF converts BigInts to double&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D9687&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D9687&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4174&quot; title=&quot;Round UDF converts BigInts to double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4174&quot;&gt;&lt;del&gt;HIVE-4174&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, chenchun&lt;/p&gt;</comment>
                            <comment id="13620742" author="namit" created="Wed, 3 Apr 2013 08:45:32 +0000"  >&lt;p&gt;Committed. Thanks Chen Chun&lt;/p&gt;</comment>
                            <comment id="13621069" author="mgrover" created="Wed, 3 Apr 2013 17:17:18 +0000"  >&lt;p&gt;Indeed, thanks Chen Chun. And, congratulations on your first Hive commit!&lt;/p&gt;</comment>
                            <comment id="13621120" author="brocknoland" created="Wed, 3 Apr 2013 18:00:52 +0000"  >&lt;p&gt;Hey, should this be assigned to Chen Chun?&lt;/p&gt;</comment>
                            <comment id="13621137" author="mgrover" created="Wed, 3 Apr 2013 18:16:03 +0000"  >&lt;p&gt;It should be. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=namitjain&quot; class=&quot;user-hover&quot; rel=&quot;namitjain&quot;&gt;namitjain&lt;/a&gt; can you please add Chen Chun (chenchun dot feed at gmail dot com) to the project contributors list and assign this JIRA to him? Thanks!&lt;/p&gt;</comment>
                            <comment id="13621670" author="hudson" created="Thu, 4 Apr 2013 02:28:43 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2043 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2043/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2043/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4174&quot; title=&quot;Round UDF converts BigInts to double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4174&quot;&gt;&lt;del&gt;HIVE-4174&lt;/del&gt;&lt;/a&gt; Round UDF converts BigInts to double&lt;br/&gt;
(Chen Chun via namit) (Revision 1463880)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463880&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463880&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_round_3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_round.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_round_3.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623010" author="hudson" created="Thu, 4 Apr 2013 23:39:49 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #138 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4174&quot; title=&quot;Round UDF converts BigInts to double&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4174&quot;&gt;&lt;del&gt;HIVE-4174&lt;/del&gt;&lt;/a&gt; Round UDF converts BigInts to double&lt;br/&gt;
(Chen Chun via namit) (Revision 1463880)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463880&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1463880&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFRound.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_round_3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_round.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_round_3.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13624912" author="chenchun" created="Sun, 7 Apr 2013 13:15:17 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mgrover&quot; class=&quot;user-hover&quot; rel=&quot;mgrover&quot;&gt;mgrover&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=namit&quot; class=&quot;user-hover&quot; rel=&quot;namit&quot;&gt;namit&lt;/a&gt;. By the way, I think u noticed a wrong person, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=namit&quot; class=&quot;user-hover&quot; rel=&quot;namit&quot;&gt;namit&lt;/a&gt; is not &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=namitjain&quot; class=&quot;user-hover&quot; rel=&quot;namitjain&quot;&gt;namitjain&lt;/a&gt;. And can I assign the issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2817&quot; title=&quot;Drop any table even without privilege&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2817&quot;&gt;&lt;del&gt;HIVE-2817&lt;/del&gt;&lt;/a&gt; to me. I recently encounter the problem and find the cause of it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12614902">HIVE-3675</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12574073" name="HIVE-4174.1.patch.txt" size="7026" author="chenchun" created="Sun, 17 Mar 2013 17:11:04 +0000"/>
                            <attachment id="12575332" name="HIVE-4174.D9687.1.patch" size="6775" author="phabricator@reviews.facebook.net" created="Mon, 25 Mar 2013 16:01:14 +0000"/>
                            <attachment id="12576732" name="hive.4174.1.patch-nohcat" size="13981" author="namit" created="Wed, 3 Apr 2013 06:55:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317518</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10342"><![CDATA[Incompatible change]]></customfieldvalue>
    <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1isdr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>317859</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>The change makes the return type of round function be the same type as that of the first argument (assuming that it is integer, double, or decimal). This means that for an integer argument, the result is an integer (no decimal places).</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>