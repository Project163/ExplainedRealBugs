<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:24:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7950] StorageHandler resources aren&apos;t added to Tez Session if already Session is already Open</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7950</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Was trying to run some queries using the AccumuloStorageHandler when using the Tez execution engine. Some things that classes which were added to tmpjars weren&apos;t making it into the container. When a Tez Session is already open, as is the normal case when simply using the `hive` command, the resources aren&apos;t added.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12738673">HIVE-7950</key>
            <summary>StorageHandler resources aren&apos;t added to Tez Session if already Session is already Open</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="elserj">Josh Elser</assignee>
                                    <reporter username="elserj">Josh Elser</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Sep 2014 01:45:04 +0000</created>
                <updated>Thu, 13 Nov 2014 19:39:59 +0000</updated>
                            <resolved>Mon, 22 Sep 2014 19:38:43 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>StorageHandler</component>
                    <component>Tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14121463" author="elserj" created="Thu, 4 Sep 2014 15:32:32 +0000"  >&lt;p&gt;Going to break the bigger issue down into more manageable pieces to fix.&lt;/p&gt;</comment>
                            <comment id="14122272" author="sershe" created="Fri, 5 Sep 2014 01:51:47 +0000"  >&lt;p&gt;I thought Tez 0.5 had APIs to add jars to existing session. Have we upgraded to 0.5 yet?&lt;/p&gt;</comment>
                            <comment id="14122275" author="elserj" created="Fri, 5 Sep 2014 01:54:10 +0000"  >&lt;p&gt;Nope, 0.4.1-incubating. Being able to add more resources to an existing session would certainly be preferable though..&lt;/p&gt;</comment>
                            <comment id="14123529" author="elserj" created="Fri, 5 Sep 2014 20:35:48 +0000"  >&lt;p&gt;Ah, the tez branch is on 0.5.0 (trunk is on 0.4.1). What&apos;s the lifecycle on the tez branch, is it occasionally merged into trunk?&lt;/p&gt;</comment>
                            <comment id="14126712" author="elserj" created="Tue, 9 Sep 2014 07:04:29 +0000"  >&lt;p&gt;I took a look at the tez branch to see if I could add more resources to an existing session as you described, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt;. Looking at the javadoc, I feel like this patch should work, but the query still errors out when the map inside the dag fails due to missing classes.&lt;/p&gt;

&lt;p&gt;I can see that the dag does get the extra jars localized:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-09-08 23:20:34,823 INFO [AsyncDispatcher event handler] org.apache.tez.dag.app.dag.impl.DAGImpl: Added additional resources : [[file:/usr/local/lib/hadoop-2.6.0-SNAPSHOT/yarn/nm-tmp/usercache/jelser/appcache/application_1410243497503_0001/container_1410243497503_0001_01_000001/accumulo-fate-1.6.0.jar, file:/usr/local/lib/hadoop-2.6.0-SNAPSHOT/yarn/nm-tmp/usercache/jelser/appcache/application_1410243497503_0001/container_1410243497503_0001_01_000001/accumulo-core-1.6.0.jar, file:/usr/local/lib/hadoop-2.6.0-SNAPSHOT/yarn/nm-tmp/usercache/jelser/appcache/application_1410243497503_0001/container_1410243497503_0001_01_000001/accumulo-trace-1.6.0.jar, file:/usr/local/lib/hadoop-2.6.0-SNAPSHOT/yarn/nm-tmp/usercache/jelser/appcache/application_1410243497503_0001/container_1410243497503_0001_01_000001/accumulo-start-1.6.0.jar, file:/usr/local/lib/hadoop-2.6.0-SNAPSHOT/yarn/nm-tmp/usercache/jelser/appcache/application_1410243497503_0001/container_1410243497503_0001_01_000001/zookeeper-3.4.6.jar]] to classpath
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But I&apos;m still getting a NoClassDefFoundException on a class which is in accumulo-core.jar:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Serialization trace:
inputFileFormatClass (org.apache.hadoop.hive.ql.plan.TableDesc)
tableDesc (org.apache.hadoop.hive.ql.plan.PartitionDesc)
aliasToPartnInfo (org.apache.hadoop.hive.ql.plan.MapWork)
	at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:183)
	at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:324)
	at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable$1.run(TezTaskRunner.java:180)
	at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable$1.run(TezTaskRunner.java:172)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:415)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1548)
	at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable.call(TezTaskRunner.java:172)
	at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable.call(TezTaskRunner.java:167)
	at java.util.concurrent.FutureTask.run(FutureTask.java:262)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
	at java.lang.Thread.run(Thread.java:745)
Caused by: java.lang.RuntimeException: org.apache.hive.com.esotericsoftware.kryo.KryoException: java.lang.IllegalArgumentException: Unable to create serializer &quot;org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer&quot; for class: org.apache.hadoop.hive.accumulo.mr.HiveAccumuloTableInputFormat
Serialization trace:
inputFileFormatClass (org.apache.hadoop.hive.ql.plan.TableDesc)
tableDesc (org.apache.hadoop.hive.ql.plan.PartitionDesc)
aliasToPartnInfo (org.apache.hadoop.hive.ql.plan.MapWork)
	at org.apache.hadoop.hive.ql.exec.Utilities.getBaseWork(Utilities.java:384)
	at org.apache.hadoop.hive.ql.exec.Utilities.getMapWork(Utilities.java:281)
	at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.&amp;lt;init&amp;gt;(MapRecordProcessor.java:73)
	at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:134)
	... 12 more
Caused by: org.apache.hive.com.esotericsoftware.kryo.KryoException: java.lang.IllegalArgumentException: Unable to create serializer &quot;org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer&quot; for class: org.apache.hadoop.hive.accumulo.mr.HiveAccumuloTableInputFormat
Serialization trace:
inputFileFormatClass (org.apache.hadoop.hive.ql.plan.TableDesc)
tableDesc (org.apache.hadoop.hive.ql.plan.PartitionDesc)
aliasToPartnInfo (org.apache.hadoop.hive.ql.plan.MapWork)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:125)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.readClassAndObject(Kryo.java:776)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:139)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.MapSerializer.read(MapSerializer.java:17)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:694)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:106)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.read(FieldSerializer.java:507)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.readObject(Kryo.java:672)
	at org.apache.hadoop.hive.ql.exec.Utilities.deserializeObjectByKryo(Utilities.java:963)
	at org.apache.hadoop.hive.ql.exec.Utilities.deserializePlan(Utilities.java:871)
	at org.apache.hadoop.hive.ql.exec.Utilities.deserializePlan(Utilities.java:885)
	at org.apache.hadoop.hive.ql.exec.Utilities.getBaseWork(Utilities.java:352)
	... 15 more
Caused by: java.lang.IllegalArgumentException: Unable to create serializer &quot;org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer&quot; for class: org.apache.hadoop.hive.accumulo.mr.HiveAccumuloTableInputFormat
	at org.apache.hive.com.esotericsoftware.kryo.factories.ReflectionSerializerFactory.makeSerializer(ReflectionSerializerFactory.java:45)
	at org.apache.hive.com.esotericsoftware.kryo.factories.ReflectionSerializerFactory.makeSerializer(ReflectionSerializerFactory.java:26)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.newDefaultSerializer(Kryo.java:343)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.getDefaultSerializer(Kryo.java:336)
	at org.apache.hive.com.esotericsoftware.kryo.util.DefaultClassResolver.registerImplicit(DefaultClassResolver.java:56)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.getRegistration(Kryo.java:476)
	at org.apache.hive.com.esotericsoftware.kryo.util.DefaultClassResolver.readName(DefaultClassResolver.java:148)
	at org.apache.hive.com.esotericsoftware.kryo.util.DefaultClassResolver.readClass(DefaultClassResolver.java:115)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.readClass(Kryo.java:656)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.DefaultSerializers$ClassSerializer.read(DefaultSerializers.java:238)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.DefaultSerializers$ClassSerializer.read(DefaultSerializers.java:226)
	at org.apache.hive.com.esotericsoftware.kryo.Kryo.readObjectOrNull(Kryo.java:745)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.ObjectField.read(ObjectField.java:113)
	... 30 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:526)
	at org.apache.hive.com.esotericsoftware.kryo.factories.ReflectionSerializerFactory.makeSerializer(ReflectionSerializerFactory.java:32)
	... 42 more
Caused by: java.lang.NoClassDefFoundError: org/apache/accumulo/core/client/security/tokens/AuthenticationToken
	at java.lang.Class.getDeclaredFields0(Native Method)
	at java.lang.Class.privateGetDeclaredFields(Class.java:2397)
	at java.lang.Class.getDeclaredFields(Class.java:1806)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.rebuildCachedFields(FieldSerializer.java:150)
	at org.apache.hive.com.esotericsoftware.kryo.serializers.FieldSerializer.&amp;lt;init&amp;gt;(FieldSerializer.java:109)
	... 47 more
Caused by: java.lang.ClassNotFoundException: org.apache.accumulo.core.client.security.tokens.AuthenticationToken
	at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
	at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:425)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:358)
	... 52 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Any idea if I&apos;m missing some extra step here? &lt;/p&gt;</comment>
                            <comment id="14127407" author="elserj" created="Tue, 9 Sep 2014 19:04:54 +0000"  >&lt;p&gt;Ok, I figured a bit more out here. I believe that the AM &lt;b&gt;is&lt;/b&gt; correctly getting the extra jars from the storage handler as expected. The subsequent errors are coming from the containers that are started to actually run the DAG (rather than the coordination from the tez AM).&lt;/p&gt;

&lt;p&gt;The interesting part is that the patch (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7950&quot; title=&quot;StorageHandler resources aren&amp;#39;t added to Tez Session if already Session is already Open&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7950&quot;&gt;&lt;del&gt;HIVE-7950&lt;/del&gt;&lt;/a&gt;-1.diff) which starts a brand new Session will result in a successful query. It seems like maybe Tez isn&apos;t passing along the extra resources we added to the running session (AM) in Hive along to the DAG containers to actually run the query. I have no idea at this point if this is a problem in how hive is using tez or if it&apos;s a bug in tez itself...&lt;/p&gt;</comment>
                            <comment id="14127417" author="gopalv" created="Tue, 9 Sep 2014 19:14:32 +0000"  >&lt;p&gt;Can you post the sequence of things you are doing?&lt;/p&gt;

&lt;p&gt;As in, how is the JARs getting added - is it an explicit &quot;ADD JAR&quot;?&lt;/p&gt;

&lt;p&gt;Tez-0.5.0-rc1 had an issue we tackled with an API change to ship JARs differently between the AM and tasks.&lt;/p&gt;</comment>
                            <comment id="14127440" author="elserj" created="Tue, 9 Sep 2014 19:31:08 +0000"  >&lt;p&gt;Sure thing, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;gopalv&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I don&apos;t actually have to do any extra &lt;tt&gt;ADD JAR&lt;/tt&gt; commands. The AccumuloStorageHandler constructs a list of jars that need to be passed along to the &quot;execution engine&quot; (via tmpjars in the Hadoop configuration). With the &apos;yarn&apos; execution.engine, this works just fine &amp;#8211; the resources are localized and added to the Map/Reduce containers and things are great.&lt;/p&gt;

&lt;p&gt;When I try to run with &apos;tez&apos;, there are a few issues. The first is that, if there is already a TezSessionState that was already open&apos;ed (e.g. like what is done when I just open the hive shell), it will have been started without those extra &apos;tmpjars&apos; resources from the StorageHandler and the query will fail because we need those jars.&lt;/p&gt;

&lt;p&gt;Sergey mentioned that Tez 0.5.0 had a new method that would allow more resources to be added to an already started TezClient (&lt;tt&gt;TezClient#addAppMasterLocalFiles(Map&amp;lt;String, LocalResource&amp;gt;)&lt;/tt&gt;). Implementing this (in the hive-7950-tez-WIP.diff attachment), appears to have successfully added the extra jars from the StorageHandler to the DAGAppMaster, but the containers started to actually run the query are missing those extra jars.&lt;/p&gt;

&lt;p&gt;Does that make sense?&lt;/p&gt;</comment>
                            <comment id="14127479" author="gopalv" created="Tue, 9 Sep 2014 20:10:55 +0000"  >&lt;p&gt;This is related to &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-1469&quot; title=&quot;AM/Session LRs are not shipped to vertices in new API use-case&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-1469&quot;&gt;&lt;del&gt;TEZ-1469&lt;/del&gt;&lt;/a&gt;, which should provide guidance.&lt;/p&gt;

&lt;p&gt;For reference, take a look at some of my example code&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/t3rmin4t0r/tez-broadcast-example/blob/master/src/main/java/org/notmysock/tez/BroadcastTest.java#L203&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/t3rmin4t0r/tez-broadcast-example/blob/master/src/main/java/org/notmysock/tez/BroadcastTest.java#L203&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Lines 203 and 195.&lt;/p&gt;</comment>
                            <comment id="14127485" author="elserj" created="Tue, 9 Sep 2014 20:18:16 +0000"  >&lt;p&gt;You&apos;re the man. That was exactly what I needed. I completely missed that I needed to add the resources to the DAG as well.&lt;/p&gt;

&lt;p&gt;I&apos;ll clean up my changes and post and updated patch here later today after I poke/prod it some more.&lt;/p&gt;</comment>
                            <comment id="14127789" author="elserj" created="Tue, 9 Sep 2014 23:37:12 +0000"  >&lt;p&gt;I have found one corner-case which I&apos;m still trying to maneuver around. The DAG code fails if local resources are added that already exist in the &quot;state&quot; of extra resources that are already going to be added. The problem is that you can&apos;t get find out what resources are already set to be localized for a DAG.&lt;/p&gt;

&lt;p&gt;I can call &lt;tt&gt;DAG#addTaskLocalFiles(Map&amp;lt;String, LocalResource&amp;gt;)&lt;/tt&gt; to add resources but that will fail if any of them happen to be already loaded. This seems to be lacking WRT to Vertex which also has a &lt;tt&gt;getTaskLocalFiles()&lt;/tt&gt; method. That&apos;s a Tez nit &amp;#8211; I can open a JIRA over there if you think that&apos;s necessary (or not already fixed upstream).&lt;/p&gt;

&lt;p&gt;This is the actual stack I&apos;m trying to work around:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.tez.dag.api.TezUncheckedException: Attempting to add duplicate resource: accumulo-fate-1.6.0.jar
	at org.apache.tez.common.TezCommonUtils.addAdditionalLocalResources(TezCommonUtils.java:307)
	at org.apache.tez.dag.api.Vertex.addTaskLocalFiles(Vertex.java:256)
	at org.apache.tez.dag.api.DAG.createDag(DAG.java:643)
	at org.apache.tez.client.TezClient.submitDAGSession(TezClient.java:372)
	at org.apache.tez.client.TezClient.submitDAG(TezClient.java:342)
	at org.apache.hadoop.hive.ql.exec.tez.TezTask.submit(TezTask.java:385)
	at org.apache.hadoop.hive.ql.exec.tez.TezTask.execute(TezTask.java:209)
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Essentially, we have a DAG, we tried to submit it to the Session we have, but the underlying application was dead (for testing purposes, because I &lt;tt&gt;kill&lt;/tt&gt;&apos;ed it, but this happens if you just wait long enough). The code gets a &lt;tt&gt;SessionNotRunning&lt;/tt&gt; exception, tries to &lt;tt&gt;closeAndOpen&lt;/tt&gt; &lt;/p&gt;</comment>
                            <comment id="14127798" author="elserj" created="Tue, 9 Sep 2014 23:39:56 +0000"  >&lt;p&gt;Ugh, published too soon:&lt;/p&gt;

&lt;p&gt;The code gets a &lt;tt&gt;SessionNotRunning&lt;/tt&gt; exception, tries to &lt;tt&gt;closeAndOpen&lt;/tt&gt; session, and then ultimately fails when it goes to submit the DAG. I believe I need to figure out a way to ensure the DAG doesn&apos;t have the extra local resources (from the StorageHandler) in the case where we start up a new Session, and then DAG would get the resources from that new Session (as opposed to the old session which didn&apos;t have the extra resources to begin with), but I&apos;m not 100% sure yet.&lt;/p&gt;</comment>
                            <comment id="14127901" author="elserj" created="Wed, 10 Sep 2014 01:39:24 +0000"  >&lt;p&gt;I think I finally got to the bottom of this, and it is broken with Tez-0.5.0.&lt;/p&gt;

&lt;p&gt;TezTask needs to be altered (as described by the previous discussion) to add the necessary StorageHandler resources to the DAG using&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;dag.addTaskLocalFiles(localResources);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For the case of the AccumuloStorageHandler, this adds the jars necessary to connect to Accumulo to &lt;tt&gt;commonTaskLocalFiles&lt;/tt&gt; in &lt;tt&gt;DAG&lt;/tt&gt;. Then, &lt;tt&gt;TezTask&lt;/tt&gt; will proceed to eventually submit the DAG to be run.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      &lt;span class=&quot;code-comment&quot;&gt;// ready to start execution on the cluster
&lt;/span&gt;      sessionState.getSession().addAppMasterLocalFiles(resourceMap);
      dagClient = sessionState.getSession().submitDAG(dag);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (SessionNotRunning nr) {
      console.printInfo(&lt;span class=&quot;code-quote&quot;&gt;&quot;Tez session was closed. Reopening...&quot;&lt;/span&gt;);

      &lt;span class=&quot;code-comment&quot;&gt;// close the old one, but keep the tmp files around
&lt;/span&gt;      TezSessionPoolManager.getInstance().closeAndOpen(sessionState, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.conf);
      console.printInfo(&lt;span class=&quot;code-quote&quot;&gt;&quot;Session re-established.&quot;&lt;/span&gt;);

      dagClient = sessionState.getSession().submitDAG(dag);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Consider the case where we had a Session already created for the user, but the underlying application has exited, say due to a timeout. In the try block, we try to submit our DAG to run. In doing so, TezClient creates a DAGPlan from the DAG&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DAGPlan dagPlan = dag.createDag(amConfig.getTezConfiguration());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When we create a &lt;tt&gt;DAGPlan&lt;/tt&gt; from the &lt;tt&gt;DAG&lt;/tt&gt;, we modify the &lt;tt&gt;DAG&lt;/tt&gt; instance, adding the local resources to each &lt;tt&gt;Vertex&lt;/tt&gt; in the &lt;tt&gt;DAG&lt;/tt&gt;. Then, we identify that the underlying application has already died, and that we need to &lt;tt&gt;closeAndOpen&lt;/tt&gt; a new Session. So, we get the &lt;tt&gt;SessionNotRunning&lt;/tt&gt; exception, pop out to the catch block, and end up creating another &lt;tt&gt;DAGPlan&lt;/tt&gt; from the &lt;tt&gt;DAG&lt;/tt&gt; &lt;em&gt;that was already altered by the last attempt to submit it&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;As I&apos;m looking at it, I don&apos;t think there&apos;s anything I can do at the Hive level to fix this because &lt;tt&gt;TezClient&lt;/tt&gt; will always try to add duplicate resources to the &lt;tt&gt;Vertex&lt;/tt&gt;&apos;s in a &lt;tt&gt;DAG&lt;/tt&gt; which throws an Exception and tanks the query.&lt;/p&gt;</comment>
                            <comment id="14127910" author="gopalv" created="Wed, 10 Sep 2014 01:43:05 +0000"  >&lt;p&gt;The basic part of the problem seems to have been solved, this is a second issue on top of the other.&lt;/p&gt;

&lt;p&gt;That looks like a rather corner case scenario of duplicate resource handling - can you file a Tez JIRA about this?&lt;/p&gt;</comment>
                            <comment id="14127923" author="elserj" created="Wed, 10 Sep 2014 01:52:21 +0000"  >&lt;p&gt;Yeah, you&apos;re totally right. I was getting hung up on this edge case and forgot and the first issue to fix. I&apos;ll open a tez jira for the above.&lt;/p&gt;</comment>
                            <comment id="14127977" author="elserj" created="Wed, 10 Sep 2014 03:13:42 +0000"  >&lt;p&gt;Patch against the tez branch which attempts to ensure that the Tez AM and the DAG both have the necessary extra local resources as required by a StorageHandler. Tried to add some tests which ensure modifications to TezTask work as expected.&lt;/p&gt;</comment>
                            <comment id="14128178" author="hiveqa" created="Wed, 10 Sep 2014 07:26:48 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667581/HIVE-7950.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667581/HIVE-7950.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6194 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/719/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/719/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/719/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/719/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-719/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-719/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667581&lt;/p&gt;</comment>
                            <comment id="14129032" author="elserj" created="Wed, 10 Sep 2014 20:21:42 +0000"  >&lt;p&gt;Updated patch. Needed to make a small change after getting past the Tez bug. Added some more unit tests and tried to clean things up.&lt;/p&gt;</comment>
                            <comment id="14129549" author="hiveqa" created="Thu, 11 Sep 2014 02:54:59 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667831/HIVE-7950.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667831/HIVE-7950.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6200 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
org.apache.hive.service.TestHS2ImpersonationWithRemoteMS.testImpersonation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/732/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/732/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/732/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/732/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-732/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-732/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667831&lt;/p&gt;</comment>
                            <comment id="14136784" author="elserj" created="Wed, 17 Sep 2014 05:09:22 +0000"  >&lt;p&gt;Test failures appear unrelated to me. Can anyone give this a review for me?&lt;/p&gt;</comment>
                            <comment id="14137633" author="sershe" created="Wed, 17 Sep 2014 17:50:36 +0000"  >&lt;p&gt;Can you post and RB? Mostly nits like if arrays are null there&apos;s no need to copy&lt;/p&gt;</comment>
                            <comment id="14137640" author="elserj" created="Wed, 17 Sep 2014 17:56:32 +0000"  >&lt;p&gt;Sure thing. RB is linked.&lt;/p&gt;</comment>
                            <comment id="14139238" author="elserj" created="Thu, 18 Sep 2014 17:46:37 +0000"  >&lt;p&gt;Updated patch with feedback from Sergey on RB.&lt;/p&gt;</comment>
                            <comment id="14139882" author="sershe" created="Fri, 19 Sep 2014 02:20:24 +0000"  >&lt;p&gt;+1, one nit on RB, can be fixed on commit.&lt;/p&gt;</comment>
                            <comment id="14139914" author="hiveqa" created="Fri, 19 Sep 2014 03:11:30 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12669758/HIVE-7950.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12669758/HIVE-7950.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6300 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/868/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/868/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/868/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/868/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-868/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-868/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12669758&lt;/p&gt;</comment>
                            <comment id="14141702" author="elserj" created="Sat, 20 Sep 2014 03:16:49 +0000"  >&lt;p&gt;Fixed your nit, Sergey. Thanks for taking the time to review &amp;#8211; much appreciated.&lt;/p&gt;</comment>
                            <comment id="14142210" author="hiveqa" created="Sat, 20 Sep 2014 21:50:38 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12670172/HIVE-7950.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12670172/HIVE-7950.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6307 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.streaming.TestStreaming.testInterleavedTransactionBatchCommits
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/900/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/900/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/900/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/900/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-900/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-900/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12670172&lt;/p&gt;</comment>
                            <comment id="14143673" author="sershe" created="Mon, 22 Sep 2014 19:38:43 +0000"  >&lt;p&gt;committed to trunk&lt;/p&gt;</comment>
                            <comment id="14144194" author="elserj" created="Tue, 23 Sep 2014 02:06:42 +0000"  >&lt;p&gt;Thanks for your help, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14210276" author="thejas" created="Thu, 13 Nov 2014 19:39:59 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12740305">TEZ-1563</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12666499" name="HIVE-7950-1.diff" size="4354" author="elserj" created="Thu, 4 Sep 2014 15:50:18 +0000"/>
                            <attachment id="12667581" name="HIVE-7950.2.patch" size="10011" author="elserj" created="Wed, 10 Sep 2014 03:13:42 +0000"/>
                            <attachment id="12667831" name="HIVE-7950.3.patch" size="14510" author="elserj" created="Wed, 10 Sep 2014 20:21:42 +0000"/>
                            <attachment id="12669758" name="HIVE-7950.4.patch" size="17720" author="elserj" created="Thu, 18 Sep 2014 17:46:37 +0000"/>
                            <attachment id="12670172" name="HIVE-7950.5.patch" size="17562" author="elserj" created="Sat, 20 Sep 2014 03:16:49 +0000"/>
                            <attachment id="12667363" name="hive-7950-tez-WIP.diff" size="3954" author="elserj" created="Tue, 9 Sep 2014 07:04:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zlun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>