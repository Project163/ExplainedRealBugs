<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:03:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3693] Performance regression introduced by HIVE-3483</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3693</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3483&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-3483&lt;/a&gt; introduced a performance regression in the client side during split computation.&lt;/p&gt;

&lt;p&gt;The client side spends a lot more time in the split computation phase. The problem is checkFilterPathContains method.&lt;/p&gt;

&lt;p&gt;While investigating, can you create a config to disable it by default?&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</description>
                <environment></environment>
        <key id="12615410">HIVE-3693</key>
            <summary>Performance regression introduced by HIVE-3483</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas Nair</assignee>
                                    <reporter username="gangtimliu">Gang Tim Liu</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Nov 2012 01:31:40 +0000</created>
                <updated>Thu, 10 Jan 2013 19:54:12 +0000</updated>
                            <resolved>Thu, 29 Nov 2012 09:26:48 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13493716" author="thejas" created="Fri, 9 Nov 2012 03:41:13 +0000"  >&lt;p&gt;Sorry about that !  I see it can cause performance issues where there are large number of partitions. Working on a simpler patch that does not try to deal with so many issues.&lt;/p&gt;</comment>
                            <comment id="13493721" author="gangtimliu" created="Fri, 9 Nov 2012 03:50:12 +0000"  >&lt;p&gt;A simpler and quicker way is to check shell.window before the method. may we do this before the simpler patch you refer to? Also it is consistent to other windows related patches.&lt;/p&gt;

&lt;p&gt;Thanks a lot&lt;/p&gt;

&lt;p&gt;Sent from my iPhone&lt;/p&gt;

</comment>
                            <comment id="13493725" author="thejas" created="Fri, 9 Nov 2012 04:05:07 +0000"  >&lt;p&gt;There is more change required than just adding a Shell.windows check in one place, because the code has been changed to use Path instead of Strings representation of paths. This was done because Path handles issues like some string representations have paths that start with &quot;/C:&quot; (result of Path.toUri().getPath()), while others have &quot;C:&quot; (Path.toString()). But once when Path comparison were introduced, I saw issues because given path in CombineFilter.accept(path) didn&apos;t have scheme but paths CombineFilter.filterPaths had scheme, and hence the change to make given path fully qualified in checkFilterPathContains.&lt;br/&gt;
Though using Path makes the code more extensible (eg in case of query against files on different file system, scheme should be considered), I think it needs a more holistic change is required to use it (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3616&quot; title=&quot;Use Paths consistently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3616&quot;&gt;&lt;del&gt;HIVE-3616&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;As a quick fix,I think the code can be changed back to using strings instead of path, and change the way path in accept(Path path) is converted to string - (replace Path.toString() with Path.toUri().toString().)&lt;/p&gt;</comment>
                            <comment id="13493770" author="gangtimliu" created="Fri, 9 Nov 2012 06:44:39 +0000"  >&lt;p&gt;OK.&lt;/p&gt;

&lt;p&gt;Maybe we revert &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3483&quot; title=&quot;joins using partitioned table give incorrect results on windows &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3483&quot;&gt;&lt;del&gt;HIVE-3483&lt;/del&gt;&lt;/a&gt; first? Then, find another solution for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3483&quot; title=&quot;joins using partitioned table give incorrect results on windows &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3483&quot;&gt;&lt;del&gt;HIVE-3483&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;thanks a lot&lt;/p&gt;</comment>
                            <comment id="13493775" author="namit" created="Fri, 9 Nov 2012 06:49:29 +0000"  >&lt;p&gt;I agree.&lt;/p&gt;

&lt;p&gt;Tim, can you file a patch which undoes &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3483&quot; title=&quot;joins using partitioned table give incorrect results on windows &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3483&quot;&gt;&lt;del&gt;HIVE-3483&lt;/del&gt;&lt;/a&gt; ?&lt;br/&gt;
We can think about how to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3483&quot; title=&quot;joins using partitioned table give incorrect results on windows &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3483&quot;&gt;&lt;del&gt;HIVE-3483&lt;/del&gt;&lt;/a&gt; subsequently.&lt;/p&gt;</comment>
                            <comment id="13493777" author="gangtimliu" created="Fri, 9 Nov 2012 06:52:06 +0000"  >&lt;p&gt;Yes, Namit.&lt;/p&gt;</comment>
                            <comment id="13493790" author="gangtimliu" created="Fri, 9 Nov 2012 07:17:21 +0000"  >&lt;p&gt;use hive-3696 to track patch revert. so this issue is not urgent. downgrade from critical to minor.&lt;/p&gt;

&lt;p&gt;please change priority as you feel.&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</comment>
                            <comment id="13494492" author="thejas" created="Sat, 10 Nov 2012 01:25:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3693&quot; title=&quot;Performance regression introduced by HIVE-3483&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3693&quot;&gt;&lt;del&gt;HIVE-3693&lt;/del&gt;&lt;/a&gt;.1.patch - Changes the Path to string conversions in CombineFilter to be consistent. Instead of using Path.toString() in one place and using Path.toUri().getPath() in other, using Path.toUri().getPath() in both places. &lt;/p&gt;</comment>
                            <comment id="13505318" author="thejas" created="Wed, 28 Nov 2012 09:11:02 +0000"  >&lt;p&gt;Review board request - &lt;a href=&quot;https://reviews.apache.org/r/8246/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/8246/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13506158" author="ashutoshc" created="Thu, 29 Nov 2012 02:18:17 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13506356" author="ashutoshc" created="Thu, 29 Nov 2012 09:26:48 +0000"  >&lt;p&gt;Committed to trunk and 0.10. Thanks, Thejas!&lt;/p&gt;</comment>
                            <comment id="13506608" author="hudson" created="Thu, 29 Nov 2012 17:32:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1825 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1825/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1825/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3693&quot; title=&quot;Performance regression introduced by HIVE-3483&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3693&quot;&gt;&lt;del&gt;HIVE-3693&lt;/del&gt;&lt;/a&gt; : Performance regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3483&quot; title=&quot;joins using partitioned table give incorrect results on windows &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3483&quot;&gt;&lt;del&gt;HIVE-3483&lt;/del&gt;&lt;/a&gt; (Thejas Nair via Ashutosh Chauhan) (Revision 1415098)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1415098&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1415098&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548192" author="hudson" created="Wed, 9 Jan 2013 10:24:45 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3693&quot; title=&quot;Performance regression introduced by HIVE-3483&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3693&quot;&gt;&lt;del&gt;HIVE-3693&lt;/del&gt;&lt;/a&gt; : Performance regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3483&quot; title=&quot;joins using partitioned table give incorrect results on windows &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3483&quot;&gt;&lt;del&gt;HIVE-3483&lt;/del&gt;&lt;/a&gt; (Thejas Nair via Ashutosh Chauhan) (Revision 1415098)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1415098&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1415098&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/CombineHiveInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550312" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:12 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12615429">HIVE-3696</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12608126">HIVE-3483</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12552943" name="HIVE-3693.1.patch" size="817" author="thejas" created="Sat, 10 Nov 2012 01:25:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256688</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iqf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>107374</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>