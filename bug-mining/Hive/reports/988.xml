<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:03:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3276] optimize union sub-queries</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3276</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;It might be a good idea to optimize simple union queries containing map-reduce jobs in at least one of the sub-qeuries.&lt;/p&gt;

&lt;p&gt;For eg:&lt;/p&gt;

&lt;p&gt;a query like:&lt;/p&gt;



&lt;p&gt;insert overwrite table T1 partition P1&lt;br/&gt;
select * from &lt;br/&gt;
(&lt;br/&gt;
  subq1&lt;br/&gt;
    union all&lt;br/&gt;
  subq2&lt;br/&gt;
) u;&lt;/p&gt;


&lt;p&gt;today creates 3 map-reduce jobs, one for subq1, another for subq2 and &lt;br/&gt;
the final one for the union. &lt;/p&gt;

&lt;p&gt;It might be a good idea to optimize this. Instead of creating the union &lt;br/&gt;
task, it might be simpler to create a move task (or something like a move&lt;br/&gt;
task), where the outputs of the two sub-queries will be moved to the final &lt;br/&gt;
directory. This can easily extend to more than 2 sub-queries in the union.&lt;/p&gt;

&lt;p&gt;This is very useful if there is a select * followed by filesink after the&lt;br/&gt;
union. This can be independently useful, and also be used to optimize the&lt;br/&gt;
skewed joins &amp;#8211; &lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Skewed+Join+Optimization&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Skewed+Join+Optimization&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;If there is a select, filter between the union and the filesink, the select&lt;br/&gt;
and the filter can be moved before the union, and the follow-up job can&lt;br/&gt;
still be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12599401">HIVE-3276</key>
            <summary>optimize union sub-queries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jul 2012 04:42:51 +0000</created>
                <updated>Mon, 15 Sep 2014 03:03:28 +0000</updated>
                            <resolved>Tue, 30 Oct 2012 23:40:02 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>12</watches>
                                                                                                                <comments>
                            <comment id="13422533" author="nadeemoidu" created="Wed, 25 Jul 2012 19:23:53 +0000"  >&lt;p&gt;A wiki page has been added for the same here &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Union+Optimization&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Union+Optimization&lt;/a&gt; . I have started work on this and will be uploading the patch soon. Feel free to give any feedback on the same. Thanks.&lt;/p&gt;</comment>
                            <comment id="13427510" author="nadeemoidu" created="Thu, 2 Aug 2012 18:20:15 +0000"  >&lt;p&gt;The patch is partially complete. &lt;a href=&quot;https://reviews.facebook.net/D4431&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D4431&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13428996" author="namit" created="Mon, 6 Aug 2012 06:49:20 +0000"  >&lt;p&gt;Looked at it in more detail.&lt;/p&gt;

&lt;p&gt;It might be cleaner to add a optimization step for this, which changes the operator tree.&lt;br/&gt;
The current approach is simpler to quickly get the code out, but may not be a good idea in the long run.&lt;br/&gt;
We have tried to keep all the optimizations pluggable, it helps with roll-outs, fixing bugs slowly etc.&lt;br/&gt;
With the current approach, it is very difficult to make this pluggable. Again, it it possible to check&lt;br/&gt;
the new conf. in GenMRUnion1, but it looks like a hacky approach.&lt;/p&gt;</comment>
                            <comment id="13432909" author="namit" created="Mon, 13 Aug 2012 04:13:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D4623&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D4623&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13433080" author="namit" created="Mon, 13 Aug 2012 11:51:18 +0000"  >&lt;p&gt;Some tests need to be added for this which should only be &lt;br/&gt;
enabled for hadoop 23.&lt;/p&gt;

&lt;p&gt;I am not able to run tests for hadoop 23.&lt;/p&gt;</comment>
                            <comment id="13436105" author="kevinwilfong" created="Thu, 16 Aug 2012 17:03:06 +0000"  >&lt;p&gt;Namit, is this ready for review?  You mention that more test need to be added, but the JIRA is marked Patch Available.&lt;/p&gt;</comment>
                            <comment id="13436176" author="namit" created="Thu, 16 Aug 2012 18:06:57 +0000"  >&lt;p&gt;I was able to run tests for hadoop 23.&lt;br/&gt;
I will upload the new patch soon.&lt;/p&gt;</comment>
                            <comment id="13436201" author="namit" created="Thu, 16 Aug 2012 18:32:39 +0000"  >&lt;p&gt;ShimLoader changes are copied from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3029&quot; title=&quot;Update ShimLoader to work with Hadoop 2.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3029&quot;&gt;&lt;del&gt;HIVE-3029&lt;/del&gt;&lt;/a&gt;, only to run tests on hadoop 23.&lt;br/&gt;
Once &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3029&quot; title=&quot;Update ShimLoader to work with Hadoop 2.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3029&quot;&gt;&lt;del&gt;HIVE-3029&lt;/del&gt;&lt;/a&gt; is checked in, this file will be reverted&lt;/p&gt;

&lt;p&gt;Also, to run tests for thew newly added tests only on hadoop 23:&lt;/p&gt;

&lt;p&gt;ant clean package&lt;/p&gt;


&lt;p&gt;ant test -Dhadoop.mr.rev=23 -Dtest.print.classpath=true -Dhadoop.version=2.0.0-alpha -Dhadoop.security.version=2.0.0-alpha -Dtestcase=TestCliDriver -Dqfile=union_remove_1.q,union_remove_2.q,union_remove_3.q,union_remove_4.q,union_remove_5.q,union_remove_6.q,union_remove_7.q,union_remove_8.q,union_remove_9.q,union_remove_10.q,union_remove_11.q,union_remove_12.q,union_remove_13.q,union_remove_14.q,union_remove_15.q,union_remove_16.q,union_remove_17.q,union_remove_18.q&lt;/p&gt;</comment>
                            <comment id="13436202" author="namit" created="Thu, 16 Aug 2012 18:32:58 +0000"  >&lt;p&gt;@Kevin, this is ready for review.&lt;/p&gt;</comment>
                            <comment id="13445843" author="namit" created="Fri, 31 Aug 2012 11:14:59 +0000"  >&lt;p&gt;refreshed&lt;/p&gt;</comment>
                            <comment id="13460188" author="namit" created="Fri, 21 Sep 2012 04:12:50 +0000"  >&lt;p&gt;All the tests ran fine&lt;/p&gt;</comment>
                            <comment id="13467221" author="kevinwilfong" created="Mon, 1 Oct 2012 21:44:54 +0000"  >&lt;p&gt;I posted a couple of minor comments and a bunch of questions in Phabricator.&lt;/p&gt;</comment>
                            <comment id="13467471" author="namit" created="Tue, 2 Oct 2012 04:30:44 +0000"  >&lt;p&gt;addressing comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13468414" author="namit" created="Wed, 3 Oct 2012 08:38:12 +0000"  >&lt;p&gt;comments addressed&lt;/p&gt;</comment>
                            <comment id="13468682" author="namit" created="Wed, 3 Oct 2012 17:20:46 +0000"  >&lt;p&gt;The tests finished fine&lt;/p&gt;</comment>
                            <comment id="13473244" author="namit" created="Wed, 10 Oct 2012 14:10:15 +0000"  >&lt;p&gt;will address comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13473935" author="cwsteinbach" created="Thu, 11 Oct 2012 08:04:52 +0000"  >&lt;p&gt;@Namit: I added two comments on phabricator. I&apos;m looking at this pretty late so feel free to ignore them.&lt;/p&gt;</comment>
                            <comment id="13475058" author="namit" created="Fri, 12 Oct 2012 15:11:05 +0000"  >&lt;p&gt;@Carl, comments addressed.&lt;/p&gt;</comment>
                            <comment id="13478012" author="namit" created="Wed, 17 Oct 2012 16:35:57 +0000"  >&lt;p&gt;addressed comments&lt;/p&gt;</comment>
                            <comment id="13478348" author="kevinwilfong" created="Wed, 17 Oct 2012 20:39:18 +0000"  >&lt;p&gt;I suspect this patch will introduce failures where a union involves a column of type double on one side and non-double on the other until this fix is in.&lt;/p&gt;</comment>
                            <comment id="13478349" author="kevinwilfong" created="Wed, 17 Oct 2012 20:39:53 +0000"  >&lt;p&gt;I was referring to  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3544&quot; title=&quot;union involving double column with a map join subquery will fail or give wrong results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3544&quot;&gt;&lt;del&gt;HIVE-3544&lt;/del&gt;&lt;/a&gt; in the above comment.&lt;/p&gt;</comment>
                            <comment id="13485957" author="namit" created="Mon, 29 Oct 2012 11:05:36 +0000"  >&lt;p&gt;addressed comments - added new tests for double/bigint conversion&lt;br/&gt;
refreshed patch + test outputs&lt;/p&gt;</comment>
                            <comment id="13486554" author="kevinwilfong" created="Tue, 30 Oct 2012 00:38:58 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13487374" author="kevinwilfong" created="Tue, 30 Oct 2012 23:40:02 +0000"  >&lt;p&gt;Committed, thanks Namit.&lt;/p&gt;</comment>
                            <comment id="13487852" author="hudson" created="Wed, 31 Oct 2012 15:27:29 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1767 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1767/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1767/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3276&quot; title=&quot;optimize union sub-queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3276&quot;&gt;&lt;del&gt;HIVE-3276&lt;/del&gt;&lt;/a&gt;. optimize union sub-queries. (njain via kevinwilfong) (Revision 1403928)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1403928&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1403928&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SelectOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRProcContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/unionproc/UnionProcContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/unionproc/UnionProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/unionproc/UnionProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ConditionalResolverMergeFiles.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FileSinkDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/SelectDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/skewjoin_union_remove_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/skewjoin_union_remove_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_10.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_11.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_12.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_13.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_14.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_15.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_16.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_17.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_18.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_19.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_21.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_22.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_23.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_24.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_5.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_6.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_7.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_8.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_9.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/skewjoin_union_remove_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/skewjoin_union_remove_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_10.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_11.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_12.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_13.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_14.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_15.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_16.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_17.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_18.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_19.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_21.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_22.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_23.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_24.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_5.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_7.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_8.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_9.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548115" author="hudson" created="Wed, 9 Jan 2013 10:24:27 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3276&quot; title=&quot;optimize union sub-queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3276&quot;&gt;&lt;del&gt;HIVE-3276&lt;/del&gt;&lt;/a&gt;. optimize union sub-queries. (njain via kevinwilfong) (Revision 1403928)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1403928&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1403928&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ColumnInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FileSinkOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/FilterOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/SelectOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Table.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRProcContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/unionproc/UnionProcContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/unionproc/UnionProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/unionproc/UnionProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ConditionalResolverMergeFiles.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/FileSinkDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/SelectDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/skewjoin_union_remove_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/skewjoin_union_remove_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_10.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_11.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_12.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_13.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_14.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_15.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_16.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_17.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_18.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_19.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_21.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_22.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_23.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_24.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_4.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_5.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_6.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_7.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_8.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/union_remove_9.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/skewjoin_union_remove_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/skewjoin_union_remove_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_1.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_10.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_11.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_12.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_13.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_14.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_15.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_16.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_17.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_18.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_19.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_21.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_22.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_23.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_24.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_4.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_5.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_6.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_7.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_8.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/union_remove_9.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550076" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:17 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="13979331" author="lefty@hortonworks.com" created="Thu, 24 Apr 2014 05:59:04 +0000"  >&lt;p&gt;For the record:  This added configuration parameters &lt;b&gt;hive.optimize.union.remove&lt;/b&gt; and &lt;b&gt;hive.mapred.supports.subdirectories&lt;/b&gt; to HiveConf.java and hive-default.xml.template.&lt;/p&gt;</comment>
                            <comment id="13996244" author="lefty@hortonworks.com" created="Tue, 13 May 2014 10:17:31 +0000"  >&lt;p&gt;The configuration parameters are now documented in the wiki:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.optimize.union.remove&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;hive.optimize.union.remove &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.mapred.supports.subdirectories&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;hive.mapred.supports.subdirectories &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12740835">HIVE-8054</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12607176">HIVE-3451</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12614075">HIVE-3643</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12602076">HIVE-3341</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12610746">HIVE-3544</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12603387">HIVE-3380</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12538931" name="HIVE-3276.1.patch" size="21684" author="nadeemoidu" created="Thu, 2 Aug 2012 18:22:03 +0000"/>
                            <attachment id="12547512" name="hive.3276.10.patch" size="490520" author="namit" created="Wed, 3 Oct 2012 08:37:59 +0000"/>
                            <attachment id="12548593" name="hive.3276.11.patch" size="491249" author="namit" created="Wed, 10 Oct 2012 17:57:10 +0000"/>
                            <attachment id="12548900" name="hive.3276.12.patch" size="491291" author="namit" created="Fri, 12 Oct 2012 15:10:50 +0000"/>
                            <attachment id="12549528" name="hive.3276.13.patch" size="492377" author="namit" created="Wed, 17 Oct 2012 16:35:45 +0000"/>
                            <attachment id="12551179" name="hive.3276.14.patch" size="509694" author="namit" created="Mon, 29 Oct 2012 11:04:49 +0000"/>
                            <attachment id="12540630" name="hive.3276.2.patch" size="293239" author="namit" created="Mon, 13 Aug 2012 09:16:28 +0000"/>
                            <attachment id="12541259" name="hive.3276.3.patch" size="319504" author="namit" created="Thu, 16 Aug 2012 18:31:09 +0000"/>
                            <attachment id="12543252" name="hive.3276.4.patch" size="314054" author="namit" created="Fri, 31 Aug 2012 11:14:48 +0000"/>
                            <attachment id="12545858" name="hive.3276.5.patch" size="373981" author="namit" created="Thu, 20 Sep 2012 06:02:49 +0000"/>
                            <attachment id="12545887" name="hive.3276.6.patch" size="462501" author="namit" created="Thu, 20 Sep 2012 11:37:59 +0000"/>
                            <attachment id="12545996" name="hive.3276.7.patch" size="463023" author="namit" created="Fri, 21 Sep 2012 04:07:34 +0000"/>
                            <attachment id="12546460" name="hive.3276.8.patch" size="466975" author="namit" created="Tue, 25 Sep 2012 07:06:06 +0000"/>
                            <attachment id="12547118" name="hive.3276.9.patch" size="467130" author="namit" created="Sat, 29 Sep 2012 16:33:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242116</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02iuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12656</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>