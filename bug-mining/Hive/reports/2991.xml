<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:28:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8850] ObjectStore:: rollbackTransaction() needs to be looked into further.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8850</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We can run into issues as described below:&lt;br/&gt;
Hive script adds 2800 partitions to a table and during this it can get a SQLState 08S01 &lt;span class=&quot;error&quot;&gt;&amp;#91;Communication Link Error&amp;#93;&lt;/span&gt; and bonecp kill all the connections in the pool. The partitions are added and a create table statement executes (Metering_IngestedData_Compressed). The map job finishes successfully and while moving the table to the hive warehouse the ObjectStore.java commitTransaction() raises the error: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12754944">HIVE-8850</key>
            <summary>ObjectStore:: rollbackTransaction() needs to be looked into further.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</assignee>
                                    <reporter username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Nov 2014 01:43:09 +0000</created>
                <updated>Thu, 12 Feb 2015 23:40:42 +0000</updated>
                            <resolved>Tue, 9 Dec 2014 01:11:27 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14209069" author="hsubramaniyan" created="Thu, 13 Nov 2014 01:44:25 +0000"  >&lt;p&gt;Stack Trace : &lt;/p&gt;

&lt;p&gt;2014-11-10 15:36:26,041 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: bonecp.ConnectionHandle (ConnectionHandle.java:markPossiblyBroken(388)) - Database access problem. Killing off this connection and all remaining connections in the connection pool. SQL State = 08S01&lt;br/&gt;
2014-11-10 15:36:26,043 WARN &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: metastore.ObjectStore (ObjectStore.java:getDatabase(504)) - JDODataStoreException using direct sql getting db: 6824349d_5e79_b4d7_aa8a_5e470e12bdd8. Falling back to ORM.&lt;br/&gt;
javax.jdo.JDODataStoreException: Read timed out&lt;br/&gt;
at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:451)&lt;br/&gt;
at org.datanucleus.api.jdo.JDOQuery.executeWithArray(JDOQuery.java:321)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.MetaStoreDirectSql.getDatabase(MetaStoreDirectSql.java:197)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.ObjectStore.getDatabase(ObjectStore.java:500)&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RawStoreProxy.invoke(RawStoreProxy.java:108)&lt;br/&gt;
at com.sun.proxy.$Proxy11.getDatabase(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_core(HiveMetaStore.java:1248)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_with_environment_context(HiveMetaStore.java:1332)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:105)&lt;br/&gt;
at com.sun.proxy.$Proxy13.create_table_with_environment_context(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:558)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:547)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:89)&lt;br/&gt;
at com.sun.proxy.$Proxy9.createTable(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:613)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:4203)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:281)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:153)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:85)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1508)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1275)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1093)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:916)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:906)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:423)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:359)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processReader(CliDriver.java:456)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processFile(CliDriver.java:466)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:749)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:686)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:625)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.util.RunJar.main(RunJar.java:212)&lt;br/&gt;
NestedThrowablesStackTrace:&lt;br/&gt;
com.microsoft.sqlserver.jdbc.SQLServerException: Read timed out&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1352)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.SQLServerConnection.terminate(SQLServerConnection.java:1339)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.TDSChannel.read(IOBuffer.java:1694)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.TDSReader.readPacket(IOBuffer.java:3734)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:5066)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.TDSCommand.startResponse(IOBuffer.java:5018)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.SQLServerConnection$1ConnectionCommand.doExecute(SQLServerConnection.java:1441)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4615)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:1400)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectionCommand(SQLServerConnection.java:1446)&lt;br/&gt;
at com.microsoft.sqlserver.jdbc.SQLServerConnection.setAutoCommit(SQLServerConnection.java:1594)&lt;br/&gt;
at com.jolbox.bonecp.ConnectionHandle.setAutoCommit(ConnectionHandle.java:1292)&lt;br/&gt;
at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getConnection(ConnectionFactoryImpl.java:440)&lt;br/&gt;
at org.datanucleus.store.rdbms.ConnectionFactoryImpl$ManagedConnectionImpl.getXAResource(ConnectionFactoryImpl.java:378)&lt;br/&gt;
at org.datanucleus.store.connection.ConnectionManagerImpl.allocateConnection(ConnectionManagerImpl.java:328)&lt;br/&gt;
at org.datanucleus.store.connection.AbstractConnectionFactory.getConnection(AbstractConnectionFactory.java:94)&lt;br/&gt;
at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:430)&lt;br/&gt;
at org.datanucleus.store.AbstractStoreManager.getConnection(AbstractStoreManager.java:396)&lt;br/&gt;
at org.datanucleus.store.rdbms.query.SQLQuery.performExecute(SQLQuery.java:262)&lt;br/&gt;
at org.datanucleus.store.query.Query.executeQuery(Query.java:1786)&lt;br/&gt;
at org.datanucleus.store.query.AbstractSQLQuery.executeWithArray(AbstractSQLQuery.java:339)&lt;br/&gt;
at org.datanucleus.api.jdo.JDOQuery.executeWithArray(JDOQuery.java:312)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.MetaStoreDirectSql.getDatabase(MetaStoreDirectSql.java:197)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.ObjectStore.getDatabase(ObjectStore.java:500)&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RawStoreProxy.invoke(RawStoreProxy.java:108)&lt;br/&gt;
at com.sun.proxy.$Proxy11.getDatabase(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_core(HiveMetaStore.java:1248)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_with_environment_context(HiveMetaStore.java:1332)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:105)&lt;br/&gt;
at com.sun.proxy.$Proxy13.create_table_with_environment_context(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:558)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:547)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:89)&lt;br/&gt;
at com.sun.proxy.$Proxy9.createTable(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:613)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:4203)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:281)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:153)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:85)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1508)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1275)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1093)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:916)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:906)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:423)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:359)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processReader(CliDriver.java:456)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processFile(CliDriver.java:466)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:749)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:686)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:625)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.util.RunJar.main(RunJar.java:212)&lt;br/&gt;
2014-11-10 15:36:28,876 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: metastore.ObjectStore (ObjectStore.java:commitTransaction(391)) - java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction&lt;br/&gt;
2014-11-10 15:36:28,882 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: metastore.RetryingHMSHandler (RetryingHMSHandler.java:invoke(143)) - MetaException(message:java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newMetaException(HiveMetaStore.java:4638)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_with_environment_context(HiveMetaStore.java:1346)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:105)&lt;br/&gt;
at com.sun.proxy.$Proxy13.create_table_with_environment_context(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:558)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:547)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:89)&lt;br/&gt;
at com.sun.proxy.$Proxy9.createTable(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:613)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:4203)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:281)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:153)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:85)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1508)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1275)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1093)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:916)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:906)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:423)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:359)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processReader(CliDriver.java:456)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processFile(CliDriver.java:466)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:749)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:686)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:625)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.util.RunJar.main(RunJar.java:212)&lt;br/&gt;
Caused by: java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction&lt;br/&gt;
at org.apache.hadoop.hive.metastore.ObjectStore.commitTransaction(ObjectStore.java:388)&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RawStoreProxy.invoke(RawStoreProxy.java:108)&lt;br/&gt;
at com.sun.proxy.$Proxy11.commitTransaction(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_core(HiveMetaStore.java:1300)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_with_environment_context(HiveMetaStore.java:1332)&lt;br/&gt;
... 38 more&lt;br/&gt;
2014-11-10 15:36:28,887 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: exec.DDLTask (DDLTask.java:execute(478)) - org.apache.hadoop.hive.ql.metadata.HiveException: MetaException(message:java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction)&lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:619)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.createTable(DDLTask.java:4203)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.DDLTask.execute(DDLTask.java:281)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:153)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:85)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.launchTask(Driver.java:1508)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:1275)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1093)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:916)&lt;br/&gt;
at org.apache.hadoop.hive.ql.Driver.run(Driver.java:906)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:423)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:359)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processReader(CliDriver.java:456)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.processFile(CliDriver.java:466)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:749)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:686)&lt;br/&gt;
at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:625)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.util.RunJar.main(RunJar.java:212)&lt;br/&gt;
Caused by: MetaException(message:java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.newMetaException(HiveMetaStore.java:4638)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_with_environment_context(HiveMetaStore.java:1346)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:105)&lt;br/&gt;
at com.sun.proxy.$Proxy13.create_table_with_environment_context(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:558)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.createTable(HiveMetaStoreClient.java:547)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RetryingMetaStoreClient.invoke(RetryingMetaStoreClient.java:89)&lt;br/&gt;
at com.sun.proxy.$Proxy9.createTable(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.ql.metadata.Hive.createTable(Hive.java:613)&lt;br/&gt;
... 23 more&lt;br/&gt;
Caused by: java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction&lt;br/&gt;
at org.apache.hadoop.hive.metastore.ObjectStore.commitTransaction(ObjectStore.java:388)&lt;br/&gt;
at sun.reflect.GeneratedMethodAccessor11.invoke(Unknown Source)&lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.RawStoreProxy.invoke(RawStoreProxy.java:108)&lt;br/&gt;
at com.sun.proxy.$Proxy11.commitTransaction(Unknown Source)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_core(HiveMetaStore.java:1300)&lt;br/&gt;
at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_with_environment_context(HiveMetaStore.java:1332)&lt;br/&gt;
... 38 more&lt;br/&gt;
2014-11-10 15:36:28,889 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: ql.Driver (SessionState.java:printError(547)) - FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.DDLTask. MetaException(message:java.lang.RuntimeException: commitTransaction was called but openTransactionCalls = 0. This probably indicates that there are unbalanced calls to openTransaction/commitTransaction)&lt;/p&gt;</comment>
                            <comment id="14209075" author="hsubramaniyan" created="Thu, 13 Nov 2014 01:48:29 +0000"  >&lt;p&gt;cc-ing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; for review.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14209594" author="hiveqa" created="Thu, 13 Nov 2014 11:11:06 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12681204/HIVE-8850.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12681204/HIVE-8850.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6686 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1769/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1769/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1769/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1769/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1769/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1769/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12681204 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14215309" author="sushanth" created="Mon, 17 Nov 2014 22:28:40 +0000"  >&lt;p&gt;In theory, from analyzing the codeflow path of open and close transactions, this looks like this is important to have. This is how I currently analyze the flow of how the variable openTransactions is affected:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
Methods that interact with openTransactions:

setConf
	&amp;gt; instantiates it to 0 the very first time we start.

openTransaction
	&amp;gt; Increments without any checks.
	&amp;gt; If after incrementing, its value is 1, then sets currentTransaction = pm.currentTransaction(), begins that trnasaction, and sests TXN_STATUS.OPEN
	&amp;gt; If openTransactionCalls &amp;gt; 1, and current transaction is non-null and active, all&apos;s good, returns
	~ If openTransactionCalls &amp;gt; 1, but current transaction is null or inactive, asserts (disabled in prod) but doesn&apos;t really handle anything.


rollbackTransaction
	&amp;gt; If openTransactionCalls &amp;lt; 1, returns saying there&apos;s no open transactions - from prior conditions, this can only happen if it&apos;s 0. Negative cannot happen.
	&amp;gt; sets openTransactionCalls to 0.
	&amp;gt; if current transaction is inactive, does nothing
	&amp;gt; If current transaction is active, and its status is TXN_STATUS.ROLLBACK, does nothing
	&amp;gt; If current transaction is active and its status is not TXN_STATUS.ROLLBACK, then does the following:
		+ sets status to TXN_STATUS.ROLLBACK 
		+ calls currentTransaction.rollback
		+ calls pm.evictAll
	~ If the transaction state goes inactive, we still have a case to evict, and that is what&apos;s being done in this patch.


commitTransaction
	&amp;gt; If current state is TXN_STATUS.ROLLBACK, returns false
	&amp;gt; If openTransactionCalls is &amp;lt;=0, errors out about unbalanced commitTransactions.
		&amp;gt; Technically, this can never be negative, it can only happen if it is 0.
		&amp;gt; Also, the only cases that lead to this state are if:
			a) More commitTransactions are called than the number of openTransactions that were called.
			b) rollbackTransaction was called, but for whatever reason, did not set TXN_STATUS.ROLLBACK, followed by calling commitTransaction later.
				- note that this can happen if the current transaction should become invalid for whatever reason before rollback is called. There does seem to be an issue here, in that rollback will not result in a full eviction in this case, but atleast we error here in a valid way.
	&amp;gt; If current transaction is not active, throws an error identical to the previous case. This is probably not good if we need to ever distinguish between these two cases, and if the current transaction might wind up being inactive for whatever other reason.
	&amp;gt; decrements if it should apply successfully.
	&amp;gt; If the result of the decrement gets it to 0, and current transaction is active, then commits the current transaction, and ssets status to TXN_STATUS.COMMITTED

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So, it would seem that this patch is correct and needed. However, since this is a sensitive area, I&apos;m trying to follow call stacks to rollback and commit transaction to make sure I&apos;m not misreading this.&lt;/p&gt;</comment>
                            <comment id="14217027" author="sushanth" created="Tue, 18 Nov 2014 23:17:53 +0000"  >&lt;p&gt;In addition to the rollback issue here, there&apos;s one more nasty interplay here between open and rollback - open after a rollback will simply go ahead and nuke out the txn state and simply increment transaction count. Thus, the following can now happen:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;setConf (count = 0)
openTransaction (count = 1)
        openTransaction (count = 2)
                (... some code that fails ...)
        rollbackTransaction (count = 0)
        openTransaction (count = 1)
                (... some code that succeeds ...)
        commitTransaction (count = 0)
commitTransaction (count = -1)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Normally, a rollback makes it so subsequent commits will realize that it&apos;s rolling back, so they do nothing, but if there is ever code that tries to call an open again instead of going down the commit chain, we have a problem.&lt;/p&gt;

&lt;p&gt;Again, normally, this shouldn&apos;t happen, because the rollback is indicative that this txn should fail, and to roll all the way out. The case where it wouldn&apos;t do that, however, is if we are inside a direct sql helper, where we attempt to use direct sql, open a txn, fail, rollback, and then fail back to using jdo, where we open a transaction again, and have that succeed.&lt;/p&gt;

&lt;p&gt;Now, ordinarily, this situation is also protected against, since the directsql portion does not open a new transaction and roll that back if it detects that it&apos;s already inside a transaction. However, directsql&apos;s detection of whether or not it is in a nested transaction is to simply check if there is already a transaction which is active. This can sometimes not be the case if the transaction got invalidated (set inactive, effectively) by bonecp, etc. In that scenario, we wind up with this behaviour described above, where directsql decides that isInTxn is false (since the current txn is invalid), and then it opens a txn for the directsql part, and if that fails, will rollback.&lt;/p&gt;

&lt;p&gt;Tagging &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt; to share this headache with him as well. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14217215" author="sushanth" created="Wed, 19 Nov 2014 01:23:40 +0000"  >&lt;p&gt;Also tagging &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;ctang.ma&lt;/a&gt;, since they&apos;re also hit issues over at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8891&quot; title=&quot;Another possible cause to NucleusObjectNotFoundException from drops/rollback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8891&quot;&gt;&lt;del&gt;HIVE-8891&lt;/del&gt;&lt;/a&gt;, and I&apos;d like to get some more eyeballs on this.&lt;/p&gt;</comment>
                            <comment id="14217231" author="sushanth" created="Wed, 19 Nov 2014 01:34:02 +0000"  >&lt;p&gt;(Also, for context, one thing I should explicitly call out here is the reason for the original change here is that the transaction seems to have been invalidated by bonecp, so it does not satisfy the if condition for (currentTransaction.isActive() &amp;amp;&amp;amp; transactionStatus != TXN_STATUS.ROLLBACK) when rollback is first called. Thus, as a result of that, we never set TXN_STATUS.ROLLBACK, which then causes commits further on from proceeding without realizing it shouldn&apos;t.)&lt;/p&gt;</comment>
                            <comment id="14218230" author="ctang.ma" created="Wed, 19 Nov 2014 17:55:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; Thanks for the deep insight and analysis to the cause of the &quot;unbalanced calls to openTransaction/commitTransaction&quot; issue. I think &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8891&quot; title=&quot;Another possible cause to NucleusObjectNotFoundException from drops/rollback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8891&quot;&gt;&lt;del&gt;HIVE-8891&lt;/del&gt;&lt;/a&gt; is slightly different from the issue here and it just ensures to clean PersistenceManager cache after rollback to avoid the NucleusObjectNotFoundException and should not involve in the nested txn count issue.&lt;br/&gt;
Because rollbackTransaction always resets the openTransactionCalls to 0, so even if you set the transactionStatus to TXN_STATUS.ROLLBACK regardless in rollbackTrasaction, in the nested transaction example you gave above (e.g. sqldirect fallback to jdo), the nested openTransaction following rollbackTransaction will set it back to TXN_STATUS.OPEN, and patch provided here would still not solve the issue for this example, is it right?&lt;/p&gt;</comment>
                            <comment id="14218356" author="sushanth" created="Wed, 19 Nov 2014 19:31:04 +0000"  >&lt;p&gt;Yeah, I agree &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8891&quot; title=&quot;Another possible cause to NucleusObjectNotFoundException from drops/rollback&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8891&quot;&gt;&lt;del&gt;HIVE-8891&lt;/del&gt;&lt;/a&gt; is different, and is necessary as well - I called you guys in here so that I have more people familiar with this looking at this as well. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;And yes, the patch provided here would still not solve the issue. It&apos;s a good first step in that it solves the issue of commitTransaction after a rollbackTransaction where the connection is invalidated in the background by something else, such as bonecp, but it does not yet solve the issue of an openTransaction after a rollbackTransaction in a nested scope.&lt;/p&gt;</comment>
                            <comment id="14220059" author="sushanth" created="Thu, 20 Nov 2014 21:43:00 +0000"  >&lt;p&gt;Attaching updated patch that I believe solves this issue. (Also incorporates Hari&apos;s original patch)&lt;/p&gt;</comment>
                            <comment id="14220072" author="sushanth" created="Thu, 20 Nov 2014 21:50:16 +0000"  >&lt;p&gt;Note also, that the result of this is that the directsql attempt of getDatabase will not have a rollback executed on it if it fails before falling back to jdo, but that is fine, I think, since it&apos;s a read-only operation, and thus, does not need rollback.&lt;/p&gt;</comment>
                            <comment id="14220096" author="sushanth" created="Thu, 20 Nov 2014 22:02:08 +0000"  >&lt;p&gt;Cancelling second patch, there is still another issue with this.&lt;/p&gt;</comment>
                            <comment id="14220200" author="sushanth" created="Thu, 20 Nov 2014 23:20:19 +0000"  >&lt;p&gt;Earlier bug fixed.&lt;/p&gt;</comment>
                            <comment id="14221760" author="hiveqa" created="Sat, 22 Nov 2014 02:29:18 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12682774/HIVE-8850.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12682774/HIVE-8850.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6666 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.hcatalog.streaming.TestStreaming.testEndpointConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1859/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1859/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1859/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1859/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1859/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1859/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12682774 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14223577" author="sushanth" created="Mon, 24 Nov 2014 21:47:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;ctang.ma&lt;/a&gt;, can I bug one of you for a review of this? &lt;a href=&quot;https://reviews.apache.org/r/28408/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/28408/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14223582" author="brocknoland" created="Mon, 24 Nov 2014 21:50:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;ctang.ma&lt;/a&gt; I know you&apos;ve looked at this recently. Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="14225426" author="ctang.ma" created="Tue, 25 Nov 2014 23:52:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; The patch looks good. I left a couple of questions on the RB, could you help clarify them? Thanks.&lt;/p&gt;</comment>
                            <comment id="14236416" author="sushanth" created="Sat, 6 Dec 2014 00:59:29 +0000"  >&lt;p&gt;Updated patch per review comments and further testing.&lt;/p&gt;</comment>
                            <comment id="14236617" author="hiveqa" created="Sat, 6 Dec 2014 05:50:47 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12685484/HIVE-8850.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12685484/HIVE-8850.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6696 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_decimal_aggregate
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1978/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1978/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1978/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1978/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1978/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1978/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12685484 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14237191" author="ctang.ma" created="Sun, 7 Dec 2014 16:16:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; Thanks for the clarifications to the questions in RB and updating the patch. It looks good to me. &lt;/p&gt;</comment>
                            <comment id="14238783" author="sushanth" created="Tue, 9 Dec 2014 01:06:39 +0000"  >&lt;p&gt;Since the latest patch is very similar in state to what Hari initially came up with except for the change to openTransaction that Chaoyu suggested, I think it&apos;s fair to reassign back to Hari for this, doing so, and will commit with my +1 and Chaoyu&apos;s.&lt;/p&gt;</comment>
                            <comment id="14238787" author="sushanth" created="Tue, 9 Dec 2014 01:10:47 +0000"  >&lt;p&gt;Committed. Thanks, Hari &amp;amp; Chaoyu.&lt;/p&gt;</comment>
                            <comment id="14238789" author="sushanth" created="Tue, 9 Dec 2014 01:11:27 +0000"  >&lt;p&gt;(No documentation required, just a bugfix)&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12661631">HIVE-4996</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12753835">HIVE-8786</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12755644">HIVE-8891</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12681204" name="HIVE-8850.1.patch" size="1213" author="hsubramaniyan" created="Thu, 13 Nov 2014 01:48:29 +0000"/>
                            <attachment id="12682750" name="HIVE-8850.2.patch" size="4576" author="sushanth" created="Thu, 20 Nov 2014 21:43:00 +0000"/>
                            <attachment id="12682774" name="HIVE-8850.3.patch" size="4701" author="sushanth" created="Thu, 20 Nov 2014 23:20:19 +0000"/>
                            <attachment id="12685484" name="HIVE-8850.4.patch" size="2370" author="sushanth" created="Sat, 6 Dec 2014 00:56:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 50 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22b8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>