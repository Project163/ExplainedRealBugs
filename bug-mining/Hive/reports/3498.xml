<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:33:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10659] Beeline command which contains semi-colon as a non-command terminator will fail</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10659</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Consider a scenario where beeline is used to connect to a mysql server. The commands executed via beeline can include stored procedures. For e.g. the following command used to create a stored procedure is a valid command :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE PROCEDURE RM_TLBS_LINKID() BEGIN IF EXISTS (SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_NAME` = &lt;span class=&quot;code-quote&quot;&gt;&apos;TBLS&apos;&lt;/span&gt; AND `COLUMN_NAME` = &lt;span class=&quot;code-quote&quot;&gt;&apos;LINK_TARGET_ID&apos;&lt;/span&gt;) THEN ALTER TABLE `TBLS` DROP FOREIGN KEY `TBLS_FK3` ; ALTER TABLE `TBLS` DROP KEY `TBLS_N51` ; ALTER TABLE `TBLS` DROP COLUMN `LINK_TARGET_ID` ; END IF; END
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;MySQL stored procedures have semi-colon ( ; ) as the statement terminator. Since this coincides with beeline&apos;s only available command terminator, semi-colon, beeline will not able to execute the above command successfully . i.e, beeline tries to execute the below partial command instead of the complete command shown above.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE PROCEDURE RM_TLBS_LINKID() BEGIN IF EXISTS (SELECT * FROM `INFORMATION_SCHEMA`.`COLUMNS` WHERE `TABLE_NAME` = &lt;span class=&quot;code-quote&quot;&gt;&apos;TBLS&apos;&lt;/span&gt; AND `COLUMN_NAME` = &lt;span class=&quot;code-quote&quot;&gt;&apos;LINK_TARGET_ID&apos;&lt;/span&gt;) THEN ALTER TABLE `TBLS` DROP FOREIGN KEY `TBLS_FK3` ; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;The above situation can actually happen within Hive when Hive SchemaTool is used to upgrade a mysql metastore db and the scripts used for the upgrade process contain stored procedures(as the one introduced initially by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7018&quot; title=&quot;Table and Partition tables have column LINK_TARGET_ID in Mysql scripts but not others&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7018&quot;&gt;&lt;del&gt;HIVE-7018&lt;/del&gt;&lt;/a&gt;). As of now, we cannot have any stored procedure as part of MySQL metastore db upgrade scripts because schemaTool uses beeline to connect to MySQL. As of now, beeline fails to execute any &quot;create procedure&quot; command or similar command containing ; . This is a serious limitation; it needs to be fixed by allowing the end user to provide an option to beeline to not use  semi-colon as the command delimiter and instead use new line character as the command delimiter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12828488">HIVE-10659</key>
            <summary>Beeline command which contains semi-colon as a non-command terminator will fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</assignee>
                                    <reporter username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 May 2015 20:58:12 +0000</created>
                <updated>Mon, 15 May 2017 03:37:44 +0000</updated>
                            <resolved>Wed, 20 May 2015 22:49:29 +0000</resolved>
                                                    <fixVersion>1.2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14535795" author="hsubramaniyan" created="Fri, 8 May 2015 22:43:26 +0000"  >&lt;p&gt;cc-ing &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; / &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; for review. I tested this with the initially committed patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7018&quot; title=&quot;Table and Partition tables have column LINK_TARGET_ID in Mysql scripts but not others&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7018&quot;&gt;&lt;del&gt;HIVE-7018&lt;/del&gt;&lt;/a&gt; and it seems to resolve the issue that we found in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10614&quot; title=&quot;schemaTool upgrade from 0.14.0 to 1.3.0 causes failure&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10614&quot;&gt;&lt;del&gt;HIVE-10614&lt;/del&gt;&lt;/a&gt;. Once this patch goes in, we should be able to get &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7018&quot; title=&quot;Table and Partition tables have column LINK_TARGET_ID in Mysql scripts but not others&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7018&quot;&gt;&lt;del&gt;HIVE-7018&lt;/del&gt;&lt;/a&gt; in as well.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14537029" author="hiveqa" created="Sun, 10 May 2015 05:01:39 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12731639/HIVE-10659.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12731639/HIVE-10659.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 8921 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_corr
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_static
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3836/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3836/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3836/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3836/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3836/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3836/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12731639 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14538287" author="hsubramaniyan" created="Mon, 11 May 2015 17:56:19 +0000"  >&lt;p&gt;The above failures are unrelated to the changes.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14553220" author="sushanth" created="Wed, 20 May 2015 22:05:46 +0000"  >&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="14553275" author="sushanth" created="Wed, 20 May 2015 22:49:29 +0000"  >&lt;p&gt;Committed to branch-1.2 and master. Thanks, Hari!&lt;/p&gt;</comment>
                            <comment id="14557254" author="lefty@hortonworks.com" created="Sat, 23 May 2015 10:02:58 +0000"  >&lt;p&gt;This should be documented in the wiki.  I&apos;m not adding a TODOC label because we don&apos;t have one for 1.2.1, but we could use the TODOC1.2 label.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-Beeline&#8211;NewCommandLineShell&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HiveServer2 Clients &amp;#8211; Beeline &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14561901" author="sushanth" created="Wed, 27 May 2015 22:45:49 +0000"  >&lt;p&gt;Thanks for the spot, Lefty - created new label. Ultimately, though, 1.2.1 will replace 1.2.0, so I guess TODOC1.2 would have sufficed - I added this in the meanwhile anyway.&lt;/p&gt;</comment>
                            <comment id="14564406" author="hsubramaniyan" created="Fri, 29 May 2015 08:24:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; Thanks for the previous comments. Sorry for the misleading title here; my bad, I should have mentioned that this fix proposed here is intended to fix the delimiter issue only when beeline is accessed via schematool. I.e, this change is internal and is used only by the hive schematool and need not be documented. For the general solution to the issue mentioned in the jira, i.e. for beeline to support this feature we need to introduce a command similar to DELIMITER used in MySQL client. This will be covered under &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10865&quot; title=&quot;Beeline needs to support DELIMITER command&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10865&quot;&gt;&lt;del&gt;HIVE-10865&lt;/del&gt;&lt;/a&gt; and should hopefully make it for 1.3 release.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14564413" author="lefty@hortonworks.com" created="Fri, 29 May 2015 08:30:18 +0000"  >&lt;p&gt;Cool.  Thanks Hari.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12712506">HIVE-7018</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12827417">HIVE-10614</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12833714">HIVE-10865</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12779899">HIVE-9877</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12731639" name="HIVE-10659.1.patch" size="4643" author="hsubramaniyan" created="Fri, 8 May 2015 22:43:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ei27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>