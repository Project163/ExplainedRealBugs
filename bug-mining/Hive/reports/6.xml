<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:50:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-72] wrong results if partition pruning not strict and no mep-reduce job needed</title>
                <link>https://issues.apache.org/jira/browse/HIVE-72</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Suppose T is a partitioned table on ds, where ds is a string column, the following queries:&lt;/p&gt;

&lt;p&gt; SELECT a.* FROM T a WHERE a.ds=2008-09-08 LIMIT 1;&lt;br/&gt;
 SELECT a.* FROM T a WHERE a.ds=2008-11-10 LIMIT 1;&lt;/p&gt;


&lt;p&gt;return the first row from the first partition.&lt;/p&gt;



&lt;p&gt;This is because of the typecast to double.&lt;/p&gt;

&lt;p&gt;for a.ds=2008-01-01 or anything (a.ds=1),&lt;/p&gt;

&lt;p&gt; evaluate (Double, Double) is invoked at partition pruning.&lt;/p&gt;

&lt;p&gt;Since &apos;2008-11-01&apos; is not a valid double, it is converted to a null, and therefore the result of pruning returns null (unknown) - not FALSE.&lt;br/&gt;
All unknowns are also accepted, therefore all partitions are accepted which explains this behavior.&lt;/p&gt;

&lt;p&gt;filter is not invoked since it is a select * query, so map-reduce job is started.&lt;br/&gt;
We just turn off this optimization if pruning indicates that there can be unknown partitions. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12408781">HIVE-72</key>
            <summary>wrong results if partition pruning not strict and no mep-reduce job needed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Nov 2008 22:22:20 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:30 +0000</updated>
                            <resolved>Thu, 20 Nov 2008 22:29:49 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12648794" author="athusoo" created="Tue, 18 Nov 2008 23:05:54 +0000"  >&lt;p&gt;I think the correct way for this is to return something from the prune call to indicate that there were some unknown partitions.&lt;/p&gt;

&lt;p&gt;Inline Comments&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/parse/PartitionPruner.java:278	incomplete javadocs.&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:2938	What happens in case the parts are actually 0 i.e. no parts match the criteria (they are not unknown but they all return false). We would in that case not be making this optimization. The test case for that would be select * from srcpart where srcpart.ds = &apos;2000-01-01&apos; in our tests. We clearly do not want to turn off the optimization when this happens. right? &lt;/p&gt;</comment>
                            <comment id="12648838" author="namit" created="Wed, 19 Nov 2008 00:36:51 +0000"  >&lt;p&gt;changed prune() to return the two lists: confirmed and unknown separately and let the client handle it&lt;/p&gt;</comment>
                            <comment id="12649502" author="athusoo" created="Thu, 20 Nov 2008 22:14:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good to me.&lt;/p&gt;</comment>
                            <comment id="12649509" author="dhruba" created="Thu, 20 Nov 2008 22:29:49 +0000"  >&lt;p&gt;I just committed this. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12394370" name="patch1.mapred.txt" size="8925" author="namit" created="Thu, 20 Nov 2008 22:11:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l7of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121894</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>