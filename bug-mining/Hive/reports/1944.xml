<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:16:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6403] uncorrelated subquery is failing with auto.convert.join=true</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6403</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Fixing &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5690&quot; title=&quot;Support subquery for single sourced multi query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5690&quot;&gt;HIVE-5690&lt;/a&gt;, I&apos;ve found query in subquery_multiinsert.q is not working with hive.auto.convert.join=true &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;set hive.auto.convert.join=true;
hive&amp;gt; explain
    &amp;gt; from src b 
    &amp;gt; INSERT OVERWRITE TABLE src_4 
    &amp;gt;   select * 
    &amp;gt;   where b.key in 
    &amp;gt;    (select a.key 
    &amp;gt;     from src a 
    &amp;gt;     where b.value = a.value and a.key &amp;gt; &apos;9&apos;
    &amp;gt;    ) 
    &amp;gt; INSERT OVERWRITE TABLE src_5 
    &amp;gt;   select *  
    &amp;gt;   where b.key not in  ( select key from src s1 where s1.key &amp;gt; &apos;2&apos;) 
    &amp;gt;   order by key 
    &amp;gt; ;
java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
	at java.util.ArrayList.rangeCheck(ArrayList.java:635)
	at java.util.ArrayList.get(ArrayList.java:411)
	at org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genMapJoinLocalWork(MapJoinProcessor.java:149)
	at org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genLocalWorkForMapJoin(MapJoinProcessor.java:256)
	at org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genMapJoinOpAndLocalWork(MapJoinProcessor.java:248)
	at org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.convertTaskToMapJoinTask(CommonJoinTaskDispatcher.java:191)
	at org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.processCurrentTask(CommonJoinTaskDispatcher.java:481)
	at org.apache.hadoop.hive.ql.optimizer.physical.AbstractJoinTaskDispatcher.dispatch(AbstractJoinTaskDispatcher.java:182)
	at org.apache.hadoop.hive.ql.lib.TaskGraphWalker.dispatch(TaskGraphWalker.java:111)
	at org.apache.hadoop.hive.ql.lib.TaskGraphWalker.walk(TaskGraphWalker.java:194)
	at org.apache.hadoop.hive.ql.lib.TaskGraphWalker.startWalking(TaskGraphWalker.java:139)
	at org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinResolver.resolve(CommonJoinResolver.java:79)
	at org.apache.hadoop.hive.ql.optimizer.physical.PhysicalOptimizer.optimize(PhysicalOptimizer.java:100)
	at org.apache.hadoop.hive.ql.parse.MapReduceCompiler.optimizeTaskPlan(MapReduceCompiler.java:290)
	at org.apache.hadoop.hive.ql.parse.TaskCompiler.compile(TaskCompiler.java:216)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:9167)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)
	at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:64)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)
	at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:446)
	at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:346)
	at org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1056)
	at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1099)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:992)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:982)
	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:424)
	at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:793)
	at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:687)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:626)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:160)
org.apache.hadoop.hive.ql.parse.SemanticException: Failed to generate new mapJoin operator by exception : Index: 0, Size: 0
	at org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genLocalWorkForMapJoin(MapJoinProcessor.java:266)
	at org.apache.hadoop.hive.ql.optimizer.MapJoinProcessor.genMapJoinOpAndLocalWork(MapJoinProcessor.java:248)
	at org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.convertTaskToMapJoinTask(CommonJoinTaskDispatcher.java:191)
	at org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinTaskDispatcher.processCurrentTask(CommonJoinTaskDispatcher.java:481)
	at org.apache.hadoop.hive.ql.optimizer.physical.AbstractJoinTaskDispatcher.dispatch(AbstractJoinTaskDispatcher.java:182)
	at org.apache.hadoop.hive.ql.lib.TaskGraphWalker.dispatch(TaskGraphWalker.java:111)
	at org.apache.hadoop.hive.ql.lib.TaskGraphWalker.walk(TaskGraphWalker.java:194)
	at org.apache.hadoop.hive.ql.lib.TaskGraphWalker.startWalking(TaskGraphWalker.java:139)
	at org.apache.hadoop.hive.ql.optimizer.physical.CommonJoinResolver.resolve(CommonJoinResolver.java:79)
	at org.apache.hadoop.hive.ql.optimizer.physical.PhysicalOptimizer.optimize(PhysicalOptimizer.java:100)
	at org.apache.hadoop.hive.ql.parse.MapReduceCompiler.optimizeTaskPlan(MapReduceCompiler.java:290)
	at org.apache.hadoop.hive.ql.parse.TaskCompiler.compile(TaskCompiler.java:216)
	at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:9167)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)
	at org.apache.hadoop.hive.ql.parse.ExplainSemanticAnalyzer.analyzeInternal(ExplainSemanticAnalyzer.java:64)
	at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)
	at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:446)
	at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:346)
	at org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:1056)
	at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1099)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:992)
	at org.apache.hadoop.hive.ql.Driver.run(Driver.java:982)
	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:424)
	at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:793)
	at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:687)
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:626)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:606)
	at org.apache.hadoop.util.RunJar.main(RunJar.java:160)
FAILED: SemanticException Generate Map Join Task Error: Failed to generate new mapJoin operator by exception : Index: 0, Size: 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12694413">HIVE-6403</key>
            <summary>uncorrelated subquery is failing with auto.convert.join=true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="navis">Navis Ryu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Feb 2014 02:33:07 +0000</created>
                <updated>Sat, 8 Mar 2014 17:24:32 +0000</updated>
                            <resolved>Sat, 8 Mar 2014 17:24:21 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13897467" author="navis" created="Tue, 11 Feb 2014 02:33:55 +0000"  >&lt;p&gt;I wish I could fix this but it&apos;s way out of my ability. Could you check this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhbutani&quot; class=&quot;user-hover&quot; rel=&quot;rhbutani&quot;&gt;rhbutani&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="13897608" author="rhbutani" created="Tue, 11 Feb 2014 07:38:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; I am no expert on the MapJoinProcessor. Following is what I see; I will need to spend more time on this.&lt;br/&gt;
Maybe from my comments you can see the issue.&lt;/p&gt;

&lt;p&gt;1. The Plan generated at genPlan is:&lt;br/&gt;
TS&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; (the scan for b) has 2 child operators: [RS&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;, RS&lt;span class=&quot;error&quot;&gt;&amp;#91;25&amp;#93;&lt;/span&gt;] &lt;br/&gt;
These are for the joins for each of the SubQuery expressions:&lt;br/&gt;
b.key in &lt;br/&gt;
   (select a.key &lt;br/&gt;
    from src a &lt;br/&gt;
    where b.value = a.value and a.key &amp;gt; &apos;9&apos;&lt;br/&gt;
   ) &lt;br/&gt;
and &lt;br/&gt;
b.key not in  ( select key from src s1 where s1.key &amp;gt; &apos;2&apos;) &lt;/p&gt;

&lt;p&gt;The plan looks complex because the handling of not in requires the null check. This issue will occur even if the second insert is a &apos;in&apos; subquery predicate. It will be easier to follow for such an e.g.&lt;/p&gt;

&lt;p&gt;2. With set hive.auto.convert.join=false&lt;br/&gt;
The second RS gets converted to a FileSink. You can observe this from the explain output. A subsequent Stage reads this intermediate output to perform the processing for the 2nd SubQuery.&lt;/p&gt;

&lt;p&gt;3. With set hive.auto.convert.join=true;&lt;br/&gt;
When it comes to CommonJoinResolver the TS&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; has children [RS&lt;span class=&quot;error&quot;&gt;&amp;#91;4&amp;#93;&lt;/span&gt;, FS&lt;span class=&quot;error&quot;&gt;&amp;#91;44&amp;#93;&lt;/span&gt;] ie the 2nd ReduceSink is converted to a FileSink&lt;br/&gt;
The MapJoinProcessor:genMapJoinLocalWork line 145 it is assuming that a TableScanOp can only have 1 child. &lt;br/&gt;
The fix maybe to ignore any FileSink operators that are children of TableScan. Another test to add is a multi insert on 3 tables.&lt;/p&gt;
</comment>
                            <comment id="13898852" author="rhbutani" created="Wed, 12 Feb 2014 06:29:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; could you please review.&lt;/p&gt;</comment>
                            <comment id="13898882" author="navis" created="Wed, 12 Feb 2014 07:14:56 +0000"  >&lt;p&gt;I think CommonJoinTaskDispatcher#getPosition() depends on wrong assumption that top operator has only a child (or resultingly a child like LV cases). We should track up (child to parent) big aliases from bigTableCandidates, opposed to current way.&lt;/p&gt;</comment>
                            <comment id="13899299" author="rhbutani" created="Wed, 12 Feb 2014 17:22:20 +0000"  >&lt;p&gt;What I see is that for the Multi Insert with SubQuery case:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the first child will be a ReduceSink; other child is converted to FileSink by the time it gets to CommonJoinTaskDispatcher.&lt;/li&gt;
	&lt;li&gt;so for the Multi Insert SubQuery case checking the first child is still ok.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;But yes this check that other children are FileSink, should be done in CommonJoinTaskDispatcher#getPosition&lt;/p&gt;

&lt;p&gt;Beyond the above point; I am sorry, I don&apos;t follow what else you are proposing. Can you please elaborate.&lt;/p&gt;</comment>
                            <comment id="13900013" author="navis" created="Thu, 13 Feb 2014 04:39:52 +0000"  >&lt;p&gt;This is the change what I&apos;ve meant. Could you check this?&lt;/p&gt;</comment>
                            <comment id="13900676" author="rhbutani" created="Thu, 13 Feb 2014 20:02:54 +0000"  >&lt;p&gt;Ok, yes I see what you mean. I incorporated your findAlias changes. and created a new patch.&lt;br/&gt;
I think the &apos;multiInsertBigTableCheck&apos; check needs to be still done, because in case of multi insert we want the &apos;source&apos; table to be the only big table choice. Do you agree?&lt;/p&gt;</comment>
                            <comment id="13900810" author="hiveqa" created="Thu, 13 Feb 2014 22:27:01 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12628832/HIVE-6403.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12628832/HIVE-6403.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 22 failed/errored test(s), 5095 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join15
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join17
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join22
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join23
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join24
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join27
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join29
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join34
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join_reorder4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multiMapJoin2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_multi_join_union
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union34
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_mapjoin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1315/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1315/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1315/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1315/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 22 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12628832&lt;/p&gt;</comment>
                            <comment id="13901088" author="rhbutani" created="Fri, 14 Feb 2014 04:12:51 +0000"  >&lt;p&gt;Resubmitting patch. Ran several of the tests locally, they succeed.&lt;br/&gt;
The previous run was aborted.&lt;/p&gt;</comment>
                            <comment id="13901136" author="navis" created="Fri, 14 Feb 2014 05:50:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhbutani&quot; class=&quot;user-hover&quot; rel=&quot;rhbutani&quot;&gt;rhbutani&lt;/a&gt; Took some time to understand multiInsertBigTableCheck() and now got it. But seeing auto_join17.q, I&apos;ve realized that we missed handling map-side union cases. Updated in navis2.patch. Could you check that too?&lt;/p&gt;</comment>
                            <comment id="13901947" author="rhbutani" created="Fri, 14 Feb 2014 21:18:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; i went through the patch; I think I understand the reason for the change. Couple of questions:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;i don&apos;t see a union e.g. Can an e.g. be added that exercises the map-side union case.&lt;/li&gt;
	&lt;li&gt;i see several plans changed in .out files to scan src1 in place of src2.  But the check at CommonJoinTaskDispatcher::cannotConvert line 447, should favor the right alias as the big table. So I don&apos;t understand why these plans are changed with your patch. For my understanding, can you please explain this change.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Assigning the jira to you; you have made most of the changes, my contribution is very tiny; and I am just becoming familiar with the pieces you have touched in this patch.&lt;/p&gt;</comment>
                            <comment id="13902912" author="navis" created="Mon, 17 Feb 2014 02:06:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhbutani&quot; class=&quot;user-hover&quot; rel=&quot;rhbutani&quot;&gt;rhbutani&lt;/a&gt; &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;i don&apos;t see a union&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Ah, it&apos;s &quot;auto_join27.q&quot;, &quot;not auto_join17.q&quot;. Sorry for that.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;should favor the right alias as the big table&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Seemed a bug which was not fixed properly in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5945&quot; title=&quot;ql.plan.ConditionalResolverCommonJoin.resolveMapJoinTask also sums those tables which are not used in the child of this conditional task.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5945&quot;&gt;&lt;del&gt;HIVE-5945&lt;/del&gt;&lt;/a&gt;. I&apos;ll check that, too.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;my contribution is very tiny&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I would have never thought of multiInsertBigTableCheck() will be needed. Most of codes I&apos;ve suggested are just easier part. I&apos;ll make this issue done. Thanks.&lt;/p&gt;</comment>
                            <comment id="13902940" author="navis" created="Mon, 17 Feb 2014 04:14:47 +0000"  >&lt;p&gt;Add/fix comments and minor refactorings&lt;/p&gt;</comment>
                            <comment id="13903130" author="hiveqa" created="Mon, 17 Feb 2014 10:21:29 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12629301/HIVE-6403.4.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12629301/HIVE-6403.4.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 21 failed/errored test(s), 5127 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join0
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join16
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join_without_localtask
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables_compact
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_partitioned
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_update
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap_auto_partitioned
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap_rc
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_compact
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_compact_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_bucket_sort_convert_join
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_join35
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_hook
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_test_outer
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_parallel_orderby
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1356/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1356/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1356/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1356/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 21 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12629301&lt;/p&gt;</comment>
                            <comment id="13903365" author="rhbutani" created="Mon, 17 Feb 2014 16:55:28 +0000"  >&lt;p&gt;The patch looks good.&lt;br/&gt;
I looked at the failures, most of them are assertion failures because of the join reorder fix you put in.&lt;br/&gt;
There are a few failures to do with Alter Index Rebuild, like index_bitmap_rc.q.&lt;/p&gt;</comment>
                            <comment id="13903674" author="navis" created="Tue, 18 Feb 2014 01:25:09 +0000"  >&lt;p&gt;Hive index system seemed broken badly in somewhere. &lt;br/&gt;
Even in trunk,&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; explain extended ALTER INDEX srcpart_index ON srcpart REBUILD;

STAGE DEPENDENCIES:
  Stage-1 is a root stage
  Stage-0 depends on stages: Stage-1
  Stage-2 depends on stages: Stage-0
  null depends on stages: Stage-1
  Stage-3 depends on stages: Stage-1, Stage-1, Stage-1, Stage-1
  Stage-1 is a root stage
  Stage-0 depends on stages: Stage-1
  Stage-2 depends on stages: Stage-0
  null depends on stages: Stage-1
  Stage-1 is a root stage
  Stage-0 depends on stages: Stage-1
  Stage-2 depends on stages: Stage-0
  null depends on stages: Stage-1
  Stage-1 is a root stage
  Stage-0 depends on stages: Stage-1
  Stage-2 depends on stages: Stage-0
  null depends on stages: Stage-1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ve never used index before but it seemed not a valid plan. I&apos;ll dig into this for a while.&lt;/p&gt;</comment>
                            <comment id="13903691" author="navis" created="Tue, 18 Feb 2014 02:01:33 +0000"  >&lt;p&gt;It was not that bad as it first looked. I&apos;ve used task ID for equality of task but index builder resets ID (even not assigns ID for index metadata updator). Changed not to reset ID and seemed working good. I&apos;ll update the patch shortly after confirming that.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  Stage-1 is a root stage
  Stage-0 depends on stages: Stage-1
  Stage-2 depends on stages: Stage-0
  Stage-3 depends on stages: Stage-1
  Stage-16 depends on stages: Stage-1, Stage-5, Stage-9, Stage-13
  Stage-5 is a root stage
  Stage-4 depends on stages: Stage-5
  Stage-6 depends on stages: Stage-4
  Stage-7 depends on stages: Stage-5
  Stage-9 is a root stage
  Stage-8 depends on stages: Stage-9
  Stage-10 depends on stages: Stage-8
  Stage-11 depends on stages: Stage-9
  Stage-13 is a root stage
  Stage-12 depends on stages: Stage-13
  Stage-14 depends on stages: Stage-12
  Stage-15 depends on stages: Stage-13
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13904072" author="hiveqa" created="Tue, 18 Feb 2014 14:10:14 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12629459/HIVE-6403.5.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12629459/HIVE-6403.5.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1378/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1378/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1378/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1378/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;**** This message was trimmed, see log for full details ****
Reverted &apos;ql/src/test/results/clientpositive/decimal_5.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin8.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/progress_1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/nestedvirtual.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/parallel.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/convert_enum_to_string.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/annotate_stats_filter.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin12.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby8_map_skew.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/varchar_1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/insert1_overwrite_partitions.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join27.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/load_file_with_space_in_the_name.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/load_dyn_part11.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input4.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/stats6.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/leadlag_queries.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/rename_partition_location.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/udf_translate.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/union12.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/index_compact_2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/udf2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sort_merge_join_desc_1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/windowing_udaf.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/smb_mapjoin_17.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ppd_repeated_alias.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join36.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/avro_joins.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/drop_with_concurrency.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/lock2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_part5.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/insert_into2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/alter_skewed_table.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_grouping_sets2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/timestamp_1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/partition_vs_table_metadata.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby12.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby1_limit.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/cast1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input16_cc.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/annotate_stats_part.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/partition_wise_fileformat15.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/stats1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/symlink_text_input_format.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ptf_register_tblfn.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ddltime.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/uniquejoin.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ppd_constant_expr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/union30.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/timestamp_null.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/combine1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/avro_sanity_test.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_06_one_part.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby2_noskew.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/index_stale.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorized_timestamp_funcs.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/smb_mapjoin_12.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/metadataonly1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join31.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/concatenate_inherit_table_location.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/alter_rename_partition_authorization.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/rcfile_toleratecorruptions.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/auto_join7.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/nonreserved_keywords_insert_into1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketsortoptimize_insert_7.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/tablename_with_select.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_04_all_part.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join32_lessSize.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/correlationoptimizer11.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/multiMapJoin1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/alter3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/smb_mapjoin_21.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_23_import_part_authsuccess.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby4_map_skew.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_01_nonpart.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/auto_sortmerge_join_7.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby7_noskew.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/test_boolean_whereclause.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/drop_index_removes_partition_dirs.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/partition_wise_fileformat10.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/compute_stats_long.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/inputddl7.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join5.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/describe_syntax.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/add_part_multiple.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/external_table_with_space_in_location_path.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/fileformat_text.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/char_udf1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/date_1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_08_nonpart_rename.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/list_bucket_dml_10.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/windowing.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/auto_join2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/udf_reverse.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketsortoptimize_insert_2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/union3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/show_create_table_partitioned.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input1_limit.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby8.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/scriptfile1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_sort_9.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_grouping_id1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin_negative2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/auto_sortmerge_join_2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/alter_varchar2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/skewjoinopt6.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/load_dyn_part6.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/inputddl2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/drop_partitions_filter2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sample7.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/rcfile_union.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/nullinput2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_10_external_managed.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ptf_general_queries.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/create_escape.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_07_all_part_over_nonoverlap.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/annotate_stats_limit.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/alter_char2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_testsequencefile.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join_view.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/udf_get_json_object.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_testxpath.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input19.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucket_map_join_2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ba_table3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join_empty.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/windowing_rank.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_sort_4.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/parquet_partitioned.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/reduce_deduplicate_exclude_gby.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/skewjoinopt18.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/archive_excludeHadoop20.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/skewjoinopt1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/load_dyn_part1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sample2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/exim_03_nonpart_over_compat.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/stats16.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input28.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/smb_mapjoin_4.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/auto_sortmerge_join_14.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/disable_merge_for_bucketing.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ppd_union_view.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_testxpath2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/create_like_tbl_props.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby7_map_multi_single_reducer.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/partition_wise_fileformat9.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/truncate_column.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/mergejoins.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_complex_types.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input14.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketcontext_5.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input37.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/binary_table_colserde.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/skewjoinopt13.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/describe_comment_nonascii.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/mapreduce4.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/orc_predicate_pushdown.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/nullscript.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/stats11.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucket5.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/alter_merge_stats.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/udf_round_2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/filter_numeric.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input46.q.out&apos;
Reverted &apos;ql/src/test/queries/clientnegative/authorization_addpartition.q&apos;
Reverted &apos;ql/src/test/queries/clientnegative/authorization_droppartition.q&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/plan/HiveOperation.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/parse/LoadSemanticAnalyzer.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/hooks/ReadEntity.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/hooks/WriteEntity.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/SQLAuthorizationUtils.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/Operation2Privilege.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/RequiredPrivileges.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/SQLStdHiveAuthorizationValidator.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/security/SessionStateConfigUserAuthenticator.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/Driver.java&apos;
++ awk &apos;{print $2}&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/storage-handlers/hbase/target hcatalog/server-extensions/target hcatalog/core/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target ql/src/test/results/clientnegative/authorization_uri_create_table_ext.q.out ql/src/test/results/clientnegative/authorization_uri_insert.q.out ql/src/test/results/clientnegative/authorization_uri_load_data.q.out ql/src/test/results/clientnegative/authorization_uri_insert_local.q.out ql/src/test/results/clientnegative/authorization_uri_create_table1.q.out ql/src/test/results/clientnegative/authorization_uri_altertab_setloc.q.out ql/src/test/results/clientnegative/authorization_uri_createdb.q.out ql/src/test/results/clientnegative/authorization_uri_index.q.out ql/src/test/results/clientnegative/authorization_uri_add_partition.q.out ql/src/test/results/clientnegative/authorization_uri_alterpart_loc.q.out ql/src/test/queries/clientnegative/authorization_uri_load_data.q ql/src/test/queries/clientnegative/authorization_uri_createdb.q ql/src/test/queries/clientnegative/authorization_uri_alterpart_loc.q ql/src/test/queries/clientnegative/authorization_uri_insert_local.q ql/src/test/queries/clientnegative/authorization_uri_add_partition.q ql/src/test/queries/clientnegative/authorization_uri_altertab_setloc.q ql/src/test/queries/clientnegative/authorization_uri_insert.q ql/src/test/queries/clientnegative/authorization_uri_index.q ql/src/test/queries/clientnegative/authorization_uri_create_table_ext.q ql/src/test/queries/clientnegative/authorization_uri_create_table1.q ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java.orig ql/src/java/org/apache/hadoop/hive/ql/security/authorization/plugin/sqlstd/Operation2Privilege.java.orig
+ svn update

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
External at revision 1569331.

At revision 1569331.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12629459&lt;/p&gt;</comment>
                            <comment id="13904409" author="rhbutani" created="Tue, 18 Feb 2014 18:59:52 +0000"  >&lt;p&gt;+1&lt;br/&gt;
will checkin once tests pass.&lt;/p&gt;</comment>
                            <comment id="13904968" author="navis" created="Wed, 19 Feb 2014 01:36:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; is reverted. I&apos;ve kicked test. &lt;/p&gt;</comment>
                            <comment id="13921867" author="navis" created="Thu, 6 Mar 2014 01:47:10 +0000"  >&lt;p&gt;Kick test&lt;/p&gt;</comment>
                            <comment id="13924775" author="hiveqa" created="Sat, 8 Mar 2014 08:46:56 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12633001/HIVE-6403.6.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12633001/HIVE-6403.6.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 5373 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1655/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1655/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1655/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1655/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12633001&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12628444" name="HIVE-6403.1.patch" size="24161" author="rhbutani" created="Wed, 12 Feb 2014 06:28:02 +0000"/>
                            <attachment id="12628947" name="HIVE-6403.2.patch" size="26551" author="rhbutani" created="Fri, 14 Feb 2014 04:12:10 +0000"/>
                            <attachment id="12629298" name="HIVE-6403.3.patch.txt" size="72490" author="navis" created="Mon, 17 Feb 2014 02:25:45 +0000"/>
                            <attachment id="12629301" name="HIVE-6403.4.patch.txt" size="76502" author="navis" created="Mon, 17 Feb 2014 04:14:47 +0000"/>
                            <attachment id="12629459" name="HIVE-6403.5.patch.txt" size="122223" author="navis" created="Tue, 18 Feb 2014 02:12:36 +0000"/>
                            <attachment id="12633001" name="HIVE-6403.6.patch.txt" size="122223" author="navis" created="Thu, 6 Mar 2014 01:47:10 +0000"/>
                            <attachment id="12628677" name="navis.patch" size="4037" author="navis" created="Thu, 13 Feb 2014 04:39:52 +0000"/>
                            <attachment id="12628955" name="navis2.patch" size="99028" author="navis" created="Fri, 14 Feb 2014 05:46:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>372921</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s9m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>also added to 0.13&lt;br/&gt;
thanks Navis</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>