<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:01:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3030] escape more chars for script operator</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3030</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Only new line was being escaped.&lt;br/&gt;
The same behavior needs to be done for carriage returns, and tabs&lt;/p&gt;</description>
                <environment></environment>
        <key id="12555957">HIVE-3030</key>
            <summary>escape more chars for script operator</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 May 2012 05:44:35 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:36 +0000</updated>
                            <resolved>Tue, 22 May 2012 18:38:58 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13276505" author="namit" created="Wed, 16 May 2012 06:20:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D3261&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13276558" author="cwsteinbach" created="Wed, 16 May 2012 07:48:48 +0000"  >&lt;p&gt;@Namit: I added some comments on phabricator. Is it possible to have phabricator copy the comments to JIRA? Do we know why this stopped working? If this keeps happening I think we need to revert back to RB since having a permanent record on JIRA is a requirement.&lt;/p&gt;</comment>
                            <comment id="13277054" author="namit" created="Wed, 16 May 2012 19:50:00 +0000"  >&lt;p&gt;@Carl, I will address the comments.&lt;/p&gt;

&lt;p&gt;I am not sure, why arc stopped working since yesterday. Let me play around with it.&lt;br/&gt;
I agree, having comments on jira is necessary&lt;/p&gt;</comment>
                            <comment id="13277160" author="namit" created="Wed, 16 May 2012 21:29:46 +0000"  >&lt;p&gt;I addressed the comments.&lt;br/&gt;
I could not make arc work with jira.&lt;/p&gt;


&lt;p&gt;Copying the old comments from Carl for reference:&lt;br/&gt;
conf/hive-default.xml.template&lt;br/&gt;
1276 &#8599;&lt;br/&gt;
(On Diff #10293)	&lt;br/&gt;
I think this should be called &apos;hive.transform.escape.input&apos; since the fact that this affects the behavior of the ScriptOperator is an implementation detail that is hidden from users.&lt;br/&gt;
ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;br/&gt;
118 &#8599;&lt;br/&gt;
(On Diff #10293)	&lt;br/&gt;
Please remove these braces.&lt;br/&gt;
ql/src/test/queries/clientpositive/newline.q&lt;br/&gt;
2 &#8599;&lt;br/&gt;
(On Diff #10293)	&lt;br/&gt;
Please add a test that transforms data containing TABs and carriage returns.&lt;/p&gt;</comment>
                            <comment id="13277804" author="namit" created="Thu, 17 May 2012 13:42:04 +0000"  >&lt;p&gt;Kevin, can you commit it if you tests have finished.&lt;/p&gt;</comment>
                            <comment id="13278018" author="sdong" created="Thu, 17 May 2012 17:50:53 +0000"  >&lt;p&gt;Here is a general problem (maybe not related to new change to this patch): there is no way to output &quot;\n&quot; back to Hive. It will be translated to a &amp;lt;new_line&amp;gt;. In a similar way, if the column contains &quot;\n&quot;, it will not be escaped so the transform script will have no way to distinguish this from a new line. With this patch, more cases like this will be added. Maybe not for this patch but as a follow-up, we might want to escape &lt;br class=&quot;atl-forced-newline&quot; /&gt; too to keep the escaping mapping a complete one.&lt;/p&gt;

&lt;p&gt;Other than that, the patch looks good to me.&lt;/p&gt;</comment>
                            <comment id="13278020" author="sdong" created="Thu, 17 May 2012 17:53:37 +0000"  >&lt;p&gt;I meaned &quot;Maybe not for this patch but as a follow-up, we might want to escape &amp;lt;slash&amp;gt;&amp;lt;slash&amp;gt; too to keep the escaping mapping a complete one.&quot;&lt;/p&gt;</comment>
                            <comment id="13279401" author="namit" created="Sat, 19 May 2012 02:18:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D3261&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Siying, can you take a look ?&lt;/p&gt;</comment>
                            <comment id="13280294" author="sdong" created="Mon, 21 May 2012 17:32:54 +0000"  >&lt;p&gt;Logic looks good to me. I&apos;ll run unit tests now. In the mean time, can you add tests to cover those new cases? Cases like escaping &apos;\&apos;, and unescaping cases like &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;, ,&apos;\\\t&apos; or &apos;\\\t&apos;?&lt;/p&gt;</comment>
                            <comment id="13280303" author="cwsteinbach" created="Mon, 21 May 2012 17:42:02 +0000"  >&lt;p&gt;I think we should wait for the tests to get added before committing this patch, especially since this modifies a public API (i.e. adding a new configuration property).&lt;/p&gt;

&lt;p&gt;Also, instead of making this a binary property, would it make more sense to allow the user to specify the list of characters that the ScriptOperator should escape?&lt;/p&gt;</comment>
                            <comment id="13280351" author="namit" created="Mon, 21 May 2012 18:42:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D3261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D3261&lt;/a&gt; updated - tests added.&lt;/p&gt;

&lt;p&gt;@Carl, It seems little clumsy for the user to specify the list of escape characters.&lt;/p&gt;</comment>
                            <comment id="13280399" author="sdong" created="Mon, 21 May 2012 19:25:11 +0000"  >&lt;p&gt;Discussed with Namit offline. He is going to add one more test case now.&lt;/p&gt;</comment>
                            <comment id="13280460" author="namit" created="Mon, 21 May 2012 20:35:38 +0000"  >&lt;p&gt;Added more tests &lt;a href=&quot;https://reviews.facebook.net/D3261&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D3261&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13280470" author="sdong" created="Mon, 21 May 2012 20:46:33 +0000"  >&lt;p&gt;Tests look good to me. Will run the test suites. Let&apos;s open a follow-up JIRA to escape a more complete list of characters.&lt;/p&gt;</comment>
                            <comment id="13281137" author="sdong" created="Tue, 22 May 2012 18:38:53 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                            <comment id="13281141" author="cwsteinbach" created="Tue, 22 May 2012 18:45:54 +0000"  >&lt;p&gt;@Namit/Siying: What&apos;s the followup JIRA ticket ID?&lt;/p&gt;</comment>
                            <comment id="13282149" author="hudson" created="Thu, 24 May 2012 03:07:22 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1445 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1445/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1445/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3030&quot; title=&quot;escape more chars for script operator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3030&quot;&gt;&lt;del&gt;HIVE-3030&lt;/del&gt;&lt;/a&gt; escape more chars for script operator (Namit Jain via Siying Dong) (Revision 1341589)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
sdong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1341589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1341589&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/bin/hive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/doubleescapedtab.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/escapedcarriagereturn.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/escapednewline.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/escapedtab.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/newline.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TextRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TextRecordWriter.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/newline.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/newline.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547956" author="hudson" created="Wed, 9 Jan 2013 10:23:44 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3030&quot; title=&quot;escape more chars for script operator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3030&quot;&gt;&lt;del&gt;HIVE-3030&lt;/del&gt;&lt;/a&gt; escape more chars for script operator (Namit Jain via Siying Dong) (Revision 1341589)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
sdong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1341589&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1341589&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/bin/hive&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/doubleescapedtab.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/escapedcarriagereturn.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/escapednewline.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/escapedtab.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/scripts/newline.py&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TextRecordReader.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/TextRecordWriter.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/HiveUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/newline.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/newline.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550157" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:36 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12554415">HIVE-3012</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242410</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>