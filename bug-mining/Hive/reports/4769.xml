<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:46:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-14282] HCatLoader ToDate() exception with hive partition table ,partitioned by column of DATE datatype</title>
                <link>https://issues.apache.org/jira/browse/HIVE-14282</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ToDate() function doesnt work with a partitioned table, partitioned by the column of DATE Datatype.&lt;br/&gt;
Below are the steps I followed to recreate the problem.&lt;br/&gt;
--&amp;gt;Sample input file to hive table :&lt;br/&gt;
hdfs@testhost ~$ cat test.log &lt;br/&gt;
2012-06-13,16:11:17,574,140.134.127.109,SearchPage,Google.com,Win8,5,HTC&lt;br/&gt;
2012-06-13,16:11:17,466,43.176.108.158,Electronics,Google.com,Win8,3,iPhone&lt;br/&gt;
2012-06-13,16:11:17,501,97.73.102.79,Appliances,Google.com,Android,4,iPhone&lt;br/&gt;
2012-06-13,16:11:17,469,166.98.157.122,Recommendations,Google.com,Win8,5,HTC&lt;br/&gt;
2012-06-13,16:11:17,557,36.159.147.50,Sporting,Google.com,Win8,3,Samsung&lt;br/&gt;
2012-06-13,16:11:17,449,128.215.122.234,ShoppingCart,Google.com,Win8,5,HTC&lt;br/&gt;
2012-06-13,16:11:17,502,46.81.131.92,Electronics,Google.com,Android,5,Samsung&lt;br/&gt;
2012-06-13,16:11:17,554,120.187.105.127,Automotive,Google.com,Win8,5,HTC&lt;br/&gt;
2012-06-13,16:11:17,447,127.94.64.59,DetailPage,Google.com,Win8,3,Samsung&lt;br/&gt;
2012-06-13,16:11:17,490,132.54.25.75,ShoppingCart,Google.com,Win8,3,iPhone&lt;br/&gt;
2012-06-13,16:11:17,578,79.201.53.179,Automotive,Google.com,Win8,5,Samsung&lt;br/&gt;
2012-06-13,16:11:17,435,158.106.164.38,HomePage,Google.com,Web,5,Chrome&lt;br/&gt;
2012-06-13,16:11:17,523,17.131.82.171,Recommendations,Google.com,Web,3,IE9&lt;br/&gt;
2012-06-13,16:11:17,575,178.95.126.105,Appliances,Google.com,iOS,3,iPhone&lt;br/&gt;
2012-06-13,16:11:17,468,225.143.39.176,SearchPage,Google.com,iOS,5,HTC&lt;br/&gt;
2012-06-13,16:11:17,511,43.103.102.147,ShoppingCart,Google.com,iOS,5,Samsung&lt;br/&gt;
--&amp;gt; Copied to hdfs directory:&lt;br/&gt;
hdfs@testhost ~$ hdfs dfs -put -f test.log /user/hdfs/&lt;br/&gt;
--&amp;gt;Create partitoned table (partitioned with date data type column) in hive:&lt;br/&gt;
0: jdbc:hive2://hdp2.raghav.com:10000/default&amp;gt; create table mytable(Dt DATE,Time STRING,Number INT,IPAddr STRING,Type STRING,Site STRING,OSType STRING,Visit INT,PhModel STRING) row format delimited fields terminated by &apos;,&apos; stored as textfile;&lt;br/&gt;
0: jdbc:hive2://testhost.com:10000/default&amp;gt; load data inpath &apos;/user/hdfs/test.log&apos; overwrite into table mytable;&lt;br/&gt;
0: jdbc:hive2://testhost..com:10000/default&amp;gt; SET hive.exec.dynamic.partition = true;&lt;br/&gt;
0: jdbc:hive2://testhost.com:10000/default&amp;gt; SET hive.exec.dynamic.partition.mode = nonstrict;&lt;br/&gt;
0: jdbc:hive2://testhost.com:10000/default&amp;gt; create table partmytable(Number INT,IPAddr STRING,Type STRING,Site STRING,OSType STRING,Visit INT,PhModel STRING) partitioned by (Dt DATE,Time STRING) row format delimited fields terminated by &apos;,&apos; stored as textfile;&lt;br/&gt;
0: jdbc:hive2://testhost.com:10000/default&amp;gt; insert overwrite table partmytable partition(Dt,Time) select Number,IPAddr,Type,Site,OSType,Visit,PhModel,Dt,Time from mytable;&lt;br/&gt;
0: jdbc:hive2://hdp2.raghav.com:10000/default&amp;gt; describe partmytable;&lt;br/&gt;
--&amp;gt; Try to filter with ToDate function which fails with error:&lt;br/&gt;
hdfs@testhost ~$ pig -useHCatalog&lt;br/&gt;
grunt&amp;gt;&lt;br/&gt;
grunt&amp;gt; temp = LOAD &apos;partmytable&apos; using org.apache.hive.hcatalog.pig.HCatLoader();&lt;br/&gt;
grunt&amp;gt; temp1 = FILTER temp by dt == ToDate(&apos;2012-06-13&apos;,&apos;yyyy-MM-dd&apos;);&lt;br/&gt;
grunt&amp;gt; dump temp1;&lt;br/&gt;
--&amp;gt;Try to filter the normal table with same statement works;&lt;br/&gt;
grunt&amp;gt;&lt;br/&gt;
grunt&amp;gt; temp = LOAD &apos;mytable&apos; using org.apache.hive.hcatalog.pig.HCatLoader();&lt;br/&gt;
grunt&amp;gt; temp1 = FILTER temp by dt == ToDate(&apos;2012-06-13&apos;,&apos;yyyy-MM-dd&apos;);&lt;br/&gt;
grunt&amp;gt; dump temp1;&lt;br/&gt;
Workaround :&lt;br/&gt;
Use below statement instead of direct ToDate();&lt;br/&gt;
grunt&amp;gt;temp1 = FILTER temp5 by DaysBetween(dt,(datetime)ToDate(&apos;2012-06-13&apos;, &apos;yyyy-MM-dd&apos;)) &amp;gt;=(long)0 AND DaysBetween(dt,(datetime)ToDate(&apos;2012-06-13&apos;, &apos;yyyy-MM-dd&apos;)) &amp;lt;=(long)0;&lt;/p&gt;</description>
                <environment>&lt;p&gt;PIG Version : (0.15.0) &lt;br/&gt;
HIVE : 1.2.1&lt;br/&gt;
OS Version : CentOS release 6.7 (Final)&lt;br/&gt;
OS Kernel : 2.6.32-573.18.1.el6.x86_64&lt;/p&gt;</environment>
        <key id="12990845">HIVE-14282</key>
            <summary>HCatLoader ToDate() exception with hive partition table ,partitioned by column of DATE datatype</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="rguruvannagari">Raghavender Rao Guruvannagari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jul 2016 17:32:34 +0000</created>
                <updated>Thu, 8 Dec 2016 14:16:03 +0000</updated>
                            <resolved>Wed, 20 Jul 2016 22:20:09 +0000</resolved>
                                    <version>1.2.1</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15385098" author="thejas" created="Wed, 20 Jul 2016 00:15:30 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="15385191" author="hagleitn" created="Wed, 20 Jul 2016 02:06:45 +0000"  >&lt;p&gt;FWIW this seems to silently update min pig version for hcat from 0.12 to 0.16...&lt;/p&gt;</comment>
                            <comment id="15385208" author="daijy" created="Wed, 20 Jul 2016 02:34:15 +0000"  >&lt;p&gt;Forget to mention here, I also bump Pig version since partition push down of a constant UDF condition only works for Pig 0.15+. Need to watch if it breaks any UT.&lt;/p&gt;</comment>
                            <comment id="15386700" author="hiveqa" created="Wed, 20 Jul 2016 21:59:36 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12818869/HIVE-14282.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12818869/HIVE-14282.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10341 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMsgBusConnection - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_globallimit
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_acid_globallimit
org.apache.hadoop.hive.llap.daemon.impl.TestLlapTokenChecker.testCheckPermissions
org.apache.hadoop.hive.llap.daemon.impl.TestLlapTokenChecker.testGetToken
org.apache.hadoop.hive.metastore.TestMetaStoreMetrics.testConnections
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/583/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/583/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/583/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/583/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-583/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-583/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12818869 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15386725" author="daijy" created="Wed, 20 Jul 2016 22:20:10 +0000"  >&lt;p&gt;All failures also appear in other runs.&lt;/p&gt;

&lt;p&gt;Patch pushed to master/branch-1 and branch-2.1.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12818869" name="HIVE-14282.1.patch" size="8211" author="daijy" created="Tue, 19 Jul 2016 17:36:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 17 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i317pr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>