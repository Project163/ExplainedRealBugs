<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:25:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-26818] Beeline module misses transitive dependencies due to shading</title>
                <link>https://issues.apache.org/jira/browse/HIVE-26818</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Due to shading, the dependecy-reduced-pom.xml file is installed in the local maven repository (~/.m2/repository/org/apache/hive/hive-beeline/4.0.0-SNAPSHOT/) for beeline. &lt;/p&gt;

&lt;p&gt;The latter indicates that the module doesn&apos;t have any transitive dependencies. If we were publishing the shaded jar that would be true but we publish the regular jar.&lt;/p&gt;

&lt;p&gt;At this point, modules which include hive-beeline as a maven dependency are broken and problems such as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-26812&quot; title=&quot;Compile error in hive-it-util module when itests are built separately&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-26812&quot;&gt;&lt;del&gt;HIVE-26812&lt;/del&gt;&lt;/a&gt; may occur.&lt;/p&gt;

&lt;p&gt;I was under the impression that these also affects 4.0.0-alpha-2 release (since it includes ) &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25750&quot; title=&quot;Beeline: Creating a standalone tarball by isolating dependencies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25750&quot;&gt;&lt;del&gt;HIVE-25750&lt;/del&gt;&lt;/a&gt;) but strangely the published pom has all the dependencies:&lt;br/&gt;
&lt;a href=&quot;https://repo1.maven.org/maven2/org/apache/hive/hive-beeline/4.0.0-alpha-2/hive-beeline-4.0.0-alpha-2.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repo1.maven.org/maven2/org/apache/hive/hive-beeline/4.0.0-alpha-2/hive-beeline-4.0.0-alpha-2.pom&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13510474">HIVE-26818</key>
            <summary>Beeline module misses transitive dependencies due to shading</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 7 Dec 2022 18:23:27 +0000</created>
                <updated>Fri, 29 Mar 2024 17:50:07 +0000</updated>
                            <resolved>Tue, 6 Feb 2024 08:21:22 +0000</resolved>
                                                    <fixVersion>4.0.0</fixVersion>
                                    <component>Beeline</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17813143" author="zabetak" created="Thu, 1 Feb 2024 10:03:54 +0000"  >&lt;p&gt;The problem is still present in current master (commit &lt;a href=&quot;https://github.com/apache/hive/commit/6ab9b14c2c45e139a30ab78d41cefe5f1ab64d22&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;6ab9b14c2c45e139a30ab78d41cefe5f1ab64d22&lt;/a&gt;). While running mvn install the issue is clearly visible in the console output.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] Replacing /home/stamatis/Projects/Apache/hive/beeline/target/jar-with-dependencies.jar with /home/stamatis/Projects/Apache/hive/beeline/target/hive-beeline-4.0.0-beta-2-SNAPSHOT-shaded.jar
[INFO] 
[INFO] --- maven-install-plugin:2.5.2:install (default-install) @ hive-beeline ---
[INFO] Installing /home/stamatis/Projects/Apache/hive/beeline/target/hive-beeline-4.0.0-beta-2-SNAPSHOT.jar to /home/stamatis/.m2/repository/org/apache/hive/hive-beeline/4.0.0-beta-2-SNAPSHOT/hive-beeline-4.0.0-beta-2-SNAPSHOT.jar
[INFO] Installing /home/stamatis/Projects/Apache/hive/beeline/dependency-reduced-pom.xml to /home/stamatis/.m2/repository/org/apache/hive/hive-beeline/4.0.0-beta-2-SNAPSHOT/hive-beeline-4.0.0-beta-2-SNAPSHOT.pom
[INFO] Installing /home/stamatis/Projects/Apache/hive/beeline/target/hive-beeline-4.0.0-beta-2-SNAPSHOT-tests.jar to /home/stamatis/.m2/repository/org/apache/hive/hive-beeline/4.0.0-beta-2-SNAPSHOT/hive-beeline-4.0.0-beta-2-SNAPSHOT-tests.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The so called &quot;jar-with-dependencies.jar&quot; is the fat shaded jar that includes every direct and transitive dependency of the module. However, the one that is installed in the maven repository is the regular hive-beeline-4.0.0-beta-2-SNAPSHOT.jar without any extra dependencies. The problem comes from the fact that the pom file that is installed in the maven repository is dependency-reduced-pom.xml which describes the shaded jar and not the regular jar.&lt;/p&gt;

&lt;p&gt;There are two alternative ways to solve the problem:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Publish in maven repo the fat shaded jar instead of the normal along with the dependency-reduced-pom.xml file&lt;/li&gt;
	&lt;li&gt;Publish in maven repo the regular jar with the normal pom.xml file&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Since the shaded jar was created mainly for distributing a standalone beeline application and not for replacing the standard jar the most appropriate solution at this stage is to avoid generating the dependency-reduced-pom.xml file and  publishing the regular pom.xml instead.&lt;/p&gt;</comment>
                            <comment id="17813148" author="zabetak" created="Thu, 1 Feb 2024 10:09:26 +0000"  >&lt;p&gt;Worth mentioning that that the missing dependency problem can be observed in various ways. For instance running the TestBeeLineDriver in the qtest module throws a NoClassDefFoundError&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn test -Dtest=TestBeeLineDriver -Dqfile=smb_mapjoin_1.q
[ERROR] org.apache.hadoop.hive.cli.TestBeeLineDriver  Time elapsed: 7.614 s  &amp;lt;&amp;lt;&amp;lt; ERROR!
java.lang.NoClassDefFoundError: org/supercsv/encoder/CsvEncoder
	at org.apache.hive.beeline.BeeLine.&amp;lt;init&amp;gt;(BeeLine.java:186)
	at org.apache.hive.beeline.BeeLine.&amp;lt;init&amp;gt;(BeeLine.java:566)
	at org.apache.hive.beeline.QFileBeeLineClient.&amp;lt;init&amp;gt;(QFileBeeLineClient.java:72)
	at org.apache.hive.beeline.QFileBeeLineClient$QFileClientBuilder.getClient(QFileBeeLineClient.java:260)
	at org.apache.hadoop.hive.cli.control.CoreBeeLineDriver.runInfraScript(CoreBeeLineDriver.java:174)
	at org.apache.hadoop.hive.cli.control.CoreBeeLineDriver.beforeClassSpec(CoreBeeLineDriver.java:168)
	at org.apache.hadoop.hive.cli.control.CliAdapter$1$1.evaluate(CliAdapter.java:93)
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)
	at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:413)
	at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)
	at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)
	at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:377)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:138)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:465)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:451)
Caused by: java.lang.ClassNotFoundException: org.supercsv.encoder.CsvEncoder
	at java.net.URLClassLoader.findClass(URLClassLoader.java:382)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:418)
	at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:355)
	at java.lang.ClassLoader.loadClass(ClassLoader.java:351)
	... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
The same NoClassDefFoundError appeared also in hive-unit module in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-27489&quot; title=&quot;HPL/SQL does not support table aliases on column names in loops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-27489&quot;&gt;&lt;del&gt;HIVE-27489&lt;/del&gt;&lt;/a&gt; and an explicit dependency to supercsv was added to circumvent the issue for this particular module.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17814670" author="zabetak" created="Tue, 6 Feb 2024 08:21:23 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/hive/commit/af545603951c24f6559ed2b2fb0b7286b0c3d5be&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/af545603951c24f6559ed2b2fb0b7286b0c3d5be&lt;/a&gt;. Thanks for the reviews &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aturoczy&quot; class=&quot;user-hover&quot; rel=&quot;aturoczy&quot;&gt;aturoczy&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushsaxena&quot; class=&quot;user-hover&quot; rel=&quot;ayushsaxena&quot;&gt;ayushsaxena&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kokila19&quot; class=&quot;user-hover&quot; rel=&quot;kokila19&quot;&gt;kokila19&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13510131">HIVE-26812</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13414366">HIVE-25750</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13542950">HIVE-27489</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1di88:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>