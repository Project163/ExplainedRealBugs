<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:43:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-13401] Kerberized HS2 with LDAP auth enabled fails kerberos/delegation token authentication</title>
                <link>https://issues.apache.org/jira/browse/HIVE-13401</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When HS2 is running in kerberos cluster but with other Sasl authentication (e.g. LDAP) enabled, it fails in kerberos/delegation token authentication. It is because the HS2 server uses the TSetIpAddressProcess when other authentication is enabled. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12955031">HIVE-13401</key>
            <summary>Kerberized HS2 with LDAP auth enabled fails kerberos/delegation token authentication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctang">Chaoyu Tang</assignee>
                                    <reporter username="ctang">Chaoyu Tang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Mar 2016 17:25:32 +0000</created>
                <updated>Wed, 3 May 2017 00:14:53 +0000</updated>
                            <resolved>Sun, 3 Apr 2016 01:31:02 +0000</resolved>
                                                    <fixVersion>2.1.0</fixVersion>
                                    <component>Authentication</component>
                    <component>Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15220286" author="ctang.ma" created="Thu, 31 Mar 2016 17:36:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt;, could you review the patch? Thanks&lt;/p&gt;</comment>
                            <comment id="15220306" author="ctang.ma" created="Thu, 31 Mar 2016 17:45:21 +0000"  >&lt;p&gt;Patch has been uploaded to &lt;a href=&quot;https://reviews.apache.org/r/45552/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/45552/&lt;/a&gt; for review. Thanks in advanced.&lt;/p&gt;</comment>
                            <comment id="15222128" author="szehon" created="Fri, 1 Apr 2016 18:32:39 +0000"  >&lt;p&gt;+1  Quick question, is it possible to add miniKDC test with some LDAP like in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11866&quot; title=&quot;Add framework to enable testing using LDAPServer using LDAP protocol&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11866&quot;&gt;&lt;del&gt;HIVE-11866&lt;/del&gt;&lt;/a&gt;?  If so it may be good to add as a follow-on JIRA, although not sure the feasibility.  Just wondering.&lt;/p&gt;</comment>
                            <comment id="15222154" author="ctang.ma" created="Fri, 1 Apr 2016 18:45:43 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt; for review. I will definitely explore this possibility in a follow-up JIRA.&lt;/p&gt;</comment>
                            <comment id="15223083" author="hiveqa" created="Sun, 3 Apr 2016 00:37:55 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12796352/HIVE-13401.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12796352/HIVE-13401.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 9974 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7448/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7448/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7448/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7448/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7448/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7448/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12796352 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15223092" author="ctang.ma" created="Sun, 3 Apr 2016 01:16:21 +0000"  >&lt;p&gt;The failed test testCliDriver_index_bitmap3 is not related.&lt;/p&gt;</comment>
                            <comment id="15223096" author="ctang.ma" created="Sun, 3 Apr 2016 01:31:02 +0000"  >&lt;p&gt;Committed to 2.1.0, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt; for review.&lt;/p&gt;</comment>
                            <comment id="15226845" author="sershe" created="Tue, 5 Apr 2016 18:22:40 +0000"  >&lt;p&gt;Should this be backported to 2.0.1?&lt;/p&gt;</comment>
                            <comment id="15226911" author="ctang.ma" created="Tue, 5 Apr 2016 18:49:54 +0000"  >&lt;p&gt;Yeah, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt; It should be backported to 2.0.1 as well.&lt;/p&gt;</comment>
                            <comment id="15226998" author="ctang.ma" created="Tue, 5 Apr 2016 19:47:58 +0000"  >&lt;p&gt;Attach the patch for branch-2.0.1. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt;I have not backported to branch yet since current 2.0.1 seems break in compilation of LLAP.&lt;/p&gt;</comment>
                            <comment id="15228204" author="ctang.ma" created="Wed, 6 Apr 2016 12:59:23 +0000"  >&lt;p&gt;Backported to 2.0.1.&lt;/p&gt;</comment>
                            <comment id="15228896" author="sershe" created="Wed, 6 Apr 2016 18:59:57 +0000"  >&lt;p&gt;Hmm, I made another commit of the same patch, reverting it now.&lt;/p&gt;</comment>
                            <comment id="15228897" author="sershe" created="Wed, 6 Apr 2016 19:00:06 +0000"  >&lt;p&gt;Thanks for the backport!&lt;/p&gt;</comment>
                            <comment id="15233294" author="sershe" created="Sat, 9 Apr 2016 02:08:15 +0000"  >&lt;p&gt;Looks like this depends on other patches. I will remove from 2.0.x for now. &lt;/p&gt;</comment>
                            <comment id="15233309" author="ctang.ma" created="Sat, 9 Apr 2016 02:42:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt; It actually fixes an issue from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10115&quot; title=&quot;HS2 running on a Kerberized cluster should offer Kerberos(GSSAPI) and Delegation token(DIGEST) when alternate authentication is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10115&quot;&gt;&lt;del&gt;HIVE-10115&lt;/del&gt;&lt;/a&gt; which is already in 2.0.1, I resolved some minor conflicts in its tests which used some test methods not yet available in 2.0.1. So I think it should be OK in 2.0.1 given that without it the feature provided in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10115&quot; title=&quot;HS2 running on a Kerberized cluster should offer Kerberos(GSSAPI) and Delegation token(DIGEST) when alternate authentication is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10115&quot;&gt;&lt;del&gt;HIVE-10115&lt;/del&gt;&lt;/a&gt; does totally not work.&lt;/p&gt;</comment>
                            <comment id="15233317" author="sershe" created="Sat, 9 Apr 2016 03:07:28 +0000"  >&lt;p&gt;Can you commit it again then with build working? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15233319" author="ctang.ma" created="Sat, 9 Apr 2016 03:09:09 +0000"  >&lt;p&gt;Apology, my mistake. I committed the patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13401&quot; title=&quot;Kerberized HS2 with LDAP auth enabled fails kerberos/delegation token authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13401&quot;&gt;&lt;del&gt;HIVE-13401&lt;/del&gt;&lt;/a&gt;-branch2.0.1.patch partially &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt;, could you help to review and double check? I think it should be in 2.0.1 since it fixes the issue from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10115&quot; title=&quot;HS2 running on a Kerberized cluster should offer Kerberos(GSSAPI) and Delegation token(DIGEST) when alternate authentication is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10115&quot;&gt;&lt;del&gt;HIVE-10115&lt;/del&gt;&lt;/a&gt;, without it, the feature provided by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10115&quot; title=&quot;HS2 running on a Kerberized cluster should offer Kerberos(GSSAPI) and Delegation token(DIGEST) when alternate authentication is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10115&quot;&gt;&lt;del&gt;HIVE-10115&lt;/del&gt;&lt;/a&gt; does not work at all.&lt;/p&gt;</comment>
                            <comment id="15233326" author="ctang.ma" created="Sat, 9 Apr 2016 03:22:02 +0000"  >&lt;p&gt;Yes, committed it again. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12786086">HIVE-10115</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12961512">HIVE-13590</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12797157" name="HIVE-13401-branch2.0.1.patch" size="16574" author="ctang" created="Tue, 5 Apr 2016 19:47:58 +0000"/>
                            <attachment id="12796352" name="HIVE-13401.patch" size="14707" author="ctang" created="Thu, 31 Mar 2016 17:36:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vgy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>