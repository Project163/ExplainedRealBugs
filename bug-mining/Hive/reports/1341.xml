<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:07:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4865] HiveLockObjects: Unlocking retries/times out when query contains &quot;:&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4865</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The full query string is part of the HiveLockObject. If that string contains a &quot;:&quot; the data fetched from Zookeeper will not be correctly parsed. This causes locks that have been released to not be removed from the lock list.&lt;/p&gt;

&lt;p&gt;The result is that the same path will be removed from zookeeper multiple times. This fails and causes a very long retry loop.&lt;/p&gt;

&lt;p&gt;timestamp_1.q &amp;amp; timestamp_2.q take an hour right now. The reason is just this problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12657944">HIVE-4865</key>
            <summary>HiveLockObjects: Unlocking retries/times out when query contains &quot;:&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jul 2013 08:15:44 +0000</created>
                <updated>Tue, 15 Oct 2013 23:31:03 +0000</updated>
                            <resolved>Wed, 17 Jul 2013 18:31:26 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13709595" author="hagleitn" created="Tue, 16 Jul 2013 08:17:42 +0000"  >&lt;p&gt;With the fix the two testcases take ~5 mins. You&apos;re welcome.&lt;/p&gt;</comment>
                            <comment id="13709981" author="hiveqa" created="Tue, 16 Jul 2013 17:46:12 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall:&lt;/font&gt; -1 build exited with an error&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12592504/HIVE-4865.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12592504/HIVE-4865.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s)&lt;br/&gt;
Failed tests:&lt;br/&gt;
org.apache.hadoop.hive.ql.lockmgr.TestEmbeddedLockManager.testLocking&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/jenkins-Hive-Precommit-trunk-hadoop1-ptest/5/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/jenkins-Hive-Precommit-trunk-hadoop1-ptest/5/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/jenkins-Hive-Precommit-trunk-hadoop1-ptest/5/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/jenkins-Hive-Precommit-trunk-hadoop1-ptest/5/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;br/&gt;
Executing org.apache.hive.ptest.execution.CleanupPhase&lt;br/&gt;
Executing org.apache.hive.ptest.execution.PrepPhase&lt;br/&gt;
Executing org.apache.hive.ptest.execution.ExecutionPhase&lt;br/&gt;
Executing org.apache.hive.ptest.execution.ReportingPhase&lt;br/&gt;
Tests failed with: TestsFailedException: 1 tests failed&lt;/p&gt;</comment>
                            <comment id="13709987" author="brocknoland" created="Tue, 16 Jul 2013 17:47:48 +0000"  >&lt;p&gt;The URL&apos;s above are off just a bit. The error is here: &lt;a href=&quot;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/5/testReport/org.apache.hadoop.hive.ql.lockmgr/TestEmbeddedLockManager/testLocking/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/5/testReport/org.apache.hadoop.hive.ql.lockmgr/TestEmbeddedLockManager/testLocking/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13709994" author="hagleitn" created="Tue, 16 Jul 2013 17:53:25 +0000"  >&lt;p&gt;This is awesome (the build, not me messing up in the patch). Automatic pre-commit checks? Sweet.&lt;/p&gt;</comment>
                            <comment id="13710023" author="brocknoland" created="Tue, 16 Jul 2013 18:10:49 +0000"  >&lt;p&gt;Not quite automatic yet &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; That was me triggering it. But soon....&lt;/p&gt;</comment>
                            <comment id="13710038" author="hagleitn" created="Tue, 16 Jul 2013 18:19:58 +0000"  >&lt;p&gt;Ah, man. You got me all excited.&lt;/p&gt;</comment>
                            <comment id="13710039" author="hagleitn" created="Tue, 16 Jul 2013 18:20:34 +0000"  >&lt;p&gt;Feel free to trigger again against .2 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13710092" author="brocknoland" created="Tue, 16 Jul 2013 19:05:00 +0000"  >&lt;p&gt;In-progress! &lt;a href=&quot;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/6/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13710211" author="hiveqa" created="Tue, 16 Jul 2013 20:50:52 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall:&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12592587/HIVE-4865.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12592587/HIVE-4865.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 all tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/6/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/6/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/6/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-Precommit-trunk-hadoop1-ptest/6/console&lt;/a&gt;&lt;br/&gt;
Executing org.apache.hive.ptest.execution.CleanupPhase&lt;br/&gt;
Executing org.apache.hive.ptest.execution.PrepPhase&lt;br/&gt;
Executing org.apache.hive.ptest.execution.ExecutionPhase&lt;br/&gt;
Executing org.apache.hive.ptest.execution.ReportingPhase&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13710223" author="brocknoland" created="Tue, 16 Jul 2013 20:58:04 +0000"  >&lt;p&gt;yay, it seems to have worked! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13710240" author="appodictic" created="Tue, 16 Jul 2013 21:04:41 +0000"  >&lt;p&gt;OMG. The future is here!&lt;/p&gt;</comment>
                            <comment id="13710264" author="appodictic" created="Tue, 16 Jul 2013 21:19:11 +0000"  >&lt;p&gt;I think we should somehow document this fact. Put a javadoc on some relevant part of the code path that says &quot;:&quot; will be removed because it is illegal. &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt; return in.replaceAll(&quot;:&quot;,&quot;&quot;);&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13710305" author="brocknoland" created="Tue, 16 Jul 2013 21:38:51 +0000"  >&lt;p&gt;FYI I renamed the build to make it work with the automated pre-commit testing so the links above won&apos;t work:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/user/brock/my-views/view/hive/job/PreCommit-HIVE-Build/6/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/user/brock/my-views/view/hive/job/PreCommit-HIVE-Build/6/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13710322" author="hagleitn" created="Tue, 16 Jul 2013 21:48:21 +0000"  >&lt;p&gt;Added the requested comments in .3. No other changes between .2 and .3.&lt;/p&gt;</comment>
                            <comment id="13710326" author="hagleitn" created="Tue, 16 Jul 2013 21:49:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt; Still pinching myself!&lt;/p&gt;</comment>
                            <comment id="13710338" author="appodictic" created="Tue, 16 Jul 2013 21:57:36 +0000"  >&lt;p&gt;Looks good +1.&lt;/p&gt;</comment>
                            <comment id="13711427" author="brocknoland" created="Wed, 17 Jul 2013 18:31:26 +0000"  >&lt;p&gt;Committed to trunk! Thanks Gunther!&lt;/p&gt;</comment>
                            <comment id="13711609" author="hudson" created="Wed, 17 Jul 2013 20:55:48 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #18 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/18/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/18/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4865&quot; title=&quot;HiveLockObjects: Unlocking retries/times out when query contains &amp;quot;:&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4865&quot;&gt;&lt;del&gt;HIVE-4865&lt;/del&gt;&lt;/a&gt; - HiveLockObjects: Unlocking retries/times out when query contains &quot;:&quot; (Gunther Hagleitner via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/lockmgr/HiveLockObject.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13711980" author="hudson" created="Thu, 18 Jul 2013 03:48:13 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop1-ptest #89 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/89/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/89/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4865&quot; title=&quot;HiveLockObjects: Unlocking retries/times out when query contains &amp;quot;:&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4865&quot;&gt;&lt;del&gt;HIVE-4865&lt;/del&gt;&lt;/a&gt; - HiveLockObjects: Unlocking retries/times out when query contains &quot;:&quot; (Gunther Hagleitner via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/lockmgr/HiveLockObject.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13712233" author="hudson" created="Thu, 18 Jul 2013 11:24:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2204 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2204/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2204/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4865&quot; title=&quot;HiveLockObjects: Unlocking retries/times out when query contains &amp;quot;:&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4865&quot;&gt;&lt;del&gt;HIVE-4865&lt;/del&gt;&lt;/a&gt; - HiveLockObjects: Unlocking retries/times out when query contains &quot;:&quot; (Gunther Hagleitner via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/lockmgr/HiveLockObject.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13712466" author="hudson" created="Thu, 18 Jul 2013 16:42:52 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-hadoop2 #293 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/293/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/293/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4865&quot; title=&quot;HiveLockObjects: Unlocking retries/times out when query contains &amp;quot;:&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4865&quot;&gt;&lt;del&gt;HIVE-4865&lt;/del&gt;&lt;/a&gt; - HiveLockObjects: Unlocking retries/times out when query contains &quot;:&quot; (Gunther Hagleitner via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1504225&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/lockmgr/HiveLockObject.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13796112" author="ashutoshc" created="Tue, 15 Oct 2013 23:31:03 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12592504" name="HIVE-4865.1.patch" size="1076" author="hagleitn" created="Tue, 16 Jul 2013 08:16:36 +0000"/>
                            <attachment id="12592587" name="HIVE-4865.2.patch" size="1127" author="hagleitn" created="Tue, 16 Jul 2013 18:19:23 +0000"/>
                            <attachment id="12592635" name="HIVE-4865.3.patch" size="1764" author="hagleitn" created="Tue, 16 Jul 2013 21:47:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mbn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>338459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>