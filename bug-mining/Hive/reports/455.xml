<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:56:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-1523] ql tests no longer work in miniMR mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1523</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;as per title. here&apos;s the first exception i see:&lt;/p&gt;


&lt;p&gt;2010-08-09 18:05:11,259 ERROR hive.log (MetaStoreUtils.java:logAndThrowMetaException(743)) - Got exception: java.io.FileNotFoun\&lt;br/&gt;
dException File &lt;a href=&quot;file:/build/ql/test/data/warehouse/dest_j1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/build/ql/test/data/warehouse/dest_j1&lt;/a&gt; does not exist.&lt;br/&gt;
2010-08-09 18:05:11,259 ERROR hive.log (MetaStoreUtils.java:logAndThrowMetaException(746)) - java.io.FileNotFoundException: Fil\&lt;br/&gt;
e &lt;a href=&quot;file:/build/ql/test/data/warehouse/dest_j1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/build/ql/test/data/warehouse/dest_j1&lt;/a&gt; does not exist.&lt;br/&gt;
  at org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:361)&lt;br/&gt;
  at org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:245)&lt;br/&gt;
  at org.apache.hadoop.hive.metastore.Warehouse.mkdirs(Warehouse.java:136)&lt;br/&gt;
  at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.create_table_core(HiveMetaStore.java:677)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12471157">HIVE-1523</key>
            <summary>ql tests no longer work in miniMR mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsensarma">Joydeep Sen Sarma</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Aug 2010 01:13:59 +0000</created>
                <updated>Thu, 2 May 2013 02:29:29 +0000</updated>
                            <resolved>Wed, 25 Aug 2010 21:09:12 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12899757" author="jsensarma" created="Wed, 18 Aug 2010 06:54:47 +0000"  >&lt;p&gt;fixed minimr test mode.&lt;/p&gt;

&lt;p&gt;enabled a couple of queries to always run (additionally) in minimr mode (like hbase-handler tests) when running standard tests. we should probably expand this to a larger number of queries (especially those requiring multiple reducers). i don&apos;t have good insight into this part - if people have ideas - we can expand the list easily.&lt;/p&gt;</comment>
                            <comment id="12900018" author="jvs" created="Wed, 18 Aug 2010 20:30:00 +0000"  >&lt;p&gt;+1.  Last time I talked to Ning about this, my take was that we should be able to re-run any subset of tests in either mode (without needing test codegen for it), but for now we can just get things working again this way.&lt;/p&gt;

&lt;p&gt;Some candidates for existing tests to add in to the minimr suite:&lt;/p&gt;

&lt;p&gt;jsichi-mac:clientpositive jsichi$ grep reducer *.q&lt;br/&gt;
bucket1.q:set hive.exec.reducers.max = 200;&lt;br/&gt;
bucket2.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
bucket3.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
bucket4.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
bucketmapjoin6.q:set hive.exec.reducers.max=1;&lt;br/&gt;
disable_merge_for_bucketing.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
reduce_deduplicate.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
sample10.q:set hive.exec.reducers.max=4;&lt;br/&gt;
smb_mapjoin_6.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
smb_mapjoin_7.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
smb_mapjoin_8.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
smb_mapjoin_8.q:set hive.exec.reducers.max = 1;&lt;br/&gt;
udaf_percentile_approx.q:set hive.exec.reducers.max=4&lt;/p&gt;</comment>
                            <comment id="12900048" author="jsensarma" created="Wed, 18 Aug 2010 21:47:24 +0000"  >&lt;p&gt;i am running through the above qfiles and see what executes successfully on minimr (because many dont).&lt;/p&gt;

&lt;p&gt;one concern is the length of the tests. i think we need to divide our tests into a short and long regression. otherwise development cycle is severely impacted if everything has to be tested on every iteration.&lt;/p&gt;</comment>
                            <comment id="12900096" author="jsensarma" created="Wed, 18 Aug 2010 23:11:03 +0000"  >&lt;p&gt;with modified list of minimr tests:&lt;/p&gt;

&lt;p&gt;+  &amp;lt;property name=&quot;minimr.query.files&quot; value=&quot;input16_cc.q,scriptfile1.q,bucket1.q,bucket2.q,bucket3.q,bucket4.q,bucketmapjoin6.q,disable_merge_for_bucketing.q,reduce_deduplicate.q,smb_mapjoin_6.q,smb_mapjoin_7.q,join1.q,groupby2.q&quot;/&amp;gt;                                                                                       &lt;/p&gt;

&lt;p&gt;i took the ones that worked from John&apos;s list. also added a couple of tests that had &apos;add jar&apos; and &apos;add file&apos; commands (since their interaction with real cluster is quite different).&lt;/p&gt;

</comment>
                            <comment id="12900141" author="jvs" created="Thu, 19 Aug 2010 01:28:00 +0000"  >&lt;p&gt;Yeah, shortreg/longreg split would be good.  The challenge is to keep longreg healthy since breakages don&apos;t get caught with every checkin, so we&apos;ll need&lt;/p&gt;

&lt;p&gt;(a) automation to run it constantly and report failures&lt;br/&gt;
(b) people to actually fix failures in a timely fashion&lt;/p&gt;</comment>
                            <comment id="12900143" author="jsensarma" created="Thu, 19 Aug 2010 01:39:53 +0000"  >&lt;p&gt;small change - fix 0.20 version match to pick the right jetty version. &lt;/p&gt;</comment>
                            <comment id="12901687" author="jsensarma" created="Tue, 24 Aug 2010 00:50:59 +0000"  >&lt;p&gt;can someone review/commit this? i don&apos;t think i am going to make more changes to this.&lt;/p&gt;

&lt;p&gt;will work on long regression framework separately.&lt;/p&gt;</comment>
                            <comment id="12901971" author="namit" created="Tue, 24 Aug 2010 17:15:27 +0000"  >&lt;p&gt;I will take a look&lt;/p&gt;</comment>
                            <comment id="12902025" author="namit" created="Tue, 24 Aug 2010 19:19:11 +0000"  >&lt;p&gt;The tests in miniMR will run twice, and the log files may get over-written.&lt;br/&gt;
They should be excluded from non-miniMR.&lt;/p&gt;</comment>
                            <comment id="12902526" author="jsensarma" created="Wed, 25 Aug 2010 17:11:44 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;added exclude tests - minimr tests are excluded from regular clientpositive tests&lt;/li&gt;
	&lt;li&gt;did some subtle changes in how fs.default.name and mapred.job.tracker are specified to allow testing against external hadoop clusters&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12902558" author="namit" created="Wed, 25 Aug 2010 18:26:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Running tests now - will file a new jira for the ability to run unit tests in parallel in miniMr mode&lt;/p&gt;</comment>
                            <comment id="12902560" author="jsensarma" created="Wed, 25 Aug 2010 18:39:00 +0000"  >&lt;p&gt;there&apos;s already a jira on running tests in parallel. i think i can cover it there itself.&lt;/p&gt;</comment>
                            <comment id="12902635" author="namit" created="Wed, 25 Aug 2010 21:09:11 +0000"  >&lt;p&gt;Committed. Thanks Joy&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12471947">HIVE-1560</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12471954">HIVE-1562</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12471969">HIVE-1565</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12471970">HIVE-1566</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12472034">HIVE-1569</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12472034">HIVE-1569</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12471952">HIVE-1561</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12471968">HIVE-1564</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12452369" name="hive-1523.1.patch" size="4551" author="jsensarma" created="Wed, 18 Aug 2010 06:54:47 +0000"/>
                            <attachment id="12452464" name="hive-1523.2.patch" size="4718" author="jsensarma" created="Wed, 18 Aug 2010 23:11:03 +0000"/>
                            <attachment id="12452479" name="hive-1523.3.patch" size="5955" author="jsensarma" created="Thu, 19 Aug 2010 01:39:52 +0000"/>
                            <attachment id="12453058" name="hive-1523.4.patch" size="10724" author="jsensarma" created="Wed, 25 Aug 2010 17:11:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72858</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lfif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123163</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>