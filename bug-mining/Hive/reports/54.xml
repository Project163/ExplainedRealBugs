<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:51:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-235] DynamicSerDe does not work with Thrift Protocols that can have missing fields for null values</title>
                <link>https://issues.apache.org/jira/browse/HIVE-235</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The current DynamicSerDe code assumes all fields are there and no fields are missing.&lt;/p&gt;

&lt;p&gt;However Thrift Protocols can have missing fields, in case the field is null.&lt;/p&gt;

&lt;p&gt;In that case, DynamicSerDe may commit 2 behavior:&lt;br/&gt;
1. array index out of bound error because DynamicSerDe assumes the number of fields in the record should be equal to that in the DDL;&lt;br/&gt;
2. fields with null values will take the value from the last record. This may produce wrong result for queries.&lt;/p&gt;

&lt;p&gt;In order to fix this, we need to:&lt;br/&gt;
1. Pass ObjectInspector/TypeInfo recursively so that we know the number of fields when deserializing the record.&lt;br/&gt;
2. Clear out fields that are missing from the record.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12412584">HIVE-235</key>
            <summary>DynamicSerDe does not work with Thrift Protocols that can have missing fields for null values</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jan 2009 11:22:23 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:49 +0000</updated>
                            <resolved>Mon, 2 Feb 2009 03:25:57 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12665040" author="zshao" created="Mon, 19 Jan 2009 04:45:46 +0000"  >&lt;p&gt;It turns out to be simpler than I thought. We don&apos;t need to pass ObjectInspector because the class already knows the number of fields.&lt;/p&gt;

&lt;p&gt;Also added a test case.&lt;/p&gt;</comment>
                            <comment id="12665318" author="jsensarma" created="Tue, 20 Jan 2009 02:46:38 +0000"  >&lt;p&gt;looks good for handling the null columns case.&lt;/p&gt;

&lt;p&gt;btw - getNumFields and ordered_types have the same length. doesn&apos;t seem to me that the SerDe assumes that the record has to have all fields (bails out when it hits stop even if all fields have not been read). So if we are trying to solve any outofbounds issue - not sure this is going to resolve it.&lt;/p&gt;</comment>
                            <comment id="12665502" author="zshao" created="Tue, 20 Jan 2009 18:56:32 +0000"  >&lt;p&gt;You are right. The getNumFields actually returns the same value as ordered_types. It&apos;s not related to the actual non-null fields in the record.&lt;br/&gt;
I thought that might be a problem but it&apos;s actually not.  In reality, we have not seen the array index out of bound error.&lt;/p&gt;</comment>
                            <comment id="12665517" author="jsensarma" created="Tue, 20 Jan 2009 19:40:16 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12665533" author="zshao" created="Tue, 20 Jan 2009 19:59:32 +0000"  >&lt;p&gt;Had to change the test case to make sure the output is deterministic.&lt;/p&gt;</comment>
                            <comment id="12669501" author="zshao" created="Mon, 2 Feb 2009 03:25:57 +0000"  >&lt;p&gt;Committed revision 736092.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398206" name="HIVE-235.1.patch" size="4915" author="zshao" created="Mon, 19 Jan 2009 04:45:46 +0000"/>
                            <attachment id="12398326" name="HIVE-235.2.patch" size="5669" author="zshao" created="Tue, 20 Jan 2009 19:59:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 43 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122054</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-235&quot; title=&quot;DynamicSerDe does not work with Thrift Protocols that can have missing fields for null values&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-235&quot;&gt;&lt;strike&gt;HIVE-235&lt;/strike&gt;&lt;/a&gt;. Fixed DynamicSerDe to work with null values with Thrift Protocols that can have missing fields for null values. (zshao)&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>