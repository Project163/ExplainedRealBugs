<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:00:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-2646] Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2646</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The current Hive Ivy dependency logic for its Hadoop dependencies is problematic - depending on the tarball and extracting the jars from there, rather than depending on the jars directly. It&apos;d be great if this was fixed to actually have the jar dependencies defined directly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12534814">HIVE-2646</key>
            <summary>Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="abayer">Andrew Bayer</assignee>
                                    <reporter username="abayer">Andrew Bayer</reporter>
                        <labels>
                    </labels>
                <created>Mon, 12 Dec 2011 18:02:05 +0000</created>
                <updated>Tue, 12 May 2015 02:59:50 +0000</updated>
                            <resolved>Tue, 8 May 2012 21:20:11 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.9.1</fixVersion>
                    <fixVersion>0.10.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>4</votes>
                                    <watches>15</watches>
                                                                                                                <comments>
                            <comment id="13182729" author="abayer" created="Mon, 9 Jan 2012 19:23:11 +0000"  >&lt;p&gt;Seeing more problems as a result of the non-standard tarball dependency when trying to build against Hadoop with the 0.23.1 layout. Until this is fixed and Hive properly uses Ivy to depend on jars directly, issues will keep popping up, which will keep requiring hacks to the Hive build classpaths, the Hadoop tarball, or both, none of which would occur if Hive behaved correctly.&lt;/p&gt;</comment>
                            <comment id="13222776" author="abayer" created="Mon, 5 Mar 2012 23:30:13 +0000"  >&lt;p&gt;This should apply cleanly to trunk, and I think it also encompasses the fixes for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2745&quot; title=&quot;Remove Hive&amp;#39;s runtime dependency on bin/hadoop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2745&quot;&gt;HIVE-2745&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13223318" author="appodictic" created="Tue, 6 Mar 2012 15:17:15 +0000"  >&lt;p&gt;Hive-2745 is really baked in. It is more then just built changes in the hive code we build a bin/hadoop jar command and fork (this is really lame). The non-standard tarball dependency is mostly caused by the fact that upstream changes effect Hive. Hive does heavy work to maintain backwards compatibility all the way to hadoop 0.20.2. Pig takes the other approach but you almost always need to compile pig for your version of hadoop. You are right to say that as long as upstream keeps changing we have to keep hacking. I will look at the patch I am not sure what is the best way to handle supporting versions of hadoop that are not even released yet.    &lt;/p&gt;</comment>
                            <comment id="13223424" author="abayer" created="Tue, 6 Mar 2012 17:04:19 +0000"  >&lt;p&gt;fwiw, Carl actually implemented a reworking of the test execution to work around the bin/hadoop from the tarball issue, and that&apos;s part of this patch.&lt;/p&gt;

&lt;p&gt;This doesn&apos;t change anything about building shims - rather, it changes how the classpath for building the shims is assembled. Instead of blowing up a tarball to get the jars for the various Hadoop versions, it just gets the jars.&lt;/p&gt;</comment>
                            <comment id="13223743" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 22:31:55 +0000"  >&lt;p&gt;abayer requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2745&quot; title=&quot;Remove Hive&amp;#39;s runtime dependency on bin/hadoop&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2745&quot;&gt;HIVE-2745&lt;/a&gt;. Rework Hive dependency management to depend on jars directly, rather than via tarballs.&lt;/p&gt;

&lt;p&gt;  The current Hive Ivy dependency logic for its Hadoop dependencies is problematic - depending on the tarball and extracting the jars from there, rather than depending on the jars directly. It&apos;d be great if this was fixed to actually have the jar dependencies defined directly.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4647/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/4647/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13223747" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 22:39:56 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Was missing testutils/hadoop.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13223769" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 23:05:56 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  It can&apos;t be good to repeat the hadoop ivy dependencies for every module, when before that was all in one location (the shims module). The shims module should continue to deal with the hadoop dependency magic and everything else depend on shims.&lt;/p&gt;

&lt;p&gt;  Within shims, it would be nice to not see if-then-else for shim versions, but instead parameterized includes so that each shim version has a separate file for its hadoop dependencies (one ivy file for 0.20, one for 0.20S and one for 0.23).&lt;/p&gt;



&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13223784" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 23:15:56 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  Re: the dependency on Hadoop being repeated - I don&apos;t remember what was happening, but when I made the shims dependency not have transitive=&quot;false&quot;, things went bad, thereby requiring the hadoop dependency get specified everywhere. I&apos;ll play with that.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13223791" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 23:21:56 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  The tarball mechanics would extract the tarball into a version specific subdirectory of build/hadoopcore. The ivy equivalent could ivy-retrieve the hadoop artifacts into a similar folder structure and then reference it from elsewhere as it was.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13224671" author="phabricator@reviews.facebook.net" created="Wed, 7 Mar 2012 20:20:55 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Bumped Hadoop 0.20 and 0.23 versions to ones with properly published&lt;br/&gt;
  jars. Reworked shims dependency logic to not require if/else. Switched&lt;br/&gt;
  to transient dependencies being used to pick up hadoop dependencies&lt;br/&gt;
  downstream of hive-common.&lt;/p&gt;

&lt;p&gt;  Note that &quot;ant very-clean&quot; needs to be run when switching from&lt;br/&gt;
  building against 0.20, 1.0, or 0.23 to another on the same machine.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13225502" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 21:01:55 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build-common.xml:68 Please move this to build.properties&lt;br/&gt;
  build-common.xml:86 Is this specific to 0.23? If so please add a comment.&lt;br/&gt;
  build-common.xml:148 Since Hadoop 1.0.0 is now a reality, I think it would be good to always prefix any occurrences of version numbers with the major number, e.g. &quot;0.20&quot; instead of &quot;20&quot;&lt;br/&gt;
  build-common.xml:154 We should be consistent about the naming scheme in relation to versions, e.g. &quot;ivy-retrieve-hadoop-0.20&quot;, &quot;ivy-resolve-hadoop-0.20&quot;, &quot;hadoop-0.20-shim&quot;, etc.&lt;br/&gt;
  build.properties:20 Please add some comments explaining what this property does.&lt;br/&gt;
  testutils/hadoop:48 We should probably just insist that $HIVE_TEST_CLASSPATH is set and error out if it isn&apos;t.&lt;br/&gt;
  build.xml:700 This target is broken.&lt;br/&gt;
  build.xml:740 This target is broken.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13225579" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 22:01:56 +0000"  >&lt;p&gt;cwsteinbach has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build.xml:542 This patch breaks the eclipse classpath template. Can you please investigate the feasibility of intregrating IvyDE into the build? &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2739&quot; title=&quot;Manage Eclipse integration with IvyDE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2739&quot;&gt;HIVE-2739&lt;/a&gt; covers that task, but it would be great to get this all done in one patch. Note that ZK recently added support for IvyDE in &lt;a href=&quot;https://issues.apache.org/jira/browse/ZOOKEEPER-1178&quot; title=&quot;Add eclipse target for supporting Apache IvyDE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;ZOOKEEPER-1178&quot;&gt;ZOOKEEPER-1178&lt;/a&gt;, so you may be able to look at that patch for hints.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13225581" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 22:03:55 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/ivy.xml:34 Can we make separate ivy files for 0.20 and 0.23 and include dynamically? This would eliminate the need for the hadoopXXX configuration names.&lt;/p&gt;


&lt;p&gt;  build-common.xml:154 Please make a single ivy-retrieve-hadoop target or macro and parameterize the shim name.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13225629" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 22:47:54 +0000"  >&lt;p&gt;cwsteinbach has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/ivy.xml:34 Aren&apos;t configurations the designated mechanism for handling situations like this in Ivy? I don&apos;t see how breaking this into multiple files will improve the situation. Won&apos;t that mean that we&apos;ll have to update multiple files every time a new dependency is added instead of just one?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13225635" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 22:53:54 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  I&apos;ll rework the ivy-&lt;/p&gt;
{retrieve,resolve}
&lt;p&gt;-hadoopX targets get generalized - that should be easy. And I agree - the configuration switch is the right way to handle this.&lt;/p&gt;

&lt;p&gt;  I&apos;ll take a look at IvyDE.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13225646" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 23:03:56 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/ivy.xml:34 My comment refers only to the hadoop dependencies below. You will never have hadoop23 and hadoop20 configuration at the same time. Below is what we did in Pig, but it gets really cluttered because now you have the stuff for 0.20 and 0.23, which is mutually exclusive, in one file.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13225665" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 23:19:57 +0000"  >&lt;p&gt;cwsteinbach has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/ivy.xml:34 Seems like we can get the same benefits by ordering the dependencies listed in each ivy.xml file based on configuration.&lt;/p&gt;

&lt;p&gt;  @Andrew: Can you look into doing this? Thanks.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13226650" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 00:48:54 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/ivy.xml:34 Sure thing.&lt;/p&gt;

&lt;p&gt;  build-common.xml:86 It is - will do so.&lt;/p&gt;

&lt;p&gt;  EDIT: actually, no, it isn&apos;t. It was originally but is general now. Will remove the misleading comment.&lt;br/&gt;
  build-common.xml:154 ivy-&lt;/p&gt;
{resolve,retrieve}&lt;del&gt;hadoop20 is an obsolete bit of cruft - removing it. I&apos;ve also replaced the ivy&lt;/del&gt;{resolve,retrieve}
&lt;p&gt;-hadoop0.&lt;/p&gt;
{20,20S,23}
&lt;p&gt;&lt;del&gt;shim targets with ivy&lt;/del&gt;&lt;/p&gt;
{resolve,retrieve}
&lt;p&gt;-hadoop-shim, which is called with a parameter that specifies the shim conf to get.&lt;br/&gt;
  build.xml:700 Working for me?&lt;/p&gt;

&lt;p&gt;  build.xml:740 Again - works for me, with &quot;ant clean binary&quot;&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13226652" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 00:50:56 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Redid the shim ivy targets, clarified a few things.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13226673" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 01:12:55 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  arc patch --revision 2133&lt;/p&gt;

&lt;p&gt;  gives me two rejects (applying to trunk head)?&lt;/p&gt;


&lt;p&gt;  patching file build-common.xml&lt;br/&gt;
  patching file build.properties&lt;br/&gt;
  patching file build.xml&lt;br/&gt;
  Hunk #1 FAILED at 684.&lt;br/&gt;
  1 out of 1 hunk FAILED &amp;#8211; saving rejects to file build.xml.rej&lt;br/&gt;
  patching file builtins/build.xml&lt;br/&gt;
  patching file builtins/ivy.xml&lt;br/&gt;
  patching file cli/ivy.xml&lt;br/&gt;
  patching file common/ivy.xml&lt;br/&gt;
  patching file contrib/build.xml&lt;br/&gt;
  patching file contrib/ivy.xml&lt;br/&gt;
  patching file hbase-handler/build.xml&lt;br/&gt;
  patching file hbase-handler/ivy.xml&lt;br/&gt;
  patching file hwi/build.xml&lt;br/&gt;
  patching file hwi/ivy.xml&lt;br/&gt;
  patching file ivy/common-configurations.xml&lt;br/&gt;
  Hunk #1 FAILED at 18.&lt;br/&gt;
  1 out of 1 hunk FAILED &amp;#8211; saving rejects to file ivy/common-configurations.xml.rej&lt;br/&gt;
  patching file ivy/ivysettings.xml&lt;br/&gt;
  patching file ivy/libraries.properties&lt;br/&gt;
  patching file jdbc/build.xml&lt;br/&gt;
  patching file jdbc/ivy.xml&lt;br/&gt;
  patching file metastore/ivy.xml&lt;br/&gt;
  patching file pdk/ivy.xml&lt;br/&gt;
  patching file pdk/scripts/build-plugin.xml&lt;br/&gt;
  patching file ql/build.xml&lt;br/&gt;
  patching file ql/ivy.xml&lt;br/&gt;
  patching file serde/ivy.xml&lt;br/&gt;
  patching file service/build.xml&lt;br/&gt;
  patching file service/ivy.xml&lt;br/&gt;
  patching file shims/build.xml&lt;br/&gt;
  patching file shims/ivy.xml&lt;br/&gt;
  patching file testutils/hadoop&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13226674" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 01:12:57 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  also tried&lt;/p&gt;

&lt;p&gt;  arc export --unified --revision 2133&lt;/p&gt;

&lt;p&gt;  and then patch command, same result&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13226678" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 01:20:56 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Rebased on trunk - got the build.xml conflict when rebasing, but&lt;br/&gt;
  didn&apos;t see any issues with ivy/common-configurations.xml.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13226685" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 01:26:56 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  build.xml conflict is gone, ivy/common-configurations.xml.rej:&lt;br/&gt;
  ```&lt;br/&gt;
  ***************&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;
	&lt;ul&gt;
		&lt;li&gt;
		&lt;ul&gt;
			&lt;li&gt;18,23 ****&lt;br/&gt;
      &amp;lt;!-&lt;del&gt;these match the Maven configurations&lt;/del&gt;-&amp;gt;&lt;br/&gt;
      &amp;lt;conf name=&quot;default&quot; extends=&quot;master,compile&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;conf name=&quot;master&quot; description=&quot;contains the artifact but no dependencies&quot;/&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&amp;lt;conf name=&quot;compile&quot; description=&quot;contains the artifact but no dependencies&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;conf name=&quot;runtime&quot; description=&quot;runtime but not the artifact&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/configurations&amp;gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;18,31 ----&lt;br/&gt;
      &amp;lt;!-&lt;del&gt;these match the Maven configurations&lt;/del&gt;-&amp;gt;&lt;br/&gt;
      &amp;lt;conf name=&quot;default&quot; extends=&quot;master,compile&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;conf name=&quot;master&quot; description=&quot;contains the artifact but no dependencies&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;compile&quot; extends=&quot;hadoop${hadoop.mr.rev}&quot; description=&quot;contains the artifact but no dependencies&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
      &amp;lt;conf name=&quot;runtime&quot; description=&quot;runtime but not the artifact&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;test&quot; extends=&quot;hadoop${hadoop.mr.rev}test,compile&quot; visibility=&quot;private&quot; /&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;hadoop20&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;hadoop23&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;hadoop20test&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;hadoop23test&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;hadoop0.20.shim&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;hadoop0.20S.shim&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
  +   &amp;lt;conf name=&quot;hadoop0.23.shim&quot; visibility=&quot;private&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/configurations&amp;gt;&lt;br/&gt;
  ```&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13226688" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 01:32:55 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/build.xml:28 Is this here still needed?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13226691" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 01:34:57 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  Not sure why that doesn&apos;t apply cleanly.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13226940" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 20:52:54 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  shims/build.xml:28 Nope - will remove.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13226941" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 20:54:55 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Removing obsolete notclasspath from shims/build.xml. Also removed&lt;br/&gt;
  shims/build.xml&apos;s own classpath definition, as it was redundant.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13226943" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 20:56:56 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build.xml:542 This may take a bit for me to figure out, as I&apos;m not at all familiar with the eclipse stuff.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13227044" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 13:23:57 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  compile-test fails when running&lt;/p&gt;

&lt;p&gt;  ant clean package test&lt;/p&gt;


&lt;p&gt;  ```&lt;br/&gt;
  compile-test:&lt;br/&gt;
       &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Project: contrib&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 2 source files to /Users/thw/java/hive/trunk/build/contrib/test/classes&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /Users/thw/java/hive/trunk/contrib/src/test/org/apache/hadoop/hive/contrib/mr/TestGenericMR.java:117: cannot find symbol&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; symbol  : class Mapper&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; location: class org.apache.hadoop.hive.contrib.mr.TestGenericMR&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;   private Mapper identityMapper() {&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;           ^&lt;/p&gt;

&lt;p&gt;  ...&lt;/p&gt;

&lt;p&gt;      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt;                            ^&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; 15 errors&lt;/p&gt;

&lt;p&gt;  BUILD FAILED&lt;br/&gt;
  /Users/thw/java/hive/trunk/build.xml:306: The following error occurred while executing this line:&lt;br/&gt;
  /Users/thw/java/hive/trunk/build.xml:117: The following error occurred while executing this line:&lt;br/&gt;
  /Users/thw/java/hive/trunk/build-common.xml:269: Compile failed; see the compiler error output for details.&lt;br/&gt;
  ```&lt;/p&gt;





&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13227046" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 13:39:57 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  There are several changes to build/dist/lib that may not be intended. In particular there should be no hadoop bundled and other versions not downgrade. Should review to ensure we don&apos;t bundle things that are already part of hadoop (such as slf4j etc.)&lt;/p&gt;

&lt;p&gt;  ```&lt;br/&gt;
  readfactline-lm:hive thw$ ls trunk-before/build/dist/lib/ | sort &amp;gt; oldlib.txt&lt;br/&gt;
  readfactline-lm:hive thw$ ls trunk/build/dist/lib/ | sort &amp;gt; newlib.txt&lt;br/&gt;
  readfactline-lm:hive thw$ diff oldlib.txt newlib.txt&lt;br/&gt;
  8,9d7&lt;br/&gt;
  &amp;lt; commons-beanutils-1.7.0.jar&lt;br/&gt;
  &amp;lt; commons-beanutils-core-1.8.0.jar&lt;br/&gt;
  12d9&lt;br/&gt;
  &amp;lt; commons-codec-1.4.jar&lt;br/&gt;
  14d10&lt;br/&gt;
  &amp;lt; commons-configuration-1.6.jar&lt;br/&gt;
  16d11&lt;br/&gt;
  &amp;lt; commons-digester-1.8.jar&lt;br/&gt;
  19a15&lt;br/&gt;
  &amp;gt; commons-lang-2.5.jar&lt;br/&gt;
  23d18&lt;br/&gt;
  &amp;lt; commons-math-2.1.jar&lt;br/&gt;
  31a27,29&lt;br/&gt;
  &amp;gt; ftplet-api-1.0.0.jar&lt;br/&gt;
  &amp;gt; ftpserver-core-1.0.0.jar&lt;br/&gt;
  &amp;gt; ftpserver-deprecated-1.0.0-M2.jar&lt;br/&gt;
  32a31,33&lt;br/&gt;
  &amp;gt; hadoop-core-0.20.2.jar&lt;br/&gt;
  &amp;gt; hadoop-test-0.20.2.jar&lt;br/&gt;
  &amp;gt; hadoop-tools-0.20.2.jar&lt;br/&gt;
  52,53c53,54&lt;br/&gt;
  &amp;lt; jackson-core-asl-1.0.1.jar&lt;br/&gt;
  &amp;lt; jackson-mapper-asl-1.0.1.jar&lt;br/&gt;
  &amp;#8212;&lt;br/&gt;
  &amp;gt; httpclient-4.0.1.jar&lt;br/&gt;
  &amp;gt; httpcore-4.0.1.jar&lt;br/&gt;
  58,59c59,60&lt;br/&gt;
  &amp;lt; jetty-6.1.26.jar&lt;br/&gt;
  &amp;lt; jetty-util-6.1.26.jar&lt;br/&gt;
  &amp;#8212;&lt;br/&gt;
  &amp;gt; jetty-6.1.14.jar&lt;br/&gt;
  &amp;gt; jetty-util-6.1.14.jar&lt;br/&gt;
  64d64&lt;br/&gt;
  &amp;lt; junit-3.8.1.jar&lt;br/&gt;
  65a66&lt;br/&gt;
  &amp;gt; junit-4.5.jar&lt;br/&gt;
  71a73&lt;br/&gt;
  &amp;gt; mina-core-2.0.0-M5.jar&lt;br/&gt;
  76d77&lt;br/&gt;
  &amp;lt; servlet-api-2.5-20081211.jar&lt;br/&gt;
  77a79,80&lt;br/&gt;
  &amp;gt; servlet-api-2.5.jar&lt;br/&gt;
  &amp;gt; slf4j-api-1.5.2.jar&lt;br/&gt;
  ```&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13227051" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 14:03:58 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  As for the reject for ivy/common-configurations.xml (which is still an issue in the latest patch), after applying the patch with arc I downloaded the raw file from here (view options). Then created new diff and applied it to a clean working copy - works w/o rejects. Perhaps you could try the same locally and see whether that would produce a different patch?&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13227111" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 17:48:55 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Changes to test classpaths to get compilation working properly for&lt;br/&gt;
  shims and contrib tests.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13227210" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 19:18:36 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  A number of test compilation/execution tweaks, modifying the&lt;br/&gt;
  build/ivy/lib/default contents (and therefore the build/dist/lib&lt;br/&gt;
  contents) to not include transitive dependencies of Hadoop, and&lt;br/&gt;
  excluding hadoop-*.jar from build/dist/lib.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13227273" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 23:48:39 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Working on test failures - still seeing a good number, but making progress.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13227294" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 02:26:37 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Got a bunch more tests passing, especially in TestCLIDriver.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13227746" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 18:30:35 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  testutils/hadoop:50 If $HIVE_TEST_CLASSPATH is not set we should throw an error and exit instead of using a hardcoded default classpath.&lt;br/&gt;
  testutils/hadoop:47 I think we should change the name of this env var to something like HIVE_HADOOP_TEST_CLASSPATH in order to make it clear that we&apos;re using it with bin/hadoop.&lt;br/&gt;
  build-common.xml:409 Let&apos;s make it possible to override this value by adding test.hadoop.bin.path=${hive.root}/testutils/hadoop to build.properties, and then reference ${test.hadoop.bin.path} here.&lt;br/&gt;
  build-common.xml:384 This is probably causing some test failures since some tests expect hive-contrib-&lt;b&gt;.jar to *not&lt;/b&gt; be on the classpath. I think we should create a classpath specifically for passing to the bin/hadoop consisting of the hive jars, the hadoop jars, and relevant dependencies, and not include hive-contrib-*.jar.&lt;br/&gt;
  build-common.xml:79 alphabetical order?&lt;br/&gt;
  ivy/common-configurations.xml:24 Are &apos;hadoop20&apos; and &apos;hadoop23&apos; compile configurations? If so can we change the name to &apos;hadoop20.compile&apos; and &apos;hadoop23.compile&apos;, and change the names of the test configurations to &quot;hadoop20.test&quot; and &quot;hadoop23.test&quot;, or something that&apos;s consistent?&lt;br/&gt;
  pdk/scripts/build-plugin.xml:36 Please define ivy.lib.default.dir and reference that instead.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13227771" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 18:50:38 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build-common.xml:384 Adding a new hadoop.test.classpath path + hadoop.testcp property that&apos;ll use the shims Ivy configuration for the version of Hadoop we&apos;re testing against (so that we actually get all the jars properly) and the Hive jars. We can add to that if needed.&lt;br/&gt;
  build-common.xml:79 Done.&lt;br/&gt;
  build-common.xml:409 Done.&lt;br/&gt;
  ivy/common-configurations.xml:24 Done.&lt;br/&gt;
  pdk/scripts/build-plugin.xml:36 Done.&lt;br/&gt;
  testutils/hadoop:47 Done.&lt;br/&gt;
  testutils/hadoop:50 Done.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13227830" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 19:54:35 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build-common.xml:384 Ok, still working on getting this bit right. It&apos;s worth mentioning that the above as it is in this patch here does NOT include hive-contrib*.jar in the classpath, so that&apos;s not an issue.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13228010" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 22:38:38 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  A bunch of test failures fixed, a few issues addressed. Still passing&lt;br/&gt;
  the whole test.classpath to testutils/hadoop - things went weird if I didn&apos;t.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13228416" author="phabricator@reviews.facebook.net" created="Tue, 13 Mar 2012 14:56:37 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  Latest patch had four test failures, only one of which I&apos;ve seen more than once so far. That one is org.apache.hadoop.hive.serde2.lazy.TestLazySimpleSerDe.testLazySimpleSerDe. The others are org.apache.hadoop.hive.metastore.TestMarkPartition.testMarkingPartitionSet, org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_sample6, and org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udfnull.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13234900" author="abayer" created="Wed, 21 Mar 2012 19:19:16 +0000"  >&lt;p&gt;With the latest patch (I&apos;ll have a rebase on top of trunk posted later today, but there were no differences in build results), we&apos;ve still got just two consistent test failures (org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udfnull and org.apache.hadoop.hive.serde2.lazy.TestLazySimpleSerDe.testLazySimpleSerDe). What more do we need to do to go live with this?&lt;/p&gt;</comment>
                            <comment id="13234918" author="phabricator@reviews.facebook.net" created="Wed, 21 Mar 2012 19:31:39 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Rebased onto latest trunk.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13246727" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 20:59:26 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Rebasing on trunk again.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13251140" author="phabricator@reviews.facebook.net" created="Tue, 10 Apr 2012 22:45:15 +0000"  >&lt;p&gt;cwsteinbach has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  Executing the following ant command results in a failure:&lt;/p&gt;

&lt;p&gt;  % ant clean package test -Dtestcase=TestNegativeCliDriver -Dqfile=autolocal1.q&lt;/p&gt;

&lt;p&gt;  WARNINGS&lt;br/&gt;
  &lt;span class=&quot;error&quot;&gt;&amp;#91;ivy:resolve&amp;#93;&lt;/span&gt; 		module not found: org.apache.hive#hive-builtins;0.10.0-SNAPSHOT&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ivy/common-configurations.xml:28 Is it possible to make these names consistent, e.g. change &quot;hadoop0.20.shim&quot; to &quot;hadoop20.shim&quot;?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13251161" author="phabricator@reviews.facebook.net" created="Tue, 10 Apr 2012 23:07:15 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  &apos;k, think I found the problem with hive-builtins - since its jar is built outside of the build-common.xml jar target, it wasn&apos;t getting published to the local repo. re: the shims configuration names - they&apos;ve got to be consistent with the other strings in shims/build.xml, so unless those can change too (and I&apos;m not sure if they can), they need to stay as they are.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;-dev-branch&lt;/p&gt;</comment>
                            <comment id="13251165" author="phabricator@reviews.facebook.net" created="Tue, 10 Apr 2012 23:11:13 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Added ivy:publish for builtins, rebased on trunk.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13252905" author="cwsteinbach" created="Thu, 12 Apr 2012 22:06:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_udfnull&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;TestNegativeCliDriver.udfnull fails consistently for me. The cause of the failure is that the hive-contrib and hive_contrib JARs are getting included on the HIVE_HADOOP_TEST_CLASSPATH.&lt;/p&gt;

&lt;p&gt;@Andrew: Can you please modify the patch so that the hive-contrib and hive_contrib JARs are not included in HIVE_HADOOP_TEST_CLASSPATH? Thanks.&lt;/p&gt;</comment>
                            <comment id="13252929" author="cwsteinbach" created="Thu, 12 Apr 2012 22:27:40 +0000"  >&lt;p&gt;Here&apos;s the exception stack from the TestLazySimpleSerDe test failure:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    [junit] Running org.apache.hadoop.hive.serde2.lazy.TestLazySimpleSerDe
    [junit] java.lang.ArrayIndexOutOfBoundsException: -65
    [junit] 	at org.apache.commons.codec.binary.Base64.isBase64(Base64.java:137)
    [junit] 	at org.apache.commons.codec.binary.Base64.isArrayByteBase64(Base64.java:163)
    [junit] 	at org.apache.hadoop.hive.serde2.lazy.LazyBinary.init(LazyBinary.java:52)
    [junit] 	at org.apache.hadoop.hive.serde2.lazy.LazyStruct.uncheckedGetField(LazyStruct.java:219)
    [junit] 	at org.apache.hadoop.hive.serde2.lazy.LazyStruct.getField(LazyStruct.java:192)
    [junit] 	at org.apache.hadoop.hive.serde2.lazy.objectinspector.LazySimpleStructObjectInspector.getStructFieldData(LazySimpleStructObjectInspector.java:188)
    [junit] 	at org.apache.hadoop.hive.serde2.lazy.TestLazySimpleSerDe.deserializeAndSerialize(TestLazySimpleSerDe.java:92)
    [junit] 	at org.apache.hadoop.hive.serde2.lazy.TestLazySimpleSerDe.testLazySimpleSerDe(TestLazySimpleSerDe.java:73)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The ArrayIndexOutOfBoundsException thrown by Base64.isBase64() is due to a bug in commons-codec 1.3. This was fixed in &lt;a href=&quot;https://issues.apache.org/jira/browse/CODEC-22&quot; title=&quot;[codec] Base64.isArrayByteBase64() throws an ArrayIndexOutOfBoundsException for negative octets.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CODEC-22&quot;&gt;&lt;del&gt;CODEC-22&lt;/del&gt;&lt;/a&gt; in commons-codec 1.4. Right now the test classpath contains copies of versions 1.3 and 1.4 of commons-codec, and the version 1.3 JAR precedes version 1.4. Ideally we can prevent the 1.3 JAR from getting pulled down entirely, but at the least we need to make sure it appears on the classpath after the v1.4 JAR.&lt;/p&gt;

&lt;p&gt;@Andrew: can you please look into this? Thanks.&lt;/p&gt;</comment>
                            <comment id="13253641" author="phabricator@reviews.facebook.net" created="Fri, 13 Apr 2012 18:50:16 +0000"  >&lt;p&gt;abayer updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA, cwsteinbach&lt;/p&gt;

&lt;p&gt;  Exclude hive contrib from test classpaths, bump up commons-codec&lt;br/&gt;
  version to 1.4 in ivy/libraries.properties.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  build.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  testutils/hadoop&lt;/p&gt;</comment>
                            <comment id="13253642" author="abayer" created="Fri, 13 Apr 2012 18:50:32 +0000"  >&lt;p&gt;With the latest patch, those two tests pass.&lt;/p&gt;</comment>
                            <comment id="13253643" author="abayer" created="Fri, 13 Apr 2012 18:51:29 +0000"  >&lt;p&gt;...but make sure to nuke your ~/.ivy2/cache/org.apache.hive before rebuilding, or you&apos;ll end up with stale Ivy artifacts pointing to commons-codec 1.3.&lt;/p&gt;</comment>
                            <comment id="13254252" author="phabricator@reviews.facebook.net" created="Sun, 15 Apr 2012 02:27:14 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ivy/common-configurations.xml:32 Applying the patch (still) fails for this file and after download from here I still need to remove that last line &quot; No newline ...&quot; - Can you eliminate this from the patch?&lt;/p&gt;



&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13254255" author="phabricator@reviews.facebook.net" created="Sun, 15 Apr 2012 03:03:32 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  testutils/hadoop:1 had to make this file executable after the patch&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13254347" author="phabricator@reviews.facebook.net" created="Sun, 15 Apr 2012 15:27:18 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  The following 3 tests fail:&lt;/p&gt;

&lt;p&gt;  testNegativeCliDriver_alter_table_wrong_regex&lt;br/&gt;
  testNegativeCliDriver_create_table_wrong_regex&lt;br/&gt;
  testNegativeCliDriver_udfnull&lt;/p&gt;

&lt;p&gt;  Looks like SerDe/UDFs are not found:&lt;/p&gt;

&lt;p&gt;  ```Caused by: org.apache.hadoop.hive.serde2.SerDeException: SerDe org.apache.hadoop.hive.contrib.serde2.RegexSerDe does not exist&lt;br/&gt;
          at org.apache.hadoop.hive.serde2.SerDeUtils.lookupDeserializer(SerDeUtils.java:85)&lt;br/&gt;
          at org.apache.hadoop.hive.ql.exec.DDLTask.validateSerDe(DDLTask.java:3085)```&lt;/p&gt;

&lt;p&gt;  ...&lt;/p&gt;

&lt;p&gt;  ```2012-04-15 00:59:58,643 INFO  exec.FunctionTask (FunctionTask.java:createFunction(87)) - create function: java.lang.ClassNotFoundException: org.apache.hadoop.hive.contrib.udf.example.UDFExampleArraySum&lt;br/&gt;
          at java.net.URLClassLoader$1.run(URLClassLoader.java:202)&lt;br/&gt;
  ```&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13254417" author="phabricator@reviews.facebook.net" created="Sun, 15 Apr 2012 19:37:17 +0000"  >&lt;p&gt;abayer has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  Looks like the ql tests &lt;b&gt;do&lt;/b&gt; need hive contrib in the classpath, at least for those tests. Hrm. Carl, any thoughts?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13254493" author="phabricator@reviews.facebook.net" created="Mon, 16 Apr 2012 02:59:14 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  Only udfnull fails after adding back contrib into the test class path (resolves other 2 failures).&lt;/p&gt;

&lt;p&gt;  ```&lt;br/&gt;
  ant test -Dtestcase=TestNegativeCliDriver -Dqfile=udfnull.q -Dtest.silent=false&lt;br/&gt;
  ```&lt;/p&gt;

&lt;p&gt;  It looks from the hive history though as if the udfnull queries complete. Could not find out what is wrong with it yet.&lt;/p&gt;



&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13255173" author="phabricator@reviews.facebook.net" created="Mon, 16 Apr 2012 23:10:15 +0000"  >&lt;p&gt;cwsteinbach has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  alter_table_wrong_regex and create_table_wrong_regex both belong in contrib/src/test/queries/clientnegative/. It was a mistake in the first place for them to get committed to the ql directory since nothing else in Hive is supposed to have a dependency on contrib (which is pretty much the whole point of contrib).&lt;/p&gt;

&lt;p&gt;  The same thing goes for udfnull.q. The point of this test (which you would never be able to tell by looking at it since the original author failed to include any documentation) is that query execution will fail (despite query compilation succeeding) if the query references a UDF which is on the local classpath but not on the cluster classpath, which usually happens when the user forgets to include an &apos;ADD JAR ...&apos; statement. In order to get this test to pass we need to ensure that hive-contrib*.jar is not on bin/hadoop&apos;s classpath.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13255175" author="phabricator@reviews.facebook.net" created="Mon, 16 Apr 2012 23:22:13 +0000"  >&lt;p&gt;cwsteinbach has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  build-common.xml:367 Indentation.&lt;br/&gt;
  build-common.xml:379 ${testcp} is not defined.&lt;br/&gt;
  build-common.xml:385 $HIVE_HADOOP_TEST_CLASSPATH is supposed to be the classpath that bin/hadoop would construct for itself without any outside input, e.g. hadoop-* JAR files and any dependencies. It should not include any Hive JARs or dependencies.&lt;br/&gt;
  testutils/hadoop:53 If $HADOOP_CLASSPATH is defined, we should tack it onto the end of the CLASSPATH at this point.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13256722" author="phabricator@reviews.facebook.net" created="Wed, 18 Apr 2012 17:26:40 +0000"  >&lt;p&gt;thw has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;/p&gt;

&lt;p&gt;  Carl, thanks for the clarification. I have the 3 tests working now after including contrib into the test classpath and excluding it from the MR classpath.&lt;/p&gt;

&lt;p&gt;  Looks like there is one more test failing (but not showing up as failure in the test report?):&lt;/p&gt;

&lt;p&gt;  test:&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hive.pdk.PluginTest&lt;br/&gt;
      &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 9.877 sec&lt;/p&gt;

&lt;p&gt;  That&apos;s because it does not get the ${test.hadoop.bin.path} setting. I&apos;m trying to fix that. Will see to put up a new patch once that is done.&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2133&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2133&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13256910" author="phabricator@reviews.facebook.net" created="Wed, 18 Apr 2012 20:18:37 +0000"  >&lt;p&gt;thw requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2646&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  Update to fix test failures.&lt;/p&gt;

&lt;p&gt;  The current Hive Ivy dependency logic for its Hadoop dependencies is problematic - depending on the tarball and extracting the jars from there, rather than depending on the jars directly. It&apos;d be great if this was fixed to actually have the jar dependencies defined directly.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2883&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  build.xml&lt;br/&gt;
  testutils/hadoop&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/6567/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/6567/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13256923" author="thw" created="Wed, 18 Apr 2012 20:35:05 +0000"  >&lt;p&gt;Patch to address unit test failures. This should apply cleanly to trunk (arc patch doesn&apos;t).&lt;/p&gt;</comment>
                            <comment id="13257474" author="thw" created="Thu, 19 Apr 2012 13:23:30 +0000"  >&lt;p&gt;The patch needs to be applied through arc:&lt;/p&gt;

&lt;p&gt;arc patch D2883&lt;br/&gt;
chmod u+x testutils/hadoop&lt;br/&gt;
svn propset svn:executable yes testutils/hadoop&lt;/p&gt;

&lt;p&gt;Al least for me, arc patch will choke on ivy/common-configurations.xml - download the file from phabricator directly. I had the problem with Andrew&apos;s patch also, so I&apos;m not sure whether this is just me or an arc issue.&lt;/p&gt;</comment>
                            <comment id="13257478" author="thw" created="Thu, 19 Apr 2012 13:45:44 +0000"  >&lt;p&gt;Patch file produced using &lt;/p&gt;

&lt;p&gt;arc export --unified --revision 2883 &lt;/p&gt;

&lt;p&gt;then replaced ivy/common-configurations section with output from&lt;/p&gt;

&lt;p&gt;svn diff ivy/common-configurations.xml&lt;/p&gt;</comment>
                            <comment id="13257833" author="thw" created="Thu, 19 Apr 2012 21:31:32 +0000"  >&lt;p&gt;All test pass in latest run:&lt;/p&gt;

&lt;p&gt;Tests	Failures	Errors	Success rate	Time&lt;br/&gt;
1678	0	0	100.00%	19245.326&lt;/p&gt;</comment>
                            <comment id="13258452" author="cwsteinbach" created="Fri, 20 Apr 2012 18:29:22 +0000"  >&lt;p&gt;@Thomas: I tried running the tests on Jenkins and noticed that the build is failing despite all tests passing. It looks like this is because compilation of the pdk subproject is failing:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;BUILD FAILED
/var/lib/hudson/production/workspace/carl-HIVE-patch-test1/build.xml:316: The following error occurred while executing this line:
/var/lib/hudson/production/workspace/carl-HIVE-patch-test1/build.xml:321: The following error occurred while executing this line:
/var/lib/hudson/production/workspace/carl-HIVE-patch-test1/pdk/build.xml:52: The following error occurred while executing this line:
/var/lib/hudson/production/workspace/carl-HIVE-patch-test1/build/dist/scripts/pdk/build-plugin.xml:58: /var/lib/hudson/production/workspace/carl-HIVE-patch-test1/build/pdk/test-plugin/${build.ivy.lib.dir}/default does not exist.
	at org.apache.tools.ant.types.AbstractFileSet.getDirectoryScanner(AbstractFileSet.java:474)
	at org.apache.tools.ant.types.FileSet.iterator(FileSet.java:69)
	at org.apache.tools.ant.types.resources.Union.getCollection(Union.java:123)
	at org.apache.tools.ant.types.resources.Union.getCollection(Union.java:107)
	at org.apache.tools.ant.types.resources.BaseResourceCollectionContainer.cacheCollection(BaseResourceCollectionContainer.java:265)
	at org.apache.tools.ant.types.resources.BaseResourceCollectionContainer.iterator(BaseResourceCollectionContainer.java:142)
	at org.apache.tools.ant.types.Path.iterator(Path.java:704)
	at org.apache.tools.ant.types.Path.iterator(Path.java:698)
	at org.apache.tools.ant.types.resources.Union.getCollection(Union.java:123)
	at org.apache.tools.ant.types.resources.Union.list(Union.java:86)
	at org.apache.tools.ant.types.Path.list(Path.java:372)
	at org.apache.tools.ant.types.Path.addExisting(Path.java:331)
	at org.apache.tools.ant.types.Path.addExisting(Path.java:319)
	at org.apache.tools.ant.types.Path.concatSpecialPath(Path.java:566)
	at org.apache.tools.ant.types.Path.concatSystemClasspath(Path.java:526)
	at org.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.getCompileClasspath(DefaultCompilerAdapter.java:155)
	at org.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.setupJavacCommandlineSwitches(DefaultCompilerAdapter.java:183)
	at org.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.setupModernJavacCommandlineSwitches(DefaultCompilerAdapter.java:321)
	at org.apache.tools.ant.taskdefs.compilers.DefaultCompilerAdapter.setupModernJavacCommand(DefaultCompilerAdapter.java:368)
	at org.apache.tools.ant.taskdefs.compilers.Javac13.execute(Javac13.java:48)
	at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:1097)
	at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:906)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1397)
	at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1249)
	at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1397)
	at org.apache.tools.ant.helper.SingleCheckExecutor.executeTargets(SingleCheckExecutor.java:38)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1249)
	at org.apache.tools.ant.taskdefs.Ant.execute(Ant.java:442)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.taskdefs.Sequential.execute(Sequential.java:68)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.taskdefs.MacroInstance.execute(MacroInstance.java:398)
	at net.sf.antcontrib.logic.ForTask.doSequentialIteration(ForTask.java:259)
	at net.sf.antcontrib.logic.ForTask.doToken(ForTask.java:268)
	at net.sf.antcontrib.logic.ForTask.doTheTasks(ForTask.java:324)
	at net.sf.antcontrib.logic.ForTask.execute(ForTask.java:244)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1397)
	at org.apache.tools.ant.Project.executeTarget(Project.java:1366)
	at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1249)
	at org.apache.tools.ant.Main.runBuild(Main.java:801)
	at org.apache.tools.ant.Main.startAnt(Main.java:218)
	at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
	at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13258454" author="cwsteinbach" created="Fri, 20 Apr 2012 18:30:24 +0000"  >&lt;p&gt;@Thomas: I&apos;m going to try to fix the pdk problem later today. In the meantime I was wondering if you could look at the eclipse templates and make sure that they&apos;re up to date? Thanks.&lt;/p&gt;</comment>
                            <comment id="13258638" author="phabricator@reviews.facebook.net" created="Fri, 20 Apr 2012 22:37:30 +0000"  >&lt;p&gt;thw updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Fix for pdk test target.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2883&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  build.xml&lt;br/&gt;
  testutils/hadoop&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  pdk/build.xml&lt;/p&gt;</comment>
                            <comment id="13258646" author="thw" created="Fri, 20 Apr 2012 22:46:35 +0000"  >&lt;p&gt;Patch with fix for pdk test.&lt;/p&gt;</comment>
                            <comment id="13258695" author="thw" created="Sat, 21 Apr 2012 00:36:29 +0000"  >&lt;p&gt;With latest patch, the build failure is gone. However, what I see now is that the same test runs twice, it passes at the beginning and then later it fails (different ant target chain).&lt;/p&gt;</comment>
                            <comment id="13258705" author="thw" created="Sat, 21 Apr 2012 00:52:16 +0000"  >&lt;p&gt;Here is the test execution failure (for the second execution of org.apache.hive.pdk.PluginTest)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed to load Hive builtin functions
java.lang.RuntimeException: Failed to load Hive builtin functions
        at org.apache.hadoop.hive.ql.session.SessionState.&amp;lt;init&amp;gt;(SessionState.java:205)
        at org.apache.hadoop.hive.cli.CliSessionState.&amp;lt;init&amp;gt;(CliSessionState.java:81)
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:579)
        at org.apache.hive.pdk.PluginTest.runHive(PluginTest.java:70)
        at org.apache.hive.pdk.PluginTest$PluginGlobalSetup.setUp(PluginTest.java:177)
        at junit.extensions.TestSetup$1.protect(TestSetup.java:22)
        at junit.extensions.TestSetup.run(TestSetup.java:27)
Caused by: java.lang.ClassNotFoundException: org.apache.hive.builtins.BuiltinUtils
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13258706" author="thw" created="Sat, 21 Apr 2012 00:53:15 +0000"  >&lt;p&gt;To note, all of that under the radar of testreport?&lt;/p&gt;</comment>
                            <comment id="13258745" author="phabricator@reviews.facebook.net" created="Sat, 21 Apr 2012 02:21:29 +0000"  >&lt;p&gt;thw updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Fix pdk/PluginTest&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2883&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2883&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  shims/ivy.xml&lt;br/&gt;
  shims/build.xml&lt;br/&gt;
  builtins/ivy.xml&lt;br/&gt;
  builtins/build.xml&lt;br/&gt;
  build.properties&lt;br/&gt;
  hbase-handler/ivy.xml&lt;br/&gt;
  hbase-handler/build.xml&lt;br/&gt;
  build.xml&lt;br/&gt;
  testutils/hadoop&lt;br/&gt;
  jdbc/ivy.xml&lt;br/&gt;
  jdbc/build.xml&lt;br/&gt;
  metastore/ivy.xml&lt;br/&gt;
  ivy/common-configurations.xml&lt;br/&gt;
  ivy/ivysettings.xml&lt;br/&gt;
  ivy/libraries.properties&lt;br/&gt;
  build-common.xml&lt;br/&gt;
  hwi/ivy.xml&lt;br/&gt;
  hwi/build.xml&lt;br/&gt;
  common/ivy.xml&lt;br/&gt;
  service/ivy.xml&lt;br/&gt;
  service/build.xml&lt;br/&gt;
  contrib/ivy.xml&lt;br/&gt;
  contrib/build.xml&lt;br/&gt;
  serde/ivy.xml&lt;br/&gt;
  cli/ivy.xml&lt;br/&gt;
  ql/ivy.xml&lt;br/&gt;
  ql/build.xml&lt;br/&gt;
  pdk/ivy.xml&lt;br/&gt;
  pdk/scripts/build-plugin.xml&lt;br/&gt;
  pdk/build.xml&lt;/p&gt;</comment>
                            <comment id="13258867" author="thw" created="Sat, 21 Apr 2012 15:02:23 +0000"  >&lt;p&gt;ant clean package package test&lt;/p&gt;

&lt;p&gt;BUILD SUCCESSFUL&lt;br/&gt;
Total time: 315 minutes 27 seconds&lt;/p&gt;</comment>
                            <comment id="13259842" author="cwsteinbach" created="Mon, 23 Apr 2012 19:07:36 +0000"  >&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="13259845" author="abayer" created="Mon, 23 Apr 2012 19:09:01 +0000"  >&lt;p&gt;+1 indeed. =)&lt;/p&gt;</comment>
                            <comment id="13259858" author="abayer" created="Mon, 23 Apr 2012 19:22:28 +0000"  >&lt;p&gt;Reuploading patch with ASF license checked.&lt;/p&gt;</comment>
                            <comment id="13259864" author="cwsteinbach" created="Mon, 23 Apr 2012 19:33:04 +0000"  >&lt;p&gt;Committed to trunk. Thanks Andrew and Thomas!&lt;/p&gt;</comment>
                            <comment id="13260018" author="thw" created="Mon, 23 Apr 2012 22:19:15 +0000"  >&lt;p&gt;Reopening for backport to 0.9 branch.&lt;/p&gt;</comment>
                            <comment id="13260134" author="hudson" created="Tue, 24 Apr 2012 01:20:39 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1391 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1391/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1391/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;. Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs (Andrew Bayer and Thomas Weise) (Revision 1329381)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329381&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/common-configurations.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/testutils/hadoop&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13266669" author="ashutoshc" created="Wed, 2 May 2012 16:16:32 +0000"  >&lt;p&gt;Merged in 0.9 branch.&lt;/p&gt;</comment>
                            <comment id="13266729" author="hudson" created="Wed, 2 May 2012 17:21:15 +0000"  >&lt;p&gt;Integrated in Hive-0.9.1-SNAPSHOT-h0.21-keepgoing=false #3 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21-keepgoing=false/3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21-keepgoing=false/3/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs. Merged in from trunk. (Andrew Bayer and Thomas Weise) (Revision 1333094)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1333094&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1333094&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.9&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/contrib/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hwi/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ivy/common-configurations.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/jdbc/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/jdbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/pdk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/pdk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/service/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/service/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/shims/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/testutils/hadoop&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13267201" author="hudson" created="Thu, 3 May 2012 05:30:07 +0000"  >&lt;p&gt;Integrated in Hive-0.9.1-SNAPSHOT-h0.21 #3 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21/3/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21/3/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs. Merged in from trunk. (Andrew Bayer and Thomas Weise) (Revision 1333094)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1333094&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1333094&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.9&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/contrib/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hwi/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ivy/common-configurations.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/jdbc/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/jdbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/pdk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/pdk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/service/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/service/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/shims/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/testutils/hadoop&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13270138" author="thw" created="Tue, 8 May 2012 02:22:15 +0000"  >&lt;p&gt;Reopening to fix test failure on 0.9 branch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21/7/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21/7/testReport/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Earlier changes erased the LANG setting, while trunk build masks this by exporting it, 0.9.1 build does not. Thanks to Ashutosh for diagnosing the issue.&lt;/p&gt;</comment>
                            <comment id="13270140" author="thw" created="Tue, 8 May 2012 02:25:01 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2811&quot; title=&quot;Export LANG=en_US.UTF-8 to environment while running tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2811&quot;&gt;&lt;del&gt;HIVE-2811&lt;/del&gt;&lt;/a&gt;. Test: ant test -Dtestcase=TestCliDriver -Dqfile=inputddl5.q -Dtest.silent=false&lt;/p&gt;</comment>
                            <comment id="13270839" author="ashutoshc" created="Tue, 8 May 2012 21:20:11 +0000"  >&lt;p&gt;Committed to trunk and 0.9 branch. Thanks, Thomas!&lt;/p&gt;</comment>
                            <comment id="13270922" author="hudson" created="Tue, 8 May 2012 23:23:56 +0000"  >&lt;p&gt;Integrated in Hive-0.9.1-SNAPSHOT-h0.21-keepgoing=false #10 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21-keepgoing=false/10/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21-keepgoing=false/10/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; : merged in from trunk. Fix for LANG setting for test environment. (Thomas Weise via Ashutosh Chauhan) (Revision 1335774)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335774&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.9&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build-common.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13271041" author="hudson" created="Wed, 9 May 2012 03:22:05 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1419 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1419/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1419/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; : Fix for LANG setting while running tests. (Thomas Weise via Ashutosh Chauhan) (Revision 1335771)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335771&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335771&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13271149" author="hudson" created="Wed, 9 May 2012 06:32:05 +0000"  >&lt;p&gt;Integrated in Hive-0.9.1-SNAPSHOT-h0.21 #10 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21/10/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-0.9.1-SNAPSHOT-h0.21/10/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; : merged in from trunk. Fix for LANG setting for test environment. (Thomas Weise via Ashutosh Chauhan) (Revision 1335774)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335774&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.9&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.9/build-common.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13291928" author="kannakar@microsoft.com" created="Fri, 8 Jun 2012 19:34:48 +0000"  >&lt;p&gt;I downloaded the Hadoop &amp;amp; Hive source from apache and made some changes in Hadoop internally. Now I am trying to run hive unit tests against my changes (internal Hadoop). Are there any configuration settings in hive (unit tests) to configure and run against local Hadoop jars.&lt;/p&gt;</comment>
                            <comment id="13547907" author="hudson" created="Wed, 9 Jan 2013 10:23:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt; : Fix for LANG setting while running tests. (Thomas Weise via Ashutosh Chauhan) (Revision 1335771)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2646&quot; title=&quot;Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2646&quot;&gt;&lt;del&gt;HIVE-2646&lt;/del&gt;&lt;/a&gt;. Hive Ivy dependencies on Hadoop should depend on jars directly, not tarballs (Andrew Bayer and Thomas Weise) (Revision 1329381)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335771&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1335771&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329381&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1329381&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hbase-handler/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hwi/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/common-configurations.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/ivysettings.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ivy/libraries.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/jdbc/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/testutils/hadoop&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550274" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:03 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12560267">HIVE-3117</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12552233">HIVE-2976</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12553429">HIVE-2990</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12555931">HIVE-3028</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12539676">HIVE-2745</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12554977">HIVE-3017</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12559511">HIVE-3092</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12517324" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.1.patch" size="64148" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 22:31:56 +0000"/>
                            <attachment id="12517982" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.10.patch" size="61939" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 02:26:39 +0000"/>
                            <attachment id="12518107" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.11.patch" size="62799" author="phabricator@reviews.facebook.net" created="Mon, 12 Mar 2012 22:38:40 +0000"/>
                            <attachment id="12519291" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.12.patch" size="62478" author="phabricator@reviews.facebook.net" created="Wed, 21 Mar 2012 19:31:41 +0000"/>
                            <attachment id="12521389" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.13.patch" size="62575" author="phabricator@reviews.facebook.net" created="Wed, 4 Apr 2012 20:59:26 +0000"/>
                            <attachment id="12522177" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.14.patch" size="62956" author="phabricator@reviews.facebook.net" created="Tue, 10 Apr 2012 23:11:14 +0000"/>
                            <attachment id="12522602" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.15.patch" size="63088" author="phabricator@reviews.facebook.net" created="Fri, 13 Apr 2012 18:50:18 +0000"/>
                            <attachment id="12517325" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.2.patch" size="68472" author="phabricator@reviews.facebook.net" created="Tue, 6 Mar 2012 22:39:58 +0000"/>
                            <attachment id="12517446" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.3.patch" size="56825" author="phabricator@reviews.facebook.net" created="Wed, 7 Mar 2012 20:20:55 +0000"/>
                            <attachment id="12517809" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.4.patch" size="55085" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 00:50:57 +0000"/>
                            <attachment id="12517821" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.5.patch" size="55236" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 01:20:56 +0000"/>
                            <attachment id="12517864" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.6.patch" size="56094" author="phabricator@reviews.facebook.net" created="Sat, 10 Mar 2012 20:54:55 +0000"/>
                            <attachment id="12517906" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.7.patch" size="56740" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 17:48:56 +0000"/>
                            <attachment id="12517962" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.8.patch" size="57677" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 19:18:37 +0000"/>
                            <attachment id="12517973" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2133.9.patch" size="61195" author="phabricator@reviews.facebook.net" created="Sun, 11 Mar 2012 23:48:40 +0000"/>
                            <attachment id="12523245" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2883.1.patch" size="64575" author="phabricator@reviews.facebook.net" created="Wed, 18 Apr 2012 20:18:38 +0000"/>
                            <attachment id="12523577" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2883.2.patch" size="65361" author="phabricator@reviews.facebook.net" created="Fri, 20 Apr 2012 22:37:31 +0000"/>
                            <attachment id="12523609" name="ASF.LICENSE.NOT.GRANTED--HIVE-2646.D2883.3.patch" size="65539" author="phabricator@reviews.facebook.net" created="Sat, 21 Apr 2012 02:21:30 +0000"/>
                            <attachment id="12523610" name="HIVE-2646-fixtests.patch" size="65548" author="thw" created="Sat, 21 Apr 2012 02:27:44 +0000"/>
                            <attachment id="12523847" name="HIVE-2646-fixtests.txt" size="65548" author="abayer" created="Mon, 23 Apr 2012 19:22:28 +0000"/>
                            <attachment id="12517158" name="HIVE-2646.diff.txt" size="63907" author="abayer" created="Mon, 5 Mar 2012 23:30:12 +0000"/>
                            <attachment id="12525941" name="HIVE-2646_LANG.patch" size="863" author="thw" created="Tue, 8 May 2012 02:23:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>22.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>220498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02upz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14578</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>