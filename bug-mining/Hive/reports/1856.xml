<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:15:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6310] Fix a few minimr test failures</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6310</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;These test cases are:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ql/src/test/queries/clientpositive/import_exported_table.q
ql/src/test/queries/clientpositive/load_hdfs_file_with_space_in_the_name.q
ql/src/test/queries/clientpositive/root_dir_external_table.q
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;They are failing because of existing hdfs:///tmp/test, possible left over by other tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691286">HIVE-6310</key>
            <summary>Fix a few minimr test failures</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xuefuz">Xuefu Zhang</assignee>
                                    <reporter username="xuefuz">Xuefu Zhang</reporter>
                        <labels>
                    </labels>
                <created>Sun, 26 Jan 2014 19:15:55 +0000</created>
                <updated>Sat, 22 Mar 2014 06:33:56 +0000</updated>
                            <resolved>Tue, 28 Jan 2014 15:01:44 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13882411" author="brocknoland" created="Sun, 26 Jan 2014 19:52:04 +0000"  >&lt;p&gt;+1 pending tests&lt;/p&gt;</comment>
                            <comment id="13882427" author="hiveqa" created="Sun, 26 Jan 2014 21:10:29 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12625283/HIVE-6310.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12625283/HIVE-6310.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 4958 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_import_exported_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_reducers_power_two
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_file_with_header_footer_negative
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_mapreduce_stack_trace_hadoop20
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1035/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1035/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1035/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1035/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12625283&lt;/p&gt;</comment>
                            <comment id="13882978" author="xuefuz" created="Mon, 27 Jan 2014 17:19:14 +0000"  >&lt;p&gt;Test failures above seems strange. All of them passed when being manually started. file_with_header_footer_negative.q seems suffering the same problem as the previous patch was to address. Thus, the new patch, #1, includes fix for that too.&lt;/p&gt;</comment>
                            <comment id="13883140" author="hiveqa" created="Mon, 27 Jan 2014 19:13:28 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12625381/HIVE-6310.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12625381/HIVE-6310.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 4961 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_import_exported_table
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_reducers_power_two
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_mapreduce_stack_trace_hadoop20
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1045/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1045/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1045/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1045/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12625381&lt;/p&gt;</comment>
                            <comment id="13883491" author="xuefuz" created="Mon, 27 Jan 2014 23:03:26 +0000"  >&lt;p&gt;Patch #2 updated with fix for import_exported_table.q. Still having no clue why the other two tests are failing. Will have to exclude them if they keep failing.&lt;/p&gt;</comment>
                            <comment id="13883917" author="jdere" created="Tue, 28 Jan 2014 08:50:09 +0000"  >&lt;p&gt;For test file_with_header_footer_negative.q, it looks like the issue is that the .q file has bad paths in it. Try with these changes and you don&apos;t need to update the .q.out file:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;-dfs -copyFromLocal ../data/files/header_footer_table_1 hdfs:///tmp/test/header_footer_table_1;
+dfs -copyFromLocal ../../data/files/header_footer_table_1 hdfs:///tmp/test/header_footer_table_1;
 
-dfs -copyFromLocal ../data/files/header_footer_table_2 hdfs:///tmp/test/header_footer_table_2;
+dfs -copyFromLocal ../../data/files/header_footer_table_2 hdfs:///tmp/test/header_footer_table_2;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13884110" author="hiveqa" created="Tue, 28 Jan 2014 13:24:03 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12625469/HIVE-6310.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12625469/HIVE-6310.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 4961 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_auto_sortmerge_join_16
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_reducers_power_two
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1059/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1059/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1059/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1059/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12625469&lt;/p&gt;</comment>
                            <comment id="13884175" author="brocknoland" created="Tue, 28 Jan 2014 14:24:02 +0000"  >&lt;p&gt;I checked on the slave nodes and there is plenty of space.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[hiveptest@ip-10-74-94-52 ~]$ df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/xvde1             40G  4.7G   33G  13% /
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Below is the error messages for the two failed tests. Both times there is a runtime exception followed by some hadoop exceptions.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-1059/failed/TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q/source/itests/qtest/target/tmp/history/done/version-1/localhost_1390912810566_/2014/01/28/000000/job_20140128044010447_0005_1390912971033_hiveptest_--+Test+join+on+three+tables+on+d...c.value%2529%2528Stage&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-1059/failed/TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q/source/itests/qtest/target/tmp/history/done/version-1/localhost_1390912810566_/2014/01/28/000000/job_20140128044010447_0005_1390912971033_hiveptest_--+Test+join+on+three+tables+on+d...c.value%2529%2528Stage&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Task TASKID=&quot;task_20140128044010447_0005_r_000000&quot; TASK_TYPE=&quot;REDUCE&quot; START_TIME=&quot;1390912978019&quot; SPLITS=&quot;&quot; .
Task TASKID=&quot;task_20140128044010447_0005_r_000001&quot; TASK_TYPE=&quot;REDUCE&quot; START_TIME=&quot;1390912978081&quot; SPLITS=&quot;&quot; .
Task TASKID=&quot;task_20140128044010447_0005_r_000002&quot; TASK_TYPE=&quot;REDUCE&quot; START_TIME=&quot;1390912978117&quot; SPLITS=&quot;&quot; .
ReduceAttempt TASK_TYPE=&quot;REDUCE&quot; TASKID=&quot;task_20140128044010447_0005_r_000000&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044010447_0005_r_000000_0&quot; START_TIME=&quot;1390912978026&quot; TRACKER_NAME=&quot;tracker_host0\.foo\.com:localhost/127\.0\.0\.1:60535&quot; HTTP_PORT=&quot;53633&quot; LOCALITY=&quot;OFF_SWITCH&quot; AVATAAR=&quot;VIRGIN&quot; .
ReduceAttempt TASK_TYPE=&quot;REDUCE&quot; TASKID=&quot;task_20140128044010447_0005_r_000000&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044010447_0005_r_000000_0&quot; TASK_STATUS=&quot;FAILED&quot; FINISH_TIME=&quot;1390912983112&quot; HOSTNAME=&quot;host0\.foo\.com&quot; ERROR=&quot;java\.lang\.IllegalArgumentException: Null user
	at org\.apache\.hadoop\.security\.UserGroupInformation\.createRemoteUser(UserGroupInformation\.java:887)
	at org\.apache\.hadoop\.mapred\.Child\.main(Child\.java:241)
&quot; .
MapAttempt TASK_TYPE=&quot;MAP&quot; TASKID=&quot;task_20140128044010447_0005_m_000000&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044010447_0005_m_000000_0&quot; START_TIME=&quot;1390912974953&quot; TRACKER_NAME=&quot;tracker_host0\.foo\.com:localhost/127\.0\.0\.1:60535&quot; HTTP_PORT=&quot;53633&quot; LOCALITY=&quot;RACK_LOCAL&quot; AVATAAR=&quot;VIRGIN&quot; .
MapAttempt TASK_TYPE=&quot;MAP&quot; TASKID=&quot;task_20140128044010447_0005_m_000000&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044010447_0005_m_000000_0&quot; TASK_STATUS=&quot;FAILED&quot; FINISH_TIME=&quot;1390912977965&quot; HOSTNAME=&quot;host0\.foo\.com&quot; ERROR=&quot;Map output lost, rescheduling: getMapOutput(attempt_20140128044010447_0005_m_000000_0,2) failed :
org\.apache\.hadoop\.util\.DiskChecker$DiskErrorException: Could not find taskTracker/hiveptest/jobcache/job_20140128044010447_0005/attempt_20140128044010447_0005_m_000000_0/output/file\.out\.index in any of the configured local directories
	at org\.apache\.hadoop\.fs\.LocalDirAllocator$AllocatorPerContext\.getLocalPathToRead(LocalDirAllocator\.java:429)
	at org\.apache\.hadoop\.fs\.LocalDirAllocator\.getLocalPathToRead(LocalDirAllocator\.java:160)
	at org\.apache\.hadoop\.mapred\.TaskTracker$MapOutputServlet\.doGet(TaskTracker\.java:4053)
	at javax\.servlet\.http\.HttpServlet\.service(HttpServlet\.java:707)
	at javax\.servlet\.http\.HttpServlet\.service(HttpServlet\.java:820)
	at org\.mortbay\.jetty\.servlet\.ServletHolder\.handle(ServletHolder\.java:511)
	at org\.mortbay\.jetty\.servlet\.ServletHandler$CachedChain\.doFilter(ServletHandler\.java:1221)
	at org\.apache\.hadoop\.http\.HttpServer$QuotingInputFilter\.doFilter(HttpServer\.java:914)
	at org\.mortbay\.jetty\.servlet\.ServletHandler$CachedChain\.doFilter(ServletHandler\.java:1212)
	at org\.mortbay\.jetty\.servlet\.ServletHandler\.handle(ServletHandler\.java:399)
	at org\.mortbay\.jetty\.security\.SecurityHandler\.handle(SecurityHandler\.java:216)
	at org\.mortbay\.jetty\.servlet\.SessionHandler\.handle(SessionHandler\.java:182)
	at org\.mortbay\.jetty\.handler\.ContextHandler\.handle(ContextHandler\.java:766)
	at org\.mortbay\.jetty\.webapp\.WebAppContext\.handle(WebAppContext\.java:450)
	at org\.mortbay\.jetty\.handler\.ContextHandlerCollection\.handle(ContextHandlerCollection\.java:230)
	at org\.mortbay\.jetty\.handler\.HandlerWrapper\.handle(HandlerWrapper\.java:152)
	at org\.mortbay\.jetty\.Server\.handle(Server\.java:322)
	at org\.mortbay\.jetty\.HttpConnection\.handleRequest(HttpConnection\.java:542)
	at org\.mortbay\.jetty\.HttpConnection$RequestHandler\.headerComplete(HttpConnection\.java:928)
	at org\.mortbay\.jetty\.HttpParser\.parseNext(HttpParser\.java:549)
	at org\.mortbay\.jetty\.HttpParser\.parseAvailable(HttpParser\.java:212)
	at org\.mortbay\.jetty\.HttpConnection\.handle(HttpConnection\.java:404)
	at org\.mortbay\.io\.nio\.SelectChannelEndPoint\.run(SelectChannelEndPoint\.java:410)
	at org\.mortbay\.thread\.QueuedThreadPool$PoolThread\.run(QueuedThreadPool\.java:582)
&quot; .
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-1059/failed/TestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more/source/itests/qtest/target/tmp/history/done/version-1/localhost_1390912806507_/2014/01/28/000000/job_20140128044006356_0003_1390912970454_hiveptest_select+%250Aa.key+%252C+%250Aa.value+%252C+%250Ab.value...b.key%2529%2528Stage&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-1059/failed/TestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more/source/itests/qtest/target/tmp/history/done/version-1/localhost_1390912806507_/2014/01/28/000000/job_20140128044006356_0003_1390912970454_hiveptest_select+%250Aa.key+%252C+%250Aa.value+%252C+%250Ab.value...b.key%2529%2528Stage&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;MapAttempt TASK_TYPE=&quot;MAP&quot; TASKID=&quot;task_20140128044006356_0003_m_000003&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044006356_0003_m_000003_0&quot; START_TIME=&quot;1390912978252&quot; TRACKER_NAME=&quot;tracker_host2\.foo\.com:localhost/127\.0\.0\.1:58706&quot; HTTP_PORT=&quot;37104&quot; LOCALITY=&quot;RACK_LOCAL&quot; AVATAAR=&quot;VIRGIN&quot; .
MapAttempt TASK_TYPE=&quot;MAP&quot; TASKID=&quot;task_20140128044006356_0003_m_000003&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044006356_0003_m_000003_0&quot; TASK_STATUS=&quot;FAILED&quot; FINISH_TIME=&quot;1390912987227&quot; HOSTNAME=&quot;host2\.foo\.com&quot; ERROR=&quot;java\.lang\.NullPointerException
	at org\.apache\.hadoop\.hive\.ql\.io\.HiveInputFormat\.init(HiveInputFormat\.java:257)
	at org\.apache\.hadoop\.hive\.ql\.io\.HiveInputFormat\.pushProjectionsAndFilters(HiveInputFormat\.java:439)
	at org\.apache\.hadoop\.hive\.ql\.io\.HiveInputFormat\.pushProjectionsAndFilters(HiveInputFormat\.java:432)
	at org\.apache\.hadoop\.hive\.ql\.io\.BucketizedHiveInputFormat\.getRecordReader(BucketizedHiveInputFormat\.java:71)
	at org\.apache\.hadoop\.mapred\.MapTask$TrackedRecordReader\.&amp;lt;init&amp;gt;(MapTask\.java:191)
	at org\.apache\.hadoop\.mapred\.MapTask\.runOldMapper(MapTask\.java:412)
	at org\.apache\.hadoop\.mapred\.MapTask\.run(MapTask\.java:366)
	at org\.apache\.hadoop\.mapred\.Child$4\.run(Child\.java:255)
	at java\.security\.AccessController\.doPrivileged(Native Method)
	at javax\.security\.auth\.Subject\.doAs(Subject\.java:396)
	at org\.apache\.hadoop\.security\.UserGroupInformation\.doAs(UserGroupInformation\.java:1190)
	at org\.apache\.hadoop\.mapred\.Child\.main(Child\.java:249)
&quot; .
MapAttempt TASK_TYPE=&quot;MAP&quot; TASKID=&quot;task_20140128044006356_0003_m_000006&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044006356_0003_m_000006_0&quot; START_TIME=&quot;1390912978652&quot; TRACKER_NAME=&quot;tracker_host1\.foo\.com:localhost/127\.0\.0\.1:59914&quot; HTTP_PORT=&quot;45568&quot; LOCALITY=&quot;RACK_LOCAL&quot; AVATAAR=&quot;VIRGIN&quot; .
MapAttempt TASK_TYPE=&quot;MAP&quot; TASKID=&quot;task_20140128044006356_0003_m_000006&quot; TASK_ATTEMPT_ID=&quot;attempt_20140128044006356_0003_m_000006_0&quot; TASK_STATUS=&quot;FAILED&quot; FINISH_TIME=&quot;1390912987977&quot; HOSTNAME=&quot;host1\.foo\.com&quot; ERROR=&quot;org\.apache\.hadoop\.util\.DiskChecker$DiskErrorException: Could not find any valid local directory for output/spill0\.out
	at org\.apache\.hadoop\.fs\.LocalDirAllocator$AllocatorPerContext\.getLocalPathForWrite(LocalDirAllocator\.java:381)
	at org\.apache\.hadoop\.fs\.LocalDirAllocator\.getLocalPathForWrite(LocalDirAllocator\.java:146)
	at org\.apache\.hadoop\.fs\.LocalDirAllocator\.getLocalPathForWrite(LocalDirAllocator\.java:127)
	at org\.apache\.hadoop\.mapred\.MapOutputFile\.getSpillFileForWrite(MapOutputFile\.java:121)
	at org\.apache\.hadoop\.mapred\.MapTask$MapOutputBuffer\.sortAndSpill(MapTask\.java:1397)
	at org\.apache\.hadoop\.mapred\.MapTask$MapOutputBuffer\.flush(MapTask\.java:1303)
	at org\.apache\.hadoop\.mapred\.MapTask\.runOldMapper(MapTask\.java:431)
	at org\.apache\.hadoop\.mapred\.MapTask\.run(MapTask\.java:366)
	at org\.apache\.hadoop\.mapred\.Child$4\.run(Child\.java:255)
	at java\.security\.AccessController\.doPrivileged(Native Method)
	at javax\.security\.auth\.Subject\.doAs(Subject\.java:396)
	at org\.apache\.hadoop\.security\.UserGroupInformation\.doAs(UserGroupInformation\.java:1190)
	at org\.apache\.hadoop\.mapred\.Child\.main(Child\.java:249)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13884183" author="xuefuz" created="Tue, 28 Jan 2014 14:28:30 +0000"  >&lt;p&gt;Having made some progress after all. Two failure remains. &lt;/p&gt;

&lt;p&gt;infer_bucket_sort_reducers_power_two:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Begin query: infer_bucket_sort_reducers_power_two.q
Error during job, obtaining debugging information...
Job Tracking URL: http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:37148/jobdetails.jsp?jobid=job_20140128044010447_0005
&lt;/span&gt;Examining task ID: task_20140128044010447_0005_m_000002 (and more) from job job_20140128044010447_0005
Examining task ID: task_20140128044010447_0005_m_000001 (and more) from job job_20140128044010447_0005

Task with the most failures(5): 
-----
Task ID:
  task_20140128044010447_0005_m_000000

URL:
  http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:50030/taskdetails.jsp?jobid=job_20140128044010447_0005&amp;amp;tipid=task_20140128044010447_0005_m_000000
&lt;/span&gt;-----
Diagnostic Messages &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; Task:
java.lang.Throwable: Child Error
	at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 1.
	at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)

java.lang.Throwable: Child Error
	at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 1.
	at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)


Exception: Client Execution failed with error code = 2 running 

-- Test join on three tables on different keys, should be bucketed and sorted by latter key
INSERT OVERWRITE TABLE test_table PARTITION (part = &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;) 
SELECT a.key, c.value FROM src a JOIN src b ON (a.key = b.key) JOIN src c ON (b.value = c.value)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;auto_sortmerge_join_16.q:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.Throwable: Child Error
	at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:271)
Caused by: java.io.IOException: Task process exit with nonzero status of 1.
	at org.apache.hadoop.mapred.TaskRunner.run(TaskRunner.java:258)


Exception: Client Execution failed with error code = 2 running  

select 
a.key , 
a.value , 
b.value , 
&lt;span class=&quot;code-quote&quot;&gt;&apos;day1&apos;&lt;/span&gt; as day, 
1 as pri 
from 
( 
select 
key, 
value 
from bucket_big where day=&lt;span class=&quot;code-quote&quot;&gt;&apos;day1&apos;&lt;/span&gt;
) a 
left &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; join 
( 
select 
key, 
value
from bucket_small 
where pri between 1 and 2
) b 
on 
(a.key = b.key) 

See ./ql/target/tmp/log/hive.log or ./itests/qtest/target/tmp/log/hive.log, or check ./ql/target/surefire-reports or ./itests/qtest/target/surefire-reports/ &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; specific test cases logs.
junit.framework.AssertionFailedError: Client Execution failed with error code = 2 running  

select 
a.key , 
a.value , 
b.value , 
&lt;span class=&quot;code-quote&quot;&gt;&apos;day1&apos;&lt;/span&gt; as day, 
1 as pri 
from 
( 
select 
key, 
value 
from bucket_big where day=&lt;span class=&quot;code-quote&quot;&gt;&apos;day1&apos;&lt;/span&gt;
) a 
left &lt;span class=&quot;code-keyword&quot;&gt;outer&lt;/span&gt; join 
( 
select 
key, 
value
from bucket_small 
where pri between 1 and 2
) b 
on 
(a.key = b.key) 

See ./ql/target/tmp/log/hive.log or ./itests/qtest/target/tmp/log/hive.log, or check ./ql/target/surefire-reports or ./itests/qtest/target/surefire-reports/ &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; specific test cases logs.
	at junit.framework.Assert.fail(Assert.java:50)
	at org.apache.hadoop.hive.ql.QTestUtil.failed(QTestUtil.java:1716)
	at org.apache.hadoop.hive.cli.TestMinimrCliDriver.runTest(TestMinimrCliDriver.java:156)
	at org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_auto_sortmerge_join_16(TestMinimrCliDriver.java:126)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since I&apos;m able to find the task log, I have no idea what caused the task failure. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; suggested memory error though. It will be great if any one knows where to pick up the task log. I plan to check in the patch and exclude the two test cases from ptest to avoid further noises.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt; Could you take another look of the patch?&lt;/p&gt;</comment>
                            <comment id="13884185" author="brocknoland" created="Tue, 28 Jan 2014 14:30:55 +0000"  >&lt;p&gt;+1 on the latest patch.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;suggested memory error though&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I don&apos;t see any disk space or memory issues on the hosts.&lt;/p&gt;</comment>
                            <comment id="13884186" author="xuefuz" created="Tue, 28 Jan 2014 14:31:26 +0000"  >&lt;p&gt;BTW, the two failed tests had no problem passing if started manually, which makes the problem more interesting.&lt;/p&gt;</comment>
                            <comment id="13884194" author="xuefuz" created="Tue, 28 Jan 2014 14:39:25 +0000"  >&lt;p&gt;Thanks, Brock. I&apos;m going to commit the patch right way.&lt;/p&gt;

&lt;p&gt;Could the errors &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt; saw be due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6309&quot; title=&quot;Hive incorrectly removes TaskAttempt output files if MRAppMaster fails once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6309&quot;&gt;&lt;del&gt;HIVE-6309&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;
</comment>
                            <comment id="13884196" author="brocknoland" created="Tue, 28 Jan 2014 14:41:55 +0000"  >&lt;p&gt;The tests run as hadoop-1 while I think that is hadoop-2?&lt;/p&gt;</comment>
                            <comment id="13884202" author="xuefuz" created="Tue, 28 Jan 2014 14:46:38 +0000"  >&lt;p&gt;Okay. Never mind then.&lt;/p&gt;</comment>
                            <comment id="13884223" author="xuefuz" created="Tue, 28 Jan 2014 15:01:44 +0000"  >&lt;p&gt;Patch committed to trunk. The remaining two failures were excluded in ptest property file.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12625381" name="HIVE-6310.1.patch" size="5916" author="xuefuz" created="Mon, 27 Jan 2014 17:19:53 +0000"/>
                            <attachment id="12625469" name="HIVE-6310.2.patch" size="6239" author="xuefuz" created="Mon, 27 Jan 2014 23:03:26 +0000"/>
                            <attachment id="12625283" name="HIVE-6310.patch" size="3135" author="xuefuz" created="Sun, 26 Jan 2014 19:18:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370031</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rrxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370333</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>