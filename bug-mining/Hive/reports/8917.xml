<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:27:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-29218] LOAD OVERWRITE PARTITION on muti-level partititoned external Iceberg table may unexpectedly delete other partitions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-29218</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When using &lt;tt&gt;appendFile&lt;/tt&gt; as the implementation of &lt;tt&gt;LOAD&lt;/tt&gt;, there is an issue with handling &lt;tt&gt;LOAD OVERWRITE&lt;/tt&gt; on multi-level partitioned Iceberg tables. The overwrite logic may incorrectly delete partitions that should not be affected.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Steps to Reproduce&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;1. Create an Iceberg table partitioned by two columns, &lt;tt&gt;pcol1&lt;/tt&gt; and &lt;tt&gt;pcol2&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create external table ice_parquet_multi_partitioned (
    strcol string,
    intcol integer
) partitioned by (pcol1 string, pcol2 string)
stored by iceberg; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2. Insert data into partition &lt;tt&gt;pcol1=x/pcol2=y&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&apos;/path/to/pcol1=x_pcol2=y.parquet&apos;&lt;/span&gt; INTO TABLE ice_parquet_multi_partitioned PARTITION (pcol1=&lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt;, pcol2=&lt;span class=&quot;code-quote&quot;&gt;&apos;y&apos;&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;3. Run a &lt;tt&gt;LOAD OVERWRITE&lt;/tt&gt; into another partition, e.g., &lt;tt&gt;pcol1=x/pcol2=z&lt;/tt&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
LOAD DATA LOCAL INPATH &lt;span class=&quot;code-quote&quot;&gt;&apos;/path/to/pcol1=x_pcol2=z.parquet&apos;&lt;/span&gt; OVERWRITE INTO TABLE
ice_parquet_multi_partitioned PARTITION (pcol1=&lt;span class=&quot;code-quote&quot;&gt;&apos;x&apos;&lt;/span&gt;, pcol2=&lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Expected Behavior&lt;/b&gt;&lt;br/&gt;
Only the target partition (&lt;tt&gt;pcol1=x/pcol2=z&lt;/tt&gt;) should be overwritten. Existing partitions (&lt;tt&gt;pcol1=x/pcol2=y&lt;/tt&gt;) should remain intact.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Actual Behavior&lt;/b&gt;&lt;br/&gt;
The existing partition &lt;tt&gt;pcol1=x/pcol2=y&lt;/tt&gt; is unexpectedly deleted when overwriting another partition with the same &lt;tt&gt;pcol1&lt;/tt&gt; value but different &lt;tt&gt;pcol2&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13629488">HIVE-29218</key>
            <summary>LOAD OVERWRITE PARTITION on muti-level partititoned external Iceberg table may unexpectedly delete other partitions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bravoqq">Jared Jia</assignee>
                                    <reporter username="bravoqq">Jared Jia</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 20 Sep 2025 15:06:49 +0000</created>
                <updated>Fri, 26 Sep 2025 08:13:22 +0000</updated>
                            <resolved>Fri, 26 Sep 2025 08:13:22 +0000</resolved>
                                    <version>4.0.0-beta-1</version>
                                    <fixVersion>4.2.0</fixVersion>
                                    <component>HiveServer2</component>
                    <component>Iceberg integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18023028" author="dkuzmenko" created="Fri, 26 Sep 2025 08:12:51 +0000"  >&lt;p&gt;Merged to master&lt;br/&gt;
Thanks for the fix and refactor, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bravoqq&quot; class=&quot;user-hover&quot; rel=&quot;bravoqq&quot;&gt;bravoqq&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushsaxena&quot; class=&quot;user-hover&quot; rel=&quot;ayushsaxena&quot;&gt;ayushsaxena&lt;/a&gt; for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13078469" name="pcol1=x_pcol2=y.parquet" size="1153" author="bravoqq" created="Sat, 20 Sep 2025 15:03:17 +0000"/>
                            <attachment id="13078470" name="pcol1=x_pcol2=z.parquet" size="1153" author="bravoqq" created="Sat, 20 Sep 2025 15:03:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xsig:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>