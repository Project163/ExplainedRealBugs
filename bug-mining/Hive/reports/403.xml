<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:56:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-1388] combinehiveinputformat does not work if files are of different types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1388</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;rop table t1;&lt;br/&gt;
drop table t2;&lt;/p&gt;


&lt;p&gt;create table t1 (key string, value string) partitioned by (ds string, hr string);&lt;br/&gt;
create table t2 (key string, value string) partitioned by (ds string);&lt;/p&gt;

&lt;p&gt;insert overwrite table t1 partition (ds=&apos;1&apos;, hr=&apos;1&apos;) select key, value from src cluster by key;&lt;br/&gt;
insert overwrite table t1 partition (ds=&apos;1&apos;, hr=&apos;2&apos;) select key, value from src cluster by key;&lt;br/&gt;
insert overwrite table t1 partition (ds=&apos;1&apos;, hr=&apos;2&apos;) select key, value from t1 where ds = &apos;1&apos; and hr = &apos;2&apos;;&lt;/p&gt;

&lt;p&gt;desc extended t1;&lt;br/&gt;
desc extended t1 partition (ds=&apos;1&apos;, hr=&apos;1&apos;);&lt;br/&gt;
desc extended t1 partition (ds=&apos;1&apos;, hr=&apos;2&apos;);&lt;/p&gt;

&lt;p&gt;alter table t2 add partition (ds=&apos;1&apos;) location &apos;/data/users/njain/hive3/hive3/build/ql/test/data/warehouse/t1/ds=1&apos;;&lt;br/&gt;
select count(1) from t2 where ds=&apos;1&apos;;&lt;/p&gt;

&lt;p&gt;set hive.input.format = org.apache.hadoop.hive.ql.io.CombineHiveInputFormat;&lt;/p&gt;

&lt;p&gt;select count(1) from t2 where ds=&apos;1&apos;;&lt;/p&gt;

&lt;p&gt;drop table t1;&lt;br/&gt;
drop table t2;&lt;/p&gt;



&lt;p&gt;Consider the above testcase, some files are generated by mappers, whereas some others are generated by reducers. &lt;br/&gt;
It is therefore possible that some files contain Text in their key, whereas others contain BytesWritable.&lt;br/&gt;
Due to that, combinehiveInputFormat record reader may get an error.&lt;/p&gt;

&lt;p&gt;Note that, this works in hiveinputformat because different files are not combined in the same mapper - it even works if&lt;br/&gt;
we query &apos;t1&apos; because different partitions are not combined in the same mapper&lt;/p&gt;</description>
                <environment></environment>
        <key id="12466138">HIVE-1388</key>
            <summary>combinehiveinputformat does not work if files are of different types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Jun 2010 22:56:30 +0000</created>
                <updated>Sat, 17 Dec 2011 00:04:03 +0000</updated>
                            <resolved>Fri, 4 Jun 2010 03:56:11 +0000</resolved>
                                                    <fixVersion>0.6.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12875343" author="namit" created="Thu, 3 Jun 2010 23:01:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1359&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1359&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Will add a test for this after the above jira is fixed, because this can only be reproduced with CombineHiveInputFormat, where all &lt;br/&gt;
hadoop 17 tests will break.&lt;/p&gt;</comment>
                            <comment id="12875344" author="namit" created="Thu, 3 Jun 2010 23:02:01 +0000"  >&lt;p&gt;Have verified the fix in a production hadoop 20 cluster&lt;/p&gt;</comment>
                            <comment id="12875363" author="nzhang" created="Thu, 3 Jun 2010 23:38:24 +0000"  >&lt;p&gt;Is it possible the value object of different files are also different? If not shouldn&apos;t the value parameter in initNextRecordReader() be removed?&lt;/p&gt;</comment>
                            <comment id="12875379" author="namit" created="Fri, 4 Jun 2010 00:12:49 +0000"  >&lt;p&gt;I dont know if the value can be different.&lt;br/&gt;
But, to be sure, I will change the Value also&lt;/p&gt;</comment>
                            <comment id="12875381" author="namit" created="Fri, 4 Jun 2010 00:16:17 +0000"  >&lt;p&gt;I meant, I will remove the value from initNextRecordReader()&lt;/p&gt;</comment>
                            <comment id="12875388" author="nzhang" created="Fri, 4 Jun 2010 00:27:38 +0000"  >&lt;p&gt;+1. will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="12875456" author="nzhang" created="Fri, 4 Jun 2010 03:56:11 +0000"  >&lt;p&gt;committed. Thanks Namit!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12446297" name="hive.1388.1.patch" size="3394" author="namit" created="Thu, 3 Jun 2010 23:03:32 +0000"/>
                            <attachment id="12446308" name="hive.1388.2.patch" size="3372" author="namit" created="Fri, 4 Jun 2010 00:20:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72929</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0leuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123057</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>