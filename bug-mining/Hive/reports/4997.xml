<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:48:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-14984] Hive-WebUI access results in Request is a replay (34) attack</title>
                <link>https://issues.apache.org/jira/browse/HIVE-14984</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When trying to access kerberized webui of HS2, The following error is received&lt;br/&gt;
GSSException: Failure unspecified at GSS-API level (Mechanism level: Request is a replay (34))&lt;/p&gt;

&lt;p&gt;While this is not happening for RM webui (checked if kerberos webui is enabled)&lt;/p&gt;

&lt;p&gt;To reproduce the issue &lt;/p&gt;

&lt;p&gt;Try running&lt;br/&gt;
curl --negotiate -u : -b ~/cookiejar.txt -c ~/cookiejar.txt http://&amp;lt;hostname&amp;gt;:10002/&lt;br/&gt;
from any cluster nodes&lt;br/&gt;
or &lt;br/&gt;
Try accessing the URL from a VM with windows machine and firefox browser to replicate the issue&lt;/p&gt;

&lt;p&gt;The following workaround helped, but need a permanent solution for the bug&lt;/p&gt;

&lt;p&gt;Workaround:&lt;br/&gt;
=========&lt;br/&gt;
First access the index.html directly and then actual URL of webui&lt;/p&gt;

&lt;p&gt;curl --negotiate -u : -b ~/cookiejar.txt -c ~/cookiejar.txt http://&amp;lt;hostname&amp;gt;:10002/index.html&lt;/p&gt;

&lt;p&gt;curl --negotiate -u : -b ~/cookiejar.txt -c ~/cookiejar.txt http://&amp;lt;hostname&amp;gt;:10002&lt;/p&gt;

&lt;p&gt;In browser:&lt;/p&gt;

&lt;p&gt;First access&lt;br/&gt;
http://&amp;lt;hostname&amp;gt;:10002/index.html&lt;br/&gt;
then&lt;br/&gt;
http://&amp;lt;hostname&amp;gt;:10002&lt;/p&gt;</description>
                <environment></environment>
        <key id="13012787">HIVE-14984</key>
            <summary>Hive-WebUI access results in Request is a replay (34) attack</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zsombor.klara">Barna Zsombor Klara</assignee>
                                    <reporter username="Venkat Sambath">Venkat Sambath</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2016 08:48:48 +0000</created>
                <updated>Wed, 26 Jul 2017 00:03:07 +0000</updated>
                            <resolved>Tue, 8 Nov 2016 13:34:03 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="15582413" author="aihuaxu" created="Mon, 17 Oct 2016 14:28:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt; Do you have any idea? &lt;/p&gt;</comment>
                            <comment id="15589096" author="zsombor.klara" created="Wed, 19 Oct 2016 15:49:25 +0000"  >&lt;p&gt;The replay attack is caused because we are trying to authenticate twice within a short amount of time.&lt;br/&gt;
It only happens when we request the context root, and authenticate ourselves in the AuthenticationFilter, then the request is forwarded to the welcome page (index.html in this case), but then the request goes through the same AuthenticationFilter and it is authenticated again.&lt;/p&gt;

&lt;p&gt;As described in &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-8830&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HADOOP-8830&lt;/a&gt; a second call to the AuthenticationFilter will cause a replay attack as the authentication cookie is only set on the response.&lt;/p&gt;

&lt;p&gt;I would suggest to do an URL rewriting instead of a forwarding to prevent the second call chain causing the second authentication request.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;As a side effect we would be serving the same page to requests for both the context root and hiveserver2.jsp.&lt;/b&gt; &lt;/p&gt;</comment>
                            <comment id="15592110" author="zsombor.klara" created="Thu, 20 Oct 2016 15:19:53 +0000"  >&lt;p&gt;Attaching patch file.&lt;/p&gt;</comment>
                            <comment id="15592115" author="aihuaxu" created="Thu, 20 Oct 2016 15:21:59 +0000"  >&lt;p&gt;+1.&lt;/p&gt;</comment>
                            <comment id="15592474" author="szehon" created="Thu, 20 Oct 2016 17:44:43 +0000"  >&lt;p&gt;Thanks a lot Barna.  FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;jxiang&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15592987" author="jxiang" created="Thu, 20 Oct 2016 20:57:19 +0000"  >&lt;p&gt;Good. Thanks.&lt;/p&gt;</comment>
                            <comment id="15595194" author="zsombor.klara" created="Fri, 21 Oct 2016 14:07:56 +0000"  >&lt;p&gt;Reuploading as it seems the precommit tests didn&apos;t run.&lt;/p&gt;</comment>
                            <comment id="15605117" author="hiveqa" created="Tue, 25 Oct 2016 12:04:48 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12835098/HIVE-14984.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12835098/HIVE-14984.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10603 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJarWithoutAddDriverClazz[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[0] (batchId=164)
org.apache.hive.beeline.TestBeelineArgParsing.testAddLocalJar[1] (batchId=164)
org.apache.hive.spark.client.TestSparkClient.testJobSubmission (batchId=271)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1785/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1785/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1785/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1785/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-1785/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-1785/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12835098 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15605243" author="zsombor.klara" created="Tue, 25 Oct 2016 12:53:52 +0000"  >&lt;p&gt;Failures are unrelated and Jiras are open to have them fixed:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14910&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-14910&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14964&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-14964&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15647578" author="aihuaxu" created="Tue, 8 Nov 2016 13:34:03 +0000"  >&lt;p&gt;Pushed to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zsombor.klara&quot; class=&quot;user-hover&quot; rel=&quot;zsombor.klara&quot;&gt;zsombor.klara&lt;/a&gt; for your work. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13020472">HIVE-15196</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12835098" name="HIVE-14984.patch" size="4553" author="zsombor.klara" created="Tue, 25 Oct 2016 10:01:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34yvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12335837">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>