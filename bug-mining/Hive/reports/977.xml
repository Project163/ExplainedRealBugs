<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:03:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3536] Output of sort merge join is no longer bucketed</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3536</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I don&apos;t know if this was a feature or a happy coincidence, but before &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3230&quot; title=&quot;Make logging of plan progress in HadoopJobExecHelper configurable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3230&quot;&gt;&lt;del&gt;HIVE-3230&lt;/del&gt;&lt;/a&gt;, the output of a sort merge join on two partitions would be bucketed, even if hive.enforce.bucketing was set to false.  This could potentially save a reduce phase when inserting into a bucketed table.&lt;/p&gt;

&lt;p&gt;This would be good to have back.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12610441">HIVE-3536</key>
            <summary>Output of sort merge join is no longer bucketed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kevinwilfong">Kevin Wilfong</assignee>
                                    <reporter username="kevinwilfong">Kevin Wilfong</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Oct 2012 01:58:48 +0000</created>
                <updated>Thu, 10 Jan 2013 19:54:15 +0000</updated>
                            <resolved>Sat, 6 Oct 2012 05:28:00 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13469976" author="kevinwilfong" created="Fri, 5 Oct 2012 02:40:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.facebook.net/D5907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5907&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13470007" author="phabricator@reviews.facebook.net" created="Fri, 5 Oct 2012 04:05:47 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Output of sort merge join is no longer bucketed&quot;.&lt;/p&gt;

&lt;p&gt;  This was certainty a desired feature.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, kevinwilfong&lt;/p&gt;</comment>
                            <comment id="13470008" author="namit" created="Fri, 5 Oct 2012 04:07:38 +0000"  >&lt;p&gt;small comment on phabricator&lt;/p&gt;</comment>
                            <comment id="13470009" author="phabricator@reviews.facebook.net" created="Fri, 5 Oct 2012 04:07:47 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Output of sort merge join is no longer bucketed&quot;.&lt;/p&gt;

&lt;p&gt;  Otherwise, it looks good&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/smb_mapjoin_11.q:32 Unfortunately, this does not verify that the data is bucketed.&lt;br/&gt;
  Can you perform a join between test_table3 and test_table1 for bucket 2 for both of them.&lt;br/&gt;
  That would return 0 rows if the data was not bucketed correctly.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, kevinwilfong&lt;/p&gt;</comment>
                            <comment id="13470011" author="namit" created="Fri, 5 Oct 2012 04:18:53 +0000"  >&lt;p&gt;I will start running the tests.&lt;br/&gt;
Once you update the new test, I can just run the new test (assuming all tests run fine).&lt;/p&gt;</comment>
                            <comment id="13470018" author="kevinwilfong" created="Fri, 5 Oct 2012 04:41:04 +0000"  >&lt;p&gt;Updated the new test.&lt;/p&gt;</comment>
                            <comment id="13470020" author="phabricator@reviews.facebook.net" created="Fri, 5 Oct 2012 04:42:47 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Output of sort merge join is no longer bucketed&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Updated test case.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/smb_mapjoin_11.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/smb_mapjoin_11.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, kevinwilfong&lt;/p&gt;</comment>
                            <comment id="13470031" author="namit" created="Fri, 5 Oct 2012 05:28:41 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13470032" author="phabricator@reviews.facebook.net" created="Fri, 5 Oct 2012 05:30:47 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Output of sort merge join is no longer bucketed&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, kevinwilfong&lt;/p&gt;</comment>
                            <comment id="13470495" author="kevinwilfong" created="Fri, 5 Oct 2012 17:39:30 +0000"  >&lt;p&gt;Fixed a bug causing non-prefixed files to be generated prefixed with null.&lt;/p&gt;</comment>
                            <comment id="13470496" author="phabricator@reviews.facebook.net" created="Fri, 5 Oct 2012 17:40:02 +0000"  >&lt;p&gt;kevinwilfong updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Output of sort merge join is no longer bucketed&quot;.&lt;br/&gt;
Reviewers: JIRA, njain&lt;/p&gt;

&lt;p&gt;  Fixed a bug causing non-prefixed files to be generated prefixed with null.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D5907&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5907&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/test/results/clientpositive/smb_mapjoin_11.q.out&lt;br/&gt;
  ql/src/test/queries/clientpositive/smb_mapjoin_11.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, kevinwilfong&lt;/p&gt;</comment>
                            <comment id="13470922" author="namit" created="Sat, 6 Oct 2012 05:28:00 +0000"  >&lt;p&gt;Committed. Thanks Kevin&lt;/p&gt;</comment>
                            <comment id="13471020" author="hudson" created="Sat, 6 Oct 2012 14:09:05 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1725 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1725/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1725/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; Output of sort merge join is no longer bucketed&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1394928)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1394928&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1394928&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/smb_mapjoin_11.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin_11.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13472177" author="hudson" created="Tue, 9 Oct 2012 06:31:57 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1730 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1730/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1730/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; Output of sort merge join is no longer bucketed&lt;br/&gt;
(Kevin Wilfong) &lt;/p&gt;

&lt;p&gt;For some reason, I missed merging the test in my previous merge (Revision 1395742)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1395742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1395742&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/smb_mapjoin_11.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin_11.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548060" author="hudson" created="Wed, 9 Jan 2013 10:24:14 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; Output of sort merge join is no longer bucketed&lt;br/&gt;
(Kevin Wilfong) &lt;/p&gt;

&lt;p&gt;For some reason, I missed merging the test in my previous merge (Revision 1395742)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3536&quot; title=&quot;Output of sort merge join is no longer bucketed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3536&quot;&gt;&lt;del&gt;HIVE-3536&lt;/del&gt;&lt;/a&gt; Output of sort merge join is no longer bucketed&lt;br/&gt;
(Kevin Wilfong via namit) (Revision 1394928)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1395742&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1395742&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/smb_mapjoin_11.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin_11.q.out&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1394928&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1394928&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Utilities.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/smb_mapjoin_11.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/smb_mapjoin_11.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550324" author="ashutoshc" created="Thu, 10 Jan 2013 19:54:15 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12612320">HIVE-3593</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12547870" name="HIVE-3536.1.patch.txt" size="20964" author="kevinwilfong" created="Fri, 5 Oct 2012 02:39:47 +0000"/>
                            <attachment id="12547873" name="HIVE-3536.2.patch.txt" size="19890" author="kevinwilfong" created="Fri, 5 Oct 2012 04:41:19 +0000"/>
                            <attachment id="12548010" name="HIVE-3536.3.patch.txt" size="19918" author="kevinwilfong" created="Fri, 5 Oct 2012 17:39:08 +0000"/>
                            <attachment id="12547874" name="HIVE-3536.D5907.2.patch" size="19804" author="phabricator@reviews.facebook.net" created="Fri, 5 Oct 2012 04:42:47 +0000"/>
                            <attachment id="12548011" name="HIVE-3536.D5907.3.patch" size="19742" author="phabricator@reviews.facebook.net" created="Fri, 5 Oct 2012 17:40:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02i0n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>12520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>