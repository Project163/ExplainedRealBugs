<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:31:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10087] Beeline&apos;s --silent option should suppress query from being echoed when running with -f option</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10087</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The &lt;tt&gt;-e&lt;/tt&gt; and the &lt;tt&gt;-f&lt;/tt&gt; options behave differently. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; --showHeader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --silent=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -f select.sql
&lt;/span&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&amp;gt; select * from sample_07 limit 5;
&lt;/span&gt;--------------------------------------------------------------------------------------
00-0000 All Occupations 134354250 40690
11-0000 Management occupations 6003930 96150
11-1011 Chief executives 299160 151370
11-1021 General and operations managers 1655410 103780
11-1031 Legislators 61110 33880
--------------------------------------------------------------------------------------

beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; --showHeader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --silent=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -e &lt;span class=&quot;code-quote&quot;&gt;&quot;select * from sample_07 limit 5;&quot;&lt;/span&gt;
&lt;/span&gt;--------------------------------------------------------------------------------------
00-0000 	All Occupations 	134354250 	40690
11-0000 	Management occupations 	6003930 	96150
11-1011 	Chief executives 	299160 	151370
11-1021 	General and operations managers 	1655410 	103780
11-1031 	Legislators 	61110 	33880

--------------------------------------------------------------------------------------
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12785585">HIVE-10087</key>
            <summary>Beeline&apos;s --silent option should suppress query from being echoed when running with -f option</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ngangam">Naveen Gangam</assignee>
                                    <reporter username="ngangam">Naveen Gangam</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Mar 2015 16:32:48 +0000</created>
                <updated>Mon, 18 May 2015 19:50:25 +0000</updated>
                            <resolved>Fri, 27 Mar 2015 16:20:21 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Beeline</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14380248" author="ngangam" created="Wed, 25 Mar 2015 17:06:46 +0000"  >&lt;p&gt;The following is the output with the proposed fix with --silent=true and --silent=false (query is echoed back)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost.com:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; --showHeader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --silent=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; -f query.sql 
&lt;/span&gt;
+-------------------+--------------------+--+
| &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;              | t                  |
| &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;             | f                  |
| TRUE              | T                  |
| FALSE             | F                  |
| ZERO              | 0                  |
+-------------------+--------------------+--+

$ beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; --showHeader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --silent=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; -f query.sql 
&lt;/span&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost&amp;gt; select * from booleantest limit 5;
&lt;/span&gt;+-------------------+--------------------+--+
| &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;              | t                  |
| &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;             | f                  |
| TRUE              | T                  |
| FALSE             | F                  |
| ZERO              | 0                  |
+-------------------+--------------------+--+
5 rows selected (1.087 seconds)
0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost&amp;gt; 
&lt;/span&gt;Closing: 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14380336" author="xuefuz" created="Wed, 25 Mar 2015 17:45:54 +0000"  >&lt;p&gt;Patch looks good. One minor thing, I noticed there is a bland line in the console output for -f when --silent=true. Is there a way to get rid of that?&lt;/p&gt;</comment>
                            <comment id="14380419" author="ngangam" created="Wed, 25 Mar 2015 18:25:04 +0000"  >&lt;p&gt;Thanks Xuefu, I will take a look where this is from. I suspect this might be from jline printing an empty buffer that holds the prompt &amp;amp; the query string.&lt;/p&gt;</comment>
                            <comment id="14380690" author="ngangam" created="Wed, 25 Mar 2015 20:25:05 +0000"  >&lt;p&gt;This is coming from the jline code. As it reads from the script file character by character, it adds it to the StringBuffer and also echoes it to the terminal, if mask character is null. In this case, we have set the mask character to null character value to prevent this echo. When it encounters a EOL character in the file aka &quot;;&quot;, it completes the line and prints a newline character and returns the line to beeline to be executed. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;snip&amp;gt;
                            &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; ACCEPT_LINE:
                                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; accept();
&amp;lt;/snip&amp;gt;
&amp;lt;snip&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; accept() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        moveToEnd();
        println(); &lt;span class=&quot;code-comment&quot;&gt;// output newline
&lt;/span&gt;        flush();
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; finishBuffer();
    }
&amp;lt;/snip&amp;gt;
&amp;lt;snip&amp;gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; void println() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        print(CR);
    }
&amp;lt;/snip&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If this newline were to be turned off, the first line of the result set would be printed on the same line as the query. Something like this&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; --showHeader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --silent=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --outputformat=tsv2 -f query.sql 
&lt;/span&gt;scan complete in 2ms
Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000/&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;
&lt;/span&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost&amp;gt; select * from booleantest limit 5;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;   t
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;   f
TRUE    T
FALSE   F
ZERO    0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;jline code does not provide any APIs to allow me to dictate this. Something like this should fix this. I will file a jira against jline.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; void println() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mask == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
          print(CR);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For now, we may have to get by with what we have.&lt;/p&gt;</comment>
                            <comment id="14380721" author="ngangam" created="Wed, 25 Mar 2015 20:35:19 +0000"  >&lt;p&gt;I have filed a new jira against jline to have this fixed.&lt;br/&gt;
&lt;a href=&quot;https://github.com/jline/jline2/issues/181&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jline/jline2/issues/181&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14380933" author="hiveqa" created="Wed, 25 Mar 2015 22:36:05 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12707246/HIVE-10087.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12707246/HIVE-10087.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 8337 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby3_map_multi_distinct
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3154/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3154/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3154/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3154/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3154/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3154/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12707246 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14380945" author="xuefuz" created="Wed, 25 Mar 2015 22:44:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14384075" author="xuefuz" created="Fri, 27 Mar 2015 16:20:21 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Naveen.&lt;/p&gt;</comment>
                            <comment id="14384133" author="ngangam" created="Fri, 27 Mar 2015 16:47:55 +0000"  >&lt;p&gt;Thank you Xuefu.&lt;/p&gt;</comment>
                            <comment id="14548736" author="sushanth" created="Mon, 18 May 2015 19:50:25 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12707246" name="HIVE-10087.patch" size="1012" author="ngangam" created="Wed, 25 Mar 2015 17:06:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27cjb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>