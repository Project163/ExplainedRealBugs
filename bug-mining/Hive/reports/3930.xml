<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:38:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-12058] Change hive script to record errors when calling hbase fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-12058</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;By default hive will try to find out which jars need to be added to the classpath in order to run MR jobs against an HBase cluster, however if hbase can&apos;t be found or if hbase mapredcp fails, the hive script  will fail silently and ignore some of the jars to be included into the. That makes very difficult to analyze the real problem.&lt;br/&gt;
Hive script should record the error not just simply redirect two hbase failures:&lt;br/&gt;
HBASE_BIN=$&lt;/p&gt;
{HBASE_BIN:-&quot;$(which hbase 2&amp;gt;/dev/null)&quot;}
&lt;p&gt;$HBASE_BIN mapredcp 2&amp;gt;/dev/null&lt;/p&gt;</description>
                <environment></environment>
        <key id="12903126">HIVE-12058</key>
            <summary>Change hive script to record errors when calling hbase fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ychena">Yongzhi Chen</assignee>
                                    <reporter username="ychena">Yongzhi Chen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Oct 2015 20:44:19 +0000</created>
                <updated>Mon, 30 Jan 2017 23:43:00 +0000</updated>
                            <resolved>Tue, 13 Oct 2015 16:27:22 +0000</resolved>
                                    <version>0.14.0</version>
                    <version>1.1.0</version>
                    <version>2.0.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Hive</component>
                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14949497" author="ychena" created="Thu, 8 Oct 2015 22:16:55 +0000"  >&lt;p&gt;Do not redirect the error, let the error shown in console or record in stderr.log&lt;/p&gt;</comment>
                            <comment id="14949498" author="ychena" created="Thu, 8 Oct 2015 22:17:47 +0000"  >&lt;p&gt;Need code review or better idea to fix the issue. &lt;/p&gt;</comment>
                            <comment id="14951825" author="hiveqa" created="Sat, 10 Oct 2015 13:04:07 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12765695/HIVE-12058.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12765695/HIVE-12058.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 9659 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.jdbc.TestSSL.testSSLVersion
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5595/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5595/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5595/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5595/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5595/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5595/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12765695 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14953163" author="ychena" created="Mon, 12 Oct 2015 14:10:33 +0000"  >&lt;p&gt;The two failures are not related. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;jxiang&lt;/a&gt;, could you review the change? Thanks&lt;/p&gt;</comment>
                            <comment id="14953239" author="jxiang" created="Mon, 12 Oct 2015 15:55:55 +0000"  >&lt;p&gt;I think we should not remove &quot;2&amp;gt;/dev/null&quot;. Otherwise, the script will break sometimes when mapredcp outputs more than we need.&lt;/p&gt;

&lt;p&gt;In the failure scenario you have, does mparedcp outputs more or less than the normal output?&lt;/p&gt;</comment>
                            <comment id="14953534" author="ychena" created="Mon, 12 Oct 2015 18:33:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;jxiang&lt;/a&gt;, when the hbase mapredcp fails, without 2&amp;gt;/dev/null, the error will go to stderr.log or console in our system, it will not become input for the for loop, so remving &quot;2&amp;gt;/dev/null&quot; does no harm. Hive still can startup. I think the only thing 2&amp;gt;/dev/null does is hiding the failure. &lt;br/&gt;
With/Without the 2&amp;gt;/dev/null, when hbase mapredcp fails, there is no hbase related library added to the HADOOP_CLASSPATH. So there is&lt;br/&gt;
no functional change in Hive server by removing the redirection, and we get the error log to analyze the hbase failure for extra. &lt;/p&gt;</comment>
                            <comment id="14953562" author="jxiang" created="Mon, 12 Oct 2015 18:52:08 +0000"  >&lt;p&gt;With the change, when hbase mapredcp works, this script may not work any more. For exmaple, on my cluster hbase mapredcp returns the following&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-10-12 11:51:45,630 WARN  [main] util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
/data/tarball/hbase-0.98.11-hadoop2/lib/hbase-protocol-0.98.11-hadoop2.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/hbase-client-0.98.11-hadoop2.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/hbase-common-0.98.11-hadoop2.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/hbase-server-0.98.11-hadoop2.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/hbase-hadoop-compat-0.98.11-hadoop2.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/netty-3.6.6.Final.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/protobuf-java-2.5.0.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/zookeeper-3.4.6.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/high-scale-lib-1.1.1.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/guava-12.0.1.jar:/data/tarball/hbase-0.98.11-hadoop2/lib/htrace-core-2.04.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14953841" author="ychena" created="Mon, 12 Oct 2015 22:04:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;jxiang&lt;/a&gt;, have you try the changed script in your system? You can just type hive to start cli, I think the warning will not end up in your classpath. &lt;/p&gt;</comment>
                            <comment id="14954001" author="jxiang" created="Mon, 12 Oct 2015 23:35:10 +0000"  >&lt;p&gt;You are right. The warning doesn&apos;t mess up the classpath for me. +1&lt;/p&gt;</comment>
                            <comment id="14955229" author="jxiang" created="Tue, 13 Oct 2015 16:27:22 +0000"  >&lt;p&gt;Integrated into trunk and branch 1. Thanks Yongzhi for the patch.&lt;/p&gt;</comment>
                            <comment id="14956956" author="ychena" created="Wed, 14 Oct 2015 13:39:02 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jxiang&quot; class=&quot;user-hover&quot; rel=&quot;jxiang&quot;&gt;jxiang&lt;/a&gt; for reviewing the patch.&lt;/p&gt;</comment>
                            <comment id="15846158" author="raviprak" created="Mon, 30 Jan 2017 23:43:00 +0000"  >&lt;p&gt;Hi folks! What about clusters where an HBase instance doesn&apos;t exist? It seems the problem here is that the hive script itself is making assumptions about the configuration. Usually, there are feature flags to turn off and on features that may not be available.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12990927">HIVE-14288</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12765695" name="HIVE-12058.1.patch" size="832" author="ychena" created="Thu, 8 Oct 2015 22:16:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mpnb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>