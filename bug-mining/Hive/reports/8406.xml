<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:23:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-26806] Precommit tests in CI are timing out after HIVE-26796</title>
                <link>https://issues.apache.org/jira/browse/HIVE-26806</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/master/1506/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/master/1506/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;ancelling nested steps due to timeout
15:22:08  Sending interrupt signal to process
15:22:08  Killing processes
15:22:09  kill finished with exit code 0
15:22:19  Terminated
15:22:19  script returned exit code 143
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
15:22:19  Deleting 1 temporary files
[Pipeline] // configFileProvider
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (PostProcess)
[Pipeline] sh
[Pipeline] sh
[Pipeline] sh
[Pipeline] junit
15:22:25  Recording test results
15:22:32  [Checks API] No suitable checks publisher found.
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // container
[Pipeline] }
[Pipeline] // node
[Pipeline] }
[Pipeline] // timeout
[Pipeline] }
[Pipeline] // podTemplate
[Pipeline] }
15:22:32  Failed in branch split-01
[Pipeline] // parallel
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Archive)
[Pipeline] podTemplate
[Pipeline] {
[Pipeline] timeout
15:22:33  Timeout set to expire in 6 hr 0 min
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13509256">HIVE-26806</key>
            <summary>Precommit tests in CI are timing out after HIVE-26796</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Dec 2022 14:30:27 +0000</created>
                <updated>Wed, 16 Aug 2023 07:13:37 +0000</updated>
                                                                            <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="17642552" author="zabetak" created="Fri, 2 Dec 2022 14:33:52 +0000"  >&lt;p&gt;The fact that the tests are taking too much time to execute could be due to a bad allocation to buckets from &lt;a href=&quot;https://www.jenkins.io/doc/pipeline/steps/parallel-test-executor/#splittests-split-test-runs&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Jenkins Parallel Test Executor Plugin&lt;/a&gt;. The problem is probably a result of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-26796&quot; title=&quot;All tests in hive-unit module are skipped silently&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-26796&quot;&gt;&lt;del&gt;HIVE-26796&lt;/del&gt;&lt;/a&gt; that re-enabled ~1K more tests that were not distributed evenly among splits.&lt;/p&gt;</comment>
                            <comment id="17642558" author="asolimando" created="Fri, 2 Dec 2022 14:40:06 +0000"  >&lt;p&gt;In case you have an existing open PR suffering form this and you don&apos;t want to rebase, if you have permission to run Jenkins&apos; jobs you just change the default split value to 22 and re-run, HTH&lt;/p&gt;</comment>
                            <comment id="17642580" author="zabetak" created="Fri, 2 Dec 2022 15:34:39 +0000"  >&lt;p&gt;An attemt to fix the problem by increasing the SPLIT size from 20 to 22 was committed to master: &lt;a href=&quot;https://github.com/apache/hive/commit/74729e0aa82951387dd5449862203a9a32282801&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/74729e0aa82951387dd5449862203a9a32282801&lt;/a&gt;. &lt;/p&gt;

&lt;p&gt;However the initial Jenkins run for the respective master commit (&lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/master/1508/parameters/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/master/1508/parameters/&lt;/a&gt;) didn&apos;t seem to pick up the changes for this specific parameter. We stopped the run and manually re-launched &lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/master/1510/parameters/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/master/1510/parameters/&lt;/a&gt; and now we are waiting for the results.&lt;/p&gt;</comment>
                            <comment id="17642695" author="zabetak" created="Fri, 2 Dec 2022 21:34:52 +0000"  >&lt;p&gt;The last run &lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/master/1510/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/master/1510/&lt;/a&gt; also failed with timeout exceeded. I will double the timeout temporarily and commit again.&lt;/p&gt;</comment>
                            <comment id="17642702" author="ayushtkn" created="Fri, 2 Dec 2022 21:58:25 +0000"  >&lt;p&gt;I changed the build timeout in 1511, without the commit, just while replaying added the timeout. Which you aborted. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17642809" author="ayushtkn" created="Sat, 3 Dec 2022 10:50:26 +0000"  >&lt;p&gt;The build passed :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/1512/pipeline/661&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/1512/pipeline/661&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Hopefully the time should reduce for subsequent builds. Have triggered another:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/master/1513/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/master/1513/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Ideally the splits are planned according to the previous results, so this should plan well, since last build was successful, lets see if it does so&lt;/p&gt;</comment>
                            <comment id="17642948" author="JIRAUSER298271" created="Sun, 4 Dec 2022 06:49:02 +0000"  >&lt;p&gt;I tried re-running the tests with 22 splits even with 24 splits. The issue seems to persist. Here is the latest run for my PR: PR-3803&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/PR-3803/15/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/PR-3803/15/pipeline&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I changed the split manually via Jenkins&apos;s build with params.&lt;/p&gt;</comment>
                            <comment id="17643213" author="zabetak" created="Mon, 5 Dec 2022 10:12:48 +0000"  >&lt;p&gt;The recent builds on master (1513, 1514) are now back to normal and each split takes at most ~2h.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asolimando&quot; class=&quot;user-hover&quot; rel=&quot;asolimando&quot;&gt;asolimando&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt; I am planning to revert the timeout back to 6h by committing directly to master in a few hours. Please speak up if there is any reason not do to this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akshatm&quot; class=&quot;user-hover&quot; rel=&quot;akshatm&quot;&gt;akshatm&lt;/a&gt; The Jenkins plugin that is used to split the test into buckets uses the last successful build of the job as a guide. Each PR corresponds to a separate Jenkins Job (&lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/view/change-requests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/view/change-requests/&lt;/a&gt;). The last successful build for your PR is &lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/PR-3803/8/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/PR-3803/8/&lt;/a&gt; so this is what will be used to split the tests. This is not good cause the successful run has 3K less tests than what exists in master so the splitting will be pretty bad. I see three  ways to unblock the current situation and overcome the problem: &lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Close PR-3803 and open a new one.&lt;/li&gt;
	&lt;li&gt;Manually delete every successful build for JOB PR-3803 and start a new one.&lt;/li&gt;
	&lt;li&gt;Increase the timeout on the JenkinsFile and try again.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;None of these is perfect but I have higher hopes for 1 and 2.&lt;/p&gt;</comment>
                            <comment id="17643222" author="asolimando" created="Mon, 5 Dec 2022 10:19:52 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zabetak&quot; class=&quot;user-hover&quot; rel=&quot;zabetak&quot;&gt;zabetak&lt;/a&gt;, as you say the issue now affects only existing PRs, I am trying 2. to see if it works, otherwise I will go for 1., I will keep you guys posted here.&lt;/p&gt;

&lt;p&gt;Forgetting the old affected PRs, I am OK with reducing the timeout to the previous value, since it now works.&lt;/p&gt;</comment>
                            <comment id="17643247" author="zabetak" created="Mon, 5 Dec 2022 10:35:41 +0000"  >&lt;p&gt;&lt;b&gt;Important note:&lt;/b&gt; The test timings from master &lt;b&gt;are not used&lt;/b&gt; to split tests in PRs. The master branch and PR branches have separate Jenkins jobs so one does not use the other as a reference. The splitting of tests on the first run of a PR (or a PR without a previous successful build) is more or less random.&lt;/p&gt;</comment>
                            <comment id="17643470" author="asolimando" created="Mon, 5 Dec 2022 17:17:28 +0000"  >&lt;p&gt;It looks that deleting all green past runs did not fix for &lt;a href=&quot;https://github.com/apache/hive/pull/3137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/pull/3137&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;That&apos;s a big deal since the PR is huge and review is in progress, I don&apos;t think I can close and re-open it.&lt;/p&gt;

&lt;p&gt;Is there a way to tweak timeout for that PR alone &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zabetak&quot; class=&quot;user-hover&quot; rel=&quot;zabetak&quot;&gt;zabetak&lt;/a&gt;?&lt;/p&gt;

&lt;p&gt;EDIT: there is, I am using &quot;Replay&quot; in Jenkins so I can change the JenkinsFile for the given run without any change in Git, hopefully that will do the trick.&lt;/p&gt;</comment>
                            <comment id="17643560" author="zabetak" created="Mon, 5 Dec 2022 21:26:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=asolimando&quot; class=&quot;user-hover&quot; rel=&quot;asolimando&quot;&gt;asolimando&lt;/a&gt; For documentation purposes can you elaborate what happened after deleting all successful builds? What was the problem that you observed?&lt;/p&gt;</comment>
                            <comment id="17643656" author="JIRAUSER298271" created="Tue, 6 Dec 2022 04:42:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zabetak&quot; class=&quot;user-hover&quot; rel=&quot;zabetak&quot;&gt;zabetak&lt;/a&gt; Closing PR-3803 and opening a new one worked thanks.&lt;/p&gt;

&lt;p&gt;Run for new PR: &lt;a href=&quot;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/PR-3832/1/pipeline/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/PR-3832/1/pipeline/&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17643751" author="asolimando" created="Tue, 6 Dec 2022 09:33:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zabetak&quot; class=&quot;user-hover&quot; rel=&quot;zabetak&quot;&gt;zabetak&lt;/a&gt;, I have deleted the green runs but the first time I re-run, the timeout occurred again.&lt;/p&gt;

&lt;p&gt;I haven&apos;t seen timeout from that run onward, so it has probably worked, but the new random split was unfortunate too by coincidence.&lt;/p&gt;

&lt;p&gt;So, resuming, deleting past green runs seem to work, no need to close and open PR again if not needed.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="17644252" author="zabetak" created="Wed, 7 Dec 2022 09:39:35 +0000"  >&lt;p&gt;I plan to keep the the timeout to the same value (12h) for a while longer since I&apos;ve seen a recent build (&lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/master/1519/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/master/1519/&lt;/a&gt;) taking 5h30. Although the 5h are not spend executing tests, but also allocating executors, I don&apos;t want to risk destabilising CI again now.&lt;/p&gt;

&lt;p&gt;Let&apos;s monitor &lt;a href=&quot;http://ci.hive.apache.org/job/hive-precommit/job/master/buildTimeTrend&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/job/hive-precommit/job/master/buildTimeTrend&lt;/a&gt; for the following days and take a decision next week.&lt;/p&gt;</comment>
                            <comment id="17752828" author="kgyrtkirk" created="Thu, 10 Aug 2023 14:44:08 +0000"  >&lt;p&gt;seems like there is a helpfull feature in the parallel-test-executor&lt;br/&gt;
&lt;a href=&quot;https://github.com/jenkinsci/parallel-test-executor-plugin/commit/c9145a5f849f01d6e99c2240eb51d9aaf283ef6a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jenkinsci/parallel-test-executor-plugin/commit/c9145a5f849f01d6e99c2240eb51d9aaf283ef6a&lt;/a&gt;&lt;br/&gt;
upgrade to &amp;gt;380 could make this go away&lt;/p&gt;</comment>
                            <comment id="17754096" author="zabetak" created="Mon, 14 Aug 2023 13:14:30 +0000"  >&lt;p&gt;Thanks for the pointer Zoltan. I don&apos;t have admin privileges on Jenkins to upgrade the version of the plugin (if necessary) but I will ping some people to see what can be done.&lt;/p&gt;</comment>
                            <comment id="17754910" author="kgyrtkirk" created="Wed, 16 Aug 2023 07:13:37 +0000"  >&lt;p&gt;made you an admin - didn&apos;t know you weren&apos;t one &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;there are 2 ways to upgrade the plugin:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;upgrade individually on the interface&lt;/li&gt;
	&lt;li&gt;upgrade by building a new htk-jenkins image (&lt;a href=&quot;https://hub.docker.com/r/kgyrtkirk/htk-jenkins/tags&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hub.docker.com/r/kgyrtkirk/htk-jenkins/tags&lt;/a&gt;)&lt;br/&gt;
this second could upgrade everything from jenkins version to all plugins - since it wasn&apos;t been done for a while it might be helpfull to do that&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;let me know if you need any help with that; I&apos;m also on asf slack if you want to chat&lt;/p&gt;

</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13507473">HIVE-26796</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13503730">HIVE-26763</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13509859">HIVE-26807</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1daq0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>