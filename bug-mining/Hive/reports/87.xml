<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:51:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-251] Failures in Transform don&apos;t stop the job</title>
                <link>https://issues.apache.org/jira/browse/HIVE-251</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If the program executed via a SELECT TRANSFORM() USING &apos;foo&apos; exits with a non-zero exit status, Hive proceeds as if nothing bad happened.  The main way that the user knows something bad has happened is if the user checks the logs (probably because he got no output).  This is doubly bad if the program only fails part of the time (say, on certain inputs) since the job will still produce output and thus the problem will likely go undetected.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12413310">HIVE-251</key>
            <summary>Failures in Transform don&apos;t stop the job</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="athusoo">Ashish Thusoo</assignee>
                                    <reporter username="sasmith">S. Alex Smith</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jan 2009 20:12:29 +0000</created>
                <updated>Sat, 17 Dec 2011 00:09:02 +0000</updated>
                            <resolved>Wed, 18 Mar 2009 01:57:46 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12669847" author="rsm" created="Tue, 3 Feb 2009 02:21:29 +0000"  >&lt;p&gt;more information about this error based on Venky&apos;s tests.&lt;/p&gt;

&lt;p&gt;For the case where the job succeeds even though the script fails, the following logs appear:&lt;br/&gt;
&amp;#8211;&lt;br/&gt;
2009-02-02 17:49:26,251 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: StreamThread ErrorProcessor done&lt;br/&gt;
&lt;b&gt;2009-02-02 17:49:26,251 ERROR org.apache.hadoop.hive.ql.exec.ScriptOperator: Script failed with code 1&lt;/b&gt;&lt;br/&gt;
2009-02-02 17:49:26,251 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: StreamThread OutputProcessor done&lt;br/&gt;
2009-02-02 17:49:26,251 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: DESERIALIZE_ERRORS:0&lt;br/&gt;
2009-02-02 17:49:26,252 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: SERIALIZE_ERRORS:0&lt;br/&gt;
2009-02-02 17:49:26,296 INFO org.apache.hadoop.mapred.TaskRunner: Task &apos;task_200901301729_7391_m_000000_0&apos; done.&lt;br/&gt;
&amp;#8211;&lt;/p&gt;

&lt;p&gt;For the case where the job fails:&lt;br/&gt;
&amp;#8211;&lt;br/&gt;
2009-02-02 17:59:03,398 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: StreamThread ErrorProcessor done&lt;br/&gt;
&lt;b&gt;2009-02-02 17:59:03,398 ERROR org.apache.hadoop.hive.ql.exec.ScriptOperator: Error in writing to script: Broken pipe&lt;/b&gt;&lt;br/&gt;
2009-02-02 17:59:03,398 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: StreamThread OutputProcessor done&lt;br/&gt;
2009-02-02 17:59:03,399 INFO org.apache.hadoop.hive.ql.exec.MapOperator: DESERIALIZE_ERRORS:0&lt;br/&gt;
2009-02-02 17:59:03,399 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: SERIALIZE_ERRORS:0&lt;br/&gt;
2009-02-02 17:59:03,399 INFO org.apache.hadoop.hive.ql.exec.ScriptOperator: DESERIALIZE_ERRORS:0&lt;br/&gt;
2009-02-02 17:59:03,429 WARN org.apache.hadoop.mapred.TaskTracker: Error running child&lt;br/&gt;
java.lang.RuntimeException: java.io.IOException: Broken pipe&lt;br/&gt;
&amp;#8211;&lt;/p&gt;

&lt;p&gt;Looks like exceptions thrown in ScriptOperator.close are being ignored.&lt;/p&gt;</comment>
                            <comment id="12680704" author="athusoo" created="Wed, 11 Mar 2009 00:25:50 +0000"  >&lt;p&gt;Marking this as a blocker for 0.3 as there is no suitable workaround.&lt;/p&gt;</comment>
                            <comment id="12680708" author="indigoviolet" created="Wed, 11 Mar 2009 00:34:20 +0000"  >&lt;p&gt;I believe this has to do with cases where the (streaming) script reads in all of its input from stdin and &lt;em&gt;then&lt;/em&gt; fails. Scripts that fail before reading in all their input are correctly marked as having failed. &lt;/p&gt;</comment>
                            <comment id="12681692" author="athusoo" created="Fri, 13 Mar 2009 12:35:44 +0000"  >&lt;p&gt;Fixed the issue.&lt;/p&gt;

&lt;p&gt;The problem was the Operator.close was catching and ignoring HiveExceptions.&lt;/p&gt;

&lt;p&gt;Also in FileSinkOperator we through HiveExceptions that need to be ignored, e.g. while copying the transient _tmp files. This is thrown from copyUtils in hadoop.&lt;/p&gt;

&lt;p&gt;Further, the input20.q test was actually failing but no failure was reported due to masking by this bug. We cannot support unix pipes yet. So as a workaround I have moved them to within a unix script.&lt;/p&gt;</comment>
                            <comment id="12681693" author="athusoo" created="Fri, 13 Mar 2009 12:36:38 +0000"  >&lt;p&gt;submitting patch.&lt;/p&gt;</comment>
                            <comment id="12681905" author="jsensarma" created="Fri, 13 Mar 2009 21:51:45 +0000"  >&lt;p&gt;why are we ignoring the exception in FileSinkOperator?&lt;/p&gt;</comment>
                            <comment id="12681910" author="athusoo" created="Fri, 13 Mar 2009 22:11:15 +0000"  >&lt;p&gt;copyUtils in hadoop throws IOException if the copying file disappears after the list status is done on the directory. We hit that with tmp_ files.&lt;/p&gt;</comment>
                            <comment id="12681922" author="namit" created="Fri, 13 Mar 2009 22:30:52 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good &amp;#8211; All IOExceptions in FileSinkOperator are beign ignored, but that is the same as current behavior&lt;/p&gt;</comment>
                            <comment id="12682840" author="athusoo" created="Tue, 17 Mar 2009 22:42:49 +0000"  >&lt;p&gt;uploading a new patch as there was a non determinism in an existing test. Please review this again.&lt;/p&gt;</comment>
                            <comment id="12682866" author="namit" created="Wed, 18 Mar 2009 01:13:22 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good. &lt;/p&gt;

&lt;p&gt;Before committing, can you remove the extra commented line in the reduce script, and add a comment explaining what it is doing&lt;/p&gt;</comment>
                            <comment id="12682875" author="athusoo" created="Wed, 18 Mar 2009 01:57:46 +0000"  >&lt;p&gt;committed. Also made the changes suggested by Namit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12402139" name="patch-251.txt" size="11463" author="athusoo" created="Fri, 13 Mar 2009 12:35:44 +0000"/>
                            <attachment id="12402432" name="patch-251_1.txt" size="12343" author="athusoo" created="Tue, 17 Mar 2009 22:42:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73672</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122069</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>