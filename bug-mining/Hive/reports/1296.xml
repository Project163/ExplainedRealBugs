<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:06:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4969] HCatalog HBaseHCatStorageHandler is not returning all the data</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4969</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Repro steps:&lt;br/&gt;
1) Create an HCatalog table mapped to HBase table.&lt;/p&gt;

&lt;p&gt;hcat -e &quot;CREATE TABLE studentHCat(rownum int, name string, age int, gpa float)&lt;br/&gt;
         STORED BY &apos;org.apache.hcatalog.hbase.HBaseHCatStorageHandler&apos;&lt;br/&gt;
         TBLPROPERTIES(&apos;hbase.table.name&apos; =&apos;studentHBase&apos;,  &lt;br/&gt;
                       &apos;hbase.columns.mapping&apos; =                &lt;br/&gt;
                            &apos;:key,onecf:name,twocf:age,threecf:gpa&apos;)&quot;;&lt;/p&gt;


&lt;p&gt;2) Load the following data from Pig.&lt;/p&gt;

&lt;p&gt;cat student_data&lt;br/&gt;
1^Asarah laertes^A23^A2.40&lt;br/&gt;
2^Atom allen^A72^A1.57&lt;br/&gt;
3^Abob ovid^A61^A2.67&lt;br/&gt;
4^Aethan nixon^A38^A2.15&lt;br/&gt;
5^Acalvin robinson^A28^A2.53&lt;br/&gt;
6^Airene ovid^A65^A2.56&lt;br/&gt;
7^Ayuri garcia^A36^A1.65&lt;br/&gt;
8^Acalvin nixon^A41^A1.04&lt;br/&gt;
9^Ajessica davidson^A48^A2.11&lt;br/&gt;
10^Akatie king^A39^A1.05&lt;/p&gt;


&lt;p&gt;grunt&amp;gt; A = LOAD &apos;student_data&apos; AS (rownum:int,name:chararray,age:int,gpa:float);&lt;/p&gt;

&lt;p&gt;grunt&amp;gt; STORE A INTO &apos;studentHCat&apos; USING org.apache.hcatalog.pig.HCatStorer();&lt;/p&gt;

&lt;p&gt;3) Now from HBase do a scan on the studentHBase table&lt;br/&gt;
hbase(main):026:0&amp;gt; scan &apos;studentPig&apos;, &lt;/p&gt;
{LIMIT =&amp;gt; 5}

&lt;p&gt;4) From pig access the data in table&lt;br/&gt;
grunt&amp;gt; A = LOAD &apos;studentHCat&apos; USING org.apache.hcatalog.pig.HCatLoader();&lt;br/&gt;
grunt&amp;gt; STORE A INTO &apos;/user/root/studentPig&apos;;&lt;/p&gt;


&lt;p&gt;5) Verify the output written in StudentPig&lt;br/&gt;
hadoop fs -cat /user/root/studentPig/part-r-00000&lt;br/&gt;
1              23&lt;br/&gt;
2              72&lt;br/&gt;
3              61&lt;br/&gt;
4              38&lt;br/&gt;
5              28&lt;br/&gt;
6              65&lt;br/&gt;
7              36&lt;br/&gt;
8              41&lt;br/&gt;
9              48&lt;br/&gt;
10             39&lt;/p&gt;

&lt;p&gt;The data returned has only two fields (rownum and age).&lt;/p&gt;


&lt;p&gt;Problem:&lt;br/&gt;
While reading the data from HBase table, HbaseSnapshotRecordReader gets data row in Result (org.apache.hadoop.hbase.client.Result) object and processes the KeyValue fields in it. After processing, it creates another Result object out of the processed KeyValue array. Problem here is KeyValue array is not sorted. Result object expects the input KeyValue array to have sorted elements. When we call the Result.getValue() it returns no value for some of the fields as it does a binary search on un-ordered array.&lt;/p&gt;







</description>
                <environment></environment>
        <key id="12661006">HIVE-4969</key>
            <summary>HCatalog HBaseHCatStorageHandler is not returning all the data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="vkorukanti">Venki Korukanti</assignee>
                                    <reporter username="vkorukanti">Venki Korukanti</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Jul 2013 22:49:13 +0000</created>
                <updated>Sun, 27 Oct 2013 17:13:59 +0000</updated>
                                            <version>0.11.0</version>
                                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13725807" author="vkorukanti" created="Wed, 31 Jul 2013 22:58:40 +0000"  >&lt;p&gt;attached a patch to sort KeyValue array before creating HBase Result object.&lt;/p&gt;</comment>
                            <comment id="13755256" author="sushanth" created="Fri, 30 Aug 2013 23:25:57 +0000"  >&lt;p&gt;Hi, could you please attach a testcase that tests this as well? That way, the tests(including your test) fails without your fix, and succeeds with your fix.&lt;/p&gt;

&lt;p&gt;Also, as a general note, the HBaseHCatStorageHandler is about to be deprecated in favour of the hive&apos;s HBaseStorageHandler with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4331&quot; title=&quot;Integrated StorageHandler for Hive and HCat using the HiveStorageHandler&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4331&quot;&gt;&lt;del&gt;HIVE-4331&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13757418" author="sushanth" created="Wed, 4 Sep 2013 03:02:41 +0000"  >&lt;p&gt;Canceling patch as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4869&quot; title=&quot;Clean up HCatalog build post Hive integration &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4869&quot;&gt;&lt;del&gt;HIVE-4869&lt;/del&gt;&lt;/a&gt; package cleanup will invalidate all current HCatalog patches and will require patch regeneration.&lt;/p&gt;</comment>
                            <comment id="13787864" author="thejas" created="Mon, 7 Oct 2013 02:24:38 +0000"  >&lt;p&gt;Preparing for 0.12 release. Removing fix version of 0.12 for those that are not in 0.12 branch.&lt;/p&gt;</comment>
                            <comment id="13797508" author="ndimiduk" created="Thu, 17 Oct 2013 01:19:04 +0000"  >&lt;p&gt;HBaseHCatStorageHandler is being deprecated, right? Can this ticket be closed as &quot;Won&apos;t Fix&quot;?&lt;/p&gt;

&lt;p&gt;It would be great to convert this example into a unit test &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13803287" author="vkorukanti" created="Wed, 23 Oct 2013 20:29:59 +0000"  >&lt;p&gt;I haven&apos;t tested this on latest trunk. I will test it and attach a unittest.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12595295" name="HIVE-4969-1.patch" size="971" author="vkorukanti" created="Wed, 31 Jul 2013 22:57:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341195</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mugn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341513</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>