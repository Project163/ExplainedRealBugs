<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:28:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8889] JDBC Driver ResultSet.getXXXXXX(String columnLabel) methods Broken</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8889</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Using hive-jdbc-0.13.1-cdh5.2.0.jar.&lt;/p&gt;

&lt;p&gt;All of the get-by-column-label methods of HiveBaseResultSet are now broken.  They don&apos;t take just the column label as they should.  Instead you have to pass in &amp;lt;table name&amp;gt;.&amp;lt;column name&amp;gt;.  This requirement doesn&apos;t conform to the java ResultSet API which specifies:&lt;/p&gt;

&lt;p&gt;&quot;columnLabel - the label for the column specified with the SQL AS clause. If the SQL AS clause was not specified, then the label is the name of the column&quot;&lt;/p&gt;

&lt;p&gt;Looking at the code, it seems that the problem is that findColumn() method is looking in normalizedColumnNames instead of the columnNames.&lt;/p&gt;

&lt;p&gt;BTW, Another annoying issue with the code is that the SQLException thrown gives no indication of what the problem is.  It should at least say that the column name wasn&apos;t found in the description string.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12755620">HIVE-8889</key>
            <summary>JDBC Driver ResultSet.getXXXXXX(String columnLabel) methods Broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctang">Chaoyu Tang</assignee>
                                    <reporter username="glingle">G Lingle</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Nov 2014 18:39:32 +0000</created>
                <updated>Mon, 10 Aug 2015 23:33:37 +0000</updated>
                            <resolved>Sat, 29 Nov 2014 20:13:31 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14213841" author="ctang.ma" created="Sun, 16 Nov 2014 03:45:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=glingle&quot; class=&quot;user-hover&quot; rel=&quot;glingle&quot;&gt;glingle&lt;/a&gt; Do you have the reproduce code which you can share with me?&lt;/p&gt;</comment>
                            <comment id="14215691" author="ctang.ma" created="Tue, 18 Nov 2014 04:23:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=glingle&quot; class=&quot;user-hover&quot; rel=&quot;glingle&quot;&gt;glingle&lt;/a&gt; I was not able to reproduce the issue using Hive provided JDBC driver with following test code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Connection con = DriverManager.getConnection(connstring, user, passwd);
        Statement stmt = con.createStatement();
      
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql = &lt;span class=&quot;code-quote&quot;&gt;&quot;select key as keyLabel, value as valLabel from src&quot;&lt;/span&gt;;
        ResultSet res = stmt.executeQuery(sql);        
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (res.next()) {
            &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;key: &quot;&lt;/span&gt; + res.getString(1) + &lt;span class=&quot;code-quote&quot;&gt;&quot;; value: &quot;&lt;/span&gt; + res.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;valLabel&quot;&lt;/span&gt;));
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I could get results using either getString(index) and getString(columnLabel), and did not see the issue you observed. If you still have this problem, could you provide your test code.&lt;/p&gt;</comment>
                            <comment id="14218769" author="glingle" created="Thu, 20 Nov 2014 00:20:58 +0000"  >&lt;p&gt;yep, don&apos;t use the &quot;as &amp;lt;name&amp;gt;&quot;&lt;br/&gt;
my code is like below. Try this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql = &lt;span class=&quot;code-quote&quot;&gt;&quot;select * from src&quot;&lt;/span&gt;;
  ResultSet res = stmt.executeQuery(sql);        
  &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (res.next()) {
       &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;key: &quot;&lt;/span&gt; + res.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;));
   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When it runs, an exception is thrown on the res.getString().&lt;/p&gt;

&lt;p&gt;When I step into the code I see that normalizedColumnNames contains &amp;lt;table name&amp;gt;.&amp;lt;column name&amp;gt;.&lt;br/&gt;
In the example above you&apos;d see &quot;src.key&quot; and &quot;src.value&quot; in the normalizedColumnNames list,&lt;br/&gt;
neither of those match the requested column name &quot;key&quot;, so the exception is thrown.&lt;/p&gt;

&lt;p&gt;HTH and Thanks for the prompt response,&lt;br/&gt;
G&lt;/p&gt;</comment>
                            <comment id="14218780" author="glingle" created="Thu, 20 Nov 2014 00:26:04 +0000"  >&lt;p&gt;We&apos;d been using this code for over a year and it was working fine before upgrading to cdh5 release.&lt;/p&gt;</comment>
                            <comment id="14223536" author="ctang.ma" created="Mon, 24 Nov 2014 21:23:31 +0000"  >&lt;p&gt;Basically it was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6687&quot; title=&quot;JDBC ResultSet fails to get value by qualified projection name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6687&quot;&gt;&lt;del&gt;HIVE-6687&lt;/del&gt;&lt;/a&gt; in Hive 0.13. Currently you might have to work around your select * case by setting set hive.resultset.use.unique.column.names to false. But it will break other case. I think Hive JDBC should not flip the support only to shortname or qualified name in getXXX(columnName) depending on a property, instead it should support both at same time like that in MySQL. For example, for queries to a table or view like following:&lt;br/&gt;
a)select * from src&lt;br/&gt;
b)select key from src&lt;br/&gt;
c)select * from srcview&lt;br/&gt;
d)select key from srcview&lt;br/&gt;
getXXX(key) and getXXX(src.key) (or getXXX(srcview.key)) should all work.&lt;br/&gt;
Uploaded patch to &lt;a href=&quot;https://reviews.apache.org/r/28403/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/28403/&lt;/a&gt; and requesting for review.&lt;/p&gt;</comment>
                            <comment id="14223699" author="ctang.ma" created="Mon, 24 Nov 2014 22:46:43 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt;. I have revised the patch based on your review comments and attached the new patch here. &lt;/p&gt;</comment>
                            <comment id="14225503" author="hiveqa" created="Wed, 26 Nov 2014 00:51:16 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12683437/HIVE-8889.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12683437/HIVE-8889.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 22 failed/errored test(s), 6683 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_alter_view_as_select
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_alter_view_rename
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_authorization_8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_create_like_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_create_or_replace_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_create_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_create_view_partitioned
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_create_view_translate
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_union_view
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_top_level
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_alter_view_failure2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_alter_view_failure4
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_alter_view_failure5
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_create_or_replace_view1
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_create_or_replace_view2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_create_or_replace_view4
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_create_or_replace_view5
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_create_or_replace_view6
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_create_or_replace_view7
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_create_or_replace_view8
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchEmptyCommit
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1901/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1901/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1901/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1901/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1901/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1901/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 22 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12683437 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14228429" author="ctang.ma" created="Fri, 28 Nov 2014 17:51:00 +0000"  >&lt;p&gt;Limited the patch change only in JDBC so that its ResultSet.getXXX is still able to use shortname to get result for query select *  when HS2 hive.resultset.use.unique.column.names is set to true.&lt;/p&gt;

&lt;p&gt;To support getXXX using either shortname or qualified name for all queries needs more and complicated change in Hive which will be tracked in a new JIRA. &lt;/p&gt;</comment>
                            <comment id="14228503" author="hiveqa" created="Fri, 28 Nov 2014 20:06:19 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12684204/HIVE-8889.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12684204/HIVE-8889.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6695 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_decimal_aggregate
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_mapjoin
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1933/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1933/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1933/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1933/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1933/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1933/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12684204 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14228537" author="brocknoland" created="Fri, 28 Nov 2014 22:19:48 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14228923" author="brocknoland" created="Sat, 29 Nov 2014 20:14:00 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;ctang.ma&lt;/a&gt;! I have committed this to trunk.&lt;/p&gt;</comment>
                            <comment id="14680957" author="jdere" created="Mon, 10 Aug 2015 23:33:37 +0000"  >&lt;p&gt;Included this fix to branch-1.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12683437" name="HIVE-8889.1.patch" size="8270" author="ctang" created="Mon, 24 Nov 2014 22:46:43 +0000"/>
                            <attachment id="12684204" name="HIVE-8889.2.patch" size="3765" author="ctang" created="Fri, 28 Nov 2014 17:51:00 +0000"/>
                            <attachment id="12683419" name="HIVE-8889.patch" size="8174" author="ctang" created="Mon, 24 Nov 2014 21:23:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22fc7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>