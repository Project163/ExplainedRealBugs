<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:08:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5003] Localize hive exec jar for tez</title>
                <link>https://issues.apache.org/jira/browse/HIVE-5003</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Tez doesn&apos;t expose a distributed cache. JARs are localized via yarn APIs and added to vertices and the dag itself as needed. For hive we need to localize the hive-exec.jar.&lt;/p&gt;

&lt;p&gt;NO PRECOMMIT TESTS (this is wip for the tez branch)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12662059">HIVE-5003</key>
            <summary>Localize hive exec jar for tez</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vikram.dixit">Vikram Dixit K</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Aug 2013 07:46:29 +0000</created>
                <updated>Sat, 15 Mar 2014 21:14:47 +0000</updated>
                            <resolved>Mon, 12 Aug 2013 23:26:47 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13734318" author="vikram.dixit" created="Fri, 9 Aug 2013 01:39:38 +0000"  >&lt;p&gt;The patch addresses both &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5003&quot; title=&quot;Localize hive exec jar for tez&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5003&quot;&gt;&lt;del&gt;HIVE-5003&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5004&quot; title=&quot;Localize user jars/files/archives&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5004&quot;&gt;&lt;del&gt;HIVE-5004&lt;/del&gt;&lt;/a&gt;. I will close &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5004&quot; title=&quot;Localize user jars/files/archives&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5004&quot;&gt;&lt;del&gt;HIVE-5004&lt;/del&gt;&lt;/a&gt; once this is committed.&lt;/p&gt;</comment>
                            <comment id="13734327" author="vikram.dixit" created="Fri, 9 Aug 2013 01:59:12 +0000"  >&lt;p&gt;Remove some cruft.&lt;/p&gt;</comment>
                            <comment id="13734333" author="vikram.dixit" created="Fri, 9 Aug 2013 02:13:58 +0000"  >&lt;p&gt;Rest of the patch.&lt;/p&gt;</comment>
                            <comment id="13734350" author="appodictic" created="Fri, 9 Aug 2013 02:48:39 +0000"  >&lt;p&gt;What does this mean for adding jars to load UDFs or adding files to the distributed cache to run a job, are we going to create folders under this HDFS folder? &lt;/p&gt;</comment>
                            <comment id="13735525" author="vikram.dixit" created="Fri, 9 Aug 2013 23:45:20 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appodictic&quot; class=&quot;user-hover&quot; rel=&quot;appodictic&quot;&gt;appodictic&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Here is a short design doc on what I am proposing in this jira. Please take a look.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Vikram.&lt;/p&gt;</comment>
                            <comment id="13737163" author="vikram.dixit" created="Mon, 12 Aug 2013 18:23:26 +0000"  >&lt;p&gt;Updated to better re-use code.&lt;/p&gt;</comment>
                            <comment id="13737198" author="appodictic" created="Mon, 12 Aug 2013 18:40:18 +0000"  >&lt;p&gt;I think we are repeating a semi-disturbing trend of writing a lot of code we have little direct coverage for. For example take a method like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Path getDefaultDestDir(Configuration conf) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; LoginException, IOException {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getExecJarPathLocal () {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think we should have direct junit style tests around these methods. The code clean (for its development state) and well documented. But I think we have the chance to &quot;do it better&quot;.&lt;/p&gt;

&lt;p&gt;Right now, for our current code, and this code. We are totally reliant on our end-to-end system to validate every minor change. If we have smaller unit tests on things like this we can have more coverage and enhance our ability to make changes to the project without having as many worries around side effects that will not manifest until final end to end tests. &lt;/p&gt;

&lt;p&gt;I think we should draw a line in the sand and here and attempt to write unit tests and design code in a testable way. Not just write it and worry about unit tests later. What do you think?&lt;/p&gt;
</comment>
                            <comment id="13737221" author="hagleitn" created="Mon, 12 Aug 2013 18:54:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appodictic&quot; class=&quot;user-hover&quot; rel=&quot;appodictic&quot;&gt;appodictic&lt;/a&gt; I agree with you and I don&apos;t mind the tez integration being a test bed for this. I&apos;ll open a tez blocker jira for this - the reason being that we need to put some serious thought into this first. &lt;/p&gt;

&lt;p&gt;For instance:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private methods should not have unit tests, but public should I think (private should be covered implicitly, I don&apos;t want to make everything package private for testing and I don&apos;t want reflection to call those)&lt;/li&gt;
	&lt;li&gt;Mocking: We have to investigate how we do this cleanly&lt;/li&gt;
	&lt;li&gt;Dependency injection: We might have to redesign parts of the code allow proper testing easily&lt;/li&gt;
&lt;/ul&gt;


</comment>
                            <comment id="13737235" author="hagleitn" created="Mon, 12 Aug 2013 19:03:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; Some review comments (RB would be great):&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;CANNOT_FIND_EXEC_JAR isn&apos;t used/ please remove&lt;/li&gt;
	&lt;li&gt;hive.jar.directory should be /user/hive/...&lt;/li&gt;
	&lt;li&gt;DagUtils class level javadoc comment is already there (seems you&apos;re adding a second one)&lt;/li&gt;
	&lt;li&gt;e.printStackTrace is not good as a debugging method. Either log or pass it on to the caller&lt;/li&gt;
	&lt;li&gt;// java magic isn&apos;t a great comment, be good to say what the magic is achieving&lt;/li&gt;
	&lt;li&gt;getResourceVersion comment doesn&apos;t match the logic. it will return the basename not the version string&lt;/li&gt;
	&lt;li&gt;There&apos;s a system.out.println in the code&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13737245" author="appodictic" created="Mon, 12 Aug 2013 19:05:34 +0000"  >&lt;p&gt;I understand what you are saying. I am ok with the package private idea and dependency injection, I generally prefer that to a heavy solution like mocking. &lt;/p&gt;

&lt;p&gt;I would not call this a blocker, but I think we need to design more with testing in mind. Lets talk it over elsewhere. &lt;/p&gt;</comment>
                            <comment id="13737381" author="vikram.dixit" created="Mon, 12 Aug 2013 21:35:36 +0000"  >&lt;p&gt;Addressed Gunther&apos;s comments.&lt;/p&gt;</comment>
                            <comment id="13737384" author="vikram.dixit" created="Mon, 12 Aug 2013 21:38:23 +0000"  >&lt;p&gt;RB entry:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/13507/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/13507/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13737520" author="hagleitn" created="Mon, 12 Aug 2013 23:26:34 +0000"  >&lt;p&gt;Committed to branch. Thanks Vikram!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12662932">HIVE-5040</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12651047">HIVE-4660</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12701040">HIVE-6636</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12597007" name="HIVE-5003.1.patch.txt" size="5418" author="vikram.dixit" created="Fri, 9 Aug 2013 01:38:52 +0000"/>
                            <attachment id="12597008" name="HIVE-5003.2.patch.txt" size="4829" author="vikram.dixit" created="Fri, 9 Aug 2013 01:59:12 +0000"/>
                            <attachment id="12597010" name="HIVE-5003.3.patch.txt" size="11251" author="vikram.dixit" created="Fri, 9 Aug 2013 02:13:58 +0000"/>
                            <attachment id="12597527" name="HIVE-5003.4.patch.txt" size="14237" author="vikram.dixit" created="Mon, 12 Aug 2013 18:23:26 +0000"/>
                            <attachment id="12597568" name="HIVE-5003.5.patch.txt" size="13511" author="vikram.dixit" created="Mon, 12 Aug 2013 21:35:36 +0000"/>
                            <attachment id="12597215" name="HiveLocalizationDesign.txt" size="1464" author="vikram.dixit" created="Fri, 9 Aug 2013 23:45:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342063</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 15 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mzqn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>