<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:26:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-28654] MSCK repair fails for default partition when partition column is of numeric type</title>
                <link>https://issues.apache.org/jira/browse/HIVE-28654</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Running msck repair when partition column is of numeric type and a default partition is present (_&lt;em&gt;HIVE_DEFAULT_PARTITION&lt;/em&gt;_) then msck repair fails with the following stacktrace.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2024-12-02 22:17:30,338 ERROR operation.SQLOperation: Error running hive query
org.apache.hive.service.cli.HiveSQLException: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; compiling statement: FAILED: Execution Error, &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; code 40000 from org.apache.hadoop.hive.ql.ddl.DDLTask. For input string: &lt;span class=&quot;code-quote&quot;&gt;&quot;__HIVE_DEFAULT_PARTITION__&quot;&lt;/span&gt;; Query ID: raghav_20241202221730_e80f5ee6-dbc6-4241-8302-e76a52ebc75b
&#160; &#160; at org.apache.hive.service.cli.operation.Operation.toSQLException(Operation.java:376)
&#160; &#160; at org.apache.hive.service.cli.operation.SQLOperation.runQuery(SQLOperation.java:247)
&#160; &#160; at org.apache.hive.service.cli.operation.SQLOperation.access$500(SQLOperation.java:88)
&#160; &#160; at org.apache.hive.service.cli.operation.SQLOperation$BackgroundWork$1.run(SQLOperation.java:334)
&#160; &#160; at java.security.AccessController.doPrivileged(Native Method)
&#160; &#160; at javax.security.auth.Subject.doAs(Subject.java:422)
&#160; &#160; at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1899)
&#160; &#160; at org.apache.hive.service.cli.operation.SQLOperation$BackgroundWork.run(SQLOperation.java:354)
&#160; &#160; at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
&#160; &#160; at java.util.concurrent.FutureTask.run(FutureTask.java:266)
&#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
&#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:750)
Caused by: java.lang.NumberFormatException: For input string: &lt;span class=&quot;code-quote&quot;&gt;&quot;__HIVE_DEFAULT_PARTITION__&quot;&lt;/span&gt;
&#160; &#160; at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.java:580)
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.parseInt(&lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.java:615)
&#160; &#160; at org.apache.hadoop.hive.metastore.utils.MetaStoreServerUtils.getNormalisedPartitionValue(MetaStoreServerUtils.java:1644)
&#160; &#160; at org.apache.hadoop.hive.metastore.utils.MetaStoreServerUtils.getPartitionName(MetaStoreServerUtils.java:1623)
&#160; &#160; at org.apache.hadoop.hive.metastore.HiveMetaStoreChecker.findUnknownPartitions(HiveMetaStoreChecker.java:447)
&#160; &#160; at org.apache.hadoop.hive.metastore.HiveMetaStoreChecker.checkTable(HiveMetaStoreChecker.java:405)
&#160; &#160; at org.apache.hadoop.hive.metastore.HiveMetaStoreChecker.checkTable(HiveMetaStoreChecker.java:290)
&#160; &#160; at org.apache.hadoop.hive.metastore.HiveMetaStoreChecker.checkMetastore(HiveMetaStoreChecker.java:164)
&#160; &#160; at org.apache.hadoop.hive.metastore.Msck.repair(Msck.java:144)
&#160; &#160; at org.apache.hadoop.hive.ql.ddl.misc.msck.MsckOperation.execute(MsckOperation.java:78)
&#160; &#160; at org.apache.hadoop.hive.ql.ddl.DDLTask.execute(DDLTask.java:84)
&#160; &#160; at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:214)
&#160; &#160; at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:105)
&#160; &#160; at org.apache.hadoop.hive.ql.Executor.launchTask(Executor.java:354)
&#160; &#160; at org.apache.hadoop.hive.ql.Executor.launchTasks(Executor.java:327)
&#160; &#160; at org.apache.hadoop.hive.ql.Executor.runTasks(Executor.java:244)
&#160; &#160; at org.apache.hadoop.hive.ql.Executor.execute(Executor.java:105)
&#160; &#160; at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:346)
&#160; &#160; at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:190)
&#160; &#160; at org.apache.hadoop.hive.ql.Driver.run(Driver.java:143)
&#160; &#160; at org.apache.hadoop.hive.ql.Driver.run(Driver.java:138)
&#160; &#160; at org.apache.hadoop.hive.ql.reexec.ReExecDriver.run(ReExecDriver.java:190)
&#160; &#160; at org.apache.hive.service.cli.operation.SQLOperation.runQuery(SQLOperation.java:234)
&#160; &#160; ... 11 more
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here are steps to reproduce the issue and also wrote 2 q files for same. Present in the PR:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
create database raghav;
use raghav;

create table t1 (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, name string) partitioned by (month &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, day &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) stored as orc;

insert into t1 values(1, &lt;span class=&quot;code-quote&quot;&gt;&apos;aaa&apos;&lt;/span&gt;, 11, 2);
insert into t1 values(2, &lt;span class=&quot;code-quote&quot;&gt;&apos;bbb&apos;&lt;/span&gt;, 12, 3);
insert into t1 (id, name, month) values(3, &lt;span class=&quot;code-quote&quot;&gt;&apos;ccc&apos;&lt;/span&gt;, 12);
select * from t1;

--create t2 table as same location of table t1 

create table t2 (id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, name string) partitioned by (month &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, day &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) stored as orc LOCATION &lt;span class=&quot;code-quote&quot;&gt;&apos;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9000/user/hive/warehouse/raghav.db/t1&apos;&lt;/span&gt;;
&lt;/span&gt;msck repair table t2; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13600615">HIVE-28654</key>
            <summary>MSCK repair fails for default partition when partition column is of numeric type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Aggarwal_Raghav">Raghav Aggarwal</assignee>
                                    <reporter username="chiruburri">chiranjeevi</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 2 Dec 2024 16:50:01 +0000</created>
                <updated>Tue, 29 Jul 2025 14:51:39 +0000</updated>
                            <resolved>Tue, 10 Dec 2024 17:21:12 +0000</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17904589" author="ayushtkn" created="Tue, 10 Dec 2024 17:21:06 +0000"  >&lt;p&gt;Committed to master.&lt;/p&gt;

&lt;p&gt;Thanx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Aggarwal_Raghav&quot; class=&quot;user-hover&quot; rel=&quot;Aggarwal_Raghav&quot;&gt;Aggarwal_Raghav&lt;/a&gt; for the contribution, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=okumin&quot; class=&quot;user-hover&quot; rel=&quot;okumin&quot;&gt;okumin&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Indhumathi27&quot; class=&quot;user-hover&quot; rel=&quot;Indhumathi27&quot;&gt;Indhumathi27&lt;/a&gt; for the reviews!!!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13302484">HIVE-23358</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1svdc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>