<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:06:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-19997] Batches for TestMiniDruidCliDriver</title>
                <link>https://issues.apache.org/jira/browse/HIVE-19997</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I have observed &lt;tt&gt;TestMiniDruidCliDriver&lt;/tt&gt; takes a long time to execute. I verified that execution is not batched. We could batch tests as we do with &lt;tt&gt;TestHBaseCliDriver&lt;/tt&gt;, i.e., 5 q files per batch, as there is only a small number of tests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13168382">HIVE-19997</key>
            <summary>Batches for TestMiniDruidCliDriver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcamacho">Jes&#250;s Camacho Rodr&#237;guez</assignee>
                                    <reporter username="jcamacho">Jes&#250;s Camacho Rodr&#237;guez</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jun 2018 15:27:44 +0000</created>
                <updated>Tue, 27 Feb 2024 22:23:48 +0000</updated>
                            <resolved>Wed, 27 Jun 2018 00:34:26 +0000</resolved>
                                                    <fixVersion>3.1.0</fixVersion>
                    <fixVersion>4.0.0-alpha-1</fixVersion>
                                    <component>Druid integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16523872" author="jcamacho" created="Tue, 26 Jun 2018 15:38:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;vihangk1&lt;/a&gt;, could you take a look and let me know what you think? Now that ptests infra is down, it is probably a good time to deploy it. Thanks&lt;/p&gt;</comment>
                            <comment id="16523917" author="vihangk1" created="Tue, 26 Jun 2018 16:09:12 +0000"  >&lt;p&gt;This file does not affect the batch sizes. Unfortunately, the file which controls the batch sizes is different than this one and is loaded when the ptest starts. I will be able to port these changes to that file from your change. I will create a separate JIRA to make it easy to change the batch sizes for everyone.&lt;/p&gt;

&lt;p&gt;These two lines doesn&apos;t make sense to me. What are you intending to do with these lines? I don&apos;t think they are needed.&lt;br/&gt;
qFileTest.miniDruid.include = normal&lt;br/&gt;
qFileTest.miniDruid.isolate = long&lt;/p&gt;</comment>
                            <comment id="16523938" author="jcamacho" created="Tue, 26 Jun 2018 16:27:51 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;vihangk1&lt;/a&gt;. I copied them from above configuration properties in file, if you think they are not needed, I can delete them (to be clear, I have not explored how they are used and it is the first time I modify this file).&lt;/p&gt;</comment>
                            <comment id="16523951" author="jcamacho" created="Tue, 26 Jun 2018 16:36:12 +0000"  >&lt;p&gt;OK, got it, those are the groups... Uploaded a second patch where I removed the &apos;isolate&apos; part.&lt;/p&gt;</comment>
                            <comment id="16524033" author="vihangk1" created="Tue, 26 Jun 2018 17:33:39 +0000"  >&lt;p&gt;+1 I merged that patch manually to the master-mr2.properties on ptest server. It should start using batch size of 5 qfiles for TestMiniDruidCliDriver from the next run.&lt;/p&gt;</comment>
                            <comment id="16524039" author="jcamacho" created="Tue, 26 Jun 2018 17:42:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;vihangk1&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="16524040" author="vihangk1" created="Tue, 26 Jun 2018 17:42:41 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-19998&quot; title=&quot;Changing batch sizes and test driver specific configuration should be open to everyone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-19998&quot;&gt;HIVE-19998&lt;/a&gt; to expose this information to everyone.&lt;/p&gt;</comment>
                            <comment id="16524174" author="vihangk1" created="Tue, 26 Jun 2018 20:12:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcamachorodriguez&quot; class=&quot;user-hover&quot; rel=&quot;jcamachorodriguez&quot;&gt;jcamachorodriguez&lt;/a&gt; unfortunately, I had to revert this issue while woeking on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-19999&quot; title=&quot;Move precommit jobs to jdk 8&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-19999&quot;&gt;&lt;del&gt;HIVE-19999&lt;/del&gt;&lt;/a&gt;. The Ptest server was not coming up and I was reverting the recent changes to narrow down the root causes. Sorry about that. I will commit it again and resolve it once its done.&lt;/p&gt;</comment>
                            <comment id="16524197" author="jcamacho" created="Tue, 26 Jun 2018 20:44:24 +0000"  >&lt;p&gt;OK, no worries. Please, let me know when it goes in, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt; will need this one to be pushed.&lt;/p&gt;</comment>
                            <comment id="16524218" author="vihangk1" created="Tue, 26 Jun 2018 21:22:00 +0000"  >&lt;p&gt;I have made the changes to the file. I think the next precommit job should start using batches. If not, we may need to restart ptest server.&lt;/p&gt;</comment>
                            <comment id="16524298" author="jcamacho" created="Tue, 26 Jun 2018 22:48:29 +0000"  >&lt;p&gt;I think it was not picked up... &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/12172/consoleFull&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/12172/consoleFull&lt;/a&gt; It may need a restart, not sure.&lt;/p&gt;</comment>
                            <comment id="16524299" author="jcamacho" created="Tue, 26 Jun 2018 22:49:33 +0000"  >&lt;p&gt;I do see the new property values in the console though.&lt;/p&gt;</comment>
                            <comment id="16524307" author="vihangk1" created="Tue, 26 Jun 2018 23:02:00 +0000"  >&lt;p&gt;Ah.. I noticed that we missed add &lt;tt&gt;miniDruid&lt;/tt&gt; to this line &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;qFileTests = clientPositive miniMr clientNegative miniMrNegative hbasePositive miniTez spark miniLlap miniLlapLocal encryptedCli miniSparkOnYarn erasurecodingCli
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I added that it to that line. I think the next precommit job should pick it up.&lt;/p&gt;</comment>
                            <comment id="16524310" author="jcamacho" created="Tue, 26 Jun 2018 23:07:03 +0000"  >&lt;p&gt;Thanks! I&apos;ll push the change to the repo.&lt;/p&gt;</comment>
                            <comment id="16524383" author="vihangk1" created="Wed, 27 Jun 2018 00:34:08 +0000"  >&lt;p&gt;Looks like its working now. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2018-06-27 00:06:37,750 DEBUG [TestExecutor] ExecutionPhase.execute:98 PBatch: QFileTestBatch [batchId=189, size=5, driver=TestMiniDruidCliDriver, queryFilesProperty=qfile, name=189-TestMiniDruidCliDriver-druid_basic2.q-druidmini_mv.q-druidmini_test_alter.q-and-2-more, tests=[druid_basic2.q, druidmini_mv.q, druidmini_test_alter.q, druidmini_extractTime.q, druidmini_floorTime.q], isParallel=true, moduleName=itests/qtest]
2018-06-27 00:06:37,750 DEBUG [TestExecutor] ExecutionPhase.execute:98 PBatch: QFileTestBatch [batchId=190, size=5, driver=TestMiniDruidCliDriver, queryFilesProperty=qfile, name=190-TestMiniDruidCliDriver-druidmini_dynamic_partition.q-druidmini_masking.q-druidmini_expressions.q-and-2-more, tests=[druidmini_dynamic_partition.q, druidmini_masking.q, druidmini_expressions.q, druidmini_test1.q, druidmini_test_insert.q], isParallel=true, moduleName=itests/qtest]
2018-06-27 00:06:37,750 DEBUG [TestExecutor] ExecutionPhase.execute:98 PBatch: QFileTestBatch [batchId=191, size=2, driver=TestMiniDruidCliDriver, queryFilesProperty=qfile, name=191-TestMiniDruidCliDriver-druidmini_joins.q-druid_timestamptz.q, tests=[druidmini_joins.q, druid_timestamptz.q], isParallel=true, moduleName=itests/qtest]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16562941" author="vgarg" created="Tue, 31 Jul 2018 01:33:40 +0000"  >&lt;p&gt;This is released in Hive 3.1.0.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13168414">HIVE-19998</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12929215" name="HIVE-19997.01.patch" size="899" author="jcamachorodriguez" created="Tue, 26 Jun 2018 16:35:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3v94v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>