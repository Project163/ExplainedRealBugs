<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:54:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-883] URISyntaxException when partition value contains special chars</title>
                <link>https://issues.apache.org/jira/browse/HIVE-883</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When we try to insert into a partitioned table that the partition value contains special char &quot;:&quot;, we will see an exception&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;stack trace:
java.lang.IllegalArgumentException: java.net.URISyntaxException: Relative path in absolute URI: ts=2009-10-16 16:14:10
        at org.apache.hadoop.fs.Path.initialize(Path.java:140)
        at org.apache.hadoop.fs.Path.&amp;lt;init&amp;gt;(Path.java:126)
        at org.apache.hadoop.fs.Path.&amp;lt;init&amp;gt;(Path.java:45)
        at org.apache.hadoop.hive.ql.metadata.Partition.initialize(Partition.java:146)
        at org.apache.hadoop.hive.ql.metadata.Partition.&amp;lt;init&amp;gt;(Partition.java:123)
        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer$tableSpec.&amp;lt;init&amp;gt;(BaseSemanticAnalyzer.java:292)
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.getMetaData(SemanticAnalyzer.java:747)
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:4383)
        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:87)
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:251)
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:283)
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:251)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:166)
        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)
Caused by: java.net.URISyntaxException: Relative path in absolute URI: ts=2009-10-16 16:14:10
        at java.net.URI.checkPath(URI.java:1787)
        at java.net.URI.&amp;lt;init&amp;gt;(URI.java:735)
        at org.apache.hadoop.fs.Path.initialize(Path.java:137)
        ... 22 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12438359">HIVE-883</key>
            <summary>URISyntaxException when partition value contains special chars</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Oct 2009 05:51:53 +0000</created>
                <updated>Sat, 17 Dec 2011 00:05:28 +0000</updated>
                            <resolved>Mon, 26 Oct 2009 22:38:59 +0000</resolved>
                                    <version>0.4.0</version>
                    <version>0.5.0</version>
                                    <fixVersion>0.4.1</fixVersion>
                    <fixVersion>0.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12766840" author="zshao" created="Sat, 17 Oct 2009 06:36:23 +0000"  >&lt;p&gt;The problem is actually not with the space, but with the &quot;:&quot;.&lt;/p&gt;

&lt;p&gt;In URI, &quot;:&quot; is treated specially, and we won&apos;t be able to support &quot;:&quot; without changing hadoop code.&lt;/p&gt;</comment>
                            <comment id="12766973" author="zshao" created="Sat, 17 Oct 2009 22:18:04 +0000"  >&lt;p&gt;We can actually still do it, by escaping the key and value before creating the directory name.&lt;/p&gt;</comment>
                            <comment id="12766974" author="zshao" created="Sat, 17 Oct 2009 22:31:31 +0000"  >&lt;p&gt;This should apply to both branch-0.4 and trunk.&lt;/p&gt;</comment>
                            <comment id="12766975" author="zshao" created="Sat, 17 Oct 2009 22:35:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-883&quot; title=&quot;URISyntaxException when partition value contains special chars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-883&quot;&gt;&lt;del&gt;HIVE-883&lt;/del&gt;&lt;/a&gt;.2.patch: the test case drops the table at the end now.&lt;/p&gt;</comment>
                            <comment id="12766986" author="prasadc" created="Sat, 17 Oct 2009 23:57:14 +0000"  >&lt;p&gt;we need to support decode (ie. get the partition key values from hdfs path name). check Warehouse.mapeSpecFromName(). This is used while partition pruning and also in &apos;msck repair&apos; whose patch is pending.&lt;/p&gt;
</comment>
                            <comment id="12766988" author="prasadc" created="Sun, 18 Oct 2009 00:10:40 +0000"  >&lt;p&gt;ignore my comment above. this patch does contain decode() as well.&lt;/p&gt;

&lt;p&gt;.bq&lt;br/&gt;
// NOTE: This is for generating the internal path name for partitions. Users&lt;br/&gt;
// should always use the MetaStore API to get the path name for a partition.&lt;br/&gt;
// Users should not directly take partition values and turn it into a path &lt;br/&gt;
// name by themselves, because the logic below may change in the future.&lt;/p&gt;

&lt;p&gt;lot of people already do this conversion currently. i suppose this doesn&apos;t affect as long as their partitions do not contain these special characters.&lt;/p&gt;

&lt;p&gt;let&apos;s keep this open for few days to see if any one has concerns.&lt;/p&gt;</comment>
                            <comment id="12766989" author="prasadc" created="Sun, 18 Oct 2009 00:11:42 +0000"  >&lt;p&gt;also, can you add describe partition in the test?&lt;/p&gt;</comment>
                            <comment id="12767680" author="zshao" created="Tue, 20 Oct 2009 04:03:48 +0000"  >&lt;p&gt;Added &quot;describe extended&quot;&lt;/p&gt;</comment>
                            <comment id="12768186" author="zshao" created="Wed, 21 Oct 2009 11:49:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-883&quot; title=&quot;URISyntaxException when partition value contains special chars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-883&quot;&gt;&lt;del&gt;HIVE-883&lt;/del&gt;&lt;/a&gt;.4.patch: This one fixes compilation error with hadoop 0.17, and also fixes the unit tests.&lt;/p&gt;</comment>
                            <comment id="12770199" author="namit" created="Mon, 26 Oct 2009 21:12:03 +0000"  >&lt;p&gt;committed in 0.4&lt;/p&gt;</comment>
                            <comment id="12770245" author="namit" created="Mon, 26 Oct 2009 22:38:59 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12422463" name="HIVE-883.1.patch" size="8781" author="zshao" created="Sat, 17 Oct 2009 22:31:31 +0000"/>
                            <attachment id="12422464" name="HIVE-883.2.patch" size="8985" author="zshao" created="Sat, 17 Oct 2009 22:35:28 +0000"/>
                            <attachment id="12422646" name="HIVE-883.3.patch" size="10164" author="zshao" created="Tue, 20 Oct 2009 04:03:48 +0000"/>
                            <attachment id="12422991" name="HIVE-883.4.patch" size="10577" author="zshao" created="Fri, 23 Oct 2009 03:50:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lc8v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122634</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>