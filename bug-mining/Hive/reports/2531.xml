<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:23:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-2390] Add UNIONTYPE serialization support to LazyBinarySerDe</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2390</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When the union type was introduced, full support for it wasn&apos;t provided.  For instance, when working with a union that gets passed to LazyBinarySerde: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.RuntimeException: Unrecognized type: UNION
	at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serialize(LazyBinarySerDe.java:468)
	at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serializeStruct(LazyBinarySerDe.java:230)
	at org.apache.hadoop.hive.serde2.lazybinary.LazyBinarySerDe.serialize(LazyBinarySerDe.java:184)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12519221">HIVE-2390</key>
            <summary>Add UNIONTYPE serialization support to LazyBinarySerDe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="suma.shivaprasad">Suma Shivaprasad</assignee>
                                    <reporter username="jghoman">Jakob Homan</reporter>
                        <labels>
                            <label>TODOC14</label>
                            <label>uniontype</label>
                    </labels>
                <created>Thu, 18 Aug 2011 00:50:39 +0000</created>
                <updated>Thu, 13 Nov 2014 19:39:35 +0000</updated>
                            <resolved>Tue, 9 Sep 2014 09:07:13 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>7</votes>
                                    <watches>16</watches>
                                                                                                                <comments>
                            <comment id="13086714" author="jghoman" created="Thu, 18 Aug 2011 00:55:55 +0000"  >&lt;p&gt;Part of the problem is that the term union has been overloaded.  In SQL it means the actual set union of two compatible data types, whereas in Avro and programming languages it means one value that can be at any one time an instance of two or different types.  Union was added as a full-on, first-class type by its inclusion in ObjectInspector&apos;s Category enum.  Is there any reason not to expand this use to be more along the line of programming language&apos;s take on unions?  If so, it should be marked as not really being a first-class type.  If not, support for unions in all the serdes, in the grammar and in the documentation should be provided.&lt;/p&gt;

&lt;p&gt;I would lobby for expanding its support as it&apos;s an important type in Avro and we&apos;re quite hobbled by the inability to manipulate unioned values. (Avro handles nullable values by unioning them with their type T and null, but Haivvreo transparently converts these just to the type and returns null where appropriate. The problem lies in actual unions of non-null types, which are less frequent but still valid.)&lt;/p&gt;
</comment>
                            <comment id="13086715" author="jghoman" created="Thu, 18 Aug 2011 00:56:37 +0000"  >&lt;p&gt;Changing name of JIRA to be more representative of what needs to be done.  If reaction is positive, will open subtasks for individual items.&lt;/p&gt;</comment>
                            <comment id="13086777" author="amareshwari" created="Thu, 18 Aug 2011 03:45:55 +0000"  >&lt;p&gt;+1. I agree that when Union type was added, complete support for it was not added. We should extend its usage in all the serdes.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Part of the problem is that the term union has been overloaded. &lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The type is called &apos;uniontype&apos; in Hive to resolve ambiguities.&lt;/p&gt;</comment>
                            <comment id="13758922" author="navis" created="Thu, 5 Sep 2013 09:15:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4765&quot; title=&quot;Improve HBase bulk loading facility&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4765&quot;&gt;HIVE-4765&lt;/a&gt; included LazyBinaryUnion type. Could you check that?&lt;/p&gt;</comment>
                            <comment id="13880067" author="chewiebacca" created="Thu, 23 Jan 2014 16:49:50 +0000"  >&lt;p&gt;I wanted to see about the current status, and if there are any ETAs for resolution?  I can assure there are quite a few efforts needing to qualify on data within uniontypes in Hive (Impala, etc), as soon as possible.  I&apos;ve been informed my effort will not accept uniontype usage (with more than one non-null type) unless there is built-in Hive support (which is very unfortunate, but not without point)... meaning the types have to be split into separate fields, which obviously is less semantically correct, more clunky (in the Avro model and Java), and provides no benefit other than a workaround for clean query ability.&lt;/p&gt;

&lt;p&gt;Something else that needs addressed is how to reference nested fields / structs / etc in the query.  Currently &apos;.&apos; (period) is used, can this be kept for union?  Ambiguity can arise if more than one type has the same field, in all other cases it can be implicitly unambiguous.  This could actually be validated before query execution.  When more than one type could have the same field, what would the syntax be? Possibly:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;unionobject.object.[2]unionobject.unionobject.[1]unionobject.object.....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the above example, any ambiguous object types being reference can be qualified by the int value of the type in square brackets [].&lt;/p&gt;</comment>
                            <comment id="14118197" author="suma.shivaprasad" created="Tue, 2 Sep 2014 13:37:04 +0000"  >&lt;p&gt;I have a patch for this ready. Will be submitting this shortly.&lt;/p&gt;</comment>
                            <comment id="14124249" author="hiveqa" created="Sat, 6 Sep 2014 01:55:57 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12666766/HIVE-2390.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12666766/HIVE-2390.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6171 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_lazyserde
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/660/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-660/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-660/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12666766&lt;/p&gt;</comment>
                            <comment id="14124734" author="hiveqa" created="Sun, 7 Sep 2014 01:47:02 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667013/HIVE-2390.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667013/HIVE-2390.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6184 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestHBaseCliDriver.testCliDriver_hbase_handler_snapshot
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/674/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-674/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-674/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667013&lt;/p&gt;</comment>
                            <comment id="14125210" author="amareshwari" created="Mon, 8 Sep 2014 04:36:44 +0000"  >&lt;p&gt;+1 Changes look fine to me.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=suma.shivaprasad&quot; class=&quot;user-hover&quot; rel=&quot;suma.shivaprasad&quot;&gt;suma.shivaprasad&lt;/a&gt;, Test failure seems unrelated to me. Can you look into and confirm?&lt;/p&gt;</comment>
                            <comment id="14125239" author="suma.shivaprasad" created="Mon, 8 Sep 2014 05:58:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amareshwari&quot; class=&quot;user-hover&quot; rel=&quot;amareshwari&quot;&gt;amareshwari&lt;/a&gt; Yes Test Case failure is unrelated to the patch&lt;/p&gt;</comment>
                            <comment id="14125738" author="thejas" created="Mon, 8 Sep 2014 16:48:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=suma.shivaprasad&quot; class=&quot;user-hover&quot; rel=&quot;suma.shivaprasad&quot;&gt;suma.shivaprasad&lt;/a&gt; Can you please add information to the release notes section (click on edit jira to find it), that can be used to document the change from this jira in wiki ?&lt;/p&gt;</comment>
                            <comment id="14126781" author="amareshwari" created="Tue, 9 Sep 2014 09:07:13 +0000"  >&lt;p&gt;I just committed this. Thanks Suma!&lt;/p&gt;</comment>
                            <comment id="14128124" author="cwsteinbach" created="Wed, 10 Sep 2014 06:16:18 +0000"  >&lt;p&gt;I updated the description of this ticket to accurately reflect the change that was made in this patch.&lt;/p&gt;

&lt;p&gt;My impression is that this patch doesn&apos;t really change the situation in Hive with respect to UNIONTYPEs &amp;#8211; this feature is still unusable. If I&apos;m wrong about this I would appreciate someone setting me straight.&lt;/p&gt;</comment>
                            <comment id="14128486" author="suma.shivaprasad" created="Wed, 10 Sep 2014 13:58:37 +0000"  >&lt;p&gt;Carl,&lt;/p&gt;

&lt;p&gt;I am working on a related feature to support UNIONTYPE in ThriftDeserializer as well.&lt;br/&gt;
Since I am a fairly new contributor to Hive and not aware of the existing issues in UNIONTYPE feature, if someone could identify the missing pieces and raise jiras, i can take a stab at it.&lt;/p&gt;</comment>
                            <comment id="14210206" author="thejas" created="Thu, 13 Nov 2014 19:39:35 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12738423">HIVE-7936</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12527562">HIVE-2508</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12738423">HIVE-7936</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12427012">HIVE-537</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12527873">HIVE-2517</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12667013" name="HIVE-2390.1.patch" size="29402" author="suma.shivaprasad" created="Sat, 6 Sep 2014 12:29:48 +0000"/>
                            <attachment id="12666766" name="HIVE-2390.patch" size="22162" author="suma.shivaprasad" created="Fri, 5 Sep 2014 09:25:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljsf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123856</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Adds UnionType support in LazyBinarySerde</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>