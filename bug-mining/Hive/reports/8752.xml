<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:26:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-28538] Locale-related test discrepancies in environments with JDK &gt;= 11 </title>
                <link>https://issues.apache.org/jira/browse/HIVE-28538</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;b&gt;Issue:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Post JDK11, there are test failures occurring locally in the following test classes:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;tt&gt;TestGenericUDFFromUnixTimeEvaluate&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;TestMiniLlapLocalCliDriver.udf_date_format.q&lt;/tt&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;b&gt;Error:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;b&gt;from_unixtime(1689930780, yyyy-MM-dd HH:mmaa) sessionZone=Etc/GMT, formatter=SIMPLE expected:&amp;lt;2023-07-21 09:13&lt;span class=&quot;error&quot;&gt;&amp;#91;AM&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;2023-07-21 09:13&lt;span class=&quot;error&quot;&gt;&amp;#91;am&amp;#93;&lt;/span&gt;&amp;gt;&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Root Cause Analysis (RCA):&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;In JDK11, changes were made to the Java locale handling as documented in the following issues:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8145136&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JDK-8145136&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://bugs.openjdk.org/browse/JDK-8211985&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JDK-8211985&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;These changes result in different locale behaviors. This issue does not occur in Jenkins because the test cases are written according to the&#160;&lt;tt&gt;en_US&lt;/tt&gt;&#160;locale. However, when run locally, the locale may differ (e.g.,&#160;&lt;tt&gt;en_IN&lt;/tt&gt;), causing discrepancies. For instance,&#160;&lt;tt&gt;en_IN&lt;/tt&gt;&#160;would expect&#160;&lt;tt&gt;am/pm&lt;/tt&gt;&#160;while the tests expect&#160;&lt;tt&gt;AM/PM&lt;/tt&gt;, leading to failures.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;To ensure consistent behavior across both local and Jenkins environments, pass the locale in&#160;&lt;tt&gt;&amp;lt;maven.test.jvm.args&amp;gt;&lt;/tt&gt;&#160;to align both environments to&#160;&lt;tt&gt;en_US.&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This will ensure that all tests run with the&#160;&lt;tt&gt;en_US&lt;/tt&gt;&#160;locale, mitigating locale-related test failures.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Additional Notes:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;There may be other test failures not yet captured due to different locales in local environments. Ensure all tests run with the&#160;&lt;tt&gt;en_US&lt;/tt&gt;&#160;locale to identify and resolve any further issues.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13593291">HIVE-28538</key>
            <summary>Locale-related test discrepancies in environments with JDK &gt;= 11 </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shivjha">shivangi</assignee>
                                    <reporter username="shivjha">shivangi</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 26 Sep 2024 04:45:51 +0000</created>
                <updated>Tue, 29 Jul 2025 14:51:43 +0000</updated>
                            <resolved>Mon, 28 Oct 2024 12:27:08 +0000</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17884906" author="zabetak" created="Thu, 26 Sep 2024 07:39:47 +0000"  >&lt;p&gt;This is similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-28381&quot; title=&quot;JDK17: Change in behaviour of DAY_OF_YEAR in timestamp &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-28381&quot;&gt;&lt;del&gt;HIVE-28381&lt;/del&gt;&lt;/a&gt;. How are these two related?&lt;/p&gt;</comment>
                            <comment id="17884908" author="zabetak" created="Thu, 26 Sep 2024 07:48:43 +0000"  >&lt;p&gt;This means that Hive users that will upgrade to JDK11 may observe behavior changes when using the SQL functions outlined. Many thanks for this analysis, it will be helpful for people doing upgrades.&lt;/p&gt;</comment>
                            <comment id="17885782" author="JIRAUSER302604" created="Mon, 30 Sep 2024 03:06:37 +0000"  >&lt;p&gt;Once the upgrade will be done, there will be a difference in the local environment behaviour as well as the behaviour in jenkins. Tests like&#160;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;TestGenericUDFFromUnixTimeEvaluate will start failing in local but will not be captured in jenkins&lt;/tt&gt;&lt;br/&gt;
I will be adding the patch for this Jira, to ensure nothing breaks locally or at jenkins level&lt;/p&gt;

&lt;p&gt;It is in the same test class &#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-28381&quot; title=&quot;JDK17: Change in behaviour of DAY_OF_YEAR in timestamp &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-28381&quot;&gt;&lt;del&gt;HIVE-28381&lt;/del&gt;&lt;/a&gt;, but the issue is different as that is dealing with DAY_OF_MONTH, this is centric to locale creating difference between the casing of AM/PM&lt;/p&gt;</comment>
                            <comment id="17893425" author="zabetak" created="Mon, 28 Oct 2024 12:27:08 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/hive/commit/57f720da75ba5c7416f303730c7a03fae3a08655&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/57f720da75ba5c7416f303730c7a03fae3a08655&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the PR &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shivjha&quot; class=&quot;user-hover&quot; rel=&quot;shivjha&quot;&gt;shivjha&lt;/a&gt; !&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13586478">HIVE-28381</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rme0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>