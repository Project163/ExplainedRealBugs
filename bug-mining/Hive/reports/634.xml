<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:58:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-1884] Potential risk of resource leaks in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1884</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;h3&gt;&lt;a name=&quot;Therearecoupleofresourceleaks.&quot;&gt;&lt;/a&gt;There are couple of resource leaks.&lt;/h3&gt;
&lt;h4&gt;&lt;a name=&quot;Forexample%2C&quot;&gt;&lt;/a&gt;For example,&lt;/h4&gt;

&lt;p&gt;In CliDriver.java, Method :- processReader() the buffered reader is not closed.&lt;/p&gt;

&lt;h3&gt;&lt;a name=&quot;Alsotherearerisk%28s%29ofresource%28s%29gettingleaked%2Cinsuchcasesweneedtorefactorthecodetomoveclosingofresourcesinfinallyblock.&quot;&gt;&lt;/a&gt;Also there are risk(s) of  resource(s) getting leaked , in such cases we need to re factor the code to move closing of resources in finally block.&lt;/h3&gt;

&lt;h4&gt;&lt;a name=&quot;ForExample%3A&quot;&gt;&lt;/a&gt;For Example :- &lt;/h4&gt;

&lt;p&gt;In Throttle.java   Method:- checkJobTracker() , the following code snippet might cause resource leak.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;InputStream in = url.openStream();
in.read(buffer);
in.close();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Ideally and as per the best coding practices it should be like below&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
InputStream in=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;   {
        in = url.openStream();
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; numRead = in.read(buffer);
}
&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
       IOUtils.closeStream(in);
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similar cases, were found in ExplainTask.java, DDLTask.java etc.Need to re factor all such occurrences.&lt;/p&gt;

</description>
                <environment>&lt;p&gt;Hive 0.6.0, Hadoop 0.20.1&lt;/p&gt;

&lt;p&gt;SUSE Linux Enterprise Server 11 (i586)&lt;/p&gt;</environment>
        <key id="12494701">HIVE-1884</key>
            <summary>Potential risk of resource leaks in Hive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chinnalalam">Chinna Rao Lalam</assignee>
                                    <reporter username="mosikri">Mohit Sikri</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Jan 2011 09:52:48 +0000</created>
                <updated>Fri, 16 Dec 2011 23:56:25 +0000</updated>
                            <resolved>Wed, 20 Jul 2011 19:54:41 +0000</resolved>
                                    <version>0.3.0</version>
                    <version>0.4.0</version>
                    <version>0.4.1</version>
                    <version>0.5.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>CLI</component>
                    <component>Metastore</component>
                    <component>Query Processor</component>
                    <component>Server Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="12977889" author="ashutoshc" created="Wed, 5 Jan 2011 18:10:53 +0000"  >&lt;p&gt;Good work Mohit to identify these potential resource leaks. How did you find these leaks? Through manual code inspection or through some tool/lib ? Looks like later.&lt;/p&gt;</comment>
                            <comment id="12978118" author="mosikri" created="Thu, 6 Jan 2011 04:32:17 +0000"  >&lt;p&gt;Thanks Ashutosh, well it is both ways, team review and couple of static analysis tools, I will work on it and provide the patch.&lt;/p&gt;</comment>
                            <comment id="12985830" author="namit" created="Mon, 24 Jan 2011 17:27:26 +0000"  >&lt;p&gt;I am not surprised - I am not aware of any long hive server deployment, so this code patch has not been tested at all.&lt;/p&gt;

&lt;p&gt;Do you want to add a stress test, which runs for a long time: say 10 hours or so ?&lt;br/&gt;
It may not be practical to run it before every commit - but we can schedule it on hudson, and monitor the results there&lt;/p&gt;</comment>
                            <comment id="12985831" author="namit" created="Mon, 24 Jan 2011 17:28:13 +0000"  >&lt;p&gt;Also, take a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1908&quot; title=&quot;FileHandler leak on partial iteration of the resultset. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1908&quot;&gt;&lt;del&gt;HIVE-1908&lt;/del&gt;&lt;/a&gt;, it is also looking at a similar problem&lt;/p&gt;</comment>
                            <comment id="12986260" author="nzhang" created="Tue, 25 Jan 2011 07:37:39 +0000"  >&lt;p&gt;Mohit, there are conflicts when applying the patch to the current trunk. Can you regenerate the patch based on trunk?&lt;/p&gt;</comment>
                            <comment id="12986837" author="cwsteinbach" created="Wed, 26 Jan 2011 03:57:51 +0000"  >&lt;p&gt;Patch needs to be rebased.&lt;/p&gt;</comment>
                            <comment id="13036187" author="jiraposter@reviews.apache.org" created="Thu, 19 May 2011 13:43:47 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/758/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/758/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Potential risk of resource leaks in Hive&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; title=&quot;Potential risk of resource leaks in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1884&quot;&gt;&lt;del&gt;HIVE-1884&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1884&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 1124130 &lt;br/&gt;
  trunk/contrib/src/java/org/apache/hadoop/hive/contrib/util/typedbytes/TypedBytesWritableInput.java 1124130 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 1124130 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileInputFormat.java 1124130 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/758/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/758/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;All tests passed&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;chinna&lt;/p&gt;
</comment>
                            <comment id="13061492" author="jvs" created="Thu, 7 Jul 2011 18:57:40 +0000"  >&lt;p&gt;Sorry, this one has gone stale again...could you rebase against trunk?&lt;/p&gt;</comment>
                            <comment id="13062387" author="chinnalalam" created="Sat, 9 Jul 2011 14:20:32 +0000"  >&lt;p&gt;patch is rebased against trunk.&lt;/p&gt;</comment>
                            <comment id="13063924" author="chinnalalam" created="Tue, 12 Jul 2011 14:15:31 +0000"  >&lt;p&gt; This one has gone stale again... i will rebase against trunk and i will open a Review Board request&lt;/p&gt;</comment>
                            <comment id="13064589" author="jiraposter@reviews.apache.org" created="Wed, 13 Jul 2011 14:28:59 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1098/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;There are couple of resource leaks.&lt;br/&gt;
For example,&lt;br/&gt;
In CliDriver.java, Method :- processReader() the buffered reader is not closed.&lt;/p&gt;

&lt;p&gt;Also there are risk(s) of resource(s) getting leaked , in such cases refactored the code to move closing of resources in finally block.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; title=&quot;Potential risk of resource leaks in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1884&quot;&gt;&lt;del&gt;HIVE-1884&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1884&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 1145950 &lt;br/&gt;
  trunk/contrib/src/java/org/apache/hadoop/hive/contrib/util/typedbytes/TypedBytesWritableInput.java 1145950 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 1145950 &lt;br/&gt;
  trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileInputFormat.java 1145950 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1098/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;All unit tests passed&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;chinna&lt;/p&gt;
</comment>
                            <comment id="13064592" author="chinnalalam" created="Wed, 13 Jul 2011 14:29:25 +0000"  >&lt;p&gt;Open a Review Board request&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1098&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13067284" author="jvs" created="Mon, 18 Jul 2011 20:46:31 +0000"  >&lt;p&gt;Comments added on Review Board.&lt;/p&gt;</comment>
                            <comment id="13067286" author="jiraposter@reviews.apache.org" created="Mon, 18 Jul 2011 20:46:59 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1098/#review1101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/#review1101&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1098/#comment2233&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/#comment2233&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Rename this to rc to avoid confusion with the processReader method name.&lt;/p&gt;



&lt;p&gt;trunk/contrib/src/java/org/apache/hadoop/hive/contrib/util/typedbytes/TypedBytesWritableInput.java&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1098/#comment2234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/#comment2234&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    Fix indentation for the try block.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;John&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-07-13 14:28:47, chinna wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1098/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-07-13 14:28:47)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;There are couple of resource leaks.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;For example,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;In CliDriver.java, Method :- processReader() the buffered reader is not closed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Also there are risk(s) of resource(s) getting leaked , in such cases refactored the code to move closing of resources in finally block.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; title=&quot;Potential risk of resource leaks in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1884&quot;&gt;&lt;del&gt;HIVE-1884&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1884&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/contrib/src/java/org/apache/hadoop/hive/contrib/util/typedbytes/TypedBytesWritableInput.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileInputFormat.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1098/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All unit tests passed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;chinna&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13067638" author="jiraposter@reviews.apache.org" created="Tue, 19 Jul 2011 11:41:57 +0000"  >

&lt;blockquote&gt;&lt;p&gt;On 2011-07-18 20:45:08, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java, line 392&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1098/diff/1/?file=25035#file25035line392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/diff/1/?file=25035#file25035line392&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Rename this to rc to avoid confusion with the processReader method name.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;processReader variable name renamed to rc&lt;/p&gt;


&lt;blockquote&gt;&lt;p&gt;On 2011-07-18 20:45:08, John Sichi wrote:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; trunk/contrib/src/java/org/apache/hadoop/hive/contrib/util/typedbytes/TypedBytesWritableInput.java, line 385&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt; &amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/1098/diff/1/?file=25036#file25036line385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/diff/1/?file=25036#file25036line385&lt;/a&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;gt;     Fix indentation for the try block.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;properly formatted the try block&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;chinna&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1098/#review1101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/#review1101&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;


&lt;p&gt;On 2011-07-13 14:28:47, chinna wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/1098/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-07-13 14:28:47)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive and John Sichi.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;There are couple of resource leaks.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;For example,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;In CliDriver.java, Method :- processReader() the buffered reader is not closed.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Also there are risk(s) of resource(s) getting leaked , in such cases refactored the code to move closing of resources in finally block.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; title=&quot;Potential risk of resource leaks in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1884&quot;&gt;&lt;del&gt;HIVE-1884&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-1884&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/contrib/src/java/org/apache/hadoop/hive/contrib/util/typedbytes/TypedBytesWritableInput.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileInputFormat.java 1145950 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1098/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1098/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;All unit tests passed&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;chinna&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13068179" author="jvs" created="Wed, 20 Jul 2011 06:47:51 +0000"  >&lt;p&gt;+1.  Will commit when tests pass.&lt;/p&gt;</comment>
                            <comment id="13068584" author="jvs" created="Wed, 20 Jul 2011 19:54:41 +0000"  >&lt;p&gt;Committed.  Thanks Chinna!&lt;/p&gt;</comment>
                            <comment id="13068745" author="hudson" created="Thu, 21 Jul 2011 00:45:05 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #837 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/837/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/837/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1884&quot; title=&quot;Potential risk of resource leaks in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1884&quot;&gt;&lt;del&gt;HIVE-1884&lt;/del&gt;&lt;/a&gt;. Potential risk of resource leaks in Hive&lt;br/&gt;
(Chinna Rao Lalam via jvs)&lt;/p&gt;

&lt;p&gt;jvs : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148921&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1148921&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/RCFileInputFormat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/contrib/src/java/org/apache/hadoop/hive/contrib/util/typedbytes/TypedBytesWritableInput.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/cli/src/java/org/apache/hadoop/hive/cli/CliDriver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13100250" author="fdiaconeasa" created="Thu, 8 Sep 2011 12:08:18 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Could this lead to input files being ignored?&lt;/p&gt;

&lt;p&gt;We have a query in which we are doing several &quot;UNION ALL&quot;. Apparently, sometimes Hive ignores one of the SELECTs. Actually not sure if it ignores the SELECT or it doesn&apos;t see the input files for that select. There are 6 queries which are united using UNION ALL.&lt;/p&gt;

&lt;p&gt;This happened several times with different SELECTs from that big query and the query i valid. This leads me to think it&apos;s either related to this issue or a memory leak.&lt;/p&gt;

&lt;p&gt;Setup: Hadoop 0.20.1, Hive 0.6, Debian 5.0 x64&lt;/p&gt;

&lt;p&gt;Thank you,&lt;/p&gt;

&lt;p&gt;Flo&lt;/p&gt;</comment>
                            <comment id="13100257" author="fdiaconeasa" created="Thu, 8 Sep 2011 12:18:35 +0000"  >&lt;p&gt;Hive is running in server mode as daemon.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469152" name="HIVE-1884.1.PATCH" size="18493" author="bharathr" created="Mon, 24 Jan 2011 13:33:35 +0000"/>
                            <attachment id="12479772" name="HIVE-1884.2.patch" size="17528" author="chinnalalam" created="Thu, 19 May 2011 13:34:33 +0000"/>
                            <attachment id="12485818" name="HIVE-1884.3.patch" size="18415" author="chinnalalam" created="Sat, 9 Jul 2011 14:19:17 +0000"/>
                            <attachment id="12486312" name="HIVE-1884.4.patch" size="18004" author="chinnalalam" created="Wed, 13 Jul 2011 14:24:05 +0000"/>
                            <attachment id="12486994" name="HIVE-1884.5.patch" size="18943" author="chinnalalam" created="Tue, 19 Jul 2011 11:36:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>35816</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lhgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123480</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>