<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:29:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-9482] Hive parquet timestamp compatibility</title>
                <link>https://issues.apache.org/jira/browse/HIVE-9482</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;In current Hive implementation, timestamps are stored in UTC (converted from current timezone), based on original parquet timestamp spec.&lt;/p&gt;

&lt;p&gt;However, we find this is not compatibility with other tools, and after some investigation it is not the way of the other file formats, or even some databases (Hive Timestamp is more equivalent of &apos;timestamp without timezone&apos; datatype).&lt;/p&gt;

&lt;p&gt;This is the first part of the fix, which will restore compatibility with parquet-timestamp files generated by external tools by skipping conversion on reading.&lt;/p&gt;

&lt;p&gt;Later fix will change the write path to not convert, and stop the read-conversion even for files written by Hive itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12770510">HIVE-9482</key>
            <summary>Hive parquet timestamp compatibility</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="szehon">Szehon Ho</assignee>
                                    <reporter username="szehon">Szehon Ho</reporter>
                        <labels>
                    </labels>
                <created>Tue, 27 Jan 2015 22:57:23 +0000</created>
                <updated>Wed, 16 Nov 2016 18:16:43 +0000</updated>
                            <resolved>Fri, 30 Jan 2015 07:49:54 +0000</resolved>
                                    <version>0.15.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>File Formats</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14294384" author="szehon" created="Tue, 27 Jan 2015 23:12:02 +0000"  >&lt;p&gt;Attaching the new data file which is binary and cannot be displayed in the patch.  This should go in /data/files&lt;/p&gt;</comment>
                            <comment id="14295528" author="szehon" created="Wed, 28 Jan 2015 18:09:37 +0000"  >&lt;p&gt;Attaching again to trigger test&lt;/p&gt;</comment>
                            <comment id="14295755" author="szehon" created="Wed, 28 Jan 2015 20:10:05 +0000"  >&lt;p&gt;Address review comments.&lt;/p&gt;</comment>
                            <comment id="14295905" author="hiveqa" created="Wed, 28 Jan 2015 21:40:33 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12695072/HIVE-9482.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12695072/HIVE-9482.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 7406 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_external_time
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_join38
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_subquery_in
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2554/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2554/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2554/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2554/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2554/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2554/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12695072 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14295911" author="szehon" created="Wed, 28 Jan 2015 21:46:26 +0000"  >&lt;p&gt;Test failures dont look related (these spark tests also failed in other builds). &lt;/p&gt;

&lt;p&gt;parquet_external_time will fail until the attached parquet file is checked in (/data/files/parquet_external_time.parq).&lt;/p&gt;</comment>
                            <comment id="14295955" author="brocknoland" created="Wed, 28 Jan 2015 22:15:26 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14298321" author="szehon" created="Fri, 30 Jan 2015 07:49:54 +0000"  >&lt;p&gt;Committed to trunk.  Thanks Brock for review.&lt;/p&gt;</comment>
                            <comment id="14298322" author="szehon" created="Fri, 30 Jan 2015 07:50:30 +0000"  >&lt;p&gt;Adds property &quot;hive.parquet.timestamp.skip.conversion&quot;, which needs to be documented.&lt;/p&gt;</comment>
                            <comment id="14299588" author="szehon" created="Sat, 31 Jan 2015 02:39:06 +0000"  >&lt;p&gt;Done, added new section for &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Parquet&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Parquet&lt;/a&gt; and mention this property.&lt;/p&gt;</comment>
                            <comment id="14299695" author="lefty@hortonworks.com" created="Sat, 31 Jan 2015 06:38:13 +0000"  >&lt;p&gt;Got your back, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt; &amp;#8211; I changed the version number from 0.14.0 to 1.2.0 (probably a copy-&amp;amp;-paste error).&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.parquet.timestamp.skip.conversion&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;hive.parquet.timestamp.skip.conversion &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14548901" author="sushanth" created="Mon, 18 May 2015 19:53:13 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                            <comment id="15393035" author="lirui" created="Tue, 26 Jul 2016 01:56:43 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt;, is there a follow on task for the write path?&lt;/p&gt;</comment>
                            <comment id="15671191" author="vitalii" created="Wed, 16 Nov 2016 18:16:43 +0000"  >&lt;p&gt;Why this hive.parquet.timestamp.skip.conversion option is enabled by default? &lt;br/&gt;
Since according &lt;a href=&quot;https://github.com/Parquet/parquet-format/blob/master/LogicalTypes.md#timestamp_millis&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;parquet spec&lt;/a&gt;, parquet files don&apos;t keep local timezone. And we cann&apos;t distinguish from file what was the value of that option while parquet file was generating.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12694054">HIVE-6394</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12695072" name="HIVE-9482.2.patch" size="29180" author="szehon" created="Wed, 28 Jan 2015 20:10:05 +0000"/>
                            <attachment id="12695037" name="HIVE-9482.patch" size="29093" author="szehon" created="Wed, 28 Jan 2015 18:09:37 +0000"/>
                            <attachment id="12694875" name="HIVE-9482.patch" size="29093" author="szehon" created="Tue, 27 Jan 2015 23:08:55 +0000"/>
                            <attachment id="12694876" name="parquet_external_time.parq" size="230" author="szehon" created="Tue, 27 Jan 2015 23:12:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 1 week ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24vbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>