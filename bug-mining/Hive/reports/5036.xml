<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:49:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-15274] DruidSelectQueryRecordReader uses wrong value for timestamp</title>
                <link>https://issues.apache.org/jira/browse/HIVE-15274</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;issuing select * from table will return wrong time column.&lt;br/&gt;
expected results&lt;br/&gt;
 &#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9516;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9488;&lt;br/&gt;
&#9474; __time                                  &#9474; dimension1 &#9474; metric1 &#9474;&lt;br/&gt;
&#9500;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9532;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9508;&lt;br/&gt;
&#9474; Wed Dec 31 2014 16:00:00 GMT-0800 (PST) &#9474; value1     &#9474; 1       &#9474;&lt;br/&gt;
&#9474; Wed Dec 31 2014 16:00:00 GMT-0800 (PST) &#9474; value1.1   &#9474; 1       &#9474;&lt;br/&gt;
&#9474; Sun May 31 2015 19:00:00 GMT-0700 (PDT) &#9474; value2     &#9474; 20.5    &#9474;&lt;br/&gt;
&#9474; Sun May 31 2015 19:00:00 GMT-0700 (PDT) &#9474; value2.1   &#9474; 32      &#9474;&lt;br/&gt;
&#9492;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9524;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9472;&#9496;&lt;/p&gt;

&lt;p&gt;returned result&lt;/p&gt;

&lt;p&gt;2014-12-31 19:00:00	value1	1.0&lt;br/&gt;
2014-12-31 19:00:00	value1.1	1.0&lt;br/&gt;
2014-12-31 19:00:00	value2	20.5&lt;br/&gt;
2014-12-31 19:00:00	value2.1	32.0&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13022915">HIVE-15274</key>
            <summary>DruidSelectQueryRecordReader uses wrong value for timestamp</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jcamacho">Jes&#250;s Camacho Rodr&#237;guez</assignee>
                                    <reporter username="bslim">Slim Bouguerra</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Nov 2016 16:15:48 +0000</created>
                <updated>Tue, 27 Feb 2024 22:23:54 +0000</updated>
                            <resolved>Wed, 23 Nov 2016 20:13:13 +0000</resolved>
                                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Druid integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15690628" author="jcamacho" created="Wed, 23 Nov 2016 16:28:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;bslim&lt;/a&gt;, could you verify that the attached patch fixes the issue with the time column repetition? Thanks&lt;/p&gt;</comment>
                            <comment id="15690640" author="bslim" created="Wed, 23 Nov 2016 16:33:50 +0000"  >&lt;p&gt;i will verify that, was thinking maybe be we can add some unit test to catch this ?&lt;/p&gt;</comment>
                            <comment id="15690645" author="jcamacho" created="Wed, 23 Nov 2016 16:36:39 +0000"  >&lt;p&gt;I wanted to share the fix with you so you could validate it running against Druid, but I am modifying &lt;em&gt;TestDruidSerDe&lt;/em&gt; (all Select results in that test contained the same timestamp),to cover this case.&lt;/p&gt;</comment>
                            <comment id="15690683" author="jcamacho" created="Wed, 23 Nov 2016 16:49:09 +0000"  >&lt;p&gt;Added testcase for this specific error.&lt;/p&gt;</comment>
                            <comment id="15691151" author="hiveqa" created="Wed, 23 Nov 2016 19:33:03 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12840279/HIVE-15274.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12840279/HIVE-15274.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10733 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[transform_ppr2] (batchId=133)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=145)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=91)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_4] (batchId=91)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2264/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2264/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/2264/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/2264/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-2264/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-2264/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12840279 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15691187" author="jcamacho" created="Wed, 23 Nov 2016 19:43:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;, fails are unrelated. Could you review it? I have confirmed with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;bslim&lt;/a&gt; that this solves the issue with reusing timestamp across records returned by Druid select query. I will tackle issue with timezone is a follow-up.&lt;/p&gt;</comment>
                            <comment id="15691228" author="ashutoshc" created="Wed, 23 Nov 2016 19:59:31 +0000"  >&lt;p&gt;Is similar fix needed for other Druid record readers, like GByreader etc?&lt;/p&gt;</comment>
                            <comment id="15691248" author="jcamacho" created="Wed, 23 Nov 2016 20:05:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;, it is not needed, because all query types have different results format, and &lt;em&gt;select&lt;/em&gt; is a bit special because it has the timestamp per result set and per result item (or event). You can see it here: &lt;a href=&quot;http://druid.io/docs/latest/querying/select-query.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://druid.io/docs/latest/querying/select-query.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15691254" author="ashutoshc" created="Wed, 23 Nov 2016 20:09:02 +0000"  >&lt;p&gt;I see. +1&lt;/p&gt;</comment>
                            <comment id="15691264" author="jcamacho" created="Wed, 23 Nov 2016 20:13:15 +0000"  >&lt;p&gt;Pushed to master, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; for reviewing and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bslim&quot; class=&quot;user-hover&quot; rel=&quot;bslim&quot;&gt;bslim&lt;/a&gt; for reporting!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12840279" name="HIVE-15274.01.patch" size="5459" author="jcamachorodriguez" created="Wed, 23 Nov 2016 16:48:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36pcn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>