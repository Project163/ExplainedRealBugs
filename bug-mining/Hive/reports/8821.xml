<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:26:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-28765] Iceberg: Incorrect partition statistics on time travel + partition evolution</title>
                <link>https://issues.apache.org/jira/browse/HIVE-28765</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HiveIcebergStorageHandler fails to fetch stats of evolved partitions. It triggers schema and FS level stats estimation as a fallback and results in unreasonable counts.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
CREATE TABLE test (key INT, id INT) PARTITIONED BY SPEC (bucket(4, key)) STORED BY ICEBERG;
INSERT INTO test VALUES (1, 1), (2, 2), (3, 3), (4, 4);
ALTER TABLE test CREATE TAG version1;ALTER TABLE test SET PARTITION SPEC (bucket(256, key));
INSERT INTO test VALUES (1, 5), (2, 6), (3, 7), (4, 8);

ALTER TABLE test CREATE TAG version2;SET hive.fetch.task.conversion=none;
EXPLAIN SELECT * FROM &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.test.tag_version1;

+----------------------------------------------------+
|&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Explain &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
+----------------------------------------------------+
| Plan optimized by CBO. &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
|&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| Stage-0&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| &#160; Fetch Operator &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| &#160; &#160; limit:-1 &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| &#160; &#160; Stage-1&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| &#160; &#160; &#160; Map 1 vectorized &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| &#160; &#160; &#160; File Output Operator [FS_4]&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| &#160; &#160; &#160; &#160; Select Operator [SEL_3] (rows=12940 width=8) |
| &#160; &#160; &#160; &#160; &#160; Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;] &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
| &#160; &#160; &#160; &#160; &#160; TableScan [TS_0] (rows=12940 width=8)&#160; &#160; |
| &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;@test,test,Tbl:PARTIAL,Col:COMPLETE,Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;key&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;] |
|&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; |
+----------------------------------------------------+&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13608748">HIVE-28765</key>
            <summary>Iceberg: Incorrect partition statistics on time travel + partition evolution</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="okumin">Shohei Okumiya</assignee>
                                    <reporter username="okumin">Shohei Okumiya</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 17 Feb 2025 13:25:40 +0000</created>
                <updated>Tue, 29 Jul 2025 14:51:28 +0000</updated>
                            <resolved>Wed, 23 Apr 2025 11:24:06 +0000</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                    <component>Iceberg integration</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17927787" author="okumin" created="Mon, 17 Feb 2025 14:45:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkuzmenko&quot; class=&quot;user-hover&quot; rel=&quot;dkuzmenko&quot;&gt;dkuzmenko&lt;/a&gt; Do you think this issue is related?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/iceberg/pull/12137&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/iceberg/pull/12137&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17941808" author="dkuzmenko" created="Tue, 8 Apr 2025 07:57:55 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=okumin&quot; class=&quot;user-hover&quot; rel=&quot;okumin&quot;&gt;okumin&lt;/a&gt;, the mentioned change was already ported to Hive. &lt;br/&gt;
FYI, there are a few cases that we don&apos;t handle yet and treat the table as non-partitioned:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isPartitioned(org.apache.hadoop.hive.ql.metadata.Table hmsTable) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((hmsTable.getAsOfVersion() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; || hmsTable.getAsOfTimestamp() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) &amp;amp;&amp;amp;
            hasUndergonePartitionEvolution(hmsTable) ||
        !hmsTable.getTTable().isSetId() &lt;span class=&quot;code-comment&quot;&gt;// partitioned CTAS ) {
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I missed the &apos;branch/tag&apos; scenario here, and it seems you are working on adding support for it.&lt;/p&gt;</comment>
                            <comment id="17943757" author="okumin" created="Sat, 12 Apr 2025 07:37:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkuzmenko&quot; class=&quot;user-hover&quot; rel=&quot;dkuzmenko&quot;&gt;dkuzmenko&lt;/a&gt; Thanks. The approach using `isPartitioned` sounds robust and reasonable now. I added the support of branch and tags.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hive/pull/5748&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/pull/5748&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            30 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1u9bk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>