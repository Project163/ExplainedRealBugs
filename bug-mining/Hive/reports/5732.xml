<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:55:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-17008] Fix boolean flag switchup in DropTableEvent</title>
                <link>https://issues.apache.org/jira/browse/HIVE-17008</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When dropping a non-existent database, the HMS will still fire registered &lt;tt&gt;DROP_DATABASE&lt;/tt&gt; event listeners.  This results in an NPE when the listeners attempt to deref the &lt;tt&gt;null&lt;/tt&gt; database parameter.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13083959">HIVE-17008</key>
            <summary>Fix boolean flag switchup in DropTableEvent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="danburkert">Dan Burkert</assignee>
                                    <reporter username="danburkert">Dan Burkert</reporter>
                        <labels>
                    </labels>
                <created>Sat, 1 Jul 2017 00:20:51 +0000</created>
                <updated>Wed, 23 May 2018 00:00:07 +0000</updated>
                            <resolved>Thu, 9 Nov 2017 15:55:39 +0000</resolved>
                                                    <fixVersion>2.3.2</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16071449" author="hiveqa" created="Sun, 2 Jul 2017 00:05:03 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12875345/HIVE-17008.0.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12875345/HIVE-17008.0.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 10830 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5857/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5857/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5857/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5857/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5857/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5857/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12875345 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16074983" author="mohitsabharwal" created="Wed, 5 Jul 2017 15:54:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dan_impala_9180&quot; class=&quot;user-hover&quot; rel=&quot;dan_impala_9180&quot;&gt;dan_impala_9180&lt;/a&gt;, the changes aren&apos;t clear to me, look like changes in indentation. Could you add a review board link ?&lt;/p&gt;

&lt;p&gt;Also, could you add the NPE stracktrace you are seeing to the description ?&lt;/p&gt;

&lt;p&gt;You also need a unit test here, perhaps in TestDbNotificationListener &lt;/p&gt;</comment>
                            <comment id="16075068" author="danburkert" created="Wed, 5 Jul 2017 16:48:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mohitsabharwal&quot; class=&quot;user-hover&quot; rel=&quot;mohitsabharwal&quot;&gt;mohitsabharwal&lt;/a&gt;, here is a better diff of the patch: &lt;a href=&quot;https://github.com/danburkert/hive/commit/ec115a584c4b2b715f339458afc2bcbf353d1e47?w=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/danburkert/hive/commit/ec115a584c4b2b715f339458afc2bcbf353d1e47?w=1&lt;/a&gt;.  Since filing this bug / uploading the patch I&apos;ve found that the HMS can fire event listeners on almost any type of failed DDL operation: drop database, create table, partitions, functions, indices, etc.  The patch only fixes the drop database case, but the fix is pretty much the same.  It&apos;s not clear to me what the designed behavior is, though.  Are these just copy/pasted bugs, or is it by design that the HMS notifies listeners for failed DDL operations?&lt;/p&gt;</comment>
                            <comment id="16075763" author="mohitsabharwal" created="Thu, 6 Jul 2017 01:30:10 +0000"  >&lt;p&gt;Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dan_impala_9180&quot; class=&quot;user-hover&quot; rel=&quot;dan_impala_9180&quot;&gt;dan_impala_9180&lt;/a&gt;. There are two flavors of listeners in each DDL operation, one which runs in the same transaction as the DDL event (notify only upon success) and one which run outside the transaction (can notify failed DDL operations as well).  Where exactly is the NPE - I assume somewhere down the notifyEvent stack ?&lt;/p&gt;

&lt;p&gt;+ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;, who has worked on this recently.&lt;/p&gt;</comment>
                            <comment id="16075790" author="danburkert" created="Thu, 6 Jul 2017 01:54:24 +0000"  >&lt;p&gt;I&apos;m observing these events through the &lt;a href=&quot;https://github.com/danburkert/hive/blob/master/metastore/if/hive_metastore.thrift#L1546-L1549&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;notification log API&lt;/a&gt;.  Is it expected that &lt;tt&gt;ThriftHiveMetastore.get_next_notification&lt;/tt&gt; returns events for failed DDL operations?  There isn&apos;t any way to discern whether or not the event failed just from the &lt;tt&gt;NotificationEvent&lt;/tt&gt; struct.&lt;/p&gt;

&lt;p&gt;&amp;gt; Where exactly is the NPE - I assume somewhere down the notifyEvent stack ?&lt;/p&gt;

&lt;p&gt;The NPE is thrown inside the notification event listener, because &lt;tt&gt;db&lt;/tt&gt; can be null on &lt;a href=&quot;https://github.com/apache/hive/blob/master/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java?utf8=%E2%9C%93#L1139&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this line&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16076630" author="mohitsabharwal" created="Thu, 6 Jul 2017 14:52:37 +0000"  >&lt;p&gt;&lt;tt&gt;ListenerEvent&lt;/tt&gt; has the success flag, so listener implementation can choose to ignore failed events. But &lt;tt&gt;DbNotificationListener&lt;/tt&gt; and &lt;tt&gt;HMSMetricsListener&lt;/tt&gt; are ignoring the status flag.  The old &lt;tt&gt;NotificationListener&lt;/tt&gt; though is looking at the flag and only logging successful events.&lt;/p&gt;

&lt;p&gt;This does look like something we should make consistent, not just address the NPE. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akolb&quot; class=&quot;user-hover&quot; rel=&quot;akolb&quot;&gt;akolb&lt;/a&gt;, do you have any thoughts ?&lt;/p&gt;</comment>
                            <comment id="16076653" author="akolb" created="Thu, 6 Jul 2017 15:00:15 +0000"  >&lt;p&gt;There should be no events when the operation failed. This is a bug in the notification processing.&lt;/p&gt;</comment>
                            <comment id="16076664" author="akolb" created="Thu, 6 Jul 2017 15:04:42 +0000"  >&lt;p&gt;Looking at the code, the actual operation is for some reason considered successfull which means that there should be an event and it shouldn&apos;t throw NPE.&lt;/p&gt;

&lt;p&gt;Here is the relevant check: &lt;a href=&quot;https://github.com/apache/hive/blob/master/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java?utf8=&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/blob/master/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java?utf8=&lt;/a&gt;&#10003;#L1119&lt;/p&gt;</comment>
                            <comment id="16077005" author="danburkert" created="Thu, 6 Jul 2017 18:20:57 +0000"  >&lt;p&gt;My comment yesterday evening was a bit brief because I was low on time, but here&apos;s the exact sequence of events that leads to the NPE which originally prompted this issue.  As we&apos;ve discussed it&apos;s just one of many inter-related issues in the class, but I wanted to make it clear what&apos;s happening in this specific case:&lt;/p&gt;

&lt;p&gt;1. Application calls &lt;tt&gt;ThriftHiveMetastore.drop_database&lt;/tt&gt; with a non-existent database name via the HMS thrift API&#185;.&lt;br/&gt;
2. In &lt;tt&gt;HiveMetaStore.drop_database_core&lt;/tt&gt;, the &lt;tt&gt;db&lt;/tt&gt; local variable is &lt;a href=&quot;https://github.com/apache/hive/blob/555f001146c4fc471e29e18899a0e02a4043cca5/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java#L1023&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;initialized to &lt;tt&gt;null&lt;/tt&gt;&lt;/a&gt;.&lt;br/&gt;
3. In &lt;tt&gt;HiveMetaStore.drop_database_core&lt;/tt&gt;, the &lt;a href=&quot;https://github.com/apache/hive/blob/555f001146c4fc471e29e18899a0e02a4043cca5/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java#L1029&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;lookup of the non-existent database fails&lt;/a&gt;, leaving &lt;tt&gt;db&lt;/tt&gt; set to &lt;tt&gt;null&lt;/tt&gt; and unwinding to the &lt;tt&gt;finally&lt;/tt&gt; block.&lt;br/&gt;
4. In &lt;tt&gt;HiveMetaSotre.drop_database_core&lt;/tt&gt; &lt;tt&gt;finally&lt;/tt&gt; block, a new &lt;a href=&quot;https://github.com/apache/hive/blob/555f001146c4fc471e29e18899a0e02a4043cca5/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java#L1139-L1143&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;DropDatabaseEvent&lt;/tt&gt; is created&lt;/a&gt; with the &lt;tt&gt;null&lt;/tt&gt; database, and listeners are notified with this event.&lt;br/&gt;
5. Somewhere (I haven&apos;t traced this bit), the notification log event listener is dereferencing the null database.&lt;/p&gt;

&lt;p&gt;&#185; Although I haven&apos;t reproduced it, it should be possible to reproduce this bug through the Java &lt;tt&gt;HiveMetastoreClient&lt;/tt&gt; API as well, but it would require concurrent DDL operations.  The &lt;tt&gt;HiveMetastoreClient&lt;/tt&gt; &lt;a href=&quot;https://github.com/apache/hive/blob/master/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java#L851-L858&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;checks that the database exists&lt;/a&gt; before attempting to drop it; this is a benign TOCTOU which makes it difficult to reproduce using that API (again, it should still possible with the right interleavings of concurrent DDL ops).  A light skimming through that class reveals that the client is very aggressive about validating state exists before issuing DDL operations.  Just my opinion, but that&apos;s a big code smell; the client should rely on the server to validate arguments.&lt;/p&gt;</comment>
                            <comment id="16077008" author="danburkert" created="Thu, 6 Jul 2017 18:23:31 +0000"  >&lt;p&gt;Canceling patch, since it&apos;s clear that it is intended behavior to notify listeners on failed DDL ops.&lt;/p&gt;</comment>
                            <comment id="16100891" author="akolb" created="Tue, 25 Jul 2017 22:33:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dan%40danburkert.com&quot; class=&quot;user-hover&quot; rel=&quot;dan@danburkert.com&quot;&gt;dan@danburkert.com&lt;/a&gt; Are you working on the fix for this issue? If not, we should hand it to someone who does.&lt;/p&gt;</comment>
                            <comment id="16101019" author="danburkert" created="Wed, 26 Jul 2017 00:57:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=akolb&quot; class=&quot;user-hover&quot; rel=&quot;akolb&quot;&gt;akolb&lt;/a&gt; I&apos;m playing around with a fix &lt;a href=&quot;https://github.com/danburkert/hive/commit/e8b2527ae0fbdff1df2a3b102cba1e0c3cd89e4b?w=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;, but it doesn&apos;t appear to work quite correctly.  It&apos;s fine with me if someone else wants to jump on this an assign it to themselves; I think it should be a high priority bug.&lt;/p&gt;</comment>
                            <comment id="16101061" author="danburkert" created="Wed, 26 Jul 2017 02:04:09 +0000"  >&lt;p&gt;New patch attached.  Here&apos;s a &lt;a href=&quot;https://github.com/danburkert/hive/commit/b9ff26eccc3733d00f1702c8178cf5b942078485?w=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;whitespace-ignored diff&lt;/a&gt;.  I got to the bottom of the issue I alluded to earlier: the ctor args for &lt;tt&gt;DropTableEvent&lt;/tt&gt; were mis-ordered in &lt;tt&gt;HiveMetaStore&lt;/tt&gt;, I&apos;ve included the fix in this patch.&lt;/p&gt;</comment>
                            <comment id="16105105" author="hiveqa" created="Fri, 28 Jul 2017 15:25:58 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12879261/HIVE-17008.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12879261/HIVE-17008.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 11013 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestPerfCliDriver - did not produce a TEST-*.xml file (likely timed out) (batchId=235)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite] (batchId=240)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=168)
org.apache.hadoop.hive.metastore.TestHiveMetaStoreStatsMerge.testStatsMerge (batchId=206)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=179)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=179)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=179)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6170/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6170/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6170/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6170/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6170/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6170/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12879261 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16117546" author="danburkert" created="Mon, 7 Aug 2017 23:24:39 +0000"  >&lt;p&gt;Hi all, I&apos;d like to pass this off to someone with more experience getting Hive patches merged.&lt;/p&gt;</comment>
                            <comment id="16118172" author="hiveqa" created="Tue, 8 Aug 2017 10:49:20 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12880801/HIVE-17008.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12880801/HIVE-17008.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 12 failed/errored test(s), 10993 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=240)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[llap_uncompressed] (batchId=56)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[orc_merge_incompat2] (batchId=80)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[columnstats_part_coltype] (batchId=159)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_dynamic_partition_pruning_mapjoin_only] (batchId=170)
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver[spark_vectorized_dynamic_partition_pruning] (batchId=169)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=100)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3] (batchId=99)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=235)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=180)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=180)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=180)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6295/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6295/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/6295/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/6295/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-6295/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-6295/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12880801 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16118565" author="pvary" created="Tue, 8 Aug 2017 16:22:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-17008&quot; title=&quot;Fix boolean flag switchup in DropTableEvent&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-17008&quot;&gt;&lt;del&gt;HIVE-17008&lt;/del&gt;&lt;/a&gt;.3.patch looks good to me.&lt;br/&gt;
+1 pending tests&lt;/p&gt;</comment>
                            <comment id="16123121" author="pvary" created="Fri, 11 Aug 2017 10:03:02 +0000"  >&lt;p&gt;Pushed to master.&lt;br/&gt;
Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=danburkert&quot; class=&quot;user-hover&quot; rel=&quot;danburkert&quot;&gt;danburkert&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zsombor.klara&quot; class=&quot;user-hover&quot; rel=&quot;zsombor.klara&quot;&gt;zsombor.klara&lt;/a&gt; for the patch!&lt;/p&gt;</comment>
                            <comment id="16234297" author="stakiar" created="Wed, 1 Nov 2017 16:10:27 +0000"  >&lt;p&gt;Re-opening and assigning to myself, to get this into branch-2&lt;/p&gt;</comment>
                            <comment id="16238739" author="hiveqa" created="Sat, 4 Nov 2017 03:29:13 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12895551/HIVE-17008.2-branch-2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12895551/HIVE-17008.2-branch-2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 10659 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[explaindenpendencydiffengs] (batchId=38)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=142)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=139)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[table_nonprintable] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[join_acid_non_acid] (batchId=158)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[union_fast_stats] (batchId=153)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[merge_negative_5] (batchId=88)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[explaindenpendencydiffengs] (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[vectorized_ptf] (batchId=125)
org.apache.hive.hcatalog.api.TestHCatClient.testTransportFailure (batchId=176)
org.apache.hive.jdbc.TestJdbcDriver2.testYarnATSGuid (batchId=222)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7624/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7624/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/7624/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/7624/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-7624/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-7624/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12895551 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16245884" author="stakiar" created="Thu, 9 Nov 2017 15:55:39 +0000"  >&lt;p&gt;Merged into branch-2.3&lt;/p&gt;</comment>
                            <comment id="16486319" author="vgarg" created="Wed, 23 May 2018 00:00:07 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13093103">HIVE-17267</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12895227" name="HIVE-17008-branch-2.patch" size="1864" author="stakiar" created="Wed, 1 Nov 2017 16:14:46 +0000"/>
                            <attachment id="12875345" name="HIVE-17008.0.patch" size="3028" author="danburkert" created="Sat, 1 Jul 2017 00:22:32 +0000"/>
                            <attachment id="12878937" name="HIVE-17008.1.patch" size="17623" author="danburkert" created="Wed, 26 Jul 2017 02:02:17 +0000"/>
                            <attachment id="12895551" name="HIVE-17008.2-branch-2.patch" size="1864" author="stakiar" created="Fri, 3 Nov 2017 02:15:03 +0000"/>
                            <attachment id="12879261" name="HIVE-17008.2.patch" size="17623" author="danburkert" created="Thu, 27 Jul 2017 23:17:14 +0000"/>
                            <attachment id="12880801" name="HIVE-17008.3.patch" size="1669" author="zsombor.klara" created="Tue, 8 Aug 2017 09:04:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gzan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>