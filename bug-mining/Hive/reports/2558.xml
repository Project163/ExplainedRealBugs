<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:23:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7892] Thrift Set type not working with Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7892</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Thrift supports List, Map and Struct complex types, which get mapped to Array, Map and Struct complex types in Hive respectively. However thrift Set type doesn&apos;t seem to be working. &lt;/p&gt;

&lt;p&gt;Here is an example thrift struct:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;namespace java sample.thrift

struct setrow {
    1: required set&amp;lt;i32&amp;gt; ids,
    2: required string name,
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A Hive table is created with ROW FORMAT SERDE &apos;org.apache.hadoop.hive.serde2.thrift.ThriftDeserializer&apos; WITH SERDEPROPERTIES (&apos;serialization.class&apos;=&apos;sample.thrift.setrow&apos;, &apos;serialization.format&apos;=&apos;org.apache.thrift.protocol.TBinaryProtocol&apos;).&lt;/p&gt;

&lt;p&gt;Describing the table shows:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; describe settable; 
OK
ids                 	struct&amp;lt;&amp;gt;            from deserializer   
name                string              	from deserializer
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Issuing a select query on set column throws SemanticException:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;hive&amp;gt; select ids from settable;
FAILED: SemanticException java.lang.IllegalArgumentException: Error: name expected at the position 7 of &apos;struct&amp;lt;&amp;gt;&apos; but &apos;&amp;gt;&apos; is found.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12737067">HIVE-7892</key>
            <summary>Thrift Set type not working with Hive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="satish.mittal">Satish Mittal</assignee>
                                    <reporter username="satish.mittal">Satish Mittal</reporter>
                        <labels>
                            <label>TODOC14</label>
                    </labels>
                <created>Wed, 27 Aug 2014 10:24:07 +0000</created>
                <updated>Thu, 13 Nov 2014 19:42:47 +0000</updated>
                            <resolved>Mon, 15 Sep 2014 06:06:59 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14126840" author="satish.mittal" created="Tue, 9 Sep 2014 10:37:59 +0000"  >&lt;p&gt;Attaching patch that resolves the issue.&lt;/p&gt;

&lt;p&gt;The approach taken here is to essentially map thrift Set type to hive Array type (thrift List type already maps to hive Array). Since both List and Set are essentially collections, we can simply leverage the existing Array type, instead of exposing a new complex type at hive level.&lt;/p&gt;</comment>
                            <comment id="14126866" author="satish.mittal" created="Tue, 9 Sep 2014 10:52:02 +0000"  >&lt;p&gt;Review: &lt;a href=&quot;https://reviews.apache.org/r/25473/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/25473/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14127199" author="hiveqa" created="Tue, 9 Sep 2014 16:40:36 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667390/HIVE-7892.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667390/HIVE-7892.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6186 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_convert_enum_to_string
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/709/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/709/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/709/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/709/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-709/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-709/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667390&lt;/p&gt;</comment>
                            <comment id="14128138" author="amareshwari" created="Wed, 10 Sep 2014 06:29:52 +0000"  >&lt;p&gt;Code changes look fine. Can you update the test output for convert_enum_to_string.q and upload the patch?&lt;/p&gt;</comment>
                            <comment id="14128157" author="satish.mittal" created="Wed, 10 Sep 2014 06:59:21 +0000"  >&lt;p&gt;Attaching updated patch. The test convert_enum_to_string.q works with existing MegaStruct thrift table, which contains set columns with older description. Fixed the description.&lt;/p&gt;</comment>
                            <comment id="14129597" author="satish.mittal" created="Thu, 11 Sep 2014 04:20:34 +0000"  >&lt;p&gt;Attaching patch again to trigger build.&lt;/p&gt;</comment>
                            <comment id="14130323" author="hiveqa" created="Thu, 11 Sep 2014 17:19:02 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12667976/HIVE-7892.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12667976/HIVE-7892.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6196 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/743/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/743/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/743/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/743/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-743/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-743/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12667976&lt;/p&gt;</comment>
                            <comment id="14133610" author="amareshwari" created="Mon, 15 Sep 2014 06:06:59 +0000"  >&lt;p&gt;I just committed this. Thanks Satish !&lt;/p&gt;</comment>
                            <comment id="14141818" author="lefty@hortonworks.com" created="Sat, 20 Sep 2014 07:04:54 +0000"  >&lt;p&gt;Should this be documented in the wiki?&lt;/p&gt;

&lt;p&gt;We don&apos;t have a wikidoc for the Thrift SerDe (but probably should).  Here are some places it is mentioned:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/DeveloperGuide#DeveloperGuide-HiveSerDe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Developer Guide &amp;#8211; Hive SerDe &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/SerDe#SerDe-Built-inSerDes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SerDe &amp;#8211; Built-in SerDes &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Hive complex types are documented here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+Types#LanguageManualTypes-ComplexTypes&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Hive Data Types &amp;#8211; Complex Types &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14141865" author="satish.mittal" created="Sat, 20 Sep 2014 08:07:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; The following wiki briefly mentions various available Hive Serdes:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/DeveloperGuide#DeveloperGuide-HiveSerDe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Developer Guide &amp;#8211; Hive SerDe &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We can probably mention against ThriftSerde that Thrift complex types get mapped to Hive complex types (List-&amp;gt;Array, Map-&amp;gt;, Struct -&amp;gt; Struct respectively). With &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7892&quot; title=&quot;Thrift Set type not working with Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7892&quot;&gt;&lt;del&gt;HIVE-7892&lt;/del&gt;&lt;/a&gt;, Thrift Set type gets mapped to Hive Array type. User can setup a Thrift based table using ThriftDeserializer class and query various Thrift fields through Hive query.&lt;/p&gt;</comment>
                            <comment id="14142366" author="lefty@hortonworks.com" created="Sun, 21 Sep 2014 07:05:54 +0000"  >&lt;p&gt;Agreed, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=satish.mittal&quot; class=&quot;user-hover&quot; rel=&quot;satish.mittal&quot;&gt;satish.mittal&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14210824" author="thejas" created="Thu, 13 Nov 2014 19:42:47 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12667976" name="HIVE-7892.1.patch" size="28121" author="satish.mittal" created="Thu, 11 Sep 2014 09:26:54 +0000"/>
                            <attachment id="12667390" name="HIVE-7892.patch.txt" size="26007" author="satish.mittal" created="Tue, 9 Sep 2014 10:37:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zdxj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Maps thrift&amp;#39;s set type to hive&amp;#39;s array type.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>