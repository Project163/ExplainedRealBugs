<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:21:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7583] Use FileSystem.access() if available to check file access for user</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7583</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive currently implements its own file access checks to determine if a user is allowed to perform an specified action on a file path (in StorageBasedAuthorizationProvider, also FileUtils). This can be prone to errors or inconsistencies with how file access is actually checked in Hadoop.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HDFS-6570&quot; title=&quot;add api that enables checking if a user has certain permissions on a file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HDFS-6570&quot;&gt;&lt;del&gt;HDFS-6570&lt;/del&gt;&lt;/a&gt; adds a new FileSystem.access() API, so that we can perform the check using the actual HDFS logic rather than having to imitate that behavior in Hive. For versions of Hadoop that have this API available, we should use this API.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12731231">HIVE-7583</key>
            <summary>Use FileSystem.access() if available to check file access for user</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdere">Jason Dere</assignee>
                                    <reporter username="jdere">Jason Dere</reporter>
                        <labels>
                            <label>TODOC14</label>
                    </labels>
                <created>Fri, 1 Aug 2014 00:17:48 +0000</created>
                <updated>Thu, 13 Nov 2014 19:40:22 +0000</updated>
                            <resolved>Wed, 6 Aug 2014 22:16:38 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14081733" author="jdere" created="Fri, 1 Aug 2014 00:26:53 +0000"  >&lt;p&gt;If using FileSystem.access() to check file access for a user other than the current user, the current user will need to impersonate the user using doAs().  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; has also pointed out that the file checks done in standard SQL authorization should also have been doing doAs() for the checks it&apos;s doing, but currently does not.  Will also address this issue here.&lt;/p&gt;</comment>
                            <comment id="14081757" author="jdere" created="Fri, 1 Aug 2014 00:46:53 +0000"  >&lt;p&gt;initial patch&lt;/p&gt;</comment>
                            <comment id="14081766" author="jdere" created="Fri, 1 Aug 2014 00:57:08 +0000"  >&lt;p&gt;RB at &lt;a href=&quot;https://reviews.apache.org/r/24170/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24170/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14083285" author="jdere" created="Sat, 2 Aug 2014 01:48:29 +0000"  >&lt;p&gt;Patch v2 based on review feedback.&lt;/p&gt;</comment>
                            <comment id="14085143" author="thejas" created="Mon, 4 Aug 2014 19:19:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14086548" author="jdere" created="Tue, 5 Aug 2014 17:55:20 +0000"  >&lt;p&gt;re-uploading patch to run pre-commit tests.&lt;/p&gt;</comment>
                            <comment id="14087505" author="hiveqa" created="Wed, 6 Aug 2014 10:27:50 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12659921/HIVE-7583.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12659921/HIVE-7583.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 5878 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_mixed_case
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_ql_rewrite_gbtoidx
org.apache.hadoop.hive.ql.TestDDLWithRemoteMetastoreSecondNamenode.testCreateTableWithIndexAndPartitionsNonDefaultNameNode
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/184/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/184/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/184/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/184/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-184/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-184/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12659921&lt;/p&gt;</comment>
                            <comment id="14088083" author="jdere" created="Wed, 6 Aug 2014 19:18:07 +0000"  >&lt;p&gt;Looks like all of these test failures have also shown up in some of the other precommit test runs, I don&apos;t think they are related to this patch. Will commit this later.&lt;/p&gt;</comment>
                            <comment id="14088364" author="jdere" created="Wed, 6 Aug 2014 22:16:38 +0000"  >&lt;p&gt;Committed to trunk. Thanks for review Thejas!&lt;/p&gt;</comment>
                            <comment id="14095740" author="thejas" created="Wed, 13 Aug 2014 17:20:12 +0000"  >&lt;p&gt;This jira adds ACL support for Storage Based Authorization, marking &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7714&quot; title=&quot;Implement ACL support for Storage-System Based Authorization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7714&quot;&gt;&lt;del&gt;HIVE-7714&lt;/del&gt;&lt;/a&gt; as duplicate.&lt;/p&gt;</comment>
                            <comment id="14095850" author="lefty@hortonworks.com" created="Wed, 13 Aug 2014 18:18:30 +0000"  >&lt;p&gt;When 0.14.0 is released, update this note in HCatalog Authorization:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Note: Support for HDFS ACL (introduced in Apache Hadoop 2.4) is not available in the released versions of Hive.  Which means, that it checks only the traditional rwx style permissions to determine if a user can write to the file system. The support for ACL is available in Hive trunk &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7583&quot; title=&quot;Use FileSystem.access() if available to check file access for user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7583&quot;&gt;&lt;del&gt;HIVE-7583&lt;/del&gt;&lt;/a&gt;, which will be available in Hive 0.14.&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HCatalog+Authorization&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HCatalog Authorization &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14210348" author="thejas" created="Thu, 13 Nov 2014 19:40:22 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12733797">HIVE-7714</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12722594">HDFS-6570</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12659056" name="HIVE-7583.1.patch" size="34241" author="jdere" created="Fri, 1 Aug 2014 00:46:53 +0000"/>
                            <attachment id="12659300" name="HIVE-7583.2.patch" size="35528" author="jdere" created="Sat, 2 Aug 2014 01:48:29 +0000"/>
                            <attachment id="12659921" name="HIVE-7583.3.patch" size="35528" author="jdere" created="Tue, 5 Aug 2014 17:55:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409303</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1yfa7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>409299</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>