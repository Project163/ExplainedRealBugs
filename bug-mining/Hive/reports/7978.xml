<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:20:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-25104] Backward incompatible timestamp serialization in Parquet for certain timezones</title>
                <link>https://issues.apache.org/jira/browse/HIVE-25104</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20007&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20007&quot;&gt;&lt;del&gt;HIVE-20007&lt;/del&gt;&lt;/a&gt; changed the way that timestamp computations are performed and to some extend how timestamps are serialized and deserialized in files (Parquet, Avro).&lt;/p&gt;

&lt;p&gt;In versions that include &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20007&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20007&quot;&gt;&lt;del&gt;HIVE-20007&lt;/del&gt;&lt;/a&gt; the serialization in Parquet files is not backwards compatible. In other words writing timestamps with a version of Hive that includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20007&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20007&quot;&gt;&lt;del&gt;HIVE-20007&lt;/del&gt;&lt;/a&gt; and reading them with another (not including the previous issues) may lead to different results depending on the default timezone of the system.&lt;/p&gt;

&lt;p&gt;Consider the following scenario where the default system timezone is set to US/Pacific.&lt;/p&gt;

&lt;p&gt;At apache/master commit 37f13b02dff94e310d77febd60f93d5a205254d3&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;EXTERNAL&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; employee(eid &lt;span class=&quot;code-keyword&quot;&gt;INT&lt;/span&gt;,birth &lt;span class=&quot;code-keyword&quot;&gt;timestamp&lt;/span&gt;) STORED &lt;span class=&quot;code-keyword&quot;&gt;AS&lt;/span&gt; PARQUET
 &lt;span class=&quot;code-keyword&quot;&gt;LOCATION&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/hiveexttbl/employee&apos;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; employee &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (1, &lt;span class=&quot;code-quote&quot;&gt;&apos;1880-01-01 00:00:00&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; employee &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (2, &lt;span class=&quot;code-quote&quot;&gt;&apos;1884-01-01 00:00:00&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; employee &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (3, &lt;span class=&quot;code-quote&quot;&gt;&apos;1990-01-01 00:00:00&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; employee;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1880-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1884-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1990-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;At apache/branch-2.3 commit 324f9faf12d4b91a9359391810cb3312c004d356&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;EXTERNAL&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; employee(eid &lt;span class=&quot;code-keyword&quot;&gt;INT&lt;/span&gt;,birth &lt;span class=&quot;code-keyword&quot;&gt;timestamp&lt;/span&gt;) STORED &lt;span class=&quot;code-keyword&quot;&gt;AS&lt;/span&gt; PARQUET
 &lt;span class=&quot;code-keyword&quot;&gt;LOCATION&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/hiveexttbl/employee&apos;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; employee;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1879-12-31 23:52:58&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1884-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1990-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;The timestamp for &lt;tt&gt;eid=1&lt;/tt&gt; in branch-2.3 is different from the one in master.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13377889">HIVE-25104</key>
            <summary>Backward incompatible timestamp serialization in Parquet for certain timezones</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                            <label>compatibility</label>
                            <label>pull-request-available</label>
                            <label>timestamp</label>
                    </labels>
                <created>Tue, 11 May 2021 15:17:40 +0000</created>
                <updated>Thu, 19 Dec 2024 22:18:02 +0000</updated>
                            <resolved>Fri, 4 Jun 2021 18:40:09 +0000</resolved>
                                    <version>3.1.0</version>
                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7200">2h</timespent>
                                <comments>
                            <comment id="17342654" author="zabetak" created="Tue, 11 May 2021 15:21:40 +0000"  >&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20007&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20007&quot;&gt;&lt;del&gt;HIVE-20007&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt;, we switched to use the new Java APIs for managing dates and timestamps (i.e., LocalDate, LocalDateTime, Instant, etc.); this is a positive change but brings many backward compatibility problems. The one that we are hitting in this JIRA lies is the computation of time zone offsets from UTC that is made differently between old and new Java classes.&lt;/p&gt;

&lt;p&gt;To be more precise the new java classes have elaborate rules to identify the offset for a given timezone and this may be different from one year to another. Consider for instance US/Pacific time zone, now it has an offset of -08:00:00 from UTC but&#160;&lt;a href=&quot;http://www.statoids.com/tus.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;before the year 1883&lt;/a&gt;&#160;the offset was -07:52:58. The old java classes which are in use in &lt;tt&gt;branch-2.3&lt;/tt&gt;&#160;for isntance do not account for this differences and always use the same offset for a given time zone (e.g., -8:00 for US/Pacific). The latter means that the value that we end up writing in Parquet is different and essentially depends on the year.&lt;/p&gt;</comment>
                            <comment id="17342660" author="zabetak" created="Tue, 11 May 2021 15:24:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-24074&quot; title=&quot;Incorrect handling of timestamp in Parquet/Avro when written in certain time zones in versions before Hive 3.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-24074&quot;&gt;&lt;del&gt;HIVE-24074&lt;/del&gt;&lt;/a&gt; describes the same problem and adapts the Parquet/Avro &lt;b&gt;readers&lt;/b&gt; to render timestamps taking into account these differences between old/new java classes. &lt;/p&gt;

&lt;p&gt;With this in place, reading values from older versions of Hive produces more or less the expected results. However, the writers are not changed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-24074&quot; title=&quot;Incorrect handling of timestamp in Parquet/Avro when written in certain time zones in versions before Hive 3.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-24074&quot;&gt;&lt;del&gt;HIVE-24074&lt;/del&gt;&lt;/a&gt; which makes this issue visible in the first place.&lt;/p&gt;</comment>
                            <comment id="17344489" author="zabetak" created="Fri, 14 May 2021 09:32:40 +0000"  >&lt;p&gt;In order to make timestamp serialization backwards compatible we need to write data to the Parquet file in exactly the same way as before. This can be achieved either by using the legacy code and the old date/time APIs or by adapting the new code to simulate the old behavior.&lt;/p&gt;

&lt;p&gt;The first question that pops up is if we should retain both serialization options (old rules vs new rules) or keep only one of them.&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Keep only old conversion rules&lt;/ins&gt;&lt;br/&gt;
 Pros&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Backwards compatible with Hive versions before 3.1.0&lt;/li&gt;
	&lt;li&gt;Decreased maintenance cost and simpler implementation&lt;/li&gt;
	&lt;li&gt;Less configuration options&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Cons&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Backwards incompatible with Hive 3.1.&lt;span class=&quot;error&quot;&gt;&amp;#91;0-2&amp;#93;&lt;/span&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt; is released)&lt;/li&gt;
	&lt;li&gt;Complicated forward compatibility since the majority of new tools (using Java8+) are using the new java APIs and they are relying by default in the new rules&lt;/li&gt;
	&lt;li&gt;Performance impact if we don&apos;t rewrite the old rules using the new APIs&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;ins&gt;Keep only new conversion rules&lt;/ins&gt;&lt;br/&gt;
 Pros&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Backwards compatible with Hive versions after 3.1.0&lt;/li&gt;
	&lt;li&gt;Decreased maintenance cost and simpler implementation&lt;/li&gt;
	&lt;li&gt;Less configuration options&lt;/li&gt;
	&lt;li&gt;Efficient implementation&lt;/li&gt;
	&lt;li&gt;Better integration with newer tools (using Java8+) reading Parquet files&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Cons&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Backwards incompatible with Hive versions before 3.1.0&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;ins&gt;Keep both conversion rules and control via properties&lt;/ins&gt;&lt;br/&gt;
 Pros&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Backwards compatible with all Hive versions as long as the properties are set correctly&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; Cons&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Increased maintenance cost due to the the presence of multiple rules&lt;/li&gt;
	&lt;li&gt;More configuration options that the user may need to set differently depending on the input files&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Keeping one of them makes sense mostly if we decide to keep a unique option when we deserialize (read) the data otherwise the code simplicity, code maintenance, and other advantages mentioned above become really minor.&lt;/p&gt;

&lt;p&gt;Shifting the weight to backward compatibility the most compelling option is to keep both old and new conversion rules and provide properties to control how we read/write timestamp data. &lt;/p&gt;</comment>
                            <comment id="17344550" author="zabetak" created="Fri, 14 May 2021 12:04:35 +0000"  >&lt;p&gt;Keeping both conversion rules brings up another question that is how we decide to read/write data. &lt;/p&gt;

&lt;p&gt;Let&apos;s assume that we have the following properties:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;hive.parquet.timestamp.read.legacy.conversion.enabled&lt;/tt&gt;, whether we should apply legacy conversion rules when we read the data from the file&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;hive.parquet.timestamp.write.legacy.conversion.enabled&lt;/tt&gt;, whether we should apply legacy conversion rules when write the data to the file&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The question is if we should exploit the file metadata to include information about the conversion or not.  &lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Include conversion status in metadata&lt;/ins&gt;&lt;br/&gt;
If the status is present in the metadata then we don&apos;t need to rely on the value of the read property to apply the appropriate conversion rules when we read the data. Essentially, the value of the respective conf property is ignored the read property becomes a noop. External applications reading parquet files written by Hive know exactly how they should interpret the data to display the expected results. &lt;/p&gt;

&lt;p&gt;The disadvantage of this approach is that once the file is written a Hive user has no way to interpret the data using other conversion rules so it is very important to set the write property correctly in the beginning. &lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Exclude conversion status from metadata&lt;/ins&gt;&lt;br/&gt;
If the status is not present in the metadata then reading and writing depends entirely on the values of the respective properties. This approach is more forgiving if somebody sets the write property incorrectly but it makes it impossible for Hive and other tools to know the conversion rules that were applied in the data when they were written in the files. Furthermore, reading and writing timestamps differently in a every query make s the overall approach very prone to errors.&lt;/p&gt;

&lt;p&gt;Summing up the best option is to record the conversion status in the file metadata on write. If this information is available on read then Hive will use it to choose the proper way to read the data. If it is not then Hive will read the data using the value of read config property. &lt;/p&gt;</comment>
                            <comment id="17357559" author="jcamacho" created="Fri, 4 Jun 2021 18:40:09 +0000"  >&lt;p&gt;Pushed to master, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zabetak&quot; class=&quot;user-hover&quot; rel=&quot;zabetak&quot;&gt;zabetak&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="17363430" author="gupta.nikhil0007" created="Tue, 15 Jun 2021 07:31:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jcamachorodriguez&quot; class=&quot;user-hover&quot; rel=&quot;jcamachorodriguez&quot;&gt;jcamachorodriguez&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zabetak&quot; class=&quot;user-hover&quot; rel=&quot;zabetak&quot;&gt;zabetak&lt;/a&gt;&#160;&lt;br/&gt;
I am seeing a lot of timestamp issues and backward compatibility issues (Parquet, Avro, ORC) being pushed.&lt;br/&gt;
Can we track them under a single Umbrella Jira?&#160;&lt;/p&gt;</comment>
                            <comment id="17367455" author="zabetak" created="Tue, 22 Jun 2021 15:26:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gupta.nikhil0007&quot; class=&quot;user-hover&quot; rel=&quot;gupta.nikhil0007&quot;&gt;gupta.nikhil0007&lt;/a&gt; we could but I am not sure what it should go under it. If it is too specific it will be difficult to classify things under it so the alternative is to be quite broad like &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12191&quot; title=&quot;Hive timestamp problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12191&quot;&gt;HIVE-12191&lt;/a&gt;. We could even reuse that one in fact.&lt;/p&gt;</comment>
                            <comment id="17368895" author="gupta.nikhil0007" created="Thu, 24 Jun 2021 14:42:53 +0000"  >&lt;p&gt;I have a list of issues which we can club together: (These are after hive 3.1 release):&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25268&quot; title=&quot;date_format udf returns wrong results for dates prior to 1900 if the local timezone is other than UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25268&quot;&gt;&lt;del&gt;HIVE-25268&lt;/del&gt;&lt;/a&gt;: date_format udf doesn&apos;t work for dates prior to 1900 if the timezone is different from UTC&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25093&quot; title=&quot;date_format() UDF is returning output in UTC time zone only &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25093&quot;&gt;&lt;del&gt;HIVE-25093&lt;/del&gt;&lt;/a&gt;: date_format() UDF is returning output in UTC time zone only (Ashish Sharma, reviewed by Adesh Rao, Nikhil Gupta, Sankar Hariappan)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25104&quot; title=&quot;Backward incompatible timestamp serialization in Parquet for certain timezones&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25104&quot;&gt;&lt;del&gt;HIVE-25104&lt;/del&gt;&lt;/a&gt;: Backward incompatible timestamp serialization in Parquet for certain timezones (Stamatis Zampetakis, reviewed by Jesus Camacho Rodriguez)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-24113&quot; title=&quot;NPE in GenericUDFToUnixTimeStamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-24113&quot;&gt;&lt;del&gt;HIVE-24113&lt;/del&gt;&lt;/a&gt;: NPE in GenericUDFToUnixTimeStamp (#1460) (Raj Kumar Singh, reviewed by Zoltan Haindrich and Laszlo Pinter)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-24074&quot; title=&quot;Incorrect handling of timestamp in Parquet/Avro when written in certain time zones in versions before Hive 3.x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-24074&quot;&gt;&lt;del&gt;HIVE-24074&lt;/del&gt;&lt;/a&gt;: Incorrect handling of timestamp in Parquet/Avro when written in certain time zones in versions before Hive 3.x (Jesus Camacho Rodriguez, reviewed by Prasanth Jayachandran)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22840&quot; title=&quot;Race condition in formatters of TimestampColumnVector and DateColumnVector &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22840&quot;&gt;&lt;del&gt;HIVE-22840&lt;/del&gt;&lt;/a&gt;: Race condition in formatters of TimestampColumnVector and DateColumnVector (Shubham Chaurasia, reviewed by Jesus Camacho Rodriguez)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22589&quot; title=&quot;Add storage support for ProlepticCalendar in ORC, Parquet, and Avro&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22589&quot;&gt;&lt;del&gt;HIVE-22589&lt;/del&gt;&lt;/a&gt;: Add storage support for ProlepticCalendar in ORC, Parquet, and Avro (Jesus Camacho Rodriguez, reviewed by David Lavati, L&amp;lt;C3&amp;gt;&amp;lt;A1&amp;gt;szl&amp;lt;C3&amp;gt;&amp;lt;B3&amp;gt; Bodor, Prasanth Jayachandran)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22405&quot; title=&quot;Add ColumnVector support for ProlepticCalendar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22405&quot;&gt;&lt;del&gt;HIVE-22405&lt;/del&gt;&lt;/a&gt;: Add ColumnVector support for ProlepticCalendar (L&amp;lt;C3&amp;gt;&amp;lt;A1&amp;gt;szl&amp;lt;C3&amp;gt;&amp;lt;B3&amp;gt; Bodor via Owen O&apos;Malley, Jesus Camacho Rodriguez)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22331&quot; title=&quot;unix_timestamp without argument returns timestamp in millisecond instead of second.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22331&quot;&gt;&lt;del&gt;HIVE-22331&lt;/del&gt;&lt;/a&gt;: unix_timestamp without argument returns timestamp in millisecond instead of second (Naresh P R, reviewed Jesus Camacho Rodriguez)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22170&quot; title=&quot;from_unixtime and unix_timestamp should use user session time zone&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22170&quot;&gt;&lt;del&gt;HIVE-22170&lt;/del&gt;&lt;/a&gt;: from_unixtime and unix_timestamp should use user session time zone (Jesus Camacho Rodriguez, reviewed by Vineet Garg)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-21729&quot; title=&quot;Arrow serializer sometimes shifts timestamp by one second&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-21729&quot;&gt;&lt;del&gt;HIVE-21729&lt;/del&gt;&lt;/a&gt;: Arrow serializer sometimes shifts timestamp by one second (Shubham Chaurasia, reviewed by Sankar Hariappan)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-21291&quot; title=&quot;Restore historical way of handling timestamps in Avro while keeping the new semantics at the same time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-21291&quot;&gt;&lt;del&gt;HIVE-21291&lt;/del&gt;&lt;/a&gt;: Restore historical way of handling timestamps in Avro while keeping the new semantics at the same time (Karen Coppage, reviewed by Jesus Camacho Rodriguez)&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="17369333" author="zabetak" created="Fri, 25 Jun 2021 08:19:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gupta.nikhil0007&quot; class=&quot;user-hover&quot; rel=&quot;gupta.nikhil0007&quot;&gt;gupta.nikhil0007&lt;/a&gt; Thanks for putting this list together. &lt;/p&gt;

&lt;p&gt;Personally, when I am looking for existing issues I rely mostly on the JQL search (e.g., &lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project%20%3D%20hive%20and%20labels%20in%20(timestamp%2Cdatetime)%20order%20by%20created%20DESC&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;query&lt;/a&gt;) and not so much in umbrella issues. I use umbrella issues for tightly connected tasks which I need to track progress. In the list you outlined above, most of the tasks are already resolved so it seems that in this case the umbrella is purely for classification purposes. If you want to create an umbrella ticket feel free to do so. &lt;/p&gt;

&lt;p&gt;From my end, I will do a pass over the tickets you mentioned and add some labels (e.g., timestamp, datetime, compatibility) if they are not already there. Another thing maybe worth doing is add a JQL query in the wiki to help people in finding date, time, and timestamp related issues. &lt;/p&gt;</comment>
                            <comment id="17542926" author="zabetak" created="Fri, 27 May 2022 14:03:34 +0000"  >&lt;p&gt;The changes in this ticket accidentally introduced some inconsistency between vectorized and non-vectorized reader on the way they determine which conversion to use to read the data. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-26270&quot; title=&quot;Wrong timestamps when reading Hive 3.1.x Parquet files with vectorized reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-26270&quot;&gt;&lt;del&gt;HIVE-26270&lt;/del&gt;&lt;/a&gt; aims to re-align the behavior so this ticket should always be backported together with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-26270&quot; title=&quot;Wrong timestamps when reading Hive 3.1.x Parquet files with vectorized reader&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-26270&quot;&gt;&lt;del&gt;HIVE-26270&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310060">
                    <name>Container</name>
                                                                <inwardlinks description="Is contained by">
                                        <issuelink>
            <issuekey id="13503018">HIVE-26751</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13447235">HIVE-26270</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12905321">HIVE-12192</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13168544">HIVE-20007</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13324590">HIVE-24074</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13602733">IMPALA-13627</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13382795">HIVE-25219</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qxqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12343343">4.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>