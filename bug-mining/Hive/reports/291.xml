<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:55:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-957] Partition Metadata and Table Metadata</title>
                <link>https://issues.apache.org/jira/browse/HIVE-957</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Right now, we choose to use partition lever metadata. All metadata (column names, column types, fileformat, serde class, serde properties) right now are from partition level metadata. But hive does not support a method now to alter all existing partitions&apos; metadata, so users mostly choose to alter table metadata, and think hive will use the new  table level metadata. &lt;br/&gt;
One approach is that we may need to provide a way to let user alter all partitions&apos; metadata with one simple command. Right now a short term solution is to only get fileformat, serde class metadata from paritition level metadata, and use all other metadata from table.&lt;/p&gt;

&lt;p&gt;any comments?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12442003">HIVE-957</key>
            <summary>Partition Metadata and Table Metadata</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="he yongqiang">He Yongqiang</assignee>
                                    <reporter username="he yongqiang">He Yongqiang</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2009 22:37:46 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:12 +0000</updated>
                            <resolved>Tue, 1 Dec 2009 06:25:42 +0000</resolved>
                                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12783946" author="zshao" created="Mon, 30 Nov 2009 23:42:35 +0000"  >&lt;blockquote&gt;&lt;p&gt;Right now, we choose to use partition lever metadata. All metadata (column names, column types, fileformat, serde class, serde properties) right now are from partition level metadata. But hive does not support a method now to alter all existing partitions&apos; metadata, so users mostly choose to alter table metadata, and think hive will use the new table level metadata.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In our environment, we have been seeing users calling &quot;alter table&quot; on table-level meta data to:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Replace the column separator for all partitions (because they created the table with wrong separator)&lt;/li&gt;
	&lt;li&gt;Append additional columns&lt;/li&gt;
	&lt;li&gt;Rename existing columns&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12783950" author="prasadc" created="Mon, 30 Nov 2009 23:59:11 +0000"  >&lt;p&gt;it is not that much code to write a new command to alter all the partitions. the metadata calls already exist, only grammar needs to be enhanced.&lt;/p&gt;</comment>
                            <comment id="12783966" author="he yongqiang" created="Tue, 1 Dec 2009 00:36:12 +0000"  >&lt;p&gt;upload a quick fix to let hive always get column names, column types, serde parameters from table metadata. And get others from partition level metadata. &lt;/p&gt;

&lt;p&gt;Agree with Prasad, we should support a command to alter all partitions&apos; metadata. But is there a need to maintain partition metadata for column names, column types? &lt;/p&gt;</comment>
                            <comment id="12783988" author="namit" created="Tue, 1 Dec 2009 01:29:43 +0000"  >&lt;p&gt;Unless we change the query plan to work with different partitions - why should we allow the user to change the partition metadata ?&lt;br/&gt;
Agreed, it will work for some cases (file format, separator etc,), but it will not work for others (columns).&lt;/p&gt;

&lt;p&gt;Anyway, the patch looks good to me. But, I don&apos;t see the problem it is solving.&lt;/p&gt;</comment>
                            <comment id="12783996" author="zshao" created="Tue, 1 Dec 2009 01:39:37 +0000"  >&lt;p&gt;A. Replace the column separator for all partitions (because they created the table with wrong separator)&lt;br/&gt;
Users need to change partition metadata.&lt;/p&gt;

&lt;p&gt;B. Append additional columns&lt;br/&gt;
In the long term, users don&apos;t want to change partition metadata for this - We should fix Hive execution time to support missing columns (returning NULL) ( S1: Currently Hive execution time will output an error if the column in the expression is missing from the row object)&lt;/p&gt;

&lt;p&gt;C. Rename existing columns&lt;br/&gt;
Users need to change partition metadata.&lt;/p&gt;


&lt;p&gt;This patch will solve the problem caused by the following 3 items:&lt;br/&gt;
1. &quot;S1&quot; above&lt;br/&gt;
2. Hive execution time using partition metadata&lt;br/&gt;
3. User append additional columns by changing table metadata only&lt;/p&gt;</comment>
                            <comment id="12784009" author="namit" created="Tue, 1 Dec 2009 02:06:43 +0000"  >&lt;p&gt;OK - but can you add a new test :&lt;/p&gt;

&lt;p&gt;create table T &amp;#8211; 3 cols&lt;br/&gt;
create partition P1 --&amp;gt; will have 3 columns&lt;br/&gt;
alter table T add column 4&lt;br/&gt;
create partition P4 --&amp;gt; will have 4 columns&lt;/p&gt;


&lt;p&gt;select c1,c2,c3,c4 from T (include both P1 and P2).&lt;/p&gt;
</comment>
                            <comment id="12784013" author="he yongqiang" created="Tue, 1 Dec 2009 02:22:38 +0000"  >&lt;p&gt;Added a testcase for it. &lt;/p&gt;</comment>
                            <comment id="12784018" author="namit" created="Tue, 1 Dec 2009 02:34:12 +0000"  >&lt;p&gt;In the new test, can you drop the table that you created at the end ?&lt;/p&gt;</comment>
                            <comment id="12784024" author="he yongqiang" created="Tue, 1 Dec 2009 02:54:14 +0000"  >&lt;p&gt; Added the drop statement in the new patch. Thanks, Namit!&lt;/p&gt;</comment>
                            <comment id="12784080" author="namit" created="Tue, 1 Dec 2009 06:25:42 +0000"  >&lt;p&gt;Committed. Thanks Yongqiang&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12440347">HIVE-922</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12440347">HIVE-922</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12426488" name="hive-957-2009-11-30-2.patch" size="387723" author="he yongqiang" created="Tue, 1 Dec 2009 02:22:38 +0000"/>
                            <attachment id="12426490" name="hive-957-2009-11-30-3.patch" size="387951" author="he yongqiang" created="Tue, 1 Dec 2009 02:54:14 +0000"/>
                            <attachment id="12426475" name="hive-957-2009-11-30.patch" size="367363" author="he yongqiang" created="Tue, 1 Dec 2009 00:36:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73191</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>