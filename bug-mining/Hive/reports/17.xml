<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:50:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-116] Test run fails to complete</title>
                <link>https://issues.apache.org/jira/browse/HIVE-116</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When running either &quot;ant deploy test&quot; or just &quot;ant test&quot; from a newly checked out hive trunk (with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-90&quot; title=&quot;TestGetDBs assumes a specific File.list() order&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-90&quot;&gt;&lt;del&gt;HIVE-90&lt;/del&gt;&lt;/a&gt; applied) the test suite fails to complete. Not because tests cases fail but because classes can&apos;t be found. I assume it has something to do with the order the different modules are compiled in before the tests are run.&lt;/p&gt;</description>
                <environment>&lt;p&gt;32bit Ubuntu Hardy, Java6, Ant 1.7&lt;/p&gt;</environment>
        <key id="12409989">HIVE-116</key>
            <summary>Test run fails to complete</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="johanoskarsson">Johan Oskarsson</assignee>
                                    <reporter username="johanoskarsson">Johan Oskarsson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Dec 2008 18:23:34 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:30 +0000</updated>
                            <resolved>Mon, 8 Dec 2008 22:34:13 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12653398" author="johanoskarsson" created="Thu, 4 Dec 2008 18:25:14 +0000"  >&lt;p&gt;A log file showing the errors when running &quot;ant test&quot;&lt;/p&gt;</comment>
                            <comment id="12653402" author="athusoo" created="Thu, 4 Dec 2008 18:32:20 +0000"  >&lt;p&gt;Right now the dependency between the test and compile is broken.&lt;/p&gt;

&lt;p&gt;Also for tests you have to run &lt;/p&gt;

&lt;p&gt;ant -lib testlibs test...&lt;/p&gt;

&lt;p&gt;Since the build scripts do not automatically picj up junit.jar in testlibs.&lt;/p&gt;</comment>
                            <comment id="12653415" author="jsensarma" created="Thu, 4 Dec 2008 19:13:28 +0000"  >&lt;p&gt;yeah - test needs to depend on &apos;package&apos; i believe.&lt;/p&gt;</comment>
                            <comment id="12653509" author="johanoskarsson" created="Thu, 4 Dec 2008 22:02:21 +0000"  >&lt;p&gt;This patch makes the test target depend on deploy and changes the build.xml in the ql module to include junit.jar in the classpath.&lt;br/&gt;
It runs a lot further, however on my machine a test fails so the whole build doesn&apos;t complete.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Test org.apache.hadoop.hive.cli.TestCliDriver FAILED (timeout)&lt;br/&gt;
That should be another ticket though.&lt;/p&gt;</comment>
                            <comment id="12653862" author="athusoo" created="Fri, 5 Dec 2008 16:50:10 +0000"  >&lt;p&gt;Hmm.&lt;/p&gt;

&lt;p&gt;for some reason we were able to run the tests fine (apart from a couple of diffs in the test run). We will continue to investigate this.&lt;/p&gt;

&lt;p&gt;Regarding the patch,&lt;/p&gt;

&lt;p&gt;I am fine with the junit.jar change.&lt;/p&gt;

&lt;p&gt;The dependency between the test and deploy should however be in build-common.xml (dependency between test and jar) as otherwise this dependency will not be picked up if the test is run from within one of the sub directories.&lt;/p&gt;</comment>
                            <comment id="12653876" author="johanoskarsson" created="Fri, 5 Dec 2008 17:59:34 +0000"  >&lt;p&gt;Just having test depend on jar in build-common.xml doesn&apos;t work for me. Tried both running &quot;ant test&quot; straight in the project root and in the metastore dir.&lt;br/&gt;
For example, doing the latter gives errors such as:&lt;br/&gt;
core-compile:&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;echo&amp;#93;&lt;/span&gt; Compiling: &lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; Compiling 38 source files to /home/johan/workspace/hive-116/build/metastore/classes&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; /home/johan/workspace/hive-116/metastore/src/java/org/apache/hadoop/hive/metastore/DB.java:30: package org.apache.hadoop.hive.conf does not exist&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;javac&amp;#93;&lt;/span&gt; import org.apache.hadoop.hive.conf.HiveConf;          &lt;/p&gt;

&lt;p&gt;etc etc....&lt;br/&gt;
I assume they&apos;re not run in the right order?&lt;/p&gt;</comment>
                            <comment id="12653905" author="athusoo" created="Fri, 5 Dec 2008 19:23:43 +0000"  >&lt;p&gt;yup. &lt;/p&gt;

&lt;p&gt;It seems that the directory dependencies are not set up properly. Ideally&lt;/p&gt;

&lt;p&gt;serde depends on common&lt;br/&gt;
metastore depends on serde&lt;br/&gt;
ql depends on serde and metastore&lt;/p&gt;

&lt;p&gt;for the main directories.&lt;/p&gt;

&lt;p&gt;I guess without fixing those, it is futile to fix the builds within each of those packages for now.&lt;/p&gt;

&lt;p&gt;Will file a separate JIRA for that.&lt;/p&gt;

&lt;p&gt;In the light of this I think the latest patch is good.&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="12654613" author="zshao" created="Mon, 8 Dec 2008 22:34:03 +0000"  >&lt;p&gt;committed 724496&lt;/p&gt;</comment>
                            <comment id="12654614" author="zshao" created="Mon, 8 Dec 2008 22:34:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-116&quot; title=&quot;Test run fails to complete&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-116&quot;&gt;&lt;del&gt;HIVE-116&lt;/del&gt;&lt;/a&gt;. Let test depend on deploy. (Johan Oskarsson through zshao)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12395336" name="HIVE-116.patch" size="1025" author="johanoskarsson" created="Thu, 4 Dec 2008 22:02:21 +0000"/>
                            <attachment id="12395308" name="test.log" size="37385" author="johanoskarsson" created="Thu, 4 Dec 2008 18:25:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73771</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l7y7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121938</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>