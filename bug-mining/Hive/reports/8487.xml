<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:24:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-26779] UNION ALL throws SemanticException when trying to remove partition predicates: fail to find child from parent</title>
                <link>https://issues.apache.org/jira/browse/HIVE-26779</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;blockquote&gt;&lt;p&gt;Reproduce sql:&lt;/p&gt;

&lt;p&gt;drop table if exists tez_test_t1;&lt;br/&gt;
create table tez_test_t1(md_exper string);&lt;br/&gt;
insert into tez_test_t1 values(&apos;tez_test_t1-md_expr&apos;);&lt;/p&gt;

&lt;p&gt;drop table if exists tez_test_t5;&lt;br/&gt;
create table tez_test_t5(md_exper string, did string);&lt;br/&gt;
insert into tez_test_t5 values(&apos;tez_test_t5-md_expr&apos;,&apos;tez_test_t5-did&apos;);&lt;/p&gt;

&lt;p&gt;drop table if exists tez_test_t2;&lt;br/&gt;
create table tez_test_t2(did string);&lt;br/&gt;
insert into tez_test_t2 values(&apos;tez_test_t2-did&apos;);&lt;/p&gt;


&lt;p&gt;SELECT &#160;md_exper,null as ads_h5_gap , null as first_login_did, null as inclick_did&lt;br/&gt;
&#160; &#160; FROM tez_test_t1&#160;&lt;br/&gt;
UNION ALL&#160;&lt;br/&gt;
SELECT md_exper, ads_h5_gap ,&#160;&lt;br/&gt;
&#160; &#160;NULL AS first_login_did,did AS &#160;inclick_did&lt;br/&gt;
&#160; &#160;FROM tez_test_t5 &#160;&lt;br/&gt;
&#160; &#160;LATERAL VIEW explode(split(&apos;0,6&apos;, &apos;,&apos;)) gaps AS ads_h5_gap&#160;&lt;br/&gt;
UNION ALL&#160;&lt;br/&gt;
&#160; &#160;SELECT &apos;&apos; AS md_exper,&apos;0,6&apos; as ads_h5_gap , &#160;&lt;br/&gt;
&#160; &#160;did AS first_login_did, NULL AS inclick_did&lt;br/&gt;
&#160; &#160;FROM tez_test_t2&#160;&lt;br/&gt;
&#160; &#160;GROUP BY did;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;StackTrace&lt;/p&gt;

&lt;p&gt;2022-11-27T09:31:06,801 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;21d35a7f-9625-46ae-9c3d-13ca925f55cb main&amp;#93;&lt;/span&gt;: ql.Driver (&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;)) - FAILED: SemanticException Exception when trying to remove partition predicates: fail to find child from parent&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.hive.ql.parse.SemanticException: Exception when trying to remove partition predicates: fail to find child from parent&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; at org.apache.hadoop.hive.ql.exec.Operator.removeChildAndAdoptItsChildren(Operator.java:859)&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; at org.apache.hadoop.hive.ql.parse.GenTezUtils.removeUnionOperators(GenTezUtils.java:348)&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; at org.apache.hadoop.hive.ql.parse.TezCompiler.generateTaskTree(TezCompiler.java:573)&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; at org.apache.hadoop.hive.ql.parse.TaskCompiler.compile(TaskCompiler.java:241)&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:12333)&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; at org.apache.hadoop.hive.ql.parse.CalcitePlanner.analyzeInternal(CalcitePlanner.java:330)&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:286)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13506162">HIVE-26779</key>
            <summary>UNION ALL throws SemanticException when trying to remove partition predicates: fail to find child from parent</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kkasa">Krisztian Kasa</assignee>
                                    <reporter username="houzhizhen">Zhizhen Hou</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 28 Nov 2022 02:40:04 +0000</created>
                <updated>Thu, 27 Apr 2023 11:50:39 +0000</updated>
                            <resolved>Thu, 27 Apr 2023 11:50:39 +0000</resolved>
                                    <version>4.0.0-alpha-2</version>
                                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3000">50m</timespent>
                                <comments>
                            <comment id="17716645" author="kkasa" created="Wed, 26 Apr 2023 09:56:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=houzhizhen&quot; class=&quot;user-hover&quot; rel=&quot;houzhizhen&quot;&gt;houzhizhen&lt;/a&gt;&lt;br/&gt;
Could you please review the attached PR?&lt;/p&gt;</comment>
                            <comment id="17717144" author="kkasa" created="Thu, 27 Apr 2023 11:50:39 +0000"  >&lt;p&gt;Merged to master. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dkuzmenko&quot; class=&quot;user-hover&quot; rel=&quot;dkuzmenko&quot;&gt;dkuzmenko&lt;/a&gt; for review.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1crnc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>