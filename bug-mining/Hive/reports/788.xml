<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:00:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-2792] SUBSTR(CAST(&lt;string&gt; AS BINARY)) produces unexpected results</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2792</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description></description>
                <environment></environment>
        <key id="12541916">HIVE-2792</key>
            <summary>SUBSTR(CAST(&lt;string&gt; AS BINARY)) produces unexpected results</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="cwsteinbach">Carl Steinbach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2012 02:25:34 +0000</created>
                <updated>Wed, 9 Jan 2013 10:23:18 +0000</updated>
                            <resolved>Tue, 21 Feb 2012 07:43:36 +0000</resolved>
                                    <version>0.8.0</version>
                    <version>0.8.1</version>
                                    <fixVersion>0.9.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13204200" author="cwsteinbach" created="Thu, 9 Feb 2012 02:29:08 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;SELECT
  value,
  SUBSTR(value, 4, 5),
  SUBSTR(CAST(value AS BINARY), 4, 5)
FROM src
ORDER BY value;
...
val_0	_0	039    &amp;lt;-- Third column of the first three rows should be the same, right?
val_0	_0	096    
val_0	_0	073
val_10	_10	105
val_100	_100	100
val_100	_100	100
val_103	_103	103
val_103	_103	103
val_104	_104	104
val_104	_104	104
val_105	_105	105
val_11	_11	116
val_111	_111	111
val_113	_113	113
val_113	_113	113
val_114	_114	114
val_116	_116	116
val_118	_118	118
val_118	_118	118
val_119	_119	119
val_119	_119	119
val_119	_119	119
val_12	_12	124
val_12	_12	124
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13211719" author="phabricator@reviews.facebook.net" created="Mon, 20 Feb 2012 08:41:38 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-848 SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_substr.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_substr.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/3831/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/3831/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13211720" author="phabricator@reviews.facebook.net" created="Mon, 20 Feb 2012 08:43:35 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;/p&gt;

&lt;p&gt;  For substr() for binary type..&lt;br/&gt;
  1. Fixed length problem (dummy values at the end)&lt;br/&gt;
  2. Changed to use 1-based index (like mysql)&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13212268" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 01:09:33 +0000"  >&lt;p&gt;ashutoshc has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;/p&gt;

&lt;p&gt;  Patch looks good. Can you update the testcase as I noted so that we have better coverage?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/results/clientpositive/ba_table_udfs.q.out:28 For a better test so that it captures variance in the rows, modify the test in ba_tables_udfs.q to SUBSTR(src.value AS BINARY), 3),&lt;br/&gt;
  SUBSTR(src.value AS BINARY), -4,3)&lt;/p&gt;




&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-848&lt;/p&gt;</comment>
                            <comment id="13212269" author="ashutoshc" created="Tue, 21 Feb 2012 01:10:20 +0000"  >&lt;p&gt;@Navis, Can you also please upload the updated patch directly on jira granting ASF perms?&lt;/p&gt;</comment>
                            <comment id="13212279" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 01:23:33 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;br/&gt;
Reviewers: JIRA, ashutoshc&lt;/p&gt;

&lt;p&gt;  added test cases requested&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/udf_substr.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/udf_substr.q.out&lt;/p&gt;</comment>
                            <comment id="13212296" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 02:19:32 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D1797&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D1797&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-848&lt;/p&gt;</comment>
                            <comment id="13212298" author="ashutoshc" created="Tue, 21 Feb 2012 02:19:47 +0000"  >&lt;p&gt;@Navis,&lt;br/&gt;
Can you please upload the patch on jira also granting ASF perms. On top of this page, click More Actions &amp;gt; Attach Files. Then after attaching your patch file, click on radio button granting ASF perms.&lt;/p&gt;</comment>
                            <comment id="13212426" author="ashutoshc" created="Tue, 21 Feb 2012 07:43:38 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13212572" author="hudson" created="Tue, 21 Feb 2012 13:22:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1267 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1267/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1267/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt;: SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results (navis via hashutosh) (Revision 1291633)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_substr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substr.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13212985" author="hudson" created="Tue, 21 Feb 2012 21:42:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1268 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1268/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1268/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt;: SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results (navis via hashutosh) (Revision 1291633)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_substr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substr.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265262" author="ashutoshc" created="Mon, 30 Apr 2012 21:11:23 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13547846" author="hudson" created="Wed, 9 Jan 2013 10:23:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2792&quot; title=&quot;SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2792&quot;&gt;&lt;del&gt;HIVE-2792&lt;/del&gt;&lt;/a&gt;: SUBSTR(CAST(&amp;lt;string&amp;gt; AS BINARY)) produces unexpected results (navis via hashutosh) (Revision 1291633)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1291633&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFSubstr.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ba_table_udfs.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/udf_substr.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ba_table_udfs.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/udf_substr.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12515227" name="ASF.LICENSE.NOT.GRANTED--HIVE-2792.D1797.1.patch" size="13401" author="phabricator@reviews.facebook.net" created="Mon, 20 Feb 2012 08:41:47 +0000"/>
                            <attachment id="12515298" name="ASF.LICENSE.NOT.GRANTED--HIVE-2792.D1797.2.patch" size="15695" author="phabricator@reviews.facebook.net" created="Tue, 21 Feb 2012 01:23:34 +0000"/>
                            <attachment id="12515311" name="HIVE-2792.D1797.2.patch" size="15695" author="navis" created="Tue, 21 Feb 2012 02:26:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227203</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124146</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>