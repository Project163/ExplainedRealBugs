<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:01:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3101] dropTable will all ways excute hook.rollbackDropTable whether drop table success or faild.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3101</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;see  the codes:&lt;br/&gt;
 boolean success = false;&lt;br/&gt;
    try {&lt;br/&gt;
      client.drop_table(dbname, name, deleteData);&lt;br/&gt;
      if (hook != null) &lt;/p&gt;
{
        hook.commitDropTable(tbl, deleteData);
      }
&lt;p&gt;    } catch (NoSuchObjectException e) {&lt;br/&gt;
      if (!ignoreUknownTab) &lt;/p&gt;
{
        throw e;
      }
&lt;p&gt;    } finally {&lt;br/&gt;
      if (!success &amp;amp;&amp;amp; (hook != null)) &lt;/p&gt;
{
        hook.rollbackDropTable(tbl);
      }
&lt;p&gt;    }&lt;/p&gt;

&lt;p&gt;success  will always false, whether  the drop was success or faild.&lt;br/&gt;
so it&apos;s a bug. &lt;/p&gt;
</description>
                <environment></environment>
        <key id="12559669">HIVE-3101</key>
            <summary>dropTable will all ways excute hook.rollbackDropTable whether drop table success or faild.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ransom">Zhiqiang He</assignee>
                                    <reporter username="ransom">Zhiqiang He</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Jun 2012 11:12:50 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:01 +0000</updated>
                            <resolved>Sun, 10 Jun 2012 02:07:58 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13290930" author="ransom" created="Thu, 7 Jun 2012 11:14:48 +0000"  >&lt;p&gt;add success=true in the codes.&lt;/p&gt;</comment>
                            <comment id="13291809" author="appodictic" created="Fri, 8 Jun 2012 14:51:21 +0000"  >&lt;p&gt;Can we create a unit test around this? Hooks should print during testing and then we have some coverage here.&lt;/p&gt;</comment>
                            <comment id="13291812" author="ransom" created="Fri, 8 Jun 2012 15:02:36 +0000"  >&lt;p&gt;the default hook is HBaseStorageHandler, it will be cover these codes when create hbase table. &lt;br/&gt;
so i think we already have some unit test about hbase table in hive. &lt;br/&gt;
it doesn&apos;t need to create unit test.&lt;br/&gt;
if we need more test case, i will create it. &lt;/p&gt;</comment>
                            <comment id="13291814" author="appodictic" created="Fri, 8 Jun 2012 15:06:09 +0000"  >&lt;p&gt;I will review.&lt;/p&gt;</comment>
                            <comment id="13292460" author="appodictic" created="Sun, 10 Jun 2012 01:52:06 +0000"  >&lt;p&gt;+1 will commit.&lt;/p&gt;</comment>
                            <comment id="13292464" author="appodictic" created="Sun, 10 Jun 2012 02:07:58 +0000"  >&lt;p&gt;Committed. Thanks.&lt;/p&gt;</comment>
                            <comment id="13292485" author="hudson" created="Sun, 10 Jun 2012 07:24:00 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1477 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1477/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1477/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3101&quot; title=&quot;dropTable will all ways excute hook.rollbackDropTable whether drop table success or faild.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3101&quot;&gt;&lt;del&gt;HIVE-3101&lt;/del&gt;&lt;/a&gt;. Drop table rollback hook always called. (Ransom Hezhiqiang via egc) (Revision 1348523)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
ecapriolo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348523&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547883" author="hudson" created="Wed, 9 Jan 2013 10:23:26 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3101&quot; title=&quot;dropTable will all ways excute hook.rollbackDropTable whether drop table success or faild.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3101&quot;&gt;&lt;del&gt;HIVE-3101&lt;/del&gt;&lt;/a&gt;. Drop table rollback hook always called. (Ransom Hezhiqiang via egc) (Revision 1348523)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
ecapriolo : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1348523&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550007" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:01 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12531253" name="HIVE-3101.1.patch" size="568" author="ransom" created="Thu, 7 Jun 2012 11:14:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242400</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02uev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14528</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>