<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:26:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8629] Streaming / ACID : hive cli session creation takes too long and times out if execution engine is tez</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8629</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When creating a hive session to run basic &quot;alter table create partition&quot;  queries, the session creation takes too long (more than 5 sec)  if the hive execution engine is set to tez.&lt;/p&gt;

&lt;p&gt;Since the streaming clients dont care about Tez , it can explicitly override the setting to mr.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12750968">HIVE-8629</key>
            <summary>Streaming / ACID : hive cli session creation takes too long and times out if execution engine is tez</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="roshan_naik">Roshan Naik</assignee>
                                    <reporter username="roshan_naik">Roshan Naik</reporter>
                        <labels>
                            <label>ACID</label>
                            <label>Streaming</label>
                    </labels>
                <created>Tue, 28 Oct 2014 03:25:03 +0000</created>
                <updated>Tue, 1 Oct 2019 22:07:46 +0000</updated>
                            <resolved>Wed, 29 Oct 2014 23:34:19 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14186294" author="roshan_naik" created="Tue, 28 Oct 2014 03:35:26 +0000"  >&lt;p&gt;Uploading patch&lt;/p&gt;</comment>
                            <comment id="14186339" author="gopalv" created="Tue, 28 Oct 2014 04:20:14 +0000"  >&lt;p&gt;Does this config change affect compaction jobs triggered by ACID?&lt;/p&gt;</comment>
                            <comment id="14186702" author="hiveqa" created="Tue, 28 Oct 2014 11:11:58 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12677512/HIVE-8629.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12677512/HIVE-8629.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6579 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.minikdc.TestJdbcWithMiniKdc.testNegativeTokenAuth
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1498/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1498/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1498/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1498/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1498/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1498/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12677512 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14186997" author="alangates" created="Tue, 28 Oct 2014 16:02:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;Does this config change affect compaction jobs triggered by ACID?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;No.  Compactions are done by the metastore service, not the clients.  And they are always done using MR, regardless of what execution engine is configured.&lt;/p&gt;</comment>
                            <comment id="14187002" author="alangates" created="Tue, 28 Oct 2014 16:07:42 +0000"  >&lt;p&gt;Why is it necessary to set METASTORE_EXECUTE_SET_UGI?  As far as I can tell this is only used by the metastore, and so has no affect on the client.&lt;/p&gt;

&lt;p&gt;I think you should add a LOG.info() in overrideConfSettings so that users know you are overriding some values in their configuration.&lt;/p&gt;</comment>
                            <comment id="14187329" author="roshan_naik" created="Tue, 28 Oct 2014 19:27:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gates&quot; class=&quot;user-hover&quot; rel=&quot;gates&quot;&gt;gates&lt;/a&gt;  the without setugi, the directories created by the metastore during add partition etc are done as hive user instead of the client user of the metastore process, consequently leading to incorrect permissions and later failure to stream to those directories.&lt;/p&gt;

&lt;p&gt;WRT Log.info(): Since this done each time a new connection is created, which occurs multiple times over the duration of a long running streaming process, to reduce noise in the log output .. i am wondering if we should document this instead of log.info()  ? Either I am fine. Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="14187676" author="alangates" created="Tue, 28 Oct 2014 23:12:28 +0000"  >&lt;p&gt;Doing LOG.debug and documenting it should be fine.  Other than that, +1.&lt;/p&gt;</comment>
                            <comment id="14187872" author="roshan_naik" created="Wed, 29 Oct 2014 01:33:28 +0000"  >&lt;p&gt;Revised patch incorporating Alan&apos;s comments&lt;/p&gt;</comment>
                            <comment id="14189223" author="hagleitn" created="Wed, 29 Oct 2014 23:06:35 +0000"  >&lt;p&gt;+1 for hive .14&lt;/p&gt;</comment>
                            <comment id="14189695" author="lefty@hortonworks.com" created="Thu, 30 Oct 2014 06:22:58 +0000"  >&lt;p&gt;Where should this be documented?&lt;/p&gt;

&lt;p&gt;Also, can the release note be changed to something more helpful?&lt;/p&gt;</comment>
                            <comment id="14189697" author="roshan_naik" created="Thu, 30 Oct 2014 06:25:14 +0000"  >&lt;p&gt;I added the doc to  &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Streaming+Data+Ingest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Streaming+Data+Ingest&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14189704" author="lefty@hortonworks.com" created="Thu, 30 Oct 2014 06:33:30 +0000"  >&lt;p&gt;Excellent, removing the TODOC14 label.&lt;/p&gt;

&lt;p&gt;One question about the doc:  Is something missing after &quot;before&quot; in this sentence? &amp;#8211;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Regardless of what values are set in hive-site.xml or custom HiveConf, the API will internally override some settings in it before to ensure correct streaming behavior.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14189705" author="roshan_naik" created="Thu, 30 Oct 2014 06:36:21 +0000"  >&lt;p&gt;&quot;before&quot; should not be there.. just deleted it. thanks for catching it&lt;/p&gt;</comment>
                            <comment id="14210809" author="thejas" created="Thu, 13 Nov 2014 19:42:42 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12677512" name="HIVE-8629.patch" size="2024" author="roshan_naik" created="Tue, 28 Oct 2014 03:35:26 +0000"/>
                            <attachment id="12677798" name="HIVE-8629.v2.patch" size="2600" author="roshan_naik" created="Wed, 29 Oct 2014 01:33:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21ndj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Patch committed to trunk and branch 0.14.  Thanks Roshan.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Streaming</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>