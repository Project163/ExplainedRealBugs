<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:17:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6521] WebHCat cannot fetch correct percentComplete for Hive jobs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6521</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;WebHCat E2E test TestHive_7 failed because percentComplete wasn&apos;t returned as expected.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;check_job_percent_complete failed. got percentComplete &quot;map 0% reduce 0%&quot;,  expected  &quot;map 100% reduce 100%&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, there are two problems here.&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The log parsing is broken for status of percentComplete. In the stderr of the job we see:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Launching Job 1 out of 1
Number of reduce tasks is set to 0 since there&apos;s no reduce operator
Starting Job = job_1393486488858_0691, Tracking URL = http://ambari-sec-1393480847-others-2-4.cs1cloud.internal:8088/proxy/application_1393486488858_0691/
Kill Command = /usr/lib/hadoop/bin/hadoop job  -kill job_1393486488858_0691
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 0
2014-02-27 18:40:50,166 Stage-1 map = 0%,  reduce = 0%
2014-02-27 18:40:56,599 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 0.87 sec
2014-02-27 18:40:57,656 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 0.87 sec
2014-02-27 18:40:58,706 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 0.87 sec
MapReduce Total cumulative CPU time: 870 msec
Ended Job = job_1393486488858_0691
MapReduce Jobs Launched: 
Job 0: Map: 1   Cumulative CPU: 0.87 sec   HDFS Read: 305 HDFS Write: 0 SUCCESS
Total MapReduce CPU Time Spent: 870 msec
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The assumption in the code is that the line containing the percent status will end after &quot;reduce = \d+%&quot; but that fails with the above.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;The last status from Hive job is &quot;map = 100%,  reduce = 0%&quot; instead of expected &quot;map = 100%,  reduce = 100%&quot;.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12697880">HIVE-6521</key>
            <summary>WebHCat cannot fetch correct percentComplete for Hive jobs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepesh">Deepesh Khandelwal</assignee>
                                    <reporter username="deepesh">Deepesh Khandelwal</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Feb 2014 07:56:01 +0000</created>
                <updated>Thu, 13 Nov 2014 19:40:42 +0000</updated>
                            <resolved>Wed, 26 Mar 2014 02:19:32 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>WebHCat</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13915544" author="deepesh" created="Fri, 28 Feb 2014 07:59:57 +0000"  >&lt;p&gt;Attached patch fixes two things:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The regular expression to comply with the Hive percent status logging.&lt;/li&gt;
	&lt;li&gt;Modified the test so that we also exercise the reduce step.&lt;br/&gt;
Please review.&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="13916105" author="deepesh" created="Fri, 28 Feb 2014 18:02:33 +0000"  >&lt;p&gt;The previous patch was getting the &quot;Cumulative CPU ...&quot; in the percentComplete string. New patch does better job in parsing.&lt;/p&gt;</comment>
                            <comment id="13916931" author="hiveqa" created="Sat, 1 Mar 2014 04:57:20 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12631797/HIVE-6521.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12631797/HIVE-6521.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5185 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_auto_sortmerge_join_16
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucket_num_reducers
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1560/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1560/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1560/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1560/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12631797&lt;/p&gt;</comment>
                            <comment id="13926022" author="ekoifman" created="Mon, 10 Mar 2014 18:37:42 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13947304" author="sushanth" created="Tue, 25 Mar 2014 22:54:18 +0000"  >&lt;p&gt;I think there&apos;s an issue here with a unit test failure with -Phadoop-2, looking into this.&lt;/p&gt;</comment>
                            <comment id="13947351" author="sushanth" created="Tue, 25 Mar 2014 23:51:35 +0000"  >&lt;p&gt;Okay, nvm, my apologies, this patch is okay - my issue was from another source. +1 to this patch.&lt;/p&gt;</comment>
                            <comment id="13947467" author="sushanth" created="Wed, 26 Mar 2014 02:19:17 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Deepesh for the patch, and Thanks Eugene, for the review.&lt;/p&gt;</comment>
                            <comment id="13947473" author="deepesh" created="Wed, 26 Mar 2014 02:27:22 +0000"  >&lt;p&gt;Thanks Eugene for the review and Sushanth for the committ.&lt;/p&gt;</comment>
                            <comment id="14210406" author="thejas" created="Thu, 13 Nov 2014 19:40:41 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12631797" name="HIVE-6521.2.patch" size="2302" author="deepesh" created="Fri, 28 Feb 2014 18:02:33 +0000"/>
                            <attachment id="12631690" name="HIVE-6521.patch" size="1689" author="deepesh" created="Fri, 28 Feb 2014 07:59:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376354</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1supz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>376650</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>