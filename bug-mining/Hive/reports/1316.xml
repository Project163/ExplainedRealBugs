<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:07:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4689] For outerjoins, joinEmitInterval might make wrong result</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4689</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Alias filter tag is calculated for each group and used for outer joins. But if joinEmitInterval is smaller than the group size, pre-matured alias filter tag would be used and might introduce different(wrong) result.&lt;/p&gt;

&lt;p&gt;It can be observed in join_1to1.q test but I cannot imagine proper solution which does not override intention of joinEmitInterval. Should it be disabled for outer joins?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12651896">HIVE-4689</key>
            <summary>For outerjoins, joinEmitInterval might make wrong result</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="navis">Navis Ryu</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Jun 2013 03:57:49 +0000</created>
                <updated>Thu, 1 Dec 2016 11:52:18 +0000</updated>
                            <resolved>Wed, 3 Jul 2013 15:59:28 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13680229" author="phabricator@reviews.facebook.net" created="Tue, 11 Jun 2013 05:40:24 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4689&quot; title=&quot;For outerjoins, joinEmitInterval might make wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4689&quot;&gt;&lt;del&gt;HIVE-4689&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; For outerjoins, joinEmitInterval might make wrong result&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4689&quot; title=&quot;For outerjoins, joinEmitInterval might make wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4689&quot;&gt;&lt;del&gt;HIVE-4689&lt;/del&gt;&lt;/a&gt; For outerjoins, joinEmitInterval might make wrong result&lt;/p&gt;

&lt;p&gt;Alias filter tag is calculated for each group and used for outer joins. But if joinEmitInterval is smaller than the group size, pre-matured alias filter tag would be used and might introduce different(wrong) result.&lt;/p&gt;

&lt;p&gt;It can be observed in join_1to1.q test but I cannot imagine proper solution which does not override intention of joinEmitInterval. Should it be disabled for outer joins?&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11211&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;br/&gt;
  ql/src/test/results/clientpositive/join_1to1.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/26691/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/26691/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13680569" author="brocknoland" created="Tue, 11 Jun 2013 19:15:43 +0000"  >&lt;p&gt;Clicking &quot;Submit Patch&quot; so this shows up in the patch review queue.&lt;/p&gt;</comment>
                            <comment id="13690881" author="ashutoshc" created="Fri, 21 Jun 2013 23:17:27 +0000"  >&lt;p&gt;I am not super aware of this config. What exactly does it govern? It seems like it for buffering rows pulled from reducer iterator in memory. So, we are trading speed with memory utilization with config. Is that correct? &lt;br/&gt;
In that case think it makes sense to disable this altogether for outer join case. &lt;/p&gt;</comment>
                            <comment id="13696273" author="ashutoshc" created="Sun, 30 Jun 2013 05:12:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; I think we should disable joinEmitInterval altogether for outer joins.&lt;/p&gt;</comment>
                            <comment id="13697359" author="navis" created="Tue, 2 Jul 2013 00:30:24 +0000"  >&lt;p&gt;Sorry, I was busy for these days. &lt;/p&gt;

&lt;p&gt;I think disabling joinEmitInterval for all outer joins seemed too much. This problem occurs when alias-filter is needed, which is used only for outer joins with condition on &apos;on&apos; clause. Current patch is for that.&lt;/p&gt;</comment>
                            <comment id="13697455" author="yhuai" created="Tue, 2 Jul 2013 03:12:11 +0000"  >&lt;p&gt;I agree with Navis. Here is my understanding. Right now, if we do not have alias-filter, a non-matching row will be generated only when either left or right table does not have a matching row (assuming we have a 2-way join). In this case, either the container of the left table or that of the right table will be empty, so joinEmitInterval will not affect the correctness of results.&lt;/p&gt;</comment>
                            <comment id="13697958" author="ashutoshc" created="Tue, 2 Jul 2013 16:45:00 +0000"  >&lt;p&gt;Okies. Lets go ahead with current patch. +1&lt;/p&gt;</comment>
                            <comment id="13699109" author="ashutoshc" created="Wed, 3 Jul 2013 15:59:28 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13699114" author="hudson" created="Wed, 3 Jul 2013 16:02:10 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2177 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2177/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2177/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4689&quot; title=&quot;For outerjoins, joinEmitInterval might make wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4689&quot;&gt;&lt;del&gt;HIVE-4689&lt;/del&gt;&lt;/a&gt; : For outerjoins, joinEmitInterval might make wrong result (Navis via Ashutosh Chauhan) (Revision 1499453)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1499453&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1499453&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join_1to1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13699751" author="hudson" created="Thu, 4 Jul 2013 04:10:44 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #270 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/270/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/270/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4689&quot; title=&quot;For outerjoins, joinEmitInterval might make wrong result&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4689&quot;&gt;&lt;del&gt;HIVE-4689&lt;/del&gt;&lt;/a&gt; : For outerjoins, joinEmitInterval might make wrong result (Navis via Ashutosh Chauhan) (Revision 1499453)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1499453&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1499453&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/JoinOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join_1to1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13796018" author="ashutoshc" created="Tue, 15 Oct 2013 23:30:26 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13024745">HIVE-15327</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12654282">HIVE-4781</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12587202" name="HIVE-4689.D11211.1.patch" size="3155" author="phabricator@reviews.facebook.net" created="Tue, 11 Jun 2013 05:40:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332220</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lb8n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>