<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:54:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-752] Encountered ClassNotFound exception when trying HWI server</title>
                <link>https://issues.apache.org/jira/browse/HIVE-752</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Encountered ClassNotFound exception (for class: org.apache.jetty.hive.shims.Jetty18Shims) when trying to start HWI server on Hadoop 18.&lt;/p&gt;

&lt;p&gt;It appears that the class ShimLoader (org.apache.hadoop.hive.shims.ShimLoader) is referring to incorrect classes as below:&lt;/p&gt;

&lt;p&gt;static &lt;/p&gt;
{
    JETTY_SHIM_CLASSES.put(&quot;0.17&quot;, &quot;org.apache.jetty.hive.shims.Jetty17Shims&quot;);
    JETTY_SHIM_CLASSES.put(&quot;0.18&quot;, &quot;org.apache.jetty.hive.shims.Jetty18Shims&quot;);
    JETTY_SHIM_CLASSES.put(&quot;0.19&quot;, &quot;org.apache.jetty.hive.shims.Jetty19Shims&quot;);
    JETTY_SHIM_CLASSES.put(&quot;0.20&quot;, &quot;org.apache.jetty.hive.shims.Jetty20Shims&quot;);
  }

&lt;p&gt;however, I think it should be as below:&lt;/p&gt;

&lt;p&gt; static &lt;/p&gt;
  {
	  JETTY_SHIM_CLASSES.put(&quot;0.17&quot;, &quot;org.apache.hadoop.hive.shims.Jetty17Shims&quot;);
	  JETTY_SHIM_CLASSES.put(&quot;0.18&quot;, &quot;org.apache.hadoop.hive.shims.Jetty18Shims&quot;);
	  JETTY_SHIM_CLASSES.put(&quot;0.19&quot;, &quot;org.apache.hadoop.hive.shims.Jetty19Shims&quot;);
	  JETTY_SHIM_CLASSES.put(&quot;0.20&quot;, &quot;org.apache.hadoop.hive.shims.Jetty20Shims&quot;);
  } 

&lt;p&gt;Wondering if anybody else encountered this.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Hadoop 0.18.3&lt;/p&gt;</environment>
        <key id="12432924">HIVE-752</key>
            <summary>Encountered ClassNotFound exception when trying HWI server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="appodictic">Edward Capriolo</assignee>
                                    <reporter username="rvenkatesan">Venkat Ramachandran</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Aug 2009 23:37:55 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:43 +0000</updated>
                            <resolved>Wed, 2 Sep 2009 00:09:36 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Clients</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12742716" author="tlipcon" created="Thu, 13 Aug 2009 04:58:25 +0000"  >&lt;p&gt;Oops - you&apos;re totally right. Careless find/replace on my part. The fix you proposed should be correct.&lt;/p&gt;</comment>
                            <comment id="12742865" author="appodictic" created="Thu, 13 Aug 2009 15:22:43 +0000"  >&lt;p&gt;Todd,&lt;/p&gt;

&lt;p&gt;In my reflection patch before your shim work I added a test case to test that the jetty Server starts. We should have something similar. &lt;/p&gt;</comment>
                            <comment id="12748974" author="appodictic" created="Fri, 28 Aug 2009 20:47:13 +0000"  >&lt;p&gt;Even with the changes above HWI is having a hard time starting up. I will look into this.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[ecapriolo@laptop1 dist]$ HADOOP_HOME=/home/ecapriolo/hadoop-0.20.0 bin/hive --service hwi
09/08/28 16:35:33 INFO hwi.HWIServer: HWI is starting up
09/08/28 16:35:33 FATAL hwi.HWIServer: HWI WAR file not found at ${HIVE_HOME}/lib/hive-hwi.war
09/08/28 16:35:33 INFO mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
09/08/28 16:35:33 INFO mortbay.log: jetty-6.1.14
09/08/28 16:35:33 ERROR mortbay.log: Failed startup of context org.mortbay.jetty.webapp.WebAppContext@e64686{/,null}
java.lang.NullPointerException
        at org.mortbay.resource.Resource.newResource(Resource.java:140)
        at org.mortbay.resource.Resource.newResource(Resource.java:120)
        at org.mortbay.jetty.webapp.WebAppContext.resolveWebApp(WebAppContext.java:885)
        at org.mortbay.jetty.webapp.WebAppContext.getWebInf(WebAppContext.java:793)
        at org.mortbay.jetty.webapp.WebInfConfiguration.configureClassLoader(WebInfConfiguration.java:62)
        at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:456)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
        at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
        at org.mortbay.jetty.Server.doStart(Server.java:222)
        at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
        at org.apache.hadoop.hive.hwi.HWIServer.start(HWIServer.java:79)
        at org.apache.hadoop.hive.hwi.HWIServer.main(HWIServer.java:108)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
09/08/28 16:35:33 INFO mortbay.log: Started SocketConnector@0.0.0.0:9999


&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12748995" author="appodictic" created="Fri, 28 Aug 2009 21:41:04 +0000"  >&lt;p&gt;All, &lt;/p&gt;

&lt;p&gt;I am a little perturbed about this. If I am looking at this correctly this is the first and only revision of ShimLoader in SVN.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc/hadoop/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/ShimLoader.java?view=log&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/hadoop/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/ShimLoader.java?view=log&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;As Venkat points out this Jetty Shims are completely broken. Which the class names specified &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.jetty.hive.shims.Jetty19Shims
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;incorrectly, I believe any attempt to start up HWI with any version of Hadoop would have failed. I have fixed the class name for 20shim and that is failing now with a null pointer.&lt;/p&gt;

&lt;p&gt;Why did we commit shims without any test cases? &lt;/p&gt;

&lt;p&gt;I know HWI can be somewhat awkward to test case, but was it tested at all?&lt;/p&gt;</comment>
                            <comment id="12748999" author="tlipcon" created="Fri, 28 Aug 2009 21:50:18 +0000"  >&lt;p&gt;Hi Edward,&lt;/p&gt;

&lt;p&gt;As I think I noticed in the original JIRA, I did not manually test HWI. I figured that any necessary tests would already exist in the form of JUnit tests - in my opinion every supported feature of Hive should be continuously tested by Hudson.&lt;/p&gt;

&lt;p&gt;If you can add a test case that passes pre-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-718&quot; title=&quot;Load data inpath into a new partition without overwrite does not move the file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-718&quot;&gt;&lt;del&gt;HIVE-718&lt;/del&gt;&lt;/a&gt; and fails now, I will happily fix it.&lt;/p&gt;

&lt;p&gt;-Todd&lt;/p&gt;</comment>
                            <comment id="12749000" author="tlipcon" created="Fri, 28 Aug 2009 21:51:45 +0000"  >&lt;p&gt;Sorry, that last one should read &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-487&quot; title=&quot;Hive does not compile with Hadoop 0.20.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-487&quot;&gt;&lt;del&gt;HIVE-487&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12749009" author="appodictic" created="Fri, 28 Aug 2009 22:31:10 +0000"  >&lt;p&gt;Not sure if this fixes all issues but adds a test case for some shim validity. Fixes the class name error. Will add more later.&lt;/p&gt;</comment>
                            <comment id="12749025" author="appodictic" created="Fri, 28 Aug 2009 23:35:17 +0000"  >&lt;p&gt;Todd,&lt;/p&gt;

&lt;p&gt;Sure, every feature of Hive should be tested by hudson, but I do not think JUnit replaces real testing. I personally test everything on a live cluster because the world is full of gotchas. &lt;/p&gt;

&lt;p&gt;I do think the shims should have some independent j-unit tests. Example what happens when someone trys to compile with 0.21.? I am hoping a unit test failure would be present in the shims.&lt;/p&gt;

&lt;p&gt;I have much 0_20 angst. 1 because all the JMX stuff got renamed and all my cacti templates are broken &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; 2. In general it seems like a lot changed and everyone is chasing after it.&lt;/p&gt;

&lt;p&gt;This slipped under my radar too. I commented on the issue even. However I was under the impression that the problem was isolated. (don&apos;t ask me why). But this is a blocker it is across the board broken.&lt;/p&gt;
</comment>
                            <comment id="12749027" author="appodictic" created="Fri, 28 Aug 2009 23:36:28 +0000"  >&lt;p&gt;Updating to blocker as HWI can not start.&lt;/p&gt;</comment>
                            <comment id="12749039" author="tlipcon" created="Sat, 29 Aug 2009 00:14:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;Sure, every feature of Hive should be tested by hudson, but I do not think JUnit replaces real testing. I personally test everything on a live cluster because the world is full of gotchas. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately this increases the barrier to contribution significantly. As feature sets grow it becomes impossible to do this without a full time QA staff. So, for now, we need at least continuous smoke testing of all features, including HWI imho. When a release candidate is rolled it&apos;s time for the significant manual testing - asking for that on every commit is pretty difficult.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I do think the shims should have some independent j-unit tests. Example what happens when someone trys to compile with 0.21.? I am hoping a unit test failure would be present in the shims.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The shims should be covered by virtue of their use elsewhere. I think in the original ticket I suggested that we get separate build running on Hudson that tests all of the unit tests against all of the supported Hadoop versions - I&apos;m not sure who&apos;s in charge of the Hive Hudson, but if Cloudera can help get that set up we&apos;d be happy to.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I have much 0_20 angst. 1 because all the JMX stuff got renamed and all my cacti templates are broken  2. In general it seems like a lot changed and everyone is chasing after it.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;+1 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Also agreed that it is a blocker.&lt;/p&gt;

&lt;p&gt;I&apos;m getting on a plane in a couple hours for a week long vacation, but I&apos;ll try to sneak in some time to get this fixed. In the meantime, it would be great if you could write up a &quot;manual test plan&quot; for HWI. Its existence isn&apos;t even mentioned in README.txt, so it&apos;s difficult for new contributors to figure out what functionality they need to manually verify.&lt;/p&gt;</comment>
                            <comment id="12749064" author="appodictic" created="Sat, 29 Aug 2009 03:44:21 +0000"  >&lt;p&gt;Added a jetty Test Case&lt;br/&gt;
Tweek to build.xml for jetty test.&lt;br/&gt;
Fixed 20 shim to set war and context path.&lt;/p&gt;

&lt;p&gt;Still need to test 18 and 19&lt;/p&gt;</comment>
                            <comment id="12749223" author="appodictic" created="Sun, 30 Aug 2009 03:33:38 +0000"  >&lt;p&gt;Added Test case, tested with 17 18 20&lt;/p&gt;</comment>
                            <comment id="12750192" author="namit" created="Wed, 2 Sep 2009 00:09:36 +0000"  >&lt;p&gt;Committed in both trunk and 0.4 - thanks Edward&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12418047" name="hive-752-1.diff" size="3838" author="appodictic" created="Sat, 29 Aug 2009 03:44:21 +0000"/>
                            <attachment id="12418029" name="hive-752.diff" size="2898" author="appodictic" created="Fri, 28 Aug 2009 22:31:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73324</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lbk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>