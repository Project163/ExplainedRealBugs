<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:18:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6900] HostUtil.getTaskLogUrl signature change causes compilation to fail</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6900</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The signature for HostUtil.getTaskLogUrl has changed between Hadoop-2.3 and Hadoop-2.4.&lt;/p&gt;

&lt;p&gt;Code in shims/0.23/src/main/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java works with Hadoop-2.3 method and causes compilation failure with Hadoop-2.4.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12708061">HIVE-6900</key>
            <summary>HostUtil.getTaskLogUrl signature change causes compilation to fail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdere">Jason Dere</assignee>
                                    <reporter username="cdrome">Chris Drome</reporter>
                        <labels>
                    </labels>
                <created>Sat, 12 Apr 2014 00:17:19 +0000</created>
                <updated>Thu, 8 Jun 2017 18:42:25 +0000</updated>
                            <resolved>Sat, 26 Apr 2014 16:26:48 +0000</resolved>
                                    <version>0.13.0</version>
                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Shims</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="13969265" author="cdrome" created="Tue, 15 Apr 2014 06:34:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; I spoke with some Hadoop core engineers and they commented that Hive should not use HostUtil as it is marked as private (and unstable).&lt;/p&gt;

&lt;p&gt;Also, TaskLogServlet is not supported in MR2, so we just need to handle the case where mapreduce.framework.name != yarn (and yarn-tez I assume). We might want to add yarn-tez to the condition.&lt;/p&gt;</comment>
                            <comment id="13969268" author="navis" created="Tue, 15 Apr 2014 06:41:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cdrome&quot; class=&quot;user-hover&quot; rel=&quot;cdrome&quot;&gt;cdrome&lt;/a&gt; Yes. I&apos;ve seen that (the annotation). So I didn&apos;t assigned to me, believing there would be someone to know better about this. Could you handle this? I&apos;ve been stuck still in hive-0.11.0 and I didn&apos;t know even that TaskLogServlet is not supported in MR2.&lt;/p&gt;</comment>
                            <comment id="13979014" author="vinodkv" created="Wed, 23 Apr 2014 22:25:09 +0000"  >&lt;p&gt;I looked at the issue together with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;jdere&lt;/a&gt;. Haven&apos;t reviewed the patch but overall this can let the compilation pass. The eventual link is used elsewhere in Hive to pull the logs and do some processing. The link used in the patch will still not work as the URLs changed completely.&lt;/p&gt;

&lt;p&gt;We can do this in two halves&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Fix compilation for now&lt;/li&gt;
	&lt;li&gt;And then follow up in YARN with a right API that can expose logs to users and change Hive to use that.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;For the compilation fix, we can put back the previous API in YARN via &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5830&quot; title=&quot;HostUtil.getTaskLogUrl is not backwards binary compatible with 2.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5830&quot;&gt;&lt;del&gt;MAPREDUCE-5830&lt;/del&gt;&lt;/a&gt; or we can do the fix as done here in Hive.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13979123" author="jdere" created="Thu, 24 Apr 2014 00:14:24 +0000"  >&lt;p&gt;Hadoop 2.4 is already released, right? So even Hadoop-2.5 restored the original API Hive would be broken against 2.4.  So I&apos;d say we should just fix the compilation issue in Hive.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vinodkv&quot; class=&quot;user-hover&quot; rel=&quot;vinodkv&quot;&gt;vinodkv&lt;/a&gt; you mentioned that even with the compilation fix, whatever we&apos;re doing with HostUtil in Hive isn&apos;t going to work properly?  If so then maybe we should just remove this code completely from Hadoop23Shims, until we get the proper API from YARN to do what we want.&lt;/p&gt;

&lt;p&gt;On the subject of getting a proper YARN API for this, is there already an existing mapreduce Jira for this?&lt;/p&gt;</comment>
                            <comment id="13980111" author="vinodkv" created="Thu, 24 Apr 2014 19:10:06 +0000"  >&lt;p&gt;We can fix it in 2.4.1 and Hive can depend on that release if that is the route.&lt;/p&gt;

&lt;p&gt;I see you filed &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5857&quot; title=&quot;Need task log URL API for external users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5857&quot;&gt;MAPREDUCE-5857&lt;/a&gt;. It is strictly a YARN issue, I&apos;ll move it to the right sub-project.&lt;/p&gt;</comment>
                            <comment id="13981794" author="jdere" created="Sat, 26 Apr 2014 00:21:20 +0000"  >&lt;p&gt;Would like to get this fixed sooner than later, as I&apos;d like for Hive to be able to use 2.4.0.  Using Hadoop 2.4.0 in the Hive build will fix a number of unit test failures that we&apos;ve been seeing.  I&apos;m thinking to remove use of the HostUtil call since based on Vinod&apos;s comment it sounds like the URL we&apos;re generating isn&apos;t supposed to work anymore.&lt;/p&gt;

&lt;p&gt;When &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-5857&quot; title=&quot;Need task log URL API for external users&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-5857&quot;&gt;MAPREDUCE-5857&lt;/a&gt; is fixed we can add this functionality back to Hadoop23Shims.&lt;/p&gt;</comment>
                            <comment id="13981805" author="jdere" created="Sat, 26 Apr 2014 00:32:55 +0000"  >&lt;p&gt;Patch v2 simply removes use of the HostUtil API.  If folks would still prefer to call into that API, we can use Navis&apos; patch.&lt;/p&gt;</comment>
                            <comment id="13981812" author="jdere" created="Sat, 26 Apr 2014 00:48:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;hagleitn&lt;/a&gt;,&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; can you take a look?&lt;/p&gt;</comment>
                            <comment id="13981827" author="ashutoshc" created="Sat, 26 Apr 2014 01:34:40 +0000"  >&lt;p&gt;url on hadoop-2 is incorrect anyway today, so not printing it makes things less-confusing to users. When right api is available from hadoop, we should switch to that. +1&lt;/p&gt;</comment>
                            <comment id="13982024" author="hiveqa" created="Sat, 26 Apr 2014 15:46:44 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12642048/HIVE-6900.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12642048/HIVE-6900.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 46 failed/errored test(s), 5418 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_correlationoptimizer2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_filter_numeric
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby2_map_skew
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby_sort_skew_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_infer_bucket_sort_list_bucket
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapjoin_test_outer
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullformatCTAS
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_nullgroup3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_createas1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_ppd_join4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_select_dummy_source
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_show_create_table_alter
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_show_tblproperties
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_partscan_1_23
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_symlink_text_input_format
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_truncate_column_list_bucket
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_current_database
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_14
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_19
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_20
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_21
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_22
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_23
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_24
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_7
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_unset_table_view_property
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucketizedhiveinputformat
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_dynamic_partitions_with_whitelist
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_stats_partialscan_autogether
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_unset_table_property
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/52/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/52/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/52/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/52/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 46 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12642048&lt;/p&gt;</comment>
                            <comment id="13982037" author="ashutoshc" created="Sat, 26 Apr 2014 16:26:49 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Jason!&lt;/p&gt;</comment>
                            <comment id="13993250" author="szehon" created="Thu, 8 May 2014 23:30:45 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;jdere&lt;/a&gt; We were looking at this change and were wondering, why is the log talking about MR1 when it is a Hadoop23Shims?  Isn&apos;t the condition of the else statement still MR2, but to handle local mode case?  Seems like TaskServlet is in MR1.&lt;/p&gt;</comment>
                            <comment id="14000578" author="jdere" created="Sat, 17 May 2014 00:58:33 +0000"  >&lt;p&gt;Hi Szehon, i don&apos;t really know much about the particulars of this issue, the logging statement made reference to MR1 because the original code had a comment about being in MR1 mode if it was in that particular point of the logic.  Definitely feel free to correct it if it is incorrect.&lt;/p&gt;</comment>
                            <comment id="14210440" author="thejas" created="Thu, 13 Nov 2014 19:40:52 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                            <comment id="16043196" author="sushanth" created="Thu, 8 Jun 2017 18:29:04 +0000"  >&lt;p&gt;Btw, I think this issue is still not completely fixed, in that compilation succeeds, but this fails now at runtime because &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12651497/MAPREDUCE-5830.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12651497/MAPREDUCE-5830.patch&lt;/a&gt; was committed in hadoop - The result is that our reflection check to see if the 23_METHOD exists succeeds, which means 23_METHOD will not be null, and 24_METHOD will be null, and thus, at runtime, we will wind up calling 23_METHOD. If hadoop had not &quot;fixed&quot; this bug, with this fix, our shim works, but with their fix, it looks like we still have a runtime problem. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;m going to open a new jira for this and link them, but wanted to mention the rationale here, so that watchers of this jira are notified.&lt;/p&gt;</comment>
                            <comment id="16043218" author="sushanth" created="Thu, 8 Jun 2017 18:42:25 +0000"  >&lt;p&gt;Actually, nvm - ignore my comment - that was based on looking at the code for .1.patch. .2.patch makes it so this should never happen. However, I saw that happening in a user&apos;s log and assumed that was still the problem. Clearly, though, that user has a weird hive version.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12709908">HIVE-6960</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13078394">HIVE-16860</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12710197">MAPREDUCE-5857</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12640202" name="HIVE-6900.1.patch.txt" size="3664" author="navis" created="Tue, 15 Apr 2014 04:44:31 +0000"/>
                            <attachment id="12642048" name="HIVE-6900.2.patch" size="1050" author="jdere" created="Sat, 26 Apr 2014 00:32:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uk93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386649</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>