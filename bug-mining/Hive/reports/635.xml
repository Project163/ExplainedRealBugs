<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:58:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-2086] Add test coverage for external table data loss issue</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2086</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Data loss when using &quot;create external table like&quot; statement. &lt;/p&gt;

&lt;p&gt;1) Set up an external table S, point to location L. Populate data in S.&lt;br/&gt;
2) Create another external table T, using statement like this:&lt;br/&gt;
    create external table T like S location L&lt;br/&gt;
   Make sure table T point to the same location as the original table S.&lt;br/&gt;
3) Query table T, see the same set of data in S.&lt;br/&gt;
4) drop table T.&lt;br/&gt;
5) Query table S will return nothing, and location L is deleted. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Amazon  elastics mapreduce cluster&lt;/p&gt;</environment>
        <key id="12503051">HIVE-2086</key>
            <summary>Add test coverage for external table data loss issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="natty">Jonathan Natkins</assignee>
                                    <reporter username="qlong">Q Long</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 Mar 2011 18:05:43 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:00 +0000</updated>
                            <resolved>Thu, 21 Jul 2011 19:32:02 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13014109" author="appodictic" created="Thu, 31 Mar 2011 18:11:38 +0000"  >&lt;p&gt;Dropping an external table should not delete data. Are you saying that &apos;create table like&apos; does not preserver the external property?&lt;/p&gt;</comment>
                            <comment id="13014126" author="qlong" created="Thu, 31 Mar 2011 18:28:46 +0000"  >&lt;p&gt;It seems that &quot;create external table like&quot;  does not preserve the external property.  &lt;/p&gt;

&lt;p&gt;Note that both the original table S and the new table T are external, and data loss will only occur when creating T using statement&lt;br/&gt;
&quot;create external table T like S location L&quot;.  No data loss if T with full table definitions (i.e, does not use like statement)&lt;/p&gt;
</comment>
                            <comment id="13020157" author="natty" created="Fri, 15 Apr 2011 01:34:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/604/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13020158" author="jiraposter@reviews.apache.org" created="Fri, 15 Apr 2011 01:35:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/604/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.  The external parameters were being set, but then being zeroed out by a call to params.clear(), resulting in an external table that wasn&apos;t marked as external.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2086&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml 9f21a69 &lt;br/&gt;
  data/files/ext_test/test.dat PRE-CREATION &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 9d8919c &lt;br/&gt;
  ql/src/test/queries/clientpositive/create_like.q 2edde83 &lt;br/&gt;
  ql/src/test/results/clientpositive/create_like.q.out 63a8939 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/604/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Automated tests added&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jonathan&lt;/p&gt;
</comment>
                            <comment id="13022268" author="jiraposter@reviews.apache.org" created="Wed, 20 Apr 2011 18:19:05 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/604/#review507&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/#review507&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;



&lt;p&gt;ql/src/test/queries/clientpositive/create_like.q&lt;br/&gt;
&amp;lt;&lt;a href=&quot;https://reviews.apache.org/r/604/#comment1031&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/#comment1031&lt;/a&gt;&amp;gt;&lt;/p&gt;

&lt;p&gt;    the $var is cool!&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-15 01:34:56, Jonathan Natkins wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/604/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-15 01:34:56)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.  The external parameters were being set, but then being zeroed out by a call to params.clear(), resulting in an external table that wasn&apos;t marked as external.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2086&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 9f21a69 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;data/files/ext_test/test.dat PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 9d8919c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/create_like.q 2edde83 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/create_like.q.out 63a8939 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/604/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Automated tests added&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jonathan&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13022269" author="jiraposter@reviews.apache.org" created="Wed, 20 Apr 2011 18:19:06 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/604/#review508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/#review508&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Ship it!&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ning&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;On 2011-04-15 01:34:56, Jonathan Natkins wrote:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This is an automatically generated e-mail. To reply, visit:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/604/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----------------------------------------------------------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;(Updated 2011-04-15 01:34:56)&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for hive.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Summary&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.  The external parameters were being set, but then being zeroed out by a call to params.clear(), resulting in an external table that wasn&apos;t marked as external.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2086&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diffs&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-----&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;build-common.xml 9f21a69 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;data/files/ext_test/test.dat PRE-CREATION &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 9d8919c &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/queries/clientpositive/create_like.q 2edde83 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;ql/src/test/results/clientpositive/create_like.q.out 63a8939 &lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/604/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/diff&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Testing&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;-------&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Automated tests added&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Thanks,&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;Jonathan&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;/blockquote&gt;
</comment>
                            <comment id="13022270" author="nzhang" created="Wed, 20 Apr 2011 18:20:35 +0000"  >&lt;p&gt;+1. Will commit if tests pass. &lt;/p&gt;</comment>
                            <comment id="13022615" author="nzhang" created="Thu, 21 Apr 2011 05:10:59 +0000"  >&lt;p&gt;Jonathan, there are a few diffs in the unit tests (1 in TestHBaseCliDriver and 6 in TestCliDriver). Can you take a look?&lt;/p&gt;</comment>
                            <comment id="13025862" author="natty" created="Wed, 27 Apr 2011 16:02:01 +0000"  >&lt;p&gt;Sorry about that, I&apos;ve updated the diffs.  This time, there shouldn&apos;t be any failures&lt;/p&gt;</comment>
                            <comment id="13025863" author="jiraposter@reviews.apache.org" created="Wed, 27 Apr 2011 16:02:03 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/604/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-04-27 16:00:50.150750)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Fixing test diffs&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.  The external parameters were being set, but then being zeroed out by a call to params.clear(), resulting in an external table that wasn&apos;t marked as external.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2086&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml 00c3680 &lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java 22fde53 &lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java 06a0447 &lt;br/&gt;
  ql/src/test/queries/clientpositive/create_like.q 2edde83 &lt;br/&gt;
  ql/src/test/results/clientpositive/create_like.q.out 63a8939 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/604/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Automated tests added&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jonathan&lt;/p&gt;
</comment>
                            <comment id="13027424" author="nzhang" created="Sun, 1 May 2011 04:37:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13027736" author="nzhang" created="Mon, 2 May 2011 17:26:23 +0000"  >&lt;p&gt;@Johnathan, there are some tests failing. In particular the newly added test also failed (the output attached). Can you take a look and see if it is caused by newly committed patches (I&apos;ve tested on the lasted trunk). &lt;/p&gt;</comment>
                            <comment id="13054550" author="vaggarw" created="Fri, 24 Jun 2011 17:03:31 +0000"  >&lt;p&gt;Has this patch been committed or is anyone still working on this particular patch?&lt;/p&gt;</comment>
                            <comment id="13067522" author="natty" created="Tue, 19 Jul 2011 05:55:08 +0000"  >&lt;p&gt;It looks like this was actually just fixed today, as a part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1218&quot; title=&quot;CREATE TABLE t LIKE some_view should create a new empty base table, but instead creates a copy of view&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1218&quot;&gt;&lt;del&gt;HIVE-1218&lt;/del&gt;&lt;/a&gt;.  However, that fix didn&apos;t add any regression tests for this bug, so I&apos;m going to prepare an updated patch once I finish running the test suite.&lt;/p&gt;</comment>
                            <comment id="13067833" author="jiraposter@reviews.apache.org" created="Tue, 19 Jul 2011 16:50:58 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/604/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;(Updated 2011-07-19 16:50:07.742470)&lt;/p&gt;


&lt;p&gt;Review request for hive.&lt;/p&gt;


&lt;p&gt;Changes&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;The bug was fixed as a part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1218&quot; title=&quot;CREATE TABLE t LIKE some_view should create a new empty base table, but instead creates a copy of view&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1218&quot;&gt;&lt;del&gt;HIVE-1218&lt;/del&gt;&lt;/a&gt;, and this diff adds some regression tests for this particular issue.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Review request for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.  The external parameters were being set, but then being zeroed out by a call to params.clear(), resulting in an external table that wasn&apos;t marked as external.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2086&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs (updated)&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  build-common.xml b6807fa &lt;br/&gt;
  data/files/ext_test/test.dat PRE-CREATION &lt;br/&gt;
  ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java 6d742e5 &lt;br/&gt;
  ql/src/test/queries/clientpositive/create_like.q 3f8e58d &lt;br/&gt;
  ql/src/test/results/clientpositive/create_like.q.out 118235e &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/604/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/604/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;Automated tests added&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Jonathan&lt;/p&gt;
</comment>
                            <comment id="13067835" author="natty" created="Tue, 19 Jul 2011 16:51:34 +0000"  >&lt;p&gt;Just regression tests&lt;/p&gt;</comment>
                            <comment id="13068007" author="cwsteinbach" created="Tue, 19 Jul 2011 21:55:23 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13069148" author="cwsteinbach" created="Thu, 21 Jul 2011 19:32:02 +0000"  >&lt;p&gt;Committed to trunk. Thanks Natty!&lt;/p&gt;</comment>
                            <comment id="13069164" author="hudson" created="Thu, 21 Jul 2011 19:53:37 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #841 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/841/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/841/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2086&quot; title=&quot;Add test coverage for external table data loss issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2086&quot;&gt;&lt;del&gt;HIVE-2086&lt;/del&gt;&lt;/a&gt;. Add test coverage for external table data loss issue (Jonathan Natkins via cws)&lt;/p&gt;

&lt;p&gt;cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1149331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1149331&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/data/files/ext_test&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/create_like.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/create_like.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/data/files/ext_test/test.dat&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12458597">HIVE-1218</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12476404" name="HIVE-2086.1.patch" size="18045" author="natty" created="Fri, 15 Apr 2011 01:35:10 +0000"/>
                            <attachment id="12477560" name="HIVE-2086.2.patch" size="17817" author="natty" created="Wed, 27 Apr 2011 16:02:17 +0000"/>
                            <attachment id="12487028" name="HIVE-2086.3.patch" size="14277" author="natty" created="Tue, 19 Jul 2011 16:52:19 +0000"/>
                            <attachment id="12477972" name="create_like.q.out" size="13926" author="nzhang" created="Mon, 2 May 2011 17:26:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>67231</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lid3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123625</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310230" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>Tags</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>data loss external table create like</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>