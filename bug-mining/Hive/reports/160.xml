<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:52:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-511] Change the hashcode for DoubleWritable</title>
                <link>https://issues.apache.org/jira/browse/HIVE-511</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The current DoubleWritable hashCode takes only the last 32 bits. This is a big problem because for small integer values like 1.0, 2.0, 15.0, the hashCode are all 0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12426161">HIVE-511</key>
            <summary>Change the hashcode for DoubleWritable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sat, 23 May 2009 00:12:17 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:45 +0000</updated>
                            <resolved>Thu, 28 May 2009 00:03:10 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12712324" author="zshao" created="Sat, 23 May 2009 00:31:23 +0000"  >&lt;p&gt;Changed hash code implementation.&lt;/p&gt;</comment>
                            <comment id="12712328" author="namit" created="Sat, 23 May 2009 00:47:09 +0000"  >

&lt;p&gt;I am not sure I follow - what if if it a Text Writable Object.&lt;/p&gt;

&lt;p&gt;Wont it go to default case, and error out&lt;/p&gt;</comment>
                            <comment id="12712329" author="zshao" created="Sat, 23 May 2009 00:52:14 +0000"  >&lt;p&gt;Text and String are both &quot;STRING&quot; primitive type.&lt;br/&gt;
The relationship between Text and String are the same as that between IntWritable and Integer - they will have WritableStringOI and JavaStringOI, which both implements StringOI.&lt;/p&gt;</comment>
                            <comment id="12712337" author="rsm" created="Sat, 23 May 2009 01:59:06 +0000"  >&lt;p&gt;I dont think this change works well for longs with the code in UDFDefaultSampleHashFn since we just call o.hashCode(). Long.hashCode() returns (int)(value ^ (value &amp;gt;&amp;gt;&amp;gt; 32)) which is not the same as what you are doing. Notice &apos;&amp;gt;&amp;gt;&amp;gt;&apos; instead of &apos;&amp;gt;&amp;gt;&apos;. Also, maybe you want to change UDFDefaultSampleHashFn to use your hashCode method as well.&lt;/p&gt;</comment>
                            <comment id="12713738" author="zshao" created="Wed, 27 May 2009 21:09:00 +0000"  >&lt;p&gt;This patch moves hash function to GenericUDF. Now we supports variable number of arguments in the hash function.&lt;/p&gt;</comment>
                            <comment id="12713751" author="rsm" created="Wed, 27 May 2009 21:26:56 +0000"  >&lt;p&gt; r = r * 31 + ObjectInspectorUtils.hashCode(arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.get(), argumentOIs&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;);&lt;br/&gt;
Wont this overflow?&lt;/p&gt;

&lt;p&gt;Maybe change it to something like the following?&lt;/p&gt;

&lt;p&gt;r = r ^ ObjectInspectorUtils.hashCode(arguments&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;.get(), argumentOIs&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;);&lt;/p&gt;</comment>
                            <comment id="12713761" author="zshao" created="Wed, 27 May 2009 21:41:15 +0000"  >&lt;p&gt;Sorry I should have put a comment.&lt;br/&gt;
We are using &lt;a href=&quot;http://java.sun.com/j2se/1.4.2/docs/api/java/util/List.html#hashCode(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://java.sun.com/j2se/1.4.2/docs/api/java/util/List.html#hashCode(&lt;/a&gt;) here.&lt;/p&gt;</comment>
                            <comment id="12713764" author="zshao" created="Wed, 27 May 2009 21:45:10 +0000"  >&lt;p&gt;Added a comment for the hash function.&lt;/p&gt;</comment>
                            <comment id="12713796" author="rsm" created="Wed, 27 May 2009 23:17:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good. will commit once tests pass.&lt;/p&gt;</comment>
                            <comment id="12713807" author="rsm" created="Thu, 28 May 2009 00:03:10 +0000"  >&lt;p&gt;Committed. Thanks Zheng!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408860" name="HIVE-511.1.patch" size="3613" author="zshao" created="Sat, 23 May 2009 00:31:23 +0000"/>
                            <attachment id="12409206" name="HIVE-511.2.patch" size="76429" author="zshao" created="Wed, 27 May 2009 21:09:00 +0000"/>
                            <attachment id="12409213" name="HIVE-511.3.patch" size="76512" author="zshao" created="Wed, 27 May 2009 21:45:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73482</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 26 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122303</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>