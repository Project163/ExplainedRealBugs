<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:06:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4679] WebHCat can deadlock Hadoop if the number of concurrently running tasks if higher or equal than the number of mappers</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4679</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;o In the current Templeton design, each time a Job is submitted thru the REST API (it can be Pig/Hive or MR job), it will consume one Hadoop map slot. Given that the number of map slots is finite in the cluster (16 node cluster will have 32 map slots), in some circumstances, a user can deadlock the cluster if Templeton job submission pipeline takes over all map slots (Templeton map tasks will wait for the actual underlying jobs to complete, what will never happen, given that Hadoop has no free map slots to schedule new tasks).&lt;/p&gt;

&lt;p&gt;o HCat queries use a different mechanism and do not contribute to the deadlock.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12651479">HIVE-4679</key>
            <summary>WebHCat can deadlock Hadoop if the number of concurrently running tasks if higher or equal than the number of mappers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ekoifman">Eugene Koifman</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Jun 2013 21:22:34 +0000</created>
                <updated>Tue, 1 Oct 2019 22:07:30 +0000</updated>
                            <resolved>Tue, 18 Jun 2013 23:45:18 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13677592" author="ekoifman" created="Thu, 6 Jun 2013 22:14:18 +0000"  >&lt;p&gt;WebHCat job submission mechanism should allow the user to specify a queue to use.  This way the user can set policies on the queue to make sure (or at least reduce the likelihood) that deadlock won&apos;t happen.&lt;/p&gt;</comment>
                            <comment id="13680853" author="thejas" created="Wed, 12 Jun 2013 00:47:21 +0000"  >&lt;p&gt;Looks good +1.&lt;br/&gt;
We need to get his into docs as well. We would need to wait for the hcat xdocs to wiki migration for that.&lt;/p&gt;</comment>
                            <comment id="13685857" author="alangates" created="Mon, 17 Jun 2013 19:00:49 +0000"  >&lt;p&gt;After applying this patch many of the webhcat e2e tests fail.  Some of them are returning: ./test_harness.pl::TestDriverCurl::checkResStatusCode INFO Check failed: status_code 200 expected, test returned &amp;lt;400&amp;gt;  and some check_job_exit_value failed. got exitValue 5,  expected  0INFO: TestDriverCurl::run() at 1141:Test TestPig_2 FAILED at 1371494116&lt;/p&gt;

</comment>
                            <comment id="13686094" author="ekoifman" created="Mon, 17 Jun 2013 22:23:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gates&quot; class=&quot;user-hover&quot; rel=&quot;gates&quot;&gt;gates&lt;/a&gt; Can you attach full output of e2e tests.  There are 6 or 7 failures due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4703&quot; title=&quot;Describe on a table returns &amp;quot;from deserializer&amp;quot; for column comments instead of values supplied in Create Table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4703&quot;&gt;&lt;del&gt;HIVE-4703&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;
</comment>
                            <comment id="13686244" author="ekoifman" created="Tue, 18 Jun 2013 00:41:24 +0000"  >&lt;p&gt;Never mind, I think I see the issue.&lt;/p&gt;</comment>
                            <comment id="13687147" author="ekoifman" created="Tue, 18 Jun 2013 20:32:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4679&quot; title=&quot;WebHCat can deadlock Hadoop if the number of concurrently running tasks if higher or equal than the number of mappers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4679&quot;&gt;&lt;del&gt;HIVE-4679&lt;/del&gt;&lt;/a&gt;.2.patch specifies &amp;lt;value&amp;gt;default&amp;lt;/value&amp;gt; for the queue.name property rather than empty string.&lt;/p&gt;

&lt;p&gt;WebHCat e2e tests still don&apos;t run clean due to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4703&quot; title=&quot;Describe on a table returns &amp;quot;from deserializer&amp;quot; for column comments instead of values supplied in Create Table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4703&quot;&gt;&lt;del&gt;HIVE-4703&lt;/del&gt;&lt;/a&gt; but the failures are the same with this patch and w/o.&lt;/p&gt;</comment>
                            <comment id="13687212" author="thejas" created="Tue, 18 Jun 2013 21:17:48 +0000"  >&lt;p&gt;+1 for new patch.&lt;/p&gt;</comment>
                            <comment id="13687386" author="alangates" created="Tue, 18 Jun 2013 23:45:18 +0000"  >&lt;p&gt;Patch committed.&lt;/p&gt;</comment>
                            <comment id="13687464" author="hudson" created="Wed, 19 Jun 2013 00:51:30 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2154 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2154/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2154/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4679&quot; title=&quot;WebHCat can deadlock Hadoop if the number of concurrently running tasks if higher or equal than the number of mappers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4679&quot;&gt;&lt;del&gt;HIVE-4679&lt;/del&gt;&lt;/a&gt; WebHCat can deadlock Hadoop if the number of concurrently running tasks if higher or equal than the number of mappers (ekoifman via gates) (Revision 1494383)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
gates : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1494383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1494383&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hcatalog/webhcat/svr/src/main/config/webhcat-default.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/AppConfig.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/LauncherDelegator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13688779" author="hudson" created="Thu, 20 Jun 2013 01:50:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #248 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/248/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/248/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4679&quot; title=&quot;WebHCat can deadlock Hadoop if the number of concurrently running tasks if higher or equal than the number of mappers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4679&quot;&gt;&lt;del&gt;HIVE-4679&lt;/del&gt;&lt;/a&gt; WebHCat can deadlock Hadoop if the number of concurrently running tasks if higher or equal than the number of mappers (ekoifman via gates) (Revision 1494383)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
gates : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1494383&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1494383&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hcatalog/webhcat/svr/src/main/config/webhcat-default.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/AppConfig.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/LauncherDelegator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13795800" author="ashutoshc" created="Tue, 15 Oct 2013 23:28:44 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                            <comment id="14142944" author="lefty@hortonworks.com" created="Mon, 22 Sep 2014 06:34:51 +0000"  >&lt;p&gt;Doc note:  &lt;b&gt;templeton.hadoop.queue.name&lt;/b&gt; is documented in the wiki here (at end of list):&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/WebHCat+Configure#WebHCatConfigure-ConfigurationVariables&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;WebHCat Configuration &amp;#8211; Configuration Variables &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12652516">HIVE-4725</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12588445" name="HIVE-4679.2.patch" size="2974" author="ekoifman" created="Tue, 18 Jun 2013 20:32:11 +0000"/>
                            <attachment id="12586603" name="HIVE-4679.patch" size="3209" author="ekoifman" created="Thu, 6 Jun 2013 22:15:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>331805</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l8p3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332134</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>