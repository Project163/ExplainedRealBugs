<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:12:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4957] Restrict number of bit vectors, to prevent out of Java heap memory</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4957</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;normally increase number of bit vectors will increase calculation accuracy. Let&apos;s say&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select compute_stats(a, 40) from test_hive;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;generally get better accuracy than&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select compute_stats(a, 16) from test_hive;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But larger number of bit vectors also cause query run slower. When number of bit vectors over 50, it won&apos;t help to increase accuracy anymore. But it still increase memory usage, and crash Hive if number if too huge. Current Hive doesn&apos;t prevent user use ridiculous large number of bit vectors in &apos;compute_stats&apos; query.&lt;/p&gt;

&lt;p&gt;One example&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select compute_stats(a, 999999999) from column_eight_types;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;crashes Hive.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2012-12-20 23:21:52,247 Stage-1 map = 0%,  reduce = 0%
2012-12-20 23:22:11,315 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 0.29 sec
MapReduce Total cumulative CPU time: 290 msec
Ended Job = job_1354923204155_0777 with errors
Error during job, obtaining debugging information...
Job Tracking URL: http://cs-10-20-81-171.cloud.cloudera.com:8088/proxy/application_1354923204155_0777/
Examining task ID: task_1354923204155_0777_m_000000 (and more) from job job_1354923204155_0777

Task with the most failures(4): 
-----
Task ID:
  task_1354923204155_0777_m_000000

URL:
  http://0.0.0.0:8088/taskdetails.jsp?jobid=job_1354923204155_0777&amp;amp;tipid=task_1354923204155_0777_m_000000
-----
Diagnostic Messages for this Task:
Error: Java heap space
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12660702">HIVE-4957</key>
            <summary>Restrict number of bit vectors, to prevent out of Java heap memory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shreepadma">Shreepadma Venugopalan</assignee>
                                    <reporter username="brocknoland">Brock Noland</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 Jul 2013 16:29:06 +0000</created>
                <updated>Tue, 22 Oct 2013 12:36:28 +0000</updated>
                            <resolved>Mon, 21 Oct 2013 19:35:21 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13773351" author="shreepadma" created="Fri, 20 Sep 2013 20:02:40 +0000"  >&lt;p&gt;RB: &lt;a href=&quot;https://reviews.apache.org/r/14250/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/14250/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13773369" author="brocknoland" created="Fri, 20 Sep 2013 20:21:01 +0000"  >&lt;p&gt;LGTM, let&apos;s see what the tests say.&lt;/p&gt;</comment>
                            <comment id="13773396" author="cwsteinbach" created="Fri, 20 Sep 2013 20:38:55 +0000"  >&lt;p&gt;Comments on reviewboard. Thanks.&lt;/p&gt;</comment>
                            <comment id="13783358" author="shreepadma" created="Tue, 1 Oct 2013 21:15:57 +0000"  >&lt;p&gt;New patch addresses review comments.&lt;/p&gt;</comment>
                            <comment id="13783617" author="hiveqa" created="Wed, 2 Oct 2013 03:48:30 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12606199/HIVE-4957.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12606199/HIVE-4957.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4078 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/987/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/987/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/987/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/987/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13799450" author="brocknoland" created="Fri, 18 Oct 2013 19:50:48 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Carl do you have any more concerns?&lt;/p&gt;</comment>
                            <comment id="13800992" author="brocknoland" created="Mon, 21 Oct 2013 19:35:21 +0000"  >&lt;p&gt;Thank you for the contribution Shreepadma! I have committed this to trunk!&lt;/p&gt;</comment>
                            <comment id="13801070" author="shreepadma" created="Mon, 21 Oct 2013 21:07:42 +0000"  >&lt;p&gt;Thanks, Brock!&lt;/p&gt;</comment>
                            <comment id="13801123" author="hudson" created="Mon, 21 Oct 2013 21:34:18 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop1-ptest #209 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/209/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/209/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4957&quot; title=&quot;Restrict number of bit vectors, to prevent out of Java heap memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4957&quot;&gt;&lt;del&gt;HIVE-4957&lt;/del&gt;&lt;/a&gt; - Restrict number of bit vectors, to prevent out of Java heap memory (Shreepadma Venugopalan via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFComputeStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/compute_stats_long.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/compute_stats_long.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13801560" author="hudson" created="Tue, 22 Oct 2013 07:23:03 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #147 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/147/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/147/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4957&quot; title=&quot;Restrict number of bit vectors, to prevent out of Java heap memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4957&quot;&gt;&lt;del&gt;HIVE-4957&lt;/del&gt;&lt;/a&gt; - Restrict number of bit vectors, to prevent out of Java heap memory (Shreepadma Venugopalan via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFComputeStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/compute_stats_long.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/compute_stats_long.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13801748" author="hudson" created="Tue, 22 Oct 2013 12:00:42 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2413 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2413/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2413/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4957&quot; title=&quot;Restrict number of bit vectors, to prevent out of Java heap memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4957&quot;&gt;&lt;del&gt;HIVE-4957&lt;/del&gt;&lt;/a&gt; - Restrict number of bit vectors, to prevent out of Java heap memory (Shreepadma Venugopalan via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFComputeStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/compute_stats_long.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/compute_stats_long.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13801766" author="hudson" created="Tue, 22 Oct 2013 12:36:28 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-hadoop2 #515 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/515/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/515/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4957&quot; title=&quot;Restrict number of bit vectors, to prevent out of Java heap memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4957&quot;&gt;&lt;del&gt;HIVE-4957&lt;/del&gt;&lt;/a&gt; - Restrict number of bit vectors, to prevent out of Java heap memory (Shreepadma Venugopalan via Brock Noland) (brock: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1534337&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDAFComputeStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/compute_stats_long.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/compute_stats_long.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12604295" name="HIVE-4957.1.patch" size="3745" author="shreepadma" created="Fri, 20 Sep 2013 20:03:05 +0000"/>
                            <attachment id="12606199" name="HIVE-4957.2.patch" size="5153" author="shreepadma" created="Tue, 1 Oct 2013 21:15:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>340891</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1msl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>341209</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>