<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:28:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8916] Handle user@domain username under LDAP authentication</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8916</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If LDAP is configured with multiple domains for authentication, users can be in different domains.&lt;/p&gt;

&lt;p&gt;Currently, LdapAuthenticationProviderImpl blindly appends the domain configured &quot;hive.server2.authentication.ldap.Domain&quot; to the username, which limits user to that domain. However, under multi-domain authentication, the username may already include the domain (ex:  user@domain.foo.com). We should not append a domain if one is already present.&lt;/p&gt;

&lt;p&gt;Also, if username already includes the domain, rest of Hive and authorization providers still expects the &quot;short name&quot; (&quot;user&quot; and not &quot;user@domain.foo.com&quot;) for looking up privilege rules, etc.  As such, any domain info in the username should be stripped off.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12756526">HIVE-8916</key>
            <summary>Handle user@domain username under LDAP authentication</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mohitsabharwal">Mohit Sabharwal</assignee>
                                    <reporter username="mohitsabharwal">Mohit Sabharwal</reporter>
                        <labels>
                            <label>TODOC15</label>
                    </labels>
                <created>Wed, 19 Nov 2014 20:30:46 +0000</created>
                <updated>Fri, 17 Jul 2015 08:01:12 +0000</updated>
                            <resolved>Sat, 22 Nov 2014 19:09:18 +0000</resolved>
                                                    <fixVersion>1.1.0</fixVersion>
                                    <component>Authentication</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14218529" author="szehon" created="Wed, 19 Nov 2014 21:32:26 +0000"  >&lt;p&gt;Thanks for this fix!  Left a comment on the review-board.&lt;/p&gt;</comment>
                            <comment id="14218960" author="hiveqa" created="Thu, 20 Nov 2014 03:52:17 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12682485/HIVE-8916.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12682485/HIVE-8916.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 6598 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.beeline.TestBeeLineWithArgs.testEmbeddedBeelineConnection
org.apache.hive.hcatalog.streaming.TestStreaming.testRemainingTransactions
org.apache.hive.jdbc.TestJdbcDriver2.org.apache.hive.jdbc.TestJdbcDriver2
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLog
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLogAsync
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLogCleanup
org.apache.hive.service.cli.operation.TestOperationLoggingAPI.testFetchResultsOfLogWithOrientation
org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitDir
org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitFile
org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitFileAndConfOverlay
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1844/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1844/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1844/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1844/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1844/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1844/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12682485 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14219583" author="brocknoland" created="Thu, 20 Nov 2014 17:01:12 +0000"  >&lt;p&gt;Looks like we need to handle the case of null:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2014-11-19 17:39:22,829 WARN  thrift.ThriftCLIService (ThriftCLIService.java:OpenSession(242)) - Error opening session: 
java.lang.NullPointerException
	at org.apache.hive.service.ServiceUtils.indexOfDomainMatch(ServiceUtils.java:30)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.getShortName(ThriftCLIService.java:307)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.getUserName(ThriftCLIService.java:300)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.getSessionHandle(ThriftCLIService.java:323)
	at org.apache.hive.service.cli.thrift.ThriftCLIService.OpenSession(ThriftCLIService.java:236)
	at org.apache.hive.service.cli.thrift.ThriftCLIServiceClient.openSession(ThriftCLIServiceClient.java:57)
	at org.apache.hive.service.cli.session.TestSessionGlobalInitFile.doTestSessionGlobalInitFile(TestSessionGlobalInitFile.java:126)
	at org.apache.hive.service.cli.session.TestSessionGlobalInitFile.testSessionGlobalInitFile(TestSessionGlobalInitFile.java:112)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14220095" author="mohitsabharwal" created="Thu, 20 Nov 2014 22:01:53 +0000"  >&lt;p&gt;Fix tests by addressing null case. &lt;/p&gt;

&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8928&quot; title=&quot;Move username format detection to authentication handlers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8928&quot;&gt;HIVE-8928&lt;/a&gt; to explore moving format detection to authentication handlers.&lt;/p&gt;</comment>
                            <comment id="14220270" author="brocknoland" created="Fri, 21 Nov 2014 00:07:03 +0000"  >&lt;p&gt;+1 pending tests&lt;/p&gt;</comment>
                            <comment id="14221813" author="hiveqa" created="Sat, 22 Nov 2014 05:26:40 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12682756/HIVE-8916.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12682756/HIVE-8916.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6666 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1860/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1860/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1860/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1860/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1860/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1860/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12682756 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14222011" author="mohitsabharwal" created="Sat, 22 Nov 2014 15:51:59 +0000"  >&lt;p&gt;Both tests pass for me locally.&lt;/p&gt;</comment>
                            <comment id="14222115" author="brocknoland" created="Sat, 22 Nov 2014 19:09:18 +0000"  >&lt;p&gt;Thank you very much Mohit! I have committed this to trunk.&lt;/p&gt;</comment>
                            <comment id="14228196" author="lefty@hortonworks.com" created="Fri, 28 Nov 2014 09:48:41 +0000"  >&lt;p&gt;Does this need documentation?&lt;/p&gt;

&lt;p&gt;Possible locations:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.authentication.ldap.Domain&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.server2.authentication.ldap.Domain &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HiveServer2 Clients &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Setting+Up+HiveServer2#SettingUpHiveServer2-Authentication/SecurityConfiguration&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Setting Up HiveServer2 &amp;#8211; Authentication/Security Configuration &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14230846" author="mohitsabharwal" created="Tue, 2 Dec 2014 02:14:17 +0000"  >&lt;p&gt;We could add documentation to &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.authentication.ldap.Domain&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.server2.authentication.ldap.Domain &lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In case of LDAP authentication, &lt;tt&gt;hive.server2.authentication.ldap.Domain&lt;/tt&gt;, if configured, is appended to the LDAP username passed in the client connection. This is because LDAP providers like Active Directory expect a fully qualified username that includes the domain.&lt;/p&gt;

&lt;p&gt;Starting 0.15.0 (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8916&quot; title=&quot;Handle user@domain username under LDAP authentication&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8916&quot;&gt;&lt;del&gt;HIVE-8916&lt;/del&gt;&lt;/a&gt;), if the username passed in the client connection already includes the domain, any value configured in &lt;tt&gt;hive.server2.authentication.ldap.Domain&lt;/tt&gt; is not appended to the username.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12652141">HIVE-4707</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12757281">SENTRY-540</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12682754" name="HIVE-8916.2.patch" size="3293" author="mohitsabharwal" created="Thu, 20 Nov 2014 21:57:57 +0000"/>
                            <attachment id="12682756" name="HIVE-8916.3.patch" size="5228" author="mohitsabharwal" created="Thu, 20 Nov 2014 21:59:24 +0000"/>
                            <attachment id="12682485" name="HIVE-8916.patch" size="5088" author="mohitsabharwal" created="Wed, 19 Nov 2014 20:54:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22ktb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>