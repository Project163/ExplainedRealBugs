<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:35:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-11229] Mutation API: Coordinator communication with meta store should be optional</title>
                <link>https://issues.apache.org/jira/browse/HIVE-11229</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;ekoifman&lt;/a&gt; raised a theoretical issue with the streaming mutation API (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10165&quot; title=&quot;Improve hive-hcatalog-streaming extensibility and support updates and deletes.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10165&quot;&gt;&lt;del&gt;HIVE-10165&lt;/del&gt;&lt;/a&gt;) where worker nodes operating in a distributed cluster might overwhelm a meta store while trying to obtain partition locks. Although this does not happen in practice (see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11228&quot; title=&quot;Mutation API should use semi-shared locks.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11228&quot;&gt;&lt;del&gt;HIVE-11228&lt;/del&gt;&lt;/a&gt;), the API does communicate with the meta store in this manner to obtain partition paths and create new partitions. Therefore the issue described does in fact exist in the current implementation, albeit in a different code path. I&#8217;d like to make such communication optional like so:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;When the user chooses not to create partitions on demand, no meta store connection will be created in the &lt;tt&gt;MutationCoordinators&lt;/tt&gt;. Additionally, partition paths will be resolved using &lt;tt&gt;org.apache.hadoop.hive.metastore.Warehouse.getPartitionPath(Path, LinkedHashMap&amp;lt;String, String&amp;gt;)&lt;/tt&gt; which should be suitable so long as standard Hive partition layouts are followed.&lt;/li&gt;
	&lt;li&gt;If the user does choose to create partitions on demand then the system will operate as is does currently; using the meta store to both issue &lt;tt&gt;add_partition&lt;/tt&gt; events and look up partition meta data.&lt;/li&gt;
	&lt;li&gt;The documentation will be updated to describe these behaviours and outline alternative approaches to collecting affected partition names and creating partitions in a less intensive manner.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Side note for follow up: The parameter names &lt;tt&gt;tblName&lt;/tt&gt; and &lt;tt&gt;dbName&lt;/tt&gt; seem to be the wrong way around on the method &lt;tt&gt;org.apache.hadoop.hive.metastore.IMetaStoreClient.getPartition(String, String, List&amp;lt;String&amp;gt;)&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12844183">HIVE-11229</key>
            <summary>Mutation API: Coordinator communication with meta store should be optional</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="teabot">Elliot West</assignee>
                                    <reporter username="teabot">Elliot West</reporter>
                        <labels>
                            <label>streaming_api</label>
                    </labels>
                <created>Fri, 10 Jul 2015 14:24:04 +0000</created>
                <updated>Tue, 16 Feb 2016 23:51:48 +0000</updated>
                            <resolved>Tue, 21 Jul 2015 18:10:42 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14622393" author="teabot" created="Fri, 10 Jul 2015 14:45:53 +0000"  >&lt;p&gt;Attached patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12744722/12744722_HIVE-11229.1.patch&quot; title=&quot;HIVE-11229.1.patch attached to HIVE-11229&quot;&gt;HIVE-11229.1.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; that provides the user with an option to use &lt;tt&gt;MutationCoordinators&lt;/tt&gt; in a manner that does not require a meta store connection. In such and event partition paths are resolved using the &lt;tt&gt;Warehouse&lt;/tt&gt; class and dynamic partition creation is disabled.&lt;/p&gt;

&lt;p&gt;Alternative approaches for collection affected partitions and creating them in more controlled manner are touched on in the package level documentation.&lt;/p&gt;</comment>
                            <comment id="14622972" author="hiveqa" created="Fri, 10 Jul 2015 22:11:07 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12744722/HIVE-11229.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12744722/HIVE-11229.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 9160 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.jdbc.TestMultiSessionsHS2WithLocalClusterSpark.testSparkQuery
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4575/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4575/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4575/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4575/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4575/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4575/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12744722 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14627732" author="teabot" created="Wed, 15 Jul 2015 08:51:41 +0000"  >&lt;p&gt;The failed test does not appear to be related to the patch.&lt;/p&gt;</comment>
                            <comment id="14635470" author="alangates" created="Tue, 21 Jul 2015 17:43:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14635527" author="alangates" created="Tue, 21 Jul 2015 18:10:42 +0000"  >&lt;p&gt;Patch 1 committed.  Thanks Elliot.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12744722" name="HIVE-11229.1.patch" size="36979" author="teabot" created="Fri, 10 Jul 2015 14:41:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h3t3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Mutation coordinator meta store dependency now optional.</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>