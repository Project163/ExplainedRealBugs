<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:22:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6245] HS2 creates DBs/Tables with wrong ownership when HMS setugi is true</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6245</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The case with following settings is valid but does not work correctly in current HS2:&lt;br/&gt;
==&lt;br/&gt;
hive.server2.authentication=NONE (or LDAP)&lt;br/&gt;
hive.server2.enable.doAs= true&lt;br/&gt;
hive.metastore.sasl.enabled=false&lt;br/&gt;
hive.metastore.execute.setugi=true&lt;br/&gt;
==&lt;br/&gt;
Ideally, HS2 is able to impersonate the logged in user (from Beeline, or JDBC application) and create DBs/Tables with user&apos;s ownership.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12689941">HIVE-6245</key>
            <summary>HS2 creates DBs/Tables with wrong ownership when HMS setugi is true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vkorukanti">Venki Korukanti</assignee>
                                    <reporter username="ctang">Chaoyu Tang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 21 Jan 2014 03:24:48 +0000</created>
                <updated>Thu, 15 Oct 2015 17:41:43 +0000</updated>
                            <resolved>Thu, 28 Aug 2014 23:30:40 +0000</resolved>
                                    <version>0.12.0</version>
                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>15</watches>
                                                                                                                <comments>
                            <comment id="13877169" author="ctang.ma" created="Tue, 21 Jan 2014 04:15:01 +0000"  >&lt;p&gt;Fixes include:&lt;br/&gt;
1. be able to open an impersonation session in an non-kerberized HS2&lt;br/&gt;
2. when working with non-kerberized HMS but with hive.metastore.execute.setugi set to true, remember to close the ThreadLocal Hive object thus avoiding using a stale HMS connection in a new session.&lt;/p&gt;</comment>
                            <comment id="13879282" author="ctang.ma" created="Wed, 22 Jan 2014 22:33:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; Could you take a look at this JIRA and comment? I noticed that the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4356&quot; title=&quot;remove duplicate impersonation parameters for hiveserver2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4356&quot;&gt;&lt;del&gt;HIVE-4356&lt;/del&gt;&lt;/a&gt; (remove duplicate impersonation parameters for hiveserver2) made HS2 doAs (impersonation) only work with Kerberos env. Thanks&lt;/p&gt;</comment>
                            <comment id="13961755" author="serega_sheypak" created="Mon, 7 Apr 2014 09:52:03 +0000"  >&lt;p&gt;We do run ALTER TABLE ADD PARTITION ... LOCATION &apos;hdfs://bla-bla&apos; through JDBC as oozie-java-action. Sometimes it works, sometimes it doesn&apos;t work. HiveServer2 &apos;looses&apos; passed username and sets username=&apos;anonymous&apos; and refuses to add partition because user named &apos;anonymous&apos; has no access right to partition location.&lt;br/&gt;
Whe does it happen from time to time? For example we have an oozie coordinator which adds 24 partitions during a day. It can work for a week and then suddenly fails with this &apos;anonymous&apos; user.&lt;/p&gt;</comment>
                            <comment id="13968907" author="thejas" created="Mon, 14 Apr 2014 21:55:41 +0000"  >&lt;p&gt;This issue should be fixed through the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6312&quot; title=&quot;doAs with plain sasl auth should be session aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6312&quot;&gt;&lt;del&gt;HIVE-6312&lt;/del&gt;&lt;/a&gt; (which changed non-kerberos codepath to be same as kerberos code path in this aspect), and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6864&quot; title=&quot;HiveServer2 concurrency uses incorrect user information in unsecured mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6864&quot;&gt;&lt;del&gt;HIVE-6864&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13968923" author="thejas" created="Mon, 14 Apr 2014 22:08:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;ctang.ma&lt;/a&gt; Apologies for not responding to your comments and patch sooner!&lt;/p&gt;</comment>
                            <comment id="13969164" author="ctang.ma" created="Tue, 15 Apr 2014 02:50:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; No worries, as long as it has been addressed in recent &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6312&quot; title=&quot;doAs with plain sasl auth should be session aware&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6312&quot;&gt;&lt;del&gt;HIVE-6312&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6864&quot; title=&quot;HiveServer2 concurrency uses incorrect user information in unsecured mode&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6864&quot;&gt;&lt;del&gt;HIVE-6864&lt;/del&gt;&lt;/a&gt;. I am going to verify them with my case as well. Thanks!&lt;/p&gt;</comment>
                            <comment id="13969178" author="thejas" created="Tue, 15 Apr 2014 03:24:56 +0000"  >&lt;p&gt;Marking as duplicate as fixes were part of different jiras.&lt;br/&gt;
Please re-open if you still see the same issue.&lt;/p&gt;</comment>
                            <comment id="13999506" author="vkorukanti" created="Fri, 16 May 2014 01:22:12 +0000"  >&lt;p&gt;This looks like still a problem on trunk. I tried on latest trunk. Problem seems be that &lt;tt&gt;sessionHive&lt;/tt&gt; object in &lt;tt&gt;HiveSessionImplwithUGI&lt;/tt&gt; is never initialized if the authentication mechanism is not &lt;tt&gt;KERBEROS&lt;/tt&gt;. Currently &lt;tt&gt;sessionHive&lt;/tt&gt; is initialized in &lt;tt&gt;HiveSessionImplwithUGI.setDelegationToken&lt;/tt&gt; only if the delegation token is not null. Delegation token is not null when authentication mechanism is &lt;tt&gt;KERBEROS&lt;/tt&gt;. As &lt;tt&gt;sessionHive&lt;/tt&gt; is null when &lt;tt&gt;HiveSessionImplwithUGI.acquire()&lt;/tt&gt; is called a &lt;tt&gt;Hive&lt;/tt&gt; object with MetaStoreClient of this session user is not set. So whatever the worker thread has &lt;tt&gt;Hive&lt;/tt&gt; object in its thread variable, it will get used.&lt;/p&gt;

&lt;p&gt;To repro it consistently set the following parameters in hive-site.xml and restart hiveserver2. And try creating tables as two different users.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive.server2.thrift.min.worker.threads=1;
hive.server2.thrift.max.worker.threads=1;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13999511" author="vkorukanti" created="Fri, 16 May 2014 01:27:27 +0000"  >&lt;p&gt;Attached a patch which fixed the issue. It doesn&apos;t have any test case. I am in the process of figuring out how to write a test case where both MetaStore and HiveServer2 are running.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; Appreciate if you have any feedback on fix.&lt;/p&gt;</comment>
                            <comment id="14000286" author="thejas" created="Fri, 16 May 2014 20:46:17 +0000"  >&lt;p&gt;Reopening the jira based on Venki&apos;s report.&lt;/p&gt;</comment>
                            <comment id="14002733" author="vkorukanti" created="Tue, 20 May 2014 03:04:56 +0000"  >&lt;p&gt;Attaching a patch with testcase.&lt;/p&gt;</comment>
                            <comment id="14002737" author="vkorukanti" created="Tue, 20 May 2014 03:10:50 +0000"  >&lt;p&gt;Adding review board link&lt;/p&gt;</comment>
                            <comment id="14003975" author="vgumashta" created="Tue, 20 May 2014 21:09:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vkorukanti&quot; class=&quot;user-hover&quot; rel=&quot;vkorukanti&quot;&gt;vkorukanti&lt;/a&gt; Thanks for the patch. I&apos;ll look at it now. As a workaround, you can use HS2 with embedded metastore. &lt;/p&gt;</comment>
                            <comment id="14004283" author="hiveqa" created="Wed, 21 May 2014 03:23:03 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12645717/HIVE-6245.3.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12645717/HIVE-6245.3.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 13 failed/errored test(s), 5527 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.common.metrics.TestMetrics.testScopeConcurrency
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimal
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalX
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalXY
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getHadoopVersion
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getHiveVersion
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getPigVersion
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getStatus
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.invalidPath
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/250/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/250/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/250/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/250/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-250/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-250/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 13 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12645717&lt;/p&gt;</comment>
                            <comment id="14004336" author="vkorukanti" created="Wed, 21 May 2014 04:37:48 +0000"  >&lt;p&gt;Failures are not related to the change.&lt;/p&gt;</comment>
                            <comment id="14085692" author="apivovarov" created="Tue, 5 Aug 2014 02:32:32 +0000"  >&lt;p&gt;I applied patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6245&quot; title=&quot;HS2 creates DBs/Tables with wrong ownership when HMS setugi is true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6245&quot;&gt;&lt;del&gt;HIVE-6245&lt;/del&gt;&lt;/a&gt;.3.patch.txt to HDP-2.1.3.&lt;br/&gt;
hive.server2.authentication=NONE&lt;br/&gt;
&quot;create table ...&quot; creates hdfs folder with logged in user ownership&lt;/p&gt;</comment>
                            <comment id="14086572" author="apivovarov" created="Tue, 5 Aug 2014 18:16:05 +0000"  >&lt;p&gt;Found one issue with patch #3&lt;br/&gt;
hcatalog can not be buit&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/alex/workLC/hive-release-2.1.3/hcatalog/core/src/test/java/org/apache/hive/hcatalog/cli/TestPermsGrp.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;79,19&amp;#93;&lt;/span&gt; method startMetaStore in class org.apache.hadoop.hive.metastore.MetaStoreUtils cannot be applied to given types;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; required: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge,org.apache.hadoop.hive.conf.HiveConf&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; found: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; reason: actual and formal argument lists differ in length&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/alex/workLC/hive-release-2.1.3/hcatalog/core/src/test/java/org/apache/hive/hcatalog/mapreduce/TestHCatPartitionPublish.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;108,19&amp;#93;&lt;/span&gt; method startMetaStore in class org.apache.hadoop.hive.metastore.MetaStoreUtils cannot be applied to given types;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; required: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge,org.apache.hadoop.hive.conf.HiveConf&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; found: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; reason: actual and formal argument lists differ in length&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/alex/workLC/hive-release-2.1.3/hcatalog/core/src/test/java/org/apache/hcatalog/mapreduce/TestHCatPartitionPublish.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;101,19&amp;#93;&lt;/span&gt; method startMetaStore in class org.apache.hadoop.hive.metastore.MetaStoreUtils cannot be applied to given types;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; required: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge,org.apache.hadoop.hive.conf.HiveConf&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; found: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; reason: actual and formal argument lists differ in length&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/alex/workLC/hive-release-2.1.3/hcatalog/core/src/test/java/org/apache/hcatalog/cli/TestPermsGrp.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;82,19&amp;#93;&lt;/span&gt; method startMetaStore in class org.apache.hadoop.hive.metastore.MetaStoreUtils cannot be applied to given types;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; required: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge,org.apache.hadoop.hive.conf.HiveConf&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; found: int,org.apache.hadoop.hive.thrift.HadoopThriftAuthBridge&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; reason: actual and formal argument lists differ in length&lt;/p&gt;

</comment>
                            <comment id="14086681" author="apivovarov" created="Tue, 5 Aug 2014 20:09:11 +0000"  >&lt;p&gt;Skip my last comment pls.&lt;br/&gt;
Hive build works fine with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6245&quot; title=&quot;HS2 creates DBs/Tables with wrong ownership when HMS setugi is true&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6245&quot;&gt;&lt;del&gt;HIVE-6245&lt;/del&gt;&lt;/a&gt;.3.patch.txt&lt;/p&gt;</comment>
                            <comment id="14104717" author="vkorukanti" created="Wed, 20 Aug 2014 22:31:52 +0000"  >&lt;p&gt;Attaching new patch.&lt;/p&gt;

&lt;p&gt;Rebased on latest trunk, found out that the test is not working anymore. Had to do some changes to MiniHS2 also &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7807&quot; title=&quot;Refer to umask property using FsPermission.UMASK_LABEL.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7807&quot;&gt;&lt;del&gt;HIVE-7807&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14104899" author="navis" created="Thu, 21 Aug 2014 01:11:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; Could you review this? &lt;/p&gt;</comment>
                            <comment id="14106558" author="hiveqa" created="Fri, 22 Aug 2014 06:53:02 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12663248/HIVE-6245.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12663248/HIVE-6245.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6116 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_join
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/451/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/451/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/451/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/451/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-451/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-451/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12663248&lt;/p&gt;</comment>
                            <comment id="14112631" author="brocknoland" created="Wed, 27 Aug 2014 18:51:49 +0000"  >&lt;p&gt;I have been working on a patch to fix the same thing in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7890&quot; title=&quot;SessionState creates HMS Client while not impersonating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7890&quot;&gt;&lt;del&gt;HIVE-7890&lt;/del&gt;&lt;/a&gt;. I tested this patch and it works for me so +1 from my side.&lt;/p&gt;

&lt;p&gt;Since we&apos;ve hit this a number of times I actually think we should commit both this one and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7890&quot; title=&quot;SessionState creates HMS Client while not impersonating&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7890&quot;&gt;&lt;del&gt;HIVE-7890&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14113443" author="thejas" created="Thu, 28 Aug 2014 06:53:43 +0000"  >&lt;p&gt;Looks good. I just have some minor comments, added them in reviewboard.&lt;/p&gt;</comment>
                            <comment id="14113474" author="vkorukanti" created="Thu, 28 Aug 2014 07:26:50 +0000"  >&lt;p&gt;Attaching patch v5. Addressed review comments.&lt;/p&gt;</comment>
                            <comment id="14113634" author="hiveqa" created="Thu, 28 Aug 2014 10:21:26 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12664846/HIVE-6245.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12664846/HIVE-6245.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6127 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/542/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/542/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/542/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/542/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-542/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-542/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12664846&lt;/p&gt;</comment>
                            <comment id="14113881" author="vkorukanti" created="Thu, 28 Aug 2014 15:51:18 +0000"  >&lt;p&gt;Ran 2 failed tests locally and both pass successfully.&lt;/p&gt;</comment>
                            <comment id="14113901" author="apivovarov" created="Thu, 28 Aug 2014 16:03:52 +0000"  >&lt;p&gt;testCliDriver_dynpart_sort_opt_vectorization  failed in several previous builds as well.  (538-541)&lt;/p&gt;

&lt;p&gt;TestHiveServer2.testConnection failed in build 540 too&lt;br/&gt;
&lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/540/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/540/testReport/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Your build 542 does not have any additional failed test methods.&lt;/p&gt;</comment>
                            <comment id="14113916" author="vkorukanti" created="Thu, 28 Aug 2014 16:17:48 +0000"  >&lt;p&gt;Actually testCliDriver_dynpart_sort_opt_vectorization still fails locally, for some reason it didn&apos;t run previously might be due to incorrect maven args in my test run.&lt;/p&gt;</comment>
                            <comment id="14113959" author="thejas" created="Thu, 28 Aug 2014 16:54:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14114588" author="brocknoland" created="Thu, 28 Aug 2014 23:30:40 +0000"  >&lt;p&gt;Thank you so much Venki! I have committed this to trunk!&lt;/p&gt;</comment>
                            <comment id="14120989" author="thejas" created="Thu, 4 Sep 2014 06:03:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=venki387&quot; class=&quot;user-hover&quot; rel=&quot;venki387&quot;&gt;venki387&lt;/a&gt; The test in TestHS2ImpersonationWithRemoteMS seems to be failing frequently. Would you be able to take a look at it ?&lt;/p&gt;</comment>
                            <comment id="14121017" author="vkorukanti" created="Thu, 4 Sep 2014 06:40:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; Sorry about that. I see in all Hive QA runs where the test failed, second connection is failed to establish. There isn&apos;t any info in hive.log to narrow down. I will try to repro locally and update (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7942&quot; title=&quot;TestHS2ImpersonationWithRemoteMS is flaky&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7942&quot;&gt;HIVE-7942&lt;/a&gt; is created for tracking).&lt;/p&gt;</comment>
                            <comment id="14210805" author="thejas" created="Thu, 13 Nov 2014 19:42:41 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12737013">HIVE-7890</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12905262">HIVE-12188</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12691303">HIVE-6312</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12735534">HIVE-7807</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12645154" name="HIVE-6245.2.patch.txt" size="1468" author="vkorukanti" created="Fri, 16 May 2014 01:27:27 +0000"/>
                            <attachment id="12645717" name="HIVE-6245.3.patch.txt" size="9151" author="vkorukanti" created="Tue, 20 May 2014 03:04:56 +0000"/>
                            <attachment id="12663248" name="HIVE-6245.4.patch" size="14974" author="vkorukanti" created="Wed, 20 Aug 2014 22:31:52 +0000"/>
                            <attachment id="12664846" name="HIVE-6245.5.patch" size="14493" author="vkorukanti" created="Thu, 28 Aug 2014 07:26:50 +0000"/>
                            <attachment id="12624065" name="HIVE-6245.patch" size="2202" author="ctang" created="Tue, 21 Jan 2014 04:15:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>368907</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rl1z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369211</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>