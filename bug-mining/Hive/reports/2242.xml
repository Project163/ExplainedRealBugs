<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:19:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6756] alter table set fileformat should set serde too</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6756</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently doing alter table set fileformat doesn&apos;t change the serde. This is unexpected by customers because the serdes are largely file format specific.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12703743">HIVE-6756</key>
            <summary>alter table set fileformat should set serde too</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chinnalalam">Chinna Rao Lalam</assignee>
                                    <reporter username="omalley">Owen O&apos;Malley</reporter>
                        <labels>
                            <label>TODOC14</label>
                    </labels>
                <created>Wed, 26 Mar 2014 16:10:55 +0000</created>
                <updated>Thu, 13 Nov 2014 19:42:59 +0000</updated>
                            <resolved>Tue, 27 May 2014 18:49:16 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13973250" author="chinnalalam" created="Thu, 17 Apr 2014 18:34:34 +0000"  >&lt;p&gt;In alert table file format for the ORC and RC  file formats are setting the corresponding serdes, reaming file formats are not setting the corresponding serde.&lt;/p&gt;

&lt;p&gt;In create table if we are not specifying the serde other than ORC and RC file formats it is setting with LazySimpleSerDe, like create table in alert table set file format added this.&lt;/p&gt;</comment>
                            <comment id="13973282" author="ashutoshc" created="Thu, 17 Apr 2014 19:01:37 +0000"  >&lt;p&gt;I think instead of always defaulting to LazySimpleSerde, better is to set LazySimpleSerde for Textfile and SequenceFile format only and throw exception in cases where serde is not specified. We cant assume other file format uses LazySimpleSerde.&lt;/p&gt;</comment>
                            <comment id="13977139" author="chinnalalam" created="Tue, 22 Apr 2014 18:05:38 +0000"  >&lt;p&gt;With out the patch, current code is taken care for the RC,ORC and PARQUET file formats (ALTER TATBLE SET FILEFORMT configuring the proper serde for RC,ORC and PARQUET file formats)&lt;/p&gt;

&lt;p&gt;TEXTFILE, SEQUENCE file formats are not handled. This patch will address by configuring LazySimpleSerde for these file formats.&lt;/p&gt;

&lt;p&gt;Apart from this in ALTER TATBLE SET FILEFORMT can use INPUTFORMAT,OUTPUTFORMAT classes. In this scenario not sure which serde need to be configure?&lt;/p&gt;

&lt;p&gt;If throws exception he cannot use INPUTFORMAT,OUTPUTFORMAT classes in ALTER TATBLE SET FILEFORMT.&lt;/p&gt;

&lt;p&gt;Any suggestions..&lt;/p&gt;</comment>
                            <comment id="13993773" author="ashutoshc" created="Fri, 9 May 2014 18:15:19 +0000"  >&lt;p&gt;Sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chinnalalam&quot; class=&quot;user-hover&quot; rel=&quot;chinnalalam&quot;&gt;chinnalalam&lt;/a&gt; for being late on this. My suggestion is:&lt;br/&gt;
1. Instead of setting LazySimpleSerde as default for all cases, set LazySimpleSerde only for TEXTFILE &amp;amp; SEQUENCE (similiar to RC, ORC etc.)&lt;br/&gt;
2. For Alter table set fileformat IF OF case, throw exception if user doesnt specify serde. ie if user is specifying IF &amp;amp; OF she must also specify serde.&lt;/p&gt;</comment>
                            <comment id="14000725" author="vasanthkumar" created="Sat, 17 May 2014 09:27:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;,&lt;br/&gt;
Implemented as per your suggestion.&lt;br/&gt;
Sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chinnalalam&quot; class=&quot;user-hover&quot; rel=&quot;chinnalalam&quot;&gt;chinnalalam&lt;/a&gt; for taking over this JIRA.&lt;/p&gt;

&lt;p&gt;Kindly verify.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Vasanth kumar&lt;/p&gt;</comment>
                            <comment id="14000967" author="hiveqa" created="Sun, 18 May 2014 03:28:59 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12645402/HIVE-6756.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12645402/HIVE-6756.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 31 failed/errored test(s), 5526 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_11
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_exim_04_evolved_parts
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_mapreduce6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_serde
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_wise_fileformat
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_wise_fileformat2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_wise_fileformat3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_java_method
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udf_reflect
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_decimal_math_funcs
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_script_pipe
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform_ppr1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_transform_ppr2
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.common.metrics.TestMetrics.testScopeConcurrency
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input20
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input4
org.apache.hadoop.hive.ql.parse.TestParse.testParse_input5
org.apache.hive.hcatalog.cli.TestUseDatabase.testAlterTablePass
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimal
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalX
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalXY
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getHadoopVersion
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getHiveVersion
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getPigVersion
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getStatus
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.invalidPath
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/224/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/224/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/224/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/224/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 31 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12645402&lt;/p&gt;</comment>
                            <comment id="14001432" author="ashutoshc" created="Mon, 19 May 2014 06:58:36 +0000"  >&lt;p&gt;While some of the failures in Hive QA run are also on trunk, but some other failures look relevant.&lt;/p&gt;</comment>
                            <comment id="14001481" author="chinnalalam" created="Mon, 19 May 2014 08:14:03 +0000"  >&lt;p&gt;Hi Ashutosh, I am working on this. I will upload patch today.&lt;/p&gt;</comment>
                            <comment id="14001630" author="chinnalalam" created="Mon, 19 May 2014 12:16:45 +0000"  >&lt;p&gt;Added positive and negative testcases for these scenarios.&lt;br/&gt;
Corrected parquet_serde.q this test case and remaining testcases are not related to this change.&lt;/p&gt;</comment>
                            <comment id="14008250" author="ashutoshc" created="Sun, 25 May 2014 00:52:01 +0000"  >&lt;p&gt;Patch looks good, accept for textfile &amp;amp; seqfile &lt;br/&gt;
+      serde = conf.getVar(HiveConf.ConfVars.HIVESCRIPTSERDE);&lt;/p&gt;

&lt;p&gt;scriptserde config is used for other purposes, I think its better just to do &lt;br/&gt;
serde = LazySimpleSerDe.getClass().getName() &lt;br/&gt;
since thats equivalent behavior with create table stored as textfile / sequencefile&lt;/p&gt;

&lt;p&gt;Looks good otherwise &lt;/p&gt;</comment>
                            <comment id="14008314" author="chinnalalam" created="Sun, 25 May 2014 11:07:50 +0000"  >&lt;p&gt;Hi Ashutosh, Thanks for reviewing the patch. Reworked the patch.&lt;/p&gt;</comment>
                            <comment id="14008378" author="ashutoshc" created="Sun, 25 May 2014 17:00:02 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14008827" author="hiveqa" created="Mon, 26 May 2014 13:10:13 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12646708/HIVE-6756.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12646708/HIVE-6756.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 12 failed/errored test(s), 5465 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_exim_04_evolved_parts
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_decimal1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_wise_fileformat
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_wise_fileformat2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_partition_wise_fileformat3
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.hcatalog.cli.TestUseDatabase.testAlterTablePass
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimal
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalX
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalXY
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/298/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/298/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/298/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/298/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-298/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-298/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12646708&lt;/p&gt;</comment>
                            <comment id="14010107" author="ashutoshc" created="Tue, 27 May 2014 18:49:16 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Chinna!&lt;/p&gt;</comment>
                            <comment id="14011467" author="szehon" created="Wed, 28 May 2014 19:14:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; the commit message has a typo and says &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3756&quot; title=&quot;&amp;quot;LOAD DATA&amp;quot; does not honor permission inheritence&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3756&quot;&gt;&lt;del&gt;HIVE-3756&lt;/del&gt;&lt;/a&gt; and might cause confusion grepping git log, is it too late to fix?&lt;/p&gt;</comment>
                            <comment id="14011512" author="ashutoshc" created="Wed, 28 May 2014 20:01:53 +0000"  >&lt;p&gt;Thanks for catching that. Updated svn commit message. Its correctly reflected in svn log now. However, I think svn-git bridge doesnt recognize commit message edits, so in git repo it will still show old one.&lt;/p&gt;</comment>
                            <comment id="14012093" author="lefty@hortonworks.com" created="Thu, 29 May 2014 05:41:03 +0000"  >&lt;p&gt;Does this need any user doc?&lt;/p&gt;</comment>
                            <comment id="14012587" author="chinnalalam" created="Thu, 29 May 2014 17:41:36 +0000"  >&lt;p&gt;Hi Lefty Leverenz,&lt;/p&gt;

&lt;p&gt;Need to update this in Alter Table/Partition File Format section:&lt;/p&gt;

&lt;p&gt;Alter table set fileformat with INPUTFORMAT &amp;amp; OUTPUTFORMAT case, throw exception if user doesn&apos;t specify serde. ie if user is specifying INPUTFORMAT &amp;amp; OUTPUTFORMAT she must also specify serde.&lt;/p&gt;</comment>
                            <comment id="14210866" author="thejas" created="Thu, 13 Nov 2014 19:42:59 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12645402" name="HIVE-6756.1.patch" size="25613" author="vasanthkumar" created="Sat, 17 May 2014 09:18:02 +0000"/>
                            <attachment id="12645546" name="HIVE-6756.2.patch" size="34288" author="chinnalalam" created="Mon, 19 May 2014 12:15:35 +0000"/>
                            <attachment id="12646708" name="HIVE-6756.3.patch" size="34328" author="chinnalalam" created="Sun, 25 May 2014 11:04:55 +0000"/>
                            <attachment id="12640671" name="HIVE-6756.patch" size="25717" author="chinnalalam" created="Thu, 17 Apr 2014 18:34:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tts7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382352</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>