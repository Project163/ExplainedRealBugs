<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:23:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-26035] Explore moving to directsql for ObjectStore::addPartitions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-26035</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently &lt;tt&gt;addPartitions&lt;/tt&gt; uses datanuclues and is super slow for large number of partitions. It will be good to move to direct sql. Lots of repeated SQLs can be avoided as well (e.g SDS, SERDE,&#160;TABLE_PARAMS)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13433597">HIVE-26035</key>
            <summary>Explore moving to directsql for ObjectStore::addPartitions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="VenuReddy">Venugopal Reddy K</assignee>
                                    <reporter username="rajesh.balamohan">Rajesh Balamohan</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 14 Mar 2022 08:20:59 +0000</created>
                <updated>Tue, 15 Aug 2023 06:33:37 +0000</updated>
                            <resolved>Fri, 3 Feb 2023 00:04:34 +0000</resolved>
                                                    <fixVersion>4.0.0-beta-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="30600">8.5h</timespent>
                                <comments>
                            <comment id="17683595" author="ngangam" created="Fri, 3 Feb 2023 00:04:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=VenuReddy&quot; class=&quot;user-hover&quot; rel=&quot;VenuReddy&quot;&gt;VenuReddy&lt;/a&gt; The patch has been merged to master. Could you please post the performance improvements from the microbenchmarks that were done to this jira. It would be useful for future. Thank you&lt;/p&gt;</comment>
                            <comment id="17683928" author="venureddy" created="Fri, 3 Feb 2023 15:48:48 +0000"  >&lt;p&gt;&lt;b&gt;Without direct sql(5 concurrent threads each creating 100 partitions):&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;kvenureddy@192 hclient % java -jar ./metastore-benchmarks/target/hmsbench-jar-with-dependencies.jar -H localhost --savedata /tmp/benchdata --sanitize -N 100 -o 0302bench_results_http_modified-1.csv -C -d testbench_http --params=100&#160; -E &apos;drop.*&apos; -E &apos;renameTable.*&apos; -E &apos;getTableObjectsByName.*&apos; -E &apos;listTables.*&apos; -E &apos;listPartitions.*&apos; -E &apos;getPartitions.*&apos; -E &apos;getPartitionsByNames.*&apos; -E &apos;getPartitionNames.*&apos; -E &apos;listPartition&apos; -E &apos;getPartition&apos;&#160; -E &apos;getNid&apos; -E &apos;listDatabases&apos; -E &apos;getTable&apos; -E &apos;createTable&apos;&#160; -T 5
Operation&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; Mean &#160; &#160; Med&#160; &#160; &#160; Min&#160; &#160; &#160; Max&#160; &#160; &#160; Err% &#160; &#160;
addPartition &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 62.47&#160; &#160; 55.34&#160; &#160; 32.66&#160; &#160; 172.1&#160; &#160; 37.15&#160; &#160;
addPartitions.100&#160; &#160; &#160; &#160; &#160; &#160; &#160; 191.8&#160; &#160; 182.3&#160; &#160; 167.0&#160; &#160; 292.5&#160; &#160; 12.68&#160; &#160;
concurrentPartitionAdd#5.100 &#160; 1476 &#160; &#160; 1464 &#160; &#160; 1351 &#160; &#160; 2162 &#160; &#160; 6.815 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;With direct sql(5 concurrent threads each creating 100 partitions):&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;kvenureddy@192 hclient % java -jar ./metastore-benchmarks/target/hmsbench-jar-with-dependencies.jar -H localhost --savedata /tmp/benchdata --sanitize -N 100 -o 0302bench_results_http_modified.csv -C -d testbench_http --params=100&#160; -E &apos;drop.*&apos; -E &apos;renameTable.*&apos; -E &apos;getTableObjectsByName.*&apos; -E &apos;listTables.*&apos; -E &apos;listPartitions.*&apos; -E &apos;getPartitions.*&apos; -E &apos;getPartitionsByNames.*&apos; -E &apos;getPartitionNames.*&apos; -E &apos;listPartition&apos; -E &apos;getPartition&apos;&#160; -E &apos;getNid&apos; -E &apos;listDatabases&apos; -E &apos;getTable&apos; -E &apos;createTable&apos;&#160; -T 5 
Operation &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Mean &#160; &#160; Med &#160; &#160; &#160;Min &#160; &#160; &#160;Max &#160; &#160; &#160;Err% &#160; &#160;
addPartition &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; 66.33 &#160; &#160;59.16 &#160; &#160;36.85 &#160; &#160;176.2 &#160; &#160;40.69 &#160;&#160;
addPartitions.100 &#160; &#160; &#160; &#160; &#160; &#160; &#160;81.58 &#160; &#160;74.11 &#160; &#160;59.33 &#160; &#160;240.6 &#160; &#160;31.03 &#160;&#160;
concurrentPartitionAdd#5.100 &#160; 410.4 &#160; &#160;391.4 &#160; &#160;345.8 &#160; &#160;1063 &#160; &#160; 19.04&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Add 100 partitions and 1000 partitions in milliseconds.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Base version(&lt;/b&gt;&lt;b&gt;Without direct SQL)&lt;/b&gt;&lt;b&gt;:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;Operation&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;Mean&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;Med&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;Min&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;Max&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;Err%&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;addPartitions.100&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;189.552&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;176.996&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;149.402&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;314.393&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;18.2392&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;addPartitions.1000&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1641.48&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1624.37&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1577.92&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1847.76&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;3.07802&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;concurrentPartitionAdd#2.100&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;390.799&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;377.246&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;352.988&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;544.446&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;8.13874&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;concurrentPartitionAdd#2.1000&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;3441.06&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;3419.13&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;3333.46&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;3931.22&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;2.50776&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;After modification(&lt;/b&gt;&lt;b&gt;With direct SQL)&lt;/b&gt;&lt;b&gt;:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;Operation&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;Mean&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;Med&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;Min&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;Max&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;Err%&lt;/b&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;addPartitions.100&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;83.0217&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;72.2195&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;58.8024&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;214.897&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;33.4667&lt;/b&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;addPartitions.1000&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;506.649&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;496.345&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;473.402&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;687.063&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;6.23298&lt;/b&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;concurrentPartitionAdd#2.100&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;178.152&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;168.228&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;150.619&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;304.203&lt;/b&gt;&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;&lt;b&gt;14.7953&lt;/b&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;concurrentPartitionAdd#2.1000&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1144.33&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1132.06&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1092.98&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;1456.85&lt;/b&gt;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;4.02413&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10g74:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>