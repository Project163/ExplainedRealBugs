<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:20:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-25219] Backward incompatible timestamp serialization in Avro for certain timezones</title>
                <link>https://issues.apache.org/jira/browse/HIVE-25219</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20007&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20007&quot;&gt;&lt;del&gt;HIVE-20007&lt;/del&gt;&lt;/a&gt; changed the way that timestamp computations are performed and to some extend how timestamps are serialized and deserialized in files (Parquet, Avro).&lt;/p&gt;

&lt;p&gt;In versions that include &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20007&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20007&quot;&gt;&lt;del&gt;HIVE-20007&lt;/del&gt;&lt;/a&gt; the serialization in Avro files is not backwards compatible. In other words writing timestamps with a version of Hive that includes &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12192&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12192&quot;&gt;&lt;del&gt;HIVE-12192&lt;/del&gt;&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20007&quot; title=&quot;Hive should carry out timestamp computations in UTC&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20007&quot;&gt;&lt;del&gt;HIVE-20007&lt;/del&gt;&lt;/a&gt; and reading them with another (not including the previous issues) may lead to different results depending on the default timezone of the system.&lt;/p&gt;

&lt;p&gt;Consider the following scenario where the default system timezone is set to US/Pacific.&lt;/p&gt;

&lt;p&gt;At apache/master commit eedcd82bc2d61861a27205f925ba0ffab9b6bca8&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;EXTERNAL&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; employee(eid &lt;span class=&quot;code-keyword&quot;&gt;INT&lt;/span&gt;,birth &lt;span class=&quot;code-keyword&quot;&gt;timestamp&lt;/span&gt;) STORED &lt;span class=&quot;code-keyword&quot;&gt;AS&lt;/span&gt; AVRO
 &lt;span class=&quot;code-keyword&quot;&gt;LOCATION&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/hiveexttbl/employee&apos;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; employee &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (1, &lt;span class=&quot;code-quote&quot;&gt;&apos;1880-01-01 00:00:00&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; employee &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (2, &lt;span class=&quot;code-quote&quot;&gt;&apos;1884-01-01 00:00:00&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INTO&lt;/span&gt; employee &lt;span class=&quot;code-keyword&quot;&gt;VALUES&lt;/span&gt; (3, &lt;span class=&quot;code-quote&quot;&gt;&apos;1990-01-01 00:00:00&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; employee;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1880-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1884-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1990-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;At apache/branch-2.3 commit 324f9faf12d4b91a9359391810cb3312c004d356&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;EXTERNAL&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; employee(eid &lt;span class=&quot;code-keyword&quot;&gt;INT&lt;/span&gt;,birth &lt;span class=&quot;code-keyword&quot;&gt;timestamp&lt;/span&gt;) STORED &lt;span class=&quot;code-keyword&quot;&gt;AS&lt;/span&gt; AVRO
 &lt;span class=&quot;code-keyword&quot;&gt;LOCATION&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/tmp/hiveexttbl/employee&apos;&lt;/span&gt;;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; employee;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1879-12-31 23:52:58&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;2&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1884-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;3&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1990-01-01 00:00:00&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;The timestamp for &lt;tt&gt;eid=1&lt;/tt&gt; in branch-2.3 is different from the one in master.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382795">HIVE-25219</key>
            <summary>Backward incompatible timestamp serialization in Avro for certain timezones</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                            <label>compatibility</label>
                            <label>pull-request-available</label>
                            <label>timestamp</label>
                    </labels>
                <created>Tue, 8 Jun 2021 21:54:11 +0000</created>
                <updated>Thu, 17 Nov 2022 08:48:27 +0000</updated>
                            <resolved>Wed, 4 Aug 2021 11:41:47 +0000</resolved>
                                    <version>3.1.0</version>
                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="17359588" author="zabetak" created="Tue, 8 Jun 2021 21:55:39 +0000"  >&lt;p&gt;The issue describes the same problem with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25104&quot; title=&quot;Backward incompatible timestamp serialization in Parquet for certain timezones&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25104&quot;&gt;&lt;del&gt;HIVE-25104&lt;/del&gt;&lt;/a&gt; but for Avro instead of Parquet.&lt;/p&gt;</comment>
                            <comment id="17393059" author="zabetak" created="Wed, 4 Aug 2021 11:41:47 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/hive/commit/a7280749056c4fb8b730975eb70190a175f67ef4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a7280749056c4fb8b730975eb70190a175f67ef4&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13377889">HIVE-25104</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rrxc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>