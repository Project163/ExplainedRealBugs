<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:06:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4318] OperatorHooks hit performance even when not used</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4318</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Operator Hooks inserted into Operator.java cause a performance hit even when it is not being used.&lt;/p&gt;

&lt;p&gt;For a count(1) query tested with &amp;amp; without the operator hook calls.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;with&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2013-04-09 07:33:58,920 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 84.07 sec
Total MapReduce CPU Time Spent: 1 minutes 24 seconds 70 msec
OK
28800991
Time taken: 40.407 seconds, Fetched: 1 row(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;without&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2013-04-09 07:33:02,355 Stage-1 map = 100%,  reduce = 100%, Cumulative CPU 68.48 sec
...
Total MapReduce CPU Time Spent: 1 minutes 8 seconds 480 msec
OK
28800991
Time taken: 35.907 seconds, Fetched: 1 row(s)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The effect is multiplied by the number of operators in the pipeline that has to forward the row - the more operators there are the, the slower the query.&lt;/p&gt;

&lt;p&gt;The modification made to test this was &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;Operator.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;--- ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java
+++ ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java
@@ -526,16 +526,16 @@ &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void process(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; row, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; tag) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; HiveException {
       &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt;;
     }
     OperatorHookContext opHookContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OperatorHookContext(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, row, tag);
-    preProcessCounter();
-    enterOperatorHooks(opHookContext);
+    &lt;span class=&quot;code-comment&quot;&gt;//preProcessCounter();
&lt;/span&gt;+    &lt;span class=&quot;code-comment&quot;&gt;//enterOperatorHooks(opHookContext);
&lt;/span&gt;     processOp(row, tag);
-    exitOperatorHooks(opHookContext);
-    postProcessCounter();
+    &lt;span class=&quot;code-comment&quot;&gt;//exitOperatorHooks(opHookContext);
&lt;/span&gt;+    &lt;span class=&quot;code-comment&quot;&gt;//postProcessCounter();
&lt;/span&gt;   }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Ubuntu LXC (64 bit)&lt;/p&gt;</environment>
        <key id="12641535">HIVE-4318</key>
            <summary>OperatorHooks hit performance even when not used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="gopalv">Gopal Vijayaraghavan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Apr 2013 07:37:16 +0000</created>
                <updated>Thu, 16 May 2013 21:09:57 +0000</updated>
                            <resolved>Sat, 20 Apr 2013 03:33:40 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13627063" author="hagleitn" created="Tue, 9 Apr 2013 20:32:32 +0000"  >&lt;p&gt;Nice find! Thanks! I can see how that will be problematic in the inner loop. Just glancing at it:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the only place where we use operator-hooks seems to be the home-grown profiler. Neat to have, but not a good reason to slow down performance.&lt;/li&gt;
	&lt;li&gt;this seems to add the following overhead to the inner loop:&lt;/li&gt;
	&lt;li&gt;allocation of context per row&lt;/li&gt;
	&lt;li&gt;iteration through empty list of hooks (utils always sets empty list)&lt;/li&gt;
	&lt;li&gt;two additional virtual calls&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Is anyone really using/planning on using this? The easiest fix would be to just remove it, which seems the right thing to do. It doesn&apos;t seem useful to have a feature that adds a lot of overhead in the inner loop. There are ways to cut down on the overhead for when there are no hooks, but I&apos;d like to know if there&apos;s opposition to removing it first.&lt;/p&gt;
</comment>
                            <comment id="13627096" author="ashutoshc" created="Tue, 9 Apr 2013 20:56:42 +0000"  >&lt;p&gt;I agree with Gunther&apos;s analysis and suggestion to remove them altogether. If only reason to introduce operator level hook was to measure performance that we have failed in that objective by actually making system slower not faster. Profiling should be done using jvm toolkits like yourkit, jvisualvm etc., not by modifying code.&lt;/p&gt;</comment>
                            <comment id="13627793" author="gopalv" created="Wed, 10 Apr 2013 13:44:58 +0000"  >&lt;p&gt;I agree with Gunther&apos;s conclusion - moving this out would be the immediate fix for performance reasons.&lt;/p&gt;

&lt;p&gt;But a built-in profiler is an advantage in many ways, considering how something like yourkit takes ~45 mins to run through a 2 min query &amp;amp; requires a license key to inspect the output.&lt;/p&gt;

&lt;p&gt;There is definitely middle ground to be found here.&lt;/p&gt;

&lt;p&gt;The operator base-class hooks need to be removed for sure since it pollutes the common code-path and allocates objects in the inner loop. &lt;/p&gt;

&lt;p&gt;But the feature is a good idea &amp;amp; should be set aside for an implementation revisit later.&lt;/p&gt;</comment>
                            <comment id="13628261" author="ashutoshc" created="Wed, 10 Apr 2013 21:17:43 +0000"  >&lt;p&gt;Till we find a middle ground for this, we need to remove this to avoid loosing performance. &lt;/p&gt;</comment>
                            <comment id="13629241" author="pamelavagata" created="Thu, 11 Apr 2013 19:12:26 +0000"  >&lt;p&gt;The operator level hooks were introduced to allow a user to profile their query and see which operator was taking the most time in order to determine whether or not there are query improvements to be made, not for measuring the performance of the overall system. &lt;/p&gt;</comment>
                            <comment id="13629242" author="kevinwilfong" created="Thu, 11 Apr 2013 19:13:33 +0000"  >&lt;p&gt;The preProcessCounter and postProcessCounter weren&apos;t added for operator hooks, they were preexisting, and it doesn&apos;t look like they were modified by the diff either.&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java?r1=1404933&amp;amp;r2=1438825&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java?r1=1404933&amp;amp;r2=1438825&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Could you try your experiment again just removing those two method calls and not enterOperatorHooks and exitOperatorHooks.  Those two methods look really cheap if there are not operator hooks (they just check if the list is null and return).&lt;/p&gt;

&lt;p&gt;I just want to make sure if anything is removed, we&apos;re not removing too much.&lt;/p&gt;</comment>
                            <comment id="13629247" author="kevinwilfong" created="Thu, 11 Apr 2013 19:19:55 +0000"  >&lt;p&gt;It looks like the performance cost of those methods was recognized shortly after they were added&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-768&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It&apos;s possible the config hive.task.progress isn&apos;t as effective at countering it as expected.&lt;/p&gt;

&lt;p&gt;Can you make sure it is set to false in your run.&lt;/p&gt;</comment>
                            <comment id="13629474" author="hagleitn" created="Thu, 11 Apr 2013 22:15:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevinwilfong&quot; class=&quot;user-hover&quot; rel=&quot;kevinwilfong&quot;&gt;kevinwilfong&lt;/a&gt;: Good point, I didn&apos;t see that the counters were removed as well in the original run. I&apos;ll get more numbers.&lt;/p&gt;

&lt;p&gt;However in general, I think the process method is a bad place to put hooks into (or anything other than processing rows really). If the profiler is the only thing that uses it (and there seems to be agreement that it&apos;s useful), we should still remove it for now and re-write that in a way that has no effect on production systems.&lt;/p&gt;
</comment>
                            <comment id="13629957" author="hagleitn" created="Fri, 12 Apr 2013 10:03:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevinwilfong&quot; class=&quot;user-hover&quot; rel=&quot;kevinwilfong&quot;&gt;kevinwilfong&lt;/a&gt;: Here are the additional numbers. &lt;/p&gt;

&lt;p&gt;Summary: You were right about counters having a significant effect despite the flag, but OperatorHooks are definitely expensive too.&lt;/p&gt;

&lt;p&gt;All tests were run on EC2, single node setup. I used ~3m rows, single table, stored in rc file. Query was count&amp;#40;*&amp;#41; with a simple not very selective where clause. I&apos;ve ran each different build 5 times and averaged the last 3 runs. There was little difference between the runs. Hive.task.progress was off in all runs, no actual operator hooks were installed.&lt;/p&gt;

&lt;p&gt;I&apos;ve also tested both removing counters and a fixed version of counters. The fixed version places the check for the flag at the right place to avoid unnecessary calls to System.currentTimeMillis(), as well as unnecessary counting of the rows, etc.&lt;/p&gt;

&lt;p&gt;Numbers:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Current trunk: 44.5 seconds
Fix for counters, unchanged operator hooks: 33.5 seconds (Kevin, that&apos;s the run you asked for)
Fix for counters, removal of operator hooks: 29.3 seconds
Removal of both operator hooks and counters completely: 27.9 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Proposal:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Remove operator hooks and backport to 0.11 branch. That&apos;s a regression that was introduced between 0.10 and 0.11, I believe.&lt;/li&gt;
	&lt;li&gt;Remove profiler for now and backport to 0.11 branch. Profiler doesn&apos;t work without operator hooks right now. I&apos;ll open a jira to re-introduce profiler in a way that doesn&apos;t add any code to the inner loop (maybe hidden behind static final var that is false, so compiler removes it).&lt;/li&gt;
	&lt;li&gt;Counters: Change this patch to include my fix for counters and backport to 0.11. This gives us a significant boost, but isn&apos;t a regression from the last version. I&apos;ll open a jira to dig deeper and see if we can get even closer to the result with the counters completely removed.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;How does that sound?&lt;/p&gt;</comment>
                            <comment id="13630511" author="pamelavagata" created="Fri, 12 Apr 2013 19:11:53 +0000"  >&lt;p&gt;Thanks for running these separately &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; I just looked in OperatorHookUtils.java which is where the opHooks list is being initialized - it looks like the opHooks list is always being initialized even if there are no OperatorHooks installed. My suspicion is that if we returned null instead of an empty list, the numbers would be different since a null check should be much cheaper. Would you mind modifying OperatorHookUtils.getOperatorHooks to return null instead of an empty list and then rerun the MBM with the code for the OperatorHooks left in and also commented out to see what the difference is?&lt;/p&gt;</comment>
                            <comment id="13630607" author="hagleitn" created="Fri, 12 Apr 2013 20:36:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pamelavagata&quot; class=&quot;user-hover&quot; rel=&quot;pamelavagata&quot;&gt;pamelavagata&lt;/a&gt;: I saw that too and I am sure it would make the numbers slightly better. There&apos;s also the issue with allocating a new object for each invocation which is probably even worse than the empty list. My point though is this: Even if we get it down to where I fixed counters too, you would still pay a price for the feature. No counters v fixed counters is still faster (see above). &lt;/p&gt;

&lt;p&gt;From this thread it seems that the profiler is a valuable feature for keeping taps on performance in the dev cycle, operator hooks on the other hand are not that useful. Anything you add there has a tremendously bad effect on performance.&lt;/p&gt;

&lt;p&gt;From that I concluded that we should change the profiler not to rely on operator hooks and also not to contribute to run time in production. The best way to me is to remove it temporarily and handle it in a new jira (where we can discuss the how in more detail).&lt;/p&gt;

&lt;p&gt;Does that make sense?&lt;/p&gt;</comment>
                            <comment id="13630608" author="hagleitn" created="Fri, 12 Apr 2013 20:37:44 +0000"  >&lt;p&gt;Here&apos;s the patch that goes with the proposal&lt;/p&gt;</comment>
                            <comment id="13630637" author="kevinwilfong" created="Fri, 12 Apr 2013 21:17:33 +0000"  >&lt;p&gt;It&apos;s not clear to me that we can&apos;t cut down the cost added by operator hooks when there are no operator hooks present to the point where it does not significantly affect performance.&lt;/p&gt;

&lt;p&gt;Pam, could you provide Gunther a patch which sets the list of operator hooks to null rather than the empty list, and initializes the OperatorHookContext in the calls to enterOperatorHooks and exitOperatorHooks after the check if the list is null.  This should limit the impact of operator hooks, to two method calls and two null checks.  We could even put the check if this.operatorHooks==null around the method calls themselves, in case the Java compiler isn&apos;t inlining it for some reason.&lt;/p&gt;

&lt;p&gt;If after that, they still introduce a substantial amount of overhead, there&apos;s not much more we can do, and I&apos;d be ok with removing operator hooks. &lt;/p&gt;</comment>
                            <comment id="13630665" author="pamelavagata" created="Fri, 12 Apr 2013 21:43:55 +0000"  >&lt;p&gt;Will do, I&apos;ll be able to get a patch out soon&lt;/p&gt;</comment>
                            <comment id="13630703" author="hagleitn" created="Fri, 12 Apr 2013 22:37:22 +0000"  >&lt;p&gt;What I was trying to say is that you&apos;ll end up in the exact same place that you are with &quot;removing counters&quot; v &quot;fixing counters&quot;. Two method calls, two null checks. And from my testing there &lt;b&gt;is&lt;/b&gt; still overhead (29.3 v 27.9). If you think that&apos;s not a valid conclusion, I&apos;ll rerun the stuff, but otherwise we should just skip that step.&lt;/p&gt;

&lt;p&gt;Am I missing something?&lt;/p&gt;</comment>
                            <comment id="13630814" author="kevinwilfong" created="Sat, 13 Apr 2013 00:23:31 +0000"  >&lt;p&gt;I&apos;m just really surprised that a couple of null checks increase the amount of time by ~5% especially given that we do maybe 4 null checks in the FileSinkOperator&apos;s process method alone.&lt;/p&gt;

&lt;p&gt;Of course, I can&apos;t argue with facts, so if you could try such a patch once it&apos;s available and post your results I&apos;d really appreciate it.&lt;/p&gt;</comment>
                            <comment id="13630820" author="pamelavagata" created="Sat, 13 Apr 2013 00:27:43 +0000"  >&lt;p&gt;I agree - I&apos;ve just posted the patch, it would be great if you could post some results with this one too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13632523" author="hagleitn" created="Tue, 16 Apr 2013 03:01:39 +0000"  >&lt;p&gt;I&apos;ve repeated the experiments with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pamelavagata&quot; class=&quot;user-hover&quot; rel=&quot;pamelavagata&quot;&gt;pamelavagata&lt;/a&gt;&apos;s patch. Summary: Sorry, but I am &lt;b&gt;still&lt;/b&gt; consistently measuring a difference.&lt;/p&gt;

&lt;p&gt;I&apos;ve re-setup the experiment (didn&apos;t have the EC2 instance from last week anymore). I&apos;ve setup the same data, same query, same codebase etc, but I wasn&apos;t running on the same machine, so we should be careful with comparisons between these runs and the previous ones. I did use the same method as above to get the numbers.&lt;/p&gt;

&lt;p&gt;First I created two builds: One by applying Pamela&apos;s patch (&quot;fixed hooks&quot;) and one where I additionally commented out the operator hooks (&quot;no hooks&quot;). The results I got were:&lt;/p&gt;

&lt;p&gt;no hooks: 44.4 seconds&lt;br/&gt;
fixed hooks: 46.2 seconds&lt;/p&gt;

&lt;p&gt;Then I created two more builds: One by applying Pamela&apos;s patch and commenting out the counters (&quot;fixed hooks no counters&quot;) and one by commenting out both the operator hoos and the counters (&quot;no hooks no counters&quot;). The result I got was:&lt;/p&gt;

&lt;p&gt;no hooks no counters: 29.6 seconds&lt;br/&gt;
fixed hooks no counters: 32.3 seconds&lt;/p&gt;</comment>
                            <comment id="13634350" author="hagleitn" created="Wed, 17 Apr 2013 19:44:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kevinwilfong&quot; class=&quot;user-hover&quot; rel=&quot;kevinwilfong&quot;&gt;kevinwilfong&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pamelavagata&quot; class=&quot;user-hover&quot; rel=&quot;pamelavagata&quot;&gt;pamelavagata&lt;/a&gt;: Given the latest run, are you ok with the proposal, or do you have another suggestion?&lt;/p&gt;</comment>
                            <comment id="13634621" author="pamelavagata" created="Wed, 17 Apr 2013 23:43:57 +0000"  >&lt;p&gt;Gunther, thanks for taking the time to run the patch: given the results - I&apos;m ok with the proposal.&lt;/p&gt;</comment>
                            <comment id="13635527" author="hagleitn" created="Thu, 18 Apr 2013 18:55:24 +0000"  >&lt;p&gt;Thanks. I&apos;ve rebased the patch and split it into two. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4378&quot; title=&quot;Counters hit performance even when not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4378&quot;&gt;&lt;del&gt;HIVE-4378&lt;/del&gt;&lt;/a&gt; has the changes for the counters, this one is about operator hooks/profiler. This way I am hoping it&apos;s easier to start the work on re-introducing the profiler, because only relevant changes are captured in this patch.&lt;/p&gt;</comment>
                            <comment id="13635922" author="ashutoshc" created="Fri, 19 Apr 2013 01:21:18 +0000"  >&lt;p&gt;+1 will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13637103" author="ashutoshc" created="Sat, 20 Apr 2013 03:33:40 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Gunther!&lt;/p&gt;</comment>
                            <comment id="13637323" author="hudson" created="Sat, 20 Apr 2013 19:09:55 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #167 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/167/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/167/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4318&quot; title=&quot;OperatorHooks hit performance even when not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4318&quot;&gt;&lt;del&gt;HIVE-4318&lt;/del&gt;&lt;/a&gt; : OperatorHooks hit performance even when not used (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1470101)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470101&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecMapper.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecReducer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorHookContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorHookUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilePublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilePublisherInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfiler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerAggregateStat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerConnectionInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TstOperatorHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TstOperatorHookUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/HiveProfilerResultsHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/PostTestOperatorHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hiveprofiler0.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hiveprofiler_script0.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hiveprofiler_union0.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/operatorhook.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hiveprofiler0.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hiveprofiler_script0.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hiveprofiler_union0.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/operatorhook.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13637514" author="hudson" created="Sun, 21 Apr 2013 09:24:01 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2072 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2072/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2072/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4318&quot; title=&quot;OperatorHooks hit performance even when not used&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4318&quot;&gt;&lt;del&gt;HIVE-4318&lt;/del&gt;&lt;/a&gt; : OperatorHooks hit performance even when not used (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1470101)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470101&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1470101&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/conf/hive-default.xml.template&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecMapper.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/ExecReducer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorHookContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/OperatorHookUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilePublisher.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilePublisherInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfiler.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerAggregateStat.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerConnectionInfo.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerStats.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerStatsAggregator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilerUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TstOperatorHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/exec/TstOperatorHookUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/HiveProfilerResultsHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/hooks/PostTestOperatorHook.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hiveprofiler0.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hiveprofiler_script0.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/hiveprofiler_union0.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/operatorhook.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hiveprofiler0.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hiveprofiler_script0.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/hiveprofiler_union0.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/operatorhook.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12643336">HIVE-4378</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12577904" name="HIVE-4318.1.patch" size="71230" author="hagleitn" created="Tue, 9 Apr 2013 22:08:11 +0000"/>
                            <attachment id="12578498" name="HIVE-4318.2.patch" size="75586" author="hagleitn" created="Fri, 12 Apr 2013 20:37:44 +0000"/>
                            <attachment id="12579391" name="HIVE-4318.3.patch" size="71913" author="hagleitn" created="Thu, 18 Apr 2013 18:52:16 +0000"/>
                            <attachment id="12578558" name="HIVE-4318.patch.pam.txt" size="2796" author="pamelavagata" created="Sat, 13 Apr 2013 00:18:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>321951</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 31 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1jjrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>322296</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>