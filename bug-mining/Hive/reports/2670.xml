<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:25:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8151] Dynamic partition sort optimization inserts record wrongly to partition when used with GroupBy</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8151</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6455&quot; title=&quot;Scalable dynamic partitioning and bucketing optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6455&quot;&gt;&lt;del&gt;HIVE-6455&lt;/del&gt;&lt;/a&gt; added dynamic partition sort optimization. It added startGroup() method to FileSink operator to look for changes in reduce key for creating partition directories. This method however is not reliable as the key called with startGroup() is different from the key called with processOp(). startGroup() is called with newly changed key whereas processOp() is called with previously aggregated key. This will result in processOp() writing the last row of previous group as the first row of next group. This happens only when used with group by operator.&lt;/p&gt;

&lt;p&gt;The fix is to not rely on startGroup() and do the partition directory creation in processOp() itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12741974">HIVE-8151</key>
            <summary>Dynamic partition sort optimization inserts record wrongly to partition when used with GroupBy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasanth_j">Prasanth Jayachandran</assignee>
                                    <reporter username="prasanth_j">Prasanth Jayachandran</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Sep 2014 22:27:41 +0000</created>
                <updated>Thu, 13 Nov 2014 19:43:41 +0000</updated>
                            <resolved>Thu, 2 Oct 2014 02:00:57 +0000</resolved>
                                    <version>0.13.1</version>
                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>10</watches>
                                                                                                                <comments>
                            <comment id="14136396" author="prasanth_j" created="Tue, 16 Sep 2014 22:37:16 +0000"  >&lt;p&gt;The vectorization test case in dynpart_sort_optimization2.q must be revisited as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7557&quot; title=&quot;When reduce is vectorized, dynpart_sort_opt_vectorization.q under Tez fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7557&quot;&gt;&lt;del&gt;HIVE-7557&lt;/del&gt;&lt;/a&gt; disabled VectorFileSinkOperator. The proper fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7557&quot; title=&quot;When reduce is vectorized, dynpart_sort_opt_vectorization.q under Tez fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7557&quot;&gt;&lt;del&gt;HIVE-7557&lt;/del&gt;&lt;/a&gt; should make sure that VectorFS should inherit mostly from FS operator. Current code in trunk is stale as VectorFS contains old code from FS which went through many changes recently. cc/ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;mmccline&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14138410" author="hiveqa" created="Thu, 18 Sep 2014 02:25:06 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12669247/HIVE-8151.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12669247/HIVE-8151.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6282 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_histogram_numeric
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/850/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/850/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/850/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/850/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-850/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-850/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12669247&lt;/p&gt;</comment>
                            <comment id="14139766" author="prasanth_j" created="Fri, 19 Sep 2014 00:01:02 +0000"  >&lt;p&gt;The failures are unrelated to this patch. I tested TestCliDriver test failure and it works fine locally.&lt;/p&gt;</comment>
                            <comment id="14147305" author="prasanth_j" created="Thu, 25 Sep 2014 03:10:04 +0000"  >&lt;p&gt;Refactored to avoid changes to GBY operator. The bucket number is now added as last column of value to avoid relying on startGroup() and key object.&lt;/p&gt;</comment>
                            <comment id="14148221" author="hiveqa" created="Thu, 25 Sep 2014 19:56:17 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12671128/HIVE-8151.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12671128/HIVE-8151.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 38 failed/errored test(s), 6348 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_annotate_stats_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_combine2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_constprog_dp
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_delete_all_partitioned
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_extrapolate_part_stats_partial
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_insert_into6
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part14
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part8
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_load_dyn_part9
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition3
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_merge_dynamic_partition5
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_analyze
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_orc_merge2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats4
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_empty_dyn_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_remove_17
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_update_all_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_auto_sortmerge_join_16
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_delete_all_partitioned
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_analyze
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_orc_merge2
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_dml
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_update_all_partitioned
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_auto_sortmerge_join_16
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_infer_bucket_sort_dyn_part
org.apache.hadoop.hive.ql.parse.TestParse.testParse_union
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/982/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/982/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/982/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/982/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-982/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-982/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 38 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12671128&lt;/p&gt;</comment>
                            <comment id="14148387" author="hagleitn" created="Thu, 25 Sep 2014 22:07:28 +0000"  >&lt;p&gt;Comments on rb.&lt;/p&gt;</comment>
                            <comment id="14150979" author="hiveqa" created="Sun, 28 Sep 2014 05:26:05 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12671603/HIVE-8151.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12671603/HIVE-8151.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6362 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_1
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1022/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1022/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1022/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1022/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1022/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1022/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12671603&lt;/p&gt;</comment>
                            <comment id="14151145" author="wzc1989" created="Sun, 28 Sep 2014 17:23:23 +0000"  >&lt;p&gt; We have some orc tables generated by dynamic partition with group by. when we upgrade our hive from 0.11 to 0.13 and use hive 0.13 to produce new data, we find that the data from these tables can&apos;t be read. Below is the  exception when we try to read the data:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.ClassCastException: org.apache.hadoop.io.IntWritable cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to org.apache.hadoop.io.LongWritable at org.apache.hadoop.hive.ql.io.orc.RecordReaderImpl$LongTreeReader.next(RecordReaderImpl.java:717) at org.apache.hadoop.hive.ql.io.orc.RecordReaderImpl$StructTreeReader.next(RecordReaderImpl.java:1788) at org.apache.hadoop.hive.ql.io.orc.RecordReaderImpl.next(RecordReaderImpl.java:2997) at org.apache.hadoop.hive.ql.io.orc.OrcInputFormat$OrcRecordReader.next(OrcInputFormat.java:153) at org.apache.hadoop.hive.ql.io.orc.OrcInputFormat$OrcRecordReader.next(OrcInputFormat.java:127) at org.apache.hadoop.hive.ql.io.HiveContextAwareRecordReader.doNext(HiveContextAwareRecordReader.java:339
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;After some troubleshooting we find this issue and have to turn off this optimization and recreate the table,  we finally fix this problem.  It seems like this feature doesn&apos;t work well with group by (also in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6883&quot; title=&quot;Dynamic partitioning optimization does not honor sort order or order by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6883&quot;&gt;&lt;del&gt;HIVE-6883&lt;/del&gt;&lt;/a&gt;).  &lt;/p&gt;

&lt;p&gt;After turning off this feature, some dynamic partition etls which generate orc tables start to run into OOM.We have to enlarge the reduce memory in order to get passed. Hope this feature will  become mature soon&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14151227" author="prasanth_j" created="Sun, 28 Sep 2014 21:22:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzc1989&quot; class=&quot;user-hover&quot; rel=&quot;wzc1989&quot;&gt;wzc1989&lt;/a&gt; There are 2 issues with this optimization which was found recently. One is this issue (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8151&quot; title=&quot;Dynamic partition sort optimization inserts record wrongly to partition when used with GroupBy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8151&quot;&gt;&lt;del&gt;HIVE-8151&lt;/del&gt;&lt;/a&gt;) where the last record of a particular group by ends up in the next partition. Other one is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8162&quot; title=&quot;Dynamic sort optimization propagates additional columns even in the absence of order by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8162&quot;&gt;&lt;del&gt;HIVE-8162&lt;/del&gt;&lt;/a&gt; where in case of group-by additional columns are added to reducer key which should have been done only for order-by queries. Does any of these issues solve your case? I am still not sure how ClassCastException is related to any of these cases. Would it be possible for you check if &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8151&quot; title=&quot;Dynamic partition sort optimization inserts record wrongly to partition when used with GroupBy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8151&quot;&gt;&lt;del&gt;HIVE-8151&lt;/del&gt;&lt;/a&gt; or &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8162&quot; title=&quot;Dynamic sort optimization propagates additional columns even in the absence of order by&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8162&quot;&gt;&lt;del&gt;HIVE-8162&lt;/del&gt;&lt;/a&gt; solves your issue? Alternatively, you can provide me a small reproducible case which I can use to make sure this feature works properly.&lt;/p&gt;</comment>
                            <comment id="14151295" author="prasanth_j" created="Mon, 29 Sep 2014 01:22:27 +0000"  >&lt;p&gt;Rebased the patch to trunk. The last test failure seems to be working on my local box.&lt;/p&gt;</comment>
                            <comment id="14151325" author="hiveqa" created="Mon, 29 Sep 2014 03:19:48 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12671726/HIVE-8151.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12671726/HIVE-8151.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6362 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1029/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1029/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1029/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1029/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1029/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1029/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12671726&lt;/p&gt;</comment>
                            <comment id="14152125" author="prasanth_j" created="Mon, 29 Sep 2014 19:25:39 +0000"  >&lt;p&gt;Rebased patch against latest trunk.&lt;/p&gt;</comment>
                            <comment id="14152277" author="hagleitn" created="Mon, 29 Sep 2014 20:57:19 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14152278" author="hagleitn" created="Mon, 29 Sep 2014 20:57:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; this fixes a data corruption issue. Hive-0.14?&lt;/p&gt;</comment>
                            <comment id="14152280" author="vikram.dixit" created="Mon, 29 Sep 2014 20:58:51 +0000"  >&lt;p&gt;+1 for 0.14.&lt;/p&gt;</comment>
                            <comment id="14152411" author="prasanth_j" created="Mon, 29 Sep 2014 22:17:20 +0000"  >&lt;p&gt;Updated dynpart_sort_opt_vectorization2.q test after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8226&quot; title=&quot;Vectorize dynamic partitioning in VectorFileSinkOperator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8226&quot;&gt;&lt;del&gt;HIVE-8226&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14152778" author="hiveqa" created="Tue, 30 Sep 2014 04:19:28 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12671884/HIVE-8151.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12671884/HIVE-8151.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6373 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_alter_partition_change_col
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1045/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1045/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1045/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1045/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1045/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1045/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12671884&lt;/p&gt;</comment>
                            <comment id="14152852" author="prasanth_j" created="Tue, 30 Sep 2014 06:29:33 +0000"  >&lt;p&gt;Fixes yet another failure.&lt;/p&gt;</comment>
                            <comment id="14153118" author="wzc1989" created="Tue, 30 Sep 2014 12:27:51 +0000"  >&lt;p&gt;@ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;prasanth_j&lt;/a&gt;, after applying &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8151&quot; title=&quot;Dynamic partition sort optimization inserts record wrongly to partition when used with GroupBy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8151&quot;&gt;&lt;del&gt;HIVE-8151&lt;/del&gt;&lt;/a&gt;.7.patch , the bug still exists, here is the testcase:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;use test;

set hive.exec.dynamic.partition.mode=nonstrict;
set hive.exec.dynamic.partition=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
set hive.optimize.sort.dynamic.partition=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

drop table &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exists src1;
create table src1 (
    key &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    val string
);
load data local inpath &lt;span class=&quot;code-quote&quot;&gt;&apos;../hive/examples/files/kv1.txt&apos;&lt;/span&gt; overwrite into table src1;


drop table &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; exists hive13_dp1;
create table &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not exists hive13_dp1 (
    k1 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;,
    k2 &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;
)
PARTITIONED BY(`day` string COMMENT &lt;span class=&quot;code-quote&quot;&gt;&apos;days&apos;&lt;/span&gt;)
STORED AS ORC;

insert overwrite table `hive13_dp1` partition(`day`)
select
    key k1,
    count(val) k2,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;day&quot;&lt;/span&gt; `day`
from src1
group by &lt;span class=&quot;code-quote&quot;&gt;&quot;day&quot;&lt;/span&gt;, key;
select * from hive13_dp1 limit 5;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14153456" author="hiveqa" created="Tue, 30 Sep 2014 17:57:19 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12671975/HIVE-8151.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12671975/HIVE-8151.7.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6374 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1055/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1055/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1055/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1055/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1055/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1055/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12671975&lt;/p&gt;</comment>
                            <comment id="14153524" author="prasanth_j" created="Tue, 30 Sep 2014 18:33:20 +0000"  >&lt;p&gt;Rebase patch after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8196&quot; title=&quot;Joining on partition columns with fetch column stats enabled results it very small CE which negatively affects query performance &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8196&quot;&gt;&lt;del&gt;HIVE-8196&lt;/del&gt;&lt;/a&gt; commit.&lt;/p&gt;</comment>
                            <comment id="14153665" author="prasanth_j" created="Tue, 30 Sep 2014 19:53:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzc1989&quot; class=&quot;user-hover&quot; rel=&quot;wzc1989&quot;&gt;wzc1989&lt;/a&gt; Thanks for providing test case. Looks like the there is some issue with casting before writing the file. I will put up a fix for it soon in the next version of this patch.&lt;/p&gt;</comment>
                            <comment id="14154115" author="wzc1989" created="Wed, 1 Oct 2014 00:43:34 +0000"  >&lt;p&gt;@ &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasanth_j&quot; class=&quot;user-hover&quot; rel=&quot;prasanth_j&quot;&gt;prasanth_j&lt;/a&gt; , I find that the explain of the insert sql in the testcase diff a little when enable/disable this optimization. After digging into the code it seems that before applying NonBlockingOpDeDupProc optimization, there are three select operators in a row before FileSink operator. NonBlockingOpDeDupProc would try to deduplicate these select operators. Casting _col1 into int before writing to file is lost durning the deduplication process. More precisely, cSELExprNodeDesc  backtracks fails due to missing of columnExprMap :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ExprNodeDesc newPSELExprNodeDesc =
                ExprNodeDescUtils.backtrack(cSELExprNodeDesc, cSEL, pSEL);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here I try to include the columnExprMap in SemanticAnalyzer#genConversionSelectOperator and the testcase passes.&lt;br/&gt;
Please correct me if I&apos;m wrong.&lt;/p&gt;</comment>
                            <comment id="14154132" author="prasanth_j" created="Wed, 1 Oct 2014 00:52:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzc1989&quot; class=&quot;user-hover&quot; rel=&quot;wzc1989&quot;&gt;wzc1989&lt;/a&gt; Agreed. The explain plan of the query when the optimization is enabled/disabled shows different ExprNodeDesc for Select operator. As you said, the UDF to cast from bigint to int is lost during deduplication process. I will dig down further to see why colExprMap is missing and deduplication of select operators fails to retain the UDF. I am exactly right at this point debugging now. Thanks for debugging this issue and providing insights. Will post update soon and will also see if your suggested fix is the right way to do it.&lt;/p&gt;</comment>
                            <comment id="14154205" author="prasanth_j" created="Wed, 1 Oct 2014 01:44:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzc1989&quot; class=&quot;user-hover&quot; rel=&quot;wzc1989&quot;&gt;wzc1989&lt;/a&gt; You are exactly correct. The getConversionSelectOperator does not seem populate and pass columnExprMap in constructor or set it explicitly. As you had mentioned this is the reason why Select operator deduplication did not propagate the UDF for type conversion properly. I also verified that the test case passes now. I will put up another version of patch with the fix and test case. Thanks again for the test case and suggested fix. &lt;/p&gt;</comment>
                            <comment id="14154235" author="prasanth_j" created="Wed, 1 Oct 2014 02:12:55 +0000"  >&lt;p&gt;Added fix for issue reported by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzc1989&quot; class=&quot;user-hover&quot; rel=&quot;wzc1989&quot;&gt;wzc1989&lt;/a&gt;. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;hagleitn&lt;/a&gt; Can you take a look at changes to SemanticAnalyzer? The change is necessary for select operator deduplication to work properly. It sets columnExprMap for SelectOperator which was not populated/set for GBY query case. See discussion above for more info.&lt;/p&gt;</comment>
                            <comment id="14154884" author="hiveqa" created="Wed, 1 Oct 2014 14:56:04 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12672237/HIVE-8151.9.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12672237/HIVE-8151.9.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 6490 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby4_map
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_groupby4_map_skew
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input30
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input32
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union10
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union12
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union4
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1071/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1071/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1071/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1071/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1071/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1071/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12672237&lt;/p&gt;</comment>
                            <comment id="14155273" author="prasanth_j" created="Wed, 1 Oct 2014 18:43:18 +0000"  >&lt;p&gt;Test failures are golden file diffs. Updated patch should fix those.&lt;/p&gt;</comment>
                            <comment id="14155963" author="hiveqa" created="Thu, 2 Oct 2014 01:29:27 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12672379/HIVE-8151.10.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12672379/HIVE-8151.10.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 14 failed/errored test(s), 6503 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.pig.TestHCatLoader.testColumnarStorePushdown[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testConvertBooleanToInt[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testGetInputBytes[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testProjectionsBasic[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataBasic[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadDataPrimitiveTypes[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testReadPartitionedBasic[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testSchemaLoadBasic[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testSchemaLoadComplex[5]
org.apache.hive.hcatalog.pig.TestHCatLoader.testSchemaLoadPrimitiveTypes[5]
org.apache.hive.hcatalog.pig.TestHCatStorer.testDynamicPartitioningMultiPartColsNoDataInDataNoSpec[5]
org.apache.hive.hcatalog.pig.TestHCatStorer.testEmptyStore[5]
org.apache.hive.hcatalog.pig.TestHCatStorer.testNoAlias[5]
org.apache.hive.hcatalog.pig.TestHCatStorer.testPartitionPublish[5]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1078/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1078/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1078/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1078/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1078/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1078/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 14 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12672379&lt;/p&gt;</comment>
                            <comment id="14155990" author="prasanth_j" created="Thu, 2 Oct 2014 02:00:57 +0000"  >&lt;p&gt;Test failures are unrelated. Committed this patch to trunk and branch-0.14. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;hagleitn&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wzc1989&quot; class=&quot;user-hover&quot; rel=&quot;wzc1989&quot;&gt;wzc1989&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14156066" author="lefty@hortonworks.com" created="Thu, 2 Oct 2014 04:28:53 +0000"  >&lt;p&gt;Doc note:  This changes the default value of configuration parameter &lt;b&gt;hive.optimize.sort.dynamic.partition&lt;/b&gt; to false in 0.14.0.  It was introduced in 0.13.0 by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6455&quot; title=&quot;Scalable dynamic partitioning and bucketing optimization&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6455&quot;&gt;&lt;del&gt;HIVE-6455&lt;/del&gt;&lt;/a&gt; but hasn&apos;t been documented in the wiki yet.&lt;/p&gt;</comment>
                            <comment id="14168547" author="lefty@hortonworks.com" created="Sun, 12 Oct 2014 07:15:44 +0000"  >&lt;p&gt;Doc note:  Prasanth added &lt;b&gt;hive.optimize.sort.dynamic.partition&lt;/b&gt; to the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.optimize.sort.dynamic.partition&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.optimize.sort.dynamic.partition &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So I&apos;m removing the TODOC14 label.&lt;/p&gt;</comment>
                            <comment id="14211014" author="thejas" created="Thu, 13 Nov 2014 19:43:41 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12695620">HIVE-6455</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12669247" name="HIVE-8151.1.patch" size="146661" author="prasanth_j" created="Tue, 16 Sep 2014 22:30:47 +0000"/>
                            <attachment id="12672379" name="HIVE-8151.10.patch" size="376146" author="prasanth_j" created="Wed, 1 Oct 2014 18:43:18 +0000"/>
                            <attachment id="12671128" name="HIVE-8151.2.patch" size="185760" author="prasanth_j" created="Thu, 25 Sep 2014 03:10:04 +0000"/>
                            <attachment id="12671603" name="HIVE-8151.3.patch" size="324894" author="prasanth_j" created="Sat, 27 Sep 2014 01:00:55 +0000"/>
                            <attachment id="12671726" name="HIVE-8151.4.patch" size="325867" author="prasanth_j" created="Mon, 29 Sep 2014 01:22:27 +0000"/>
                            <attachment id="12671855" name="HIVE-8151.5.patch" size="327336" author="prasanth_j" created="Mon, 29 Sep 2014 19:25:39 +0000"/>
                            <attachment id="12671884" name="HIVE-8151.6.patch" size="327416" author="prasanth_j" created="Mon, 29 Sep 2014 22:17:20 +0000"/>
                            <attachment id="12671975" name="HIVE-8151.7.patch" size="340365" author="prasanth_j" created="Tue, 30 Sep 2014 06:29:33 +0000"/>
                            <attachment id="12672091" name="HIVE-8151.8.patch" size="340831" author="prasanth_j" created="Tue, 30 Sep 2014 18:33:20 +0000"/>
                            <attachment id="12672237" name="HIVE-8151.9.patch" size="353391" author="prasanth_j" created="Wed, 1 Oct 2014 02:12:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i204of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Added config changes to &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>