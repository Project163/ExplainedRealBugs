<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:54:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-16875] Query against view with partitioned child on HoS fails with privilege exception.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-16875</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Query against view with child table that has partitions fails with privilege exception even with correct privileges.&lt;/p&gt;

&lt;p&gt;Reproduce:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create table jsamp1 (a string) partitioned by (b int);
insert into table jsamp1 partition (b=1) values (&quot;hello&quot;);
create view jview as select * from jsamp1;

create role viewtester;
grant all on table jview to role viewtester;
grant role viewtester to group testers;

Use MR, the select will succeed:
set hive.execution.engine=mr;
select count(*) from jview;

while use spark:
set hive.execution.engine=spark;
select count(*) from jview;

it fails with:
Error: Error while compiling statement: FAILED: SemanticException No valid privileges
 User tester does not have privileges for QUERY
 The required privileges: Server=server1-&amp;gt;Db=default-&amp;gt;Table=j1part-&amp;gt;action=select; (state=42000,code=40000)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13078802">HIVE-16875</key>
            <summary>Query against view with partitioned child on HoS fails with privilege exception.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ychena">Yongzhi Chen</assignee>
                                    <reporter username="ychena">Yongzhi Chen</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Jun 2017 00:01:06 +0000</created>
                <updated>Tue, 22 May 2018 23:58:57 +0000</updated>
                            <resolved>Thu, 22 Jun 2017 14:09:50 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Spark</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16047039" author="ychena" created="Mon, 12 Jun 2017 20:37:08 +0000"  >&lt;p&gt;The explain dependency for hive MR and HOS is different in HIVE 1.1:&lt;br/&gt;
Spark:&lt;br/&gt;
{&quot;input_partitions&quot;:[&lt;/p&gt;
{&quot;partitionName&quot;:&quot;default@j1part@b=1&quot;}
&lt;p&gt;],&quot;input_tables&quot;:[&lt;/p&gt;
{&quot;tablename&quot;:&quot;default@jview&quot;,&quot;tabletype&quot;:&quot;VIRTUAL_VIEW&quot;}
&lt;p&gt;,&lt;/p&gt;
{&quot;tablename&quot;:&quot;default@j1part&quot;,&quot;tabletype&quot;:&quot;MANAGED_TABLE&quot;,&quot;tableParents&quot;:&quot;[default@jview]&quot;}
&lt;p&gt;]}&lt;/p&gt;

&lt;p&gt;MR:&lt;br/&gt;
{&quot;input_partitions&quot;:[&lt;/p&gt;
{&quot;partitionParents&quot;:&quot;[default@jview]&quot;,&quot;partitionName&quot;:&quot;default@j1part@b=1&quot;}
&lt;p&gt;],&quot;input_tables&quot;:[&lt;/p&gt;
{&quot;tablename&quot;:&quot;default@jview&quot;,&quot;tabletype&quot;:&quot;VIRTUAL_VIEW&quot;}
&lt;p&gt;,&lt;/p&gt;
{&quot;tablename&quot;:&quot;default@j1part&quot;,&quot;tabletype&quot;:&quot;MANAGED_TABLE&quot;,&quot;tableParents&quot;:&quot;[default@jview]&quot;}
&lt;p&gt;]} &lt;/p&gt;

&lt;p&gt;For spark, there is missing partitionParents which caused the issue. &lt;/p&gt;</comment>
                            <comment id="16047044" author="ychena" created="Mon, 12 Jun 2017 20:42:27 +0000"  >&lt;p&gt;Fix the issue by including parent information in alias. &lt;/p&gt;</comment>
                            <comment id="16047145" author="hiveqa" created="Mon, 12 Jun 2017 22:25:30 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12872772/HIVE-16875.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12872772/HIVE-16875.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 51 failed/errored test(s), 10831 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[partition_wise_fileformat6] (batchId=7)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query16] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query94] (batchId=232)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_join_reordering_values] (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_12] (batchId=114)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_1] (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_3] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_4] (batchId=126)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_5] (batchId=137)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_7] (batchId=138)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[auto_sortmerge_join_8] (batchId=132)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucket_map_join_spark1] (batchId=128)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucket_map_join_spark2] (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucket_map_join_spark3] (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucket_map_join_spark4] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucketmapjoin1] (batchId=136)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucketmapjoin2] (batchId=101)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucketmapjoin3] (batchId=119)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[bucketmapjoin4] (batchId=100)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[filter_join_breaktask] (batchId=132)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby_map_ppr] (batchId=104)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby_map_ppr_multi_distinct] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby_ppr] (batchId=113)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby_ppr_multi_distinct] (batchId=124)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby_sort_1_23] (batchId=134)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[groupby_sort_skew_1_23] (batchId=104)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join17] (batchId=130)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join26] (batchId=108)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join32] (batchId=108)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join32_lessSize] (batchId=103)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join33] (batchId=107)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join34] (batchId=130)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join35] (batchId=127)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join9] (batchId=120)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[join_filters_overlap] (batchId=115)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[louter_join_ppr] (batchId=118)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[mapjoin_mapjoin] (batchId=121)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[optimize_nullscan] (batchId=134)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[outer_join_ppr] (batchId=109)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[pcr] (batchId=125)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[ppd_join_filter] (batchId=124)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[router_join_ppr] (batchId=134)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[smb_mapjoin_15] (batchId=132)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[transform_ppr1] (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[transform_ppr2] (batchId=118)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union22] (batchId=106)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union24] (batchId=125)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union_ppr] (batchId=108)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5629/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5629/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5629/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5629/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5629/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5629/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 51 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12872772 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16054695" author="ychena" created="Mon, 19 Jun 2017 20:38:23 +0000"  >&lt;p&gt;Second patch to fix the test results for spark, and add new test to spark unit test&lt;/p&gt;</comment>
                            <comment id="16055189" author="hiveqa" created="Tue, 20 Jun 2017 05:57:17 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12873552/HIVE-16875.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12873552/HIVE-16875.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 15 failed/errored test(s), 10835 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite] (batchId=238)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=141)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[tez_smb_main] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[delete_orig_table] (batchId=98)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[hybridgrace_hashjoin_1] (batchId=98)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query16] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query94] (batchId=233)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testBootstrapFunctionReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionIncrementalReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionWithFunctionBinaryJarsOnHDFS (batchId=217)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5681/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5681/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5681/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5681/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5681/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5681/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 15 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12873552 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16055702" author="ychena" created="Tue, 20 Jun 2017 12:49:06 +0000"  >&lt;p&gt;The failures are not related. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=csun&quot; class=&quot;user-hover&quot; rel=&quot;csun&quot;&gt;csun&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;aihuaxu&lt;/a&gt; could you review the change ? Thanks&lt;/p&gt;</comment>
                            <comment id="16055770" author="aihuaxu" created="Tue, 20 Jun 2017 13:44:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ychena&quot; class=&quot;user-hover&quot; rel=&quot;ychena&quot;&gt;ychena&lt;/a&gt; You are saying the alias in context.parseContext.getTopOps() and getConf().getAlias() are different which causes we are retrieving incorrect partition info later?&lt;/p&gt;
</comment>
                            <comment id="16055811" author="ychena" created="Tue, 20 Jun 2017 14:05:28 +0000"  >&lt;p&gt;Yes, they are different. The TS operator getConf.getAlias only has table name in it. context.parseContext.getTopOps()&apos;s keys are the aliases with view information. &lt;/p&gt;</comment>
                            <comment id="16056040" author="aihuaxu" created="Tue, 20 Jun 2017 16:26:09 +0000"  >&lt;p&gt;I&apos;m wondering if the alias from Conf and parseContext should be the same? Do you know why they are not the same? &lt;/p&gt;</comment>
                            <comment id="16056338" author="ychena" created="Tue, 20 Jun 2017 19:37:36 +0000"  >&lt;p&gt;AFAIK: they are sometimes are different:&lt;br/&gt;
Following is from hive comment in GenSparkProcContext.java: &lt;br/&gt;
 // Alias to operator map, from the semantic analyzer.&lt;br/&gt;
  // This is necessary as sometimes semantic analyzer&apos;s mapping is different than operator&apos;s own alias.&lt;br/&gt;
  public final Map&amp;lt;String, Operator&amp;lt;? extends OperatorDesc&amp;gt;&amp;gt; topOps;&lt;/p&gt;

&lt;p&gt;And it is what I saw when debugging. &lt;/p&gt;

&lt;p&gt;In SemanticAnalyzer.java:&lt;br/&gt;
private Operator genTablePlan(String alias, QB qb) throws SemanticException {&lt;/p&gt;

&lt;p&gt;String alias_id = getAliasId(alias, qb);&lt;/p&gt;

&lt;p&gt;.....&lt;br/&gt;
 // Create the root of the operator tree&lt;br/&gt;
      TableScanDesc tsDesc = new TableScanDesc(alias, vcList, tab);&lt;br/&gt;
      setupStats(tsDesc, qb.getParseInfo(), tab, alias, rwsch);&lt;/p&gt;


&lt;p&gt;....&lt;br/&gt;
      top = putOpInsertMap(OperatorFactory.get(tsDesc,&lt;br/&gt;
          new RowSchema(rwsch.getColumnInfos())), rwsch);&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
     // Add this to the list of top operators - we always start from a table&lt;br/&gt;
      // scan&lt;br/&gt;
      topOps.put(alias_id, top);&lt;/p&gt;


&lt;p&gt;If alias != alias_id, then the conf (TableScanDesc) is different from topOps&apos;s key&lt;/p&gt;</comment>
                            <comment id="16056402" author="aihuaxu" created="Tue, 20 Jun 2017 20:26:02 +0000"  >&lt;p&gt;I see. We are expecting an alias_id here rather than an alias. &lt;/p&gt;

&lt;p&gt;nit: maybe we can change alias to alias_id and the same in the function &lt;tt&gt;setupMapWork(MapWork mapWork, GenSparkProcContext context, PrunedPartitionList partitions, TableScanOperator root, String alias)&lt;/tt&gt; to be clear.&lt;/p&gt;

&lt;p&gt;Otherwise, the change looks good to me. +1. &lt;/p&gt;</comment>
                            <comment id="16056450" author="ychena" created="Tue, 20 Jun 2017 21:02:31 +0000"  >&lt;p&gt;Attach patch 3 with changing alias to alias_id.&lt;/p&gt;</comment>
                            <comment id="16056694" author="hiveqa" created="Tue, 20 Jun 2017 23:59:31 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12873738/HIVE-16875.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12873738/HIVE-16875.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 14 failed/errored test(s), 10838 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=238)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=238)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[tez_smb_main] (batchId=150)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query16] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query94] (batchId=233)
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver[union24] (batchId=125)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testBootstrapFunctionReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionIncrementalReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionWithFunctionBinaryJarsOnHDFS (batchId=217)
org.apache.hadoop.hive.ql.security.TestStorageBasedMetastoreAuthorizationProvider.testSimplePrivileges (batchId=220)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5696/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5696/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5696/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5696/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5696/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5696/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 14 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12873738 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16059446" author="ychena" created="Thu, 22 Jun 2017 14:09:50 +0000"  >&lt;p&gt;Committed the fix to master and branch-2. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;aihuaxu&lt;/a&gt; for reviewing the code.&lt;/p&gt;</comment>
                            <comment id="16486066" author="vgarg" created="Tue, 22 May 2018 23:58:57 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12872772" name="HIVE-16875.1.patch" size="5387" author="ychena" created="Mon, 12 Jun 2017 20:43:19 +0000"/>
                            <attachment id="12873552" name="HIVE-16875.2.patch" size="105118" author="ychena" created="Mon, 19 Jun 2017 20:38:14 +0000"/>
                            <attachment id="12873738" name="HIVE-16875.3.patch" size="106006" author="ychena" created="Tue, 20 Jun 2017 21:01:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g4dz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>