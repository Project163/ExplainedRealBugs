<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:27:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-29081] CI fails intermittently cause some runs exceed ephemeral storage limits</title>
                <link>https://issues.apache.org/jira/browse/HIVE-29081</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The CI fails intermittently cause some runs/splits exceed the 20Gi limit on ephemeral local storage that was set recently (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-28954&quot; title=&quot;CI fails intermittently due to ephemeral-storage exhaustion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-28954&quot;&gt;&lt;del&gt;HIVE-28954&lt;/del&gt;&lt;/a&gt;) and the respective pods are being evicted.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci.hive.apache.org/job/hive-precommit/job/master/2603/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/job/hive-precommit/job/master/2603/&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci.hive.apache.org/job/hive-precommit/job/master/2602/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/job/hive-precommit/job/master/2602/&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://ci.hive.apache.org/job/hive-precommit/job/master/2600/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/job/hive-precommit/job/master/2600/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Unable to create live FilePath for hive-precommit-master-2603-3bz8w-bkgst-7wgqt; hive-precommit-master-2603-3bz8w-bkgst-7wgqt was marked offline: Pod failed (Reason: Evicted, Message: Pod ephemeral local storage usage exceeds the total limit of containers 20Gi. )
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13622918">HIVE-29081</key>
            <summary>CI fails intermittently cause some runs exceed ephemeral storage limits</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 9 Jul 2025 12:54:14 +0000</created>
                <updated>Tue, 29 Jul 2025 14:51:47 +0000</updated>
                            <resolved>Thu, 10 Jul 2025 17:15:03 +0000</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                    <fixVersion>4.2.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18004146" author="zabetak" created="Wed, 9 Jul 2025 12:58:31 +0000"  >&lt;p&gt;Having a limit (as indicated in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-28954&quot; title=&quot;CI fails intermittently due to ephemeral-storage exhaustion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-28954&quot;&gt;&lt;del&gt;HIVE-28954&lt;/del&gt;&lt;/a&gt;) is useful to protect against  runs that consume unreasonably large storage space but we probably have to revisit the upper bound given the number of failed runs recently.&lt;/p&gt;</comment>
                            <comment id="18004152" author="zabetak" created="Wed, 9 Jul 2025 13:18:52 +0000"  >&lt;p&gt;I gathered some disk usage statistics from &lt;a href=&quot;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/PR-5946/2/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PR-5946&lt;/a&gt; that is currently running and where split-12 failed due to the storage limit using the following script:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-bash&quot;&gt;
node=hive-precommit-pr-5946-2-nlm1g-nckm6-tp8xd;&lt;span class=&quot;code-object&quot;&gt;while&lt;/span&gt; true; &lt;span class=&quot;code-object&quot;&gt;do&lt;/span&gt; date; kubectl exec &lt;span class=&quot;code-object&quot;&gt;$node&lt;/span&gt; -c hdb -- du /home/jenkins/agent/workspace/hive-precommit_PR-5946 -h --max-depth=1; kubectl exec &lt;span class=&quot;code-object&quot;&gt;$node&lt;/span&gt; -c hdb -- du / -h --max-depth=1; sleep 30s; &lt;span class=&quot;code-object&quot;&gt;done&lt;/span&gt; &amp;gt; pr5946-du.log
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As it can be seen from  &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13077376/13077376_pr5946-du.log&quot; title=&quot;pr5946-du.log attached to HIVE-29081&quot;&gt;pr5946-du.log&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; just before the failure the hdb container was consuming in total 24G of space:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1.5G	/home/jenkins/agent/workspace/hive-precommit_PR-5946/packaging
3.8G	/home/jenkins/agent/workspace/hive-precommit_PR-5946/.m2
7.3G	/home/jenkins/agent/workspace/hive-precommit_PR-5946/itests
15G	/home/jenkins/agent/workspace/hive-precommit_PR-5946
15G	/home
4.4G	/usr
4.1G	/work
24G	/
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I am pretty sure that what lies under the hive-precommit_PR-5946 directory (i.e., 15G) definitely accounts for ephemeral storage. I am less sure if  /work and /usr account for ephemeral storage but based on the current observations we definitely have to bump up the request/limit fields.&lt;/p&gt;

&lt;p&gt;For the rest, it would be useful to understand what in itests folders amounts to 7GB (if its normal or regression) but we can do this after we stabilize CI.&lt;/p&gt;</comment>
                            <comment id="18004493" author="ngangam" created="Thu, 10 Jul 2025 17:15:03 +0000"  >&lt;p&gt;Closing the jira as the fix seems to have merged.&lt;/p&gt;</comment>
                            <comment id="18004579" author="zhangbutao" created="Fri, 11 Jul 2025 01:30:20 +0000"  >&lt;p&gt;I noticed branch-4.1 also has this issue, i will cherry-pick this change into branch-4.1.&lt;br/&gt;
&lt;a href=&quot;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/branch-4.1/13/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/branch-4.1/13/pipeline&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13617973">HIVE-28954</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13077376" name="pr5946-du.log" size="150877" author="zabetak" created="Wed, 9 Jul 2025 13:06:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1wob4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>