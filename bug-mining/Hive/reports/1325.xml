<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:07:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3810] HiveHistory.log need to replace &apos;\r&apos; with space before writing Entry.value to historyfile</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3810</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HiveHistory.log will replace &apos;\n&apos; with space before writing Entry.value to history file:&lt;/p&gt;

&lt;p&gt;    val = val.replace(&apos;\n&apos;, &apos; &apos;);&lt;/p&gt;

&lt;p&gt;but HiveHistory.parseHiveHistory use BufferedReader.readLine which takes &apos;\n&apos;, &apos;\r&apos;, &apos;\r\n&apos;  as line delimiter to parse history file&lt;/p&gt;

&lt;p&gt;if val contains &apos;\r&apos;, there is a high possibility that HiveHistory.parseLine will fail, in which case usually RecordTypes.valueOf(recType) will throw exception &apos;java.lang.IllegalArgumentException&apos;&lt;/p&gt;

&lt;p&gt;HiveHistory.log need to replace &apos;\r&apos; with space as well:&lt;/p&gt;

&lt;p&gt;val = val.replace(&apos;\n&apos;, &apos; &apos;);&lt;/p&gt;

&lt;p&gt;changed to&lt;/p&gt;

&lt;p&gt;val = val.replaceAll(&quot;\r|\n&quot;, &quot; &quot;);&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;val = val.replace(&apos;\r&apos;, &apos; &apos;).replace(&apos;\n&apos;, &apos; &apos;);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12624184">HIVE-3810</key>
            <summary>HiveHistory.log need to replace &apos;\r&apos; with space before writing Entry.value to historyfile</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mgrover">Mark Grover</assignee>
                                    <reporter username="wsxys08@gmail.com">qiangwang</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Dec 2012 12:10:06 +0000</created>
                <updated>Tue, 15 Oct 2013 23:30:14 +0000</updated>
                            <resolved>Mon, 8 Jul 2013 22:22:50 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Logging</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13534657" author="mgrover" created="Tue, 18 Dec 2012 05:26:29 +0000"  >&lt;p&gt;Took care of mac line endings&lt;/p&gt;</comment>
                            <comment id="13551149" author="mgrover" created="Fri, 11 Jan 2013 14:54:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wsxys08%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;wsxys08@gmail.com&quot;&gt;wsxys08@gmail.com&lt;/a&gt; I see the status got resolved to fix. Did this get committed?&lt;/p&gt;</comment>
                            <comment id="13551448" author="ashutoshc" created="Fri, 11 Jan 2013 19:41:59 +0000"  >&lt;p&gt;I dont see this in svn commit log. Reopening for review.&lt;/p&gt;</comment>
                            <comment id="13564975" author="mgrover" created="Tue, 29 Jan 2013 01:50:00 +0000"  >&lt;p&gt;Review at &lt;a href=&quot;https://reviews.apache.org/r/9129/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/9129/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13568839" author="appodictic" created="Fri, 1 Feb 2013 16:12:11 +0000"  >&lt;p&gt;Doesn&apos;t java.io.File have constants to detect the line terminiator per OS. can we possibly use that?&lt;/p&gt;</comment>
                            <comment id="13569937" author="mgrover" created="Mon, 4 Feb 2013 00:20:52 +0000"  >&lt;p&gt;Thanks, Edward for the review!&lt;br/&gt;
Your comment made me think about using &lt;tt&gt;System.getProperty(&quot;line.separator&quot;)&lt;/tt&gt; instead. &lt;/p&gt;

&lt;p&gt;Let me post a new patch with that. I am not entirely sure how to test it (apart from running the unit tests). If you have any ideas, please let me know.&lt;/p&gt;</comment>
                            <comment id="13569938" author="mgrover" created="Mon, 4 Feb 2013 00:24:41 +0000"  >&lt;p&gt;My previous patch (#3) was accidently based off of patch 2 instead of being based off of trunk. Corrected that in patch 4.&lt;/p&gt;</comment>
                            <comment id="13702043" author="ashutoshc" created="Mon, 8 Jul 2013 14:54:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13702530" author="ashutoshc" created="Mon, 8 Jul 2013 22:22:50 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Mark!&lt;/p&gt;</comment>
                            <comment id="13702789" author="hudson" created="Tue, 9 Jul 2013 02:01:28 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop1-ptest #47 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/47/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/47/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3810&quot; title=&quot;HiveHistory.log need to replace &amp;#39;\r&amp;#39; with space before writing Entry.value to historyfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3810&quot;&gt;&lt;del&gt;HIVE-3810&lt;/del&gt;&lt;/a&gt; : HiveHistory.log need to replace \r with space before writing Entry.value to historyfile (Mark Grover via Ashutosh Chauhan) (Revision 1500991)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13703290" author="hudson" created="Tue, 9 Jul 2013 14:03:45 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #279 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/279/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/279/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3810&quot; title=&quot;HiveHistory.log need to replace &amp;#39;\r&amp;#39; with space before writing Entry.value to historyfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3810&quot;&gt;&lt;del&gt;HIVE-3810&lt;/del&gt;&lt;/a&gt; : HiveHistory.log need to replace \r with space before writing Entry.value to historyfile (Mark Grover via Ashutosh Chauhan) (Revision 1500991)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13703737" author="hudson" created="Tue, 9 Jul 2013 20:18:42 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2188 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2188/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2188/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3810&quot; title=&quot;HiveHistory.log need to replace &amp;#39;\r&amp;#39; with space before writing Entry.value to historyfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3810&quot;&gt;&lt;del&gt;HIVE-3810&lt;/del&gt;&lt;/a&gt; : HiveHistory.log need to replace \r with space before writing Entry.value to historyfile (Mark Grover via Ashutosh Chauhan) (Revision 1500991)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13708729" author="hudson" created="Mon, 15 Jul 2013 17:55:23 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #14 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/14/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/14/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3810&quot; title=&quot;HiveHistory.log need to replace &amp;#39;\r&amp;#39; with space before writing Entry.value to historyfile&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3810&quot;&gt;&lt;del&gt;HIVE-3810&lt;/del&gt;&lt;/a&gt; : HiveHistory.log need to replace \r with space before writing Entry.value to historyfile (Mark Grover via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1500991&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13795991" author="ashutoshc" created="Tue, 15 Oct 2013 23:30:14 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12561425" name="HIVE-3810.1.patch" size="692" author="mgrover" created="Tue, 18 Dec 2012 04:59:02 +0000"/>
                            <attachment id="12561433" name="HIVE-3810.2.patch" size="765" author="mgrover" created="Tue, 18 Dec 2012 05:26:29 +0000"/>
                            <attachment id="12567791" name="HIVE-3810.3.patch" size="828" author="mgrover" created="Mon, 4 Feb 2013 00:21:12 +0000"/>
                            <attachment id="12567792" name="HIVE-3810.4.patch" size="639" author="mgrover" created="Mon, 4 Feb 2013 00:24:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>298913</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i15wmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242585</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>