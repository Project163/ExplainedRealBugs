<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:43:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10729] Query failed when select complex columns from joinned table (tez map join only)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10729</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When map join happens, if projection columns include complex data types, query will fail. &lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;set&lt;/span&gt; hive.auto.&lt;span class=&quot;code-keyword&quot;&gt;convert&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;join&lt;/span&gt;;
hive.auto.&lt;span class=&quot;code-keyword&quot;&gt;convert&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;join&lt;/span&gt;=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;desc&lt;/span&gt; foo;
&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;                   	&lt;span class=&quot;code-keyword&quot;&gt;array&lt;/span&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;&amp;gt;
hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; foo;
[1,2]
hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;desc&lt;/span&gt; src_int;
&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;                 	&lt;span class=&quot;code-keyword&quot;&gt;int&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;value&lt;/span&gt;               	&lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;
hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; src_int &lt;span class=&quot;code-keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;=2;
2	   val_2
hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; foo &lt;span class=&quot;code-keyword&quot;&gt;join&lt;/span&gt; src_int src  &lt;span class=&quot;code-keyword&quot;&gt;on&lt;/span&gt; src.&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt; = foo.&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;[1];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Query will fail with stack trace&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazybinary.LazyBinaryArray cannot be cast to [Ljava.lang.Object;
	at org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector.getList(StandardListObjectInspector.java:111)
	at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.serialize(LazySimpleSerDe.java:314)
	at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.serializeField(LazySimpleSerDe.java:262)
	at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.doSerialize(LazySimpleSerDe.java:246)
	at org.apache.hadoop.hive.serde2.AbstractEncodingAwareSerDe.serialize(AbstractEncodingAwareSerDe.java:50)
	at org.apache.hadoop.hive.ql.exec.FileSinkOperator.process(FileSinkOperator.java:692)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)
	at org.apache.hadoop.hive.ql.exec.SelectOperator.process(SelectOperator.java:88)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)
	at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.internalForward(CommonJoinOperator.java:644)
	at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.genAllOneUniqueJoinObject(CommonJoinOperator.java:676)
	at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.checkAndGenObject(CommonJoinOperator.java:754)
	at org.apache.hadoop.hive.ql.exec.MapJoinOperator.process(MapJoinOperator.java:386)
	... 23 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Similar error when projection columns include a map:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; test (&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;INT&lt;/span&gt;, b &lt;span class=&quot;code-keyword&quot;&gt;MAP&lt;/span&gt;&amp;lt;&lt;span class=&quot;code-keyword&quot;&gt;INT&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;STRING&lt;/span&gt;&amp;gt;) STORED &lt;span class=&quot;code-keyword&quot;&gt;AS&lt;/span&gt; ORC;
hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;INSERT&lt;/span&gt; OVERWRITE &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; test &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; 1, &lt;span class=&quot;code-keyword&quot;&gt;MAP&lt;/span&gt;(1, &lt;span class=&quot;code-quote&quot;&gt;&quot;val_1&quot;&lt;/span&gt;, 2, &lt;span class=&quot;code-quote&quot;&gt;&quot;val_2&quot;&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; src &lt;span class=&quot;code-keyword&quot;&gt;LIMIT&lt;/span&gt; 1;
hive&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;select&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;from&lt;/span&gt; src &lt;span class=&quot;code-keyword&quot;&gt;join&lt;/span&gt; test &lt;span class=&quot;code-keyword&quot;&gt;where&lt;/span&gt; src.&lt;span class=&quot;code-keyword&quot;&gt;key&lt;/span&gt;=test.&lt;span class=&quot;code-keyword&quot;&gt;a&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</description>
                <environment></environment>
        <key id="12830313">HIVE-10729</key>
            <summary>Query failed when select complex columns from joinned table (tez map join only)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mmccline">Matt McCline</assignee>
                                    <reporter username="selinazh">Selina Zhang</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 May 2015 21:16:39 +0000</created>
                <updated>Tue, 21 Jun 2016 15:52:39 +0000</updated>
                            <resolved>Tue, 29 Mar 2016 09:18:33 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.1</fixVersion>
                    <fixVersion>2.1.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14546276" author="selinazh" created="Fri, 15 May 2015 22:17:49 +0000"  >&lt;p&gt;It seems ReusableRowContainer iterator should convert LazyObjects to StandardObjects, as other join operators did. &lt;/p&gt;

&lt;p&gt;Please let me know which qfile I can use to add more unit tests.&lt;/p&gt;</comment>
                            <comment id="14546701" author="hiveqa" created="Sat, 16 May 2015 11:28:00 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12733263/HIVE-10729.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12733263/HIVE-10729.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 8943 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_static
org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3919/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3919/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3919/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3919/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3919/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3919/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12733263 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14550846" author="selinazh" created="Tue, 19 May 2015 17:40:23 +0000"  >&lt;p&gt;The unit test failures seem irrelevant to this patch. &lt;/p&gt;</comment>
                            <comment id="14552827" author="vikram.dixit" created="Wed, 20 May 2015 18:22:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt; Can you take a look please?&lt;/p&gt;</comment>
                            <comment id="14552846" author="sershe" created="Wed, 20 May 2015 18:40:31 +0000"  >&lt;p&gt;+1. Nit - can you pre-size the array list to fields size?&lt;/p&gt;</comment>
                            <comment id="14552853" author="selinazh" created="Wed, 20 May 2015 18:46:08 +0000"  >&lt;p&gt;Yes. Will do. &lt;/p&gt;</comment>
                            <comment id="14552963" author="selinazh" created="Wed, 20 May 2015 19:43:18 +0000"  >&lt;p&gt;added pre-size the array list to fields size&lt;/p&gt;</comment>
                            <comment id="14553533" author="hiveqa" created="Thu, 21 May 2015 02:31:44 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12734209/HIVE-10729.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12734209/HIVE-10729.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 8965 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3969/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3969/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3969/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3969/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3969/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3969/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12734209 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14555069" author="selinazh" created="Thu, 21 May 2015 21:16:50 +0000"  >&lt;p&gt;The above unit test failure seems not relevant to this patch. &lt;/p&gt;</comment>
                            <comment id="14561260" author="gss2002" created="Wed, 27 May 2015 16:56:37 +0000"  >&lt;p&gt;I tried this patch with Hive 1.2.0 and I am still getting this error.... &lt;/p&gt;

&lt;p&gt;Caused by: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazybinary.LazyBinaryArray cannot be cast to [Ljava.lang.Object;&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector.getListElement(StandardListObjectInspector.java:66)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.udf.generic.GenericUDFIndex.evaluate(GenericUDFIndex.java:102)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeGenericFuncEvaluator._evaluate(ExprNodeGenericFuncEvaluator.java:186)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:77)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluator.evaluate(ExprNodeEvaluator.java:65)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.SelectOperator.process(SelectOperator.java:81)&lt;br/&gt;
        ... 31 more&lt;/p&gt;</comment>
                            <comment id="14574924" author="vikram.dixit" created="Fri, 5 Jun 2015 17:56:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=selinazh&quot; class=&quot;user-hover&quot; rel=&quot;selinazh&quot;&gt;selinazh&lt;/a&gt; Any updates here? Can you take a look at &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gss2002&quot; class=&quot;user-hover&quot; rel=&quot;gss2002&quot;&gt;gss2002&lt;/a&gt;&apos;s comment? &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gss2002&quot; class=&quot;user-hover&quot; rel=&quot;gss2002&quot;&gt;gss2002&lt;/a&gt; Can you provide a simple test where you saw the above exception.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Vikram.&lt;/p&gt;</comment>
                            <comment id="14578856" author="gss2002" created="Tue, 9 Jun 2015 13:10:17 +0000"  >&lt;p&gt;Here is the query and source table describe that shows the array&amp;lt;string&amp;gt; which seems to be the cause...&lt;/p&gt;

&lt;p&gt;drop table debug.ct_gsd_events1_test;&lt;br/&gt;
create table debug.ct_gsd_events1_test&lt;br/&gt;
as select  a.*,&lt;br/&gt;
b.svcrqst_id,&lt;br/&gt;
b.svcrqct_cds,&lt;br/&gt;
b.svcrtyp_cd,&lt;br/&gt;
b.cmpltyp_cd,&lt;br/&gt;
b.sum_reason_cd as src,&lt;br/&gt;
b.cnctmd_cd,&lt;br/&gt;
b.notes&lt;br/&gt;
from ctm.ct_gsd_events a&lt;br/&gt;
inner join&lt;br/&gt;
mbr.gsd_service_request b&lt;br/&gt;
on a.contact_event_id = b.cnctevn_id;&lt;/p&gt;


&lt;p&gt;hive&amp;gt; describe formatted ctm.ct_gsd_events;&lt;br/&gt;
OK&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;col_name              data_type               comment&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;hmoid                   string                                      &lt;br/&gt;
cumb_id_no              int                                         &lt;br/&gt;
mbrind_id               string                                      &lt;br/&gt;
contact_event_id        string                                      &lt;br/&gt;
ce_create_dt            string                                      &lt;br/&gt;
ce_end_dt               string                                      &lt;br/&gt;
contact_type            string                                      &lt;br/&gt;
cnctevs_cd              string                                      &lt;br/&gt;
contact_mode            string                                      &lt;br/&gt;
cntvnst_stts_cd         string                                      &lt;br/&gt;
total_transfers         int                                         &lt;br/&gt;
ce_notes                array&amp;lt;string&amp;gt;                               &lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Detailed Table Information&lt;br/&gt;
Database:               ctm                      &lt;br/&gt;
Owner:                  LOAD_USER                  &lt;br/&gt;
CreateTime:             Fri May 29 09:41:58 EDT 2015     &lt;br/&gt;
LastAccessTime:         UNKNOWN                  &lt;br/&gt;
Protect Mode:           None                     &lt;br/&gt;
Retention:              0                        &lt;br/&gt;
Location:               hdfs://xhadnnm1p.example.com:8020/apps/hive/warehouse/ctm.db/ct_gsd_events         &lt;br/&gt;
Table Type:             MANAGED_TABLE            &lt;br/&gt;
Table Parameters:                &lt;br/&gt;
        COLUMN_STATS_ACCURATE   true                &lt;br/&gt;
        numFiles                154                 &lt;br/&gt;
        numRows                 0                   &lt;br/&gt;
        rawDataSize             0                   &lt;br/&gt;
        totalSize               5464108             &lt;br/&gt;
        transient_lastDdlTime   1432906919          &lt;/li&gt;
&lt;/ol&gt;


&lt;ol&gt;
	&lt;li&gt;Storage Information&lt;br/&gt;
SerDe Library:          org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe       &lt;br/&gt;
InputFormat:            org.apache.hadoop.mapred.TextInputFormat         &lt;br/&gt;
OutputFormat:           org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat       &lt;br/&gt;
Compressed:             No                       &lt;br/&gt;
Num Buckets:            -1                       &lt;br/&gt;
Bucket Columns:         []                       &lt;br/&gt;
Sort Columns:           []                       &lt;br/&gt;
Storage Desc Params:             &lt;br/&gt;
        serialization.format    1                   &lt;br/&gt;
Time taken: 2.968 seconds, Fetched: 42 row(s)&lt;/li&gt;
&lt;/ol&gt;
</comment>
                            <comment id="14578874" author="gss2002" created="Tue, 9 Jun 2015 13:19:44 +0000"  >&lt;p&gt;Here is a sample of the data I think the cause is their is a null in the array&amp;lt;string&amp;gt; field of notes... this was not a problem with Hive 0.13 it definitely started with Hive 0.14/1.x line..&lt;/p&gt;


&lt;p&gt;Vertex failed, vertexName=Map 2, vertexId=vertex_1426958683478_216665_2_01, diagnostics=[Task failed, taskId=task_1426958683478_216665_2_01_000104, diagnostics=[TaskAttempt 0 failed, info=[Error: Failure while running task:java.lang.RuntimeException: java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;cumb_id_no&quot;:31XXXX585,&quot;cumb_id_no_sub&quot;:31XXXX585,&quot;cnctevn_id&quot;:&quot;0021XXX86715&quot;,&quot;svcrqst_id&quot;:&quot;0000003XXX346030&quot;,&quot;svcrqst_crt_dts&quot;:&quot;2015-03-09 11:25:10.927722&quot;,&quot;subject_seq_no&quot;:1,&quot;cntmbrp_id&quot;:&quot;692XX60     &quot;,&quot;plan_component&quot;:&quot;HXXXX     &quot;,&quot;psuniq_id&quot;:&quot;0000000014XXX279&quot;,&quot;cust_segment&quot;:&quot;RM &quot;,&quot;idcard&quot;:&quot;MEXXXXXX         &quot;,&quot;cnctyp_cd&quot;:&quot;001&quot;,&quot;cnctmd_cd&quot;:&quot;D01&quot;,&quot;cnctevs_cd&quot;:&quot;007&quot;,&quot;svcrtyp_cd&quot;:&quot;722&quot;,&quot;svrstyp_cd&quot;:&quot;832&quot;,&quot;cmpltyp_cd&quot;:&quot; &quot;,&quot;catsrsn_cd&quot;:&quot;        &quot;,&quot;apealvl_cd&quot;:&quot; &quot;,&quot;cnstnty_cd&quot;:&quot;001&quot;,&quot;svcrqst_asrqst_ind&quot;:&quot;Y&quot;,&quot;svcrqst_rtnorig_in&quot;:&quot;N&quot;,&quot;svcrqst_vwasof_dt&quot;:&quot;null&quot;,&quot;svcrqst_lupdusr_id&quot;:&quot;XXXXXXX &quot;,&quot;sum_reason_cd&quot;:&quot;98&quot;,&quot;sum_reason&quot;:&quot;Exclude&quot;,&quot;crsr_master_claim_index&quot;:null,&quot;svcrqct_cds&quot;:[&quot;   &quot;],&quot;svcrqst_lupdt&quot;:&quot;2015-03-09 11:25:10.927722&quot;,&quot;crsr_lupdt&quot;:null,&quot;cntmbrp_lupdt&quot;:&quot;2015-03-09 11:24:51.315134&quot;,&quot;cntevsds_lupdt&quot;:&quot;2015-03-09 11:25:13.429458&quot;,&quot;ignore_me&quot;:1,&quot;notes&quot;:null}
&lt;p&gt;        at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:171)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.run(TezProcessor.java:137)&lt;br/&gt;
        at org.apache.tez.runtime.LogicalIOProcessorRuntimeTask.run(LogicalIOProcessorRuntimeTask.java:324)&lt;br/&gt;
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable$1.run(TezTaskRunner.java:176)&lt;br/&gt;
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable$1.run(TezTaskRunner.java:168)&lt;br/&gt;
        at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
        at javax.security.auth.Subject.doAs(Subject.java:415)&lt;br/&gt;
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1556)&lt;br/&gt;
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable.call(TezTaskRunner.java:168)&lt;br/&gt;
        at org.apache.tez.runtime.task.TezTaskRunner$TaskRunnerCallable.call(TezTaskRunner.java:163)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:262)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
        at java.lang.Thread.run(Thread.java:744)&lt;br/&gt;
Caused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;cumb_id_no&quot;:31XXX585,&quot;cumb_id_no_sub&quot;:31XXX585,&quot;cnctevn_id&quot;:&quot;0021XXX86715&quot;,&quot;svcrqst_id&quot;:&quot;0000003XXX346030&quot;,&quot;svcrqst_crt_dts&quot;:&quot;2015-03-09 11:25:10.927722&quot;,&quot;subject_seq_no&quot;:1,&quot;cntmbrp_id&quot;:&quot;692XX60     &quot;,&quot;plan_component&quot;:&quot;HXXXX     &quot;,&quot;psuniq_id&quot;:&quot;0000000014XXX279&quot;,&quot;cust_segment&quot;:&quot;RM &quot;,&quot;idcard&quot;:&quot;MEXXXXXX         &quot;,&quot;cnctyp_cd&quot;:&quot;001&quot;,&quot;cnctmd_cd&quot;:&quot;D01&quot;,&quot;cnctevs_cd&quot;:&quot;007&quot;,&quot;svcrtyp_cd&quot;:&quot;722&quot;,&quot;svrstyp_cd&quot;:&quot;832&quot;,&quot;cmpltyp_cd&quot;:&quot; &quot;,&quot;catsrsn_cd&quot;:&quot;        &quot;,&quot;apealvl_cd&quot;:&quot; &quot;,&quot;cnstnty_cd&quot;:&quot;001&quot;,&quot;svcrqst_asrqst_ind&quot;:&quot;Y&quot;,&quot;svcrqst_rtnorig_in&quot;:&quot;N&quot;,&quot;svcrqst_vwasof_dt&quot;:&quot;null&quot;,&quot;svcrqst_lupdusr_id&quot;:&quot;XXXXXXX &quot;,&quot;sum_reason_cd&quot;:&quot;98&quot;,&quot;sum_reason&quot;:&quot;Exclude&quot;,&quot;crsr_master_claim_index&quot;:null,&quot;svcrqct_cds&quot;:[&quot;   &quot;],&quot;svcrqst_lupdt&quot;:&quot;2015-03-09 11:25:10.927722&quot;,&quot;crsr_lupdt&quot;:null,&quot;cntmbrp_lupdt&quot;:&quot;2015-03-09 11:24:51.315134&quot;,&quot;cntevsds_lupdt&quot;:&quot;2015-03-09 11:25:13.429458&quot;,&quot;ignore_me&quot;:1,&quot;notes&quot;:null}
&lt;p&gt;        at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:91)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.pushRecord(MapRecordSource.java:68)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.run(MapRecordProcessor.java:290)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:148)&lt;br/&gt;
        ... 13 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;cumb_id_no&quot;:31XXXX585,&quot;cumb_id_no_sub&quot;:31XXXX585,&quot;cnctevn_id&quot;:&quot;0021XXX86715&quot;,&quot;svcrqst_id&quot;:&quot;0000003XXX346030&quot;,&quot;svcrqst_crt_dts&quot;:&quot;2015-03-09 11:25:10.927722&quot;,&quot;subject_seq_no&quot;:1,&quot;cntmbrp_id&quot;:&quot;692XX60     &quot;,&quot;plan_component&quot;:&quot;HXXXX     &quot;,&quot;psuniq_id&quot;:&quot;0000000014XXX279&quot;,&quot;cust_segment&quot;:&quot;RM &quot;,&quot;idcard&quot;:&quot;MEXXXXXX         &quot;,&quot;cnctyp_cd&quot;:&quot;001&quot;,&quot;cnctmd_cd&quot;:&quot;D01&quot;,&quot;cnctevs_cd&quot;:&quot;007&quot;,&quot;svcrtyp_cd&quot;:&quot;722&quot;,&quot;svrstyp_cd&quot;:&quot;832&quot;,&quot;cmpltyp_cd&quot;:&quot; &quot;,&quot;catsrsn_cd&quot;:&quot;        &quot;,&quot;apealvl_cd&quot;:&quot; &quot;,&quot;cnstnty_cd&quot;:&quot;001&quot;,&quot;svcrqst_asrqst_ind&quot;:&quot;Y&quot;,&quot;svcrqst_rtnorig_in&quot;:&quot;N&quot;,&quot;svcrqst_vwasof_dt&quot;:&quot;null&quot;,&quot;svcrqst_lupdusr_id&quot;:&quot;XXXXXXX &quot;,&quot;sum_reason_cd&quot;:&quot;98&quot;,&quot;sum_reason&quot;:&quot;Exclude&quot;,&quot;crsr_master_claim_index&quot;:null,&quot;svcrqct_cds&quot;:[&quot;   &quot;],&quot;svcrqst_lupdt&quot;:&quot;2015-03-09 11:25:10.927722&quot;,&quot;crsr_lupdt&quot;:null,&quot;cntmbrp_lupdt&quot;:&quot;2015-03-09 11:24:51.315134&quot;,&quot;cntevsds_lupdt&quot;:&quot;2015-03-09 11:25:13.429458&quot;,&quot;ignore_me&quot;:1,&quot;notes&quot;:null}
&lt;p&gt;        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:518)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:83)&lt;br/&gt;
        ... 16 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Unexpected exception: org.apache.hadoop.hive.serde2.lazybinary.LazyBinaryArray cannot be cast to [Ljava.lang.Object;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator.process(MapJoinOperator.java:426)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FilterOperator.process(FilterOperator.java:122)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:97)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapOperator$MapOpCtx.forward(MapOperator.java:162)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:508)&lt;br/&gt;
        ... 17 more&lt;br/&gt;
Caused by: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazybinary.LazyBinaryArray cannot be cast to [Ljava.lang.Object;&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector.getList(StandardListObjectInspector.java:111)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.serialize(LazySimpleSerDe.java:314)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.serializeField(LazySimpleSerDe.java:262)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.doSerialize(LazySimpleSerDe.java:246)&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.AbstractEncodingAwareSerDe.serialize(AbstractEncodingAwareSerDe.java:50)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FileSinkOperator.process(FileSinkOperator.java:720)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.SelectOperator.process(SelectOperator.java:88)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.internalForward(CommonJoinOperator.java:644)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.genAllOneUniqueJoinObject(CommonJoinOperator.java:676)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.checkAndGenObject(CommonJoinOperator.java:754)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator.process(MapJoinOperator.java:414)&lt;br/&gt;
        ... 23 more&lt;/p&gt;</comment>
                            <comment id="14591704" author="gss2002" created="Thu, 18 Jun 2015 12:17:51 +0000"  >&lt;p&gt;Any status on this jira is this stalled? Can i help any further??? This is a real issue plaguing folks since around hive 0.14&lt;/p&gt;</comment>
                            <comment id="14597624" author="mmccline" created="Tue, 23 Jun 2015 13:11:36 +0000"  >&lt;p&gt;NOTE: We have a possible solution here but &lt;b&gt;NO TEST&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;There is an attached Q file with a array of integers and array of strings tests, but I haven&apos;t been able to get the tests to fail on trunk.  I&apos;m not sure what I&apos;m missing.  So, unclear if new code is being tested yet.&lt;/p&gt;</comment>
                            <comment id="14597959" author="hiveqa" created="Tue, 23 Jun 2015 17:05:23 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12741285/HIVE-10729.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12741285/HIVE-10729.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 9014 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4351/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4351/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4351/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4351/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4351/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4351/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12741285 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14597984" author="hagleitn" created="Tue, 23 Jun 2015 17:17:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;mmccline&lt;/a&gt; the test on this bug doesn&apos;t happen anymore but there is: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11051&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-11051&lt;/a&gt;. The attached test on that bug used to be fixed with this patch here. It might makes sense to resolve this one and move the code over to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11051&quot; title=&quot;Hive 1.2.0  MapJoin w/Tez - LazyBinaryArray cannot be cast to [Ljava.lang.Object;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11051&quot;&gt;&lt;del&gt;HIVE-11051&lt;/del&gt;&lt;/a&gt; if that&apos;s the case.&lt;/p&gt;</comment>
                            <comment id="14598804" author="gss2002" created="Wed, 24 Jun 2015 03:18:56 +0000"  >&lt;p&gt;Gunther Hagleitner and Matt Mcline Using this Patch against my JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11051&quot; title=&quot;Hive 1.2.0  MapJoin w/Tez - LazyBinaryArray cannot be cast to [Ljava.lang.Object;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11051&quot;&gt;&lt;del&gt;HIVE-11051&lt;/del&gt;&lt;/a&gt; and the test case on Hadoop 2.4.1 with Hive 1.2.0 and Tez 0.5.4 it still fails:&lt;/p&gt;

&lt;p&gt;Caused by: java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;cnctevn_id&quot;:&quot;002246948195&quot;,&quot;svcrqst_id&quot;:&quot;0000003629537980&quot;,&quot;svcrqst_crt_dts&quot;:&quot;2015-04-24 12:48:37.859683&quot;,&quot;subject_seq_no&quot;:1,&quot;plan_component&quot;:&quot;HMOM1     &quot;,&quot;cust_segment&quot;:&quot;RM &quot;,&quot;cnctyp_cd&quot;:&quot;001&quot;,&quot;cnctmd_cd&quot;:&quot;D02&quot;,&quot;cnctevs_cd&quot;:&quot;007&quot;,&quot;svcrtyp_cd&quot;:&quot;335&quot;,&quot;svrstyp_cd&quot;:&quot;088&quot;,&quot;cmpltyp_cd&quot;:&quot; &quot;,&quot;catsrsn_cd&quot;:&quot;        &quot;,&quot;apealvl_cd&quot;:&quot; &quot;,&quot;cnstnty_cd&quot;:&quot;001&quot;,&quot;svcrqst_asrqst_ind&quot;:&quot;Y&quot;,&quot;svcrqst_rtnorig_in&quot;:&quot;N&quot;,&quot;svcrqst_vwasof_dt&quot;:&quot;null&quot;,&quot;sum_reason_cd&quot;:&quot;98&quot;,&quot;sum_reason&quot;:&quot;Exclude&quot;,&quot;crsr_master_claim_index&quot;:null,&quot;svcrqct_cds&quot;:[&quot;   &quot;],&quot;svcrqst_lupdt&quot;:&quot;2015-04-24 12:48:37.859683&quot;,&quot;crsr_lupdt&quot;:null,&quot;cntevsds_lupdt&quot;:&quot;2015-04-24 12:48:40.499238&quot;,&quot;ignore_me&quot;:1,&quot;notes&quot;:null}
&lt;p&gt;        at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:91)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.pushRecord(MapRecordSource.java:68)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordProcessor.run(MapRecordProcessor.java:290)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.TezProcessor.initializeAndRunProcessor(TezProcessor.java:148)&lt;br/&gt;
        ... 13 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Hive Runtime Error while processing row &lt;/p&gt;
{&quot;cnctevn_id&quot;:&quot;002246948195&quot;,&quot;svcrqst_id&quot;:&quot;0000003629537980&quot;,&quot;svcrqst_crt_dts&quot;:&quot;2015-04-24 12:48:37.859683&quot;,&quot;subject_seq_no&quot;:1,&quot;plan_component&quot;:&quot;HMOM1     &quot;,&quot;cust_segment&quot;:&quot;RM &quot;,&quot;cnctyp_cd&quot;:&quot;001&quot;,&quot;cnctmd_cd&quot;:&quot;D02&quot;,&quot;cnctevs_cd&quot;:&quot;007&quot;,&quot;svcrtyp_cd&quot;:&quot;335&quot;,&quot;svrstyp_cd&quot;:&quot;088&quot;,&quot;cmpltyp_cd&quot;:&quot; &quot;,&quot;catsrsn_cd&quot;:&quot;        &quot;,&quot;apealvl_cd&quot;:&quot; &quot;,&quot;cnstnty_cd&quot;:&quot;001&quot;,&quot;svcrqst_asrqst_ind&quot;:&quot;Y&quot;,&quot;svcrqst_rtnorig_in&quot;:&quot;N&quot;,&quot;svcrqst_vwasof_dt&quot;:&quot;null&quot;,&quot;sum_reason_cd&quot;:&quot;98&quot;,&quot;sum_reason&quot;:&quot;Exclude&quot;,&quot;crsr_master_claim_index&quot;:null,&quot;svcrqct_cds&quot;:[&quot;   &quot;],&quot;svcrqst_lupdt&quot;:&quot;2015-04-24 12:48:37.859683&quot;,&quot;crsr_lupdt&quot;:null,&quot;cntevsds_lupdt&quot;:&quot;2015-04-24 12:48:40.499238&quot;,&quot;ignore_me&quot;:1,&quot;notes&quot;:null}
&lt;p&gt;        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:518)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.tez.MapRecordSource.processRow(MapRecordSource.java:83)&lt;br/&gt;
        ... 16 more&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: Unexpected exception: Index: 0, Size: 0&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator.process(MapJoinOperator.java:426)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FilterOperator.process(FilterOperator.java:122)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:97)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapOperator$MapOpCtx.forward(MapOperator.java:162)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:508)&lt;br/&gt;
        ... 17 more&lt;br/&gt;
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0&lt;br/&gt;
        at java.util.ArrayList.rangeCheck(ArrayList.java:635)&lt;br/&gt;
        at java.util.ArrayList.set(ArrayList.java:426)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.persistence.MapJoinBytesTableContainer.fixupComplexObjects(MapJoinBytesTableContainer.java:424)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.persistence.HybridHashTableContainer$ReusableRowContainer.uppack(HybridHashTableContainer.java:875)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.persistence.HybridHashTableContainer$ReusableRowContainer.first(HybridHashTableContainer.java:845)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.persistence.HybridHashTableContainer$ReusableRowContainer.first(HybridHashTableContainer.java:722)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.persistence.UnwrapRowContainer.first(UnwrapRowContainer.java:62)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.persistence.UnwrapRowContainer.first(UnwrapRowContainer.java:33)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.genUniqueJoinObject(CommonJoinOperator.java:650)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.CommonJoinOperator.checkAndGenObject(CommonJoinOperator.java:756)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.MapJoinOperator.process(MapJoinOperator.java:414)&lt;br/&gt;
        ... 23 more&lt;br/&gt;
]], Vertex failed as one or more tasks failed. failedTasks:1, Vertex vertex_1434641270368_13820_2_01 &lt;span class=&quot;error&quot;&gt;&amp;#91;Map 2&amp;#93;&lt;/span&gt; killed/failed due to:null]DAG failed due to vertex failure. failedVertices:1 killedVertices:0&lt;/p&gt;</comment>
                            <comment id="14598976" author="mmccline" created="Wed, 24 Jun 2015 07:05:19 +0000"  >&lt;p&gt;Yes, the trace from fixupComplexObjects in patch #3 is a bug in that patch.&lt;/p&gt;

&lt;p&gt;Since I was able to repro the problem with data and script from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11051&quot; title=&quot;Hive 1.2.0  MapJoin w/Tez - LazyBinaryArray cannot be cast to [Ljava.lang.Object;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11051&quot;&gt;&lt;del&gt;HIVE-11051&lt;/del&gt;&lt;/a&gt;, I just submitted a patch on that JIRA that is basically this JIRA&apos;s patch #3 plus a bug fix.  The new Q file tests with hive.mapjoin.hybridgrace.hashtable false and true to make sure MapJoinBytesTableContainer and HybridHashTableContainer are tested.&lt;/p&gt;

&lt;p&gt;So, this JIRA&apos;s patch #3 is defunct.&lt;/p&gt;</comment>
                            <comment id="15213366" author="mmccline" created="Sun, 27 Mar 2016 06:52:24 +0000"  >&lt;p&gt;The problem is the Vectorization class was not checking data types in the small table expression.&lt;/p&gt;</comment>
                            <comment id="15214635" author="sershe" created="Mon, 28 Mar 2016 18:29:47 +0000"  >&lt;p&gt;Didn&apos;t look at the test file, I assume it&apos;s the same as w/o vector &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
posSingleVectorMapJoinSmallTable - assumes there are two elements in the array, right? Should there be an assert? &lt;br/&gt;
Looks good pending tests otherwise. +1&lt;/p&gt;</comment>
                            <comment id="15214922" author="mmccline" created="Mon, 28 Mar 2016 21:21:46 +0000"  >&lt;p&gt;Thank you for the review.&lt;/p&gt;</comment>
                            <comment id="15215669" author="hiveqa" created="Tue, 29 Mar 2016 08:21:34 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12795540/HIVE-10729.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12795540/HIVE-10729.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 9873 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMiniTezCliDriver-cte_4.q-orc_merge5.q-vectorization_limit.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-groupby3_map.q-sample2.q-auto_join14.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-groupby_map_ppr_multi_distinct.q-table_access_keys_stats.q-groupby4_noskew.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-join_rc.q-insert1.q-vectorized_rcfile_columnar.q-and-12-more - did not produce a TEST-*.xml file
TestSparkCliDriver-ppd_join4.q-join9.q-ppd_join3.q-and-12-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.ql.optimizer.physical.TestVectorizer.testValidateMapJoinOperator
org.apache.hadoop.hive.ql.optimizer.physical.TestVectorizer.testValidateSMBJoinOperator
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7400/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7400/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7400/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/7400/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7400/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-7400/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12795540 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15215701" author="mmccline" created="Tue, 29 Mar 2016 08:54:32 +0000"  >&lt;p&gt;Fix TestVectorizer unit test.&lt;/p&gt;</comment>
                            <comment id="15215722" author="mmccline" created="Tue, 29 Mar 2016 09:18:22 +0000"  >&lt;p&gt;Committed to master and branch-1.&lt;/p&gt;</comment>
                            <comment id="15233964" author="mmccline" created="Sun, 10 Apr 2016 07:31:28 +0000"  >&lt;p&gt;Committed to branch-2.0 also.&lt;/p&gt;</comment>
                            <comment id="15277764" author="feng yuan" created="Tue, 10 May 2016 07:51:55 +0000"  >&lt;p&gt;is there patch for 0.14.0?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12741285" name="HIVE-10729.03.patch" size="20722" author="mmccline" created="Tue, 23 Jun 2015 13:11:36 +0000"/>
                            <attachment id="12795540" name="HIVE-10729.04.patch" size="27151" author="mmccline" created="Sun, 27 Mar 2016 06:51:03 +0000"/>
                            <attachment id="12795801" name="HIVE-10729.05.patch" size="28253" author="mmccline" created="Tue, 29 Mar 2016 08:54:32 +0000"/>
                            <attachment id="12733263" name="HIVE-10729.1.patch" size="1632" author="selinazh" created="Fri, 15 May 2015 22:17:49 +0000"/>
                            <attachment id="12734209" name="HIVE-10729.2.patch" size="1678" author="selinazh" created="Wed, 20 May 2015 19:43:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2et3j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>