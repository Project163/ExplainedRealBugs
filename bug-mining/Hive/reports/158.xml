<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:52:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-497] predicate pushdown fails if all columns are not selected</title>
                <link>https://issues.apache.org/jira/browse/HIVE-497</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;predicate pushdown seems to fail in some scenarios... it is ok if all the columns are selected.&lt;/p&gt;

&lt;p&gt;create table ppda(a string, b string);&lt;br/&gt;
select a from ppda where ppda.a &amp;gt; 10; --&amp;gt; fails&lt;br/&gt;
select b from ppda where ppda.a &amp;gt; 10; --&amp;gt; ok&lt;br/&gt;
select * from ppda where ppda.a &amp;gt; 10; --&amp;gt; ok&lt;br/&gt;
select b from appd where appd.b &amp;gt; 10 and appd.a &amp;gt; 20; --&amp;gt; ok&lt;/p&gt;</description>
                <environment></environment>
        <key id="12425871">HIVE-497</key>
            <summary>predicate pushdown fails if all columns are not selected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadc">Prasad Chakka</assignee>
                                    <reporter username="prasadc">Prasad Chakka</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 May 2009 23:53:59 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:27 +0000</updated>
                            <resolved>Sat, 30 May 2009 19:20:55 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12710950" author="prasadc" created="Wed, 20 May 2009 00:21:40 +0000"  >&lt;p&gt;I think the problem only happens if ColumPruner kicks in and creates a new SELECT op. Otherwise things seem to be fine.&lt;/p&gt;</comment>
                            <comment id="12710960" author="prasadc" created="Wed, 20 May 2009 00:56:56 +0000"  >&lt;p&gt;The select operator created by ColumnPruner doesn&apos;t have the map of output column to input column names so the code is asserting as expected. Added this map for ColumnPruner as well.&lt;/p&gt;</comment>
                            <comment id="12711033" author="he yongqiang" created="Wed, 20 May 2009 06:30:12 +0000"  >&lt;p&gt;+1. Looks good, and it passed my example.&lt;/p&gt;</comment>
                            <comment id="12711037" author="he yongqiang" created="Wed, 20 May 2009 06:40:41 +0000"  >&lt;p&gt;If we keeps column information(column names instead of numbers) for input tables,as Hive-460 intends to do, can this problem also be resolved.&lt;br/&gt;
In my debug, the error is caused by passing in number to RowResover&apos;s reverseLookup(), but should pass in real column name.&lt;/p&gt;</comment>
                            <comment id="12711246" author="prasadc" created="Wed, 20 May 2009 17:30:16 +0000"  >&lt;p&gt;actually &quot;0&quot; here is not a number but the internal name. so if and when 460 is fixed, actual names are compared. name of columns change when they flow through an operator, especially in a select op. so the colExprMap keeps a map of output columns to input column names (or the other way round, not sure) so that translation can be done when predicates move up (or down depending on how you look at it) an operator.&lt;/p&gt;</comment>
                            <comment id="12711254" author="he yongqiang" created="Wed, 20 May 2009 17:45:44 +0000"  >&lt;p&gt;Got it. Thanks for the explanation, Prasad. The parse and optimize codes are making me a little headache.  &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/biggrin.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12711324" author="athusoo" created="Wed, 20 May 2009 20:34:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;Am running tests on this and I will check it in once those are done.&lt;/p&gt;</comment>
                            <comment id="12711336" author="athusoo" created="Wed, 20 May 2009 20:53:50 +0000"  >&lt;p&gt;I am getting a test failure for&lt;/p&gt;

&lt;p&gt;ppd1.q&lt;/p&gt;
</comment>
                            <comment id="12711352" author="prasadc" created="Wed, 20 May 2009 21:11:06 +0000"  >&lt;p&gt;i forgot to update the ppd1.q.out file. attached is the updated version.&lt;/p&gt;</comment>
                            <comment id="12711363" author="namit" created="Wed, 20 May 2009 21:30:30 +0000"  >&lt;p&gt;can we turn on partition pruning by default in the unit tests - new tests are getting added all the time, and it might be difficult to catch these bugs.&lt;br/&gt;
We can still turn it off in any production cluster till it gets reasonably tested.&lt;/p&gt;</comment>
                            <comment id="12711365" author="athusoo" created="Wed, 20 May 2009 21:33:26 +0000"  >&lt;p&gt;Yes we should, we definitely have to do it before putting it into production.&lt;/p&gt;

&lt;p&gt;Need a new JIRA for that. Can you do the honors?&lt;/p&gt;</comment>
                            <comment id="12711368" author="athusoo" created="Wed, 20 May 2009 21:44:00 +0000"  >&lt;p&gt;still fails the tests.&lt;/p&gt;

&lt;p&gt;You have to update the outputs for TestParse as well.&lt;/p&gt;</comment>
                            <comment id="12711376" author="prasadc" created="Wed, 20 May 2009 21:52:37 +0000"  >&lt;p&gt;yes, we should turn on ppd. let&apos;s make it a different JIRA.&lt;/p&gt;

&lt;p&gt;@ashish, TestParse results shouldn&apos;t need to be changed since ppd is not enabled for them. and tests passed fine for me. anyways, i am rerunning the tests. &lt;/p&gt;</comment>
                            <comment id="12711417" author="prasadc" created="Wed, 20 May 2009 23:28:17 +0000"  >&lt;p&gt;ok, another attempt. &lt;b&gt;sigh&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="12712327" author="athusoo" created="Sat, 23 May 2009 00:41:50 +0000"  >&lt;p&gt;Running the tests now.&lt;/p&gt;</comment>
                            <comment id="12714758" author="prasadc" created="Sat, 30 May 2009 19:20:55 +0000"  >&lt;p&gt;athusoo committed this patch may19th, 2009.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12408623" name="hive-497.2.patch" size="5307" author="prasadc" created="Wed, 20 May 2009 21:11:06 +0000"/>
                            <attachment id="12408637" name="hive-497.3.patch" size="121592" author="prasadc" created="Wed, 20 May 2009 23:28:17 +0000"/>
                            <attachment id="12408538" name="hive-497.patch" size="5152" author="prasadc" created="Wed, 20 May 2009 00:55:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 26 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0la4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122290</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>