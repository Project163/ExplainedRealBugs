<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:07:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4724] ORC readers should have a better error detection for non-ORC files</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4724</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;A customer loaded a text file into a table that is stored as ORC. The error message was very unfriendly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12652505">HIVE-4724</key>
            <summary>ORC readers should have a better error detection for non-ORC files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omalley">Owen O&apos;Malley</assignee>
                                    <reporter username="omalley">Owen O&apos;Malley</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jun 2013 21:54:59 +0000</created>
                <updated>Tue, 15 Oct 2013 23:31:14 +0000</updated>
                            <resolved>Sat, 20 Jul 2013 18:31:12 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                    <fixVersion>0.11.1</fixVersion>
                                    <component>File Formats</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13694325" author="phabricator@reviews.facebook.net" created="Wed, 26 Jun 2013 22:37:20 +0000"  >&lt;p&gt;omalley requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4724&quot; title=&quot;ORC readers should have a better error detection for non-ORC files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4724&quot;&gt;&lt;del&gt;HIVE-4724&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ORC readers should have a better error detection for non-ORC files&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;Add better checks for non-ORC files in the ORC reader to fail with a better error message. Also add a version&lt;br/&gt;
check to warn users if they are reading files from a more advanaced version of Hadoop. Added a check so that unknown&lt;br/&gt;
encodings for a column will fail quickly with a good error message.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11529&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  .gitignore&lt;br/&gt;
  .idea/.name&lt;br/&gt;
  .idea/ant.xml&lt;br/&gt;
  .idea/codeStyleSettings.xml&lt;br/&gt;
  .idea/compiler.xml&lt;br/&gt;
  .idea/copyright/Apache.xml&lt;br/&gt;
  .idea/copyright/profiles_settings.xml&lt;br/&gt;
  .idea/encodings.xml&lt;br/&gt;
  .idea/libraries/default.xml&lt;br/&gt;
  .idea/libraries/hadoop0_20S_shim.xml&lt;br/&gt;
  .idea/libraries/hadoop0_20_shim.xml&lt;br/&gt;
  .idea/libraries/hadoop0_23.xml&lt;br/&gt;
  .idea/misc.xml&lt;br/&gt;
  .idea/modules.xml&lt;br/&gt;
  .idea/scopes/scope_settings.xml&lt;br/&gt;
  .idea/uiDesigner.xml&lt;br/&gt;
  .idea/vcs.xml&lt;br/&gt;
  .idea/workspace.xml&lt;br/&gt;
  ant/Ant.iml&lt;br/&gt;
  builtins/Builtins.iml&lt;br/&gt;
  cli/src/Cli.iml&lt;br/&gt;
  common/src/Common.iml&lt;br/&gt;
  contrib/src/Contrib.iml&lt;br/&gt;
  hbase-handler/src/Hbase-handler.iml&lt;br/&gt;
  hwi/src/Hwi.iml&lt;br/&gt;
  jdbc/src/Jdbc.iml&lt;br/&gt;
  metastore/src/Metastore.iml&lt;br/&gt;
  metastore/src/gen/thrift/Thrift.iml&lt;br/&gt;
  metastore/src/test/Metastore-test.iml&lt;br/&gt;
  pdk/src/Pdk.iml&lt;br/&gt;
  pdk/test-plugin/Test-plugin.iml&lt;br/&gt;
  ql/src/Ql.iml&lt;br/&gt;
  ql/src/gen/protobuf/gen-java/org/apache/hadoop/hive/ql/io/orc/OrcProto.java&lt;br/&gt;
  ql/src/gen/thrift/Thrift1.iml&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/ReaderImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/RecordReaderImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/WriterImpl.java&lt;br/&gt;
  ql/src/protobuf/org/apache/hadoop/hive/ql/io/orc/orc_proto.proto&lt;br/&gt;
  ql/src/test/Ql-test.iml&lt;br/&gt;
  serde/src/Serde.iml&lt;br/&gt;
  serde/src/gen/protobuf/Protobuf.iml&lt;br/&gt;
  serde/src/gen/thrift/Thrift2.iml&lt;br/&gt;
  serde/src/test/Serde-test.iml&lt;br/&gt;
  service/src/Service.iml&lt;br/&gt;
  service/src/gen/thrift/Thrift3.iml&lt;br/&gt;
  shims/src/0.20/Shims-0.20.iml&lt;br/&gt;
  shims/src/0.20S/Shims-0.20S.iml&lt;br/&gt;
  shims/src/0.23/Shims-0.23.iml&lt;br/&gt;
  shims/src/Shims.iml&lt;br/&gt;
  shims/src/common-secure/Shims-secure.iml&lt;br/&gt;
  shims/src/test/Shims-test.iml&lt;/p&gt;

&lt;p&gt;MANAGE HERALD RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/27255/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/27255/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, omalley&lt;/p&gt;</comment>
                            <comment id="13694814" author="phabricator@reviews.facebook.net" created="Thu, 27 Jun 2013 15:45:21 +0000"  >&lt;p&gt;omalley updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4724&quot; title=&quot;ORC readers should have a better error detection for non-ORC files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4724&quot;&gt;&lt;del&gt;HIVE-4724&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ORC readers should have a better error detection for non-ORC files&quot;.&lt;/p&gt;

&lt;p&gt;  Remove extra files from my workspace that slipped in.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11529&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11529?vs=35175&amp;amp;id=35199#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11529?vs=35175&amp;amp;id=35199#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/gen/protobuf/gen-java/org/apache/hadoop/hive/ql/io/orc/OrcProto.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/ReaderImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/RecordReaderImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/WriterImpl.java&lt;br/&gt;
  ql/src/protobuf/org/apache/hadoop/hive/ql/io/orc/orc_proto.proto&lt;/p&gt;

&lt;p&gt;To: JIRA, omalley&lt;/p&gt;</comment>
                            <comment id="13701423" author="phabricator@reviews.facebook.net" created="Sat, 6 Jul 2013 21:57:46 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4724&quot; title=&quot;ORC readers should have a better error detection for non-ORC files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4724&quot;&gt;&lt;del&gt;HIVE-4724&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ORC readers should have a better error detection for non-ORC files&quot;.&lt;/p&gt;

&lt;p&gt;  Patch looks alright. But wondering tying orc version with hive version is a good idea ?&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java:35 Is this tied to hive version? Also, since 0.11 is already released, this should be 12.&lt;/p&gt;

&lt;p&gt;  More importantly though, does this mean this version need to be bumped when hive moves to next version even though there is no change in ORC itself?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11529&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, omalley&lt;br/&gt;
Cc: ashutoshc&lt;/p&gt;</comment>
                            <comment id="13711596" author="owen.omalley" created="Wed, 17 Jul 2013 20:48:32 +0000"  >&lt;p&gt;Added comment explaining the version string.&lt;/p&gt;</comment>
                            <comment id="13711599" author="phabricator@reviews.facebook.net" created="Wed, 17 Jul 2013 20:48:47 +0000"  >&lt;p&gt;omalley updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4724&quot; title=&quot;ORC readers should have a better error detection for non-ORC files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4724&quot;&gt;&lt;del&gt;HIVE-4724&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ORC readers should have a better error detection for non-ORC files&quot;.&lt;/p&gt;

&lt;p&gt;  Updated comment to explain the use of the version.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11529&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11529?vs=35199&amp;amp;id=35829#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11529?vs=35199&amp;amp;id=35829#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/gen/protobuf/gen-java/org/apache/hadoop/hive/ql/io/orc/OrcProto.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/ReaderImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/RecordReaderImpl.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/WriterImpl.java&lt;br/&gt;
  ql/src/protobuf/org/apache/hadoop/hive/ql/io/orc/orc_proto.proto&lt;/p&gt;

&lt;p&gt;To: JIRA, omalley&lt;br/&gt;
Cc: ashutoshc&lt;/p&gt;</comment>
                            <comment id="13711607" author="phabricator@reviews.facebook.net" created="Wed, 17 Jul 2013 20:54:46 +0000"  >&lt;p&gt;ashutoshc has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4724&quot; title=&quot;ORC readers should have a better error detection for non-ORC files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4724&quot;&gt;&lt;del&gt;HIVE-4724&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; ORC readers should have a better error detection for non-ORC files&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Make sense. Thanks, Owen for adding comments. That clarifies my confusion.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D11529&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11529&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  h-4724&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, ashutoshc, omalley&lt;br/&gt;
Cc: ashutoshc&lt;/p&gt;</comment>
                            <comment id="13711618" author="appodictic" created="Wed, 17 Jul 2013 21:02:33 +0000"  >&lt;p&gt;Am I mistaken or are we checking in the protobuf generated files?&lt;/p&gt;

&lt;p&gt;Would it be better to use an ant target &lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;lt;exec executable=&quot;protoc&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;arg value=&quot;--java_out=outdir&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;arg value=&quot;--proto_path=srcdir&quot; /&amp;gt;&lt;br/&gt;
  &amp;lt;arg value=&quot;srcdir/path/to/input.proto&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/exec&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;And not check in the generated files? I belive this is what we do with thrift.&lt;/p&gt;</comment>
                            <comment id="13711658" author="owen.omalley" created="Wed, 17 Jul 2013 21:35:59 +0000"  >&lt;p&gt;We had the discussion about whether to commit the generated files when ORC was committed. Thrift and protobuf generated files are currently checked in so that they are not required to build Hive. The ant target to regenerate the protobuf generated code is already there:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;% ant protobuf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;will regenerate the code.&lt;/p&gt;</comment>
                            <comment id="13714510" author="owen.omalley" created="Sat, 20 Jul 2013 18:31:12 +0000"  >&lt;p&gt;I just committed this.&lt;/p&gt;</comment>
                            <comment id="13796136" author="ashutoshc" created="Tue, 15 Oct 2013 23:31:14 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589923" name="HIVE-4724.D11529.2.patch" size="29114" author="phabricator@reviews.facebook.net" created="Thu, 27 Jun 2013 15:45:21 +0000"/>
                            <attachment id="12592849" name="HIVE-4724.D11529.3.patch" size="29963" author="phabricator@reviews.facebook.net" created="Wed, 17 Jul 2013 20:48:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>332829</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lezj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>