<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:02:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3451] map-reduce jobs does not work for a partition containing sub-directories</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3451</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Consider the following test:&lt;/p&gt;




&lt;p&gt;&amp;#8211; The test verifies that sub-directories are supported for versions of hadoop&lt;br/&gt;
&amp;#8211; where &lt;a href=&quot;https://issues.apache.org/jira/browse/MAPREDUCE-1501&quot; title=&quot;FileInputFormat to support multi-level/recursive directory listing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MAPREDUCE-1501&quot;&gt;&lt;del&gt;MAPREDUCE-1501&lt;/del&gt;&lt;/a&gt; is fixed. So, enable this test only for hadoop 23.&lt;br/&gt;
&amp;#8211; INCLUDE_HADOOP_MAJOR_VERSIONS(0.23)&lt;/p&gt;

&lt;p&gt;CREATE TABLE fact_daily(x int) PARTITIONED BY (ds STRING);&lt;br/&gt;
CREATE TABLE fact_tz(x int) PARTITIONED BY (ds STRING, hr STRING) &lt;br/&gt;
LOCATION &apos;pfile:${system:test.tmp.dir}/fact_tz&apos;;&lt;/p&gt;

&lt;p&gt;INSERT OVERWRITE TABLE fact_tz PARTITION (ds=&apos;1&apos;, hr=&apos;1&apos;)&lt;br/&gt;
SELECT key+11 FROM src WHERE key=484;&lt;/p&gt;

&lt;p&gt;ALTER TABLE fact_daily SET TBLPROPERTIES(&apos;EXTERNAL&apos;=&apos;TRUE&apos;);&lt;br/&gt;
ALTER TABLE fact_daily ADD PARTITION (ds=&apos;1&apos;)&lt;br/&gt;
LOCATION &apos;pfile:${system:test.tmp.dir}/fact_tz/ds=1&apos;;&lt;/p&gt;

&lt;p&gt;set mapred.input.dir.recursive=true;&lt;br/&gt;
SELECT * FROM fact_daily WHERE ds=&apos;1&apos;;&lt;/p&gt;

&lt;p&gt;SELECT count(1) FROM fact_daily WHERE ds=&apos;1&apos;;&lt;/p&gt;



&lt;p&gt;Say, the above file was named: recursive_dir.q&lt;/p&gt;

&lt;p&gt;and we ran the test for hadoop 23:&lt;/p&gt;

&lt;p&gt;by executing:&lt;/p&gt;

&lt;p&gt;ant test -Dhadoop.mr.rev=23 -Dtest.print.classpath=true -Dhadoop.version=2.0.0-alpha -Dhadoop.security.version=2.0.0-alpha -Dtestcase=TestCliDriver -Dqfile=recursive_dir.q&lt;/p&gt;

&lt;p&gt;The select * from the table works fine, but the last command does not work&lt;br/&gt;
since it requires a map-reduce job.&lt;/p&gt;

&lt;p&gt;This will prevent other features which are creating sub-directories to add&lt;br/&gt;
any tests which requires a map-reduce job. The work-around is to issue&lt;br/&gt;
queries which do not require map-reduce jobs.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12607176">HIVE-3451</key>
            <summary>map-reduce jobs does not work for a partition containing sub-directories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gangtimliu">Gang Tim Liu</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Sep 2012 05:38:21 +0000</created>
                <updated>Sun, 31 Mar 2013 01:25:09 +0000</updated>
                            <resolved>Tue, 25 Sep 2012 04:17:39 +0000</resolved>
                                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13462209" author="gangtimliu" created="Mon, 24 Sep 2012 22:36:31 +0000"  >&lt;p&gt;ready for review &lt;a href=&quot;https://reviews.facebook.net/D5637&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5637&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13462434" author="namit" created="Tue, 25 Sep 2012 04:17:24 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13462435" author="namit" created="Tue, 25 Sep 2012 04:17:39 +0000"  >&lt;p&gt;Committed. Thanks Tim&lt;/p&gt;</comment>
                            <comment id="13462591" author="hudson" created="Tue, 25 Sep 2012 09:17:19 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1695 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1695/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1695/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3451&quot; title=&quot;map-reduce jobs does not work for a partition containing sub-directories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3451&quot;&gt;&lt;del&gt;HIVE-3451&lt;/del&gt;&lt;/a&gt; map-reduce jobs does not work for a partition containing sub-directories&lt;br/&gt;
(Gang Tim Liu via namit) (Revision 1389704)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389704&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/recursive_dir.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/recursive_dir.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548071" author="hudson" created="Wed, 9 Jan 2013 10:24:16 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3451&quot; title=&quot;map-reduce jobs does not work for a partition containing sub-directories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3451&quot;&gt;&lt;del&gt;HIVE-3451&lt;/del&gt;&lt;/a&gt; map-reduce jobs does not work for a partition containing sub-directories&lt;br/&gt;
(Gang Tim Liu via namit) (Revision 1389704)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1389704&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/recursive_dir.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/recursive_dir.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550220" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:51 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12608940">HIVE-3506</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12599401">HIVE-3276</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12558843">HIVE-3073</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12610884">HIVE-3554</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12546399" name="HIVE-3451.patch" size="4393" author="gangtimliu" created="Mon, 24 Sep 2012 22:38:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247238</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i088wv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>46043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>