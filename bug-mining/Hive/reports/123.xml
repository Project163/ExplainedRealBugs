<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:51:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-415] Long queries does not parse in Hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-415</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;A query like this won&apos;t parse, because the Hive grammar allows backtracking:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL

select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable UNION ALL
select 1 from mytable;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12422840">HIVE-415</key>
            <summary>Long queries does not parse in Hive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Apr 2009 03:22:46 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:29 +0000</updated>
                            <resolved>Wed, 15 Apr 2009 21:39:47 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12699041" author="zshao" created="Wed, 15 Apr 2009 03:46:53 +0000"  >&lt;p&gt;The fix turns out to be simple:&lt;/p&gt;

&lt;p&gt;The following code in Hive.g:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;queryStatementExpression
    : queryStatement (queryOperator^ queryStatementExpression)*
    ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should be changed to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;queryStatementExpression
    : queryStatement (queryOperator^ queryStatementExpression)?
    ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12699043" author="rsm" created="Wed, 15 Apr 2009 03:51:53 +0000"  >&lt;p&gt;can you add a test case which fails without your fix and succeeds with your fix?&lt;/p&gt;</comment>
                            <comment id="12699049" author="zshao" created="Wed, 15 Apr 2009 04:31:28 +0000"  >&lt;p&gt;A better non-recursive solution:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    : queryStatement (queryOperator^ queryStatement)*
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Some test outputs are changed - mainly because we had a right-deep.UNION-ALL tree, but now it&apos;s left-deep. There are no semantic changes.&lt;/p&gt;


&lt;p&gt;Tested with the long UNION-ALL query. It works now.&lt;/p&gt;</comment>
                            <comment id="12699052" author="namit" created="Wed, 15 Apr 2009 05:02:25 +0000"  >&lt;p&gt;I am going over the output file changes - just wanted to be sure&lt;br/&gt;
otherwise looks good&lt;/p&gt;</comment>
                            <comment id="12699054" author="namit" created="Wed, 15 Apr 2009 05:11:02 +0000"  >&lt;p&gt;The output files look good, but as Raghu said, can you add a test with lots of unions.&lt;/p&gt;</comment>
                            <comment id="12699061" author="zshao" created="Wed, 15 Apr 2009 05:24:20 +0000"  >&lt;p&gt;Added the test query. This is for branch-0.3.&lt;br/&gt;
Will make a patch for trunk soon.&lt;/p&gt;</comment>
                            <comment id="12699065" author="zshao" created="Wed, 15 Apr 2009 05:37:23 +0000"  >&lt;p&gt;For trunk.&lt;/p&gt;</comment>
                            <comment id="12699095" author="zshao" created="Wed, 15 Apr 2009 07:11:20 +0000"  >&lt;p&gt;Let&apos;s commit &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-372&quot; title=&quot;Nested UDFs cause _very_ high memory usage when processing query&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-372&quot;&gt;&lt;del&gt;HIVE-372&lt;/del&gt;&lt;/a&gt; first, since it&apos;s already in branch-0.3 (but not in trunk yet).&lt;/p&gt;</comment>
                            <comment id="12699406" author="namit" created="Wed, 15 Apr 2009 21:39:47 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12422848">HIVE-416</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12419540">HIVE-372</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12405489" name="HIVE-415.1.patch" size="549" author="zshao" created="Wed, 15 Apr 2009 03:48:07 +0000"/>
                            <attachment id="12405492" name="HIVE-415.2.patch" size="37529" author="zshao" created="Wed, 15 Apr 2009 04:31:27 +0000"/>
                            <attachment id="12405496" name="HIVE-415.3.branch-0.3.patch" size="66898" author="zshao" created="Wed, 15 Apr 2009 05:24:20 +0000"/>
                            <attachment id="12405499" name="HIVE-415.3.trunk.patch" size="63324" author="zshao" created="Wed, 15 Apr 2009 05:37:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73548</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 32 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l9of:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122218</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>