<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:28:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6914] parquet-hive cannot write nested map (map value is map)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6914</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;// table schema (identical for both plain text version and parquet version)&lt;br/&gt;
desc hive&amp;gt; desc text_mmap;&lt;br/&gt;
m map&amp;gt;&lt;/p&gt;

&lt;p&gt;// sample nested map entry&lt;br/&gt;
{&quot;level1&quot;:{&quot;level2_key1&quot;:&quot;value1&quot;,&quot;level2_key2&quot;:&quot;value2&quot;}}&lt;/p&gt;

&lt;p&gt;The following query will fail, &lt;br/&gt;
insert overwrite table parquet_mmap select * from text_mmap;&lt;/p&gt;

&lt;p&gt;Caused by: parquet.io.ParquetEncodingException: This should be an ArrayWritable or MapWritable: org.apache.hadoop.hive.ql.io.parquet.writable.BinaryWritable@f2f8106&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.DataWritableWriter.writeData(DataWritableWriter.java:85)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.DataWritableWriter.writeArray(DataWritableWriter.java:118)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.DataWritableWriter.writeData(DataWritableWriter.java:80)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.DataWritableWriter.writeData(DataWritableWriter.java:82)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.DataWritableWriter.write(DataWritableWriter.java:55)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.DataWritableWriteSupport.write(DataWritableWriteSupport.java:59)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.DataWritableWriteSupport.write(DataWritableWriteSupport.java:31)&lt;br/&gt;
at parquet.hadoop.InternalParquetRecordWriter.write(InternalParquetRecordWriter.java:115)&lt;br/&gt;
at parquet.hadoop.ParquetRecordWriter.write(ParquetRecordWriter.java:81)&lt;br/&gt;
at parquet.hadoop.ParquetRecordWriter.write(ParquetRecordWriter.java:37)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.ParquetRecordWriterWrapper.write(ParquetRecordWriterWrapper.java:77)&lt;br/&gt;
at org.apache.hadoop.hive.ql.io.parquet.write.ParquetRecordWriterWrapper.write(ParquetRecordWriterWrapper.java:90)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.FileSinkOperator.processOp(FileSinkOperator.java:622)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:793)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.SelectOperator.processOp(SelectOperator.java:87)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:793)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:92)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:793)&lt;br/&gt;
at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:540)&lt;br/&gt;
... 9 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12708602">HIVE-6914</key>
            <summary>parquet-hive cannot write nested map (map value is map)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rdblue">Ryan Blue</assignee>
                                    <reporter username="tongjie">Tongjie Chen</reporter>
                        <labels>
                            <label>parquet</label>
                            <label>serialization</label>
                    </labels>
                <created>Tue, 15 Apr 2014 20:06:30 +0000</created>
                <updated>Thu, 12 Feb 2015 23:41:07 +0000</updated>
                            <resolved>Tue, 25 Nov 2014 18:48:20 +0000</resolved>
                                    <version>0.12.0</version>
                    <version>0.13.0</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>File Formats</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14050596" author="langea" created="Wed, 2 Jul 2014 19:27:06 +0000"  >&lt;p&gt;I get the same error, no matter what file format I use for the source table. I&apos;ve tried Textfile, Sequencefile, RCFile, and ORC.&lt;/p&gt;</comment>
                            <comment id="14050611" author="langea" created="Wed, 2 Jul 2014 19:38:25 +0000"  >&lt;p&gt;Could it be that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7073&quot; title=&quot;Implement Binary in ParquetSerDe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7073&quot;&gt;&lt;del&gt;HIVE-7073&lt;/del&gt;&lt;/a&gt; is the origin for this bug?&lt;/p&gt;</comment>
                            <comment id="14163244" author="mickaellcr" created="Wed, 8 Oct 2014 08:54:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=langea&quot; class=&quot;user-hover&quot; rel=&quot;langea&quot;&gt;langea&lt;/a&gt;, no the culprit is inside the method writeArray.&lt;br/&gt;
The wrong data was written.&lt;/p&gt;

&lt;p&gt;Patch in progress&lt;/p&gt;</comment>
                            <comment id="14163341" author="mickaellcr" created="Wed, 8 Oct 2014 11:15:25 +0000"  >&lt;p&gt;Patch to allow parquet-hive to write complex nested type as array of map, map of array as value, array of struct, ...&lt;/p&gt;</comment>
                            <comment id="14163343" author="mickaellcr" created="Wed, 8 Oct 2014 11:16:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6914&quot; title=&quot;parquet-hive cannot write nested map (map value is map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6914&quot;&gt;&lt;del&gt;HIVE-6914&lt;/del&gt;&lt;/a&gt; parquet-hive cannot write nested map (map value is map)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Change the way ArrayWritable was filled&lt;/li&gt;
	&lt;li&gt;Now parquet-hive can write complex nested type (array of map, map of array, struct ...)&lt;/li&gt;
	&lt;li&gt;Adding some qtests&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14163884" author="hiveqa" created="Wed, 8 Oct 2014 18:05:53 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12673580/HIVE-6914.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12673580/HIVE-6914.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1177/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1177/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1177/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1177/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1177/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1177/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;**** This message was trimmed, see log for full details ****
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN LPAREN KW_CASE&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_NOT KW_FALSE&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_DATE StringLiteral&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_NOT KW_TRUE&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_NOT KW_MAP&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_CASE KW_MAP&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN LPAREN KW_MAP&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_CASE KW_UNIONTYPE&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_CASE KW_STRUCT&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_NOT KW_IF&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN KW_CASE KW_IF&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:68:4: 
Decision can match input such as &quot;LPAREN LPAREN KW_IF&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:115:5: 
Decision can match input such as &quot;KW_CLUSTER KW_BY LPAREN&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:127:5: 
Decision can match input such as &quot;KW_PARTITION KW_BY LPAREN&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:138:5: 
Decision can match input such as &quot;KW_DISTRIBUTE KW_BY LPAREN&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:149:5: 
Decision can match input such as &quot;KW_SORT KW_BY LPAREN&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:166:7: 
Decision can match input such as &quot;STAR&quot; using multiple alternatives: 1, 2

As a result, alternative(s) 2 were disabled for that input
warning(200): IdentifiersParser.g:179:5: 
Decision can match input such as &quot;KW_STRUCT&quot; using multiple alternatives: 4, 6

As a result, alternative(s) 6 were disabled for that input
warning(200): IdentifiersParser.g:179:5: 
Decision can match input such as &quot;KW_ARRAY&quot; using multiple alternatives: 2, 6

As a result, alternative(s) 6 were disabled for that input
warning(200): IdentifiersParser.g:179:5: 
Decision can match input such as &quot;KW_UNIONTYPE&quot; using multiple alternatives: 5, 6

As a result, alternative(s) 6 were disabled for that input
warning(200): IdentifiersParser.g:261:5: 
Decision can match input such as &quot;KW_TRUE&quot; using multiple alternatives: 3, 8

As a result, alternative(s) 8 were disabled for that input
warning(200): IdentifiersParser.g:261:5: 
Decision can match input such as &quot;KW_NULL&quot; using multiple alternatives: 1, 8

As a result, alternative(s) 8 were disabled for that input
warning(200): IdentifiersParser.g:261:5: 
Decision can match input such as &quot;KW_FALSE&quot; using multiple alternatives: 3, 8

As a result, alternative(s) 8 were disabled for that input
warning(200): IdentifiersParser.g:261:5: 
Decision can match input such as &quot;KW_DATE StringLiteral&quot; using multiple alternatives: 2, 3

As a result, alternative(s) 3 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;KW_BETWEEN KW_MAP LPAREN&quot; using multiple alternatives: 8, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_INSERT KW_INTO&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_UNION KW_ALL&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_SORT KW_BY&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_CLUSTER KW_BY&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_LATERAL KW_VIEW&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_MAP LPAREN&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_DISTRIBUTE KW_BY&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_ORDER KW_BY&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_GROUP KW_BY&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:393:5: 
Decision can match input such as &quot;{KW_LIKE, KW_REGEXP, KW_RLIKE} KW_INSERT KW_OVERWRITE&quot; using multiple alternatives: 2, 9

As a result, alternative(s) 9 were disabled for that input
warning(200): IdentifiersParser.g:518:5: 
Decision can match input such as &quot;{AMPERSAND..BITWISEXOR, DIV..DIVIDE, EQUAL..EQUAL_NS, GREATERTHAN..GREATERTHANOREQUALTO, KW_AND, KW_ARRAY, KW_BETWEEN..KW_BOOLEAN, KW_CASE, KW_DOUBLE, KW_FLOAT, KW_IF, KW_IN, KW_INT, KW_LIKE, KW_MAP, KW_NOT, KW_OR, KW_REGEXP, KW_RLIKE, KW_SMALLINT, KW_STRING..KW_STRUCT, KW_TINYINT, KW_UNIONTYPE, KW_WHEN, LESSTHAN..LESSTHANOREQUALTO, MINUS..NOTEQUAL, PLUS, STAR, TILDE}&quot; using multiple alternatives: 1, 3

As a result, alternative(s) 3 were disabled for that input
[INFO] 
[INFO] --- maven-remote-resources-plugin:1.5:process (default) @ hive-exec ---
Downloading: http://www.datanucleus.org/downloads/maven2/net/hydromatic/linq4j/0.4/linq4j-0.4.pom
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Hive .............................................. SUCCESS [11.597s]
[INFO] Hive Shims Common ................................. SUCCESS [7.054s]
[INFO] Hive Shims 0.20 ................................... SUCCESS [3.858s]
[INFO] Hive Shims Secure Common .......................... SUCCESS [4.831s]
[INFO] Hive Shims 0.20S .................................. SUCCESS [2.317s]
[INFO] Hive Shims 0.23 ................................... SUCCESS [6.509s]
[INFO] Hive Shims ........................................ SUCCESS [1.296s]
[INFO] Hive Common ....................................... SUCCESS [8.962s]
[INFO] Hive Serde ........................................ SUCCESS [14.361s]
[INFO] Hive Metastore .................................... SUCCESS [36.803s]
[INFO] Hive Ant Utilities ................................ SUCCESS [1.657s]
[INFO] Hive Query Language ............................... FAILURE [26.972s]
[INFO] Hive Service ...................................... SKIPPED
[INFO] Hive Accumulo Handler ............................. SKIPPED
[INFO] Hive JDBC ......................................... SKIPPED
[INFO] Hive Beeline ...................................... SKIPPED
[INFO] Hive CLI .......................................... SKIPPED
[INFO] Hive Contrib ...................................... SKIPPED
[INFO] Hive HBase Handler ................................ SKIPPED
[INFO] Hive HCatalog ..................................... SKIPPED
[INFO] Hive HCatalog Core ................................ SKIPPED
[INFO] Hive HCatalog Pig Adapter ......................... SKIPPED
[INFO] Hive HCatalog Server Extensions ................... SKIPPED
[INFO] Hive HCatalog Webhcat Java Client ................. SKIPPED
[INFO] Hive HCatalog Webhcat ............................. SKIPPED
[INFO] Hive HCatalog Streaming ........................... SKIPPED
[INFO] Hive HWI .......................................... SKIPPED
[INFO] Hive ODBC ......................................... SKIPPED
[INFO] Hive Shims Aggregator ............................. SKIPPED
[INFO] Hive TestUtils .................................... SKIPPED
[INFO] Hive Packaging .................................... SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2:08.890s
[INFO] Finished at: Wed Oct 08 14:05:44 EDT 2014
[INFO] Final Memory: 78M/414M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-remote-resources-plugin:1.5:process (default) on project hive-exec: Error resolving project artifact: Could not transfer artifact net.hydromatic:linq4j:pom:0.4 from/to datanucleus (http://www.datanucleus.org/downloads/maven2): Access denied to: http://www.datanucleus.org/downloads/maven2/net/hydromatic/linq4j/0.4/linq4j-0.4.pom, ReasonPhrase: Forbidden. for project net.hydromatic:linq4j:jar:0.4 -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[ERROR] 
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn &amp;lt;goals&amp;gt; -rf :hive-exec
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12673580&lt;/p&gt;</comment>
                            <comment id="14164563" author="brocknoland" created="Thu, 9 Oct 2014 01:43:54 +0000"  >&lt;p&gt;Linking to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8120&quot; title=&quot;Umbrella JIRA tracking Parquet improvements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8120&quot;&gt;HIVE-8120&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;FYI &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt; who is looking into some parquet hive schema stuff as well.&lt;/p&gt;</comment>
                            <comment id="14209571" author="mickaellcr" created="Thu, 13 Nov 2014 10:38:02 +0000"  >&lt;p&gt;Patch updated&lt;/p&gt;

&lt;p&gt;Better way to handle this case.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6914&quot; title=&quot;parquet-hive cannot write nested map (map value is map)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6914&quot;&gt;&lt;del&gt;HIVE-6914&lt;/del&gt;&lt;/a&gt; parquet-hive cannot write nested map (map value is map)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Change the way ArrayWritable was filled&lt;/li&gt;
	&lt;li&gt;Now parquet-hive can write complex nested type (array of map, map of array, struct ...)&lt;/li&gt;
	&lt;li&gt;Adding some qtests&lt;/li&gt;
&lt;/ul&gt;

</comment>
                            <comment id="14210071" author="hiveqa" created="Thu, 13 Nov 2014 17:46:40 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12681303/HIVE-6914.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12681303/HIVE-6914.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6687 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_complex_type_nested
org.apache.hadoop.hive.ql.io.parquet.TestParquetSerDe.testParquetHiveSerDe
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1773/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1773/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1773/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1773/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1773/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1773/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12681303 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14218143" author="mickaellcr" created="Wed, 19 Nov 2014 17:02:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rdblue&quot; class=&quot;user-hover&quot; rel=&quot;rdblue&quot;&gt;rdblue&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will redo this patch using the path available for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8359&quot; title=&quot;Map containing null values are not correctly written in Parquet files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8359&quot;&gt;&lt;del&gt;HIVE-8359&lt;/del&gt;&lt;/a&gt;. I think there is a link with this one too &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8909&quot; title=&quot;Hive doesn&amp;#39;t correctly read Parquet nested types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8909&quot;&gt;&lt;del&gt;HIVE-8909&lt;/del&gt;&lt;/a&gt;. With the previous patch I can read and write parquet complex nested types.&lt;br/&gt;
So maybe it will be better to add my qtests to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8909&quot; title=&quot;Hive doesn&amp;#39;t correctly read Parquet nested types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8909&quot;&gt;&lt;del&gt;HIVE-8909&lt;/del&gt;&lt;/a&gt; and fix the writing bug ?&lt;/p&gt;

&lt;p&gt;What do you think ?&lt;/p&gt;</comment>
                            <comment id="14218250" author="spena" created="Wed, 19 Nov 2014 18:08:02 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mickaellcr&quot; class=&quot;user-hover&quot; rel=&quot;mickaellcr&quot;&gt;mickaellcr&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;It sounds good if you use the patch from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8359&quot; title=&quot;Map containing null values are not correctly written in Parquet files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8359&quot;&gt;&lt;del&gt;HIVE-8359&lt;/del&gt;&lt;/a&gt; for this bug. Regarding adding the qtests to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8909&quot; title=&quot;Hive doesn&amp;#39;t correctly read Parquet nested types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8909&quot;&gt;&lt;del&gt;HIVE-8909&lt;/del&gt;&lt;/a&gt;, I think that ticket is meant to fix the reading part of different nested types formats generated by Thrift and Avro tools (it does not touch the writing part); so I think it should be good to have these writing tests separated from the reading tests.&lt;/p&gt;
</comment>
                            <comment id="14221600" author="rdblue" created="Fri, 21 Nov 2014 23:42:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8909&quot; title=&quot;Hive doesn&amp;#39;t correctly read Parquet nested types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8909&quot;&gt;&lt;del&gt;HIVE-8909&lt;/del&gt;&lt;/a&gt; tests that parquet-hive can now read this case in its map tests, but it doesn&apos;t test the write side.&lt;/p&gt;</comment>
                            <comment id="14221644" author="rdblue" created="Sat, 22 Nov 2014 00:33:17 +0000"  >&lt;p&gt;Attaching a qtest and data file that verifies &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;&apos;s fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8359&quot; title=&quot;Map containing null values are not correctly written in Parquet files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8359&quot;&gt;&lt;del&gt;HIVE-8359&lt;/del&gt;&lt;/a&gt; fixes this bug. The qtest relies on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8909&quot; title=&quot;Hive doesn&amp;#39;t correctly read Parquet nested types&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8909&quot;&gt;&lt;del&gt;HIVE-8909&lt;/del&gt;&lt;/a&gt; to read the data.&lt;/p&gt;</comment>
                            <comment id="14221663" author="rdblue" created="Sat, 22 Nov 2014 00:52:13 +0000"  >&lt;p&gt;Updating qtest patch to drop all created tables.&lt;/p&gt;</comment>
                            <comment id="14221685" author="brocknoland" created="Sat, 22 Nov 2014 01:11:39 +0000"  >&lt;p&gt;+1 pending tests&lt;/p&gt;</comment>
                            <comment id="14222623" author="hiveqa" created="Mon, 24 Nov 2014 03:48:00 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12683010/HIVE-6914.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12683010/HIVE-6914.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 6682 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_map_of_maps
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_optimize_nullscan
org.apache.hive.hcatalog.streaming.TestStreaming.testEndpointConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1885/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1885/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1885/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1885/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1885/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1885/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12683010 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14222631" author="brocknoland" created="Mon, 24 Nov 2014 04:13:07 +0000"  >&lt;p&gt;I committed the &lt;tt&gt;NestedMap.parquet&lt;/tt&gt; file but it looks like the &lt;tt&gt;.q.out&lt;/tt&gt; file needs to be updated due to an additional drop table.&lt;/p&gt;</comment>
                            <comment id="14223189" author="spena" created="Mon, 24 Nov 2014 17:43:44 +0000"  >&lt;p&gt;Here&apos;s the file with the .q.out updated&lt;/p&gt;</comment>
                            <comment id="14224403" author="hiveqa" created="Tue, 25 Nov 2014 11:13:22 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12683366/HIVE-6914.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12683366/HIVE-6914.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6682 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1898/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1898/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1898/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1898/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1898/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1898/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12683366 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14224898" author="rdblue" created="Tue, 25 Nov 2014 17:45:00 +0000"  >&lt;p&gt;Thanks for fixing the test &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;! Looks like it is passing and ready to go.&lt;/p&gt;</comment>
                            <comment id="14224982" author="brocknoland" created="Tue, 25 Nov 2014 18:48:20 +0000"  >&lt;p&gt;Thank you much guys! I have committed this to trunk!&lt;/p&gt;</comment>
                            <comment id="14225996" author="mickaellcr" created="Wed, 26 Nov 2014 10:23:01 +0000"  >&lt;p&gt;Thx !!!!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12746196">HIVE-8359</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12741673">HIVE-8120</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12756268">HIVE-8909</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12683004" name="HIVE-6914.1.patch" size="3864" author="rdblue" created="Sat, 22 Nov 2014 00:33:17 +0000"/>
                            <attachment id="12673580" name="HIVE-6914.1.patch" size="28237" author="mickaellcr" created="Wed, 8 Oct 2014 11:15:25 +0000"/>
                            <attachment id="12681303" name="HIVE-6914.2.patch" size="30252" author="mickaellcr" created="Thu, 13 Nov 2014 10:38:02 +0000"/>
                            <attachment id="12683010" name="HIVE-6914.3.patch" size="3902" author="rdblue" created="Sat, 22 Nov 2014 00:52:13 +0000"/>
                            <attachment id="12683366" name="HIVE-6914.4.patch" size="3843" author="spena" created="Mon, 24 Nov 2014 17:43:44 +0000"/>
                            <attachment id="12683005" name="NestedMap.parquet" size="622" author="rdblue" created="Sat, 22 Nov 2014 00:33:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386925</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1unl3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387189</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>