<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:31:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-9647] Discrepancy in cardinality estimates between partitioned and un-partitioned tables </title>
                <link>https://issues.apache.org/jira/browse/HIVE-9647</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;High-level summary&lt;br/&gt;
HiveRelMdSelectivity.computeInnerJoinSelectivity relies on per column number of distinct value to estimate join selectivity.&lt;br/&gt;
The way statistics are aggregated for partitioned tables results in discrepancy in number of distinct values which results in different plans between partitioned and un-partitioned schemas.&lt;/p&gt;

&lt;p&gt;The table below summarizes the NDVs in computeInnerJoinSelectivity which are used to estimate selectivity of joins.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Column	&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;Partitioned count distincts&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt; 	Un-Partitioned count distincts&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;sr_customer_sk	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;71,245	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;1,415,625&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;sr_item_sk	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;38,846&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	62,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;sr_ticket_number	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;71,245	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;34,931,085&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ss_customer_sk	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;88,476&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,415,625&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ss_item_sk	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;38,846&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	62,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ss_ticket_number&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	100,756	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;56,256,175&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;The discrepancy is because NDV calculation for a partitioned table assumes that the NDV range is contained within each partition and is calculates as &quot;select max(NUM_DISTINCTS) from PART_COL_STATS&#8221; .&lt;br/&gt;
This is problematic for columns like ticket number which are naturally increasing with the partitioned date column ss_sold_date_sk.&lt;br/&gt;
Suggestions&lt;br/&gt;
Use Hyper Log Log as suggested by Gopal, there is an HLL implementation for HBASE co-porccessors which we can use as a reference here &lt;br/&gt;
Using the global stats from TAB_COL_STATS and the per partition stats from PART_COL_STATS extrapolate the NDV for the qualified partitions as in :&lt;br/&gt;
Max ( (NUM_DISTINCTS from TAB_COL_STATS) x (Number of qualified partitions) / (Number of Partitions), max(NUM_DISTINCTS) from PART_COL_STATS))&lt;br/&gt;
More details&lt;br/&gt;
While doing TPC-DS Partitioned vs. Un-Partitioned runs I noticed that many of the plans are different, then I dumped the CBO logical plan and I found that join estimates are drastically different&lt;/p&gt;

&lt;p&gt;Unpartitioned schema :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2015-02-10 11:33:27,624 DEBUG [main]: parse.SemanticAnalyzer (SemanticAnalyzer.java:apply(12624)) - Plan After Join Reordering:
HiveProjectRel(store_sales_quantitycount=[$0], store_sales_quantityave=[$1], store_sales_quantitystdev=[$2], store_sales_quantitycov=[/($2, $1)], as_store_returns_quantitycount=[$3], as_store_returns_quantityave=[$4], as_store_returns_quantitystdev=[$5], store_returns_quantitycov=[/($5, $4)]): rowcount = 1.0, cumulative cost = {6.056835407771381E8 rows, 0.0 cpu, 0.0 io}, id = 2956
  HiveAggregateRel(group=[{}], agg#0=[count($0)], agg#1=[avg($0)], agg#2=[stddev_samp($0)], agg#3=[count($1)], agg#4=[avg($1)], agg#5=[stddev_samp($1)]): rowcount = 1.0, cumulative cost = {6.056835407771381E8 rows, 0.0 cpu, 0.0 io}, id = 2954
    HiveProjectRel($f0=[$4], $f1=[$8]): rowcount = 40.05611776795562, cumulative cost = {6.056835407771381E8 rows, 0.0 cpu, 0.0 io}, id = 2952
      HiveProjectRel(ss_sold_date_sk=[$0], ss_item_sk=[$1], ss_customer_sk=[$2], ss_ticket_number=[$3], ss_quantity=[$4], sr_item_sk=[$5], sr_customer_sk=[$6], sr_ticket_number=[$7], sr_return_quantity=[$8], d_date_sk=[$9], d_quarter_name=[$10]): rowcount = 40.05611776795562, cumulative cost = {6.056835407771381E8 rows, 0.0 cpu, 0.0 io}, id = 2982
        HiveJoinRel(condition=[=($9, $0)], joinType=[&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;]): rowcount = 40.05611776795562, cumulative cost = {6.056835407771381E8 rows, 0.0 cpu, 0.0 io}, id = 2980
          HiveJoinRel(condition=[AND(AND(=($2, $6), =($1, $5)), =($3, $7))], joinType=[&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;]): rowcount = 28880.460910696, cumulative cost = {6.05654559E8 rows, 0.0 cpu, 0.0 io}, id = 2964
            HiveProjectRel(ss_sold_date_sk=[$0], ss_item_sk=[$2], ss_customer_sk=[$3], ss_ticket_number=[$9], ss_quantity=[$10]): rowcount = 5.50076554E8, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2920
              HiveTableScanRel(table=[[tpcds_bin_orc_200.store_sales]]): rowcount = 5.50076554E8, cumulative cost = {0}, id = 2822
            HiveProjectRel(sr_item_sk=[$2], sr_customer_sk=[$3], sr_ticket_number=[$9], sr_return_quantity=[$10]): rowcount = 5.5578005E7, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2923
              HiveTableScanRel(table=[[tpcds_bin_orc_200.store_returns]]): rowcount = 5.5578005E7, cumulative cost = {0}, id = 2823
          HiveProjectRel(d_date_sk=[$0], d_quarter_name=[$15]): rowcount = 101.31622746185853, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2948
            HiveFilterRel(condition=[=($15, &lt;span class=&quot;code-quote&quot;&gt;&apos;2000Q1&apos;&lt;/span&gt;)]): rowcount = 101.31622746185853, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2946
              HiveTableScanRel(table=[[tpcds_bin_orc_200.date_dim]]): rowcount = 73049.0, cumulative cost = {0}, id = 2821
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Partitioned schema :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2015-02-10 11:32:16,880 DEBUG [main]: parse.SemanticAnalyzer (SemanticAnalyzer.java:apply(12624)) - Plan After Join Reordering:
HiveProjectRel(store_sales_quantitycount=[$0], store_sales_quantityave=[$1], store_sales_quantitystdev=[$2], store_sales_quantitycov=[/($2, $1)], as_store_returns_quantitycount=[$3], as_store_returns_quantityave=[$4], as_store_returns_quantitystdev=[$5], store_returns_quantitycov=[/($5, $4)]): rowcount = 1.0, cumulative cost = {6.064175958973647E8 rows, 0.0 cpu, 0.0 io}, id = 2791
  HiveAggregateRel(group=[{}], agg#0=[count($0)], agg#1=[avg($0)], agg#2=[stddev_samp($0)], agg#3=[count($1)], agg#4=[avg($1)], agg#5=[stddev_samp($1)]): rowcount = 1.0, cumulative cost = {6.064175958973647E8 rows, 0.0 cpu, 0.0 io}, id = 2789
    HiveProjectRel($f0=[$3], $f1=[$8]): rowcount = 100840.08570910375, cumulative cost = {6.064175958973647E8 rows, 0.0 cpu, 0.0 io}, id = 2787
      HiveProjectRel(ss_item_sk=[$4], ss_customer_sk=[$5], ss_ticket_number=[$6], ss_quantity=[$7], ss_sold_date_sk=[$8], sr_item_sk=[$0], sr_customer_sk=[$1], sr_ticket_number=[$2], sr_return_quantity=[$3], d_date_sk=[$9], d_quarter_name=[$10]): rowcount = 100840.08570910375, cumulative cost = {6.064175958973647E8 rows, 0.0 cpu, 0.0 io}, id = 2817
        HiveJoinRel(condition=[AND(AND(=($5, $1), =($4, $0)), =($6, $2))], joinType=[&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;]): rowcount = 100840.08570910375, cumulative cost = {6.064175958973647E8 rows, 0.0 cpu, 0.0 io}, id = 2815
          HiveProjectRel(sr_item_sk=[$1], sr_customer_sk=[$2], sr_ticket_number=[$8], sr_return_quantity=[$9]): rowcount = 5.5578005E7, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2758
            HiveTableScanRel(table=[[tpcds_bin_partitioned_orc_200_orig.store_returns]]): rowcount = 5.5578005E7, cumulative cost = {0}, id = 2658
          HiveJoinRel(condition=[=($5, $4)], joinType=[&lt;span class=&quot;code-keyword&quot;&gt;inner&lt;/span&gt;]): rowcount = 762935.5811373093, cumulative cost = {5.500766553162274E8 rows, 0.0 cpu, 0.0 io}, id = 2801
            HiveProjectRel(ss_item_sk=[$1], ss_customer_sk=[$2], ss_ticket_number=[$8], ss_quantity=[$9], ss_sold_date_sk=[$22]): rowcount = 5.50076554E8, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2755
              HiveTableScanRel(table=[[tpcds_bin_partitioned_orc_200_orig.store_sales]]): rowcount = 5.50076554E8, cumulative cost = {0}, id = 2657
            HiveProjectRel(d_date_sk=[$0], d_quarter_name=[$15]): rowcount = 101.31622746185853, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2783
              HiveFilterRel(condition=[=($15, &lt;span class=&quot;code-quote&quot;&gt;&apos;2000Q1&apos;&lt;/span&gt;)]): rowcount = 101.31622746185853, cumulative cost = {0.0 rows, 0.0 cpu, 0.0 io}, id = 2781
                HiveTableScanRel(table=[[tpcds_bin_partitioned_orc_200_orig.date_dim]]): rowcount = 73049.0, cumulative cost = {0}, id = 2656
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This was puzzling knowing that the stats for both tables are &#8220;identical&#8221; in TAB_COL_STATS.&lt;/p&gt;

&lt;p&gt;Column statistics from TAB_COL_STATS, notice how the column statistics are identical in both cases.&lt;/p&gt;

&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;DB_NAME	&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;COLUMN_NAME&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;	COLUMN_TYPE&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;	NUM_NULLS&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;	LONG_HIGH_VALUE&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;	LONG_LOW_VALUE&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;	MAX_COL_LEN&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;	NUM_DISTINCTS&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	d_date_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,488,070&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,415,022&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	65,332&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	d_date_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,488,070&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,415,022&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	65,332&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;d_quarter_name&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	string&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	721&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	d_quarter_name&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	string&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	6&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	721&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	sr_customer_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,009,571&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,600,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,415,625&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	sr_customer_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,009,571&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,600,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,415,625&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;sr_item_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	62,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	sr_item_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	62,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;sr_ticket_number&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	34,931,085&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	sr_ticket_number&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	34,931,085&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ss_customer_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	12,960,424&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,600,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,415,625&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	ss_customer_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	12,960,424&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,600,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1,415,625&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ss_item_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	62,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	ss_item_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	62,562&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	ss_sold_date_sk&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,452,642&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,450,816&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,226&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	ss_sold_date_sk	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,452,642&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,450,816&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	2,226&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_orc_200	&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;ss_ticket_number&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	56,256,175&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;tpcds_bin_partitioned_orc_200&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	ss_ticket_number&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	int&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	0&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	48,000,000&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	1&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	NULL&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;	56,256,175&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;



&lt;p&gt;For partitioned tables we get the statistics using get_aggr_stats_for which eventually issues the query below&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select 
    COLUMN_NAME,
    COLUMN_TYPE,
    &#8230;
    max(NUM_DISTINCTS),
    &#8230;
from
    PART_COL_STATS
Where
where
    DB_NAME = 
        and TABLE_NAME = 
        and COLUMN_NAME in 
        and PARTITION_NAME in (1 &#8230; N)
group by COLUMN_NAME , COLUMN_TYPE;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; &#8230;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12774033">HIVE-9647</key>
            <summary>Discrepancy in cardinality estimates between partitioned and un-partitioned tables </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pxiong">Pengcheng Xiong</assignee>
                                    <reporter username="mmokhtar">Mostafa Mokhtar</reporter>
                        <labels>
                            <label>TODOC1.2</label>
                    </labels>
                <created>Tue, 10 Feb 2015 23:54:42 +0000</created>
                <updated>Mon, 18 May 2015 19:53:37 +0000</updated>
                            <resolved>Fri, 10 Apr 2015 00:08:13 +0000</resolved>
                                    <version>0.14.0</version>
                    <version>1.0.0</version>
                    <version>1.1.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Statistics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14326836" author="pxiong" created="Thu, 19 Feb 2015 00:56:30 +0000"  >&lt;p&gt;Current HIVE implements the NDV using Flajolet-Martin algorithm. In this algorithm, it assumes that we can have a a hash function hash&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; which maps input x to integers in the range [0; 2^&lt;/p&gt;
{L-1}
&lt;p&gt;] and where the outputs are sufficiently UNIFORMLY distributed. &lt;/p&gt;

&lt;p&gt;Thus, if we assume an UNIFORM distribution, the density of the NDV should also be the same. Moreover, since we already have the min/max as well as NDV for each partition, we can calculate the density for each partition. We use the average of the density of all the partitions for the aggregation. This method is not only independent of the # of partitions which runs fast, but also is easy to extended to extrapolation cases where we miss the status of some of the partitions.&lt;/p&gt;

&lt;p&gt;This patch also address the bug in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9717&quot; title=&quot;The max/min function used by AggrStats for decimal type is not what we expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9717&quot;&gt;&lt;del&gt;HIVE-9717&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14326844" author="mmokhtar" created="Thu, 19 Feb 2015 01:04:40 +0000"  >&lt;p&gt;Awesome &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;br/&gt;
I am happy we can fix this.&lt;/p&gt;



</comment>
                            <comment id="14326927" author="hiveqa" created="Thu, 19 Feb 2015 02:49:01 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12699583/HIVE-9647.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12699583/HIVE-9647.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 7561 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2821/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2821/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2821/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2821/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2821/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2821/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12699583 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14326995" author="pxiong" created="Thu, 19 Feb 2015 05:00:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmokhtar&quot; class=&quot;user-hover&quot; rel=&quot;mmokhtar&quot;&gt;mmokhtar&lt;/a&gt;, the test failure is unrelated and it passed on my laptop. Could you please try the patch? It could be applied on trunk. Thanks.&lt;/p&gt;</comment>
                            <comment id="14339348" author="ashutoshc" created="Thu, 26 Feb 2015 22:48:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pxiong&quot; class=&quot;user-hover&quot; rel=&quot;pxiong&quot;&gt;pxiong&lt;/a&gt; if there is a review request for it already, can you post a link here?&lt;/p&gt;</comment>
                            <comment id="14343668" author="ashutoshc" created="Mon, 2 Mar 2015 19:57:30 +0000"  >&lt;p&gt;+1 code changes look good.&lt;/p&gt;</comment>
                            <comment id="14481971" author="pxiong" created="Mon, 6 Apr 2015 21:21:09 +0000"  >&lt;p&gt;address the metastore configuration flag&lt;/p&gt;</comment>
                            <comment id="14482507" author="hiveqa" created="Tue, 7 Apr 2015 03:18:51 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12723440/HIVE-9647.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12723440/HIVE-9647.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 15 failed/errored test(s), 8653 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-leftsemijoin_mr.q-bucket5.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-ql_rewrite_gbtoidx.q-parallel_orderby.q-reduce_deduplicate.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-schemeAuthority2.q-infer_bucket_sort_bucketed_table.q-bucket4.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-smb_mapjoin_8.q - did not produce a TEST-*.xml file
org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.TestSQLStdHiveAccessControllerHS2.testConfigProcessing
org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.TestSQLStdHiveAccessControllerHS2.testConfigProcessingCustomSetWhitelistAppend
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3301/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3301/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3301/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3301/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3301/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3301/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 15 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12723440 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14484450" author="pxiong" created="Wed, 8 Apr 2015 00:39:30 +0000"  >&lt;p&gt;address the test failures. Thanks for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;&apos;s help.&lt;/p&gt;</comment>
                            <comment id="14486266" author="hiveqa" created="Wed, 8 Apr 2015 22:58:06 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12723797/HIVE-9647.03.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12723797/HIVE-9647.03.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 14 failed/errored test(s), 8666 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file
TestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3333/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3333/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3333/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3333/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3333/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3333/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 14 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12723797 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14486381" author="pxiong" created="Thu, 9 Apr 2015 00:10:43 +0000"  >&lt;p&gt;The failed test &quot;TestHCatClient&quot; is unrelated and it passed on my laptop. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;, could you please take a look? I think it is ready to go. Thanks.&lt;/p&gt;</comment>
                            <comment id="14488189" author="ashutoshc" created="Thu, 9 Apr 2015 20:16:58 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14488580" author="ashutoshc" created="Fri, 10 Apr 2015 00:08:13 +0000"  >&lt;p&gt;Committed to trunk. Thanks, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pxiong&quot; class=&quot;user-hover&quot; rel=&quot;pxiong&quot;&gt;pxiong&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14488925" author="lefty@hortonworks.com" created="Fri, 10 Apr 2015 05:13:06 +0000"  >&lt;p&gt;Doc note:  This adds &lt;b&gt;hive.metastore.stats.ndv.densityfunction&lt;/b&gt; to HiveConf.java, so it needs to be documented in Configuration Properties for 1.2.0.  Presumably it belongs in the metastore section but it&apos;s also relevant to statistics so a cross-reference would be helpful.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-MetaStore&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; MetaStore &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-Statistics&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; Statistics &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14548925" author="sushanth" created="Mon, 18 May 2015 19:53:37 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12775950">HIVE-9717</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12827382">HIVE-10612</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12780723">HIVE-9905</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12775950">HIVE-9717</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12775013">HIVE-9689</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12699583" name="HIVE-9647.01.patch" size="109046" author="pxiong" created="Thu, 19 Feb 2015 00:56:30 +0000"/>
                            <attachment id="12723440" name="HIVE-9647.02.patch" size="116689" author="pxiong" created="Mon, 6 Apr 2015 21:21:09 +0000"/>
                            <attachment id="12723797" name="HIVE-9647.03.patch" size="116822" author="pxiong" created="Wed, 8 Apr 2015 00:39:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i25gbr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>