<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:21:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-25591] CREATE EXTERNAL TABLE fails for JDBC tables stored in non-default schema</title>
                <link>https://issues.apache.org/jira/browse/HIVE-25591</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Consider the following use case where tables reside in some user-defined schema in some JDBC compliant database:&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Postgres&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;schema&lt;/span&gt; world;

&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;exists&lt;/span&gt; world.country (&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;varchar&lt;/span&gt;(80) &lt;span class=&quot;code-keyword&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);

&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;into&lt;/span&gt; world.country (&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;values&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;India&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;into&lt;/span&gt; world.country (&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;values&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;Russia&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;into&lt;/span&gt; world.country (&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;values&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;USA&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The following DDL statement in Hive fails:&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Hive&lt;/ins&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;EXTERNAL&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; country (&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;varchar&lt;/span&gt;(80))
STORED &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.hive.&lt;span class=&quot;code-keyword&quot;&gt;storage&lt;/span&gt;.jdbc.JdbcStorageHandler&apos;&lt;/span&gt;
TBLPROPERTIES (
&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.&lt;span class=&quot;code-keyword&quot;&gt;sql&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;database&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;type&lt;/span&gt;&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;POSTGRES&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.&lt;span class=&quot;code-keyword&quot;&gt;sql&lt;/span&gt;.jdbc.driver&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;org.postgresql.Driver&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.&lt;span class=&quot;code-keyword&quot;&gt;sql&lt;/span&gt;.jdbc.url&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;jdbc:postgresql://localhost:5432/test&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.&lt;span class=&quot;code-keyword&quot;&gt;sql&lt;/span&gt;.dbcp.username&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;user&lt;/span&gt;&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.&lt;span class=&quot;code-keyword&quot;&gt;sql&lt;/span&gt;.dbcp.&lt;span class=&quot;code-keyword&quot;&gt;password&lt;/span&gt;&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;pwd&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.&lt;span class=&quot;code-keyword&quot;&gt;sql&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;schema&lt;/span&gt;&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;world&quot;&lt;/span&gt;,
&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.&lt;span class=&quot;code-keyword&quot;&gt;sql&lt;/span&gt;.&lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt;&quot;&lt;/span&gt; = &lt;span class=&quot;code-quote&quot;&gt;&quot;country&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The exception is the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.postgresql.util.PSQLException: ERROR: relation &quot;country&quot; does not exist
  Position: 15
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2532) ~[postgresql-42.2.14.jar:42.2.14]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2267) ~[postgresql-42.2.14.jar:42.2.14]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:312) ~[postgresql-42.2.14.jar:42.2.14]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:448) ~[postgresql-42.2.14.jar:42.2.14]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:369) ~[postgresql-42.2.14.jar:42.2.14]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:153) ~[postgresql-42.2.14.jar:42.2.14]
	at org.postgresql.jdbc.PgPreparedStatement.executeQuery(PgPreparedStatement.java:103) ~[postgresql-42.2.14.jar:42.2.14]
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:122) ~[commons-dbcp2-2.7.0.jar:2.7.0]
	at org.apache.commons.dbcp2.DelegatingPreparedStatement.executeQuery(DelegatingPreparedStatement.java:122) ~[commons-dbcp2-2.7.0.jar:2.7.0]
	at org.apache.hive.storage.jdbc.dao.GenericJdbcDatabaseAccessor.getColumnNames(GenericJdbcDatabaseAccessor.java:83) [hive-jdbc-handler-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hive.storage.jdbc.JdbcSerDe.initialize(JdbcSerDe.java:98) [hive-jdbc-handler-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.metastore.HiveMetaStoreUtils.getDeserializer(HiveMetaStoreUtils.java:95) [hive-metastore-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.metastore.HiveMetaStoreUtils.getDeserializer(HiveMetaStoreUtils.java:78) [hive-metastore-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.metadata.Table.getDeserializerFromMetaStore(Table.java:342) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.metadata.Table.getDeserializer(Table.java:324) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.metadata.Table.getColsInternal(Table.java:734) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.metadata.Table.getCols(Table.java:717) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.ddl.table.create.CreateTableDesc.toTable(CreateTableDesc.java:933) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.ddl.table.create.CreateTableOperation.execute(CreateTableOperation.java:59) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.ddl.DDLTask.execute(DDLTask.java:84) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.exec.Task.executeTask(Task.java:212) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.exec.TaskRunner.runSequential(TaskRunner.java:105) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.Executor.launchTask(Executor.java:361) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.Executor.launchTasks(Executor.java:334) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.Executor.runTasks(Executor.java:245) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.Executor.execute(Executor.java:108) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
	at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:348) [hive-exec-4.0.0-SNAPSHOT.jar:4.0.0-SNAPSHOT]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13404966">HIVE-25591</key>
            <summary>CREATE EXTERNAL TABLE fails for JDBC tables stored in non-default schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Tue, 5 Oct 2021 11:15:41 +0000</created>
                <updated>Thu, 17 Nov 2022 08:48:20 +0000</updated>
                            <resolved>Wed, 3 Nov 2021 22:26:27 +0000</resolved>
                                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                                    <component>Query Planning</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="7800">2h 10m</timespent>
                                <comments>
                            <comment id="17424419" author="zabetak" created="Tue, 5 Oct 2021 11:19:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-21383&quot; title=&quot;JDBC storage handler: Use catalog and schema to retrieve tables if specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-21383&quot;&gt;&lt;del&gt;HIVE-21383&lt;/del&gt;&lt;/a&gt; started the work for supporting JDBC tables in different catalogs/schemas but currently there are no tests in the repository.&lt;/p&gt;

&lt;p&gt;Moreover there are various places in the codebase which do not take the &lt;tt&gt;hive.sql.schema&lt;/tt&gt; table property into account leading to failures as the one mentioned in the description. &lt;/p&gt;</comment>
                            <comment id="17438320" author="zabetak" created="Wed, 3 Nov 2021 22:26:27 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/hive/commit/0616bcaa2436ccbf388b635bfea160b47849553c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;0616bcaa2436ccbf388b635bfea160b47849553c&lt;/a&gt;. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chiran54321&quot; class=&quot;user-hover&quot; rel=&quot;chiran54321&quot;&gt;chiran54321&lt;/a&gt;&#160; for the quick prototype and&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kkasa&quot; class=&quot;user-hover&quot; rel=&quot;kkasa&quot;&gt;kkasa&lt;/a&gt;&#160;for the review!&lt;/p&gt;</comment>
                            <comment id="17439413" author="pvary" created="Fri, 5 Nov 2021 18:26:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zabetak&quot; class=&quot;user-hover&quot; rel=&quot;zabetak&quot;&gt;zabetak&lt;/a&gt;: Based on this: &lt;a href=&quot;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/PR-2765/2/tests&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/PR-2765/2/tests&lt;/a&gt;, I expect that we would like to update the test files so the results are sorted. What do you think?&lt;br/&gt;
Thanks,&lt;br/&gt;
Peter&lt;/p&gt;</comment>
                            <comment id="17439517" author="zabetak" created="Fri, 5 Nov 2021 21:31:05 +0000"  >&lt;p&gt;Hey &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pvary&quot; class=&quot;user-hover&quot; rel=&quot;pvary&quot;&gt;pvary&lt;/a&gt;, yes for one of the failures you are seeing I committed &lt;a href=&quot;https://github.com/apache/hive/commit/c8c5d2bee7f357ab873d0f3366ae94624d9a73fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/c8c5d2bee7f357ab873d0f3366ae94624d9a73fe&lt;/a&gt;&#160;a few hours ago and for the other I raised&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25675&quot; title=&quot;Intermittent PSQLException when trying to connect to Postgres in tests&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25675&quot;&gt;&lt;del&gt;HIVE-25675&lt;/del&gt;&lt;/a&gt; along with a PR (waiting for a review).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13405681">HIVE-25605</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13219416">HIVE-21383</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0vkmo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>