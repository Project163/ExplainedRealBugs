<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:16:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6356] Dependency injection in hbase storage handler is broken</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6356</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Dependent jars for hbase is not added to tmpjars, which is caused by the change of method signature(TableMapReduceUtil.addDependencyJars).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12692792">HIVE-6356</key>
            <summary>Dependency injection in hbase storage handler is broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xuefuz">Xuefu Zhang</assignee>
                                    <reporter username="navis">Navis Ryu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 3 Feb 2014 08:04:15 +0000</created>
                <updated>Sat, 1 Mar 2014 16:28:48 +0000</updated>
                            <resolved>Sat, 1 Mar 2014 16:28:48 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13889605" author="hiveqa" created="Mon, 3 Feb 2014 16:39:31 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12626614/HIVE-6356.1.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12626614/HIVE-6356.1.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4997 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1165/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1165/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1165/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1165/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12626614&lt;/p&gt;</comment>
                            <comment id="13889639" author="ashutoshc" created="Mon, 3 Feb 2014 17:09:14 +0000"  >&lt;p&gt;Is htrace strictly required ? If so, than don&apos;t we need to make sure its jar is available at run-time (currently it seems we don&apos;t have it in our lib/ dir of package?) &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ndimiduk&quot; class=&quot;user-hover&quot; rel=&quot;ndimiduk&quot;&gt;ndimiduk&lt;/a&gt; Can you also take a look?&lt;/p&gt;</comment>
                            <comment id="13889708" author="ndimiduk" created="Mon, 3 Feb 2014 18:20:46 +0000"  >&lt;p&gt;I stumbled into this recently as well. HTrace is now a required runtime dependency, even when it&apos;s not used. This patch is incorrect, however. Because Hive is using the mapred namespace classes, the correct API is to invoke o.a.h.hbase.mapred.TableMapReduceUtil#addDependencyJars(JobConf). This will wire in all of HBase&apos;s runtime dependencies for you, and also attempt to auto-detect additional dependencies based on the JobConf (output classes, partitioners, formats, etc). If you want more fine-grained control over these dependencies (as Pig did, see &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3285&quot; title=&quot;Jobs using HBaseStorage fail to ship dependency jars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3285&quot;&gt;&lt;del&gt;PIG-3285&lt;/del&gt;&lt;/a&gt;), there are additional static methods in the o.a.h.hbase.mapreduce.TableMapReduceUtil class.&lt;/p&gt;

&lt;p&gt;For Hive&apos;s purpose, I think you&apos;ll be fine with just calling mapred.TableMapReduceUtil#addDependencyJars(JobConf). Having a smoke test that runs in pseudo-distributed mode would be helpful in verifying all requirements are met.&lt;/p&gt;</comment>
                            <comment id="13890156" author="navis" created="Tue, 4 Feb 2014 00:06:12 +0000"  >&lt;p&gt;Right. I&apos;ve forgot there are two version of TableMapReduceUtil. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3603&quot; title=&quot;Enable client-side caching for scans on HBase&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3603&quot;&gt;&lt;del&gt;HIVE-3603&lt;/del&gt;&lt;/a&gt; changed import clause of TableMapReduceUtil to mapred, which cause this problem. I&apos;ll fix this shortly after.&lt;/p&gt;</comment>
                            <comment id="13890496" author="hiveqa" created="Tue, 4 Feb 2014 08:37:33 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12626785/HIVE-6356.2.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12626785/HIVE-6356.2.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4997 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1172/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1172/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1172/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1172/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12626785&lt;/p&gt;</comment>
                            <comment id="13890967" author="ndimiduk" created="Tue, 4 Feb 2014 18:22:10 +0000"  >&lt;p&gt;Patch 2 looks better. You should be able to do without explicitly requesting org.apache.hadoop.hbase.HBaseConfiguration.class as well; this should be included by the underlying HBase method.&lt;/p&gt;

&lt;p&gt;+1 (for what it&apos;s worth)&lt;/p&gt;</comment>
                            <comment id="13891352" author="ashutoshc" created="Tue, 4 Feb 2014 22:55:14 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13891439" author="ashutoshc" created="Tue, 4 Feb 2014 23:42:57 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="13892899" author="navis" created="Thu, 6 Feb 2014 01:51:19 +0000"  >&lt;p&gt;Sadly, patch2 cannot resolve this issue. I should I have done some tests before updating the patch (the problem looked so obvious, sorry). o.a.h.hbase.mapred.TableMapReduceUtil#addDependencyJars(JobConf) is only works with older version of hbase.&lt;/p&gt;

&lt;p&gt;Now back to the problem, o.a.h.hbase.mapreduce.TableMapReduceUtil takes Job as parameter rather than JobConf, which seemed not good idea thinking that it&apos;s mere a wrapper of JobConf. Anyway, we can resolve this with patch1 (copy needed class list from TableMapReduceUtil) or make new Job instance and copy values from it to original JobConf. Which one is better?&lt;/p&gt;</comment>
                            <comment id="13893549" author="ndimiduk" created="Thu, 6 Feb 2014 17:15:10 +0000"  >&lt;p&gt;Please don&apos;t copy-paste the dependency list from HBase. The whole point of the addDependencyJars is to encapsulate that list in a single place that&apos;s managed by the HBase team.&lt;/p&gt;

&lt;p&gt;The reason the method accepts a Job instead of just a Configuration is that it inspects the job to add additional dependencies, such as input/output formats. Please refresh your memory from the comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2379&quot; title=&quot;Hive/HBase integration could be improved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2379&quot;&gt;&lt;del&gt;HIVE-2379&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I&apos;m attaching an addendum that should fix this. To be sure, I&apos;ll test it out on a real cluster later this afternoon. If the Hive team doesn&apos;t want the additional input/output format snooping, we can use an alternative method I introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9165&quot; title=&quot;Improvements to addDependencyJars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9165&quot;&gt;&lt;del&gt;HBASE-9165&lt;/del&gt;&lt;/a&gt; for the benefit of &lt;a href=&quot;https://issues.apache.org/jira/browse/PIG-3285&quot; title=&quot;Jobs using HBaseStorage fail to ship dependency jars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PIG-3285&quot;&gt;&lt;del&gt;PIG-3285&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13899520" author="sershe" created="Wed, 12 Feb 2014 20:00:10 +0000"  >&lt;p&gt;addendum looks good to me&lt;/p&gt;</comment>
                            <comment id="13899524" author="ashutoshc" created="Wed, 12 Feb 2014 20:06:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; Can you reupload the patch with correct name so Hive QA picks it up.&lt;/p&gt;</comment>
                            <comment id="13899842" author="navis" created="Thu, 13 Feb 2014 00:42:29 +0000"  >&lt;p&gt;addendum is basically same with already applied patch(patch2) and it&apos;s not fixing this problem. If copying is that bad, I should use second method to fix this.&lt;/p&gt;</comment>
                            <comment id="13899906" author="ndimiduk" created="Thu, 13 Feb 2014 01:42:25 +0000"  >&lt;p&gt;Patch 3 is not the addendum. My mistake, I thought patch2 had been committed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;it&apos;s not fixing this problem&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;What exactly is the problem it&apos;s not fixing? Is the job failing due to missing dependencies? Which dependencies? Are they on the classpath of the job client?&lt;/p&gt;

&lt;p&gt;I think copying really is that bad; it means this integration will break every time HBase changes it&apos;s dependencies. Not often, but it does happen. Instead, use the provided method and the correct dependencies will be added at runtime, everytime. Is this behavior undesirable for some reason?&lt;/p&gt;

&lt;p&gt;What do you mean &quot;second method&quot;?&lt;/p&gt;</comment>
                            <comment id="13899984" author="navis" created="Thu, 13 Feb 2014 03:46:31 +0000"  >&lt;blockquote&gt;&lt;p&gt;Is the job failing due to missing dependencies&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, it fails with ClassNotFoundException. &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.hadoop.hbase.mapred.TableMapReduceUtil.addDependencyJars(jobConf)
org.apache.hadoop.hbase.mapreduce.TableMapReduceUtil.addDependencyJars(jobConf, HBaseStorageHandler.class)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This adds zookeeper, netty, guava, hadoop, hive-exec, hive-hbase-handler to tmpJars, missing hbase related classes. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I think copying really is that bad&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Agree. Just wanted quick, easy fix.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;What do you mean &quot;second method&quot;?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;In my comment above, &quot;Anyway, we can resolve this with patch1 (copy needed class list from TableMapReduceUtil) or make new Job instance and copy values from it to original JobConf&quot;. You can see it in patch3.&lt;/p&gt;</comment>
                            <comment id="13900695" author="ndimiduk" created="Thu, 13 Feb 2014 20:20:19 +0000"  >&lt;p&gt;Which version of HBase are you testing against? &lt;a href=&quot;https://github.com/apache/hbase/blob/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java#L298-L316&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mapred.TableMapReduceUtil#addDependencyJars(JobConf)&lt;/a&gt; calls the &lt;a href=&quot;https://github.com/apache/hbase/blob/0.96/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java#L586-L612&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;same method&lt;/a&gt; from the mapreduce package, which in turn adds all the hbase jars, plus the hbase dependencies you mention.&lt;/p&gt;

&lt;p&gt;ClassNotFoundException thrown at the job client or in the job? At the client means your local classpath is missing something. In the job means it wasn&apos;t packaged properly. What&apos;s the missing class/jar?&lt;/p&gt;</comment>
                            <comment id="13901173" author="navis" created="Fri, 14 Feb 2014 07:12:22 +0000"  >&lt;p&gt;Ah, you are using hbase-0.96.1, which is applied &lt;a href=&quot;https://issues.apache.org/jira/browse/HBASE-9165&quot; title=&quot;Improvements to addDependencyJars&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HBASE-9165&quot;&gt;&lt;del&gt;HBASE-9165&lt;/del&gt;&lt;/a&gt;. I got it. Hive in trunk uses hbase-0.96.0 (addHBaseDependencyJars() does not exist in it).&lt;/p&gt;

&lt;p&gt;Should we upgrade hbase to 0.96.1? I prefer to support both versions by applying patch3 but I&apos;m good with any way.&lt;/p&gt;</comment>
                            <comment id="13904670" author="ndimiduk" created="Tue, 18 Feb 2014 21:59:47 +0000"  >&lt;p&gt;With my HBase hat on, I&apos;d say the upgrade to 0.96.1 us prudent for both the API improvements and the performance improvements. Not sure how Hive folks feel about this.&lt;/p&gt;</comment>
                            <comment id="13904676" author="ndimiduk" created="Tue, 18 Feb 2014 22:04:45 +0000"  >&lt;p&gt;Even on 0.96.0, both &lt;a href=&quot;https://github.com/apache/hbase/blob/hbase-0.96.0/hbase-server/src/main/java/org/apache/hadoop/hbase/mapred/TableMapReduceUtil.java#L258-L276&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mapred.TableMapReduceUtil#addDependencyJars(JobConf)&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/hbase/blob/hbase-0.96.0/hbase-server/src/main/java/org/apache/hadoop/hbase/mapreduce/TableMapReduceUtil.java#L514-L544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;mapreduce.TableMapReduceUtil#addDependencyJars(Job)&lt;/a&gt; handle the hbase dependencies for you. I&apos;m back to not understanding what issue you&apos;re having &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13904678" author="ashutoshc" created="Tue, 18 Feb 2014 22:05:39 +0000"  >&lt;p&gt;I am also in favor of bumping HBase version. We already have code complexity supporting multiple versions of Hadoop, we don&apos;t worsen that by supporting multiple HBase version.&lt;/p&gt;</comment>
                            <comment id="13904874" author="navis" created="Wed, 19 Feb 2014 00:33:48 +0000"  >&lt;blockquote&gt;&lt;p&gt;Even on 0.96.0, both mapred.TableMapReduceUtil#addDependencyJars(JobConf) and mapreduce.TableMapReduceUtil#addDependencyJars(Job) handle the hbase dependencies for you&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Really wish to call the method but all we got is JobConf, not Job and there is no way just to wrap existing JobConf(copies in it) with Job. So in patch3, I&apos;ve create dummy Job instance to call it and copied values(in &quot;tmpJars&quot;) in it to original JobConf. I&apos;ve mentioned this once already and even quoted again as you requested explanation. &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;o.a.h.hbase.mapreduce.TableMapReduceUtil takes Job as parameter rather than JobConf&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;&quot;..or make new Job instance and copy values from it to original JobConf&quot;. You can see it in patch3.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I&apos;m ok with fixing this in anyway (upgrade hbase to 0.96.1 or applying patch3), though I prefer the later way to support hbase-0.96.0, which is still in use by many companies.&lt;/p&gt;</comment>
                            <comment id="13904894" author="ndimiduk" created="Wed, 19 Feb 2014 00:48:18 +0000"  >&lt;blockquote&gt;&lt;p&gt;all we got is JobConf, not Job&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;So why not call mapred.TableMapReduceUtil#addDependencyJars(JobConf) ? It does what you need; that&apos;s why it&apos;s there.&lt;/p&gt;</comment>
                            <comment id="13904910" author="navis" created="Wed, 19 Feb 2014 00:54:12 +0000"  >&lt;p&gt;In hbase-0.96.0, mapred.TableMapReduceUtil#addDependencyJars(JobConf) does not call &quot;org.apache.hadoop.hbase.mapreduce.TableMapReduceUtil.addHBaseDependencyJars(job)&quot; which is not exist.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void addDependencyJars(JobConf job) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    org.apache.hadoop.hbase.mapreduce.TableMapReduceUtil.addDependencyJars(
      job,
      org.apache.zookeeper.ZooKeeper.class,
      org.jboss.netty.channel.ChannelFactory.class,
      com.google.common.base.Function.class,
      com.google.protobuf.Message.class,
      job.getMapOutputKeyClass(),
      job.getMapOutputValueClass(),
      job.getOutputKeyClass(),
      job.getOutputValueClass(),
      job.getPartitionerClass(),
      job.getClass(&lt;span class=&quot;code-quote&quot;&gt;&quot;mapred.input.format.class&quot;&lt;/span&gt;, TextInputFormat.class, InputFormat.class),
      job.getClass(&lt;span class=&quot;code-quote&quot;&gt;&quot;mapred.output.format.class&quot;&lt;/span&gt;, TextOutputFormat.class, OutputFormat.class),
      job.getCombinerClass());
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Again, this only &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;adds zookeeper, netty, guava, hadoop, hive-exec, hive-hbase-handler to tmpJars, missing hbase related classes.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="13904960" author="ndimiduk" created="Wed, 19 Feb 2014 01:31:15 +0000"  >&lt;p&gt;Yes, of course; I now see the issue. My sincerest apologies for belaboring an invalid point &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;In the interest of supporting as many users as possible, patch v3 seems the most prudent approach, with a note about deferring back to HBase methods once Hive moves on to 0.98.0.&lt;/p&gt;</comment>
                            <comment id="13906161" author="ashutoshc" created="Wed, 19 Feb 2014 21:56:40 +0000"  >&lt;p&gt;Marking this as Patch Available. Lets get this in. Code changes are rather small to bump up hbase version.&lt;/p&gt;</comment>
                            <comment id="13912002" author="xuefuz" created="Tue, 25 Feb 2014 20:16:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; Could we put a close on this? I understood that patch v3 is committed to trunk. Do we still need addendum patch to be committed, in order to close this JIRA?&lt;/p&gt;</comment>
                            <comment id="13913211" author="xuefuz" created="Wed, 26 Feb 2014 17:42:00 +0000"  >&lt;p&gt;If we all agree that patch v3 is better, should we revert the following commit (which is patch v2) and commit patch v3 instead?&lt;/p&gt;

&lt;p&gt;commit 57467b4fd8cc5acb5250b635f86c3115691cf367&lt;br/&gt;
Author: Ashutosh Chauhan &amp;lt;hashutosh@apache.org&amp;gt;&lt;br/&gt;
Date:   Tue Feb 4 23:42:30 2014 +0000&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6356&quot; title=&quot;Dependency injection in hbase storage handler is broken&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6356&quot;&gt;&lt;del&gt;HIVE-6356&lt;/del&gt;&lt;/a&gt; : Dependency injection in hbase storage handler is broken (Navis v&lt;/p&gt;</comment>
                            <comment id="13913347" author="ashutoshc" created="Wed, 26 Feb 2014 19:10:17 +0000"  >&lt;p&gt;I think v3 is required in addition to v2. I am fine with committing v3 (with a comment in the code that problem is fixed in 0.96.1 and later, so those changes will not be required once Hive bumps up its hbase version).&lt;/p&gt;</comment>
                            <comment id="13913427" author="xuefuz" created="Wed, 26 Feb 2014 20:07:40 +0000"  >&lt;p&gt;Thanks for the clarification, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;. I will update the patch v3 with the necessary comments.&lt;/p&gt;</comment>
                            <comment id="13913458" author="xuefuz" created="Wed, 26 Feb 2014 20:26:55 +0000"  >&lt;p&gt;Patch #4 is basically #3 with necessary comments.&lt;/p&gt;</comment>
                            <comment id="13914141" author="navis" created="Thu, 27 Feb 2014 06:51:22 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13915598" author="hiveqa" created="Fri, 28 Feb 2014 09:34:27 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12631340/HIVE-6356.4.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12631340/HIVE-6356.4.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 5180 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hcatalog.hbase.snapshot.lock.TestWriteLock.testRun
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1551/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1551/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1551/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1551/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12631340&lt;/p&gt;</comment>
                            <comment id="13916231" author="xuefuz" created="Fri, 28 Feb 2014 19:32:29 +0000"  >&lt;p&gt;The above test seems transient. I manually re-ran it and it passed. Reattach the same patch (v4) for another run.&lt;/p&gt;</comment>
                            <comment id="13917102" author="hiveqa" created="Sat, 1 Mar 2014 15:58:12 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12631814/HIVE-6356.4.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12631814/HIVE-6356.4.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 5185 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1566/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1566/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1566/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/1566/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12631814&lt;/p&gt;</comment>
                            <comment id="13917112" author="xuefuz" created="Sat, 1 Mar 2014 16:28:48 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks to Navis, Ashutosh, et al.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12612882">HIVE-3603</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12626614" name="HIVE-6356.1.patch.txt" size="3001" author="navis" created="Mon, 3 Feb 2014 08:05:54 +0000"/>
                            <attachment id="12626785" name="HIVE-6356.2.patch.txt" size="1726" author="navis" created="Tue, 4 Feb 2014 00:09:04 +0000"/>
                            <attachment id="12628643" name="HIVE-6356.3.patch.txt" size="2052" author="navis" created="Thu, 13 Feb 2014 01:34:29 +0000"/>
                            <attachment id="12631814" name="HIVE-6356.4.patch.txt" size="2349" author="xuefuz" created="Fri, 28 Feb 2014 19:33:08 +0000"/>
                            <attachment id="12631340" name="HIVE-6356.4.patch.txt" size="2349" author="xuefuz" created="Wed, 26 Feb 2014 20:26:55 +0000"/>
                            <attachment id="12627374" name="HIVE-6356.addendum.00.patch" size="2942" author="ndimiduk" created="Thu, 6 Feb 2014 17:15:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1s067:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>371681</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>