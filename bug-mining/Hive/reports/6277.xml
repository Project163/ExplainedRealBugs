<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:02:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-17880] hive tez get error result whith using  &quot;join&quot; join two subquery</title>
                <link>https://issues.apache.org/jira/browse/HIVE-17880</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;table broadcast_time partitioned by par_date(yyyyMMdd)&lt;br/&gt;
createtime:yyyy-MM-dd HH:mm:ss&lt;br/&gt;
1,when use alias field par_date(same name with partitioned field)&lt;br/&gt;
SELECT&lt;br/&gt;
  par_date,&lt;br/&gt;
  count(1)&lt;br/&gt;
FROM&lt;br/&gt;
  (&lt;br/&gt;
    SELECT&lt;br/&gt;
      qid,&lt;br/&gt;
      substr(createtime, 1, 11) par_date&lt;br/&gt;
    FROM broadcast_time&lt;br/&gt;
    WHERE par_date = 20171023 AND qid = 1111111&lt;br/&gt;
  ) t1&lt;br/&gt;
 JOIN&lt;br/&gt;
  (&lt;br/&gt;
    SELECT qid&lt;br/&gt;
    FROM room_info&lt;br/&gt;
    WHERE par_date = 20171023&lt;br/&gt;
  ) r&lt;br/&gt;
    ON t1.qid = r.qid&lt;br/&gt;
GROUP BY par_date;&lt;br/&gt;
get reuslt:&lt;br/&gt;
20171023	39&lt;/p&gt;

&lt;p&gt;2,when use alias field new_par_date(different with partitioned field)&lt;br/&gt;
SELECT&lt;br/&gt;
  new_par_date,&lt;br/&gt;
  count(1)&lt;br/&gt;
FROM&lt;br/&gt;
  (&lt;br/&gt;
    SELECT&lt;br/&gt;
      qid,&lt;br/&gt;
      substr(createtime, 1, 11) new_par_date&lt;br/&gt;
    FROM broadcast_time&lt;br/&gt;
    WHERE par_date = 20171023 AND qid = 3015850&lt;br/&gt;
  ) t1&lt;br/&gt;
 JOIN&lt;br/&gt;
  (&lt;br/&gt;
    SELECT qid&lt;br/&gt;
    FROM room_info&lt;br/&gt;
    WHERE par_date = 20171023&lt;br/&gt;
  ) r&lt;br/&gt;
    ON t1.qid = r.qid&lt;br/&gt;
GROUP BY new_par_date;&lt;br/&gt;
get result:&lt;br/&gt;
2015-10-19 	1&lt;br/&gt;
2015-10-20 	5&lt;br/&gt;
2015-10-21 	3&lt;br/&gt;
2015-10-25 	1&lt;br/&gt;
2015-10-31 	1&lt;br/&gt;
2015-11-21 	2&lt;br/&gt;
2015-11-24 	2&lt;br/&gt;
2016-02-29 	1&lt;br/&gt;
2016-03-01 	2&lt;br/&gt;
2016-03-06 	1&lt;br/&gt;
2016-03-11 	1&lt;br/&gt;
2016-03-15 	2&lt;br/&gt;
2016-03-16 	1&lt;br/&gt;
2016-03-17 	1&lt;br/&gt;
2016-03-21 	1&lt;br/&gt;
2016-04-16 	7&lt;br/&gt;
2016-05-07 	2&lt;br/&gt;
2016-09-24 	1&lt;br/&gt;
2017-05-12 	2&lt;br/&gt;
2017-06-19 	1&lt;br/&gt;
2017-06-20 	1&lt;/p&gt;</description>
                <environment></environment>
        <key id="13111620">HIVE-17880</key>
            <summary>hive tez get error result whith using  &quot;join&quot; join two subquery</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="qf@1314">&#26446;&#24320;&#38738;</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Oct 2017 06:38:36 +0000</created>
                <updated>Mon, 30 Oct 2017 14:58:11 +0000</updated>
                                                                                <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16225072" author="kgyrtkirk" created="Mon, 30 Oct 2017 14:58:11 +0000"  >
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=qf%401314&quot; class=&quot;user-hover&quot; rel=&quot;qf@1314&quot;&gt;qf@1314&lt;/a&gt; I was unable to reproduce your problem on current master; could you give the schemas of the tables; or try executing the following example; (note: it drops the tables; and recreates them)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;-- &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; broadcast_time partitioned &lt;span class=&quot;code-keyword&quot;&gt;by&lt;/span&gt; par_date(yyyyMMdd)
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;-- createtime:yyyy-MM-dd HH:mm:ss
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;-- 1,&lt;span class=&quot;code-keyword&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;alias&lt;/span&gt; field par_date(same &lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;with&lt;/span&gt; partitioned field)
&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;exists&lt;/span&gt; broadcast_time;
&lt;span class=&quot;code-keyword&quot;&gt;drop&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;exists&lt;/span&gt; room_info;

&lt;span class=&quot;code-comment&quot;&gt;-- &lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; broadcast_time (createtime &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;,par_date &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;,qid &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;);
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; broadcast_time (createtime &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;,qid &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;) partitioned &lt;span class=&quot;code-keyword&quot;&gt;by&lt;/span&gt; (par_date &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;create&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; room_info (par_date &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;,qid &lt;span class=&quot;code-keyword&quot;&gt;string&lt;/span&gt;);

&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;into&lt;/span&gt; room_info &lt;span class=&quot;code-keyword&quot;&gt;values&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;20171023&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;13&apos;&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;into&lt;/span&gt; room_info &lt;span class=&quot;code-keyword&quot;&gt;values&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&apos;20171022&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;13&apos;&lt;/span&gt;);

&lt;span class=&quot;code-keyword&quot;&gt;insert&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;into&lt;/span&gt; broadcast_time &lt;span class=&quot;code-keyword&quot;&gt;partition&lt;/span&gt; (par_date=&lt;span class=&quot;code-quote&quot;&gt;&apos;20171023&apos;&lt;/span&gt;) &lt;span class=&quot;code-keyword&quot;&gt;values&lt;/span&gt;
	(&lt;span class=&quot;code-quote&quot;&gt;&apos;20171023 &lt;span class=&quot;code-keyword&quot;&gt;A&lt;/span&gt;&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;13&apos;&lt;/span&gt;),
	(&lt;span class=&quot;code-quote&quot;&gt;&apos;20171023 B&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;13&apos;&lt;/span&gt;),
	(&lt;span class=&quot;code-quote&quot;&gt;&apos;20171023 &lt;span class=&quot;code-keyword&quot;&gt;C&lt;/span&gt;&apos;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&apos;13&apos;&lt;/span&gt;);

&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt;
  par_date,
  &lt;span class=&quot;code-keyword&quot;&gt;count&lt;/span&gt;(1)
&lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt;
  (
    &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt;
      qid,
      substr(createtime, 1, 11) par_date
    &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; broadcast_time
    &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; par_date = 20171023 &lt;span class=&quot;code-keyword&quot;&gt;AND&lt;/span&gt; qid = 13
  ) t1
 &lt;span class=&quot;code-keyword&quot;&gt;JOIN&lt;/span&gt;
  (
    &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; qid
    &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; room_info
    &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; par_date = 20171023
  ) r
    &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; t1.qid = r.qid
&lt;span class=&quot;code-keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; par_date;

&lt;span class=&quot;code-comment&quot;&gt;-- &lt;span class=&quot;code-keyword&quot;&gt;get&lt;/span&gt; reuslt:
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;-- 20171023	39
&lt;/span&gt;
&lt;span class=&quot;code-comment&quot;&gt;-- 2,&lt;span class=&quot;code-keyword&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;alias&lt;/span&gt; field new_par_date(different &lt;span class=&quot;code-keyword&quot;&gt;with&lt;/span&gt; partitioned field)
&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt;
  new_par_date,
  &lt;span class=&quot;code-keyword&quot;&gt;count&lt;/span&gt;(1)
&lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt;
  (
    &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt;
      qid,
      substr(createtime, 1, 11) new_par_date
    &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; broadcast_time
    &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; par_date = 20171023 &lt;span class=&quot;code-keyword&quot;&gt;AND&lt;/span&gt; qid = 13
  ) t1
 &lt;span class=&quot;code-keyword&quot;&gt;JOIN&lt;/span&gt;
  (
    &lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; qid
    &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; room_info
    &lt;span class=&quot;code-keyword&quot;&gt;WHERE&lt;/span&gt; par_date = 20171023
  ) r
    &lt;span class=&quot;code-keyword&quot;&gt;ON&lt;/span&gt; t1.qid = r.qid
&lt;span class=&quot;code-keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;BY&lt;/span&gt; new_par_date;

&lt;span class=&quot;code-comment&quot;&gt;-- &lt;span class=&quot;code-keyword&quot;&gt;more&lt;/span&gt; results :)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 3 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3lmkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>hive hdfs yarn versin:2.3.4.0-3485&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>