<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:50:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-86] drop table should not delete data for external tables</title>
                <link>https://issues.apache.org/jira/browse/HIVE-86</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We should not delete data for external tables.  &lt;/p&gt;</description>
                <environment></environment>
        <key id="12409464">HIVE-86</key>
            <summary>drop table should not delete data for external tables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Sat, 29 Nov 2008 00:01:21 +0000</created>
                <updated>Sat, 17 Dec 2011 00:08:55 +0000</updated>
                            <resolved>Wed, 3 Dec 2008 23:19:27 +0000</resolved>
                                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12652057" author="athusoo" created="Mon, 1 Dec 2008 16:59:07 +0000"  >&lt;p&gt;Assigning component.&lt;/p&gt;</comment>
                            <comment id="12652421" author="johanoskarsson" created="Tue, 2 Dec 2008 16:38:02 +0000"  >&lt;p&gt;A first attempt at a patch for this issue. Please review and point me in the right direction. Since I haven&apos;t worked much with Hive I&apos;m having trouble seeing how the different components work together. It seems like there are two places where the data in a dropped table can be deleted, once in RWTable.java and one in HiveMetaStoreClient.java. Any reason for this duplication?&lt;br/&gt;
What role does the different *Store objects in the metastore java dir have?&lt;/p&gt;

&lt;p&gt;This patch does not make sure that a partition drop doesn&apos;t delete the original data. Shall I open up a new issue for that?&lt;/p&gt;</comment>
                            <comment id="12652660" author="jsensarma" created="Wed, 3 Dec 2008 02:57:50 +0000"  >&lt;p&gt;thx! Patch looks pretty good.&lt;/p&gt;

&lt;p&gt;Couple of concerns:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;i think we can just have one version of the isExternal command. The ql/.../Table.java has a metastore.api.Table object - and we can have an isExternal definition over that which can be shared in both places.&lt;/li&gt;
	&lt;li&gt;other concern is that the isExternal setting is being checked by the client side code. it seems to me that the server side should be enforcing this setting (otherwise any thrift client can come and delete data based on the thrift api regardless of the external setting). So we should (as a safety measure) be enforcing this check in HiveMetaStore.java:drop_table as well (regardless of the delete_data setting.)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;regarding RWTable versus HiveMetaStoreClient - sorry for all the confusion. The thing is that there are two implementations of the MetaStore available - one db backed which is the new one that we use normally. There is an old one that&apos;s file based and RWTable is used by that one (AFAIK).&lt;/p&gt;</comment>
                            <comment id="12652751" author="johanoskarsson" created="Wed, 3 Dec 2008 12:06:25 +0000"  >&lt;p&gt;I&apos;ve updated the patch to do all the checks server side as suggested, much cleaner.&lt;br/&gt;
The reason I didn&apos;t override the deleteData boolean in the previous patch is that I thought it might be useful if someone wanted to force delete an external table for whatever reason. It&apos;s probably better to be safe then sorry though.&lt;br/&gt;
I left in the changes in RWTable, but I assume those file based metastore will be removed eventually? It would help reduce confusion. Perhaps open a ticket for it?&lt;/p&gt;</comment>
                            <comment id="12653000" author="jsensarma" created="Wed, 3 Dec 2008 22:11:40 +0000"  >&lt;p&gt;+1. looks good.&lt;/p&gt;

&lt;p&gt;Ashish or Zheng - can you please commit this?&lt;/p&gt;</comment>
                            <comment id="12653013" author="zshao" created="Wed, 3 Dec 2008 22:36:42 +0000"  >&lt;p&gt;Applied the patch. Rerunning the test now. Will commit both internally and in apache.&lt;/p&gt;</comment>
                            <comment id="12653042" author="zshao" created="Wed, 3 Dec 2008 23:18:49 +0000"  >&lt;p&gt;Committed. svn revision 723124.&lt;/p&gt;</comment>
                            <comment id="12653043" author="zshao" created="Wed, 3 Dec 2008 23:19:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-86&quot; title=&quot;drop table should not delete data for external tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-86&quot;&gt;&lt;del&gt;HIVE-86&lt;/del&gt;&lt;/a&gt;. Drop table should not delete data for external tables.&lt;br/&gt;
(Johan Oskarsson through zshao)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12395179" name="HIVE-86.patch" size="7778" author="johanoskarsson" created="Wed, 3 Dec 2008 12:06:25 +0000"/>
                            <attachment id="12395102" name="HIVE-86.patch" size="7256" author="johanoskarsson" created="Tue, 2 Dec 2008 16:38:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 51 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l7rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>121909</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>