<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:25:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-27951] hcatalog dynamic partitioning fails with partition already exist error when exist parent partitions path</title>
                <link>https://issues.apache.org/jira/browse/HIVE-27951</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;if a table have multiple partitions (part1=x1, part2=y1), when insert into a new partition(part1=x1, part2=y2) hcatalog FileOutputCommitterContainer throws path already exists error&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;reproduce:&lt;/p&gt;

&lt;p&gt;create table source(id int, part1 string, part2 string);&lt;/p&gt;

&lt;p&gt;create table target(id int) partitioned by (part1 string, part2 string)&lt;/p&gt;

&lt;p&gt;insert into table source values (1, &quot;x1&quot;, &quot;y1&quot;), (2, &quot;x1&quot;, &quot;y2&quot;);&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;pig -useHcatalog&lt;/p&gt;

&lt;p&gt;A = load &apos;source&apos; using org.apache.hive.hcatalog.pig.HCatLoader();&lt;br/&gt;
B = filter A by (part2 == &apos;y1&apos;);&lt;/p&gt;

&lt;p&gt;// following succeeds&lt;br/&gt;
store B into &apos;target&apos; USING org.apache.hive.hcatalog.pig.HCatStorer();&lt;/p&gt;

&lt;p&gt;//following fails with duplicate publishing error&lt;/p&gt;

&lt;p&gt;C = filter A by (part2 == &apos;y2&apos;);&lt;br/&gt;
store C into &apos;target&apos; USING org.apache.hive.hcatalog.pig.HCatStorer();&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;```&lt;br/&gt;
Partition already present with given partition key values : Data already exists in /user/hive/warehouse/target_data/part1=x1, duplicate publish not possible.&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputCommitter.commitJob(PigOutputCommitter.java:243)&lt;br/&gt;
at org.apache.hadoop.mapreduce.v2.app.commit.CommitterEventHandler$EventProcessor.handleJobCommit(CommitterEventHandler.java:286)&lt;br/&gt;
&#160;&lt;br/&gt;
Caused by: org.apache.hive.hcatalog.common.HCatException : 2002 : Partition already present with given partition key values : Data already exists in /user/hive/warehouse/target_data/part1=x1, duplicate publish not possible.&lt;br/&gt;
at org.apache.hive.hcatalog.mapreduce.FileOutputCommitterContainer.moveTaskOutputs(FileOutputCommitterContainer.java:564)&lt;br/&gt;
at org.apache.hive.hcatalog.mapreduce.FileOutputCommitterContainer.registerPartitions(FileOutputCommitterContainer.java:949)&lt;br/&gt;
at org.apache.hive.hcatalog.mapreduce.FileOutputCommitterContainer.commitJob(FileOutputCommitterContainer.java:273)&lt;br/&gt;
at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigOutputCommitter.commitJob(PigOutputCommitter.java:241)&lt;br/&gt;
```&lt;/p&gt;</description>
                <environment></environment>
        <key id="13561471">HIVE-27951</key>
            <summary>hcatalog dynamic partitioning fails with partition already exist error when exist parent partitions path</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yigress">Yi Zhang</assignee>
                                    <reporter username="yigress">Yi Zhang</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 11 Dec 2023 23:41:00 +0000</created>
                <updated>Fri, 29 Mar 2024 17:50:05 +0000</updated>
                            <resolved>Fri, 12 Jan 2024 21:04:34 +0000</resolved>
                                    <version>4.0.0-beta-1</version>
                                    <fixVersion>4.0.0</fixVersion>
                                    <component>HCatalog</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17803385" author="abstractdog" created="Fri, 5 Jan 2024 02:50:01 +0000"  >&lt;p&gt;this change has broken precommit testing as described here: &lt;a href=&quot;https://github.com/apache/hive/pull/4937#issuecomment-1878050097&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/pull/4937#issuecomment-1878050097&lt;/a&gt;&lt;br/&gt;
reverted&lt;/p&gt;</comment>
                            <comment id="17806188" author="abstractdog" created="Fri, 12 Jan 2024 21:04:55 +0000"  >&lt;p&gt;fixed PR is merged: &lt;a href=&quot;https://github.com/apache/hive/pull/4979&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/pull/4979&lt;/a&gt;&lt;br/&gt;
thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yigress&quot; class=&quot;user-hover&quot; rel=&quot;yigress&quot;&gt;yigress&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1m760:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>