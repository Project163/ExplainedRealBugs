<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:26:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-28442] Inconsistency in schema on tables TAB_COL_STATS, PART_COL_STATS, KEY_CONSTRAINTS and SCHEDULED_QUERIES on SYSDB after upgrade from 3.1.0 to 4.1.0</title>
                <link>https://issues.apache.org/jira/browse/HIVE-28442</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Fresh Install: InitSchema&lt;/p&gt;

&lt;p&gt;&lt;b&gt;1. Tables SYSDB.TAB_COL_STATS and SYSDB.PART_COL_STATS&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070823/13070823_image-2024-08-12-13-22-25-517.png&quot; height=&quot;241&quot; width=&quot;399&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Select * from the above tables:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070822/13070822_image-2024-08-12-13-23-29-221.png&quot; height=&quot;265&quot; width=&quot;439&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Upgrade Hive Schema from 3.2.0 to 4.1.0:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070821/13070821_image-2024-08-12-13-24-29-328.png&quot; height=&quot;285&quot; width=&quot;466&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Select * on the tables fails post upgrade&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070820/13070820_image-2024-08-12-13-25-25-731.png&quot; height=&quot;185&quot; width=&quot;416&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Inconsistency in columns:&lt;/p&gt;

&lt;p&gt;&#160; &#160;1. Missing column Engine in upgrade Path.&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160;Looks like missed from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22046&quot; title=&quot;Differentiate among column stats computed by different engines&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22046&quot;&gt;&lt;del&gt;HIVE-22046&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160; &#160;2. Redundant columns which got removed as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-27725&quot; title=&quot;Remove redundant columns in TAB_COL_STATS and PART_COL_STATS&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-27725&quot;&gt;&lt;del&gt;HIVE-27725&lt;/del&gt;&lt;/a&gt; is not handled in the upgrade path&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160;TAB_COL_STATS&lt;/tt&gt; - &lt;tt&gt;DB_NAME&lt;/tt&gt;&#160;and&#160;&lt;tt&gt;TABLE_NAME&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&#160; &#160;PART_COL_STATS&lt;/tt&gt; - &lt;tt&gt;DB_NAME&lt;/tt&gt;,&#160;&lt;tt&gt;TABLE_NAME&lt;/tt&gt;&#160;and&#160;&lt;tt&gt;PARTITION_NAME&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;2. Table SYSDB.SCHEDULED_QUERIES&lt;/b&gt;&#160;**&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160;- Missing column&#160; ACTIVE_EXECUTION_ID - Looks like missed from&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22872&quot; title=&quot;Support multiple executors for scheduled queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22872&quot;&gt;&lt;del&gt;HIVE-22872&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;After Upgrade:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070882/13070882_image-2024-08-14-18-59-57-815.png&quot; height=&quot;260&quot; width=&quot;541&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;Fresh install:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070883/13070883_image-2024-08-14-19-00-30-680.png&quot; height=&quot;259&quot; width=&quot;539&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;3. SYSDB.KEY_CONSTRAINTS&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Missing column constraint&#160;PARENT_TBL_ID - Looks like missed in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-22728&quot; title=&quot;Limit the scope of uniqueness of constraint name to table&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-22728&quot;&gt;&lt;del&gt;HIVE-22728&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Fresh Path:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070884/13070884_image-2024-08-14-19-04-16-332.png&quot; height=&quot;437&quot; width=&quot;628&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Upgrade Path:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13070885/13070885_image-2024-08-14-19-04-55-550.png&quot; height=&quot;383&quot; width=&quot;672&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13588566">HIVE-28442</key>
            <summary>Inconsistency in schema on tables TAB_COL_STATS, PART_COL_STATS, KEY_CONSTRAINTS and SCHEDULED_QUERIES on SYSDB after upgrade from 3.1.0 to 4.1.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Indhumathi27">Indhumathi Muthumurugesh</assignee>
                                    <reporter username="Indhumathi27">Indhumathi Muthumurugesh</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 12 Aug 2024 07:56:52 +0000</created>
                <updated>Tue, 29 Jul 2025 14:51:49 +0000</updated>
                            <resolved>Fri, 23 Aug 2024 02:35:37 +0000</resolved>
                                                    <fixVersion>4.1.0</fixVersion>
                                    <component>Standalone Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17876157" author="zhangbutao" created="Fri, 23 Aug 2024 02:35:37 +0000"  >&lt;p&gt;Merged into master branch!&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Indhumathi27&quot; class=&quot;user-hover&quot; rel=&quot;Indhumathi27&quot;&gt;Indhumathi27&lt;/a&gt; for the patch!&lt;/p&gt;

&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kokila19&quot; class=&quot;user-hover&quot; rel=&quot;kokila19&quot;&gt;kokila19&lt;/a&gt; for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13070823" name="image-2024-08-12-13-22-25-517.png" size="855051" author="Indhumathi27" created="Mon, 12 Aug 2024 07:52:27 +0000"/>
                            <attachment id="13070822" name="image-2024-08-12-13-23-29-221.png" size="1226843" author="Indhumathi27" created="Mon, 12 Aug 2024 07:53:31 +0000"/>
                            <attachment id="13070821" name="image-2024-08-12-13-24-29-328.png" size="837522" author="Indhumathi27" created="Mon, 12 Aug 2024 07:54:30 +0000"/>
                            <attachment id="13070820" name="image-2024-08-12-13-25-25-731.png" size="837999" author="Indhumathi27" created="Mon, 12 Aug 2024 07:55:27 +0000"/>
                            <attachment id="13070882" name="image-2024-08-14-18-59-57-815.png" size="238095" author="Indhumathi27" created="Wed, 14 Aug 2024 13:29:59 +0000"/>
                            <attachment id="13070883" name="image-2024-08-14-19-00-30-680.png" size="238043" author="Indhumathi27" created="Wed, 14 Aug 2024 13:30:31 +0000"/>
                            <attachment id="13070884" name="image-2024-08-14-19-04-16-332.png" size="310704" author="Indhumathi27" created="Wed, 14 Aug 2024 13:34:18 +0000"/>
                            <attachment id="13070885" name="image-2024-08-14-19-04-55-550.png" size="247039" author="Indhumathi27" created="Wed, 14 Aug 2024 13:34:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 11 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qtag:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>