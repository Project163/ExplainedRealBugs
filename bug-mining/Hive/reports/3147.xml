<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:30:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-9513] NULL POINTER EXCEPTION</title>
                <link>https://issues.apache.org/jira/browse/HIVE-9513</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;NPE duting parsing  of :&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select * from (
     select * from ( select 1 as id , &quot;foo&quot; as str_1 from staging.dual ) f
  union	all
     select * from ( select 2 as id , &quot;bar&quot; as str_2 from staging.dual ) g
) e ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12771150">HIVE-9513</key>
            <summary>NULL POINTER EXCEPTION</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="ErwanMAS">ErwanMAS</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Jan 2015 22:09:34 +0000</created>
                <updated>Mon, 18 May 2015 19:50:24 +0000</updated>
                            <resolved>Sat, 14 Feb 2015 20:13:02 +0000</resolved>
                                    <version>0.12.0</version>
                    <version>0.13.0</version>
                    <version>0.13.1</version>
                    <version>0.14.0</version>
                    <version>1.0.0</version>
                    <version>1.1.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Query Planning</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14297798" author="erwanmas" created="Thu, 29 Jan 2015 22:11:59 +0000"  >&lt;p&gt;The trace :&lt;/p&gt;

&lt;p&gt;2015-01-29 16:07:15,321 ERROR ql.Driver (SessionState.java:printError(547)) - FAILED: NullPointerException null&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.generateErrorMessage(SemanticAnalyzer.java:547)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genUnionPlan(SemanticAnalyzer.java:8331)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:8897)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.genPlan(SemanticAnalyzer.java:8912)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:9272)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:327)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:427)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:323)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compileInternal(Driver.java:980)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1045)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:916)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:906)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:423)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:793)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:686)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:625)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:212)&lt;/p&gt;</comment>
                            <comment id="14297833" author="erwanmas" created="Thu, 29 Jan 2015 22:41:41 +0000"  >&lt;p&gt;in 0.14 we have &lt;br/&gt;
   FAILED: SemanticException The abstract syntax tree is null &lt;br/&gt;
or&lt;br/&gt;
FAILED: SemanticException 4:36 Schema of both sides of union should match. e-subquery2 does not have the field dummyfoo. Error encountered near token &apos;bar&apos;&lt;/p&gt;


&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;create table foo ( dummyfoo string ) ;
create table bar ( dummybar string ) ;

Version1 :

select * from (
     select * from ( select 1 as id , dummyfoo from foo ) f
  union all
     select * from ( select 2 as id , dummybar from bar ) g
) e ;

Version 2 : 
select * from (
     select 1 as id , dummyfoo from foo	f
  union all
     select 2 as id , dummybar from bar g
) e ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


</comment>
                            <comment id="14298417" author="hiveqa" created="Fri, 30 Jan 2015 09:44:22 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12695424/HIVE-9513.1.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12695424/HIVE-9513.1.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 6 failed/errored test(s), 7411 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_histogram_numeric
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_udaf_percentile_approx_23
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_union2
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_union3
org.apache.hive.hcatalog.templeton.TestWebHCatE2e.getHiveVersion
org.apache.hive.spark.client.TestSparkClient.testJobSubmission
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2581/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2581/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2581/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2581/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2581/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2581/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 6 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12695424 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14311955" author="hiveqa" created="Mon, 9 Feb 2015 09:17:41 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12697376/HIVE-9513.2.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12697376/HIVE-9513.2.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 7522 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_timestamp_funcs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2716/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2716/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2716/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2716/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2716/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2716/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12697376 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14319562" author="ashutoshc" created="Fri, 13 Feb 2015 04:36:09 +0000"  >&lt;p&gt;I tried query as posted and it failed to compile on various DBs (except mysql) :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table staging (a &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;, b &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;);
select * from (
     select * from ( select 1 as id , &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt; as str_1 from staging ) f
  union	all
     select * from ( select 2 as id , &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt; as str_2 from staging ) g
) e ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
	&lt;li&gt;Postgres 9.3 : ERROR: column &quot;foo&quot; does not exist: select * from ( select * from ( select 1 as id , &quot;foo&quot; as str_1 from staging ) f union	all select * from ( select 2 as id , &quot;bar&quot; as str_2 from staging ) g ) e&lt;/li&gt;
	&lt;li&gt;Oracle 11g : ORA-00904: &quot;foo&quot;: invalid identifier : select * from ( select * from ( select 1 as id , &quot;foo&quot; as str_1 from staging ) f union	all select * from ( select 2 as id , &quot;bar&quot; as str_2 from staging ) g ) e&lt;/li&gt;
	&lt;li&gt;MS-SQL 2012 : Invalid column name &apos;foo&apos;.: select * from ( select * from ( select 1 as id , &quot;foo&quot; as str_1 from staging ) f union	all select * from ( select 2 as id , &quot;bar&quot; as str_2 from staging ) g ) e&lt;/li&gt;
	&lt;li&gt;MySQL 5.6 :  &amp;lt;Success with EmptyRS&amp;gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Given above, we should check SQL standard, should allow this behavior only if standard permits.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ErwanMAS&quot; class=&quot;user-hover&quot; rel=&quot;ErwanMAS&quot;&gt;ErwanMAS&lt;/a&gt;  Are you migrating some workload to Hive. In that case, on which system you were able to run this query? Else, you were simply playing with Hive.&lt;/p&gt;</comment>
                            <comment id="14319569" author="ashutoshc" created="Fri, 13 Feb 2015 04:43:42 +0000"  >&lt;p&gt;Interestingly, following succeeded for all 4 DB engines:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table foo ( dummyfoo &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ) ;
create table bar ( dummybar &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; ) ;

select * from (
     select * from ( select 1 as id , dummyfoo from foo ) f
  union all
     select * from ( select 2 as id , dummybar from bar ) g
) e ;

select * from (
     select 1 as id , dummyfoo from foo	f
  union all
     select 2 as id , dummybar from bar g
) e ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;This is from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ErwanMAS&quot; class=&quot;user-hover&quot; rel=&quot;ErwanMAS&quot;&gt;ErwanMAS&lt;/a&gt; example in comments.&lt;/p&gt;</comment>
                            <comment id="14319572" author="ashutoshc" created="Fri, 13 Feb 2015 04:48:10 +0000"  >&lt;p&gt;Aah.. I see, its about quoting constant column values, not union schema. Following works in all 4:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from (
     select * from ( select 1 as id , &lt;span class=&quot;code-quote&quot;&gt;&apos;foo&apos;&lt;/span&gt; as str_1 from staging ) f
  union	all
     select * from ( select 2 as id , &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt; as str_2 from staging ) g
) e ;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note &apos;foo&apos; vs &quot;foo&quot; in this and previous example.&lt;/p&gt;</comment>
                            <comment id="14319573" author="ashutoshc" created="Fri, 13 Feb 2015 04:49:03 +0000"  >&lt;p&gt;Since in Hive we allow quoting by &quot; as in mysql, I think we should allow this. Looking into patch now.&lt;/p&gt;</comment>
                            <comment id="14319574" author="ashutoshc" created="Fri, 13 Feb 2015 04:50:48 +0000"  >&lt;p&gt;LGTM &lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="14321681" author="ashutoshc" created="Sat, 14 Feb 2015 20:13:02 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="14548735" author="sushanth" created="Mon, 18 May 2015 19:50:24 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12695424" name="HIVE-9513.1.patch.txt" size="11284" author="navis" created="Fri, 30 Jan 2015 01:44:14 +0000"/>
                            <attachment id="12697376" name="HIVE-9513.2.patch.txt" size="14216" author="navis" created="Mon, 9 Feb 2015 01:52:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24z7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>