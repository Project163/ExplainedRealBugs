<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:04:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3717] Hive won&apos;t compile with -Dhadoop.mr.rev=20S</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3717</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;ant -Dhadoop.mr.rev=20S clean package&lt;/p&gt;

&lt;p&gt;fails with: &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;compile:
     [echo] Project: ql
    [javac] Compiling 744 source files to /root/hive/build/ql/classes
    [javac] /root/hive/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFJson.java:67: cannot find symbol
    [javac] symbol  : variable ALLOW_UNQUOTED_CONTROL_CHARS
    [javac] location: class org.codehaus.jackson.JsonParser.Feature
    [javac]     JSON_FACTORY.enable(Feature.ALLOW_UNQUOTED_CONTROL_CHARS);
    [javac]                                ^
    [javac] /root/hive/ql/src/java/org/apache/hadoop/hive/ql/udf/UDFJson.java:158: cannot find symbol
    [javac] symbol  : method writeValueAsString(java.lang.Object)
    [javac] location: class org.codehaus.jackson.map.ObjectMapper
    [javac]         result.set(MAPPER.writeValueAsString(extractObject));
    [javac]                          ^
    [javac] /root/hive/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFJSONTuple.java:59: cannot find symbol
    [javac] symbol  : variable ALLOW_UNQUOTED_CONTROL_CHARS
    [javac] location: class org.codehaus.jackson.JsonParser.Feature
    [javac]     JSON_FACTORY.enable(Feature.ALLOW_UNQUOTED_CONTROL_CHARS);
    [javac]                                ^
    [javac] /root/hive/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFJSONTuple.java:189: cannot find symbol
    [javac] symbol  : method writeValueAsString(java.lang.Object)
    [javac] location: class org.codehaus.jackson.map.ObjectMapper
    [javac]           retCols[i].set(MAPPER.writeValueAsString(extractObject));
    [javac]                                ^
    [javac] Note: Some input files use or override a deprecated API.
    [javac] Note: Recompile with -Xlint:deprecation for details.
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 4 errors
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;According to &lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-7470&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HADOOP-7470&lt;/a&gt; hadoop 1.x has been upgraded to jackson 1.8.8 but the POM file still specifies jackson 1.0.1 which doesn&apos;t work for hive (doesn&apos;t have the ALLOW_UNQUOTED_CONTROL_CHARS).&lt;/p&gt;

&lt;p&gt;The POM for hadoop 2.0.0-alpha (-Dhadoop.mr.rev=23) has the right dependency, hadoop 0.20.2 (-Dhadoop.mr.rev=20) doesn&apos;t depend on jackson.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12616469">HIVE-3717</key>
            <summary>Hive won&apos;t compile with -Dhadoop.mr.rev=20S</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Nov 2012 20:25:05 +0000</created>
                <updated>Thu, 16 May 2013 21:10:59 +0000</updated>
                            <resolved>Tue, 12 Mar 2013 14:49:36 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Build Infrastructure</component>
                    <component>Shims</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13499123" author="hagleitn" created="Fri, 16 Nov 2012 20:28:34 +0000"  >&lt;p&gt;The patch follows some other examples in the ivy config to not download the hadoop 1.x jackson dependency. That let&apos;s you compile hive against 20S.&lt;/p&gt;

&lt;p&gt;The real fix will be to update the POM file for hadoop core though.&lt;/p&gt;</comment>
                            <comment id="13527315" author="ashutoshc" created="Sun, 9 Dec 2012 01:10:21 +0000"  >&lt;blockquote&gt;&lt;p&gt;The real fix will be to update the POM file for hadoop core though.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;I tested with latest released hadoop 1.1.1 and I am able to compile fine. Looks, like pom file bug of hadoop is taken care of in 1.1.1 release. So, I suggest to resolve this as won&apos;t fix and recommend folks to compile hadoop with 1.1.1&lt;/p&gt;</comment>
                            <comment id="13545338" author="hagleitn" created="Sun, 6 Jan 2013 07:46:34 +0000"  >&lt;p&gt;More dependency fixes to compile and run tests with 20S (hadoop 1.0.0). Agreed this won&apos;t be necessary when 1.1.2 becomes available (fixes all the dependency issues). However, 1.1.2 isn&apos;t out yet and 1.1.1 is being replaced by 1.1.2 (major bug).&lt;/p&gt;</comment>
                            <comment id="13595235" author="hagleitn" created="Wed, 6 Mar 2013 22:54:07 +0000"  >&lt;p&gt;The day has come. 1.1.2 is out and hive will compile against it without any tweaks to the POM/ivy files.&lt;/p&gt;</comment>
                            <comment id="13595274" author="ashutoshc" created="Wed, 6 Mar 2013 23:26:54 +0000"  >&lt;p&gt;Wuhoo.. finally.. &lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="13595336" author="ashutoshc" created="Thu, 7 Mar 2013 00:18:03 +0000"  >&lt;p&gt;TestMinimrCliDriver which used to fail earlier is passing now. Thats cool. I think we should also set &lt;tt&gt;hadoop.mr.rev&lt;/tt&gt; to 20S&lt;/p&gt;</comment>
                            <comment id="13595380" author="hagleitn" created="Thu, 7 Mar 2013 01:06:26 +0000"  >&lt;p&gt;Fixed Ashutosh&apos; comment.&lt;/p&gt;</comment>
                            <comment id="13600079" author="ashutoshc" created="Tue, 12 Mar 2013 14:49:36 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Gunther!&lt;/p&gt;</comment>
                            <comment id="13601263" author="hudson" created="Wed, 13 Mar 2013 15:46:42 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2013 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2013/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2013/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3717&quot; title=&quot;Hive won&amp;#39;t compile with -Dhadoop.mr.rev=20S&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3717&quot;&gt;&lt;del&gt;HIVE-3717&lt;/del&gt;&lt;/a&gt; : Hive wont compile with -Dhadoop.mr.rev=20S (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1455560)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1455560&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1455560&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/archive_excludeHadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/auto_join14.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/auto_join14_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ctas.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ctas_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/input12.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/input12_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/join14.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/join14_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/auto_join14.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/auto_join14_hadoop20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ctas_hadoop20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input12.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input12_hadoop20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join14.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join14_hadoop20.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623048" author="hudson" created="Thu, 4 Apr 2013 23:39:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #138 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3717&quot; title=&quot;Hive won&amp;#39;t compile with -Dhadoop.mr.rev=20S&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3717&quot;&gt;&lt;del&gt;HIVE-3717&lt;/del&gt;&lt;/a&gt; : Hive wont compile with -Dhadoop.mr.rev=20S (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1455560)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1455560&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1455560&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/archive_excludeHadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/auto_join14.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/auto_join14_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ctas.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ctas_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/input12.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/input12_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/join14.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/join14_hadoop20.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/auto_join14.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/auto_join14_hadoop20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ctas_hadoop20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input12.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/input12_hadoop20.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join14.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/join14_hadoop20.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12616499">HADOOP-9055</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12553831" name="HIVE-3717.1-1410543.txt" size="1590" author="hagleitn" created="Fri, 16 Nov 2012 20:28:34 +0000"/>
                            <attachment id="12563465" name="HIVE-3717.2.patch" size="4594" author="hagleitn" created="Sun, 6 Jan 2013 07:46:34 +0000"/>
                            <attachment id="12572425" name="HIVE-3717.3.patch" size="376" author="hagleitn" created="Wed, 6 Mar 2013 22:54:07 +0000"/>
                            <attachment id="12572449" name="HIVE-3717.4.patch" size="646" author="hagleitn" created="Thu, 7 Mar 2013 01:06:26 +0000"/>
                            <attachment id="12573226" name="HIVE-3717.5.patch" size="22365" author="hagleitn" created="Tue, 12 Mar 2013 01:30:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>258334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0krgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>119267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>