<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:25:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8340] Windows: HiveServer2 service doesn&apos;t stop backend jvm process, which prevents follow-up service start.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8340</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;On stopping the HS2 service from the services tab, it only kills the root process and does not kill the child java process. As a result resources are not freed and this throws an error on restarting from command line.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows&lt;/p&gt;</environment>
        <key id="12745780">HIVE-8340</key>
            <summary>Windows: HiveServer2 service doesn&apos;t stop backend jvm process, which prevents follow-up service start.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xiaobingo">Xiaobing Zhou</assignee>
                                    <reporter username="xiaobingo">Xiaobing Zhou</reporter>
                        <labels>
                            <label>TODOC14</label>
                    </labels>
                <created>Fri, 3 Oct 2014 17:52:15 +0000</created>
                <updated>Sat, 24 Jan 2015 10:28:40 +0000</updated>
                            <resolved>Mon, 6 Oct 2014 17:44:19 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14158281" author="xiaobingo" created="Fri, 3 Oct 2014 18:19:02 +0000"  >&lt;p&gt;Here are comments years ago to explain why the grand-children process is not killed(&lt;a href=&quot;http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4770092&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugs.java.com/bugdatabase/view_bug.do?bug_id=4770092&lt;/a&gt;), but I guess there should be some fixes, I will dig more.&lt;br/&gt;
The following excellent SDN comment explains what&apos;s going on:&lt;br/&gt;
---------------------------------------------------------------------&lt;br/&gt;
The fundamental problem here is that, unlike Unix, Windows does that&lt;br/&gt;
maintain parent-child relationships between processes. A process can&lt;br/&gt;
kill its own immediate children, but unless you make other&lt;br/&gt;
arrangements to obtain the information, can&apos;t kill any&lt;br/&gt;
&apos;grand-children&apos; because it has no way of finding them. Ctrl-C types&lt;br/&gt;
at a command prompt is just a character that the command processor&lt;br/&gt;
interprets and not a signal sent from outside. When you &apos;destroy&apos; a&lt;br/&gt;
child command script, that process does not get the opportunity to&lt;br/&gt;
terminate any child processes it may know about.&lt;br/&gt;
Recent versions of WIndows (2000 or later) do provide a &quot;Job&quot; concept&lt;br/&gt;
which acts as a container for processes. Killing a Job does terminate&lt;br/&gt;
all processes associated with that job. However Jobs do not contain&lt;br/&gt;
other jobs, so fully emulating the Unix behaviour is probably&lt;br/&gt;
impossible.&lt;br/&gt;
---------------------------------------------------------------------&lt;br/&gt;
Note that Unix emulation environments on Windows, like Cygwin,&lt;br/&gt;
suffer from the same problem. Any fix would be difficult.&lt;br/&gt;
Even if we could figure out how to fix this, we might choose not to do so&lt;br/&gt;
for the usual reason &#8211; compatibility.&lt;br/&gt;
2005-09-27&lt;/p&gt;</comment>
                            <comment id="14158286" author="xiaobingo" created="Fri, 3 Oct 2014 18:22:39 +0000"  >&lt;p&gt;Removed cmd.exe process as a wrapper of JVM process. This fixed the issue.&lt;/p&gt;</comment>
                            <comment id="14158293" author="xiaobingo" created="Fri, 3 Oct 2014 18:24:27 +0000"  >&lt;p&gt;Made a patch. Can anyone in the watcher list review it? Thanks!&lt;/p&gt;</comment>
                            <comment id="14158322" author="vgumashta" created="Fri, 3 Oct 2014 18:35:03 +0000"  >&lt;p&gt;Making this critical since this is required for windows.&lt;/p&gt;</comment>
                            <comment id="14158384" author="vgumashta" created="Fri, 3 Oct 2014 19:06:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaobingo&quot; class=&quot;user-hover&quot; rel=&quot;xiaobingo&quot;&gt;xiaobingo&lt;/a&gt; Posted some comments on rb. Thanks for the patch.&lt;/p&gt;</comment>
                            <comment id="14158440" author="xiaobingo" created="Fri, 3 Oct 2014 19:54:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hsubramaniyan&quot; class=&quot;user-hover&quot; rel=&quot;hsubramaniyan&quot;&gt;hsubramaniyan&lt;/a&gt; I think you had more knowledge to clear &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt;&apos;s doubts in review board. Can you comment on this? Thanks!&lt;/p&gt;</comment>
                            <comment id="14158506" author="hsubramaniyan" created="Fri, 3 Oct 2014 20:50:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt; hiveserver2.cmd changes that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaobingo&quot; class=&quot;user-hover&quot; rel=&quot;xiaobingo&quot;&gt;xiaobingo&lt;/a&gt; made are used to generate the hiveserver2.xml file used as an input config file to the service host bin to  start up hiveserver2 service in windows. Since the changes in hiveserver2.cmd are specific to hiveserver2 and cannot be added as part of hive-site.xml(since this will affect queries run via cli), I believe the changes made by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaobingo&quot; class=&quot;user-hover&quot; rel=&quot;xiaobingo&quot;&gt;xiaobingo&lt;/a&gt; should be fine. &lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14158513" author="vgumashta" created="Fri, 3 Oct 2014 20:57:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hsubramaniyan&quot; class=&quot;user-hover&quot; rel=&quot;hsubramaniyan&quot;&gt;hsubramaniyan&lt;/a&gt; Cool. I&apos;ll mark that comment as resolved.&lt;/p&gt;</comment>
                            <comment id="14158642" author="xiaobingo" created="Fri, 3 Oct 2014 22:58:42 +0000"  >&lt;p&gt;Posted 2nd patch to be reviewed. Thanks!&lt;/p&gt;</comment>
                            <comment id="14158820" author="vgumashta" created="Sat, 4 Oct 2014 00:46:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaobingo&quot; class=&quot;user-hover&quot; rel=&quot;xiaobingo&quot;&gt;xiaobingo&lt;/a&gt; For HiveConf, the description will need to go in as the 3rd parameter rather than a comment. This helps when hive-site-default is generated.&lt;/p&gt;</comment>
                            <comment id="14158929" author="xiaobingo" created="Sat, 4 Oct 2014 03:52:02 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt;. Made that change and the 3rd patch to be reviewed.&lt;/p&gt;</comment>
                            <comment id="14158947" author="lefty@hortonworks.com" created="Sat, 4 Oct 2014 04:50:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaobingo&quot; class=&quot;user-hover&quot; rel=&quot;xiaobingo&quot;&gt;xiaobingo&lt;/a&gt;, the description of hive.hadoop.classpath runs over the 100-character line limit so please break it into several lines.  (Starting the description on a new line will make it look better in hive-default.xml.template.)  And hiveserver2 should be camel caps:  HiveServer2.  Should java be Java?&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    HIVE_HADOOP_CLASSPATH(&lt;span class=&quot;code-quote&quot;&gt;&quot;hive.hadoop.classpath&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, 
        &lt;span class=&quot;code-quote&quot;&gt;&quot;For Windows OS, we need to pass HIVE_HADOOP_CLASSPATH java parameter &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; starting HiveServer2 \n&quot;&lt;/span&gt; +
        &lt;span class=&quot;code-quote&quot;&gt;&quot;using \&quot;&lt;/span&gt;-hiveconf hive.hadoop.classpath=%HIVE_LIB%\&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also, you accidentally added some trailing whitespace on the previous line (hive.typecheck.on.insert).&lt;/p&gt;</comment>
                            <comment id="14158970" author="xiaobingo" created="Sat, 4 Oct 2014 05:23:36 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;. Made the 4th patch to be reviewed. &lt;/p&gt;</comment>
                            <comment id="14159003" author="vgumashta" created="Sat, 4 Oct 2014 06:54:46 +0000"  >&lt;p&gt;+1. Will commit in clean precommit run. &lt;/p&gt;</comment>
                            <comment id="14159473" author="hiveqa" created="Sun, 5 Oct 2014 08:36:07 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12672912/HIVE-8340.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12672912/HIVE-8340.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6524 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.ql.txn.compactor.TestCompactor.testStatsAfterCompactionPartTbl
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1121/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1121/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1121/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1121/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1121/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1121/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12672912&lt;/p&gt;</comment>
                            <comment id="14159657" author="vgumashta" created="Sun, 5 Oct 2014 19:55:44 +0000"  >&lt;p&gt;Test failure is unrelated.&lt;/p&gt;</comment>
                            <comment id="14160566" author="vgumashta" created="Mon, 6 Oct 2014 17:44:19 +0000"  >&lt;p&gt;Committed to trunk and 14. Thanks for the patch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaobingo&quot; class=&quot;user-hover&quot; rel=&quot;xiaobingo&quot;&gt;xiaobingo&lt;/a&gt;!&lt;/p&gt;</comment>
                            <comment id="14160567" author="vgumashta" created="Mon, 6 Oct 2014 17:45:06 +0000"  >&lt;p&gt;Thanks for reviewing the configs &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14160612" author="lefty@hortonworks.com" created="Mon, 6 Oct 2014 18:17:43 +0000"  >&lt;p&gt;Doc note:  This adds &lt;b&gt;hive.hadoop.classpath&lt;/b&gt; to HiveConf.java, so it needs to be documented in the wiki. Although the parameter doesn&apos;t start with &quot;hive.server2...&quot;, it belongs in the HiveServer2 section:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-HiveServer2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; HiveServer2 &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14205528" author="szehon" created="Mon, 10 Nov 2014 23:21:59 +0000"  >&lt;p&gt;This doesn&apos;t seem to be a user-facing property as per my understanding, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xiaobingo&quot; class=&quot;user-hover&quot; rel=&quot;xiaobingo&quot;&gt;xiaobingo&lt;/a&gt; is that the case?&lt;/p&gt;</comment>
                            <comment id="14207223" author="xiaobingo" created="Tue, 11 Nov 2014 22:36:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;, I guess, this should be documented. Users are allowed to set that parameter in hiveserver2.xml. &lt;/p&gt;</comment>
                            <comment id="14207259" author="szehon" created="Tue, 11 Nov 2014 22:51:09 +0000"  >&lt;p&gt;I see, but I thought the hiveserver2.cmd sets this when starting HS2, so wondering what case would the user need to set this?   Wasn&apos;t following the JIRA, thanks in advance.&lt;/p&gt;</comment>
                            <comment id="14210767" author="thejas" created="Thu, 13 Nov 2014 19:42:29 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                            <comment id="14290528" author="lefty@hortonworks.com" created="Sat, 24 Jan 2015 10:28:40 +0000"  >&lt;p&gt;&lt;b&gt;hive.hadoop.classpath&lt;/b&gt; is documented in the wiki:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.hadoop.classpath&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; HiveServer2 &amp;#8211; hive.hadoop.classpath &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Should it also be documented in &quot;Setting Up HiveServer2&quot;?&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Setting+Up+HiveServer2#SettingUpHiveServer2-HowtoConfigure&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Setting Up HiveServer2 &amp;#8211; How to Configure &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12672807" name="HIVE-8340.1.patch" size="4023" author="xiaobingo" created="Fri, 3 Oct 2014 18:24:27 +0000"/>
                            <attachment id="12672864" name="HIVE-8340.2.patch" size="4414" author="xiaobingo" created="Fri, 3 Oct 2014 22:58:42 +0000"/>
                            <attachment id="12672906" name="HIVE-8340.3.patch" size="4652" author="xiaobingo" created="Sat, 4 Oct 2014 03:51:57 +0000"/>
                            <attachment id="12672912" name="HIVE-8340.4.patch" size="4604" author="xiaobingo" created="Sat, 4 Oct 2014 05:23:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20s1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>