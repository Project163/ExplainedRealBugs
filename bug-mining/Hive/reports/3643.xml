<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:35:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-11112] ISO-8859-1 text output has fragments of previous longer rows appended</title>
                <link>https://issues.apache.org/jira/browse/HIVE-11112</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;If a LazySimpleSerDe table is created using ISO 8859-1 encoding, query results for a string column are incorrect for any row that was preceded by a row containing a longer string.&lt;/p&gt;

&lt;p&gt;Example steps to reproduce:&lt;/p&gt;

&lt;p&gt;1. Create a table using ISO 8859-1 encoding:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; person_lat1 (&lt;span class=&quot;code-keyword&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;STRING&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;ROW&lt;/span&gt; FORMAT SERDE &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;WITH&lt;/span&gt; SERDEPROPERTIES (&lt;span class=&quot;code-quote&quot;&gt;&apos;serialization.&lt;span class=&quot;code-keyword&quot;&gt;encoding&lt;/span&gt;&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;ISO8859_1&apos;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2. Copy an ISO-8859-1 encoded text file into the appropriate warehouse folder in HDFS. I&apos;ll attach an example file containing the following text: &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;M&#252;ller,Thomas
J&#248;rgensen,J&#248;rgen
Pe&#241;a,Andr&#233;s
N&#229;m,F&#230;k
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;3. Execute &lt;tt&gt;SELECT * FROM person_lat1&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Result - The following output appears:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+-------------------+--+
| person_lat1.name |
+-------------------+--+
| M&#252;ller,Thomas |
| J&#248;rgensen,J&#248;rgen |
| Pe&#241;a,Andr&#233;s&#248;rgen |
| N&#229;m,F&#230;kdr&#233;s&#248;rgen |
+-------------------+--+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12840589">HIVE-11112</key>
            <summary>ISO-8859-1 text output has fragments of previous longer rows appended</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ychena">Yongzhi Chen</assignee>
                                    <reporter username="ychena">Yongzhi Chen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jun 2015 17:18:34 +0000</created>
                <updated>Tue, 16 Feb 2016 23:51:10 +0000</updated>
                            <resolved>Mon, 29 Jun 2015 14:23:36 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14601716" author="ychena" created="Thu, 25 Jun 2015 18:49:05 +0000"  >&lt;p&gt;org.apache.hadoop.io.Text &apos;s byte array is not necessarily null terminated. But &lt;br/&gt;
SerDeUtils.transformTextToUTF8 method just use Text byte array to create String object which causes the unclean buffer issue.&lt;br/&gt;
Fix it by using String constructor with lengh info.&lt;/p&gt;</comment>
                            <comment id="14601722" author="ychena" created="Thu, 25 Jun 2015 18:52:35 +0000"  >&lt;p&gt;Need code review.&lt;/p&gt;</comment>
                            <comment id="14602518" author="hiveqa" created="Fri, 26 Jun 2015 07:37:34 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12741917/HIVE-11112.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12741917/HIVE-11112.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 9026 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4388/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4388/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4388/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4388/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4388/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4388/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12741917 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14602848" author="ychena" created="Fri, 26 Jun 2015 13:08:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;ctang.ma&lt;/a&gt; , &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; could you review the change? Thanks&lt;/p&gt;</comment>
                            <comment id="14603194" author="xuefuz" created="Fri, 26 Jun 2015 17:00:56 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14603301" author="ychena" created="Fri, 26 Jun 2015 17:50:38 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; for reviewing it. &lt;/p&gt;</comment>
                            <comment id="14604493" author="xuefuz" created="Sun, 28 Jun 2015 03:25:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ychena&quot; class=&quot;user-hover&quot; rel=&quot;ychena&quot;&gt;ychena&lt;/a&gt;, could you check if the patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10983&quot; title=&quot;SerDeUtils bug  ,when Text is reused &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10983&quot;&gt;&lt;del&gt;HIVE-10983&lt;/del&gt;&lt;/a&gt; fixes the problem here. I like the test case here though.&lt;/p&gt;</comment>
                            <comment id="14604502" author="wisgood" created="Sun, 28 Jun 2015 03:38:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ychena&quot; class=&quot;user-hover&quot; rel=&quot;ychena&quot;&gt;ychena&lt;/a&gt;  provide a very good test case&#65281;&lt;br/&gt;
can I merge the test case of this patch into HIve-10983?  &lt;/p&gt;</comment>
                            <comment id="14605669" author="ychena" created="Mon, 29 Jun 2015 14:25:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wisgood&quot; class=&quot;user-hover&quot; rel=&quot;wisgood&quot;&gt;wisgood&lt;/a&gt;, you can merge my test case. I just solve my jira, you just merge my fixes and commit from your jira. Thanks&lt;/p&gt;</comment>
                            <comment id="14605694" author="ychena" created="Mon, 29 Jun 2015 14:32:13 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wisgood&quot; class=&quot;user-hover&quot; rel=&quot;wisgood&quot;&gt;wisgood&lt;/a&gt;, I think you should add test case for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11095&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-11095&lt;/a&gt;, and close &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10983&quot; title=&quot;SerDeUtils bug  ,when Text is reused &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10983&quot;&gt;&lt;del&gt;HIVE-10983&lt;/del&gt;&lt;/a&gt; as duplicate. &lt;br/&gt;
For &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11112&quot; title=&quot;ISO-8859-1 text output has fragments of previous longer rows appended&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11112&quot;&gt;&lt;del&gt;HIVE-11112&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11095&quot; title=&quot;SerDeUtils  another bug ,when Text is reused&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11095&quot;&gt;&lt;del&gt;HIVE-11095&lt;/del&gt;&lt;/a&gt; cover different case, but &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10983&quot; title=&quot;SerDeUtils bug  ,when Text is reused &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10983&quot;&gt;&lt;del&gt;HIVE-10983&lt;/del&gt;&lt;/a&gt; duplicate both. And I am in a hurry to have &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11112&quot; title=&quot;ISO-8859-1 text output has fragments of previous longer rows appended&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11112&quot;&gt;&lt;del&gt;HIVE-11112&lt;/del&gt;&lt;/a&gt; committed. Thanks&lt;/p&gt;</comment>
                            <comment id="14605788" author="xuefuz" created="Mon, 29 Jun 2015 15:49:06 +0000"  >&lt;p&gt;To accelerate the process, I committed the patch here to branch-1 and master. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wisgood&quot; class=&quot;user-hover&quot; rel=&quot;wisgood&quot;&gt;wisgood&lt;/a&gt;, could you consolidate &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11095&quot; title=&quot;SerDeUtils  another bug ,when Text is reused&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11095&quot;&gt;&lt;del&gt;HIVE-11095&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10983&quot; title=&quot;SerDeUtils bug  ,when Text is reused &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10983&quot;&gt;&lt;del&gt;HIVE-10983&lt;/del&gt;&lt;/a&gt;? Add a test case if needed. I should be able to review it quickly. Thanks.&lt;/p&gt;

&lt;p&gt;Thanks to Yongzhi and Xiaowei for working on this.&lt;/p&gt;</comment>
                            <comment id="14606565" author="wisgood" created="Mon, 29 Jun 2015 22:38:00 +0000"  >&lt;p&gt;Ok,I will try to add a test case today for HIVE_10983,HIVE_10983 and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11112&quot; title=&quot;ISO-8859-1 text output has fragments of previous longer rows appended&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11112&quot;&gt;&lt;del&gt;HIVE-11112&lt;/del&gt;&lt;/a&gt; cover different case ,but &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10983&quot; title=&quot;SerDeUtils bug  ,when Text is reused &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10983&quot;&gt;&lt;del&gt;HIVE-10983&lt;/del&gt;&lt;/a&gt; duplicate both.&lt;/p&gt;</comment>
                            <comment id="14606922" author="wisgood" created="Tue, 30 Jun 2015 03:27:17 +0000"  >&lt;p&gt; I have added  a test case in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11095&quot; title=&quot;SerDeUtils  another bug ,when Text is reused&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11095&quot;&gt;&lt;del&gt;HIVE-11095&lt;/del&gt;&lt;/a&gt; ,so I need code review. The test have passed . &lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="14606926" author="wisgood" created="Tue, 30 Jun 2015 03:32:29 +0000"  >&lt;p&gt;The above is wrong .&lt;br/&gt;
I will try to add a test case today for HIVE_11095,HIVE_11095 and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-11112&quot; title=&quot;ISO-8859-1 text output has fragments of previous longer rows appended&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-11112&quot;&gt;&lt;del&gt;HIVE-11112&lt;/del&gt;&lt;/a&gt; cover different case ,but &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10983&quot; title=&quot;SerDeUtils bug  ,when Text is reused &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10983&quot;&gt;&lt;del&gt;HIVE-10983&lt;/del&gt;&lt;/a&gt; duplicate both.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12837085">HIVE-10983</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12837085">HIVE-10983</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12840207">HIVE-11095</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12741917" name="HIVE-11112.1.patch" size="3557" author="ychena" created="Thu, 25 Jun 2015 18:52:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gi0f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>