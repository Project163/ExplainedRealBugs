<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:08:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4638] Thread local PerfLog can get shared by multiple hiveserver2 sessions</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4638</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The PerfLog is accessed as thread local which can be shared by multiple hiveserver2 session, overwriting query runtime information.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12650285">HIVE-4638</key>
            <summary>Thread local PerfLog can get shared by multiple hiveserver2 sessions</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadm">Prasad Suresh Mujumdar</assignee>
                                    <reporter username="prasadm">Prasad Suresh Mujumdar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 May 2013 07:45:14 +0000</created>
                <updated>Tue, 15 Oct 2013 23:30:00 +0000</updated>
                            <resolved>Fri, 2 Aug 2013 04:58:54 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>HiveServer2</component>
                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13671237" author="prasadm" created="Fri, 31 May 2013 07:51:05 +0000"  >&lt;p&gt;Review request on &lt;a href=&quot;https://reviews.facebook.net/D11019&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D11019&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13691021" author="ashutoshc" created="Sat, 22 Jun 2013 02:33:13 +0000"  >&lt;p&gt;I will assume its bit hard to write junit test case for testing concurrency. But was wondering if you thought about writing test case for it. Else, can you provide info on what manual testing you did to verify the fix?&lt;/p&gt;</comment>
                            <comment id="13696202" author="ashutoshc" created="Sat, 29 Jun 2013 21:49:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt; It will be good to get this in. I just want to make sure you have tested this fix.&lt;/p&gt;</comment>
                            <comment id="13723510" author="prasadm" created="Tue, 30 Jul 2013 07:25:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; my apologies for missing the comment earlier.&lt;/p&gt;

&lt;p&gt;We found the issue in one of our internal integration tests with Cloudera Manager. The exec hook retrieves the query start time hookContext.getQueryPlan().getQueryStartTime()which sometimes used to return bogus timestamp values. The problem didn&apos;t reproduce with the patch.&lt;/p&gt;</comment>
                            <comment id="13723516" author="ashutoshc" created="Tue, 30 Jul 2013 07:32:44 +0000"  >&lt;p&gt;I see. Can you rebase the patch? Lets get it in.&lt;/p&gt;</comment>
                            <comment id="13723522" author="prasadm" created="Tue, 30 Jul 2013 07:41:01 +0000"  >&lt;p&gt;Rebased patch&lt;/p&gt;</comment>
                            <comment id="13726567" author="ashutoshc" created="Thu, 1 Aug 2013 16:21:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13727328" author="ashutoshc" created="Fri, 2 Aug 2013 04:58:54 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Prasad!&lt;/p&gt;</comment>
                            <comment id="13727500" author="hudson" created="Fri, 2 Aug 2013 09:25:14 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #41 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/41/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/41/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4638&quot; title=&quot;Thread local PerfLog can get shared by multiple hiveserver2 sessions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4638&quot;&gt;&lt;del&gt;HIVE-4638&lt;/del&gt;&lt;/a&gt; : Thread local PerfLog can get shared by multiple hiveserver2 sessions (Prasad Mujumdar via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13727539" author="hudson" created="Fri, 2 Aug 2013 10:23:00 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hive-trunk-hadoop1-ptest #113 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/113/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/113/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4638&quot; title=&quot;Thread local PerfLog can get shared by multiple hiveserver2 sessions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4638&quot;&gt;&lt;del&gt;HIVE-4638&lt;/del&gt;&lt;/a&gt; : Thread local PerfLog can get shared by multiple hiveserver2 sessions (Prasad Mujumdar via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13728040" author="hudson" created="Fri, 2 Aug 2013 20:16:14 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-hadoop2 #322 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/322/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/322/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4638&quot; title=&quot;Thread local PerfLog can get shared by multiple hiveserver2 sessions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4638&quot;&gt;&lt;del&gt;HIVE-4638&lt;/del&gt;&lt;/a&gt; : Thread local PerfLog can get shared by multiple hiveserver2 sessions (Prasad Mujumdar via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13728423" author="hudson" created="Sat, 3 Aug 2013 03:24:27 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hive-trunk-h0.21 #2240 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2240/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2240/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4638&quot; title=&quot;Thread local PerfLog can get shared by multiple hiveserver2 sessions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4638&quot;&gt;&lt;del&gt;HIVE-4638&lt;/del&gt;&lt;/a&gt; : Thread local PerfLog can get shared by multiple hiveserver2 sessions (Prasad Mujumdar via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1509544&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/log/PerfLogger.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/session/SessionState.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13795953" author="ashutoshc" created="Tue, 15 Oct 2013 23:30:00 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12585562" name="HIVE-4638-1.patch" size="4500" author="prasadm" created="Fri, 31 May 2013 07:50:37 +0000"/>
                            <attachment id="12594892" name="HIVE-4638-2.patch" size="4500" author="prasadm" created="Tue, 30 Jul 2013 07:41:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330612</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1l1db:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330946</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>