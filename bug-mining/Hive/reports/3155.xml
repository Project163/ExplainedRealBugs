<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:30:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7653] Hive AvroSerDe does not support circular references in Schema</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7653</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Avro allows nullable circular references but Hive AvroSerDe does not.&lt;/p&gt;

&lt;p&gt;Example of circular references (passing in Avro but failing in AvroSerDe):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AvroCycleParent {
  AvroCycleChild child;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; AvroCycleChild getChild () {&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; child;}
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setChild (AvroCycleChild child) {&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.child = child;}
}

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AvroCycleChild {
  AvroCycleParent parent;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; AvroCycleParent getParent () {&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; parent;}
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setParent (AvroCycleParent parent) {&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.parent = parent;}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Due to this discrepancy, Hive is unable to read Avro records having circular-references. For some third-party code with such references, it becomes very hard to directly serialize it with Avro and use in Hive.&lt;/p&gt;

&lt;p&gt;I have a patch for this with a unit-test and I will submit it shortly.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12732693">HIVE-7653</key>
            <summary>Hive AvroSerDe does not support circular references in Schema</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sachingoyal">Sachin Goyal</assignee>
                                    <reporter username="sachingoyal">Sachin Goyal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Aug 2014 21:48:52 +0000</created>
                <updated>Mon, 6 Jul 2015 16:34:38 +0000</updated>
                            <resolved>Thu, 19 Feb 2015 08:56:36 +0000</resolved>
                                    <version>0.13.1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14090001" author="sachingoyal" created="Thu, 7 Aug 2014 23:00:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7653&quot; title=&quot;Hive AvroSerDe does not support circular references in Schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7653&quot;&gt;&lt;del&gt;HIVE-7653&lt;/del&gt;&lt;/a&gt;.1.patch uses a map to store schemas for which Type has been processed already.&lt;br/&gt;
If they have been processed already, it uses the processed result, thus preventing an infinite loop.&lt;/p&gt;

&lt;p&gt;To see the infinite loop, comment following line in SchemaToTypeInfo.java:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;schemaSeenMap.put(schema, primitiveTypeToTypeInfo.get(Schema.Type.NULL));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="14090766" author="hiveqa" created="Fri, 8 Aug 2014 13:45:34 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12660500/HIVE-7653.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12660500/HIVE-7653.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/228/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/228/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/228/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/228/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-228/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-228/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-228/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;ql/src/test/results/clientpositive/vectorization_9.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorization_14.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_decimal_math_funcs.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorization_short_regress.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorization_16.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorized_parquet.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_cast_constant.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_elt.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorization_div0.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_coalesce.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorization_15.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_decimal_mapjoin.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vector_between_in.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/vectorized_math_funcs.q.out&apos;
Reverted &apos;ql/src/test/org/apache/hadoop/hive/ql/exec/vector/TestVectorizationContext.java&apos;
Reverted &apos;ql/src/test/queries/clientpositive/vector_coalesce.q&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/Vectorizer.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/optimizer/ConstantPropagate.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/vector/expressions/ConstantVectorExpression.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/vector/expressions/VectorExpressionWriterFactory.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/vector/VectorizationContext.java&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ awk &apos;{print $2}&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit-hadoop2/target itests/hive-minikdc/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/core/target hcatalog/streaming/target hcatalog/server-extensions/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/Vectorizer.java.orig
+ svn update

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
External at revision 1616755.

At revision 1616755.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12660500&lt;/p&gt;</comment>
                            <comment id="14092451" author="sachingoyal" created="Mon, 11 Aug 2014 05:19:50 +0000"  >&lt;p&gt;Attaching patch file created using&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;git diff &amp;gt; HIVE-7653.2.patch
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14092591" author="hiveqa" created="Mon, 11 Aug 2014 09:12:49 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12660923/HIVE-7653.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12660923/HIVE-7653.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 5889 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_opt_vectorization
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/249/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/249/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/249/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/249/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-249/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-249/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12660923&lt;/p&gt;</comment>
                            <comment id="14116255" author="sachingoyal" created="Sat, 30 Aug 2014 06:15:56 +0000"  >&lt;p&gt;Re-attaching the patch as the build problem seems to be resolved now.&lt;/p&gt;</comment>
                            <comment id="14116259" author="sachingoyal" created="Sat, 30 Aug 2014 06:30:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davidzchen&quot; class=&quot;user-hover&quot; rel=&quot;davidzchen&quot;&gt;davidzchen&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; I see you have good experience with AvroSerDe as per your contribution to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4329&quot; title=&quot;HCatalog should use getHiveRecordWriter rather than getRecordWriter&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4329&quot;&gt;HIVE-4329&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swarnim&quot; class=&quot;user-hover&quot; rel=&quot;swarnim&quot;&gt;swarnim&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt;, I see that you guys have also contributed a good deal on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6147&quot; title=&quot;Support avro data stored in HBase columns&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6147&quot;&gt;&lt;del&gt;HIVE-6147&lt;/del&gt;&lt;/a&gt; and have also faced a problem similar to the one I am facing.&lt;/p&gt;

&lt;p&gt;Could you please review this patch as well?&lt;br/&gt;
This is my first patch to HIVE and no one has responded to my review request till now.&lt;br/&gt;
So I am trying to directly request some experienced folks.&lt;br/&gt;
Your review and comments will be much appreciated.&lt;/p&gt;

</comment>
                            <comment id="14116313" author="hiveqa" created="Sat, 30 Aug 2014 09:11:31 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12665548/HIVE-7653.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12665548/HIVE-7653.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 6133 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.jdbc.miniHS2.TestHiveServer2.testConnection
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/576/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/576/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/576/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/576/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-576/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-576/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12665548&lt;/p&gt;</comment>
                            <comment id="14117116" author="sachingoyal" created="Mon, 1 Sep 2014 07:27:07 +0000"  >&lt;p&gt;Adding a dummy patch to see if the tests are still failing.&lt;/p&gt;</comment>
                            <comment id="14118448" author="swarnim" created="Tue, 2 Sep 2014 18:12:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sachingoyal&quot; class=&quot;user-hover&quot; rel=&quot;sachingoyal&quot;&gt;sachingoyal&lt;/a&gt; Once you are happy with the patch, would you mind opening a review for this? Thanks!&lt;/p&gt;</comment>
                            <comment id="14118607" author="sachingoyal" created="Tue, 2 Sep 2014 19:44:20 +0000"  >&lt;p&gt;Cancelling current patch and trying a dummy one to see if tests still fail for it&lt;/p&gt;</comment>
                            <comment id="14118608" author="sachingoyal" created="Tue, 2 Sep 2014 19:45:09 +0000"  >&lt;p&gt;Dummy patch with right naming scheme.&lt;/p&gt;</comment>
                            <comment id="14118614" author="sachingoyal" created="Tue, 2 Sep 2014 19:48:03 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swarnim&quot; class=&quot;user-hover&quot; rel=&quot;swarnim&quot;&gt;swarnim&lt;/a&gt;,   I am trying a dummy patch (with no logical changes).&lt;br/&gt;
I will update the patch with a valid one once tests have run for this dummy patch.&lt;/p&gt;

&lt;p&gt;Corresponding review request is &lt;a href=&quot;https://reviews.apache.org/r/24609/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/24609/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14121804" author="hiveqa" created="Thu, 4 Sep 2014 19:37:26 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12666512/HIVE-7653.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12666512/HIVE-7653.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6143 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/640/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/640/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/640/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/640/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-640/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-640/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12666512&lt;/p&gt;</comment>
                            <comment id="14122169" author="hiveqa" created="Thu, 4 Sep 2014 23:28:36 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12666574/HIVE-7653.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12666574/HIVE-7653.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 6140 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/643/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/643/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/643/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/643/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-643/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-643/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12666574&lt;/p&gt;</comment>
                            <comment id="14122441" author="sachingoyal" created="Fri, 5 Sep 2014 05:05:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swarnim&quot; class=&quot;user-hover&quot; rel=&quot;swarnim&quot;&gt;swarnim&lt;/a&gt;, I have verified that dummy patch is not failing the test.&lt;br/&gt;
So the problem must be with the actual patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7653&quot; title=&quot;Hive AvroSerDe does not support circular references in Schema&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7653&quot;&gt;&lt;del&gt;HIVE-7653&lt;/del&gt;&lt;/a&gt;.5.patch&lt;br/&gt;
I have seen the test in my local installation and built it too but it is not failing.&lt;br/&gt;
I have verified that there are no more local changes on my side than the attached patch.&lt;br/&gt;
Also my branch is fully updated.&lt;br/&gt;
Still the test fails when submitting the patch.&lt;/p&gt;

&lt;p&gt;So, if you can help me figure out why this one test above is failing, it would be great and much appreciated.&lt;br/&gt;
I am using following command to build:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mvn clean install -Phadoop-2,dist
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14123002" author="swarnim" created="Fri, 5 Sep 2014 14:33:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sachingoyal&quot; class=&quot;user-hover&quot; rel=&quot;sachingoyal&quot;&gt;sachingoyal&lt;/a&gt; Is the failing test somehow related to the changes that you are proposing with the patch?&lt;/p&gt;</comment>
                            <comment id="14123308" author="sachingoyal" created="Fri, 5 Sep 2014 18:18:50 +0000"  >&lt;p&gt;The patch is for AvroSerDe and is about handling circular references in schema even though Avro allows it.&lt;/p&gt;

&lt;p&gt;Fix is not too complicated:&lt;br/&gt;
Add a lookup to store every type while AvroSerDe is processing a given schema.&lt;br/&gt;
If a given type is seen again, it it used from the lookup thus preventing an infinite loop.&lt;/p&gt;

&lt;p&gt;Since this was a missing feature in AvroSerDe, I don&apos;t see how my patch is failing a test and that too which is passing on my local.&lt;br/&gt;
So I don&apos;t think it is related to my patch.&lt;/p&gt;</comment>
                            <comment id="14205970" author="szehon" created="Tue, 11 Nov 2014 05:35:13 +0000"  >&lt;p&gt;Hi Sachin, thanks for the patch.  I put some comments/questions on the review board.&lt;/p&gt;</comment>
                            <comment id="14312712" author="sachingoyal" created="Mon, 9 Feb 2015 19:37:42 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt;, I have incorporated the comments and attached a new patch.&lt;/p&gt;</comment>
                            <comment id="14314673" author="szehon" created="Tue, 10 Feb 2015 19:03:31 +0000"  >&lt;p&gt;I almost forgot this one by now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks,  pending tests on the new patch. +1&lt;/p&gt;</comment>
                            <comment id="14316784" author="sachingoyal" created="Wed, 11 Feb 2015 19:07:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt;, I have included a test in the patch.&lt;br/&gt;
Do you mean the Jenkins tests run by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hiveqa&quot; class=&quot;user-hover&quot; rel=&quot;hiveqa&quot;&gt;hiveqa&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="14323206" author="szehon" created="Mon, 16 Feb 2015 19:53:29 +0000"  >&lt;p&gt;Attaching again to trigger HiveQA&lt;/p&gt;</comment>
                            <comment id="14323584" author="hiveqa" created="Tue, 17 Feb 2015 02:35:14 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12699152/HIVE-7653.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12699152/HIVE-7653.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 7550 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_bitmap_auto_partitioned
org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler.org.apache.hive.hcatalog.hbase.TestPigHBaseStorageHandler
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2809/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2809/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2809/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2809/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2809/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2809/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12699152 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14324792" author="sachingoyal" created="Tue, 17 Feb 2015 20:09:29 +0000"  >&lt;p&gt;The above two test failures have absolutely nothing to do with this patch.&lt;br/&gt;
Here are the logs I have seen:&lt;br/&gt;
&lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2809/failed/TestPigHBaseStorageHandler/maven-test.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2809/failed/TestPigHBaseStorageHandler/maven-test.txt&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2809/failed/TestCliDriver-skewjoin_mapjoin11.q-udf_least.q-sample2.q-and-12-more/maven-test.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2809/failed/TestCliDriver-skewjoin_mapjoin11.q-udf_least.q-sample2.q-and-12-more/maven-test.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt;, could you help me find the issue here?&lt;/p&gt;</comment>
                            <comment id="14327134" author="szehon" created="Thu, 19 Feb 2015 08:56:36 +0000"  >&lt;p&gt;Yea the test failures dont look related.  Committed to trunk, thanks for the contribution.&lt;/p&gt;</comment>
                            <comment id="14328050" author="sachingoyal" created="Thu, 19 Feb 2015 20:08:44 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt;!&lt;br/&gt;
Appreciate your time on reviewing this.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12787495">HIVE-10187</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12660500" name="HIVE-7653.1.patch" size="17031" author="sachingoyal" created="Thu, 7 Aug 2014 23:01:06 +0000"/>
                            <attachment id="12660923" name="HIVE-7653.2.patch" size="18675" author="sachingoyal" created="Mon, 11 Aug 2014 05:19:50 +0000"/>
                            <attachment id="12665548" name="HIVE-7653.3.patch" size="18685" author="sachingoyal" created="Sat, 30 Aug 2014 06:16:30 +0000"/>
                            <attachment id="12666512" name="HIVE-7653.4.patch" size="792" author="sachingoyal" created="Thu, 4 Sep 2014 16:58:57 +0000"/>
                            <attachment id="12666574" name="HIVE-7653.5.patch" size="18685" author="sachingoyal" created="Thu, 4 Sep 2014 20:59:11 +0000"/>
                            <attachment id="12699152" name="HIVE-7653.6.patch" size="17818" author="szehon" created="Mon, 16 Feb 2015 19:53:29 +0000"/>
                            <attachment id="12697550" name="HIVE-7653.6.patch" size="17818" author="sachingoyal" created="Mon, 9 Feb 2015 19:37:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410721</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ynw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>410714</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>