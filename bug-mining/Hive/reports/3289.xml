<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:31:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10145] set Tez ACLs appropriately in hive</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10145</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive should make the necessary changes to integrate with Tez and Timeline. It should pass the necessary ACL related params to ensure that query execution + logs is only visible to the relevant users.&lt;/p&gt;

&lt;p&gt;Proposed Change -&lt;br/&gt;
Set DAG level ACL for user running the query (the end user), to allow modify + view&lt;/p&gt;</description>
                <environment></environment>
        <key id="12786821">HIVE-10145</key>
            <summary>set Tez ACLs appropriately in hive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas Nair</assignee>
                                    <reporter username="thejas">Thejas Nair</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Mar 2015 19:45:18 +0000</created>
                <updated>Mon, 18 May 2015 19:48:31 +0000</updated>
                            <resolved>Mon, 6 Apr 2015 00:58:54 +0000</resolved>
                                                    <fixVersion>1.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14393900" author="thejas" created="Fri, 3 Apr 2015 01:33:52 +0000"  >&lt;p&gt;After more thought, I feel it does not make sense to inherit the admin role users only in case when SQL Standard authorization is enabled, as that is just one of the possible authorization modes, that would be confusing. There is not much value I see in that added complexity. I will keep things simple and just let users set the AM level permissions using tez.am.*-acls properties.&lt;/p&gt;

&lt;p&gt;Only DAG level access control will be set from HiveServer2. This is to ensure that end users running queries with doAs=false still have access to the DAG information for DAGs corresponding to their query.&lt;/p&gt;

&lt;p&gt;Updating the proposal in description.&lt;/p&gt;</comment>
                            <comment id="14393917" author="vikram.dixit" created="Fri, 3 Apr 2015 01:46:21 +0000"  >&lt;p&gt;From hive side looks OK +1. Would be good to get a review from tez guys as well.&lt;/p&gt;</comment>
                            <comment id="14393933" author="thejas" created="Fri, 3 Apr 2015 01:54:37 +0000"  >&lt;p&gt;Thanks for the view &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt;. I did some manual testing to verify this works.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hitesh&quot; class=&quot;user-hover&quot; rel=&quot;hitesh&quot;&gt;hitesh&lt;/a&gt; I think I have run into what looks like a Tez bug during tests.&lt;br/&gt;
Though I set the end user as the view and write user, the user does not get added to the writers list.&lt;/p&gt;

&lt;p&gt;GET &lt;a href=&quot;http://localhost:8188/ws/v1/timeline/domain/Tez_ATS_application_1428012550608_0017_hive_20150403011754_26c51eb0-6ef5-4f5a-8285-f14640b0c1b1:1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8188/ws/v1/timeline/domain/Tez_ATS_application_1428012550608_0017_hive_20150403011754_26c51eb0-6ef5-4f5a-8285-f14640b0c1b1:1&lt;/a&gt;&lt;br/&gt;
Gives - &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;{
id: &lt;span class=&quot;code-quote&quot;&gt;&quot;Tez_ATS_application_1428012550608_0017_hive_20150403011754_26c51eb0-6ef5-4f5a-8285-f14640b0c1b1:1&quot;&lt;/span&gt;,
owner: &lt;span class=&quot;code-quote&quot;&gt;&quot;hive&quot;&lt;/span&gt;,
readers: &lt;span class=&quot;code-quote&quot;&gt;&quot;hive,hrt_qa &quot;&lt;/span&gt;,
writers: &lt;span class=&quot;code-quote&quot;&gt;&quot;hive&quot;&lt;/span&gt;,
createdtime: 1428023886613,
modifiedtime: 1428023886613
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I see that calls to getUsersWithModifyACLs are missing from ATSHistoryACLPolicyManager.java, it has only calls to getUsersWithViewACLs. Is there any existing bug tracking that issue ?&lt;/p&gt;</comment>
                            <comment id="14394139" author="hitesh" created="Fri, 3 Apr 2015 06:41:42 +0000"  >&lt;p&gt;No open jira. Can you please go ahead and create one? Thanks.&lt;/p&gt;</comment>
                            <comment id="14394885" author="thejas" created="Fri, 3 Apr 2015 18:39:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hitesh&quot; class=&quot;user-hover&quot; rel=&quot;hitesh&quot;&gt;hitesh&lt;/a&gt; Created &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-2277&quot; title=&quot;modifyACLsStr in DAGAccessControls does not take effect&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-2277&quot;&gt;&lt;del&gt;TEZ-2277&lt;/del&gt;&lt;/a&gt; to track the issue.&lt;/p&gt;</comment>
                            <comment id="14395016" author="hiveqa" created="Fri, 3 Apr 2015 20:10:26 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12709140/HIVE-10145.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12709140/HIVE-10145.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 8699 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestCustomAuthentication - did not produce a TEST-*.xml file
TestMinimrCliDriver-smb_mapjoin_8.q - did not produce a TEST-*.xml file
org.apache.hadoop.hive.metastore.txn.TestCompactionTxnHandler.testRevokeTimedOutWorkers
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3273/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3273/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3273/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3273/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3273/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3273/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12709140 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14395125" author="thejas" created="Fri, 3 Apr 2015 21:41:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hitesh&quot; class=&quot;user-hover&quot; rel=&quot;hitesh&quot;&gt;hitesh&lt;/a&gt; Does the patch look good to you, from a Tez perspective ?&lt;/p&gt;</comment>
                            <comment id="14445935" author="thejas" created="Mon, 6 Apr 2015 00:58:54 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; and the guidance &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hitesh&quot; class=&quot;user-hover&quot; rel=&quot;hitesh&quot;&gt;hitesh&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14482699" author="lefty@hortonworks.com" created="Tue, 7 Apr 2015 06:51:43 +0000"  >&lt;p&gt;Does this need any documentation?&lt;/p&gt;</comment>
                            <comment id="14484690" author="thejas" created="Wed, 8 Apr 2015 04:26:54 +0000"  >&lt;p&gt;I don&apos;t think this needs documentation, this is the intuitive behavior.&lt;/p&gt;</comment>
                            <comment id="14484706" author="lefty@hortonworks.com" created="Wed, 8 Apr 2015 04:44:40 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14548636" author="sushanth" created="Mon, 18 May 2015 19:48:31 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12788067">TEZ-2277</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12709140" name="HIVE-10145.1.patch" size="2638" author="thejas" created="Fri, 3 Apr 2015 01:34:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27k27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Earlier if hive.server2.enable.doAs was set to false, and tez acls were enabled, the end user who is running this query would not have access to the DAG information for the query.&lt;br/&gt;
With this change the end user has permissions to view it. </customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>