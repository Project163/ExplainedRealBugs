<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:27:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-29130] Remove jline 2.x</title>
                <link>https://issues.apache.org/jira/browse/HIVE-29130</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Running the following schematool command is failing&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
schematool -dbType mysql -initSchema --verbose &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Attaching the schematool logs before and after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25495&quot; title=&quot;Upgrade to JLine3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25495&quot;&gt;&lt;del&gt;HIVE-25495&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0: jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive&amp;gt; Closing: 0: jdbc:mysql://localhost:3307/hivebeeline&amp;gt; beeline&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; org.jline.reader.EndOfFileException.getPartialLine()&apos;&lt;/span&gt;2025-08-09 20:33:02,845 ERROR schematool.MetastoreSchemaTool: Schema initialization FAILED! Metastore state would be inconsistent!Schema initialization FAILED! Metastore state would be inconsistent!2025-08-09 20:33:02,845 ERROR schematool.MetastoreSchemaTool: Underlying cause: java.io.IOException : Schema script failed, errorcode 2Underlying cause: java.io.IOException : Schema script failed, errorcode 2org.apache.hadoop.hive.metastore.HiveMetaException: Schema initialization FAILED! Metastore state would be inconsistent!	at org.apache.hadoop.hive.metastore.tools.schematool.SchemaToolTaskInit.execute(SchemaToolTaskInit.java:66)	at org.apache.hadoop.hive.metastore.tools.schematool.MetastoreSchemaTool.run(MetastoreSchemaTool.java:486)	at org.apache.hive.beeline.schematool.HiveSchemaTool.main(HiveSchemaTool.java:206)	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)	at java.base/java.lang.reflect.Method.invoke(Method.java:580)	at org.apache.hadoop.util.RunJar.run(RunJar.java:330)	at org.apache.hadoop.util.RunJar.main(RunJar.java:245)Caused by: java.io.IOException: Schema script failed, errorcode 2	at org.apache.hive.beeline.schematool.HiveSchemaTool.execSql(HiveSchemaTool.java:122)	at org.apache.hive.beeline.schematool.HiveSchemaTool.execSql(HiveSchemaTool.java:99)	at org.apache.hadoop.hive.metastore.tools.schematool.SchemaToolTaskInit.execute(SchemaToolTaskInit.java:62)	... 6 more2025-08-09 20:33:02,846 ERROR schematool.MetastoreSchemaTool: *** schemaTool failed ****** schemaTool failed ***&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13625961">HIVE-29130</key>
            <summary>Remove jline 2.x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Aggarwal_Raghav">Raghav Aggarwal</assignee>
                                    <reporter username="Aggarwal_Raghav">Raghav Aggarwal</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 9 Aug 2025 15:04:18 +0000</created>
                <updated>Fri, 26 Sep 2025 05:12:53 +0000</updated>
                            <resolved>Fri, 26 Sep 2025 05:12:53 +0000</resolved>
                                                    <fixVersion>4.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18012993" author="JIRAUSER295901" created="Sat, 9 Aug 2025 15:08:21 +0000"  >&lt;p&gt;CC &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abstractdog&quot; class=&quot;user-hover&quot; rel=&quot;abstractdog&quot;&gt;abstractdog&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="18012994" author="JIRAUSER295901" created="Sat, 9 Aug 2025 15:17:35 +0000"  >&lt;p&gt;Few things, In my personal opinion, are not user friendly:&lt;/p&gt;

&lt;p&gt;1. the number of rows affected is in same line as of query!!&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
0: jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive&amp;gt; INSERT INTO `CTLGS` VALUES (1, &lt;span class=&quot;code-quote&quot;&gt;&apos;hive&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;Default catalog &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Hive&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;TBD&apos;&lt;/span&gt;, NULL)1 row affected (0.001 seconds) &lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2. For multiple query it results time taken at the end as shown in consolidated_time_taken.png (under attachment).&lt;/p&gt;</comment>
                            <comment id="18014311" author="JIRAUSER295901" created="Sat, 16 Aug 2025 18:56:54 +0000"  >&lt;p&gt;Update:&lt;/p&gt;

&lt;p&gt;On debugging, i found the issue was because of &lt;b&gt;NoSuchMethodError &lt;em&gt;org.jline.reader.EndOfFileException#getPartialLine()&lt;/em&gt;&lt;/b&gt; because hadoop&apos;s jline 3.9.0 is coming first in classpath which doesn&apos;t have this method. Attaching screenshot for the same in attachements (NoSuchMethodError.png).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=abstractdog&quot; class=&quot;user-hover&quot; rel=&quot;abstractdog&quot;&gt;abstractdog&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt;&#160; can you please test in your env as well to confirm to rule out env specific issues?&lt;/p&gt;</comment>
                            <comment id="18014312" author="JIRAUSER295901" created="Sat, 16 Aug 2025 18:59:46 +0000"  >&lt;p&gt;Also, after ensuring hive jline&apos;s gets picked up the, &lt;b&gt;the schematool in verbose mode is not showing the queries. The behaviour of verbose flag has changed.&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Connecting to jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive
&lt;/span&gt;Connected to: MySQL (version 9.3.0)
Driver: MySQL Connector/J (version mysql-connector-j-9.3.0 (Revision: 20ef8ee9eb4294a03858acccea0ddad3525f1ff9))
Transaction isolation: TRANSACTION_READ_COMMITTED
0: jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive&amp;gt; Autocommit status: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;0: jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive&amp;gt; No rows affected (0.003 seconds)
&lt;/span&gt;0: jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive&amp;gt; No rows affected (0.002 seconds)
&lt;/span&gt;0: jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive&amp;gt; No rows affected (0.001 seconds)
&lt;/span&gt;....
0: jdbc:mysql:&lt;span class=&quot;code-comment&quot;&gt;//localhost:3307/hive&amp;gt; Closing: 0: jdbc:mysql://localhost:3307/hive
&lt;/span&gt;beeline&amp;gt; beeline&amp;gt; Initialization script completed &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18022989" author="abstractdog" created="Fri, 26 Sep 2025 05:12:49 +0000"  >&lt;p&gt;merged to master, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Aggarwal_Raghav&quot; class=&quot;user-hover&quot; rel=&quot;Aggarwal_Raghav&quot;&gt;Aggarwal_Raghav&lt;/a&gt; for the patch!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13398788">HIVE-25495</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13078007" name="NoSuchMethodError.png" size="1575870" author="Aggarwal_Raghav" created="Sat, 16 Aug 2025 18:53:07 +0000"/>
                            <attachment id="13077908" name="consolidated_time_taken.png" size="467766" author="Aggarwal_Raghav" created="Sat, 9 Aug 2025 15:15:28 +0000"/>
                            <attachment id="13077905" name="schemaTool_with_Jline3.txt" size="59831" author="Aggarwal_Raghav" created="Sat, 9 Aug 2025 15:08:09 +0000"/>
                            <attachment id="13077906" name="schemaTool_without_Jline3.txt" size="68163" author="Aggarwal_Raghav" created="Sat, 9 Aug 2025 15:08:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1x6o8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>