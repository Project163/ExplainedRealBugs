<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:20:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-23756] Added more constraints to the package.jdo file</title>
                <link>https://issues.apache.org/jira/browse/HIVE-23756</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Drop table command fails intermittently with the following exception.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.sql.BatchUpdateException: Cannot delete or update a parent row: a foreign key constraint fails (&lt;span class=&quot;code-quote&quot;&gt;&quot;metastore&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2&quot;&lt;/span&gt;, CONSTRAINT &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2_FK1&quot;&lt;/span&gt; FOREIGN KEY (&lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt;) REFERENCES &lt;span class=&quot;code-quote&quot;&gt;&quot;CDS&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt;)) App &amp;gt; at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1815)at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1277) Appat org.datanucleus.store.rdbms.ParamLoggingPreparedStatement.executeBatch(ParamLoggingPreparedStatement.java:372)
at org.datanucleus.store.rdbms.SQLController.processConnectionStatement(SQLController.java:628)
at org.datanucleus.store.rdbms.SQLController.getStatementForUpdate(SQLController.java:207)
at org.datanucleus.store.rdbms.SQLController.getStatementForUpdate(SQLController.java:179)
at org.datanucleus.store.rdbms.scostore.JoinMapStore.clearInternal(JoinMapStore.java:901)
... 36 more 
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (&lt;span class=&quot;code-quote&quot;&gt;&quot;metastore&quot;&lt;/span&gt;.&lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2&quot;&lt;/span&gt;, CONSTRAINT &lt;span class=&quot;code-quote&quot;&gt;&quot;COLUMNS_V2_FK1&quot;&lt;/span&gt; FOREIGN KEY (&lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt;) REFERENCES &lt;span class=&quot;code-quote&quot;&gt;&quot;CDS&quot;&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;CD_ID&quot;&lt;/span&gt;))
at sun.reflect.GeneratedConstructorAccessor121.newInstance(Unknown Source)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
at com.mysql.jdbc.Util.handleNewInstance(Util.java:377)
at com.mysql.jdbc.Util.getInstance(Util.java:360)
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:971)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3887)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3823)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Although&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-19994&quot; title=&quot;Impala &amp;quot;drop table&amp;quot; fails with Hive Metastore exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-19994&quot;&gt;&lt;del&gt;HIVE-19994&lt;/del&gt;&lt;/a&gt; resolves this issue, the FK constraint name of COLUMNS_V2 table specified in package.jdo file is not same as the FK constraint name used while creating COLUMNS_V2 table (&lt;a href=&quot;#L60&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Ref&lt;/a&gt;]).&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13313222">HIVE-23756</key>
            <summary>Added more constraints to the package.jdo file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scarlin">Steve Carlin</assignee>
                                    <reporter username="ganeshas">Ganesha S</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 24 Jun 2020 09:55:48 +0000</created>
                <updated>Tue, 27 Feb 2024 22:24:01 +0000</updated>
                            <resolved>Fri, 4 Jun 2021 18:41:30 +0000</resolved>
                                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="6600">1h 50m</timespent>
                                <comments>
                            <comment id="17143719" author="ganeshas" created="Wed, 24 Jun 2020 09:59:49 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karthik.manamcheri&quot; class=&quot;user-hover&quot; rel=&quot;karthik.manamcheri&quot;&gt;karthik.manamcheri&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;&#160;Please review the patch.&#160;&lt;/p&gt;</comment>
                            <comment id="17143929" author="ngangam" created="Wed, 24 Jun 2020 15:28:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ganeshas&quot; class=&quot;user-hover&quot; rel=&quot;ganeshas&quot;&gt;ganeshas&lt;/a&gt; Have you been able to reproduce this locally ? Have you confirmed the fix resolves the issue? Appears like the fix should resolve the issue but just curious why we haven&apos;t seen this sooner. Thanks&lt;/p&gt;</comment>
                            <comment id="17143966" author="ganeshas" created="Wed, 24 Jun 2020 15:59:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;&#160;I couldn&apos;t reproduce this locally. This issue was intermittent. But we were getting the same issue even after back porting the fix available in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-19994&quot; title=&quot;Impala &amp;quot;drop table&amp;quot; fails with Hive Metastore exception&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-19994&quot;&gt;&lt;del&gt;HIVE-19994&lt;/del&gt;&lt;/a&gt;. Also, it was reported in the same ticket that using FK constraint name as `COLUMNS_V2_FK` was not working and user had to use the exact FK constraint name which is `COLUMNS_V2_FK1`(Ref: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-19994?focusedCommentId=16895036&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-16895036&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;this comment&lt;/a&gt;).&#160;&lt;/p&gt;</comment>
                            <comment id="17270318" author="kenrick veit" created="Fri, 22 Jan 2021 17:39:41 +0000"  >&lt;p&gt;Is it an acceptable work around to change these two foreign key constraints in the metastore to be on delete cascade?&lt;/p&gt;</comment>
                            <comment id="17325194" author="ngangam" created="Mon, 19 Apr 2021 17:17:03 +0000"  >&lt;p&gt;+1 on this patch.&lt;/p&gt;</comment>
                            <comment id="17357560" author="jcamacho" created="Fri, 4 Jun 2021 18:41:30 +0000"  >&lt;p&gt;Pushed to master, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scarlin&quot; class=&quot;user-hover&quot; rel=&quot;scarlin&quot;&gt;scarlin&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13168301">HIVE-19994</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13381595">HIVE-25186</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13006326" name="HIVE-23756.1.patch" size="718" author="ganeshas" created="Wed, 24 Jun 2020 09:57:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0g5ko:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>