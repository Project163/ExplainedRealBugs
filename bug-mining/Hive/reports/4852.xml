<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:47:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-14513] Enhance custom query feature in LDAP atn to support resultset of ldap groups</title>
                <link>https://issues.apache.org/jira/browse/HIVE-14513</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;LDAP Authenticator can be configured to use a result set from a LDAP query to authenticate. However, is it expected that this LDAP query would only result a set of users (aka full DNs for the users in LDAP).&lt;br/&gt;
However, its not always straightforward to be able to author queries that return users. For example, say you would like to allow &quot;all users from group1 and group2&quot; to be authenticated. The LDAP query has to return a union of all members of the group1 and group2.&lt;/p&gt;

&lt;p&gt;For example, one common configuration is that groups contain a list of its users&lt;br/&gt;
      &quot;dn: uid=group1,ou=Groups,dc=example,dc=com&quot;,&lt;br/&gt;
      &quot;distinguishedName: uid=group1,ou=Groups,dc=example,dc=com&quot;,&lt;br/&gt;
      &quot;objectClass: top&quot;,&lt;br/&gt;
      &quot;objectClass: groupOfNames&quot;,&lt;br/&gt;
      &quot;objectClass: ExtensibleObject&quot;,&lt;br/&gt;
      &quot;cn: group1&quot;,&lt;br/&gt;
      &quot;ou: Groups&quot;,&lt;br/&gt;
      &quot;sn: group1&quot;,&lt;br/&gt;
      &quot;member: uid=user1,ou=People,dc=example,dc=com&quot;,&lt;/p&gt;

&lt;p&gt;The query &lt;br/&gt;
&lt;tt&gt;(&amp;amp;(objectClass=groupOfNames)(|(cn=group1)(cn=group2)))&lt;/tt&gt;&lt;br/&gt;
will return the entries&lt;br/&gt;
uid=group1,ou=Groups,dc=example,dc=com&lt;br/&gt;
uid=group2,ou=Groups,dc=example,dc=com&lt;/p&gt;

&lt;p&gt;but there is no means to form a query that would return just the values of &quot;member&quot; attributes. (ldap client tools are able to do by filtering out the attributes on these entries.&lt;/p&gt;

&lt;p&gt;So it will be useful to have such support to be able to specify queries that return groups.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12996387">HIVE-14513</key>
            <summary>Enhance custom query feature in LDAP atn to support resultset of ldap groups</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ngangam">Naveen Gangam</assignee>
                                    <reporter username="ngangam">Naveen Gangam</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2016 19:44:58 +0000</created>
                <updated>Thu, 8 Dec 2016 14:09:57 +0000</updated>
                            <resolved>Fri, 12 Aug 2016 15:32:25 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>2.1.1</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15416219" author="ngangam" created="Wed, 10 Aug 2016 23:48:09 +0000"  >&lt;p&gt;The proposed fix uses an existing LDAP configuration property &lt;tt&gt;hive.server2.authentication.ldap.groupMembershipKey&lt;/tt&gt; to find the users if the user-configured LDAP query returns a group instead of a user. This property is already used for group filters.&lt;/p&gt;</comment>
                            <comment id="15417364" author="ngangam" created="Thu, 11 Aug 2016 14:50:09 +0000"  >&lt;p&gt;review posted to reviewboard at &lt;a href=&quot;https://reviews.apache.org/r/50970/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/50970/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15417435" author="ctang.ma" created="Thu, 11 Aug 2016 15:31:39 +0000"  >&lt;p&gt;+1 Pending on tests&lt;/p&gt;</comment>
                            <comment id="15417631" author="hiveqa" created="Thu, 11 Aug 2016 17:28:24 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12823145/HIVE-14513.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12823145/HIVE-14513.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10408 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMsgBusConnection - did not produce a TEST-*.xml file
TestQueryLifeTimeHook - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_orc_llap_counters
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/854/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/854/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/854/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/854/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-854/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-204-236-174-241.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-854/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12823145 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15417758" author="ngangam" created="Thu, 11 Aug 2016 19:06:29 +0000"  >&lt;p&gt;There is just ONE test failure which had not failed in the prior build. Looking at the test, I do not see how this fix could cause that failure. There are bunch of exceptions when running the test, so I suspect it is a result of those. running locally fails with different output that shown here.&lt;/p&gt;</comment>
                            <comment id="15418026" author="ngangam" created="Thu, 11 Aug 2016 22:07:06 +0000"  >&lt;p&gt;The same test failed in another build (2 builds after mine)&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/view/H-L/view/Hive/job/PreCommit-HIVE-MASTER-Build/856/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/view/H-L/view/Hive/job/PreCommit-HIVE-MASTER-Build/856/&lt;/a&gt;&lt;br/&gt;
So this does appear to be a flaky test. So the fix looks good. +1 for me.&lt;/p&gt;</comment>
                            <comment id="15419006" author="ctang.ma" created="Fri, 12 Aug 2016 15:32:25 +0000"  >&lt;p&gt;Committed to 2.2.0 and 2.1.1. Thanks Naveen for the patch.&lt;/p&gt;</comment>
                            <comment id="15419259" author="ngangam" created="Fri, 12 Aug 2016 18:24:50 +0000"  >&lt;p&gt;Thanks Chaoyu for review and the commit.&lt;/p&gt;</comment>
                            <comment id="15419849" author="lefty@hortonworks.com" created="Sat, 13 Aug 2016 08:34:27 +0000"  >&lt;p&gt;Should this be documented in the wiki?&lt;/p&gt;</comment>
                            <comment id="15421007" author="ngangam" created="Mon, 15 Aug 2016 14:10:10 +0000"  >
&lt;p&gt;I already documented this feature this in the past but yes, I plan on enhancing it at &lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/User+and+Group+Filter+Support+with+LDAP+Atn+Provider+in+HiveServer2#UserandGroupFilterSupportwithLDAPAtnProviderinHiveServer2-CustomQueryString&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/User+and+Group+Filter+Support+with+LDAP+Atn+Provider+in+HiveServer2#UserandGroupFilterSupportwithLDAPAtnProviderinHiveServer2-CustomQueryString&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;which needed a bit more details to begin with. I do not think it was clear as to what the custom query should result in.&lt;/p&gt;</comment>
                            <comment id="15421097" author="ngangam" created="Mon, 15 Aug 2016 14:57:42 +0000"  >
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; I have update the LDAP authentication configuration documentation &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/User+and+Group+Filter+Support+with+LDAP+Atn+Provider+in+HiveServer2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. Could you please review it to make it consistent with other pages? Thank you in advance&lt;/p&gt;</comment>
                            <comment id="15430298" author="lefty@hortonworks.com" created="Mon, 22 Aug 2016 08:30:24 +0000"  >&lt;p&gt;Good docs, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;.  I made a few format changes and minor edits, and added information about this issue to &lt;b&gt;hive.server2.authentication.ldap.groupMembershipKey&lt;/b&gt; in Configuration Properties.&lt;/p&gt;

&lt;p&gt;One question:  Is the repetition of the word &quot;represents&quot; correct in this sentence (or should it be reworded?): &quot;This property represents the attribute name that represents the user DN on the Group entry.&quot;  I tinkered with alternatives but didn&apos;t want to change the meaning, so left it unchanged.&lt;/p&gt;

&lt;p&gt;Here are the specific doc links:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/User+and+Group+Filter+Support+with+LDAP+Atn+Provider+in+HiveServer2#UserandGroupFilterSupportwithLDAPAtnProviderinHiveServer2-SupportforGroupsinCustomLDAPQuery&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Support for Groups in Custom LDAP Query &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.authentication.ldap.groupMembershipKey&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.server2.authentication.ldap.groupMembershipKey &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15431190" author="ngangam" created="Mon, 22 Aug 2016 16:58:12 +0000"  >&lt;p&gt;&lt;br/&gt;
Thanks for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;. So with &quot;represents&quot; I meant to indicate that the value for that hive property maps to the attribute name (on the LDAP entries). If there is a better means to express it, please feel free to change it. Thank you again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12823145" name="HIVE-14513.patch" size="9081" author="ngangam" created="Wed, 10 Aug 2016 23:48:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i325wn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>