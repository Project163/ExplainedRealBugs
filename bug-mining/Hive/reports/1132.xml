<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:04:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3849] Aliased column in where clause for multi-groupby single reducer cannot be resolved</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3849</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Verifying &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3847&quot; title=&quot;ppd.remove.duplicatefilters removing filters too aggressively&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3847&quot;&gt;&lt;del&gt;HIVE-3847&lt;/del&gt;&lt;/a&gt;, I&apos;ve found an exception is thrown before meeting the error situation described in it. Something like, &lt;/p&gt;

&lt;p&gt;FAILED: SemanticException &lt;span class=&quot;error&quot;&gt;&amp;#91;Error 10025&amp;#93;&lt;/span&gt;: Line 40:6 Expression not in GROUP BY key &apos;crit5&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12625549">HIVE-3849</key>
            <summary>Aliased column in where clause for multi-groupby single reducer cannot be resolved</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="navis">Navis Ryu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 31 Dec 2012 03:33:53 +0000</created>
                <updated>Thu, 16 May 2013 21:10:05 +0000</updated>
                            <resolved>Thu, 28 Feb 2013 17:21:00 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13541272" author="phabricator@reviews.facebook.net" created="Mon, 31 Dec 2012 04:52:11 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Verifying &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3847&quot; title=&quot;ppd.remove.duplicatefilters removing filters too aggressively&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3847&quot;&gt;&lt;del&gt;HIVE-3847&lt;/del&gt;&lt;/a&gt;, I&apos;ve found an exception is thrown before meeting the error situation described in it. Something like,&lt;/p&gt;

&lt;p&gt;  FAILED: SemanticException &lt;span class=&quot;error&quot;&gt;&amp;#91;Error 10025&amp;#93;&lt;/span&gt;: Line 40:6 Expression not in GROUP BY key &apos;crit5&apos;&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/DDLTask.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/Hive.g&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/CreateViewDesc.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/alter_view_as_select_not_exist.q&lt;br/&gt;
  ql/src/test/queries/clientnegative/alter_view_as_select_with_partition.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/alter_view_as_select.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientnegative/alter_view_as_select_not_exist.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/alter_view_as_select_with_partition.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/create_or_replace_view1.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/create_or_replace_view2.q.out&lt;br/&gt;
  ql/src/test/results/clientnegative/create_or_replace_view3.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/alter_view_as_select.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/create_view.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/18501/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/18501/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13541273" author="phabricator@reviews.facebook.net" created="Mon, 31 Dec 2012 04:54:12 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  rebased to trunk&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13541959" author="navis" created="Wed, 2 Jan 2013 01:04:54 +0000"  >&lt;p&gt;Passed all tests&lt;/p&gt;</comment>
                            <comment id="13541994" author="namit" created="Wed, 2 Jan 2013 04:59:49 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13541995" author="phabricator@reviews.facebook.net" created="Wed, 2 Jan 2013 05:00:11 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q:50 Do you need to have mapjoin hint in the query ?&lt;/p&gt;

&lt;p&gt;  I am trying to remove support for mapjoin hint whenever possible.&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3784&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-3784&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;  and this test may not work.&lt;/p&gt;

&lt;p&gt;  Even if it does, do you need a map-join hint.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13542001" author="phabricator@reviews.facebook.net" created="Wed, 2 Jan 2013 05:16:11 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q:50 It&apos;s reported query as not working from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2791&quot; title=&quot;filter is still removed due to regression of HIVE-1538 althougth HIVE-2344&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2791&quot;&gt;&lt;del&gt;HIVE-2791&lt;/del&gt;&lt;/a&gt; and too complicated for me to simplify. I&apos;ll look into this more.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13542922" author="phabricator@reviews.facebook.net" created="Thu, 3 Jan 2013 13:24:12 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Removed MapJoin hint from test case&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13546734" author="namit" created="Tue, 8 Jan 2013 09:37:17 +0000"  >&lt;p&gt;comments on phabricator&lt;/p&gt;</comment>
                            <comment id="13546736" author="phabricator@reviews.facebook.net" created="Tue, 8 Jan 2013 09:38:11 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q:5 Why not have the same test with hive.optimize.ppd set to true also ?&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q:7 Can you add a test where there is an expression on the where clause ?&lt;/p&gt;

&lt;p&gt;  from src&lt;br/&gt;
  insert overwrite table e1&lt;br/&gt;
  select value, count&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
  where src.key + src.key = 100 or src.key + 7 = 207 or src.key = 300&lt;br/&gt;
  group by value&lt;br/&gt;
  .....&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13554777" author="phabricator@reviews.facebook.net" created="Wed, 16 Jan 2013 06:06:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Addressed comments&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13558199" author="ashutoshc" created="Sun, 20 Jan 2013 08:04:50 +0000"  >&lt;p&gt;+1 Running tests.&lt;/p&gt;</comment>
                            <comment id="13558356" author="ashutoshc" created="Sun, 20 Jan 2013 19:46:36 +0000"  >&lt;p&gt;All the tests passed except groupby_multi_single_reducer3.q Navis can you take a look.&lt;/p&gt;</comment>
                            <comment id="13558445" author="navis" created="Sun, 20 Jan 2013 23:58:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3699&quot; title=&quot;Multiple insert overwrite into multiple tables query stores same results in all tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3699&quot;&gt;&lt;del&gt;HIVE-3699&lt;/del&gt;&lt;/a&gt; changed test result. Fixed that.&lt;/p&gt;</comment>
                            <comment id="13558446" author="phabricator@reviews.facebook.net" created="Sun, 20 Jan 2013 23:58:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Fixed test result which is affected by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3699&quot; title=&quot;Multiple insert overwrite into multiple tables query stores same results in all tables&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3699&quot;&gt;&lt;del&gt;HIVE-3699&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13558533" author="phabricator@reviews.facebook.net" created="Mon, 21 Jan 2013 04:54:12 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:8704 Can you fix the comments ?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:8654 Can you add some comments for this function ?&lt;br/&gt;
  Detailed comments would really help in maintaining it in the long term.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3571 Either change the name of the function or add a lot of comments.&lt;br/&gt;
  You are not removing from keys, from removing keys from the mapping passed in.&lt;/p&gt;

&lt;p&gt;  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3540 Add some comments here.&lt;/p&gt;

&lt;p&gt;  Some of the expressions are already passed in the reduce Keys - they need not be&lt;br/&gt;
  passed again in the values. A example query would really help.&lt;/p&gt;




&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13558535" author="namit" created="Mon, 21 Jan 2013 04:57:42 +0000"  >&lt;p&gt;minor comments&lt;/p&gt;</comment>
                            <comment id="13567743" author="ashutoshc" created="Thu, 31 Jan 2013 16:01:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; Lets try to get this in. Would you like to address Namit&apos;s comments?&lt;/p&gt;</comment>
                            <comment id="13568291" author="phabricator@reviews.facebook.net" created="Fri, 1 Feb 2013 00:33:11 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3540 I&apos;ve seen it&apos;s booked on other issue.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3571 added comments.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:8654 added comments.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:8704 fiexed.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13568292" author="phabricator@reviews.facebook.net" created="Fri, 1 Feb 2013 00:35:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Addressed comments&lt;/p&gt;


&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13568366" author="ashutoshc" created="Fri, 1 Feb 2013 01:44:48 +0000"  >&lt;p&gt;Thanks Navis for update. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=namit&quot; class=&quot;user-hover&quot; rel=&quot;namit&quot;&gt;namit&lt;/a&gt; would you like to take a look?&lt;/p&gt;</comment>
                            <comment id="13568468" author="namit" created="Fri, 1 Feb 2013 04:35:11 +0000"  >&lt;p&gt;Yes, let me take a look&lt;/p&gt;</comment>
                            <comment id="13568503" author="namit" created="Fri, 1 Feb 2013 05:41:03 +0000"  >&lt;p&gt;comments&lt;/p&gt;</comment>
                            <comment id="13568505" author="phabricator@reviews.facebook.net" created="Fri, 1 Feb 2013 05:43:12 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3537 Do you think it would be easier to change genAllExprNodeDesc to return&lt;br/&gt;
  Map&amp;lt;ASTNode, ExprNodeDesc&amp;gt; ?&lt;/p&gt;

&lt;p&gt;  It might involve a change in TypeCheckProcFactory, but it will make it&lt;br/&gt;
  much more readable.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3548 nit: formatting&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3569 Can you add correct comments for this function ?&lt;/p&gt;

&lt;p&gt;  The predicates will be removed from mapping if they are passed in keys&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q:8 It might be a good idea to add a test where the grouping key is present in&lt;br/&gt;
  the where clause.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13570908" author="phabricator@reviews.facebook.net" created="Tue, 5 Feb 2013 03:16:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;  For addressing comment, I&apos;ve generified some important entities and found it&apos;s affeting many classes.&lt;br/&gt;
  @namit; I think this is not what you expected, or is it?&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713?vs=26973&amp;amp;id=27243#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713?vs=26973&amp;amp;id=27243#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Operator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/Task.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/index/IndexPredicateAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/DefaultGraphWalker.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/DefaultRuleDispatcher.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/Dispatcher.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/GraphWalker.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/Node.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/NodeProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/PreOrderWalker.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/Rule.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/RuleExactMatch.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/RuleRegExp.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/TaskGraphWalker.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/lib/Utils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ColumnPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ColumnPrunerProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRFileSink1.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMROperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRRedSink1.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRRedSink2.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRRedSink3.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRTableScan1.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMRUnion1.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/PrunerExpressionOperatorFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/PrunerOperatorFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ReduceSinkDeDuplication.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SamplePruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SkewJoinOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SortedMergeBucketMapJoinOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteCanApplyCtx.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteCanApplyProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteQueryUsingAggregateIndex.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/index/RewriteQueryUsingAggregateIndexCtx.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/lineage/ExprProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/lineage/OpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/BucketingSortingOpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/CommonJoinResolver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/LocalMapJoinProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MapJoinResolver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/MetadataOnlyOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/SkewJoinProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/SkewJoinResolver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/physical/index/IndexWhereTaskDispatcher.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/unionproc/UnionProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ASTNode.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/BaseSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/DDLSemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/PrintOpTreeProcessor.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TableAccessAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeDesc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/ExprWalkerProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/OpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ppd/PredicateTransitivePropagate.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/tools/LineageInfo.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13576300" author="ashutoshc" created="Tue, 12 Feb 2013 02:15:19 +0000"  >&lt;p&gt;This is touching up on way too many files. I think we should do this refactoring in another jira.&lt;/p&gt;</comment>
                            <comment id="13589009" author="phabricator@reviews.facebook.net" created="Thu, 28 Feb 2013 01:33:12 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3537 done.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3548 ok.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java:3569 done.&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q:8 ah, got it.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13589010" author="phabricator@reviews.facebook.net" created="Thu, 28 Feb 2013 01:33:13 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;  Addressed comments and rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713?vs=27243&amp;amp;id=28815#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713?vs=27243&amp;amp;id=28815#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;br/&gt;
  ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13589352" author="phabricator@reviews.facebook.net" created="Thu, 28 Feb 2013 08:51:11 +0000"  >&lt;p&gt;njain has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;  I will take a look&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13589362" author="phabricator@reviews.facebook.net" created="Thu, 28 Feb 2013 09:13:11 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; Columns are not extracted for multi-groupby single reducer case somtimes&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7713&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7713&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1948&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, navis&lt;br/&gt;
Cc: njain&lt;/p&gt;</comment>
                            <comment id="13589678" author="namit" created="Thu, 28 Feb 2013 17:21:00 +0000"  >&lt;p&gt;Committed. Thanks Navis&lt;/p&gt;</comment>
                            <comment id="13623037" author="hudson" created="Thu, 4 Apr 2013 23:39:54 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #138 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3849&quot; title=&quot;Aliased column in where clause for multi-groupby single reducer cannot be resolved&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3849&quot;&gt;&lt;del&gt;HIVE-3849&lt;/del&gt;&lt;/a&gt; Aliased column in where clause for multi-groupby single reducer cannot&lt;br/&gt;
be resolved (Navis via namit) (Revision 1451259)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1451259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1451259&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/TypeCheckProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_multi_insert_common_distinct.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_multi_single_reducer3.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/groupby_mutli_insert_common_distinct.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_multi_insert_common_distinct.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_multi_single_reducer3.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/groupby_mutli_insert_common_distinct.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12562753" name="HIVE-3849.D7713.1.patch" size="90432" author="phabricator@reviews.facebook.net" created="Mon, 31 Dec 2012 04:52:11 +0000"/>
                            <attachment id="12562754" name="HIVE-3849.D7713.2.patch" size="68477" author="phabricator@reviews.facebook.net" created="Mon, 31 Dec 2012 04:54:12 +0000"/>
                            <attachment id="12563072" name="HIVE-3849.D7713.3.patch" size="65192" author="phabricator@reviews.facebook.net" created="Thu, 3 Jan 2013 13:24:12 +0000"/>
                            <attachment id="12565081" name="HIVE-3849.D7713.4.patch" size="99470" author="phabricator@reviews.facebook.net" created="Wed, 16 Jan 2013 06:06:11 +0000"/>
                            <attachment id="12565717" name="HIVE-3849.D7713.5.patch" size="100362" author="phabricator@reviews.facebook.net" created="Sun, 20 Jan 2013 23:58:11 +0000"/>
                            <attachment id="12567466" name="HIVE-3849.D7713.6.patch" size="101974" author="phabricator@reviews.facebook.net" created="Fri, 1 Feb 2013 00:35:11 +0000"/>
                            <attachment id="12567947" name="HIVE-3849.D7713.7.patch" size="225625" author="phabricator@reviews.facebook.net" created="Tue, 5 Feb 2013 03:16:11 +0000"/>
                            <attachment id="12571330" name="HIVE-3849.D7713.8.patch" size="102028" author="phabricator@reviews.facebook.net" created="Thu, 28 Feb 2013 01:33:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>302093</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16yk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248734</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>