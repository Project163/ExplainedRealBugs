<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:17:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-23716] Support Anti Join in Hive </title>
                <link>https://issues.apache.org/jira/browse/HIVE-23716</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently hive does not support Anti join. The query for anti join is converted to left outer join and null filter on right side join key is added to get the desired result. This is causing&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Extra computation &#8212; The left outer join projects the redundant columns from right side. Along with that, filtering is done to remove the redundant rows. This is can be avoided in case of anti join as anti join will project only the required columns and rows from the left side table.&lt;/li&gt;
	&lt;li&gt;Extra shuffle &#8212; In case of anti join the duplicate records moved to join node can be avoided from the child node. This can reduce significant amount of data movement if the number of distinct rows( join keys) is significant.&lt;/li&gt;
	&lt;li&gt;Extra Memory Usage - In case of map based anti join , hash set is sufficient as just the key is required to check&#160; if the records matches the join condition. In case of left join, we need the key and the non key columns also and thus a hash table will be required.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;For a query like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 select wr_order_number FROM web_returns LEFT JOIN web_sales&#160; ON wr_order_number = ws_order_number WHERE ws_order_number IS NULL;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The number of distinct ws_order_number in web_sales table in a typical 10TB TPCDS set up is just 10% of total records. So when we convert this query to anti join, instead of 7 billion rows, only 600 million rows are moved to join node.&lt;/p&gt;

&lt;p&gt;In the current patch, just one conversion is done. The pattern of project-&amp;gt;filter-&amp;gt;left-join is converted to project-&amp;gt;anti-join. This will take care of sub queries with &#8220;not exists&#8221; clause. The queries with &#8220;not exists&#8221; are converted first to filter + left-join and then its converted to anti join. The queries with &#8220;not in&#8221; are not handled in the current patch.&lt;/p&gt;

&lt;p&gt;From execution side, both merge join and map join with vectorized execution&#160; is supported for anti join.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13312017">HIVE-23716</key>
            <summary>Support Anti Join in Hive </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="maheshk114">mahesh kumar behera</assignee>
                                    <reporter username="maheshk114">mahesh kumar behera</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 17 Jun 2020 18:08:19 +0000</created>
                <updated>Tue, 27 Feb 2024 22:23:53 +0000</updated>
                            <resolved>Sat, 8 Aug 2020 01:23:09 +0000</resolved>
                                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="60600">16h 50m</timespent>
                                <comments>
                            <comment id="17161706" author="pvary" created="Tue, 21 Jul 2020 05:06:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maheshk114&quot; class=&quot;user-hover&quot; rel=&quot;maheshk114&quot;&gt;maheshk114&lt;/a&gt;: How efficient would be this implementation for ACID delete_deltas? Currently we use ACID specific readers to read ACID files, and remove deleted rows, but using anti-joins we can automatically get the perf benefits of LLAP IO cache for delete deltas too.&lt;/p&gt;</comment>
                            <comment id="17173532" author="jcamacho" created="Sat, 8 Aug 2020 01:16:24 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="17173535" author="jcamacho" created="Sat, 8 Aug 2020 01:23:09 +0000"  >&lt;p&gt;Pushed to master. This is great, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=maheshk114&quot; class=&quot;user-hover&quot; rel=&quot;maheshk114&quot;&gt;maheshk114&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13489033">HIVE-26659</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13439185">HIVE-26135</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13318833">HIVE-23903</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13318835">HIVE-23904</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13318836">HIVE-23905</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13318850">HIVE-23906</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13318851">HIVE-23907</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13319077">HIVE-23919</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13319088">HIVE-23920</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13319090">HIVE-23921</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13319146">HIVE-23928</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13321004">HIVE-23991</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13321005">HIVE-23992</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13321438">HIVE-24013</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13427998">HIVE-25953</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13005975" name="HIVE-23716.01.patch" size="161940" author="maheshk114" created="Thu, 18 Jun 2020 14:00:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0fy5s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>