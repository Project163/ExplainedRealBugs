<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:36:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-11340] Create ORC based table using like clause doesn&apos;t copy compression property</title>
                <link>https://issues.apache.org/jira/browse/HIVE-11340</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I found a issue in &#8220;create table like&#8221; clause, as it is not copying the table properties from ORC File format based table.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
Step1 :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table orc_table (
time string)
stored as ORC tblproperties (&lt;span class=&quot;code-quote&quot;&gt;&quot;orc.compress&quot;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;SNAPPY&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Step 2:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; 
create table orc_table_using_like like orc_table;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Step 3:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;show create table orc_table_using_like;  
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Result:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;createtab_stmt
CREATE TABLE `orc_table_using_like`(
  `time` string)
ROW FORMAT SERDE 
  &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.hadoop.hive.ql.io.orc.OrcSerde&apos;&lt;/span&gt; 
STORED AS INPUTFORMAT 
  &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.hadoop.hive.ql.io.orc.OrcInputFormat&apos;&lt;/span&gt; 
OUTPUTFORMAT 
  &lt;span class=&quot;code-quote&quot;&gt;&apos;org.apache.hadoop.hive.ql.io.orc.OrcOutputFormat&apos;&lt;/span&gt;
LOCATION
  &lt;span class=&quot;code-quote&quot;&gt;&apos;hdfs:&lt;span class=&quot;code-comment&quot;&gt;//nameservice1/user/hive/warehouse/gkohli.db/orc_table_using_like&apos;&lt;/span&gt;
&lt;/span&gt;TBLPROPERTIES (
  &lt;span class=&quot;code-quote&quot;&gt;&apos;transient_lastDdlTime&apos;&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&apos;1437578939&apos;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Issue:  &apos;orc.compress&apos;=&apos;SNAPPY&apos; property is missing&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12846925">HIVE-11340</key>
            <summary>Create ORC based table using like clause doesn&apos;t copy compression property</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ychena">Yongzhi Chen</assignee>
                                    <reporter username="gauravkohli">Gaurav Kohli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Jul 2015 15:30:09 +0000</created>
                <updated>Tue, 16 Feb 2016 23:51:27 +0000</updated>
                            <resolved>Tue, 11 Aug 2015 17:01:24 +0000</resolved>
                                    <version>0.14.0</version>
                    <version>1.0.0</version>
                    <version>1.2.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>File Formats</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14637075" author="gauravkohli" created="Wed, 22 Jul 2015 15:31:04 +0000"  >&lt;p&gt;Workaround:&lt;/p&gt;

&lt;p&gt;create table orc_table_2 like orc_table tblproperties (&quot;orc.compress&quot;=&quot;SNAPPY&quot;);&lt;/p&gt;</comment>
                            <comment id="14659062" author="ychena" created="Wed, 5 Aug 2015 22:13:33 +0000"  >&lt;p&gt;Fix it by adding orc.compress to schemaProps&lt;/p&gt;</comment>
                            <comment id="14659064" author="ychena" created="Wed, 5 Aug 2015 22:14:38 +0000"  >&lt;p&gt;Need code review. &lt;/p&gt;</comment>
                            <comment id="14659866" author="ychena" created="Thu, 6 Aug 2015 11:39:24 +0000"  >&lt;p&gt;Not sure why the build has not run yet, priority too low? &lt;br/&gt;
Add more comments for easier to understand the change:&lt;br/&gt;
The fix is following same pattern as patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-8450&quot; title=&quot;Create table like does not copy over table properties&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-8450&quot;&gt;&lt;del&gt;HIVE-8450&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14660669" author="hiveqa" created="Thu, 6 Aug 2015 19:39:46 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12748942/HIVE-11340.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12748942/HIVE-11340.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 9324 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_index_bitmap3
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_stats_counter_partitioned
org.apache.hive.jdbc.TestSSL.testSSLConnectionWithProperty
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4848/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4848/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4848/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4848/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4848/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4848/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12748942 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14661151" author="ychena" created="Fri, 7 Aug 2015 01:08:29 +0000"  >&lt;p&gt;The 3 failures are not related.&lt;br/&gt;
The 2 Minimr failures all have the error:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Error 30017&amp;#93;&lt;/span&gt;: Skipping stats aggregation by error org.apache.hadoop.hive.ql.metadata.HiveException: &lt;span class=&quot;error&quot;&gt;&amp;#91;Error 30015&amp;#93;&lt;/span&gt;: Stats aggregator of type counter cannot be connected to&lt;br/&gt;
It may relate to network issue.&lt;br/&gt;
I tested them in my local machine, they all passed.&lt;br/&gt;
The testSSLConnectionWithProperty failure ages 5.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=csun&quot; class=&quot;user-hover&quot; rel=&quot;csun&quot;&gt;csun&lt;/a&gt;, could you review the patch? Thanks&lt;/p&gt;

</comment>
                            <comment id="14661866" author="ychena" created="Fri, 7 Aug 2015 14:04:26 +0000"  >&lt;p&gt;Add to RB:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/37218/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/37218/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14662232" author="ychena" created="Fri, 7 Aug 2015 18:33:42 +0000"  >&lt;p&gt;Change the test to use describe formatted.&lt;br/&gt;
It seems that in order not to be masked by the output, the property has to be explicitly used. Add get compress info in the OrcSerde initialize method. Also fix a bug in OrcConf.  &lt;/p&gt;</comment>
                            <comment id="14663253" author="hiveqa" created="Sun, 9 Aug 2015 04:12:44 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12749326/HIVE-11340.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12749326/HIVE-11340.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 7 failed/errored test(s), 9344 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.spark.client.TestSparkClient.testAddJarsAndFiles
org.apache.hive.spark.client.TestSparkClient.testCounters
org.apache.hive.spark.client.TestSparkClient.testErrorJob
org.apache.hive.spark.client.TestSparkClient.testJobSubmission
org.apache.hive.spark.client.TestSparkClient.testMetricsCollection
org.apache.hive.spark.client.TestSparkClient.testSimpleSparkJob
org.apache.hive.spark.client.TestSparkClient.testSyncRpc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4881/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4881/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4881/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4881/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4881/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4881/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 7 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12749326 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14679109" author="ychena" created="Sun, 9 Aug 2015 11:48:40 +0000"  >&lt;p&gt;The 7 SparkClient test failures are not related. They failed because TimeOutException. I tested them in my local machine, all passed:&lt;br/&gt;
-------------------------------------------------------&lt;br/&gt;
 T E S T S&lt;br/&gt;
-------------------------------------------------------&lt;br/&gt;
Running org.apache.hive.spark.client.TestSparkClient&lt;br/&gt;
Tests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 12.135 sec - in org.apache.hive.spark.client.TestSparkClient&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 8, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=csun&quot; class=&quot;user-hover&quot; rel=&quot;csun&quot;&gt;csun&lt;/a&gt;, could you review the new patch? Thanks. &lt;/p&gt;</comment>
                            <comment id="14680308" author="csun" created="Mon, 10 Aug 2015 16:15:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14682022" author="ychena" created="Tue, 11 Aug 2015 16:19:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=csun&quot; class=&quot;user-hover&quot; rel=&quot;csun&quot;&gt;csun&lt;/a&gt; for reviewing the patch. &lt;/p&gt;</comment>
                            <comment id="14682080" author="csun" created="Tue, 11 Aug 2015 17:01:24 +0000"  >&lt;p&gt;Committed this to the master branch. Seems this isn&apos;t applicable to the branch-1. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ychena&quot; class=&quot;user-hover&quot; rel=&quot;ychena&quot;&gt;ychena&lt;/a&gt;, please comment if you think this should also go into branch-1 as well. Thanks!&lt;/p&gt;</comment>
                            <comment id="15001548" author="sershe" created="Thu, 12 Nov 2015 02:12:21 +0000"  >&lt;p&gt;Should this issue be backported to branch-1? It looks like a bug.&lt;/p&gt;</comment>
                            <comment id="15036830" author="ychena" created="Wed, 2 Dec 2015 23:03:52 +0000"  >&lt;p&gt;Yes, I think so.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12748942" name="HIVE-11340.1.patch" size="4494" author="ychena" created="Wed, 5 Aug 2015 22:14:09 +0000"/>
                            <attachment id="12749326" name="HIVE-11340.2.patch" size="6259" author="ychena" created="Fri, 7 Aug 2015 18:34:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hk6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332154">1.3.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>