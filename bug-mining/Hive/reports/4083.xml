<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:39:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-12503] GBY-Join transpose rule may go in infinite loop</title>
                <link>https://issues.apache.org/jira/browse/HIVE-12503</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This happens when pushing aggregate is not found to be any cheaper. Can be reproduced by running cbo_rp_auto_join1.q with flag turned on.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12915663">HIVE-12503</key>
            <summary>GBY-Join transpose rule may go in infinite loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 Nov 2015 03:05:52 +0000</created>
                <updated>Tue, 27 Feb 2024 22:23:47 +0000</updated>
                            <resolved>Thu, 26 Nov 2015 19:41:47 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                    <component>CBO</component>
                    <component>Logical Optimizer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15023679" author="ashutoshc" created="Tue, 24 Nov 2015 03:08:07 +0000"  >&lt;p&gt;Use registry to identify if rule has been fired before.&lt;/p&gt;</comment>
                            <comment id="15023713" author="jpullokkaran" created="Tue, 24 Nov 2015 03:34:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; The new Join node needs to be registered as opposed to the old one.&lt;/p&gt;</comment>
                            <comment id="15023730" author="gopalv" created="Tue, 24 Nov 2015 03:53:15 +0000"  >&lt;p&gt;Nice, let me see if I include this into testing.&lt;/p&gt;</comment>
                            <comment id="15023811" author="ashutoshc" created="Tue, 24 Nov 2015 05:43:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jpullokkaran&quot; class=&quot;user-hover&quot; rel=&quot;jpullokkaran&quot;&gt;jpullokkaran&lt;/a&gt; suggested to do costing within the rule which makes sense, since this makes sure that rule mutates the plan only when it needs to, making it robust against the Planner idiosyncrasies. &lt;/p&gt;</comment>
                            <comment id="15024654" author="jcamacho" created="Tue, 24 Nov 2015 15:12:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;, what happens if you discard a transformation because locally it has a bigger cost, but it could lead to a better plan after applying more transformations? It seems wrong that the decision is taken by the rule; instead it should be taken by the planner. What do you think?&lt;/p&gt;</comment>
                            <comment id="15024713" author="ashutoshc" created="Tue, 24 Nov 2015 15:52:21 +0000"  >&lt;p&gt;Yup, currently we have kept this rule isolated from other rules, since we didn&apos;t want to have plan space grow for Hep Planner since it has scalability issue. This patch doesn&apos;t change that. Both before and after this patch, we are making a cost based decision for before and after applying this particular transformation. It is just shifting logic from HepPlanner::applyTransformationResults() to within the rule to avoid HePlanner::applyRules() go in infinite loop. When we test out HepPlanner scalability properly we can enable this rule to be fired in rule collections so that we can give a globally optimal plan.&lt;/p&gt;</comment>
                            <comment id="15024716" author="jcamacho" created="Tue, 24 Nov 2015 15:55:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;, makes sense, +1&lt;/p&gt;

&lt;p&gt;Do you think I should close &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12508&quot; title=&quot;HiveAggregateJoinTransposeRule places a heavy load on the metadata system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12508&quot;&gt;&lt;del&gt;HIVE-12508&lt;/del&gt;&lt;/a&gt; as duplicate, or do those changes make still sense to avoid the call to &lt;tt&gt;areColumnsUnique&lt;/tt&gt; till we fix &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-794&quot; title=&quot;Detect cycles when computing statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-794&quot;&gt;&lt;del&gt;CALCITE-794&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="15024723" author="ashutoshc" created="Tue, 24 Nov 2015 16:01:41 +0000"  >&lt;p&gt;I am not sure of impact of &lt;a href=&quot;https://issues.apache.org/jira/browse/CALCITE-794&quot; title=&quot;Detect cycles when computing statistics&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CALCITE-794&quot;&gt;&lt;del&gt;CALCITE-794&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;gopalv&lt;/a&gt; may test this patch out to see if he still sees that issue. If it still is the issue than we may need &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12508&quot; title=&quot;HiveAggregateJoinTransposeRule places a heavy load on the metadata system&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12508&quot;&gt;&lt;del&gt;HIVE-12508&lt;/del&gt;&lt;/a&gt; in addition to this patch. We can keep that open as we test this more.&lt;/p&gt;</comment>
                            <comment id="15028252" author="hiveqa" created="Thu, 26 Nov 2015 06:18:45 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12773990/HIVE-12503.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12773990/HIVE-12503.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 9864 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestHWISessionManager - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hive.jdbc.TestSSL.testSSLVersion
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6130/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6130/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6130/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6130/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6130/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6130/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12773990 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15029213" author="ashutoshc" created="Thu, 26 Nov 2015 19:41:47 +0000"  >&lt;p&gt;Pushed to master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12915787">HIVE-12508</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12773990" name="HIVE-12503.1.patch" size="20692" author="ashutoshc" created="Tue, 24 Nov 2015 05:43:12 +0000"/>
                            <attachment id="12773974" name="HIVE-12503.patch" size="12920" author="ashutoshc" created="Tue, 24 Nov 2015 03:08:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 51 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ouef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332641">2.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>