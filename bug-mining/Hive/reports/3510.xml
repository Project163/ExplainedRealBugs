<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:33:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10768] In QTestGenTask.execute() we should not throw an exception right away if we are unable to clean any old files</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10768</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently in QTestGenTask.execute(), we have code like :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;       &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (logFile != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
         File lf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(logFile);
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (lf.exists()) {
           &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!lf.delete()) {
             &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Exception(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not delete log file &quot;&lt;/span&gt; + lf.getCanonicalPath());
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If the log file gets locked due to some other process, it throws the above exception and short circuits the entire test suite. We should provide a mechanism to generate alternative new log files/temporary files whenever possible to avoid unit test failures.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12831295">HIVE-10768</key>
            <summary>In QTestGenTask.execute() we should not throw an exception right away if we are unable to clean any old files</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</assignee>
                                    <reporter username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 May 2015 07:30:28 +0000</created>
                <updated>Fri, 5 Jun 2015 20:57:33 +0000</updated>
                            <resolved>Wed, 27 May 2015 07:38:38 +0000</resolved>
                                                    <fixVersion>1.2.1</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14552322" author="xuefuz" created="Wed, 20 May 2015 13:33:33 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hsubramaniyan&quot; class=&quot;user-hover&quot; rel=&quot;hsubramaniyan&quot;&gt;hsubramaniyan&lt;/a&gt;, thanks for looking into this. A couple of comments/questions:&lt;br/&gt;
1. In what situation the file to be deleted might be locked by other process?&lt;br/&gt;
2. Would you consider using File.createTempFile(String prefix, String suffix) to generate unique file names rather than having your own?&lt;/p&gt;</comment>
                            <comment id="14552606" author="hsubramaniyan" created="Wed, 20 May 2015 16:23:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; Locking is more common in Windows OS where a user cannot delete file in use. In Linux, there is a round about way where the user can set the log files to read-only after the first run to avoid deletion (which is a somewhat uncommon case).  Here is a scenario where locking can happen/deleting the old log files is not possible.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;mvn clean install -DskipTests -Phadoop-2(from Hive Root directory) which creates the *gen.log files in hive/itests/qtest/target/&lt;/li&gt;
	&lt;li&gt;Set the *gen.log in to read-only (in Linux), If running in windows, just open one of the *gen.log files.&lt;/li&gt;
	&lt;li&gt;cd itests&lt;/li&gt;
	&lt;li&gt;mvn install -DskipTests -Phadoop-2&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;My point is that although this issue is very unlikely to happen with the way we run precommit tests and the way unit tests are supposed to be run in Linux, we should still avoid skipping the entire test suite if a similar issue happens in the future. i.e. the test framework should provide better resistance to such unexpected scenarios.&lt;/p&gt;

&lt;p&gt;2. You are right, File.createTempFile actually will be a better option here than my own function. I will make the required changes in a new patch.&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14552687" author="hiveqa" created="Wed, 20 May 2015 17:13:04 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12734084/HIVE-10768.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12734084/HIVE-10768.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 13 failed/errored test(s), 5369 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestHBaseCliDriver-hbase_binary_map_queries.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_binary_map_queries_prefix.q-hbase_stats.q-ppd_key_ranges.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_binary_storage_queries.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_handler_bulk.q-hbase_binary_external_table_queries.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_handler_snapshot.q-hbase_stats3.q-hbase_custom_key3.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_joins.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_ppd_key_range.q-hbase_custom_key.q-hbase_pushdown.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_queries.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_stats2.q-hbase_custom_key2.q-hbase_timestamp.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_stats_empty_partition.q-external_table_ppd.q-hbase_ppd_join.q - did not produce a TEST-*.xml file
TestHBaseCliDriver-hbase_timestamp_format.q-hbase_scan_params.q-hbase_single_sourced_multi_insert.q - did not produce a TEST-*.xml file
TestHBaseMinimrCliDriver - did not produce a TEST-*.xml file
TestHBaseNegativeCliDriver - did not produce a TEST-*.xml file
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3961/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3961/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3961/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3961/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3961/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3961/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 13 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12734084 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14553671" author="hiveqa" created="Thu, 21 May 2015 05:56:49 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12734246/HIVE-10768.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12734246/HIVE-10768.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 8967 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.metastore.txn.TestCompactionTxnHandler.testRevokeTimedOutWorkers
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3971/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3971/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3971/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3971/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3971/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3971/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12734246 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14554327" author="xuefuz" created="Thu, 21 May 2015 14:14:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14560571" author="hsubramaniyan" created="Wed, 27 May 2015 07:38:38 +0000"  >&lt;p&gt;Committed to master and branch-1.2. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=xuefuz&quot; class=&quot;user-hover&quot; rel=&quot;xuefuz&quot;&gt;xuefuz&lt;/a&gt; for the review!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12734084" name="HIVE-10768.1.patch" size="3237" author="hsubramaniyan" created="Wed, 20 May 2015 08:05:02 +0000"/>
                            <attachment id="12734220" name="HIVE-10768.2.patch" size="2969" author="hsubramaniyan" created="Wed, 20 May 2015 20:07:52 +0000"/>
                            <attachment id="12734246" name="HIVE-10768.3.patch" size="3228" author="hsubramaniyan" created="Wed, 20 May 2015 21:39:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ez3b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>