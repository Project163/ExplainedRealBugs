<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:20:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-25268] date_format udf returns wrong results for dates prior to 1900 if the local timezone is other than UTC</title>
                <link>https://issues.apache.org/jira/browse/HIVE-25268</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;b&gt;Hive 1.2.1&lt;/b&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 select date_format(&lt;span class=&quot;code-quote&quot;&gt;&apos;1400-01-14 01:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-MM-dd HH:mm:ss z&apos;&lt;/span&gt;);
+--------------------------+--+
|           _c0            |
+--------------------------+--+
| 1400-01-14 01:00:00 ICT  |
+--------------------------+--+

select date_format(&lt;span class=&quot;code-quote&quot;&gt;&apos;1800-01-14 01:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-MM-dd HH:mm:ss z&apos;&lt;/span&gt;);
+--------------------------+--+
|           _c0            |
+--------------------------+--+
| 1800-01-14 01:00:00 ICT  |
+--------------------------+--+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;Hive 3.1, Hive 4.0:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select date_format(&lt;span class=&quot;code-quote&quot;&gt;&apos;1400-01-14 01:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-MM-dd HH:mm:ss z&apos;&lt;/span&gt;);
+--------------------------+
|           _c0            |
+--------------------------+
| 1400-01-06 01:17:56 ICT  |
+--------------------------+

select date_format(&lt;span class=&quot;code-quote&quot;&gt;&apos;1800-01-14 01:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-MM-dd HH:mm:ss z&apos;&lt;/span&gt;);
+--------------------------+
|           _c0            |
+--------------------------+
| 1800-01-14 01:17:56 ICT  |
+--------------------------+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;VM timezone is set to &apos;Asia/Bangkok&apos;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13384570">HIVE-25268</key>
            <summary>date_format udf returns wrong results for dates prior to 1900 if the local timezone is other than UTC</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gupta.nikhil0007">Nikhil Gupta</assignee>
                                    <reporter username="gupta.nikhil0007">Nikhil Gupta</reporter>
                        <labels>
                            <label>backward-incompatible</label>
                            <label>pull-request-available</label>
                            <label>timestamp</label>
                    </labels>
                <created>Fri, 18 Jun 2021 16:49:45 +0000</created>
                <updated>Fri, 8 Sep 2023 08:14:26 +0000</updated>
                            <resolved>Mon, 28 Jun 2021 04:28:19 +0000</resolved>
                                    <version>3.1.0</version>
                    <version>3.1.1</version>
                    <version>3.1.2</version>
                    <version>4.0.0</version>
                                    <fixVersion>4.0.0-alpha-1</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="34800">9h 40m</timespent>
                                <comments>
                            <comment id="17365862" author="ashish-kumar-sharma" created="Sat, 19 Jun 2021 06:56:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gupta.nikhil0007&quot; class=&quot;user-hover&quot; rel=&quot;gupta.nikhil0007&quot;&gt;gupta.nikhil0007&lt;/a&gt; Are trying to fix the Julian date? &lt;/p&gt;</comment>
                            <comment id="17365866" author="gupta.nikhil0007" created="Sat, 19 Jun 2021 07:08:49 +0000"  >&lt;p&gt;Not only Julian dates, Any dates before 1900 in a different time zone have this issue:&lt;br/&gt;
Hive 1.2.1&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select date_format(&lt;span class=&quot;code-quote&quot;&gt;&apos;1800-01-14 01:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-MM-dd HH:mm:ss Z&apos;&lt;/span&gt;);
+----------------------------+--+
| _c0 |
+----------------------------+--+
| 1800-01-14 01:00:00 +0700 |
+----------------------------+--+&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hive 4.0 (master)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
select date_format(&lt;span class=&quot;code-quote&quot;&gt;&apos;1800-01-14 01:00:00&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;yyyy-MM-dd HH:mm:ss Z&apos;&lt;/span&gt;);
+----------------------------+
| _c0 |
+----------------------------+
| 1800-01-14 01:17:56 +0700 |
+----------------------------+&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17365869" author="gupta.nikhil0007" created="Sat, 19 Jun 2021 07:10:28 +0000"  >&lt;p&gt;To summarize there are two issues:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Time zone calculation is different in new java time APIs for timestamp/Instant before 1900&lt;/li&gt;
	&lt;li&gt;Julian/Gregorian Calendar change between the old and new java APIs&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17370411" author="sankarh" created="Mon, 28 Jun 2021 04:28:19 +0000"  >&lt;p&gt;Merged to master! Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gupta.nikhil0007&quot; class=&quot;user-hover&quot; rel=&quot;gupta.nikhil0007&quot;&gt;gupta.nikhil0007&lt;/a&gt; for the contribution!&lt;/p&gt;</comment>
                            <comment id="17378244" author="sankarh" created="Fri, 9 Jul 2021 18:49:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gupta.nikhil0007&quot; class=&quot;user-hover&quot; rel=&quot;gupta.nikhil0007&quot;&gt;gupta.nikhil0007&lt;/a&gt;&lt;br/&gt;
Pls update the wiki for the date_format changes.&lt;br/&gt;
&lt;a href=&quot;https://cwiki.apache.org/confluence/display/hive/languagemanual+udf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/hive/languagemanual+udf&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17541480" author="zabetak" created="Tue, 24 May 2022 14:00:56 +0000"  >&lt;p&gt;If I am not wrong this issue strongly depends upon &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25093&quot; title=&quot;date_format() UDF is returning output in UTC time zone only &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25093&quot;&gt;&lt;del&gt;HIVE-25093&lt;/del&gt;&lt;/a&gt; in two ways:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;the problem described here cannot be reproduced unless &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25093&quot; title=&quot;date_format() UDF is returning output in UTC time zone only &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25093&quot;&gt;&lt;del&gt;HIVE-25093&lt;/del&gt;&lt;/a&gt; is in place&lt;/li&gt;
	&lt;li&gt;the code changes assume that &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25093&quot; title=&quot;date_format() UDF is returning output in UTC time zone only &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-25093&quot;&gt;&lt;del&gt;HIVE-25093&lt;/del&gt;&lt;/a&gt; is committed&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gupta.nikhil0007&quot; class=&quot;user-hover&quot; rel=&quot;gupta.nikhil0007&quot;&gt;gupta.nikhil0007&lt;/a&gt; can you please confirm that what I wrote above makes sense?&lt;/p&gt;</comment>
                            <comment id="17762990" author="zabetak" created="Fri, 8 Sep 2023 08:14:26 +0000"  >&lt;p&gt;The change from SimpleDateFormat to DateTimeFormatter makes this change backward incompatible so I added the respective label. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-27673&quot; title=&quot;Configurable datetime formatter for date_format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-27673&quot;&gt;&lt;del&gt;HIVE-27673&lt;/del&gt;&lt;/a&gt; aims to partially remedy this situation by I adding a property that can toggle between the formatters till the users migrate completely their scripts to use the new patterns.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="12905321">HIVE-12192</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13168544">HIVE-20007</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13550008">HIVE-27673</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="13376733">HIVE-25093</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0s2vc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12343343">4.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>