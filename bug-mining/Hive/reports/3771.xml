<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:36:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10631] create_table_core method has invalid update for Fast Stats</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10631</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HiveMetaStore.create_table_core method calls MetaStoreUtils.updateUnpartitionedTableStatsFast when hive.stats.autogather is on, however for partitioned table, this updateUnpartitionedTableStatsFast call scanning warehouse dir and doesn&apos;t seem to use it. &lt;/p&gt;

&lt;p&gt;&quot;Fast Stats&quot; was implemented by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3959&quot; title=&quot;Update Partition Statistics in Metastore Layer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3959&quot;&gt;&lt;del&gt;HIVE-3959&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/hive/blob/branch-1.0/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java#L1363&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/blob/branch-1.0/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStore.java#L1363&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;From create_table_core method&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (HiveConf.getBoolVar(hiveConf, HiveConf.ConfVars.HIVESTATSAUTOGATHER) &amp;amp;&amp;amp;
            !MetaStoreUtils.isView(tbl)) {
          &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tbl.getPartitionKeysSize() == 0)  { &lt;span class=&quot;code-comment&quot;&gt;// Unpartitioned table
&lt;/span&gt;            MetaStoreUtils.updateUnpartitionedTableStatsFast(db, tbl, wh, madeDir);
          } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; { &lt;span class=&quot;code-comment&quot;&gt;// Partitioned table with no partitions.
&lt;/span&gt;            MetaStoreUtils.updateUnpartitionedTableStatsFast(db, tbl, wh, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
          }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Particularly Line 1363: // Partitioned table with no partitions.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MetaStoreUtils.updateUnpartitionedTableStatsFast(db, tbl, wh, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This call ends up calling Warehouse.getFileStatusesForUnpartitionedTable and do nothing in MetaStoreUtils.updateUnpartitionedTableStatsFast method due to newDir flag is always true&lt;/p&gt;

&lt;p&gt;Impact of this bug is minor with HDFS warehouse location(hive.metastore.warehouse.dir), it could be big with S3 warehouse location especially for large existing partitions.&lt;br/&gt;
Also the impact is heighten with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6727&quot; title=&quot;Table level stats for external tables are set incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6727&quot;&gt;&lt;del&gt;HIVE-6727&lt;/del&gt;&lt;/a&gt; when warehouse location is S3, basically it could scan wrong S3 directory recursively and do nothing with it. I will add more detail of cases in comments&lt;/p&gt;</description>
                <environment></environment>
        <key id="12827761">HIVE-10631</key>
            <summary>create_table_core method has invalid update for Fast Stats</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aartokhy">Aaron Tokhy</assignee>
                                    <reporter username="dongwook">Dongwook Kwon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 May 2015 18:35:46 +0000</created>
                <updated>Tue, 16 Feb 2016 23:51:36 +0000</updated>
                            <resolved>Mon, 24 Aug 2015 17:16:22 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14531173" author="dongwook" created="Wed, 6 May 2015 18:47:30 +0000"  >&lt;p&gt;This is just test case to explain the impact of this bug especially with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6727&quot; title=&quot;Table level stats for external tables are set incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6727&quot;&gt;&lt;del&gt;HIVE-6727&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Let&apos;s say I have 2 dummy existing locations for table partitions as the followings.&lt;/p&gt;

&lt;p&gt;s3://bucket/table/dummy/partition=1/&lt;br/&gt;
s3://bucket/table/dummy/partition=2/&lt;br/&gt;
s3://bucket/table/dummy/partition=3/&lt;/p&gt;

&lt;p&gt;s3://bucket/warehouse/dummy/partition=1/&lt;br/&gt;
s3://bucket/warehouse/dummy/partition=2/&lt;br/&gt;
s3://bucket/warehouse/dummy/partition=3/&lt;/p&gt;

&lt;p&gt;And I created external table name &quot;dummy&quot; with table location &quot;s3://bucket/table/dummy/&quot; and set &quot;hive.metastore.warehouse.dir=s3://bucket/warehouse/&quot; and &quot;hive.stats.autogather=true&quot;&lt;/p&gt;

&lt;p&gt;When this dummy table is created, HiveMetaStore scans warehouse directory recursively not table location and do nothing with data collected. &lt;br/&gt;
So some edge cases when external table is created with above conditions, especially for large partitions, it takes quite of time than &quot;hive.stats.autogather&quot; off. &lt;/p&gt;</comment>
                            <comment id="14531204" author="dongwook" created="Wed, 6 May 2015 19:04:35 +0000"  >&lt;p&gt;If the intention of line 1363(MetaStoreUtils.updateUnpartitionedTableStatsFast(db, tbl, wh, true)) is updating fast stats regardless of the fact the table is just created, (which means no MSCK REPAIR PARTITIONS, even if it&apos;s existing external table, I don&apos;t understand the reason why it tries to update stats before metastore know about partitions, this part, I still don&apos;t understand, however if this was the intention of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3959&quot; title=&quot;Update Partition Statistics in Metastore Layer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3959&quot;&gt;&lt;del&gt;HIVE-3959&lt;/del&gt;&lt;/a&gt;), &lt;/p&gt;

&lt;p&gt;Then I believe line 1363 should be something like below&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; FileStatus[] fileStatus = wh.getFileStatusesForUnpartitionedTable(db, tbl);
MetaStoreUtils.updateUnpartitionedTableStatsFast(tbl, fileStatus, fileStatus.length == 0, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Otherwise it should be like the this, at least not to scan folders for unnecessary operation.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MetaStoreUtils.updateUnpartitionedTableStatsFast(tbl, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Just my thought.&lt;/p&gt;</comment>
                            <comment id="14647156" author="aartokhy" created="Thu, 30 Jul 2015 04:25:58 +0000"  >&lt;p&gt;hive.stats.reliable requires that both numFiles and totalSize be set properly, regardless of the condition.  So if &apos;create table&apos; or &apos;create external table&apos; were to use a location already populated with partitions, it will traverse those partitions regardless.&lt;/p&gt;

&lt;p&gt;As of writing, hive.stats.reliable appears to be set to false by default.  Perhaps stats calculation on creation of partitioned tables can be forgone when hive.stats.reliable is false only, as stats will be populated on MSCK REPAIR PARTITIONS or by adding partitions using ALTER TABLE ADD PARTITION.&lt;/p&gt;</comment>
                            <comment id="14681038" author="aartokhy" created="Tue, 11 Aug 2015 00:55:25 +0000"  >&lt;p&gt;Reading more about hive.stats.reliable, it did not appear to be appropriate to use it in this case, and to instead it would be better to defer stats calculation for partitioned tables when partitions are being added to a table (MSCK/ALTER TABLE), and not on table creation (CREATE &lt;span class=&quot;error&quot;&gt;&amp;#91;EXTERNAL&amp;#93;&lt;/span&gt; TABLE)&lt;/p&gt;</comment>
                            <comment id="14682229" author="ashutoshc" created="Tue, 11 Aug 2015 18:23:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dongwook&quot; class=&quot;user-hover&quot; rel=&quot;dongwook&quot;&gt;dongwook&lt;/a&gt; If you are still working on this issue. Can you name your patch according to &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Hive+PreCommit+Patch+Testing&lt;/a&gt; so that we can get Hive QA run on this? Also, if you can create RB entry for this, it will be useful.&lt;/p&gt;</comment>
                            <comment id="14692730" author="aartokhy" created="Wed, 12 Aug 2015 01:28:45 +0000"  >&lt;p&gt;Reuploaded as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10631&quot; title=&quot;create_table_core method has invalid update for Fast Stats&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10631&quot;&gt;&lt;del&gt;HIVE-10631&lt;/del&gt;&lt;/a&gt;.patch&lt;/p&gt;</comment>
                            <comment id="14693903" author="aartokhy" created="Wed, 12 Aug 2015 17:36:14 +0000"  >&lt;p&gt;Running precommit tests.&lt;/p&gt;</comment>
                            <comment id="14693936" author="hiveqa" created="Wed, 12 Aug 2015 17:51:30 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12750006/HIVE-10631.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12750006/HIVE-10631.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4936/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4936/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4936/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4936/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4936/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4936/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-4936/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   a6d3070..425273e  branch-1   -&amp;gt; origin/branch-1
   cafd555..a4eb78c  branch-1.0 -&amp;gt; origin/branch-1.0
   2ee30c4..0140df7  master     -&amp;gt; origin/master
+ git reset --hard HEAD
HEAD is now at 2ee30c4 HIVE-11449: &quot;Capacity must be a power of two&quot; error when HybridHashTableContainer memory threshold is too low (Jason Dere, reviewed by Sergey Shelukhin)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is behind &apos;origin/master&apos; by 3 commits, and can be fast-forwarded.
+ git reset --hard origin/master
HEAD is now at 0140df7 HIVE-11480: CBO: Calcite Operator To Hive Operator (Calcite Return Path): char/varchar as input to GenericUDAF (Pengcheng Xiong, reviewed by Jesus Camacho Rodriguez)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12750006 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14693937" author="hiveqa" created="Wed, 12 Aug 2015 17:51:58 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12750006/HIVE-10631.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12750006/HIVE-10631.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4937/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4937/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4937/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4937/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4937/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4937/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.7.0_45-cloudera/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-TRUNK-Build-4937/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 0140df7 HIVE-11480: CBO: Calcite Operator To Hive Operator (Calcite Return Path): char/varchar as input to GenericUDAF (Pengcheng Xiong, reviewed by Jesus Camacho Rodriguez)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
+ git reset --hard origin/master
HEAD is now at 0140df7 HIVE-11480: CBO: Calcite Operator To Hive Operator (Calcite Return Path): char/varchar as input to GenericUDAF (Pengcheng Xiong, reviewed by Jesus Camacho Rodriguez)
+ git merge --ff-only origin/master
Already up-to-date.
+ git gc
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12750006 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14695641" author="aartokhy" created="Thu, 13 Aug 2015 17:45:37 +0000"  >&lt;p&gt;Uploading a patch that cleanly applies to TRUNK as well as branch-1.0&lt;/p&gt;</comment>
                            <comment id="14696166" author="hiveqa" created="Thu, 13 Aug 2015 23:36:06 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12750344/HIVE-10631.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12750344/HIVE-10631.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 9357 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4955/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4955/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4955/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4955/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4955/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4955/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12750344 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14696320" author="aartokhy" created="Fri, 14 Aug 2015 01:57:08 +0000"  >&lt;p&gt;When building and testing Hive-Trunk locally, the following test fails regardless of the patch.&lt;/p&gt;

&lt;p&gt;org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation&lt;/p&gt;

&lt;p&gt;Appears to fail in trunk before and after the change.  Also unrelated, the following URL in pom.xml appears to give 403&apos;s:&lt;br/&gt;
&lt;a href=&quot;https://s3-us-west-1.amazonaws.com/hive-spark/maven2/spark_2.10-1.3-rc1/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3-us-west-1.amazonaws.com/hive-spark/maven2/spark_2.10-1.3-rc1/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This should be (after removing the trailing &apos;/&apos;):&lt;br/&gt;
&lt;a href=&quot;https://s3-us-west-1.amazonaws.com/hive-spark/maven2/spark_2.10-1.3-rc1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://s3-us-west-1.amazonaws.com/hive-spark/maven2/spark_2.10-1.3-rc1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14697016" author="ashutoshc" created="Fri, 14 Aug 2015 13:45:10 +0000"  >&lt;p&gt;Can you create a review board for this ?&lt;/p&gt;</comment>
                            <comment id="14697371" author="aartokhy" created="Fri, 14 Aug 2015 16:57:35 +0000"  >&lt;p&gt;Sure, here it is:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/37484/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/37484/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14697375" author="ashutoshc" created="Fri, 14 Aug 2015 16:58:50 +0000"  >&lt;p&gt;Getting this:&lt;/p&gt;

&lt;p&gt;You don&apos;t have access to this review request.&lt;br/&gt;
This review request is private. You must be a requested reviewer, either directly or on a requested group, and have permission to access the repository in order to view this review request.&lt;/p&gt;</comment>
                            <comment id="14697589" author="aartokhy" created="Fri, 14 Aug 2015 19:23:06 +0000"  >&lt;p&gt;Sorry, fixed it just now.&lt;/p&gt;</comment>
                            <comment id="14707706" author="aartokhy" created="Sat, 22 Aug 2015 00:45:13 +0000"  >&lt;p&gt;Code review posted:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://reviews.apache.org/r/37484/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/37484/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14708908" author="ashutoshc" created="Mon, 24 Aug 2015 07:40:23 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14709647" author="ashutoshc" created="Mon, 24 Aug 2015 17:16:22 +0000"  >&lt;p&gt;Pushed to master &amp;amp; branch-1 Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aartokhy&quot; class=&quot;user-hover&quot; rel=&quot;aartokhy&quot;&gt;aartokhy&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12750136" name="HIVE-10631-branch-1.0.patch" size="5326" author="aartokhy" created="Wed, 12 Aug 2015 18:16:19 +0000"/>
                            <attachment id="12750344" name="HIVE-10631.patch" size="5020" author="aartokhy" created="Thu, 13 Aug 2015 17:45:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3959&quot; title=&quot;Update Partition Statistics in Metastore Layer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3959&quot;&gt;&lt;strike&gt;HIVE-3959&lt;/strike&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6727&quot; title=&quot;Table level stats for external tables are set incorrectly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6727&quot;&gt;&lt;strike&gt;HIVE-6727&lt;/strike&gt;&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ednr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>