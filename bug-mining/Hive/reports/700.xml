<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:59:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-2368] Slow dropping of partitions caused by full listing of storage descriptors</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2368</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;To determine if a column descriptor is unused, we call listStorageDescriptorsWithCD(), which may return a big list of SDs.  This can severely slow down dropping partitions.&lt;/p&gt;

&lt;p&gt;We can add a maximum number of SDs to return, and just ask for 1 SD, since we are just doing an existential check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12518535">HIVE-2368</key>
            <summary>Slow dropping of partitions caused by full listing of storage descriptors</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sohanjain">Sohan Jain</assignee>
                                    <reporter username="sohanjain">Sohan Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Aug 2011 23:28:40 +0000</created>
                <updated>Fri, 16 Dec 2011 23:57:07 +0000</updated>
                            <resolved>Tue, 25 Oct 2011 20:15:23 +0000</resolved>
                                                    <fixVersion>0.8.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13082765" author="jiraposter@reviews.apache.org" created="Wed, 10 Aug 2011 23:32:28 +0000"  >
&lt;p&gt;-----------------------------------------------------------&lt;br/&gt;
This is an automatically generated e-mail. To reply, visit:&lt;br/&gt;
&lt;a href=&quot;https://reviews.apache.org/r/1462/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1462/&lt;/a&gt;&lt;br/&gt;
-----------------------------------------------------------&lt;/p&gt;

&lt;p&gt;Review request for hive and Paul Yang.&lt;/p&gt;


&lt;p&gt;Summary&lt;br/&gt;
-------&lt;/p&gt;

&lt;p&gt;To determine if a column descriptor is unused, we call listStorageDescriptorsWithCD(), which may return a big list of SDs. This can severely slow down dropping partitions.&lt;/p&gt;

&lt;p&gt;We can add a maximum number of SDs to return, and just ask for 1 SD, since we are just doing an existential check.&lt;/p&gt;


&lt;p&gt;This addresses bug &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; title=&quot;Slow dropping of partitions caused by full listing of storage descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2368&quot;&gt;&lt;del&gt;HIVE-2368&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2368&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Diffs&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;  trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java 1156401 &lt;/p&gt;

&lt;p&gt;Diff: &lt;a href=&quot;https://reviews.apache.org/r/1462/diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/1462/diff&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;Testing&lt;br/&gt;
-------&lt;/p&gt;


&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Sohan&lt;/p&gt;
</comment>
                            <comment id="13132188" author="nzhang" created="Thu, 20 Oct 2011 23:20:17 +0000"  >&lt;p&gt;@Paul Yang, this looks good to me. Can you also review the patch? We&apos;ll need this soon. &lt;/p&gt;</comment>
                            <comment id="13132215" author="pauly" created="Thu, 20 Oct 2011 23:45:21 +0000"  >&lt;p&gt;The patch was good, will test and commit.&lt;/p&gt;</comment>
                            <comment id="13135386" author="pauly" created="Tue, 25 Oct 2011 20:14:50 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13135387" author="pauly" created="Tue, 25 Oct 2011 20:15:46 +0000"  >&lt;p&gt;Committed. Thanks Sohan!&lt;/p&gt;</comment>
                            <comment id="13135623" author="hudson" created="Wed, 26 Oct 2011 01:56:18 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1034 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1034/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1034/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; title=&quot;Slow dropping of partitions caused by full listing of storage descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2368&quot;&gt;&lt;del&gt;HIVE-2368&lt;/del&gt;&lt;/a&gt;. Slow dropping of partitions caused by full listing of storage descriptors (Sohan Jain via pauly)&lt;/p&gt;

&lt;p&gt;pauly : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188886&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1188886&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13138065" author="pauly" created="Fri, 28 Oct 2011 05:49:20 +0000"  >&lt;p&gt;Backporting this to branch-0.8 as well.&lt;/p&gt;</comment>
                            <comment id="13147389" author="hudson" created="Thu, 10 Nov 2011 00:33:16 +0000"  >&lt;p&gt;Integrated in Hive-0.8.0-SNAPSHOT-h0.21 #89 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/89/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-0.8.0-SNAPSHOT-h0.21/89/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2368&quot; title=&quot;Slow dropping of partitions caused by full listing of storage descriptors&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2368&quot;&gt;&lt;del&gt;HIVE-2368&lt;/del&gt;&lt;/a&gt;. Slow dropping of partitions caused by full listing of storage descriptors (Sohan Jain via pauly)&lt;/p&gt;

&lt;p&gt;pauly : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199915&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1199915&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.8/metastore/src/java/org/apache/hadoop/hive/metastore/ObjectStore.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12512385">HIVE-2246</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12490053" name="HIVE-2368.1.patch" size="1818" author="sohanjain" created="Wed, 10 Aug 2011 23:29:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42147</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 2 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ljon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123839</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>