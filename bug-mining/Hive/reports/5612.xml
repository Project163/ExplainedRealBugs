<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:54:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3333] Specified SerDe does not get used when executing a query over JSON data</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3333</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I found a JSON SerDe that I wanted to try out, and I ran into some issues attempting to use it. The script I was executing looks like this:&lt;/p&gt;

&lt;p&gt;ADD JAR /home/natty/hive-test-case/hive-json-serde-0.2.jar;&lt;br/&gt;
CREATE TABLE bar (&lt;br/&gt;
  id INT,&lt;br/&gt;
  integers ARRAY&amp;lt;INT&amp;gt;,&lt;br/&gt;
  datum STRING&lt;br/&gt;
) ROW FORMAT SERDE &apos;org.apache.hadoop.hive.contrib.serde2.JsonSerde&apos;;&lt;/p&gt;

&lt;p&gt;LOAD DATA LOCAL INPATH &apos;/home/natty/sample_data/json.sample&apos; OVERWRITE INTO TABLE bar;&lt;/p&gt;

&lt;p&gt;SELECT * FROM bar;&lt;/p&gt;

&lt;p&gt;The data I loaded in looks like this:&lt;/p&gt;

{ &quot;id&quot;: 1, &quot;integers&quot;: [ 1, 2, 3 ], &quot;datum&quot;: &quot;hello&quot; }
&lt;p&gt;,&lt;/p&gt;

&lt;p&gt;When the &quot;SELECT * FROM bar&quot; query executes, it returns with a failure:&lt;/p&gt;

&lt;p&gt;hive&amp;gt; ADD JAR /home/natty/hive-test-case/hive-json-serde-0.2.jar;&lt;br/&gt;
Added /home/natty/hive-test-case/hive-json-serde-0.2.jar to class path&lt;br/&gt;
Added resource: /home/natty/hive-test-case/hive-json-serde-0.2.jar&lt;br/&gt;
hive&amp;gt; SELECT * FROM bar;&lt;br/&gt;
OK&lt;br/&gt;
Failed with exception java.io.IOException:java.lang.ClassCastException: org.json.JSONArray cannot be cast to [Ljava.lang.Object;&lt;br/&gt;
Time taken: 2.335 seconds&lt;/p&gt;

&lt;p&gt;Now, this alone doesn&apos;t bother me. What bothers me is that, if I look at the log file, I see the following exception:&lt;/p&gt;

&lt;p&gt;2012-08-03 13:12:11,407 ERROR CliDriver (SessionState.java:printError(380)) - Failed with exception java.io.IOException:java.lang.ClassCastException: org.json.JSONArray cannot be cast to [Ljava.lang.Object;&lt;br/&gt;
java.io.IOException: java.lang.ClassCastException: org.json.JSONArray cannot be cast to [Ljava.lang.Object;&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:173)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:1383)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:266)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:212)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:403)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:671)&lt;br/&gt;
	at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:554)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.util.RunJar.main(RunJar.java:208)&lt;br/&gt;
Caused by: java.lang.ClassCastException: org.json.JSONArray cannot be cast to [Ljava.lang.Object;&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.objectinspector.StandardListObjectInspector.getList(StandardListObjectInspector.java:98)&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.SerDeUtils.buildJSONString(SerDeUtils.java:287)&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.SerDeUtils.getJSONString(SerDeUtils.java:213)&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.DelimitedJSONSerDe.serializeField(DelimitedJSONSerDe.java:59)&lt;br/&gt;
	at org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe.serialize(LazySimpleSerDe.java:365)&lt;br/&gt;
	at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:163)&lt;br/&gt;
	... 11 more&lt;/p&gt;

&lt;p&gt;Note that this exception indicates that Hive is executing code for the DelimitedJSONSerDe, rather than the one that I specified (JsonSerde from the jar file). Seems incorrect.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12601422">HIVE-3333</key>
            <summary>Specified SerDe does not get used when executing a query over JSON data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="natty">Jonathan Natkins</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Aug 2012 20:15:15 +0000</created>
                <updated>Sat, 4 Aug 2012 00:05:13 +0000</updated>
                            <resolved>Sat, 4 Aug 2012 00:05:13 +0000</resolved>
                                                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13428342" author="natty" created="Fri, 3 Aug 2012 20:16:06 +0000"  >&lt;p&gt;Attaching a small test case. The paths in hive.sql will have to be modified slightly, but should be an easy reproducer.&lt;/p&gt;</comment>
                            <comment id="13428486" author="natty" created="Sat, 4 Aug 2012 00:05:13 +0000"  >&lt;p&gt;I think this may have just been pilot error&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12539092" name="hive-test-case.tar.gz" size="109349" author="natty" created="Fri, 3 Aug 2012 20:16:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259200</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lng7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124449</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>