<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:56:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-1475] .gitignore files being placed in test warehouse directories causing build failure</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1475</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;from last comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1463&quot; title=&quot;hive output file names are unnecessarily large&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1463&quot;&gt;&lt;del&gt;HIVE-1463&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;test warehouse is being polluted with .gitignore files. these need to be removed.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12469832">HIVE-1475</key>
            <summary>.gitignore files being placed in test warehouse directories causing build failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jsensarma">Joydeep Sen Sarma</assignee>
                                    <reporter username="jsensarma">Joydeep Sen Sarma</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Jul 2010 15:47:20 +0000</created>
                <updated>Sat, 17 Dec 2011 00:00:58 +0000</updated>
                            <resolved>Thu, 22 Jul 2010 23:58:50 +0000</resolved>
                                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Testing Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12890828" author="cwsteinbach" created="Wed, 21 Jul 2010 19:05:46 +0000"  >&lt;p&gt;The .gitignore files were added in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1188&quot; title=&quot;NPE when running TestJdbcDriver/TestHiveServer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1188&quot;&gt;&lt;del&gt;HIVE-1188&lt;/del&gt;&lt;/a&gt; in order to resolve a test NPE that occurs when using Git.&lt;/p&gt;</comment>
                            <comment id="12890947" author="nzhang" created="Wed, 21 Jul 2010 23:28:36 +0000"  >&lt;p&gt;A minor correction on the description. The related HIVE JIRA is &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1464&quot; title=&quot;improve test query performance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1464&quot;&gt;&lt;del&gt;HIVE-1464&lt;/del&gt;&lt;/a&gt; rather than &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1463&quot; title=&quot;hive output file names are unnecessarily large&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1463&quot;&gt;&lt;del&gt;HIVE-1463&lt;/del&gt;&lt;/a&gt;. The last comment is copied as follows:&lt;/p&gt;

&lt;p&gt;8&amp;lt;---------------------------------&lt;br/&gt;
i think i found why it&apos;s happening.&lt;br/&gt;
these lines in build-common.xml:&lt;/p&gt;

&lt;p&gt;&amp;lt;copy todir=&quot;${test.data.dir}&quot;&amp;gt;&lt;br/&gt;
&amp;lt;fileset dir=&quot;${test.src.data.dir}&quot;&amp;gt;&lt;br/&gt;
&amp;lt;exclude name=&quot;**/.svn&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/fileset&amp;gt;&lt;br/&gt;
&amp;lt;/copy&amp;gt;&lt;/p&gt;

&lt;p&gt;are copying .gitignore to test/data/warehouse/src&lt;/p&gt;

&lt;p&gt;it remains there after this. the reason this is happening now is that &apos;cleanup()&apos; happens via metadata commands - and there are no tables in metadata at the beginning of the test. so nothing gets deleted. then a whole bunch of &apos;load data&apos; commands are executed - which also don&apos;t delete old stuff.&lt;/p&gt;

&lt;p&gt;after this - earlier each test would call cleanup() again - which would delete the entire directory. but now this is not done anymore. so the .gitignore stays there.&lt;/p&gt;

&lt;p&gt;lots of ways of fixing this - but this whole data/warehouse dir and then copying it recursively is totally unnecessary i think. i will file a separate jira.&lt;/p&gt;</comment>
                            <comment id="12890949" author="nzhang" created="Wed, 21 Jul 2010 23:35:39 +0000"  >&lt;p&gt;I think copying ${test.src.data.dir} to ${test.data.dir} is not necessary. The only use may be to create the target directory test/data/warehouse? &lt;/p&gt;

&lt;p&gt;For now, should we just exclude the .gitignore file in addition to .svn? The test/data/warehouse/* will be removed after the test finished. So it won&apos;t affect git I think. &lt;/p&gt;</comment>
                            <comment id="12890950" author="jsensarma" created="Wed, 21 Jul 2010 23:35:53 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;get rid of data/warehouse - totally unnecessary&lt;/li&gt;
	&lt;li&gt;get rid of recursive copy of data/ into test/data - again unnecessary&lt;/li&gt;
	&lt;li&gt;convert references to test/data/conf into data/conf&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;in addition:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;i removed a whole bunch of &apos;DROP TABLE&apos; statements from the clientpositive and clientnegative queries. these are not required anymore given that the test harness cleans out test side effects&lt;/li&gt;
	&lt;li&gt;output changes because of the above.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;between this and 1464 - i think the total test time has gone down by 30 min or so if not more. still too much, but some improvement ..&lt;/p&gt;</comment>
                            <comment id="12890952" author="nzhang" created="Wed, 21 Jul 2010 23:46:25 +0000"  >&lt;p&gt;Great! I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="12891248" author="nzhang" created="Thu, 22 Jul 2010 17:14:37 +0000"  >&lt;p&gt;The test on -Dhadoop.version=0.20.0 failed. Partituclarly TestHBaseCliDriver and TestHBaseMinimrCliDriver failed. Can you take a look?&lt;/p&gt;</comment>
                            <comment id="12891253" author="jsensarma" created="Thu, 22 Jul 2010 17:24:33 +0000"  >&lt;p&gt;taking a look.&lt;/p&gt;</comment>
                            <comment id="12891323" author="jsensarma" created="Thu, 22 Jul 2010 20:46:17 +0000"  >&lt;p&gt;looks like the hbase tests also failed because of 1464 (or something since then) - they fail against trunk.&lt;/p&gt;</comment>
                            <comment id="12891343" author="jsensarma" created="Thu, 22 Jul 2010 21:19:14 +0000"  >&lt;p&gt;there was a bug in the 1464 patch (something that i had intended to take out but forgot). this fixes things:&lt;/p&gt;

&lt;p&gt;&amp;gt; &amp;#8212; ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java  (revision 966856)&lt;br/&gt;
&amp;gt; +++ ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java  (working copy)&lt;br/&gt;
&amp;gt; @@ -528,7 +528,7 @@&lt;br/&gt;
&amp;gt;        createSources();&lt;br/&gt;
&amp;gt;      }&lt;br/&gt;
&amp;gt;  &lt;br/&gt;
&amp;gt; -    CliSessionState ss = new CliSessionState(new HiveConf(Driver.class));&lt;br/&gt;
&amp;gt; +    CliSessionState ss = new CliSessionState(conf);&lt;br/&gt;
&amp;gt;      assert ss != null;&lt;br/&gt;
&amp;gt;      ss.in = System.in;&lt;br/&gt;
&amp;gt;  &lt;/p&gt;

&lt;p&gt;i haven&apos;t run the full tests - but the hbase-handler tests do pass.&lt;/p&gt;</comment>
                            <comment id="12891350" author="nzhang" created="Thu, 22 Jul 2010 21:27:58 +0000"  >&lt;p&gt;I&apos;m testing it right now.&lt;/p&gt;</comment>
                            <comment id="12891408" author="nzhang" created="Thu, 22 Jul 2010 23:58:50 +0000"  >&lt;p&gt;Committed. Thanks Joydeep!&lt;/p&gt;</comment>
                            <comment id="12891450" author="jsensarma" created="Fri, 23 Jul 2010 02:25:56 +0000"  >&lt;p&gt;thanks for reviewing/committing and sorry for all the trouble.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12457062">HIVE-1188</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12469212">HIVE-1464</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12450113" name="1475.1.patch" size="1933878" author="jsensarma" created="Wed, 21 Jul 2010 23:35:53 +0000"/>
                            <attachment id="12450218" name="1475.2.patch" size="1934384" author="jsensarma" created="Thu, 22 Jul 2010 21:19:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72880</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lfbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>