<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:23:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-26658] INT64 Parquet timestamps cannot be mapped to most Hive numeric types</title>
                <link>https://issues.apache.org/jira/browse/HIVE-26658</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When attempting to read a Parquet file with column of primitive type INT64 and logical type &lt;a href=&quot;https://github.com/apache/parquet-format/blob/54e53e5d7794d383529dd30746378f19a12afd58/LogicalTypes.md?plain=1#L337&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TIMESTAMP&lt;/a&gt; an error is raised when the Hive type is different from TIMESTAMP and BIGINT.&lt;/p&gt;

&lt;p&gt;Consider a Parquet file (e.g., ts_file.parquet) with the following schema:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;eventtime&quot;&lt;/span&gt;,
  &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: [&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, {
    &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&quot;logicalType&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;timestamp-millis&quot;&lt;/span&gt;
  }],
  &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Mapping the column to a Hive numeric type among TINYINT, SMALLINT, INT, FLOAT, DOUBLE, DECIMAL, and trying to run a SELECT will give back an error.&lt;/p&gt;

&lt;p&gt;The following snippet can be used to reproduce the problem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-sql&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;TABLE&lt;/span&gt; ts_table (eventtime &lt;span class=&quot;code-keyword&quot;&gt;INT&lt;/span&gt;) STORED &lt;span class=&quot;code-keyword&quot;&gt;AS&lt;/span&gt; PARQUET;
&lt;span class=&quot;code-keyword&quot;&gt;LOAD&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;DATA&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;LOCAL&lt;/span&gt; INPATH &lt;span class=&quot;code-quote&quot;&gt;&apos;ts_file.parquet&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;into&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;table&lt;/span&gt; ts_table;
&lt;span class=&quot;code-keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-keyword&quot;&gt;FROM&lt;/span&gt; ts_table;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This is a regression caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-21215&quot; title=&quot;Read Parquet INT64 timestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-21215&quot;&gt;&lt;del&gt;HIVE-21215&lt;/del&gt;&lt;/a&gt;.&#160;Although, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-21215&quot; title=&quot;Read Parquet INT64 timestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-21215&quot;&gt;&lt;del&gt;HIVE-21215&lt;/del&gt;&lt;/a&gt; allows to read INT64 types as Hive TIMESTAMP, which was not possible before, at the same time it broke the mapping to every other Hive numeric type. The problem was addressed selectively for BIGINT type very recently (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-26612&quot; title=&quot;INT64 Parquet timestamps cannot be read into BIGINT Hive type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-26612&quot;&gt;&lt;del&gt;HIVE-26612&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;The primary goal of this ticket is to restore backward compatibility since these use-cases were working before &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-21215&quot; title=&quot;Read Parquet INT64 timestamp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-21215&quot;&gt;&lt;del&gt;HIVE-21215&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13488652">HIVE-26658</key>
            <summary>INT64 Parquet timestamps cannot be mapped to most Hive numeric types</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                            <label>backwards-compatibility</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Fri, 21 Oct 2022 13:42:15 +0000</created>
                <updated>Tue, 15 Aug 2023 06:33:19 +0000</updated>
                            <resolved>Tue, 10 Jan 2023 11:48:24 +0000</resolved>
                                    <version>4.0.0-alpha-1</version>
                                    <fixVersion>4.0.0-beta-1</fixVersion>
                                    <component>Parquet</component>
                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17622273" author="zabetak" created="Fri, 21 Oct 2022 13:45:06 +0000"  >&lt;p&gt;Allowing mapping of INT64 timestamp types to other numerics might also be beneficial for:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;performing up/down casting to other types with low performance overhead&lt;/li&gt;
	&lt;li&gt;schema evolution to other types&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Having said that, I don&apos;t really see an interesting real-life use-case where it makes sense to migrate/cast a timestamp to another numeric (except BIGINT which is already fixed) so I don&apos;t consider this a high-priority issue.&lt;/p&gt;</comment>
                            <comment id="17656606" author="zabetak" created="Tue, 10 Jan 2023 11:48:24 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/hive/commit/5519bb37fb5189004804435f09ca9227bd6d9d6b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/5519bb37fb5189004804435f09ca9227bd6d9d6b&lt;/a&gt;. Thanks for the reviews &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cnauroth&quot; class=&quot;user-hover&quot; rel=&quot;cnauroth&quot;&gt;cnauroth&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=scarlin&quot; class=&quot;user-hover&quot; rel=&quot;scarlin&quot;&gt;scarlin&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushsaxena&quot; class=&quot;user-hover&quot; rel=&quot;ayushsaxena&quot;&gt;ayushsaxena&lt;/a&gt;!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13213925">HIVE-21215</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                                                <inwardlinks description="Discovered while testing">
                                        <issuelink>
            <issuekey id="13485212">HIVE-26612</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z19rqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>