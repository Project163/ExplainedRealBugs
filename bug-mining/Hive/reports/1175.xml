<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:05:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4252] hiveserver2 string representation of complex types are inconsistent with cli</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4252</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For example, it prints struct as &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;null, null, null&amp;#93;&lt;/span&gt;&quot; instead of  &quot;&lt;/p&gt;
{\&quot;r\&quot;:null,\&quot;s\&quot;:null,\&quot;t\&quot;:null}
&lt;p&gt;&quot;&lt;br/&gt;
And for maps it is printing it as &quot;&lt;/p&gt;
{k=v}
&lt;p&gt;&quot; instead of &lt;/p&gt;
{\&quot;k\&quot;:\&quot;v\&quot;}</description>
                <environment></environment>
        <key id="12639742">HIVE-4252</key>
            <summary>hiveserver2 string representation of complex types are inconsistent with cli</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas Nair</assignee>
                                    <reporter username="thejas">Thejas Nair</reporter>
                        <labels>
                    </labels>
                <created>Fri, 29 Mar 2013 02:47:36 +0000</created>
                <updated>Thu, 16 May 2013 21:10:20 +0000</updated>
                            <resolved>Wed, 3 Apr 2013 14:42:43 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13617027" author="thejas" created="Fri, 29 Mar 2013 03:11:06 +0000"  >&lt;p&gt;With the patch the string representation are valid json strings. That makes it easy to parse them .&lt;br/&gt;
I will create a patch to track converting them into proper jdbc complex types.&lt;/p&gt;</comment>
                            <comment id="13618518" author="thejas" created="Sun, 31 Mar 2013 23:42:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4252&quot; title=&quot;hiveserver2 string representation of complex types are inconsistent with cli&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4252&quot;&gt;&lt;del&gt;HIVE-4252&lt;/del&gt;&lt;/a&gt;.2.patch rebased on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4269&quot; title=&quot;fix handling of binary type in hiveserver2, jdbc driver&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4269&quot;&gt;&lt;del&gt;HIVE-4269&lt;/del&gt;&lt;/a&gt;, requires that to be applied first. &lt;/p&gt;</comment>
                            <comment id="13618521" author="thejas" created="Sun, 31 Mar 2013 23:50:30 +0000"  >&lt;p&gt;reviewboard link &lt;a href=&quot;https://reviews.apache.org/r/10211/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/10211/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13618935" author="ashutoshc" created="Mon, 1 Apr 2013 17:14:44 +0000"  >&lt;p&gt;It will be good to check if sql standard provides any guideline for string representation of complex type. Or implementations are free to choose their own. For example I ran a quick test against postgres for arrays and its different than what we do.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;CREATE TABLE sal_emp (
    name            text,
    pay_by_quarter  integer[]
);

INSERT INTO sal_emp
    VALUES (&lt;span class=&quot;code-quote&quot;&gt;&apos;Bill&apos;&lt;/span&gt;,
    &lt;span class=&quot;code-quote&quot;&gt;&apos;{10000, 10000, 10000, 10000}&apos;&lt;/span&gt;);

SELECT * FROM sal_emp;
 name  |      pay_by_quarter       
-------+---------------------------
 Bill  | {10000,10000,10000,10000}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13619141" author="thejas" created="Mon, 1 Apr 2013 20:43:32 +0000"  >&lt;p&gt;Table B-6 &quot;Use of ResultSet getter Methods to Retrieve JDBC Data Types&quot; in jdbc 3(&amp;amp;4) spec shows what datatypes support getString(), and Array and Struct are not one of those. Ie, we have leeway here. There is also not much pattern to be followed here, as we don&apos;t have many databases supporting these types (eq mysql and sql server don&apos;t).&lt;br/&gt;
I think having json strings is useful for being able to parse the strings back to types.&lt;/p&gt;

&lt;p&gt;btw, the current jdbc driver implementation returns strings for the complex types, if you do a ResultSetMetadata.getColumnType(int) on column that is actually of hive map/struct/array type, it returns the String type . &lt;br/&gt;
Ideally, we should add support for returning real array and struct types. I am not sure how map type should be handled, maybe json string would remain the workaround.&lt;/p&gt;

</comment>
                            <comment id="13619185" author="ashutoshc" created="Mon, 1 Apr 2013 21:22:10 +0000"  >&lt;p&gt;I see. If spec doesn&apos;t mandate it one way or the other, than sticking to what cli already does is best, since than hive will be consistent. And json format which cli uses is a good format as it makes parsing back and forth easier. &lt;br/&gt;
+1 will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13620961" author="ashutoshc" created="Wed, 3 Apr 2013 14:42:43 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Thejas!&lt;/p&gt;</comment>
                            <comment id="13621674" author="hudson" created="Thu, 4 Apr 2013 02:28:44 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2043 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2043/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2043/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4252&quot; title=&quot;hiveserver2 string representation of complex types are inconsistent with cli&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4252&quot;&gt;&lt;del&gt;HIVE-4252&lt;/del&gt;&lt;/a&gt; : hiveserver2 string representation of complex types are inconsistent with cli (Thejas Nair via Ashutosh Chauhan) (Revision 1464049)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464049&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hive/jdbc/TestJdbcDriver2.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623072" author="hudson" created="Thu, 4 Apr 2013 23:40:00 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #138 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4252&quot; title=&quot;hiveserver2 string representation of complex types are inconsistent with cli&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4252&quot;&gt;&lt;del&gt;HIVE-4252&lt;/del&gt;&lt;/a&gt; : hiveserver2 string representation of complex types are inconsistent with cli (Thejas Nair via Ashutosh Chauhan) (Revision 1464049)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1464049&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/jdbc/src/test/org/apache/hive/jdbc/TestJdbcDriver2.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12639757">HIVE-4253</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12576015" name="HIVE-4252.1.patch" size="3886" author="thejas" created="Fri, 29 Mar 2013 03:07:31 +0000"/>
                            <attachment id="12576312" name="HIVE-4252.2.patch" size="4251" author="thejas" created="Sun, 31 Mar 2013 23:42:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320211</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j907:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320552</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>