<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:51:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-253] rand() gets precomputated in compilation phase</title>
                <link>https://issues.apache.org/jira/browse/HIVE-253</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;SELECT * FROM t WHERE rand() &amp;lt; 0.01;&lt;/p&gt;

&lt;p&gt;Hive will say: &quot;No need to submit job&quot;, because the condition evaluates to false.&lt;/p&gt;

&lt;p&gt;The rand() function is special in the sense that every time it evaluates to a different value. We should disallow computing the value in the compiling phase.&lt;/p&gt;

&lt;p&gt;One way to do that is to add an annotation in the UDFRand and check that in the compiling phase.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12413425">HIVE-253</key>
            <summary>rand() gets precomputated in compilation phase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rsm">Raghotham Murthy</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Jan 2009 00:52:34 +0000</created>
                <updated>Sat, 17 Dec 2011 00:09:01 +0000</updated>
                            <resolved>Wed, 18 Mar 2009 22:02:38 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.3.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12667899" author="indigoviolet" created="Wed, 28 Jan 2009 01:03:39 +0000"  >&lt;p&gt;marking as blocker as per athusoo&apos;s recommendation. &lt;/p&gt;</comment>
                            <comment id="12668626" author="athusoo" created="Thu, 29 Jan 2009 21:56:53 +0000"  >&lt;p&gt;Marking this for 0.2.0 version.&lt;/p&gt;</comment>
                            <comment id="12681569" author="athusoo" created="Fri, 13 Mar 2009 01:08:14 +0000"  >&lt;p&gt;Load balancing...&lt;/p&gt;</comment>
                            <comment id="12682127" author="rsm" created="Sun, 15 Mar 2009 04:52:43 +0000"  >&lt;p&gt;Created an annotation called UDFType. If a UDF is not deterministic, dont include it in the partition pruner.&lt;/p&gt;</comment>
                            <comment id="12682483" author="namit" created="Mon, 16 Mar 2009 22:02:09 +0000"  >&lt;p&gt;Looks good: I have some minor comments:&lt;/p&gt;

&lt;p&gt;1. No need to include UDFRand in PartitionPruner&lt;br/&gt;
2. test rand_partitionpruner.q:&lt;br/&gt;
     can you add that on a partitioned table, srcpart, instead ?&lt;br/&gt;
     can you add a explain plan which will show that all partitions are included ? &lt;br/&gt;
3. Can you add another tests for AND/OR of some expression and rand(), like&lt;br/&gt;
    Again can you perform a explain plan ?&lt;/p&gt;</comment>
                            <comment id="12682522" author="rsm" created="Mon, 16 Mar 2009 23:53:34 +0000"  >&lt;p&gt;Incorporated Namit&apos;s comments. Created a couple more test cases.&lt;/p&gt;</comment>
                            <comment id="12682527" author="namit" created="Tue, 17 Mar 2009 00:14:08 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;looks good&lt;/p&gt;</comment>
                            <comment id="12682536" author="athusoo" created="Tue, 17 Mar 2009 01:05:12 +0000"  >&lt;p&gt;I am getting some failures in the tests...&lt;/p&gt;

&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Begin query: input_testxpath2.q&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Loading data to table srcpart partition &lt;/p&gt;
{ds=2008-04-08, hr=11}
&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; OK&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Loading data to table srcpart partition &lt;/p&gt;
{ds=2008-04-08, hr=12}
&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; OK&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Loading data to table srcpart partition &lt;/p&gt;
{ds=2008-04-09, hr=11}
&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; OK&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Loading data to table srcpart partition &lt;/p&gt;
{ds=2008-04-09, hr=12}
&lt;p&gt;    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; OK&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Loading data to table srcbucket&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; OK&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Loading data to table srcbucket&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; OK&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Loading data to table src&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; OK&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Exception: Client Execution failed with error code = 10&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; junit.framework.AssertionFailedError: Client Execution failed with error code = 10&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.Assert.fail(Assert.java:47)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_input_testxpath2(TestCliDriver.java:3815)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestCase.runTest(TestCase.java:154)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestCase.runBare(TestCase.java:127)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestResult$1.protect(TestResult.java:106)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestResult.runProtected(TestResult.java:124)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestResult.run(TestResult.java:109)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestCase.run(TestCase.java:118)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestSuite.runTest(TestSuite.java:208)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at junit.framework.TestSuite.run(TestSuite.java:203)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:297)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:672)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:567)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Hive history file=/data/users/athusoo/commits/hive_trunk_ws6/ql/../build/ql/tmp/hive_job_log_athusoo&lt;/p&gt;</comment>
                            <comment id="12682973" author="rsm" created="Wed, 18 Mar 2009 09:49:12 +0000"  >&lt;p&gt;The problem was a bug in the patch. In the process of trying to not duplicate code, I introduced a bug where not all UDFs were getting nulled in the pruneExpr. I have now fixed the condition where the nodes are replaced with null.&lt;/p&gt;</comment>
                            <comment id="12683123" author="namit" created="Wed, 18 Mar 2009 18:30:40 +0000"  >&lt;p&gt;running tests for committing now&lt;/p&gt;</comment>
                            <comment id="12683195" author="namit" created="Wed, 18 Mar 2009 22:02:38 +0000"  >&lt;p&gt;committed. Thanks Raghu!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12416185">HIVE-325</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12402213" name="hive-253.1.patch" size="7536" author="rsm" created="Sun, 15 Mar 2009 04:52:43 +0000"/>
                            <attachment id="12402330" name="hive-253.2.patch" size="26338" author="rsm" created="Mon, 16 Mar 2009 23:53:34 +0000"/>
                            <attachment id="12402468" name="hive-253.3.patch" size="24972" author="rsm" created="Wed, 18 Mar 2009 09:49:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73671</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 36 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0l8rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122071</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>