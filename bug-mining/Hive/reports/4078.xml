<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:39:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-12487] Fix broken MiniLlap tests</title>
                <link>https://issues.apache.org/jira/browse/HIVE-12487</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently MiniLlap tests fail with the following error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;TestMiniLlapCliDriver - did not produce a TEST-*.xml file
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Supposedly, it started happening after &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12319&quot; title=&quot;Remove HadoopShims::getHadoopConfNames()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12319&quot;&gt;&lt;del&gt;HIVE-12319&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12914975">HIVE-12487</key>
            <summary>Fix broken MiniLlap tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="Aleksei">Aleksei Statkevich</assignee>
                                    <reporter username="Aleksei">Aleksei Statkevich</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Nov 2015 20:09:37 +0000</created>
                <updated>Tue, 16 Feb 2016 23:51:35 +0000</updated>
                            <resolved>Wed, 25 Nov 2015 18:11:34 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15018699" author="aleksei" created="Fri, 20 Nov 2015 20:15:28 +0000"  >&lt;p&gt;I didn&apos;t find anything specific to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12319&quot; title=&quot;Remove HadoopShims::getHadoopConfNames()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12319&quot;&gt;&lt;del&gt;HIVE-12319&lt;/del&gt;&lt;/a&gt; in test logs. The only issue I see when running locally is that aop library is missing which results in TEZ execution being stuck. Which could potentially lead to result filen not being produced.&lt;br/&gt;
After the change I&apos;m able to successfully run one of llap itests:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mvn test -Dtest=TestMiniLlapCliDriver -pl qtest -Dqfile=bucket_map_join_tez1.q
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15018993" author="sershe" created="Fri, 20 Nov 2015 22:56:27 +0000"  >&lt;p&gt;If you are saying you cannot repro the issue might be somehow specific to HiveQA setup... I&apos;ll take a look a bit later&lt;/p&gt;</comment>
                            <comment id="15019004" author="aleksei" created="Fri, 20 Nov 2015 23:01:40 +0000"  >&lt;p&gt;I was able to successfully run locally a large portion of qfile tests in Llap, so I think that test failure is unlikely to be caused by a code change.&lt;br/&gt;
Another potential reason for tests failure with no TEST-*.xml file is that &quot;orc_ppd_basic.q&quot; test took almost 2 hours on my machine, so it could easily have been killed by a timeout. This is a more likely reason which has some confirmation in log. Splitting or temporary disabling this test will help.&lt;br/&gt;
In any case, so far I haven&apos;t seen any relationship between Llap test failure and a change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12319&quot; title=&quot;Remove HadoopShims::getHadoopConfNames()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12319&quot;&gt;&lt;del&gt;HIVE-12319&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15019011" author="sershe" created="Fri, 20 Nov 2015 23:07:11 +0000"  >&lt;p&gt;Oh, yeah, that&apos;s definitely a timeout then, the timeout on HiveQA is 1 hour. The test runtime might have been increased by changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12319&quot; title=&quot;Remove HadoopShims::getHadoopConfNames()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12319&quot;&gt;&lt;del&gt;HIVE-12319&lt;/del&gt;&lt;/a&gt;, because these failures never happened before (since we merged to master).&lt;br/&gt;
Maybe some configuration has changed for some code... I will take a look a bit when I have some cycles.&lt;/p&gt;</comment>
                            <comment id="15020633" author="hiveqa" created="Sat, 21 Nov 2015 19:26:21 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12773588/HIVE-12487.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12773588/HIVE-12487.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 9834 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestHWISessionManager - did not produce a TEST-*.xml file
TestMiniLlapCliDriver - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_notin_having
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_explainuser_1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_dynpart_hashjoin_3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_tez_smb_empty
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hive.jdbc.TestSSL.testSSLVersion
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6093/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6093/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6093/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6093/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6093/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6093/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12773588 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15020890" author="aleksei" created="Sun, 22 Nov 2015 07:33:36 +0000"  >&lt;p&gt;I was able to debug the problem. The patch in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-12319&quot; title=&quot;Remove HadoopShims::getHadoopConfNames()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-12319&quot;&gt;&lt;del&gt;HIVE-12319&lt;/del&gt;&lt;/a&gt; used incorrect config (input one, not output) in one of the places when setting splits for TEZ which resulted in a split not being set and default value of 1 being used. As a result, tests had a lot of splits to process which caused some of them to run much longer and one of them caused a timeout.&lt;/p&gt;

&lt;p&gt;After fixing the issue, the test passed in a minute. I also double checked the patch to make sure correct config is used in all other cases.&lt;/p&gt;</comment>
                            <comment id="15022461" author="ashutoshc" created="Mon, 23 Nov 2015 16:59:51 +0000"  >&lt;p&gt;+1 &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Aleksei&quot; class=&quot;user-hover&quot; rel=&quot;Aleksei&quot;&gt;Aleksei&lt;/a&gt; Can you reupload the patch and make it &quot;Patch Available&quot;. Seems like Hive QA didnt pick it up.&lt;/p&gt;</comment>
                            <comment id="15022531" author="aleksei" created="Mon, 23 Nov 2015 17:26:08 +0000"  >&lt;p&gt;Reuploaded the patch to trigger Hive tests.&lt;/p&gt;</comment>
                            <comment id="15022797" author="sershe" created="Mon, 23 Nov 2015 19:20:26 +0000"  >&lt;p&gt;+1. Thanks for looking into this!&lt;/p&gt;</comment>
                            <comment id="15025831" author="hiveqa" created="Wed, 25 Nov 2015 00:36:32 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12773865/HIVE-12487.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12773865/HIVE-12487.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 11 failed/errored test(s), 9864 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestHWISessionManager - did not produce a TEST-*.xml file
TestMarkPartition - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_smb_mapjoin_12
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_temp_table_gb1
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union31
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union32
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_union_remove_15
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorization_short_regress
org.apache.hive.jdbc.TestSSL.testSSLVersion
org.apache.hive.spark.client.rpc.TestRpc.testClientTimeout
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6118/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6118/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6118/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6118/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6118/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6118/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 11 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12773865 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15026128" author="aleksei" created="Wed, 25 Nov 2015 03:55:05 +0000"  >&lt;p&gt;TestMiniLlapCliDriver tests pass fine now.&lt;/p&gt;

&lt;p&gt;Spark tests pass fine for me locally. Error during test run seem to be unrelated:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Unexpected exception java.lang.IllegalStateException: Error trying to obtain executor info: java.lang.IllegalStateException: RPC channel is closed. at org.apache.hadoop.hive.ql.QTestUtil$1.setSparkSession(QTestUtil.java:1022)}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="15027305" author="ashutoshc" created="Wed, 25 Nov 2015 18:11:34 +0000"  >&lt;p&gt;Pushed to master. Thanks, Aleksei!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12909852">HIVE-12319</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12773718" name="HIVE-12487.1.patch" size="946" author="Aleksei" created="Sun, 22 Nov 2015 07:33:36 +0000"/>
                            <attachment id="12773865" name="HIVE-12487.2.patch" size="946" author="Aleksei" created="Mon, 23 Nov 2015 17:26:08 +0000"/>
                            <attachment id="12773588" name="HIVE-12487.patch" size="526" author="Aleksei" created="Fri, 20 Nov 2015 20:15:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2oq5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12332641">2.0.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>