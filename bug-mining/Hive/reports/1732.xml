<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:13:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5916] No need to aggregate statistics collected via counter mechanism </title>
                <link>https://issues.apache.org/jira/browse/HIVE-5916</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This results in unnecessary computations and waste of cluster resources which is not required since aggregation of counter is anyway done by JobTracker.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682245">HIVE-5916</key>
            <summary>No need to aggregate statistics collected via counter mechanism </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ashutoshc">Ashutosh Chauhan</assignee>
                                    <reporter username="ashutoshc">Ashutosh Chauhan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Dec 2013 22:40:12 +0000</created>
                <updated>Thu, 5 Dec 2013 07:40:02 +0000</updated>
                            <resolved>Thu, 5 Dec 2013 07:40:02 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Statistics</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13837038" author="ashutoshc" created="Mon, 2 Dec 2013 22:51:37 +0000"  >&lt;p&gt;Currently from TableScanOp we publish statistics to JobTracker with aggrKey as counter group name, actual statistics type (numRows etc) as counter and value of statistics as counter value. We can simply use partition spec as counter group name, statistics as counter name and then we need not to do invoke stats aggregation from hive client when query finishes. This has following advantages:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Client don&apos;t need to do any aggregation. After retrieving statistics from JobTracker (via JobClient) it can directly add them to metastore.&lt;/li&gt;
	&lt;li&gt;It lowers memory footprint on JobTracker, since instead of having counters per task per partition, it will have counters per partition only.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13837095" author="ashutoshc" created="Mon, 2 Dec 2013 23:51:49 +0000"  >&lt;p&gt;Unfinished patch illustrating the idea. More work needs to be done. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; Can you take a look to finish this off, if you have time?&lt;/p&gt;</comment>
                            <comment id="13838602" author="ashutoshc" created="Wed, 4 Dec 2013 05:11:40 +0000"  >&lt;p&gt;Working patch with attached testcase. Need to clean-up to remove logging and need to do more testing.&lt;/p&gt;</comment>
                            <comment id="13838619" author="ashutoshc" created="Wed, 4 Dec 2013 05:37:12 +0000"  >&lt;p&gt;Attached wrong patch. Now with test-case.&lt;/p&gt;</comment>
                            <comment id="13839105" author="ashutoshc" created="Wed, 4 Dec 2013 17:42:38 +0000"  >&lt;p&gt;Getting closer. Trigger Hive QA to see if this introduces any failures.&lt;/p&gt;</comment>
                            <comment id="13839266" author="hiveqa" created="Wed, 4 Dec 2013 19:43:16 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12617026/HIVE-5916.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12617026/HIVE-5916.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 1 failed/errored test(s), 4456 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_decimal_udf
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/514/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/514/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/514/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/514/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 1 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12617026&lt;/p&gt;</comment>
                            <comment id="13839496" author="ashutoshc" created="Wed, 4 Dec 2013 23:51:25 +0000"  >&lt;p&gt;Patch is ready for review. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; Major change in this patch is it changes the aggKey such that no aggregation is required on client side in StatsTask. This also shortens the key so that it won&apos;t run into limits. Now we just use dbName.TblName/p1=v1/ instead of long elaborate filesystem paths. This patch also lowers the number of unique counters required. Earlier they were num of Partitions * number of Tasks * number of Stats, now we just use num of Partitions * num of Tasks. &lt;br/&gt;
This will conflict with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5936&quot; title=&quot;analyze command failing to collect stats with counter mechanism&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5936&quot;&gt;&lt;del&gt;HIVE-5936&lt;/del&gt;&lt;/a&gt; in major fashion. Since, it has bunch of additional improvements, do you think it makes sense to get this one in first.&lt;/p&gt;</comment>
                            <comment id="13839632" author="ashutoshc" created="Thu, 5 Dec 2013 01:02:22 +0000"  >&lt;p&gt;Review request at &lt;a href=&quot;https://reviews.apache.org/r/16026/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/16026/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13839814" author="navis" created="Thu, 5 Dec 2013 05:01:01 +0000"  >&lt;p&gt;nit: formats. except that, +1&lt;/p&gt;</comment>
                            <comment id="13839822" author="ashutoshc" created="Thu, 5 Dec 2013 05:07:54 +0000"  >&lt;p&gt;Thanks, Navis for review. Updated patch with review comments. Also, fixed many whitespace changes.&lt;/p&gt;</comment>
                            <comment id="13839824" author="ashutoshc" created="Thu, 5 Dec 2013 05:08:31 +0000"  >&lt;p&gt;Hopefully, Hive QA will pick this up.&lt;/p&gt;</comment>
                            <comment id="13839907" author="hiveqa" created="Thu, 5 Dec 2013 07:22:39 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12617112/HIVE-5916.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12617112/HIVE-5916.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4457 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/526/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/526/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/526/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/526/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12617112&lt;/p&gt;</comment>
                            <comment id="13839914" author="ashutoshc" created="Thu, 5 Dec 2013 07:40:02 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis for review.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12682583">HIVE-5936</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12616943" name="HIVE-5916.2.patch" size="22717" author="ashutoshc" created="Wed, 4 Dec 2013 05:37:12 +0000"/>
                            <attachment id="12617026" name="HIVE-5916.3.patch" size="24017" author="ashutoshc" created="Wed, 4 Dec 2013 17:42:38 +0000"/>
                            <attachment id="12617078" name="HIVE-5916.4.patch" size="53692" author="ashutoshc" created="Wed, 4 Dec 2013 23:51:25 +0000"/>
                            <attachment id="12617112" name="HIVE-5916.5.patch" size="53305" author="ashutoshc" created="Thu, 5 Dec 2013 05:07:54 +0000"/>
                            <attachment id="12616638" name="HIVE-5916.patch" size="3921" author="ashutoshc" created="Mon, 2 Dec 2013 23:51:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361502</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 50 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qbdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>361800</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>