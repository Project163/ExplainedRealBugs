<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:04:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4029] Hive Profiler dies with NPE</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4029</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Steps to reproduce:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ git clone https://github.com/apache/hive.git hive-profiler-npe
Initialized empty Git repository in /home/brock/hive-profiler-npe/.git/
remote: Counting objects: 73654, done.
remote: Compressing objects: 100% (15383/15383), done.
remote: Total 73654 (delta 44331), reused 71338 (delta 43054)
Receiving objects: 100% (73654/73654), 42.78 MiB | 1.69 MiB/s, done.
Resolving deltas: 100% (44331/44331), done.
$ cd hive-profiler-npe/
$ ant clean package
$ cd build/dist/
$ ./bin/hive
hive&amp;gt; DROP TABLE IF EXISTS users;
hive&amp;gt; CREATE TABLE users (
user string,
passwd string,
uid int,
gid int,
name string,
home string,
shell string
)
ROW FORMAT DELIMITED
FIELDS TERMINATED BY &apos;:&apos;
STORED AS TEXTFILE;

hive&amp;gt; LOAD DATA LOCAL INPATH &apos;/etc/passwd&apos; INTO TABLE users;

hive&amp;gt; set hive.exec.operator.hooks=org.apache.hadoop.hive.ql.profiler.HiveProfiler;
set hive.exec.operator.hooks=org.apache.hadoop.hive.ql.profiler.HiveProfiler
hive&amp;gt; set hive.exec.post.hooks=org.apache.hadoop.hive.ql.hooks.HiveProfilerResultsHook;
set hive.exec.post.hooks=org.apache.hadoop.hive.ql.hooks.HiveProfilerResultsHook
hive&amp;gt; SET hive.exec.mode.local.auto=false;
SET hive.exec.mode.local.auto=false
hive&amp;gt; SET hive.task.progress=true;
SET hive.task.progress=true
hive&amp;gt; 
    &amp;gt; select count(1) from users;
select count(1) from users
Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks determined at compile time: 1
In order to change the average load for a reducer (in bytes):
  set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;
In order to limit the maximum number of reducers:
  set hive.exec.reducers.max=&amp;lt;number&amp;gt;
In order to set a constant number of reducers:
  set mapred.reduce.tasks=&amp;lt;number&amp;gt;
Starting Job = job_201302131617_0022, Tracking URL = http://localhost.localdomain:50030/jobdetails.jsp?jobid=job_201302131617_0022
Kill Command = /usr/local/hadoop-1.0.4/libexec/../bin/hadoop job  -kill job_201302131617_0022
Hadoop job information for Stage-1: number of mappers: 1; number of reducers: 1
2013-02-16 10:24:14,215 Stage-1 map = 0%,  reduce = 0%
2013-02-16 10:24:44,354 Stage-1 map = 100%,  reduce = 100%
Ended Job = job_201302131617_0022 with errors
Error during job, obtaining debugging information...
Job Tracking URL: http://localhost.localdomain:50030/jobdetails.jsp?jobid=job_201302131617_0022
Examining task ID: task_201302131617_0022_m_000002 (and more) from job job_201302131617_0022

Task with the most failures(4): 
-----
Task ID:
  task_201302131617_0022_m_000000

URL:
  http://localhost.localdomain:50030/taskdetails.jsp?jobid=job_201302131617_0022&amp;amp;tipid=task_201302131617_0022_m_000000
-----
Diagnostic Messages for this Task:
java.lang.RuntimeException: Hive Runtime Error while closing operators
	at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:227)
	at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:57)
	at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
	at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
	at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
	at java.security.AccessController.doPrivileged(Native Method)
	at javax.security.auth.Subject.doAs(Subject.java:396)
	at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
	at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: java.lang.NullPointerException
	at org.apache.hadoop.hive.ql.profiler.HiveProfilePublisher.publishStat(HiveProfilePublisher.java:85)
	at org.apache.hadoop.hive.ql.profiler.HiveProfiler.close(HiveProfiler.java:110)
	at org.apache.hadoop.hive.ql.exec.Operator.closeOperatorHooks(Operator.java:452)
	at org.apache.hadoop.hive.ql.exec.Operator.close(Operator.java:605)
	at org.apache.hadoop.hive.ql.exec.ExecMapper.close(ExecMapper.java:194)
	... 8 more


FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.MapRedTask
MapReduce Jobs Launched: 
Job 0: Map: 1  Reduce: 1   HDFS Read: 0 HDFS Write: 0 FAIL
Total MapReduce CPU Time Spent: 0 msec

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12632715">HIVE-4029</key>
            <summary>Hive Profiler dies with NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brocknoland">Brock Noland</assignee>
                                    <reporter username="brocknoland">Brock Noland</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Feb 2013 16:26:31 +0000</created>
                <updated>Thu, 16 May 2013 21:10:34 +0000</updated>
                            <resolved>Mon, 18 Feb 2013 09:15:43 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13580441" author="namit" created="Mon, 18 Feb 2013 06:06:42 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13580480" author="hudson" created="Mon, 18 Feb 2013 08:04:43 +0000"  >&lt;p&gt;Integrated in hive-trunk-hadoop1 #88 (See &lt;a href=&quot;https://builds.apache.org/job/hive-trunk-hadoop1/88/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/hive-trunk-hadoop1/88/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4029&quot; title=&quot;Hive Profiler dies with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4029&quot;&gt;&lt;del&gt;HIVE-4029&lt;/del&gt;&lt;/a&gt; Hive Profiler dies with NPE&lt;br/&gt;
(Brock Noland via namit) (Revision 1447130)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1447130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1447130&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilePublisher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13580508" author="namit" created="Mon, 18 Feb 2013 09:15:43 +0000"  >&lt;p&gt;Committed. Thanks Brock&lt;/p&gt;</comment>
                            <comment id="13580864" author="hudson" created="Mon, 18 Feb 2013 22:41:59 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #127 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/127/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/127/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4029&quot; title=&quot;Hive Profiler dies with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4029&quot;&gt;&lt;del&gt;HIVE-4029&lt;/del&gt;&lt;/a&gt; Hive Profiler dies with NPE&lt;br/&gt;
(Brock Noland via namit) (Revision 1447130)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1447130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1447130&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilePublisher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13580944" author="hudson" created="Tue, 19 Feb 2013 01:27:43 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1975 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1975/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1975/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4029&quot; title=&quot;Hive Profiler dies with NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4029&quot;&gt;&lt;del&gt;HIVE-4029&lt;/del&gt;&lt;/a&gt; Hive Profiler dies with NPE&lt;br/&gt;
(Brock Noland via namit) (Revision 1447130)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1447130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1447130&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/profiler/HiveProfilePublisher.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12629180">HIVE-3937</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12569674" name="Hive-4029-D8649-0.diff" size="761" author="brocknoland" created="Sat, 16 Feb 2013 16:40:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313211</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i1u7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313557</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>