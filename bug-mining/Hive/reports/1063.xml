<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:03:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3814] Cannot drop partitions on table when using Oracle metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3814</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Create a table with a partition. Try to drop the partition or the table containing the partition. Following error is seen:&lt;br/&gt;
FAILED: Error in metadata: MetaException(message:javax.jdo.JDODataStoreException: Error executing JDOQL query &quot;SELECT &apos;org.apache.hadoop.hive.metastore.model.MPartitionColumnStatistics&apos; AS NUCLEUS_TYPE,THIS.AVG_COL_LEN,THIS.&quot;COLUMN_NAME&quot;,THIS.COLUMN_TYPE,THIS.DB_NAME,THIS.DOUBLE_HIGH_VALUE,THIS.DOUBLE_LOW_VALUE,THIS.LAST_ANALYZED,THIS.LONG_HIGH_VALUE,THIS.LONG_LOW_VALUE,THIS.MAX_COL_LEN,THIS.NUM_DISTINCTS,THIS.NUM_FALSES,THIS.NUM_NULLS,THIS.NUM_TRUES,THIS.PARTITION_NAME,THIS.&quot;TABLE_NAME&quot;,THIS.CS_ID FROM PART_COL_STATS THIS LEFT OUTER JOIN PARTITIONS THIS_PARTITION_PARTITION_NAME ON THIS.PART_ID = THIS_PARTITION_PARTITION_NAME.PART_ID WHERE THIS_PARTITION_PARTITION_NAME.PART_NAME = ? AND THIS.DB_NAME = ? AND THIS.&quot;TABLE_NAME&quot; = ?&quot; : ORA-00904: &quot;THIS&quot;.&quot;PARTITION_NAME&quot;: invalid identifier&lt;/p&gt;

&lt;p&gt;The problem here is that the column &quot;PARTITION_NAME&quot; that the query is referring to in table &quot;PART_COL_STATS&quot; is non-existent. Looking at the hive schema scripts for mysql &amp;amp; derby, this should be &quot;PARTITION_NAME&quot;. Postgres also suffers from the same problem.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Oracle 11g r2&lt;/p&gt;</environment>
        <key id="12624402">HIVE-3814</key>
            <summary>Cannot drop partitions on table when using Oracle metastore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="deepesh">Deepesh Khandelwal</assignee>
                                    <reporter username="deepesh">Deepesh Khandelwal</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Dec 2012 03:08:05 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:10 +0000</updated>
                            <resolved>Tue, 18 Dec 2012 15:56:05 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13534583" author="deepesh" created="Tue, 18 Dec 2012 03:10:06 +0000"  >&lt;p&gt;Attaching a patch that fixes the issue.&lt;/p&gt;</comment>
                            <comment id="13534602" author="deepesh" created="Tue, 18 Dec 2012 03:41:13 +0000"  >&lt;p&gt;Added an Apache Review Board entry at &lt;a href=&quot;https://reviews.apache.org/r/8665/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/8665/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13534724" author="ashutoshc" created="Tue, 18 Dec 2012 07:21:06 +0000"  >&lt;p&gt;+1 looks good to me.&lt;/p&gt;</comment>
                            <comment id="13534992" author="ashutoshc" created="Tue, 18 Dec 2012 15:56:05 +0000"  >&lt;p&gt;Committed to trunk and 0.10. Thanks, Deepesh!&lt;/p&gt;</comment>
                            <comment id="13535613" author="hudson" created="Wed, 19 Dec 2012 03:15:45 +0000"  >&lt;p&gt;Integrated in Hive-0.10.0-SNAPSHOT-h0.20.1 #7 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-0.10.0-SNAPSHOT-h0.20.1/7/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-0.10.0-SNAPSHOT-h0.20.1/7/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3814&quot; title=&quot;Cannot drop partitions on table when using Oracle metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3814&quot;&gt;&lt;del&gt;HIVE-3814&lt;/del&gt;&lt;/a&gt; : Cannot drop partitions on table when using Oracle metastore (Deepesh Khandelwal via Ashutosh Chauhan) (Revision 1423492)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423492&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423492&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/branches/branch-0.10/metastore/scripts/upgrade/oracle/012-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.oracle.sql&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.10/metastore/scripts/upgrade/oracle/hive-schema-0.10.0.oracle.sql&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.10/metastore/scripts/upgrade/postgres/012-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/branches/branch-0.10/metastore/scripts/upgrade/postgres/hive-schema-0.10.0.postgres.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13535640" author="hudson" created="Wed, 19 Dec 2012 04:52:24 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1864 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1864/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1864/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3814&quot; title=&quot;Cannot drop partitions on table when using Oracle metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3814&quot;&gt;&lt;del&gt;HIVE-3814&lt;/del&gt;&lt;/a&gt; : Cannot drop partitions on table when using Oracle metastore (Deepesh Khandelwal via Ashutosh Chauhan) (Revision 1423488)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423488&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/oracle/012-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.oracle.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/oracle/hive-schema-0.10.0.oracle.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/012-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/hive-schema-0.10.0.postgres.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13547899" author="hudson" created="Wed, 9 Jan 2013 10:23:30 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3814&quot; title=&quot;Cannot drop partitions on table when using Oracle metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3814&quot;&gt;&lt;del&gt;HIVE-3814&lt;/del&gt;&lt;/a&gt; : Cannot drop partitions on table when using Oracle metastore (Deepesh Khandelwal via Ashutosh Chauhan) (Revision 1423488)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1423488&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/oracle/012-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.oracle.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/oracle/hive-schema-0.10.0.oracle.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/012-&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1362&quot; title=&quot;Optimizer statistics on columns in tables and partitions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1362&quot;&gt;&lt;del&gt;HIVE-1362&lt;/del&gt;&lt;/a&gt;.postgres.sql&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/scripts/upgrade/postgres/hive-schema-0.10.0.postgres.sql&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550045" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:10 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12561408" name="HIVE-3814.patch" size="3392" author="deepesh" created="Tue, 18 Dec 2012 03:10:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>299241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i160gv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>243208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>