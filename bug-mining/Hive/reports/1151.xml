<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:04:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4139] MiniDFS shim does not work for hadoop 2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4139</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There&apos;s an incompatibility between hadoop 1 &amp;amp; 2 wrt to the MiniDfsCluster class. That causes the hadoop 2 line Minimr tests to fail with a &quot;MethodNotFound&quot; exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12635888">HIVE-4139</key>
            <summary>MiniDFS shim does not work for hadoop 2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hagleitn">Gunther Hagleitner</assignee>
                                    <reporter username="hagleitn">Gunther Hagleitner</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Mar 2013 20:31:26 +0000</created>
                <updated>Thu, 16 May 2013 21:10:33 +0000</updated>
                            <resolved>Wed, 20 Mar 2013 21:54:43 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13596330" author="hagleitn" created="Thu, 7 Mar 2013 20:33:34 +0000"  >&lt;p&gt;Separate shim classes for 20S an 23. Also fixed some dependency issues (yarn-server-tests etc)&lt;/p&gt;</comment>
                            <comment id="13598116" author="hagleitn" created="Sun, 10 Mar 2013 00:26:10 +0000"  >&lt;p&gt;Had to add shim for MiniMRCluster as well. Ran tests on 1 line, 2 line and .20. All seem to check out fine.&lt;/p&gt;</comment>
                            <comment id="13600329" author="ashutoshc" created="Tue, 12 Mar 2013 18:52:03 +0000"  >&lt;ul&gt;
	&lt;li&gt;Was there a reason to add this flag  -XX:+CMSClassUnloadingEnabled ?&lt;/li&gt;
	&lt;li&gt;Can you briefly spell out the reason for shimming DFS and MiniMR cluster. Specifically, how these two are different in 20S and 23 ?&lt;/li&gt;
	&lt;li&gt;There are some println statements which are commented. It will be good to change them to LOG.info&lt;/li&gt;
	&lt;li&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4148&quot; title=&quot;Cleanup aisle &amp;quot;ivy&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4148&quot;&gt;&lt;del&gt;HIVE-4148&lt;/del&gt;&lt;/a&gt; ivy.xmls are cleaned up, do we still need new deps of this patch?&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13604090" author="hagleitn" created="Sat, 16 Mar 2013 02:29:41 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Was there a reason to add this flag -XX:+CMSClassUnloadingEnabled&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When running the unit tests against the hadoop 2 minidfs/minimr stuff, you run out of PermGen space. This setting (as well as the one to increase the PermGen space for junit fixes the issue.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Shim for DFS: There&apos;s a change in MiniDFS that changes the return type to a sub type of one of the public methods (getFilesystem). API compatible, but not binary compatible. By creating the shim, each version will be compiled against the right version of hadoop.&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Shim for MiniMRCluster: There was some really ugly code in QTestUtil, that used exceptions to distinguish between hadoop 1/2 and initialized the MiniMRcluster accordingly. By creating shims for these you can just init that stuff differently for each hadoop version (the apis are the same, but the behavior and configs have changed)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Yes, these dependencies are needed. The build system won&apos;t pick them up otherwise.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13606284" author="ashutoshc" created="Tue, 19 Mar 2013 12:43:15 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13606288" author="ashutoshc" created="Tue, 19 Mar 2013 12:46:53 +0000"  >&lt;p&gt;Patch doesn&apos;t apply cleanly anymore. This also will have an overlap with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4200&quot; title=&quot;Consolidate submodule dependencies using ivy inheritance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4200&quot;&gt;&lt;del&gt;HIVE-4200&lt;/del&gt;&lt;/a&gt; I believe. Would you like to get &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4200&quot; title=&quot;Consolidate submodule dependencies using ivy inheritance&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4200&quot;&gt;&lt;del&gt;HIVE-4200&lt;/del&gt;&lt;/a&gt; in first and then update this patch?&lt;/p&gt;</comment>
                            <comment id="13607034" author="hagleitn" created="Tue, 19 Mar 2013 23:35:01 +0000"  >&lt;p&gt;Rebased. No changes from .3 other than resolved conflict in build-common.xml.&lt;/p&gt;</comment>
                            <comment id="13607038" author="hagleitn" created="Tue, 19 Mar 2013 23:37:26 +0000"  >&lt;p&gt;I think this is ready to go in and can go first.&lt;/p&gt;</comment>
                            <comment id="13607171" author="ashutoshc" created="Wed, 20 Mar 2013 01:50:25 +0000"  >&lt;p&gt;ok. running tests&lt;/p&gt;</comment>
                            <comment id="13608289" author="ashutoshc" created="Wed, 20 Mar 2013 21:54:43 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Gunther!&lt;/p&gt;</comment>
                            <comment id="13608860" author="hudson" created="Thu, 21 Mar 2013 12:06:08 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2025 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2025/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2025/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4139&quot; title=&quot;MiniDFS shim does not work for hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4139&quot;&gt;&lt;del&gt;HIVE-4139&lt;/del&gt;&lt;/a&gt; : MiniDFS shim does not work for hadoop 2 (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1459072)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1459072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1459072&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623017" author="hudson" created="Thu, 4 Apr 2013 23:39:50 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #138 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4139&quot; title=&quot;MiniDFS shim does not work for hadoop 2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4139&quot;&gt;&lt;del&gt;HIVE-4139&lt;/del&gt;&lt;/a&gt; : MiniDFS shim does not work for hadoop 2 (Gunther Hagleitner via Ashutosh Chauhan) (Revision 1459072)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1459072&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1459072&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/build-common.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/build.properties&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20/java/org/apache/hadoop/hive/shims/Hadoop20Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.20S/java/org/apache/hadoop/hive/shims/Hadoop20SShims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/0.23/java/org/apache/hadoop/hive/shims/Hadoop23Shims.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common-secure/java/org/apache/hadoop/hive/shims/HadoopShimsSecure.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/shims/src/common/java/org/apache/hadoop/hive/shims/HadoopShims.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12572604" name="HIVE-4139.1.patch" size="8391" author="hagleitn" created="Thu, 7 Mar 2013 20:33:34 +0000"/>
                            <attachment id="12572941" name="HIVE-4139.2.patch" size="16665" author="hagleitn" created="Sun, 10 Mar 2013 00:26:10 +0000"/>
                            <attachment id="12572957" name="HIVE-4139.3.patch" size="19815" author="hagleitn" created="Sun, 10 Mar 2013 10:49:45 +0000"/>
                            <attachment id="12574446" name="HIVE-4139.4.patch" size="19873" author="hagleitn" created="Tue, 19 Mar 2013 23:35:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316380</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ildj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>316723</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>