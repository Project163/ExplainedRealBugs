<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:52:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-547] NullPointerException in ExecDriver</title>
                <link>https://issues.apache.org/jira/browse/HIVE-547</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We saw a job failed with the following message in hive.log.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2009-06-06 22:50:55,275 ERROR exec.ExecDriver (SessionState.java:printError(279)) - Ended Job = job_200905211352_145363 with exception &apos;java.lang.NullPointerException(null)&apos;
java.lang.NullPointerException
        at org.apache.hadoop.hive.ql.exec.ExecDriver.jobProgress(ExecDriver.java:193)
        at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:395)
        at org.apache.hadoop.hive.ql.Driver.execute(Driver.java:307)
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:213)
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:176)
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:216)
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:273)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:166)
        at org.apache.hadoop.mapred.JobShell.run(JobShell.java:194)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:79)
        at org.apache.hadoop.mapred.JobShell.main(JobShell.java:220)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The corresponding code is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; RunningJob jobProgress(JobClient jc, RunningJob rj) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; lastReport = &quot;&quot;;
    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; (!rj.isComplete()) {
      &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
      } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (InterruptedException e) {
      }
      rj = jc.getJob(rj.getJobID());
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; report = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
193&#65306;  report = &lt;span class=&quot;code-quote&quot;&gt;&quot; map = &quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(rj.mapProgress() * 100) + &lt;span class=&quot;code-quote&quot;&gt;&quot;%,  reduce =&quot;&lt;/span&gt;
          + &lt;span class=&quot;code-object&quot;&gt;Math&lt;/span&gt;.round(rj.reduceProgress() * 100) + &lt;span class=&quot;code-quote&quot;&gt;&quot;%&quot;&lt;/span&gt;;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12427289">HIVE-547</key>
            <summary>NullPointerException in ExecDriver</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Sun, 7 Jun 2009 06:01:42 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:48 +0000</updated>
                            <resolved>Fri, 12 Jun 2009 00:18:28 +0000</resolved>
                                    <version>0.4.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12717008" author="zshao" created="Sun, 7 Jun 2009 06:04:27 +0000"  >&lt;p&gt;It&apos;s possible that the job finished and then get removed from the JobTracker within 1 second. But I think our cluster is configured to avoid that to happen.&lt;/p&gt;
</comment>
                            <comment id="12717009" author="zshao" created="Sun, 7 Jun 2009 06:13:50 +0000"  >&lt;p&gt;The JobTracker log shows the job is completed about 8 minutes earlier, and retired 3 minutes earlier.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2009-06-06 22:42:14,602 INFO org.apache.hadoop.mapred.JobInProgress: Job job_200905211352_145363 has completed successfully.
...
2009-06-06 22:47:05,429 INFO org.apache.hadoop.mapred.JobTracker: Retired job with id: &apos;job_200905211352_145363&apos; of user: &apos;root&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12717010" author="zshao" created="Sun, 7 Jun 2009 06:26:06 +0000"  >&lt;p&gt;Unfortunately Hive&apos;s progress information (the &quot;report&quot; String from the code above) does not include timestamps, so there is no way to know what happened during those 2 minutes.&lt;/p&gt;

&lt;p&gt;We should include the timestamp into the &quot;report&quot; String.&lt;/p&gt;</comment>
                            <comment id="12717011" author="zshao" created="Sun, 7 Jun 2009 07:00:33 +0000"  >&lt;p&gt;This patch adds the time stamp to the log in the following format:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2009-06-06 11:56:13,872 map = 100%,  reduce =100%
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12717329" author="namit" created="Mon, 8 Jun 2009 17:08:01 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12717353" author="namit" created="Mon, 8 Jun 2009 18:22:30 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                            <comment id="12717941" author="zshao" created="Wed, 10 Jun 2009 06:35:25 +0000"  >&lt;p&gt;This patch makes sure we don&apos;t output one line per second. The behavior is that we will output at least one line per minute if no status change is detected.&lt;/p&gt;</comment>
                            <comment id="12717942" author="zshao" created="Wed, 10 Jun 2009 06:36:03 +0000"  >&lt;p&gt;The current behavior is showing one log line per second. This may not be good in case the job runs a long time.&lt;/p&gt;</comment>
                            <comment id="12718652" author="namit" created="Thu, 11 Jun 2009 22:06:00 +0000"  >&lt;p&gt;Committed. Thanks Zheng &lt;/p&gt;</comment>
                            <comment id="12718678" author="namit" created="Fri, 12 Jun 2009 00:18:28 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410078" name="HIVE-547.1.patch" size="1239" author="zshao" created="Sun, 7 Jun 2009 07:00:33 +0000"/>
                            <attachment id="12410277" name="HIVE-547.2.patch" size="2148" author="zshao" created="Wed, 10 Jun 2009 06:35:25 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 24 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lafj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122340</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>