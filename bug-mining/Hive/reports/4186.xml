<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:40:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-12706] Incorrect output from from_utc_timestamp()/to_utc_timestamp when local timezone has DST</title>
                <link>https://issues.apache.org/jira/browse/HIVE-12706</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Getting wrong output with the local timezone set to PST (which has DST). I don&apos;t think this happens when the local timezone does not observe DST.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select from_utc_timestamp(&apos;2015-03-28 17:00:00&apos;, &apos;Europe/London&apos;)
2015-03-28 17:00:00

select from_utc_timestamp(&apos;2015-03-28 18:00:00&apos;, &apos;Europe/London&apos;)
2015-03-28 19:00:00  &amp;lt;= Wrong, should be 2015-03-28 18:00:00

select from_utc_timestamp(&apos;2015-03-28 19:00:00&apos;, &apos;Europe/London&apos;)
2015-03-28 20:00:00 &amp;lt;= Wrong, should be 2015-03-28 19:00:00
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also to_utc_timestamp():&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select to_utc_timestamp(&apos;2015-03-28 17:00:00&apos;, &apos;Europe/London&apos;)
2015-03-28 17:00:00

select to_utc_timestamp(&apos;2015-03-28 18:00:00&apos;, &apos;Europe/London&apos;)
2015-03-28 17:00:00 &amp;lt;= Wrong

select to_utc_timestamp(&apos;2015-03-28 19:00:00&apos;, &apos;Europe/London&apos;)
2015-03-28 18:00:00 &amp;lt;= Wrong

select to_utc_timestamp(&apos;2015-03-28 20:00:00&apos;, &apos;Europe/London&apos;)
2015-03-28 19:00:00 &amp;lt;= Wrong
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12922835">HIVE-12706</key>
            <summary>Incorrect output from from_utc_timestamp()/to_utc_timestamp when local timezone has DST</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdere">Jason Dere</assignee>
                                    <reporter username="jdere">Jason Dere</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Dec 2015 20:07:12 +0000</created>
                <updated>Wed, 9 Aug 2017 06:07:22 +0000</updated>
                            <resolved>Tue, 5 Jan 2016 00:24:50 +0000</resolved>
                                                    <fixVersion>2.0.0</fixVersion>
                                    <component>UDF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15064793" author="jdere" created="Fri, 18 Dec 2015 21:30:09 +0000"  >&lt;p&gt;Looks like this error is occurring because the function is handling the timestamps as timestamps in the local timezone, though the function says that the timestamp is to be treated as having either UTC (from_utc_timestamp()) or the input timezone (to_utc_timestamp()).&lt;/p&gt;</comment>
                            <comment id="15064885" author="jdere" created="Fri, 18 Dec 2015 22:30:40 +0000"  >&lt;p&gt;Patch to fix issue by parsing timestamp string with DateFormat to use correct timezone, and also using DateFormat to convert to timestamp string of destination timezone.&lt;/p&gt;</comment>
                            <comment id="15065447" author="hiveqa" created="Sat, 19 Dec 2015 17:39:01 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12778614/HIVE-12706.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12778614/HIVE-12706.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 20 failed/errored test(s), 9970 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestHWISessionManager - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_join_stats2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_filemetadata
org.apache.hadoop.hive.cli.TestEncryptedHDFSCliDriver.testCliDriver_encryption_insert_partition_dynamic
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_stats_filemetadata
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_columnstats_partlvl_multiple_part_clause
org.apache.hadoop.hive.metastore.TestHiveMetaStorePartitionSpecs.testGetPartitionSpecs_WithAndWithoutPartitionGrouping
org.apache.hadoop.hive.ql.exec.spark.session.TestSparkSessionManagerImpl.testMultiSessionMultipleUse
org.apache.hadoop.hive.ql.exec.spark.session.TestSparkSessionManagerImpl.testSingleSessionMultipleUse
org.apache.hadoop.hive.ql.security.authorization.plugin.TestHiveOperationType.checkHiveOperationTypeMatch
org.apache.hive.jdbc.TestSSL.testSSLVersion
org.apache.hive.spark.client.TestSparkClient.testAddJarsAndFiles
org.apache.hive.spark.client.TestSparkClient.testCounters
org.apache.hive.spark.client.TestSparkClient.testErrorJob
org.apache.hive.spark.client.TestSparkClient.testJobSubmission
org.apache.hive.spark.client.TestSparkClient.testMetricsCollection
org.apache.hive.spark.client.TestSparkClient.testRemoteClient
org.apache.hive.spark.client.TestSparkClient.testSimpleSparkJob
org.apache.hive.spark.client.TestSparkClient.testSyncRpc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6410/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6410/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6410/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6410/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6410/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6410/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 20 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12778614 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15065983" author="jdere" created="Mon, 21 Dec 2015 01:56:14 +0000"  >&lt;p&gt;Test failures do not look related&lt;/p&gt;</comment>
                            <comment id="15068513" author="jdere" created="Tue, 22 Dec 2015 18:26:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; would either of you be able to review?&lt;/p&gt;</comment>
                            <comment id="15068745" author="ashutoshc" created="Tue, 22 Dec 2015 21:19:34 +0000"  >&lt;p&gt;From bug description, it seems problem is also for to_ts() but changes are only in from_ts() Do those changes cover both cases?&lt;/p&gt;</comment>
                            <comment id="15068779" author="jdere" created="Tue, 22 Dec 2015 21:48:50 +0000"  >&lt;p&gt;GenericUDFToTimestamp derives from GenericUDFFromTimestamp, only difference being whether to invert the from/to timezones. So fixing GenericUDFFromTimestamp fixes the behavior for both functions.&lt;/p&gt;</comment>
                            <comment id="15068787" author="ashutoshc" created="Tue, 22 Dec 2015 21:55:58 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="15082075" author="jdere" created="Tue, 5 Jan 2016 00:24:50 +0000"  >&lt;p&gt;Committed to branch-1/branch-2.0/master&lt;/p&gt;</comment>
                            <comment id="15370880" author="ctang.ma" created="Mon, 11 Jul 2016 14:32:25 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;jdere&lt;/a&gt; Could you let me know how to reproduce this issue? It seems these functions work as expected with the code without this patch. I am investigating a similar issue &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14161&quot; title=&quot;from_utc_timestamp()/to_utc_timestamp return incorrect results with EST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14161&quot;&gt;&lt;del&gt;HIVE-14161&lt;/del&gt;&lt;/a&gt; and wonder if it is related or not. Thanks &lt;/p&gt;</comment>
                            <comment id="15373579" author="jdere" created="Tue, 12 Jul 2016 19:49:54 +0000"  >&lt;p&gt;I noticed you already commented in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-14161&quot; title=&quot;from_utc_timestamp()/to_utc_timestamp return incorrect results with EST&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-14161&quot;&gt;&lt;del&gt;HIVE-14161&lt;/del&gt;&lt;/a&gt; about difference between EST vs America/New_York, but I think the case was similar here as well, the time zone had to be a timezone that actually switches during DST (like America/New_York) to see the issue.&lt;/p&gt;</comment>
                            <comment id="16119451" author="leelakrishna.k@gmail.com" created="Wed, 9 Aug 2017 06:01:14 +0000"  >&lt;p&gt;There is still a bug in this - from_utc_timestamp() is interpreting a GMT timestamp with DST. &lt;/p&gt;

&lt;p&gt;HS2 on PST timezone:&lt;br/&gt;
GMT timestamp                       PST timestamp                       PST 2GMT&lt;br/&gt;
2012-03-11 01:30:15.332	2012-03-10&#160;17:30:15.332	2012-03-11&#160;01:30:15.332&lt;br/&gt;
2012-03-11 02:30:15.332	2012-03-10&#160;19:30:15.332	2012-03-11&#160;03:30:15.332 (&amp;lt;--- We got 1 hour more on GMT)&lt;/p&gt;

&lt;p&gt;PSTtimestap is generated using from_utc_timestamp(&apos;2012-03-11 02:30:15.332&apos;, &apos;PST&apos;) &lt;br/&gt;
PST2GMT timestamp is generated using to_utc_timestamp(from_utc_timestamp(&apos;2012-03-11 02:30:15.332&apos;, &apos;PST&apos;), &apos;PST&apos;)&lt;/p&gt;</comment>
                            <comment id="16119452" author="leelakrishna.k@gmail.com" created="Wed, 9 Aug 2017 06:02:14 +0000"  >&lt;p&gt;Will report this as new issue&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310462">
                    <name>Parent Feature</name>
                                                                <inwardlinks description="Parent Feature">
                                        <issuelink>
            <issuekey id="13093377">HIVE-17278</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12986797">HIVE-14161</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12778614" name="HIVE-12706.1.patch" size="7592" author="jdere" created="Fri, 18 Dec 2015 22:30:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 15 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2q23j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>