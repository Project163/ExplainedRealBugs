<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:20:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7209] allow metastore authorization api calls to be restricted to certain invokers</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7209</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Any user who has direct access to metastore can make metastore api calls that modify the authorization policy. &lt;br/&gt;
The users who can make direct metastore api calls in a secure cluster configuration are usually the &apos;cluster insiders&apos; such as Pig and MR users, who are not (securely) covered by the metastore based authorization policy. But it makes sense to disallow access from such users as well.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12720479">HIVE-7209</key>
            <summary>allow metastore authorization api calls to be restricted to certain invokers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas Nair</assignee>
                                    <reporter username="thejas">Thejas Nair</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Jun 2014 23:48:52 +0000</created>
                <updated>Sun, 11 Jan 2015 08:37:10 +0000</updated>
                            <resolved>Thu, 3 Jul 2014 21:44:49 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                    <component>Authentication</component>
                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14027228" author="thejas" created="Tue, 10 Jun 2014 23:49:08 +0000"  >&lt;p&gt;Note that it is not recommended that user whose access is being secured using SQL standards based auth is given direct access to metastore. With that practice in place, such users cannot act maliciously to change access control policy without authorization.&lt;/p&gt;</comment>
                            <comment id="14028602" author="thejas" created="Wed, 11 Jun 2014 23:53:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7209&quot; title=&quot;allow metastore authorization api calls to be restricted to certain invokers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7209&quot;&gt;&lt;del&gt;HIVE-7209&lt;/del&gt;&lt;/a&gt;.1.patch - Has changes to allow for multiple authorizers to be registered for metastore authorization. &lt;br/&gt;
Also includes a new authorizer org.apache.hadoop.hive.ql.security.authorization.MetaStoreAuthzAPIAuthorizerEmbedOnly that can be added to the hive.security.metastore.authorization.manager config parameter. It will disallow any metastore api calls in remote metastore mode. If you use HS2 with embedded metastore, the HS2 can make these api calls, as the authorizer disables the calls only in remote mode.&lt;/p&gt;

&lt;p&gt;This approach can be extended in followup work to allow the api calls to be made to remote metastore by only certain users from certain machines.&lt;/p&gt;</comment>
                            <comment id="14028613" author="thejas" created="Wed, 11 Jun 2014 23:58:38 +0000"  >&lt;p&gt;adding review board link&lt;/p&gt;</comment>
                            <comment id="14029843" author="thejas" created="Thu, 12 Jun 2014 21:21:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7209&quot; title=&quot;allow metastore authorization api calls to be restricted to certain invokers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7209&quot;&gt;&lt;del&gt;HIVE-7209&lt;/del&gt;&lt;/a&gt;.2.patch - Addressing Ashutosh&apos;s suggestion of avoiding an additional interface.&lt;/p&gt;</comment>
                            <comment id="14029926" author="ashutoshc" created="Thu, 12 Jun 2014 22:23:03 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14030223" author="thejas" created="Fri, 13 Jun 2014 03:21:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7209&quot; title=&quot;allow metastore authorization api calls to be restricted to certain invokers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7209&quot;&gt;&lt;del&gt;HIVE-7209&lt;/del&gt;&lt;/a&gt;.3.patch - addressing Sushanth&apos;s comment - moving the wrapped table/partition creation outside of loop.&lt;/p&gt;</comment>
                            <comment id="14030365" author="sushanth" created="Fri, 13 Jun 2014 08:07:57 +0000"  >&lt;p&gt;Looks good to me. +1.&lt;/p&gt;</comment>
                            <comment id="14031107" author="thejas" created="Fri, 13 Jun 2014 20:25:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7209&quot; title=&quot;allow metastore authorization api calls to be restricted to certain invokers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7209&quot;&gt;&lt;del&gt;HIVE-7209&lt;/del&gt;&lt;/a&gt;.4.patch - also updating hive-default.xml.template to mention that more than one metastore authorization manager classes can be specified under  hive.security.metastore.authorization.manager .&lt;/p&gt;</comment>
                            <comment id="14031462" author="hiveqa" created="Sat, 14 Jun 2014 04:49:13 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12650378/HIVE-7209.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12650378/HIVE-7209.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 5630 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucket_groupby
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_columnar
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_insert1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_scriptfile1
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/459/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/459/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/459/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/459/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-459/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-459/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12650378&lt;/p&gt;</comment>
                            <comment id="14051941" author="sushanth" created="Thu, 3 Jul 2014 21:43:39 +0000"  >&lt;p&gt;Committed patch 4. Thanks for the patch, Thejas!&lt;/p&gt;</comment>
                            <comment id="14051942" author="sushanth" created="Thu, 3 Jul 2014 21:44:33 +0000"  >&lt;p&gt;(Reopening because of the weird resolution state, intend to close again)&lt;/p&gt;</comment>
                            <comment id="14052006" author="lefty@hortonworks.com" created="Thu, 3 Jul 2014 23:41:15 +0000"  >&lt;p&gt;For the record:  The patch changes the description of &lt;b&gt;hive.security.metastore.authorization.manager&lt;/b&gt; in hive-default.xml.template (see the release note for new functionality).&lt;/p&gt;

&lt;p&gt;I added a comment to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6586&quot; title=&quot;Update parameters in HiveConf.java after commit HIVE-6037&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6586&quot;&gt;&lt;del&gt;HIVE-6586&lt;/del&gt;&lt;/a&gt; so it won&apos;t get lost in the shuffle when &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-6037&quot; title=&quot;Synchronize HiveConf with hive-default.xml.template and support show conf&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-6037&quot;&gt;&lt;del&gt;HIVE-6037&lt;/del&gt;&lt;/a&gt; changes HiveConf.java.&lt;/p&gt;</comment>
                            <comment id="14205841" author="lefty@hortonworks.com" created="Tue, 11 Nov 2014 02:30:51 +0000"  >&lt;p&gt;Doc notes:  The description of &lt;b&gt;hive.security.metastore.authorization.manager&lt;/b&gt; needs to be updated in the wiki (with version information, and keeping some extra information not found in HiveConf.java).&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.security.metastore.authorization.manager&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.security.metastore.authorization.manager &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Other than that, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7759&quot; title=&quot;document hive cli authorization behavior when SQL std auth is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7759&quot;&gt;&lt;del&gt;HIVE-7759&lt;/del&gt;&lt;/a&gt; will add general documentation for this feature with a section in the SQL standard authorization doc about CLI behavior with SQL standard authorization turned on.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/SQL+Standard+Based+Hive+Authorization&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SQL Standard Based Hive Authorization &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14210793" author="thejas" created="Thu, 13 Nov 2014 19:42:37 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                            <comment id="14272855" author="lefty@hortonworks.com" created="Sun, 11 Jan 2015 08:36:58 +0000"  >&lt;p&gt;Doc:  &lt;b&gt;hive.security.metastore.authorization.manager&lt;/b&gt; has been updated in the wiki, so I&apos;m removing the TODOC14 label.  (Additional documentation will be covered with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-7759&quot; title=&quot;document hive cli authorization behavior when SQL std auth is enabled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-7759&quot;&gt;&lt;del&gt;HIVE-7759&lt;/del&gt;&lt;/a&gt;, as mentioned two comments back.)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.security.metastore.authorization.manager&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.security.metastore.authorization.manager &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12734658">HIVE-7759</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12649952" name="HIVE-7209.1.patch" size="57849" author="thejas" created="Wed, 11 Jun 2014 23:41:29 +0000"/>
                            <attachment id="12650147" name="HIVE-7209.2.patch" size="59943" author="thejas" created="Thu, 12 Jun 2014 21:21:40 +0000"/>
                            <attachment id="12650222" name="HIVE-7209.3.patch" size="60468" author="thejas" created="Fri, 13 Jun 2014 03:21:59 +0000"/>
                            <attachment id="12650378" name="HIVE-7209.4.patch" size="61540" author="thejas" created="Fri, 13 Jun 2014 20:25:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 45 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wmxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>398802</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>With this change hive.security.metastore.authorization.manager configuration parameter allows you to specify more than one authorization manager class (comma separated).&lt;br/&gt;
&lt;br/&gt;
This patch introduces a new authorization manager for use under this configuration - org.apache.hadoop.hive.ql.security.authorization.MetaStoreAuthzAPIAuthorizerEmbedOnly. It will disallow any of the authorization api calls to be invoked in a remote metastore.&lt;br/&gt;
HiveServer2 can be configured to use embedded metastore, and that will allow it to invoke metastore authorization api. Hive cli and any other remote metastore users would be denied authorization when they try to make authorization api calls. This allows restricting the authorization api use to privileged HiveServer2 process.&lt;br/&gt;
&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>