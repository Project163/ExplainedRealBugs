<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:40:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-12608] Parquet Schema Evolution doesn&apos;t work when a column is dropped from array&lt;struct&lt;&gt;&gt;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-12608</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a column is dropped from array&amp;lt;struct&amp;lt;&amp;gt;&amp;gt;, I got the following exception.&lt;/p&gt;

&lt;p&gt;I used the following sql to test it.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;CREATE TABLE arrays_of_struct_to_map (locations1 array&amp;lt;struct&amp;lt;c1:int,c2:int&amp;gt;&amp;gt;, locations2 array&amp;lt;struct&amp;lt;f1:int,&lt;br/&gt;
f2:int,f3:int&amp;gt;&amp;gt;) STORED AS PARQUET;&lt;br/&gt;
INSERT INTO TABLE arrays_of_struct_to_map select array(named_struct(&quot;c1&quot;,1,&quot;c2&quot;,2)), array(named_struct(&quot;f1&quot;,&lt;br/&gt;
77,&quot;f2&quot;,88,&quot;f3&quot;,99)) FROM parquet_type_promotion LIMIT 1;&lt;br/&gt;
SELECT * FROM arrays_of_struct_to_map;&lt;br/&gt;
&amp;#8211; Testing schema evolution of dropping column from array&amp;lt;struct&amp;lt;&amp;gt;&amp;gt;&lt;br/&gt;
ALTER TABLE arrays_of_struct_to_map REPLACE COLUMNS (locations1 array&amp;lt;struct&amp;lt;c1:int&amp;gt;&amp;gt;, locations2&lt;br/&gt;
array&amp;lt;struct&amp;lt;f2:int&amp;gt;&amp;gt;);&lt;br/&gt;
SELECT * FROM arrays_of_struct_to_map;&lt;/p&gt;&lt;/blockquote&gt;

&lt;blockquote&gt;
&lt;p&gt;2015-12-07 11:47:28,503 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt;: CliDriver (SessionState.java:printError(921)) - Failed with exception java.io.IOException:java.lang.RuntimeException: cannot find field c2 in &lt;span class=&quot;error&quot;&gt;&amp;#91;c1&amp;#93;&lt;/span&gt;&lt;br/&gt;
java.io.IOException: java.lang.RuntimeException: cannot find field c2 in &lt;span class=&quot;error&quot;&gt;&amp;#91;c1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchOperator.getNextRow(FetchOperator.java:507)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchOperator.pushRow(FetchOperator.java:414)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchTask.fetch(FetchTask.java:138)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.getResults(Driver.java:1655)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:227)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:159)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:370)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:305)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.QTestUtil.executeClientInternal(QTestUtil.java:1029)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.QTestUtil.executeClient(QTestUtil.java:1003)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.TestCliDriver.runTest(TestCliDriver.java:139)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_parquet_type_promotion(TestCliDriver.java:123)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
        at junit.framework.TestCase.runTest(TestCase.java:176)&lt;br/&gt;
        at junit.framework.TestCase.runBare(TestCase.java:141)&lt;br/&gt;
        at junit.framework.TestResult$1.protect(TestResult.java:122)&lt;br/&gt;
        at junit.framework.TestResult.runProtected(TestResult.java:142)&lt;br/&gt;
        at junit.framework.TestResult.run(TestResult.java:125)&lt;br/&gt;
        at junit.framework.TestCase.run(TestCase.java:129)&lt;br/&gt;
        at junit.framework.TestSuite.runTest(TestSuite.java:255)&lt;br/&gt;
        at junit.framework.TestSuite.run(TestSuite.java:250)&lt;br/&gt;
        at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:84)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:264)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:153)&lt;br/&gt;
        at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:124)&lt;br/&gt;
        at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:200)&lt;br/&gt;
        at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:153)&lt;br/&gt;
        at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:103)&lt;br/&gt;
Caused by: java.lang.RuntimeException: cannot find field c2 in &lt;span class=&quot;error&quot;&gt;&amp;#91;c1&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveStructConverter.getStructFieldTypeInfo(HiveStructConverter.java:130)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveStructConverter.getFieldTypeIgnoreCase(HiveStructConverter.java:103)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveStructConverter.init(HiveStructConverter.java:90)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveStructConverter.&amp;lt;init&amp;gt;(HiveStructConverter.java:67)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveStructConverter.&amp;lt;init&amp;gt;(HiveStructConverter.java:59)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveGroupConverter.getConverterFromDescription(HiveGroupConverter.java:63)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveGroupConverter.getConverterFromDescription(HiveGroupConverter.java:75)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveCollectionConverter$ElementConverter.&amp;lt;init&amp;gt;(HiveCollectionConverter.java:141)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.io.parquet.convert.HiveCollectionConverter.&amp;lt;init&amp;gt;(HiveCollectionConverter.java:52)&lt;/p&gt;&lt;/blockquote&gt;</description>
                <environment></environment>
        <key id="12919848">HIVE-12608</key>
            <summary>Parquet Schema Evolution doesn&apos;t work when a column is dropped from array&lt;struct&lt;&gt;&gt;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kamrul">Mohammad Islam</assignee>
                                    <reporter username="kamrul">Mohammad Islam</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Dec 2015 21:26:01 +0000</created>
                <updated>Tue, 21 Jun 2016 15:52:41 +0000</updated>
                            <resolved>Tue, 8 Dec 2015 20:02:52 +0000</resolved>
                                                    <fixVersion>2.1.0</fixVersion>
                                    <component>File Formats</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15045770" author="kamrul" created="Mon, 7 Dec 2015 21:29:00 +0000"  >&lt;p&gt;Uploaded the patch.&lt;/p&gt;</comment>
                            <comment id="15046488" author="hiveqa" created="Tue, 8 Dec 2015 07:09:37 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12776183/HIVE-12608.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12776183/HIVE-12608.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 10 failed/errored test(s), 9899 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestHWISessionManager - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_cbo_udf_max
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vectorized_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mergejoin
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_uri_import
org.apache.hadoop.hive.metastore.TestHiveMetaStorePartitionSpecs.testFetchingPartitionsWithDifferentSchemas
org.apache.hadoop.hive.metastore.TestHiveMetaStorePartitionSpecs.testGetPartitionSpecs_WithAndWithoutPartitionGrouping
org.apache.hive.jdbc.TestSSL.testSSLVersion
org.apache.hive.jdbc.miniHS2.TestHs2Metrics.testMetrics
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6274/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6274/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6274/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/6274/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6274/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-6274/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 10 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12776183 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="15047134" author="spena" created="Tue, 8 Dec 2015 17:44:28 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kamrul&quot; class=&quot;user-hover&quot; rel=&quot;kamrul&quot;&gt;kamrul&lt;/a&gt;. The patch looks good and easy.&lt;br/&gt;
+1&lt;/p&gt;</comment>
                            <comment id="15047382" author="spena" created="Tue, 8 Dec 2015 20:02:52 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kamrul&quot; class=&quot;user-hover&quot; rel=&quot;kamrul&quot;&gt;kamrul&lt;/a&gt;. I committed this to master version 2.0&lt;/p&gt;</comment>
                            <comment id="15080377" author="lefty@hortonworks.com" created="Sun, 3 Jan 2016 09:32:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;, this was committed to master (release 2.1.0) but the fix version says 2.0.0 (branch-2.0).&lt;/p&gt;</comment>
                            <comment id="15085768" author="spena" created="Wed, 6 Jan 2016 16:27:44 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;. I did not see that a branch-2.0 was created. I will switch the fix version to 2.1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12776183" name="HIVE-12608.1.patch" size="4489" author="kamrul" created="Mon, 7 Dec 2015 21:29:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2pk7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>