<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:12:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5648] error when casting partition column to varchar in where clause </title>
                <link>https://issues.apache.org/jira/browse/HIVE-5648</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;hive&amp;gt; select * from partition_varchar_2 where cast(dt as varchar(10)) = &apos;2000-01-01&apos;;&lt;br/&gt;
FAILED: RuntimeException org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.RuntimeException: Internal error: Cannot find ObjectInspector  for VARCHAR&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12675642">HIVE-5648</key>
            <summary>error when casting partition column to varchar in where clause </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jdere">Jason Dere</assignee>
                                    <reporter username="jdere">Jason Dere</reporter>
                        <labels>
                    </labels>
                <created>Fri, 25 Oct 2013 01:42:22 +0000</created>
                <updated>Mon, 28 Oct 2013 22:46:48 +0000</updated>
                            <resolved>Mon, 28 Oct 2013 18:27:46 +0000</resolved>
                                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13804932" author="jdere" created="Fri, 25 Oct 2013 01:58:42 +0000"  >&lt;p&gt;Looks like ExprNodeConstantDesc.getWritableObjectInspector() should have been using the TypeInfo to get the object inspector, rather than using PrimitiveCategory.&lt;/p&gt;

&lt;p&gt;2013-10-24 18:38:37,527 ERROR ql.Driver (SessionState.java:printError(435)) - FAILED: RuntimeException org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.RuntimeException: Internal error: Cannot find ObjectInspector  for VARCHAR&lt;br/&gt;
java.lang.RuntimeException: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.RuntimeException: Internal error: Cannot find ObjectInspector  for VARCHAR&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchTask.initialize(FetchTask.java:86)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:492)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:351)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.runInternal(Driver.java:1004)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:915)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLocalCmd(CliDriver.java:268)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:220)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:422)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.executeDriver(CliDriver.java:790)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.run(CliDriver.java:684)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:623)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:212)&lt;br/&gt;
Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.RuntimeException: Internal error: Cannot find ObjectInspector  for VARCHAR&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FilterOperator.initializeOp(FilterOperator.java:81)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:377)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:453)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:409)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.TableScanOperator.initializeOp(TableScanOperator.java:188)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:377)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FetchTask.initialize(FetchTask.java:80)&lt;br/&gt;
        ... 15 more&lt;br/&gt;
Caused by: java.lang.RuntimeException: Internal error: Cannot find ObjectInspector  for VARCHAR&lt;br/&gt;
        at org.apache.hadoop.hive.serde2.objectinspector.primitive.PrimitiveObjectInspectorFactory.getPrimitiveJavaObjectInspector(PrimitiveObjectInspectorFactory.java:310)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.plan.ExprNodeConstantDesc.getWritableObjectInspector(ExprNodeConstantDesc.java:65)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeConstantEvaluator.&amp;lt;init&amp;gt;(ExprNodeConstantEvaluator.java:36)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluatorFactory.get(ExprNodeEvaluatorFactory.java:44)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeGenericFuncEvaluator.&amp;lt;init&amp;gt;(ExprNodeGenericFuncEvaluator.java:90)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.ExprNodeEvaluatorFactory.get(ExprNodeEvaluatorFactory.java:52)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.exec.FilterOperator.initializeOp(FilterOperator.java:71)&lt;br/&gt;
        ... 21 more&lt;/p&gt;</comment>
                            <comment id="13804933" author="jdere" created="Fri, 25 Oct 2013 02:00:17 +0000"  >&lt;p&gt;patch v1&lt;/p&gt;</comment>
                            <comment id="13804945" author="navis" created="Fri, 25 Oct 2013 02:27:25 +0000"  >&lt;p&gt;I think getPrimitiveJavaObjectInspector(PrimitiveCategory) should return proper ObjectInspector like getPrimitiveJavaObjectInspector(PrimitiveTypeInfo) rather than changing ExprNodeConstantDesc.&lt;/p&gt;</comment>
                            <comment id="13805080" author="jdere" created="Fri, 25 Oct 2013 06:23:28 +0000"  >&lt;p&gt;ExprNodeConstantDesc should be changed here, for qualified types (varchar, and soon decimal with Xuefu&apos;s changes), we should be passing along the type qualifiers whenever possible, and this requires the PrimitiveTypeInfo.  PrimitiveCategory, being just an enum, wouldn&apos;t provide be able to provide varchar length or precision/scale.&lt;br/&gt;
We could change getPrimitiveJavaObjectInspector(PrimitiveCategory) to return a default varchar object inspector for PrimitiveCategory.VARCHAR.  I&apos;ll add that to the patch.&lt;/p&gt;</comment>
                            <comment id="13805160" author="jdere" created="Fri, 25 Oct 2013 08:30:05 +0000"  >&lt;p&gt;patch v2, which prevents the error from occurring if a varchar object inspector is requested using just a PrimitiveCategory.  This is similar to what is done for decimal in the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3976&quot; title=&quot;Support specifying scale and precision with Hive decimal type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3976&quot;&gt;&lt;del&gt;HIVE-3976&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13805163" author="jdere" created="Fri, 25 Oct 2013 08:31:49 +0000"  >&lt;p&gt;However, returning the default OI for qualified types is not desirable and should be avoided whenever possible, thus fix in the v1 patch is still included.&lt;/p&gt;</comment>
                            <comment id="13806050" author="hiveqa" created="Sat, 26 Oct 2013 10:41:36 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12610292/HIVE-5648.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12610292/HIVE-5648.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 4486 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1244/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1244/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/1244/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/1244/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13806888" author="ashutoshc" created="Mon, 28 Oct 2013 16:20:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13807063" author="ashutoshc" created="Mon, 28 Oct 2013 18:27:46 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Jason!&lt;/p&gt;</comment>
                            <comment id="13807273" author="hudson" created="Mon, 28 Oct 2013 21:45:33 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-hadoop2 #526 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/526/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/526/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5648&quot; title=&quot;error when casting partition column to varchar in where clause &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5648&quot;&gt;&lt;del&gt;HIVE-5648&lt;/del&gt;&lt;/a&gt; : error when casting partition column to varchar in where clause (Jason Dere via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1536471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1536471&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeConstantDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/partition_varchar2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/partition_varchar2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/primitive/TestPrimitiveObjectInspectorFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13807407" author="hudson" created="Mon, 28 Oct 2013 22:23:12 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hive-trunk-hadoop1-ptest #217 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/217/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/217/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5648&quot; title=&quot;error when casting partition column to varchar in where clause &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5648&quot;&gt;&lt;del&gt;HIVE-5648&lt;/del&gt;&lt;/a&gt; : error when casting partition column to varchar in where clause (Jason Dere via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1536471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1536471&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeConstantDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/partition_varchar2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/partition_varchar2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/primitive/TestPrimitiveObjectInspectorFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13807434" author="hudson" created="Mon, 28 Oct 2013 22:46:48 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-h0.21 #2427 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2427/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2427/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5648&quot; title=&quot;error when casting partition column to varchar in where clause &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5648&quot;&gt;&lt;del&gt;HIVE-5648&lt;/del&gt;&lt;/a&gt; : error when casting partition column to varchar in where clause (Jason Dere via Ashutosh Chauhan) (hashutosh: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1536471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1536471&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/ExprNodeConstantDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/partition_varchar2.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/partition_varchar2.q.out&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/PrimitiveObjectInspectorFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/java/org/apache/hadoop/hive/serde2/typeinfo/TypeInfoFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/serde/src/test/org/apache/hadoop/hive/serde2/objectinspector/primitive/TestPrimitiveObjectInspectorFactory.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12610220" name="HIVE-5648.1.patch" size="4856" author="jdere" created="Fri, 25 Oct 2013 02:00:17 +0000"/>
                            <attachment id="12610292" name="HIVE-5648.2.patch" size="13839" author="jdere" created="Fri, 25 Oct 2013 08:30:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355219</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1p8m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>355507</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>