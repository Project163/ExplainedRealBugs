<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:53:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-590] Pass type information in genFileSinkPlan</title>
                <link>https://issues.apache.org/jira/browse/HIVE-590</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Right now only column names are being passed between semanticanalyzer and fetchtask. Once type information is passed, we can use LazySerDe to serialize the data (into json) in Driver.getResults().&lt;/p&gt;

&lt;p&gt;Driver.getSchema() should then return a new thrift type ResultSchema instead of String:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;struct ResultSchema {
  &lt;span class=&quot;code-comment&quot;&gt;// column names, types, comments
&lt;/span&gt; 1: list&amp;lt;hive_metastore.FieldSchema&amp;gt; fieldSchemas,
 &lt;span class=&quot;code-comment&quot;&gt;// delimiters etc
&lt;/span&gt; 2: map&amp;lt;string, string&amp;gt; properties
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once this is done, the jdbc client can instantiate a simplified serde from the ResultSchema and parse the query results.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12429118">HIVE-590</key>
            <summary>Pass type information in genFileSinkPlan</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="rsm">Raghotham Murthy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Jun 2009 19:25:11 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:53 +0000</updated>
                            <resolved>Thu, 2 Jul 2009 16:27:45 +0000</resolved>
                                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12725347" author="namit" created="Mon, 29 Jun 2009 21:05:26 +0000"  >&lt;p&gt;This has the following requirements:&lt;/p&gt;

&lt;p&gt;1. Pass the type info. in getFileSinkPlan&lt;br/&gt;
2. Enhance LazySerde to use json to serialize for complex types under certain conditions&lt;br/&gt;
3. Return a new thrift type instead of string from Driver.getSchema()&lt;/p&gt;</comment>
                            <comment id="12726268" author="rsm" created="Wed, 1 Jul 2009 23:26:54 +0000"  >&lt;p&gt;changes look good for the most part. a few comments:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;we should provide an additional method in HiveInterface.java which returns a SerDe given a Schema. If we implement it once - we can reuse it in all the tests and in HiveResultSet.java instead of duplicating the serde creation logic everywhere (including the dsp.setProperty() calls). We can choose to do it in a later jira.&lt;/li&gt;
	&lt;li&gt;use standard name for get method:   public boolean isUseJSONSerialize() {&lt;/li&gt;
	&lt;li&gt;includes unnecessary changes to test results&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12726277" author="namit" created="Thu, 2 Jul 2009 00:10:44 +0000"  >&lt;p&gt; 1. Will do in a follow-up&lt;br/&gt;
 2. will do&lt;br/&gt;
 3. All those results have changed - since the plan has changed. There is no extra stuff &lt;/p&gt;</comment>
                            <comment id="12726279" author="namit" created="Thu, 2 Jul 2009 00:14:29 +0000"  >&lt;p&gt;2. I am already using a standard name - it was generated by eclipse&lt;/p&gt;</comment>
                            <comment id="12726312" author="namit" created="Thu, 2 Jul 2009 04:09:08 +0000"  >&lt;p&gt;resolved conflicts with 136&lt;/p&gt;</comment>
                            <comment id="12726536" author="rsm" created="Thu, 2 Jul 2009 16:27:45 +0000"  >&lt;p&gt;Committed. Thanks Namit!&lt;/p&gt;</comment>
                            <comment id="12726569" author="prasadc" created="Thu, 2 Jul 2009 17:34:33 +0000"  >&lt;p&gt;I don&apos;t think the new Schema object should be in metastore as it is not going to be used by it. There is no corresponding object in metadb. It will be used only by HiveServer so it should be in the thrift interface of HiveServer. Namit and I had a chat about it and he agreed to move it there.&lt;/p&gt;</comment>
                            <comment id="12726572" author="prasadc" created="Thu, 2 Jul 2009 17:36:04 +0000"  >&lt;p&gt;IMO, HiveServer should return a Table object for the results set instead of this new object.&lt;/p&gt;</comment>
                            <comment id="12726576" author="rsm" created="Thu, 2 Jul 2009 17:50:34 +0000"  >&lt;p&gt;In most cases, HiveServer is called to get information about SELECT queries which dont create tables. Also, these transient query results dont have partitionkeys, bucketcols, sortcols etc. So a Table object seems to be an overkill. &lt;/p&gt;

&lt;p&gt;I do agree that we should support a getTableObject or some such metastore api call which returns the Table object for a table in the warehouse. This call can then be used instead of doing a &apos;describe extended&apos; query on a table and parsing that blob that gets returned.&lt;/p&gt;</comment>
                            <comment id="12726586" author="prasadc" created="Thu, 2 Jul 2009 17:59:24 +0000"  >&lt;p&gt;well, there is get_table() call that returns Table object. You can use that one.&lt;/p&gt;</comment>
                            <comment id="12726688" author="rsm" created="Thu, 2 Jul 2009 21:23:34 +0000"  >&lt;p&gt;Moving discussion to &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-604&quot; title=&quot;remove Schema from metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-604&quot;&gt;HIVE-604&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12412328" name="hive.590.1.patch" size="344992" author="namit" created="Wed, 1 Jul 2009 21:59:30 +0000"/>
                            <attachment id="12412353" name="hive.590.2.patch" size="341778" author="namit" created="Thu, 2 Jul 2009 04:09:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lanz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                            <customfield id="customfield_12310192" key="com.atlassian.jira.plugin.system.customfieldtypes:textarea">
                        <customfieldname>Release Note</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>Pass type information in genFileSinkPlan and improve getSchema call in Driver. (Namit Jain via rmurthy)&lt;br/&gt;
</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>