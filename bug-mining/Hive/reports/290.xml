<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:55:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-953] script_broken_pipe3.q broken</title>
                <link>https://issues.apache.org/jira/browse/HIVE-953</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The negative test script_broken_pipe3.q is broken if we allow partial consumption.&lt;br/&gt;
For now, I have disabled partial consumption. Can you take a look ?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12441640">HIVE-953</key>
            <summary>script_broken_pipe3.q broken</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 Nov 2009 05:48:01 +0000</created>
                <updated>Sat, 17 Dec 2011 00:06:16 +0000</updated>
                            <resolved>Tue, 1 Dec 2009 02:37:20 +0000</resolved>
                                    <version>0.5.0</version>
                                    <fixVersion>0.5.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12782581" author="pauly" created="Wed, 25 Nov 2009 19:50:44 +0000"  >&lt;p&gt;Strange, that test is working fine on my end. Inside script_broken_pipe3.q, partial consumption is enabled with a set command, so it should work regardless of what the setting for partial consumption was beforehand. &lt;/p&gt;

&lt;p&gt;However, script_broken_pipe1.q and script_broken_pipe2.q, were written with having partial consumption disabled as per defaults and lack a set command. So those tests should fail if partial consumption is enabled by default - can you check if that is the case?&lt;/p&gt;</comment>
                            <comment id="12782587" author="pauly" created="Wed, 25 Nov 2009 19:55:54 +0000"  >&lt;p&gt;Just to clarify - on my end, script_broken_pipe1.q and script_broken_pipe2.q are failing with partial consumption enabled by default. I wanted to see if that&apos;s the case with your setup.&lt;/p&gt;</comment>
                            <comment id="12782627" author="namit" created="Wed, 25 Nov 2009 21:29:10 +0000"  >&lt;p&gt;They are run as part of negative tests - for me 1/2 are broken as expected - I mean, they dont lead to diffs&lt;/p&gt;

&lt;p&gt;3 as it stood before I changed it yesterday was leading to diffs&lt;/p&gt;</comment>
                            <comment id="12782674" author="pauly" created="Wed, 25 Nov 2009 23:22:06 +0000"  >&lt;p&gt;Could I take a look at your log files? When I say &apos;failed&apos;, I don&apos;t necessarily see diffs - I see something like the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] Exception: Client Execution failed with error code = 0
    [junit] junit.framework.AssertionFailedError: Client Execution failed with error code = 0
    [junit]     at junit.framework.Assert.fail(Assert.java:47)
    [junit]     at org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_script_broken_pipe2(TestNegativeCliDriver.java:51)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    [junit]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    [junit]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    [junit]     at java.lang.reflect.Method.invoke(Method.java:597)
    [junit]     at junit.framework.TestCase.runTest(TestCase.java:154)
    [junit]     at junit.framework.TestCase.runBare(TestCase.java:127)
    [junit]     at junit.framework.TestResult$1.protect(TestResult.java:106)
    [junit]     at junit.framework.TestResult.runProtected(TestResult.java:124)
    [junit]     at junit.framework.TestResult.run(TestResult.java:109)
    [junit]     at junit.framework.TestCase.run(TestCase.java:118)
    [junit]     at junit.framework.TestSuite.runTest(TestSuite.java:208)
    [junit]     at junit.framework.TestSuite.run(TestSuite.java:203)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)
    [junit]     at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:768)
    [junit] Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 12.676 sec
    [junit] Test org.apache.hadoop.hive.cli.TestNegativeCliDriver FAILED
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12782689" author="namit" created="Thu, 26 Nov 2009 00:03:14 +0000"  >&lt;p&gt;I dont have them anymore - but run with&lt;br/&gt;
test.silent=false&lt;/p&gt;


&lt;p&gt;ant test ..... -Dtest.silent=false&lt;/p&gt;


&lt;p&gt;It will print more info.&lt;/p&gt;
</comment>
                            <comment id="12782720" author="pauly" created="Thu, 26 Nov 2009 01:53:29 +0000"  >&lt;p&gt;With respect to pipe3, I still was not able to produce an error. I&apos;ve attached the output of the test run on my checkout. Can you try running that test again?&lt;/p&gt;

&lt;p&gt;In any case, I&apos;ve fixed the tests for pipe1 and pipe2 to run correctly with partial consumption enabled in the attached patch.&lt;/p&gt;</comment>
                            <comment id="12783939" author="pauly" created="Mon, 30 Nov 2009 23:26:16 +0000"  >&lt;p&gt;Sorry for the confusion - there were changes to the open source repository that weren&apos;t propagated to the FB repository.&lt;/p&gt;

&lt;p&gt;Anyway, the problem is that there was a change to ScriptOperator that broke the test. The change always reported the exit value of the script as 0, meaning that it was always successful. Since the test was expecting the script to fail with an error code, the negative test broke. Removing &apos;set hive.exec.script.allow.partial.consumption = true&apos; allowed the negative test to pass as disallowing partial consumption would result in a broken pipe exception and masked the fact that the error code was incorrect.&lt;/p&gt;

&lt;p&gt;In the 2nd patch, I fixed this and included the modifications for the other two tests as well.&lt;/p&gt;</comment>
                            <comment id="12783981" author="namit" created="Tue, 1 Dec 2009 01:22:04 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will merge if the tests pass&lt;/p&gt;</comment>
                            <comment id="12784020" author="namit" created="Tue, 1 Dec 2009 02:37:20 +0000"  >&lt;p&gt;Committed. Thanks Paul&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12426175" name="HIVE-953.1.patch" size="2404" author="pauly" created="Thu, 26 Nov 2009 01:54:27 +0000"/>
                            <attachment id="12426469" name="HIVE-953.2.patch" size="3526" author="pauly" created="Mon, 30 Nov 2009 23:26:16 +0000"/>
                            <attachment id="12426174" name="script_broken_pipe3_output.txt" size="73524" author="pauly" created="Thu, 26 Nov 2009 01:54:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73193</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lcmf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122695</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>