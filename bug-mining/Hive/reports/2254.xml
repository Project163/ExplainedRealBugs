<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:19:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7116] HDFS FileSystem object cache causes permission issues in creating tmp directories</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7116</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We change permissions of the directory creation to 777 for HiveServer 2 operation and it turns out that because of HDFS caching, it does not reflect once created. We need to use the non-cached version of the API to get a FileSystem object to fix this.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12716215">HIVE-7116</key>
            <summary>HDFS FileSystem object cache causes permission issues in creating tmp directories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vikram.dixit">Vikram Dixit K</assignee>
                                    <reporter username="vikram.dixit">Vikram Dixit K</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 May 2014 22:20:49 +0000</created>
                <updated>Mon, 9 Jun 2014 06:39:36 +0000</updated>
                            <resolved>Sat, 31 May 2014 22:53:20 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.1</fixVersion>
                    <fixVersion>0.14.0</fixVersion>
                                    <component>HiveServer2</component>
                    <component>Tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14006623" author="swarnim" created="Thu, 22 May 2014 23:46:32 +0000"  >&lt;p&gt;Hi Vikram,&lt;/p&gt;

&lt;p&gt;Couple of smaller comments on the patch.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Create dirs &quot;&lt;/span&gt; + mkdirPath + &lt;span class=&quot;code-quote&quot;&gt;&quot; with permission &quot;&lt;/span&gt; + fsPermission + &lt;span class=&quot;code-quote&quot;&gt;&quot; recursive &quot;&lt;/span&gt; + recursive);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You probably don&apos;t need to manually concatenate the string but let log4j do it for you.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Create dirs {} with permission {} recursive {}&quot;&lt;/span&gt;, mkdirPath, fsPermission, recursive);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Secondly, I think that if you create a FileSystem using the newInstance method, it should be closed to avoid any resource leaks. Previosuly with the cached FS instance, the API was automatically handling that for you.&lt;/p&gt;</comment>
                            <comment id="14006658" author="vikram.dixit" created="Fri, 23 May 2014 00:44:33 +0000"  >&lt;p&gt;Address Swarnim&apos;s comment.&lt;/p&gt;</comment>
                            <comment id="14006662" author="vikram.dixit" created="Fri, 23 May 2014 00:46:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swarnim&quot; class=&quot;user-hover&quot; rel=&quot;swarnim&quot;&gt;swarnim&lt;/a&gt; Changing the log to that format affects readability as it is the way log has been done in Hive. I agree that is not a strong argument but, there is no advantage either ways.&lt;/p&gt;

&lt;p&gt;The fs.close() is a good catch! Thanks for your quick review!&lt;/p&gt;</comment>
                            <comment id="14006790" author="swarnim" created="Fri, 23 May 2014 04:51:56 +0000"  >&lt;p&gt;Should the fs.close() be in a finally so that an exception during mkdirs doesn&apos;t still cause a resource leak? We might as well use IOUtils.closeQuietly if we do unnecessarily want the fs.close() exception to propagate up the stack.&lt;/p&gt;</comment>
                            <comment id="14007780" author="vikram.dixit" created="Fri, 23 May 2014 22:17:07 +0000"  >&lt;p&gt;Although not strictly required in this case, it makes sense to have the finally block do both the close and reset of the configuration flag. Updated.&lt;/p&gt;</comment>
                            <comment id="14007980" author="hiveqa" created="Sat, 24 May 2014 03:04:45 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12646619/HIVE-7116.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12646619/HIVE-7116.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 5533 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_bucketsortoptimize_insert_5
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_dynpart_sort_optimization
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_insert1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_load_dyn_part1
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.common.metrics.TestMetrics.testScopeConcurrency
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimal
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalX
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalXY
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/275/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/275/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/275/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/275/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-275/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-275/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12646619&lt;/p&gt;</comment>
                            <comment id="14011892" author="vikram.dixit" created="Thu, 29 May 2014 00:41:17 +0000"  >&lt;p&gt;The try/finally block will mask exceptions in case there is a double failure (create fails then close fails in the finally block). Fixing that.&lt;/p&gt;</comment>
                            <comment id="14012051" author="swarnim" created="Thu, 29 May 2014 04:23:06 +0000"  >&lt;p&gt;Hey Vikram,&lt;/p&gt;

&lt;p&gt;Looking deeper into the patch, in my opinion there could be some issues:&lt;/p&gt;

&lt;p&gt;1. &quot;hadoop-1&quot; pulls in the 1.2.1 hadoop jar. The FileSystem object on this doesn&apos;t have the newInstance method on it. So with &quot;-P hadoop-1&quot; this would fail with a compilation error.&lt;br/&gt;
2. I think the latest patch is overly complicated for what it is trying to do. I think it could be simplified to just the following:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FileSystem fs = FileSystem.newInstance(mkdirPath.toUri(), conf);
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retval = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
      retval = fs.mkdirs(mkdirPath, fsPermission);
    } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
      org.apache.commons.io.IOUtils.closeQuietly(fs);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;3. Are we sure that it is the cached FileSystem instance that is causing the permissions to not get reflected? I wrote a simple test with cached FileSystem object&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; that sets permissions and it passed for me. Interestingly it only fails for &quot;777&quot; permissions so might be some issue specific to that additional &quot;executable&quot; sticky bit.&lt;/p&gt;

&lt;p&gt;Just my 0.02 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://hadoop.apache.org/docs/r1.2.1/api/org/apache/hadoop/fs/FileSystem.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hadoop.apache.org/docs/r1.2.1/api/org/apache/hadoop/fs/FileSystem.html&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://gist.github.com/swarnim87/afd29a06e6cc7fffae5c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://gist.github.com/swarnim87/afd29a06e6cc7fffae5c&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14012117" author="thejas" created="Thu, 29 May 2014 06:29:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swarnim&quot; class=&quot;user-hover&quot; rel=&quot;swarnim&quot;&gt;swarnim&lt;/a&gt; Good catch about the hadoop-1 compilation issue. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; To work around that you can set &quot;&quot;fs.%s.impl.disable.cache&quot;=true in conf, and then call FileSystem.get(URI uri, Configuration conf)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swarnim&quot; class=&quot;user-hover&quot; rel=&quot;swarnim&quot;&gt;swarnim&lt;/a&gt; Regarding 2,  I think it is important to re-set the conf to its old state in case of a failure as well.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; You can use a function to avoid code duplication within the finally block and outside. I think this log message is better logged at DEBUG level as it is also being called for every vertex creation in Tez mode.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=swarnim&quot; class=&quot;user-hover&quot; rel=&quot;swarnim&quot;&gt;swarnim&lt;/a&gt; Regarding 3, try your example with a path name where more than one level in dir structure needs to be created &quot;eg &quot;/tmp/a/b/c&quot;. You will notice that only c gets created with FsPermission value. That is why the umask needs to be set in config so that &quot;a&quot; and &quot;b&quot; also get created with appropriate permissions. The cache becomes an issue only if you already have a FileSystem object in cache with old config. Your example is not resulting in a FileSystem object in cache with old config.&lt;/p&gt;




</comment>
                            <comment id="14013072" author="vikram.dixit" created="Thu, 29 May 2014 23:04:28 +0000"  >&lt;p&gt;I think this is better solved by the shims instead of writing ugly hacks that we have to keep around forever. Refreshed with comments and shim changes.&lt;/p&gt;</comment>
                            <comment id="14013091" author="swarnim" created="Thu, 29 May 2014 23:17:26 +0000"  >&lt;p&gt;+1 for shims. Very clean approach.&lt;/p&gt;

&lt;p&gt;Should we have some tests to prove that this actually fixes the permissions issue? Also adding a new method to HadoopShims seems like would make it non-passive. Not sure how much we care about passivity in shims but just a thought. Since it is an interface, not sure if we can even do much about it anyways. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Much thanks for looking into this Vikram!&lt;/p&gt;</comment>
                            <comment id="14013147" author="vikram.dixit" created="Fri, 30 May 2014 00:31:37 +0000"  >&lt;p&gt;Moved the 1.0 code to the appropriate shim and fixed an indentation error.&lt;/p&gt;</comment>
                            <comment id="14013181" author="thejas" created="Fri, 30 May 2014 01:12:43 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="14013633" author="swarnim" created="Fri, 30 May 2014 13:50:51 +0000"  >&lt;p&gt;+1. Thanks again. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14013957" author="hiveqa" created="Fri, 30 May 2014 17:13:53 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12647495/HIVE-7116.7.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12647495/HIVE-7116.7.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/336/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/336/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/336/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/336/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-336/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-336/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n /usr/java/jdk1.7.0_45-cloudera ]]
+ export JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ JAVA_HOME=/usr/java/jdk1.7.0_45-cloudera
+ export PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ PATH=/usr/java/jdk1.7.0_45-cloudera/bin/:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-maven-3.0.5/bin:/usr/local/apache-maven-3.0.5/bin:/usr/java/jdk1.6.0_34/bin:/usr/local/apache-ant-1.9.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hiveptest/bin
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-336/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;metastore/src/java/org/apache/hadoop/hive/metastore/Warehouse.java&apos;
Reverted &apos;metastore/src/java/org/apache/hadoop/hive/metastore/HiveAlterHandler.java&apos;
Reverted &apos;itests/hive-unit/src/test/java/org/apache/hadoop/hive/ql/security/TestFolderPermissions.java&apos;
Reverted &apos;common/src/java/org/apache/hadoop/hive/common/FileUtils.java&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ awk &apos;{print $2}&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-minikdc/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/core/target hcatalog/streaming/target hcatalog/server-extensions/target hcatalog/hcatalog-pig-adapter/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target
+ svn update

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
External at revision 1598675.

At revision 1598675.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12647495&lt;/p&gt;</comment>
                            <comment id="14014180" author="vikram.dixit" created="Fri, 30 May 2014 20:35:50 +0000"  >&lt;p&gt;Rebased to latest trunk.&lt;/p&gt;</comment>
                            <comment id="14014183" author="ashutoshc" created="Fri, 30 May 2014 20:37:54 +0000"  >&lt;p&gt;+1 for 0.13.1&lt;/p&gt;</comment>
                            <comment id="14014186" author="thejas" created="Fri, 30 May 2014 20:42:23 +0000"  >&lt;p&gt;+1 for 0.13.1 .&lt;/p&gt;</comment>
                            <comment id="14014334" author="thejas" created="Fri, 30 May 2014 22:58:25 +0000"  >&lt;p&gt;Ran tests locally and they passed.&lt;/p&gt;</comment>
                            <comment id="14014850" author="hiveqa" created="Sat, 31 May 2014 22:42:40 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12647680/HIVE-7116.8.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12647680/HIVE-7116.8.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 8 failed/errored test(s), 5496 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_bucketmapjoin6
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testNegativeCliDriver_authorization_ctas
org.apache.hadoop.hive.ql.exec.tez.TestTezTask.testSubmit
org.apache.hive.hcatalog.pig.TestOrcHCatLoader.testReadDataPrimitiveTypes
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimal
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalX
org.apache.hive.hcatalog.pig.TestOrcHCatPigStorer.testWriteDecimalXY
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/347/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/347/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/347/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/347/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-347/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-347/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 8 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12647680&lt;/p&gt;</comment>
                            <comment id="14014855" author="thejas" created="Sat, 31 May 2014 22:53:20 +0000"  >&lt;p&gt;Patch committed to trunk. Thanks Vikram!&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; Can you please include it in 0.13.1 ?&lt;/p&gt;</comment>
                            <comment id="14014860" author="thejas" created="Sat, 31 May 2014 23:13:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; Can you please create a rebased patch for 0.13 ?&lt;/p&gt;</comment>
                            <comment id="14015102" author="vikram.dixit" created="Sun, 1 Jun 2014 22:03:31 +0000"  >&lt;p&gt;0.13 patch added.&lt;/p&gt;</comment>
                            <comment id="14015742" author="sushanth" created="Mon, 2 Jun 2014 19:01:40 +0000"  >&lt;p&gt;Committed to 0.13.1, Thanks, Vikram!&lt;/p&gt;</comment>
                            <comment id="14021680" author="thejas" created="Mon, 9 Jun 2014 06:39:36 +0000"  >&lt;p&gt;This jira has been fixed as part of 0.13.1 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12646398" name="HIVE-7116.1.patch" size="1426" author="vikram.dixit" created="Thu, 22 May 2014 22:21:12 +0000"/>
                            <attachment id="12646422" name="HIVE-7116.2.patch" size="1637" author="vikram.dixit" created="Fri, 23 May 2014 00:46:52 +0000"/>
                            <attachment id="12646619" name="HIVE-7116.3.patch" size="1857" author="vikram.dixit" created="Fri, 23 May 2014 22:15:47 +0000"/>
                            <attachment id="12647266" name="HIVE-7116.4.patch" size="2185" author="vikram.dixit" created="Thu, 29 May 2014 00:41:17 +0000"/>
                            <attachment id="12647465" name="HIVE-7116.5.patch" size="2634" author="vikram.dixit" created="Thu, 29 May 2014 22:16:47 +0000"/>
                            <attachment id="12647478" name="HIVE-7116.6.patch" size="11302" author="vikram.dixit" created="Thu, 29 May 2014 23:04:28 +0000"/>
                            <attachment id="12647495" name="HIVE-7116.7.patch" size="14400" author="vikram.dixit" created="Fri, 30 May 2014 00:31:37 +0000"/>
                            <attachment id="12647680" name="HIVE-7116.8.patch" size="14242" author="vikram.dixit" created="Fri, 30 May 2014 20:35:50 +0000"/>
                            <attachment id="12647832" name="HIVE-7116.branch0.13.patch" size="12665" author="vikram.dixit" created="Sun, 1 Jun 2014 22:03:22 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394424</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vwuf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394565</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>