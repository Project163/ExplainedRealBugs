<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:22:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-26158] TRANSLATED_TO_EXTERNAL partition tables cannot query partition data after rename table</title>
                <link>https://issues.apache.org/jira/browse/HIVE-26158</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;After the patch is updated, the partition table location and hdfs data directory are displayed normally, but the partition location of the table in the SDS in the Hive metabase is still displayed as the location of the old table, resulting in no data in the query partition.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;in beeline:&lt;/p&gt;

&lt;p&gt;------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;set hive.create.as.external.legacy=true;&lt;/p&gt;

&lt;p&gt;CREATE TABLE part_test(&lt;br/&gt;
c1 string&lt;br/&gt;
,c2 string&lt;br/&gt;
)PARTITIONED BY (dat string)&lt;/p&gt;

&lt;p&gt;insert into part_test values (&quot;11&quot;,&quot;th&quot;,&quot;20220101&quot;)&lt;br/&gt;
insert into part_test values (&quot;22&quot;,&quot;th&quot;,&quot;20220102&quot;)&lt;/p&gt;

&lt;p&gt;alter table part_test rename to part_test11;&lt;/p&gt;

&lt;p&gt;--this result is null.&lt;br/&gt;
select * from part_test11 where dat=&quot;20220101&quot;;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;part_test.c1&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;part_test.c2&lt;/th&gt;
&lt;th class=&apos;confluenceTh&apos;&gt;part_test.dat&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&#160;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;---------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;SDS in the Hive metabase:&lt;br/&gt;
select SDS.LOCATION from TBLS,SDS where TBLS.TBL_NAME=&quot;part_test11&quot; AND TBLS.TBL_ID=SDS.CD_ID;&lt;/p&gt;

&lt;p&gt;---------------------------------------------------------------------------------------------------&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&lt;b&gt;LOCATION&lt;/b&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;hdfs://nameservice1/warehouse/tablespace/external/hive/part_test11&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;hdfs://nameservice1/warehouse/tablespace/external/hive/part_test/dat=20220101&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;hdfs://nameservice1/warehouse/tablespace/external/hive/part_test/dat=20220102&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;---------------------------------------------------------------------------------------------------&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We need to modify the partition location of the table in SDS to ensure that the query results are normal&lt;/p&gt;</description>
                <environment></environment>
        <key id="13440687">HIVE-26158</key>
            <summary>TRANSLATED_TO_EXTERNAL partition tables cannot query partition data after rename table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kgyrtkirk">Zoltan Haindrich</assignee>
                                    <reporter username="sanguines">tanghui</reporter>
                        <labels>
                            <label>metastore_translator</label>
                            <label>pull-request-available</label>
                    </labels>
                <created>Wed, 20 Apr 2022 13:28:09 +0000</created>
                <updated>Fri, 9 Dec 2022 07:07:01 +0000</updated>
                            <resolved>Wed, 11 May 2022 15:14:55 +0000</resolved>
                                    <version>4.0.0</version>
                    <version>4.0.0-alpha-1</version>
                    <version>4.0.0-alpha-2</version>
                                    <fixVersion>4.0.0-alpha-2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17527440" author="kgyrtkirk" created="Mon, 25 Apr 2022 11:52:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanguines&quot; class=&quot;user-hover&quot; rel=&quot;sanguines&quot;&gt;sanguines&lt;/a&gt; I&apos;ve also just bumped into the exact same thing - let me know if you would like to pick this up&lt;br/&gt;
I&apos;ll probably post a patch for it in the next couple days&lt;/p&gt;</comment>
                            <comment id="17529168" author="sanguines" created="Thu, 28 Apr 2022 03:28:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kgyrtkirk&quot; class=&quot;user-hover&quot; rel=&quot;kgyrtkirk&quot;&gt;kgyrtkirk&lt;/a&gt; yes , I want pick this up ,thanks&lt;/p&gt;</comment>
                            <comment id="17534954" author="kgyrtkirk" created="Wed, 11 May 2022 15:14:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanguines&quot; class=&quot;user-hover&quot; rel=&quot;sanguines&quot;&gt;sanguines&lt;/a&gt; there were some customers reporting this happening for them - and I was already working on a patch...and honestly I could have noticed how this could be done more precisely in the previous ticket... ($#%)&lt;/p&gt;

&lt;p&gt;let me know if you are looking for some tickets to work on; I could try to find one&lt;/p&gt;</comment>
                            <comment id="17534955" author="kgyrtkirk" created="Wed, 11 May 2022 15:14:44 +0000"  >&lt;p&gt;merged into master; Thank you Saihemanth Gantasala for reviewing the changes!&lt;/p&gt;</comment>
                            <comment id="17535839" author="sanguines" created="Thu, 12 May 2022 03:13:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kgyrtkirk&quot; class=&quot;user-hover&quot; rel=&quot;kgyrtkirk&quot;&gt;kgyrtkirk&lt;/a&gt; &#160;thank you so much for the patch&#65292;I haven&apos;t found any other tickets yet&lt;/p&gt;</comment>
                            <comment id="17544347" author="kgyrtkirk" created="Tue, 31 May 2022 11:56:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanguines&quot; class=&quot;user-hover&quot; rel=&quot;sanguines&quot;&gt;sanguines&lt;/a&gt; I think I&apos;ve missed your comment;&lt;/p&gt;

&lt;p&gt;you could probably take a look at tickets marked with the newbie label:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-25711?jql=project%20%3D%20Hive%20and%20labels%20%3D%20newbie%20%20ORDER%20BY%20id%20DESC&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-25711?jql=project%20%3D%20Hive%20and%20labels%20%3D%20newbie%20%20ORDER%20BY%20id%20DESC&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;let me know if you need more help - you could also reach out to us on the dev-list or on #hive in the asf slack (we don&apos;t use that channel for anything...)&lt;/p&gt;</comment>
                            <comment id="17642475" author="lipenglin" created="Fri, 2 Dec 2022 12:26:41 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kgyrtkirk&quot; class=&quot;user-hover&quot; rel=&quot;kgyrtkirk&quot;&gt;kgyrtkirk&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanguines&quot; class=&quot;user-hover&quot; rel=&quot;sanguines&quot;&gt;sanguines&lt;/a&gt;!&#160; I didn&apos;t find any more information about &apos;TRANSLATED_TO_EXTERNAL&apos;, so I ask here.&lt;/p&gt;

&lt;p&gt;I just want to make sure that location doesn&apos;t change when I rename a table, so what I&apos;m doing right now is:&lt;br/&gt;
1 set &apos;EXTERNAL&apos;=&apos;TRUE&apos;&lt;br/&gt;
2 set &apos;TRANSLATED_TO_EXTERNAL&apos;=&apos;FALSE&apos;&lt;br/&gt;
3 set &apos;external.table.purge&apos;=&apos;false&apos;&lt;/p&gt;

&lt;p&gt;Does it make sense for me to do this? And how can I understand &apos;TRANSLATED_TO_EXTERNAL&apos; better?&lt;/p&gt;

&lt;p&gt;Regards!&lt;/p&gt;</comment>
                            <comment id="17644572" author="sanguines" created="Thu, 8 Dec 2022 02:03:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=LiPenglin&quot; class=&quot;user-hover&quot; rel=&quot;lipenglin&quot;&gt;LiPenglin&lt;/a&gt; Yes, if your table is an external table not a TRANSLATED_TO_EXTERNAL table , the previous rules will be maintained when rename table, that is, the storage path of the data will not be modified&#12290;&lt;/p&gt;</comment>
                            <comment id="17645120" author="lipenglin" created="Fri, 9 Dec 2022 07:07:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sanguines&quot; class=&quot;user-hover&quot; rel=&quot;sanguines&quot;&gt;sanguines&lt;/a&gt; Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-24920&quot; title=&quot;TRANSLATED_TO_EXTERNAL tables may write to the same location&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-24920&quot;&gt;&lt;strike&gt;HIVE-24920&lt;/strike&gt;&lt;/a&gt;</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://issues.apache.org/jira/browse/HIVE-24920]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11mxc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>