<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:57:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-1853] downgrade JDO version</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1853</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1609&quot; title=&quot;Support partition filtering in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1609&quot;&gt;&lt;del&gt;HIVE-1609&lt;/del&gt;&lt;/a&gt;, we are seeing some table not found errors intermittently.&lt;br/&gt;
We have a test case where 5 processes are concurrently issueing the same query - &lt;br/&gt;
explain extended insert .. select from &amp;lt;T&amp;gt;&lt;/p&gt;

&lt;p&gt;and once in a while, we get a error &amp;lt;T&amp;gt; not found - &lt;br/&gt;
When we revert back the JDO version, the error is gone.&lt;/p&gt;

&lt;p&gt;We can investigate later to find the JDO bug, but for now this is a show-stopper for facebook, and needs&lt;br/&gt;
to be reverted back immediately.&lt;/p&gt;

&lt;p&gt;This also means, that the filters will not be pushed to mysql.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12493399">HIVE-1853</key>
            <summary>downgrade JDO version</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pauly">Paul Yang</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Dec 2010 06:38:36 +0000</created>
                <updated>Thu, 2 May 2013 02:30:53 +0000</updated>
                            <resolved>Thu, 16 Dec 2010 21:46:41 +0000</resolved>
                                    <version>0.7.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12972191" author="jvs" created="Thu, 16 Dec 2010 19:55:59 +0000"  >&lt;p&gt;This user report has similar symptoms:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/hive-user/201011.mbox/%3CAANLkTik6M1juxvx0Lerre-cNN5QnFwi6_4AY0pQ6zB42@mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/hive-user/201011.mbox/%3CAANLkTik6M1juxvx0Lerre-cNN5QnFwi6_4AY0pQ6zB42@mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12972192" author="namit" created="Thu, 16 Dec 2010 20:01:06 +0000"  >&lt;p&gt;Can you regenerate the patch ?&lt;br/&gt;
It is not applying cleanly.&lt;/p&gt;</comment>
                            <comment id="12972193" author="pauly" created="Thu, 16 Dec 2010 20:04:48 +0000"  >&lt;p&gt;Regenerated&lt;/p&gt;</comment>
                            <comment id="12972198" author="namit" created="Thu, 16 Dec 2010 20:24:14 +0000"  >&lt;p&gt;+1&lt;/p&gt;


&lt;p&gt;Running tests&lt;/p&gt;</comment>
                            <comment id="12972217" author="ashutoshc" created="Thu, 16 Dec 2010 21:37:17 +0000"  >&lt;p&gt;Paul,&lt;/p&gt;

&lt;p&gt;Skimmed though the patch. It undo the changes you introduced in get_partition_ps() in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt; but most of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1609&quot; title=&quot;Support partition filtering in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1609&quot;&gt;&lt;del&gt;HIVE-1609&lt;/del&gt;&lt;/a&gt; still lives on ? Is that correct? I think that will work fine as then Hive will not be pushing partition pruning to metastore and will avoid the problems as currently being experienced, but api will be there in metastore for others who want to play with it.  &lt;/p&gt;</comment>
                            <comment id="12972223" author="namit" created="Thu, 16 Dec 2010 21:46:41 +0000"  >&lt;p&gt;Committed. Thanks Paul&lt;/p&gt;</comment>
                            <comment id="12972230" author="pauly" created="Thu, 16 Dec 2010 21:56:53 +0000"  >&lt;p&gt;Actually, I made the listPartitionsByFilter() throw a runtime exception until this issue is resolved because the feature is supposed to require a newer version of JDOQL to function properly, as stated in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1609&quot; title=&quot;Support partition filtering in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1609&quot;&gt;&lt;del&gt;HIVE-1609&lt;/del&gt;&lt;/a&gt;. I&apos;ll confirm this again with Ajay.&lt;/p&gt;</comment>
                            <comment id="12972238" author="ashutoshc" created="Thu, 16 Dec 2010 22:06:39 +0000"  >&lt;p&gt;That will disable the feature on metastore itself. I was hoping just undoing the changes of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt; will revert back Hive to old behavior where QL was doing the pruning and thus will solve the problem you guys are seeing now. That way we could have left partition pruning in metastore to play with and try to fix the real bug.&lt;/p&gt;</comment>
                            <comment id="12972252" author="namit" created="Thu, 16 Dec 2010 22:31:59 +0000"  >&lt;p&gt;This was creating a big problem for us - so, we needed to fix it asap.&lt;/p&gt;

&lt;p&gt;Now, we can think of more options.&lt;/p&gt;</comment>
                            <comment id="12972262" author="pauly" created="Thu, 16 Dec 2010 22:43:04 +0000"  >&lt;p&gt;The bug is that get_table (and likely get_partition) returns null even though the object clearly exists. This is without any pruning or filtering.&lt;/p&gt;

&lt;p&gt;Since the bug is within the newer version JDO/datanucleus, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1609&quot; title=&quot;Support partition filtering in metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1609&quot;&gt;&lt;del&gt;HIVE-1609&lt;/del&gt;&lt;/a&gt; (listPartitionsByFilter) depends on the newer version, it wouldn&apos;t have worked with the JDO downgrade.&lt;/p&gt;

&lt;p&gt;This patch undoes &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1660&quot; title=&quot;Change get_partitions_ps to pass partition filter to database&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1660&quot;&gt;&lt;del&gt;HIVE-1660&lt;/del&gt;&lt;/a&gt;, reverts JDO back to the older version, and disables listPartitionsByFilter().&lt;/p&gt;</comment>
                            <comment id="12972265" author="ashutoshc" created="Thu, 16 Dec 2010 22:45:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;This was creating a big problem for us - so, we needed to fix it asap. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Unfortunately, this will cause a big problem for us  : ( We were pushing filters from Pig to Metastore (in Howl) all those pig scripts will now break.&lt;/p&gt;</comment>
                            <comment id="12972273" author="pauly" created="Thu, 16 Dec 2010 22:54:24 +0000"  >&lt;p&gt;This bug should affect you guys as well - you haven&apos;t been seeing occasionally missing tables when you issue metastore queries?&lt;/p&gt;</comment>
                            <comment id="12972276" author="namit" created="Thu, 16 Dec 2010 22:55:30 +0000"  >&lt;p&gt;Also, is there some other more stable version of JDO which does not have this problem ?&lt;/p&gt;</comment>
                            <comment id="12972280" author="namit" created="Thu, 16 Dec 2010 23:13:10 +0000"  >&lt;p&gt;Ashutosh, what is your timeline ?&lt;/p&gt;

&lt;p&gt;Right now, we dont have the infra-structure in place to pick some patches and ignore others.&lt;br/&gt;
We pick all the patches from the open source to our internal tree.&lt;/p&gt;

&lt;p&gt;For the time it will take us to develop this, can you live with the current trunk &lt;br/&gt;
(lower JDO) ?&lt;/p&gt;</comment>
                            <comment id="12972305" author="ashutoshc" created="Fri, 17 Dec 2010 00:17:40 +0000"  >&lt;p&gt;We are still evaluating its impact on us and looking if there is any straight fwd fix which exists for us. I will have more details later.&lt;/p&gt;</comment>
                            <comment id="12972327" author="ashutoshc" created="Fri, 17 Dec 2010 01:10:56 +0000"  >&lt;p&gt;Was doing some testing for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1696&quot; title=&quot;Add delegation token support to metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1696&quot;&gt;&lt;del&gt;HIVE-1696&lt;/del&gt;&lt;/a&gt; test cases now fail with&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &amp;lt;error message=&lt;span class=&quot;code-quote&quot;&gt;&quot;listMPartitionsByFilter is not supported due to a JDO library downgrade&quot;&lt;/span&gt; type=&lt;span class=&quot;code-quote&quot;&gt;&quot;java.lang.RuntimeException&quot;&lt;/span&gt;&amp;gt;java.lang.RuntimeException: listMPartitionsByFilter is not supported due to a JDO library downgrade
        at org.apache.hadoop.hive.metastore.ObjectStore.listMPartitionsByFilter(ObjectStore.java:1025)
        at org.apache.hadoop.hive.metastore.ObjectStore.getPartitionsByFilter(ObjectStore.java:972)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler$36.run(HiveMetaStore.java:2126)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler$36.run(HiveMetaStore.java:2123)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.executeWithRetry(HiveMetaStore.java:240)
        at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_partitions_by_filter(HiveMetaStore.java:2123)
        at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.listPartitionsByFilter(HiveMetaStoreClient.java:589)
        at org.apache.hadoop.hive.metastore.TestHiveMetaStore.checkFilter(TestHiveMetaStore.java:1147)
        at org.apache.hadoop.hive.metastore.TestHiveMetaStore.testPartitionFilter(TestHiveMetaStore.java:1065)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;May be for time being (until underlying issue is fixed) we shall also disable the failing tests so that trunk is buildable with passing all tests.&lt;/p&gt;</comment>
                            <comment id="12972669" author="jvs" created="Fri, 17 Dec 2010 22:22:07 +0000"  >&lt;p&gt;Yeah, Hudson agrees with Ashutosh:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://hudson.apache.org/hudson/job/Hive-trunk-h0.20/445/testReport/junit/org.apache.hadoop.hive.metastore/TestEmbeddedHiveMetaStore/testPartitionFilter/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hudson.apache.org/hudson/job/Hive-trunk-h0.20/445/testReport/junit/org.apache.hadoop.hive.metastore/TestEmbeddedHiveMetaStore/testPartitionFilter/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12973122" author="ashutoshc" created="Mon, 20 Dec 2010 06:58:12 +0000"  >&lt;blockquote&gt;&lt;p&gt;We have a test case where 5 processes are concurrently issueing the same query -  explain extended insert .. select from &amp;lt;T&amp;gt;and once in a while, we get a error &amp;lt;T&amp;gt; not found - When we revert back the JDO version, the error is gone.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Namit,&lt;/p&gt;

&lt;p&gt;Will it be possible to post the testcase which shows this problem?&lt;/p&gt;</comment>
                            <comment id="12973847" author="namit" created="Tue, 21 Dec 2010 19:46:14 +0000"  >&lt;p&gt;Unfortunately, the query that I was running used some production tables.&lt;br/&gt;
I will try to reproduce the query with some non-production tables.&lt;/p&gt;</comment>
                            <comment id="13236476" author="andy" created="Fri, 23 Mar 2012 09:26:03 +0000"  >&lt;p&gt;&amp;gt; Since the bug is within the newer version JDO/datanucleus&lt;/p&gt;

&lt;p&gt;Why not reference what this bug was in DataNucleus JIRA ? that way someone at that side can understand what this refers to. Or maybe it was never reported to DataNucleus?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12471563">HIVE-1539</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12493928">HIVE-1862</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12472999">HIVE-1609</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12466400" name="HIVE-1853.1.patch" size="9859" author="pauly" created="Thu, 16 Dec 2010 19:44:00 +0000"/>
                            <attachment id="12466401" name="HIVE-1853.2.patch" size="9842" author="pauly" created="Thu, 16 Dec 2010 20:04:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36778</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lhan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123452</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>