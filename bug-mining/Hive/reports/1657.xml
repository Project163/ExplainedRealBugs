<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:12:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5510] [WebHCat] GET job/queue return wrong job information</title>
                <link>https://issues.apache.org/jira/browse/HIVE-5510</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;GET job/queue of a TempletonController job return weird information. It is a mix of child job and itself. It should only pull the information of the controller job itself.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12673131">HIVE-5510</key>
            <summary>[WebHCat] GET job/queue return wrong job information</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="daijy">Daniel Dai</assignee>
                                    <reporter username="daijy">Daniel Dai</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Oct 2013 22:21:44 +0000</created>
                <updated>Sat, 12 Jul 2014 08:38:53 +0000</updated>
                            <resolved>Thu, 31 Oct 2013 20:02:47 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>WebHCat</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13794436" author="ekoifman" created="Mon, 14 Oct 2013 20:25:02 +0000"  >&lt;p&gt;This doesn&apos;t apply to trunk.  It needs to be rebased.  (specifically TestDriverCurl.pm)&lt;/p&gt;</comment>
                            <comment id="13794758" author="ekoifman" created="Tue, 15 Oct 2013 01:30:37 +0000"  >&lt;p&gt;There should be some JavaDoc (either on ListDelegator or StatusDelegator) that has a few lines about the design:&lt;br/&gt;
What is being tracked for parent job (presumably LauchMapper?), what (if anything) is tracked for child job(s).&lt;br/&gt;
While not strictly related to this bug, there should be some comments on what will happen if a user (StatusDelegator) asks for a status of a job he doesn&apos;t own.&lt;/p&gt;

&lt;p&gt;There are no new tests in this patch.  Is this covered by existing tests?&lt;/p&gt;

&lt;p&gt;TempletonControllerJob has&lt;br/&gt;
if (childid != null) &lt;/p&gt;
{                                                                                                                                             
+                JobState childState = new JobState(childid, conf);                                                                                                               
+                childState.setParent(jobid.toString());                                                                                                                          
+                state.close();                                                                                                                                                   
+                state.addChild(childid);                                                                                                                                         
+              }

&lt;p&gt;why is state.close() before state.addChild ?&lt;/p&gt;

&lt;p&gt;DeleteDelegaor &lt;br/&gt;
has &quot;String childid = state.getChildId();&quot; which is unused.&lt;br/&gt;
Also, wouldn&apos;t make sense to wrap killJob() in a try/catch inside the loop so that we cancel as many child tasks as possible?&lt;/p&gt;

&lt;p&gt;ListDelegator&lt;br/&gt;
JobState state = null;  - this variable is never used and thus it and the try/finally is unused&lt;/p&gt;


</comment>
                            <comment id="13794766" author="ekoifman" created="Tue, 15 Oct 2013 01:36:29 +0000"  >&lt;p&gt;Also, StatusDelegator#makeStatus() should be package scoped.&lt;/p&gt;</comment>
                            <comment id="13794768" author="ekoifman" created="Tue, 15 Oct 2013 01:40:24 +0000"  >&lt;p&gt;with this patch (and one from &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5540&quot; title=&quot;webhcat e2e test failures: &amp;quot;Expect 1 jobs in logs, but get 1&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5540&quot;&gt;&lt;del&gt;HIVE-5540&lt;/del&gt;&lt;/a&gt;) applied I get 1 FAILED and 1 ABORTED test.  test_harnesss_1381798977 has details.&lt;/p&gt;</comment>
                            <comment id="13795613" author="daijy" created="Tue, 15 Oct 2013 20:46:22 +0000"  >&lt;p&gt;Addressing Eugene&apos;s review comments.&lt;/p&gt;</comment>
                            <comment id="13796325" author="ekoifman" created="Wed, 16 Oct 2013 01:58:47 +0000"  >&lt;p&gt;Comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5510&quot; title=&quot;[WebHCat] GET job/queue return wrong job information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5510&quot;&gt;&lt;del&gt;HIVE-5510&lt;/del&gt;&lt;/a&gt;-2.patch&lt;br/&gt;
build.xml changes concurrency from 5/5 to 1/1.  Why?&lt;/p&gt;

&lt;p&gt;TempletonControllerJob.Watcher.run()&lt;br/&gt;
This records all child IDs in the parent as a list.  Makes sense.&lt;br/&gt;
This also creates a JobState for each child task.  What is purpose of this?&lt;br/&gt;
We never (AFAIK) get any notifications from Hadoop when a subtask completes.  When is this JobState (for child task) ever updated?  If not, then why create it?  Conversely, maybe it would be useful to track the state of child task, but I think that would require more changes like registering a callback with JobTracker for each child task that we find.  Don&apos;t know whether this is really useful.&lt;/p&gt;

&lt;p&gt;DeleteDelegator&lt;br/&gt;
it uses System.err for logging.  Why not log4j which will be in webhcat.log with WARN log level&lt;/p&gt;

&lt;p&gt;JobState:&lt;br/&gt;
getChildId() is never used&lt;/p&gt;</comment>
                            <comment id="13797256" author="daijy" created="Wed, 16 Oct 2013 21:04:34 +0000"  >&lt;blockquote&gt;&lt;p&gt;build.xml changes concurrency from 5/5 to 1/1. Why?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;That&apos;s unintended. Will remove it&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;TempletonControllerJob.Watcher.run()&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;This also creates a JobState for each child task. What is purpose of this?&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Just for each child know its parent.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;We never (AFAIK) get any notifications from Hadoop when a subtask completes. When is this JobState (for child task) ever updated? If not, then why create it? Conversely, maybe it would be useful to track the state of child task, but I think that would require more changes like registering a callback with JobTracker for each child task that we find. Don&apos;t know whether this is really useful.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Only the parent field for each each child job is meaningful, we don&apos;t track other changes for the child job&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;DeleteDelegator&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;it uses System.err for logging. Why not log4j which will be in webhcat.log with WARN log level&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Yes, we should, will change.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;JobState:&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;&lt;p&gt;getChildId() is never used&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;This is used by StatusDelegator. Actually getChildren is never used, but it is there for a while, I don&apos;t want to remove it in this patch.&lt;/p&gt;</comment>
                            <comment id="13797266" author="ekoifman" created="Wed, 16 Oct 2013 21:20:20 +0000"  >&lt;p&gt;if you search the 2nd patch for getChildId, it shows up in 2 places both of which are removed.  So if you apply the patch to current trunk and look for usages of this method, I don&apos;t see any.&lt;/p&gt;</comment>
                            <comment id="13802460" author="daijy" created="Wed, 23 Oct 2013 00:20:52 +0000"  >&lt;p&gt;Yes, you are right. And setChildren/setChildren too. Removing all those unused methods.&lt;/p&gt;</comment>
                            <comment id="13810636" author="daijy" created="Thu, 31 Oct 2013 20:02:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5510&quot; title=&quot;[WebHCat] GET job/queue return wrong job information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5510&quot;&gt;&lt;del&gt;HIVE-5510&lt;/del&gt;&lt;/a&gt;-4.patch resync with trunk.&lt;/p&gt;</comment>
                            <comment id="13810637" author="daijy" created="Thu, 31 Oct 2013 20:02:47 +0000"  >&lt;p&gt;Patch committed to trunk.&lt;/p&gt;</comment>
                            <comment id="14052813" author="lefty@hortonworks.com" created="Sat, 5 Jul 2014 06:50:13 +0000"  >&lt;p&gt;This bug fix is documented in the wiki here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+Jobs#WebHCatReferenceJobs-CurlCommand(fields)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GET Jobs &amp;#8211; Curl Command (fields) &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+Jobs#WebHCatReferenceJobs-JSONOutput(fields,Hive0.12.0andlater)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;GET Jobs &amp;#8211; JSON Output (fields, Hive 0.12.0 and later) &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14053877" author="ekoifman" created="Mon, 7 Jul 2014 17:14:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; the 1st example (under &quot;JSON Output (fields)&quot;) seems to be of the behavior before the bug fix - isn&apos;t likely to confuse users.  Should the example be of &apos;correct&apos; output?&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=daijy&quot; class=&quot;user-hover&quot; rel=&quot;daijy&quot;&gt;daijy&lt;/a&gt; Does that make sense to you?&lt;/p&gt;</comment>
                            <comment id="14054171" author="lefty@hortonworks.com" created="Mon, 7 Jul 2014 21:41:04 +0000"  >&lt;p&gt;You&apos;re right, and I was confused &amp;#8211; I thought the first example was for Hive 0.11 and earlier, but GET jobs was introduced in Hive 0.12 so why do we even have that section?&lt;/p&gt;

&lt;p&gt;Similarly, in &quot;JSON Output (fields, Hive 0.12.0 and later)&quot; the version information isn&apos;t needed because the new behavior of the fields parameter came in the same release as GET jobs.&lt;/p&gt;

&lt;p&gt;Recommendations:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Delete the Bug Fix box after the curl command.&lt;/li&gt;
	&lt;li&gt;Delete the entire &quot;JSON Output (fields)&quot; section.&lt;/li&gt;
	&lt;li&gt;Rename &quot;JSON Output (fields, Hive 0.12.0 and later)&quot; to &quot;JSON Output (fields)&quot;.&lt;/li&gt;
	&lt;li&gt;Rename the version box &quot;Bug in Hive 0.12&quot; or some such.&lt;/li&gt;
	&lt;li&gt;Delete the first sentence in the version box.&lt;/li&gt;
&lt;/ol&gt;


&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+Jobs#WebHCatReferenceJobs-CurlCommand(fields)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Curl Command (fields) &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+Jobs#WebHCatReferenceJobs-JSONOutput(fields)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JSON Output (fields) &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+Jobs#WebHCatReferenceJobs-JSONOutput(fields,Hive0.12.0andlater)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JSON Output (fields, Hive 0.12.0 and later) &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14059708" author="lefty@hortonworks.com" created="Sat, 12 Jul 2014 08:38:53 +0000"  >&lt;p&gt;I revised the GET jobs wikidoc according to the recommendations in the previous comment:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/WebHCat+Reference+Jobs#WebHCatReferenceJobs-CurlCommand(fields)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Curl Command and JSON Output (fields) &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12607673" name="HIVE-5510-1.patch" size="10677" author="daijy" created="Wed, 9 Oct 2013 22:22:21 +0000"/>
                            <attachment id="12608565" name="HIVE-5510-2.patch" size="13631" author="daijy" created="Tue, 15 Oct 2013 20:46:22 +0000"/>
                            <attachment id="12609760" name="HIVE-5510-3.patch" size="14025" author="daijy" created="Wed, 23 Oct 2013 00:20:52 +0000"/>
                            <attachment id="12611466" name="HIVE-5510-4.patch" size="13985" author="daijy" created="Thu, 31 Oct 2013 20:02:09 +0000"/>
                            <attachment id="12608409" name="test_harnesss_1381798977" size="461476" author="ekoifman" created="Tue, 15 Oct 2013 01:40:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352754</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 19 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1otgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>353041</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>