<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:32:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-9580] Server returns incorrect result from JOIN ON VARCHAR columns</title>
                <link>https://issues.apache.org/jira/browse/HIVE-9580</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The database erroneously returns rows when joining two tables which each contain a VARCHAR column and the join&apos;s ON condition uses the equality operator on the VARCHAR columns.&lt;/p&gt;

&lt;p&gt;******The following JDBC method exhibits the problem:&lt;/p&gt;

&lt;p&gt;	static void joinIssue() &lt;br/&gt;
		throws SQLException {&lt;/p&gt;

&lt;p&gt;		String sql;&lt;br/&gt;
		int rowsAffected;&lt;br/&gt;
		ResultSet rs;&lt;/p&gt;

&lt;p&gt;		Statement stmt = con.createStatement();&lt;/p&gt;

&lt;p&gt;		String table1_Name = &quot;blahtab1&quot;;&lt;br/&gt;
		String table1A_Name = &quot;blahtab1A&quot;;&lt;br/&gt;
		String table1B_Name = &quot;blahtab1B&quot;;&lt;br/&gt;
		String table2_Name = &quot;blahtab2&quot;;&lt;/p&gt;

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;drop table &quot; + table1_Name;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;Drop table error:&quot; + se.getMessage());
		}

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;CREATE TABLE &quot; + table1_Name + &quot;(&quot; +
						&quot;VCHARCOL VARCHAR(10) &quot; +
						&quot;,INTEGERCOL INT &quot; +
					&quot;) &quot;
			;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;create table error:&quot; + se.getMessage());
		}

&lt;p&gt;		sql = &quot;insert into &quot; + table1_Name + &quot; values (&apos;jklmnopqrs&apos;, 99)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		stmt.executeUpdate(sql);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;drop table &quot; + table1A_Name;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;Drop table error:&quot; + se.getMessage());
		}

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;CREATE TABLE &quot; + table1A_Name + &quot;(&quot; +
						&quot;VCHARCOL VARCHAR(10) &quot; +
					&quot;) &quot;
			;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;create table error:&quot; + se.getMessage());
		}

&lt;p&gt;		sql = &quot;insert into &quot; + table1A_Name + &quot; values (&apos;jklmnopqrs&apos;)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		stmt.executeUpdate(sql);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;drop table &quot; + table1B_Name;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;Drop table error:&quot; + se.getMessage());
		}

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;CREATE TABLE &quot; + table1B_Name + &quot;(&quot; +
						&quot;VCHARCOL VARCHAR(11) &quot; +
						&quot;,INTEGERCOL INT &quot; +
					&quot;) &quot;
			;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;create table error:&quot; + se.getMessage());
		}

&lt;p&gt;		sql = &quot;insert into &quot; + table1B_Name + &quot; values (&apos;jklmnopqrs&apos;, 99)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		stmt.executeUpdate(sql);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;drop table &quot; + table2_Name;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;Drop table error:&quot; + se.getMessage());
		}

&lt;p&gt;		try &lt;/p&gt;
{
			sql = &quot;CREATE TABLE &quot; + table2_Name + &quot;(&quot; +
						&quot;VCHARCOL VARCHAR(30) &quot; +
					&quot;) &quot;
					;
			System.out.println(&quot;\nsql=&quot; + sql);
			rowsAffected = stmt.executeUpdate(sql);
		}
&lt;p&gt;		catch (SQLException se) &lt;/p&gt;
{
			println(&quot;create table error:&quot; + se.getMessage());
		}

&lt;p&gt;		sql = &quot;insert into &quot; + table2_Name + &quot; values (&apos;jklmnopqrsX&apos;)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		stmt.executeUpdate(sql);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;select * from &quot; + table1_Name;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;select * from &quot; + table1A_Name;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;select * from &quot; + table1B_Name;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;select * from &quot; + table2_Name;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;SELECT &quot; + &lt;br/&gt;
				table1_Name + &quot;.VCHARCOL, &quot; + &lt;br/&gt;
				table2_Name + &quot;.VCHARCOL &quot; +&lt;br/&gt;
				&quot;FROM &quot; + table1_Name + &quot; JOIN &quot; + table2_Name + &lt;br/&gt;
					&quot; ON (&quot; + table1_Name + &quot;.VCHARCOL = &quot; + table2_Name + &quot;.VCHARCOL)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;SELECT &quot; + &lt;br/&gt;
				table1_Name + &quot;.VCHARCOL, &quot; + &lt;br/&gt;
				table2_Name + &quot;.VCHARCOL &quot; +&lt;br/&gt;
				&quot;FROM &quot; + table2_Name + &quot; JOIN &quot; + table1_Name + &lt;br/&gt;
					&quot; ON (&quot; + table2_Name + &quot;.VCHARCOL = &quot; + table1_Name + &quot;.VCHARCOL)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;SELECT &quot; + &lt;br/&gt;
				table1A_Name + &quot;.VCHARCOL, &quot; + &lt;br/&gt;
				table2_Name + &quot;.VCHARCOL &quot; +&lt;br/&gt;
				&quot;FROM &quot; + table1A_Name + &quot; JOIN &quot; + table2_Name + &lt;br/&gt;
					&quot; ON (&quot; + table1A_Name + &quot;.VCHARCOL = &quot; + table2_Name + &quot;.VCHARCOL)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		System.out.println(&quot;=======================================================================================================================================&quot;);&lt;/p&gt;

&lt;p&gt;		sql = &quot;SELECT &quot; + &lt;br/&gt;
				table1B_Name + &quot;.VCHARCOL, &quot; + &lt;br/&gt;
				table2_Name + &quot;.VCHARCOL &quot; +&lt;br/&gt;
				&quot;FROM &quot; + table1B_Name + &quot; JOIN &quot; + table2_Name + &lt;br/&gt;
					&quot; ON (&quot; + table1B_Name + &quot;.VCHARCOL = &quot; + table2_Name + &quot;.VCHARCOL)&quot;;&lt;br/&gt;
		System.out.println(&quot;\nsql=&quot; + sql);&lt;br/&gt;
		rs = stmt.executeQuery(sql);&lt;br/&gt;
		dispResultSet(rs, true, true);&lt;/p&gt;

&lt;p&gt;		stmt.close();&lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;******The output generated by program run is as follows (for 0.13):&lt;/p&gt;

&lt;p&gt;sql=drop table blahtab1&lt;/p&gt;

&lt;p&gt;sql=CREATE TABLE blahtab1(VCHARCOL VARCHAR(10) ,INTEGERCOL INT ) &lt;/p&gt;

&lt;p&gt;sql=insert into blahtab1 values (&apos;jklmnopqrs&apos;, 99)&lt;br/&gt;
=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=drop table blahtab1A&lt;/p&gt;

&lt;p&gt;sql=CREATE TABLE blahtab1A(VCHARCOL VARCHAR(10) ) &lt;/p&gt;

&lt;p&gt;sql=insert into blahtab1A values (&apos;jklmnopqrs&apos;)&lt;br/&gt;
=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=drop table blahtab1B&lt;/p&gt;

&lt;p&gt;sql=CREATE TABLE blahtab1B(VCHARCOL VARCHAR(11) ,INTEGERCOL INT ) &lt;/p&gt;

&lt;p&gt;sql=insert into blahtab1B values (&apos;jklmnopqrs&apos;, 99)&lt;br/&gt;
=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=drop table blahtab2&lt;/p&gt;

&lt;p&gt;sql=CREATE TABLE blahtab2(VCHARCOL VARCHAR(30) ) &lt;/p&gt;

&lt;p&gt;sql=insert into blahtab2 values (&apos;jklmnopqrsX&apos;)&lt;br/&gt;
=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=select * from blahtab1&lt;/p&gt;

&lt;p&gt;vcharcol(10):jklmnopqrs|integercol(10):99|&lt;br/&gt;
Num rows in result set = 1&lt;/p&gt;

&lt;p&gt;=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=select * from blahtab1A&lt;/p&gt;

&lt;p&gt;vcharcol(10):jklmnopqrs|&lt;br/&gt;
Num rows in result set = 1&lt;/p&gt;

&lt;p&gt;=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=select * from blahtab1B&lt;/p&gt;

&lt;p&gt;vcharcol(11):jklmnopqrs|integercol(10):99|&lt;br/&gt;
Num rows in result set = 1&lt;/p&gt;

&lt;p&gt;=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=select * from blahtab2&lt;/p&gt;

&lt;p&gt;vcharcol(30):jklmnopqrsX|&lt;br/&gt;
Num rows in result set = 1&lt;/p&gt;

&lt;p&gt;=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=SELECT blahtab1.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1 JOIN blahtab2 ON (blahtab1.VCHARCOL = blahtab2.VCHARCOL)&lt;/p&gt;

&lt;p&gt;vcharcol(10):jklmnopqrs|vcharcol(30):jklmnopqrsX|&lt;br/&gt;
Num rows in result set = 1&lt;/p&gt;

&lt;p&gt;=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=SELECT blahtab1.VCHARCOL, blahtab2.VCHARCOL FROM blahtab2 JOIN blahtab1 ON (blahtab2.VCHARCOL = blahtab1.VCHARCOL)&lt;/p&gt;

&lt;p&gt;Num rows in result set = 0&lt;/p&gt;

&lt;p&gt;=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=SELECT blahtab1A.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1A JOIN blahtab2 ON (blahtab1A.VCHARCOL = blahtab2.VCHARCOL)&lt;/p&gt;

&lt;p&gt;Num rows in result set = 0&lt;/p&gt;

&lt;p&gt;=======================================================================================================================================&lt;/p&gt;

&lt;p&gt;sql=SELECT blahtab1B.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1B JOIN blahtab2 ON (blahtab1B.VCHARCOL = blahtab2.VCHARCOL)&lt;/p&gt;

&lt;p&gt;Num rows in result set = 0&lt;/p&gt;

&lt;p&gt;******The server should NOT return any rows for the following query, but it does:&lt;br/&gt;
SELECT blahtab1.VCHARCOL, blahtab2.VCHARCOL FROM blahtab1 JOIN blahtab2 ON (blahtab1.VCHARCOL = blahtab2.VCHARCOL)&lt;/p&gt;

&lt;p&gt;Result:&lt;br/&gt;
vcharcol(10):jklmnopqrs|vcharcol(30):jklmnopqrsX|&lt;br/&gt;
Num rows in result set = 1&lt;/p&gt;</description>
                <environment></environment>
        <key id="12772475">HIVE-9580</key>
            <summary>Server returns incorrect result from JOIN ON VARCHAR columns</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aihuaxu">Aihua Xu</assignee>
                                    <reporter username="mikespinak">Mike</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Feb 2015 20:09:56 +0000</created>
                <updated>Mon, 18 May 2015 19:53:58 +0000</updated>
                            <resolved>Fri, 17 Apr 2015 18:41:00 +0000</resolved>
                                    <version>0.12.0</version>
                    <version>0.13.0</version>
                    <version>0.14.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14347507" author="aihuaxu" created="Wed, 4 Mar 2015 20:25:15 +0000"  >&lt;p&gt;The issue is caused by: we always assume that the join keys have the same data type and save the one from the first table, then apply it when we serialize and deserialize the hashtables to/from files.&lt;/p&gt;

&lt;p&gt;It causes the issue when dealing with varchar datatypes. In table A, the column could be varchar(10) while in table B it could be varchar(20). Some times we write the incorrect data to the files if the varchar length of the first table is small.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt; You have worked on join. I&apos;m thinking that we should always choose the one with the largest length. When joining types like smallint and int, we should choose int. &lt;/p&gt;</comment>
                            <comment id="14347729" author="aihuaxu" created="Wed, 4 Mar 2015 22:58:30 +0000"  >&lt;p&gt;Seems Hive can handle the join over any kind of data types. &lt;/p&gt;</comment>
                            <comment id="14485418" author="aihuaxu" created="Wed, 8 Apr 2015 15:47:33 +0000"  >&lt;p&gt;For join on varchar or char columns, currently we don&apos;t implicitly convert the keys since they are of the same type with different lengths. While during the query run-time, we assume all the keys are of the same type and will also choose the first one as the type to be used to parse all the keys, which are causing the issue.&lt;/p&gt;

&lt;p&gt;The patch applies the the common type for all the keys even all the keys are of the same type. Also change a type comparison to use equals() rather than ==.&lt;/p&gt;</comment>
                            <comment id="14487289" author="hiveqa" created="Thu, 9 Apr 2015 12:30:17 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12723937/HIVE-9580.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12723937/HIVE-9580.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 25 failed/errored test(s), 8666 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file
TestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_auto_sortmerge_join_2
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_char_mapjoin1
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vector_varchar_mapjoin1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_decimal
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_char_mapjoin1
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_varchar_mapjoin1
org.apache.hadoop.hive.cli.TestNegativeMinimrCliDriver.testNegativeCliDriver_minimr_broken_pipe
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_mapjoin_decimal
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testMetastoreProxyUser
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp
org.apache.hive.spark.client.TestSparkClient.testSyncRpc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3343/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3343/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3343/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3343/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3343/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3343/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 25 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12723937 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14487444" author="aihuaxu" created="Thu, 9 Apr 2015 14:45:58 +0000"  >&lt;p&gt;Fixed affected unit tests baseline. &lt;/p&gt;</comment>
                            <comment id="14490460" author="hiveqa" created="Fri, 10 Apr 2015 22:19:39 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12724233/HIVE-9580.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12724233/HIVE-9580.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 19 failed/errored test(s), 8673 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file
TestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mapjoin_decimal
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testMetastoreProxyUser
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testNewConnectionConfiguration
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp
org.apache.hive.spark.client.TestSparkClient.testSyncRpc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3364/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3364/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3364/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3364/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3364/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3364/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 19 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12724233 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14496203" author="aihuaxu" created="Wed, 15 Apr 2015 14:00:19 +0000"  >&lt;p&gt;Attached the new patch to fix testCliDriver_mapjoin_decimal unit test failure. The other failures seem to be unrelated.&lt;/p&gt;</comment>
                            <comment id="14496208" author="aihuaxu" created="Wed, 15 Apr 2015 14:01:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=szehon&quot; class=&quot;user-hover&quot; rel=&quot;szehon&quot;&gt;szehon&lt;/a&gt; Can you help review the code change?&lt;/p&gt;</comment>
                            <comment id="14496681" author="szehon" created="Wed, 15 Apr 2015 18:42:18 +0000"  >&lt;p&gt;Hi Aihua, looks like this works, so you are making all the varchars (and even char) in the join comparison to be the maximum length to avoid this issue.&lt;/p&gt;

&lt;p&gt;But I&apos;m not too familiar with this code, I think &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jdere&quot; class=&quot;user-hover&quot; rel=&quot;jdere&quot;&gt;jdere&lt;/a&gt; is the varchars expert, forwarding to him to take a look as well.&lt;/p&gt;</comment>
                            <comment id="14496785" author="aihuaxu" created="Wed, 15 Apr 2015 19:48:46 +0000"  >&lt;p&gt;That&apos;s right. For the key comparison, it will call UDF to do the key conversion if we are comparing different types, or I think we should pick the common type as the key type if the type conversion is not needed for the data types including char or varchar with different lengths.&lt;/p&gt;</comment>
                            <comment id="14496996" author="hiveqa" created="Wed, 15 Apr 2015 21:05:47 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12725576/HIVE-9580.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12725576/HIVE-9580.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 14 failed/errored test(s), 8690 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMinimrCliDriver-bucketmapjoin6.q-constprog_partitioner.q-infer_bucket_sort_dyn_part.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-external_table_with_space_in_location_path.q-infer_bucket_sort_merge.q-auto_sortmerge_join_16.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-groupby2.q-import_exported_table.q-bucketizedhiveinputformat.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-index_bitmap3.q-stats_counter_partitioned.q-temp_table_external.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_map_operators.q-join1.q-bucketmapjoin7.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_num_buckets.q-disable_merge_for_bucketing.q-uber_reduce.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-infer_bucket_sort_reducers_power_two.q-scriptfile1.q-scriptfile1_win.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-leftsemijoin_mr.q-load_hdfs_file_with_space_in_the_name.q-root_dir_external_table.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-list_bucket_dml_10.q-bucket_num_reducers.q-bucket6.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-load_fs2.q-file_with_header_footer.q-ql_rewrite_gbtoidx_cbo_1.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-parallel_orderby.q-reduce_deduplicate.q-ql_rewrite_gbtoidx_cbo_2.q-and-1-more - did not produce a TEST-*.xml file
TestMinimrCliDriver-ql_rewrite_gbtoidx.q-smb_mapjoin_8.q - did not produce a TEST-*.xml file
TestMinimrCliDriver-schemeAuthority2.q-bucket4.q-input16_cc.q-and-1-more - did not produce a TEST-*.xml file
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_union_view
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3448/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3448/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3448/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3448/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3448/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3448/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 14 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12725576 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14497008" author="jdere" created="Wed, 15 Apr 2015 21:10:34 +0000"  >&lt;p&gt;I think this looks fine. I would just say to make sure there are tests to cover the types that would get affected by this change (char/varchar/decimal joins), which it looks like there already are.&lt;/p&gt;</comment>
                            <comment id="14497023" author="szehon" created="Wed, 15 Apr 2015 21:16:04 +0000"  >&lt;p&gt;Great thanks, +1&lt;/p&gt;</comment>
                            <comment id="14497336" author="aihuaxu" created="Wed, 15 Apr 2015 23:57:20 +0000"  >&lt;p&gt;The failed test cases above seem unrelated.  TestCliDriver.testCliDriver_union_view seems also caused by some other changes.&lt;/p&gt;</comment>
                            <comment id="14500403" author="szehon" created="Fri, 17 Apr 2015 18:41:00 +0000"  >&lt;p&gt;Committed to trunk, thanks Aihua!&lt;/p&gt;</comment>
                            <comment id="14548945" author="sushanth" created="Mon, 18 May 2015 19:53:58 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12725576" name="HIVE-9580.patch" size="15972" author="aihuaxu" created="Wed, 15 Apr 2015 13:59:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2577b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>