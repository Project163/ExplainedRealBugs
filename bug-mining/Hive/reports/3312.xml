<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:31:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-10202] Beeline outputs prompt+query on standard output when used in non-interactive mode</title>
                <link>https://issues.apache.org/jira/browse/HIVE-10202</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When passing a SQL script file to Hive CLI, the prompt+query is not sent to the standard output nor standard error. This is totally fine because users might want to send only the query results to the standard output, and parse the results from it.&lt;/p&gt;

&lt;p&gt;In the case of BeeLine, the promp+query is sent to the standard output causing extra parsing on the user scripts to avoid reading the prompt+query. &lt;/p&gt;

&lt;p&gt;Another drawback is in the security side. Sensitive queries are logged directly to the files where the standard output is redirected.&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ cat /tmp/query.sql 
select * 
from test
limit 1;

$ beeline --showheader=false --outputformat=tsv2 -u jdbc:hive2://localhost:10000 -f /tmp/query.sql &amp;gt; /tmp/output.log 2&amp;gt; /tmp/error.log

$ cat /tmp/output.log
0: jdbc:hive2://localhost:10000&amp;gt; select * 
. . . . . . . . . . . . . . . .&amp;gt; from test
. . . . . . . . . . . . . . . .&amp;gt; limit 1; 
451	451.713	false	y2dh7	[&quot;866&quot;,&quot;528&quot;,&quot;936&quot;]
0: jdbc:hive2://localhost:10000&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We should avoid sending the prompt+query to the standard output/error whenever a script file is passed to BeeLine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12787819">HIVE-10202</key>
            <summary>Beeline outputs prompt+query on standard output when used in non-interactive mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ngangam">Naveen Gangam</assignee>
                                    <reporter username="spena">Sergio Pe&#241;a</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Apr 2015 21:13:54 +0000</created>
                <updated>Mon, 18 May 2015 19:48:30 +0000</updated>
                            <resolved>Fri, 10 Apr 2015 17:11:05 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>9</watches>
                                                                                                                <comments>
                            <comment id="14394898" author="ngangam" created="Fri, 3 Apr 2015 18:43:35 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;# cat beeline.sql
select * from booleantest
limit 
5;
# sudo -u hive beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000 --showHeader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --silent=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --outputformat=tsv2 -f beeline.sql 
&lt;/span&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&amp;gt; select * from booleantest 
&lt;/span&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&amp;gt; limit 
&lt;/span&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&amp;gt; 5;
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;	        t
&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;	        f
TRUE	T
FALSE	F
ZERO	0
5 rows selected (6.263 seconds)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With the patch&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[root@ngangam2-rhel64-1 ~]# sudo -u hive beeline -u jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000 --showHeader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; --silent=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; --outputformat=tsv2 -f beeline.sql 
&lt;/span&gt;

&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;	        t
&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; 	f
TRUE	T
FALSE	F
ZERO	0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The blank lines at the top are coming form jline code. I have already proposed a fix for this issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10087&quot; title=&quot;Beeline&amp;#39;s --silent option should suppress query from being echoed when running with -f option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10087&quot;&gt;&lt;del&gt;HIVE-10087&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14395538" author="hiveqa" created="Sat, 4 Apr 2015 04:52:06 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12709285/HIVE-10202.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12709285/HIVE-10202.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 8694 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;TestMinimrCliDriver-smb_mapjoin_8.q - did not produce a TEST-*.xml file
TestThriftHttpCLIService - did not produce a TEST-*.xml file
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testMetastoreProxyUser
org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3278/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3278/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3278/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/3278/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3278/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-3278/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12709285 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14439812" author="spena" created="Mon, 6 Apr 2015 00:13:01 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks for the fix. This is the expected result, but it also needs to happen even when silent mode is set to false.&lt;br/&gt;
The Hive CLI does not print the query to the standard output when silent is true or false either.&lt;/p&gt;

&lt;p&gt;This might work if you set silent to true when a query file is detected from Beeline.java:executeFile().&lt;/p&gt;</comment>
                            <comment id="14481253" author="ngangam" created="Mon, 6 Apr 2015 14:24:25 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt; &lt;br/&gt;
I made it so intentionally so the customers relying on the current behavior will continue to have an option to do so. In a future release, we could make the default behavior to be silent=true when running in script mode and users can retain old behavior by specifying silent=false.&lt;br/&gt;
Thoughts?&lt;/p&gt;</comment>
                            <comment id="14484015" author="spena" created="Tue, 7 Apr 2015 20:46:18 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;&lt;br/&gt;
The patch looks good. +1&lt;/p&gt;</comment>
                            <comment id="14489941" author="spena" created="Fri, 10 Apr 2015 17:11:05 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;&lt;br/&gt;
I applied this patch to trunk.&lt;/p&gt;</comment>
                            <comment id="14490820" author="lefty@hortonworks.com" created="Sat, 11 Apr 2015 06:12:10 +0000"  >&lt;p&gt;Should this change in behavior be documented in the wiki?&lt;/p&gt;</comment>
                            <comment id="14492721" author="spena" created="Mon, 13 Apr 2015 17:45:05 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This just changed the output of beeline in order to match hive-cli output only when the &apos;--silent=true&apos; is set to true.&lt;br/&gt;
If we have a doc section where shows an output example of the &apos;--silent=true&apos;, then we should do that change on it; if not, then I think it should be ok if we don&apos;t document this.&lt;/p&gt;

&lt;p&gt;If we have a doc section for this, could you post the url so that I can take a look?&lt;/p&gt;</comment>
                            <comment id="14492971" author="lefty@hortonworks.com" created="Mon, 13 Apr 2015 19:56:56 +0000"  >&lt;p&gt;Nope, no output example in the docs.  But the Beeline Command Options section includes some usage notes and bug fixes so it could be mentioned there.  The current text is:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Reduce the amount of informational messages displayed (true) or not (false). It also stops displaying the log messages for the query from HiveServer2 (Hive 0.14 and later). Default is false.&lt;br/&gt;
Usage: beeline --silent=true&lt;/p&gt;&lt;/blockquote&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/HiveServer2+Clients#HiveServer2Clients-BeelineCommandOptions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HiveServer2 Clients &amp;#8211; Beeline Command Options &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14500315" author="spena" created="Fri, 17 Apr 2015 17:59:28 +0000"  >&lt;p&gt;It&apos;s good to mention this on that section &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Maybe something like this?:&lt;br/&gt;
Reduce the amount of informational messages displayed (true) or not (false). It also stops displaying the log messages for the query from HiveServer2 (Hive 0.14 and later) and the HQL commands. &lt;/p&gt;</comment>
                            <comment id="14500321" author="spena" created="Fri, 17 Apr 2015 18:02:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ngangam&quot; class=&quot;user-hover&quot; rel=&quot;ngangam&quot;&gt;ngangam&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve just noticed that when using the &apos;--silent=true&apos; without passing a file script, then beeline interactive is executed but it does not show the prompt.&lt;br/&gt;
Is this something desired? Do users use the --silent flag to stop displaying log messages only, but they would like to see the prompt?.&lt;/p&gt;</comment>
                            <comment id="14500344" author="ngangam" created="Fri, 17 Apr 2015 18:13:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt; I dont think thats desirable. My take is that --silent should supress additional info but not the prompt in interactive mode. I will take another look. Perhaps a modification to the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10087&quot; title=&quot;Beeline&amp;#39;s --silent option should suppress query from being echoed when running with -f option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10087&quot;&gt;&lt;del&gt;HIVE-10087&lt;/del&gt;&lt;/a&gt;. We atleast have  workaround to not use --silent for now. Thanks for pointing this out.&lt;/p&gt;</comment>
                            <comment id="14501680" author="lefty@hortonworks.com" created="Sun, 19 Apr 2015 03:58:22 +0000"  >&lt;p&gt;Doc done, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt;.&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/pages/viewpage.action?pageId=30758725#HiveServer2Clients-BeelineCommandOptions&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Beeline Command Options (see --silent) &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14517679" author="ngangam" created="Tue, 28 Apr 2015 19:05:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=spena&quot; class=&quot;user-hover&quot; rel=&quot;spena&quot;&gt;spena&lt;/a&gt; Could you please review the patch when you get  chance? Thank you&lt;/p&gt;</comment>
                            <comment id="14548635" author="sushanth" created="Mon, 18 May 2015 19:48:30 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12823249">HIVE-10452</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12709285" name="HIVE-10202.patch" size="1575" author="ngangam" created="Fri, 3 Apr 2015 18:38:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27q5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>