<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:13:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5948] Output file name is random when using Tez with &quot;insert overwrite local directory&quot; </title>
                <link>https://issues.apache.org/jira/browse/HIVE-5948</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;NO PRECOMMIT TESTS&lt;/p&gt;</description>
                <environment></environment>
        <key id="12682768">HIVE-5948</key>
            <summary>Output file name is random when using Tez with &quot;insert overwrite local directory&quot; </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hitesh">Hitesh Shah</assignee>
                                    <reporter username="hitesh">Hitesh Shah</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Dec 2013 21:05:07 +0000</created>
                <updated>Fri, 6 Dec 2013 02:12:37 +0000</updated>
                            <resolved>Fri, 6 Dec 2013 02:12:37 +0000</resolved>
                                                    <fixVersion>tez-branch</fixVersion>
                                    <component>Tez</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13839361" author="hitesh" created="Wed, 4 Dec 2013 21:07:40 +0000"  >&lt;p&gt;hive&amp;gt; insert overwrite local directory &apos;outdir&apos; select * from studenttab10k limit 10;&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;/p&gt;


&lt;p&gt;Status: Running (application id: application_1384838428767_0705)&lt;/p&gt;

&lt;p&gt;Map 1: &lt;del&gt;/&lt;/del&gt;	Reducer 2: 0/1&lt;br/&gt;
Map 1: 0/1	Reducer 2: 0/1&lt;br/&gt;
Map 1: 0/1	Reducer 2: 0/1&lt;br/&gt;
Map 1: 1/1	Reducer 2: 0/1&lt;br/&gt;
Map 1: 1/1	Reducer 2: 1/1&lt;br/&gt;
Status: Finished successfully&lt;br/&gt;
Copying data to local directory outdir&lt;br/&gt;
Copying data to local directory outdir&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 7.094 seconds&lt;br/&gt;
hive&amp;gt; exit;&lt;br/&gt;
bash-4.1$ ls outdir/&lt;br/&gt;
2014843718&lt;/p&gt;</comment>
                            <comment id="13839425" author="thejas" created="Wed, 4 Dec 2013 22:39:53 +0000"  >&lt;p&gt;I understand the expected dir name (ie behavior with MR) is of the form &quot;000000_0&quot; , ie the task id.&lt;/p&gt;

&lt;p&gt;Can you also add a comment to the setupMRLegacyConfigs function explaining why those configs are being set.&lt;/p&gt;

&lt;p&gt;It will also be good to have a unit test for this, you can take a look at ql/src/test/queries/clientpositive/insert_overwrite_local_directory_1.q&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;insert overwrite local directory &lt;span class=&quot;code-quote&quot;&gt;&apos;../../data/files/local_src_table_1&apos;&lt;/span&gt;
select * from src ;
dfs -cat ../../data/files/local_src_table_1/000000_0;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You need to add the query file name to itests/qtest/pom.xml under  &amp;lt;minitez.query.files&amp;gt; .&lt;br/&gt;
To generate the benchmark output file, run&lt;br/&gt;
mvn test -Dtest=TestMiniTezCliDriver -Dqfile=&amp;lt;new test file&amp;gt;.q -Phadoop-2&lt;/p&gt;
</comment>
                            <comment id="13839428" author="thejas" created="Wed, 4 Dec 2013 22:41:09 +0000"  >&lt;p&gt;the core changes in the patch look good to me.&lt;/p&gt;</comment>
                            <comment id="13840770" author="hitesh" created="Fri, 6 Dec 2013 01:08:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; New patch attached with unit tests.&lt;/p&gt;</comment>
                            <comment id="13840811" author="thejas" created="Fri, 6 Dec 2013 01:49:12 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13840822" author="thejas" created="Fri, 6 Dec 2013 02:04:13 +0000"  >&lt;p&gt;I have committed the patch to tez branch. I added a comment to the function, before committing (&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5948&quot; title=&quot;Output file name is random when using Tez with &amp;quot;insert overwrite local directory&amp;quot; &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5948&quot;&gt;&lt;del&gt;HIVE-5948&lt;/del&gt;&lt;/a&gt;.3.patch).&lt;/p&gt;

&lt;p&gt;Thanks for your contribution Hitesh! Looking forward to more contributions! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12651047">HIVE-4660</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12617061" name="HIVE-5948.1.patch" size="2455" author="hitesh" created="Wed, 4 Dec 2013 21:08:29 +0000"/>
                            <attachment id="12617289" name="HIVE-5948.2.patch" size="8262" author="hitesh" created="Fri, 6 Dec 2013 01:08:08 +0000"/>
                            <attachment id="12617301" name="HIVE-5948.3.patch" size="8483" author="thejas" created="Fri, 6 Dec 2013 02:04:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qekv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>362320</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>