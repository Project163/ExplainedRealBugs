<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:55:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-16793] Scalar sub-query: sq_count_check not required if gby keys are constant</title>
                <link>https://issues.apache.org/jira/browse/HIVE-16793</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This query has an sq_count check, though is useless on a constant key.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;hive&amp;gt; explain select * from part where p_size &amp;gt; (select max(p_size) from part where p_type = &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt; group by p_type);
Warning: Map Join MAPJOIN[37][bigTable=?] in task &lt;span class=&quot;code-quote&quot;&gt;&apos;Map 1&apos;&lt;/span&gt; is a cross product
Warning: Map Join MAPJOIN[36][bigTable=?] in task &lt;span class=&quot;code-quote&quot;&gt;&apos;Map 1&apos;&lt;/span&gt; is a cross product
OK
Plan optimized by CBO.

Vertex dependency in root stage
Map 1 &amp;lt;- Reducer 4 (BROADCAST_EDGE), Reducer 6 (BROADCAST_EDGE)
Reducer 3 &amp;lt;- Map 2 (SIMPLE_EDGE)
Reducer 4 &amp;lt;- Reducer 3 (CUSTOM_SIMPLE_EDGE)
Reducer 6 &amp;lt;- Map 5 (SIMPLE_EDGE)

Stage-0
  Fetch Operator
    limit:-1
    Stage-1
      Map 1 vectorized, llap
      File Output Operator [FS_64]
        Select Operator [SEL_63] (rows=66666666 width=621)
          Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col2&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col3&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col4&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col5&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col6&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col7&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col8&quot;&lt;/span&gt;]
          Filter Operator [FIL_62] (rows=66666666 width=625)
            predicate:(_col5 &amp;gt; _col10)
            Map Join Operator [MAPJOIN_61] (rows=200000000 width=625)
              Conds:(Inner),Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col2&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col3&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col4&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col5&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col6&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col7&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col8&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col10&quot;&lt;/span&gt;]
            &amp;lt;-Reducer 6 [BROADCAST_EDGE] vectorized, llap
              BROADCAST [RS_58]
                Select Operator [SEL_57] (rows=1 width=4)
                  Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;]
                  Group By Operator [GBY_56] (rows=1 width=89)
                    Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;],aggregations:[&lt;span class=&quot;code-quote&quot;&gt;&quot;max(VALUE._col0)&quot;&lt;/span&gt;],keys:KEY._col0
                  &amp;lt;-Map 5 [SIMPLE_EDGE] vectorized, llap
                    SHUFFLE [RS_55]
                      PartitionCols:_col0
                      Group By Operator [GBY_54] (rows=86 width=89)
                        Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;],aggregations:[&lt;span class=&quot;code-quote&quot;&gt;&quot;max(_col1)&quot;&lt;/span&gt;],keys:&lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;
                        Select Operator [SEL_53] (rows=1212121 width=109)
                          Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;]
                          Filter Operator [FIL_52] (rows=1212121 width=109)
                            predicate:(p_type = &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;)
                            TableScan [TS_17] (rows=200000000 width=109)
                              tpch_flat_orc_1000@part,part,Tbl:COMPLETE,Col:COMPLETE,Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;p_type&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_size&quot;&lt;/span&gt;]
            &amp;lt;-Map Join Operator [MAPJOIN_60] (rows=200000000 width=621)
                Conds:(Inner),Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col2&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col3&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col4&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col5&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col6&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col7&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col8&quot;&lt;/span&gt;]
              &amp;lt;-Reducer 4 [BROADCAST_EDGE] vectorized, llap
                BROADCAST [RS_51]
                  Select Operator [SEL_50] (rows=1 width=8)
                    Filter Operator [FIL_49] (rows=1 width=8)
                      predicate:(sq_count_check(_col0) &amp;lt;= 1)
                      Group By Operator [GBY_48] (rows=1 width=8)
                        Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;],aggregations:[&lt;span class=&quot;code-quote&quot;&gt;&quot;count(VALUE._col0)&quot;&lt;/span&gt;]
                      &amp;lt;-Reducer 3 [CUSTOM_SIMPLE_EDGE] vectorized, llap
                        PARTITION_ONLY_SHUFFLE [RS_47]
                          Group By Operator [GBY_46] (rows=1 width=8)
                            Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;],aggregations:[&lt;span class=&quot;code-quote&quot;&gt;&quot;count()&quot;&lt;/span&gt;]
                            Select Operator [SEL_45] (rows=1 width=85)
                              Group By Operator [GBY_44] (rows=1 width=85)
                                Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;],keys:KEY._col0
                              &amp;lt;-Map 2 [SIMPLE_EDGE] vectorized, llap
                                SHUFFLE [RS_43]
                                  PartitionCols:_col0
                                  Group By Operator [GBY_42] (rows=83 width=85)
                                    Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;],keys:&lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;
                                    Select Operator [SEL_41] (rows=1212121 width=105)
                                      Filter Operator [FIL_40] (rows=1212121 width=105)
                                        predicate:(p_type = &lt;span class=&quot;code-quote&quot;&gt;&apos;1&apos;&lt;/span&gt;)
                                        TableScan [TS_2] (rows=200000000 width=105)
                                          tpch_flat_orc_1000@part,part,Tbl:COMPLETE,Col:COMPLETE,Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;p_type&quot;&lt;/span&gt;]
              &amp;lt;-Select Operator [SEL_59] (rows=200000000 width=621)
                  Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;_col0&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col1&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col2&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col3&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col4&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col5&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col6&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col7&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;_col8&quot;&lt;/span&gt;]
                  TableScan [TS_0] (rows=200000000 width=621)
                    tpch_flat_orc_1000@part,part,Tbl:COMPLETE,Col:COMPLETE,Output:[&lt;span class=&quot;code-quote&quot;&gt;&quot;p_partkey&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_name&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_mfgr&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_brand&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_type&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_size&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_container&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_retailprice&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;p_comment&quot;&lt;/span&gt;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;del&gt;The other version without the filter is missing the check, though the compiler cannot assume the nDV of p_type.&lt;/del&gt; Fixed by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16851&quot; title=&quot;Scalar subquery with group by missing sq_count_check UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-16851&quot;&gt;&lt;del&gt;HIVE-16851&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;</description>
                <environment></environment>
        <key id="13076004">HIVE-16793</key>
            <summary>Scalar sub-query: sq_count_check not required if gby keys are constant</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vgarg">Vineet Garg</assignee>
                                    <reporter username="gopalv">Gopal Vijayaraghavan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 30 May 2017 22:28:46 +0000</created>
                <updated>Tue, 22 May 2018 23:58:22 +0000</updated>
                            <resolved>Thu, 13 Jul 2017 20:39:44 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>SQL</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16041853" author="vgarg" created="Wed, 7 Jun 2017 23:03:16 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-16851&quot; title=&quot;Scalar subquery with group by missing sq_count_check UDF&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-16851&quot;&gt;&lt;del&gt;HIVE-16851&lt;/del&gt;&lt;/a&gt; for query missing sq_count_check UDF&lt;/p&gt;</comment>
                            <comment id="16046931" author="gopalv" created="Mon, 12 Jun 2017 18:47:58 +0000"  >&lt;p&gt;Query 44 benefits from the constant folded group-by case.&lt;/p&gt;</comment>
                            <comment id="16054968" author="vgarg" created="Mon, 19 Jun 2017 23:59:04 +0000"  >&lt;p&gt;First patch adds a rule to remove sq_count_check branch if group by key is constant.&lt;br/&gt;
Known issues: This patch cause multiple joins for scalar subqueries to not merge anymore (since there is a project b/w them now)&lt;/p&gt;

&lt;p&gt;Changes could be viewed at: &lt;a href=&quot;https://github.com/apache/hive/compare/master...vineetgarg02:sq-count-check-groupby-constant-fold&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Github branch &lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16055379" author="hiveqa" created="Tue, 20 Jun 2017 08:48:13 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12873577/HIVE-16793.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12873577/HIVE-16793.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 20 failed/errored test(s), 10819 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[orc_ppd_basic] (batchId=140)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[subquery_select] (batchId=151)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[tez_smb_main] (batchId=149)
org.apache.hadoop.hive.cli.TestNegativeCliDriver.testCliDriver[subquery_scalar_multi_rows] (batchId=89)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query16] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query44] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query54] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query58] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query6] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query94] (batchId=232)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=103)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testBootstrapFunctionReplication (batchId=216)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionIncrementalReplication (batchId=216)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionWithFunctionBinaryJarsOnHDFS (batchId=216)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5685/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5685/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5685/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5685/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5685/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5685/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 20 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12873577 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16056678" author="ashutoshc" created="Tue, 20 Jun 2017 23:42:42 +0000"  >&lt;p&gt;Can you create a RB for this ?&lt;/p&gt;</comment>
                            <comment id="16056713" author="vgarg" created="Wed, 21 Jun 2017 00:16:11 +0000"  >&lt;p&gt;I am investigating test failures. Will create it as soon as I have fix for tests.&lt;/p&gt;</comment>
                            <comment id="16058396" author="vgarg" created="Wed, 21 Jun 2017 22:51:09 +0000"  >&lt;p&gt;Latest patch has two known issues:&lt;br/&gt;
1. Plans for scalar queries will not have merged joins (since introduction of project b/w them prevents merging). We plan to keep it as it is and will probably enhance join merge code in future.&lt;br/&gt;
2. Join ordering for some queries (query6, query54 and query58) has changed. I have verified that there is no regression so it is safe.&lt;/p&gt;</comment>
                            <comment id="16058689" author="hiveqa" created="Thu, 22 Jun 2017 03:53:53 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12873969/HIVE-16793.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12873969/HIVE-16793.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5725/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5725/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5725/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5725/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5725/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5725/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-06-22 03:53:47.754
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-5725/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-06-22 03:53:47.756
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 12005fd HIVE-16918 : Skip ReplCopyTask distcp for _metadata copying. Also enable -pb for distcp (Sushanth Sowmyan, reviewed by Thejas Nair, Anishek Agarwal)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 12005fd HIVE-16918 : Skip ReplCopyTask distcp for _metadata copying. Also enable -pb for distcp (Sushanth Sowmyan, reviewed by Thejas Nair, Anishek Agarwal)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-06-22 03:53:53.219
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/ql/src/java/org/apache/hadoop/hive/ql/optimizer/calcite/rules/HiveSubQueryRemoveRule.java: No such file or directory
error: a/ql/src/java/org/apache/hadoop/hive/ql/parse/CalcitePlanner.java: No such file or directory
error: a/ql/src/test/results/clientnegative/subquery_scalar_multi_rows.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/llap/subquery_scalar.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/llap/subquery_select.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query23.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query44.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query54.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query58.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query6.q.out: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12873969 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16062201" author="hiveqa" created="Sun, 25 Jun 2017 02:44:54 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12874396/HIVE-16793.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12874396/HIVE-16793.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5769/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5769/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5769/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5769/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5769/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5769/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-06-25 02:44:48.326
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-5769/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-06-25 02:44:48.329
+ cd apache-github-source-source
+ git fetch origin
+ git reset --hard HEAD
HEAD is now at 4ad4ceb HIVE-16934: Transform COUNT(x) into COUNT() when x is not nullable (Jesus Camacho Rodriguez, reviewed by Ashutosh Chauhan)
+ git clean -f -d
+ git checkout master
Already on &apos;master&apos;
Your branch is up-to-date with &apos;origin/master&apos;.
+ git reset --hard origin/master
HEAD is now at 4ad4ceb HIVE-16934: Transform COUNT(x) into COUNT() when x is not nullable (Jesus Camacho Rodriguez, reviewed by Ashutosh Chauhan)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-06-25 02:44:54.134
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/ql/src/java/org/apache/hadoop/hive/ql/optimizer/calcite/rules/HiveSubQueryRemoveRule.java: No such file or directory
error: a/ql/src/java/org/apache/hadoop/hive/ql/parse/CalcitePlanner.java: No such file or directory
error: a/ql/src/test/results/clientnegative/subquery_scalar_multi_rows.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/llap/subquery_scalar.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/llap/subquery_select.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query23.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query44.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query54.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query58.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query6.q.out: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12874396 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16063840" author="hiveqa" created="Mon, 26 Jun 2017 21:39:42 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12874525/HIVE-16793.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12874525/HIVE-16793.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 12 failed/errored test(s), 10832 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[materialized_view_create_rewrite] (batchId=238)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[tez_smb_main] (batchId=150)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query16] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query94] (batchId=233)
org.apache.hadoop.hive.cli.TestSparkCliDriver.org.apache.hadoop.hive.cli.TestSparkCliDriver (batchId=102)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testBootstrapFunctionReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionIncrementalReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionWithFunctionBinaryJarsOnHDFS (batchId=217)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5778/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5778/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5778/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5778/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5778/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5778/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 12 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12874525 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16065971" author="hiveqa" created="Wed, 28 Jun 2017 06:13:26 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12874751/HIVE-16793.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12874751/HIVE-16793.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 15 failed/errored test(s), 10850 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[create_merge_compressed] (batchId=238)
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver[subquery_notexists] (batchId=85)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[tez_smb_main] (batchId=150)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=146)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_2] (batchId=99)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query16] (batchId=233)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query94] (batchId=233)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testBootstrapFunctionReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionIncrementalReplication (batchId=217)
org.apache.hadoop.hive.ql.parse.TestReplicationScenariosAcrossInstances.testCreateFunctionWithFunctionBinaryJarsOnHDFS (batchId=217)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=178)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=178)
org.apache.hive.jdbc.TestJdbcWithMiniHS2.testHttpRetryOnServerIdleTimeout (batchId=227)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5799/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5799/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5799/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5799/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5799/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5799/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 15 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12874751 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16067191" author="vgarg" created="Wed, 28 Jun 2017 20:46:28 +0000"  >&lt;p&gt;Interestingly I am not able to reproduce any test failure locally.&lt;/p&gt;</comment>
                            <comment id="16084727" author="vgarg" created="Wed, 12 Jul 2017 21:27:52 +0000"  >&lt;p&gt;Latest patch adds a config param &lt;tt&gt;hive.optimize.remove.sq_count_check&lt;/tt&gt; to enable this optimization. Since this optimization caters to a very specific case but could have adverse effects (join reordering, joins not merging) we have decided to disable this optimization by default&lt;/p&gt;</comment>
                            <comment id="16084760" author="gopalv" created="Wed, 12 Jul 2017 21:42:56 +0000"  >&lt;p&gt;Does enabling this optimization remove the cross-products triggered by the scalar sub-query?&lt;/p&gt;</comment>
                            <comment id="16084770" author="vgarg" created="Wed, 12 Jul 2017 21:48:14 +0000"  >&lt;p&gt;It does if gby keys are constant&lt;/p&gt;</comment>
                            <comment id="16084918" author="hiveqa" created="Wed, 12 Jul 2017 23:46:57 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12876952/HIVE-16793.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12876952/HIVE-16793.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to build exiting with an error&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5991/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5991/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5991/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5991/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5991/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5991/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hiveptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-07-12 23:46:50.471
+ [[ -n /usr/lib/jvm/java-8-openjdk-amd64 ]]
+ export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64
+ export PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin/:/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;MAVEN_OPTS=-Xmx1g &apos;
+ MAVEN_OPTS=&apos;-Xmx1g &apos;
+ cd /data/hiveptest/working/
+ tee /data/hiveptest/logs/PreCommit-HIVE-Build-5991/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ git = \s\v\n ]]
+ [[ git = \g\i\t ]]
+ [[ -z master ]]
+ [[ -d apache-github-source-source ]]
+ [[ ! -d apache-github-source-source/.git ]]
+ [[ ! -d apache-github-source-source ]]
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-07-12 23:46:50.474
+ cd apache-github-source-source
+ git fetch origin
From https://github.com/apache/hive
   353781c..6af30bf  master     -&amp;gt; origin/master
+ git reset --hard HEAD
HEAD is now at 353781c HIVE-17079: LLAP: Use FQDN by default for work submission (Prasanth Jayachandran reviewed by Gopal V)
+ git clean -f -d
Removing ql/src/java/org/apache/hadoop/hive/ql/io/orc/RecordReaderAdaptor.java
Removing ql/src/test/queries/clientpositive/llap_acid_fast.q
Removing ql/src/test/results/clientpositive/llap/llap_acid.q.out
Removing ql/src/test/results/clientpositive/llap/llap_acid_fast.q.out
Removing ql/src/test/results/clientpositive/llap_acid_fast.q.out
+ git checkout master
Already on &apos;master&apos;
Your branch is behind &apos;origin/master&apos; by 1 commit, and can be fast-forwarded.
  (use &quot;git pull&quot; to update your local branch)
+ git reset --hard origin/master
HEAD is now at 6af30bf HIVE-16832 duplicate ROW__ID possible in multi insert into transactional table (Eugene Koifman, reviewed by Gopal V)
+ git merge --ff-only origin/master
Already up-to-date.
+ date &apos;+%Y-%m-%d %T.%3N&apos;
2017-07-12 23:46:56.393
+ patchCommandPath=/data/hiveptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hiveptest/working/scratch/build.patch
+ [[ -f /data/hiveptest/working/scratch/build.patch ]]
+ chmod +x /data/hiveptest/working/scratch/smart-apply-patch.sh
+ /data/hiveptest/working/scratch/smart-apply-patch.sh /data/hiveptest/working/scratch/build.patch
error: a/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java: No such file or directory
error: a/ql/src/java/org/apache/hadoop/hive/ql/optimizer/calcite/rules/HiveSubQueryRemoveRule.java: No such file or directory
error: a/ql/src/java/org/apache/hadoop/hive/ql/parse/CalcitePlanner.java: No such file or directory
error: a/ql/src/test/queries/clientpositive/subquery_scalar.q: No such file or directory
error: a/ql/src/test/results/clientpositive/llap/subquery_scalar.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query14.q.out: No such file or directory
error: a/ql/src/test/results/clientpositive/perf/query23.q.out: No such file or directory
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12876952 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16085036" author="hiveqa" created="Thu, 13 Jul 2017 01:51:52 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12876977/HIVE-16793.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12876977/HIVE-16793.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 9 failed/errored test(s), 10876 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[insert_overwrite_local_directory_1] (batchId=237)
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver[llap_smb] (batchId=143)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=145)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query14] (batchId=232)
org.apache.hadoop.hive.cli.TestPerfCliDriver.testCliDriver[query23] (batchId=232)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testPartitionSpecRegistrationWithCustomSchema (batchId=177)
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation (batchId=177)
org.apache.hive.minikdc.TestJdbcNonKrbSASLWithMiniKdc.org.apache.hive.minikdc.TestJdbcNonKrbSASLWithMiniKdc (batchId=238)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5993/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5993/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5993/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5993/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5993/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5993/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 9 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12876977 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16086336" author="ashutoshc" created="Thu, 13 Jul 2017 20:22:33 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16086361" author="vgarg" created="Thu, 13 Jul 2017 20:39:21 +0000"  >&lt;p&gt;Pushed to master. Thanks Ashutosh!&lt;/p&gt;</comment>
                            <comment id="16086379" author="vgarg" created="Thu, 13 Jul 2017 20:49:10 +0000"  >&lt;p&gt;Documented this new configuration under &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.optimize.remove.sq_count_check&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Wiki &lt;/a&gt; cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16088801" author="lefty@hortonworks.com" created="Sun, 16 Jul 2017 03:59:07 +0000"  >&lt;p&gt;Thanks for the doc, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgarg&quot; class=&quot;user-hover&quot; rel=&quot;vgarg&quot;&gt;vgarg&lt;/a&gt; &amp;#8211; it looks good.&lt;/p&gt;

&lt;p&gt;Question:  Should sq_count_check be documented along with the other UDFs, or is it for internal use only?  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-15544&quot; title=&quot;Support scalar subqueries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-15544&quot;&gt;&lt;del&gt;HIVE-15544&lt;/del&gt;&lt;/a&gt; introduced it, so if sq_count_check needs to be documented we should update the doc note there.&lt;/p&gt;</comment>
                            <comment id="16090184" author="vgarg" created="Mon, 17 Jul 2017 18:01:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; &lt;tt&gt;sq_count_check&lt;/tt&gt; is for internal use only, so it doesn&apos;t need to be documented.&lt;/p&gt;</comment>
                            <comment id="16091063" author="lefty@hortonworks.com" created="Tue, 18 Jul 2017 03:51:15 +0000"  >&lt;p&gt;Okay, thanks Vineet.&lt;/p&gt;</comment>
                            <comment id="16485943" author="vgarg" created="Tue, 22 May 2018 23:58:22 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13032155">HIVE-15544</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13060191">HIVE-16330</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13079292">HIVE-16885</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13078160">HIVE-16851</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12873577" name="HIVE-16793.1.patch" size="61146" author="vgarg" created="Mon, 19 Jun 2017 23:54:49 +0000"/>
                            <attachment id="12873969" name="HIVE-16793.2.patch" size="301248" author="vgarg" created="Wed, 21 Jun 2017 22:49:01 +0000"/>
                            <attachment id="12874525" name="HIVE-16793.3.patch" size="279949" author="vgarg" created="Mon, 26 Jun 2017 17:48:03 +0000"/>
                            <attachment id="12874751" name="HIVE-16793.4.patch" size="486120" author="vgarg" created="Tue, 27 Jun 2017 21:20:21 +0000"/>
                            <attachment id="12876952" name="HIVE-16793.5.patch" size="60148" author="vgarg" created="Wed, 12 Jul 2017 21:26:20 +0000"/>
                            <attachment id="12876977" name="HIVE-16793.6.patch" size="59309" author="vgarg" created="Wed, 12 Jul 2017 23:50:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fnwn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>