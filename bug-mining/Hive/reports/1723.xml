<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:13:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5441] Async query execution doesn&apos;t return resultset status</title>
                <link>https://issues.apache.org/jira/browse/HIVE-5441</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;For synchronous statement execution (SQL as well as metadata and other), the operation handle includes a boolean flag indicating whether the statement returns a resultset. In case of async execution, that&apos;s always set to false.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12672300">HIVE-5441</key>
            <summary>Async query execution doesn&apos;t return resultset status</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="prasadm">Prasad Suresh Mujumdar</assignee>
                                    <reporter username="prasadm">Prasad Suresh Mujumdar</reporter>
                        <labels>
                    </labels>
                <created>Fri, 4 Oct 2013 07:56:04 +0000</created>
                <updated>Mon, 6 Jan 2014 20:31:50 +0000</updated>
                            <resolved>Mon, 6 Jan 2014 20:31:50 +0000</resolved>
                                    <version>0.12.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13785983" author="prasadm" created="Fri, 4 Oct 2013 08:02:54 +0000"  >&lt;p&gt;Review request on &lt;a href=&quot;https://reviews.apache.org/r/14486/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/14486/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13795578" author="vgumashta" created="Tue, 15 Oct 2013 20:11:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt; You might wanna link: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4321&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HIVE-4321&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4923&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;HIVE-4923&lt;/a&gt;. Thanks!&lt;/p&gt;</comment>
                            <comment id="13795607" author="vgumashta" created="Tue, 15 Oct 2013 20:41:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt; I may be wrong, but from what I see in this patch, this splits execute into compile and run. I am not able to connect it with: &quot;Async query execution doesn&apos;t return resultset status&quot;. Could I be missing something? Thanks!&lt;/p&gt;</comment>
                            <comment id="13796370" author="prasadm" created="Wed, 16 Oct 2013 03:25:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vaibhavgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vaibhavgumashta&quot;&gt;vaibhavgumashta&lt;/a&gt; That&apos;s correct. The availability of result is determined by looking at fetchtask of the plan (with an exception of explain). Hence the patch is doing a synchronous compilation and async execution. &lt;/p&gt;</comment>
                            <comment id="13796456" author="vgumashta" created="Wed, 16 Oct 2013 05:53:53 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt;! &lt;/p&gt;

&lt;p&gt;+1 from me (non-binding).&lt;/p&gt;</comment>
                            <comment id="13796738" author="brocknoland" created="Wed, 16 Oct 2013 12:48:04 +0000"  >&lt;p&gt;Should this jira be marked PA?&lt;/p&gt;</comment>
                            <comment id="13796826" author="prasadm" created="Wed, 16 Oct 2013 14:22:38 +0000"  >&lt;p&gt;This on top of &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5440&quot; title=&quot;HiveServer2 doesn&amp;#39;t apply SQL operation&amp;#39;s config property &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5440&quot;&gt;&lt;del&gt;HIVE-5440&lt;/del&gt;&lt;/a&gt; patch which is not committed yet.&lt;/p&gt;</comment>
                            <comment id="13796877" author="vgumashta" created="Wed, 16 Oct 2013 15:16:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt; I think it will also be useful (another jira maybe) to add a COMPILING OperationState and let the compilation go on asynchronously. &lt;/p&gt;</comment>
                            <comment id="13797379" author="prasadm" created="Wed, 16 Oct 2013 22:39:10 +0000"  >&lt;p&gt;I did consider that, but wan&apos;t convinced that it would be useful in context of this patch. The next step could be to expose the compilation via new message (eg Prepare() ) which can be used for both sync and async execution and add COMPILING as a new state. This would be helpful when porting existing JDBC or ODBC applications originally developed for relational databases.&lt;/p&gt;</comment>
                            <comment id="13797387" author="vgumashta" created="Wed, 16 Oct 2013 22:53:51 +0000"  >&lt;p&gt;Makes sense. Let me create another jira for that. Thanks!&lt;/p&gt;</comment>
                            <comment id="13801097" author="vgumashta" created="Mon, 21 Oct 2013 21:23:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt; Another query: so I&apos;m guessing that after compilation, in the use case you pointed to, you&apos;re planning to use the presence of fetch task in the plan (like here: &lt;a href=&quot;https://github.com/apache/hive/blob/trunk/service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java#L110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/blob/trunk/service/src/java/org/apache/hive/service/cli/operation/SQLOperation.java#L110&lt;/a&gt;) to determine if it will generate a result set before the query is run, and not set TOperationHandle#hasResultSet to true?&lt;/p&gt;</comment>
                            <comment id="13802645" author="prasadm" created="Wed, 23 Oct 2013 06:40:29 +0000"  >&lt;p&gt;That&apos;s correct. The existing logic for checking fetch task is not changed as part of this patch.&lt;/p&gt;</comment>
                            <comment id="13804879" author="vgumashta" created="Fri, 25 Oct 2013 00:56:29 +0000"  >&lt;p&gt;cc &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; It will be good to get this in if there are no more concerns. Thanks!&lt;/p&gt;</comment>
                            <comment id="13804880" author="vgumashta" created="Fri, 25 Oct 2013 00:58:32 +0000"  >&lt;p&gt;Linking the async JDBC jira&lt;/p&gt;</comment>
                            <comment id="13805788" author="thejas" created="Fri, 25 Oct 2013 22:59:05 +0000"  >&lt;p&gt;The patch does not apply cleanly on trunk. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt; Can you please rebase ?&lt;/p&gt;</comment>
                            <comment id="13805809" author="thejas" created="Fri, 25 Oct 2013 23:17:08 +0000"  >&lt;p&gt;I have also added a comment to &lt;a href=&quot;https://reviews.apache.org/r/14486/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/14486/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13815458" author="prasadm" created="Wed, 6 Nov 2013 23:51:18 +0000"  >&lt;p&gt;Rebased and addressed review feedback.&lt;/p&gt;</comment>
                            <comment id="13816438" author="thejas" created="Thu, 7 Nov 2013 21:18:27 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13836643" author="brocknoland" created="Mon, 2 Dec 2013 16:14:43 +0000"  >&lt;p&gt;After seeing Thejas +1, I committed this...then realized tests has not run. I am going to kick off tests manually and verify.&lt;/p&gt;</comment>
                            <comment id="13836737" author="brocknoland" created="Mon, 2 Dec 2013 18:01:13 +0000"  >&lt;p&gt;Tests passed so I won&apos;t revert this. Thank you for the contribution Prasad and review Thejas!&lt;/p&gt;</comment>
                            <comment id="13836825" author="hiveqa" created="Mon, 2 Dec 2013 19:36:44 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12612478/HIVE-5441.4.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12612478/HIVE-5441.4.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/486/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/486/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/486/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/486/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n &apos;&apos; ]]
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-486/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;jdbc/src/java/org/apache/hive/jdbc/HiveConnection.java&apos;
Reverted &apos;service/src/java/org/apache/hive/service/auth/HiveAuthFactory.java&apos;
++ awk &apos;{print $2}&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/assembly/target shims/0.20S/target shims/0.23/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/storage-handlers/hbase/target hcatalog/server-extensions/target hcatalog/core/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target
+ svn update

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
External at revision 1547163.

At revision 1547163.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12612478&lt;/p&gt;</comment>
                            <comment id="13863370" author="vgumashta" created="Mon, 6 Jan 2014 20:26:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=prasadm&quot; class=&quot;user-hover&quot; rel=&quot;prasadm&quot;&gt;prasadm&lt;/a&gt; I think this slipped out of sight. Since it has already been +1-ed, I think we can get this in.&lt;/p&gt;</comment>
                            <comment id="13863372" author="thejas" created="Mon, 6 Jan 2014 20:31:50 +0000"  >&lt;p&gt;This has already been committed, marking as fixed.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12667191">HIVE-5232</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12674214">HIVE-5571</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12672297">HIVE-5440</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12649545">HIVE-4617</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12606754" name="HIVE-5441.1.patch" size="7104" author="prasadm" created="Fri, 4 Oct 2013 07:58:38 +0000"/>
                            <attachment id="12607213" name="HIVE-5441.3.patch" size="7554" author="prasadm" created="Mon, 7 Oct 2013 18:51:37 +0000"/>
                            <attachment id="12612478" name="HIVE-5441.4.patch" size="8422" author="prasadm" created="Wed, 6 Nov 2013 23:51:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 46 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1oodz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>352214</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>