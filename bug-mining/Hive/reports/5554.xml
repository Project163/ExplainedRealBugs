<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:54:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-16324] Truncate table should not work when EXTERNAL property of table is true</title>
                <link>https://issues.apache.org/jira/browse/HIVE-16324</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Currently if you create an external table using the command &lt;tt&gt;CREATE EXTERNAL TABLE table_name&lt;/tt&gt; the &lt;tt&gt;TRUNCATE table table_name&lt;/tt&gt; command fails as expected because only managed tables should be allowed to be truncated.&lt;/p&gt;

&lt;p&gt;But if you set the external property of a previously managed table using &lt;tt&gt;ALTER TABLE table_name SET TBLPROPERTIES(&apos;EXTERNAL&apos;=&apos;true&apos;)&lt;/tt&gt;, truncate table command does not object and deletes all the data from the external table.&lt;/p&gt;

&lt;p&gt;Eg: This works but it should not ..&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;0: jdbc:hive2://localhost:10000/default&amp;gt; create table test_ext2 (col1 string);
No rows affected (0.424 seconds)
0: jdbc:hive2://localhost:10000/default&amp;gt; alter table test_ext2 set tblproperties (&apos;EXTERNAL&apos;=&apos;true&apos;);
No rows affected (0.149 seconds)
0: jdbc:hive2://localhost:10000/default&amp;gt; insert into table test_ext2 values (&quot;test&quot;);
WARNING: Hive-on-MR is deprecated in Hive 2 and may not be available in the future versions. Consider using a different execution engine (i.e. spark, tez) or using Hive 1.X releases.
No rows affected (3.447 seconds)
0: jdbc:hive2://localhost:10000/default&amp;gt;
0: jdbc:hive2://localhost:10000/default&amp;gt;
0: jdbc:hive2://localhost:10000/default&amp;gt; select * from test_ext2;
+-----------------+
| test_ext2.col1  |
+-----------------+
| test            |
+-----------------+
1 row selected (0.147 seconds)
0: jdbc:hive2://localhost:10000/default&amp;gt; truncate table test_ext2;
No rows affected (0.138 seconds)
0: jdbc:hive2://localhost:10000/default&amp;gt; select * from test_ext2;
+-----------------+
| test_ext2.col1  |
+-----------------+
+-----------------+
No rows selected (0.134 seconds)
0: jdbc:hive2://localhost:10000/default&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13059892">HIVE-16324</key>
            <summary>Truncate table should not work when EXTERNAL property of table is true</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vihangk1">Vihang Karajgaonkar</assignee>
                                    <reporter username="vihangk1">Vihang Karajgaonkar</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Mar 2017 01:15:38 +0000</created>
                <updated>Sun, 29 Jun 2025 19:26:43 +0000</updated>
                            <resolved>Mon, 15 May 2017 20:14:17 +0000</resolved>
                                                    <fixVersion>2.4.0</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16001522" author="vihangk1" created="Mon, 8 May 2017 21:00:09 +0000"  >&lt;p&gt;Looks like the issue was happening because the parameter value is case sensitive. So if I try using &lt;tt&gt;&apos;EXTERNAL&apos;=&apos;TRUE&apos;&lt;/tt&gt; then it works as expected but doesn&apos;t work with the parameter value set to &quot;true&quot;. Looks like it is by design. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; Do you think its a good idea to make it case insensitive? If not, I can close this JIRA.&lt;/p&gt;</comment>
                            <comment id="16004095" author="ashutoshc" created="Wed, 10 May 2017 05:28:52 +0000"  >&lt;p&gt;Sql is suppose to be case insensitive, so current behavior I think is buggy and should be correct. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; Any comments?&lt;/p&gt;</comment>
                            <comment id="16004110" author="thejas" created="Wed, 10 May 2017 05:42:34 +0000"  >&lt;p&gt;I agree case insensitive comparison for &quot;true&quot; makes sense.&lt;br/&gt;
I assume that is what we do for string to boolean conversion as well. Is that right &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; ?&lt;/p&gt;
</comment>
                            <comment id="16004936" author="vihangk1" created="Wed, 10 May 2017 16:21:06 +0000"  >&lt;p&gt;This is what I see in &lt;tt&gt;Objectstore.java&lt;/tt&gt;. It uses case sensitive String comparison instead of Boolean comparison.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tableType == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
      &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; backwards compatibility with old metastore persistence
&lt;/span&gt;      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mtbl.getViewOriginalText() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        tableType = TableType.VIRTUAL_VIEW.toString();
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-quote&quot;&gt;&quot;TRUE&quot;&lt;/span&gt;.equals(mtbl.getParameters().get(&lt;span class=&quot;code-quote&quot;&gt;&quot;EXTERNAL&quot;&lt;/span&gt;))) {
        tableType = TableType.EXTERNAL_TABLE.toString();
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        tableType = TableType.MANAGED_TABLE.toString();
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16005126" author="thejas" created="Wed, 10 May 2017 18:07:27 +0000"  >&lt;p&gt;Yes, looks like using Boolean.valueOf(mtbl.getParameters().get(&quot;EXTERNAL&quot;)) would be more appropriate.&lt;/p&gt;</comment>
                            <comment id="16005143" author="vihangk1" created="Wed, 10 May 2017 18:14:20 +0000"  >&lt;p&gt;Thanks for the confirmation. Let me provide a patch for this issue then.&lt;/p&gt;</comment>
                            <comment id="16008120" author="hiveqa" created="Fri, 12 May 2017 13:28:06 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12867683/HIVE-16324.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12867683/HIVE-16324.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 2 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 3 failed/errored test(s), 10689 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=144)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainanalyze_3] (batchId=97)
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver[explainuser_3] (batchId=97)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5220/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5220/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/5220/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/5220/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-5220/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-5220/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 3 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12867683 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="16008403" author="vihangk1" created="Fri, 12 May 2017 17:07:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ctang.ma&quot; class=&quot;user-hover&quot; rel=&quot;ctang.ma&quot;&gt;ctang.ma&lt;/a&gt; Can you please review? Thanks!&lt;/p&gt;</comment>
                            <comment id="16008425" author="thejas" created="Fri, 12 May 2017 17:25:39 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16010975" author="vihangk1" created="Mon, 15 May 2017 17:44:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; Can you please commit this patch?&lt;/p&gt;</comment>
                            <comment id="16011248" author="aihuaxu" created="Mon, 15 May 2017 20:14:17 +0000"  >&lt;p&gt;Pushed to master. Thanks Vihang for the work and Thejas for reviewing.&lt;/p&gt;</comment>
                            <comment id="16014466" author="vihangk1" created="Wed, 17 May 2017 17:35:36 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=aihuaxu&quot; class=&quot;user-hover&quot; rel=&quot;aihuaxu&quot;&gt;aihuaxu&lt;/a&gt; Can we commit this in branch-2 as well? Let me know if you need a branch-2 patch. Thanks!&lt;/p&gt;</comment>
                            <comment id="16014472" author="vihangk1" created="Wed, 17 May 2017 17:38:27 +0000"  >&lt;p&gt;Updated the wiki &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL&lt;/a&gt; as well.&lt;/p&gt;</comment>
                            <comment id="16015166" author="lefty@hortonworks.com" created="Thu, 18 May 2017 04:05:00 +0000"  >&lt;p&gt;Thanks for the doc, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vihangk1&quot; class=&quot;user-hover&quot; rel=&quot;vihangk1&quot;&gt;vihangk1&lt;/a&gt;.  Here&apos;s a more direct link:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-listTableProperties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;DDL &amp;#8211; TBLPROPERTIES clause &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="16015836" author="aihuaxu" created="Thu, 18 May 2017 14:30:48 +0000"  >&lt;p&gt;Pushed to branch-2 as well.&lt;/p&gt;</comment>
                            <comment id="16485866" author="vgarg" created="Tue, 22 May 2018 23:58:00 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13622087">HIVE-29054</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13153896">HIVE-19253</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12867683" name="HIVE-16324.01.patch" size="6322" author="vihangk1" created="Fri, 12 May 2017 00:09:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cx5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>