<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:54:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-16413] Create table as select does not check ownership of the location</title>
                <link>https://issues.apache.org/jira/browse/HIVE-16413</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;1. following statement failed: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;create table foo(id &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) location &lt;span class=&quot;code-quote&quot;&gt;&apos;hdfs:&lt;span class=&quot;code-comment&quot;&gt;///tmp/foo&apos;&lt;/span&gt;;
&lt;/span&gt;Error: Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; compiling statement: FAILED: HiveAccessControlException Permission denied: Principal [name=userx, type=USER] does not have following privileges &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; operation CREATETABLE [[OBJECT OWNERSHIP] on &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; [type=DFS_URI, name=hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hacluster/tmp/foo]] (state=42000,code=40000)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2. but when use create table as select, it successed:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//189.39.151.44:21066/&amp;gt; create table foo location &lt;span class=&quot;code-quote&quot;&gt;&apos;hdfs:///tmp/foo&apos;&lt;/span&gt; as select * from xxx2;
&lt;/span&gt;INFO  : &lt;span class=&quot;code-object&quot;&gt;Number&lt;/span&gt; of reduce tasks is set to 0 since there&apos;s no reduce &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt;
INFO  : number of splits:1
INFO  : Submitting tokens &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; job: job_1491449632882_0094
INFO  : Kind: HDFS_DELEGATION_TOKEN, Service: ha-hdfs:hacluster
INFO  : The url to track the job: https:&lt;span class=&quot;code-comment&quot;&gt;//189-39-151-44:26001/proxy/application_1491449632882_0094/
&lt;/span&gt;INFO  : Starting Job = job_1491449632882_0094, Tracking URL = https:&lt;span class=&quot;code-comment&quot;&gt;//189-39-151-44:26001/proxy/application_1491449632882_0094/
&lt;/span&gt;INFO  : Kill Command = /opt/hive-1.3.0/bin/..&lt;span class=&quot;code-comment&quot;&gt;//../hadoop/bin/hadoop job  -kill job_1491449632882_0094
&lt;/span&gt;INFO  : Hadoop job information &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; Stage-1: number of mappers: 1; number of reducers: 0
INFO  : 2017-04-10 09:44:49,185 Stage-1 map = 0%,  reduce = 0%
INFO  : 2017-04-10 09:44:57,202 Stage-1 map = 100%,  reduce = 0%, Cumulative CPU 1.98 sec
INFO  : MapReduce Total cumulative CPU time: 1 seconds 980 msec
INFO  : Ended Job = job_1491449632882_0094
INFO  : Stage-3 is selected by condition resolver.
INFO  : Stage-2 is filtered out by condition resolver.
INFO  : Stage-4 is filtered out by condition resolver.
INFO  : Moving data to directory hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hacluster/user/hive/warehouse/.hive-staging_hive_2017-04-10_09-44-32_462_4902211653847168915-1/-ext-10001 from hdfs://hacluster/user/hive/warehouse/.hive-staging_hive_2017-04-10_09-44-32_462_4902211653847168915-1/-ext-10003
&lt;/span&gt;INFO  : Moving data to directory hdfs:/tmp/foo from hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hacluster/user/hive/warehouse/.hive-staging_hive_2017-04-10_09-44-32_462_4902211653847168915-1/-ext-10001
&lt;/span&gt;No rows affected (26.969 seconds)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;3. and the table location is hdfs://hacluster/tmp/foo  :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//189.39.151.44:21066/&amp;gt; desc formatted foo;
&lt;/span&gt;+-------------------------------+-------------------------------------------------------+-----------------------+--+
|           col_name            |                       data_type                       |        comment        |
+-------------------------------+-------------------------------------------------------+-----------------------+--+
| # col_name                    | data_type                                             | comment               |
|                               | NULL                                                  | NULL                  |
| id                            | &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;                                                   |                       |
|                               | NULL                                                  | NULL                  |
| # Detailed Table Information  | NULL                                                  | NULL                  |
| Database:                     | &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;                                               | NULL                  |
| Owner:                        | userx                                                 | NULL                  |
| CreateTime:                   | Mon Apr 10 09:44:59 CST 2017                          | NULL                  |
| LastAccessTime:               | UNKNOWN                                               | NULL                  |
| Protect Mode:                 | None                                                  | NULL                  |
| Retention:                    | 0                                                     | NULL                  |
| Location:                     | hdfs:&lt;span class=&quot;code-comment&quot;&gt;//hacluster/tmp/foo                              | NULL                  |
&lt;/span&gt;| Table Type:                   | MANAGED_TABLE                                         | NULL                  |
| Table Parameters:             | NULL                                                  | NULL                  |
|                               | COLUMN_STATS_ACCURATE                                 | &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;                 |
|                               | numFiles                                              | 1                     |
|                               | numRows                                               | -1                    |
|                               | rawDataSize                                           | -1                    |
|                               | totalSize                                             | 56                    |
|                               | transient_lastDdlTime                                 | 1491788699            |
|                               | NULL                                                  | NULL                  |
| # Storage Information         | NULL                                                  | NULL                  |
| SerDe Library:                | org.apache.hadoop.hive.serde2.columnar.ColumnarSerDe  | NULL                  |
| InputFormat:                  | org.apache.hadoop.hive.ql.io.RCFileInputFormat        | NULL                  |
| OutputFormat:                 | org.apache.hadoop.hive.ql.io.RCFileOutputFormat       | NULL                  |
| Compressed:                   | No                                                    | NULL                  |
| Num Buckets:                  | -1                                                    | NULL                  |
| Bucket Columns:               | []                                                    | NULL                  |
| Sort Columns:                 | []                                                    | NULL                  |
| Storage Desc Params:          | NULL                                                  | NULL                  |
|                               | serialization.format                                  | 1                     |
+-------------------------------+-------------------------------------------------------+-----------------------+--+
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;hive-1.2.2, with following conf:&lt;br/&gt;
hive.security.authorization.enabled: true&lt;br/&gt;
hive.security.authorization.manager: org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdHiveAuthorizerFactory&lt;br/&gt;
hive.security.authenticator.manager: org.apache.hadoop.hive.ql.security.SessionStateUserAuthenticator&lt;/p&gt;</environment>
        <key id="13062795">HIVE-16413</key>
            <summary>Create table as select does not check ownership of the location</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="niklaus.xiao">Niklaus Xiao</assignee>
                                    <reporter username="niklaus.xiao">Niklaus Xiao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 10 Apr 2017 06:48:52 +0000</created>
                <updated>Tue, 22 May 2018 23:59:10 +0000</updated>
                            <resolved>Tue, 16 May 2017 06:52:07 +0000</resolved>
                                    <version>1.2.2</version>
                    <version>1.3.0</version>
                    <version>2.1.1</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.4.0</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>Authorization</component>
                    <component>SQLStandardAuthorization</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15962619" author="hiveqa" created="Mon, 10 Apr 2017 09:12:12 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12862650/HIVE-16413.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12862650/HIVE-16413.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to no test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 10561 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[drop_with_concurrency] (batchId=234)
org.apache.hadoop.hive.cli.TestBeeLineDriver.testCliDriver[escape_comments] (batchId=234)
org.apache.hadoop.hive.cli.TestMiniLlapLocalCliDriver.testCliDriver[vector_if_expr] (batchId=143)
org.apache.hive.jdbc.TestJdbcDriver2.testResultSetMetaData (batchId=221)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4627/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4627/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/4627/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/4627/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://104.198.109.242/logs/PreCommit-HIVE-Build-4627/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://104.198.109.242/logs/PreCommit-HIVE-Build-4627/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12862650 - PreCommit-HIVE-Build&lt;/p&gt;</comment>
                            <comment id="15978509" author="kgyrtkirk" created="Fri, 21 Apr 2017 10:58:06 +0000"  >&lt;p&gt;good catch &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=niklaus.xiao&quot; class=&quot;user-hover&quot; rel=&quot;niklaus.xiao&quot;&gt;niklaus.xiao&lt;/a&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I wanted to test your patch...and I&apos;ve written some qtest to check it &lt;a href=&quot;https://hastebin.com/iceyumunat.diff&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://hastebin.com/iceyumunat.diff&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16010060" author="kgyrtkirk" created="Mon, 15 May 2017 07:11:29 +0000"  >&lt;p&gt;+1 lgtm; I&apos;ll add the test as a followup&lt;/p&gt;</comment>
                            <comment id="16011843" author="kgyrtkirk" created="Tue, 16 May 2017 06:52:07 +0000"  >&lt;p&gt;pushed to master, thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=niklaus.xiao&quot; class=&quot;user-hover&quot; rel=&quot;niklaus.xiao&quot;&gt;niklaus.xiao&lt;/a&gt; for taking care of this!&lt;/p&gt;</comment>
                            <comment id="16023655" author="thejas" created="Wed, 24 May 2017 20:44:52 +0000"  >&lt;p&gt;Also committed to branch-2 and branch-1&lt;/p&gt;</comment>
                            <comment id="16486113" author="vgarg" created="Tue, 22 May 2018 23:59:10 +0000"  >&lt;p&gt;Hive 3.0.0 has been released so closing this jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13072328">HIVE-16673</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12862650" name="HIVE-16413.patch" size="935" author="niklaus.xiao" created="Mon, 10 Apr 2017 07:00:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 26 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3df2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>