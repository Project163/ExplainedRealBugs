<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:27:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-29180] SonarQube reports issues unrelated to changes in the pull request</title>
                <link>https://issues.apache.org/jira/browse/HIVE-29180</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;SonarQube runs on every pull request and performs static code analysis notifying contributors and reviewers about potential issues in the code.&lt;/p&gt;

&lt;p&gt;Lately, SonarQube started reporting way too many issues that are clearly unrelated to the changes in the pull request and this seems to affect every new PR that is submitted on GitHub.&lt;/p&gt;

&lt;p&gt;One such example can be seen in:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/hive/pull/6049#issuecomment-3237772048&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/pull/6049#issuecomment-3237772048&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The problem was first reported in the dev list:&lt;br/&gt;
&lt;a href=&quot;https://lists.apache.org/thread/m36fc3dldd23nj8mncdjmzx33k87flm5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/m36fc3dldd23nj8mncdjmzx33k87flm5&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13628081">HIVE-29180</key>
            <summary>SonarQube reports issues unrelated to changes in the pull request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zabetak">Stamatis Zampetakis</assignee>
                                    <reporter username="zabetak">Stamatis Zampetakis</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Thu, 4 Sep 2025 07:35:24 +0000</created>
                <updated>Mon, 8 Sep 2025 12:03:13 +0000</updated>
                            <resolved>Mon, 8 Sep 2025 12:03:13 +0000</resolved>
                                                    <fixVersion>4.2.0</fixVersion>
                                    <component>Build Infrastructure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="18018052" author="zabetak" created="Thu, 4 Sep 2025 07:51:15 +0000"  >&lt;p&gt;The Jenkins logs contain various suspicious warnings during the Sonar execution. One that seems particularly worrisome is the following:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[2025-09-03T13:29:27.390Z] [INFO] SCM collecting changed files in the branch
[2025-09-03T13:29:27.390Z] [WARNING] Could not find ref: master in refs/heads, refs/remotes/upstream or refs/remotes/origin
[2025-09-03T13:29:27.390Z] [INFO] SCM collecting changed files in the branch (done) | time=11ms
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="18018084" author="zabetak" created="Thu, 4 Sep 2025 10:55:16 +0000"  >&lt;p&gt;The warning above is a red herring. The actual issue it that the last succesful &lt;a href=&quot;https://sonarcloud.io/summary/new_code?id=apache_hive&amp;amp;branch=master&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;analysis of the master branch&lt;/a&gt; was 23 days ago.  The last commit in master that was analyzed correctly is &lt;a href=&quot;https://github.com/apache/hive/commit/5410b7338cacf7f31612a7c475f0cf5fa2e9c6bd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/5410b7338cacf7f31612a7c475f0cf5fa2e9c6bd&lt;/a&gt;. The SonarQube analysis failed on every CI run after that due to OOM and timeouts. The runs started failing right after upgrading the Sonar plugin that is performing the analysis in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-29129&quot; title=&quot;Upgrade Sonar Maven Plugin&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-29129&quot;&gt;&lt;del&gt;HIVE-29129&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;All CI runs from 2639 and 2658 failed due to Sonar:&lt;br/&gt;
&lt;a href=&quot;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2639/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2639/pipeline&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2658/pipeline&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2658/pipeline&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18018093" author="zabetak" created="Thu, 4 Sep 2025 11:23:05 +0000"  >&lt;p&gt;Most of the failures seem to be related to memory pressure so I increased the heap size to 8GB for the SonarQube analysis step and started a new run on master to test if it passes: &lt;a href=&quot;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2659/pipeline/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2659/pipeline/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18018180" author="zabetak" created="Thu, 4 Sep 2025 17:58:56 +0000"  >&lt;p&gt;Even after increasing the heap to 11GB  (&lt;a href=&quot;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2660/pipeline/370/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/blue/organizations/jenkins/hive-precommit/detail/master/2660/pipeline/370/&lt;/a&gt;) the Sonar analysis still fails so need to debug more into this to see what is causing the issue.&lt;/p&gt;</comment>
                            <comment id="18018310" author="zabetak" created="Fri, 5 Sep 2025 07:30:40 +0000"  >&lt;p&gt;I run the Sonar analysis locally and published the new scan for the master branch (&lt;a href=&quot;https://sonarcloud.io/summary/new_code?id=apache_hive&amp;amp;branch=master&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sonarcloud.io/summary/new_code?id=apache_hive&amp;amp;branch=master&lt;/a&gt;) a few minutes ago. This should mitigate the problem till new commits start landing on master. I haven&apos;t reproduced the problem locally so still not sure why it fails with OOM on CI, I will keep looking.&lt;/p&gt;</comment>
                            <comment id="18018390" author="zabetak" created="Fri, 5 Sep 2025 13:40:52 +0000"  >&lt;p&gt;Turns out that the SonarScanner agent is running on a separate JVM so setting the heapsize in MAVEN_OPTS has no effect. After setting the correct environment variable (SONAR_SCANNER_JAVA_OPTS=-Xmx8g) the analysis finishes successfully. The change was tested on &lt;a href=&quot;https://ci.hive.apache.org/job/hive-precommit/job/master/2662/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci.hive.apache.org/job/hive-precommit/job/master/2662/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18018811" author="zabetak" created="Mon, 8 Sep 2025 12:03:13 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://github.com/apache/hive/commit/97a9677f6ca5561eceab0b6bb5fa14b6c9818803&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/commit/97a9677f6ca5561eceab0b6bb5fa14b6c9818803&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13625956">HIVE-29129</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13078231" name="sonarqube-bad-report.png" size="41643" author="zabetak" created="Thu, 4 Sep 2025 07:39:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xjts:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>