<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:17:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-6721] Streaming ingest needs to be able to send many heartbeats together</title>
                <link>https://issues.apache.org/jira/browse/HIVE-6721</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The heartbeat method added to HiveMetaStoreClient is intended for SQL operations where the user will have one transaction and a hand full of locks.  But in the streaming ingest case the client opens a batch of transactions together.  In this case we need a way for the client to send a heartbeat for this batch of transactions rather than being forced to send the heartbeats one at a time.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12702940">HIVE-6721</key>
            <summary>Streaming ingest needs to be able to send many heartbeats together</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gates">Alan Gates</assignee>
                                    <reporter username="gates">Alan Gates</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Mar 2014 18:31:03 +0000</created>
                <updated>Tue, 1 Oct 2019 22:07:10 +0000</updated>
                            <resolved>Sun, 30 Mar 2014 18:41:04 +0000</resolved>
                                    <version>0.13.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                    <component>Locking</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13943352" author="alangates" created="Fri, 21 Mar 2014 18:31:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rhbutani&quot; class=&quot;user-hover&quot; rel=&quot;rhbutani&quot;&gt;rhbutani&lt;/a&gt; This should go into 0.13 as well, as &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5687&quot; title=&quot;Streaming support in Hive&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5687&quot;&gt;&lt;del&gt;HIVE-5687&lt;/del&gt;&lt;/a&gt; will depend on it.&lt;/p&gt;</comment>
                            <comment id="13951605" author="alangates" created="Fri, 28 Mar 2014 23:52:25 +0000"  >&lt;p&gt;This patch adds a call to allow a range of heartbeats to be sent together.  This way the streaming client can send a range for all open transactions.  If a transaction is aborted or missing that is in the range it is reported back to the caller, but the valid transactions still have a heartbeat recorded.  The caller must determine if it is acceptable for those transactions to be missing or aborted.&lt;/p&gt;

&lt;p&gt;Review board posted: &lt;a href=&quot;https://reviews.apache.org/r/19812/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/19812/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13951613" author="ashutoshc" created="Fri, 28 Mar 2014 23:56:28 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13951633" author="rhbutani" created="Sat, 29 Mar 2014 00:11:44 +0000"  >&lt;p&gt;+1 for 0.13&lt;/p&gt;</comment>
                            <comment id="13951742" author="hiveqa" created="Sat, 29 Mar 2014 03:54:03 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12637576/HIVE-6721.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12637576/HIVE-6721.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2025/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2025/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2025/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2025/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Tests exited with: NonZeroExitCodeException
Command &apos;bash /data/hive-ptest/working/scratch/source-prep.sh&apos; failed with exit status 1 and output &apos;+ [[ -n &apos;&apos; ]]
+ export &apos;ANT_OPTS=-Xmx1g -XX:MaxPermSize=256m &apos;
+ ANT_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m &apos;
+ export &apos;M2_OPTS=-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ M2_OPTS=&apos;-Xmx1g -XX:MaxPermSize=256m -Dhttp.proxyHost=localhost -Dhttp.proxyPort=3128&apos;
+ cd /data/hive-ptest/working/
+ tee /data/hive-ptest/logs/PreCommit-HIVE-Build-2025/source-prep.txt
+ [[ false == \t\r\u\e ]]
+ mkdir -p maven ivy
+ [[ svn = \s\v\n ]]
+ [[ -n &apos;&apos; ]]
+ [[ -d apache-svn-trunk-source ]]
+ [[ ! -d apache-svn-trunk-source/.svn ]]
+ [[ ! -d apache-svn-trunk-source ]]
+ cd apache-svn-trunk-source
+ svn revert -R .
Reverted &apos;metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&apos;
Reverted &apos;metastore/src/gen/thrift/gen-javabean/org/apache/hadoop/hive/metastore/api/hive_metastoreConstants.java&apos;
Reverted &apos;serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/primitive/JavaHiveVarcharObjectInspector.java&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_ppr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_part7.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/pcr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join33.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_part2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/alter_partition_coltype.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/load_dyn_part8.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_map_ppr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_sort_6.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/push_or.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/stats13.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/combine2_hadoop20.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/groupby_map_ppr_multi_distinct.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/filter_join_breaktask.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sort_merge_join_desc_5.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_part9.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join26.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin_negative.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join_map_ppr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join9.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/smb_mapjoin_11.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sample1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/rand_partitionpruner3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/merge3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sort_merge_join_desc_7.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin9.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/union22.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join32.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input_part1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/columnstats_partlvl.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/auto_sortmerge_join_3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sample8.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/transform_ppr2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/union_ppr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ppd_vc.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/dynamic_partition_skip_default.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/stats12.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/router_join_ppr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input42.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sample10.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/louter_join_ppr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/rand_partitionpruner2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucket3.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/sort_merge_join_desc_6.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin8.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/annotate_stats_part.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/smb_mapjoin_12.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/metadataonly1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/join32_lessSize.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/outer_join_ppr.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/bucketmapjoin_negative2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/auto_sortmerge_join_2.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/transform_ppr1.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/ppd_union_view.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/stats11.q.out&apos;
Reverted &apos;ql/src/test/results/clientpositive/input23.q.out&apos;
Reverted &apos;ql/src/test/org/apache/hadoop/hive/ql/exec/vector/TestVectorizedRowBatchCtx.java&apos;
Reverted &apos;ql/src/test/queries/clientpositive/alter_partition_coltype.q&apos;
Reverted &apos;ql/src/test/queries/clientpositive/pcr.q&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/FetchOperator.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/vector/VectorGroupByOperator.java&apos;
Reverted &apos;ql/src/java/org/apache/hadoop/hive/ql/exec/vector/VectorizedRowBatchCtx.java&apos;
++ egrep -v &apos;^X|^Performing status on external&apos;
++ awk &apos;{print $2}&apos;
++ svn status --no-ignore
+ rm -rf target datanucleus.log ant/target shims/target shims/0.20/target shims/0.20S/target shims/0.23/target shims/aggregator/target shims/common/target shims/common-secure/target packaging/target hbase-handler/target testutils/target jdbc/target metastore/target itests/target itests/hcatalog-unit/target itests/test-serde/target itests/qtest/target itests/hive-unit/target itests/custom-serde/target itests/util/target hcatalog/target hcatalog/storage-handlers/hbase/target hcatalog/server-extensions/target hcatalog/core/target hcatalog/webhcat/svr/target hcatalog/webhcat/java-client/target hcatalog/hcatalog-pig-adapter/target hwi/target common/target common/src/gen service/target contrib/target serde/target beeline/target odbc/target cli/target ql/dependency-reduced-pom.xml ql/target ql/src/test/results/clientpositive/vectorized_non_string_part.q.out ql/src/test/results/clientpositive/input23.q.out.orig ql/src/test/queries/clientpositive/vectorized_non_string_part.q
+ svn update

Fetching external item into &apos;hcatalog/src/test/e2e/harness&apos;
External at revision 1582949.

At revision 1582949.
+ patchCommandPath=/data/hive-ptest/working/scratch/smart-apply-patch.sh
+ patchFilePath=/data/hive-ptest/working/scratch/build.patch
+ [[ -f /data/hive-ptest/working/scratch/build.patch ]]
+ chmod +x /data/hive-ptest/working/scratch/smart-apply-patch.sh
+ /data/hive-ptest/working/scratch/smart-apply-patch.sh /data/hive-ptest/working/scratch/build.patch
The patch does not appear to apply with p0, p1, or p2
+ exit 1
&apos;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12637576&lt;/p&gt;</comment>
                            <comment id="13954336" author="alangates" created="Sat, 29 Mar 2014 17:00:00 +0000"  >&lt;p&gt;Ok, I&apos;m not sure how to proceed here.  All the merge failures are in the generated code.  I don&apos;t know how to make thrift generate code that will merge properly.  If the committer applies the src-only patch and re-runs the thrift generation all should work.  Please let me know how to proceed.&lt;/p&gt;</comment>
                            <comment id="13954356" author="thejas" created="Sat, 29 Mar 2014 17:37:50 +0000"  >&lt;p&gt;Alan, I suspect the merge failures are because of commits with thrift changes that went in yesterday. The patches with generated code usually applies fine in my experience. Can you try regenerating the patch on latest trunk ? I think it might just work.&lt;/p&gt;</comment>
                            <comment id="13954359" author="appodictic" created="Sat, 29 Mar 2014 17:43:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gates&quot; class=&quot;user-hover&quot; rel=&quot;gates&quot;&gt;gates&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;One trick I notice about thrift is you should always add structs at the end. If you insert structs in the middle it tends to chance some internal numbering and make more noise then it should when mergin the generated code.&lt;/p&gt;</comment>
                            <comment id="13954366" author="alangates" created="Sat, 29 Mar 2014 17:59:03 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=appodictic&quot; class=&quot;user-hover&quot; rel=&quot;appodictic&quot;&gt;appodictic&lt;/a&gt;.  Re-running the thrift generation myself and rebuilding the patch as Thejas proposed seemed to do it.&lt;/p&gt;</comment>
                            <comment id="13954367" author="alangates" created="Sat, 29 Mar 2014 18:00:10 +0000"  >&lt;p&gt;Canceling and resubmitting patch to get test run.&lt;/p&gt;</comment>
                            <comment id="13954511" author="hiveqa" created="Sat, 29 Mar 2014 23:36:17 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12637659/HIVE-6721.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12637659/HIVE-6721.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 5505 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2035/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2035/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2035/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bigtop01.cloudera.org:8080/job/PreCommit-HIVE-Build/2035/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12637659&lt;/p&gt;</comment>
                            <comment id="13954788" author="ashutoshc" created="Sun, 30 Mar 2014 18:41:04 +0000"  >&lt;p&gt;Committed to trunk &amp;amp; 0.13. Thanks, Alan!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12676510">HIVE-5687</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12637659" name="HIVE-6721.patch" size="575602" author="gates" created="Sat, 29 Mar 2014 17:59:03 +0000"/>
                            <attachment id="12637576" name="HIVE-6721.patch" size="619404" author="gates" created="Fri, 28 Mar 2014 23:48:35 +0000"/>
                            <attachment id="12637575" name="HIVE-6721.src-only.patch" size="10911" author="gates" created="Fri, 28 Mar 2014 23:48:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tovr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>