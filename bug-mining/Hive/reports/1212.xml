<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:06:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4105] Hive MapJoinOperator unnecessarily deserializes values for all join-keys</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4105</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;We can avoid this for inner-joins. Hive does an explicit value de-serialization up front so even for those rows which won&apos;t emit output. In these cases, we can do just with key de-serialization.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12634927">HIVE-4105</key>
            <summary>Hive MapJoinOperator unnecessarily deserializes values for all join-keys</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vinodkv">Vinod Kumar Vavilapalli</assignee>
                                    <reporter username="vinodkv">Vinod Kumar Vavilapalli</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Mar 2013 23:15:15 +0000</created>
                <updated>Thu, 16 May 2013 21:10:54 +0000</updated>
                            <resolved>Tue, 16 Apr 2013 14:29:13 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13591090" author="vinodkv" created="Fri, 1 Mar 2013 23:32:47 +0000"  >&lt;p&gt;Here&apos;s a patch to avoid value de-serialization where not needed in case of inner join.&lt;/p&gt;

&lt;p&gt;In my microbenchmark, where I was map-joining a big table, with a small table, this brought the task execution time down from 15seconds to 10seconds on about 3 million records on the big table, the second table being very small and the output is small too. Note that you won&apos;t see this much of an improvement for non-selective inner joins.&lt;/p&gt;

&lt;p&gt;If folks are interested, I&apos;ll try productionizing the benchmark.&lt;/p&gt;</comment>
                            <comment id="13591120" author="vinodkv" created="Fri, 1 Mar 2013 23:59:34 +0000"  >&lt;p&gt;Patch upmerged to the latest trunk.&lt;/p&gt;</comment>
                            <comment id="13592974" author="vikram.dixit" created="Tue, 5 Mar 2013 02:30:00 +0000"  >&lt;p&gt;Hey Vinod,&lt;/p&gt;

&lt;p&gt;You are missing the piece of code required for outer joins. Near the if (!noOuterJoin), I recommend that you keep the previous code and set the jionNeeded flag to true when noOuterJoin = false.&lt;/p&gt;

&lt;p&gt;Basically:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;            if (!noOuterJoin) {
              joinNeeded = true;
              storage[pos] = dummyObjVectors[pos];
            } else {
              storage[pos] = emptyList;
            }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13622665" author="ashutoshc" created="Thu, 4 Apr 2013 19:04:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vinodkv&quot; class=&quot;user-hover&quot; rel=&quot;vinodkv&quot;&gt;vinodkv&lt;/a&gt; If this patch is still relevant. Can you respond to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; comments and update the patch as appropriate?&lt;/p&gt;</comment>
                            <comment id="13626918" author="vinodkv" created="Tue, 9 Apr 2013 18:27:55 +0000"  >&lt;p&gt;Latest patch addressing Vikram&apos;s comments.&lt;/p&gt;

&lt;p&gt;Created review board request at &lt;a href=&quot;https://reviews.apache.org/r/10323/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/10323/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13628004" author="ashutoshc" created="Wed, 10 Apr 2013 17:20:33 +0000"  >&lt;p&gt;A comment on RB.&lt;/p&gt;</comment>
                            <comment id="13631972" author="vinodkv" created="Mon, 15 Apr 2013 18:20:30 +0000"  >&lt;p&gt;Yes, the clearing of the row should happen independent of row-generation. Attaching updated patch addressing the review comment.&lt;/p&gt;</comment>
                            <comment id="13632012" author="ashutoshc" created="Mon, 15 Apr 2013 18:44:57 +0000"  >&lt;p&gt;+1 will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13632873" author="ashutoshc" created="Tue, 16 Apr 2013 14:29:13 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Vinod!&lt;/p&gt;</comment>
                            <comment id="13633061" author="hudson" created="Tue, 16 Apr 2013 17:41:17 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #162 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/162/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/162/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4105&quot; title=&quot;Hive MapJoinOperator unnecessarily deserializes values for all join-keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4105&quot;&gt;&lt;del&gt;HIVE-4105&lt;/del&gt;&lt;/a&gt; : Hive MapJoinOperator unnecessarily deserializes values for all join-keys (Vinod KV via Ashutosh Chauhan) (Revision 1468433)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1468433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1468433&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapJoinOperator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13633660" author="hudson" created="Wed, 17 Apr 2013 01:28:43 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2067 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2067/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2067/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4105&quot; title=&quot;Hive MapJoinOperator unnecessarily deserializes values for all join-keys&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4105&quot;&gt;&lt;del&gt;HIVE-4105&lt;/del&gt;&lt;/a&gt; : Hive MapJoinOperator unnecessarily deserializes values for all join-keys (Vinod KV via Ashutosh Chauhan) (Revision 1468433)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1468433&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1468433&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapJoinOperator.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12571685" name="HIVE-4105-20130301.1.txt" size="2311" author="vinodkv" created="Fri, 1 Mar 2013 23:59:34 +0000"/>
                            <attachment id="12571679" name="HIVE-4105-20130301.txt" size="2391" author="vinodkv" created="Fri, 1 Mar 2013 23:32:47 +0000"/>
                            <attachment id="12578766" name="HIVE-4105-20130415.txt" size="2027" author="vinodkv" created="Mon, 15 Apr 2013 18:20:30 +0000"/>
                            <attachment id="12577849" name="HIVE-4105.patch" size="2173" author="vinodkv" created="Tue, 9 Apr 2013 18:27:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 32 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ifgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315764</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>