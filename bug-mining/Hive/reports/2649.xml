<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:24:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8270] JDBC uber jar is missing some classes required in secure setup.</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8270</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;JDBC uber jar is missing some required classes for a secure setup.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12744243">HIVE-8270</key>
            <summary>JDBC uber jar is missing some classes required in secure setup.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vgumashta">Vaibhav Gumashta</assignee>
                                    <reporter username="vgumashta">Vaibhav Gumashta</reporter>
                        <labels>
                            <label>TODOC14</label>
                    </labels>
                <created>Fri, 26 Sep 2014 09:32:15 +0000</created>
                <updated>Thu, 13 Nov 2014 19:40:57 +0000</updated>
                            <resolved>Tue, 30 Sep 2014 04:23:46 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>0.14.0</fixVersion>
                                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14150180" author="gopalv" created="Fri, 26 Sep 2014 23:20:38 +0000"  >&lt;p&gt;Looks like minimizeJar is removing the classes accessed by reflection. like Shims?&lt;/p&gt;</comment>
                            <comment id="14150192" author="vgumashta" created="Fri, 26 Sep 2014 23:25:55 +0000"  >&lt;p&gt;Yup, exactly that. Might have to test a little more with different combinations too: secure/unsecure; http/tcp; with &amp;amp; w/o ZK etc&lt;/p&gt;</comment>
                            <comment id="14150470" author="damien.carol" created="Sat, 27 Sep 2014 07:02:57 +0000"  >&lt;p&gt;One more issue, the uber jar embedded jetty classes. This breaks jar loading in J2EE envirronement.&lt;br/&gt;
For exemple, Tomcat don&apos;t load the uber jar because of Servlet classes defined in jetty lib.&lt;br/&gt;
We should check that jetty lib is not in the uber jar.&lt;/p&gt;</comment>
                            <comment id="14150829" author="vgumashta" created="Sun, 28 Sep 2014 00:30:17 +0000"  >&lt;p&gt;Split this into 2 as there are 2 diff issues here: size &amp;amp; missing classes. I have a fix for missing classes for Hive 14; size can be taken up in Hive 15 I guess.&lt;/p&gt;
</comment>
                            <comment id="14150855" author="vgumashta" created="Sun, 28 Sep 2014 01:34:05 +0000"  >&lt;p&gt;Also reduces size to 15MB now (from 28MB).&lt;/p&gt;</comment>
                            <comment id="14150894" author="deepesh" created="Sun, 28 Sep 2014 02:43:29 +0000"  >&lt;p&gt;+1&lt;br/&gt;
New size looks acceptable.&lt;br/&gt;
Were you able to test the different HiveServer2 combinations?&lt;/p&gt;</comment>
                            <comment id="14151083" author="hiveqa" created="Sun, 28 Sep 2014 11:31:28 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12671677/HIVE-8270.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12671677/HIVE-8270.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 6360 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1026/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1026/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1026/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/1026/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1026/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-1026/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12671677&lt;/p&gt;</comment>
                            <comment id="14151154" author="thejas" created="Sun, 28 Sep 2014 17:39:42 +0000"  >&lt;p&gt;I assume the uber jar is expected to be used only with a remote HS2 (not HS2 embedded mode). We should clarify this in docs.&lt;/p&gt;</comment>
                            <comment id="14151962" author="ashutoshc" created="Mon, 29 Sep 2014 17:59:58 +0000"  >&lt;p&gt;LGTM +1&lt;br/&gt;
As Thejas pointed out, we should clarify in doc that this is meant for remote HS2, not for embedded one.&lt;/p&gt;</comment>
                            <comment id="14152260" author="vgumashta" created="Mon, 29 Sep 2014 20:48:49 +0000"  >&lt;p&gt;Sure, I&apos;ll add the notes to the doc.&lt;/p&gt;</comment>
                            <comment id="14152779" author="ashutoshc" created="Tue, 30 Sep 2014 04:23:46 +0000"  >&lt;p&gt;Committed to trunk. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt; It will be good to have this in 0.14 as well.&lt;/p&gt;</comment>
                            <comment id="14153344" author="vikram.dixit" created="Tue, 30 Sep 2014 16:22:18 +0000"  >&lt;p&gt;+1 for 0.14.&lt;/p&gt;</comment>
                            <comment id="14153358" author="ashutoshc" created="Tue, 30 Sep 2014 16:29:31 +0000"  >&lt;p&gt;Committed to 0.14&lt;/p&gt;</comment>
                            <comment id="14163546" author="damien.carol" created="Wed, 8 Oct 2014 14:29:45 +0000"  >&lt;p&gt;There still have a bug in Tomcat.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;INFO: validateJarFile(/usr/share/apache-tomcat-7.0.50/webapps/SmartDataDev/WEB-INF/lib/hive-jdbc-0.14.0-SNAPSHOT-standalone.jar) - jar not loaded. See Servlet Spec 3.0, section 10.7.2. Offending class: javax/servlet/Servlet.class
Oct 08, 2014 4:13:02 PM org.apache.catalina.startup.HostConfig deployWAR
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After few tests, I see many javax.* and javax.jdo.* classes in the ubber jar. It&apos;s a real problem.&lt;br/&gt;
Avoiding the classes in javax.* namespace will reduce heavily the size of the jar.&lt;/p&gt;

&lt;p&gt;I think the JDBC standalone jar is poor quality currently. It is unusable in J2EE environment.&lt;/p&gt;

&lt;p&gt;Also why embedded JDO classes ? &lt;/p&gt;</comment>
                            <comment id="14163741" author="ashutoshc" created="Wed, 8 Oct 2014 16:44:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=damien.carol&quot; class=&quot;user-hover&quot; rel=&quot;damien.carol&quot;&gt;damien.carol&lt;/a&gt; Now that we have settled on the question that this jar is not meant to be used for HS2 embedded mode, (as discussed on this jira). I agree javax.* and jdo classes are baggage. We should explore possibility to excluding those. Feel free to open a new jira and attach a patch (if you have worked out something).&lt;/p&gt;</comment>
                            <comment id="14164949" author="damien.carol" created="Thu, 9 Oct 2014 09:23:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; I&apos;m working on shading it. If I succeed, I will create a new JIRA.&lt;/p&gt;</comment>
                            <comment id="14204170" author="lefty@hortonworks.com" created="Sun, 9 Nov 2014 23:00:03 +0000"  >&lt;p&gt;Doc done?  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vgumashta&quot; class=&quot;user-hover&quot; rel=&quot;vgumashta&quot;&gt;vgumashta&lt;/a&gt;, can we remove the TODOC14 label now?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;... clarify in doc that this is meant for remote HS2, not for embedded one.&lt;/p&gt;&lt;/blockquote&gt;</comment>
                            <comment id="14210461" author="thejas" created="Thu, 13 Nov 2014 19:40:57 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12744520">HIVE-8286</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12744242">HIVE-8269</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12427046">HIVE-538</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12742889">HIVE-8200</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12671677" name="HIVE-8270.1.patch" size="3962" author="vgumashta" created="Sun, 28 Sep 2014 01:34:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20ijr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>