<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:55:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-1275] TestHBaseCliDriver hangs</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1275</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TestHBaseCliDriver hangs after running hbase_joins.q&lt;/p&gt;

&lt;p&gt;This can be reproduced by running&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant test -Dtestcase=TestHBaseCliDriver
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12460142">HIVE-1275</key>
            <summary>TestHBaseCliDriver hangs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jvs">John Sichi</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Mar 2010 17:55:07 +0000</created>
                <updated>Sat, 17 Dec 2011 00:03:52 +0000</updated>
                            <resolved>Thu, 25 Mar 2010 22:37:23 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.6.0</fixVersion>
                                    <component>HBase Handler</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12849323" author="jvs" created="Wed, 24 Mar 2010 18:08:35 +0000"  >&lt;p&gt;Paul, can you reproduce it and attach a jstack here?&lt;/p&gt;</comment>
                            <comment id="12849371" author="pauly" created="Wed, 24 Mar 2010 19:27:37 +0000"  >&lt;p&gt;Output from test log: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    [junit] diff -a -I file: -I /tmp/ -I invalidscheme: -I lastUpdateTime -I lastAccessTime -\
I owner -I transient_lastDdlTime -I java.lang.RuntimeException -I at org -I at sun -I at java\
 -I at junit -I Caused by: -I [.][.][.] [0-9]* more /data/users/pyang/task2/trunk/VENDOR.hive\
/trunk/build/hbase-handler/test/logs/hbase-handler/hbase_joins.q.out /data/users/pyang/task2/\
trunk/VENDOR.hive/trunk/hbase-handler/src/test/results/hbase_joins.q.out
    [junit] Done query: hbase_joins.q
    [junit] Running org.apache.hadoop.hive.cli.TestHBaseCliDriver
    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec
    [junit] Test org.apache.hadoop.hive.cli.TestHBaseCliDriver FAILED (timeout)
    [junit] Running org.apache.hadoop.hive.hbase.TestHBaseSerDe
    [junit] Tests run: 1, Failures: 0, Errors: 0, Time elapsed: 0.365 sec
    [junit] Running org.apache.hadoop.hive.hbase.TestLazyHBaseObject
    [junit] Tests run: 4, Failures: 0, Errors: 0, Time elapsed: 0.393 sec

BUILD FAILED
/data/users/pyang/task2/trunk/VENDOR.hive/trunk/build.xml:164: The following error occurred w\
hile executing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line:
/data/users/pyang/task2/trunk/VENDOR.hive/trunk/build.xml:103: The following error occurred w\
hile executing &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; line:
/data/users/pyang/task2/trunk/VENDOR.hive/trunk/build-common.xml:427: Tests failed!

Total time: 351 minutes 19 seconds

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12849381" author="jvs" created="Wed, 24 Mar 2010 19:49:11 +0000"  >&lt;p&gt;It&apos;s hanging on startup, after it fails to connect to the new master, and then tries to shut it down.&lt;/p&gt;

&lt;p&gt;Can you see if you have any old Java processes lying around on the server, and if so, kill -9 them?&lt;/p&gt;

&lt;p&gt;A few times during development, I ran into such situations where an old failed process was hanging around tying up the port.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to find a way to &lt;/p&gt;

&lt;p&gt;(a) make it fail fast in such a case&lt;/p&gt;

&lt;p&gt;(b) randomize the port number used&lt;/p&gt;

&lt;p&gt;(c) provide some find/cleanup utilities for old processes; not sure if we would want to automate this&lt;/p&gt;</comment>
                            <comment id="12849415" author="namit" created="Wed, 24 Mar 2010 20:41:20 +0000"  >&lt;p&gt;It hanged for me again - can we disable the test while we are figuring out what to do ?&lt;/p&gt;</comment>
                            <comment id="12849420" author="jvs" created="Wed, 24 Mar 2010 20:43:44 +0000"  >&lt;p&gt;Will do.&lt;/p&gt;</comment>
                            <comment id="12849427" author="pauly" created="Wed, 24 Mar 2010 20:50:24 +0000"  >&lt;p&gt;I also tried using a fresh dev server running CentOS. Fresh checkout from the open source, but I&apos;m still getting the hanging behavior. + no other java processes. I&apos;lll attach jstack&apos;s from this run as well.&lt;/p&gt;</comment>
                            <comment id="12849440" author="jvs" created="Wed, 24 Mar 2010 21:10:14 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1279&quot; title=&quot;temporarily disable HBase test execution&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1279&quot;&gt;&lt;del&gt;HIVE-1279&lt;/del&gt;&lt;/a&gt; for disablement; let&apos;s keep &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-1275&quot; title=&quot;TestHBaseCliDriver hangs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-1275&quot;&gt;&lt;del&gt;HIVE-1275&lt;/del&gt;&lt;/a&gt; open for permanent resolution.&lt;/p&gt;</comment>
                            <comment id="12849465" author="jvs" created="Wed, 24 Mar 2010 21:43:55 +0000"  >&lt;p&gt;I see...it has to do with running two different HBase .q testcases in the same process, due to the shutdown/restart sequence.  I&apos;m not sure why that passed for me before (and for Namit when running the pre-commit tests); those passes must have been a timing-based fluke.&lt;/p&gt;

&lt;p&gt;I&apos;ll see if I can arrange for a single minicluster fixture to be used across multiple testcases.&lt;/p&gt;</comment>
                            <comment id="12849579" author="jvs" created="Thu, 25 Mar 2010 02:48:11 +0000"  >&lt;p&gt;This fixes the problem and re-enables the tests.&lt;/p&gt;

&lt;p&gt;I used JUnit3&apos;s TestSetup extension for creating a fixture which spans testcases, allowing us to avoid bouncing HBase+Zookeeper in between each testcase.&lt;/p&gt;</comment>
                            <comment id="12849909" author="namit" created="Thu, 25 Mar 2010 21:29:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;

&lt;p&gt;will commit if the tests pass&lt;/p&gt;</comment>
                            <comment id="12849933" author="namit" created="Thu, 25 Mar 2010 22:37:23 +0000"  >&lt;p&gt;Committed. Thanks John&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12439749" name="HIVE-1275.1.patch" size="10816" author="jvs" created="Thu, 25 Mar 2010 02:48:11 +0000"/>
                            <attachment id="12439699" name="jstack.centos.1" size="10143" author="pauly" created="Wed, 24 Mar 2010 20:51:23 +0000"/>
                            <attachment id="12439700" name="jstack.centos.2" size="64281" author="pauly" created="Wed, 24 Mar 2010 20:51:23 +0000"/>
                            <attachment id="12439687" name="jstack1" size="9578" author="pauly" created="Wed, 24 Mar 2010 19:27:57 +0000"/>
                            <attachment id="12439688" name="jstack2" size="64280" author="pauly" created="Wed, 24 Mar 2010 19:27:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73000</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0le9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>