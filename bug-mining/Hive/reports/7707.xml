<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:17:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-24021] Read insert-only tables truncated by Impala correctly</title>
                <link>https://issues.apache.org/jira/browse/HIVE-24021</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Impala truncates insert-only tables by writing a base directory containing an empty file named &quot;_empty&quot;. (Like Hive should, see &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-20137&quot; title=&quot;Truncate for Transactional tables should use base_x&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-20137&quot;&gt;&lt;del&gt;HIVE-20137&lt;/del&gt;&lt;/a&gt;) Generally in Hive a file name beginning with an underscore connotes a temporary file that isn&apos;t supposed to be read by operations that didn&apos;t create it.&lt;br/&gt;
 Before &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-23495&quot; title=&quot;AcidUtils.getAcidState cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-23495&quot;&gt;&lt;del&gt;HIVE-23495&lt;/del&gt;&lt;/a&gt;, getAcidState listed each directory in the table (HdfsUtils#listLocatedStatus) &#8211; and filtered out directories with names beginning with an underscore or period as they are presumably temporary. This allowed files called &quot;_empty&quot; to be read, since hive checked the directory name and not the file name.&lt;br/&gt;
 After &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-23495&quot; title=&quot;AcidUtils.getAcidState cleanup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-23495&quot;&gt;&lt;del&gt;HIVE-23495&lt;/del&gt;&lt;/a&gt;, we recursively list each file in the table (AcidUtils#getHdfsDirSnapshots) with a filter that doesn&apos;t accept files with names beginning with an underscore or period as they are presumably temporary. As a result Hive reads the table data as if the truncate operation had not happened.&lt;/p&gt;

&lt;p&gt;Since performance in getAcidState is important, probably the best solution is make an exception in the filter and accept files with the name &quot;_empty&quot;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13321775">HIVE-24021</key>
            <summary>Read insert-only tables truncated by Impala correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="klcopp">Karen Coppage</assignee>
                                    <reporter username="klcopp">Karen Coppage</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Mon, 10 Aug 2020 11:18:44 +0000</created>
                <updated>Tue, 11 Aug 2020 11:52:54 +0000</updated>
                            <resolved>Tue, 11 Aug 2020 11:34:53 +0000</resolved>
                                                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="5400">1.5h</timespent>
                                <comments>
                            <comment id="17175479" author="klcopp" created="Tue, 11 Aug 2020 11:34:53 +0000"  >&lt;p&gt;Discussed with Impala devs, they&apos;re willing to drop the underscore from the file name.&lt;/p&gt;</comment>
                            <comment id="17175494" author="klcopp" created="Tue, 11 Aug 2020 11:52:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-24023&quot; title=&quot;Hive parquet reader can&amp;#39;t read files with length=0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-24023&quot;&gt;&lt;del&gt;HIVE-24023&lt;/del&gt;&lt;/a&gt; is also required for reading Impala-truncated insert-only parquet tables.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0hm20:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>