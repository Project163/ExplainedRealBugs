<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:08:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3926] PPD on virtual column of partitioned table is not working</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3926</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from src where BLOCK__OFFSET__INSIDE__FILE&amp;lt;100;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is working, but&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;select * from srcpart where BLOCK__OFFSET__INSIDE__FILE&amp;lt;100;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;throws SemanticException. Disabling PPD makes it work.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12628718">HIVE-3926</key>
            <summary>PPD on virtual column of partitioned table is not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="navis">Navis Ryu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jan 2013 14:32:34 +0000</created>
                <updated>Tue, 15 Oct 2013 23:31:17 +0000</updated>
                            <resolved>Thu, 8 Aug 2013 04:24:13 +0000</resolved>
                                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13560406" author="navis" created="Wed, 23 Jan 2013 05:37:28 +0000"  >&lt;p&gt;I&apos;ve found this patch overlaps partly with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3833&quot; title=&quot;object inspectors should be initialized based on partition metadata&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3833&quot;&gt;&lt;del&gt;HIVE-3833&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13560408" author="phabricator@reviews.facebook.net" created="Wed, 23 Jan 2013 05:38:12 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1969 PPD on virtual column of partitioned table is not working&lt;/p&gt;

&lt;p&gt;  select * from src where BLOCK_&lt;em&gt;OFFSET&lt;/em&gt;&lt;em&gt;INSIDE&lt;/em&gt;_FILE&amp;lt;100;&lt;/p&gt;

&lt;p&gt;  is working, but&lt;/p&gt;

&lt;p&gt;  select * from srcpart where BLOCK_&lt;em&gt;OFFSET&lt;/em&gt;&lt;em&gt;INSIDE&lt;/em&gt;_FILE&amp;lt;100;&lt;/p&gt;

&lt;p&gt;  throws SemanticException. Disabling PPD makes it work.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SortedMergeBucketMapJoinOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppd_vc.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ppd_vc.q.out&lt;br/&gt;
  serde/src/java/org/apache/hadoop/hive/serde2/objectinspector/ObjectInspectorFactory.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/19569/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/19569/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13578131" author="phabricator@reviews.facebook.net" created="Thu, 14 Feb 2013 04:00:11 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121?vs=26067&amp;amp;id=27717#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121?vs=26067&amp;amp;id=27717#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketMapJoinOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/SortedMergeBucketMapJoinOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppd_vc.q&lt;br/&gt;
  ql/src/test/results/clientpositive/bucketmapjoin1.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/ppd_vc.q.out&lt;br/&gt;
  ql/src/test/results/clientpositive/stats11.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13578132" author="navis" created="Thu, 14 Feb 2013 04:00:33 +0000"  >&lt;p&gt;This issue also resolves single sourced multi scan with virtual columns. For example, the query&lt;br/&gt;
&amp;lt;code&amp;gt;&lt;br/&gt;
SELECT a.INPUT_&lt;em&gt;FILE&lt;/em&gt;&lt;em&gt;NAME,a.key,a.value,b.INPUT&lt;/em&gt;&lt;em&gt;FILE&lt;/em&gt;_NAME,b.key,b.value FROM myinput1 a LEFT OUTER JOIN myinput1 b RIGHT OUTER JOIN myinput1 c ON a.value = b.value and b.value = c.value AND a.key &amp;gt; 40 AND a.value &amp;gt; 50 AND a.key = a.value AND b.key &amp;gt; 40 AND b.value &amp;gt; 50 AND b.key = b.value AND c.key &amp;gt; 40 AND c.value &amp;gt; 50 AND c.key = c.value;&lt;br/&gt;
&amp;lt;code&amp;gt;&lt;/p&gt;

&lt;p&gt;is not working in trunk, throwing &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.ClassCastException: org.apache.hadoop.hive.serde2.lazy.LazyStruct cannot be &lt;span class=&quot;code-keyword&quot;&gt;cast&lt;/span&gt; to [Ljava.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;
	at org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector.getStructFieldData(UnionStructObjectInspector.java:123)
	at org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector.getStructFieldData(UnionStructObjectInspector.java:131)
	at org.apache.hadoop.hive.ql.exec.ExprNodeColumnEvaluator.evaluate(ExprNodeColumnEvaluator.java:98)
	at org.apache.hadoop.hive.ql.exec.ReduceSinkOperator.processOp(ReduceSinkOperator.java:233)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:522)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:850)
	at org.apache.hadoop.hive.ql.exec.TableScanOperator.processOp(TableScanOperator.java:90)
	at org.apache.hadoop.hive.ql.exec.Operator.process(Operator.java:522)
	at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:850)
	at org.apache.hadoop.hive.ql.exec.MapOperator.process(MapOperator.java:657)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13684629" author="phabricator@reviews.facebook.net" created="Sun, 16 Jun 2013 11:57:20 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121?vs=27717&amp;amp;id=34797#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121?vs=27717&amp;amp;id=34797#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractSMBJoinProc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AvgPartitionSizeBasedBigTableSelectorForAutoSMJ.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/TableSizeBasedBigTableSelectorForAutoSMJ.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppd_vc.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ppd_vc.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13707701" author="phabricator@reviews.facebook.net" created="Sat, 13 Jul 2013 08:55:47 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;  Rebased to trunk&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121?vs=34797&amp;amp;id=35703#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121?vs=34797&amp;amp;id=35703#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractSMBJoinProc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AvgPartitionSizeBasedBigTableSelectorForAutoSMJ.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/TableSizeBasedBigTableSelectorForAutoSMJ.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppd_vc.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ppd_vc.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13717747" author="phabricator@reviews.facebook.net" created="Tue, 23 Jul 2013 23:10:48 +0000"  >&lt;p&gt;hagleitn has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;  Some minor comments + request for more info.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java:600 tableScanOperator was actually a clearer name, wasn&apos;t it?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java:108 I think this is redundant. o instanceof MapInputPath is false if o == null&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java:134 can you please add a javadoc comment here?&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java:18 There are a lot of changes in MapOperator. I&apos;ve scan through them and it seems most (all?) are just cleaning up the operator (which is great).&lt;/p&gt;

&lt;p&gt;  Is that correct? If not can you please point out what the important changes are?&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: hagleitn&lt;/p&gt;</comment>
                            <comment id="13717828" author="phabricator@reviews.facebook.net" created="Wed, 24 Jul 2013 00:36:47 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java:600 It seemed I&apos;ve changed this to avoid exceeding 100 character of line 620. I&apos;ll revert this.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java:18 I should say that this patch was in patch-available state too long (I forgot what this was). But in the first look, this is much shorter than current and I like that. I&apos;ll add comment after reading this.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java:108 There was this long long time ago. I&apos;ll remove that.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java:134 Ok, sure.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: hagleitn&lt;/p&gt;</comment>
                            <comment id="13717868" author="phabricator@reviews.facebook.net" created="Wed, 24 Jul 2013 01:18:46 +0000"  >&lt;p&gt;navis has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java:18 you are right, again. Nothing special but code cleansing (I think the patch is merged with other one by mistake). I can revert this for simplicity.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: hagleitn&lt;/p&gt;</comment>
                            <comment id="13718007" author="phabricator@reviews.facebook.net" created="Wed, 24 Jul 2013 05:41:48 +0000"  >&lt;p&gt;hagleitn has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java:18 No, don&apos;t. I just wanted to understand. I think the new code is much cleaner. Just let me look at it closer tomorrow.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;br/&gt;
Cc: hagleitn&lt;/p&gt;</comment>
                            <comment id="13720286" author="phabricator@reviews.facebook.net" created="Fri, 26 Jul 2013 00:27:46 +0000"  >&lt;p&gt;hagleitn has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;  Clean up in MapOperator looks good. If you could make the few small changes (documentation, variable name, redundant code) from the first review I think this is ready.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, hagleitn, navis&lt;br/&gt;
Cc: hagleitn&lt;/p&gt;</comment>
                            <comment id="13720289" author="hagleitn" created="Fri, 26 Jul 2013 00:28:26 +0000"  >&lt;p&gt;Just a few small changes left. Otherwise looks great. You might also have to regenerate the ppd_vc.q.out. I got a diff when I ran it.&lt;/p&gt;</comment>
                            <comment id="13720377" author="phabricator@reviews.facebook.net" created="Fri, 26 Jul 2013 03:55:47 +0000"  >&lt;p&gt;navis updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;  Addressed comments&lt;/p&gt;

&lt;p&gt;Reviewers: hagleitn, JIRA&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;CHANGE SINCE LAST DIFF&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121?vs=35703&amp;amp;id=36273#toc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121?vs=35703&amp;amp;id=36273#toc&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractSMBJoinProc.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/AvgPartitionSizeBasedBigTableSelectorForAutoSMJ.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketingSortingReduceSinkOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/TableSizeBasedBigTableSelectorForAutoSMJ.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;br/&gt;
  ql/src/test/queries/clientpositive/ppd_vc.q&lt;br/&gt;
  ql/src/test/results/clientpositive/ppd_vc.q.out&lt;/p&gt;

&lt;p&gt;To: JIRA, hagleitn, navis&lt;br/&gt;
Cc: hagleitn&lt;/p&gt;</comment>
                            <comment id="13720802" author="hiveqa" created="Fri, 26 Jul 2013 13:54:33 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12594320/HIVE-3926.D8121.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12594320/HIVE-3926.D8121.5.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 2653 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/192/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/192/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/192/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/192/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.CleanupPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13721060" author="phabricator@reviews.facebook.net" created="Fri, 26 Jul 2013 18:51:47 +0000"  >&lt;p&gt;hagleitn has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; PPD on virtual column of partitioned table is not working&quot;.&lt;/p&gt;

&lt;p&gt;  LGTM&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D8121&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D8121&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, hagleitn, navis&lt;br/&gt;
Cc: hagleitn&lt;/p&gt;</comment>
                            <comment id="13721171" author="hagleitn" created="Fri, 26 Jul 2013 20:23:43 +0000"  >&lt;p&gt;+1 This looks good. Planning to commit tomorrow.&lt;/p&gt;</comment>
                            <comment id="13721815" author="hagleitn" created="Sun, 28 Jul 2013 01:34:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; sorry patch doesn&apos;t apply cleanly anymore. I believe the conflict is with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4929&quot; title=&quot;the type of all numeric constants is changed to double in the plan&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4929&quot;&gt;&lt;del&gt;HIVE-4929&lt;/del&gt;&lt;/a&gt;. Can you please rebase?&lt;/p&gt;</comment>
                            <comment id="13721822" author="hagleitn" created="Sun, 28 Jul 2013 02:08:39 +0000"  >&lt;p&gt;Correction - I meant &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4878&quot; title=&quot;With Dynamic partitioning, some queries would scan default partition even if query is not using it.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4878&quot;&gt;&lt;del&gt;HIVE-4878&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13721825" author="hagleitn" created="Sun, 28 Jul 2013 02:22:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; I&apos;ve taken the liberty to rebase for you if you like (patch .6). The only difference was in the PartitionPruner class where &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4878&quot; title=&quot;With Dynamic partitioning, some queries would scan default partition even if query is not using it.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4878&quot;&gt;&lt;del&gt;HIVE-4878&lt;/del&gt;&lt;/a&gt; also added a new parameter. If that works for you I can commit that. Let me know.&lt;/p&gt;</comment>
                            <comment id="13721861" author="hiveqa" created="Sun, 28 Jul 2013 04:50:47 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12594569/HIVE-3926.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12594569/HIVE-3926.6.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 2730 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/214/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/214/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-Build/214/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-Build/214/console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="13733125" author="appodictic" created="Thu, 8 Aug 2013 04:11:53 +0000"  >&lt;p&gt;+1 will commit.&lt;/p&gt;</comment>
                            <comment id="13733133" author="appodictic" created="Thu, 8 Aug 2013 04:29:56 +0000"  >&lt;p&gt;Committed thanks Navis and Gunther.&lt;/p&gt;</comment>
                            <comment id="13733144" author="hudson" created="Thu, 8 Aug 2013 04:47:28 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2 #341 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/341/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/341/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; PPD on virtual column of partitioned table is not working (Navis Ryu and Gunther Hagleitner via egc) (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractSMBJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AvgPartitionSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketingSortingReduceSinkOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/TableSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ppd_vc.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ppd_vc.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13733540" author="hudson" created="Thu, 8 Aug 2013 14:23:00 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2252 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2252/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2252/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; PPD on virtual column of partitioned table is not working (Navis Ryu and Gunther Hagleitner via egc) (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractSMBJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AvgPartitionSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketingSortingReduceSinkOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/TableSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ppd_vc.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ppd_vc.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13733893" author="hudson" created="Thu, 8 Aug 2013 19:44:13 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2 #344 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/344/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/344/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5026&quot; title=&quot;HIVE-3926 is committed in the state of not rebased to trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5026&quot;&gt;&lt;del&gt;HIVE-5026&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; is committed in the state of not rebased to trunk (Navis Ryu via Gunther Hagleitner) (gunther: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13734336" author="sershe" created="Fri, 9 Aug 2013 02:25:09 +0000"  >&lt;p&gt;Hi. Does this affect only map task, or also pruning before the job in metastore client? Non-partition columns are removed from metastore pruning, so I wonder if it makes sense to have this for metastore pruning.&lt;/p&gt;</comment>
                            <comment id="13734421" author="hudson" created="Fri, 9 Aug 2013 05:47:34 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2255 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2255/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2255/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5026&quot; title=&quot;HIVE-3926 is committed in the state of not rebased to trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5026&quot;&gt;&lt;del&gt;HIVE-5026&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; is committed in the state of not rebased to trunk (Navis Ryu via Gunther Hagleitner) (gunther: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13734482" author="hagleitn" created="Fri, 9 Aug 2013 06:56:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt; Could you answer Sergey&apos;s question? (Before it gets lost in Hudson noise).&lt;/p&gt;</comment>
                            <comment id="13735541" author="sershe" created="Fri, 9 Aug 2013 23:52:08 +0000"  >&lt;p&gt;ping? it affect &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4985&quot; title=&quot;refactor/clean up partition name pruning to be usable inside metastore server &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4985&quot;&gt;&lt;del&gt;HIVE-4985&lt;/del&gt;&lt;/a&gt;. Would running ppd_vc be sufficient to verify removal from metastore-specific pruning path?&lt;/p&gt;</comment>
                            <comment id="13735732" author="appodictic" created="Sat, 10 Aug 2013 04:10:19 +0000"  >&lt;p&gt;I am not sure what is being asked. The virtual columns have file names and offsets into files, I am not seeing how this ties into the metastore.&lt;/p&gt;</comment>
                            <comment id="13735770" author="sershe" created="Sat, 10 Aug 2013 05:46:32 +0000"  >&lt;p&gt;Virtual columns were added to the functions that, as far as I see, are only being called with the pruner expression that have been compacted to only contain partition columns. That is used to prune based on partition names when filter pushdown is not possible in metastore.&lt;br/&gt;
I am wondering if this could be dead code because virtual columns are also not present in that expression.&lt;/p&gt;</comment>
                            <comment id="13736085" author="hudson" created="Sat, 10 Aug 2013 22:20:12 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #51 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/51/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/51/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5026&quot; title=&quot;HIVE-3926 is committed in the state of not rebased to trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5026&quot;&gt;&lt;del&gt;HIVE-5026&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; is committed in the state of not rebased to trunk (Navis Ryu via Gunther Hagleitner) (gunther: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; PPD on virtual column of partitioned table is not working (Navis Ryu and Gunther Hagleitner via egc) (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractSMBJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AvgPartitionSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketingSortingReduceSinkOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/TableSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ppd_vc.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ppd_vc.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13736135" author="hudson" created="Sun, 11 Aug 2013 00:00:30 +0000"  >&lt;p&gt;SUCCESS: Integrated in Hive-trunk-hadoop1-ptest #122 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/122/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/122/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5026&quot; title=&quot;HIVE-3926 is committed in the state of not rebased to trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5026&quot;&gt;&lt;del&gt;HIVE-5026&lt;/del&gt;&lt;/a&gt;: &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; is committed in the state of not rebased to trunk (Navis Ryu via Gunther Hagleitner) (gunther: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511977&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3926&quot; title=&quot;PPD on virtual column of partitioned table is not working&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3926&quot;&gt;&lt;del&gt;HIVE-3926&lt;/del&gt;&lt;/a&gt; PPD on virtual column of partitioned table is not working (Navis Ryu and Gunther Hagleitner via egc) (ecapriolo: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1511578&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/Driver.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/exec/MapOperator.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/VirtualColumn.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractBucketJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AbstractSMBJoinProc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/AvgPartitionSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/BucketingSortingReduceSinkOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GlobalLimitOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GroupByOptimizer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/TableSizeBasedBigTableSelectorForAutoSMJ.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/listbucketingpruner/LBPartitionProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcCtx.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrExprProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/pcr/PcrOpProcFactory.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartExprEvalUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/ppr/PartitionPruner.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ParseContext.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/plan/TableScanDesc.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientpositive/ppd_vc.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientpositive/ppd_vc.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13736175" author="navis" created="Sun, 11 Aug 2013 03:45:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sershe&quot; class=&quot;user-hover&quot; rel=&quot;sershe&quot;&gt;sershe&lt;/a&gt; Compacting pruner predicate only removes nulls. It does not do removing non-partition column related expression. Without this, exception is thrown in the pruneBySequentialScan() method, like this,&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.hadoop.hive.ql.metadata.HiveException: java.lang.RuntimeException: cannot find field block__offset__inside__file from [org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@12fb063, org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@1e55d39, org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@14b525c, org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@c4c05]
	at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:231)
	at org.apache.hadoop.hive.ql.optimizer.pcr.PcrOpProcFactory$FilterPCR.process(PcrOpProcFactory.java:112)
	... 26 more
Caused by: java.lang.RuntimeException: cannot find field block__offset__inside__file from [org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@12fb063, org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@1e55d39, org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@14b525c, org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector$MyField@c4c05]
	at org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorUtils.getStandardStructFieldRef(ObjectInspectorUtils.java:368)
	at org.apache.hadoop.hive.serde2.objectinspector.UnionStructObjectInspector.getStructFieldRef(UnionStructObjectInspector.java:100)
	at org.apache.hadoop.hive.ql.exec.ExprNodeColumnEvaluator.initialize(ExprNodeColumnEvaluator.java:55)
	at org.apache.hadoop.hive.ql.exec.ExprNodeGenericFuncEvaluator.initialize(ExprNodeGenericFuncEvaluator.java:121)
	at org.apache.hadoop.hive.ql.optimizer.ppr.PartExprEvalUtils.prepareExpr(PartExprEvalUtils.java:100)
	at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.pruneBySequentialScan(PartitionPruner.java:330)
	at org.apache.hadoop.hive.ql.optimizer.ppr.PartitionPruner.prune(PartitionPruner.java:219)
	... 27 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13736176" author="navis" created="Sun, 11 Aug 2013 03:47:04 +0000"  >&lt;p&gt;I think there should be a path which passes costly invocation of pruneBySequentialScan(). I&apos;ll book it as a following issue.&lt;/p&gt;</comment>
                            <comment id="13737112" author="sershe" created="Mon, 12 Aug 2013 17:56:42 +0000"  >&lt;p&gt;It does filter non-partition columns in some cases, in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5047&quot; title=&quot;Hive client filters partitions incorrectly via pushdown in certain cases involving &amp;quot;or&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5047&quot;&gt;&lt;del&gt;HIVE-5047&lt;/del&gt;&lt;/a&gt; there&apos;s a related problem.&lt;/p&gt;</comment>
                            <comment id="13737113" author="sershe" created="Mon, 12 Aug 2013 17:58:06 +0000"  >&lt;p&gt;Let me double check... (I am making changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4985&quot; title=&quot;refactor/clean up partition name pruning to be usable inside metastore server &quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4985&quot;&gt;&lt;del&gt;HIVE-4985&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4914&quot; title=&quot;filtering via partition name should be done inside metastore server (implementation)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4914&quot;&gt;&lt;del&gt;HIVE-4914&lt;/del&gt;&lt;/a&gt;, they are not quite ready yet though)&lt;/p&gt;</comment>
                            <comment id="13742373" author="sershe" created="Fri, 16 Aug 2013 16:42:33 +0000"  >&lt;p&gt;I got around to this yesterday, the &quot;null&quot; values are actually put in the expr by PPRColumnExprProcessor in ExprProcFactory; it thus replaces non-partition columns, many functions, etc. compactExpr in Pruner then compacts the nulls.&lt;br/&gt;
The root problem is that ExprNodeColumnDesc doesn&apos;t distinguish partition and virtual columns, so partition columns also get there.&lt;br/&gt;
I will try to mitigate that in separate JIRA, however ExprNodeColumnDesc ctor w/isPartitionColOrVirtualCol arg is called in many places, so if they call cannot be easily replaced post-filtering can be done before expression gets to the pruner.&lt;/p&gt;</comment>
                            <comment id="13796144" author="ashutoshc" created="Tue, 15 Oct 2013 23:31:17 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12474757">HIVE-1662</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12664101">HIVE-5111</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12594569" name="HIVE-3926.6.patch" size="98931" author="hagleitn" created="Sun, 28 Jul 2013 02:20:14 +0000"/>
                            <attachment id="12566091" name="HIVE-3926.D8121.1.patch" size="84325" author="phabricator@reviews.facebook.net" created="Wed, 23 Jan 2013 05:38:12 +0000"/>
                            <attachment id="12569304" name="HIVE-3926.D8121.2.patch" size="90731" author="phabricator@reviews.facebook.net" created="Thu, 14 Feb 2013 04:00:11 +0000"/>
                            <attachment id="12588017" name="HIVE-3926.D8121.3.patch" size="90643" author="phabricator@reviews.facebook.net" created="Sun, 16 Jun 2013 11:57:20 +0000"/>
                            <attachment id="12592134" name="HIVE-3926.D8121.4.patch" size="90667" author="phabricator@reviews.facebook.net" created="Sat, 13 Jul 2013 08:55:47 +0000"/>
                            <attachment id="12594320" name="HIVE-3926.D8121.5.patch" size="95240" author="phabricator@reviews.facebook.net" created="Fri, 26 Jul 2013 03:55:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>307248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1alk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>269959</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>