<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:20:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-7326] Hive complains invalid column reference with &apos;having&apos; aggregate predicates</title>
                <link>https://issues.apache.org/jira/browse/HIVE-7326</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>
&lt;p&gt;CREATE TABLE TestV1_Staples (&lt;br/&gt;
      Item_Count INT,&lt;br/&gt;
      Ship_Priority STRING,&lt;br/&gt;
      Order_Priority STRING,&lt;br/&gt;
      Order_Status STRING,&lt;br/&gt;
      Order_Quantity DOUBLE,&lt;br/&gt;
      Sales_Total DOUBLE,&lt;br/&gt;
      Discount DOUBLE,&lt;br/&gt;
      Tax_Rate DOUBLE,&lt;br/&gt;
      Ship_Mode STRING,&lt;br/&gt;
      Fill_Time DOUBLE,&lt;br/&gt;
      Gross_Profit DOUBLE,&lt;br/&gt;
      Price DOUBLE,&lt;br/&gt;
      Ship_Handle_Cost DOUBLE,&lt;br/&gt;
      Employee_Name STRING,&lt;br/&gt;
      Employee_Dept STRING,&lt;br/&gt;
      Manager_Name STRING,&lt;br/&gt;
      Employee_Yrs_Exp DOUBLE,&lt;br/&gt;
      Employee_Salary DOUBLE,&lt;br/&gt;
      Customer_Name STRING,&lt;br/&gt;
      Customer_State STRING,&lt;br/&gt;
      Call_Center_Region STRING,&lt;br/&gt;
      Customer_Balance DOUBLE,&lt;br/&gt;
      Customer_Segment STRING,&lt;br/&gt;
      Prod_Type1 STRING,&lt;br/&gt;
      Prod_Type2 STRING,&lt;br/&gt;
      Prod_Type3 STRING,&lt;br/&gt;
      Prod_Type4 STRING,&lt;br/&gt;
      Product_Name STRING,&lt;br/&gt;
      Product_Container STRING,&lt;br/&gt;
      Ship_Promo STRING,&lt;br/&gt;
      Supplier_Name STRING,&lt;br/&gt;
      Supplier_Balance DOUBLE,&lt;br/&gt;
      Supplier_Region STRING,&lt;br/&gt;
      Supplier_State STRING,&lt;br/&gt;
      Order_ID STRING,&lt;br/&gt;
      Order_Year INT,&lt;br/&gt;
      Order_Month INT,&lt;br/&gt;
      Order_Day INT,&lt;br/&gt;
      Order_Date_ STRING,&lt;br/&gt;
      Order_Quarter STRING,&lt;br/&gt;
      Product_Base_Margin DOUBLE,&lt;br/&gt;
      Product_ID STRING,&lt;br/&gt;
      Receive_Time DOUBLE,&lt;br/&gt;
      Received_Date_ STRING,&lt;br/&gt;
      Ship_Date_ STRING,&lt;br/&gt;
      Ship_Charge DOUBLE,&lt;br/&gt;
      Total_Cycle_Time DOUBLE,&lt;br/&gt;
      Product_In_Stock STRING,&lt;br/&gt;
      PID INT,&lt;br/&gt;
      Market_Segment STRING&lt;br/&gt;
      );&lt;/p&gt;

&lt;p&gt;Query that works:&lt;br/&gt;
SELECT customer_name, SUM(customer_balance), SUM(order_quantity) FROM default.testv1_staples s1 GROUP BY customer_name HAVING (&lt;br/&gt;
(COUNT(s1.discount) &amp;lt;= 822) AND&lt;br/&gt;
(SUM(customer_balance) &amp;lt;= 4074689.000000041)&lt;br/&gt;
);&lt;br/&gt;
Query that fails:&lt;br/&gt;
SELECT customer_name, SUM(customer_balance), SUM(order_quantity) FROM default.testv1_staples s1 GROUP BY customer_name HAVING (&lt;br/&gt;
(SUM(customer_balance) &amp;lt;= 4074689.000000041)&lt;br/&gt;
AND (COUNT(s1.discount) &amp;lt;= 822)&lt;br/&gt;
);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12724834">HIVE-7326</key>
            <summary>Hive complains invalid column reference with &apos;having&apos; aggregate predicates</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="hsubramaniyan">Hari Sankar Sivarama Subramaniyan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Jul 2014 22:42:10 +0000</created>
                <updated>Thu, 13 Nov 2014 19:40:05 +0000</updated>
                            <resolved>Mon, 7 Jul 2014 22:13:25 +0000</resolved>
                                                    <fixVersion>0.14.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14052146" author="navis" created="Fri, 4 Jul 2014 04:12:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hsubramaniyan&quot; class=&quot;user-hover&quot; rel=&quot;hsubramaniyan&quot;&gt;hsubramaniyan&lt;/a&gt; Sorry. I didn&apos;t noticed that this is assigned already.&lt;/p&gt;</comment>
                            <comment id="14052253" author="hiveqa" created="Fri, 4 Jul 2014 08:24:13 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12654033/HIVE-7326.1.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12654033/HIVE-7326.1.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5692 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_in_having
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/678/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/678/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/678/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/678/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-678/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-678/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12654033&lt;/p&gt;</comment>
                            <comment id="14053327" author="hiveqa" created="Mon, 7 Jul 2014 04:29:33 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12654241/HIVE-7326.2.patch.txt&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12654241/HIVE-7326.2.patch.txt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 5678 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_root_dir_external_table
org.apache.hadoop.hive.metastore.txn.TestCompactionTxnHandler.testRevokeTimedOutWorkers
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/685/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/685/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/685/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-Build/685/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-685/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-Build-685/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12654241&lt;/p&gt;</comment>
                            <comment id="14053871" author="ashutoshc" created="Mon, 7 Jul 2014 17:08:55 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14054014" author="hsubramaniyan" created="Mon, 7 Jul 2014 18:50:45 +0000"  >&lt;p&gt;Navis, Thanks for looking into this. I am assigning the jira to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=navis&quot; class=&quot;user-hover&quot; rel=&quot;navis&quot;&gt;navis&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks&lt;br/&gt;
Hari&lt;/p&gt;</comment>
                            <comment id="14054237" author="ashutoshc" created="Mon, 7 Jul 2014 22:13:25 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Navis!&lt;/p&gt;</comment>
                            <comment id="14210294" author="thejas" created="Thu, 13 Nov 2014 19:40:05 +0000"  >&lt;p&gt;This has been fixed in 0.14 release. Please open new jira if you see any issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12654033" name="HIVE-7326.1.patch.txt" size="13813" author="navis" created="Fri, 4 Jul 2014 04:10:59 +0000"/>
                            <attachment id="12654241" name="HIVE-7326.2.patch.txt" size="13878" author="navis" created="Mon, 7 Jul 2014 01:20:21 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403017</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xd5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>403073</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>