<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:37:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-11826] &apos;hadoop.proxyuser.hive.groups&apos; configuration doesn&apos;t prevent unauthorized user to access metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-11826</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;With &apos;hadoop.proxyuser.hive.groups&apos; configured in core-site.xml to certain groups, currently if you run the job with a user not belonging to those groups, it won&apos;t fail to access metastore. &lt;del&gt;With old version hive 0.13, actually it fails properly.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;Seems HadoopThriftAuthBridge20S.java correctly call ProxyUsers.authorize() while HadoopThriftAuthBridge23 doesn&apos;t. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12864279">HIVE-11826</key>
            <summary>&apos;hadoop.proxyuser.hive.groups&apos; configuration doesn&apos;t prevent unauthorized user to access metastore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="aihuaxu">Aihua Xu</assignee>
                                    <reporter username="aihuaxu">Aihua Xu</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Sep 2015 15:07:09 +0000</created>
                <updated>Tue, 16 Feb 2016 23:52:16 +0000</updated>
                            <resolved>Mon, 21 Sep 2015 16:46:49 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                    <fixVersion>2.0.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="14745631" author="aihuaxu" created="Tue, 15 Sep 2015 15:49:58 +0000"  >&lt;p&gt;The patch will authorize the current user before accessing metastore. It will fail if the user&apos;s group is not in hadoop.proxyuser.hive.groups.&lt;/p&gt;</comment>
                            <comment id="14747167" author="hiveqa" created="Wed, 16 Sep 2015 08:57:29 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12756028/HIVE-11826.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12756028/HIVE-11826.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 4 failed/errored test(s), 9445 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.thrift.TestHadoop20SAuthBridge.testSaslWithHiveMetaStore
org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.hcatalog.streaming.TestStreaming.testTransactionBatchCommit_Json
org.apache.hive.jdbc.TestJdbcWithLocalClusterSpark.testTempTable
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5292/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5292/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5292/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5292/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5292/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5292/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 4 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12756028 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14791212" author="aihuaxu" created="Wed, 16 Sep 2015 22:12:00 +0000"  >&lt;p&gt;Change the TestHadoop20SAuthBridge.java to be the one for version23 since version23S is already removed from the code base. &lt;/p&gt;</comment>
                            <comment id="14791405" author="aihuaxu" created="Thu, 17 Sep 2015 01:21:17 +0000"  >&lt;p&gt;I mean HadoopThriftAuthBridge20S.java is already removed.&lt;/p&gt;</comment>
                            <comment id="14804582" author="csun" created="Thu, 17 Sep 2015 21:48:53 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14804596" author="aihuaxu" created="Thu, 17 Sep 2015 21:54:37 +0000"  >&lt;p&gt;Thanks Chao for reviewing the code. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;  can you also help take a look at the code? &lt;/p&gt;</comment>
                            <comment id="14804635" author="ashutoshc" created="Thu, 17 Sep 2015 22:22:42 +0000"  >&lt;p&gt;Seems like even in 0.13 &lt;a href=&quot;https://github.com/apache/hive/blob/ff80bddb86d7a7c4804bf388f8324056f6b1dae0/shims/common-secure/src/main/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java#L612&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/hive/blob/ff80bddb86d7a7c4804bf388f8324056f6b1dae0/shims/common-secure/src/main/java/org/apache/hadoop/hive/thrift/HadoopThriftAuthBridge20S.java#L612&lt;/a&gt; we were not calling this. So, wondering how it worked then? &lt;br/&gt;
Also, this method is deprecated in favor of one without Configuration argument.&lt;/p&gt;</comment>
                            <comment id="14804673" author="hiveqa" created="Thu, 17 Sep 2015 22:57:07 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12756365/HIVE-11826.2.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12756365/HIVE-11826.2.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 9449 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hive.hcatalog.api.TestHCatClient.testTableSchemaPropagation
org.apache.hive.hcatalog.streaming.TestStreaming.testRemainingTransactions
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5315/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5315/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5315/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/5315/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5315/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-5315/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12756365 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14804715" author="aihuaxu" created="Thu, 17 Sep 2015 23:55:38 +0000"  >&lt;p&gt;Sorry. I didn&apos;t upstream 0.13 but in CDH5.3.3 with Hive-0.13 which seems to have correct change. Then upstream 0.13 will also have the same issue. I will update to use the newer version.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;         if (useProxy) {
            clientUgi = UserGroupInformation.createProxyUser(
                endUser, UserGroupInformation.getLoginUser());
            // ensure that metastore user has privilege to impersonate the requesting user
            ProxyUsers.authorize(clientUgi,
                getRemoteAddress().getHostAddress(), null);
            remoteUser.set(clientUgi.getShortUserName());
            LOG.debug(&quot;Set remoteUser :&quot; + remoteUser.get());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14804806" author="ashutoshc" created="Fri, 18 Sep 2015 01:18:17 +0000"  >&lt;p&gt;OK +1&lt;br/&gt;
cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14852721" author="aihuaxu" created="Fri, 18 Sep 2015 12:46:23 +0000"  >&lt;p&gt;I will still keep the deprecated version for now since seems  we have dependency issue in pom.xml which still includes old version of hadoop-core in the classpath which will fail the build. I was looking into that since we also have problems in other place but I&apos;m not familiar with dependency yet.&lt;/p&gt;</comment>
                            <comment id="14900961" author="csun" created="Mon, 21 Sep 2015 16:46:49 +0000"  >&lt;p&gt;Committed to master and branch-1. Thanks Aihua.&lt;/p&gt;</comment>
                            <comment id="14901032" author="aihuaxu" created="Mon, 21 Sep 2015 17:24:01 +0000"  >&lt;p&gt;Thanks Chao.&lt;/p&gt;</comment>
                            <comment id="14901804" author="lefty@hortonworks.com" created="Tue, 22 Sep 2015 02:26:34 +0000"  >&lt;p&gt;Does this bug fix need any documentation?&lt;/p&gt;</comment>
                            <comment id="14903104" author="aihuaxu" created="Tue, 22 Sep 2015 18:00:00 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=leftylev&quot; class=&quot;user-hover&quot; rel=&quot;leftylev&quot;&gt;leftylev&lt;/a&gt; the doc seems not necessary since &apos;hadoop.proxyuser.hive.groups&apos; should work as it supposed to be while we just had this issue. This is to correct the incorrect implementation. &lt;/p&gt;

&lt;p&gt;Let me know if anyone else has different opinion and I can provide more info if needed.  &lt;/p&gt;</comment>
                            <comment id="14903924" author="lefty@hortonworks.com" created="Wed, 23 Sep 2015 04:13:56 +0000"  >&lt;p&gt;Okay, thanks Aihua Xu.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12922253">HIVE-12688</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12756365" name="HIVE-11826.2.patch" size="36880" author="aihuaxu" created="Wed, 16 Sep 2015 22:12:00 +0000"/>
                            <attachment id="12756028" name="HIVE-11826.patch" size="945" author="aihuaxu" created="Tue, 15 Sep 2015 15:48:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2k7ef:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>