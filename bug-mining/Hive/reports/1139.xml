<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:04:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4098] OrcInputFormat assumes Hive always calls createValue</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4098</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Hive&apos;s HiveContextAwareRecordReader doesn&apos;t create a new value for each InputFormat and instead reuses the same row between input formats. That causes the first record of second (and third, etc.) partition to be dropped and replaced with the last row of the previous partition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12634828">HIVE-4098</key>
            <summary>OrcInputFormat assumes Hive always calls createValue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="omalley">Owen O&apos;Malley</assignee>
                                    <reporter username="omalley">Owen O&apos;Malley</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Mar 2013 15:13:44 +0000</created>
                <updated>Thu, 16 May 2013 21:11:00 +0000</updated>
                            <resolved>Fri, 8 Mar 2013 16:43:52 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Serializers/Deserializers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13590978" author="phabricator@reviews.facebook.net" created="Fri, 1 Mar 2013 21:57:11 +0000"  >&lt;p&gt;omalley requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4098&quot; title=&quot;OrcInputFormat assumes Hive always calls createValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4098&quot;&gt;&lt;del&gt;HIVE-4098&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; OrcInputFormat assumes Hive always calls createValue&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;hive-4098 remove assumption that only an inputformat&apos;s createValue() is used in the next() calls.&lt;/p&gt;

&lt;p&gt;Hive&apos;s HiveContextAwareRecordReader doesn&apos;t create a new value for each InputFormat and instead reuses the same row between input formats. That causes the first record of second (and third, etc.) partition to be dropped and replaced with the last row of the previous partition.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D9021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D9021&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcInputFormat.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/21897/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/21897/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, omalley&lt;/p&gt;</comment>
                            <comment id="13590979" author="owen.omalley" created="Fri, 1 Mar 2013 21:57:14 +0000"  >&lt;p&gt;The patch removes the assumption of a dedicated row for each RecordReader.&lt;/p&gt;</comment>
                            <comment id="13593961" author="phabricator@reviews.facebook.net" created="Tue, 5 Mar 2013 21:56:12 +0000"  >&lt;p&gt;hagleitn has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4098&quot; title=&quot;OrcInputFormat assumes Hive always calls createValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4098&quot;&gt;&lt;del&gt;HIVE-4098&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; OrcInputFormat assumes Hive always calls createValue&quot;.&lt;/p&gt;

&lt;p&gt;  Looks good. There&apos;s a test for this in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4015&quot; title=&quot;Add ORC file to the grammar as a file format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4015&quot;&gt;&lt;del&gt;HIVE-4015&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D9021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D9021&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  hive-3874&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, hagleitn, omalley&lt;/p&gt;</comment>
                            <comment id="13595369" author="phabricator@reviews.facebook.net" created="Thu, 7 Mar 2013 00:58:12 +0000"  >&lt;p&gt;ashutoshc has commented on the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4098&quot; title=&quot;OrcInputFormat assumes Hive always calls createValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4098&quot;&gt;&lt;del&gt;HIVE-4098&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; OrcInputFormat assumes Hive always calls createValue&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D9021&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D9021&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  hive-3874&lt;/p&gt;

&lt;p&gt;ARCANIST PROJECT&lt;br/&gt;
  hive&lt;/p&gt;

&lt;p&gt;To: JIRA, hagleitn, omalley&lt;br/&gt;
Cc: ashutoshc&lt;/p&gt;</comment>
                            <comment id="13597269" author="ashutoshc" created="Fri, 8 Mar 2013 16:43:52 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Owen!&lt;/p&gt;</comment>
                            <comment id="13597882" author="hudson" created="Sat, 9 Mar 2013 08:21:19 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2007 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2007/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2007/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4098&quot; title=&quot;OrcInputFormat assumes Hive always calls createValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4098&quot;&gt;&lt;del&gt;HIVE-4098&lt;/del&gt;&lt;/a&gt; : OrcInputFormat assumes Hive always calls createValue (Owen Omalley via Ashutosh Chauhan) (Revision 1454454)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1454454&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1454454&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13623069" author="hudson" created="Thu, 4 Apr 2013 23:40:00 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #138 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/138/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4098&quot; title=&quot;OrcInputFormat assumes Hive always calls createValue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4098&quot;&gt;&lt;del&gt;HIVE-4098&lt;/del&gt;&lt;/a&gt; : OrcInputFormat assumes Hive always calls createValue (Owen Omalley via Ashutosh Chauhan) (Revision 1454454)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1454454&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1454454&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcInputFormat.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12626790">HIVE-3874</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12632118">HIVE-4015</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12571655" name="HIVE-4098.D9021.1.patch" size="1994" author="phabricator@reviews.facebook.net" created="Fri, 1 Mar 2013 21:57:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315321</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 33 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ieun:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>315665</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>