<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:00:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-2837] insert into external tables should not be allowed</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2837</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This is a very risky thing to allow. &lt;br/&gt;
Since, the external tables can point to any user location, which can potentially corrupt some other tables.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12545027">HIVE-2837</key>
            <summary>insert into external tables should not be allowed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Mar 2012 01:54:38 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:23 +0000</updated>
                            <resolved>Fri, 9 Mar 2012 17:32:18 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13221491" author="appodictic" created="Sat, 3 Mar 2012 03:24:01 +0000"  >&lt;p&gt;maybe add a read only keyword or table property?&lt;/p&gt;</comment>
                            <comment id="13221942" author="namit" created="Sun, 4 Mar 2012 17:26:21 +0000"  >&lt;p&gt;I dont want to it table-by-table.&lt;br/&gt;
The only other option I can think of is add another configuration variable.&lt;/p&gt;</comment>
                            <comment id="13221977" author="appodictic" created="Sun, 4 Mar 2012 19:29:24 +0000"  >&lt;p&gt;Internal tables can have a location as well.&lt;/p&gt;</comment>
                            <comment id="13225286" author="alangates" created="Thu, 8 Mar 2012 16:27:30 +0000"  >&lt;p&gt;If this is to be added it should definitely be configurable, with the default off, since this is a major backwards incompatibility.&lt;/p&gt;</comment>
                            <comment id="13225723" author="phabricator@reviews.facebook.net" created="Fri, 9 Mar 2012 00:37:57 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; insert into external tables should not be allowed&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2837&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt; By default, the behavior does not change. It is backward compatible&lt;/p&gt;

&lt;p&gt;  This is a very risky thing to allow.&lt;br/&gt;
  Since, the external tables can point to any user location, which can potentially corrupt some other tables.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2211&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientnegative/insertexternal1.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/insertexternal1.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4845/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/4845/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13225724" author="namit" created="Fri, 9 Mar 2012 00:38:06 +0000"  >&lt;p&gt;I have added a new parameter: hive.insert.into.external.tables which is true by default.&lt;br/&gt;
If you set it to false explicitly, the inserts will fail.&lt;/p&gt;
</comment>
                            <comment id="13225750" author="phabricator@reviews.facebook.net" created="Fri, 9 Mar 2012 00:57:56 +0000"  >&lt;p&gt;kevinwilfong has added CCs to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; insert into external tables should not be allowed&quot;.&lt;br/&gt;
Added CCs: kevinwilfong&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2211&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13225754" author="phabricator@reviews.facebook.net" created="Fri, 9 Mar 2012 01:03:56 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; insert into external tables should not be allowed&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  Change error message&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2211&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;br/&gt;
  ql/src/test/results/clientnegative/insertexternal1.q.out&lt;br/&gt;
  ql/src/test/queries/clientnegative/insertexternal1.q&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/p&gt;</comment>
                            <comment id="13225809" author="phabricator@reviews.facebook.net" created="Fri, 9 Mar 2012 03:37:59 +0000"  >&lt;p&gt;kevinwilfong has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; insert into external tables should not be allowed&quot;.&lt;/p&gt;

&lt;p&gt;  +1 Will commit if tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2211&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13226227" author="kevinwilfong" created="Fri, 9 Mar 2012 17:32:18 +0000"  >&lt;p&gt;Committed, thanks Namit.&lt;/p&gt;</comment>
                            <comment id="13226664" author="hudson" created="Sat, 10 Mar 2012 01:06:22 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1302 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1302/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1302/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt;. insert into external tables should not be allowed. (namit via kevinwilfong) (Revision 1298936)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298936&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/insertexternal1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/insertexternal1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265367" author="ashutoshc" created="Mon, 30 Apr 2012 21:12:03 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13266274" author="phabricator@reviews.facebook.net" created="Wed, 2 May 2012 01:12:47 +0000"  >&lt;p&gt;njain has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; insert into external tables should not be allowed&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2211&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2211&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13286907" author="mgrover" created="Thu, 31 May 2012 20:34:37 +0000"  >&lt;p&gt;From looking at this, it seems like it applies to external tables on HDFS as well. Can you please confirm this is correct?&lt;br/&gt;
Technically, insert into should be ok for external tables on HDFS (and S3) as well. Seems like a storage file system level thing to specify whether insert into is applied and implement it.&lt;/p&gt;

&lt;p&gt;Some context for you:&lt;br/&gt;
Historically, there hasn&apos;t been any real difference between creating an external table on HDFS vs creating a managed one. However, if we disallow insert into on external tables, that would mean that folks with external tables on HDFS wouldn&apos;t be able to make use of insert into functionality even though they should be able to. This would make new tables to be biased towards managed tables but what about the people who already have their entire Hive warehouses based on external tables?&lt;/p&gt;</comment>
                            <comment id="13548098" author="hudson" created="Wed, 9 Jan 2013 10:24:23 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2837&quot; title=&quot;insert into external tables should not be allowed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2837&quot;&gt;&lt;del&gt;HIVE-2837&lt;/del&gt;&lt;/a&gt;. insert into external tables should not be allowed. (namit via kevinwilfong) (Revision 1298936)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298936&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298936&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/parse/SemanticAnalyzer.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/insertexternal1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/insertexternal1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517653" name="ASF.LICENSE.NOT.GRANTED--HIVE-2837.D2211.1.patch" size="5429" author="phabricator@reviews.facebook.net" created="Fri, 9 Mar 2012 00:37:57 +0000"/>
                            <attachment id="12517659" name="ASF.LICENSE.NOT.GRANTED--HIVE-2837.D2211.2.patch" size="5281" author="phabricator@reviews.facebook.net" created="Fri, 9 Mar 2012 01:03:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230213</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llr3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124174</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>