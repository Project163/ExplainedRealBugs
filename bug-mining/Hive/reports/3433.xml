<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:33:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-9456] Make Hive support unicode with MSSQL as Metastore backend</title>
                <link>https://issues.apache.org/jira/browse/HIVE-9456</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;There are significant issues when Hive uses MSSQL as metastore backend to support unicode, since MSSQL handles varchar and nvarchar datatypes differently. Hive 0.14 metastore mssql script DDL was using varchar as datatype, which can&apos;t handle multi-bytes/unicode characters, e.g., Chinese chars. This JIRA is going to track implementation of unicode support in that case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12769789">HIVE-9456</key>
            <summary>Make Hive support unicode with MSSQL as Metastore backend</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="xiaobingo">Xiaobing Zhou</assignee>
                                    <reporter username="xiaobingo">Xiaobing Zhou</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Jan 2015 00:59:41 +0000</created>
                <updated>Tue, 1 Oct 2019 22:07:49 +0000</updated>
                            <resolved>Wed, 6 May 2015 18:21:05 +0000</resolved>
                                    <version>0.14.0</version>
                                    <fixVersion>1.2.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14290320" author="xiaobingo" created="Sat, 24 Jan 2015 01:17:41 +0000"  >&lt;p&gt;Made a patch. Could anyone have it reviewed? Thanks!&lt;/p&gt;</comment>
                            <comment id="14293976" author="ekoifman" created="Tue, 27 Jan 2015 18:59:40 +0000"  >&lt;p&gt;how did you test this?&lt;/p&gt;</comment>
                            <comment id="14294244" author="xiaobingo" created="Tue, 27 Jan 2015 21:45:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;ekoifman&lt;/a&gt; Here&apos;s test case. &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;1. New empty metastore&apos;s created with 0.14 schema. 
2. upgrade-0.14.0-to-0.15.0.mssql.sql is run manually to get 0.14 metastore upgraded to 0.15. 
3. Double check it to make sure every orginal varchar column changed to nvarchar.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you suggested, it&apos;d be better to do test in context HIVE/HIVE CLI/, e.g., &lt;br/&gt;
1. New empty metastore&apos;s created with 0.14 schema. &lt;br/&gt;
2. create some hive tables/load real data&lt;br/&gt;
3. shutdown metastore server&lt;br/&gt;
4. run schemetool to do upgrade&lt;br/&gt;
5. start metastore server&lt;br/&gt;
6. query those tables inited in step 2 to make sure things are correct.&lt;/p&gt;

&lt;p&gt;I will do that. Thanks!&lt;/p&gt;</comment>
                            <comment id="14302308" author="sushanth" created="Mon, 2 Feb 2015 23:22:09 +0000"  >&lt;p&gt;+1 to content, that looks reasonable to me.&lt;/p&gt;

&lt;p&gt;There is one other thing to take care of though, before committing this. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vikram.dixit&quot; class=&quot;user-hover&quot; rel=&quot;vikram.dixit&quot;&gt;vikram.dixit&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=brocknoland&quot; class=&quot;user-hover&quot; rel=&quot;brocknoland&quot;&gt;brocknoland&lt;/a&gt;/&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gates&quot; class=&quot;user-hover&quot; rel=&quot;gates&quot;&gt;gates&lt;/a&gt; : given that it&apos;s not 0.15 anymore but 1.2, what&apos;s the plan for db upgrade scripts? Should we have a 0.14-&amp;gt;1.0 without this, a 1.0-&amp;gt;1.1 without this, and 1.1-&amp;gt;1.2 with this?&lt;/p&gt;</comment>
                            <comment id="14302324" author="brocknoland" created="Mon, 2 Feb 2015 23:34:51 +0000"  >&lt;p&gt;Thank you very much. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9554&quot; title=&quot;Rename 0.15 upgrade scripts to 1.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9554&quot;&gt;&lt;del&gt;HIVE-9554&lt;/del&gt;&lt;/a&gt; should go into trunk and then this patch and be done on top of it. I will have a patch there shortly.&lt;/p&gt;</comment>
                            <comment id="14302328" author="thejas" created="Mon, 2 Feb 2015 23:38:22 +0000"  >&lt;p&gt;fyi, 0.14 to 1.0 upgrade is a no-op,as the metastore schema did not change between those releases. I made this change in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9514&quot; title=&quot;schematool is broken in hive 1.0.0&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9514&quot;&gt;&lt;del&gt;HIVE-9514&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="14302332" author="brocknoland" created="Mon, 2 Feb 2015 23:39:37 +0000"  >&lt;blockquote&gt;&lt;p&gt;1.1-&amp;gt;1.2 with this&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;yes this option makes sense&lt;/p&gt;</comment>
                            <comment id="14305776" author="sushanth" created="Wed, 4 Feb 2015 19:18:55 +0000"  >&lt;p&gt;Xiaobing, could you please update the patch accordingly to make the 0.14-&amp;gt;0.15 upgrade script a 1.1-&amp;gt;1.2 upgrade script?&lt;/p&gt;</comment>
                            <comment id="14523199" author="sushanth" created="Fri, 1 May 2015 13:39:17 +0000"  >&lt;p&gt;Attaching updated patch accounting for version changes (and NOTIFICATION_LOG table in update script)&lt;/p&gt;</comment>
                            <comment id="14523201" author="sushanth" created="Fri, 1 May 2015 13:40:02 +0000"  >&lt;p&gt;(Also attaching patch for branch-1.2)&lt;/p&gt;</comment>
                            <comment id="14523202" author="sushanth" created="Fri, 1 May 2015 13:40:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;, could you please backup review/verify?&lt;/p&gt;</comment>
                            <comment id="14523275" author="thejas" created="Fri, 1 May 2015 14:52:36 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14527268" author="sushanth" created="Mon, 4 May 2015 20:51:46 +0000"  >&lt;p&gt;Looks like we lost a bunch of queued precommit tests over the weekend. Have resubmitted this.&lt;/p&gt;</comment>
                            <comment id="14528029" author="sushanth" created="Tue, 5 May 2015 06:49:55 +0000"  >&lt;p&gt;The precommit tests failed because it took the branch-1.2 attachment as the latest patch to test:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+ grep -q &apos;ATTACHMENT ID: 12729763&apos; /tmp/tmp.O03e6AgB80
+ shopt -s nocasematch
++ basename /jira/secure/attachment/12729763/HIVE-9456.branch-1.2.patch
+ PATCH_NAME=HIVE-9456.branch-1.2.patch
+ [[ HIVE-9456.branch-1.2.patch =~ ^HIVE-[0-9]+(\.[0-9]+)?(-[a-z0-9-]+)?\.(patch|patch.txt)$ ]]
+ [[ HIVE-9456.branch-1.2.patch =~ ^(HIVE-[0-9]+\.)?D[0-9]+(\.[0-9]+)?\.(patch|patch.txt)$ ]]
+ fail &apos;Patch HIVE-9456.branch-1.2.patch does not appear to be a patch&apos;
+ echo &apos;Patch HIVE-9456.branch-1.2.patch does not appear to be a patch&apos;
Patch HIVE-9456.branch-1.2.patch does not appear to be a patch
+ exit 1
+ rm -f /tmp/tmp.O03e6AgB80
Build step &apos;Execute shell&apos; marked build as failure
Archiving artifacts
Recording test results
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Will attempt to resubmit, with the appropriate attachment id 12729762.&lt;/p&gt;</comment>
                            <comment id="14530263" author="sushanth" created="Wed, 6 May 2015 09:47:16 +0000"  >&lt;p&gt;Precommit tests skipped this saying that attachment id 12729762 had also already been tested. As I prepared to upload a .3.patch identical to the .2.patch, I got to thinking - there&apos;s no point in the precommit tests running on this patch - this patch affects only mssql, which the precommit tests do not use.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;, what do you think? Should we go ahead and submit this as-is?&lt;/p&gt;</comment>
                            <comment id="14530919" author="hiveqa" created="Wed, 6 May 2015 17:01:22 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 no tests executed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12730875/HIVE-9456.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12730875/HIVE-9456.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-METASTORE-Test/44/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-METASTORE-Test/44/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-METASTORE-Test/44/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-METASTORE-Test/44/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-METASTORE-Test-44/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-METASTORE-Test-44/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12730875 - PreCommit-HIVE-METASTORE-Test&lt;/p&gt;</comment>
                            <comment id="14530968" author="thejas" created="Wed, 6 May 2015 17:20:32 +0000"  >&lt;p&gt;Agree, precommit tests won&apos;t help for this.&lt;/p&gt;

&lt;p&gt;Note that this is kicking off  PreCommit-HIVE-METASTORE-Test (not the trunk test), however, that does not work with MSSQL AFAIK.&lt;/p&gt;</comment>
                            <comment id="14531077" author="thejas" created="Wed, 6 May 2015 18:10:29 +0000"  >&lt;p&gt;Please go ahead and commit this.&lt;/p&gt;</comment>
                            <comment id="14531083" author="sushanth" created="Wed, 6 May 2015 18:13:00 +0000"  >&lt;p&gt;Thanks, will do.&lt;/p&gt;</comment>
                            <comment id="14531106" author="sushanth" created="Wed, 6 May 2015 18:21:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9456&quot; title=&quot;Make Hive support unicode with MSSQL as Metastore backend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9456&quot;&gt;&lt;del&gt;HIVE-9456&lt;/del&gt;&lt;/a&gt;.3.patch committed to master, and &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-9456&quot; title=&quot;Make Hive support unicode with MSSQL as Metastore backend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-9456&quot;&gt;&lt;del&gt;HIVE-9456&lt;/del&gt;&lt;/a&gt;.branch-1.2.patch committed to branch-1.2.&lt;/p&gt;

&lt;p&gt;Thanks for the review, Thejas, and thanks for the patch, Xiaobing!&lt;/p&gt;</comment>
                            <comment id="14534092" author="lefty@hortonworks.com" created="Fri, 8 May 2015 08:21:16 +0000"  >&lt;p&gt;Does this need documentation?&lt;/p&gt;</comment>
                            <comment id="14548989" author="sushanth" created="Mon, 18 May 2015 19:54:44 +0000"  >&lt;p&gt;This issue has been fixed and released as part of the 1.2.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12763611">HIVE-9208</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12771877">HIVE-9554</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12901087">HIVE-11975</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12694314" name="HIVE-9456.1.patch" size="35502" author="xiaobingo" created="Sat, 24 Jan 2015 01:17:41 +0000"/>
                            <attachment id="12729762" name="HIVE-9456.2.patch" size="55429" author="sushanth" created="Fri, 1 May 2015 13:39:17 +0000"/>
                            <attachment id="12730875" name="HIVE-9456.3.patch" size="55429" author="sushanth" created="Wed, 6 May 2015 16:52:20 +0000"/>
                            <attachment id="12729763" name="HIVE-9456.branch-1.2.patch" size="35278" author="sushanth" created="Fri, 1 May 2015 13:40:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 27 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24qyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>