<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:04:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3872] MAP JOIN  for VIEW throws NULL pointer exception error</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3872</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;I have created a view  as shown below. &lt;/p&gt;

&lt;p&gt;CREATE VIEW V1 AS&lt;br/&gt;
select /*+ MAPJOIN(t1) ,MAPJOIN(t2)  */ t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3 from TABLE1 t1 join TABLE t2 on ( t1.f2= t2.f2 and t1.f3 = t2.f3 and t1.f4 = t2.f4 ) group by t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3&lt;/p&gt;

&lt;p&gt;View get created successfully however when I execute below mentioned SQL or any SQL on the view  get NULLPOINTER exception error&lt;/p&gt;

&lt;p&gt;hive&amp;gt; select count &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/star_yellow.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; from V1;&lt;br/&gt;
FAILED: NullPointerException null&lt;br/&gt;
hive&amp;gt;&lt;/p&gt;

&lt;p&gt;Is there anything wrong with the view creation ?&lt;/p&gt;

&lt;p&gt;Next I created view without MAPJOIN hints &lt;/p&gt;

&lt;p&gt;CREATE VIEW V1 AS&lt;br/&gt;
select  t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3 from TABLE1 t1 join TABLE t2 on ( t1.f2= t2.f2 and t1.f3 = t2.f3 and t1.f4 = t2.f4 ) group by t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3&lt;/p&gt;

&lt;p&gt;Before executing select SQL I excute set  hive.auto.convert.join=true; &lt;/p&gt;

&lt;p&gt;I am getting beloow mentioned warnings&lt;br/&gt;
java.lang.InstantiationException: org.apache.hadoop.hive.ql.parse.ASTNodeOrigin&lt;br/&gt;
Continuing ...&lt;br/&gt;
java.lang.RuntimeException: failed to evaluate: &amp;lt;unbound&amp;gt;=Class.new();&lt;br/&gt;
Continuing ...&lt;/p&gt;


&lt;p&gt;And I see from log that total 5 mapreduce jobs are started however when don&apos;t set auto.convert.join to true, I see only 3 mapreduce jobs getting invoked.&lt;br/&gt;
Total MapReduce jobs = 5&lt;br/&gt;
Ended Job = 1116112419, job is filtered out (removed at runtime).&lt;br/&gt;
Ended Job = -33256989, job is filtered out (removed at runtime).&lt;br/&gt;
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12626729">HIVE-3872</key>
            <summary>MAP JOIN  for VIEW throws NULL pointer exception error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="navis">Navis Ryu</assignee>
                                    <reporter username="santoshachhra">Santosh Achhra</reporter>
                        <labels>
                            <label>HINTS</label>
                            <label>MAPJOIN</label>
                    </labels>
                <created>Wed, 9 Jan 2013 09:25:00 +0000</created>
                <updated>Fri, 24 Jan 2014 17:05:04 +0000</updated>
                            <resolved>Wed, 16 Jan 2013 15:48:36 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>Views</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13554895" author="phabricator@reviews.facebook.net" created="Wed, 16 Jan 2013 10:06:11 +0000"  >&lt;p&gt;navis requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3872&quot; title=&quot;MAP JOIN  for VIEW throws NULL pointer exception error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3872&quot;&gt;&lt;del&gt;HIVE-3872&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; MAP JOIN  for VIEW thorws NULL pointer exception error&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  DPAL-1961 Invalid mapjoin hint throws NPE&lt;/p&gt;

&lt;p&gt;  I have created a view  as shown below.&lt;/p&gt;

&lt;p&gt;  CREATE VIEW V1 AS&lt;br/&gt;
  select /*+ MAPJOIN(t1) ,MAPJOIN(t2)  */ t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3 from TABLE1 t1 join TABLE t2 on ( t1.f2= t2.f2 and t1.f3 = t2.f3 and t1.f4 = t2.f4 ) group by t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3&lt;/p&gt;

&lt;p&gt;  View get created successfully however when I execute below mentioned SQL or any SQL on the view  get NULLPOINTER exception error&lt;/p&gt;

&lt;p&gt;  hive&amp;gt; select count  from V1;&lt;br/&gt;
  FAILED: NullPointerException null&lt;br/&gt;
  hive&amp;gt;&lt;/p&gt;

&lt;p&gt;  Is there anything wrong with the view creation ?&lt;/p&gt;

&lt;p&gt;  Next I created view without MAPJOIN hints&lt;/p&gt;

&lt;p&gt;  CREATE VIEW V1 AS&lt;br/&gt;
  select  t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3 from TABLE1 t1 join TABLE t2 on ( t1.f2= t2.f2 and t1.f3 = t2.f3 and t1.f4 = t2.f4 ) group by t1.f1, t1.f2, t1.f3, t1.f4, t2.f1, t2.f2, t2.f3&lt;/p&gt;

&lt;p&gt;  Before executing select SQL I excute set  hive.auto.convert.join=true;&lt;/p&gt;

&lt;p&gt;  I am getting beloow mentioned warnings&lt;br/&gt;
  java.lang.InstantiationException: org.apache.hadoop.hive.ql.parse.ASTNodeOrigin&lt;br/&gt;
  Continuing ...&lt;br/&gt;
  java.lang.RuntimeException: failed to evaluate: &amp;lt;unbound&amp;gt;=Class.new();&lt;br/&gt;
  Continuing ...&lt;/p&gt;

&lt;p&gt;  And I see from log that total 5 mapreduce jobs are started however when don&apos;t set auto.convert.join to true, I see only 3 mapreduce jobs getting invoked.&lt;br/&gt;
  Total MapReduce jobs = 5&lt;br/&gt;
  Ended Job = 1116112419, job is filtered out (removed at runtime).&lt;br/&gt;
  Ended Job = -33256989, job is filtered out (removed at runtime).&lt;br/&gt;
  WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7965&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;br/&gt;
  ql/src/test/queries/clientnegative/invalid_mapjoin1.q&lt;br/&gt;
  ql/src/test/results/clientnegative/invalid_mapjoin1.q.out&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/19185/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/19185/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, navis&lt;/p&gt;</comment>
                            <comment id="13554896" author="navis" created="Wed, 16 Jan 2013 10:07:34 +0000"  >&lt;p&gt;NPE is thrown while making exception message(At least one of the join alises whould not be map table). Not related to view logic. &lt;/p&gt;</comment>
                            <comment id="13554959" author="namit" created="Wed, 16 Jan 2013 11:52:48 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13554962" author="phabricator@reviews.facebook.net" created="Wed, 16 Jan 2013 11:54:11 +0000"  >&lt;p&gt;njain has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3872&quot; title=&quot;MAP JOIN  for VIEW throws NULL pointer exception error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3872&quot;&gt;&lt;del&gt;HIVE-3872&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; MAP JOIN  for VIEW thorws NULL pointer exception error&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D7965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D7965&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  DPAL-1961&lt;/p&gt;

&lt;p&gt;To: JIRA, njain, navis&lt;/p&gt;</comment>
                            <comment id="13555139" author="namit" created="Wed, 16 Jan 2013 15:48:36 +0000"  >&lt;p&gt;Committed. Thanks Navis&lt;/p&gt;</comment>
                            <comment id="13555241" author="hudson" created="Wed, 16 Jan 2013 17:34:03 +0000"  >&lt;p&gt;Integrated in hive-trunk-hadoop1 #18 (See &lt;a href=&quot;https://builds.apache.org/job/hive-trunk-hadoop1/18/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/hive-trunk-hadoop1/18/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3872&quot; title=&quot;MAP JOIN  for VIEW throws NULL pointer exception error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3872&quot;&gt;&lt;del&gt;HIVE-3872&lt;/del&gt;&lt;/a&gt; MAP JOIN for VIEW thorws NULL pointer exception error&lt;br/&gt;
(Navis via namit) (Revision 1433997)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433997&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433997&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_mapjoin1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_mapjoin1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13555731" author="hudson" created="Thu, 17 Jan 2013 01:30:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1917 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1917/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1917/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3872&quot; title=&quot;MAP JOIN  for VIEW throws NULL pointer exception error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3872&quot;&gt;&lt;del&gt;HIVE-3872&lt;/del&gt;&lt;/a&gt; MAP JOIN for VIEW thorws NULL pointer exception error&lt;br/&gt;
(Navis via namit) (Revision 1433997)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433997&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433997&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_mapjoin1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_mapjoin1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13556006" author="hudson" created="Thu, 17 Jan 2013 09:22:56 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #69 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/69/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/69/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3872&quot; title=&quot;MAP JOIN  for VIEW throws NULL pointer exception error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3872&quot;&gt;&lt;del&gt;HIVE-3872&lt;/del&gt;&lt;/a&gt; MAP JOIN for VIEW thorws NULL pointer exception error&lt;br/&gt;
(Navis via namit) (Revision 1433997)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
namit : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433997&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1433997&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/ErrorMsg.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/optimizer/MapJoinProcessor.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/queries/clientnegative/invalid_mapjoin1.q&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/test/results/clientnegative/invalid_mapjoin1.q.out&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12565104" name="HIVE-3872.D7965.1.patch" size="2443" author="phabricator@reviews.facebook.net" created="Wed, 16 Jan 2013 10:06:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>303345</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 44 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i17alj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>250685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>