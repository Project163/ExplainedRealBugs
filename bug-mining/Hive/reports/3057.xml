<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:29:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-8914] HDFSCleanup thread holds reference to FileSystem</title>
                <link>https://issues.apache.org/jira/browse/HIVE-8914</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;WebHCat server has a long running cleanup thread (HDFSCleanup) which holds a reference to FileSystem. Because of this reference, many FileSystem related objects (e.g. MetricsSystemImpl) cannot be garbage collected. Sometimes this causes OOM exception. Since the cleanup is done every 12 hours by default, we can simply recreate a FileSystem when we need to use it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12756447">HIVE-8914</key>
            <summary>HDFSCleanup thread holds reference to FileSystem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="shanyu">shanyu zhao</assignee>
                                    <reporter username="shanyu">shanyu zhao</reporter>
                        <labels>
                    </labels>
                <created>Wed, 19 Nov 2014 16:36:12 +0000</created>
                <updated>Thu, 12 Feb 2015 23:41:16 +0000</updated>
                            <resolved>Wed, 14 Jan 2015 02:47:03 +0000</resolved>
                                    <version>0.13.1</version>
                                    <fixVersion>1.1.0</fixVersion>
                                    <component>WebHCat</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14218103" author="shanyu" created="Wed, 19 Nov 2014 16:40:20 +0000"  >&lt;p&gt;Patch attached.&lt;/p&gt;</comment>
                            <comment id="14219900" author="ekoifman" created="Thu, 20 Nov 2014 20:05:21 +0000"  >&lt;p&gt;I see that new FileSystem is created but never closed so I don&apos;t see how this addresses the issue.  &lt;/p&gt;</comment>
                            <comment id="14221314" author="shanyu" created="Fri, 21 Nov 2014 19:29:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;ekoifman&lt;/a&gt; We are using a local variable fs inside the while loop, so at the end of while loop the local variable can be garbage collected. When the process is running low in memory, it will run garbage collection that eventually close the file system. This solves the problem when fs is declared outside of the while loop so that fs can never get garbage collected. Does it make sense?&lt;/p&gt;</comment>
                            <comment id="14221317" author="ekoifman" created="Fri, 21 Nov 2014 19:33:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shanyu&quot; class=&quot;user-hover&quot; rel=&quot;shanyu&quot;&gt;shanyu&lt;/a&gt;, are you arguing that you don&apos;t need to call &lt;tt&gt;FileSystem.close()&lt;/tt&gt; or &lt;tt&gt;closeAll()&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="14221550" author="shanyu" created="Fri, 21 Nov 2014 23:03:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ekoifman&quot; class=&quot;user-hover&quot; rel=&quot;ekoifman&quot;&gt;ekoifman&lt;/a&gt; Please see the updated patch that calls close() explicitly on the filesystem object.&lt;/p&gt;</comment>
                            <comment id="14223400" author="ekoifman" created="Mon, 24 Nov 2014 19:45:34 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14276410" author="ekoifman" created="Wed, 14 Jan 2015 02:47:03 +0000"  >&lt;p&gt;Thanks for the contribution &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=shanyu&quot; class=&quot;user-hover&quot; rel=&quot;shanyu&quot;&gt;shanyu&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12682989" name="HIVE-8194.1.patch" size="1408" author="shanyu" created="Fri, 21 Nov 2014 23:27:17 +0000"/>
                            <attachment id="12682433" name="HIVE-8914.patch" size="1066" author="shanyu" created="Wed, 19 Nov 2014 16:40:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 45 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22kbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>