<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:03:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3560] Hive always prints a warning message when using remote metastore</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3560</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;This issue was discovered in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2585&quot; title=&quot;Collapse hive.metastore.uris and hive.metastore.local&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2585&quot;&gt;&lt;del&gt;HIVE-2585&lt;/del&gt;&lt;/a&gt; and more details about why this issue was filed are available there.&lt;/p&gt;

&lt;p&gt;Currently if one sets &lt;tt&gt;hive.metastore.uris&lt;/tt&gt; the following error will always be displayed:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2012-07-24 15:23:58,647 [main] WARN org.apache.hadoop.hive.conf.HiveConf - DEPRECATED: Configuration property hive.metastore.local no longer has any effect. Make sure to provide a valid value &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hive.metastore.uris &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; you are connecting to a remote metastore.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The reason is &lt;tt&gt;javax.jdo.option.ConnectionURL&lt;/tt&gt; has a default value and will never be null. I set this property in &lt;tt&gt;hive-site.xml&lt;/tt&gt; and walked through the configuration loading in a debugger. If the value is not empty it takes effect, and is ignored if empty.&lt;/p&gt;

&lt;p&gt;Since &lt;tt&gt;javax.jdo.option.ConnectionURL&lt;/tt&gt; has a default and cannot be unset, this warning will always be printed if someone sets &lt;tt&gt;hive.metastore.uris&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Per the review comments, the error message was added to reduce user confusion, and prevent surprises by using the wrong metastore (either embedded or remote). In &lt;tt&gt;HiveMetaStoreClient.java&lt;/tt&gt; we see a very clear info message printed saying that a remote metastore is used.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Trying to connect to metastore with URI &quot;&lt;/span&gt; + store);
...
LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Connected to metastore.&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Since we clearly communicate to the user that a remote metastore at the given URI is being used we&apos;ll remove that message. Additionally, to further clarify a remote metastore is used I&apos;ll make the following HiveMetaStoreClient logging change:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Trying to connect to remote HiveMetaStore: &quot;&lt;/span&gt; + store);
...
LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Connected to remote HiveMetaStore: &quot;&lt;/span&gt; + store);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The change is at debug level we print connection attempts, and always print which remote HiveMetaStore we actually connected to.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12611061">HIVE-3560</key>
            <summary>Hive always prints a warning message when using remote metastore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="traviscrawford">Travis Crawford</assignee>
                                    <reporter username="traviscrawford">Travis Crawford</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Oct 2012 20:39:41 +0000</created>
                <updated>Thu, 10 Jan 2013 19:53:55 +0000</updated>
                            <resolved>Wed, 14 Nov 2012 02:57:50 +0000</resolved>
                                    <version>0.10.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13477322" author="traviscrawford" created="Tue, 16 Oct 2012 20:34:50 +0000"  >&lt;p&gt;Looking at this patch with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=pengfeng&quot; class=&quot;user-hover&quot; rel=&quot;pengfeng&quot;&gt;pengfeng&lt;/a&gt; he had the good suggestion we should log the &quot;Trying to connect&quot; line at the same level as the &quot;Connected&quot; line. The reason is for making calls out to another service we should always have the start/end log messages at the same level or higher, so they can be matched up in the logs.&lt;/p&gt;</comment>
                            <comment id="13496298" author="ashutoshc" created="Tue, 13 Nov 2012 16:22:18 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13496789" author="ashutoshc" created="Wed, 14 Nov 2012 02:57:50 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Travis!&lt;/p&gt;</comment>
                            <comment id="13497118" author="hudson" created="Wed, 14 Nov 2012 14:17:41 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1795 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1795/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1795/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3560&quot; title=&quot;Hive always prints a warning message when using remote metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3560&quot;&gt;&lt;del&gt;HIVE-3560&lt;/del&gt;&lt;/a&gt; : Hive always prints a warning message when using remote metastore (Travis Crawford via Ashutosh Chauhan) (Revision 1409066)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1409066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1409066&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548034" author="hudson" created="Wed, 9 Jan 2013 10:24:08 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3560&quot; title=&quot;Hive always prints a warning message when using remote metastore&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3560&quot;&gt;&lt;del&gt;HIVE-3560&lt;/del&gt;&lt;/a&gt; : Hive always prints a warning message when using remote metastore (Travis Crawford via Ashutosh Chauhan) (Revision 1409066)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
hashutosh : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1409066&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1409066&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/common/src/java/org/apache/hadoop/hive/conf/HiveConf.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/HiveMetaStoreClient.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/metastore/src/java/org/apache/hadoop/hive/metastore/MetaStoreUtils.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/metadata/Hive.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13550238" author="ashutoshc" created="Thu, 10 Jan 2013 19:53:55 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12531722">HIVE-2585</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12549356" name="HIVE-3560_logging_tweaks.1.patch" size="3522" author="traviscrawford" created="Tue, 16 Oct 2012 18:21:41 +0000"/>
                            <attachment id="12549378" name="HIVE-3560_logging_tweaks.2.patch" size="3521" author="traviscrawford" created="Tue, 16 Oct 2012 20:34:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>246497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07pzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42976</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>