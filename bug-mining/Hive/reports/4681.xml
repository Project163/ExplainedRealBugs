<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:45:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-13872] Vectorization: Fix cross-product reduce sink serialization</title>
                <link>https://issues.apache.org/jira/browse/HIVE-13872</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TPC-DS Q13 produces a cross-product without CBO simplifying the query&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.RuntimeException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; STRING entry: batchIndex 0 projection column num 1
        at org.apache.hadoop.hive.ql.exec.vector.VectorExtractRow.nullBytesReadError(VectorExtractRow.java:349)
        at org.apache.hadoop.hive.ql.exec.vector.VectorExtractRow.extractRowColumn(VectorExtractRow.java:267)
        at org.apache.hadoop.hive.ql.exec.vector.VectorExtractRow.extractRow(VectorExtractRow.java:343)
        at org.apache.hadoop.hive.ql.exec.vector.VectorReduceSinkOperator.process(VectorReduceSinkOperator.java:103)
        at org.apache.hadoop.hive.ql.exec.Operator.forward(Operator.java:837)
        at org.apache.hadoop.hive.ql.exec.TableScanOperator.process(TableScanOperator.java:130)
        at org.apache.hadoop.hive.ql.exec.vector.VectorMapOperator.process(VectorMapOperator.java:762)
        ... 18 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Simplified query&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;set hive.cbo.enable=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;

-- explain

select count(1)  
 from store_sales
     ,customer_demographics
 where (
( 
  customer_demographics.cd_demo_sk = store_sales.ss_cdemo_sk
  and customer_demographics.cd_marital_status = &lt;span class=&quot;code-quote&quot;&gt;&apos;M&apos;&lt;/span&gt;
     )or
     (
   customer_demographics.cd_demo_sk = ss_cdemo_sk
  and customer_demographics.cd_marital_status = &lt;span class=&quot;code-quote&quot;&gt;&apos;U&apos;&lt;/span&gt;
     ))
;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Map 3 
            Map Operator Tree:
                TableScan
                  alias: customer_demographics
                  Statistics: Num rows: 1920800 Data size: 717255532 Basic stats: COMPLETE Column stats: NONE
                  Reduce Output Operator
                    sort order: 
                    Statistics: Num rows: 1920800 Data size: 717255532 Basic stats: COMPLETE Column stats: NONE
                    value expressions: cd_demo_sk (type: &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;), cd_marital_status (type: string)
            Execution mode: vectorized, llap
            LLAP IO: all inputs
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12973291">HIVE-13872</key>
            <summary>Vectorization: Fix cross-product reduce sink serialization</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mmccline">Matt McCline</assignee>
                                    <reporter username="gopalv">Gopal Vijayaraghavan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 27 May 2016 03:57:24 +0000</created>
                <updated>Tue, 27 Feb 2024 22:23:58 +0000</updated>
                            <resolved>Thu, 23 Jun 2016 10:42:40 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>Vectorization</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15303480" author="gopalv" created="Fri, 27 May 2016 04:54:07 +0000"  >&lt;p&gt;AFAIK, the issue is that the column pruner removes the nearly all columns from the TableScan, but the VectorizationContext does not realize the needed columns list because there&apos;s no SEL operator in the middle to indicate the project of the 2 columns.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2016-05-27T00:52:21,575 INFO  [IO-Elevator-&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-22[attempt_1462788318414_0308_24_00_000002_3]]: LlapIoImpl (:()) - Processing data &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; hdfs:&lt;span class=&quot;code-comment&quot;&gt;//cn108-10.l42scl.hortonworks.com:8020/apps/hive/warehouse/tpcds_bin_partitioned_orc_200.db/customer_demographics/000003_0
&lt;/span&gt;2016-05-27T00:52:21,613 WARN  [TezTaskRunner[attempt_1462788318414_0308_24_00_000001_3]]: vector.VectorReduceSinkOperator (:()) - &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; inspectors = org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector&amp;lt;org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableIntObjectInspector@395562d2,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableStringObjectInspector@7cedb0fe,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableStringObjectInspector@7cedb0fe,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableStringObjectInspector@7cedb0fe,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableIntObjectInspector@395562d2,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableStringObjectInspector@7cedb0fe,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableIntObjectInspector@395562d2,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableIntObjectInspector@395562d2,org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableIntObjectInspector@395562d2&amp;gt;
2016-05-27T00:52:21,613 WARN  [TezTaskRunner[attempt_1462788318414_0308_24_00_000001_3]]: vector.VectorReduceSinkOperator (:()) - Projected columns = 0, 1, 2, 3, 4, 5, 6, 7, 8, 
2016-05-27T00:52:21,614 ERROR [TezTaskRunner[attempt_1462788318414_0308_24_00_000001_3]]: tez.MapRecordSource (:()) - org.apache.hadoop.hive.ql.metadata.HiveException: Hive &lt;span class=&quot;code-object&quot;&gt;Runtime&lt;/span&gt; Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; processing row 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15303808" author="gopalv" created="Fri, 27 May 2016 09:23:04 +0000"  >&lt;p&gt;The patch clearly breaks TEXT vectorization, which relies on this column count to vectorize readers.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2016-05-27T05:13:14,391 INFO  [main]: physical.Vectorizer (:()) - Validating MapWork...
2016-05-27T05:13:14,391 INFO  [main]: physical.Vectorizer (:()) - Vectorizer path: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//sandbox.hortonworks.com:8020/tmp/tpcds_dataset/200/200/item, vector map &lt;span class=&quot;code-keyword&quot;&gt;operator&lt;/span&gt; read type VECTOR_DESERIALIZE, input file format &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;name org.apache.hadoop.mapred.TextInputFormat, deserialize type LAZY_SIMPLE, aliases [item]
&lt;/span&gt;2016-05-27T05:13:14,391 INFO  [main]: physical.Vectorizer (:()) - Could not vectorize partition hdfs:&lt;span class=&quot;code-comment&quot;&gt;//sandbox.hortonworks.com:8020/tmp/tpcds_dataset/200/200/item (deserializer org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe)The partition column names 22 is greater than the number of table columns 2&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15303842" author="gopalv" created="Fri, 27 May 2016 09:48:16 +0000"  >&lt;p&gt;Indirectly, this means that non-projected columns from TEXT are actually decoded and discarded in vectorized mode, possibly making that slower than the lazy decoding done with LazySimple.&lt;/p&gt;</comment>
                            <comment id="15303858" author="mmccline" created="Fri, 27 May 2016 10:01:19 +0000"  >&lt;p&gt;LazySimpleDeserializeRead.readCheckNull does use a columnsToInclude feature to skip and not decode the contents of unwanted fields.  The parse does scan for the field separators.  Also, VectorMapOperator attempts to truncate the included column array on the right (not sure if this is working).&lt;/p&gt;</comment>
                            <comment id="15303866" author="gopalv" created="Fri, 27 May 2016 10:05:33 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;mmccline&lt;/a&gt;, will check whether it&apos;s getting lost as a transient or something.&lt;/p&gt;</comment>
                            <comment id="15303972" author="gopalv" created="Fri, 27 May 2016 11:53:25 +0000"  >&lt;p&gt;After a quick night of debugging, the columnsToIncludeTruncated shows up as NULL in my tests.&lt;/p&gt;

&lt;p&gt;Quick suspicion on the initialization order for &lt;tt&gt;dataColumnCount&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-comment&quot;&gt;// The setupPartitionContextVars uses the prior read type to flush the prior deserializerBatch,
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// so set it here to none.
&lt;/span&gt;    currentReadType = VectorMapOperatorReadType.NONE;

    determineColumnsToInclude(hconf);
 ...
     dataColumnCount = batchContext.getDataColumnCount();
    partitionColumnCount = batchContext.getPartitionColumnCount();
    partitionValues = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[partitionColumnCount];
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;while determineColumnsToInclude uses the parameter, which is always zero.&lt;/p&gt;</comment>
                            <comment id="15304019" author="gopalv" created="Fri, 27 May 2016 12:46:48 +0000"  >&lt;p&gt;Is worse than I expected - the configuration objects do not have the projection &amp;amp; filters set before it goes into the MapOperator initialization.&lt;/p&gt;

&lt;p&gt;Only code which lies beneath HiveInputFormat can access it, since pushProjectionAndFilters needs to be called before this information transfers from the TableScan into the Configuration object.&lt;/p&gt;</comment>
                            <comment id="15308356" author="jcamacho" created="Tue, 31 May 2016 18:58:57 +0000"  >&lt;p&gt;Removing 2.1.0 target as issue is not tagged as Critical/Blocker and the RC will be created tomorrow. Please feel free to commit to branch-2.1 anyway and fix for 2.1.0 if this happens before the release.&lt;/p&gt;</comment>
                            <comment id="15337820" author="mmccline" created="Sat, 18 Jun 2016 12:46:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=gopalv&quot; class=&quot;user-hover&quot; rel=&quot;gopalv&quot;&gt;gopalv&lt;/a&gt; I&apos;m trying to get a repro for the &quot;RuntimeException: null STRING entry&quot;.&lt;/p&gt;

&lt;p&gt;The attached Q file vector_include_no_sel.q has the suggested query.&lt;/p&gt;

&lt;p&gt;Add customer_demographics.txt to data/files&lt;/p&gt;

&lt;p&gt;Map 1 shows the characteristic we want: TableScan then ReduceSink.&lt;/p&gt;

&lt;p&gt;But no failure???&lt;/p&gt;</comment>
                            <comment id="15338251" author="mmccline" created="Sat, 18 Jun 2016 23:06:47 +0000"  >&lt;p&gt;I wonder if it is as simple as the first table doesn&apos;t have any strings.&lt;/p&gt;</comment>
                            <comment id="15338285" author="mmccline" created="Sun, 19 Jun 2016 00:04:52 +0000"  >&lt;p&gt;Updated with Tex Q out file and Q that does drive the customer_demographics through Map 1 for the small table.  Still no luck.&lt;/p&gt;</comment>
                            <comment id="15338394" author="gopalv" created="Sun, 19 Jun 2016 05:40:48 +0000"  >&lt;p&gt;This is failing in my LLAP instances running with the latest master.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;cd itests &amp;amp;&amp;amp; mvn clean package -Dtest=TestMiniLlapCliDriver &apos;-Dqfile=vector_include_no_sel.q&apos; -Dtest.output.overwrite=true -Phadoop-2&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Can you add a log line inside VectorReduceSinkOperator to print the total # of projected columns? &lt;/p&gt;

&lt;p&gt;If that prints out all the columns in  vContext.getProjectedColumns() instead of the 2 which were generated by TableScan, your test is triggering the same.&lt;/p&gt;</comment>
                            <comment id="15338944" author="hiveqa" created="Mon, 20 Jun 2016 03:37:35 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12811717/HIVE-13872.01.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12811717/HIVE-13872.01.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 22 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_acid_globallimit
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_constantPropagateForSubQuery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_repair
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_subquery_multiinsert
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vectorized_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mergejoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vec_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_part
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_schema_evol_text_vecrow_mapwork_table
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_leftsemi_mapjoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_mr_diff_schema_alias
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_table_nonprintable
org.apache.hadoop.hive.ql.metadata.TestHiveMetaStoreChecker.testPartitionsCheck
org.apache.hadoop.hive.ql.metadata.TestHiveMetaStoreChecker.testTableCheck
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/184/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/184/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/184/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/184/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-184/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-184/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 22 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12811717 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15339934" author="hiveqa" created="Mon, 20 Jun 2016 17:14:54 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12811798/HIVE-13872.02.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12811798/HIVE-13872.02.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 19 failed/errored test(s), 10238 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_constantPropagateForSubQuery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables_compact
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_13
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_repair
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_stats_list_bucket
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_vectorized_ptf
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_windowing_streaming
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vector_include_no_sel
org.apache.hadoop.hive.cli.TestMiniLlapCliDriver.testCliDriver_vectorized_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_mergejoin
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_include_no_sel
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vector_mr_diff_schema_alias
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_dynamic_partition_pruning
org.apache.hadoop.hive.cli.TestMiniTezCliDriver.testCliDriver_vectorized_ptf
org.apache.hadoop.hive.cli.TestMinimrCliDriver.testCliDriver_table_nonprintable
org.apache.hadoop.hive.cli.TestSparkCliDriver.testCliDriver_vectorized_ptf
org.apache.hadoop.hive.ql.metadata.TestHiveMetaStoreChecker.testPartitionsCheck
org.apache.hadoop.hive.ql.metadata.TestHiveMetaStoreChecker.testTableCheck
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/191/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/191/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/191/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/191/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-191/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-191/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 19 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12811798 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15343009" author="mmccline" created="Tue, 21 Jun 2016 23:15:40 +0000"  >&lt;p&gt;Nonsense errors in console output for build of patch #3.&lt;/p&gt;</comment>
                            <comment id="15343014" author="gopalv" created="Tue, 21 Jun 2016 23:20:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mmccline&quot; class=&quot;user-hover&quot; rel=&quot;mmccline&quot;&gt;mmccline&lt;/a&gt;: I don&apos;t see a test run for 03.patch?? &lt;/p&gt;

&lt;p&gt;My build went through fine &amp;amp; I confirmed that the LLAP instance does not cache any unprojected column in this case.&lt;/p&gt;</comment>
                            <comment id="15343018" author="mmccline" created="Tue, 21 Jun 2016 23:23:19 +0000"  >&lt;p&gt;I looked at &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/207/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/207/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;No Hive QA report was produced.&lt;/p&gt;</comment>
                            <comment id="15343020" author="mmccline" created="Tue, 21 Jun 2016 23:23:55 +0000"  >&lt;p&gt;Thanks for checking the patch out.&lt;/p&gt;</comment>
                            <comment id="15344791" author="hiveqa" created="Wed, 22 Jun 2016 17:34:42 +0000"  >

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12812331/HIVE-13872.04.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12812331/HIVE-13872.04.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 due to 1 test(s) being added or modified.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 5 failed/errored test(s), 10255 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_constantPropagateForSubQuery
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_index_auto_mult_tables
org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_list_bucket_dml_12
org.apache.hadoop.hive.cli.TestMiniSparkOnYarnCliDriver.testCliDriver_index_bitmap3
org.apache.hive.jdbc.TestJdbcWithMiniLlap.testLlapInputFormatEndToEnd
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/221/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/221/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/221/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-HIVE-MASTER-Build/221/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-221/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-50-18-27-0.us-west-1.compute.amazonaws.com/logs/PreCommit-HIVE-MASTER-Build-221/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.TestCheckPhase
Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 5 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12812331 - PreCommit-HIVE-MASTER-Build&lt;/p&gt;</comment>
                            <comment id="15345382" author="mmccline" created="Wed, 22 Jun 2016 23:23:17 +0000"  >&lt;p&gt;Failures look unrelated.&lt;/p&gt;</comment>
                            <comment id="15345439" author="gopalv" created="Wed, 22 Jun 2016 23:54:48 +0000"  >&lt;p&gt;LGTM - +1.&lt;/p&gt;

&lt;p&gt;minor nit &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;+        ColumnVector colVector = batch.cols[i];
+        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (colVector != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
+          batch.cols[i].reset();
+          batch.cols[i].ensureSize((&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;) batchSize, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
+          fields[i].nextVector(batch.cols[i], &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, batchSize);
+        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the code inside the condition is clearer if it uses the condition variable.&lt;/p&gt;</comment>
                            <comment id="15345690" author="mmccline" created="Thu, 23 Jun 2016 04:02:35 +0000"  >&lt;p&gt;Thank you Gopal for the review!&lt;/p&gt;</comment>
                            <comment id="15345691" author="mmccline" created="Thu, 23 Jun 2016 04:03:13 +0000"  >&lt;p&gt;Merge conflicts with &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-13617&quot; title=&quot;LLAP: support non-vectorized execution in IO&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-13617&quot;&gt;&lt;del&gt;HIVE-13617&lt;/del&gt;&lt;/a&gt;.  Re-running Hive QA to make sure.&lt;/p&gt;</comment>
                            <comment id="15346244" author="mmccline" created="Thu, 23 Jun 2016 10:42:07 +0000"  >&lt;p&gt;Ran internal PTest on patch #5.  No related failures.&lt;/p&gt;</comment>
                            <comment id="15346245" author="mmccline" created="Thu, 23 Jun 2016 10:42:18 +0000"  >&lt;p&gt;Committed to master.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12811717" name="HIVE-13872.01.patch" size="97878" author="mmccline" created="Sun, 19 Jun 2016 17:11:28 +0000"/>
                            <attachment id="12811798" name="HIVE-13872.02.patch" size="104642" author="mmccline" created="Mon, 20 Jun 2016 11:18:36 +0000"/>
                            <attachment id="12812084" name="HIVE-13872.03.patch" size="102430" author="mmccline" created="Tue, 21 Jun 2016 04:11:11 +0000"/>
                            <attachment id="12812331" name="HIVE-13872.04.patch" size="102430" author="mmccline" created="Tue, 21 Jun 2016 23:17:31 +0000"/>
                            <attachment id="12812708" name="HIVE-13872.05.patch" size="102958" author="mmccline" created="Thu, 23 Jun 2016 04:03:47 +0000"/>
                            <attachment id="12806584" name="HIVE-13872.WIP.patch" size="1155" author="gopalv" created="Fri, 27 May 2016 07:06:03 +0000"/>
                            <attachment id="12811689" name="customer_demographics.txt" size="6962" author="mmccline" created="Sun, 19 Jun 2016 00:03:53 +0000"/>
                            <attachment id="12811690" name="vector_include_no_sel.q" size="3009" author="mmccline" created="Sun, 19 Jun 2016 00:03:53 +0000"/>
                            <attachment id="12811691" name="vector_include_no_sel.q.out" size="16166" author="mmccline" created="Sun, 19 Jun 2016 00:03:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ykuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12335837">2.2.0</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>