<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:53:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-635] UnionOperator fails when different inputs have different ObjectInspector (but the same TypeInfo)</title>
                <link>https://issues.apache.org/jira/browse/HIVE-635</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;The current UnionOperator code assumes the ObjectInspectors from all parents are the same.&lt;br/&gt;
But in reality, they can be different, and UnionOperator needs to do conversion if necessary.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12430406">HIVE-635</key>
            <summary>UnionOperator fails when different inputs have different ObjectInspector (but the same TypeInfo)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zshao">Zheng Shao</assignee>
                                    <reporter username="zshao">Zheng Shao</reporter>
                        <labels>
                    </labels>
                <created>Tue, 14 Jul 2009 19:01:58 +0000</created>
                <updated>Sat, 17 Dec 2011 00:07:46 +0000</updated>
                            <resolved>Thu, 16 Jul 2009 01:54:27 +0000</resolved>
                                    <version>0.3.0</version>
                                    <fixVersion>0.4.0</fixVersion>
                                    <component>Query Processor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12731237" author="zshao" created="Wed, 15 Jul 2009 01:16:51 +0000"  >&lt;p&gt;This patch fixes the problem.&lt;/p&gt;</comment>
                            <comment id="12731628" author="namit" created="Wed, 15 Jul 2009 18:56:34 +0000"  >&lt;p&gt;Do you want  the common case where all input object inspectors are same ?&lt;br/&gt;
Currently, the outputRow will always be created&lt;/p&gt;</comment>
                            <comment id="12731740" author="zshao" created="Wed, 15 Jul 2009 23:29:21 +0000"  >&lt;p&gt;Good idea.&lt;/p&gt;

&lt;p&gt;This patch makes sure UnionOperator does not touch the row if it&apos;s already in the format wanted.&lt;/p&gt;

&lt;p&gt;The following log verifies that.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ant test -Dhadoop.version=0.17.0 -Dtestcase=TestCliDriver -Dtest.silent=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; -Dqfile=union21.q
...
    [junit] 09/07/15 16:27:22 INFO exec.UnionOperator: parent 4 initialized
    [junit] 09/07/15 16:27:22 INFO exec.UnionOperator: start Initializing 2
    [junit] 09/07/15 16:27:22 INFO exec.UnionOperator: Initializing Self 2
    [junit] 09/07/15 16:27:22 INFO exec.UnionOperator: Union Operator needs to transform row from parent[2] from org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector&amp;lt;org.apache.hadoop.hive.serde2.lazy.objectinspector.primitive.LazyStringObjectInspector@c970c0e&amp;gt; to org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector&amp;lt;org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableStringObjectInspector@549b6220&amp;gt;
    [junit] 09/07/15 16:27:22 INFO exec.UnionOperator: Union Operator needs to transform row from parent[3] from org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector&amp;lt;org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaStringObjectInspector@5e2c17f7&amp;gt; to org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector&amp;lt;org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableStringObjectInspector@549b6220&amp;gt;
    [junit] 09/07/15 16:27:22 INFO exec.UnionOperator: Union Operator needs to transform row from parent[4] from org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector&amp;lt;org.apache.hadoop.hive.serde2.objectinspector.primitive.JavaStringObjectInspector@5e2c17f7&amp;gt; to org.apache.hadoop.hive.serde2.objectinspector.StandardStructObjectInspector&amp;lt;org.apache.hadoop.hive.serde2.objectinspector.primitive.WritableStringObjectInspector@549b6220&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12731749" author="prasadc" created="Wed, 15 Jul 2009 23:53:41 +0000"  >&lt;p&gt;zheng, can you add this context as a comment to initializeOp() code? otherwise it will be difficult to understand what is going on.&lt;/p&gt;</comment>
                            <comment id="12731754" author="namit" created="Thu, 16 Jul 2009 00:28:18 +0000"  >&lt;p&gt;+1&lt;br/&gt;
looks good - will merge after the comments requested by Prasad&lt;/p&gt;</comment>
                            <comment id="12731758" author="zshao" created="Thu, 16 Jul 2009 00:45:04 +0000"  >&lt;p&gt;Added comments to initializeOp method, explaining the logic of doing transformation or not.&lt;/p&gt;</comment>
                            <comment id="12731767" author="namit" created="Thu, 16 Jul 2009 01:54:27 +0000"  >&lt;p&gt;Committed. Thanks Zheng&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12413508" name="HIVE-635.1.patch" size="17281" author="zshao" created="Wed, 15 Jul 2009 01:16:51 +0000"/>
                            <attachment id="12413615" name="HIVE-635.3.patch" size="17921" author="zshao" created="Wed, 15 Jul 2009 23:30:30 +0000"/>
                            <attachment id="12413618" name="HIVE-635.4.patch" size="18396" author="zshao" created="Thu, 16 Jul 2009 00:45:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>73397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 19 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0laxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>122420</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>