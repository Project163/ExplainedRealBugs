<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:02:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3413] Fix pdk.PluginTest on hadoop23</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3413</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When running Hive test on Hadoop0.23, pdk.PluginTest is failing:&lt;/p&gt;

&lt;p&gt;test:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hive.pdk.PluginTest&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_172375530.txt&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Total MapReduce jobs = 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Launching Job 1 out of 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Number of reduce tasks determined at compile time: 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; In order to change the average load for a reducer (in bytes):&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; In order to limit the maximum number of reducers:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   set hive.exec.reducers.max=&amp;lt;number&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; In order to set a constant number of reducers:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   set mapred.reduce.tasks=&amp;lt;number&amp;gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Execution log at: /tmp/cloudera/cloudera_20120828184545_6deeb166-7dd4-40d3-9ff7-c5d5277aee39.log&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:123)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:85)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:78)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapred.JobClient.init(JobClient.java:487)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.mapred.JobClient.&amp;lt;init&amp;gt;(JobClient.java:466)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:424)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:688)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;     at org.apache.hadoop.util.RunJar.main(RunJar.java:200)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Job Submission failed with exception &apos;java.io.IOException(Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.)&apos;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Execution failed with exit status: 1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Obtaining error information&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task failed!&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Task ID:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;   Stage-1&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Logs:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt;&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; /tmp/cloudera/hive.log&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask]&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 33.9 sec&lt;/p&gt;

&lt;p&gt;With details in ./build/builtins/TEST-org.apache.hive.pdk.PluginTest.txt:&lt;/p&gt;


&lt;p&gt;Testsuite: org.apache.hive.pdk.PluginTest&lt;br/&gt;
Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 33.9 sec&lt;br/&gt;
------------- Standard Error -----------------&lt;br/&gt;
GLOBAL SETUP:  Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/onerow&lt;br/&gt;
Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/iris&lt;br/&gt;
org.apache.hive.builtins.UDAFUnionMap TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_840355011.txt&lt;br/&gt;
GLOBAL TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_252250000.txt&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 6.874 seconds&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.512 seconds&lt;br/&gt;
------------- ---------------- ---------------&lt;/p&gt;

&lt;p&gt;Testcase: SELECT size(UNION_MAP(MAP(sepal_width, sepal_length))) FROM iris took 4.428 sec&lt;br/&gt;
    FAILED&lt;br/&gt;
expected:&amp;lt;&lt;span class=&quot;error&quot;&gt;&amp;#91;23&amp;#93;&lt;/span&gt;&amp;gt; but was:&amp;lt;[&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281845_172375530.txt&lt;br/&gt;
Total MapReduce jobs = 1&lt;br/&gt;
Launching Job 1 out of 1&lt;br/&gt;
Number of reduce tasks determined at compile time: 1&lt;br/&gt;
In order to change the average load for a reducer (in bytes):&lt;br/&gt;
  set hive.exec.reducers.bytes.per.reducer=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to limit the maximum number of reducers:&lt;br/&gt;
  set hive.exec.reducers.max=&amp;lt;number&amp;gt;&lt;br/&gt;
In order to set a constant number of reducers:&lt;br/&gt;
  set mapred.reduce.tasks=&amp;lt;number&amp;gt;&lt;br/&gt;
WARNING: org.apache.hadoop.metrics.jvm.EventCounter is deprecated. Please use org.apache.hadoop.log.metrics.EventCounter in all the log4j.properties files.&lt;br/&gt;
Execution log at: /tmp/cloudera/cloudera_20120828184545_6deeb166-7dd4-40d3-9ff7-c5d5277aee39.log&lt;br/&gt;
java.io.IOException: Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.&lt;br/&gt;
    at org.apache.hadoop.mapreduce.Cluster.initialize(Cluster.java:123)&lt;br/&gt;
    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:85)&lt;br/&gt;
    at org.apache.hadoop.mapreduce.Cluster.&amp;lt;init&amp;gt;(Cluster.java:78)&lt;br/&gt;
    at org.apache.hadoop.mapred.JobClient.init(JobClient.java:487)&lt;br/&gt;
    at org.apache.hadoop.mapred.JobClient.&amp;lt;init&amp;gt;(JobClient.java:466)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.exec.ExecDriver.execute(ExecDriver.java:424)&lt;br/&gt;
    at org.apache.hadoop.hive.ql.exec.ExecDriver.main(ExecDriver.java:688)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
    at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
    at org.apache.hadoop.util.RunJar.main(RunJar.java:200)&lt;br/&gt;
Job Submission failed with exception &apos;java.io.IOException(Cannot initialize Cluster. Please check your configuration for mapreduce.framework.name and the correspond server addresses.)&apos;&lt;br/&gt;
Execution failed with exit status: 1&lt;br/&gt;
Obtaining error information&lt;/p&gt;

&lt;p&gt;Task failed!&lt;br/&gt;
Task ID:&lt;br/&gt;
  Stage-1&lt;/p&gt;

&lt;p&gt;Logs:&lt;/p&gt;

&lt;p&gt;/tmp/cloudera/hive.log&lt;/p&gt;</description>
                <environment></environment>
        <key id="12605327">HIVE-3413</key>
            <summary>Fix pdk.PluginTest on hadoop23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zhenxiao">Zhenxiao Luo</assignee>
                                    <reporter username="zhenxiao">Zhenxiao Luo</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Aug 2012 02:11:56 +0000</created>
                <updated>Thu, 10 Jan 2013 19:52:59 +0000</updated>
                            <resolved>Tue, 4 Sep 2012 08:01:34 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.10.0</fixVersion>
                                    <component>Tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13443753" author="zhenxiao" created="Wed, 29 Aug 2012 02:16:45 +0000"  >&lt;p&gt;There are two problems with this bug:&lt;/p&gt;

&lt;p&gt;#1. Missing Dependency:&lt;br/&gt;
The compile and test classpath in pdk/scripts/build-plugin.xml is based on build/ivy/lib/default, the following dependencies are missing when building hive-exec*.jar:&lt;/p&gt;

&lt;p&gt;hadoop-mapreduce-client-jobclient&lt;br/&gt;
hadoop-minicluster&lt;/p&gt;

&lt;p&gt;This dependency should be added to ql/ivy.xml, which is the place for hive-exec dependencies.&lt;/p&gt;

&lt;p&gt;Note that hadoop-mapreduce-client-jobclient dependency should be updated by just changing the jar placement. putting the jar in build/ivy/lib/test/ would not be included in pdk PluginTest classpath.&lt;/p&gt;

&lt;p&gt;#2. After fixing #1, the following log4j warning message appears in the output stream, which fails the testcase(pdk PluginTest diffs expected output with the output stream):&lt;/p&gt;

&lt;p&gt;test:&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Running org.apache.hive.pdk.PluginTest&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2012-08-28 19:05:20,679 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2012-08-28 19:05:20,680 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; 2]3&amp;gt;)&lt;br/&gt;
    &lt;span class=&quot;error&quot;&gt;&amp;#91;junit&amp;#93;&lt;/span&gt; Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 42.318 sec&lt;/p&gt;


&lt;p&gt;And the details in: ./build/builtins/TEST-org.apache.hive.pdk.PluginTest.txt&lt;/p&gt;

&lt;p&gt;Testsuite: org.apache.hive.pdk.PluginTest&lt;br/&gt;
Tests run: 1, Failures: 1, Errors: 0, Time elapsed: 42.318 sec&lt;br/&gt;
------------- Standard Error -----------------&lt;br/&gt;
GLOBAL SETUP:  Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/onerow.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/onerow&lt;br/&gt;
Copying file: &lt;a href=&quot;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/home/cloudera/Code/hive2/builtins/test/iris.txt&lt;/a&gt;&lt;br/&gt;
Deleted /home/cloudera/Code/hive2/build/builtins/warehouse/iris&lt;br/&gt;
org.apache.hive.builtins.UDAFUnionMap TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281905_427044653.txt&lt;br/&gt;
GLOBAL TEARDOWN:&lt;br/&gt;
Hive history file=/tmp/cloudera/hive_job_log_cloudera_201208281905_95794698.txt&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 6.585 seconds&lt;br/&gt;
OK&lt;br/&gt;
Time taken: 0.415 seconds&lt;br/&gt;
------------- ---------------- ---------------&lt;/p&gt;

&lt;p&gt;Testcase: SELECT size(UNION_MAP(MAP(sepal_width, sepal_length))) FROM iris took 9.435 sec&lt;br/&gt;
    FAILED&lt;br/&gt;
expected:&amp;lt;2[]3&amp;gt; but was:&amp;lt;2[012-08-28 19:05:20,464 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.HiveConf (HiveConf.java:&amp;lt;clinit&amp;gt;(75)) - hive-site.xml not found on CLASSPATH&lt;br/&gt;
2012-08-28 19:05:20,679 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.&lt;br/&gt;
2012-08-28 19:05:20,680 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.&lt;br/&gt;
2]3&amp;gt;&lt;br/&gt;
junit.framework.ComparisonFailure: expected:&amp;lt;2[]3&amp;gt; but was:&amp;lt;2[012-08-28 19:05:20,464 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.HiveConf (HiveConf.java:&amp;lt;clinit&amp;gt;(75)) - hive-site.xml not found on CLASSPATH&lt;br/&gt;
2012-08-28 19:05:20,679 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.retry.interval;  Ignoring.&lt;br/&gt;
2012-08-28 19:05:20,680 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; conf.Configuration (Configuration.java:loadProperty(1621)) - &lt;a href=&quot;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/tmp/cloudera/hive_2012-08-28_19-05-17_531_4347419252405007581/-local-10002/jobconf.xml:an&lt;/a&gt; attempt to override final parameter: mapreduce.job.end-notification.max.attempts;  Ignoring.&lt;br/&gt;
2]3&amp;gt;&lt;br/&gt;
    at org.apache.hive.pdk.PluginTest.runTest(PluginTest.java:59)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;br/&gt;
    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)&lt;br/&gt;
    at junit.extensions.TestSetup$1.protect(TestSetup.java:23)&lt;br/&gt;
    at junit.extensions.TestSetup.run(TestSetup.java:27)&lt;/p&gt;

&lt;p&gt;This warning is printed to console, since it happens before hive configure its log4j(which happens in HiveConf.java static initialization), and hadoop&apos;s default log4j configuration is INFA,console. This does not happen on previous branches, since on hadoop0.23, there are code execution path change, and these warnings just appeared when running hive on hadoop0.23.&lt;/p&gt;

&lt;p&gt;My proposed solution is to configure hadoop log4j, so that its warning message are printed to the log file, instead of printing on the console, log4j.properties file is added, which configure hadoop log4j to be DEBUG,DRFA.&lt;/p&gt;

&lt;p&gt;A new log4j.properties file is added, not using hive-log4j.properties, because:&lt;/p&gt;

&lt;p&gt;##1 this is for hadoop log4j configuration, not for hive log4j configuration(which configuration file named hive-log4j.properties), it might be possible for us to have different configuration for each&lt;/p&gt;

&lt;p&gt;##2 hadoop defaults to find the configuration named log4j.properties(there is no such named file existed in hive configuration data)&lt;/p&gt;

&lt;p&gt;I still take log file named hive.log, not hadoop.log, since these warning info are actually from running hive.&lt;/p&gt;

&lt;p&gt;To make the pdk test running OK, without a full hive installation, I put the new log4j.properties file in pdk test directory.&lt;/p&gt;</comment>
                            <comment id="13443764" author="zhenxiao" created="Wed, 29 Aug 2012 02:40:15 +0000"  >&lt;p&gt;review request submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13443765" author="zhenxiao" created="Wed, 29 Aug 2012 02:41:22 +0000"  >&lt;p&gt;A quick note, to build hive on hadoop23:&lt;br/&gt;
$ant very-clean package.-Dhadoop.version=0.23.1 -Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23&lt;/p&gt;

&lt;p&gt;And run test:&lt;br/&gt;
$ant test -Dhadoop.version=0.23.1.-Dhadoop-0.23.version=0.23.1 -Dhadoop.mr.rev=23&lt;/p&gt;</comment>
                            <comment id="13443923" author="cwsteinbach" created="Wed, 29 Aug 2012 09:08:31 +0000"  >&lt;p&gt;@Zhenxiao: Please see my comments on phabricator.&lt;/p&gt;</comment>
                            <comment id="13444353" author="zhenxiao" created="Wed, 29 Aug 2012 19:46:17 +0000"  >&lt;p&gt;There is an error in my Jira ticket comment, actually, not necessary to put these dependencies in compile-&amp;gt;default&lt;/p&gt;

&lt;p&gt;pdk/scripts/build-plugin.xml has the following line(line 125):&lt;br/&gt;
  &amp;lt;fileset dir=&quot;${build.ivy.lib.dir}/test&quot; includes=&quot;&lt;b&gt;.jar&quot; excludes=&quot;hive&lt;/b&gt;.jar&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;which makes the build/ivy/lib/test directory also included in its test running classpath.&lt;br/&gt;
As Carl pointed, putting the dependency in compile-&amp;gt;default will break 0.20 build. It should be put into hadoop0.23.test&lt;/p&gt;

&lt;p&gt;@Carl: my updated patch is submitted at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13445520" author="zhenxiao" created="Fri, 31 Aug 2012 00:42:30 +0000"  >&lt;p&gt;the missing hadoop-minicluster dependency should not go into ql/ivy.xml.&lt;br/&gt;
It should be in hadoop23.test, putting into build/ivy/lib/test&lt;br/&gt;
pdk plugin test is triggered via builtin/build.xml&lt;br/&gt;
add the dependency in builtin/ivy.xml, and also update builtin/build.xml,&lt;br/&gt;
so that ivy-retrieve-test dependency is added to target test&lt;/p&gt;

&lt;p&gt;Updated patch submitted for review at:&lt;br/&gt;
&lt;a href=&quot;https://reviews.facebook.net/D5001&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D5001&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13445728" author="cwsteinbach" created="Fri, 31 Aug 2012 06:46:14 +0000"  >&lt;p&gt;+1. Will commit if tests pass.&lt;/p&gt;</comment>
                            <comment id="13447548" author="cwsteinbach" created="Tue, 4 Sep 2012 08:01:34 +0000"  >&lt;p&gt;Committed to trunk. Thanks Zhenxiao!&lt;/p&gt;</comment>
                            <comment id="13447695" author="hudson" created="Tue, 4 Sep 2012 13:55:58 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1645 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1645/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1645/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3413&quot; title=&quot;Fix pdk.PluginTest on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3413&quot;&gt;&lt;del&gt;HIVE-3413&lt;/del&gt;&lt;/a&gt;. Fix pdk.PluginTest on hadoop23 (Zhenxiao Luo via cws) (Revision 1380478)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf/log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13548037" author="hudson" created="Wed, 9 Jan 2013 10:24:09 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3413&quot; title=&quot;Fix pdk.PluginTest on hadoop23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3413&quot;&gt;&lt;del&gt;HIVE-3413&lt;/del&gt;&lt;/a&gt;. Fix pdk.PluginTest on hadoop23 (Zhenxiao Luo via cws) (Revision 1380478)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
cws : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1380478&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/builtins/build.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/builtins/ivy.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/scripts/build-plugin.xml&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf&lt;/li&gt;
	&lt;li&gt;/hive/trunk/pdk/test-plugin/test/conf/log4j.properties&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13549998" author="ashutoshc" created="Thu, 10 Jan 2013 19:52:59 +0000"  >&lt;p&gt;This issue is fixed and released as part of 0.10.0 release. If you find an issue which seems to be related to this one, please create a new jira and link this one with new jira.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12606303">HIVE-3435</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12542888" name="HIVE-3413.1.patch.txt" size="5463" author="zhenxiao" created="Wed, 29 Aug 2012 02:41:36 +0000"/>
                            <attachment id="12542970" name="HIVE-3413.2.patch.txt" size="4987" author="zhenxiao" created="Wed, 29 Aug 2012 19:46:33 +0000"/>
                            <attachment id="12543209" name="HIVE-3413.3.patch.txt" size="5565" author="zhenxiao" created="Fri, 31 Aug 2012 00:44:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>242362</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i02u3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14479</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>