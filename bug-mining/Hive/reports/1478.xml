<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:09:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-5225] There is no database named nonexistentdatabaseusedforhealthcheck</title>
                <link>https://issues.apache.org/jira/browse/HIVE-5225</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;HiveClientCache.CacheableHiveMetaStoreClient.isOpen() tries to do a health status check of the connection.  This causes the following exception to be written to the log file.  It needlessly pollutes the log file and cause alarm for customers.&lt;/p&gt;

&lt;p&gt;The exception itself is produced by the metastore so the client can&apos;t suppress it.&lt;/p&gt;

&lt;p&gt;Metastore should not log this since this is clearly a user error.  It should instead throw an exception to the client (or return an error some other way).&lt;/p&gt;

&lt;p&gt;13/09/05 12:04:38 ERROR metastore.RetryingHMSHandler: NoSuchObjectException(message:There is no database named nonexistentdatabaseusedforhealthcheck)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.ObjectStore.getMDatabase(ObjectStore.java:429)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.ObjectStore.getDatabase(ObjectStore.java:439)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.RetryingRawStore.invoke(RetryingRawStore.java:124)&lt;br/&gt;
	at $Proxy9.getDatabase(Unknown Source)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.HiveMetaStore$HMSHandler.get_database(HiveMetaStore.java:627)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.RetryingHMSHandler.invoke(RetryingHMSHandler.java:103)&lt;br/&gt;
	at $Proxy10.get_database(Unknown Source)&lt;br/&gt;
	at org.apache.hadoop.hive.metastore.HiveMetaStoreClient.getDatabase(HiveMetaStoreClient.java:810)&lt;br/&gt;
	at org.apache.hive.hcatalog.common.HiveClientCache$CacheableHiveMetaStoreClient.isOpen(HiveClientCache.java:276)&lt;br/&gt;
	at org.apache.hive.hcatalog.common.HiveClientCache.get(HiveClientCache.java:146)&lt;br/&gt;
	at org.apache.hive.hcatalog.common.HCatUtil.getHiveClient(HCatUtil.java:544)&lt;br/&gt;
	at org.apache.hive.hcatalog.mapreduce.FileOutputCommitterContainer.cancelDelegationTokens(FileOutputCommitterContainer.java:728)&lt;br/&gt;
	at org.apache.hive.hcatalog.mapreduce.FileOutputCommitterContainer.commitJob(FileOutputCommitterContainer.java:228)&lt;br/&gt;
	at org.apache.hive.hcatalog.mapreduce.HCatMapReduceTest.runMRCreate(HCatMapReduceTest.java:306)&lt;br/&gt;
	at org.apache.hive.hcatalog.mapreduce.TestHCatDynamicPartitioned.runHCatDynamicPartitionedTable(TestHCatDynamicPartitioned.java:118)&lt;br/&gt;
	at org.apache.hive.hcatalog.mapreduce.TestHCatDynamicPartitioned.testHCatDynamicPartitionedTable(TestHCatDynamicPartitioned.java:104)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:300)&lt;br/&gt;
	at junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)&lt;br/&gt;
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:523)&lt;br/&gt;
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1063)&lt;br/&gt;
	at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:914)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12667137">HIVE-5225</key>
            <summary>There is no database named nonexistentdatabaseusedforhealthcheck</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sershe">Sergey Shelukhin</assignee>
                                    <reporter username="ekoifman">Eugene Koifman</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Sep 2013 16:47:04 +0000</created>
                <updated>Wed, 11 Sep 2013 22:25:32 +0000</updated>
                            <resolved>Wed, 11 Sep 2013 00:50:04 +0000</resolved>
                                    <version>0.11.0</version>
                                    <fixVersion>0.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13759729" author="sershe" created="Fri, 6 Sep 2013 01:12:51 +0000"  >&lt;p&gt;it&apos;s useful to log these, there can be user errors that are useful to see in logs; also there can be metastore bug that looks to metastore like user error (for example, some error in JDO filter parsing).&lt;/p&gt;

&lt;p&gt;I think the code that does this check should be changed to do it differently.&lt;/p&gt;</comment>
                            <comment id="13759741" author="ekoifman" created="Fri, 6 Sep 2013 01:19:21 +0000"  >&lt;p&gt;One possibility is using something like dropTable(&quot;nonexistenttable&quot;) with ifExists options - that should avoid the stack trace&lt;/p&gt;</comment>
                            <comment id="13759745" author="sershe" created="Fri, 6 Sep 2013 01:24:20 +0000"  >&lt;p&gt;The problem with that is that if it exists, it will be dropped... I linked jira which I coincidentally filed today morning. This class has access to all the HiveMetastoreClient calls, so it can remember the name of existing database and call getDatabase on it instead&lt;/p&gt;</comment>
                            <comment id="13762454" author="phabricator@reviews.facebook.net" created="Mon, 9 Sep 2013 23:35:54 +0000"  >&lt;p&gt;sershe requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5225&quot; title=&quot;There is no database named nonexistentdatabaseusedforhealthcheck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5225&quot;&gt;&lt;del&gt;HIVE-5225&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; There is no database named nonexistentdatabaseusedforhealthcheck&quot;.&lt;/p&gt;

&lt;p&gt;Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;Replace with getDatabases, which should not cause the error&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D12831&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D12831&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/30759/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/30759/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To: JIRA, sershe&lt;/p&gt;</comment>
                            <comment id="13762822" author="navis" created="Tue, 10 Sep 2013 07:43:05 +0000"  >&lt;p&gt;+1 &lt;/p&gt;</comment>
                            <comment id="13763785" author="navis" created="Wed, 11 Sep 2013 00:50:04 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Sergey!&lt;/p&gt;</comment>
                            <comment id="13763920" author="brocknoland" created="Wed, 11 Sep 2013 03:33:26 +0000"  >&lt;p&gt;Hey guys, this caused a checkstyle failure in Hcatalog. I submitted for this &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5266&quot; title=&quot;HCatalog checkstyle failure due to HIVE-5225&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5266&quot;&gt;&lt;del&gt;HIVE-5266&lt;/del&gt;&lt;/a&gt;. It also modifies org.apache.hcatalog.commong.HiveClientCache to do this same as this change.&lt;/p&gt;</comment>
                            <comment id="13764077" author="hudson" created="Wed, 11 Sep 2013 07:42:04 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop1-ptest #161 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/161/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop1-ptest/161/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5225&quot; title=&quot;There is no database named nonexistentdatabaseusedforhealthcheck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5225&quot;&gt;&lt;del&gt;HIVE-5225&lt;/del&gt;&lt;/a&gt; : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13764097" author="hudson" created="Wed, 11 Sep 2013 08:06:07 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-hadoop2-ptest #94 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/94/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2-ptest/94/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5225&quot; title=&quot;There is no database named nonexistentdatabaseusedforhealthcheck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5225&quot;&gt;&lt;del&gt;HIVE-5225&lt;/del&gt;&lt;/a&gt; : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13764233" author="hudson" created="Wed, 11 Sep 2013 11:50:23 +0000"  >&lt;p&gt;FAILURE: Integrated in Hive-trunk-h0.21 #2324 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2324/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2324/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5225&quot; title=&quot;There is no database named nonexistentdatabaseusedforhealthcheck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5225&quot;&gt;&lt;del&gt;HIVE-5225&lt;/del&gt;&lt;/a&gt; : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13764875" author="hudson" created="Wed, 11 Sep 2013 22:25:32 +0000"  >&lt;p&gt;ABORTED: Integrated in Hive-trunk-hadoop2 #421 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/421/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/421/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5225&quot; title=&quot;There is no database named nonexistentdatabaseusedforhealthcheck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5225&quot;&gt;&lt;del&gt;HIVE-5225&lt;/del&gt;&lt;/a&gt; : There is no database named nonexistentdatabaseusedforhealthcheck (Sergey Shelukhin via Navis) (navis: &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1521704&lt;/a&gt;)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/hcatalog/core/src/main/java/org/apache/hive/hcatalog/common/HiveClientCache.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12667157">HIVE-5228</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12667972">HIVE-5266</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12602233" name="HIVE-5225.D12831.1.patch" size="865" author="phabricator@reviews.facebook.net" created="Mon, 9 Sep 2013 23:35:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347074</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1nuk7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>347373</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>