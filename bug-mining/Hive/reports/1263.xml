<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:06:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-4498] TestBeeLineWithArgs.testPositiveScriptFile fails</title>
                <link>https://issues.apache.org/jira/browse/HIVE-4498</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;TestBeeLineWithArgs.testPositiveScriptFile fails -&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   [junit] 0: jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000&amp;gt; &amp;gt;&amp;gt;&amp;gt; STARTED testBreakOnErrorScriptFile
&lt;/span&gt;    [junit] Output: Connecting to jdbc:hive2:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10000
&lt;/span&gt;    [junit] Connected to: Hive (version 0.12.0-SNAPSHOT)
    [junit] Driver: Hive (version 0.12.0-SNAPSHOT)
    [junit] Transaction isolation: TRANSACTION_REPEATABLE_READ
    [junit] Beeline version 0.12.0-SNAPSHOT by Apache Hive
    [junit] +----------------+
    [junit] | database_name  |
    [junit] +----------------+
    [junit] +----------------+
    [junit] No rows selected (0.899 seconds)
    [junit] Closing: org.apache.hive.jdbc.HiveConnection
    [junit]
    [junit] &amp;gt;&amp;gt;&amp;gt; FAILED testPositiveScriptFile (ERROR) (2s)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12646069">HIVE-4498</key>
            <summary>TestBeeLineWithArgs.testPositiveScriptFile fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thejas">Thejas Nair</assignee>
                                    <reporter username="thejas">Thejas Nair</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 May 2013 00:52:38 +0000</created>
                <updated>Thu, 16 May 2013 21:10:16 +0000</updated>
                            <resolved>Sat, 11 May 2013 14:54:19 +0000</resolved>
                                                    <fixVersion>0.11.0</fixVersion>
                                    <component>CLI</component>
                    <component>HiveServer2</component>
                    <component>JDBC</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13648960" author="thejas" created="Sat, 4 May 2013 00:55:20 +0000"  >&lt;p&gt;This test was introduced in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4268&quot; title=&quot;Beeline should support the -f option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4268&quot;&gt;&lt;del&gt;HIVE-4268&lt;/del&gt;&lt;/a&gt; .&lt;/p&gt;</comment>
                            <comment id="13652530" author="hagleitn" created="Wed, 8 May 2013 23:51:39 +0000"  >&lt;p&gt;Now that the build doesn&apos;t fail earlier anymore this problem is causing the build to fail. Since we&apos;ve disabled BeeLine tests I guess we can disable this one too?&lt;/p&gt;</comment>
                            <comment id="13652539" author="hagleitn" created="Wed, 8 May 2013 23:57:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=robw&quot; class=&quot;user-hover&quot; rel=&quot;robw&quot;&gt;robw&lt;/a&gt; do you want to take a look?&lt;/p&gt;</comment>
                            <comment id="13652550" author="cwsteinbach" created="Thu, 9 May 2013 00:09:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Since we&apos;ve disabled BeeLine tests I guess we can disable this one too?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;No, I think it would be better to fix TestBeeLineWithArgs (which isn&apos;t actually broken), and re-enable a comprehensive subset of the other HiveServer2 tests, unless of course the plan is to let HiveServer2 rot until it&apos;s completely broken.&lt;/p&gt;

&lt;p&gt;TestBeeLineWithArgs was committed in &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4268&quot; title=&quot;Beeline should support the -f option&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4268&quot;&gt;&lt;del&gt;HIVE-4268&lt;/del&gt;&lt;/a&gt;, but it wasn&apos;t enabled until I committed &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4497&quot; title=&quot;beeline module tests don&amp;#39;t get run by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4497&quot;&gt;&lt;del&gt;HIVE-4497&lt;/del&gt;&lt;/a&gt; the other day. &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4356&quot; title=&quot;remove duplicate impersonation parameters for hiveserver2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4356&quot;&gt;&lt;del&gt;HIVE-4356&lt;/del&gt;&lt;/a&gt; was committed in between, and that&apos;s the actual source of the bug.&lt;/p&gt;

&lt;p&gt;Gunther, can you please take a look at this? Thanks.&lt;/p&gt;</comment>
                            <comment id="13652554" author="cwsteinbach" created="Thu, 9 May 2013 00:11:53 +0000"  >&lt;p&gt;This is a blocker for 0.11 since &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4356&quot; title=&quot;remove duplicate impersonation parameters for hiveserver2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4356&quot;&gt;&lt;del&gt;HIVE-4356&lt;/del&gt;&lt;/a&gt; is included on that branch.&lt;/p&gt;</comment>
                            <comment id="13652594" author="hagleitn" created="Thu, 9 May 2013 00:39:07 +0000"  >&lt;p&gt;I haven&apos;t actually touched &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4356&quot; title=&quot;remove duplicate impersonation parameters for hiveserver2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4356&quot;&gt;&lt;del&gt;HIVE-4356&lt;/del&gt;&lt;/a&gt;. That&apos;s Thejas&apos; work. I believe Ashutosh mistakenly put my name in the commit log. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; do you have any ideas?&lt;/p&gt;</comment>
                            <comment id="13652616" author="thejas" created="Thu, 9 May 2013 01:10:05 +0000"  >&lt;p&gt;Sure, looking into it.&lt;/p&gt;</comment>
                            <comment id="13652650" author="thejas" created="Thu, 9 May 2013 01:39:32 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4498&quot; title=&quot;TestBeeLineWithArgs.testPositiveScriptFile fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4498&quot;&gt;&lt;del&gt;HIVE-4498&lt;/del&gt;&lt;/a&gt;.1.patch - TUGIContainingProcessor calls  shim.closeAllForUGI() to free up entries from FileSystem.CACHE. But that ends resulting in the empty result being fetched in the next call.&lt;/p&gt;

&lt;p&gt;The best way to fix the memory leak, in my opinion is to just disable the FileSystem cache.  See &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4501&quot; title=&quot;HS2 memory leak - FileSystem objects in FileSystem.CACHE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4501&quot;&gt;&lt;del&gt;HIVE-4501&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="13652652" author="thejas" created="Thu, 9 May 2013 01:44:03 +0000"  >&lt;p&gt;Review board link - &lt;a href=&quot;https://reviews.apache.org/r/11017/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/11017/&lt;/a&gt; &lt;br/&gt;
I think we should also get &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4501&quot; title=&quot;HS2 memory leak - FileSystem objects in FileSystem.CACHE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4501&quot;&gt;&lt;del&gt;HIVE-4501&lt;/del&gt;&lt;/a&gt; into hive 0.11, ie disable cache by default, so that there is no memory leak with default configs.&lt;/p&gt;
</comment>
                            <comment id="13652802" author="cwsteinbach" created="Thu, 9 May 2013 07:40:03 +0000"  >&lt;p&gt;@Thejas: Thanks for providing a patch. I verified that it fixes the problem. I also took a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4356&quot; title=&quot;remove duplicate impersonation parameters for hiveserver2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4356&quot;&gt;&lt;del&gt;HIVE-4356&lt;/del&gt;&lt;/a&gt; and left some comments on the original reviewboard request here: &lt;a href=&quot;https://reviews.apache.org/r/10554/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/10554/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I would really appreciate it if you take a look. Thanks.&lt;/p&gt;</comment>
                            <comment id="13652829" author="cwsteinbach" created="Thu, 9 May 2013 09:21:51 +0000"  >&lt;p&gt;+1. If someone else can test this that would be great.&lt;/p&gt;</comment>
                            <comment id="13654725" author="thejas" created="Fri, 10 May 2013 18:53:36 +0000"  >&lt;p&gt;Carl, Thanks for the review.&lt;br/&gt;
I will go through your comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4356&quot; title=&quot;remove duplicate impersonation parameters for hiveserver2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4356&quot;&gt;&lt;del&gt;HIVE-4356&lt;/del&gt;&lt;/a&gt;, but I don&apos;t think I will be able to get to it today.&lt;/p&gt;
</comment>
                            <comment id="13654746" author="cwsteinbach" created="Fri, 10 May 2013 19:07:02 +0000"  >&lt;p&gt;Thanks. My comments all fall into the nice-to-have category, so there&apos;s no need to worry about it now.&lt;/p&gt;</comment>
                            <comment id="13654810" author="owen.omalley" created="Fri, 10 May 2013 20:40:36 +0000"  >&lt;p&gt;I&apos;m starting up tests now and will commit it if they pass.&lt;/p&gt;</comment>
                            <comment id="13655292" author="owen.omalley" created="Sat, 11 May 2013 14:54:19 +0000"  >&lt;p&gt;I just committed this. Thanks, Thejas!&lt;/p&gt;</comment>
                            <comment id="13655333" author="hudson" created="Sat, 11 May 2013 18:18:37 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #2098 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/2098/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/2098/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4498&quot; title=&quot;TestBeeLineWithArgs.testPositiveScriptFile fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4498&quot;&gt;&lt;del&gt;HIVE-4498&lt;/del&gt;&lt;/a&gt; TestBeeLineWithArgs.testPositiveScriptFile fails (Thejas Nair via omalley) (Revision 1481345)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
omalley : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1481345&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1481345&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hive/service/auth/TUGIContainingProcessor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13655486" author="hudson" created="Sun, 12 May 2013 07:32:32 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #193 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/193/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/193/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-4498&quot; title=&quot;TestBeeLineWithArgs.testPositiveScriptFile fails&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-4498&quot;&gt;&lt;del&gt;HIVE-4498&lt;/del&gt;&lt;/a&gt; TestBeeLineWithArgs.testPositiveScriptFile fails (Thejas Nair via omalley) (Revision 1481345)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
omalley : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1481345&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1481345&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk&lt;/li&gt;
	&lt;li&gt;/hive/trunk/service/src/java/org/apache/hive/service/auth/TUGIContainingProcessor.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12646502">HIVE-4517</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12639913">HIVE-4268</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12642486">HIVE-4356</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12582409" name="HIVE-4498.1.patch" size="752" author="thejas" created="Thu, 9 May 2013 01:39:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326427</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kbcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326772</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>