<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 17:57:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-1712] Migrating metadata from derby to mysql thrown NullPointerException</title>
                <link>https://issues.apache.org/jira/browse/HIVE-1712</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Exported derby data to csv, loaded data into mysql and ran hive query which worked in derby and got the following exception&lt;/p&gt;

&lt;p&gt;2010-10-16 08:57:29,080 INFO  metastore.ObjectStore (ObjectStore.java:setConf(106)) - Initialized ObjectStore&lt;br/&gt;
2010-10-16 08:57:29,552 INFO  metastore.HiveMetaStore (HiveMetaStore.java:logStartFunction(171)) - 0: get_table : db=default tbl=testimport&lt;br/&gt;
2010-10-16 08:57:30,140 ERROR metadata.Hive (Hive.java:getTable(395)) - java.lang.NullPointerException&lt;br/&gt;
        at java.util.Hashtable.put(Hashtable.java:394)&lt;br/&gt;
        at java.util.Hashtable.putAll(Hashtable.java:466)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.MetaStoreUtils.getSchema(MetaStoreUtils.java:520)&lt;br/&gt;
        at org.apache.hadoop.hive.metastore.MetaStoreUtils.getSchema(MetaStoreUtils.java:489)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:381)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.metadata.Hive.getTable(Hive.java:333)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.getMetaData(SemanticAnalyzer.java:683)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.SemanticAnalyzer.analyzeInternal(SemanticAnalyzer.java:5200)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer.analyze(BaseSemanticAnalyzer.java:105)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.compile(Driver.java:275)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.runCommand(Driver.java:320)&lt;br/&gt;
        at org.apache.hadoop.hive.ql.Driver.run(Driver.java:312)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processCmd(CliDriver.java:123)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.processLine(CliDriver.java:181)&lt;br/&gt;
        at org.apache.hadoop.hive.cli.CliDriver.main(CliDriver.java:287)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12477376">HIVE-1712</key>
            <summary>Migrating metadata from derby to mysql thrown NullPointerException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bterm">JCF</assignee>
                                    <reporter username="bterm">JCF</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Oct 2010 17:17:44 +0000</created>
                <updated>Fri, 16 Dec 2011 23:59:52 +0000</updated>
                            <resolved>Thu, 11 Nov 2010 18:55:16 +0000</resolved>
                                    <version>0.5.0</version>
                    <version>0.6.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>Metastore</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12921034" author="bterm" created="Thu, 14 Oct 2010 17:30:05 +0000"  >&lt;p&gt;Tracked down the issue to the SERDE_PARAMS table which in the mysql create statement has  `PARAM_VALUE` default NULL.  The values that are saved to the db when hive loads the data are blank, when exported from derby they are blank in the csv, and when imported into mysql are defaulted to NULL. This NULL value when picked up by MetaStoreUtils is not being caught and causes the NullPointerException&lt;/p&gt;</comment>
                            <comment id="12921124" author="bterm" created="Thu, 14 Oct 2010 21:05:48 +0000"  >&lt;p&gt;bug is is in the jdo.  issue is that schema in meatadatautils is a java properties which extends from a hashtable which doesnt allow null values in map. So when the map from the db is added to the schema with putall() it gets the NullPointerException. This would occur for any item that is a map type in the jdo (serde_params, sd_params, partition_params, table_params)&lt;/p&gt;</comment>
                            <comment id="12921422" author="bterm" created="Fri, 15 Oct 2010 16:17:19 +0000"  >&lt;p&gt;This will replace a null valued key from the parameter map with a empty string when adding it to the schema properties. Fixes the Error in semantic analysis: java.lang.NullPointerException. May also be beneficial to look at adding allow-nulls=&quot;false&quot; default-value=&quot;&quot; to the jdo map types to prevent this case from occuring on an import from derby.&lt;/p&gt;</comment>
                            <comment id="12921578" author="namit" created="Fri, 15 Oct 2010 22:33:04 +0000"  >&lt;p&gt;@Paul, can you take a look ?&lt;/p&gt;</comment>
                            <comment id="12928842" author="pauly" created="Fri, 5 Nov 2010 21:57:04 +0000"  >&lt;p&gt;That there were some updates/cleanup of that section in MetaStoreUtils and the patch no longer applies cleanly. Could you regenerate the patch?&lt;/p&gt;</comment>
                            <comment id="12929626" author="bterm" created="Mon, 8 Nov 2010 16:43:20 +0000"  >&lt;p&gt;rebase of patch against trunk r1032602&lt;/p&gt;</comment>
                            <comment id="12929627" author="bterm" created="Mon, 8 Nov 2010 16:44:04 +0000"  >&lt;p&gt;Patch rebased against trunk r1032602&lt;/p&gt;</comment>
                            <comment id="12930443" author="pauly" created="Wed, 10 Nov 2010 02:13:00 +0000"  >&lt;p&gt;+1 looks good, will test/commit&lt;/p&gt;</comment>
                            <comment id="12931132" author="pauly" created="Thu, 11 Nov 2010 18:55:07 +0000"  >&lt;p&gt;Committed. Thanks Jake! We&apos;ll add you as a contributor so we can assign this issue to you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12457273" name="hive-1712.patch" size="821" author="bterm" created="Fri, 15 Oct 2010 16:25:52 +0000"/>
                            <attachment id="12459066" name="hive-1712_rebase.patch" size="709" author="bterm" created="Mon, 8 Nov 2010 16:43:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72754</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 2 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lgif:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>123325</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>