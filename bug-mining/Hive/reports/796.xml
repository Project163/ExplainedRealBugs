<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:00:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-2838] cleanup readentity/writeentity</title>
                <link>https://issues.apache.org/jira/browse/HIVE-2838</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Ideally, there should be one common entity instead of readentity/writeentity.&lt;/p&gt;

&lt;p&gt;Unfortunately, that would be a backward incompatible change since users os hive might have written&lt;br/&gt;
there own hooks, where they are using readentity/writeentity.&lt;br/&gt;
We should atleast create a common class, and then we can deprecate read/write entity later, for a new release.&lt;/p&gt;

&lt;p&gt;For now, I propose to make a backward compatible change.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12545099">HIVE-2838</key>
            <summary>cleanup readentity/writeentity</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="namit">Namit Jain</assignee>
                                    <reporter username="namit">Namit Jain</reporter>
                        <labels>
                    </labels>
                <created>Sun, 4 Mar 2012 17:20:21 +0000</created>
                <updated>Wed, 9 Jan 2013 10:24:21 +0000</updated>
                            <resolved>Fri, 9 Mar 2012 04:18:24 +0000</resolved>
                                                    <fixVersion>0.9.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13222760" author="ashutoshc" created="Mon, 5 Mar 2012 23:24:23 +0000"  >&lt;p&gt;@Namit,&lt;br/&gt;
Can you briefly explain why there should be one common entity instead of read/write entity?&lt;/p&gt;</comment>
                            <comment id="13225400" author="namit" created="Thu, 8 Mar 2012 19:02:31 +0000"  >&lt;p&gt;There is a lot of common stuff between ReadEntity and WriteEntity - table, partition, type etc.&lt;br/&gt;
If you look at the code, it is ~80% same.&lt;/p&gt;

&lt;p&gt;Chances are the custom hooks that you are writing for processing readEntity and writeEntity are similar, and &lt;br/&gt;
are duplicating a lot of logic.&lt;/p&gt;

&lt;p&gt;I was proposing the following:&lt;/p&gt;

&lt;p&gt;Common Class (Entity)&lt;/p&gt;

&lt;p&gt;Both ReadEntity and WriteEntity extend Entity.&lt;/p&gt;


&lt;p&gt;Nothing needs to be changed for existing hooks.&lt;/p&gt;</comment>
                            <comment id="13225404" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 19:05:57 +0000"  >&lt;p&gt;njain requested code review of &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; cleanup readentity/writeentity&quot;.&lt;br/&gt;
Reviewers: JIRA&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/HIVE-2838&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt; Cleaup  read/write Entities&lt;/p&gt;

&lt;p&gt;  Ideally, there should be one common entity instead of readentity/writeentity.&lt;/p&gt;

&lt;p&gt;  Unfortunately, that would be a backward incompatible change since users os hive might have written&lt;br/&gt;
  there own hooks, where they are using readentity/writeentity.&lt;br/&gt;
  We should atleast create a common class, and then we can deprecate read/write entity later, for a new release.&lt;/p&gt;

&lt;p&gt;  For now, I propose to make a backward compatible change.&lt;/p&gt;

&lt;p&gt;TEST PLAN&lt;br/&gt;
  EMPTY&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2193&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/WriteEntity.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/ReadEntity.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java&lt;/p&gt;

&lt;p&gt;MANAGE HERALD DIFFERENTIAL RULES&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/view/differential/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/view/differential/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WHY DID I GET THIS EMAIL?&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/herald/transcript/4815/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/herald/transcript/4815/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Tip: use the X-Herald-Rules header to filter Herald messages in your client.&lt;/p&gt;</comment>
                            <comment id="13225441" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 19:49:56 +0000"  >&lt;p&gt;kevinwilfong has requested changes to the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; cleanup readentity/writeentity&quot;.&lt;/p&gt;

&lt;p&gt;  The code looks good.&lt;/p&gt;

&lt;p&gt;  Noticed a few relics left over from WriteEntity in the comments in Entity.&lt;/p&gt;

&lt;p&gt;INLINE COMMENTS&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java:30-31 Could you fix this comment.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java:37 This one too.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java:70 Could you split this into two.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java:133 Could you change written to to accessed or something like that.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java:152 here too.&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java:180 here too.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2193&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13225526" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 21:15:56 +0000"  >&lt;p&gt;njain updated the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; cleanup readentity/writeentity&quot;.&lt;br/&gt;
Reviewers: JIRA, kevinwilfong&lt;/p&gt;

&lt;p&gt;  Comments&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2193&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;AFFECTED FILES&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/WriteEntity.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/ReadEntity.java&lt;br/&gt;
  ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java&lt;/p&gt;</comment>
                            <comment id="13225622" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 22:39:56 +0000"  >&lt;p&gt;kevinwilfong has accepted the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; cleanup readentity/writeentity&quot;.&lt;/p&gt;

&lt;p&gt;  +1&lt;/p&gt;

&lt;p&gt;  Will commit after tests pass.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2193&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;BRANCH&lt;br/&gt;
  svn&lt;/p&gt;</comment>
                            <comment id="13225827" author="kevinwilfong" created="Fri, 9 Mar 2012 04:18:24 +0000"  >&lt;p&gt;Committed, thanks Namit.&lt;/p&gt;</comment>
                            <comment id="13226007" author="hudson" created="Fri, 9 Mar 2012 11:06:31 +0000"  >&lt;p&gt;Integrated in Hive-trunk-h0.21 #1300 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-h0.21/1300/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-h0.21/1300/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt;. cleanup readentity/writeentity. (namit via kevinwilfong) (Revision 1298699)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298699&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298699&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/hooks/ReadEntity.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/hooks/WriteEntity.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13265366" author="ashutoshc" created="Mon, 30 Apr 2012 21:12:03 +0000"  >&lt;p&gt;This issue is closed now. It was released with the fix in 0.9.0. If there is a problem, please open a new jira and link this one with that.&lt;/p&gt;</comment>
                            <comment id="13266277" author="phabricator@reviews.facebook.net" created="Wed, 2 May 2012 01:14:49 +0000"  >&lt;p&gt;njain has abandoned the revision &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; cleanup readentity/writeentity&quot;.&lt;/p&gt;

&lt;p&gt;REVISION DETAIL&lt;br/&gt;
  &lt;a href=&quot;https://reviews.facebook.net/D2193&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.facebook.net/D2193&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13548093" author="hudson" created="Wed, 9 Jan 2013 10:24:21 +0000"  >&lt;p&gt;Integrated in Hive-trunk-hadoop2 #54 (See &lt;a href=&quot;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/Hive-trunk-hadoop2/54/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-2838&quot; title=&quot;cleanup readentity/writeentity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-2838&quot;&gt;&lt;del&gt;HIVE-2838&lt;/del&gt;&lt;/a&gt;. cleanup readentity/writeentity. (namit via kevinwilfong) (Revision 1298699)&lt;/p&gt;

&lt;p&gt;     Result = ABORTED&lt;br/&gt;
kevinwilfong : &lt;a href=&quot;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298699&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&amp;amp;view=rev&amp;amp;rev=1298699&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/hooks/Entity.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/hooks/ReadEntity.java&lt;/li&gt;
	&lt;li&gt;/hive/trunk/ql/src/java/org/apache/hadoop/hive/ql/hooks/WriteEntity.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12517589" name="ASF.LICENSE.NOT.GRANTED--HIVE-2838.D2193.1.patch" size="15079" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 19:05:58 +0000"/>
                            <attachment id="12517611" name="ASF.LICENSE.NOT.GRANTED--HIVE-2838.D2193.2.patch" size="15102" author="phabricator@reviews.facebook.net" created="Thu, 8 Mar 2012 21:15:57 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>230285</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0llrb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124175</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>