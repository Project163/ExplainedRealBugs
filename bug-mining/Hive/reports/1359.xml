<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:07:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-3756] &quot;LOAD DATA&quot; does not honor permission inheritence</title>
                <link>https://issues.apache.org/jira/browse/HIVE-3756</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;When a &quot;LOAD DATA&quot; operation is performed the resulting data in hdfs for the table does not maintain permission inheritance. This remains true even with the &quot;hive.warehouse.subdir.inherit.perms&quot; set to true.&lt;/p&gt;

&lt;p&gt;The issue is easily reproducible by creating a table and loading some data into it. After the load is complete just do a &quot;dfs -ls -R&quot; on the warehouse directory and you will see that the inheritance of permissions worked for the table directory but not for the data. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12618191">HIVE-3756</key>
            <summary>&quot;LOAD DATA&quot; does not honor permission inheritence</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ctang">Chaoyu Tang</assignee>
                                    <reporter username="johndee">Johndee Burks</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Nov 2012 18:11:36 +0000</created>
                <updated>Fri, 11 Apr 2014 00:13:54 +0000</updated>
                            <resolved>Fri, 26 Jul 2013 04:39:40 +0000</resolved>
                                    <version>0.9.0</version>
                                    <fixVersion>0.12.0</fixVersion>
                                    <component>Authorization</component>
                    <component>Security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="13691235" author="ctang.ma" created="Sat, 22 Jun 2013 20:09:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3094&quot; title=&quot;new partition files and directories should inherit file permissions from parent partition/table dir&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3094&quot;&gt;&lt;del&gt;HIVE-3094&lt;/del&gt;&lt;/a&gt; has the similar root cause to this one&lt;/p&gt;</comment>
                            <comment id="13691245" author="ctang.ma" created="Sat, 22 Jun 2013 20:46:45 +0000"  >&lt;p&gt;Please review the changes in &lt;a href=&quot;https://reviews.apache.org/r/12050/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/12050/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13697264" author="sushanth" created="Mon, 1 Jul 2013 22:20:43 +0000"  >&lt;p&gt;I&apos;ve commented on the review, regarding use of FileStatus.isDirectory(). If that issue is handled, I&apos;m +1 on this patch.&lt;/p&gt;</comment>
                            <comment id="13697949" author="ctang.ma" created="Tue, 2 Jul 2013 16:42:25 +0000"  >&lt;p&gt;Update the changes based on review comments&lt;/p&gt;</comment>
                            <comment id="13698490" author="ashutoshc" created="Wed, 3 Jul 2013 01:47:56 +0000"  >&lt;p&gt;Left few comments on RB.&lt;/p&gt;</comment>
                            <comment id="13706269" author="sushanth" created="Thu, 11 Jul 2013 21:34:29 +0000"  >&lt;p&gt;I have a few more thoughts on this. Let&apos;s walk through an example:&lt;/p&gt;

&lt;p&gt;Let&apos;s say Parent Dir d1 has permission/group combination A.&lt;br/&gt;
Let&apos;s say directory d2 inside Parent Dir has permission/group combination B.&lt;/p&gt;

&lt;p&gt;In the case of non-partitioned tables, d1 will be the database/warehouse dir, and d2 the table dir.&lt;br/&gt;
In the case of partitioned tables, d1 will be the table directory and d2 the appropriate partition directories.&lt;/p&gt;

&lt;p&gt;If we did not have the flag to inherit permissions on, then whatever data is loaded, be it files inside d2 (as during a load operation) or replacing d2 and everything in it (as during an insert overwrite operation), will have yet another permission/group combination C, which is a function of the user&apos;s current umask and the user&apos;s default group&lt;/p&gt;

&lt;p&gt;The purpose behind the subdir inherit permissions flag is to make this behaviour go away, and to be able to use the parent dir&apos;s permissions/group when possible. So far, so good.&lt;/p&gt;

&lt;p&gt;Let&apos;s say, for purposes of this entire discussion from now onwards, the flag to inherit permissions is on.&lt;/p&gt;

&lt;p&gt;Now, if we load data into d2, without using overwrite, files inside d2 get permission B.&lt;br/&gt;
If we load data into d2, using overwrite, we now overwrite d2, and thus, d2 takes on d1&apos;s permissions, and so do the files inside, thus resulting in d2 and files inside d2 having permissions/group combination A.&lt;/p&gt;

&lt;p&gt;&amp;#8211;&lt;/p&gt;

&lt;p&gt;While this behaviour is consistent, I find that from a user&apos;s perspective, if they create a table (say unpartitioned), then chmod/chgrp it to B, and then they try to load data into it using an Insert-Overwrite, then they still expect that they&apos;re only overwriting data inside the table dir, and their expectation is that the table still have permissions/group-combination B. They don&apos;t want it to be replaced by &quot;A&quot;, the parent db dir&apos;s permissions/group , and they don&apos;t want &quot;C&quot;, the umask/current-user-default-group.&lt;/p&gt;

&lt;p&gt;Now, as to whether this requires a new flag that overrides &quot;hive.warehouse.subdir.inherit.perms&quot; or whether they want &quot;hive.warehouse.subdir.inherit.perms&quot; to work in this way is still up for discussion, but there is now need for an additional requirement, that of the following:&lt;/p&gt;

&lt;p&gt;&quot;If the directory being moved in already exists, and will be deleted so that this can be placed, then instead of going with the parent permissions, it should go with the previous dir&apos;s permissions.&quot;&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;

&lt;p&gt;This can be a separate jira if people feel like it should be, but I think it&apos;s also a minor modification of this current jira.&lt;/p&gt;</comment>
                            <comment id="13711258" author="ctang.ma" created="Wed, 17 Jul 2013 16:45:46 +0000"  >&lt;p&gt;Yes, IMO, the table should preserve its own permission/group B in the insert-overwrite case. Here is a use case, a database is created to allow a group to access (the mode of /dbdir can be 770) and a certain table in this db (/dbdir/tbldir) is only allowed to admin himself (say permission mode 700). If the admin insert overwrite data to this table, it will change the /dbdir/tbldir to 770, breaking the security unexpectedly.&lt;br/&gt;
I can change code to preserve this permission/group of the overwritten table. It seems a minor changes. &lt;/p&gt;</comment>
                            <comment id="13712983" author="sushanth" created="Thu, 18 Jul 2013 22:23:34 +0000"  >&lt;p&gt;I think it is important to implement, and if you&apos;re willing to change your patch to implement this, I think this would be much appreciated.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt;, are you on board with this change as well?&lt;/p&gt;</comment>
                            <comment id="13713957" author="ctang.ma" created="Fri, 19 Jul 2013 19:02:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; Upload the patch here and also post it in rb for review &lt;/p&gt;</comment>
                            <comment id="13719076" author="ctang.ma" created="Thu, 25 Jul 2013 00:16:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; I uploaded the patch &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-3756&quot; title=&quot;&amp;quot;LOAD DATA&amp;quot; does not honor permission inheritence&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-3756&quot;&gt;&lt;del&gt;HIVE-3756&lt;/del&gt;&lt;/a&gt;_2.patch here and also posted it in rb requesting the review. The changes incorporated preserving permission/group in insert overwrite case as discussed here and some review suggestions from Ashutosh. For answers to questions from review, please see &lt;a href=&quot;https://reviews.apache.org/r/12050/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://reviews.apache.org/r/12050/&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13719874" author="ashutoshc" created="Thu, 25 Jul 2013 18:22:24 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13720396" author="ashutoshc" created="Fri, 26 Jul 2013 04:39:40 +0000"  >&lt;p&gt;Committed to trunk. Thanks, Chaoyu for patch. Thanks, Sushanth for the review.&lt;/p&gt;</comment>
                            <comment id="13720661" author="ctang.ma" created="Fri, 26 Jul 2013 11:10:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ashutoshc&quot; class=&quot;user-hover&quot; rel=&quot;ashutoshc&quot;&gt;ashutoshc&lt;/a&gt; &amp;amp; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; Thanks for the review.&lt;/p&gt;</comment>
                            <comment id="13795860" author="ashutoshc" created="Tue, 15 Oct 2013 23:29:15 +0000"  >&lt;p&gt;This issue has been fixed and released as part of 0.12 release. If you find further issues, please create a new jira and link it to this one.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12559557">HIVE-3094</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                                                <inwardlinks description="is part of">
                                        <issuelink>
            <issuekey id="12707839">HIVE-6892</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12559557">HIVE-3094</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="12689142">HIVE-6209</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12589266" name="HIVE-3756.patch" size="5634" author="ctang" created="Sat, 22 Jun 2013 20:46:02 +0000"/>
                            <attachment id="12590459" name="HIVE-3756_1.patch" size="5628" author="ctang" created="Tue, 2 Jul 2013 16:42:25 +0000"/>
                            <attachment id="12593233" name="HIVE-3756_2.patch" size="6971" author="ctang" created="Fri, 19 Jul 2013 19:02:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0seqv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>163865</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>