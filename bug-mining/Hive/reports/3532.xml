<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 18:34:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-9842] Enable session/operation timeout by default in HiveServer2</title>
                <link>https://issues.apache.org/jira/browse/HIVE-9842</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-5799&quot; title=&quot;session/operation timeout for hiveserver2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-5799&quot;&gt;&lt;del&gt;HIVE-5799&lt;/del&gt;&lt;/a&gt; introduced a session/operation timeout which cleans up abandoned session and op handles. Currently, the default is set to no-op. We should set it to some reasonable value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12779170">HIVE-9842</key>
            <summary>Enable session/operation timeout by default in HiveServer2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="vgumashta">Vaibhav Gumashta</assignee>
                                    <reporter username="vgumashta">Vaibhav Gumashta</reporter>
                        <labels>
                            <label>TODOC1.2</label>
                    </labels>
                <created>Tue, 3 Mar 2015 20:29:31 +0000</created>
                <updated>Wed, 10 Jun 2015 06:23:42 +0000</updated>
                            <resolved>Sun, 31 May 2015 07:30:03 +0000</resolved>
                                    <version>1.2.0</version>
                                    <fixVersion>1.2.1</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="14346388" author="hiveqa" created="Wed, 4 Mar 2015 04:41:46 +0000"  >

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;Overall&lt;/font&gt;: +1 all checks pass&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12702257/HIVE-9842.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12702257/HIVE-9842.1.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;SUCCESS:&lt;/font&gt; +1 7589 tests passed&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2935/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2935/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2935/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/2935/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2935/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-2935/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12702257 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14535778" author="sushanth" created="Fri, 8 May 2015 22:33:13 +0000"  >&lt;p&gt;Removing fix version of 1.2.0 in preparation of release, since this is not a blocker for 1.2.0.&lt;/p&gt;</comment>
                            <comment id="14562004" author="vgumashta" created="Wed, 27 May 2015 23:42:21 +0000"  >&lt;p&gt;Reattaching same patch for precommit. &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sushanth&quot; class=&quot;user-hover&quot; rel=&quot;sushanth&quot;&gt;sushanth&lt;/a&gt; ok for 1.2.1? This enables cleanup of HS2 state due to improperly closed session/failed operations. The feature exists already, this patch just enables it.&lt;/p&gt;</comment>
                            <comment id="14562025" author="sushanth" created="Wed, 27 May 2015 23:52:36 +0000"  >&lt;p&gt;Unless the patch is a major API change or changes db schema, all patches are currently on auto-approve for branch-1.2 as long as the committer adds it to &lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Hive+1.2+Release+Status&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://cwiki.apache.org/confluence/display/Hive/Hive+1.2+Release+Status&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;Please go ahead and add it to the list and backport to branch-1.2&lt;/p&gt;</comment>
                            <comment id="14563122" author="hiveqa" created="Thu, 28 May 2015 15:47:06 +0000"  >

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;Overall&lt;/font&gt;: -1 at least one tests failed&lt;/p&gt;

&lt;p&gt;Here are the results of testing the latest attachment:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12735738/HIVE-9842.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12735738/HIVE-9842.3.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;ERROR:&lt;/font&gt; -1 due to 2 failed/errored test(s), 8975 tests executed&lt;br/&gt;
&lt;b&gt;Failed tests:&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.hadoop.hive.cli.TestCliDriver.testCliDriver_fold_case
org.apache.hive.jdbc.TestSSL.testSSLFetchHttp
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test results: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4076/testReport&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4076/testReport&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4076/console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/jenkins/job/PreCommit-HIVE-TRUNK-Build/4076/console&lt;/a&gt;&lt;br/&gt;
Test logs: &lt;a href=&quot;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4076/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://ec2-174-129-184-35.compute-1.amazonaws.com/logs/PreCommit-HIVE-TRUNK-Build-4076/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Messages:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Executing org.apache.hive.ptest.execution.PrepPhase
Executing org.apache.hive.ptest.execution.ExecutionPhase
Executing org.apache.hive.ptest.execution.ReportingPhase
Tests exited with: TestsFailedException: 2 tests failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;

&lt;p&gt;ATTACHMENT ID: 12735738 - PreCommit-HIVE-TRUNK-Build&lt;/p&gt;</comment>
                            <comment id="14563582" author="hagleitn" created="Thu, 28 May 2015 19:56:40 +0000"  >&lt;p&gt;Don&apos;t you have to change the TimeUnit for the validator too?&lt;/p&gt;</comment>
                            <comment id="14563742" author="thejas" created="Thu, 28 May 2015 21:46:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hagleitn&quot; class=&quot;user-hover&quot; rel=&quot;hagleitn&quot;&gt;hagleitn&lt;/a&gt;&lt;br/&gt;
The TimeUnit in validator is just the default time unit, that gets used if the user just specifies a number without units. Changing that would be backward incompatible change.&lt;/p&gt;</comment>
                            <comment id="14566317" author="vgumashta" created="Sun, 31 May 2015 03:02:54 +0000"  >&lt;p&gt;Patch 4 sets session timeout to 7 days to account for scenarios like long weekends, sets operation timeout to a day and doesn&apos;t let session timeout kick in till all operation handles are not cleaned (either due to operation completing, or removed due to timeout).&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; do these defaults look good? &lt;/p&gt;</comment>
                            <comment id="14566335" author="vgumashta" created="Sun, 31 May 2015 04:16:03 +0000"  >&lt;p&gt;After some discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt; changing the default op timeout to +5 days. This implementation will need some improvement though as it decouples session/operations wrt timeout and does not update op timeout when checking for op status; will create a followup.&lt;/p&gt;</comment>
                            <comment id="14566338" author="thejas" created="Sun, 31 May 2015 04:29:45 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="14566407" author="vgumashta" created="Sun, 31 May 2015 07:30:04 +0000"  >&lt;p&gt;Committed to master and 1.2.1. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thejas&quot; class=&quot;user-hover&quot; rel=&quot;thejas&quot;&gt;thejas&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14580087" author="lefty@hortonworks.com" created="Wed, 10 Jun 2015 06:18:30 +0000"  >&lt;p&gt;Doc note:  This changes the default values of four HS2 configuration parameters in 1.2.1, so I added a TODOC1.2 label (because we don&apos;t have a TODOC1.2.1 label).&lt;/p&gt;

&lt;p&gt;The new defaults should be documented, with version information, here:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.session.check.interval&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.server2.session.check.interval &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.idle.session.timeout&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.server2.idle.session.timeout &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://cwiki.apache.org/confluence/display/Hive/Configuration+Properties#ConfigurationProperties-hive.server2.idle.operation.timeout&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Configuration Properties &amp;#8211; hive.server2.idle.operation.timeout &lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;hive.server2.idle.session.check.operation&lt;/b&gt; isn&apos;t documented in the wiki yet, but it belongs in the same section.  It was introduced in 1.2.0 by &lt;a href=&quot;https://issues.apache.org/jira/browse/HIVE-10146&quot; title=&quot;Not count session as idle if query is running&quot; class=&quot;issue-link&quot; data-issue-key=&quot;HIVE-10146&quot;&gt;&lt;del&gt;HIVE-10146&lt;/del&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12779033">HIVE-9839</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12678732">HIVE-5799</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12786836">HIVE-10146</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12702257" name="HIVE-9842.1.patch" size="2755" author="vgumashta" created="Tue, 3 Mar 2015 21:02:20 +0000"/>
                            <attachment id="12735732" name="HIVE-9842.2.patch" size="2755" author="vgumashta" created="Wed, 27 May 2015 23:42:21 +0000"/>
                            <attachment id="12735738" name="HIVE-9842.3.patch" size="1949" author="vgumashta" created="Thu, 28 May 2015 00:06:59 +0000"/>
                            <attachment id="12736391" name="HIVE-9842.4.patch" size="2584" author="vgumashta" created="Sun, 31 May 2015 03:02:54 +0000"/>
                            <attachment id="12736400" name="HIVE-9842.5.patch" size="2583" author="vgumashta" created="Sun, 31 May 2015 04:27:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26b5r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>