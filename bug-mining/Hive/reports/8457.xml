<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 19:23:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[HIVE-27071] Select query with LIMIT clause can fail if there are marker files like &quot;_SUCCESS&quot; and &quot;_MANIFEST&quot;</title>
                <link>https://issues.apache.org/jira/browse/HIVE-27071</link>
                <project id="12310843" key="HIVE">Hive</project>
                    <description>&lt;p&gt;Spark clients creates marker files like &quot;_SUCCESS&quot; and &quot;_MANIFEST&quot; under the table/partition path at the end of a write operation. For example &apos;hdfs://name-node-host/table/partition/_SUCCESS&apos;&lt;br/&gt;
Whenever Hive is trying to read that table with the LIMIT clause, it could to the following error:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ERROR : Vertex failed, vertexName=Map 1, vertexId=vertex_1676095298574_0017_2_00, diagnostics=[Vertex vertex_1676095298574_0017_2_00 [Map 1] killed/failed due to:ROOT_INPUT_INIT_FAILURE, Vertex Input: trade initializer failed, vertex=vertex_1676095298574_0017_2_00 [Map 1], org.apache.hadoop.mapred.InvalidInputException: Input path does not exist: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//name-node-host/table/partition/_MANIFEST
&lt;/span&gt;Input path does not exist: hdfs:&lt;span class=&quot;code-comment&quot;&gt;//name-node-host/table/partition/_SUCCESS at org.apache.hadoop.mapred.FileInputFormat.singleThreadedListStatus(FileInputFormat.java:300)
&lt;/span&gt;at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:240)
at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:328)
at org.apache.hadoop.hive.ql.io.HiveInputFormat.addSplitsForGroup(HiveInputFormat.java:579) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hive execution engine should ignore these marker files while reading the table/partition data.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13524333">HIVE-27071</key>
            <summary>Select query with LIMIT clause can fail if there are marker files like &quot;_SUCCESS&quot; and &quot;_MANIFEST&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ayushtkn">Ayush Saxena</assignee>
                                    <reporter username="hemanth619">Sai Hemanth Gantasala</reporter>
                        <labels>
                            <label>pull-request-available</label>
                    </labels>
                <created>Sat, 11 Feb 2023 20:17:37 +0000</created>
                <updated>Tue, 15 Aug 2023 06:33:20 +0000</updated>
                            <resolved>Tue, 14 Feb 2023 05:11:05 +0000</resolved>
                                    <version>4.0.0</version>
                                    <fixVersion>4.0.0-beta-1</fixVersion>
                                    <component>HiveServer2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1800">0.5h</timespent>
                                <comments>
                            <comment id="17687769" author="tarak271" created="Mon, 13 Feb 2023 07:16:11 +0000"  >&lt;p&gt;In addition to what is reported already, how about providing a regex support in query to skip the files matching the regex while running the query. One advantage with this is that we can skip too many unwanted files that are not relevant to hive every time a query is run&lt;/p&gt;</comment>
                            <comment id="17687917" author="ayushtkn" created="Mon, 13 Feb 2023 12:34:55 +0000"  >&lt;p&gt;Was able to reproduce this issue locally, Have raised PR with the fix&lt;/p&gt;</comment>
                            <comment id="17688037" author="hemanth619" created="Mon, 13 Feb 2023 17:26:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ayushtkn&quot; class=&quot;user-hover&quot; rel=&quot;ayushtkn&quot;&gt;ayushtkn&lt;/a&gt; - Thanks for providing the patch in a quick time. I have reviewed the PR. I&apos;ll assign this Jira to you since you are the author of this patch.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tarak271&quot; class=&quot;user-hover&quot; rel=&quot;tarak271&quot;&gt;tarak271&lt;/a&gt; - I&apos;m not sure what other files we want to skip other than the names starting with &quot;_&quot; or &quot;.&quot;. Can you suggest any other files? Maybe Ayush has a better idea if it is good to skip those unwanted files.&lt;/p&gt;</comment>
                            <comment id="17688274" author="ayushtkn" created="Tue, 14 Feb 2023 05:10:57 +0000"  >&lt;p&gt;Committed to master.&lt;/p&gt;

&lt;p&gt;Thanx &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hemanth619&quot; class=&quot;user-hover&quot; rel=&quot;hemanth619&quot;&gt;hemanth619&lt;/a&gt; for the review and commit.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1fv9c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>