diff --git a/ql/src/test/queries/clientpositive/auto_join25.q b/ql/src/test/queries/clientpositive/auto_join25.q
index 8d5a8416dd..08dd491c3c 100644
--- a/ql/src/test/queries/clientpositive/auto_join25.q
+++ b/ql/src/test/queries/clientpositive/auto_join25.q
@@ -2,6 +2,7 @@ set hive.mapred.mode=nonstrict;
 set hive.exec.post.hooks=org.apache.hadoop.hive.ql.hooks.PostExecutePrinter,org.apache.hadoop.hive.ql.hooks.PrintCompletedTasksHook;
 
 set hive.auto.convert.join = true;
+set hive.mapjoin.followby.gby.localtask.max.memory.usage = 0.0001; -- HIVE-18445
 set hive.mapjoin.localtask.max.memory.usage = 0.0001;
 set hive.mapjoin.check.memory.rows = 2;
 set hive.auto.convert.join.noconditionaltask = false;
@@ -10,7 +11,7 @@ set hive.auto.convert.join.noconditionaltask = false;
 CREATE TABLE dest1(key INT, value STRING) STORED AS TEXTFILE;
 
 FROM srcpart src1 JOIN src src2 ON (src1.key = src2.key)
-INSERT OVERWRITE TABLE dest1 SELECT src1.key, src2.value 
+INSERT OVERWRITE TABLE dest1 SELECT src1.key, src2.value
 where (src1.ds = '2008-04-08' or src1.ds = '2008-04-09' )and (src1.hr = '12' or src1.hr = '11');
 
 SELECT sum(hash(dest1.key,dest1.value)) FROM dest1;
@@ -18,7 +19,6 @@ SELECT sum(hash(dest1.key,dest1.value)) FROM dest1;
 
 
 CREATE TABLE dest_j2(key INT, value STRING) STORED AS TEXTFILE;
-
 FROM src src1 JOIN src src2 ON (src1.key = src2.key) JOIN src src3 ON (src1.key + src2.key = src3.key)
 INSERT OVERWRITE TABLE dest_j2 SELECT src1.key, src3.value;
 
@@ -30,4 +30,3 @@ FROM src src1 JOIN src src2 ON (src1.key = src2.key)
 INSERT OVERWRITE TABLE dest_j1 SELECT src1.key, src2.value;
 
 SELECT sum(hash(dest_j1.key,dest_j1.value)) FROM dest_j1;
-
diff --git a/ql/src/test/results/clientpositive/auto_join25.q.out b/ql/src/test/results/clientpositive/auto_join25.q.out
index 063d3cafdd..f903bd1312 100644
--- a/ql/src/test/results/clientpositive/auto_join25.q.out
+++ b/ql/src/test/results/clientpositive/auto_join25.q.out
@@ -8,7 +8,7 @@ POSTHOOK: Output: database:default
 POSTHOOK: Output: default@dest1
 RUN: Stage-0:DDL
 PREHOOK: query: FROM srcpart src1 JOIN src src2 ON (src1.key = src2.key)
-INSERT OVERWRITE TABLE dest1 SELECT src1.key, src2.value 
+INSERT OVERWRITE TABLE dest1 SELECT src1.key, src2.value
 where (src1.ds = '2008-04-08' or src1.ds = '2008-04-09' )and (src1.hr = '12' or src1.hr = '11')
 PREHOOK: type: QUERY
 PREHOOK: Input: default@src
@@ -18,8 +18,11 @@ PREHOOK: Input: default@srcpart@ds=2008-04-08/hr=12
 PREHOOK: Input: default@srcpart@ds=2008-04-09/hr=11
 PREHOOK: Input: default@srcpart@ds=2008-04-09/hr=12
 PREHOOK: Output: default@dest1
+Hive Runtime Error: Map local work exhausted memory
+FAILED: Execution Error, return code 3 from org.apache.hadoop.hive.ql.exec.mr.MapredLocalTask
+ATTEMPT: Execute BackupTask: org.apache.hadoop.hive.ql.exec.mr.MapRedTask
 POSTHOOK: query: FROM srcpart src1 JOIN src src2 ON (src1.key = src2.key)
-INSERT OVERWRITE TABLE dest1 SELECT src1.key, src2.value 
+INSERT OVERWRITE TABLE dest1 SELECT src1.key, src2.value
 where (src1.ds = '2008-04-08' or src1.ds = '2008-04-09' )and (src1.hr = '12' or src1.hr = '11')
 POSTHOOK: type: QUERY
 POSTHOOK: Input: default@src
@@ -33,7 +36,7 @@ POSTHOOK: Lineage: dest1.key EXPRESSION [(srcpart)src1.FieldSchema(name:key, typ
 POSTHOOK: Lineage: dest1.value SIMPLE [(src)src2.FieldSchema(name:value, type:string, comment:default), ]
 RUN: Stage-7:CONDITIONAL
 RUN: Stage-8:MAPREDLOCAL
-RUN: Stage-5:MAPRED
+RUN: Stage-1:MAPRED
 RUN: Stage-0:MOVE
 RUN: Stage-3:MAPRED
 RUN: Stage-2:STATS
@@ -64,6 +67,9 @@ PREHOOK: Output: default@dest_j2
 Hive Runtime Error: Map local work exhausted memory
 FAILED: Execution Error, return code 3 from org.apache.hadoop.hive.ql.exec.mr.MapredLocalTask
 ATTEMPT: Execute BackupTask: org.apache.hadoop.hive.ql.exec.mr.MapRedTask
+Hive Runtime Error: Map local work exhausted memory
+FAILED: Execution Error, return code 3 from org.apache.hadoop.hive.ql.exec.mr.MapredLocalTask
+ATTEMPT: Execute BackupTask: org.apache.hadoop.hive.ql.exec.mr.MapRedTask
 POSTHOOK: query: FROM src src1 JOIN src src2 ON (src1.key = src2.key) JOIN src src3 ON (src1.key + src2.key = src3.key)
 INSERT OVERWRITE TABLE dest_j2 SELECT src1.key, src3.value
 POSTHOOK: type: QUERY
@@ -76,7 +82,7 @@ RUN: Stage-15:MAPREDLOCAL
 RUN: Stage-1:MAPRED
 RUN: Stage-9:CONDITIONAL
 RUN: Stage-13:MAPREDLOCAL
-RUN: Stage-7:MAPRED
+RUN: Stage-2:MAPRED
 RUN: Stage-0:MOVE
 RUN: Stage-4:MAPRED
 RUN: Stage-3:STATS
@@ -104,6 +110,9 @@ INSERT OVERWRITE TABLE dest_j1 SELECT src1.key, src2.value
 PREHOOK: type: QUERY
 PREHOOK: Input: default@src
 PREHOOK: Output: default@dest_j1
+Hive Runtime Error: Map local work exhausted memory
+FAILED: Execution Error, return code 3 from org.apache.hadoop.hive.ql.exec.mr.MapredLocalTask
+ATTEMPT: Execute BackupTask: org.apache.hadoop.hive.ql.exec.mr.MapRedTask
 POSTHOOK: query: FROM src src1 JOIN src src2 ON (src1.key = src2.key)
 INSERT OVERWRITE TABLE dest_j1 SELECT src1.key, src2.value
 POSTHOOK: type: QUERY
@@ -113,7 +122,7 @@ POSTHOOK: Lineage: dest_j1.key EXPRESSION [(src)src1.FieldSchema(name:key, type:
 POSTHOOK: Lineage: dest_j1.value SIMPLE [(src)src2.FieldSchema(name:value, type:string, comment:default), ]
 RUN: Stage-7:CONDITIONAL
 RUN: Stage-8:MAPREDLOCAL
-RUN: Stage-5:MAPRED
+RUN: Stage-1:MAPRED
 RUN: Stage-0:MOVE
 RUN: Stage-3:MAPRED
 RUN: Stage-2:STATS
