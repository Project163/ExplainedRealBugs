diff --git a/CHANGES.txt b/CHANGES.txt
index 6323032a29..dfe8d0f8d8 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -225,6 +225,9 @@ Trunk -  Unreleased
     HIVE-840. No error if user specifies multiple columns of same name as
     output (He Yongqiang via namit)
 
+    HIVE-902. Fix cli.sh to work with hadoop versions less than 20.
+    (Carl Steinbach via zshao)
+
 Release 0.4.0 -  Unreleased
 
   INCOMPATIBLE CHANGES
diff --git a/bin/ext/cli.sh b/bin/ext/cli.sh
index 46fafbea85..bb447284a9 100644
--- a/bin/ext/cli.sh
+++ b/bin/ext/cli.sh
@@ -14,9 +14,20 @@ cli () {
     HIVE_LIB=`cygpath -w "$HIVE_LIB"`
   fi
 
-  version=$($HADOOP version | awk '{print $2;}');
+  version=$($HADOOP version | awk '{if (NR == 1) {print $2;}}');
 
-  if [[ $version =~ "^0\.17" ]] || [[ $version =~ "^0\.18" ]] || [[ $version =~ "^0.19" ]]; then
+  if [[ $version =~ ^([[:digit:]]+)\.([[:digit:]]+)\.([[:digit:]]+).*$ ]]; then
+      major_ver=${BASH_REMATCH[1]}
+      minor_ver=${BASH_REMATCH[2]}
+      patch_ver=${BASH_REMATCH[3]}
+  else
+      echo "Unable to determine Hadoop version information."
+      echo "'hadoop version' returned:"
+      echo `$HADOOP version`
+      exit 6
+  fi
+
+  if [ $minor_ver -le 20 ]; then
       exec $HADOOP jar $AUX_JARS_CMD_LINE ${HIVE_LIB}/hive_cli.jar $CLASS $HIVE_OPTS "$@"
   else
       # hadoop 20 or newer - skip the aux_jars option. picked up from hiveconf
