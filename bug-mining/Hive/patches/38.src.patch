diff --git a/CHANGES.txt b/CHANGES.txt
index 7b8c5b05df..bea72fe28f 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -164,3 +164,6 @@ Trunk (unreleased changes)
     tables when alias.* expressions are present in the select list of a 
     join. (Ashish Thusoo via dhruba)
 
+    HIVE-196. Two test runs can run simultaneously on the same machine.
+    (Ashish Thusoo via dhruba)
+
diff --git a/build-common.xml b/build-common.xml
index a6b2706072..edd1cc85ff 100644
--- a/build-common.xml
+++ b/build-common.xml
@@ -38,6 +38,7 @@
   <property name="hadoop.version" value="0.19.0"/>
   <property name="hadoop.root" location="${build.dir.hadoop}/hadoop-${hadoop.version}"/>
   <property name="hadoop.jar" location="${hadoop.root}/hadoop-${hadoop.version}-core.jar"/>
+  <property name="hadoop.conf.dir" location="${hadoop.root}/conf"/>
 
   <property name="javac.debug" value="on"/>
   <property name="javac.version" value="1.5"/>
diff --git a/data/conf/hive-log4j.properties b/data/conf/hive-log4j.properties
deleted file mode 120000
index 784c7f2c8b..0000000000
--- a/data/conf/hive-log4j.properties
+++ /dev/null
@@ -1 +0,0 @@
-../../conf/hive-log4j.properties
\ No newline at end of file
diff --git a/data/conf/hive-site.xml b/data/conf/hive-site.xml
index cc1b0ab9f5..e9d6af728b 100644
--- a/data/conf/hive-site.xml
+++ b/data/conf/hive-site.xml
@@ -12,7 +12,7 @@
 <!-- Hive Execution Parameters -->
 <property>
   <name>hive.exec.scratchdir</name>
-  <value>/tmp/hive-${user.name}</value>
+  <value>${user.dir}/../build/ql/tmp</value>
   <description>Scratch space for Hive jobs</description>
 </property>
 
diff --git a/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java b/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java
index 6e01b0be4e..d5fac37062 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/optimizer/GenMapRedUtils.java
@@ -313,7 +313,7 @@ private static void splitTasks(ReduceSinkOperator op,
     int randomid = opProcCtx.getRandomId();
     int pathid   = opProcCtx.getPathId();
       
-    String taskTmpDir = scratchDir + File.separator + randomid + '.' + pathid ;
+    String taskTmpDir = (new Path(scratchDir + File.separator + randomid + '.' + pathid)).toString();
     pathid++;
     opProcCtx.setPathId(pathid);
     
diff --git a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
index a7d00069ca..6f92ad5852 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
@@ -68,7 +68,7 @@
 public class QTestUtil {
 
   private String testWarehouse;
-  private String tmpdir = "/tmp/"+System.getProperty("user.name")+"/";
+  private String tmpdir =  System.getProperty("user.dir")+"/../build/ql/tmp";
   private Path tmppath = new Path(tmpdir);
   private String testFiles;
   private String outDir;
@@ -524,7 +524,7 @@ public int checkPlan(String tname,  List<Task<? extends Serializable>> tasks) th
       cmdArray[1] = "-b";
       cmdArray[2] = "-I";
       cmdArray[3] = "\\(\\(<java version=\".*\" class=\"java.beans.XMLDecoder\">\\)" +
-        "\\|\\(<string>/tmp/.*</string>\\)" +
+        "\\|\\(<string>.*/tmp/.*</string>\\)" +
         "\\|\\(<string>file:.*</string>\\)" +
         "\\|\\(<string>/.*/warehouse/.*</string>\\)\\)";
       cmdArray[4] = outf.getPath();
@@ -634,7 +634,7 @@ public int checkCliDriverResults(String tname) throws Exception {
     cmdArray = new String[5];
     cmdArray[0] = "diff";
     cmdArray[1] = "-I";
-    cmdArray[2] = "\\(file:\\)\\|\\(tmp/hive-.*\\)";
+    cmdArray[2] = "\\(file:\\)\\|\\(/tmp/.*\\)";
     cmdArray[3] = (new File(logDir, tname + ".out")).getPath();
     cmdArray[4] = (new File(outDir, tname + ".out")).getPath();
     System.out.println(cmdArray[0] + " " + cmdArray[1] + " " + cmdArray[2] + " " +
diff --git a/ql/src/test/org/apache/hadoop/hive/ql/io/TestFlatFileInputFormat.java b/ql/src/test/org/apache/hadoop/hive/ql/io/TestFlatFileInputFormat.java
index 9158870631..41e7b7f44c 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/io/TestFlatFileInputFormat.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/io/TestFlatFileInputFormat.java
@@ -56,7 +56,7 @@ public void testFlatFileInputJava() throws Exception {
       conf = new Configuration();
       job = new JobConf(conf);
       fs = FileSystem.getLocal(conf);
-      dir = new Path(System.getProperty("test.build.data",".") + "/mapred");
+      dir = new Path(System.getProperty("test.data.dir",".") + "/mapred");
       file = new Path(dir, "test.txt");
       reporter = Reporter.NULL;
       fs.delete(dir, true);
@@ -133,7 +133,7 @@ public void testFlatFileInputRecord() throws Exception {
       conf = new Configuration();
       job = new JobConf(conf);
       fs = FileSystem.getLocal(conf);
-      dir = new Path(System.getProperty("test.build.data",".") + "/mapred");
+      dir = new Path(System.getProperty("test.data.dir",".") + "/mapred");
       file = new Path(dir, "test.txt");
       reporter = Reporter.NULL;
       fs.delete(dir, true);
@@ -210,7 +210,7 @@ public void testFlatFileInputThrift() throws Exception {
       conf = new Configuration();
       job = new JobConf(conf);
       fs = FileSystem.getLocal(conf);
-      dir = new Path(System.getProperty("test.build.data",".") + "/mapred");
+      dir = new Path(System.getProperty("test.data.dir",".") + "/mapred");
       file = new Path(dir, "test.txt");
       reporter = Reporter.NULL;
       fs.delete(dir, true);
