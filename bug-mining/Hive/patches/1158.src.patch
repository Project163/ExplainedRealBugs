diff --git a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
index f6a68f1ada..d7abdfde0a 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
@@ -776,7 +776,18 @@ public int execute(String tname) {
   }
 
   public int executeClient(String tname) {
-    return cliDriver.processLine(qMap.get(tname));
+    String commands = qMap.get(tname);
+    StringBuilder newCommands = new StringBuilder(commands.length());
+    int lastMatchEnd = 0;
+    Matcher commentMatcher = Pattern.compile("^--.*$", Pattern.MULTILINE).matcher(commands);
+    while (commentMatcher.find()) {
+      newCommands.append(commands.substring(lastMatchEnd, commentMatcher.start()));
+      newCommands.append(commentMatcher.group().replaceAll("(?<!\\\\);", "\\\\;"));
+      lastMatchEnd = commentMatcher.end();
+    }
+    newCommands.append(commands.substring(lastMatchEnd, commands.length()));
+    commands = newCommands.toString();
+    return cliDriver.processLine(commands);
   }
 
   public boolean shouldBeSkipped(String tname) {
diff --git a/ql/src/test/queries/clientpositive/semicolon.q b/ql/src/test/queries/clientpositive/semicolon.q
new file mode 100644
index 0000000000..fef2687308
--- /dev/null
+++ b/ql/src/test/queries/clientpositive/semicolon.q
@@ -0,0 +1,4 @@
+-- comment
+-- comment;
+-- comment
+SELECT COUNT(1) FROM src;
diff --git a/ql/src/test/results/clientpositive/semicolon.q.out b/ql/src/test/results/clientpositive/semicolon.q.out
new file mode 100644
index 0000000000..58898339a2
--- /dev/null
+++ b/ql/src/test/results/clientpositive/semicolon.q.out
@@ -0,0 +1,15 @@
+PREHOOK: query: -- comment
+-- comment;
+-- comment
+SELECT COUNT(1) FROM src
+PREHOOK: type: QUERY
+PREHOOK: Input: default@src
+#### A masked pattern was here ####
+POSTHOOK: query: -- comment
+-- comment;
+-- comment
+SELECT COUNT(1) FROM src
+POSTHOOK: type: QUERY
+POSTHOOK: Input: default@src
+#### A masked pattern was here ####
+500
