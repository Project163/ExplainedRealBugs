diff --git a/ql/build.xml b/ql/build.xml
index f715543be9..2194f4dbe2 100644
--- a/ql/build.xml
+++ b/ql/build.xml
@@ -139,7 +139,6 @@
         <if>
           <equals arg1="${hadoop.mr.rev}" arg2="23"/>
           <then>
-            <echo message="hadoop mr rev: ${hadoop.mr.rev}"/>
             <qtestgen hiveRootDirectory="${hive.root}"
                   outputDirectory="${test.build.src}/org/apache/hadoop/hive/cli" 
                   templatePath="${ql.test.template.dir}" template="TestCliDriver.vm" 
diff --git a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
index bdd0f191df..d653e7ab55 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
@@ -114,6 +114,7 @@ public class QTestUtil {
         "src_sequencefile", "srcpart", "alltypesorc"
       }));
 
+  private static MiniClusterType clusterType = MiniClusterType.none;
   private ParseDriver pd;
   private Hive db;
   protected HiveConf conf;
@@ -313,6 +314,7 @@ public QTestUtil(String outDir, String logDir, MiniClusterType clusterType, Stri
     qMap = new TreeMap<String, String>();
     qSkipSet = new HashSet<String>();
     qSortSet = new HashSet<String>();
+    this.clusterType = clusterType;
 
     HadoopShims shims = null;
     switch (clusterType) {
@@ -790,6 +792,11 @@ public void cliInit(String tname, boolean recreate) throws Exception {
     ss.err = new CachingPrintStream(fo, true, "UTF-8");
     ss.setIsSilent(true);
     SessionState oldSs = SessionState.get();
+
+    if (oldSs != null && clusterType == MiniClusterType.tez) {
+      oldSs.close();
+    }
+
     if (oldSs != null && oldSs.out != null && oldSs.out != System.out) {
       oldSs.out.close();
     }
