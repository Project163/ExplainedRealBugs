diff --git a/ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java b/ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java
index 68d32553cb..b4dd4abbc1 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/io/orc/OrcFile.java
@@ -132,7 +132,9 @@ public int getId() {
       }
       values = new WriterVersion[max + 1];
       for (WriterVersion v : WriterVersion.values()) {
-        values[v.id] = v;
+        if (v.id < values.length) {
+          values[v.id] = v;
+        }
       }
     }
 
