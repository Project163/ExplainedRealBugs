diff --git a/CHANGES.txt b/CHANGES.txt
index e756a2b2b4..2d94047978 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -372,6 +372,9 @@ Trunk -  Unreleased
     HIVE-1009 bug in union along with transform
     (Ning Zhang via namit)
 
+    HIVE-986 Ant "eclipse-files" target is broken for Hadoop 0.20
+    (Zheng Shao via namit)
+
 Release 0.4.0 -  Unreleased
 
   INCOMPATIBLE CHANGES
diff --git a/build.properties b/build.properties
index 0b812b5ecf..97ca7c1525 100644
--- a/build.properties
+++ b/build.properties
@@ -3,7 +3,7 @@ name=hive
 version=0.5.0
 year=2009
 
-hadoop.version=0.19.0
+hadoop.version=0.20.0
 hadoop.mirror=http://archive.apache.org/dist
 
 build.dir.hive=${hive.root}/build
diff --git a/build.xml b/build.xml
index 789189ba16..bf93c6529f 100644
--- a/build.xml
+++ b/build.xml
@@ -267,7 +267,7 @@
   <target name="eclipse-files" depends="init"
           description="Generate files for Eclipse">
 
-    <condition property="hadoop.version.ant-internal" value="0.19">
+    <condition property="hadoop.version.ant-internal" value="0.20">
       <not>
         <isset property="hadoop.version.ant-internal"/>
       </not>
@@ -279,6 +279,19 @@
 
     <getversionpref property="hadoop.version.ant-internal.prefix" input="${hadoop.version.ant-internal}"/>
 
+    <condition property="jetty.jar" value="jetty-6.1.14.jar" else="jetty-5.1.4.jar">
+      <equals arg1="${hadoop.version.ant-internal.prefix}" arg2="0.20" />
+    </condition>
+
+    <condition property="jetty.util.jar" value="jetty-util-6.1.14.jar" else="jetty-ext/jsp-api.jar">
+      <!-- hadoop 0.19 and earlier does not have jetty-util.jar, so we just load another jar -->
+      <equals arg1="${hadoop.version.ant-internal.prefix}" arg2="0.20" />
+    </condition>
+
+    <condition property="servlet-api.jar" value="servlet-api-2.5-6.1.14.jar" else="servlet-api.jar">
+      <equals arg1="${hadoop.version.ant-internal.prefix}" arg2="0.20" />
+    </condition>
+
     <pathconvert property="eclipse.project">
       <path path="${basedir}"/>
       <regexpmapper from="^.*/([^/]+)$$" to="\1" handledirsep="yes"/>
@@ -292,6 +305,9 @@
         <filter token="PROJECT" value="${eclipse.project}"/>
         <filter token="HADOOPVER" value="${hadoop.version.ant-internal}"/>
         <filter token="HADOOPVERPREF" value="${hadoop.version.ant-internal.prefix}"/>
+        <filter token="JETTYJAR" value="${jetty.jar}"/>
+        <filter token="JETTYUTILJAR" value="${jetty.util.jar}"/>
+        <filter token="SERVLETAPIJAR" value="${servlet-api.jar}"/>
       </filterset>
     </copy>
     <move todir="." includeemptydirs="false">
diff --git a/eclipse-templates/.classpath b/eclipse-templates/.classpath
index e100d0401f..9512c15b2f 100644
--- a/eclipse-templates/.classpath
+++ b/eclipse-templates/.classpath
@@ -3,8 +3,9 @@
 	<classpathentry exported="true" kind="con" path="org.eclipse.jdt.launching.JRE_CONTAINER"/>
 	<classpathentry exported="true" kind="lib" path="build/hadoopcore/hadoop-@HADOOPVER@/hadoop-@HADOOPVER@-core.jar"/>
 	<classpathentry exported="true" kind="lib" path="build/hadoopcore/hadoop-@HADOOPVER@/hadoop-@HADOOPVER@-test.jar"/>
-	<classpathentry exported="true" kind="lib" path="build/hadoopcore/hadoop-@HADOOPVER@/lib/servlet-api.jar"/>
-	<classpathentry exported="true" kind="lib" path="build/hadoopcore/hadoop-@HADOOPVER@/lib/jetty-5.1.4.jar"/>
+	<classpathentry exported="true" kind="lib" path="build/hadoopcore/hadoop-@HADOOPVER@/lib/@SERVLETAPIJAR@"/>
+	<classpathentry exported="true" kind="lib" path="build/hadoopcore/hadoop-@HADOOPVER@/lib/@JETTYJAR@"/>
+	<classpathentry exported="true" kind="lib" path="build/hadoopcore/hadoop-@HADOOPVER@/lib/@JETTYUTILJAR@"/>
 	<classpathentry exported="true" kind="lib" path="cli/lib/jline-0.9.94.jar"/>
 	<classpathentry exported="true" kind="lib" path="lib/json.jar"/>
 	<classpathentry exported="true" kind="lib" path="lib/asm-3.1.jar"/>
