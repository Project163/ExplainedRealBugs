diff --git a/ql/src/test/org/apache/hadoop/hive/ql/exec/vector/TestVectorLimitOperator.java b/ql/src/test/org/apache/hadoop/hive/ql/exec/vector/TestVectorLimitOperator.java
index e9237e2041..74a4ad0b61 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/exec/vector/TestVectorLimitOperator.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/exec/vector/TestVectorLimitOperator.java
@@ -136,6 +136,8 @@ private void validateVectorLimitOperator(int limit, int batchSize, int expectedB
     VectorLimitDesc vectorDesc = new VectorLimitDesc();
     VectorLimitOperator lo = new VectorLimitOperator(
         new CompilationOpContext(), ld, null, vectorDesc);
+    // make sure an object registry is present for the test
+    ObjectCache.setupObjectRegistry(new ObjectRegistryImpl());
     lo.initialize(new Configuration(), null);
 
     // Process the batch
