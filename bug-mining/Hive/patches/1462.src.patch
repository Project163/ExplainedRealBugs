diff --git a/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/tool/TempletonUtils.java b/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/tool/TempletonUtils.java
index 7f0633074e..1caf61a8be 100644
--- a/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/tool/TempletonUtils.java
+++ b/hcatalog/webhcat/svr/src/main/java/org/apache/hcatalog/templeton/tool/TempletonUtils.java
@@ -35,6 +35,7 @@
 
 import org.apache.hadoop.conf.Configuration;
 import org.apache.hadoop.fs.FileSystem;
+import org.apache.hadoop.fs.LocalFileSystem;
 import org.apache.hadoop.fs.Path;
 import org.apache.hadoop.hdfs.DistributedFileSystem;
 import org.apache.hadoop.security.UserGroupInformation;
@@ -220,7 +221,8 @@ public static String addUserHomeDirectoryIfApplicable(String origPathStr, String
         // If path contains scheme, user should mean an absolute path,
         // However, path.isAbsolute tell us otherwise.
         // So we skip conversion for non-hdfs.
-        if (!(path.getFileSystem(conf) instanceof DistributedFileSystem)) {
+        if (!(path.getFileSystem(conf) instanceof DistributedFileSystem)&&
+                !(path.getFileSystem(conf) instanceof LocalFileSystem)) {
             return result;
         }
         if (!path.isAbsolute()) {
@@ -236,7 +238,12 @@ public static Path hadoopFsPath(String fname, final Configuration conf, String u
             return null;
         }
 
-        UserGroupInformation ugi = UgiFactory.getUgi(user);
+        UserGroupInformation ugi;
+        if (user!=null) {
+            ugi = UgiFactory.getUgi(user);
+        } else {
+            ugi = UserGroupInformation.getLoginUser();
+        }
         final String finalFName = new String(fname);
 
         final FileSystem defaultFs = 
