diff --git a/CHANGES.txt b/CHANGES.txt
index de270e0f1f..f84902518d 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -394,6 +394,9 @@ Trunk -  Unreleased
     HIVE-1978 Hive SymlinkTextInputFormat does not estimate input size correctly
     (He Yongqiang via Ning Zhang)
 
+    HIVE-1896 HBase and Contrib JAR names are missing version numbers
+    (Carl Steinbach via jvs)
+
   OPTIMIZATIONS
 
   BUG FIXES
diff --git a/build-common.xml b/build-common.xml
index 6bf5d3c5ea..dac20d4257 100644
--- a/build-common.xml
+++ b/build-common.xml
@@ -436,6 +436,7 @@
       <sysproperty key="fs.default.name" value="${fs.default.name}"/>
       <sysproperty key="build.dir" value="${build.dir}"/>
       <sysproperty key="build.dir.hive" value="${build.dir.hive}"/>
+      <sysproperty key="hive.version" value="${version}"/>
 
       <classpath refid="${test.classpath.id}"/>
       <formatter type="${test.junit.output.format}" usefile="${test.junit.output.usefile}" />
diff --git a/contrib/build.xml b/contrib/build.xml
index 67948ca3d5..21c004ee2b 100644
--- a/contrib/build.xml
+++ b/contrib/build.xml
@@ -107,23 +107,4 @@
 
   </target>
 
-  <!-- override target jar because contrib tests need to add contrib jars,
-       which needs to be a constant without the version number -->
-  <target name="jar" depends="compile">
-    <echo message="Jar: ${ant.project.name}"/>
-    <jar
-      jarfile="${build.dir}/hive_${ant.project.name}.jar"
-      basedir="${build.classes}">
-      <manifest>
-        <!-- Not putting these in their own manifest section, since that inserts
-        a new-line, which breaks the reading of the attributes. -->
-        <attribute name="Implementation-Title" value="Hive"/>
-        <attribute name="Implementation-Version" value="${version}"/>
-        <attribute name="Implementation-Vendor" value="Apache"/>
-      </manifest>
-      <metainf dir="${hive.root}" includes="LICENSE,NOTICE"/>
-    </jar>
-  </target>
-
-
 </project>
diff --git a/contrib/src/test/queries/clientnegative/serde_regex.q b/contrib/src/test/queries/clientnegative/serde_regex.q
index 7a929699a6..944645abfd 100644
--- a/contrib/src/test/queries/clientnegative/serde_regex.q
+++ b/contrib/src/test/queries/clientnegative/serde_regex.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 DROP TABLE serde_regex;
 
diff --git a/contrib/src/test/queries/clientnegative/udtf_explode2.q b/contrib/src/test/queries/clientnegative/udtf_explode2.q
index 33b1ddeb8d..78007487a7 100644
--- a/contrib/src/test/queries/clientnegative/udtf_explode2.q
+++ b/contrib/src/test/queries/clientnegative/udtf_explode2.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION explode2 AS 'org.apache.hadoop.hive.contrib.udtf.example.GenericUDTFExplode2';
 
diff --git a/contrib/src/test/queries/clientpositive/dboutput.q b/contrib/src/test/queries/clientpositive/dboutput.q
index c779a4d44a..dbbcfcbd25 100644
--- a/contrib/src/test/queries/clientpositive/dboutput.q
+++ b/contrib/src/test/queries/clientpositive/dboutput.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION dboutput AS 'org.apache.hadoop.hive.contrib.genericudf.example.GenericUDFDBOutput';
 
diff --git a/contrib/src/test/queries/clientpositive/fileformat_base64.q b/contrib/src/test/queries/clientpositive/fileformat_base64.q
index 69067dcff7..adf889eba9 100644
--- a/contrib/src/test/queries/clientpositive/fileformat_base64.q
+++ b/contrib/src/test/queries/clientpositive/fileformat_base64.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 DROP TABLE base64_test;
 
diff --git a/contrib/src/test/queries/clientpositive/java_mr_example.q b/contrib/src/test/queries/clientpositive/java_mr_example.q
index dc45f614a3..6c8a2209bf 100644
--- a/contrib/src/test/queries/clientpositive/java_mr_example.q
+++ b/contrib/src/test/queries/clientpositive/java_mr_example.q
@@ -1,10 +1,10 @@
 FROM (
   FROM src
    MAP value, key
- USING 'java -cp ../build/contrib/hive_contrib.jar org.apache.hadoop.hive.contrib.mr.example.IdentityMapper'
+ USING 'java -cp ${system:build.dir}/hive-contrib-${system:hive.version}.jar org.apache.hadoop.hive.contrib.mr.example.IdentityMapper'
     AS k, v
  CLUSTER BY k) map_output
   REDUCE k, v
-   USING 'java -cp ../build/contrib/hive_contrib.jar org.apache.hadoop.hive.contrib.mr.example.WordCountReduce'
+   USING 'java -cp ${system:build.dir}/hive-contrib-${system:hive.version}.jar org.apache.hadoop.hive.contrib.mr.example.WordCountReduce'
    AS k, v
 ;
\ No newline at end of file
diff --git a/contrib/src/test/queries/clientpositive/lateral_view_explode2.q b/contrib/src/test/queries/clientpositive/lateral_view_explode2.q
index c0588e3d3a..b46c9b263b 100644
--- a/contrib/src/test/queries/clientpositive/lateral_view_explode2.q
+++ b/contrib/src/test/queries/clientpositive/lateral_view_explode2.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION explode2 AS 'org.apache.hadoop.hive.contrib.udtf.example.GenericUDTFExplode2';
 
diff --git a/contrib/src/test/queries/clientpositive/serde_regex.q b/contrib/src/test/queries/clientpositive/serde_regex.q
index 8ad3162dfb..702e356d86 100644
--- a/contrib/src/test/queries/clientpositive/serde_regex.q
+++ b/contrib/src/test/queries/clientpositive/serde_regex.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 DROP TABLE serde_regex;
 
diff --git a/contrib/src/test/queries/clientpositive/serde_s3.q b/contrib/src/test/queries/clientpositive/serde_s3.q
index bf3ae2441f..a0bca81f8d 100644
--- a/contrib/src/test/queries/clientpositive/serde_s3.q
+++ b/contrib/src/test/queries/clientpositive/serde_s3.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 DROP TABLE s3log;
 CREATE TABLE s3log
diff --git a/contrib/src/test/queries/clientpositive/serde_typedbytes.q b/contrib/src/test/queries/clientpositive/serde_typedbytes.q
index 9db34a69b4..351402adce 100644
--- a/contrib/src/test/queries/clientpositive/serde_typedbytes.q
+++ b/contrib/src/test/queries/clientpositive/serde_typedbytes.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 drop table dest1;
 CREATE TABLE dest1(key INT, value STRING) STORED AS TEXTFILE;
diff --git a/contrib/src/test/queries/clientpositive/serde_typedbytes2.q b/contrib/src/test/queries/clientpositive/serde_typedbytes2.q
index 97c422bbd1..9d49ce0ded 100644
--- a/contrib/src/test/queries/clientpositive/serde_typedbytes2.q
+++ b/contrib/src/test/queries/clientpositive/serde_typedbytes2.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 drop table dest1;
 CREATE TABLE dest1(key SMALLINT, value STRING) STORED AS TEXTFILE;
diff --git a/contrib/src/test/queries/clientpositive/serde_typedbytes3.q b/contrib/src/test/queries/clientpositive/serde_typedbytes3.q
index e20c9f532b..aa1b391e47 100644
--- a/contrib/src/test/queries/clientpositive/serde_typedbytes3.q
+++ b/contrib/src/test/queries/clientpositive/serde_typedbytes3.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 drop table dest1;
 CREATE TABLE dest1(key STRING, value STRING) STORED AS TEXTFILE;
diff --git a/contrib/src/test/queries/clientpositive/serde_typedbytes4.q b/contrib/src/test/queries/clientpositive/serde_typedbytes4.q
index eb558fa830..031d07ec48 100644
--- a/contrib/src/test/queries/clientpositive/serde_typedbytes4.q
+++ b/contrib/src/test/queries/clientpositive/serde_typedbytes4.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 drop table dest1;
 CREATE TABLE dest1(key STRING, value STRING) STORED AS TEXTFILE;
diff --git a/contrib/src/test/queries/clientpositive/serde_typedbytes5.q b/contrib/src/test/queries/clientpositive/serde_typedbytes5.q
index 5e70bcad78..99b2cfe202 100644
--- a/contrib/src/test/queries/clientpositive/serde_typedbytes5.q
+++ b/contrib/src/test/queries/clientpositive/serde_typedbytes5.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 drop table dest1;
 CREATE TABLE dest1(key INT, value STRING) STORED AS TEXTFILE;
diff --git a/contrib/src/test/queries/clientpositive/serde_typedbytes_null.q b/contrib/src/test/queries/clientpositive/serde_typedbytes_null.q
index cbca108d03..fffee8dbe9 100644
--- a/contrib/src/test/queries/clientpositive/serde_typedbytes_null.q
+++ b/contrib/src/test/queries/clientpositive/serde_typedbytes_null.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 DROP TABLE table1;
 
diff --git a/contrib/src/test/queries/clientpositive/udaf_example_avg.q b/contrib/src/test/queries/clientpositive/udaf_example_avg.q
index da729a5506..cdfd7aae01 100644
--- a/contrib/src/test/queries/clientpositive/udaf_example_avg.q
+++ b/contrib/src/test/queries/clientpositive/udaf_example_avg.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_avg AS 'org.apache.hadoop.hive.contrib.udaf.example.UDAFExampleAvg';
 
diff --git a/contrib/src/test/queries/clientpositive/udaf_example_group_concat.q b/contrib/src/test/queries/clientpositive/udaf_example_group_concat.q
index ac49ac4726..0317f99c39 100644
--- a/contrib/src/test/queries/clientpositive/udaf_example_group_concat.q
+++ b/contrib/src/test/queries/clientpositive/udaf_example_group_concat.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_group_concat AS 'org.apache.hadoop.hive.contrib.udaf.example.UDAFExampleGroupConcat';
 
diff --git a/contrib/src/test/queries/clientpositive/udaf_example_max.q b/contrib/src/test/queries/clientpositive/udaf_example_max.q
index c86627ea44..118b81136c 100644
--- a/contrib/src/test/queries/clientpositive/udaf_example_max.q
+++ b/contrib/src/test/queries/clientpositive/udaf_example_max.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_max AS 'org.apache.hadoop.hive.contrib.udaf.example.UDAFExampleMax';
 
diff --git a/contrib/src/test/queries/clientpositive/udaf_example_max_n.q b/contrib/src/test/queries/clientpositive/udaf_example_max_n.q
index 73375d9a00..fb715450d4 100644
--- a/contrib/src/test/queries/clientpositive/udaf_example_max_n.q
+++ b/contrib/src/test/queries/clientpositive/udaf_example_max_n.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_max_n AS 'org.apache.hadoop.hive.contrib.udaf.example.UDAFExampleMaxN';
 
diff --git a/contrib/src/test/queries/clientpositive/udaf_example_min.q b/contrib/src/test/queries/clientpositive/udaf_example_min.q
index e1ed7ed7d3..e9236de9a5 100644
--- a/contrib/src/test/queries/clientpositive/udaf_example_min.q
+++ b/contrib/src/test/queries/clientpositive/udaf_example_min.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_min AS 'org.apache.hadoop.hive.contrib.udaf.example.UDAFExampleMin';
 
diff --git a/contrib/src/test/queries/clientpositive/udaf_example_min_n.q b/contrib/src/test/queries/clientpositive/udaf_example_min_n.q
index 86142e6053..63e5267a79 100644
--- a/contrib/src/test/queries/clientpositive/udaf_example_min_n.q
+++ b/contrib/src/test/queries/clientpositive/udaf_example_min_n.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 CREATE TEMPORARY FUNCTION example_min_n AS 'org.apache.hadoop.hive.contrib.udaf.example.UDAFExampleMinN';
 
 EXPLAIN
diff --git a/contrib/src/test/queries/clientpositive/udf_example_add.q b/contrib/src/test/queries/clientpositive/udf_example_add.q
index 68d1ce3876..8f10ce2c80 100644
--- a/contrib/src/test/queries/clientpositive/udf_example_add.q
+++ b/contrib/src/test/queries/clientpositive/udf_example_add.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_add AS 'org.apache.hadoop.hive.contrib.udf.example.UDFExampleAdd';
 
diff --git a/contrib/src/test/queries/clientpositive/udf_example_arraymapstruct.q b/contrib/src/test/queries/clientpositive/udf_example_arraymapstruct.q
index 951006b97c..5d84533ddf 100644
--- a/contrib/src/test/queries/clientpositive/udf_example_arraymapstruct.q
+++ b/contrib/src/test/queries/clientpositive/udf_example_arraymapstruct.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_arraysum    AS 'org.apache.hadoop.hive.contrib.udf.example.UDFExampleArraySum';
 CREATE TEMPORARY FUNCTION example_mapconcat   AS 'org.apache.hadoop.hive.contrib.udf.example.UDFExampleMapConcat';
diff --git a/contrib/src/test/queries/clientpositive/udf_example_format.q b/contrib/src/test/queries/clientpositive/udf_example_format.q
index c9982d2105..09c4e69d4c 100644
--- a/contrib/src/test/queries/clientpositive/udf_example_format.q
+++ b/contrib/src/test/queries/clientpositive/udf_example_format.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION example_format AS 'org.apache.hadoop.hive.contrib.udf.example.UDFExampleFormat';
 
diff --git a/contrib/src/test/queries/clientpositive/udf_row_sequence.q b/contrib/src/test/queries/clientpositive/udf_row_sequence.q
index 67b05dff13..61e0a42d20 100644
--- a/contrib/src/test/queries/clientpositive/udf_row_sequence.q
+++ b/contrib/src/test/queries/clientpositive/udf_row_sequence.q
@@ -4,7 +4,7 @@
 
 drop temporary function row_sequence;
 
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 create temporary function row_sequence as 
 'org.apache.hadoop.hive.contrib.udf.UDFRowSequence';
diff --git a/contrib/src/test/queries/clientpositive/udtf_explode2.q b/contrib/src/test/queries/clientpositive/udtf_explode2.q
index fab9d572fd..2173eec8d7 100644
--- a/contrib/src/test/queries/clientpositive/udtf_explode2.q
+++ b/contrib/src/test/queries/clientpositive/udtf_explode2.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION explode2 AS 'org.apache.hadoop.hive.contrib.udtf.example.GenericUDTFExplode2';
 
diff --git a/contrib/src/test/queries/clientpositive/udtf_output_on_close.q b/contrib/src/test/queries/clientpositive/udtf_output_on_close.q
index efd905b4d9..c5cdf0aba6 100644
--- a/contrib/src/test/queries/clientpositive/udtf_output_on_close.q
+++ b/contrib/src/test/queries/clientpositive/udtf_output_on_close.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 
 CREATE TEMPORARY FUNCTION udtfCount2 AS 'org.apache.hadoop.hive.contrib.udtf.example.GenericUDTFCount2';
 
diff --git a/contrib/src/test/queries/clientpositive/url_hook.q b/contrib/src/test/queries/clientpositive/url_hook.q
index 027e081d1e..d9ffd2858c 100644
--- a/contrib/src/test/queries/clientpositive/url_hook.q
+++ b/contrib/src/test/queries/clientpositive/url_hook.q
@@ -1,4 +1,4 @@
-add jar ../build/contrib/hive_contrib.jar;
+add jar ${system:build.dir}/hive-contrib-${system:hive.version}.jar;
 set hive.metastore.force.reload.conf=true;
 SHOW TABLES 'src';
 set hive.metastore.ds.connection.url.hook=org.apache.hadoop.hive.contrib.metastore.hooks.TestURLHook;
diff --git a/hbase-handler/build.xml b/hbase-handler/build.xml
index 88c227a10e..e0a3ae631d 100644
--- a/hbase-handler/build.xml
+++ b/hbase-handler/build.xml
@@ -85,22 +85,4 @@
               logDirectory="${test.log.dir}/hbase-handler"/>
   </target>
 
-  <!-- override target jar because tests need to add hbase-handler jars,
-       which needs to be a constant without the version number -->
-  <target name="jar" depends="compile">
-    <echo message="Jar: ${ant.project.name}"/>
-    <jar
-      jarfile="${build.dir}/hive_${ant.project.name}.jar"
-      basedir="${build.classes}">
-      <manifest>
-        <!-- Not putting these in their own manifest section, since that inserts
-        a new-line, which breaks the reading of the attributes. -->
-        <attribute name="Implementation-Title" value="Hive"/>
-        <attribute name="Implementation-Version" value="${version}"/>
-        <attribute name="Implementation-Vendor" value="Apache"/>
-      </manifest>
-      <metainf dir="${hive.root}" includes="LICENSE,NOTICE"/>
-    </jar>
-  </target>
-
 </project>
diff --git a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
index b5bc8ae4cd..35485330c4 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/QTestUtil.java
@@ -925,6 +925,7 @@ public int checkCliDriverResults(String tname) throws Exception {
         "-I", "LOCK_QUERYID:",
         "-I", "grantTime",
         "-I", "[.][.][.] [0-9]* more",
+        "-I", "USING 'java -cp",
         (new File(logDir, tname + ".out")).getPath(),
         outFileName };
 
