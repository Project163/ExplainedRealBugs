diff --git a/testutils/metastore/dbs/derby/execute.sh b/testutils/metastore/dbs/derby/execute.sh
old mode 100644
new mode 100755
index d60f05b564..fd76ae63ca
--- a/testutils/metastore/dbs/derby/execute.sh
+++ b/testutils/metastore/dbs/derby/execute.sh
@@ -25,8 +25,11 @@ echo "####################################################"
 echo "Executing script for Derby SQL: $1"
 echo "####################################################"
 
+JAVA_PATH=($(readlink /etc/alternatives/java))
+JAVA_PATH=`dirname $JAVA_PATH`
+
 export DERBY_HOME=/usr/share/javadb
-export JAVA_HOME=/usr/lib/jvm/java-7-openjdk-amd64
+export JAVA_HOME=$JAVA_PATH/..
 export PATH=$PATH:$DERBY_HOME/bin:$JAVA_HOME/bin
 export CLASSPATH=$CLASSPATH:$DERBY_HOME/lib/derby.jar:$DERBY_HOME/lib/derbytools.jar:$DERBY_HOME/lib/derbyclient.jar
 
diff --git a/testutils/metastore/dbs/derby/prepare.sh b/testutils/metastore/dbs/derby/prepare.sh
old mode 100644
new mode 100755
index fe4b2c38c9..0c91954377
--- a/testutils/metastore/dbs/derby/prepare.sh
+++ b/testutils/metastore/dbs/derby/prepare.sh
@@ -50,8 +50,11 @@ else
   apt-get install -y --force-yes -o Dpkg::Options::="--force-overwrite" sun-javadb-core sun-javadb-client derby-tools
 fi
 
+JAVA_PATH=($(readlink /etc/alternatives/java))
+JAVA_PATH=`dirname $JAVA_PATH`
+
 export DERBY_HOME=/usr/share/javadb
-export JAVA_HOME=//usr/lib/jvm/java-7-openjdk-amd64
+export JAVA_HOME=$JAVA_PATH/..
 export PATH=$PATH:/usr/share/javadb/bin:$JAVA_HOME/bin
 export CLASSPATH=$CLASSPATH:$DERBY_HOME/lib/derby.jar:$DERBY_HOME/lib/derbytools.jar:$DERBY_HOME/lib/derbyclient.jar
 rm -rf /tmp/hive_hms_testing;
