diff --git a/hplsql/src/main/antlr4/org/apache/hive/hplsql/Hplsql.g4 b/hplsql/src/main/antlr4/org/apache/hive/hplsql/Hplsql.g4
index 14cf034ad0..43a3298461 100644
--- a/hplsql/src/main/antlr4/org/apache/hive/hplsql/Hplsql.g4
+++ b/hplsql/src/main/antlr4/org/apache/hive/hplsql/Hplsql.g4
@@ -140,8 +140,8 @@ assignment_stmt_item :
      ;
 
 assignment_stmt_single_item : 
-       ident T_COLON? T_EQUAL expr
-     | T_OPEN_P ident T_CLOSE_P T_COLON? T_EQUAL expr
+       qident T_COLON? T_EQUAL expr
+     | T_OPEN_P qident T_CLOSE_P T_COLON? T_EQUAL expr
      ;
 
 assignment_stmt_collection_item :
diff --git a/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java b/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java
index 7386f9a58a..ccfe5c5ce0 100644
--- a/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java
+++ b/hplsql/src/main/java/org/apache/hive/hplsql/Exec.java
@@ -1635,7 +1635,7 @@ String createLocalUdf() {
    */
   @Override 
   public Integer visitAssignment_stmt_single_item(HplsqlParser.Assignment_stmt_single_itemContext ctx) { 
-    String name = ctx.ident().getText();
+    String name = ctx.qident().getText();
     visit(ctx.expr());    
     Var var = setVariable(name);
     StringBuilder assignments = new StringBuilder();
diff --git a/itests/hive-unit/src/test/java/org/apache/hive/beeline/TestHplSqlViaBeeLine.java b/itests/hive-unit/src/test/java/org/apache/hive/beeline/TestHplSqlViaBeeLine.java
index efe021e659..0ae643c552 100644
--- a/itests/hive-unit/src/test/java/org/apache/hive/beeline/TestHplSqlViaBeeLine.java
+++ b/itests/hive-unit/src/test/java/org/apache/hive/beeline/TestHplSqlViaBeeLine.java
@@ -1062,6 +1062,33 @@ public void testExecuteSelectCountStatement() throws Throwable {
     testScriptFile(SCRIPT_TEXT, args(), "^(.(?!(ClassCastException)))*$", OutStream.ERR);
   }
 
+  @Test
+  public void testSetHplsqlOnErrorStop() throws Throwable {
+    String SCRIPT_TEXT =
+        "SET hplsql.onerror='stop';\n" +
+            "insert into abc values('Tbl Not Exists');\n" +
+            "SELECT CURRENT_USER;";
+    testScriptFile(SCRIPT_TEXT, args(), "^(.(?!(" + System.getProperty("user.name") + ")))*$");
+  }
+
+  @Test
+  public void testSetHplsqlOnErrorSetError() throws Throwable {
+    String SCRIPT_TEXT =
+        "SET hplsql.onerror='seterror';\n" +
+            "insert into abc values('Tbl Not Exists');\n" +
+            "if SQLCODE < 0\n" + " PRINT 'SQL Error...';";
+    testScriptFile(SCRIPT_TEXT, args(), "SessionState: SQL Error...", OutStream.ERR);
+  }
+
+  @Test
+  public void testSetHplsqlOnErrorException() throws Throwable {
+    String SCRIPT_TEXT =
+        "SET hplsql.onerror='exception';\n" +
+            "insert into abc values('Tbl Not Exists');\n" +
+            "SELECT CURRENT_USER;";
+    testScriptFile(SCRIPT_TEXT, args(), "^(.(?!(" + System.getProperty("user.name") + ")))*$");
+  }
+
   private static List<String> args() {
     return Arrays.asList("-d", BeeLine.BEELINE_DEFAULT_JDBC_DRIVER,
             "-u", miniHS2.getBaseJdbcURL() + ";mode=hplsql", "-n", userName);
