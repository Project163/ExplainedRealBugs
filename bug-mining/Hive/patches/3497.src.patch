diff --git a/ant/src/org/apache/hadoop/hive/ant/QTestGenTask.java b/ant/src/org/apache/hadoop/hive/ant/QTestGenTask.java
index 60c7764ed8..b3315c7547 100644
--- a/ant/src/org/apache/hadoop/hive/ant/QTestGenTask.java
+++ b/ant/src/org/apache/hadoop/hive/ant/QTestGenTask.java
@@ -455,7 +455,7 @@ public void execute() throws BuildException {
       }
 
       File qFileNames = new File(outputDirectory, className + "QFileNames.txt");
-      String qFileNamesFile = qFileNames.getCanonicalPath();
+      String qFileNamesFile = qFileNames.toURI().getPath();
 
       if (qFileNames.exists()) {
         if (!qFileNames.delete()) {
