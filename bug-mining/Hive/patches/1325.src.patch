diff --git a/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java b/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
index e1c1ae3def..97436c5bcd 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
@@ -287,7 +287,7 @@ void log(RecordTypes rt, Map<String, String> keyValMap) {
       String key = ent.getKey();
       String val = ent.getValue();
       if(val != null) {
-        val = val.replace('\n', ' ');
+        val = val.replace(System.getProperty("line.separator"), " ");
       }
       sb.append(key + "=\"" + val + "\"");
 
