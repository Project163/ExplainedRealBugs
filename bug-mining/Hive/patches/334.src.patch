diff --git a/CHANGES.txt b/CHANGES.txt
index b8d98897ca..22230adb99 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -62,6 +62,8 @@ Trunk -  Unreleased
     HIVE-1085. ColumnarSerde should not be the default Serde when user 
     specified a fileformat using 'stored as' (Yongqiang He via Ning Zhang)
 
+    HIVE-1086. Add "-Doffline=true" option to ant. (Zheng Shao via Ning Zhang)
+
 Release 0.5.0 -  Unreleased
 
   INCOMPATIBLE CHANGES
diff --git a/build-common.xml b/build-common.xml
index 7eec9b9cbe..2614842324 100644
--- a/build-common.xml
+++ b/build-common.xml
@@ -82,6 +82,10 @@
   <property name="ant_task_repo_url" value="${mvn.repo}/org/apache/maven/maven-ant-tasks/${ant-task.version}/maven-ant-tasks-${ant-task.version}.jar"/>
   <property name="ivy_repo_url" value="${mvn.repo}/org/apache/ivy/ivy/${ivy.version}/ivy-${ivy.version}.jar"/>
 
+  <condition property="offline">
+    <istrue value="${is-offline}"/>
+  </condition>
+
   <!--this is the naming policy for artifacts we want pulled down-->
   <property name="ivy.artifact.retrieve.pattern" value="${ant.project.name}/[conf]/[artifact]-[revision].[ext]"/>
       
@@ -147,14 +151,15 @@
   </target>
   
   <target name="ivy-retrieve" depends="ivy-resolve"
-    description="Retrieve Ivy-managed artifacts">
+    description="Retrieve Ivy-managed artifacts" unless="offline">
     <ivy:retrieve settingsRef="${ant.project.name}.ivy.settings"
       pattern="${build.ivy.lib.dir}/${ivy.artifact.retrieve.pattern}"
       log="${ivyresolvelog}"/>
   </target>
   
   <target name="ivy-retrieve-checkstyle" depends="ivy-resolve-checkstyle"
-    description="Retrieve Ivy-managed artifacts for the checkstyle configurations">
+    description="Retrieve Ivy-managed artifacts for the checkstyle configurations"
+    unless="offline">
     <ivy:retrieve settingsRef="${ant.project.name}.ivy.settings"
       pattern="${build.ivy.lib.dir}/${ivy.artifact.retrieve.pattern}"
       log="${ivyresolvelog}"/>
@@ -162,7 +167,8 @@
   </target>
   
   <target name="ivy-retrieve-hadoop-source" depends="ivy-init"
-    description="Retrieve Ivy-managed Hadoop source artifacts" >
+    description="Retrieve Ivy-managed Hadoop source artifacts"
+    unless="offline">
     <ivy:retrieve settingsRef="${ant.project.name}.ivy.settings"
       pattern="${build.dir.hadoop}/[artifact]-[revision].[ext]"/>
   </target>
diff --git a/build.xml b/build.xml
index 686ca71f17..39fc2a471d 100644
--- a/build.xml
+++ b/build.xml
@@ -46,6 +46,9 @@
   <property name="checkstyle.conf.dir" location="${hive.root}/checkstyle"/>
   <property name="checkstyle.build.dir" location="${build.dir.hive}/checkstyle"/>
 
+  <condition property="is-offline" value="true" else="false">
+    <isset property="offline"/>
+  </condition>
 
   <!-- ====================================================== -->
   <!-- Macro definitions                                      -->
@@ -78,6 +81,7 @@
     <sequential>
       <subant target="@{target}">
         <property name="build.dir.hive" location="${build.dir.hive}"/>
+        <property name="is-offline" value="${is-offline}"/>
         <filelist dir="." files="ant/build.xml,shims/build.xml,common/build.xml,serde/build.xml,metastore/build.xml,ql/build.xml,cli/build.xml,contrib/build.xml,service/build.xml,jdbc/build.xml,hwi/build.xml,ant/build.xml"/>
       </subant>
     </sequential>
@@ -88,6 +92,7 @@
     <sequential>
       <subant target="@{target}">
         <property name="build.dir.hive" location="${build.dir.hive}"/>
+        <property name="is-offline" value="${is-offline}"/>
         <filelist dir="." files="shims/build.xml,common/build.xml,serde/build.xml,metastore/build.xml,ql/build.xml,cli/build.xml,contrib/build.xml,service/build.xml,jdbc/build.xml,hwi/build.xml"/>
       </subant>
     </sequential>
