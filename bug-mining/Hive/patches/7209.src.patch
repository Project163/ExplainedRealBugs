diff --git a/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFGetSplits.java b/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFGetSplits.java
index 30673cef67..c925a3fe0e 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFGetSplits.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/udf/generic/GenericUDTFGetSplits.java
@@ -93,6 +93,7 @@
 import org.apache.hadoop.mapred.InputSplit;
 import org.apache.hadoop.mapred.JobConf;
 import org.apache.hadoop.mapred.SplitLocationInfo;
+import org.apache.hadoop.registry.client.binding.RegistryUtils;
 import org.apache.hadoop.security.UserGroupInformation;
 import org.apache.hadoop.security.token.Token;
 import org.apache.hadoop.yarn.api.records.ApplicationId;
@@ -441,7 +442,7 @@ public InputSplit[] getSplits(JobConf job, int numSplits, TezWork work, Schema s
       }
 
       // This assumes LLAP cluster owner is always the HS2 user.
-      String llapUser = UserGroupInformation.getLoginUser().getShortUserName();
+      String llapUser = RegistryUtils.currentUser();
 
       String queryUser = null;
       byte[] tokenBytes = null;
