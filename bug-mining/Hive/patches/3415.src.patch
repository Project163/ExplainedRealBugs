diff --git a/bin/beeline.cmd b/bin/beeline.cmd
index 868744437f..971e20bdf1 100644
--- a/bin/beeline.cmd
+++ b/bin/beeline.cmd
@@ -42,23 +42,24 @@ if not exist %HADOOP_HOME%\libexec\hadoop-config.cmd (
 )
 @rem supress the HADOOP_HOME warnings in 1.x.x
 set HADOOP_HOME_WARN_SUPPRESS=true
-call %HADOOP_HOME%\libexec\hadoop-config.cmd
 
 @rem include only the beeline client jar and its dependencies
 pushd %HIVE_HOME%\lib
 for /f %%a IN ('dir /b hive-beeline-**.jar') do (
-  set CLASSPATH=%CLASSPATH%;%HIVE_HOME%\lib\%%a
+  set HADOOP_CLASSPATH=%HADOOP_CLASSPATH%;%HIVE_HOME%\lib\%%a
 )
 for /f %%a IN ('dir /b super-csv-**.jar') do (
-  set CLASSPATH=%CLASSPATH%;%HIVE_HOME%\lib\%%a
+  set HADOOP_CLASSPATH=%HADOOP_CLASSPATH%;%HIVE_HOME%\lib\%%a
 )
 for /f %%a IN ('dir /b jline-**.jar') do (
-  set CLASSPATH=%CLASSPATH%;%HIVE_HOME%\lib\%%a
+  set HADOOP_CLASSPATH=%HADOOP_CLASSPATH%;%HIVE_HOME%\lib\%%a
 )
 for /f %%a IN ('dir /b hive-jdbc-**-standalone.jar') do (
-  set CLASSPATH=%CLASSPATH%;%HIVE_HOME%\lib\%%a
+  set HADOOP_CLASSPATH=%HADOOP_CLASSPATH%;%HIVE_HOME%\lib\%%a
 )
 popd
+set HADOOP_USER_CLASSPATH_FIRST=true
+call %HADOOP_HOME%\libexec\hadoop-config.cmd
 
 call %JAVA_HOME%\bin\java %JAVA_HEAP_MAX% %HADOOP_OPTS% -classpath %CLASSPATH% org.apache.hive.beeline.BeeLine %*
 
