diff --git a/ql/src/java/org/apache/hadoop/hive/ql/parse/CalcitePlanner.java b/ql/src/java/org/apache/hadoop/hive/ql/parse/CalcitePlanner.java
index 765e2e4646..79dc618a54 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/parse/CalcitePlanner.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/parse/CalcitePlanner.java
@@ -950,7 +950,7 @@ Pair<Boolean, String> canCBOHandleAst(ASTNode ast, QB qb, PreCboCtx cboCtx) {
     if (msg == null) {
       return Pair.of(true, msg);
     }
-    msg = msg.substring(0, msg.length() - 2);
+
     if (needToLogMessage) {
       STATIC_LOG.info("Not invoking CBO because the statement " + msg);
     }
@@ -1006,10 +1006,10 @@ private static String canHandleQbForCbo(QueryProperties queryProperties, HiveCon
       if (queryProperties.hasLateralViews()) {
         msg += "has lateral views; ";
       }
-
       if (msg.isEmpty()) {
         msg += "has some unspecified limitations; ";
       }
+      msg = msg.substring(0, msg.length() - 2);
     }
     return msg;
   }
