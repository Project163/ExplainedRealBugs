diff --git a/build-common.xml b/build-common.xml
index 7ede049daa..a32d973e9b 100644
--- a/build-common.xml
+++ b/build-common.xml
@@ -432,6 +432,7 @@
       <sysproperty key="build.ivy.lib.dir" value="${build.ivy.lib.dir}"/>
       <sysproperty key="derby.version" value="${derby.version}"/>
       <sysproperty key="hive.version" value="${version}"/>
+      <sysproperty key="java.net.preferIPv4Stack" value="${java.net.preferIPv4Stack}"/>
       <sysproperty key="hadoop.bin.path" value="${test.hadoop.bin.path}${junit.script.extension}"/>
 
       <classpath refid="test.local.classpath"/>
diff --git a/build.properties b/build.properties
index 7b534635d6..8b98c90b9c 100644
--- a/build.properties
+++ b/build.properties
@@ -44,6 +44,8 @@ hadoop.version.ant-internal=${hadoop.version}
 hadoop.root.default=${build.dir.hadoop}/hadoop-${hadoop.version.ant-internal}
 hadoop.root=${hadoop.root.default}
 test.hadoop.bin.path=${hive.root}/testutils/hadoop
+java.net.preferIPv4Stack=true
+
 # Newer versions of Hadoop name the jar as hadoop-{core,test}-VERSION instead of hadoop-VERSION-{core,test}
 # We will add both styles to the classpath and it will pick up whichever is there
 hadoop.oldstyle-name.jar=${hadoop.root}/hadoop-${hadoop.version.ant-internal}-core.jar
