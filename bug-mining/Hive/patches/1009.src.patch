diff --git a/ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java b/ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java
index 8195124c69..c516f247a3 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/history/TestHiveHistory.java
@@ -51,13 +51,10 @@ public class TestHiveHistory extends TestCase {
 
   static HiveConf conf;
 
-  private static String tmpdir = "/tmp/" + System.getProperty("user.name")
-      + "/";
+  private static String tmpdir = System.getProperty("test.tmp.dir");
   private static Path tmppath = new Path(tmpdir);
   private static Hive db;
   private static FileSystem fs;
-  private QTestSetup setup;
-
   /*
    * intialize the tables
    */
@@ -78,9 +75,8 @@ protected void setUp() {
               + tmpdir);
         }
       }
-
-      setup = new QTestSetup();
-      setup.preTest(conf);
+      
+      conf.setBoolVar(HiveConf.ConfVars.HIVE_SUPPORT_CONCURRENCY, false);
 
       // copy the test files into hadoop if required.
       int i = 0;
@@ -115,19 +111,6 @@ protected void setUp() {
     }
   }
 
-  @Override
-  protected void tearDown() {
-    try {
-      setup.tearDown();
-    }
-    catch (Exception e) {
-      System.out.println("Exception: " + e.getMessage());
-      e.printStackTrace();
-      System.out.flush();
-      fail("Unexpected exception in tearDown");
-    }
-  }
-
   /**
    * Check history file output for this query.
    */
