diff --git a/ql/src/java/org/apache/hadoop/hive/ql/ddl/table/partition/show/ShowPartitionAnalyzer.java b/ql/src/java/org/apache/hadoop/hive/ql/ddl/table/partition/show/ShowPartitionAnalyzer.java
index a4158d6cf2..40500f13ff 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/ddl/table/partition/show/ShowPartitionAnalyzer.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/ddl/table/partition/show/ShowPartitionAnalyzer.java
@@ -38,6 +38,7 @@
 import org.apache.hadoop.hive.ql.metadata.Table;
 import org.apache.hadoop.hive.ql.parse.ASTNode;
 import org.apache.hadoop.hive.ql.parse.BaseSemanticAnalyzer;
+import org.apache.hadoop.hive.ql.parse.ColumnAccessInfo;
 import org.apache.hadoop.hive.ql.parse.HiveParser;
 import org.apache.hadoop.hive.ql.parse.HiveTableName;
 import org.apache.hadoop.hive.ql.parse.RowResolver;
@@ -76,6 +77,8 @@ public void analyzeInternal(ASTNode ast) throws SemanticException {
 
     Table table = getTable(HiveTableName.of(tableName));
     inputs.add(new ReadEntity(table));
+    setColumnAccessInfo(new ColumnAccessInfo());
+    table.getPartColNames().forEach(col -> getColumnAccessInfo().add(table.getCompleteName(), col));
 
     ExprNodeDesc filter = getShowPartitionsFilter(table, ast);
     String orderBy = getShowPartitionsOrder(table, ast);
diff --git a/ql/src/test/org/apache/hadoop/hive/ql/parse/TestColumnAccess.java b/ql/src/test/org/apache/hadoop/hive/ql/parse/TestColumnAccess.java
index c4e336a871..305c170656 100644
--- a/ql/src/test/org/apache/hadoop/hive/ql/parse/TestColumnAccess.java
+++ b/ql/src/test/org/apache/hadoop/hive/ql/parse/TestColumnAccess.java
@@ -41,6 +41,7 @@ public static void Setup() throws Exception {
     Driver driver = createDriver();
     driver.run("create table t1(id1 int, name1 string)");
     driver.run("create table t2(id2 int, id1 int, name2 string)");
+    driver.run("create table t3(id1 int) partitioned by (`date` int, p0 string)");
     driver.run("create view v1 as select * from t1");
   }
 
@@ -49,6 +50,7 @@ public static void Teardown() throws Exception {
     Driver driver = createDriver();
     driver.run("drop table t1");
     driver.run("drop table t2");
+    driver.run("drop table t3");
     driver.run("drop view v1");
   }
 
@@ -64,16 +66,16 @@ public void testQueryTable1() throws ParseException {
     List<String> cols = columnAccessInfo.getTableToColumnAccessMap().get("default@t1");
     Assert.assertNotNull(cols);
     Assert.assertEquals(2, cols.size());
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name1"));
 
     // check access columns from readEntity
     Map<String, List<String>> tableColsMap = getColsFromReadEntity(plan.getInputs());
     cols = tableColsMap.get("default@t1");
     Assert.assertNotNull(cols);
     Assert.assertEquals(2, cols.size());
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name1"));
   }
 
   @Test
@@ -88,14 +90,14 @@ public void testJoinTable1AndTable2() throws ParseException {
     List<String> cols = columnAccessInfo.getTableToColumnAccessMap().get("default@t1");
     Assert.assertNotNull(cols);
     Assert.assertEquals(2, cols.size());
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name1"));
     cols = columnAccessInfo.getTableToColumnAccessMap().get("default@t2");
     Assert.assertNotNull(cols);
     Assert.assertEquals(3, cols.size());
-    Assert.assertNotNull(cols.contains("id2"));
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id2"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name2"));
 
 
     // check access columns from readEntity
@@ -103,14 +105,14 @@ public void testJoinTable1AndTable2() throws ParseException {
     cols = tableColsMap.get("default@t1");
     Assert.assertNotNull(cols);
     Assert.assertEquals(2, cols.size());
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name1"));
     cols = tableColsMap.get("default@t2");
     Assert.assertNotNull(cols);
     Assert.assertEquals(3, cols.size());
-    Assert.assertNotNull(cols.contains("id2"));
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id2"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name2"));
   }
 
   @Test
@@ -129,14 +131,14 @@ public void testJoinView1AndTable2() throws ParseException {
     cols = columnAccessInfo.getTableToColumnAccessMap().get("default@v1");
     Assert.assertNotNull(cols);
     Assert.assertEquals(2, cols.size());
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name1"));
     cols = columnAccessInfo.getTableToColumnAccessMap().get("default@t2");
     Assert.assertNotNull(cols);
     Assert.assertEquals(3, cols.size());
-    Assert.assertNotNull(cols.contains("id2"));
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id2"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name2"));
 
 
     // check access columns from readEntity
@@ -146,14 +148,29 @@ public void testJoinView1AndTable2() throws ParseException {
     cols = tableColsMap.get("default@v1");
     Assert.assertNotNull(cols);
     Assert.assertEquals(2, cols.size());
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name1"));
     cols = tableColsMap.get("default@t2");
     Assert.assertNotNull(cols);
     Assert.assertEquals(3, cols.size());
-    Assert.assertNotNull(cols.contains("id2"));
-    Assert.assertNotNull(cols.contains("id1"));
-    Assert.assertNotNull(cols.contains("name1"));
+    Assert.assertTrue(cols.contains("id2"));
+    Assert.assertTrue(cols.contains("id1"));
+    Assert.assertTrue(cols.contains("name2"));
+  }
+
+  @Test
+  public void testShowPartitions() throws Exception {
+    String query = "show partitions t3 where `date` > 20011113";
+    Driver driver = createDriver();
+    int rc = driver.compile(query, true);
+    Assert.assertEquals("Checking command success", 0, rc);
+    QueryPlan plan = driver.getPlan();
+    ColumnAccessInfo columnAccessInfo = plan.getColumnAccessInfo();
+    List<String> cols = columnAccessInfo.getTableToColumnAccessMap().get("default@t3");
+
+    Assert.assertEquals(2, cols.size());
+    Assert.assertTrue(cols.contains("date"));
+    Assert.assertTrue(cols.contains("p0"));
   }
 
   private Map<String, List<String>> getColsFromReadEntity(Set<ReadEntity> inputs) {
