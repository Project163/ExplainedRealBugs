diff --git a/hcatalog/src/test/e2e/templeton/deployers/config/hive/hive-site.xml b/hcatalog/src/test/e2e/templeton/deployers/config/hive/hive-site.xml
index bebf6a6843..4307000600 100644
--- a/hcatalog/src/test/e2e/templeton/deployers/config/hive/hive-site.xml
+++ b/hcatalog/src/test/e2e/templeton/deployers/config/hive/hive-site.xml
@@ -31,6 +31,10 @@
         <value>thrift://localhost:9933</value>
         <description>For Hive CLI to connect to</description>
     </property>
+    <property>
+        <name>hive.execution.engine</name>
+        <value>mr</value><!--tez-->
+    </property>
     <!--
     This enables client side Hive (RDBMS style) security
     <property>
diff --git a/hcatalog/webhcat/svr/src/main/config/webhcat-default.xml b/hcatalog/webhcat/svr/src/main/config/webhcat-default.xml
index 45eadc034b..0a65efe1c9 100644
--- a/hcatalog/webhcat/svr/src/main/config/webhcat-default.xml
+++ b/hcatalog/webhcat/svr/src/main/config/webhcat-default.xml
@@ -131,8 +131,9 @@
   <property>
     <name>templeton.hive.properties</name>
     <value>hive.metastore.uris=thrift://localhost:9933,hive.metastore.sasl.enabled=false</value>
-    <description>Properties to set when running hive.  This is expected to be a comma-separated prop=value list.
-        If some value is itself a comma-separated list the escape character is '\'</description>
+    <description>Properties to set when running hive (during job sumission).  This is expected to
+        be a comma-separated prop=value list.  If some value is itself a comma-separated list the
+        escape character is '\'</description>
   </property>
 
   <property>
diff --git a/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/AppConfig.java b/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/AppConfig.java
index 31581544f6..0d3a26c49d 100644
--- a/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/AppConfig.java
+++ b/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/AppConfig.java
@@ -33,10 +33,10 @@
 import org.apache.commons.logging.LogFactory;
 import org.apache.hadoop.conf.Configuration;
 import org.apache.hadoop.fs.Path;
+import org.apache.hadoop.hive.conf.HiveConf;
 import org.apache.hadoop.util.StringUtils;
 import org.apache.hadoop.util.VersionInfo;
 import org.apache.hive.hcatalog.templeton.tool.JobState;
-import org.apache.hive.hcatalog.templeton.tool.TempletonUtils;
 import org.apache.hive.hcatalog.templeton.tool.ZooKeeperCleanup;
 import org.apache.hive.hcatalog.templeton.tool.ZooKeeperStorage;
 
@@ -111,7 +111,8 @@ public class AppConfig extends Configuration {
   /**
    * is a comma separated list of name=value pairs;
    * In case some value is itself a comma-separated list, the comma needs to
-   * be escaped with {@link org.apache.hadoop.util.StringUtils#ESCAPE_CHAR}
+   * be escaped with {@link org.apache.hadoop.util.StringUtils#ESCAPE_CHAR}.  See other usage
+   * of escape/unescape methods in {@link org.apache.hadoop.util.StringUtils} in webhcat.
    */
   public static final String HIVE_PROPS_NAME     = "templeton.hive.properties";
   public static final String SQOOP_ARCHIVE_NAME  = "templeton.sqoop.archive";
@@ -167,8 +168,49 @@ private void init() {
       loadOneFileConfig(hadoopConfDir, fname);
     }
     ProxyUserSupport.processProxyuserConfig(this);
+    handleHiveProperties();
     LOG.info(dumpEnvironent());
   }
+  /**
+   * When auto-shipping hive tar (for example when hive query or pig script
+   * is submitted via webhcat), Hive client is launched on some remote node where Hive has not
+   * been installed.  We need pass some properties to that client to make sure it connects to the
+   * right Metastore, configures Tez, etc.  Here we look for such properties in hive config,
+   * and set a comma-separated list of key values in {@link #HIVE_PROPS_NAME}.
+   * Note that the user may choose to set the same keys in HIVE_PROPS_NAME directly, in which case
+   * those values should take precedence.
+   */
+  private void handleHiveProperties() {
+    HiveConf hiveConf = new HiveConf();//load hive-site.xml from classpath
+    List<String> interestingPropNames = Arrays.asList(
+      "hive.metastore.uris","hive.metastore.sasl.enabled",
+      "hive.metastore.execute.setugi","hive.execution.engine");
+
+    //each items is a "key=value" format
+    List<String> webhcatHiveProps = new ArrayList<String>(hiveProps());
+    for(String interestingPropName : interestingPropNames) {
+      String value = hiveConf.get(interestingPropName);
+      if(value != null) {
+        boolean found = false;
+        for(String whProp : webhcatHiveProps) {
+          if(whProp.startsWith(interestingPropName + "=")) {
+            found = true;
+            break;
+          }
+        }
+        if(!found) {
+          webhcatHiveProps.add(interestingPropName + "=" + value);
+        }
+      }
+    }
+    StringBuilder hiveProps = new StringBuilder();
+    for(String whProp : webhcatHiveProps) {
+      //make sure to escape separator char in prop values
+      hiveProps.append(hiveProps.length() > 0 ? "," : "").append(StringUtils.escapeString(whProp));
+    }
+    set(HIVE_PROPS_NAME, hiveProps.toString());
+  }
+
   private static void logConfigLoadAttempt(String path) {
     LOG.info("Attempting to load config file: " + path);
   }
@@ -198,7 +240,8 @@ public int compare(Map.Entry<String, String> ent, Map.Entry<String, String> ent2
       }
     });
     for(Map.Entry<String, String> entry : configVals) {
-      sb.append(entry.getKey()).append('=').append(entry.getValue()).append('\n');
+      //use get() to make sure variable substitution works
+      sb.append(entry.getKey()).append('=').append(get(entry.getKey())).append('\n');
     }
     return sb.toString();
   }
@@ -266,7 +309,7 @@ public Collection<String> hiveProps() {
     //since raw data was (possibly) escaped to make split work,
     //now need to remove escape chars so they don't interfere with downstream processing
     for(int i = 0; i < props.length; i++) {
-      props[i] = TempletonUtils.unEscape(props[i]);
+      props[i] = StringUtils.unEscapeString(props[i]);
     }
     return Arrays.asList(props);
   }
diff --git a/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/LaunchMapper.java b/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/LaunchMapper.java
index e22399c8c3..556ee620f1 100644
--- a/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/LaunchMapper.java
+++ b/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/LaunchMapper.java
@@ -81,7 +81,7 @@ private static void handlePigEnvVars(Configuration conf, Map<String, String> env
     if(conf.get(PigConstants.PIG_OPTS) != null) {
       StringBuilder pigOpts = new StringBuilder();
       for(String prop : StringUtils.split(conf.get(PigConstants.PIG_OPTS))) {
-        pigOpts.append("-D").append(TempletonUtils.unEscape(prop)).append(" ");
+        pigOpts.append("-D").append(StringUtils.unEscapeString(prop)).append(" ");
       }
       env.put(PigConstants.PIG_OPTS, pigOpts.toString());
     }
diff --git a/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/TempletonUtils.java b/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/TempletonUtils.java
index 6f4c847438..fff4b68914 100644
--- a/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/TempletonUtils.java
+++ b/hcatalog/webhcat/svr/src/main/java/org/apache/hive/hcatalog/templeton/tool/TempletonUtils.java
@@ -347,8 +347,4 @@ public static void addCmdForWindows(ArrayList<String> args) {
       args.add("call");
     }
   }
-
-  public static String unEscape(String input) {
-    return StringEscapeUtils.unescapeJava(input);
-  }
 }
diff --git a/hcatalog/webhcat/svr/src/test/java/org/apache/hive/hcatalog/templeton/tool/TestTempletonUtils.java b/hcatalog/webhcat/svr/src/test/java/org/apache/hive/hcatalog/templeton/tool/TestTempletonUtils.java
index 2f5ec76856..8b46d38c27 100644
--- a/hcatalog/webhcat/svr/src/test/java/org/apache/hive/hcatalog/templeton/tool/TestTempletonUtils.java
+++ b/hcatalog/webhcat/svr/src/test/java/org/apache/hive/hcatalog/templeton/tool/TestTempletonUtils.java
@@ -306,7 +306,7 @@ public void testPropertiesParsing() throws Exception {
     String[] newProps = StringUtils.split(input.toString());
     for(int i = 0; i < newProps.length; i++) {
       Assert.assertEquals("Pre/post split values don't match",
-        TempletonUtils.unEscape(props[i]), TempletonUtils.unEscape(newProps[i]));
+        StringUtils.unEscapeString(props[i]), StringUtils.unEscapeString(newProps[i]));
     }
   }
 }
