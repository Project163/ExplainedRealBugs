diff --git a/ql/src/java/org/apache/hadoop/hive/ql/exec/Registry.java b/ql/src/java/org/apache/hadoop/hive/ql/exec/Registry.java
index a4584e3eae..9035723c89 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/exec/Registry.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/exec/Registry.java
@@ -235,8 +235,9 @@ public FunctionInfo registerPermanentFunction(String functionName,
         addFunction(functionName, function);
         return function;
       }
+    } else {
+        addFunction(functionName, function);
     }
-    addFunction(functionName, function);
     return null;
   }
 
