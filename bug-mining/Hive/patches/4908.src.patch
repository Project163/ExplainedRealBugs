diff --git a/beeline/src/java/org/apache/hive/beeline/BeeLine.java b/beeline/src/java/org/apache/hive/beeline/BeeLine.java
index 8e65e39873..ecd60f6c1a 100644
--- a/beeline/src/java/org/apache/hive/beeline/BeeLine.java
+++ b/beeline/src/java/org/apache/hive/beeline/BeeLine.java
@@ -881,7 +881,6 @@ public int begin(String[] args, InputStream inputStream) throws IOException {
     }
 
     try {
-      ConsoleReader reader = getConsoleReader(inputStream);
       if (isBeeLine) {
         int code = initArgs(args);
         if (code != 0) {
@@ -906,7 +905,7 @@ public int begin(String[] args, InputStream inputStream) throws IOException {
       } catch (Exception e) {
         // ignore
       }
-
+      ConsoleReader reader = getConsoleReader(inputStream);
       return execute(reader, false);
     } finally {
         close();
@@ -1080,16 +1079,14 @@ public ConsoleReader getConsoleReader(InputStream inputStream) throws IOExceptio
     Runtime.getRuntime().addShutdownHook(new Thread(new Runnable() {
         @Override
         public void run() {
-          if(consoleReader != null) {
             History h = consoleReader.getHistory();
             if (h instanceof FileHistory) {
-              try {
-                ((FileHistory) h).flush();
-              } catch (IOException e) {
-                error(e);
-              }
+                try {
+                    ((FileHistory) h).flush();
+                } catch (IOException e) {
+                    error(e);
+                }
             }
-          }
         }
     }));
 
diff --git a/beeline/src/java/org/apache/hive/beeline/Commands.java b/beeline/src/java/org/apache/hive/beeline/Commands.java
index 2f3ec13409..039e354920 100644
--- a/beeline/src/java/org/apache/hive/beeline/Commands.java
+++ b/beeline/src/java/org/apache/hive/beeline/Commands.java
@@ -1511,7 +1511,7 @@ public boolean connect(Properties props) throws IOException {
         username = beeLine.getConsoleReader().readLine("Enter username for " + url + ": ");
       }
       props.setProperty(JdbcConnectionParams.AUTH_USER, username);
-      if (password == null || password.length() == 0) {
+      if (password == null) {
         password = beeLine.getConsoleReader().readLine("Enter password for " + url + ": ",
           new Character('*'));
       }
