diff --git a/CHANGES.txt b/CHANGES.txt
index 238e4ae833..276b021b31 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -274,6 +274,9 @@ Trunk -  Unreleased
     HIVE-941 hiveserver.sh doesn't work with Hadoop 0.20.0 or higher
     (Ning Zhang via namit)
 
+    HIVE-944 Generate thrift files in queryplan
+    (Paul Yang via namit)
+
 Release 0.4.0 -  Unreleased
 
   INCOMPATIBLE CHANGES
diff --git a/ql/if/queryplan.thrift b/ql/if/queryplan.thrift
index 202acfd45f..943bee6fc2 100644
--- a/ql/if/queryplan.thrift
+++ b/ql/if/queryplan.thrift
@@ -16,7 +16,7 @@ struct Graph {
 }
 
 #Represents a operator along with its counters
-enum OperatorType { JOIN, MAPJOIN, EXTRACT, FILTER, FORWARD, GROUPBY, LIMIT, SCRIPT, SELECT, TABLESCAN, FILESINK, REDUCESINK, UNION }
+enum OperatorType { JOIN, MAPJOIN, EXTRACT, FILTER, FORWARD, GROUPBY, LIMIT, SCRIPT, SELECT, TABLESCAN, FILESINK, REDUCESINK, UNION, UDTF }
 struct Operator {
 1: string operatorId,
 2: OperatorType operatorType,
@@ -53,7 +53,7 @@ struct Stage {
 7: bool started,
 }
 
-# Represents a query - 
+# Represents a query -
 # The graph maintains the stage dependency.In case of conditional tasks, it is represented as if only
 # one of the dependencies need to be executed
 struct Query {
diff --git a/ql/src/gen-javabean/org/apache/hadoop/hive/ql/plan/api/OperatorType.java b/ql/src/gen-javabean/org/apache/hadoop/hive/ql/plan/api/OperatorType.java
index 73545661aa..20a70cfb5a 100644
--- a/ql/src/gen-javabean/org/apache/hadoop/hive/ql/plan/api/OperatorType.java
+++ b/ql/src/gen-javabean/org/apache/hadoop/hive/ql/plan/api/OperatorType.java
@@ -42,8 +42,8 @@ public class OperatorType {
     TABLESCAN, 
     FILESINK, 
     REDUCESINK, 
-    UNION,
-    UDTF);
+    UNION, 
+    UDTF );
 
   public static final Map<Integer, String> VALUES_TO_NAMES = new HashMap<Integer, String>() {{
     put(JOIN, "JOIN");
diff --git a/ql/src/gen-php/queryplan_types.php b/ql/src/gen-php/queryplan_types.php
index e02fc0f1c7..a2a723c287 100644
--- a/ql/src/gen-php/queryplan_types.php
+++ b/ql/src/gen-php/queryplan_types.php
@@ -49,6 +49,7 @@ $GLOBALS['E_OperatorType'] = array(
   'FILESINK' => 10,
   'REDUCESINK' => 11,
   'UNION' => 12,
+  'UDTF' => 13,
 );
 
 final class OperatorType {
@@ -65,6 +66,7 @@ final class OperatorType {
   const FILESINK = 10;
   const REDUCESINK = 11;
   const UNION = 12;
+  const UDTF = 13;
   static public $__names = array(
     0 => 'JOIN',
     1 => 'MAPJOIN',
@@ -79,6 +81,7 @@ final class OperatorType {
     10 => 'FILESINK',
     11 => 'REDUCESINK',
     12 => 'UNION',
+    13 => 'UDTF',
   );
 }
 
diff --git a/ql/src/gen-py/queryplan/ttypes.py b/ql/src/gen-py/queryplan/ttypes.py
index 762341fe94..b22096cf4f 100644
--- a/ql/src/gen-py/queryplan/ttypes.py
+++ b/ql/src/gen-py/queryplan/ttypes.py
@@ -36,6 +36,7 @@ class OperatorType:
   FILESINK = 10
   REDUCESINK = 11
   UNION = 12
+  UDTF = 13
 
 class TaskType:
   MAP = 0
