diff --git a/CHANGES.txt b/CHANGES.txt
index bbd8d9a514..c419e063d0 100644
--- a/CHANGES.txt
+++ b/CHANGES.txt
@@ -250,3 +250,6 @@ Trunk (unreleased changes)
 
     HIVE-179. Make substr behavior similar to other RDBMS.
     (David Phillips via athusoo)
+
+    HIVE-257. Set hive history log location to build for tests.
+    (Suresh Anthony via athusoo)
diff --git a/data/conf/hive-site.xml b/data/conf/hive-site.xml
index e9d6af728b..7a809dd24f 100644
--- a/data/conf/hive-site.xml
+++ b/data/conf/hive-site.xml
@@ -106,4 +106,10 @@
   <description>Name of the class that implements org.apache.hadoop.hive.metastore.rawstore interface. This class is used to store and retrieval of raw metadata objects such as table, database</description>
 </property>
 
+<property>
+  <name>hive.querylog.location</name>
+  <value>${user.dir}/../build/ql/tmp</value>
+  <description>Location of the structured hive logs</description>
+</property>
+
 </configuration>
diff --git a/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java b/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
index ab019588bc..0df908304b 100644
--- a/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
+++ b/ql/src/java/org/apache/hadoop/hive/ql/history/HiveHistory.java
@@ -28,6 +28,7 @@
 import java.io.Serializable;
 import java.util.HashMap;
 import java.util.Map;
+import java.util.Random;
 import java.util.regex.Matcher;
 import java.util.regex.Pattern;
 
@@ -187,8 +188,9 @@ public HiveHistory(SessionState ss) {
           return;
         }
       }
+      Random randGen = new Random();
       histFileName = conf_file_loc + "/hive_job_log_" + ss.getSessionId()
-          + ".txt";
+         +"_" + randGen.nextInt() + ".txt";
       console.printInfo("Hive history file=" + histFileName);
       histStream = new PrintWriter(histFileName);
 
