<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:31:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[METAMODEL-1141] CSVDataContext does not support standard CSV escape</title>
                <link>https://issues.apache.org/jira/browse/METAMODEL-1141</link>
                <project id="12314523" key="METAMODEL">Apache MetaModel (Retired)</project>
                    <description>&lt;p&gt;The proper way to escape a CSV is by repeating the quote character (see &lt;a href=&quot;https://tools.ietf.org/html/rfc4180#section-2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc4180#section-2&lt;/a&gt;). This is also the only way that Excel and LibreOffice accepts escapes.&lt;/p&gt;

&lt;p&gt;While the CSVDataContext &lt;em&gt;can&lt;/em&gt; write using double quotes, it does not support reading it back.&lt;/p&gt;

&lt;p&gt;It&apos;s a problem with the OpenCSV parser we are using. I upgraded to 3.9 (it has changed Maven group name and Java package name to com.opencsv), and now there&apos;s a RFC4180Parser available, which should behave properly. Unfortunately, that means choosing between parsers depending on settings.&lt;/p&gt;

&lt;p&gt;At the same time, since we&apos;re closing at a breaking release, I&apos;d maybe make the standards-based configuration the default. The current default doesn&apos;t seem to be compatible with anything people use.&lt;/p&gt;

&lt;p&gt;Attached is a test case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13074527">METAMODEL-1141</key>
            <summary>CSVDataContext does not support standard CSV escape</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="losd">Dennis Du Kr&#248;ger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 May 2017 13:35:08 +0000</created>
                <updated>Thu, 8 Jun 2017 03:36:56 +0000</updated>
                            <resolved>Thu, 8 Jun 2017 03:36:56 +0000</resolved>
                                    <version>4.5.4</version>
                                    <fixVersion>5.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16025027" author="kaspersor" created="Thu, 25 May 2017 17:04:39 +0000"  >&lt;p&gt;I think it&apos;s a good idea to upgrade. Last time I tried that however, I recall some tests failing. But that&apos;s probably solveable.&lt;/p&gt;</comment>
                            <comment id="16026144" author="losd" created="Fri, 26 May 2017 11:00:26 +0000"  >&lt;p&gt;The test errors looks like a problem in the test file, tickets.csv:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;3,DataCleaner 1.5 Release,202,Pattern Finder improvements,DataCleaner-core,None,enhancement,darrenH,assigned,2008-08-19T04:27:12Z+0200,2008-09-16T09:21:56Z+0200,&quot;__Pattern Finder suggestions__:
 * have an option to ignore repeating spaces (so {{{\&quot;aaa aaaaa\&quot; and \&quot;aaa         aaaaa\&quot;}}} are counted as one pattern. 
 * have an option to ignore case, and a different option to preserve case.
 * have an option to treat all &apos;special&apos; characters as one pattern (so \&quot;aaa*\&quot;, \&quot;aaa/\&quot;, \&quot;aaa\\&quot; etc&apos; are counted as one pattern, maybe denoted \&quot;aaaS\&quot;).
 * have an option to treat all groups of characters as a single sub-pattern.  The idea is to be able to distinguish easily between names (say) that have two words and names that have more.  This option should have a single pattern for \&quot;Kasper Sorensen\&quot; and \&quot;George Bush\&quot; (the pattern should ideally be \&quot;An An\&quot;, denoting any numbers of alpha, space, any number of alpha).  But \&quot;Gorge W Bush\&quot; will have the pattern \&quot;An A An\&quot;.
 * it should be possible to combine the above options&quot;,BenBor
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice this part in line 5:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;\&quot;aaa\\&quot; etc&apos; are&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;First double quote is escaped properly, but in the second one, the escape is escaped, meaning that the double quite is &lt;em&gt;not&lt;/em&gt; escaped.&lt;/p&gt;

&lt;p&gt;Fixing that, all tests pass.&lt;/p&gt;</comment>
                            <comment id="16026147" author="losd" created="Fri, 26 May 2017 11:02:26 +0000"  >&lt;p&gt;I&apos;ll try to use the RFC4180Parser when the settings are correct for it.&lt;/p&gt;

&lt;p&gt;I will &lt;em&gt;not&lt;/em&gt; make the proper double double-quote escape the default for now, as that means my change would probably have to wait until next major release.&lt;/p&gt;

&lt;p&gt;I&apos;ll do that in another issue/PR combination.&lt;/p&gt;</comment>
                            <comment id="16026214" author="githubbot" created="Fri, 26 May 2017 12:30:34 +0000"  >&lt;p&gt;GitHub user LosD opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/145&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1141&quot; title=&quot;CSVDataContext does not support standard CSV escape&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1141&quot;&gt;&lt;del&gt;METAMODEL-1141&lt;/del&gt;&lt;/a&gt;-Parse-RFC4180-compliant-CSV&lt;/p&gt;

&lt;p&gt;    This makes it possible to parse RFC4180-compliant CSV, where the escape character is a repeated double quote.&lt;/p&gt;

&lt;p&gt;    OpenCSVs RFC-4180 parser doesn&apos;t enforce other RFC-4180 rules (quote character must be double quote, separator must be comma and EOL must be CRLF), so the check to use the RFC-4180 parser is simply if the escape is the same as the quote character.&lt;/p&gt;

&lt;p&gt;    This also updates OpenCSV to newest version, and fix a problem in a testfile uncovered by that update.&lt;/p&gt;

&lt;p&gt;    Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1141&quot; title=&quot;CSVDataContext does not support standard CSV escape&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1141&quot;&gt;&lt;del&gt;METAMODEL-1141&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/LosD/metamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/LosD/metamodel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1141&quot; title=&quot;CSVDataContext does not support standard CSV escape&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1141&quot;&gt;&lt;del&gt;METAMODEL-1141&lt;/del&gt;&lt;/a&gt;-RFC4180-CsvDataContext&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/145.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/145.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #145&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 8bcde03ed6358f12d9e268f981c2ef850acae5e6&lt;br/&gt;
Author: Dennis Du Kr&#248;ger &amp;lt;losd@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-24T13:46:22Z&lt;/p&gt;

&lt;p&gt;    Create test for double quote, upgrade to OpenCSV 3.9&lt;/p&gt;

&lt;p&gt;    This uncovers the problems with CSVs using double quotes for&lt;br/&gt;
    escaping, and upgrades to OpenCSV 3.9 in preparation of fixing that.&lt;/p&gt;

&lt;p&gt;commit feaadd22186e1b29693a48225e7aa2fff36a1f0d&lt;br/&gt;
Author: Dennis Du Kr&#248;ger &amp;lt;losd@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-26T11:03:52Z&lt;/p&gt;

&lt;p&gt;    Fix bad escape in CSV file used for multiline tests&lt;/p&gt;

&lt;p&gt;commit edea22b0f5ca8dff7b6334c9e7a11f58c600aefb&lt;br/&gt;
Author: Dennis Du Kr&#248;ger &amp;lt;losd@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-26T11:34:20Z&lt;/p&gt;

&lt;p&gt;    Use RFC4180Parser when escape is same as quote.&lt;/p&gt;

&lt;p&gt;    Also adds an extra test for weird quotes used as escape as well, and&lt;br/&gt;
    extends test to make sure double double double-quotes does not break.&lt;/p&gt;

&lt;p&gt;commit dc9134f969255c40456aacb98d05f95d669012e3&lt;br/&gt;
Author: Dennis Du Kr&#248;ger &amp;lt;losd@apache.org&amp;gt;&lt;br/&gt;
Date:   2017-05-26T12:29:48Z&lt;/p&gt;

&lt;p&gt;    Adds license header and EOL at EOF in CSVs&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16026596" author="githubbot" created="Fri, 26 May 2017 17:59:57 +0000"  >&lt;p&gt;Github user kaspersorensen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/145#discussion_r118757836&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/145#discussion_r118757836&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: csv/src/test/resources/tickets.csv &amp;#8212;&lt;br/&gt;
    @@ -10,7 +10,7 @@ One way of improving this could be through caching. Another way could be through&lt;br/&gt;
     3,DataCleaner 1.5 Release,202,Pattern Finder improvements,DataCleaner-core,None,enhancement,darrenH,assigned,2008-08-19T04:27:12Z+0200,2008-09-16T09:21:56Z+0200,&quot;_&lt;em&gt;Pattern Finder suggestions&lt;/em&gt;_:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;have an option to ignore repeating spaces (so {{
{\&quot;aaa aaaaa\&quot; and \&quot;aaa         aaaaa\&quot;}
&lt;p&gt;}} are counted as one pattern.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;have an option to ignore case, and a different option to preserve case.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* have an option to treat all &apos;special&apos; characters as one pattern (so \&quot;aaa*\&quot;, \&quot;aaa/\&quot;, \&quot;aaa&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot; etc&apos; are counted as one pattern, maybe denoted \&quot;aaaS\&quot;).&lt;br/&gt;
    + * have an option to treat all &apos;special&apos; characters as one pattern (so \&quot;aaa*\&quot;, \&quot;aaa/\&quot;, \&quot;aaa\&quot; etc&apos; are counted as one pattern, maybe denoted \&quot;aaaS\&quot;).
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Good catch. This was actually exported directly from an old bugtracker called &quot;trac&quot;. So maybe it was a bug in trac that caused this issue, but nevertheless I think the fix is good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16026597" author="githubbot" created="Fri, 26 May 2017 18:00:10 +0000"  >&lt;p&gt;Github user kaspersorensen commented on a diff in the pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/145#discussion_r118757879&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/145#discussion_r118757879&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &amp;#8212; Diff: csv/src/test/resources/tickets.csv &amp;#8212;&lt;br/&gt;
    @@ -10,7 +10,7 @@ One way of improving this could be through caching. Another way could be through&lt;br/&gt;
     3,DataCleaner 1.5 Release,202,Pattern Finder improvements,DataCleaner-core,None,enhancement,darrenH,assigned,2008-08-19T04:27:12Z+0200,2008-09-16T09:21:56Z+0200,&quot;_&lt;em&gt;Pattern Finder suggestions&lt;/em&gt;_:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;have an option to ignore repeating spaces (so {{
{\&quot;aaa aaaaa\&quot; and \&quot;aaa         aaaaa\&quot;}
&lt;p&gt;}} are counted as one pattern.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;have an option to ignore case, and a different option to preserve case.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* have an option to treat all &apos;special&apos; characters as one pattern (so \&quot;aaa*\&quot;, \&quot;aaa/\&quot;, \&quot;aaa&lt;br class=&quot;atl-forced-newline&quot; /&gt;&quot; etc&apos; are counted as one pattern, maybe denoted \&quot;aaaS\&quot;).&lt;br/&gt;
    + * have an option to treat all &apos;special&apos; characters as one pattern (so \&quot;aaa*\&quot;, \&quot;aaa/\&quot;, \&quot;aaa\&quot; etc&apos; are counted as one pattern, maybe denoted \&quot;aaaS\&quot;).
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;End diff &amp;#8211;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    Good catch. This was actually exported directly from an old bugtracker called &quot;trac&quot;. So maybe it was a bug in trac that caused this issue, but nevertheless I think the fix is good &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16026598" author="githubbot" created="Fri, 26 May 2017 18:00:28 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/145&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Looks good to me!&lt;/p&gt;</comment>
                            <comment id="16029227" author="githubbot" created="Tue, 30 May 2017 09:54:32 +0000"  >&lt;p&gt;Github user ClaudiaPHI commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/145&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    LGTM! Tested and it works fine !&lt;/p&gt;</comment>
                            <comment id="16042144" author="githubbot" created="Thu, 8 Jun 2017 03:34:27 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/145&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/145&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12869656" name="DoubleQuoteEscapeTest.java" size="1286" author="losd" created="Wed, 24 May 2017 13:35:08 +0000"/>
                            <attachment id="12869657" name="csv_doublequoteescape.csv" size="230" author="losd" created="Wed, 24 May 2017 13:35:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fesf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>