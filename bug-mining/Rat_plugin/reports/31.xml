<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:24:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[RAT-160] Fails to ignore build.log created by maven-invoker-plugin</title>
                <link>https://issues.apache.org/jira/browse/RAT-160</link>
                <project id="12310750" key="RAT">Apache RAT</project>
                    <description>&lt;p&gt;When using maven-invoker-plugin to run integration-tests for a maven plugin project, maven-invoker-plugin creates a build.log file in the basedir for the project.&lt;/p&gt;

&lt;p&gt;This may be a bug in maven-invoker-plugin. Perhaps it&apos;d be better to put this file in its build directory, rather than its basedir. Regardless, the apache-rat-plugin should ignore this build.log file.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12707456">RAT-160</key>
            <summary>Fails to ignore build.log created by maven-invoker-plugin</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pottlinger">Philipp Ottlinger</assignee>
                                    <reporter username="ctubbsii">Christopher Tubbs</reporter>
                        <labels>
                    </labels>
                <created>Wed, 9 Apr 2014 14:41:47 +0000</created>
                <updated>Tue, 14 Apr 2015 08:42:14 +0000</updated>
                            <resolved>Tue, 14 Apr 2015 08:42:14 +0000</resolved>
                                    <version>0.10</version>
                                    <fixVersion>0.12</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13964308" author="sebb@apache.org" created="Wed, 9 Apr 2014 15:56:20 +0000"  >&lt;p&gt;You can configure the RAT plugin to exclude whatever files you want.&lt;/p&gt;

&lt;p&gt;However I don&apos;t think it makes sense to add this specific file to the default excludes.&lt;/p&gt;</comment>
                            <comment id="13965797" author="dennisl@apache.org" created="Thu, 10 Apr 2014 20:17:35 +0000"  >&lt;p&gt;Christopher,&lt;/p&gt;

&lt;p&gt;The way we in the Maven project use the Invoker plugin is to have the ITs copied to the target directory before running the ITs, using this parameter:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;cloneProjectsTo&amp;gt;${project.build.directory}/it&amp;lt;/cloneProjectsTo&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;That way the build.log is tucked away somewhere under the target directory and excluded from Rat. For more info see&lt;br/&gt;
&lt;a href=&quot;http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-plugins/25/maven-plugins-25.pom&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://repo1.maven.org/maven2/org/apache/maven/plugins/maven-plugins/25/maven-plugins-25.pom&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13965895" author="ctubbsii" created="Thu, 10 Apr 2014 21:45:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dennisl%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;dennisl@apache.org&quot;&gt;dennisl@apache.org&lt;/a&gt;, I&apos;m doing the same thing. The rat check isn&apos;t failing for the plugin module. It&apos;s failing the IT test, because the project being tested as the integration test includes my plugin, and a few other standard ones, including rat, to ensure that my plugin works with all these.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;myplugin/
myplugin/pom.xml
myplugin/src/it/test-project
myplugin/target/test-project/pom.xml
myplugin/target/test-project/build.log &amp;lt;-- problem is here
myplugin/target/test-project/target
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13968689" author="dennisl@apache.org" created="Mon, 14 Apr 2014 19:06:50 +0000"  >&lt;p&gt;Christopher Tubbs,&lt;/p&gt;

&lt;p&gt;I&apos;m not sure I understand your structure, but the Rat plugin excludes the &quot;target&quot; directory by default. So it should not be checked by Rat at all. Could you share you configuration?&lt;/p&gt;</comment>
                            <comment id="13968743" author="ctubbsii" created="Mon, 14 Apr 2014 19:45:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dennisl%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;dennisl@apache.org&quot;&gt;dennisl@apache.org&lt;/a&gt;: Here&apos;s an example project to demonstrate the issue: &lt;a href=&quot;https://github.com/ctubbsii/test-maven-plugin&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ctubbsii/test-maven-plugin&lt;/a&gt; based on the maven-plugin archetype.&lt;/p&gt;

&lt;p&gt;Note that the check-licenses-outer execution of the RAT plugin succeeds fine, but the check-licenses-inner execution (the one in the IT project itself) does not. Note that the invoker plugin creates two target directories. The outer one is for the plugin project. The inner one is for the IT project, meant to test the plugin.&lt;/p&gt;</comment>
                            <comment id="13968761" author="dennisl@apache.org" created="Mon, 14 Apr 2014 19:56:23 +0000"  >&lt;p&gt;Thanks, now I see more clearly.&lt;/p&gt;

&lt;p&gt;Why do you have the check-licenses-inner execution?&lt;br/&gt;
The check-licenses-outer execution covers the main project, including all its IT projects.&lt;/p&gt;</comment>
                            <comment id="13968845" author="ctubbsii" created="Mon, 14 Apr 2014 21:09:56 +0000"  >&lt;p&gt;This is just an example. In the real case, I want the IT to inherit from a parent POM which defines an execution of the RAT plugin, to specifically test my plugin in the environment of that parent POM.&lt;/p&gt;</comment>
                            <comment id="13979981" author="dennisl@apache.org" created="Thu, 24 Apr 2014 17:26:20 +0000"  >&lt;p&gt;Christopher,&lt;/p&gt;

&lt;p&gt;Sorry, you lost me again. Do you think you can put together a sample project structure that resembles what you want to do.&lt;/p&gt;

&lt;p&gt;What do you want to do with Rat? Do you want it to check your code for license headers? If so you&apos;ll only ever need one execution.&lt;/p&gt;</comment>
                            <comment id="13980195" author="ctubbsii" created="Thu, 24 Apr 2014 20:09:09 +0000"  >&lt;blockquote&gt;&lt;p&gt;If so you&apos;ll only ever need one execution.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;There is only one relevant execution... on the invoked project.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Do you think you can put together a sample project structure that resembles what you want to do.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The example code above is precisely the project structure I&apos;m talking about. The only slight variation to that, which is where the invoked project&apos;s source code might live before they are copied for invocation by the maven-invoker-plugin. It was simply an attempt to explain that there are more use cases than simply invoking a plugin for integration testing.&lt;/p&gt;

&lt;p&gt;Example: Projects A, B, C, and D are all separate independent projects. They all build fine, all execute RAT, and RAT passes without issue. Now, consider another project, P, which incorporates projects A, B, C, and D. Before it can do that, it needs to build them from source, so it executes a plugin to clone each of the other repos for A, B, C, and D, and build them using the maven-invoker-plugin. Now, this case, the RAT check inside A, B, C, and D will fail, because the invoker plugin creates an extra build.log file in each project directory.&lt;/p&gt;

&lt;p&gt;This example is exactly the same as the provided example project above. The only difference is that the invoker plugin is executing projects whose source code exists their own repos, instead of being contained in this one. This project, P, has no idea that they are executing the RAT plugin when they build, nor should it care. Project P has no knowledge of RAT, or its configuration. The problem is, RAT fails in the invoked project because it doesn&apos;t expect this build.log file to show up when the project&apos;s build is invoked.&lt;/p&gt;

&lt;p&gt;What I was trying to say above is that I may have many projects that do this: P1, P2, P3, which each invoke the build of A, B, C, and D in different environments.&lt;/p&gt;

&lt;p&gt;The more I think about it, the more this sounds like a problem with the maven-invoker-plugin... it shouldn&apos;t be creating this file in the source directory of the invoked project. But, I still think there&apos;s a case here for the RAT plugin to ignore it.&lt;/p&gt;</comment>
                            <comment id="13980197" author="ctubbsii" created="Thu, 24 Apr 2014 20:10:59 +0000"  >&lt;p&gt;My point is that the outer project does not even have to execute RAT for the problem to exist. The problem exists whenever a RAT-executing project is invoked by the maven-invoker-plugin.&lt;/p&gt;</comment>
                            <comment id="14486336" author="ctubbsii" created="Wed, 8 Apr 2015 23:36:38 +0000"  >&lt;p&gt;This issue is extremely similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/RAT-185&quot; title=&quot;.repository folder should be ignored &quot; class=&quot;issue-link&quot; data-issue-key=&quot;RAT-185&quot;&gt;&lt;del&gt;RAT-185&lt;/del&gt;&lt;/a&gt;, only instead of the problem occurring in a specific Jenkins configuration, it&apos;s occurring in the environment of default maven-invoker-plugin configuration, and instead of &lt;tt&gt;.repository&lt;/tt&gt;, the problematic file is &lt;tt&gt;build.log&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="14487151" author="khmarbaise" created="Thu, 9 Apr 2015 11:06:19 +0000"  >&lt;p&gt;What i don&apos;t understand why you have configured apache-rat plugin in your integration test, cause the intention of your IT is to test the plugin you are developing and not the apache-rat plugin. The other questions came across this is where would you locate the build.log otherwise? You could make a good suggestion in the jira for maven-invoker-pugin...&lt;/p&gt;</comment>
                            <comment id="14487159" author="jochen@apache.org" created="Thu, 9 Apr 2015 11:19:17 +0000"  >&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=khmarbaise&quot; class=&quot;user-hover&quot; rel=&quot;khmarbaise&quot;&gt;khmarbaise&lt;/a&gt;: That&apos;s certainly not the issue. The invocation might occur within a &quot;release&quot; profile, or the like.&lt;/p&gt;

&lt;p&gt;The easiest reply is certainly the configuration of an exception for build.log. However, judging from the conversation so far, I&apos;d assume that the user would like to configure this exception only once, in the parent POM.&lt;/p&gt;

&lt;p&gt;@&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dennisl%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;dennisl@apache.org&quot;&gt;dennisl@apache.org&lt;/a&gt;: I have no idea, whether we can see the parent projects configuration? Any ideas?&lt;/p&gt;</comment>
                            <comment id="14487701" author="ctubbsii" created="Thu, 9 Apr 2015 17:25:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=khmarbaise&quot; class=&quot;user-hover&quot; rel=&quot;khmarbaise&quot;&gt;khmarbaise&lt;/a&gt;: as pointed out earlier in the thread (and demonstrated by the example project provided), the apache-rat-plugin was not configured in the integration test. Rather, it is inherited by the parent pom.&lt;/p&gt;

&lt;p&gt;The issue is independent of the fact that it&apos;s an integration test (that just happens to be the way I was running the invoker plugin). It can occur &lt;b&gt;whenever&lt;/b&gt; the maven-invoker-plugin executes a project that has rat in its build, just like &lt;a href=&quot;https://issues.apache.org/jira/browse/RAT-185&quot; title=&quot;.repository folder should be ignored &quot; class=&quot;issue-link&quot; data-issue-key=&quot;RAT-185&quot;&gt;&lt;del&gt;RAT-185&lt;/del&gt;&lt;/a&gt; can occur whenever Jenkins executes a project that has rat in its build.&lt;/p&gt;</comment>
                            <comment id="14487716" author="ctubbsii" created="Thu, 9 Apr 2015 17:35:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jochen%40apache.org&quot; class=&quot;user-hover&quot; rel=&quot;jochen@apache.org&quot;&gt;jochen@apache.org&lt;/a&gt;: I don&apos;t know about other cases, but in my case, I wouldn&apos;t want to configure an exception in the parent POM... because I don&apos;t expect any build.log files which don&apos;t have license headers to show up in my modules. For my case, I only expect it to occur in my maven-invoker-plugin executed builds which some of my modules do during testing.&lt;/p&gt;

&lt;p&gt;The best workaround I&apos;ve found so far (short of telling maven-invoker-plugin not to create a build.log file) is to create a profile which configures rat to exclude build.log, and activate this profile only when maven-invoker-plugin executes the build.&lt;/p&gt;</comment>
                            <comment id="14492918" author="hugo.hirsch" created="Mon, 13 Apr 2015 19:22:45 +0000"  >&lt;p&gt;Thanks for your example project. I&apos;ve added some minor modification when evaluating your bug report.&lt;/p&gt;

&lt;p&gt;I&apos;d personally file a bug in the maven-invoker-plugin to make the creation of a logfile optional or to put it in a different location under /target as proposed earlier. A build.log generated during maven-invoker-plugin runs should pollute your project&apos;s basedir.&lt;br/&gt;
RAT puts it rat.txt under target as well.&lt;/p&gt;

&lt;p&gt;On the other hand a fix is fairly easy to implement. Though I hesitate to add &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;**/build.log 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to the default excludes.&lt;/p&gt;

&lt;p&gt;Would a plain&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;build.log
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; be okay for you?&lt;/p&gt;</comment>
                            <comment id="14493073" author="ctubbsii" created="Mon, 13 Apr 2015 21:02:11 +0000"  >&lt;p&gt;I agree that &lt;tt&gt;**/build.log&lt;/tt&gt; would be too much. A plain &lt;tt&gt;build.log&lt;/tt&gt; should be sufficient. maven-invoker-plugin does have the ability to suppress creating build.log (that&apos;s my current workaround, but that information is too valuable to make that permanent). I will file an issue to make the location of the &lt;tt&gt;build.log&lt;/tt&gt; file more configurable, or to put it in a different location by default.&lt;/p&gt;</comment>
                            <comment id="14493802" author="hugo.hirsch" created="Tue, 14 Apr 2015 08:42:14 +0000"  >&lt;p&gt;Integrated build.log as a temporary fix to allow users of RAT with maven-invoker-plugin runs to work.&lt;/p&gt;

&lt;p&gt;We may revoke this once &lt;a href=&quot;https://issues.apache.org/jira/browse/MINVOKER-190&quot; title=&quot;build.log file location causes problems&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MINVOKER-190&quot;&gt;&lt;del&gt;MINVOKER-190&lt;/del&gt;&lt;/a&gt; is solved properly.&lt;/p&gt;

&lt;p&gt;Integrated in &lt;a href=&quot;http://svn.apache.org/r1673389&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1673389&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12752575">RAT-185</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12820638">MINVOKER-190</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12725023" name="RAT-160-proposedPatch.txt" size="1236" author="pottlinger" created="Mon, 13 Apr 2015 19:22:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>385779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ugiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>386043</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>