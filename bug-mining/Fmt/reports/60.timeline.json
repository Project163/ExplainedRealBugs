[{"id":18491673450,"node_id":"SE_lADOAGurSs6_FbnCzwAAAAROMItq","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/18491673450","actor":{"login":"Dani-Hub","id":431432,"node_id":"MDQ6VXNlcjQzMTQzMg==","avatar_url":"https://avatars.githubusercontent.com/u/431432?v=4","gravatar_id":"","url":"https://api.github.com/users/Dani-Hub","html_url":"https://github.com/Dani-Hub","followers_url":"https://api.github.com/users/Dani-Hub/followers","following_url":"https://api.github.com/users/Dani-Hub/following{/other_user}","gists_url":"https://api.github.com/users/Dani-Hub/gists{/gist_id}","starred_url":"https://api.github.com/users/Dani-Hub/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dani-Hub/subscriptions","organizations_url":"https://api.github.com/users/Dani-Hub/orgs","repos_url":"https://api.github.com/users/Dani-Hub/repos","events_url":"https://api.github.com/users/Dani-Hub/events{/privacy}","received_events_url":"https://api.github.com/users/Dani-Hub/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-07-06T13:20:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/3041819124","html_url":"https://github.com/fmtlib/fmt/issues/4487#issuecomment-3041819124","issue_url":"https://api.github.com/repos/fmtlib/fmt/issues/4487","id":3041819124,"node_id":"IC_kwDOAGurSs61Tnn0","user":{"login":"vitaut","id":576385,"node_id":"MDQ6VXNlcjU3NjM4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/576385?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaut","html_url":"https://github.com/vitaut","followers_url":"https://api.github.com/users/vitaut/followers","following_url":"https://api.github.com/users/vitaut/following{/other_user}","gists_url":"https://api.github.com/users/vitaut/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaut/subscriptions","organizations_url":"https://api.github.com/users/vitaut/orgs","repos_url":"https://api.github.com/users/vitaut/repos","events_url":"https://api.github.com/users/vitaut/events{/privacy}","received_events_url":"https://api.github.com/users/vitaut/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-07-06T14:33:14Z","updated_at":"2025-07-06T14:33:14Z","body":"A PR to replicate the behavior of standard library containers is welcome.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/3041819124/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vitaut","id":576385,"node_id":"MDQ6VXNlcjU3NjM4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/576385?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaut","html_url":"https://github.com/vitaut","followers_url":"https://api.github.com/users/vitaut/followers","following_url":"https://api.github.com/users/vitaut/following{/other_user}","gists_url":"https://api.github.com/users/vitaut/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaut/subscriptions","organizations_url":"https://api.github.com/users/vitaut/orgs","repos_url":"https://api.github.com/users/vitaut/repos","events_url":"https://api.github.com/users/vitaut/events{/privacy}","received_events_url":"https://api.github.com/users/vitaut/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"toprakmurat","id":64306017,"node_id":"MDQ6VXNlcjY0MzA2MDE3","avatar_url":"https://avatars.githubusercontent.com/u/64306017?v=4","gravatar_id":"","url":"https://api.github.com/users/toprakmurat","html_url":"https://github.com/toprakmurat","followers_url":"https://api.github.com/users/toprakmurat/followers","following_url":"https://api.github.com/users/toprakmurat/following{/other_user}","gists_url":"https://api.github.com/users/toprakmurat/gists{/gist_id}","starred_url":"https://api.github.com/users/toprakmurat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toprakmurat/subscriptions","organizations_url":"https://api.github.com/users/toprakmurat/orgs","repos_url":"https://api.github.com/users/toprakmurat/repos","events_url":"https://api.github.com/users/toprakmurat/events{/privacy}","received_events_url":"https://api.github.com/users/toprakmurat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-07-08T11:15:58Z","updated_at":"2025-07-08T11:15:58Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/4490","repository_url":"https://api.github.com/repos/fmtlib/fmt","labels_url":"https://api.github.com/repos/fmtlib/fmt/issues/4490/labels{/name}","comments_url":"https://api.github.com/repos/fmtlib/fmt/issues/4490/comments","events_url":"https://api.github.com/repos/fmtlib/fmt/issues/4490/events","html_url":"https://github.com/fmtlib/fmt/pull/4490","id":3212111549,"node_id":"PR_kwDOAGurSs6d7IIq","number":4490,"title":"Handle allocator propagation in basic_memory_buffer::move, Fix #4487","user":{"login":"toprakmurat","id":64306017,"node_id":"MDQ6VXNlcjY0MzA2MDE3","avatar_url":"https://avatars.githubusercontent.com/u/64306017?v=4","gravatar_id":"","url":"https://api.github.com/users/toprakmurat","html_url":"https://github.com/toprakmurat","followers_url":"https://api.github.com/users/toprakmurat/followers","following_url":"https://api.github.com/users/toprakmurat/following{/other_user}","gists_url":"https://api.github.com/users/toprakmurat/gists{/gist_id}","starred_url":"https://api.github.com/users/toprakmurat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toprakmurat/subscriptions","organizations_url":"https://api.github.com/users/toprakmurat/orgs","repos_url":"https://api.github.com/users/toprakmurat/repos","events_url":"https://api.github.com/users/toprakmurat/events{/privacy}","received_events_url":"https://api.github.com/users/toprakmurat/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-07-08T11:15:57Z","updated_at":"2025-08-09T15:14:23Z","closed_at":"2025-08-09T15:14:16Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":7056202,"node_id":"MDEwOlJlcG9zaXRvcnk3MDU2MjAy","name":"fmt","full_name":"fmtlib/fmt","private":false,"owner":{"login":"fmtlib","id":7280830,"node_id":"MDEyOk9yZ2FuaXphdGlvbjcyODA4MzA=","avatar_url":"https://avatars.githubusercontent.com/u/7280830?v=4","gravatar_id":"","url":"https://api.github.com/users/fmtlib","html_url":"https://github.com/fmtlib","followers_url":"https://api.github.com/users/fmtlib/followers","following_url":"https://api.github.com/users/fmtlib/following{/other_user}","gists_url":"https://api.github.com/users/fmtlib/gists{/gist_id}","starred_url":"https://api.github.com/users/fmtlib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmtlib/subscriptions","organizations_url":"https://api.github.com/users/fmtlib/orgs","repos_url":"https://api.github.com/users/fmtlib/repos","events_url":"https://api.github.com/users/fmtlib/events{/privacy}","received_events_url":"https://api.github.com/users/fmtlib/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/fmtlib/fmt","description":"A modern formatting library","fork":false,"url":"https://api.github.com/repos/fmtlib/fmt","forks_url":"https://api.github.com/repos/fmtlib/fmt/forks","keys_url":"https://api.github.com/repos/fmtlib/fmt/keys{/key_id}","collaborators_url":"https://api.github.com/repos/fmtlib/fmt/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/fmtlib/fmt/teams","hooks_url":"https://api.github.com/repos/fmtlib/fmt/hooks","issue_events_url":"https://api.github.com/repos/fmtlib/fmt/issues/events{/number}","events_url":"https://api.github.com/repos/fmtlib/fmt/events","assignees_url":"https://api.github.com/repos/fmtlib/fmt/assignees{/user}","branches_url":"https://api.github.com/repos/fmtlib/fmt/branches{/branch}","tags_url":"https://api.github.com/repos/fmtlib/fmt/tags","blobs_url":"https://api.github.com/repos/fmtlib/fmt/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/fmtlib/fmt/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/fmtlib/fmt/git/refs{/sha}","trees_url":"https://api.github.com/repos/fmtlib/fmt/git/trees{/sha}","statuses_url":"https://api.github.com/repos/fmtlib/fmt/statuses/{sha}","languages_url":"https://api.github.com/repos/fmtlib/fmt/languages","stargazers_url":"https://api.github.com/repos/fmtlib/fmt/stargazers","contributors_url":"https://api.github.com/repos/fmtlib/fmt/contributors","subscribers_url":"https://api.github.com/repos/fmtlib/fmt/subscribers","subscription_url":"https://api.github.com/repos/fmtlib/fmt/subscription","commits_url":"https://api.github.com/repos/fmtlib/fmt/commits{/sha}","git_commits_url":"https://api.github.com/repos/fmtlib/fmt/git/commits{/sha}","comments_url":"https://api.github.com/repos/fmtlib/fmt/comments{/number}","issue_comment_url":"https://api.github.com/repos/fmtlib/fmt/issues/comments{/number}","contents_url":"https://api.github.com/repos/fmtlib/fmt/contents/{+path}","compare_url":"https://api.github.com/repos/fmtlib/fmt/compare/{base}...{head}","merges_url":"https://api.github.com/repos/fmtlib/fmt/merges","archive_url":"https://api.github.com/repos/fmtlib/fmt/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/fmtlib/fmt/downloads","issues_url":"https://api.github.com/repos/fmtlib/fmt/issues{/number}","pulls_url":"https://api.github.com/repos/fmtlib/fmt/pulls{/number}","milestones_url":"https://api.github.com/repos/fmtlib/fmt/milestones{/number}","notifications_url":"https://api.github.com/repos/fmtlib/fmt/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/fmtlib/fmt/labels{/name}","releases_url":"https://api.github.com/repos/fmtlib/fmt/releases{/id}","deployments_url":"https://api.github.com/repos/fmtlib/fmt/deployments","created_at":"2012-12-07T16:26:46Z","updated_at":"2025-11-09T17:44:17Z","pushed_at":"2025-11-07T18:05:56Z","git_url":"git://github.com/fmtlib/fmt.git","ssh_url":"git@github.com:fmtlib/fmt.git","clone_url":"https://github.com/fmtlib/fmt.git","svn_url":"https://github.com/fmtlib/fmt","homepage":"https://fmt.dev","size":17541,"stargazers_count":22856,"watchers_count":22856,"language":"C++","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":2766,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":10,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c-plus-plus","chrono","cpp","cross-platform","floating-point","formatting","multiplatform","output","performance","printf","ranges","unicode"],"visibility":"public","forks":2766,"open_issues":10,"watchers":22856,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/fmtlib/fmt/pulls/4490","html_url":"https://github.com/fmtlib/fmt/pull/4490","diff_url":"https://github.com/fmtlib/fmt/pull/4490.diff","patch_url":"https://github.com/fmtlib/fmt/pull/4490.patch","merged_at":"2025-08-09T15:14:16Z"},"body":"Fixes #4487.\r\n\r\nThis PR implements allocator-aware move behavior in `basic_memory_buffer`, following the suggestion by @dlex in the linked issue.\r\n\r\nTo enable allocator comparison (`alloc_ == other.alloc_`), I added `operator==` and `operator!=` to the following classes:\r\n\r\n- [`allocator_ref`](https://github.com/fmtlib/fmt/blob/master/test/mock-allocator.h#L40)  \r\n- [`allocator`](https://github.com/fmtlib/fmt/blob/master/include/fmt/format.h#L738)\r\n\r\n### Summary of Changes\r\n\r\n- Move logic now respects `std::allocator_traits<>::propagate_on_container_move_assignment`.\r\n- If allocator propagation is disabled and the allocators differ, the buffer content is copied instead of moved.\r\n\r\n### Test Failures\r\n\r\nThere are currently two failing tests (Test 7/21) that may need to be updated to match the new move semantics:\r\n\r\n1. [`move_ctor_inline_buffer`](https://github.com/fmtlib/fmt/blob/master/test/format-test.cc#L322-L323)\r\n\r\n```cpp\r\n// Move should transfer allocator.\r\nEXPECT_EQ(nullptr, buffer.get_allocator().get());\r\nEXPECT_EQ(alloc, buffer2.get_allocator().get());\r\n```\r\n\r\n2. [`move_ctor_dynamic_buffer`](https://github.com/fmtlib/fmt/blob/master/test/format-test.cc#L348-L349)\r\n\r\n```cpp\r\n// Move should rip the guts of the first buffer.\r\nEXPECT_EQ(&buffer[0], inline_buffer_ptr);\r\nEXPECT_EQ(buffer.size(), 0);\r\n```\r\n\r\nI propose updating the above tests to align with the allocator propagation semantics. However, before proceeding, Iâ€™d like to get feedback from maintainers and reviewers. @vitaut \r\n\r\nDo these changes and the proposed test adjustments align with the intended design of `basic_memory_buffer`?\r\n","reactions":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/4490/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/fmtlib/fmt/issues/4490/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/3048486631","html_url":"https://github.com/fmtlib/fmt/issues/4487#issuecomment-3048486631","issue_url":"https://api.github.com/repos/fmtlib/fmt/issues/4487","id":3048486631,"node_id":"IC_kwDOAGurSs61tDbn","user":{"login":"toprakmurat","id":64306017,"node_id":"MDQ6VXNlcjY0MzA2MDE3","avatar_url":"https://avatars.githubusercontent.com/u/64306017?v=4","gravatar_id":"","url":"https://api.github.com/users/toprakmurat","html_url":"https://github.com/toprakmurat","followers_url":"https://api.github.com/users/toprakmurat/followers","following_url":"https://api.github.com/users/toprakmurat/following{/other_user}","gists_url":"https://api.github.com/users/toprakmurat/gists{/gist_id}","starred_url":"https://api.github.com/users/toprakmurat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toprakmurat/subscriptions","organizations_url":"https://api.github.com/users/toprakmurat/orgs","repos_url":"https://api.github.com/users/toprakmurat/repos","events_url":"https://api.github.com/users/toprakmurat/events{/privacy}","received_events_url":"https://api.github.com/users/toprakmurat/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-07-08T11:17:36Z","updated_at":"2025-07-08T11:17:36Z","body":"I've submitted PR #4490. I'd appreciate it if you could take a moment to review it.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/3048486631/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"toprakmurat","id":64306017,"node_id":"MDQ6VXNlcjY0MzA2MDE3","avatar_url":"https://avatars.githubusercontent.com/u/64306017?v=4","gravatar_id":"","url":"https://api.github.com/users/toprakmurat","html_url":"https://github.com/toprakmurat","followers_url":"https://api.github.com/users/toprakmurat/followers","following_url":"https://api.github.com/users/toprakmurat/following{/other_user}","gists_url":"https://api.github.com/users/toprakmurat/gists{/gist_id}","starred_url":"https://api.github.com/users/toprakmurat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/toprakmurat/subscriptions","organizations_url":"https://api.github.com/users/toprakmurat/orgs","repos_url":"https://api.github.com/users/toprakmurat/repos","events_url":"https://api.github.com/users/toprakmurat/events{/privacy}","received_events_url":"https://api.github.com/users/toprakmurat/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":19068199910,"node_id":"CE_lADOAGurSs6_FbnCzwAAAARwjaPm","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/19068199910","actor":{"login":"vitaut","id":576385,"node_id":"MDQ6VXNlcjU3NjM4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/576385?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaut","html_url":"https://github.com/vitaut","followers_url":"https://api.github.com/users/vitaut/followers","following_url":"https://api.github.com/users/vitaut/following{/other_user}","gists_url":"https://api.github.com/users/vitaut/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaut/subscriptions","organizations_url":"https://api.github.com/users/vitaut/orgs","repos_url":"https://api.github.com/users/vitaut/repos","events_url":"https://api.github.com/users/vitaut/events{/privacy}","received_events_url":"https://api.github.com/users/vitaut/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2025-08-09T15:14:17Z","state_reason":null,"performed_via_github_app":null},{"id":19068352052,"node_id":"REFE_lADOAGurSs6_FbnCzwAAAARwj_Y0","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/19068352052","actor":{"login":"pull[bot]","id":39814207,"node_id":"MDM6Qm90Mzk4MTQyMDc=","avatar_url":"https://avatars.githubusercontent.com/in/12910?v=4","gravatar_id":"","url":"https://api.github.com/users/pull%5Bbot%5D","html_url":"https://github.com/apps/pull","followers_url":"https://api.github.com/users/pull%5Bbot%5D/followers","following_url":"https://api.github.com/users/pull%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/pull%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/pull%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pull%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/pull%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/pull%5Bbot%5D/repos","events_url":"https://api.github.com/users/pull%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/pull%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0d145936ece2ccebb98a3a39ae04a5c81d24bc99","commit_url":"https://api.github.com/repos/sysfce2/fmt/commits/0d145936ece2ccebb98a3a39ae04a5c81d24bc99","created_at":"2025-08-09T15:52:16Z","performed_via_github_app":null},{"id":20772687637,"node_id":"REFE_lADOAGurSs6_FbnCzwAAAATWJg8V","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/20772687637","actor":{"login":"mtremer","id":6318738,"node_id":"MDQ6VXNlcjYzMTg3Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/6318738?v=4","gravatar_id":"","url":"https://api.github.com/users/mtremer","html_url":"https://github.com/mtremer","followers_url":"https://api.github.com/users/mtremer/followers","following_url":"https://api.github.com/users/mtremer/following{/other_user}","gists_url":"https://api.github.com/users/mtremer/gists{/gist_id}","starred_url":"https://api.github.com/users/mtremer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtremer/subscriptions","organizations_url":"https://api.github.com/users/mtremer/orgs","repos_url":"https://api.github.com/users/mtremer/repos","events_url":"https://api.github.com/users/mtremer/events{/privacy}","received_events_url":"https://api.github.com/users/mtremer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"aa268acac11e85b1f2ebb96dab48e06365c954e0","commit_url":"https://api.github.com/repos/ipfire/ipfire-2.x/commits/aa268acac11e85b1f2ebb96dab48e06365c954e0","created_at":"2025-11-06T22:17:14Z","performed_via_github_app":null}]