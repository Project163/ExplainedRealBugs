[{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2584143854","html_url":"https://github.com/fmtlib/fmt/issues/4303#issuecomment-2584143854","issue_url":"https://api.github.com/repos/fmtlib/fmt/issues/4303","id":2584143854,"node_id":"IC_kwDOAGurSs6aBufu","user":{"login":"Arghnews","id":22374845,"node_id":"MDQ6VXNlcjIyMzc0ODQ1","avatar_url":"https://avatars.githubusercontent.com/u/22374845?v=4","gravatar_id":"","url":"https://api.github.com/users/Arghnews","html_url":"https://github.com/Arghnews","followers_url":"https://api.github.com/users/Arghnews/followers","following_url":"https://api.github.com/users/Arghnews/following{/other_user}","gists_url":"https://api.github.com/users/Arghnews/gists{/gist_id}","starred_url":"https://api.github.com/users/Arghnews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arghnews/subscriptions","organizations_url":"https://api.github.com/users/Arghnews/orgs","repos_url":"https://api.github.com/users/Arghnews/repos","events_url":"https://api.github.com/users/Arghnews/events{/privacy}","received_events_url":"https://api.github.com/users/Arghnews/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-10T20:55:18Z","updated_at":"2025-01-10T20:55:41Z","body":"Are you doing this as part of a unity/jumbo or something like that, is that how this scenario occurs?\r\n\r\nI believe this is falling foul of this rule, explained nicely by this [SO answer](https://stackoverflow.com/a/21112309/8594193):\r\n\r\n> If a template, a member template or a member of a class template is explicitly specialized then that specialization shall be declared before the first use of that specialization that would cause an implicit instantiation to take place, in every translation unit in which such a use occurs; no diagnostic is required.\r\n\r\nWhere here you're instantiating the specialization of the `formatter` by using it to call `print`, before the other (partial) specializations of it are declared by including the fmt ranges header\r\n\r\nAlso notably in a comment on that answer, clang silently happily compiles this while gcc doesn't, hence it only failing on gcc\r\n\r\nI'm not an expert on this, but as I see it, unless vitaut wants to provide support for this (possibly via a fmt_fwd type header(s) etc. and I don't know how hard that would be) I don't know of a solution for this, other than avoiding it @std-any-emplace ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2584143854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Arghnews","id":22374845,"node_id":"MDQ6VXNlcjIyMzc0ODQ1","avatar_url":"https://avatars.githubusercontent.com/u/22374845?v=4","gravatar_id":"","url":"https://api.github.com/users/Arghnews","html_url":"https://github.com/Arghnews","followers_url":"https://api.github.com/users/Arghnews/followers","following_url":"https://api.github.com/users/Arghnews/following{/other_user}","gists_url":"https://api.github.com/users/Arghnews/gists{/gist_id}","starred_url":"https://api.github.com/users/Arghnews/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Arghnews/subscriptions","organizations_url":"https://api.github.com/users/Arghnews/orgs","repos_url":"https://api.github.com/users/Arghnews/repos","events_url":"https://api.github.com/users/Arghnews/events{/privacy}","received_events_url":"https://api.github.com/users/Arghnews/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15888825094,"node_id":"MEE_lADOAGurSs6ltb2_zwAAAAOzDDsG","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/15888825094","actor":{"login":"std-any-emplace","id":59844327,"node_id":"MDQ6VXNlcjU5ODQ0MzI3","avatar_url":"https://avatars.githubusercontent.com/u/59844327?v=4","gravatar_id":"","url":"https://api.github.com/users/std-any-emplace","html_url":"https://github.com/std-any-emplace","followers_url":"https://api.github.com/users/std-any-emplace/followers","following_url":"https://api.github.com/users/std-any-emplace/following{/other_user}","gists_url":"https://api.github.com/users/std-any-emplace/gists{/gist_id}","starred_url":"https://api.github.com/users/std-any-emplace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/std-any-emplace/subscriptions","organizations_url":"https://api.github.com/users/std-any-emplace/orgs","repos_url":"https://api.github.com/users/std-any-emplace/repos","events_url":"https://api.github.com/users/std-any-emplace/events{/privacy}","received_events_url":"https://api.github.com/users/std-any-emplace/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-01-10T20:55:19Z","performed_via_github_app":null},{"id":15888825102,"node_id":"SE_lADOAGurSs6ltb2_zwAAAAOzDDsO","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/15888825102","actor":{"login":"std-any-emplace","id":59844327,"node_id":"MDQ6VXNlcjU5ODQ0MzI3","avatar_url":"https://avatars.githubusercontent.com/u/59844327?v=4","gravatar_id":"","url":"https://api.github.com/users/std-any-emplace","html_url":"https://github.com/std-any-emplace","followers_url":"https://api.github.com/users/std-any-emplace/followers","following_url":"https://api.github.com/users/std-any-emplace/following{/other_user}","gists_url":"https://api.github.com/users/std-any-emplace/gists{/gist_id}","starred_url":"https://api.github.com/users/std-any-emplace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/std-any-emplace/subscriptions","organizations_url":"https://api.github.com/users/std-any-emplace/orgs","repos_url":"https://api.github.com/users/std-any-emplace/repos","events_url":"https://api.github.com/users/std-any-emplace/events{/privacy}","received_events_url":"https://api.github.com/users/std-any-emplace/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-01-10T20:55:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2585344691","html_url":"https://github.com/fmtlib/fmt/issues/4303#issuecomment-2585344691","issue_url":"https://api.github.com/repos/fmtlib/fmt/issues/4303","id":2585344691,"node_id":"IC_kwDOAGurSs6aGTqz","user":{"login":"vitaut","id":576385,"node_id":"MDQ6VXNlcjU3NjM4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/576385?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaut","html_url":"https://github.com/vitaut","followers_url":"https://api.github.com/users/vitaut/followers","following_url":"https://api.github.com/users/vitaut/following{/other_user}","gists_url":"https://api.github.com/users/vitaut/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaut/subscriptions","organizations_url":"https://api.github.com/users/vitaut/orgs","repos_url":"https://api.github.com/users/vitaut/repos","events_url":"https://api.github.com/users/vitaut/events{/privacy}","received_events_url":"https://api.github.com/users/vitaut/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-11T17:10:34Z","updated_at":"2025-01-11T17:10:34Z","body":"This could probably happen if `f` is in a header.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2585344691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vitaut","id":576385,"node_id":"MDQ6VXNlcjU3NjM4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/576385?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaut","html_url":"https://github.com/vitaut","followers_url":"https://api.github.com/users/vitaut/followers","following_url":"https://api.github.com/users/vitaut/following{/other_user}","gists_url":"https://api.github.com/users/vitaut/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaut/subscriptions","organizations_url":"https://api.github.com/users/vitaut/orgs","repos_url":"https://api.github.com/users/vitaut/repos","events_url":"https://api.github.com/users/vitaut/events{/privacy}","received_events_url":"https://api.github.com/users/vitaut/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2585393526","html_url":"https://github.com/fmtlib/fmt/issues/4303#issuecomment-2585393526","issue_url":"https://api.github.com/repos/fmtlib/fmt/issues/4303","id":2585393526,"node_id":"IC_kwDOAGurSs6aGfl2","user":{"login":"std-any-emplace","id":59844327,"node_id":"MDQ6VXNlcjU5ODQ0MzI3","avatar_url":"https://avatars.githubusercontent.com/u/59844327?v=4","gravatar_id":"","url":"https://api.github.com/users/std-any-emplace","html_url":"https://github.com/std-any-emplace","followers_url":"https://api.github.com/users/std-any-emplace/followers","following_url":"https://api.github.com/users/std-any-emplace/following{/other_user}","gists_url":"https://api.github.com/users/std-any-emplace/gists{/gist_id}","starred_url":"https://api.github.com/users/std-any-emplace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/std-any-emplace/subscriptions","organizations_url":"https://api.github.com/users/std-any-emplace/orgs","repos_url":"https://api.github.com/users/std-any-emplace/repos","events_url":"https://api.github.com/users/std-any-emplace/events{/privacy}","received_events_url":"https://api.github.com/users/std-any-emplace/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-11T20:06:47Z","updated_at":"2025-01-11T20:07:04Z","body":"> Are you doing this as part of a unity/jumbo or something like that, is that how this scenario occurs?\r\n\r\nYes, it did indeed happen during a unity build and it took me a while to figure out what was causing compile failure.\r\n\r\nMy workaround for the issue was to include all aforementioned headers in all library-using files.\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2585393526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"std-any-emplace","id":59844327,"node_id":"MDQ6VXNlcjU5ODQ0MzI3","avatar_url":"https://avatars.githubusercontent.com/u/59844327?v=4","gravatar_id":"","url":"https://api.github.com/users/std-any-emplace","html_url":"https://github.com/std-any-emplace","followers_url":"https://api.github.com/users/std-any-emplace/followers","following_url":"https://api.github.com/users/std-any-emplace/following{/other_user}","gists_url":"https://api.github.com/users/std-any-emplace/gists{/gist_id}","starred_url":"https://api.github.com/users/std-any-emplace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/std-any-emplace/subscriptions","organizations_url":"https://api.github.com/users/std-any-emplace/orgs","repos_url":"https://api.github.com/users/std-any-emplace/repos","events_url":"https://api.github.com/users/std-any-emplace/events{/privacy}","received_events_url":"https://api.github.com/users/std-any-emplace/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2585394253","html_url":"https://github.com/fmtlib/fmt/issues/4303#issuecomment-2585394253","issue_url":"https://api.github.com/repos/fmtlib/fmt/issues/4303","id":2585394253,"node_id":"IC_kwDOAGurSs6aGfxN","user":{"login":"std-any-emplace","id":59844327,"node_id":"MDQ6VXNlcjU5ODQ0MzI3","avatar_url":"https://avatars.githubusercontent.com/u/59844327?v=4","gravatar_id":"","url":"https://api.github.com/users/std-any-emplace","html_url":"https://github.com/std-any-emplace","followers_url":"https://api.github.com/users/std-any-emplace/followers","following_url":"https://api.github.com/users/std-any-emplace/following{/other_user}","gists_url":"https://api.github.com/users/std-any-emplace/gists{/gist_id}","starred_url":"https://api.github.com/users/std-any-emplace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/std-any-emplace/subscriptions","organizations_url":"https://api.github.com/users/std-any-emplace/orgs","repos_url":"https://api.github.com/users/std-any-emplace/repos","events_url":"https://api.github.com/users/std-any-emplace/events{/privacy}","received_events_url":"https://api.github.com/users/std-any-emplace/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-01-11T20:09:57Z","updated_at":"2025-01-11T20:09:57Z","body":"What I also found interesting is, that the constness of `fn` is important. A non-const `fn` does not cause failure.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/fmtlib/fmt/issues/comments/2585394253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"std-any-emplace","id":59844327,"node_id":"MDQ6VXNlcjU5ODQ0MzI3","avatar_url":"https://avatars.githubusercontent.com/u/59844327?v=4","gravatar_id":"","url":"https://api.github.com/users/std-any-emplace","html_url":"https://github.com/std-any-emplace","followers_url":"https://api.github.com/users/std-any-emplace/followers","following_url":"https://api.github.com/users/std-any-emplace/following{/other_user}","gists_url":"https://api.github.com/users/std-any-emplace/gists{/gist_id}","starred_url":"https://api.github.com/users/std-any-emplace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/std-any-emplace/subscriptions","organizations_url":"https://api.github.com/users/std-any-emplace/orgs","repos_url":"https://api.github.com/users/std-any-emplace/repos","events_url":"https://api.github.com/users/std-any-emplace/events{/privacy}","received_events_url":"https://api.github.com/users/std-any-emplace/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":16044728882,"node_id":"REFE_lADOAGurSs6ltb2_zwAAAAO8VyIy","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/16044728882","actor":{"login":"timsong-cpp","id":10905931,"node_id":"MDQ6VXNlcjEwOTA1OTMx","avatar_url":"https://avatars.githubusercontent.com/u/10905931?v=4","gravatar_id":"","url":"https://api.github.com/users/timsong-cpp","html_url":"https://github.com/timsong-cpp","followers_url":"https://api.github.com/users/timsong-cpp/followers","following_url":"https://api.github.com/users/timsong-cpp/following{/other_user}","gists_url":"https://api.github.com/users/timsong-cpp/gists{/gist_id}","starred_url":"https://api.github.com/users/timsong-cpp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/timsong-cpp/subscriptions","organizations_url":"https://api.github.com/users/timsong-cpp/orgs","repos_url":"https://api.github.com/users/timsong-cpp/repos","events_url":"https://api.github.com/users/timsong-cpp/events{/privacy}","received_events_url":"https://api.github.com/users/timsong-cpp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"44862b475d4a2ac721f2d2119f595ecd72d57e21","commit_url":"https://api.github.com/repos/timsong-cpp/fmt/commits/44862b475d4a2ac721f2d2119f595ecd72d57e21","created_at":"2025-01-23T14:26:04Z","performed_via_github_app":null},{"id":16062928698,"node_id":"CE_lADOAGurSs6ltb2_zwAAAAO9bNc6","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/16062928698","actor":{"login":"vitaut","id":576385,"node_id":"MDQ6VXNlcjU3NjM4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/576385?v=4","gravatar_id":"","url":"https://api.github.com/users/vitaut","html_url":"https://github.com/vitaut","followers_url":"https://api.github.com/users/vitaut/followers","following_url":"https://api.github.com/users/vitaut/following{/other_user}","gists_url":"https://api.github.com/users/vitaut/gists{/gist_id}","starred_url":"https://api.github.com/users/vitaut/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vitaut/subscriptions","organizations_url":"https://api.github.com/users/vitaut/orgs","repos_url":"https://api.github.com/users/vitaut/repos","events_url":"https://api.github.com/users/vitaut/events{/privacy}","received_events_url":"https://api.github.com/users/vitaut/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f841ae61e2928d4f2c9adc7afa9d9f2eb47edec7","commit_url":"https://api.github.com/repos/fmtlib/fmt/commits/f841ae61e2928d4f2c9adc7afa9d9f2eb47edec7","created_at":"2025-01-24T18:53:12Z","state_reason":null,"performed_via_github_app":null},{"id":16063018428,"node_id":"REFE_lADOAGurSs6ltb2_zwAAAAO9bjW8","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/16063018428","actor":{"login":"mikedld","id":298203,"node_id":"MDQ6VXNlcjI5ODIwMw==","avatar_url":"https://avatars.githubusercontent.com/u/298203?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedld","html_url":"https://github.com/mikedld","followers_url":"https://api.github.com/users/mikedld/followers","following_url":"https://api.github.com/users/mikedld/following{/other_user}","gists_url":"https://api.github.com/users/mikedld/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedld/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedld/subscriptions","organizations_url":"https://api.github.com/users/mikedld/orgs","repos_url":"https://api.github.com/users/mikedld/repos","events_url":"https://api.github.com/users/mikedld/events{/privacy}","received_events_url":"https://api.github.com/users/mikedld/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f841ae61e2928d4f2c9adc7afa9d9f2eb47edec7","commit_url":"https://api.github.com/repos/transmission/fmt/commits/f841ae61e2928d4f2c9adc7afa9d9f2eb47edec7","created_at":"2025-01-24T19:00:10Z","performed_via_github_app":null},{"id":16416258629,"node_id":"REFE_lADOAGurSs6ltb2_zwAAAAPSfDpF","url":"https://api.github.com/repos/fmtlib/fmt/issues/events/16416258629","actor":{"login":"mtremer","id":6318738,"node_id":"MDQ6VXNlcjYzMTg3Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/6318738?v=4","gravatar_id":"","url":"https://api.github.com/users/mtremer","html_url":"https://github.com/mtremer","followers_url":"https://api.github.com/users/mtremer/followers","following_url":"https://api.github.com/users/mtremer/following{/other_user}","gists_url":"https://api.github.com/users/mtremer/gists{/gist_id}","starred_url":"https://api.github.com/users/mtremer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mtremer/subscriptions","organizations_url":"https://api.github.com/users/mtremer/orgs","repos_url":"https://api.github.com/users/mtremer/repos","events_url":"https://api.github.com/users/mtremer/events{/privacy}","received_events_url":"https://api.github.com/users/mtremer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"91a3cbe5cd42f0b29a4df226be6a636365e27c6d","commit_url":"https://api.github.com/repos/ipfire/ipfire-2.x/commits/91a3cbe5cd42f0b29a4df226be6a636365e27c6d","created_at":"2025-02-22T23:17:11Z","performed_via_github_app":null}]