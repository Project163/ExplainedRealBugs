diff --git a/akka-persistence-typed-tests/src/test/scala/akka/persistence/typed/scaladsl/EventSourcedBehaviorStashSpec.scala b/akka-persistence-typed-tests/src/test/scala/akka/persistence/typed/scaladsl/EventSourcedBehaviorStashSpec.scala
index 70fab99414..f6b70651ae 100644
--- a/akka-persistence-typed-tests/src/test/scala/akka/persistence/typed/scaladsl/EventSourcedBehaviorStashSpec.scala
+++ b/akka-persistence-typed-tests/src/test/scala/akka/persistence/typed/scaladsl/EventSourcedBehaviorStashSpec.scala
@@ -325,9 +325,10 @@ class EventSourcedBehaviorStashSpec
 
       unhandledProbe.receiveMessages(10)
 
-      val value1 = stateProbe.expectMessageType[State](5.seconds).value
-      val value2 = stateProbe.expectMessageType[State](5.seconds).value
-      val value3 = stateProbe.expectMessageType[State](5.seconds).value
+      // a lot of events, so give it some extra time to complete
+      val value1 = stateProbe.expectMessageType[State](10.seconds).value
+      val value2 = stateProbe.expectMessageType[State](10.seconds).value
+      val value3 = stateProbe.expectMessageType[State](10.seconds).value
 
       // verify the order
 
@@ -528,7 +529,7 @@ class EventSourcedBehaviorStashSpec
     }
 
     trait StashLimit {
-      val customStashLimit: Option[Int] = None
+      def customStashLimit: Option[Int]
       val probe = TestProbe[AnyRef]()
       system.toClassic.eventStream.subscribe(probe.ref.toClassic, classOf[Dropped])
       val behavior = Behaviors.setup[String] { context =>
@@ -543,7 +544,7 @@ class EventSourcedBehaviorStashSpec
                     probe.ref ! "pong"
                     Effect.none
                   case "start-stashing" =>
-                    Effect.persist("start-stashing")
+                    Effect.persist("start-stashing").thenRun(_ => probe ! "started-stashing")
                   case msg =>
                     probe.ref ! msg
                     Effect.none
@@ -571,7 +572,7 @@ class EventSourcedBehaviorStashSpec
     }
 
     "discard when stash has reached limit with default dropped setting" in new StashLimit {
-
+      override val customStashLimit: Option[Int] = None
       val c = spawn(behavior)
 
       // make sure it completed recovery, before we try to overfill the stash
@@ -579,6 +580,8 @@ class EventSourcedBehaviorStashSpec
       probe.expectMessage("pong")
 
       c ! "start-stashing"
+      // make sure write completes before sending more commands so that they are not auto-stashed by ESB
+      probe.expectMessage("started-stashing")
 
       val limit = system.settings.config.getInt("akka.persistence.typed.stash-capacity")
       LoggingTestKit.warn("Stash buffer is full, dropping message").expect {
@@ -610,6 +613,8 @@ class EventSourcedBehaviorStashSpec
       probe.expectMessage("pong")
 
       c ! "start-stashing"
+      // make sure write completes before sending more commands so that they are not auto-stashed by ESB
+      probe.expectMessage("started-stashing")
 
       LoggingTestKit.warn("Stash buffer is full, dropping message").expect {
         (0 to customLimit).foreach { n =>
