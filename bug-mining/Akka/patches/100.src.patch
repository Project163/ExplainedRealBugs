diff --git a/akka-cluster-sharding-typed/src/test/scala/akka/cluster/sharding/FlightRecording.scala b/akka-cluster-sharding-typed/src/test/scala/akka/cluster/sharding/FlightRecording.scala
index c85ec6d394..bac28f896c 100644
--- a/akka-cluster-sharding-typed/src/test/scala/akka/cluster/sharding/FlightRecording.scala
+++ b/akka-cluster-sharding-typed/src/test/scala/akka/cluster/sharding/FlightRecording.scala
@@ -3,6 +3,7 @@
  */
 
 package akka.cluster.sharding
+import java.nio.file.Files
 import java.nio.file.Path
 
 import akka.actor.{ ActorSystem, ExtendedActorSystem }
@@ -31,6 +32,10 @@ class FlightRecording(system: ActorSystem) {
   }
 
   def endAndDump(location: Path) = {
+    // Make sure parent directory exists
+    if (location.getParent != null)
+      Files.createDirectories(location.getParent)
+
     for {
       r <- recording
       stop <- stopMethod
