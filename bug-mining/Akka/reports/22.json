{"url":"https://api.github.com/repos/akka/akka-core/issues/23921","repository_url":"https://api.github.com/repos/akka/akka-core","labels_url":"https://api.github.com/repos/akka/akka-core/issues/23921/labels{/name}","comments_url":"https://api.github.com/repos/akka/akka-core/issues/23921/comments","events_url":"https://api.github.com/repos/akka/akka-core/issues/23921/events","html_url":"https://github.com/akka/akka-core/issues/23921","id":271342769,"node_id":"MDU6SXNzdWUyNzEzNDI3Njk=","number":23921,"title":"Bad naming of SubSource outlet","user":{"login":"jroper","id":105833,"node_id":"MDQ6VXNlcjEwNTgzMw==","avatar_url":"https://avatars.githubusercontent.com/u/105833?v=4","gravatar_id":"","url":"https://api.github.com/users/jroper","html_url":"https://github.com/jroper","followers_url":"https://api.github.com/users/jroper/followers","following_url":"https://api.github.com/users/jroper/following{/other_user}","gists_url":"https://api.github.com/users/jroper/gists{/gist_id}","starred_url":"https://api.github.com/users/jroper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jroper/subscriptions","organizations_url":"https://api.github.com/users/jroper/orgs","repos_url":"https://api.github.com/users/jroper/repos","events_url":"https://api.github.com/users/jroper/events{/privacy}","received_events_url":"https://api.github.com/users/jroper/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":93144690,"node_id":"MDU6TGFiZWw5MzE0NDY5MA==","url":"https://api.github.com/repos/akka/akka-core/labels/t:stream","name":"t:stream","color":"cccccc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/akka/akka-core/milestones/121","html_url":"https://github.com/akka/akka-core/milestone/121","labels_url":"https://api.github.com/repos/akka/akka-core/milestones/121/labels","id":2800408,"node_id":"MDk6TWlsZXN0b25lMjgwMDQwOA==","number":121,"title":"2.5.7","description":"","creator":{"login":"raboof","id":131856,"node_id":"MDQ6VXNlcjEzMTg1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/131856?v=4","gravatar_id":"","url":"https://api.github.com/users/raboof","html_url":"https://github.com/raboof","followers_url":"https://api.github.com/users/raboof/followers","following_url":"https://api.github.com/users/raboof/following{/other_user}","gists_url":"https://api.github.com/users/raboof/gists{/gist_id}","starred_url":"https://api.github.com/users/raboof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raboof/subscriptions","organizations_url":"https://api.github.com/users/raboof/orgs","repos_url":"https://api.github.com/users/raboof/repos","events_url":"https://api.github.com/users/raboof/events{/privacy}","received_events_url":"https://api.github.com/users/raboof/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":104,"state":"closed","created_at":"2017-09-28T13:38:23Z","updated_at":"2020-02-04T14:22:19Z","due_on":null,"closed_at":"2017-11-20T09:40:42Z"},"comments":0,"created_at":"2017-11-06T02:35:35Z","updated_at":"2017-11-06T10:30:21Z","closed_at":"2017-11-06T10:30:13Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The name that `SubSource` gives to its outlet is the nondescript name `SubSource.out`. Since all operations invoked on `SubSource` are done asynchronously through a callback, the stack trace is useless for determining where any erroneous invocations came from, and since the outlet is given a nondescript name, the error messages it generates are also useless for determining where the invocations came from. To aid in debugging, the name of the outlet should therefore include the name of the `SubSource`, so that when errors are encountered, such as this error that we're seeing in Lagom:\r\n\r\n```\r\n2017-11-06 12:56:54,422 DEBUG akka.actor.RepointableActorRef - Aborting tcp connection to /127.0.0.1:42630 because of upstream failure: requirement failed: Cannot push port (SubSource.out(326501899)) twice\r\nscala.Predef$.require(Predef.scala:224)\r\nakka.stream.stage.GraphStageLogic.push(GraphStage.scala:548)\r\nakka.stream.impl.fusing.SubSource$$anon$4$$anonfun$1.apply(StreamOfStreams.scala:724)\r\nakka.stream.impl.fusing.SubSource$$anon$4$$anonfun$1.apply(StreamOfStreams.scala:721)\r\nakka.stream.impl.fusing.GraphInterpreter.runAsyncInput(GraphInterpreter.scala:443)\r\nakka.stream.impl.fusing.GraphInterpreterShell$AsyncInput.execute(ActorGraphInterpreter.scala:453)\r\nakka.stream.impl.fusing.GraphInterpreterShell.processEvent(ActorGraphInterpreter.scala:546)\r\nakka.stream.impl.fusing.ActorGraphInterpreter.akka$stream$impl$fusing$ActorGraphInterpreter$$processEvent(ActorGraphInterpreter.scala:728)\r\nakka.stream.impl.fusing.ActorGraphInterpreter.akka$stream$impl$fusing$ActorGraphInterpreter$$shortCircuitBatch(ActorGraphInterpreter.scala:718)\r\nakka.stream.impl.fusing.ActorGraphInterpreter$$anonfun$receive$1.applyOrElse(ActorGraphInterpreter.scala:744)\r\nakka.actor.Actor$class.aroundReceive(Actor.scala:517)\r\nakka.stream.impl.fusing.ActorGraphInterpreter.aroundReceive(ActorGraphInterpreter.scala:653)\r\nakka.actor.ActorCell.receiveMessage(ActorCell.scala:527)\r\nakka.actor.ActorCell.invoke(ActorCell.scala:496)\r\nakka.dispatch.Mailbox.processMailbox(Mailbox.scala:257)\r\nakka.dispatch.Mailbox.run(Mailbox.scala:224)\r\nakka.dispatch.Mailbox.exec(Mailbox.scala:234)\r\nakka.dispatch.forkjoin.ForkJoinTask.doExec(ForkJoinTask.java:260)\r\nakka.dispatch.forkjoin.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1339)\r\nakka.dispatch.forkjoin.ForkJoinPool.runWorker(ForkJoinPool.java:1979)\r\nakka.dispatch.forkjoin.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:107)\r\n```\r\n\r\nwe can determine which stage did this invocation. I can only guess that this erroneous invocation came from Akka HTTPs `FrameSource` outlet in the http server blueprint stage, because I don't know of any other code creating sub sources in the code path, but I can't be sure.","closed_by":{"login":"ktoso","id":120979,"node_id":"MDQ6VXNlcjEyMDk3OQ==","avatar_url":"https://avatars.githubusercontent.com/u/120979?v=4","gravatar_id":"","url":"https://api.github.com/users/ktoso","html_url":"https://github.com/ktoso","followers_url":"https://api.github.com/users/ktoso/followers","following_url":"https://api.github.com/users/ktoso/following{/other_user}","gists_url":"https://api.github.com/users/ktoso/gists{/gist_id}","starred_url":"https://api.github.com/users/ktoso/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ktoso/subscriptions","organizations_url":"https://api.github.com/users/ktoso/orgs","repos_url":"https://api.github.com/users/ktoso/repos","events_url":"https://api.github.com/users/ktoso/events{/privacy}","received_events_url":"https://api.github.com/users/ktoso/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/akka/akka-core/issues/23921/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/akka/akka-core/issues/23921/timeline","performed_via_github_app":null,"state_reason":"completed"}