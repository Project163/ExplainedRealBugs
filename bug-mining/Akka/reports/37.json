{"url":"https://api.github.com/repos/akka/akka-core/issues/25065","repository_url":"https://api.github.com/repos/akka/akka-core","labels_url":"https://api.github.com/repos/akka/akka-core/issues/25065/labels{/name}","comments_url":"https://api.github.com/repos/akka/akka-core/issues/25065/comments","events_url":"https://api.github.com/repos/akka/akka-core/issues/25065/events","html_url":"https://github.com/akka/akka-core/issues/25065","id":321079854,"node_id":"MDU6SXNzdWUzMjEwNzk4NTQ=","number":25065,"title":"Multi-node ClusterDeathWatchSpec","user":{"login":"raboof","id":131856,"node_id":"MDQ6VXNlcjEzMTg1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/131856?v=4","gravatar_id":"","url":"https://api.github.com/users/raboof","html_url":"https://github.com/raboof","followers_url":"https://api.github.com/users/raboof/followers","following_url":"https://api.github.com/users/raboof/following{/other_user}","gists_url":"https://api.github.com/users/raboof/gists{/gist_id}","starred_url":"https://api.github.com/users/raboof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raboof/subscriptions","organizations_url":"https://api.github.com/users/raboof/orgs","repos_url":"https://api.github.com/users/raboof/repos","events_url":"https://api.github.com/users/raboof/events{/privacy}","received_events_url":"https://api.github.com/users/raboof/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":92618559,"node_id":"MDU6TGFiZWw5MjYxODU1OQ==","url":"https://api.github.com/repos/akka/akka-core/labels/failed","name":"failed","color":"e11d21","default":false,"description":"Tickets that indicate a CI failure, likely a flakey test"}],"state":"closed","locked":false,"assignee":{"login":"chbatey","id":1866779,"node_id":"MDQ6VXNlcjE4NjY3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/1866779?v=4","gravatar_id":"","url":"https://api.github.com/users/chbatey","html_url":"https://github.com/chbatey","followers_url":"https://api.github.com/users/chbatey/followers","following_url":"https://api.github.com/users/chbatey/following{/other_user}","gists_url":"https://api.github.com/users/chbatey/gists{/gist_id}","starred_url":"https://api.github.com/users/chbatey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chbatey/subscriptions","organizations_url":"https://api.github.com/users/chbatey/orgs","repos_url":"https://api.github.com/users/chbatey/repos","events_url":"https://api.github.com/users/chbatey/events{/privacy}","received_events_url":"https://api.github.com/users/chbatey/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"chbatey","id":1866779,"node_id":"MDQ6VXNlcjE4NjY3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/1866779?v=4","gravatar_id":"","url":"https://api.github.com/users/chbatey","html_url":"https://github.com/chbatey","followers_url":"https://api.github.com/users/chbatey/followers","following_url":"https://api.github.com/users/chbatey/following{/other_user}","gists_url":"https://api.github.com/users/chbatey/gists{/gist_id}","starred_url":"https://api.github.com/users/chbatey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chbatey/subscriptions","organizations_url":"https://api.github.com/users/chbatey/orgs","repos_url":"https://api.github.com/users/chbatey/repos","events_url":"https://api.github.com/users/chbatey/events{/privacy}","received_events_url":"https://api.github.com/users/chbatey/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2018-05-08T07:53:11Z","updated_at":"2018-05-29T11:38:21Z","closed_at":"2018-05-29T11:38:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"https://jenkins.akka.io:8498/job/akka-nightly/5472/consoleFull\r\n\r\nPerhaps related to #19383, #24043 (but not identical)\r\n\r\n```\r\n[info] [JVM-3] [INFO] [05/05/2018 04:32:49.444] [ClusterDeathWatchSpec-akka.actor.default-dispatcher-2] [akka.cluster.Cluster(akka://ClusterDeathWatchSpec)] Cluster Node [akka.tcp://ClusterDeathWatchSpec@localhost:37043] - Shutting down myself\r\n[info] [JVM-3] [INFO] [05/05/2018 04:32:49.445] [ClusterDeathWatchSpec-akka.actor.default-dispatcher-2] [akka.cluster.Cluster(akka://ClusterDeathWatchSpec)] Cluster Node [akka.tcp://ClusterDeathWatchSpec@localhost:37043] - Shutting down...\r\n[info] [JVM-3] [INFO] [05/05/2018 04:32:49.446] [ClusterDeathWatchSpec-akka.actor.default-dispatcher-2] [akka.cluster.Cluster(akka://ClusterDeathWatchSpec)] Cluster Node [akka.tcp://ClusterDeathWatchSpec@localhost:37043] - Successfully shut down\r\n[info] [JVM-4] [INFO] [05/05/2018 04:32:49.585] [ClusterDeathWatchSpec-akka.actor.default-dispatcher-21] [akka.cluster.Cluster(akka://ClusterDeathWatchSpec)] Cluster Node [akka.tcp://ClusterDeathWatchSpec@localhost:44661] - Trying to join [akka.tcp://ClusterDeathWatchSpec@localhost:39335] when already part of a cluster, ignoring\r\n[info] [JVM-3] [WARN] [05/05/2018 04:32:49.606] [ClusterDeathWatchSpec-akka.remote.default-remote-dispatcher-23] [akka.tcp://ClusterDeathWatchSpec@localhost:37043/system/endpointManager/reliableEndpointWriter-akka.tcp%3A%2F%2FClusterDeathWatchSpec%40localhost%3A44661-3] Association with remote system [akka.tcp://ClusterDeathWatchSpec@localhost:44661] has failed, address is now gated for [5000] ms. Reason: [Disassociated] \r\n[info] [JVM-1] [INFO] [05/05/2018 04:32:49.621] [ClusterDeathWatchSpec-akka.actor.default-dispatcher-5] [akka.cluster.Cluster(akka://ClusterDeathWatchSpec)] Cluster Node [akka.tcp://ClusterDeathWatchSpec@localhost:39335] - Node [akka.tcp://ClusterDeathWatchSpec@localhost:35595] is JOINING, roles [dc-default]\r\n[info] [JVM-5] [INFO] [05/05/2018 04:32:49.655] [ClusterDeathWatchSpec-akka.actor.default-dispatcher-18] [akka.cluster.Cluster(akka://ClusterDeathWatchSpec)] Cluster Node [akka.tcp://ClusterDeathWatchSpec@localhost:35595] - Welcome from [akka.tcp://ClusterDeathWatchSpec@localhost:39335]\r\n[info] [JVM-1] [INFO] [05/05/2018 04:32:49.780] [ClusterDeathWatchSpec-akka.actor.default-dispatcher-5] [akka.cluster.Cluster(akka://ClusterDeathWatchSpec)] Cluster Node [akka.tcp://ClusterDeathWatchSpec@localhost:39335] - Leader is moving node [akka.tcp://ClusterDeathWatchSpec@localhost:35595] to [Up]\r\n[info] [JVM-4] - must be able to watch actor before node joins cluster, ClusterRemoteWatcher takes over from RemoteWatcher (on node 'fourth', class akka.cluster.ClusterDeathWatchMultiJvmNode4) *** FAILED *** (19 seconds, 947 milliseconds)\r\n[info] [JVM-4]   Some(akka.tcp://ClusterDeathWatchSpec@localhost:35595) did not equal Some(akka.tcp://ClusterDeathWatchSpec@localhost:37043) (MultiNodeClusterSpec.scala:314)\r\n[info] [JVM-4]   org.scalatest.exceptions.TestFailedException:\r\n[info] [JVM-4]   at org.scalatest.MatchersHelper$.indicateFailure(MatchersHelper.scala:340)\r\n[info] [JVM-4]   at org.scalatest.Matchers$AnyShouldWrapper.should(Matchers.scala:6798)\r\n[info] [JVM-4]   at akka.cluster.MultiNodeClusterSpec$$anonfun$awaitMembersUp$1$$anonfun$apply$7.apply(MultiNodeClusterSpec.scala:314)\r\n[info] [JVM-4]   at akka.cluster.MultiNodeClusterSpec$$anonfun$awaitMembersUp$1$$anonfun$apply$7.apply(MultiNodeClusterSpec.scala:314)\r\n[info] [JVM-4]   at akka.testkit.TestKitBase$class.poll$2(TestKit.scala:312)\r\n[info] [JVM-4]   at akka.testkit.TestKitBase$class.awaitAssert(TestKit.scala:329)\r\n[info] [JVM-4]   at akka.testkit.TestKit.awaitAssert(TestKit.scala:896)\r\n[info] [JVM-4]   at akka.cluster.MultiNodeClusterSpec$$anonfun$awaitMembersUp$1.apply(MultiNodeClusterSpec.scala:314)\r\n[info] [JVM-4]   at akka.cluster.MultiNodeClusterSpec$$anonfun$awaitMembersUp$1.apply(MultiNodeClusterSpec.scala:305)\r\n[info] [JVM-4]   at akka.testkit.TestKitBase$class.within(TestKit.scala:360)\r\n[info] [JVM-4]   at akka.testkit.TestKit.within(TestKit.scala:896)\r\n[info] [JVM-4]   at akka.testkit.TestKitBase$class.within(TestKit.scala:374)\r\n[info] [JVM-4]   at akka.testkit.TestKit.within(TestKit.scala:896)\r\n[info] [JVM-4]   at akka.cluster.MultiNodeClusterSpec$class.awaitMembersUp(MultiNodeClusterSpec.scala:305)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.awaitMembersUp(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at akka.cluster.MultiNodeClusterSpec$class.awaitClusterUp(MultiNodeClusterSpec.scala:227)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.awaitClusterUp(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec$$anonfun$1$$anonfun$apply$mcV$sp$9$$anonfun$apply$mcV$sp$10.apply$mcV$sp(ClusterDeathWatchSpec.scala:172)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec$$anonfun$1$$anonfun$apply$mcV$sp$9$$anonfun$apply$mcV$sp$10.apply(ClusterDeathWatchSpec.scala:150)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec$$anonfun$1$$anonfun$apply$mcV$sp$9$$anonfun$apply$mcV$sp$10.apply(ClusterDeathWatchSpec.scala:150)\r\n[info] [JVM-4]   at akka.testkit.TestKitBase$class.within(TestKit.scala:360)\r\n[info] [JVM-4]   at akka.testkit.TestKit.within(TestKit.scala:896)\r\n[info] [JVM-4]   at akka.testkit.TestKitBase$class.within(TestKit.scala:374)\r\n[info] [JVM-4]   at akka.testkit.TestKit.within(TestKit.scala:896)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec$$anonfun$1$$anonfun$apply$mcV$sp$9.apply$mcV$sp(ClusterDeathWatchSpec.scala:150)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec$$anonfun$1$$anonfun$apply$mcV$sp$9.apply(ClusterDeathWatchSpec.scala:150)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec$$anonfun$1$$anonfun$apply$mcV$sp$9.apply(ClusterDeathWatchSpec.scala:150)\r\n[info] [JVM-4]   at org.scalatest.OutcomeOf$class.outcomeOf(OutcomeOf.scala:85)\r\n[info] [JVM-4]   at org.scalatest.OutcomeOf$.outcomeOf(OutcomeOf.scala:104)\r\n[info] [JVM-4]   at org.scalatest.Transformer.apply(Transformer.scala:22)\r\n[info] [JVM-4]   at org.scalatest.Transformer.apply(Transformer.scala:20)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$$anon$1.apply(WordSpecLike.scala:1078)\r\n[info] [JVM-4]   at org.scalatest.TestSuite$class.withFixture(TestSuite.scala:196)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.akka$cluster$MultiNodeClusterSpec$$super$withFixture(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at akka.cluster.MultiNodeClusterSpec$class.withFixture(MultiNodeClusterSpec.scala:187)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.withFixture(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$class.invokeWithFixture$1(WordSpecLike.scala:1075)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$$anonfun$runTest$1.apply(WordSpecLike.scala:1088)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$$anonfun$runTest$1.apply(WordSpecLike.scala:1088)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine.runTestImpl(Engine.scala:289)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$class.runTest(WordSpecLike.scala:1088)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.runTest(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$$anonfun$runTests$1.apply(WordSpecLike.scala:1147)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$$anonfun$runTests$1.apply(WordSpecLike.scala:1147)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:396)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:384)\r\n[info] [JVM-4]   at scala.collection.immutable.List.foreach(List.scala:392)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:384)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:373)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:410)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine$$anonfun$traverseSubNodes$1$1.apply(Engine.scala:384)\r\n[info] [JVM-4]   at scala.collection.immutable.List.foreach(List.scala:392)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine.traverseSubNodes$1(Engine.scala:384)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine.org$scalatest$SuperEngine$$runTestsInBranch(Engine.scala:379)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine.runTestsImpl(Engine.scala:461)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$class.runTests(WordSpecLike.scala:1147)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.runTests(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at org.scalatest.Suite$class.run(Suite.scala:1147)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.org$scalatest$WordSpecLike$$super$run(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$$anonfun$run$1.apply(WordSpecLike.scala:1192)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$$anonfun$run$1.apply(WordSpecLike.scala:1192)\r\n[info] [JVM-4]   at org.scalatest.SuperEngine.runImpl(Engine.scala:521)\r\n[info] [JVM-4]   at org.scalatest.WordSpecLike$class.run(WordSpecLike.scala:1192)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.org$scalatest$BeforeAndAfterAll$$super$run(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at org.scalatest.BeforeAndAfterAll$class.liftedTree1$1(BeforeAndAfterAll.scala:213)\r\n[info] [JVM-4]   at org.scalatest.BeforeAndAfterAll$class.run(BeforeAndAfterAll.scala:210)\r\n[info] [JVM-4]   at akka.cluster.ClusterDeathWatchSpec.run(ClusterDeathWatchSpec.scala:43)\r\n[info] [JVM-4]   at org.scalatest.tools.SuiteRunner.run(SuiteRunner.scala:45)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$1.apply(Runner.scala:1340)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$$anonfun$doRunRunRunDaDoRunRun$1.apply(Runner.scala:1334)\r\n[info] [JVM-4]   at scala.collection.immutable.List.foreach(List.scala:392)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$.doRunRunRunDaDoRunRun(Runner.scala:1334)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1011)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$$anonfun$runOptionallyWithPassFailReporter$2.apply(Runner.scala:1010)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$.withClassLoaderAndDispatchReporter(Runner.scala:1500)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$.runOptionallyWithPassFailReporter(Runner.scala:1010)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner$.main(Runner.scala:827)\r\n[info] [JVM-4]   at org.scalatest.tools.Runner.main(Runner.scala)\r\n```\r\n","closed_by":{"login":"raboof","id":131856,"node_id":"MDQ6VXNlcjEzMTg1Ng==","avatar_url":"https://avatars.githubusercontent.com/u/131856?v=4","gravatar_id":"","url":"https://api.github.com/users/raboof","html_url":"https://github.com/raboof","followers_url":"https://api.github.com/users/raboof/followers","following_url":"https://api.github.com/users/raboof/following{/other_user}","gists_url":"https://api.github.com/users/raboof/gists{/gist_id}","starred_url":"https://api.github.com/users/raboof/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/raboof/subscriptions","organizations_url":"https://api.github.com/users/raboof/orgs","repos_url":"https://api.github.com/users/raboof/repos","events_url":"https://api.github.com/users/raboof/events{/privacy}","received_events_url":"https://api.github.com/users/raboof/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/akka/akka-core/issues/25065/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/akka/akka-core/issues/25065/timeline","performed_via_github_app":null,"state_reason":"completed"}