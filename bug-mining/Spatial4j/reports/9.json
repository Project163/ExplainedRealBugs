{"url":"https://api.github.com/repos/locationtech/spatial4j/issues/150","repository_url":"https://api.github.com/repos/locationtech/spatial4j","labels_url":"https://api.github.com/repos/locationtech/spatial4j/issues/150/labels{/name}","comments_url":"https://api.github.com/repos/locationtech/spatial4j/issues/150/comments","events_url":"https://api.github.com/repos/locationtech/spatial4j/issues/150/events","html_url":"https://github.com/locationtech/spatial4j/issues/150","id":247857525,"node_id":"MDU6SXNzdWUyNDc4NTc1MjU=","number":150,"title":"Confusion and possible issue around JtsSpatialContext conversion for dateline-crossing geometries","user":{"login":"worace","id":1227440,"node_id":"MDQ6VXNlcjEyMjc0NDA=","avatar_url":"https://avatars.githubusercontent.com/u/1227440?v=4","gravatar_id":"","url":"https://api.github.com/users/worace","html_url":"https://github.com/worace","followers_url":"https://api.github.com/users/worace/followers","following_url":"https://api.github.com/users/worace/following{/other_user}","gists_url":"https://api.github.com/users/worace/gists{/gist_id}","starred_url":"https://api.github.com/users/worace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/worace/subscriptions","organizations_url":"https://api.github.com/users/worace/orgs","repos_url":"https://api.github.com/users/worace/repos","events_url":"https://api.github.com/users/worace/events{/privacy}","received_events_url":"https://api.github.com/users/worace/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-08-03T22:51:06Z","updated_at":"2017-12-08T15:13:33Z","closed_at":"2017-12-08T15:13:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi there -\r\n\r\nI'm hoping to get some guidance on a strange behavior I ran into today. I've been working to update the dependencies for a geospatial library we have at factual (https://github.com/Factual/geo) to the latest JTS and spatial4j versions. Along the way I ran into an issue where JTS geometries which cross the dateline and are converted to Spatial4J shapes get converted successfully the first time, but not on successive attempts.\r\n\r\nIt's maybe a little easier to show than to explain so I made an example project which demonstrates the issue I'm seeing here: https://github.com/worace/Spatial4JExample.\r\n\r\nI'm not sure if this is a bug in either Spatial4J or JTS, or if it's known behavior and I'm simply using one of the classes wrong.\r\n\r\nInterestingly I did notice that the test case in Spatial4J includes a `clone` of the geometry before converting, so perhaps this is a known issue? (https://github.com/locationtech/spatial4j/blob/master/src/test/java/org/locationtech/spatial4j/context/jts/JtsSpatialContextTest.java#L29)\r\n\r\nIf that's the recommended approach we could do the same, although I hate to incur the performance penalty of cloning things all the time if we don't have to.\r\n\r\nFiinally, along the lines of this issue: https://github.com/locationtech/spatial4j/issues/137, when I upgraded our dependencies I noticed those methods are marked as deprecated now. I'm wondering if there's any info somewhere on what the replacement is and how it should be used?\r\n\r\nThanks for your work on this library! Let me know if I can give any more context to explain this issue.\r\n","closed_by":{"login":"dsmiley","id":377295,"node_id":"MDQ6VXNlcjM3NzI5NQ==","avatar_url":"https://avatars.githubusercontent.com/u/377295?v=4","gravatar_id":"","url":"https://api.github.com/users/dsmiley","html_url":"https://github.com/dsmiley","followers_url":"https://api.github.com/users/dsmiley/followers","following_url":"https://api.github.com/users/dsmiley/following{/other_user}","gists_url":"https://api.github.com/users/dsmiley/gists{/gist_id}","starred_url":"https://api.github.com/users/dsmiley/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dsmiley/subscriptions","organizations_url":"https://api.github.com/users/dsmiley/orgs","repos_url":"https://api.github.com/users/dsmiley/repos","events_url":"https://api.github.com/users/dsmiley/events{/privacy}","received_events_url":"https://api.github.com/users/dsmiley/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/locationtech/spatial4j/issues/150/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/locationtech/spatial4j/issues/150/timeline","performed_via_github_app":null,"state_reason":"completed"}