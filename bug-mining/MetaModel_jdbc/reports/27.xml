<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:31:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[METAMODEL-1169] MS Sql and queries with WHERE part on datetime or timestamp columns lost milliseconds precision</title>
                <link>https://issues.apache.org/jira/browse/METAMODEL-1169</link>
                <project id="12314523" key="METAMODEL">Apache MetaModel (Retired)</project>
                    <description>&lt;p&gt;An example, where a query is constructed that compares some `datetime` column with a value.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Query q = ...
java.util.Date datetimeValue = createDatetime(&lt;span class=&quot;code-quote&quot;&gt;&apos;2017-01-01 12:00:00.500&apos;&lt;/span&gt;);
q.where(column, OperatorType.GREATER_THAN, datetimeValue);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If there is a row with  the appropriate column value for example `2017-01-01 12:00:00.157`, this row should NOT be selected, but currently it IS, since the milliseconds are trimmed to 0 in the query operand.&lt;/p&gt;

&lt;p&gt;Only on MS SQL database. The problem is probably in `SQLServerQueryRewriter.rewriteFilterItem` class &amp;amp; method.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13117534">METAMODEL-1169</key>
            <summary>MS Sql and queries with WHERE part on datetime or timestamp columns lost milliseconds precision</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jakub.neubauer">Jakub Neubauer</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Nov 2017 10:03:36 +0000</created>
                <updated>Tue, 9 Jan 2018 06:46:46 +0000</updated>
                            <resolved>Tue, 9 Jan 2018 06:46:46 +0000</resolved>
                                    <version>4.5.5</version>
                                    <fixVersion>4.6.1</fixVersion>
                    <fixVersion>5.0.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16251618" author="githubbot" created="Tue, 14 Nov 2017 16:09:33 +0000"  >&lt;p&gt;GitHub user jakubneubauer opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1169&quot; title=&quot;MS Sql and queries with WHERE part on datetime or timestamp columns lost milliseconds precision&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1169&quot;&gt;&lt;del&gt;METAMODEL-1169&lt;/del&gt;&lt;/a&gt; Preserve milliseconds when rewriting query with Date operand (master)&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jakubneubauer/metamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jakubneubauer/metamodel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1169&quot; title=&quot;MS Sql and queries with WHERE part on datetime or timestamp columns lost milliseconds precision&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1169&quot;&gt;&lt;del&gt;METAMODEL-1169&lt;/del&gt;&lt;/a&gt;-milliseconds-in-sql-server-query-fix-in-master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/167.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/167.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #167&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16251623" author="githubbot" created="Tue, 14 Nov 2017 16:10:53 +0000"  >&lt;p&gt;GitHub user jakubneubauer opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1169&quot; title=&quot;MS Sql and queries with WHERE part on datetime or timestamp columns lost milliseconds precision&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1169&quot;&gt;&lt;del&gt;METAMODEL-1169&lt;/del&gt;&lt;/a&gt; Preserve milliseconds when rewriting query with Date operand (4.6)&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/jakubneubauer/metamodel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jakubneubauer/metamodel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/METAMODEL-1169&quot; title=&quot;MS Sql and queries with WHERE part on datetime or timestamp columns lost milliseconds precision&quot; class=&quot;issue-link&quot; data-issue-key=&quot;METAMODEL-1169&quot;&gt;&lt;del&gt;METAMODEL-1169&lt;/del&gt;&lt;/a&gt;-milliseconds-in-sql-server-query-fix-in-4.6.x&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #168&lt;/p&gt;

&lt;hr /&gt;

&lt;hr /&gt;</comment>
                            <comment id="16251630" author="githubbot" created="Tue, 14 Nov 2017 16:15:43 +0000"  >&lt;p&gt;Github user LosD commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Code LGTM, but this seem like a change that requires an update to the integration tests. However, they might be quite broken, so it might not make much of a difference, but at least we should take a look. &lt;/p&gt;</comment>
                            <comment id="16261536" author="githubbot" created="Tue, 21 Nov 2017 21:46:57 +0000"  >&lt;p&gt;Github user jakubneubauer commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    tests were fixed.&lt;/p&gt;</comment>
                            <comment id="16262579" author="githubbot" created="Wed, 22 Nov 2017 14:15:43 +0000"  >&lt;p&gt;Github user jakubneubauer commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    To the integration tests:&lt;br/&gt;
    I found these int. tests related to date/time handling:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;SQLServerJtdsDriverTest.testWorkingWithDates and it is working.&lt;/li&gt;
	&lt;li&gt;SQLServerJtdsDriverTest.ignoreTestTimestampValueInsertSelect is now commented out with description that this test was failing and actually somehow wrong&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;    So it looks like it doesn&apos;t require any change.&lt;/p&gt;</comment>
                            <comment id="16263864" author="githubbot" created="Thu, 23 Nov 2017 06:16:02 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/167&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16263868" author="githubbot" created="Thu, 23 Nov 2017 06:21:04 +0000"  >&lt;p&gt;Github user LosD commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/167&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Merged&lt;/p&gt;</comment>
                            <comment id="16263964" author="githubbot" created="Thu, 23 Nov 2017 08:18:08 +0000"  >&lt;p&gt;Github user JoosjeBoon commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    @LosD  - This is a cherry pick of PR 168 intended for the 4.6.x branch. Is it possible to merge it and have a release of that branch this week? Please let me know as we need it for out own release. Thanks!&lt;/p&gt;</comment>
                            <comment id="16264679" author="githubbot" created="Thu, 23 Nov 2017 18:32:31 +0000"  >&lt;p&gt;Github user LosD commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hmmm... I thought @jakubneubauer had enlisted @kaspersorensen&apos;s help for merging this branch to 4.6 and starting the release vote. Any communication that I missed?&lt;/p&gt;</comment>
                            <comment id="16264731" author="githubbot" created="Thu, 23 Nov 2017 19:39:14 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I&apos;ll merge it in now and start a vote&lt;/p&gt;</comment>
                            <comment id="16264735" author="githubbot" created="Thu, 23 Nov 2017 19:46:48 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Hmm for some reason github didn&apos;t close this PR, although the change was applied. See commit 449aa70cadbe3cd893683aed55ca6cec2cb33120.&lt;/p&gt;

&lt;p&gt;    Staging a release for voting now.&lt;/p&gt;</comment>
                            <comment id="16264736" author="githubbot" created="Thu, 23 Nov 2017 19:47:17 +0000"  >&lt;p&gt;Github user kaspersorensen commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Can you please close the PR manually then @jakubneubauer ?&lt;/p&gt;</comment>
                            <comment id="16264763" author="githubbot" created="Thu, 23 Nov 2017 21:01:39 +0000"  >&lt;p&gt;Github user LosD commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I guess the asfgit bot is only watching master.&lt;/p&gt;</comment>
                            <comment id="16264817" author="githubbot" created="Thu, 23 Nov 2017 22:13:40 +0000"  >&lt;p&gt;Github user jakubneubauer commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Ok. Thanks.&lt;/p&gt;</comment>
                            <comment id="16264818" author="githubbot" created="Thu, 23 Nov 2017 22:13:41 +0000"  >&lt;p&gt;Github user jakubneubauer closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/metamodel/pull/168&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/metamodel/pull/168&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3mmzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>