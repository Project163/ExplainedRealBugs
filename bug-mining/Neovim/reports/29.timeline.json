[{"id":12902832242,"node_id":"LE_lADOAPphoM6JzBHAzwAAAAMBEZhy","url":"https://api.github.com/repos/neovim/neovim/issues/events/12902832242","actor":{"login":"faergeek","id":3524621,"node_id":"MDQ6VXNlcjM1MjQ2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3524621?v=4","gravatar_id":"","url":"https://api.github.com/users/faergeek","html_url":"https://github.com/faergeek","followers_url":"https://api.github.com/users/faergeek/followers","following_url":"https://api.github.com/users/faergeek/following{/other_user}","gists_url":"https://api.github.com/users/faergeek/gists{/gist_id}","starred_url":"https://api.github.com/users/faergeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faergeek/subscriptions","organizations_url":"https://api.github.com/users/faergeek/orgs","repos_url":"https://api.github.com/users/faergeek/repos","events_url":"https://api.github.com/users/faergeek/events{/privacy}","received_events_url":"https://api.github.com/users/faergeek/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-23T03:19:16Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"actor":{"login":"faergeek","id":3524621,"node_id":"MDQ6VXNlcjM1MjQ2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3524621?v=4","gravatar_id":"","url":"https://api.github.com/users/faergeek","html_url":"https://github.com/faergeek","followers_url":"https://api.github.com/users/faergeek/followers","following_url":"https://api.github.com/users/faergeek/following{/other_user}","gists_url":"https://api.github.com/users/faergeek/gists{/gist_id}","starred_url":"https://api.github.com/users/faergeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faergeek/subscriptions","organizations_url":"https://api.github.com/users/faergeek/orgs","repos_url":"https://api.github.com/users/faergeek/repos","events_url":"https://api.github.com/users/faergeek/events{/privacy}","received_events_url":"https://api.github.com/users/faergeek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-23T03:20:16Z","updated_at":"2024-05-23T03:20:16Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/stevearc/oil.nvim/issues/386","repository_url":"https://api.github.com/repos/stevearc/oil.nvim","labels_url":"https://api.github.com/repos/stevearc/oil.nvim/issues/386/labels{/name}","comments_url":"https://api.github.com/repos/stevearc/oil.nvim/issues/386/comments","events_url":"https://api.github.com/repos/stevearc/oil.nvim/issues/386/events","html_url":"https://github.com/stevearc/oil.nvim/issues/386","id":2309782880,"node_id":"I_kwDOInsjHs6JrH1g","number":386,"title":"bug: file renaming with LSP stopped working for certain files","user":{"login":"faergeek","id":3524621,"node_id":"MDQ6VXNlcjM1MjQ2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3524621?v=4","gravatar_id":"","url":"https://api.github.com/users/faergeek","html_url":"https://github.com/faergeek","followers_url":"https://api.github.com/users/faergeek/followers","following_url":"https://api.github.com/users/faergeek/following{/other_user}","gists_url":"https://api.github.com/users/faergeek/gists{/gist_id}","starred_url":"https://api.github.com/users/faergeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faergeek/subscriptions","organizations_url":"https://api.github.com/users/faergeek/orgs","repos_url":"https://api.github.com/users/faergeek/repos","events_url":"https://api.github.com/users/faergeek/events{/privacy}","received_events_url":"https://api.github.com/users/faergeek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":4912064888,"node_id":"LA_kwDOInsjHs8AAAABJMgpeA","url":"https://api.github.com/repos/stevearc/oil.nvim/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-05-22T07:26:34Z","updated_at":"2024-06-06T03:58:02Z","closed_at":"2024-06-06T03:35:04Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":578495262,"node_id":"R_kgDOInsjHg","name":"oil.nvim","full_name":"stevearc/oil.nvim","private":false,"owner":{"login":"stevearc","id":506791,"node_id":"MDQ6VXNlcjUwNjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/506791?v=4","gravatar_id":"","url":"https://api.github.com/users/stevearc","html_url":"https://github.com/stevearc","followers_url":"https://api.github.com/users/stevearc/followers","following_url":"https://api.github.com/users/stevearc/following{/other_user}","gists_url":"https://api.github.com/users/stevearc/gists{/gist_id}","starred_url":"https://api.github.com/users/stevearc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevearc/subscriptions","organizations_url":"https://api.github.com/users/stevearc/orgs","repos_url":"https://api.github.com/users/stevearc/repos","events_url":"https://api.github.com/users/stevearc/events{/privacy}","received_events_url":"https://api.github.com/users/stevearc/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/stevearc/oil.nvim","description":"Neovim file explorer: edit your filesystem like a buffer","fork":false,"url":"https://api.github.com/repos/stevearc/oil.nvim","forks_url":"https://api.github.com/repos/stevearc/oil.nvim/forks","keys_url":"https://api.github.com/repos/stevearc/oil.nvim/keys{/key_id}","collaborators_url":"https://api.github.com/repos/stevearc/oil.nvim/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/stevearc/oil.nvim/teams","hooks_url":"https://api.github.com/repos/stevearc/oil.nvim/hooks","issue_events_url":"https://api.github.com/repos/stevearc/oil.nvim/issues/events{/number}","events_url":"https://api.github.com/repos/stevearc/oil.nvim/events","assignees_url":"https://api.github.com/repos/stevearc/oil.nvim/assignees{/user}","branches_url":"https://api.github.com/repos/stevearc/oil.nvim/branches{/branch}","tags_url":"https://api.github.com/repos/stevearc/oil.nvim/tags","blobs_url":"https://api.github.com/repos/stevearc/oil.nvim/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/stevearc/oil.nvim/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/stevearc/oil.nvim/git/refs{/sha}","trees_url":"https://api.github.com/repos/stevearc/oil.nvim/git/trees{/sha}","statuses_url":"https://api.github.com/repos/stevearc/oil.nvim/statuses/{sha}","languages_url":"https://api.github.com/repos/stevearc/oil.nvim/languages","stargazers_url":"https://api.github.com/repos/stevearc/oil.nvim/stargazers","contributors_url":"https://api.github.com/repos/stevearc/oil.nvim/contributors","subscribers_url":"https://api.github.com/repos/stevearc/oil.nvim/subscribers","subscription_url":"https://api.github.com/repos/stevearc/oil.nvim/subscription","commits_url":"https://api.github.com/repos/stevearc/oil.nvim/commits{/sha}","git_commits_url":"https://api.github.com/repos/stevearc/oil.nvim/git/commits{/sha}","comments_url":"https://api.github.com/repos/stevearc/oil.nvim/comments{/number}","issue_comment_url":"https://api.github.com/repos/stevearc/oil.nvim/issues/comments{/number}","contents_url":"https://api.github.com/repos/stevearc/oil.nvim/contents/{+path}","compare_url":"https://api.github.com/repos/stevearc/oil.nvim/compare/{base}...{head}","merges_url":"https://api.github.com/repos/stevearc/oil.nvim/merges","archive_url":"https://api.github.com/repos/stevearc/oil.nvim/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/stevearc/oil.nvim/downloads","issues_url":"https://api.github.com/repos/stevearc/oil.nvim/issues{/number}","pulls_url":"https://api.github.com/repos/stevearc/oil.nvim/pulls{/number}","milestones_url":"https://api.github.com/repos/stevearc/oil.nvim/milestones{/number}","notifications_url":"https://api.github.com/repos/stevearc/oil.nvim/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/stevearc/oil.nvim/labels{/name}","releases_url":"https://api.github.com/repos/stevearc/oil.nvim/releases{/id}","deployments_url":"https://api.github.com/repos/stevearc/oil.nvim/deployments","created_at":"2022-12-15T07:35:18Z","updated_at":"2025-11-09T23:35:06Z","pushed_at":"2025-10-19T22:42:01Z","git_url":"git://github.com/stevearc/oil.nvim.git","ssh_url":"git@github.com:stevearc/oil.nvim.git","clone_url":"https://github.com/stevearc/oil.nvim.git","svn_url":"https://github.com/stevearc/oil.nvim","homepage":"","size":778,"stargazers_count":5860,"watchers_count":5860,"language":"Lua","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":177,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":112,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["neovim","neovim-plugin","nvim","nvim-plugin"],"visibility":"public","forks":177,"open_issues":112,"watchers":5860,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Did you check the docs and existing issues?\r\n\r\n- [X] I have read the docs\r\n- [X] I have searched the existing issues\r\n\r\n### Neovim version (nvim -v)\r\n\r\n0.10.0\r\n\r\n### Operating system/version\r\n\r\nArch Linux\r\n\r\n### Describe the bug\r\n\r\nLSP renaming stopped working for me in neovim 0.10.0. I checked in v0.9.5, it works fine.\r\n\r\nFirst I used `git bisect` in oil repo to figure out where it stopped working. Neovim is locally built from 0.10.0 git tag. At this commit it still works https://github.com/stevearc/oil.nvim/commit/1fce168881248e8310ebff2b4417db24ab7c175a, then it starts erroring out with `oil.nvim/lua/oil/lsp_helpers.lua:24: attempt to call field '_match'` on this commit https://github.com/stevearc/oil.nvim/commit/24027ed8d7f3ee5c38cfd713915e2e16d89e79b3. After https://github.com/stevearc/oil.nvim/commit/250e0af7a54d750792be8b1d6165b76b6603a867 (where `._match` usage was removed) it doesn't error, but renaming also doesn't work.\r\n\r\nI also used `git bisect` on neovim repo to figure out at which point it stopped working. oil.nvim is at https://github.com/stevearc/oil.nvim/commit/259b1fbc84734bfb74225b2c2f408dd7ed9cf474 locally. Turns out this is the first commit where it stopped working https://github.com/neovim/neovim/commit/92204b06e7365cf4c68e6ea8258dce801f0a5df9.\r\n\r\nWhile preparing reproduction repo I noticed that it works fine when renaming `.ts` files, but not when renaming `.tsx` files. So it might be all related to glob handling I guess.\r\n\r\n### What is the severity of this bug?\r\n\r\nbreaking (some functionality is broken)\r\n\r\n### Steps To Reproduce\r\n\r\nNot sure how else to easily reproduce it. Node and npm are required for this.\r\n\r\n1. Clone the repo https://github.com/faergeek/oil-issue-reproduction\r\n2. `npm install`\r\n3. `nvim -u init.lua -o src/root.ts src/add.tsx src/subtract.ts`\r\n4. Switch to `add.tsx` buffer, `:Oil`, rename file. Import in `root.ts` is not updated.\r\n5. Switch to `subtract.ts` buffer, `:Oil`, rename file. Import in `root.ts` is updated properly.\r\n\r\n### Expected Behavior\r\n\r\nFile renaming with LSP works in both cases.\r\n\r\n### Directory structure\r\n\r\n_No response_\r\n\r\n### Repro\r\n\r\n```Lua\r\n-- more files for reproduction are in the repo https://github.com/faergeek/oil-issue-reproduction\r\nlocal root = vim.fn.fnamemodify(\"./.repro\", \":p\")\r\n\r\n-- set stdpaths to use .repro\r\nfor _, name in ipairs({ \"config\", \"data\", \"state\", \"runtime\", \"cache\" }) do\r\n\tvim.env[(\"XDG_%s_HOME\"):format(name:upper())] = root .. \"/\" .. name\r\nend\r\n\r\n-- bootstrap lazy\r\nlocal lazypath = root .. \"/plugins/lazy.nvim\"\r\nif not vim.loop.fs_stat(lazypath) then\r\n\tvim.fn.system({\r\n\t\t\"git\",\r\n\t\t\"clone\",\r\n\t\t\"--filter=blob:none\",\r\n\t\t\"--single-branch\",\r\n\t\t\"https://github.com/folke/lazy.nvim.git\",\r\n\t\tlazypath,\r\n\t})\r\nend\r\nvim.opt.runtimepath:prepend(lazypath)\r\n\r\n-- install plugins\r\nlocal plugins = {\r\n\t\"folke/tokyonight.nvim\",\r\n\t{\r\n\t\t\"stevearc/oil.nvim\",\r\n\t\tconfig = function()\r\n\t\t\trequire(\"oil\").setup({\r\n\t\t\t\t-- add any needed settings here\r\n\t\t\t})\r\n\t\tend,\r\n\t},\r\n\t{\r\n\t\t\"neovim/nvim-lspconfig\",\r\n\t},\r\n\t{ \"williamboman/mason.nvim\", opts = {} },\r\n\t{\r\n\t\t\"williamboman/mason-lspconfig.nvim\",\r\n\t\tdependencies = { \"mason.nvim\", \"neovim/nvim-lspconfig\" },\r\n\t\topts = {\r\n\t\t\tensure_installed = { \"tsserver\" },\r\n\t\t\thandlers = {\r\n\t\t\t\tfunction(server_name)\r\n\t\t\t\t\trequire(\"lspconfig\")[server_name].setup({})\r\n\t\t\t\tend,\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n}\r\nrequire(\"lazy\").setup(plugins, {\r\n\troot = root .. \"/plugins\",\r\n})\r\n\r\nvim.cmd.colorscheme(\"tokyonight\")\r\n```\r\n\r\n\r\n### Did you check the bug with a clean config?\r\n\r\n- [X] I have confirmed that the bug reproduces with `nvim -u repro.lua` using the repro.lua file above.","reactions":{"url":"https://api.github.com/repos/stevearc/oil.nvim/issues/386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/stevearc/oil.nvim/issues/386/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":12902857468,"node_id":"LE_lADOAPphoM6JzBHAzwAAAAMBEfr8","url":"https://api.github.com/repos/neovim/neovim/issues/events/12902857468","actor":{"login":"zeertzjq","id":35768171,"node_id":"MDQ6VXNlcjM1NzY4MTcx","avatar_url":"https://avatars.githubusercontent.com/u/35768171?v=4","gravatar_id":"","url":"https://api.github.com/users/zeertzjq","html_url":"https://github.com/zeertzjq","followers_url":"https://api.github.com/users/zeertzjq/followers","following_url":"https://api.github.com/users/zeertzjq/following{/other_user}","gists_url":"https://api.github.com/users/zeertzjq/gists{/gist_id}","starred_url":"https://api.github.com/users/zeertzjq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeertzjq/subscriptions","organizations_url":"https://api.github.com/users/zeertzjq/orgs","repos_url":"https://api.github.com/users/zeertzjq/repos","events_url":"https://api.github.com/users/zeertzjq/events{/privacy}","received_events_url":"https://api.github.com/users/zeertzjq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-05-23T03:24:59Z","label":{"name":"lua","color":"c5def5"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2126181286","html_url":"https://github.com/neovim/neovim/issues/28931#issuecomment-2126181286","issue_url":"https://api.github.com/repos/neovim/neovim/issues/28931","id":2126181286,"node_id":"IC_kwDOAPphoM5-uvOm","user":{"login":"faergeek","id":3524621,"node_id":"MDQ6VXNlcjM1MjQ2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3524621?v=4","gravatar_id":"","url":"https://api.github.com/users/faergeek","html_url":"https://github.com/faergeek","followers_url":"https://api.github.com/users/faergeek/followers","following_url":"https://api.github.com/users/faergeek/following{/other_user}","gists_url":"https://api.github.com/users/faergeek/gists{/gist_id}","starred_url":"https://api.github.com/users/faergeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faergeek/subscriptions","organizations_url":"https://api.github.com/users/faergeek/orgs","repos_url":"https://api.github.com/users/faergeek/repos","events_url":"https://api.github.com/users/faergeek/events{/privacy}","received_events_url":"https://api.github.com/users/faergeek/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-23T03:52:24Z","updated_at":"2024-05-23T03:52:24Z","body":"Patch with added tests for a particular glob with which I discovered the issue:\r\n\r\n```diff\r\ndiff --git a/test/functional/lua/glob_spec.lua b/test/functional/lua/glob_spec.lua\r\nindex 56cd4c9bb..383e66d33 100644\r\n--- a/test/functional/lua/glob_spec.lua\r\n+++ b/test/functional/lua/glob_spec.lua\r\n@@ -223,6 +223,17 @@ describe('glob', function()\r\n       eq(true, match('{[0-9],[a-z]}', '0'))\r\n       eq(true, match('{[0-9],[a-z]}', 'a'))\r\n       eq(false, match('{[0-9],[a-z]}', 'A'))\r\n+\r\n+      -- glob is from willRename filter in typescript-language-server\r\n+      -- https://github.com/typescript-language-server/typescript-language-server/blob/b224b878652438bcdd639137a6b1d1a6630129e4/src/lsp-server.ts#L266\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.js'))\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.ts'))\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.mts'))\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.mjs'))\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.cjs'))\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.cts'))\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.jsx'))\r\n+      eq(true, match('**/*.{ts,js,jsx,tsx,mjs,mts,cjs,cts}', 'test.tsx'))\r\n     end)\r\n   end)\r\n end)\r\n```\r\n\r\nOnly last 2 cases do not match.\r\n\r\nNot sure if I'll be able to figure out how to fix that myself.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2126181286/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"faergeek","id":3524621,"node_id":"MDQ6VXNlcjM1MjQ2MjE=","avatar_url":"https://avatars.githubusercontent.com/u/3524621?v=4","gravatar_id":"","url":"https://api.github.com/users/faergeek","html_url":"https://github.com/faergeek","followers_url":"https://api.github.com/users/faergeek/followers","following_url":"https://api.github.com/users/faergeek/following{/other_user}","gists_url":"https://api.github.com/users/faergeek/gists{/gist_id}","starred_url":"https://api.github.com/users/faergeek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/faergeek/subscriptions","organizations_url":"https://api.github.com/users/faergeek/orgs","repos_url":"https://api.github.com/users/faergeek/repos","events_url":"https://api.github.com/users/faergeek/events{/privacy}","received_events_url":"https://api.github.com/users/faergeek/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2126608895","html_url":"https://github.com/neovim/neovim/issues/28931#issuecomment-2126608895","issue_url":"https://api.github.com/repos/neovim/neovim/issues/28931","id":2126608895,"node_id":"IC_kwDOAPphoM5-wXn_","user":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-05-23T09:07:54Z","updated_at":"2024-05-23T09:07:54Z","body":"@stevearc","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2126608895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12906142697,"node_id":"MEE_lADOAPphoM6JzBHAzwAAAAMBRBvp","url":"https://api.github.com/repos/neovim/neovim/issues/events/12906142697","actor":{"login":"stevearc","id":506791,"node_id":"MDQ6VXNlcjUwNjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/506791?v=4","gravatar_id":"","url":"https://api.github.com/users/stevearc","html_url":"https://github.com/stevearc","followers_url":"https://api.github.com/users/stevearc/followers","following_url":"https://api.github.com/users/stevearc/following{/other_user}","gists_url":"https://api.github.com/users/stevearc/gists{/gist_id}","starred_url":"https://api.github.com/users/stevearc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevearc/subscriptions","organizations_url":"https://api.github.com/users/stevearc/orgs","repos_url":"https://api.github.com/users/stevearc/repos","events_url":"https://api.github.com/users/stevearc/events{/privacy}","received_events_url":"https://api.github.com/users/stevearc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-05-23T09:07:56Z","performed_via_github_app":null},{"id":12906142708,"node_id":"SE_lADOAPphoM6JzBHAzwAAAAMBRBv0","url":"https://api.github.com/repos/neovim/neovim/issues/events/12906142708","actor":{"login":"stevearc","id":506791,"node_id":"MDQ6VXNlcjUwNjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/506791?v=4","gravatar_id":"","url":"https://api.github.com/users/stevearc","html_url":"https://github.com/stevearc","followers_url":"https://api.github.com/users/stevearc/followers","following_url":"https://api.github.com/users/stevearc/following{/other_user}","gists_url":"https://api.github.com/users/stevearc/gists{/gist_id}","starred_url":"https://api.github.com/users/stevearc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevearc/subscriptions","organizations_url":"https://api.github.com/users/stevearc/orgs","repos_url":"https://api.github.com/users/stevearc/repos","events_url":"https://api.github.com/users/stevearc/events{/privacy}","received_events_url":"https://api.github.com/users/stevearc/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-05-23T09:07:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2151343402","html_url":"https://github.com/neovim/neovim/issues/28931#issuecomment-2151343402","issue_url":"https://api.github.com/repos/neovim/neovim/issues/28931","id":2151343402,"node_id":"IC_kwDOAPphoM6AOuUq","user":{"login":"stevearc","id":506791,"node_id":"MDQ6VXNlcjUwNjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/506791?v=4","gravatar_id":"","url":"https://api.github.com/users/stevearc","html_url":"https://github.com/stevearc","followers_url":"https://api.github.com/users/stevearc/followers","following_url":"https://api.github.com/users/stevearc/following{/other_user}","gists_url":"https://api.github.com/users/stevearc/gists{/gist_id}","starred_url":"https://api.github.com/users/stevearc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevearc/subscriptions","organizations_url":"https://api.github.com/users/stevearc/orgs","repos_url":"https://api.github.com/users/stevearc/repos","events_url":"https://api.github.com/users/stevearc/events{/privacy}","received_events_url":"https://api.github.com/users/stevearc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-06T03:26:16Z","updated_at":"2024-06-06T03:26:16Z","body":"I didn't write the lpeg grammar, I merely moved it into the current file. It was added by @nojnhuh in #23788. I spent some time poking around; this seems to be a problem with greedy matching the first option in the list.\r\n```lua\r\n-- this fails\r\neq(true, match('**/*.{ts,tsx}', 'test.tsx'))\r\n-- this succeeds\r\neq(true, match('**/*.{tsx,ts}', 'test.tsx'))\r\n-- this also succeeds\r\neq(true, match('**/*.{tsx,ts}', 'test.ts'))\r\n```\r\n\r\nI have no idea how to fix this using purely lpeg. Intuitively I want to take the list of items inside the `{}` and sort them descending by length, but I couldn't figure out how to make that happen inside the lpeg expression.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2151343402/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"stevearc","id":506791,"node_id":"MDQ6VXNlcjUwNjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/506791?v=4","gravatar_id":"","url":"https://api.github.com/users/stevearc","html_url":"https://github.com/stevearc","followers_url":"https://api.github.com/users/stevearc/followers","following_url":"https://api.github.com/users/stevearc/following{/other_user}","gists_url":"https://api.github.com/users/stevearc/gists{/gist_id}","starred_url":"https://api.github.com/users/stevearc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevearc/subscriptions","organizations_url":"https://api.github.com/users/stevearc/orgs","repos_url":"https://api.github.com/users/stevearc/repos","events_url":"https://api.github.com/users/stevearc/events{/privacy}","received_events_url":"https://api.github.com/users/stevearc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13060358727,"node_id":"MEE_lADOAPphoM6JzBHAzwAAAAMKdUJH","url":"https://api.github.com/repos/neovim/neovim/issues/events/13060358727","actor":{"login":"nojnhuh","id":16093815,"node_id":"MDQ6VXNlcjE2MDkzODE1","avatar_url":"https://avatars.githubusercontent.com/u/16093815?v=4","gravatar_id":"","url":"https://api.github.com/users/nojnhuh","html_url":"https://github.com/nojnhuh","followers_url":"https://api.github.com/users/nojnhuh/followers","following_url":"https://api.github.com/users/nojnhuh/following{/other_user}","gists_url":"https://api.github.com/users/nojnhuh/gists{/gist_id}","starred_url":"https://api.github.com/users/nojnhuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nojnhuh/subscriptions","organizations_url":"https://api.github.com/users/nojnhuh/orgs","repos_url":"https://api.github.com/users/nojnhuh/repos","events_url":"https://api.github.com/users/nojnhuh/events{/privacy}","received_events_url":"https://api.github.com/users/nojnhuh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-06-06T03:26:17Z","performed_via_github_app":null},{"id":13060358732,"node_id":"SE_lADOAPphoM6JzBHAzwAAAAMKdUJM","url":"https://api.github.com/repos/neovim/neovim/issues/events/13060358732","actor":{"login":"nojnhuh","id":16093815,"node_id":"MDQ6VXNlcjE2MDkzODE1","avatar_url":"https://avatars.githubusercontent.com/u/16093815?v=4","gravatar_id":"","url":"https://api.github.com/users/nojnhuh","html_url":"https://github.com/nojnhuh","followers_url":"https://api.github.com/users/nojnhuh/followers","following_url":"https://api.github.com/users/nojnhuh/following{/other_user}","gists_url":"https://api.github.com/users/nojnhuh/gists{/gist_id}","starred_url":"https://api.github.com/users/nojnhuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nojnhuh/subscriptions","organizations_url":"https://api.github.com/users/nojnhuh/orgs","repos_url":"https://api.github.com/users/nojnhuh/repos","events_url":"https://api.github.com/users/nojnhuh/events{/privacy}","received_events_url":"https://api.github.com/users/nojnhuh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-06-06T03:26:17Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2153571421","html_url":"https://github.com/neovim/neovim/issues/28931#issuecomment-2153571421","issue_url":"https://api.github.com/repos/neovim/neovim/issues/28931","id":2153571421,"node_id":"IC_kwDOAPphoM6AXORd","user":{"login":"brynne8","id":7542439,"node_id":"MDQ6VXNlcjc1NDI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/7542439?v=4","gravatar_id":"","url":"https://api.github.com/users/brynne8","html_url":"https://github.com/brynne8","followers_url":"https://api.github.com/users/brynne8/followers","following_url":"https://api.github.com/users/brynne8/following{/other_user}","gists_url":"https://api.github.com/users/brynne8/gists{/gist_id}","starred_url":"https://api.github.com/users/brynne8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brynne8/subscriptions","organizations_url":"https://api.github.com/users/brynne8/orgs","repos_url":"https://api.github.com/users/brynne8/repos","events_url":"https://api.github.com/users/brynne8/events{/privacy}","received_events_url":"https://api.github.com/users/brynne8/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-06T23:39:28Z","updated_at":"2024-06-06T23:49:34Z","body":"I'm very sure why this happens. It's because vim.glob simply translates regex `a | b` into `a + b`, which is incorrect, since it means *ordered choice* in PEG. Also check the discussion: https://github.com/neovim/neovim/discussions/29199","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2153571421/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brynne8","id":7542439,"node_id":"MDQ6VXNlcjc1NDI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/7542439?v=4","gravatar_id":"","url":"https://api.github.com/users/brynne8","html_url":"https://github.com/brynne8","followers_url":"https://api.github.com/users/brynne8/followers","following_url":"https://api.github.com/users/brynne8/following{/other_user}","gists_url":"https://api.github.com/users/brynne8/gists{/gist_id}","starred_url":"https://api.github.com/users/brynne8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brynne8/subscriptions","organizations_url":"https://api.github.com/users/brynne8/orgs","repos_url":"https://api.github.com/users/brynne8/repos","events_url":"https://api.github.com/users/brynne8/events{/privacy}","received_events_url":"https://api.github.com/users/brynne8/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":13087446292,"node_id":"REFE_lADOAPphoM6JzBHAzwAAAAMMEpUU","url":"https://api.github.com/repos/neovim/neovim/issues/events/13087446292","actor":{"login":"nojnhuh","id":16093815,"node_id":"MDQ6VXNlcjE2MDkzODE1","avatar_url":"https://avatars.githubusercontent.com/u/16093815?v=4","gravatar_id":"","url":"https://api.github.com/users/nojnhuh","html_url":"https://github.com/nojnhuh","followers_url":"https://api.github.com/users/nojnhuh/followers","following_url":"https://api.github.com/users/nojnhuh/following{/other_user}","gists_url":"https://api.github.com/users/nojnhuh/gists{/gist_id}","starred_url":"https://api.github.com/users/nojnhuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nojnhuh/subscriptions","organizations_url":"https://api.github.com/users/nojnhuh/orgs","repos_url":"https://api.github.com/users/nojnhuh/repos","events_url":"https://api.github.com/users/nojnhuh/events{/privacy}","received_events_url":"https://api.github.com/users/nojnhuh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d474fc3ffdc05f8e986af2b3abb14aecb01bde57","commit_url":"https://api.github.com/repos/nojnhuh/neovim/commits/d474fc3ffdc05f8e986af2b3abb14aecb01bde57","created_at":"2024-06-08T05:58:33Z","performed_via_github_app":null},{"actor":{"login":"nojnhuh","id":16093815,"node_id":"MDQ6VXNlcjE2MDkzODE1","avatar_url":"https://avatars.githubusercontent.com/u/16093815?v=4","gravatar_id":"","url":"https://api.github.com/users/nojnhuh","html_url":"https://github.com/nojnhuh","followers_url":"https://api.github.com/users/nojnhuh/followers","following_url":"https://api.github.com/users/nojnhuh/following{/other_user}","gists_url":"https://api.github.com/users/nojnhuh/gists{/gist_id}","starred_url":"https://api.github.com/users/nojnhuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nojnhuh/subscriptions","organizations_url":"https://api.github.com/users/nojnhuh/orgs","repos_url":"https://api.github.com/users/nojnhuh/repos","events_url":"https://api.github.com/users/nojnhuh/events{/privacy}","received_events_url":"https://api.github.com/users/nojnhuh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-06-08T06:03:36Z","updated_at":"2024-06-08T06:03:36Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/neovim/neovim/issues/29236","repository_url":"https://api.github.com/repos/neovim/neovim","labels_url":"https://api.github.com/repos/neovim/neovim/issues/29236/labels{/name}","comments_url":"https://api.github.com/repos/neovim/neovim/issues/29236/comments","events_url":"https://api.github.com/repos/neovim/neovim/issues/29236/events","html_url":"https://github.com/neovim/neovim/pull/29236","id":2341497839,"node_id":"PR_kwDOAPphoM5x2rAd","number":29236,"title":"fix(glob): handle overlapping `{}` condition elements","user":{"login":"nojnhuh","id":16093815,"node_id":"MDQ6VXNlcjE2MDkzODE1","avatar_url":"https://avatars.githubusercontent.com/u/16093815?v=4","gravatar_id":"","url":"https://api.github.com/users/nojnhuh","html_url":"https://github.com/nojnhuh","followers_url":"https://api.github.com/users/nojnhuh/followers","following_url":"https://api.github.com/users/nojnhuh/following{/other_user}","gists_url":"https://api.github.com/users/nojnhuh/gists{/gist_id}","starred_url":"https://api.github.com/users/nojnhuh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nojnhuh/subscriptions","organizations_url":"https://api.github.com/users/nojnhuh/orgs","repos_url":"https://api.github.com/users/nojnhuh/repos","events_url":"https://api.github.com/users/nojnhuh/events{/privacy}","received_events_url":"https://api.github.com/users/nojnhuh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":573222693,"node_id":"MDU6TGFiZWw1NzMyMjI2OTM=","url":"https://api.github.com/repos/neovim/neovim/labels/lua","name":"lua","color":"c5def5","default":false,"description":"stdlib"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-06-08T06:03:35Z","updated_at":"2024-10-28T19:58:45Z","closed_at":"2024-06-10T11:23:04Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":16408992,"node_id":"MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==","name":"neovim","full_name":"neovim/neovim","private":false,"owner":{"login":"neovim","id":6471485,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6471485?v=4","gravatar_id":"","url":"https://api.github.com/users/neovim","html_url":"https://github.com/neovim","followers_url":"https://api.github.com/users/neovim/followers","following_url":"https://api.github.com/users/neovim/following{/other_user}","gists_url":"https://api.github.com/users/neovim/gists{/gist_id}","starred_url":"https://api.github.com/users/neovim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neovim/subscriptions","organizations_url":"https://api.github.com/users/neovim/orgs","repos_url":"https://api.github.com/users/neovim/repos","events_url":"https://api.github.com/users/neovim/events{/privacy}","received_events_url":"https://api.github.com/users/neovim/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/neovim/neovim","description":"Vim-fork focused on extensibility and usability","fork":false,"url":"https://api.github.com/repos/neovim/neovim","forks_url":"https://api.github.com/repos/neovim/neovim/forks","keys_url":"https://api.github.com/repos/neovim/neovim/keys{/key_id}","collaborators_url":"https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/neovim/neovim/teams","hooks_url":"https://api.github.com/repos/neovim/neovim/hooks","issue_events_url":"https://api.github.com/repos/neovim/neovim/issues/events{/number}","events_url":"https://api.github.com/repos/neovim/neovim/events","assignees_url":"https://api.github.com/repos/neovim/neovim/assignees{/user}","branches_url":"https://api.github.com/repos/neovim/neovim/branches{/branch}","tags_url":"https://api.github.com/repos/neovim/neovim/tags","blobs_url":"https://api.github.com/repos/neovim/neovim/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/neovim/neovim/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/neovim/neovim/git/refs{/sha}","trees_url":"https://api.github.com/repos/neovim/neovim/git/trees{/sha}","statuses_url":"https://api.github.com/repos/neovim/neovim/statuses/{sha}","languages_url":"https://api.github.com/repos/neovim/neovim/languages","stargazers_url":"https://api.github.com/repos/neovim/neovim/stargazers","contributors_url":"https://api.github.com/repos/neovim/neovim/contributors","subscribers_url":"https://api.github.com/repos/neovim/neovim/subscribers","subscription_url":"https://api.github.com/repos/neovim/neovim/subscription","commits_url":"https://api.github.com/repos/neovim/neovim/commits{/sha}","git_commits_url":"https://api.github.com/repos/neovim/neovim/git/commits{/sha}","comments_url":"https://api.github.com/repos/neovim/neovim/comments{/number}","issue_comment_url":"https://api.github.com/repos/neovim/neovim/issues/comments{/number}","contents_url":"https://api.github.com/repos/neovim/neovim/contents/{+path}","compare_url":"https://api.github.com/repos/neovim/neovim/compare/{base}...{head}","merges_url":"https://api.github.com/repos/neovim/neovim/merges","archive_url":"https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/neovim/neovim/downloads","issues_url":"https://api.github.com/repos/neovim/neovim/issues{/number}","pulls_url":"https://api.github.com/repos/neovim/neovim/pulls{/number}","milestones_url":"https://api.github.com/repos/neovim/neovim/milestones{/number}","notifications_url":"https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/neovim/neovim/labels{/name}","releases_url":"https://api.github.com/repos/neovim/neovim/releases{/id}","deployments_url":"https://api.github.com/repos/neovim/neovim/deployments","created_at":"2014-01-31T13:39:22Z","updated_at":"2025-11-10T01:49:31Z","pushed_at":"2025-11-10T01:49:25Z","git_url":"git://github.com/neovim/neovim.git","ssh_url":"git@github.com:neovim/neovim.git","clone_url":"https://github.com/neovim/neovim.git","svn_url":"https://github.com/neovim/neovim","homepage":"https://neovim.io","size":350662,"stargazers_count":94128,"watchers_count":94128,"language":"Vim Script","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6408,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2074,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["api","c","lua","neovim","nvim","text-editor","vim"],"visibility":"public","forks":6408,"open_issues":2074,"watchers":94128,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/neovim/neovim/pulls/29236","html_url":"https://github.com/neovim/neovim/pull/29236","diff_url":"https://github.com/neovim/neovim/pull/29236.diff","patch_url":"https://github.com/neovim/neovim/pull/29236.patch","merged_at":"2024-06-10T11:23:04Z"},"body":"This change fixes an issue where glob patterns like `{a,ab}` would not match `ab` because the first option `a` matches, then the end of the string is expected but `b` is found, and LPeg does not backtrack to try the next option `ab` which would match. The fix here is to also append the rest of the pattern to the generated LPeg pattern for each option. This changes a glob `{a,ab}` from being parsed as\r\n\r\n    (\"a\" or \"ab\") \"end of string\"\r\n\r\nto\r\n\r\n    (\"a\" \"end of string\" or \"ab\" \"end of string\")\r\n\r\nHere, matching against `ab` would try the first option, fail to match, then proceed to the next option, and match.\r\n\r\nThe sacrifice this change makes is dropping support for nested `{}` conditions, which VSCode doesn't seem to support or test AFAICT.\r\n\r\nFixes #28931","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/29236/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/neovim/neovim/issues/29236/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":13099816825,"node_id":"CE_lADOAPphoM6JzBHAzwAAAAMMz1d5","url":"https://api.github.com/repos/neovim/neovim/issues/events/13099816825","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-06-10T11:23:05Z","state_reason":null,"performed_via_github_app":null},{"id":13099816868,"node_id":"REFE_lADOAPphoM6JzBHAzwAAAAMMz1ek","url":"https://api.github.com/repos/neovim/neovim/issues/events/13099816868","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4bd86120d41e3b01433004bf761beccb7f3a0167","commit_url":"https://api.github.com/repos/neovim/neovim/commits/4bd86120d41e3b01433004bf761beccb7f3a0167","created_at":"2024-06-10T11:23:05Z","performed_via_github_app":null},{"id":13099824143,"node_id":"MIE_lADOAPphoM6JzBHAzwAAAAMMz3QP","url":"https://api.github.com/repos/neovim/neovim/issues/events/13099824143","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-06-10T11:23:34Z","milestone":{"title":"0.11"},"performed_via_github_app":null},{"id":13669156326,"node_id":"REFE_lADOAPphoM6JzBHAzwAAAAMuvsXm","url":"https://api.github.com/repos/neovim/neovim/issues/events/13669156326","actor":{"login":"stasjok","id":1353637,"node_id":"MDQ6VXNlcjEzNTM2Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/1353637?v=4","gravatar_id":"","url":"https://api.github.com/users/stasjok","html_url":"https://github.com/stasjok","followers_url":"https://api.github.com/users/stasjok/followers","following_url":"https://api.github.com/users/stasjok/following{/other_user}","gists_url":"https://api.github.com/users/stasjok/gists{/gist_id}","starred_url":"https://api.github.com/users/stasjok/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stasjok/subscriptions","organizations_url":"https://api.github.com/users/stasjok/orgs","repos_url":"https://api.github.com/users/stasjok/repos","events_url":"https://api.github.com/users/stasjok/events{/privacy}","received_events_url":"https://api.github.com/users/stasjok/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c8a9f37fb795a07c2d369df12394159f45d454c4","commit_url":"https://api.github.com/repos/stasjok/neovim/commits/c8a9f37fb795a07c2d369df12394159f45d454c4","created_at":"2024-07-27T16:36:27Z","performed_via_github_app":null},{"actor":{"login":"stevearc","id":506791,"node_id":"MDQ6VXNlcjUwNjc5MQ==","avatar_url":"https://avatars.githubusercontent.com/u/506791?v=4","gravatar_id":"","url":"https://api.github.com/users/stevearc","html_url":"https://github.com/stevearc","followers_url":"https://api.github.com/users/stevearc/followers","following_url":"https://api.github.com/users/stevearc/following{/other_user}","gists_url":"https://api.github.com/users/stevearc/gists{/gist_id}","starred_url":"https://api.github.com/users/stevearc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stevearc/subscriptions","organizations_url":"https://api.github.com/users/stevearc/orgs","repos_url":"https://api.github.com/users/stevearc/repos","events_url":"https://api.github.com/users/stevearc/events{/privacy}","received_events_url":"https://api.github.com/users/stevearc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-24T15:31:35Z","updated_at":"2025-04-24T15:31:35Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/neovim/neovim/issues/33605","repository_url":"https://api.github.com/repos/neovim/neovim","labels_url":"https://api.github.com/repos/neovim/neovim/issues/33605/labels{/name}","comments_url":"https://api.github.com/repos/neovim/neovim/issues/33605/comments","events_url":"https://api.github.com/repos/neovim/neovim/issues/33605/events","html_url":"https://github.com/neovim/neovim/pull/33605","id":3016560227,"node_id":"PR_kwDOAPphoM6Tusb0","number":33605,"title":"feat(glob): New Glob Implementation Based on Peglob","user":{"login":"brynne8","id":7542439,"node_id":"MDQ6VXNlcjc1NDI0Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/7542439?v=4","gravatar_id":"","url":"https://api.github.com/users/brynne8","html_url":"https://github.com/brynne8","followers_url":"https://api.github.com/users/brynne8/followers","following_url":"https://api.github.com/users/brynne8/following{/other_user}","gists_url":"https://api.github.com/users/brynne8/gists{/gist_id}","starred_url":"https://api.github.com/users/brynne8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brynne8/subscriptions","organizations_url":"https://api.github.com/users/brynne8/orgs","repos_url":"https://api.github.com/users/brynne8/repos","events_url":"https://api.github.com/users/brynne8/events{/privacy}","received_events_url":"https://api.github.com/users/brynne8/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":573222693,"node_id":"MDU6TGFiZWw1NzMyMjI2OTM=","url":"https://api.github.com/repos/neovim/neovim/labels/lua","name":"lua","color":"c5def5","default":false,"description":"stdlib"},{"id":662566370,"node_id":"MDU6TGFiZWw2NjI1NjYzNzA=","url":"https://api.github.com/repos/neovim/neovim/labels/lsp","name":"lsp","color":"c5def5","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2025-04-24T09:05:42Z","updated_at":"2025-05-22T07:25:02Z","closed_at":"2025-05-22T07:24:50Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":16408992,"node_id":"MDEwOlJlcG9zaXRvcnkxNjQwODk5Mg==","name":"neovim","full_name":"neovim/neovim","private":false,"owner":{"login":"neovim","id":6471485,"node_id":"MDEyOk9yZ2FuaXphdGlvbjY0NzE0ODU=","avatar_url":"https://avatars.githubusercontent.com/u/6471485?v=4","gravatar_id":"","url":"https://api.github.com/users/neovim","html_url":"https://github.com/neovim","followers_url":"https://api.github.com/users/neovim/followers","following_url":"https://api.github.com/users/neovim/following{/other_user}","gists_url":"https://api.github.com/users/neovim/gists{/gist_id}","starred_url":"https://api.github.com/users/neovim/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neovim/subscriptions","organizations_url":"https://api.github.com/users/neovim/orgs","repos_url":"https://api.github.com/users/neovim/repos","events_url":"https://api.github.com/users/neovim/events{/privacy}","received_events_url":"https://api.github.com/users/neovim/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/neovim/neovim","description":"Vim-fork focused on extensibility and usability","fork":false,"url":"https://api.github.com/repos/neovim/neovim","forks_url":"https://api.github.com/repos/neovim/neovim/forks","keys_url":"https://api.github.com/repos/neovim/neovim/keys{/key_id}","collaborators_url":"https://api.github.com/repos/neovim/neovim/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/neovim/neovim/teams","hooks_url":"https://api.github.com/repos/neovim/neovim/hooks","issue_events_url":"https://api.github.com/repos/neovim/neovim/issues/events{/number}","events_url":"https://api.github.com/repos/neovim/neovim/events","assignees_url":"https://api.github.com/repos/neovim/neovim/assignees{/user}","branches_url":"https://api.github.com/repos/neovim/neovim/branches{/branch}","tags_url":"https://api.github.com/repos/neovim/neovim/tags","blobs_url":"https://api.github.com/repos/neovim/neovim/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/neovim/neovim/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/neovim/neovim/git/refs{/sha}","trees_url":"https://api.github.com/repos/neovim/neovim/git/trees{/sha}","statuses_url":"https://api.github.com/repos/neovim/neovim/statuses/{sha}","languages_url":"https://api.github.com/repos/neovim/neovim/languages","stargazers_url":"https://api.github.com/repos/neovim/neovim/stargazers","contributors_url":"https://api.github.com/repos/neovim/neovim/contributors","subscribers_url":"https://api.github.com/repos/neovim/neovim/subscribers","subscription_url":"https://api.github.com/repos/neovim/neovim/subscription","commits_url":"https://api.github.com/repos/neovim/neovim/commits{/sha}","git_commits_url":"https://api.github.com/repos/neovim/neovim/git/commits{/sha}","comments_url":"https://api.github.com/repos/neovim/neovim/comments{/number}","issue_comment_url":"https://api.github.com/repos/neovim/neovim/issues/comments{/number}","contents_url":"https://api.github.com/repos/neovim/neovim/contents/{+path}","compare_url":"https://api.github.com/repos/neovim/neovim/compare/{base}...{head}","merges_url":"https://api.github.com/repos/neovim/neovim/merges","archive_url":"https://api.github.com/repos/neovim/neovim/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/neovim/neovim/downloads","issues_url":"https://api.github.com/repos/neovim/neovim/issues{/number}","pulls_url":"https://api.github.com/repos/neovim/neovim/pulls{/number}","milestones_url":"https://api.github.com/repos/neovim/neovim/milestones{/number}","notifications_url":"https://api.github.com/repos/neovim/neovim/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/neovim/neovim/labels{/name}","releases_url":"https://api.github.com/repos/neovim/neovim/releases{/id}","deployments_url":"https://api.github.com/repos/neovim/neovim/deployments","created_at":"2014-01-31T13:39:22Z","updated_at":"2025-11-10T01:49:31Z","pushed_at":"2025-11-10T01:49:25Z","git_url":"git://github.com/neovim/neovim.git","ssh_url":"git@github.com:neovim/neovim.git","clone_url":"https://github.com/neovim/neovim.git","svn_url":"https://github.com/neovim/neovim","homepage":"https://neovim.io","size":350662,"stargazers_count":94128,"watchers_count":94128,"language":"Vim Script","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":6408,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2074,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["api","c","lua","neovim","nvim","text-editor","vim"],"visibility":"public","forks":6408,"open_issues":2074,"watchers":94128,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/neovim/neovim/pulls/33605","html_url":"https://github.com/neovim/neovim/pull/33605","diff_url":"https://github.com/neovim/neovim/pull/33605.diff","patch_url":"https://github.com/neovim/neovim/pull/33605.patch","merged_at":"2025-05-22T07:24:50Z"},"body":"This is the glob implementation mentioned in [Discussion #33570](https://github.com/neovim/neovim/discussions/33570). Its intended to replace `vim.glob.to_lpeg`, while still using LPeg internally.\r\n\r\nThe implementation aims to adhere closely to the LSP 3.17.0 specification, providing a stricter and more intuitive interpretation where the spec allows for it. This enhances consistency, correctness, and performance, without adversely affecting common usage patterns.\r\n\r\n## Key Behavior Interpretations and Clarifications (LSP 3.17):\r\n\r\nThe following points detail how this implementation interprets specific glob patterns, addressing previous test case discrepancies. These interpretations aim for greater predictability and robustness, remaining within or clarifying the scope of the LSP 3.17 spec:\r\n\r\n- [x] **`match('*', '')` results in `true`**\r\n    *   **LSP 3.17 Spec:** States `*` matches \"one or more characters in a path segment.\"\r\n    *   **Resolution & Clarification:** While the literal spec text says \"one or more,\" this has been identified as a discrepancy with common glob behavior and VS Code's own implementation. This implementation aligns with the clarified understanding (see [LSP PR #2132](https://github.com/microsoft/language-server-protocol/pull/2132)) that `*` matches **zero or more characters**. The test has been updated accordingly.\r\n\r\n- [x] **`match('a**', 'abc')` results in `false`**\r\n    *   **LSP 3.17 Spec:** States `**` matches \"any number of path segments, including none.\"\r\n    *   **Interpretation:** This implementation adopts a stricter interpretation focusing on `**`'s role in matching *complete path segments*. Patterns like `a**` (where `**` is not clearly delineating path segments, i.e., not separated by slashes and adjacent to other characters within the same potential segment) are considered an ill-formed use of `**` by this parser. While the spec allows `**` to match \"none\" (zero segments), this implementation prioritizes well-defined segment boundaries for `**` usage to maintain a clear distinction from `*` (in-segment wildcard) and avoid ambiguity.\r\n\r\n- [x] **`match('**/', '/a/b/c')` results in `false`**\r\n    *   **LSP 3.17 Spec:** Defines `**` to match \"any number of path segments, including none.\" It does not explicitly detail the interaction of a trailing `/` in the pattern with inputs not ending in `/`.\r\n    *   **Interpretation:** The pattern `**/` is interpreted to require the input to also end with a path separator for a match, as the pattern explicitly includes it. Since the input `/a/b/c` ends with a character (`c`), it does not match. This behavior aligns with a direct reading of the pattern and is consistent with @stevearc's comment: \"I agree that if we look purely at the spec, I would _not_ expect these to match.\"\r\n\r\n- [x] **`match('{}', '')` and `match('{a}', 'a')` are not treated as valid glob alternations**\r\n    *   **LSP 3.17 Spec:** States `{}` is \"to group conditions (e.g. `**/*.{ts,js}` matches all TypeScript and JavaScript files).\" The example provided uses a comma. The spec does not explicitly define behavior for `{}` or `{a}` (without commas) as alternation mechanisms.\r\n    *   **Interpretation:** For braces `{}` to signify alternation, this implementation requires them to contain **at least one comma** (e.g., `{a,b}`, `{,a}`). This aligns with common brace expansion definitions (e.g., Rosetta Code) and ensures the \"group conditions\" feature for alternation is unambiguous. Patterns like `{}` or `{a}` (without a comma) are not considered valid glob alternation syntax by this parser. (@stevearc acknowledged the spec doesn't enforce contents for `{}`, viewing it as an edge case). This stricter approach enhances predictability.\r\n\r\n- [x] **`match('{a,{b,c}}', 'c')` results in `true`**\r\n    *   **LSP 3.17 Spec:** States `{}` is \"to group conditions.\" It does not explicitly mention or prohibit nesting of these groups.\r\n    *   **Interpretation:** Nested braces are supported as a natural extension of \"grouping conditions.\" This is a common and intuitive behavior for brace expansion. As @stevearc commented, \"The spec doesn't explicitly mention nesting, but I agree with the interpretation that this pattern _should_ match.\" Supporting nesting enhances the utility of brace grouping.\r\n\r\n---\r\n\r\nThese interpretations aim to make glob patterns more robust and easier to reason about, while staying consistent with the LSP 3.17 specification's intent and addressing areas where it is underspecified or has known discrepancies. The tests previously commented out have been updated to reflect these behaviors.\r\n\r\nThis new implementation also demonstrates significant improvements in correctness and performance compared to the previous `vim.glob.to_lpeg`, as shown by extensive testing (see discussion for detailed test results).\r\n\r\nPS: The heatmaps for correctness of glob matching proves that Peglob is great at accuracy and precision against glob test suite from Bun.js. (fig 5 in paper)\r\n![img](https://github.com/user-attachments/assets/d0263d49-1378-49e1-ab33-b9d396dff24f)\r\n\r\nRelevant documentation, code formatting, and test adjustments have been made based on review feedback.","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/33605/reactions","total_count":5,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":5,"eyes":0},"timeline_url":"https://api.github.com/repos/neovim/neovim/issues/33605/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]