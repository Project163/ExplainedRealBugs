{"url":"https://api.github.com/repos/neovim/neovim/issues/34981","repository_url":"https://api.github.com/repos/neovim/neovim","labels_url":"https://api.github.com/repos/neovim/neovim/issues/34981/labels{/name}","comments_url":"https://api.github.com/repos/neovim/neovim/issues/34981/comments","events_url":"https://api.github.com/repos/neovim/neovim/issues/34981/events","html_url":"https://github.com/neovim/neovim/issues/34981","id":3241575673,"node_id":"I_kwDOAPphoM7BNoT5","number":34981,"title":"vim.system fails to execute built-in commands on Windows 11","user":{"login":"shakesbeare","id":75107188,"node_id":"MDQ6VXNlcjc1MTA3MTg4","avatar_url":"https://avatars.githubusercontent.com/u/75107188?v=4","gravatar_id":"","url":"https://api.github.com/users/shakesbeare","html_url":"https://github.com/shakesbeare","followers_url":"https://api.github.com/users/shakesbeare/followers","following_url":"https://api.github.com/users/shakesbeare/following{/other_user}","gists_url":"https://api.github.com/users/shakesbeare/gists{/gist_id}","starred_url":"https://api.github.com/users/shakesbeare/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shakesbeare/subscriptions","organizations_url":"https://api.github.com/users/shakesbeare/orgs","repos_url":"https://api.github.com/users/shakesbeare/repos","events_url":"https://api.github.com/users/shakesbeare/events{/privacy}","received_events_url":"https://api.github.com/users/shakesbeare/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":84744038,"node_id":"MDU6TGFiZWw4NDc0NDAzOA==","url":"https://api.github.com/repos/neovim/neovim/labels/documentation","name":"documentation","color":"c5def5","default":true,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2025-07-18T01:58:42Z","updated_at":"2025-07-29T02:23:08Z","closed_at":"2025-07-29T02:23:08Z","author_association":"NONE","type":{"id":597161,"node_id":"IT_kwDOAGK_Pc4ACRyp","name":"Task","description":"A specific piece of work","color":"yellow","created_at":"2024-01-25T10:10:19Z","updated_at":"2024-07-26T10:12:30Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Problem\n\nAttempting to run built in commands (or cmdlets in Powershell) results in an error, `ENOENT: no such file or directory (cmd): '<command>'`\n\nI can reproduce this error on my system using old powershell, powershell 7, and cmd.exe. \n\nI suspect that the issue is related to how `vim.fn.executable` checks if a command is executable. Per the help page, it looks for a file with the name of the command that has an executable file extension. However, for certain commands (like echo), this will not be present. \n\nA workaround is somewhat available. You can make very simple `.bat` files and place them in a place where `vim.fn.executable` looks which wrap the base command. However, if you are trying to run a more involved script, even simple parts of the Powershell language like `if` will fail without this workaround. You can use native vim methods, but the help docs specifically recommend you to use `vim.system`.\n\n### Steps to reproduce\n\n`nvim --clean`\n`:lua vim.system({'echo', 'hello'})`\n\n\n### Expected behavior\n\nCommand should execute successfully\n\n### Nvim version (nvim -v)\n\nNVIM v0.11.3\n\n### Vim (not Nvim) behaves the same?\n\nNative vim variants of the command do not have the issue\n\n### Operating system/version\n\nWindows 11\n\n### Terminal name/version\n\nalacritty 0.15.1\n\n### $TERM environment variable\n\nxterm-256color\n\n### Installation\n\nwinget","closed_by":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/34981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/neovim/neovim/issues/34981/timeline","performed_via_github_app":null,"state_reason":"completed"}