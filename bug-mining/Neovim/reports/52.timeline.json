[{"id":14701567194,"node_id":"LE_lADOAPphoM6arffyzwAAAANsSBza","url":"https://api.github.com/repos/neovim/neovim/issues/events/14701567194","actor":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-17T15:36:27Z","label":{"name":"bug","color":"f9d0c4"},"performed_via_github_app":null},{"id":14702132906,"node_id":"AE_lADOAPphoM6arffyzwAAAANsUL6q","url":"https://api.github.com/repos/neovim/neovim/issues/events/14702132906","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-10-17T16:16:33Z","assignee":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":14702135915,"node_id":"LE_lADOAPphoM6arffyzwAAAANsUMpr","url":"https://api.github.com/repos/neovim/neovim/issues/events/14702135915","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-17T16:16:47Z","label":{"name":"job-control","color":"c5def5"},"performed_via_github_app":null},{"id":14702135925,"node_id":"LE_lADOAPphoM6arffyzwAAAANsUMp1","url":"https://api.github.com/repos/neovim/neovim/issues/events/14702135925","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-17T16:16:47Z","label":{"name":"channels-rpc","color":"c7def8"},"performed_via_github_app":null},{"id":14702135933,"node_id":"LE_lADOAPphoM6arffyzwAAAANsUMp9","url":"https://api.github.com/repos/neovim/neovim/issues/events/14702135933","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-17T16:16:47Z","label":{"name":"system","color":"c5def5"},"performed_via_github_app":null},{"id":14702135946,"node_id":"LE_lADOAPphoM6arffyzwAAAANsUMqK","url":"https://api.github.com/repos/neovim/neovim/issues/events/14702135946","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-10-17T16:16:47Z","label":{"name":"async","color":"C5DEF5"},"performed_via_github_app":null},{"id":14702136515,"node_id":"MIE_lADOAPphoM6arffyzwAAAANsUMzD","url":"https://api.github.com/repos/neovim/neovim/issues/events/14702136515","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2024-10-17T16:16:50Z","milestone":{"title":"backlog"},"performed_via_github_app":null},{"id":14702142836,"node_id":"RTE_lADOAPphoM6arffyzwAAAANsUOV0","url":"https://api.github.com/repos/neovim/neovim/issues/events/14702142836","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-10-17T16:17:21Z","rename":{"from":"Unexpected issues when executing `vim.system` in parallel","to":"empty output when executing `vim.system` in parallel"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420052702","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2420052702","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2420052702,"node_id":"IC_kwDOAPphoM6QPxLe","user":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T16:59:13Z","updated_at":"2024-10-17T16:59:13Z","body":"Are you able to reproduce with `vim.uv.spawn()`?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420052702/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420124298","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2420124298","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2420124298,"node_id":"IC_kwDOAPphoM6QQCqK","user":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T17:38:35Z","updated_at":"2024-10-17T17:38:35Z","body":"Yes, with both `vim.uv.spawn()` and `vim.loop.spawn()`.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420124298/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420160756","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2420160756","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2420160756,"node_id":"IC_kwDOAPphoM6QQLj0","user":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T17:58:52Z","updated_at":"2024-10-17T17:59:26Z","body":"This sounds like a uv problem then.\n\nCan you update the repro steps?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420160756/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14703322725,"node_id":"RTE_lADOAPphoM6arffyzwAAAANsYuZl","url":"https://api.github.com/repos/neovim/neovim/issues/events/14703322725","actor":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-10-17T17:59:04Z","rename":{"from":"empty output when executing `vim.system` in parallel","to":"empty output when executing `vim.us.spawn` in parallel"},"performed_via_github_app":null},{"id":14703323999,"node_id":"RTE_lADOAPphoM6arffyzwAAAANsYutf","url":"https://api.github.com/repos/neovim/neovim/issues/events/14703323999","actor":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-10-17T17:59:10Z","rename":{"from":"empty output when executing `vim.us.spawn` in parallel","to":"empty output when executing `vim.uv.spawn` in parallel"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420343259","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2420343259","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2420343259,"node_id":"IC_kwDOAPphoM6QQ4Hb","user":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T19:16:18Z","updated_at":"2024-10-17T19:16:18Z","body":"Ok, so I said I can reproduce it with `uv.spawn` because I'm using `plenary.job` to run jobs, and with it I get the same wrong results.\nPlenary uses `loop.spawn`, and changing it to `uv.spawn` does not make any difference.\n\nAfter you asked to update the repro, I've tried implementing the above example with `uv.spawn`, but the result is now correct.\n\nSo, this example now produces correct result:\n```lua\nlocal nvim_repo = \"/home/vedran/source/neovim\"\n\nfunction UvSpawnTest()\n  local uv = vim.uv\n  local tries = 20\n  for i = 1, tries do\n    vim.defer_fn(function()\n      local file1 = \"\"\n      local file1_done = false\n      local file2 = \"\"\n      local file2_done = false\n\n      local stdout1 = uv.new_pipe()\n      uv.spawn(\"git\", {\n        stdio = { nil, stdout1, nil },\n        args = {\n          \"-C\", nvim_repo, \"cat-file\", \"-p\",\n          \"f0973d4227:runtime/lua/vim/lsp/util.lua\"\n        }\n      })\n      uv.read_start(stdout1, function(err, data)\n        assert(not err, err)\n        if data then\n          file1 = file1 .. data\n        else\n          file1_done = true\n          if file2_done then\n            print(\"file1\", #file1)\n            print(\"file2\", #file2)\n          end\n        end\n      end)\n\n      local stdout2 = uv.new_pipe()\n      uv.spawn(\"git\",\n        {\n          stdio = { nil, stdout2, nil },\n          args =\n          { \"-C\", nvim_repo, \"cat-file\", \"-p\",\n            \"5bec7288a5b56f1ac38673e59e32f6be774558f3:runtime/lua/vim/lsp/util.lua\"\n          },\n        }\n      )\n      uv.read_start(stdout2, function(err, data)\n        assert(not err, err)\n        if data then\n          file2 = file2 .. data\n        else\n          file2_done = true\n          if file1_done then\n            print(\"file1\", #file1)\n            print(\"file2\", #file2)\n          end\n        end\n      end)\n    end, 20)\n  end\nend\nUvSpawnTest()\n```\n\nAnd this example using plenary still produces bad result:\n```lua\nlocal nvim_repo = \"/home/vedran/source/neovim\"\nfunction PlenaryTest()\n  for name, url in pairs {\n    'https://github.com/nvim-lua/plenary.nvim'\n  } do\n    local install_path = vim.fn.fnamemodify('nvim_issue/' .. name, ':p')\n    if vim.fn.isdirectory(install_path) == 0 then\n      vim.fn.system { 'git', 'clone', '--depth=1', url, install_path }\n    end\n    vim.opt.runtimepath:append(install_path)\n  end\n\n  local Job = require(\"plenary.job\")\n  local tries = 20\n  for i = 1, tries do\n    vim.defer_fn(function()\n      local file1 = nil\n      local file2 = nil\n      Job:new({\n        command = \"git\",\n        args = {\n          \"-C\", nvim_repo, \"cat-file\", \"-p\",\n          \"b7e896671500a6e9a0c773bc6bac2d073e588eba:src/nvim/tui/tui.c\"\n        },\n        on_exit = function(j, c)\n          assert(c == 0)\n          file1 = j:result()\n          if file2 then\n            print(\"file1\", #file1)\n            print(\"file2\", #file2)\n          end\n        end,\n      }):start()\n      Job:new({\n        command = \"git\",\n        args = { \"-C\", nvim_repo, \"cat-file\", \"-p\", \"4846bf05dc:src/nvim/tui/tui.c\" },\n        on_exit = function(j, c)\n          assert(c == 0)\n          file2 = j:result()\n          if file1 then\n            print(\"file1\", #file1)\n            print(\"file2\", #file2)\n          end\n        end,\n      }):start()\n    end, 20)\n  end\nend\nPlenaryTest()\n```\n\nI'm pretty confused as to whats going on here.\nI'll try to figure out the difference between `plenary.job` and my `uv.spawn` example.\n\nI'm not sure do you want me to update the repro steps with plenary example, or keep it as is for now.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420343259/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420353583","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2420353583","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2420353583,"node_id":"IC_kwDOAPphoM6QQ6ov","user":{"login":"clason","id":2361214,"node_id":"MDQ6VXNlcjIzNjEyMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2361214?v=4","gravatar_id":"","url":"https://api.github.com/users/clason","html_url":"https://github.com/clason","followers_url":"https://api.github.com/users/clason/followers","following_url":"https://api.github.com/users/clason/following{/other_user}","gists_url":"https://api.github.com/users/clason/gists{/gist_id}","starred_url":"https://api.github.com/users/clason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clason/subscriptions","organizations_url":"https://api.github.com/users/clason/orgs","repos_url":"https://api.github.com/users/clason/repos","events_url":"https://api.github.com/users/clason/events{/privacy}","received_events_url":"https://api.github.com/users/clason/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-10-17T19:22:19Z","updated_at":"2024-10-17T19:22:19Z","body":"Vim.uv and vim.loop are literally the same thing (just different names for backwards compatibility), namely the main libuv event loop. \n\nAnd for the love of all things holy, please let's keep plenary out of this. If it's a Neovim issue, it needs to be reproducible with standard library functions only (otherwise please report at plenary).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2420353583/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"clason","id":2361214,"node_id":"MDQ6VXNlcjIzNjEyMTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2361214?v=4","gravatar_id":"","url":"https://api.github.com/users/clason","html_url":"https://github.com/clason","followers_url":"https://api.github.com/users/clason/followers","following_url":"https://api.github.com/users/clason/following{/other_user}","gists_url":"https://api.github.com/users/clason/gists{/gist_id}","starred_url":"https://api.github.com/users/clason/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clason/subscriptions","organizations_url":"https://api.github.com/users/clason/orgs","repos_url":"https://api.github.com/users/clason/repos","events_url":"https://api.github.com/users/clason/events{/privacy}","received_events_url":"https://api.github.com/users/clason/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14706316035,"node_id":"UNE_lADOAPphoM6arffyzwAAAANskJMD","url":"https://api.github.com/repos/neovim/neovim/issues/events/14706316035","actor":{"login":"zeertzjq","id":35768171,"node_id":"MDQ6VXNlcjM1NzY4MTcx","avatar_url":"https://avatars.githubusercontent.com/u/35768171?v=4","gravatar_id":"","url":"https://api.github.com/users/zeertzjq","html_url":"https://github.com/zeertzjq","followers_url":"https://api.github.com/users/zeertzjq/followers","following_url":"https://api.github.com/users/zeertzjq/following{/other_user}","gists_url":"https://api.github.com/users/zeertzjq/gists{/gist_id}","starred_url":"https://api.github.com/users/zeertzjq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zeertzjq/subscriptions","organizations_url":"https://api.github.com/users/zeertzjq/orgs","repos_url":"https://api.github.com/users/zeertzjq/repos","events_url":"https://api.github.com/users/zeertzjq/events{/privacy}","received_events_url":"https://api.github.com/users/zeertzjq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2024-10-17T22:13:43Z","assignee":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":14739040222,"node_id":"SE_lADOAPphoM6arffyzwAAAANug-fe","url":"https://api.github.com/repos/neovim/neovim/issues/events/14739040222","actor":{"login":"chenxiaolong","id":646253,"node_id":"MDQ6VXNlcjY0NjI1Mw==","avatar_url":"https://avatars.githubusercontent.com/u/646253?v=4","gravatar_id":"","url":"https://api.github.com/users/chenxiaolong","html_url":"https://github.com/chenxiaolong","followers_url":"https://api.github.com/users/chenxiaolong/followers","following_url":"https://api.github.com/users/chenxiaolong/following{/other_user}","gists_url":"https://api.github.com/users/chenxiaolong/gists{/gist_id}","starred_url":"https://api.github.com/users/chenxiaolong/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chenxiaolong/subscriptions","organizations_url":"https://api.github.com/users/chenxiaolong/orgs","repos_url":"https://api.github.com/users/chenxiaolong/repos","events_url":"https://api.github.com/users/chenxiaolong/events{/privacy}","received_events_url":"https://api.github.com/users/chenxiaolong/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-10-19T19:41:42Z","performed_via_github_app":null},{"id":15077514827,"node_id":"LE_lADOAPphoM6arffyzwAAAAOCsJ5L","url":"https://api.github.com/repos/neovim/neovim/issues/events/15077514827","actor":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-02T08:23:56Z","label":{"name":"needs:response","color":"FBCA04"},"performed_via_github_app":null},{"id":15077514830,"node_id":"LE_lADOAPphoM6arffyzwAAAAOCsJ5O","url":"https://api.github.com/repos/neovim/neovim/issues/events/15077514830","actor":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-11-02T08:23:56Z","label":{"name":"needs:repro","color":"FBCA04"},"performed_via_github_app":null},{"id":15077522324,"node_id":"UNLE_lADOAPphoM6arffyzwAAAAOCsLuU","url":"https://api.github.com/repos/neovim/neovim/issues/events/15077522324","actor":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-11-02T08:24:13Z","label":{"name":"needs:repro","color":"FBCA04"},"performed_via_github_app":null},{"actor":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-11-10T22:32:36Z","updated_at":"2024-11-10T22:32:36Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/1134","repository_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim","labels_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/1134/labels{/name}","comments_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/1134/comments","events_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/1134/events","html_url":"https://github.com/lewis6991/gitsigns.nvim/issues/1134","id":2590850823,"node_id":"I_kwDOEi8Moc6abT8H","number":1134,"title":"table index is nil","user":{"login":"emmanueltouzery","id":339433,"node_id":"MDQ6VXNlcjMzOTQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/339433?v=4","gravatar_id":"","url":"https://api.github.com/users/emmanueltouzery","html_url":"https://github.com/emmanueltouzery","followers_url":"https://api.github.com/users/emmanueltouzery/followers","following_url":"https://api.github.com/users/emmanueltouzery/following{/other_user}","gists_url":"https://api.github.com/users/emmanueltouzery/gists{/gist_id}","starred_url":"https://api.github.com/users/emmanueltouzery/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emmanueltouzery/subscriptions","organizations_url":"https://api.github.com/users/emmanueltouzery/orgs","repos_url":"https://api.github.com/users/emmanueltouzery/repos","events_url":"https://api.github.com/users/emmanueltouzery/events{/privacy}","received_events_url":"https://api.github.com/users/emmanueltouzery/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2435070671,"node_id":"MDU6TGFiZWwyNDM1MDcwNjcx","url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2024-10-16T06:57:48Z","updated_at":"2025-01-07T11:51:57Z","closed_at":"2025-01-07T11:51:57Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":305073313,"node_id":"MDEwOlJlcG9zaXRvcnkzMDUwNzMzMTM=","name":"gitsigns.nvim","full_name":"lewis6991/gitsigns.nvim","private":false,"owner":{"login":"lewis6991","id":7904185,"node_id":"MDQ6VXNlcjc5MDQxODU=","avatar_url":"https://avatars.githubusercontent.com/u/7904185?v=4","gravatar_id":"","url":"https://api.github.com/users/lewis6991","html_url":"https://github.com/lewis6991","followers_url":"https://api.github.com/users/lewis6991/followers","following_url":"https://api.github.com/users/lewis6991/following{/other_user}","gists_url":"https://api.github.com/users/lewis6991/gists{/gist_id}","starred_url":"https://api.github.com/users/lewis6991/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lewis6991/subscriptions","organizations_url":"https://api.github.com/users/lewis6991/orgs","repos_url":"https://api.github.com/users/lewis6991/repos","events_url":"https://api.github.com/users/lewis6991/events{/privacy}","received_events_url":"https://api.github.com/users/lewis6991/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/lewis6991/gitsigns.nvim","description":"Git integration for buffers","fork":false,"url":"https://api.github.com/repos/lewis6991/gitsigns.nvim","forks_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/forks","keys_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/teams","hooks_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/hooks","issue_events_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/events{/number}","events_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/events","assignees_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/assignees{/user}","branches_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/branches{/branch}","tags_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/tags","blobs_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/git/refs{/sha}","trees_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/statuses/{sha}","languages_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/languages","stargazers_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/stargazers","contributors_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/contributors","subscribers_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/subscribers","subscription_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/subscription","commits_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/commits{/sha}","git_commits_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/git/commits{/sha}","comments_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/comments{/number}","issue_comment_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/comments{/number}","contents_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/contents/{+path}","compare_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/merges","archive_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/downloads","issues_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues{/number}","pulls_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/pulls{/number}","milestones_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/milestones{/number}","notifications_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/labels{/name}","releases_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/releases{/id}","deployments_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/deployments","created_at":"2020-10-18T10:14:43Z","updated_at":"2025-11-09T14:21:28Z","pushed_at":"2025-10-19T15:42:23Z","git_url":"git://github.com/lewis6991/gitsigns.nvim.git","ssh_url":"git@github.com:lewis6991/gitsigns.nvim.git","clone_url":"https://github.com/lewis6991/gitsigns.nvim.git","svn_url":"https://github.com/lewis6991/gitsigns.nvim","homepage":"","size":2421,"stargazers_count":6322,"watchers_count":6322,"language":"Lua","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":244,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":45,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["git","lua","neovim","neovim-lua-plugin","neovim-plugin","nvim"],"visibility":"public","forks":244,"open_issues":45,"watchers":6322,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Description\r\n\r\nunfortunately i have no reproduction for the issue, nor am i sure what's going on. i have a script that's opening multiple files, which may be opening them fast. Maybe that's related to that.\r\nI am using the latest commit of gitsigns, 863903631e676b33e8be2acb17512fdc1b80b4fb.\r\n\r\nUnfortunately I don't have much more info than the stack. If that's not enough, i guess just close the issue.. I've been using this version for a while and I don't recall seeing this, so i think it must be a rare issue.\r\n\r\nIf you close the issue and I manage to get more information, I'll reopen it with the extra info...\r\n\r\n### Neovim version\r\n\r\n NVIM v0.10.1 Build type: Release LuaJIT 2.1.1713484068\r\n\r\n### Operating system and version\r\n\r\nlinux fedora 40\r\n\r\n### Expected behavior\r\n\r\n_No response_\r\n\r\n### Actual behavior\r\n\r\nError executing luv callback:\r\n```\r\n...e/pack/packer/start/gitsigns.nvim/lua/gitsigns/async.lua:95: The async coroutine failed: ...ack/packer/start/gitsigns.nvim/lua/gitsigns/git/repo.lua:145: table index is nil\r\nstack traceback:\r\n\t...ack/packer/start/gitsigns.nvim/lua/gitsigns/git/repo.lua: in function 'get'\r\n\t...ite/pack/packer/start/gitsigns.nvim/lua/gitsigns/git.lua:407: in function 'new'\r\n\t.../pack/packer/start/gitsigns.nvim/lua/gitsigns/attach.lua:280: in function 'fn'\r\n\t...ack/packer/start/gitsigns.nvim/lua/gitsigns/debounce.lua:68: in function 'attach_throttled'\r\n\t.../pack/packer/start/gitsigns.nvim/lua/gitsigns/attach.lua:431: in function <.../pack/packer/start/gitsigns.nvim/lua/gitsigns/attach.lua:430>\r\nstack traceback:\r\n\t[C]: in function 'error'\r\n\t...e/pack/packer/start/gitsigns.nvim/lua/gitsigns/async.lua:95: in function 'cb'\r\n\t...e/pack/packer/start/gitsigns.nvim/lua/gitsigns/async.lua:145: in function 'on_exit'\r\n\t...loads/nvim-0.10.1/share/nvim/runtime/lua/vim/_system.lua:300: in function <...loads/nvim-0.10.1/share/nvim/runtime/lua/vim/_system.lua:270>\r\n\t[C]: in function 'nvim_cmd'\r\n\t...el/Downloads/nvim-0.10.1/share/nvim/runtime/filetype.lua:36: in function <...el/Downloads/nvim-0.10.1/share/nvim/runtime/filetype.lua:35>\r\n\t[C]: in function 'nvim_buf_call'\r\n\t...el/Downloads/nvim-0.10.1/share/nvim/runtime/filetype.lua:35: in function <...el/Downloads/nvim-0.10.1/share/nvim/runtime/filetype.lua:10>\r\n\t[C]: in function 'bufload'\r\n\t...er/start/nvim_config_private/lua/nvim_config_private.lua:181: in function 'find_import_types_calls_buf'\r\n\t...er/start/nvim_config_private/lua/nvim_config_private.lua:185: in function 'find_import_types_calls_buf'\r\n\t...er/start/nvim_config_private/lua/nvim_config_private.lua:95: in function 'elixir_absinthe_find_def'\r\n\t[string \":lua\"]:1: in main chunk\r\n```\r\n\r\n### Minimal config\r\n\r\n```Lua\r\nfor name, url in pairs{\r\n  gitsigns = 'https://github.com/lewis6991/gitsigns.nvim',\r\n  -- ADD OTHER PLUGINS _NECESSARY_ TO REPRODUCE THE ISSUE\r\n} do\r\nlocal install_path = vim.fn.fnamemodify('gitsigns_issue/'..name, ':p')\r\nif vim.fn.isdirectory(install_path) == 0 then\r\nvim.fn.system { 'git', 'clone', '--depth=1', url, install_path }\r\nend\r\nvim.opt.runtimepath:append(install_path)\r\nend\r\n\r\nrequire('gitsigns').setup{\r\n  debug_mode = true, -- You must add this to enable debug messages\r\n  -- ADD GITSIGNS CONFIG THAT IS _NECESSARY_ FOR REPRODUCING THE ISSUE\r\n}\r\n\r\n-- ADD INIT.LUA SETTINGS THAT IS _NECESSARY_ FOR REPRODUCING THE ISSUE\r\n```\r\n\r\n\r\n### Steps to reproduce\r\n\r\n1. `mkdir gitsigns_issue`\r\n2. `cd gitsigns_issue`\r\n3. `git init`\r\n4. `touch file`\r\n5. `git add file`\r\n6. `git commit -m 'initial commit'`\r\n7. `nvim --clean -u minimal.lua file`\r\n8. ...\r\n\r\n\r\n### Gitsigns debug messages\r\n\r\n_No response_\r\n\r\n### Gitsigns cache\r\n\r\n_No response_","reactions":{"url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/1134/reactions","total_count":5,"+1":5,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/lewis6991/gitsigns.nvim/issues/1134/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":15244160400,"node_id":"SE_lADOAPphoM6arffyzwAAAAOMn22Q","url":"https://api.github.com/repos/neovim/neovim/issues/events/15244160400","actor":{"login":"emmanueltouzery","id":339433,"node_id":"MDQ6VXNlcjMzOTQzMw==","avatar_url":"https://avatars.githubusercontent.com/u/339433?v=4","gravatar_id":"","url":"https://api.github.com/users/emmanueltouzery","html_url":"https://github.com/emmanueltouzery","followers_url":"https://api.github.com/users/emmanueltouzery/followers","following_url":"https://api.github.com/users/emmanueltouzery/following{/other_user}","gists_url":"https://api.github.com/users/emmanueltouzery/gists{/gist_id}","starred_url":"https://api.github.com/users/emmanueltouzery/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emmanueltouzery/subscriptions","organizations_url":"https://api.github.com/users/emmanueltouzery/orgs","repos_url":"https://api.github.com/users/emmanueltouzery/repos","events_url":"https://api.github.com/users/emmanueltouzery/events{/privacy}","received_events_url":"https://api.github.com/users/emmanueltouzery/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-11-11T05:07:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2513384176","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2513384176","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2513384176,"node_id":"IC_kwDOAPphoM6VzzLw","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2024-12-03T02:08:24Z","updated_at":"2024-12-03T02:08:24Z","body":"This has been closed since a request for information has not been answered for 30 days. It can be reopened when the requested information is provided.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2513384176/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":{"id":15368,"client_id":"Iv1.05c79e9ad1f6bdfa","slug":"github-actions","node_id":"MDM6QXBwMTUzNjg=","owner":{"login":"github","id":9919,"node_id":"MDEyOk9yZ2FuaXphdGlvbjk5MTk=","avatar_url":"https://avatars.githubusercontent.com/u/9919?v=4","gravatar_id":"","url":"https://api.github.com/users/github","html_url":"https://github.com/github","followers_url":"https://api.github.com/users/github/followers","following_url":"https://api.github.com/users/github/following{/other_user}","gists_url":"https://api.github.com/users/github/gists{/gist_id}","starred_url":"https://api.github.com/users/github/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github/subscriptions","organizations_url":"https://api.github.com/users/github/orgs","repos_url":"https://api.github.com/users/github/repos","events_url":"https://api.github.com/users/github/events{/privacy}","received_events_url":"https://api.github.com/users/github/received_events","type":"Organization","user_view_type":"public","site_admin":false},"name":"GitHub Actions","description":"Automate your workflow from idea to production","external_url":"https://help.github.com/en/actions","html_url":"https://github.com/apps/github-actions","created_at":"2018-07-30T09:30:17Z","updated_at":"2025-03-07T16:35:00Z","permissions":{"actions":"write","administration":"read","attestations":"write","checks":"write","contents":"write","deployments":"write","discussions":"write","issues":"write","merge_queues":"write","metadata":"read","models":"read","packages":"write","pages":"write","pull_requests":"write","repository_hooks":"write","repository_projects":"write","security_events":"write","statuses":"write","vulnerability_alerts":"read"},"events":["branch_protection_rule","check_run","check_suite","create","delete","deployment","deployment_status","discussion","discussion_comment","fork","gollum","issues","issue_comment","label","merge_group","milestone","page_build","project","project_card","project_column","public","pull_request","pull_request_review","pull_request_review_comment","push","registry_package","release","repository","repository_dispatch","status","watch","workflow_dispatch","workflow_run"]},"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":15502069251,"node_id":"CE_lADOAPphoM6arffyzwAAAAOb_s4D","url":"https://api.github.com/repos/neovim/neovim/issues/events/15502069251","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-12-03T02:08:24Z","state_reason":"not_planned","performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2514142663","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2514142663","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2514142663,"node_id":"IC_kwDOAPphoM6V2sXH","user":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-03T10:25:01Z","updated_at":"2024-12-03T10:25:01Z","body":"I just want to reiterate for posterity:\n- `vim.system` is broken\n- There is a reproduction in my original post\n- Please ignore rest of my comments","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2514142663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15507193984,"node_id":"RTE_lADOAPphoM6arffyzwAAAAOcTQCA","url":"https://api.github.com/repos/neovim/neovim/issues/events/15507193984","actor":{"login":"vdrn","id":36032062,"node_id":"MDQ6VXNlcjM2MDMyMDYy","avatar_url":"https://avatars.githubusercontent.com/u/36032062?v=4","gravatar_id":"","url":"https://api.github.com/users/vdrn","html_url":"https://github.com/vdrn","followers_url":"https://api.github.com/users/vdrn/followers","following_url":"https://api.github.com/users/vdrn/following{/other_user}","gists_url":"https://api.github.com/users/vdrn/gists{/gist_id}","starred_url":"https://api.github.com/users/vdrn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vdrn/subscriptions","organizations_url":"https://api.github.com/users/vdrn/orgs","repos_url":"https://api.github.com/users/vdrn/repos","events_url":"https://api.github.com/users/vdrn/events{/privacy}","received_events_url":"https://api.github.com/users/vdrn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-12-03T10:25:11Z","rename":{"from":"empty output when executing `vim.uv.spawn` in parallel","to":"empty output when executing `vim.system` in parallel"},"performed_via_github_app":null},{"id":15507195654,"node_id":"UNLE_lADOAPphoM6arffyzwAAAAOcTQcG","url":"https://api.github.com/repos/neovim/neovim/issues/events/15507195654","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2024-12-03T10:25:18Z","label":{"name":"needs:response","color":"FBCA04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2514240466","html_url":"https://github.com/neovim/neovim/issues/30846#issuecomment-2514240466","issue_url":"https://api.github.com/repos/neovim/neovim/issues/30846","id":2514240466,"node_id":"IC_kwDOAPphoM6V3EPS","user":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-12-03T11:07:42Z","updated_at":"2024-12-03T11:07:42Z","body":"Instead of using `print()` in the callbacks to verify the output, can you try collecting all output in a variable. This will avoid any questions about redraw behavior.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/neovim/neovim/issues/comments/2514240466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15507809599,"node_id":"REE_lADOAPphoM6arffyzwAAAAOcVmU_","url":"https://api.github.com/repos/neovim/neovim/issues/events/15507809599","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2024-12-03T11:07:42Z","state_reason":"reopened","performed_via_github_app":null},{"id":15507813802,"node_id":"LE_lADOAPphoM6arffyzwAAAAOcVnWq","url":"https://api.github.com/repos/neovim/neovim/issues/events/15507813802","actor":{"login":"justinmk","id":1359421,"node_id":"MDQ6VXNlcjEzNTk0MjE=","avatar_url":"https://avatars.githubusercontent.com/u/1359421?v=4","gravatar_id":"","url":"https://api.github.com/users/justinmk","html_url":"https://github.com/justinmk","followers_url":"https://api.github.com/users/justinmk/followers","following_url":"https://api.github.com/users/justinmk/following{/other_user}","gists_url":"https://api.github.com/users/justinmk/gists{/gist_id}","starred_url":"https://api.github.com/users/justinmk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinmk/subscriptions","organizations_url":"https://api.github.com/users/justinmk/orgs","repos_url":"https://api.github.com/users/justinmk/repos","events_url":"https://api.github.com/users/justinmk/events{/privacy}","received_events_url":"https://api.github.com/users/justinmk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-12-03T11:08:02Z","label":{"name":"needs:response","color":"FBCA04"},"performed_via_github_app":null}]