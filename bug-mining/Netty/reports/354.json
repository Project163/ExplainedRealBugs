{"url":"https://api.github.com/repos/netty/netty/issues/15460","repository_url":"https://api.github.com/repos/netty/netty","labels_url":"https://api.github.com/repos/netty/netty/issues/15460/labels{/name}","comments_url":"https://api.github.com/repos/netty/netty/issues/15460/comments","events_url":"https://api.github.com/repos/netty/netty/issues/15460/events","html_url":"https://github.com/netty/netty/issues/15460","id":3217236523,"node_id":"I_kwDOABA-c86_wyIr","number":15460,"title":"Add support for private authentication methods (0x80-0xFE) in SOCKS5 protocol implementation","user":{"login":"sunil-solace","id":102377028,"node_id":"U_kgDOBhomRA","avatar_url":"https://avatars.githubusercontent.com/u/102377028?v=4","gravatar_id":"","url":"https://api.github.com/users/sunil-solace","html_url":"https://github.com/sunil-solace","followers_url":"https://api.github.com/users/sunil-solace/followers","following_url":"https://api.github.com/users/sunil-solace/following{/other_user}","gists_url":"https://api.github.com/users/sunil-solace/gists{/gist_id}","starred_url":"https://api.github.com/users/sunil-solace/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sunil-solace/subscriptions","organizations_url":"https://api.github.com/users/sunil-solace/orgs","repos_url":"https://api.github.com/users/sunil-solace/repos","events_url":"https://api.github.com/users/sunil-solace/events{/privacy}","received_events_url":"https://api.github.com/users/sunil-solace/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2025-07-09T21:45:47Z","updated_at":"2025-08-13T05:45:18Z","closed_at":"2025-08-13T05:45:18Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Problem Statement\nThe current Netty SOCKS5 implementation (Socks5AuthMethod.java) only supports standard authentication methods (NO_AUTH, AUTH_GSSAPI, AUTH_PASSWORD) but lacks support for private authentication methods in the range 0x80-0xFE as defined in RFC 1928. This limitation prevents integration with enterprise systems like SAP Cloud Connector that implement custom authentication mechanisms using the private authentication method range.\n\n### Background\nAccording to [RFC 1928](https://www.ietf.org/rfc/rfc1928.txt), SOCKS5 protocol reserves the byte range 0x80-0xFE for private authentication methods:\no X'80' to X'FE' RESERVED FOR PRIVATE METHODS\nThese private methods allow organizations to implement custom authentication mechanisms beyond the standard ones. The RFC states that \"the client and server then enter a method-specific sub-negotiation\" after method selection, allowing for flexible authentication implementations.\n### Current Implementation\nCurrently, Netty's Socks5AuthMethod.java only defines:\n```\npublic class Socks5AuthMethod implements Comparable<Socks5AuthMethod> {\n\n    public static final Socks5AuthMethod NO_AUTH = new Socks5AuthMethod(0x00, \"NO_AUTH\");\n    public static final Socks5AuthMethod GSSAPI = new Socks5AuthMethod(0x01, \"GSSAPI\");\n    public static final Socks5AuthMethod PASSWORD = new Socks5AuthMethod(0x02, \"PASSWORD\");\n\n    /**\n     * Indicates that the server does not accept any authentication methods the client proposed.\n     */\n    public static final Socks5AuthMethod UNACCEPTED = new Socks5AuthMethod(0xff, \"UNACCEPTED\");\n\n    \n    // Implementation details...\n}\n```\nAny authentication method not explicitly defined returns as UNACCEPTED, preventing proper negotiation of private authentication methods.\n\n### Use Case: SAP Cloud Connector\nSAP Cloud Connector uses SOCKS5 proxy for TCP connectivity in cloud applications. When connecting from SAP Business Technology Platform (BTP) to on-premise systems, applications must authenticate through the connectivity proxy using a SOCKS5 connection.\nSAP implements a private authentication method for their SOCKS5 proxy that requires specific authentication data. Without support for private authentication methods in Netty, Java applications running on SAP BTP cannot properly establish connections to on-premise systems through the SAP connectivity proxy when using Netty as their networking framework.\nThis affects numerous enterprise applications that:\n1. Run on SAP BTP Cloud Foundry environment\n2. Use Netty for networking\n3. Need to connect to on-premise systems through SAP Cloud Connector\n\n### Proposed Solution\nEnhance the SOCKS5 implementation in Netty to support private authentication methods by:\n1. Extending Socks5AuthMethod.java to allow registration of custom authentication handlers for methods in the 0x80-0xFE range\n2. Implementing a flexible authentication negotiation mechanism that can handle custom sub-negotiation protocols\n3. Providing an extension point for developers to plug in their own authentication method implementations\n\n### Technical Details\nThe implementation should:\n1. Allow dynamic registration of authentication handlers for specific method bytes\n2. Support the full authentication negotiation flow as specified in RFC 1928\n3. Maintain backward compatibility with existing code\n4. Include appropriate unit tests for the new functionality\n\n### Benefits\nThis enhancement would:\n1. Improve Netty's compliance with RFC 1928\n2. Enable integration with enterprise systems like SAP Cloud Connector\n3. Provide flexibility for custom authentication mechanisms\n4. Benefit the broader Netty community by supporting more use cases\n\n### References\n- [RFC 1928 - SOCKS Protocol Version 5](https://www.ietf.org/rfc/rfc1928.txt)\n- [SAP Cloud Connector Documentation](https://help.sap.com/docs/connectivity/sap-btp-connectivity-cf/cloud-connector)\n\nI'm willing to contribute to this implementation","closed_by":{"login":"normanmaurer","id":439362,"node_id":"MDQ6VXNlcjQzOTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/439362?v=4","gravatar_id":"","url":"https://api.github.com/users/normanmaurer","html_url":"https://github.com/normanmaurer","followers_url":"https://api.github.com/users/normanmaurer/followers","following_url":"https://api.github.com/users/normanmaurer/following{/other_user}","gists_url":"https://api.github.com/users/normanmaurer/gists{/gist_id}","starred_url":"https://api.github.com/users/normanmaurer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/normanmaurer/subscriptions","organizations_url":"https://api.github.com/users/normanmaurer/orgs","repos_url":"https://api.github.com/users/normanmaurer/repos","events_url":"https://api.github.com/users/normanmaurer/events{/privacy}","received_events_url":"https://api.github.com/users/normanmaurer/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/netty/netty/issues/15460/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/netty/netty/issues/15460/timeline","performed_via_github_app":null,"state_reason":"completed"}