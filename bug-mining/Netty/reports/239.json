{"url":"https://api.github.com/repos/netty/netty/issues/12411","repository_url":"https://api.github.com/repos/netty/netty","labels_url":"https://api.github.com/repos/netty/netty/issues/12411/labels{/name}","comments_url":"https://api.github.com/repos/netty/netty/issues/12411/comments","events_url":"https://api.github.com/repos/netty/netty/issues/12411/events","html_url":"https://github.com/netty/netty/issues/12411","id":1240512987,"node_id":"I_kwDOABA-c85J8Lnb","number":12411,"title":"BlockHound detects blocking call with webflux webclient for simple http calling","user":{"login":"ilyasdotdev","id":17808348,"node_id":"MDQ6VXNlcjE3ODA4MzQ4","avatar_url":"https://avatars.githubusercontent.com/u/17808348?v=4","gravatar_id":"","url":"https://api.github.com/users/ilyasdotdev","html_url":"https://github.com/ilyasdotdev","followers_url":"https://api.github.com/users/ilyasdotdev/followers","following_url":"https://api.github.com/users/ilyasdotdev/following{/other_user}","gists_url":"https://api.github.com/users/ilyasdotdev/gists{/gist_id}","starred_url":"https://api.github.com/users/ilyasdotdev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ilyasdotdev/subscriptions","organizations_url":"https://api.github.com/users/ilyasdotdev/orgs","repos_url":"https://api.github.com/users/ilyasdotdev/repos","events_url":"https://api.github.com/users/ilyasdotdev/events{/privacy}","received_events_url":"https://api.github.com/users/ilyasdotdev/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/netty/netty/milestones/255","html_url":"https://github.com/netty/netty/milestone/255","labels_url":"https://api.github.com/repos/netty/netty/milestones/255/labels","id":7950113,"node_id":"MI_kwDOABA-c84AeU8h","number":255,"title":"4.1.78.Final","description":"","creator":{"login":"normanmaurer","id":439362,"node_id":"MDQ6VXNlcjQzOTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/439362?v=4","gravatar_id":"","url":"https://api.github.com/users/normanmaurer","html_url":"https://github.com/normanmaurer","followers_url":"https://api.github.com/users/normanmaurer/followers","following_url":"https://api.github.com/users/normanmaurer/following{/other_user}","gists_url":"https://api.github.com/users/normanmaurer/gists{/gist_id}","starred_url":"https://api.github.com/users/normanmaurer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/normanmaurer/subscriptions","organizations_url":"https://api.github.com/users/normanmaurer/orgs","repos_url":"https://api.github.com/users/normanmaurer/repos","events_url":"https://api.github.com/users/normanmaurer/events{/privacy}","received_events_url":"https://api.github.com/users/normanmaurer/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":25,"state":"closed","created_at":"2022-05-06T10:52:51Z","updated_at":"2022-06-16T00:54:59Z","due_on":null,"closed_at":"2022-06-16T00:54:59Z"},"comments":7,"created_at":"2022-05-18T20:52:43Z","updated_at":"2022-05-19T06:55:26Z","closed_at":"2022-05-19T06:53:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I am on spring boot 2.6.7\r\n\r\nCalling\r\n```\r\nwebClient\r\n                .get()\r\n                .uri(\"/me\", queryString)\r\n                .exchangeToMono(clientResponse -> {\r\n                    if (clientResponse.statusCode().equals(HttpStatus.OK)) {\r\n                        return clientResponse.bodyToMono(FacebookAuthResponse.class);\r\n                    }\r\n                    return Mono.empty();\r\n                })\r\n                .filter(facebookAuthResponse ->\r\n                        StringUtils.hasLength(facebookAuthResponse.getId())\r\n                                && StringUtils.hasLength(facebookAuthResponse.getName())\r\n                                && StringUtils.hasLength(facebookAuthResponse.getEmail())\r\n                )\r\n                .switchIfEmpty(Mono.error(new Exception()))\r\n                .onErrorResume((ex) -> {ex.printStackTrace(); return Mono.empty();})\r\n                ;\r\n```\r\n\r\n```\r\nCaused by: reactor.blockhound.BlockingOperationError: Blocking call! java.io.FileInputStream#readBytes\r\n\tat java.base/java.io.FileInputStream.readBytes(FileInputStream.java)\r\n\tat java.base/java.io.FileInputStream.read(FileInputStream.java:276)\r\n\tat java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:270)\r\n\tat java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:313)\r\n\tat java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:188)\r\n\tat java.base/java.io.InputStreamReader.read(InputStreamReader.java:177)\r\n\tat java.base/java.io.BufferedReader.fill(BufferedReader.java:162)\r\n\tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:329)\r\n\tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:396)\r\n\tat io.netty.util.NetUtil$SoMaxConnAction.run(NetUtil.java:171)\r\n\tat io.netty.util.NetUtil$SoMaxConnAction.run(NetUtil.java:155)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n\tat io.netty.util.NetUtil.<clinit>(NetUtil.java:152)\r\n\tat reactor.netty.transport.AddressUtils.attemptParsingIpString(AddressUtils.java:238)\r\n\tat reactor.netty.transport.AddressUtils.createForIpString(AddressUtils.java:259)\r\n\tat reactor.netty.transport.AddressUtils.createInetSocketAddress(AddressUtils.java:56)\r\n\tat reactor.netty.transport.AddressUtils.createUnresolved(AddressUtils.java:86)\r\n\tat reactor.netty.http.client.UriEndpointFactory.lambda$createUriEndpoint$0(UriEndpointFactory.java:64)\r\n\tat reactor.netty.http.client.UriEndpoint.toExternalForm(UriEndpoint.java:63)\r\n\tat reactor.netty.http.client.HttpClientConnect$HttpClientHandler.<init>(HttpClientConnect.java:510)\r\n\tat reactor.netty.http.client.HttpClientConnect$MonoHttpConnect.subscribe(HttpClientConnect.java:208)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:249)\r\n\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2398)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapInner.onSubscribe(MonoFlatMap.java:238)\r\n\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n\tat reactor.core.publisher.MonoDeferContextual.subscribe(MonoDeferContextual.java:55)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n\tat reactor.core.publisher.FluxFilter$FilterSubscriber.onNext(FluxFilter.java:113)\r\n\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n\tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:151)\r\n\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:295)\r\n\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\r\n\tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1816)\r\n\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:159)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onComplete(FluxPeekFuseable.java:277)\r\n\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)\r\n\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\r\n\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.request(FluxContextWrite.java:136)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.request(FluxPeekFuseable.java:144)\r\n\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onSubscribe(MonoCollect.java:103)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178)\r\n\tat reactor.core.publisher.FluxPeekFuseable$PeekFuseableSubscriber.onSubscribe(FluxPeekFuseable.java:178)\r\n\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onSubscribe(FluxContextWrite.java:101)\r\n\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.FluxFlatMap.trySubscribeScalarMap(FluxFlatMap.java:200)\r\n\tat reactor.core.publisher.MonoFlatMap.subscribeOrReturn(MonoFlatMap.java:53)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:57)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\r\n\tat reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.innerNext(FluxConcatMap.java:282)\r\n\tat reactor.core.publisher.FluxConcatMap$ConcatMapInner.onNext(FluxConcatMap.java:863)\r\n\tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:120)\r\n\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\r\n\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\r\n\tat reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82)\r\n\tat reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onNext(FluxConcatArray.java:201)\r\n\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2398)\r\n\tat reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onSubscribe(FluxConcatArray.java:193)\r\n\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:258)\r\n\tat reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:78)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.drain(FluxConcatMap.java:451)\r\n\tat reactor.core.publisher.FluxConcatMap$ConcatMapImmediate.onSubscribe(FluxConcatMap.java:219)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263)\r\n\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:82)\r\n\tat reactor.core.publisher.MonoNext$NextSubscriber.onComplete(MonoNext.java:102)\r\n\tat reactor.core.publisher.FluxFilterWhen$FluxFilterWhenSubscriber.drain(FluxFilterWhen.java:236)\r\n\tat reactor.core.publisher.FluxFilterWhen$FluxFilterWhenSubscriber.onComplete(FluxFilterWhen.java:153)\r\n\tat reactor.core.publisher.FluxIterable$IterableSubscription.slowPath(FluxIterable.java:294)\r\n\tat reactor.core.publisher.FluxIterable$IterableSubscription.request(FluxIterable.java:230)\r\n\tat reactor.core.publisher.FluxFilterWhen$FluxFilterWhenSubscriber.onSubscribe(FluxFilterWhen.java:200)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:165)\r\n\tat reactor.core.publisher.FluxIterable.subscribe(FluxIterable.java:87)\r\n\tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:52)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.subscribeNext(MonoIgnoreThen.java:263)\r\n\tat reactor.core.publisher.MonoIgnoreThen.subscribe(MonoIgnoreThen.java:51)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.Mono.subscribeWith(Mono.java:4515)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4371)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4307)\r\n\tat org.springframework.test.web.reactive.server.HttpHandlerConnector.lambda$doConnect$2(HttpHandlerConnector.java:98)\r\n\tat org.springframework.mock.http.client.reactive.MockClientHttpRequest.lambda$null$2(MockClientHttpRequest.java:124)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.FluxConcatIterable$ConcatIterableSubscriber.onComplete(FluxConcatIterable.java:147)\r\n\tat reactor.core.publisher.FluxConcatIterable.subscribe(FluxConcatIterable.java:60)\r\n\tat reactor.core.publisher.MonoFromFluxOperator.subscribe(MonoFromFluxOperator.java:81)\r\n\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:157)\r\n\tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n\tat reactor.core.publisher.Operators$MonoInnerProducerBase.complete(Operators.java:2664)\r\n\tat reactor.core.publisher.MonoSingle$SingleSubscriber.onComplete(MonoSingle.java:180)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onComplete(FluxMapFuseable.java:150)\r\n\tat reactor.core.publisher.Operators$ScalarSubscription.request(Operators.java:2400)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:169)\r\n\tat reactor.core.publisher.MonoSingle$SingleSubscriber.doOnRequest(MonoSingle.java:103)\r\n\tat reactor.core.publisher.Operators$MonoInnerProducerBase.request(Operators.java:2731)\r\n\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.set(Operators.java:2194)\r\n\tat reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onSubscribe(Operators.java:2068)\r\n\tat reactor.core.publisher.MonoSingle$SingleSubscriber.onSubscribe(MonoSingle.java:115)\r\n\tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\r\n\tat reactor.core.publisher.MonoJust.subscribe(MonoJust.java:55)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.Mono.subscribeWith(Mono.java:4515)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4371)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4307)\r\n\tat org.springframework.test.web.reactive.server.HttpHandlerConnector.doConnect(HttpHandlerConnector.java:112)\r\n\tat org.springframework.test.web.reactive.server.HttpHandlerConnector.lambda$connect$0(HttpHandlerConnector.java:79)\r\n\tat reactor.core.publisher.MonoDefer.subscribe(MonoDefer.java:44)\r\n\tat reactor.core.publisher.Mono.subscribe(Mono.java:4400)\r\n\tat reactor.core.publisher.MonoSubscribeOn$SubscribeOnSubscriber.run(MonoSubscribeOn.java:126)\r\n\tat reactor.core.scheduler.WorkerTask.call(WorkerTask.java:84)\r\n\tat reactor.core.scheduler.WorkerTask.call(WorkerTask.java:37)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```","closed_by":{"login":"normanmaurer","id":439362,"node_id":"MDQ6VXNlcjQzOTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/439362?v=4","gravatar_id":"","url":"https://api.github.com/users/normanmaurer","html_url":"https://github.com/normanmaurer","followers_url":"https://api.github.com/users/normanmaurer/followers","following_url":"https://api.github.com/users/normanmaurer/following{/other_user}","gists_url":"https://api.github.com/users/normanmaurer/gists{/gist_id}","starred_url":"https://api.github.com/users/normanmaurer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/normanmaurer/subscriptions","organizations_url":"https://api.github.com/users/normanmaurer/orgs","repos_url":"https://api.github.com/users/normanmaurer/repos","events_url":"https://api.github.com/users/normanmaurer/events{/privacy}","received_events_url":"https://api.github.com/users/normanmaurer/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/netty/netty/issues/12411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/netty/netty/issues/12411/timeline","performed_via_github_app":null,"state_reason":"completed"}