{"url":"https://api.github.com/repos/netty/netty/issues/12433","repository_url":"https://api.github.com/repos/netty/netty","labels_url":"https://api.github.com/repos/netty/netty/issues/12433/labels{/name}","comments_url":"https://api.github.com/repos/netty/netty/issues/12433/comments","events_url":"https://api.github.com/repos/netty/netty/issues/12433/events","html_url":"https://github.com/netty/netty/issues/12433","id":1252654177,"node_id":"I_kwDOABA-c85Kqfxh","number":12433,"title":"Allow EmbeddedChannel users to control the scheduler time","user":{"login":"yawkat","id":2395297,"node_id":"MDQ6VXNlcjIzOTUyOTc=","avatar_url":"https://avatars.githubusercontent.com/u/2395297?v=4","gravatar_id":"","url":"https://api.github.com/users/yawkat","html_url":"https://github.com/yawkat","followers_url":"https://api.github.com/users/yawkat/followers","following_url":"https://api.github.com/users/yawkat/following{/other_user}","gists_url":"https://api.github.com/users/yawkat/gists{/gist_id}","starred_url":"https://api.github.com/users/yawkat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yawkat/subscriptions","organizations_url":"https://api.github.com/users/yawkat/orgs","repos_url":"https://api.github.com/users/yawkat/repos","events_url":"https://api.github.com/users/yawkat/events{/privacy}","received_events_url":"https://api.github.com/users/yawkat/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/netty/netty/milestones/255","html_url":"https://github.com/netty/netty/milestone/255","labels_url":"https://api.github.com/repos/netty/netty/milestones/255/labels","id":7950113,"node_id":"MI_kwDOABA-c84AeU8h","number":255,"title":"4.1.78.Final","description":"","creator":{"login":"normanmaurer","id":439362,"node_id":"MDQ6VXNlcjQzOTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/439362?v=4","gravatar_id":"","url":"https://api.github.com/users/normanmaurer","html_url":"https://github.com/normanmaurer","followers_url":"https://api.github.com/users/normanmaurer/followers","following_url":"https://api.github.com/users/normanmaurer/following{/other_user}","gists_url":"https://api.github.com/users/normanmaurer/gists{/gist_id}","starred_url":"https://api.github.com/users/normanmaurer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/normanmaurer/subscriptions","organizations_url":"https://api.github.com/users/normanmaurer/orgs","repos_url":"https://api.github.com/users/normanmaurer/repos","events_url":"https://api.github.com/users/normanmaurer/events{/privacy}","received_events_url":"https://api.github.com/users/normanmaurer/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":25,"state":"closed","created_at":"2022-05-06T10:52:51Z","updated_at":"2022-06-16T00:54:59Z","due_on":null,"closed_at":"2022-06-16T00:54:59Z"},"comments":2,"created_at":"2022-05-30T12:14:20Z","updated_at":"2022-06-13T06:45:19Z","closed_at":"2022-06-13T06:44:56Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"It would be useful if EmbeddedChannel provided a way to manage the scheduler time (e.g. freeze or advance the nanoTime used internally). This would allow race-free testing of time-based algorithms.\r\n\r\nI want to try working on this, this issue is to make sure it's not a stupid idea that will be rejected :)\r\n\r\nConstraints are:\r\n\r\n- performance of normal (non-embedded) EventExecutor should not be affected.\r\n- compatibility with current EmbeddedEventLoop behavior must be retained.\r\n\r\n### Expected behavior\r\n\r\nTests using EmbeddedChannel should be able to (1) stop scheduled tasks from executing too early even if they're scheduled very tightly, and (2) execute future tasks earlier than their nominal deadline.\r\n\r\n### Actual behavior\r\n\r\nTests have to use Thread.sleep to wait for scheduled tasks to reach their deadline.\r\n\r\n### Netty version\r\n\r\n4.1.77.Final","closed_by":{"login":"normanmaurer","id":439362,"node_id":"MDQ6VXNlcjQzOTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/439362?v=4","gravatar_id":"","url":"https://api.github.com/users/normanmaurer","html_url":"https://github.com/normanmaurer","followers_url":"https://api.github.com/users/normanmaurer/followers","following_url":"https://api.github.com/users/normanmaurer/following{/other_user}","gists_url":"https://api.github.com/users/normanmaurer/gists{/gist_id}","starred_url":"https://api.github.com/users/normanmaurer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/normanmaurer/subscriptions","organizations_url":"https://api.github.com/users/normanmaurer/orgs","repos_url":"https://api.github.com/users/normanmaurer/repos","events_url":"https://api.github.com/users/normanmaurer/events{/privacy}","received_events_url":"https://api.github.com/users/normanmaurer/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/netty/netty/issues/12433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/netty/netty/issues/12433/timeline","performed_via_github_app":null,"state_reason":"completed"}