{"url":"https://api.github.com/repos/netty/netty/issues/6681","repository_url":"https://api.github.com/repos/netty/netty","labels_url":"https://api.github.com/repos/netty/netty/issues/6681/labels{/name}","comments_url":"https://api.github.com/repos/netty/netty/issues/6681/comments","events_url":"https://api.github.com/repos/netty/netty/issues/6681/events","html_url":"https://github.com/netty/netty/issues/6681","id":224941265,"node_id":"MDU6SXNzdWUyMjQ5NDEyNjU=","number":6681,"title":"Metrics for HashedWheelTimer","user":{"login":"vkostyukov","id":1098539,"node_id":"MDQ6VXNlcjEwOTg1Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1098539?v=4","gravatar_id":"","url":"https://api.github.com/users/vkostyukov","html_url":"https://github.com/vkostyukov","followers_url":"https://api.github.com/users/vkostyukov/followers","following_url":"https://api.github.com/users/vkostyukov/following{/other_user}","gists_url":"https://api.github.com/users/vkostyukov/gists{/gist_id}","starred_url":"https://api.github.com/users/vkostyukov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vkostyukov/subscriptions","organizations_url":"https://api.github.com/users/vkostyukov/orgs","repos_url":"https://api.github.com/users/vkostyukov/repos","events_url":"https://api.github.com/users/vkostyukov/events{/privacy}","received_events_url":"https://api.github.com/users/vkostyukov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2017-04-27T23:34:30Z","updated_at":"2017-05-02T03:14:26Z","closed_at":"2017-05-02T03:11:15Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Netty's `HashedWheelTimer` is great but it's really hard to observe it's state given it's all private. Historically, we've been using reflection to get access to timer's private fields and expose some primitive metrics like \"number of pending tasks\".\r\n\r\nWould you be open to introducing `HashedWheelTimer.pendingTasks` as the first step towards better observability story for Netty timers? I'm not sure we need something as complex as `PoolArenaMetric` (by analogy with allocators) but having at least `pendingTasks` will go a long way in providing a reasonable level of visibility into timer's internal state.\r\n\r\nI'm happy to open a PR that adds this method (presumably based on our internal version of it) if you think it's something we can add as a public API. Please, let me know.\r\n","closed_by":{"login":"normanmaurer","id":439362,"node_id":"MDQ6VXNlcjQzOTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/439362?v=4","gravatar_id":"","url":"https://api.github.com/users/normanmaurer","html_url":"https://github.com/normanmaurer","followers_url":"https://api.github.com/users/normanmaurer/followers","following_url":"https://api.github.com/users/normanmaurer/following{/other_user}","gists_url":"https://api.github.com/users/normanmaurer/gists{/gist_id}","starred_url":"https://api.github.com/users/normanmaurer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/normanmaurer/subscriptions","organizations_url":"https://api.github.com/users/normanmaurer/orgs","repos_url":"https://api.github.com/users/normanmaurer/repos","events_url":"https://api.github.com/users/normanmaurer/events{/privacy}","received_events_url":"https://api.github.com/users/normanmaurer/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/netty/netty/issues/6681/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/netty/netty/issues/6681/timeline","performed_via_github_app":null,"state_reason":"completed"}