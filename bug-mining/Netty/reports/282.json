{"url":"https://api.github.com/repos/netty/netty/issues/13515","repository_url":"https://api.github.com/repos/netty/netty","labels_url":"https://api.github.com/repos/netty/netty/issues/13515/labels{/name}","comments_url":"https://api.github.com/repos/netty/netty/issues/13515/comments","events_url":"https://api.github.com/repos/netty/netty/issues/13515/events","html_url":"https://github.com/netty/netty/issues/13515","id":1821484012,"node_id":"I_kwDOABA-c85skaPs","number":13515,"title":"SSL certificate parsing issue when upgrading beyond 4.1.78 on Android","user":{"login":"andrewparmet","id":7232566,"node_id":"MDQ6VXNlcjcyMzI1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/7232566?v=4","gravatar_id":"","url":"https://api.github.com/users/andrewparmet","html_url":"https://github.com/andrewparmet","followers_url":"https://api.github.com/users/andrewparmet/followers","following_url":"https://api.github.com/users/andrewparmet/following{/other_user}","gists_url":"https://api.github.com/users/andrewparmet/gists{/gist_id}","starred_url":"https://api.github.com/users/andrewparmet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/andrewparmet/subscriptions","organizations_url":"https://api.github.com/users/andrewparmet/orgs","repos_url":"https://api.github.com/users/andrewparmet/repos","events_url":"https://api.github.com/users/andrewparmet/events{/privacy}","received_events_url":"https://api.github.com/users/andrewparmet/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2023-07-26T02:51:59Z","updated_at":"2023-11-13T08:34:31Z","closed_at":"2023-11-13T08:34:31Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Expected behavior\r\n\r\nWe're running a gRPC server on Android. We use SSL and have certificates that work until version 4.1.79, and we'd like to be able to continue to use them on more recent versions. Looking for hints to debug why this would suddenly start failing.\r\n\r\n### Actual behavior\r\n\r\nCertificates fail to parse with:\r\n\r\n```\r\norg.conscrypt.OpenSSLX509CertificateFactory$ParsingException: org.conscrypt.OpenSSLX509CertificateFactory$ParsingException: java.lang.RuntimeException: error:0c0000a2:ASN.1 encoding routines:OPENSSL_internal:NOT_ENOUGH_DATA\r\n```\r\n\r\n### Steps to reproduce\r\n\r\nUpgrade Netty.\r\n\r\n### Minimal yet complete reproducer code (or URL to code)\r\n\r\nUnfortunately this is a complex and proprietary project so it's difficult to provide a reproduction. The relevant interactions are between Netty and gRPC version 1.47.0 and conscrypt-android version 2.5.1, and the code is running on Android API 28.\r\n\r\nIf the short diff between 4.1.78 and 4.1.79 is not enough to find a good solution I can try to build a minimum reproducer. I've also tried to use Jitpack to build intermediate commits but I'm having trouble getting those to run on Android.\r\n\r\n### Netty version\r\n\r\n4.1.79\r\n\r\n### JVM version (e.g. `java -version`)\r\n\r\nAndroid API 28.\r\n\r\n### OS version (e.g. `uname -a`)\r\n\r\nAndroid 9.","closed_by":{"login":"normanmaurer","id":439362,"node_id":"MDQ6VXNlcjQzOTM2Mg==","avatar_url":"https://avatars.githubusercontent.com/u/439362?v=4","gravatar_id":"","url":"https://api.github.com/users/normanmaurer","html_url":"https://github.com/normanmaurer","followers_url":"https://api.github.com/users/normanmaurer/followers","following_url":"https://api.github.com/users/normanmaurer/following{/other_user}","gists_url":"https://api.github.com/users/normanmaurer/gists{/gist_id}","starred_url":"https://api.github.com/users/normanmaurer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/normanmaurer/subscriptions","organizations_url":"https://api.github.com/users/normanmaurer/orgs","repos_url":"https://api.github.com/users/normanmaurer/repos","events_url":"https://api.github.com/users/normanmaurer/events{/privacy}","received_events_url":"https://api.github.com/users/normanmaurer/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/netty/netty/issues/13515/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/netty/netty/issues/13515/timeline","performed_via_github_app":null,"state_reason":"completed"}