diff --git a/all/pom.xml b/all/pom.xml
index 2b18f301c7..08d7840b4f 100644
--- a/all/pom.xml
+++ b/all/pom.xml
@@ -269,6 +269,9 @@
           <checkCompileClasspath>true</checkCompileClasspath>
           <checkRuntimeClasspath>true</checkRuntimeClasspath>
           <checkTestClasspath>false</checkTestClasspath>
+          <ignoredClassPatterns>
+            <ignoredClassPattern>^META-INF.versions.*$</ignoredClassPattern>
+          </ignoredClassPatterns>
           <preferLocal>true</preferLocal>
           <useResultFile>true</useResultFile>
           <resultFile>${project.build.directory}/duplicate-finder-result.xml</resultFile>
diff --git a/buffer/pom.xml b/buffer/pom.xml
index 3ea6d02ea2..25bfaac583 100644
--- a/buffer/pom.xml
+++ b/buffer/pom.xml
@@ -43,4 +43,19 @@
       <artifactId>mockito-core</artifactId>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
diff --git a/buffer/src/main/java/module-info.yml b/buffer/src/main/java/module-info.yml
new file mode 100644
index 0000000000..542a10924b
--- /dev/null
+++ b/buffer/src/main/java/module-info.yml
@@ -0,0 +1,17 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
diff --git a/codec-compression/pom.xml b/codec-compression/pom.xml
index 780ece9d87..9b74d21155 100644
--- a/codec-compression/pom.xml
+++ b/codec-compression/pom.xml
@@ -143,5 +143,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-compression/src/main/java/module-info.yml b/codec-compression/src/main/java/module-info.yml
new file mode 100644
index 0000000000..295f0512f6
--- /dev/null
+++ b/codec-compression/src/main/java/module-info.yml
@@ -0,0 +1,32 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
+  - module: com.github.luben.zstd_jni
+    static: true
+  - module: lzma.java
+    static: true
+  - module: jzlib
+    static: true
+  - module: lz4
+    static: true
+  - module: com.aayushatharva.brotli4j
+    static: true
+  - module: compress.lzf
+    static: true
diff --git a/codec-dns/pom.xml b/codec-dns/pom.xml
index 3e1d53944c..ac82e5d309 100644
--- a/codec-dns/pom.xml
+++ b/codec-dns/pom.xml
@@ -77,5 +77,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-dns/src/main/java/module-info.yml b/codec-dns/src/main/java/module-info.yml
new file mode 100644
index 0000000000..724e366395
--- /dev/null
+++ b/codec-dns/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
+  - module: io.netty.common
diff --git a/codec-haproxy/pom.xml b/codec-haproxy/pom.xml
index d1dd8c4b1a..9d7946ce46 100644
--- a/codec-haproxy/pom.xml
+++ b/codec-haproxy/pom.xml
@@ -66,5 +66,19 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
 </project>
 
diff --git a/codec-haproxy/src/main/java/module-info.yml b/codec-haproxy/src/main/java/module-info.yml
new file mode 100644
index 0000000000..16d2d230de
--- /dev/null
+++ b/codec-haproxy/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.buffer
+  - module: io.netty.codec
+  - module: io.netty.common
+  - module: io.netty.transport
diff --git a/codec-http/pom.xml b/codec-http/pom.xml
index 8356de9dfc..05f21758f4 100644
--- a/codec-http/pom.xml
+++ b/codec-http/pom.xml
@@ -57,6 +57,7 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>netty-codec-compression</artifactId>
       <version>${project.version}</version>
+      <optional>true</optional>
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
@@ -134,5 +135,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-http/src/main/java/module-info.yml b/codec-http/src/main/java/module-info.yml
new file mode 100644
index 0000000000..fbd3921bad
--- /dev/null
+++ b/codec-http/src/main/java/module-info.yml
@@ -0,0 +1,27 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
+  - module: io.netty.handler
+  - module: io.netty.codec.compression
+    static: true
+  - module: com.aayushatharva.brotli4j
+    static: true
+  - module: jzlib
+    static: true
diff --git a/codec-http2/pom.xml b/codec-http2/pom.xml
index 9f251daa5b..8d2aa1ea29 100644
--- a/codec-http2/pom.xml
+++ b/codec-http2/pom.xml
@@ -59,6 +59,7 @@
       <groupId>${project.groupId}</groupId>
       <artifactId>netty-codec-compression</artifactId>
       <version>${project.version}</version>
+      <optional>true</optional>
     </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
@@ -154,5 +155,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-http2/src/main/java/module-info.yml b/codec-http2/src/main/java/module-info.yml
new file mode 100644
index 0000000000..2e7a8d1edd
--- /dev/null
+++ b/codec-http2/src/main/java/module-info.yml
@@ -0,0 +1,26 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
+  - module: io.netty.codec.http
+  - module: io.netty.handler
+  - module: io.netty.codec.compression
+    static: true
+  - module: com.aayushatharva.brotli4j
+    static: true
diff --git a/codec-marshalling/pom.xml b/codec-marshalling/pom.xml
index aa38068ea8..88f12cdf00 100644
--- a/codec-marshalling/pom.xml
+++ b/codec-marshalling/pom.xml
@@ -87,5 +87,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-marshalling/src/main/java/module-info.yml b/codec-marshalling/src/main/java/module-info.yml
new file mode 100644
index 0000000000..e13b3a2215
--- /dev/null
+++ b/codec-marshalling/src/main/java/module-info.yml
@@ -0,0 +1,21 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
+  - module: jboss.marshalling
diff --git a/codec-memcache/pom.xml b/codec-memcache/pom.xml
index ed5f4b9a84..5d2e4f5068 100644
--- a/codec-memcache/pom.xml
+++ b/codec-memcache/pom.xml
@@ -72,5 +72,19 @@
     </dependency>
   </dependencies>
 
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-memcache/src/main/java/module-info.yml b/codec-memcache/src/main/java/module-info.yml
new file mode 100644
index 0000000000..7a341733d5
--- /dev/null
+++ b/codec-memcache/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
diff --git a/codec-mqtt/pom.xml b/codec-mqtt/pom.xml
index 941c74fee4..201203899a 100644
--- a/codec-mqtt/pom.xml
+++ b/codec-mqtt/pom.xml
@@ -75,4 +75,19 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
diff --git a/codec-mqtt/src/main/java/module-info.yml b/codec-mqtt/src/main/java/module-info.yml
new file mode 100644
index 0000000000..7a341733d5
--- /dev/null
+++ b/codec-mqtt/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
diff --git a/codec-protobuf/pom.xml b/codec-protobuf/pom.xml
index c9e2d6ebad..ee26673398 100644
--- a/codec-protobuf/pom.xml
+++ b/codec-protobuf/pom.xml
@@ -79,5 +79,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-protobuf/src/main/java/module-info.yml b/codec-protobuf/src/main/java/module-info.yml
new file mode 100644
index 0000000000..105c0c8f3a
--- /dev/null
+++ b/codec-protobuf/src/main/java/module-info.yml
@@ -0,0 +1,22 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
+  - module: protobuf.javanano
+  - module: com.google.protobuf
diff --git a/codec-redis/pom.xml b/codec-redis/pom.xml
index e6e51f2399..cf874a695c 100644
--- a/codec-redis/pom.xml
+++ b/codec-redis/pom.xml
@@ -72,4 +72,18 @@
     </dependency>
   </dependencies>
 
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
diff --git a/codec-redis/src/main/java/module-info.yml b/codec-redis/src/main/java/module-info.yml
new file mode 100644
index 0000000000..7a341733d5
--- /dev/null
+++ b/codec-redis/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
diff --git a/codec-smtp/pom.xml b/codec-smtp/pom.xml
index 1dc23fd8ec..b0e0117ac1 100644
--- a/codec-smtp/pom.xml
+++ b/codec-smtp/pom.xml
@@ -71,5 +71,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-smtp/src/main/java/module-info.yml b/codec-smtp/src/main/java/module-info.yml
new file mode 100644
index 0000000000..7a341733d5
--- /dev/null
+++ b/codec-smtp/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
diff --git a/codec-socks/pom.xml b/codec-socks/pom.xml
index 183f49a11e..a6b9e41abc 100644
--- a/codec-socks/pom.xml
+++ b/codec-socks/pom.xml
@@ -71,5 +71,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-socks/src/main/java/module-info.yml b/codec-socks/src/main/java/module-info.yml
new file mode 100644
index 0000000000..7a341733d5
--- /dev/null
+++ b/codec-socks/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
diff --git a/codec-stomp/pom.xml b/codec-stomp/pom.xml
index e3f4c4d5d0..e2dd75a526 100644
--- a/codec-stomp/pom.xml
+++ b/codec-stomp/pom.xml
@@ -71,5 +71,19 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
 </project>
 
diff --git a/codec-stomp/src/main/java/module-info.yml b/codec-stomp/src/main/java/module-info.yml
new file mode 100644
index 0000000000..7a341733d5
--- /dev/null
+++ b/codec-stomp/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
diff --git a/codec-xml/pom.xml b/codec-xml/pom.xml
index ac7ed7ce6a..a4be524cff 100644
--- a/codec-xml/pom.xml
+++ b/codec-xml/pom.xml
@@ -70,5 +70,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec-xml/src/main/java/module-info.yml b/codec-xml/src/main/java/module-info.yml
new file mode 100644
index 0000000000..c783de73a2
--- /dev/null
+++ b/codec-xml/src/main/java/module-info.yml
@@ -0,0 +1,21 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.transport
+  - module: io.netty.codec
+  - module: com.fasterxml.aalto
diff --git a/codec/pom.xml b/codec/pom.xml
index 23ccffb154..961d99df77 100644
--- a/codec/pom.xml
+++ b/codec/pom.xml
@@ -78,5 +78,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/codec/src/main/java/module-info.yml b/codec/src/main/java/module-info.yml
new file mode 100644
index 0000000000..8b33e899b6
--- /dev/null
+++ b/codec/src/main/java/module-info.yml
@@ -0,0 +1,19 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.transport
+  - module: io.netty.buffer
+  - module: io.netty.common
diff --git a/common/pom.xml b/common/pom.xml
index 70a137d076..64ffe6de54 100644
--- a/common/pom.xml
+++ b/common/pom.xml
@@ -222,6 +222,15 @@
           </execution>
         </executions>
       </plugin>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
     </plugins>
   </build>
 </project>
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/counters/DoNotRemove.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/counters/DoNotRemove.java
new file mode 100644
index 0000000000..cf5c840b86
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/counters/DoNotRemove.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.util.internal.shaded.org.jctools.counters;
+
+// Placeholder for module-info maven plugin to add the package to the module-info descriptor
+class DoNotRemove {
+}
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/counters/package-info.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/counters/package-info.java
new file mode 100644
index 0000000000..0d529134a0
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/counters/package-info.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Placeholder package.
+ */
+package io.netty.util.internal.shaded.org.jctools.counters;
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/maps/DoNotRemove.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/maps/DoNotRemove.java
new file mode 100644
index 0000000000..04071dd1f7
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/maps/DoNotRemove.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.util.internal.shaded.org.jctools.maps;
+
+// Placeholder for module-info maven plugin to add the package to the module-info descriptor
+class DoNotRemove {
+}
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/maps/package-info.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/maps/package-info.java
new file mode 100644
index 0000000000..5acbe5c776
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/maps/package-info.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Placeholder package.
+ */
+package io.netty.util.internal.shaded.org.jctools.maps;
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/DoNotRemove.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/DoNotRemove.java
new file mode 100644
index 0000000000..caa987dba2
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/DoNotRemove.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues;
+
+// Placeholder for module-info maven plugin to add the package to the module-info descriptor
+class DoNotRemove {
+}
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/DoNotRemove.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/DoNotRemove.java
new file mode 100644
index 0000000000..cbd8e6f1fd
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/DoNotRemove.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues.atomic;
+
+// Placeholder for module-info maven plugin to add the package to the module-info descriptor
+class DoNotRemove {
+}
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/package-info.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/package-info.java
new file mode 100644
index 0000000000..e0a2d8b7d8
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/package-info.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Placeholder package.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues.atomic;
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/unpadded/DoNotRemove.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/unpadded/DoNotRemove.java
new file mode 100644
index 0000000000..48696825d2
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/unpadded/DoNotRemove.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues.atomic.unpadded;
+
+// Placeholder for module-info maven plugin to add the package to the module-info descriptor
+class DoNotRemove {
+}
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/unpadded/package-info.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/unpadded/package-info.java
new file mode 100644
index 0000000000..24754e4279
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/atomic/unpadded/package-info.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Placeholder package.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues.atomic.unpadded;
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/package-info.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/package-info.java
new file mode 100644
index 0000000000..e4e56d5f3c
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/package-info.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Placeholder package.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues;
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/unpadded/DoNotRemove.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/unpadded/DoNotRemove.java
new file mode 100644
index 0000000000..f4823f31eb
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/unpadded/DoNotRemove.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues.unpadded;
+
+// Placeholder for module-info maven plugin to add the package to the module-info descriptor
+class DoNotRemove {
+}
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/unpadded/package-info.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/unpadded/package-info.java
new file mode 100644
index 0000000000..632613da30
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/queues/unpadded/package-info.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Placeholder package.
+ */
+package io.netty.util.internal.shaded.org.jctools.queues.unpadded;
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/util/DoNotRemove.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/util/DoNotRemove.java
new file mode 100644
index 0000000000..b5db4d074e
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/util/DoNotRemove.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.util.internal.shaded.org.jctools.util;
+
+// Placeholder for module-info maven plugin to add the package to the module-info descriptor
+class DoNotRemove {
+}
diff --git a/common/src/main/java/io/netty/util/internal/shaded/org/jctools/util/package-info.java b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/util/package-info.java
new file mode 100644
index 0000000000..6e34e5713f
--- /dev/null
+++ b/common/src/main/java/io/netty/util/internal/shaded/org/jctools/util/package-info.java
@@ -0,0 +1,20 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Placeholder package.
+ */
+package io.netty.util.internal.shaded.org.jctools.util;
diff --git a/common/src/main/java/module-info.yml b/common/src/main/java/module-info.yml
new file mode 100644
index 0000000000..ff118565b9
--- /dev/null
+++ b/common/src/main/java/module-info.yml
@@ -0,0 +1,33 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: jdk.unsupported
+  - module: java.logging
+  - module: org.apache.commons.logging
+    static: true
+  - module: org.apache.log4j
+    static: true
+  - module: org.apache.logging.log4j
+    static: true
+  - module: org.jetbrains.annotations
+    static: true
+  - module: org.slf4j
+    static: true
+exports:
+  # module-info plugin skips any package containing "internal" therefore we explicitly need to add them
+  - package: io.netty.util.internal
+  - package: io.netty.util.internal.logging
+  - package: io.netty.util.internal.svm
diff --git a/example/pom.xml b/example/pom.xml
index 1555d7a86e..e880c61c0b 100644
--- a/example/pom.xml
+++ b/example/pom.xml
@@ -29,9 +29,6 @@
 
   <name>Netty/Example</name>
 
-  <properties>
-    <javaModuleName>io.netty.example</javaModuleName>
-  </properties>
   <dependencies>
     <dependency>
       <groupId>${project.groupId}</groupId>
@@ -73,6 +70,11 @@
       <artifactId>netty-handler-proxy</artifactId>
       <version>${project.version}</version>
     </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-compression</artifactId>
+      <version>${project.version}</version>
+    </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
       <artifactId>netty-codec-http</artifactId>
diff --git a/handler-proxy/pom.xml b/handler-proxy/pom.xml
index 4de60504bc..2048eae7dc 100644
--- a/handler-proxy/pom.xml
+++ b/handler-proxy/pom.xml
@@ -65,13 +65,12 @@
       <artifactId>netty-codec-http</artifactId>
       <version>${project.version}</version>
     </dependency>
-
     <dependency>
       <groupId>${project.groupId}</groupId>
       <artifactId>netty-handler</artifactId>
       <version>${project.version}</version>
-      <scope>test</scope>
     </dependency>
+
     <dependency>
       <groupId>org.mockito</groupId>
       <artifactId>mockito-core</artifactId>
@@ -100,5 +99,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/handler-proxy/src/main/java/module-info.yml b/handler-proxy/src/main/java/module-info.yml
new file mode 100644
index 0000000000..d06853f3b3
--- /dev/null
+++ b/handler-proxy/src/main/java/module-info.yml
@@ -0,0 +1,22 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.codec.http
+  - module: io.netty.codec.socks
+  - module: io.netty.common
+  - module: io.netty.codec
+  - module: io.netty.transport
+  - module: io.netty.buffer
diff --git a/handler-ssl-ocsp/pom.xml b/handler-ssl-ocsp/pom.xml
index d40e4f92f6..3b7497c3d0 100644
--- a/handler-ssl-ocsp/pom.xml
+++ b/handler-ssl-ocsp/pom.xml
@@ -54,4 +54,18 @@
       <version>${project.version}</version>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
 </project>
diff --git a/handler-ssl-ocsp/src/main/java/module-info.yml b/handler-ssl-ocsp/src/main/java/module-info.yml
new file mode 100644
index 0000000000..504c4b2277
--- /dev/null
+++ b/handler-ssl-ocsp/src/main/java/module-info.yml
@@ -0,0 +1,24 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.buffer
+  - module: io.netty.handler
+  - module: io.netty.codec.http
+  - module: io.netty.transport
+  - module: io.netty.resolver.dns
+  - module: org.bouncycastle.pkix
+  - module: org.bouncycastle.provider
diff --git a/handler/pom.xml b/handler/pom.xml
index b68b87b745..921cc5e5fd 100644
--- a/handler/pom.xml
+++ b/handler/pom.xml
@@ -117,5 +117,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/handler/src/main/java/module-info.yml b/handler/src/main/java/module-info.yml
new file mode 100644
index 0000000000..eaf237002a
--- /dev/null
+++ b/handler/src/main/java/module-info.yml
@@ -0,0 +1,30 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.buffer
+  - module: io.netty.codec
+  - module: io.netty.common
+  - module: io.netty.resolver
+  - module: io.netty.transport
+  - module: io.netty.transport.unix.common
+  - module: io.netty.tcnative.classes.openssl
+    static: true
+  - module: org.bouncycastle.pkix
+    static: true
+  - module: org.bouncycastle.provider
+    static: true
+  - module: org.conscrypt
+    static: true
diff --git a/microbench/pom.xml b/microbench/pom.xml
index dbf32e1da8..9e2c0650a0 100644
--- a/microbench/pom.xml
+++ b/microbench/pom.xml
@@ -39,7 +39,6 @@
          code -->
     <kqueue.classifier />
     <revapi.skip>true</revapi.skip>
-    <javaModuleName>io.netty.microbench</javaModuleName>
   </properties>
   <profiles>
     <profile>
@@ -138,6 +137,11 @@
       <artifactId>netty-handler</artifactId>
       <version>${project.version}</version>
     </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-compression</artifactId>
+      <version>${project.version}</version>
+    </dependency>
     <dependency>
       <groupId>${project.groupId}</groupId>
       <artifactId>netty-codec-http</artifactId>
diff --git a/pom.xml b/pom.xml
index c3095fd80d..998131a126 100644
--- a/pom.xml
+++ b/pom.xml
@@ -93,7 +93,7 @@
                 netty-testsuite-native,netty-testsuite-native-image,netty-testsuite-native-image-client,
                 netty-testsuite-native-image-client-runtime-init,netty-testsuite-osgi,netty-testsuite-shading,
                 netty-transport-blockhound-tests,netty-transport-native-unix-common-tests,netty-microbench,
-                netty-dev-tools,netty-example
+                netty-dev-tools,netty-example,testsuite-jpms
               </skippedModules>
               <sourceFileExcludes>
                 <exclude>**/com/sun/**/*.java</exclude>
@@ -472,6 +472,16 @@
       </activation>
     </profile>
 
+    <profile>
+      <id>testsuite-jpms</id>
+      <activation>
+        <jdk>[11,)</jdk>
+      </activation>
+      <modules>
+        <module>testsuite-jpms</module>
+      </modules>
+    </profile>
+
     <profile>
       <id>boringssl-mac-aarch64</id>
       <activation>
@@ -661,6 +671,8 @@
     <skipNativeImageTestsuite>true</skipNativeImageTestsuite>
     <skipShadingTestsuite>false</skipShadingTestsuite>
     <skipDeploy>false</skipDeploy>
+    <multiReleaseJar>true</multiReleaseJar>
+    <javaModuleName></javaModuleName>
   </properties>
 
   <modules>
@@ -842,7 +854,7 @@
       <dependency>
         <groupId>com.github.luben</groupId>
         <artifactId>zstd-jni</artifactId>
-        <version>1.5.5-11</version>
+        <version>1.5.6-5</version>
         <optional>true</optional>
       </dependency>
       <dependency>
@@ -1012,7 +1024,7 @@
       <dependency>
         <groupId>org.hamcrest</groupId>
         <artifactId>hamcrest-library</artifactId>
-        <version>1.3</version>
+        <version>2.2</version>
         <scope>test</scope>
       </dependency>
       <dependency>
@@ -7560,12 +7572,12 @@
         <!-- keep surefire and failsafe in sync -->
         <plugin>
           <artifactId>maven-surefire-plugin</artifactId>
-          <version>2.22.2</version>
+          <version>3.3.0</version>
         </plugin>
         <!-- keep surefire and failsafe in sync -->
         <plugin>
           <artifactId>maven-failsafe-plugin</artifactId>
-          <version>2.22.2</version>
+          <version>3.3.0</version>
         </plugin>
         <plugin>
           <artifactId>maven-clean-plugin</artifactId>
@@ -7624,7 +7636,7 @@
                     <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                   </manifest>
                   <manifestEntries>
-                    <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                    <Multi-Release>${multiReleaseJar}</Multi-Release>
                   </manifestEntries>
                   <index>true</index>
                   <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -7687,6 +7699,24 @@
           <artifactId>maven-shade-plugin</artifactId>
           <version>3.2.1</version>
         </plugin>
+        <plugin>
+          <groupId>io.github.dmlloyd.module-info</groupId>
+          <artifactId>module-info</artifactId>
+          <version>2.1</version>
+          <executions>
+            <execution>
+              <id>module-info</id>
+              <phase>process-classes</phase>
+              <configuration>
+                <moduleName>${javaModuleName}</moduleName>
+                <outputDirectory>${project.build.outputDirectory}/META-INF/versions/11/</outputDirectory>
+              </configuration>
+              <goals>
+                <goal>generate</goal>
+              </goals>
+            </execution>
+          </executions>
+        </plugin>
 
         <!-- Workaround for the 'M2E plugin execution not covered' problem.
              See: https://wiki.eclipse.org/M2E_plugin_execution_not_covered -->
diff --git a/resolver-dns-classes-macos/pom.xml b/resolver-dns-classes-macos/pom.xml
index 0649862ef2..aa470791de 100644
--- a/resolver-dns-classes-macos/pom.xml
+++ b/resolver-dns-classes-macos/pom.xml
@@ -50,6 +50,15 @@
 
   <build>
     <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
       </plugin>
diff --git a/resolver-dns-classes-macos/src/main/java/module-info.yml b/resolver-dns-classes-macos/src/main/java/module-info.yml
new file mode 100644
index 0000000000..390253d7a4
--- /dev/null
+++ b/resolver-dns-classes-macos/src/main/java/module-info.yml
@@ -0,0 +1,19 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.transport.unix.common
+  - module: io.netty.resolver.dns
diff --git a/resolver-dns-native-macos/pom.xml b/resolver-dns-native-macos/pom.xml
index 49ab4bf585..3c4e7bf547 100644
--- a/resolver-dns-native-macos/pom.xml
+++ b/resolver-dns-native-macos/pom.xml
@@ -109,7 +109,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_resolver_dns_native_macos_${os.detected.arch}.jnilib; osname=MacOSX; processor=${os.detected.arch}</Bundle-NativeCode>
                       <Fragment-Host>io.netty.resolver-dns-classes-macos</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -218,7 +218,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_resolver_dns_native_macos_aarch_64.jnilib; osname=MacOSX; processor=aarch64</Bundle-NativeCode>
                       <Fragment-Host>io.netty.resolver-dns-classes-macos</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -328,7 +328,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_resolver_dns_native_macos_x86_64.jnilib; osname=MacOSX; processor=x86_64</Bundle-NativeCode>
                       <Fragment-Host>io.netty.resolver-dns-classes-macos</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -380,6 +380,15 @@
 
   <build>
     <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
         <executions>
diff --git a/resolver-dns/pom.xml b/resolver-dns/pom.xml
index ed17b74671..21fa7f8e96 100644
--- a/resolver-dns/pom.xml
+++ b/resolver-dns/pom.xml
@@ -107,5 +107,20 @@
       <scope>test</scope>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/resolver-dns/src/main/java/module-info.yml b/resolver-dns/src/main/java/module-info.yml
new file mode 100644
index 0000000000..fb89d580e0
--- /dev/null
+++ b/resolver-dns/src/main/java/module-info.yml
@@ -0,0 +1,24 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.resolver
+  - module: io.netty.codec.dns
+  - module: io.netty.buffer
+  - module: io.netty.handler
+  - module: io.netty.codec
+  - module: io.netty.transport
+  - module: java.naming
diff --git a/resolver/pom.xml b/resolver/pom.xml
index 11bfdcda7d..836ef9073c 100644
--- a/resolver/pom.xml
+++ b/resolver/pom.xml
@@ -43,5 +43,20 @@
       <artifactId>mockito-core</artifactId>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/resolver/src/main/java/module-info.yml b/resolver/src/main/java/module-info.yml
new file mode 100644
index 0000000000..542a10924b
--- /dev/null
+++ b/resolver/src/main/java/module-info.yml
@@ -0,0 +1,17 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
diff --git a/testsuite-autobahn/pom.xml b/testsuite-autobahn/pom.xml
index 94fc42519b..3d8a516020 100644
--- a/testsuite-autobahn/pom.xml
+++ b/testsuite-autobahn/pom.xml
@@ -32,7 +32,6 @@
     <revapi.skip>true</revapi.skip>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_autobahn</javaModuleName>
   </properties>
 
   <dependencies>
diff --git a/testsuite-http2/pom.xml b/testsuite-http2/pom.xml
index 4e6ba7d0ed..2d560b1a3e 100644
--- a/testsuite-http2/pom.xml
+++ b/testsuite-http2/pom.xml
@@ -32,7 +32,6 @@
     <revapi.skip>true</revapi.skip>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_http2</javaModuleName>
   </properties>
 
   <dependencies>
diff --git a/testsuite-jpms/pom.xml b/testsuite-jpms/pom.xml
new file mode 100644
index 0000000000..38e6a23db3
--- /dev/null
+++ b/testsuite-jpms/pom.xml
@@ -0,0 +1,380 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+  ~ Copyright 2020 The Netty Project
+  ~
+  ~ The Netty Project licenses this file to you under the Apache License,
+  ~ version 2.0 (the "License"); you may not use this file except in compliance
+  ~ with the License. You may obtain a copy of the License at:
+  ~
+  ~   https://www.apache.org/licenses/LICENSE-2.0
+  ~
+  ~ Unless required by applicable law or agreed to in writing, software
+  ~ distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+  ~ WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+  ~ License for the specific language governing permissions and limitations
+  ~ under the License.
+  -->
+<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/maven-v4_0_0.xsd">
+
+  <modelVersion>4.0.0</modelVersion>
+  <parent>
+    <groupId>io.netty</groupId>
+    <artifactId>netty-parent</artifactId>
+    <version>4.2.0.Alpha4-SNAPSHOT</version>
+  </parent>
+
+  <artifactId>netty-testsuite-jpms</artifactId>
+  <packaging>jlink</packaging>
+
+  <name>Netty/Testsuite/JPMS</name>
+
+  <properties>
+    <revapi.skip>true</revapi.skip>
+    <!-- Do not deploy this module -->
+    <skipDeploy>true</skipDeploy>
+    <javaModuleName>io.netty.testsuite_jpms</javaModuleName>
+    <maven.compiler.source>11</maven.compiler.source>
+    <maven.compiler.target>11</maven.compiler.target>
+    <maven.compiler.release>11</maven.compiler.release>
+    <useTestModulePath>true</useTestModulePath>
+  </properties>
+
+  <dependencies>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-buffer</artifactId>
+      <version>${project.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec</artifactId>
+      <version>${project.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-handler</artifactId>
+      <version>${project.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-http</artifactId>
+      <version>${project.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-transport-classes-kqueue</artifactId>
+      <version>${project.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-transport-classes-epoll</artifactId>
+      <version>${project.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-transport-classes-io_uring</artifactId>
+      <version>${project.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-tcnative-classes</artifactId>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-tcnative-boringssl-static</artifactId>
+      <classifier>${jni.classifier}</classifier>
+      <version>${tcnative.version}</version>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-http2</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-xml</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-compression</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-mqtt</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-smtp</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-memcache</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-stomp</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-socks</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-redis</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-haproxy</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-protobuf</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>com.google.protobuf</groupId>
+      <artifactId>protobuf-java</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>com.google.protobuf.nano</groupId>
+      <artifactId>protobuf-javanano</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-codec-marshalling</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.jboss.marshalling</groupId>
+      <artifactId>jboss-marshalling</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.jboss.marshalling</groupId>
+      <artifactId>jboss-marshalling-serial</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-resolver-dns-classes-macos</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>${project.groupId}</groupId>
+      <artifactId>netty-handler-ssl-ocsp</artifactId>
+      <version>${project.version}</version>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.bouncycastle</groupId>
+      <artifactId>bcpkix-jdk18on</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.bouncycastle</groupId>
+      <artifactId>bcprov-jdk18on</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.apache.logging.log4j</groupId>
+      <artifactId>log4j-api</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.apache.logging.log4j</groupId>
+      <artifactId>log4j-core</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>com.github.luben</groupId>
+      <artifactId>zstd-jni</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>com.aayushatharva.brotli4j</groupId>
+      <artifactId>brotli4j</artifactId>
+      <scope>test</scope>
+    </dependency>
+    <dependency>
+      <groupId>org.junit.jupiter</groupId>
+      <artifactId>junit-jupiter-api</artifactId>
+    </dependency>
+    <dependency>
+      <groupId>org.junit.jupiter</groupId>
+      <artifactId>junit-jupiter-engine</artifactId>
+    </dependency>
+  </dependencies>
+  <profiles>
+    <profile>
+      <id>skipTests</id>
+      <activation>
+        <property>
+          <name>skipTests</name>
+        </property>
+      </activation>
+      <properties>
+        <skipNativeTestsuite>true</skipNativeTestsuite>
+      </properties>
+    </profile>
+
+    <profile>
+      <id>linux</id>
+      <activation>
+        <os>
+          <family>linux</family>
+        </os>
+      </activation>
+      <dependencies>
+        <dependency>
+          <groupId>${project.groupId}</groupId>
+          <artifactId>netty-transport-native-epoll</artifactId>
+          <version>${project.version}</version>
+          <classifier>${jni.classifier}</classifier>
+          <scope>compile</scope>
+        </dependency>
+        <dependency>
+          <groupId>${project.groupId}</groupId>
+          <artifactId>netty-transport-native-io_uring</artifactId>
+          <version>${project.version}</version>
+          <classifier>${jni.classifier}</classifier>
+          <scope>compile</scope>
+        </dependency>
+      </dependencies>
+    </profile>
+
+    <profile>
+      <id>osx</id>
+      <activation>
+        <os>
+          <family>mac</family>
+        </os>
+      </activation>
+      <dependencies>
+        <dependency>
+          <groupId>${project.groupId}</groupId>
+          <artifactId>netty-transport-native-kqueue</artifactId>
+          <version>${project.version}</version>
+          <classifier>${jni.classifier}</classifier>
+          <scope>compile</scope>
+        </dependency>
+        <!-- note : this is not yet tested with jlink -->
+        <dependency>
+          <groupId>${project.groupId}</groupId>
+          <artifactId>netty-resolver-dns-native-macos</artifactId>
+          <version>${project.version}</version>
+          <classifier>${jni.classifier}</classifier>
+          <scope>compile</scope>
+        </dependency>
+      </dependencies>
+    </profile>
+
+  </profiles>
+
+  <build>
+    <pluginManagement>
+      <plugins>
+        <plugin>
+          <artifactId>maven-jlink-plugin</artifactId>
+          <version>3.2.0</version>
+          <extensions>true</extensions>
+          <configuration>
+            <addModules>
+              <addModule>jdk.jdwp.agent</addModule>
+              <addModule>io.netty.internal.tcnative.openssl.${os.detected.name}.${os.detected.arch}</addModule>
+            </addModules>
+            <launcher>http=io.netty.testsuite_jpms.main/io.netty.testsuite_jpms.main.HttpHelloWorldServer</launcher>
+          </configuration>
+        </plugin>
+        <plugin>
+          <artifactId>maven-compiler-plugin</artifactId>
+          <configuration>
+            <skipMain>${skipJpmsTestsuite}</skipMain>
+            <skip>${skipJpmsTestsuite}</skip>
+          </configuration>
+        </plugin>
+        <plugin>
+          <artifactId>maven-surefire-plugin</artifactId>
+          <version>3.4.0</version>
+          <configuration>
+            <!-- Exclude all dependencies which are automatic modules -->
+            <classpathDependencyExcludes>org.hamcrest:*,net.sf.saxon:Saxon-HE,org.checkerframework:checker-qual,commons-logging:commons-logging,com.google.errorprone:error_prone_annotations,io.netty:netty-build-common,antlr:antlr,org.antlr:antlr4-runtime,com.google.guava:*,com.puppycrawl.tools:checkstyle,commons-beanutils:commons-beanutils,commons-collections:commons-collections,com.google.code.findbugs:jsr305,com.google.j2objc:j2objc-annotations</classpathDependencyExcludes>
+            <useModulePath>${useTestModulePath}</useModulePath>
+          </configuration>
+          <executions>
+            <execution>
+              <id>default-test</id>
+              <configuration>
+                <includes>
+                  <include>io/netty/testsuite_jpms/test/**.java</include>
+                </includes>
+              </configuration>
+            </execution>
+            <execution>
+              <id>slf4j-test</id>
+              <goals>
+                <goal>test</goal>
+              </goals>
+              <configuration>
+                <includes>
+                  <include>io/netty/testsuite_jpms/it/Slf4jTest.java</include>
+                </includes>
+              </configuration>
+            </execution>
+            <execution>
+              <id>log4j-test</id>
+              <goals>
+                <goal>test</goal>
+              </goals>
+              <configuration>
+                <classpathDependencyExcludes>ch.qos.logback:*,org.slf4j:*</classpathDependencyExcludes>
+                <includes>
+                  <include>io/netty/testsuite_jpms/it/Log4jTest.java</include>
+                </includes>
+              </configuration>
+            </execution>
+            <execution>
+              <id>commons-logging-test</id>
+              <goals>
+                <goal>test</goal>
+              </goals>
+              <configuration>
+                <includes>
+                  <include>io/netty/testsuite_jpms/it/CommonsLoggingTest.java</include>
+                </includes>
+              </configuration>
+            </execution>
+          </executions>
+        </plugin>
+      </plugins>
+    </pluginManagement>
+    <plugins>
+      <plugin>
+        <artifactId>maven-jlink-plugin</artifactId>
+      </plugin>
+    </plugins>
+  </build>
+</project>
diff --git a/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServer.java b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServer.java
new file mode 100644
index 0000000000..a8aaabe054
--- /dev/null
+++ b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServer.java
@@ -0,0 +1,169 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.main;
+
+import io.netty.bootstrap.ServerBootstrap;
+import io.netty.channel.IoHandlerFactory;
+import io.netty.channel.EventLoopGroup;
+import io.netty.channel.Channel;
+import io.netty.channel.MultiThreadIoEventLoopGroup;
+import io.netty.channel.ChannelOption;
+import io.netty.channel.epoll.EpollIoHandler;
+import io.netty.channel.epoll.EpollServerSocketChannel;
+import io.netty.channel.kqueue.KQueueIoHandler;
+import io.netty.channel.kqueue.KQueueServerSocketChannel;
+import io.netty.channel.nio.NioIoHandler;
+import io.netty.channel.socket.ServerSocketChannel;
+import io.netty.channel.socket.nio.NioServerSocketChannel;
+import io.netty.channel.uring.IoUringIoHandler;
+import io.netty.channel.uring.IoUringServerSocketChannel;
+import io.netty.handler.logging.LogLevel;
+import io.netty.handler.logging.LoggingHandler;
+import io.netty.handler.ssl.IdentityCipherSuiteFilter;
+import io.netty.handler.ssl.SslContext;
+import io.netty.handler.ssl.SslProvider;
+import io.netty.handler.ssl.util.InsecureTrustManagerFactory;
+import io.netty.handler.ssl.util.SelfSignedCertificate;
+
+import static io.netty.handler.ssl.SslContextBuilder.forServer;
+
+/**
+ * <p>An HTTP server that sends back the content of the received HTTP request
+ * in a pretty plaintext form.</p>
+ *
+ * <p>Running the server:
+ * <ul>
+ *     <li>./target/maven-jlink/default/bin/java
+ *     -m io.netty.testsuite_jpms.main/io.netty.testsuite_jpms.main.HttpHelloWorldServer</li>
+ *     <li>./target/maven-jlink/default/bin/http (shortcut)</li>
+ * </ul>
+ *
+ * <p>Running with OpenSSL requires to add the
+ * io.netty.internal.tcnative.openssl.${os.detected.name}.${os.detected.arch} module, e.g.
+ * ./target/maven-jlink/default/bin/java --add-modules io.netty.internal.tcnative.openssl.osx.aarch_64
+ * -m io.netty.testsuite_jpms.main/io.netty.testsuite_jpms.main.HttpHelloWorldServer --ssl --ssl-provider OPENSSL
+ *
+ * <p>Running with native requires to add io.netty.transport.kqueue.${os.detected.name}.${os.detected.arch}, e.g.
+ * ./target/maven-jlink/default/bin/java --add-modules io.netty.transport.kqueue.osx.aarch_64
+ * -m io.netty.testsuite_jpms.main/io.netty.testsuite_jpms.main.HttpHelloWorldServer --transport kqueue
+ */
+public final class HttpHelloWorldServer {
+
+    private HttpHelloWorldServer() {
+    }
+
+    public static void main(String[] args) throws Exception {
+
+        String transport = "nio";
+        boolean ssl = false;
+        SslProvider sslProvider = SslProvider.JDK;
+
+        Integer port = null;
+        for (int i = 0; i < args.length; i++) {
+            if (args[i].equals("--ssl")) {
+                ssl = true;
+            }
+            if (args[i].equals("--ssl-provider")) {
+                if (i < args.length - 1) {
+                    sslProvider = SslProvider.valueOf(args[++i]);
+                } else {
+                    System.exit(1);
+                }
+            }
+            if (args[i].equals("--port")) {
+                if (i < args.length - 1) {
+                    port = Integer.parseInt(args[++i]);
+                } else {
+                    System.exit(1);
+                }
+            }
+            if (args[i].equals("--transport")) {
+                if (i < args.length - 1) {
+                    transport = args[++i];
+                } else {
+                    System.exit(1);
+                }
+            }
+        }
+
+        if (port == null) {
+            port = ssl ? 8443 : 8080;
+        }
+
+        IoHandlerFactory ioHandlerFactory;
+        Class<? extends ServerSocketChannel> serverSocketChannelFactory;
+        switch (transport) {
+            case "nio":
+                ioHandlerFactory = NioIoHandler.newFactory();
+                serverSocketChannelFactory = NioServerSocketChannel.class;
+                break;
+            case "kqueue":
+                ioHandlerFactory = KQueueIoHandler.newFactory();
+                serverSocketChannelFactory = KQueueServerSocketChannel.class;
+                break;
+            case "epoll":
+                ioHandlerFactory = EpollIoHandler.newFactory();
+                serverSocketChannelFactory = EpollServerSocketChannel.class;
+                break;
+            case "io_uring":
+                ioHandlerFactory = IoUringIoHandler.newFactory();
+                serverSocketChannelFactory = IoUringServerSocketChannel.class;
+                break;
+            default:
+                System.exit(1);
+                return;
+        }
+
+        SelfSignedCertificate signedCert = SelfSignedCertificate.builder().build();
+
+        SslContext sslContext;
+        if (ssl) {
+            sslContext = forServer(signedCert.certificate(), signedCert.privateKey(), null)
+                    .sslProvider(sslProvider)
+                    .protocols("TLSv1.2")
+                    .trustManager(InsecureTrustManagerFactory.INSTANCE)
+                    .ciphers(null, IdentityCipherSuiteFilter.INSTANCE)
+                    .sessionCacheSize(0)
+                    .sessionTimeout(0)
+                    .build();
+        } else {
+            sslContext = null;
+        }
+
+        // Configure the server.
+        EventLoopGroup bossGroup = new MultiThreadIoEventLoopGroup(1, ioHandlerFactory);
+        EventLoopGroup workerGroup = new MultiThreadIoEventLoopGroup(ioHandlerFactory);
+        try {
+            ServerBootstrap b = new ServerBootstrap();
+            b.option(ChannelOption.SO_BACKLOG, 1024);
+            b.group(bossGroup, workerGroup)
+             .channel(serverSocketChannelFactory)
+             .handler(new LoggingHandler(LogLevel.INFO))
+             .childHandler(new HttpHelloWorldServerInitializer(sslContext));
+
+            Channel ch = b.bind(port).sync().channel();
+
+            System.err.println("Open your web browser and navigate to " +
+                    (ssl? "https" : "http") + "://127.0.0.1:" + port + '/');
+
+            ch.closeFuture().sync();
+        } finally {
+            bossGroup.shutdownGracefully();
+            workerGroup.shutdownGracefully();
+        }
+    }
+}
diff --git a/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServerHandler.java b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServerHandler.java
new file mode 100644
index 0000000000..f4ba15266e
--- /dev/null
+++ b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServerHandler.java
@@ -0,0 +1,102 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.main;
+
+import io.netty.buffer.Unpooled;
+import io.netty.channel.ChannelFuture;
+import io.netty.channel.ChannelFutureListener;
+import io.netty.channel.ChannelHandlerContext;
+import io.netty.channel.SimpleChannelInboundHandler;
+import io.netty.handler.codec.http.HttpObject;
+import io.netty.handler.codec.http.HttpRequest;
+import io.netty.handler.codec.http.HttpUtil;
+import io.netty.handler.codec.http.FullHttpResponse;
+import io.netty.handler.codec.http.DefaultFullHttpResponse;
+import io.netty.handler.ssl.SslHandler;
+
+import java.nio.charset.StandardCharsets;
+import java.util.stream.Collectors;
+
+import static io.netty.handler.codec.http.HttpHeaderNames.CONNECTION;
+import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_TYPE;
+import static io.netty.handler.codec.http.HttpHeaderNames.CONTENT_LENGTH;
+import static io.netty.handler.codec.http.HttpHeaderValues.KEEP_ALIVE;
+import static io.netty.handler.codec.http.HttpHeaderValues.CLOSE;
+import static io.netty.handler.codec.http.HttpHeaderValues.TEXT_PLAIN;
+import static io.netty.handler.codec.http.HttpResponseStatus.OK;
+
+public class HttpHelloWorldServerHandler extends SimpleChannelInboundHandler<HttpObject> {
+
+    @Override
+    public void channelReadComplete(ChannelHandlerContext ctx) {
+        ctx.flush();
+    }
+
+    @Override
+    public void channelRead0(ChannelHandlerContext ctx, HttpObject msg) {
+        if (msg instanceof HttpRequest) {
+            HttpRequest req = (HttpRequest) msg;
+
+            String modulesInfo = ModuleLayer.boot().modules().stream()
+                    .map(module -> "- " + module.getName() + " " +
+                            (module.getDescriptor().isAutomatic() ? "(automatic)" : ""))
+                    .collect(Collectors.joining("\r\n", "Boot layer:\r\n", "\r\n"));
+
+            String channelType = ctx.channel().getClass().getName();
+
+            String sslEngineInfo = "";
+            SslHandler sslHandler = ctx.pipeline().get(SslHandler.class);
+            if (sslHandler != null) {
+                sslEngineInfo = "SSL Engine: " + sslHandler.engine().getClass().getName() + "\r\n";
+            }
+
+            String hello = "Hello World\r\n" +
+                    "Transport: " + channelType + "\r\n" +
+                    sslEngineInfo +
+                    modulesInfo;
+
+            boolean keepAlive = HttpUtil.isKeepAlive(req);
+            FullHttpResponse response = new DefaultFullHttpResponse(
+                    req.protocolVersion(), OK,
+                    Unpooled.copiedBuffer(hello, StandardCharsets.UTF_8));
+            response.headers()
+                    .set(CONTENT_TYPE, TEXT_PLAIN)
+                    .setInt(CONTENT_LENGTH, response.content().readableBytes());
+
+            if (keepAlive) {
+                if (!req.protocolVersion().isKeepAliveDefault()) {
+                    response.headers().set(CONNECTION, KEEP_ALIVE);
+                }
+            } else {
+                // Tell the client we're going to close the connection.
+                response.headers().set(CONNECTION, CLOSE);
+            }
+
+            ChannelFuture f = ctx.write(response);
+
+            if (!keepAlive) {
+                f.addListener(ChannelFutureListener.CLOSE);
+            }
+        }
+    }
+
+    @Override
+    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {
+        cause.printStackTrace();
+        ctx.close();
+    }
+}
diff --git a/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServerInitializer.java b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServerInitializer.java
new file mode 100644
index 0000000000..4494b2667f
--- /dev/null
+++ b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/HttpHelloWorldServerInitializer.java
@@ -0,0 +1,44 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.main;
+
+import io.netty.channel.ChannelInitializer;
+import io.netty.channel.ChannelPipeline;
+import io.netty.channel.socket.SocketChannel;
+import io.netty.handler.codec.http.HttpServerCodec;
+import io.netty.handler.codec.http.HttpServerExpectContinueHandler;
+import io.netty.handler.ssl.SslContext;
+
+public class HttpHelloWorldServerInitializer extends ChannelInitializer<SocketChannel> {
+
+    private final SslContext sslCtx;
+
+    public HttpHelloWorldServerInitializer(SslContext sslCtx) {
+        this.sslCtx = sslCtx;
+    }
+
+    @Override
+    public void initChannel(SocketChannel ch) {
+        ChannelPipeline p = ch.pipeline();
+        if (sslCtx != null) {
+            p.addLast(sslCtx.newHandler(ch.alloc()));
+        }
+        p.addLast(new HttpServerCodec());
+        p.addLast(new HttpServerExpectContinueHandler());
+        p.addLast(new HttpHelloWorldServerHandler());
+    }
+}
diff --git a/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/package-info.java b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/package-info.java
new file mode 100644
index 0000000000..f0b8398ac4
--- /dev/null
+++ b/testsuite-jpms/src/main/java/io/netty/testsuite_jpms/main/package-info.java
@@ -0,0 +1,19 @@
+/*
+ * Copyright 2014 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+/**
+ * JPMS integration tests.
+ */
+package io.netty.testsuite_jpms.main;
diff --git a/testsuite-jpms/src/main/java/module-info.java b/testsuite-jpms/src/main/java/module-info.java
new file mode 100644
index 0000000000..7086898325
--- /dev/null
+++ b/testsuite-jpms/src/main/java/module-info.java
@@ -0,0 +1,26 @@
+/*
+ * Copyright 2013 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+module io.netty.testsuite_jpms.main {
+    requires io.netty.buffer;
+    requires io.netty.codec;
+    requires io.netty.codec.http;
+    requires io.netty.handler;
+    requires io.netty.transport;
+    requires io.netty.transport.classes.kqueue;
+    requires io.netty.transport.classes.epoll;
+    requires io.netty.transport.classes.io_uring;
+    requires io.netty.tcnative.classes.openssl;
+}
\ No newline at end of file
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/CommonsLoggingTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/CommonsLoggingTest.java
new file mode 100644
index 0000000000..1ff3187a7a
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/CommonsLoggingTest.java
@@ -0,0 +1,30 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.it;
+
+import io.netty.util.internal.logging.CommonsLoggerFactory;
+import io.netty.util.internal.logging.InternalLoggerFactory;
+import org.junit.jupiter.api.Test;
+
+public class CommonsLoggingTest {
+
+    @Test
+    public void testSetLoggerFactory() {
+        // Only proves we are using the correct module name, but that is enough
+        InternalLoggerFactory.setDefaultFactory(new CommonsLoggerFactory());
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/Log4j2Test.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/Log4j2Test.java
new file mode 100644
index 0000000000..572edf025c
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/Log4j2Test.java
@@ -0,0 +1,63 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.it;
+
+import io.netty.util.internal.logging.InternalLogger;
+import io.netty.util.internal.logging.InternalLoggerFactory;
+import org.apache.logging.log4j.Level;
+import org.apache.logging.log4j.LogManager;
+import org.apache.logging.log4j.core.LoggerContext;
+import org.apache.logging.log4j.core.appender.OutputStreamAppender;
+import org.apache.logging.log4j.core.config.AppenderRef;
+import org.apache.logging.log4j.core.config.Configuration;
+import org.apache.logging.log4j.core.config.LoggerConfig;
+import org.apache.logging.log4j.core.layout.PatternLayout;
+import org.junit.jupiter.api.Test;
+
+import java.io.ByteArrayOutputStream;
+
+import static org.junit.jupiter.api.Assertions.assertEquals;
+
+public class Log4j2Test {
+
+    @Test
+    public void testLoggerFactoryResolution() {
+        LoggerContext context = (LoggerContext) LogManager.getContext(false);
+        Configuration config = context.getConfiguration();
+        PatternLayout layout = PatternLayout.newBuilder().withPattern("%m%n").build();
+        ByteArrayOutputStream buffer = new ByteArrayOutputStream();
+        OutputStreamAppender appender = OutputStreamAppender
+                .newBuilder()
+                .setLayout(layout)
+                .setName("TEST_APPENDER")
+                .setTarget(buffer)
+                .build();
+        appender.start();
+        AppenderRef ref = AppenderRef.createAppenderRef("TEST_APPENDER", null, null);
+        AppenderRef[] refs = new AppenderRef[] {ref};
+        LoggerConfig loggerConfig = LoggerConfig.createLogger("false", Level.INFO,
+                "CONSOLE_LOGGER", "foo", refs, null, config, null);
+        loggerConfig.addAppender(appender, null, null);
+        config.addAppender(appender);
+        config.addLogger("foo", loggerConfig);
+        context.updateLoggers(config);
+        InternalLogger logg = InternalLoggerFactory.getInstance("foo");
+        String expected = "the-msg";
+        logg.info(expected);
+        assertEquals(expected, buffer.toString().substring(0, expected.length()));
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/Slf4jTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/Slf4jTest.java
new file mode 100644
index 0000000000..75c752abec
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/it/Slf4jTest.java
@@ -0,0 +1,52 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.it;
+
+import ch.qos.logback.classic.Level;
+import ch.qos.logback.classic.Logger;
+import ch.qos.logback.classic.LoggerContext;
+import ch.qos.logback.classic.spi.ILoggingEvent;
+import ch.qos.logback.core.read.ListAppender;
+import io.netty.util.internal.logging.InternalLogger;
+import io.netty.util.internal.logging.InternalLoggerFactory;
+import io.netty.util.internal.logging.Slf4JLoggerFactory;
+import org.junit.jupiter.api.Test;
+import org.slf4j.LoggerFactory;
+
+import static org.junit.jupiter.api.Assertions.assertEquals;
+
+public class Slf4jTest {
+
+    @Test
+    public void testLoggerFactoryResolution() {
+        LoggerContext lc = (LoggerContext) LoggerFactory.getILoggerFactory();
+        Logger logger = (Logger) LoggerFactory.getLogger("foo");
+        ListAppender<ILoggingEvent> appender = new ListAppender<>();
+        appender.setContext(lc);
+        logger.addAppender(appender);
+        appender.start();
+        logger.setLevel(Level.DEBUG);
+        logger.setAdditive(false);
+        InternalLoggerFactory factory = InternalLoggerFactory.getDefaultFactory();
+        assertEquals(Slf4JLoggerFactory.class, factory.getClass());
+        InternalLogger logg = InternalLoggerFactory.getInstance("foo");
+        logg.info("the-msg");
+        assertEquals(1, appender.list.size());
+        assertEquals("the-msg", appender.list.get(0).getMessage());
+        logger.detachAndStopAllAppenders();
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/BufferTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/BufferTest.java
new file mode 100644
index 0000000000..bd417498a0
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/BufferTest.java
@@ -0,0 +1,39 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.buffer.Unpooled;
+import org.junit.jupiter.api.Test;
+
+import java.nio.charset.StandardCharsets;
+
+import static org.junit.jupiter.api.Assertions.assertEquals;
+import static org.junit.jupiter.api.Assertions.assertTrue;
+
+public class BufferTest {
+
+    @Test
+    public void testSimple() {
+        Class<ByteBuf> clazz = ByteBuf.class;
+        Module module = clazz.getModule();
+        assertTrue(module.isNamed());
+        assertEquals("io.netty.buffer", module.getName());
+        ByteBuf byteBuf = Unpooled.copiedBuffer("some-string", StandardCharsets.UTF_8);
+    }
+
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CheckModuleDescriptorTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CheckModuleDescriptorTest.java
new file mode 100644
index 0000000000..e91de283b9
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CheckModuleDescriptorTest.java
@@ -0,0 +1,63 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.bootstrap.ChannelInitializerExtension;
+import org.junit.jupiter.api.Test;
+
+import java.lang.module.ModuleDescriptor;
+import java.util.Collections;
+import java.util.Optional;
+import java.util.Set;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CheckModuleDescriptorTest {
+
+    private static final Set<String> AUTOMATIC_MODULES_ALLOWED = Set.of(
+            "com.google.protobuf", "protobuf.javanano", "jboss.marshalling", "jboss.marshalling.serial");
+
+    /**
+     * Ensure that classpath is empty and all module are named and not automatic.
+     */
+    @Test
+    public void checkExplicitModules() {
+        String classpath = System.getProperty("java.class.path");
+        assertEquals("", classpath);
+        ModuleLayer layer = ModuleLayer.boot();
+        layer.modules().forEach(module -> {
+            assertTrue(module.isNamed(), "Module " + module.getName() + " is not named");
+            boolean automatic = AUTOMATIC_MODULES_ALLOWED.contains(module.getName());
+            if (!automatic) {
+                assertFalse(module.getDescriptor().isAutomatic(), "Unexpected automatic module "
+                        + module.getName());
+            }
+        });
+    }
+
+    @Test
+    public void testTransportChannelInitializerExtensionUseDeclaration() {
+        Optional<Module> opt = ModuleLayer.boot().findModule("io.netty.transport");
+        assertTrue(opt.isPresent());
+        Module module = opt.get();
+        Set<String> providesSet = module.getDescriptor().uses();
+        assertEquals(1, providesSet.size());
+        String use = providesSet.iterator().next();
+        assertEquals(ChannelInitializerExtension.class.getName(), use);
+    }
+
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecCompressionTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecCompressionTest.java
new file mode 100644
index 0000000000..3bedda4168
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecCompressionTest.java
@@ -0,0 +1,59 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.buffer.Unpooled;
+import io.netty.handler.codec.MessageToByteEncoder;
+import io.netty.handler.codec.compression.ZstdEncoder;
+import org.junit.jupiter.api.Test;
+import io.netty.handler.codec.compression.BrotliEncoder;
+import io.netty.channel.embedded.EmbeddedChannel;
+
+import java.nio.charset.StandardCharsets;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CodecCompressionTest {
+
+    @Test
+    public void testBrotli4j() {
+        testCompress(new BrotliEncoder());
+    }
+
+    @Test
+    public void testZstd() {
+        testCompress(new ZstdEncoder());
+    }
+
+    public void testCompress(MessageToByteEncoder<ByteBuf> encoder) {
+        EmbeddedChannel channel = new EmbeddedChannel(encoder);
+        ByteBuf data = Unpooled.copiedBuffer("some-string", StandardCharsets.UTF_8);
+        assertTrue(channel.writeOutbound(data));
+        assertTrue(channel.finish());
+        assertEquals(0, data.readableBytes());
+        int size = 0;
+        for (ByteBuf chunk = channel.readOutbound(); chunk != null; chunk = channel.readOutbound()) {
+            // Zstd can emit an empty buffer (flush)
+            if (chunk != Unpooled.EMPTY_BUFFER) {
+                size += chunk.readableBytes();
+                assertTrue(chunk.release());
+            }
+        }
+        assertTrue(size > 0);
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecHaProxyTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecHaProxyTest.java
new file mode 100644
index 0000000000..e7aa090e48
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecHaProxyTest.java
@@ -0,0 +1,46 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.haproxy.HAProxyMessageEncoder;
+import io.netty.handler.codec.haproxy.HAProxyMessage;
+import io.netty.handler.codec.haproxy.HAProxyProtocolVersion;
+import io.netty.handler.codec.haproxy.HAProxyCommand;
+import io.netty.handler.codec.haproxy.HAProxyProxiedProtocol;
+import io.netty.util.CharsetUtil;
+import org.junit.jupiter.api.Test;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CodecHaProxyTest {
+
+    @Test
+    public void testDecoder() {
+        EmbeddedChannel channel = new EmbeddedChannel(HAProxyMessageEncoder.INSTANCE);
+        HAProxyMessage message = new HAProxyMessage(
+                HAProxyProtocolVersion.V1, HAProxyCommand.PROXY, HAProxyProxiedProtocol.TCP4,
+                "192.168.0.1", "192.168.0.11", 56324, 443);
+        assertTrue(channel.writeOutbound(message));
+        ByteBuf byteBuf = channel.readOutbound();
+        assertEquals("PROXY TCP4 192.168.0.1 192.168.0.11 56324 443\r\n",
+                byteBuf.toString(CharsetUtil.US_ASCII));
+        byteBuf.release();
+        assertFalse(channel.finish());
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecHttp2Test.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecHttp2Test.java
new file mode 100644
index 0000000000..9c0489bfe8
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecHttp2Test.java
@@ -0,0 +1,165 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.bootstrap.Bootstrap;
+import io.netty.bootstrap.ServerBootstrap;
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.MultiThreadIoEventLoopGroup;
+import io.netty.channel.ChannelFuture;
+import io.netty.channel.ChannelInitializer;
+import io.netty.channel.ChannelHandlerContext;
+import io.netty.channel.Channel;
+import io.netty.channel.ChannelDuplexHandler;
+import io.netty.channel.ChannelPromise;
+import io.netty.channel.SimpleChannelInboundHandler;
+import io.netty.channel.nio.NioIoHandler;
+import io.netty.channel.socket.SocketChannel;
+import io.netty.channel.socket.nio.NioServerSocketChannel;
+import io.netty.channel.socket.nio.NioSocketChannel;
+import io.netty.handler.codec.http2.DefaultHttp2DataFrame;
+import io.netty.handler.codec.http2.Http2FrameCodecBuilder;
+import io.netty.handler.codec.http2.Http2HeadersFrame;
+import io.netty.handler.codec.http2.Http2Headers;
+import io.netty.handler.codec.http2.DefaultHttp2Headers;
+import io.netty.handler.codec.http2.Http2FrameStream;
+import io.netty.handler.codec.http2.DefaultHttp2HeadersFrame;
+import io.netty.handler.codec.http2.Http2Connection;
+import io.netty.handler.codec.http2.Http2ConnectionHandler;
+import io.netty.handler.codec.http2.DefaultHttp2Connection;
+import io.netty.handler.codec.http2.Http2EventAdapter;
+import io.netty.handler.codec.http2.Http2FrameCodec;
+import io.netty.handler.codec.http2.Http2Exception;
+import io.netty.handler.codec.http2.Http2Settings;
+import io.netty.handler.codec.http2.Http2MultiplexHandler;
+import io.netty.handler.codec.http2.Http2LocalFlowController;
+import io.netty.handler.codec.http2.Http2Stream;
+import io.netty.handler.codec.http2.Http2ConnectionEncoder;
+import io.netty.handler.codec.http2.Http2ConnectionHandlerBuilder;
+import io.netty.handler.codec.http2.DelegatingDecompressorFrameListener;
+import org.junit.jupiter.api.Test;
+
+import java.nio.charset.StandardCharsets;
+import java.util.concurrent.CompletableFuture;
+import java.util.concurrent.TimeUnit;
+
+import static io.netty.handler.codec.http.HttpResponseStatus.OK;
+import static org.junit.jupiter.api.Assertions.assertEquals;
+
+public class CodecHttp2Test {
+
+    @Test
+    public void smokeTest() throws Exception {
+
+        ServerBootstrap serverBootstrap = new ServerBootstrap();
+        serverBootstrap.channel(NioServerSocketChannel.class);
+        MultiThreadIoEventLoopGroup eventLoopGroup = new MultiThreadIoEventLoopGroup(NioIoHandler.newFactory());
+        serverBootstrap.group(eventLoopGroup);
+        serverBootstrap.childHandler(new ChannelInitializer<>() {
+            @Override
+            protected void initChannel(Channel ch) {
+                ch.pipeline().addLast(Http2FrameCodecBuilder.forServer().build(), new ChannelDuplexHandler() {
+                    @Override
+                    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
+                        if (msg instanceof Http2HeadersFrame) {
+                            Http2HeadersFrame streamFrame = (Http2HeadersFrame) msg;
+                            if (streamFrame.isEndStream()) {
+                                ByteBuf body = ctx.alloc().buffer();
+                                body.writeCharSequence("Hello World", StandardCharsets.UTF_8);
+                                Http2Headers headers = new DefaultHttp2Headers().status(OK.codeAsText());
+                                Http2FrameStream stream = streamFrame.stream();
+                                ctx.write(new DefaultHttp2HeadersFrame(headers).stream(stream));
+                                ctx.write(new DefaultHttp2DataFrame(body, true).stream(stream));
+                            }
+                        } else {
+                            super.channelRead(ctx, msg);
+                        }
+                    }
+                });
+            }
+        });
+        ChannelFuture server = serverBootstrap.bind("localhost", 8080).sync();
+
+        try {
+            Bootstrap clientBootstrap = new Bootstrap()
+                    .group(eventLoopGroup)
+                    .channel(NioSocketChannel.class)
+                    .handler(new ChannelInitializer<>() {
+                @Override
+                protected void initChannel(Channel ch) {
+                    Http2FrameCodec http2FrameCodec = Http2FrameCodecBuilder.forClient().build();
+                    ch.pipeline().addLast(http2FrameCodec);
+                    ch.pipeline().addLast(new Http2MultiplexHandler(new SimpleChannelInboundHandler<>() {
+                        @Override
+                        protected void channelRead0(ChannelHandlerContext ctx, Object msg) {
+                        }
+                    }));
+                }
+            });
+
+            CompletableFuture<String> responseFut = new CompletableFuture<>();
+
+            Channel client = clientBootstrap.handler(new ChannelInitializer<SocketChannel>() {
+                Http2Connection connection;
+                Http2ConnectionHandler connectionHandler;
+                @Override
+                protected void initChannel(SocketChannel ch) {
+                    connection = new DefaultHttp2Connection(false);
+                    Http2EventAdapter http2EventHandler = new Http2EventAdapter() {
+                        @Override
+                        public void onSettingsRead(ChannelHandlerContext ctx, Http2Settings settings)
+                                throws Http2Exception {
+                            Http2Connection.Endpoint<Http2LocalFlowController> endpoint = connection.local();
+                            Http2Stream stream = endpoint.createStream(1, false);
+                            Http2Headers headers = new DefaultHttp2Headers()
+                                    .method("GET")
+                                    .path("/")
+                                    .scheme("http");
+                            ChannelPromise promise = ctx.newPromise();
+                            Http2ConnectionEncoder encoder = connectionHandler.encoder();
+                            encoder.writeHeaders(ctx, 1, headers, 0, true, promise);
+                        }
+                        @Override
+                        public int onDataRead(ChannelHandlerContext ctx, int streamId, ByteBuf data,
+                                              int padding, boolean endOfStream) throws Http2Exception {
+                            if (endOfStream) {
+                                responseFut.complete(data.toString(StandardCharsets.UTF_8));
+                            }
+                            return super.onDataRead(ctx, streamId, data, padding, endOfStream);
+                        }
+                    };
+                    connectionHandler = new Http2ConnectionHandlerBuilder()
+                            .frameListener(new DelegatingDecompressorFrameListener(
+                                    connection,
+                                    http2EventHandler))
+                            .connection(connection)
+                            .build();
+                    ch.pipeline().addLast(connectionHandler);
+                }
+            }).connect("localhost", 8080).syncUninterruptibly().channel();
+
+            String resp = responseFut.get(20, TimeUnit.SECONDS);
+            assertEquals("Hello World", resp);
+
+            // Wait until the connection is closed.
+            server.channel().close().syncUninterruptibly();
+            client.close().syncUninterruptibly();
+        } finally {
+            eventLoopGroup.shutdownGracefully();
+        }
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMarshallingTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMarshallingTest.java
new file mode 100644
index 0000000000..a668e8b8cf
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMarshallingTest.java
@@ -0,0 +1,57 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.marshalling.CompatibleMarshallingEncoder;
+import io.netty.handler.codec.marshalling.DefaultMarshallerProvider;
+import io.netty.handler.codec.protobuf.ProtobufVarint32FrameDecoder;
+import org.jboss.marshalling.MarshallerFactory;
+import org.jboss.marshalling.Marshalling;
+import org.jboss.marshalling.MarshallingConfiguration;
+import org.jboss.marshalling.Unmarshaller;
+import org.junit.jupiter.api.Test;
+
+import static io.netty.buffer.Unpooled.wrappedBuffer;
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CodecMarshallingTest {
+
+    @Test
+    public void smokeTest() throws Exception {
+        @SuppressWarnings("RedundantStringConstructorCall")
+        String testObject = new String("test");
+        MarshallingConfiguration configuration = new MarshallingConfiguration();
+        configuration.setVersion(5);
+        MarshallerFactory marshallerFactory = Marshalling.getProvidedMarshallerFactory("serial");
+        DefaultMarshallerProvider provider = new DefaultMarshallerProvider(marshallerFactory, configuration);
+        EmbeddedChannel ch = new EmbeddedChannel(new CompatibleMarshallingEncoder(provider));
+        ch.writeOutbound(testObject);
+        assertTrue(ch.finish());
+        ByteBuf buffer = ch.readOutbound();
+        Unmarshaller unmarshaller = marshallerFactory.createUnmarshaller(configuration);
+        unmarshaller.start(Marshalling.createByteInput(buffer.nioBuffer()));
+        String read = (String) unmarshaller.readObject();
+        assertEquals(testObject, read);
+        assertEquals(-1, unmarshaller.read());
+        assertNull(ch.readOutbound());
+        unmarshaller.finish();
+        unmarshaller.close();
+        buffer.release();
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMemcacheTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMemcacheTest.java
new file mode 100644
index 0000000000..91137fd04e
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMemcacheTest.java
@@ -0,0 +1,43 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.memcache.binary.BinaryMemcacheRequest;
+import io.netty.handler.codec.memcache.binary.BinaryMemcacheRequestEncoder;
+import io.netty.handler.codec.memcache.binary.DefaultBinaryMemcacheRequest;
+import org.junit.jupiter.api.Test;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CodecMemcacheTest {
+
+    @Test
+    public void testEncoder() {
+        EmbeddedChannel channel = new EmbeddedChannel(new BinaryMemcacheRequestEncoder());
+        BinaryMemcacheRequest request = new DefaultBinaryMemcacheRequest();
+        assertTrue(channel.writeOutbound(request));
+        assertTrue(channel.finish());
+        ByteBuf written = channel.readOutbound();
+        assertEquals(24, written.readableBytes());
+        assertEquals(24, written.readableBytes());
+        assertEquals((byte) 0x80, written.readByte());
+        assertEquals((byte) 0x00, written.readByte());
+        written.release();
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMqttTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMqttTest.java
new file mode 100644
index 0000000000..5dd2e179f1
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecMqttTest.java
@@ -0,0 +1,81 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.mqtt.MqttConnectMessage;
+import io.netty.handler.codec.mqtt.MqttMessageBuilders;
+import io.netty.handler.codec.mqtt.MqttVersion;
+import io.netty.handler.codec.mqtt.MqttProperties;
+import io.netty.handler.codec.mqtt.MqttEncoder;
+import io.netty.handler.codec.mqtt.MqttDecoder;
+import io.netty.handler.codec.mqtt.MqttConnectVariableHeader;
+import io.netty.handler.codec.mqtt.MqttConnectPayload;
+import io.netty.handler.codec.mqtt.MqttQoS;
+import io.netty.util.CharsetUtil;
+import org.junit.jupiter.api.Test;
+
+import static org.junit.jupiter.api.Assertions.*;
+import static org.junit.jupiter.api.Assertions.assertNull;
+
+public class CodecMqttTest {
+
+    private static final String CLIENT_ID = "RANDOM_TEST_CLIENT";
+    private static final String WILL_TOPIC = "/my_will";
+    private static final String WILL_MESSAGE = "gone";
+    private static final String USER_NAME = "happy_user";
+    private static final String PASSWORD = "123_or_no_pwd";
+    private static final int KEEP_ALIVE_SECONDS = 600;
+
+    @Test
+    public void testCodec() {
+        MqttConnectMessage msg = MqttMessageBuilders.connect()
+                .clientId(CLIENT_ID)
+                .protocolVersion(MqttVersion.MQTT_3_1)
+                .username(USER_NAME)
+                .password(PASSWORD.getBytes(CharsetUtil.UTF_8))
+                .properties(MqttProperties.NO_PROPERTIES)
+                .willRetain(true)
+                .willQoS(MqttQoS.AT_LEAST_ONCE)
+                .willFlag(true)
+                .willTopic(WILL_TOPIC)
+                .willMessage(WILL_MESSAGE.getBytes(CharsetUtil.UTF_8))
+                .willProperties(MqttProperties.NO_PROPERTIES)
+                .cleanSession(true)
+                .keepAlive(KEEP_ALIVE_SECONDS)
+                .build();
+        EmbeddedChannel channel = new EmbeddedChannel(MqttEncoder.INSTANCE, new MqttDecoder());
+        assertTrue(channel.writeOutbound(msg));
+        ByteBuf buffer = channel.readOutbound();
+        assertNull(channel.readOutbound());
+        channel.writeInbound(buffer);
+        Object o = channel.readInbound();
+        assertEquals(MqttConnectMessage.class, o.getClass());
+        msg = (MqttConnectMessage) o;
+        MqttConnectVariableHeader varHeaders = msg.variableHeader();
+        assertEquals(MqttQoS.AT_LEAST_ONCE.value(), varHeaders.willQos());
+        assertEquals(KEEP_ALIVE_SECONDS, varHeaders.keepAliveTimeSeconds());
+        MqttConnectPayload payload = msg.payload();
+        assertEquals(CLIENT_ID, payload.clientIdentifier());
+        assertEquals(USER_NAME, payload.userName());
+        assertEquals(PASSWORD, payload.password());
+        assertEquals(WILL_TOPIC, payload.willTopic());
+        assertEquals(WILL_MESSAGE, payload.willMessage());
+        assertFalse(channel.finish());
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecProtobufTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecProtobufTest.java
new file mode 100644
index 0000000000..b6b26da07b
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecProtobufTest.java
@@ -0,0 +1,46 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.protobuf.ProtobufVarint32FrameDecoder;
+import org.junit.jupiter.api.Test;
+
+import static io.netty.buffer.Unpooled.wrappedBuffer;
+import static org.junit.jupiter.api.Assertions.*;
+import static org.junit.jupiter.api.Assertions.assertFalse;
+
+public class CodecProtobufTest {
+
+    @Test
+    public void testDecoder() {
+        EmbeddedChannel ch = new EmbeddedChannel(new ProtobufVarint32FrameDecoder());
+        byte[] b = { 4, 1, 1, 1, 1 };
+        assertFalse(ch.writeInbound(wrappedBuffer(b, 0, 1)));
+        assertNull(ch.readInbound());
+        assertFalse(ch.writeInbound(wrappedBuffer(b, 1, 2)));
+        assertNull(ch.readInbound());
+        assertTrue(ch.writeInbound(wrappedBuffer(b, 3, b.length - 3)));
+        ByteBuf expected = wrappedBuffer(new byte[] { 1, 1, 1, 1 });
+        ByteBuf actual = ch.readInbound();
+        assertEquals(expected, actual);
+        assertFalse(ch.finish());
+        expected.release();
+        actual.release();
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecRedisTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecRedisTest.java
new file mode 100644
index 0000000000..95ad599240
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecRedisTest.java
@@ -0,0 +1,40 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.redis.InlineCommandRedisMessage;
+import io.netty.handler.codec.redis.RedisEncoder;
+import org.junit.jupiter.api.Test;
+
+import java.nio.charset.StandardCharsets;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CodecRedisTest {
+
+    @Test
+    public void testEncoder() {
+        EmbeddedChannel channel = new EmbeddedChannel(new RedisEncoder());
+        assertTrue(channel.writeOutbound(new InlineCommandRedisMessage("ping")));
+        assertTrue(channel.finish());
+        ByteBuf buffer = channel.readOutbound();
+        assertEquals("ping\r\n", buffer.toString(StandardCharsets.UTF_8));
+        buffer.release();
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecSmtpTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecSmtpTest.java
new file mode 100644
index 0000000000..469be671fc
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecSmtpTest.java
@@ -0,0 +1,40 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.smtp.SmtpRequestEncoder;
+import io.netty.handler.codec.smtp.SmtpRequests;
+import io.netty.util.CharsetUtil;
+import org.junit.jupiter.api.Test;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CodecSmtpTest {
+
+    @Test
+    public void testEncoder() {
+        EmbeddedChannel channel = new EmbeddedChannel(new SmtpRequestEncoder());
+        assertTrue(channel.writeOutbound(SmtpRequests.ehlo("localhost")));
+        assertTrue(channel.finish());
+        ByteBuf buffer = channel.readOutbound();
+        assertEquals("EHLO localhost\r\n", buffer.toString(CharsetUtil.US_ASCII));
+        buffer.release();
+        assertNull(channel.readOutbound());
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecSocksTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecSocksTest.java
new file mode 100644
index 0000000000..eed9490acc
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecSocksTest.java
@@ -0,0 +1,42 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.socks.SocksMessageEncoder;
+import io.netty.handler.codec.socks.SocksCmdRequest;
+import io.netty.handler.codec.socks.SocksCmdType;
+import io.netty.handler.codec.socks.SocksAddressType;
+import org.junit.jupiter.api.Test;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class CodecSocksTest {
+
+    @Test
+    public void testEncoder() {
+        EmbeddedChannel channel = new EmbeddedChannel(new SocksMessageEncoder());
+        assertTrue(channel.writeOutbound(new SocksCmdRequest(SocksCmdType.BIND,
+                SocksAddressType.IPv4, "54.54.111.253", 1)));
+        assertTrue(channel.finish());
+        ByteBuf buffer = channel.readOutbound();
+        assertTrue(buffer.readableBytes() > 0);
+        buffer.release();
+        assertNull(channel.readOutbound());
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecStompTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecStompTest.java
new file mode 100644
index 0000000000..ee8c58c7c7
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecStompTest.java
@@ -0,0 +1,51 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.ByteBuf;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.stomp.StompSubframeEncoder;
+import io.netty.handler.codec.stomp.DefaultStompHeadersSubframe;
+import io.netty.handler.codec.stomp.StompHeadersSubframe;
+import io.netty.handler.codec.stomp.StompCommand;
+import io.netty.handler.codec.stomp.StompHeaders;
+import org.junit.jupiter.api.Test;
+
+import java.nio.charset.StandardCharsets;
+
+import static org.junit.jupiter.api.Assertions.*;
+import static org.junit.jupiter.api.Assertions.assertNotNull;
+
+public class CodecStompTest {
+
+    @Test
+    public void testEncoder() {
+        EmbeddedChannel channel = new EmbeddedChannel(new StompSubframeEncoder());
+        StompHeadersSubframe frame = new DefaultStompHeadersSubframe(StompCommand.CONNECT);
+        StompHeaders headers = frame.headers();
+        headers.set(StompHeaders.HOST, "stomp.github.org");
+        headers.set(StompHeaders.ACCEPT_VERSION, "1.1,1.2");
+        channel.writeOutbound(frame);
+        ByteBuf byteBuf = channel.readOutbound();
+        assertEquals("CONNECT\n" +
+                "host:stomp.github.org\n" +
+                "accept-version:1.1,1.2\n" +
+                "\n", byteBuf.toString(StandardCharsets.UTF_8));
+        assertNotNull(byteBuf);
+        byteBuf.release();
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecXmlTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecXmlTest.java
new file mode 100644
index 0000000000..026a5770e6
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/CodecXmlTest.java
@@ -0,0 +1,50 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.buffer.Unpooled;
+import io.netty.channel.embedded.EmbeddedChannel;
+import io.netty.handler.codec.xml.XmlDecoder;
+import io.netty.handler.codec.xml.XmlDocumentStart;
+import io.netty.util.CharsetUtil;
+import org.junit.jupiter.api.Test;
+
+import static org.junit.jupiter.api.Assertions.assertInstanceOf;
+import static org.junit.jupiter.api.Assertions.assertTrue;
+
+public class CodecXmlTest {
+
+    private static final String XML1 = "<?xml version=\"1.0\"?>" +
+            "<!DOCTYPE employee SYSTEM \"employee.dtd\">" +
+            "<?xml-stylesheet type=\"text/css\" href=\"netty.css\"?>" +
+            "<?xml-test ?>" +
+            "<employee xmlns:nettya=\"https://netty.io/netty/a\">" +
+            "<nettya:id>&plusmn;1</nettya:id>\n" +
+            "<name ";
+
+    @Test
+    public void testDecoder() {
+        EmbeddedChannel channel = new EmbeddedChannel(new XmlDecoder());
+        try {
+            assertTrue(channel.writeInbound(Unpooled.copiedBuffer(XML1, CharsetUtil.UTF_8)));
+            Object msg = channel.readInbound();
+            assertInstanceOf(XmlDocumentStart.class, msg);
+        } finally {
+            channel.close();
+        }
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/HandlerSslTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/HandlerSslTest.java
new file mode 100644
index 0000000000..40fa7cc3e3
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/HandlerSslTest.java
@@ -0,0 +1,236 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.bootstrap.Bootstrap;
+import io.netty.bootstrap.ServerBootstrap;
+import io.netty.channel.Channel;
+import io.netty.channel.ChannelInitializer;
+import io.netty.channel.ChannelPipeline;
+import io.netty.channel.ChannelInboundHandlerAdapter;
+import io.netty.channel.MultiThreadIoEventLoopGroup;
+import io.netty.channel.ChannelHandlerContext;
+import io.netty.channel.ChannelFuture;
+import io.netty.channel.nio.NioIoHandler;
+import io.netty.channel.socket.nio.NioServerSocketChannel;
+import io.netty.channel.socket.nio.NioSocketChannel;
+import io.netty.handler.ssl.SslHandler;
+import io.netty.handler.ssl.SslContext;
+import io.netty.handler.ssl.IdentityCipherSuiteFilter;
+import io.netty.handler.ssl.SslProvider;
+import io.netty.handler.ssl.SslHandshakeCompletionEvent;
+import io.netty.handler.ssl.util.InsecureTrustManagerFactory;
+import io.netty.handler.ssl.util.SelfSignedCertificate;
+import io.netty.util.concurrent.Future;
+import io.netty.util.concurrent.ImmediateEventExecutor;
+import io.netty.util.concurrent.Promise;
+import io.netty.util.concurrent.PromiseNotifier;
+import org.junit.jupiter.api.AfterAll;
+import org.junit.jupiter.api.BeforeAll;
+import org.junit.jupiter.api.Test;
+import org.opentest4j.AssertionFailedError;
+
+import javax.net.ssl.SSLException;
+import javax.net.ssl.SSLHandshakeException;
+import javax.net.ssl.SSLParameters;
+import java.net.InetSocketAddress;
+import java.util.concurrent.CountDownLatch;
+import java.util.concurrent.TimeUnit;
+
+import static io.netty.handler.ssl.SslContextBuilder.forServer;
+import static io.netty.handler.ssl.SslContextBuilder.forClient;
+import static org.junit.jupiter.api.Assertions.assertTrue;
+
+public class HandlerSslTest {
+
+    private static SelfSignedCertificate signedCert;
+    private Channel clientChannel;
+    private Channel serverChannel;
+    private Channel serverConnectedChannel;
+    private Throwable clientException;
+    private Throwable serverException;
+    private CountDownLatch serverLatch = new CountDownLatch(1);
+    private CountDownLatch clientLatch = new CountDownLatch(1);
+
+    @BeforeAll
+    public static void setup() throws Exception {
+        signedCert = SelfSignedCertificate.builder().build();
+    }
+
+    @AfterAll
+    public static void cleanCert() {
+        signedCert.delete();
+    }
+
+    @Test
+    public void testSimpleJdkProvider() throws Exception {
+        mySetupClientHostnameValidation(
+                SslProvider.JDK,
+                false);
+        assertTrue(clientLatch.await(10, TimeUnit.SECONDS));
+
+        rethrowIfNotNull(clientException);
+        assertTrue(serverLatch.await(5, TimeUnit.SECONDS));
+        rethrowIfNotNull(serverException);
+    }
+
+    @Test
+    public void testOpenSslProvider() throws Exception {
+        mySetupClientHostnameValidation(
+                SslProvider.OPENSSL,
+                false);
+        assertTrue(clientLatch.await(10, TimeUnit.SECONDS));
+
+        rethrowIfNotNull(clientException);
+        assertTrue(serverLatch.await(5, TimeUnit.SECONDS));
+        rethrowIfNotNull(serverException);
+    }
+
+    private Future<Void> mySetupClientHostnameValidation(SslProvider sslProvider,
+                                                         final boolean failureExpected)
+            throws SSLException, InterruptedException {
+
+        final String expectedHost = "localhost";
+        SslContext serverSslCtx = forServer(signedCert.certificate(), signedCert.privateKey(), null)
+                .sslProvider(sslProvider)
+                .trustManager(InsecureTrustManagerFactory.INSTANCE)
+                .ciphers(null, IdentityCipherSuiteFilter.INSTANCE)
+                .sessionCacheSize(0)
+                .sessionTimeout(0)
+                .build();
+
+        SslContext clientSslCtx = forClient()
+                .sslProvider(sslProvider)
+                .trustManager(signedCert.certificate())
+                .ciphers(null, IdentityCipherSuiteFilter.INSTANCE)
+                .sessionCacheSize(0)
+                .sessionTimeout(0)
+                .build();
+
+        serverConnectedChannel = null;
+        ServerBootstrap sb = new ServerBootstrap();
+        Bootstrap cb = new Bootstrap();
+
+        sb.group(new MultiThreadIoEventLoopGroup(NioIoHandler.newFactory()),
+                new MultiThreadIoEventLoopGroup(NioIoHandler.newFactory()));
+        sb.channel(NioServerSocketChannel.class);
+        sb.childHandler(new ChannelInitializer() {
+            @Override
+            protected void initChannel(Channel ch) throws Exception {
+                ChannelPipeline p = ch.pipeline();
+
+                SslHandler handler = serverSslCtx.newHandler(ch.alloc());
+                p.addLast(handler);
+                p.addLast(new ChannelInboundHandlerAdapter() {
+                    @Override
+                    public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exception {
+                        if (evt == SslHandshakeCompletionEvent.SUCCESS) {
+                            if (failureExpected) {
+                                serverException = new IllegalStateException("handshake complete. expected failure");
+                            }
+                            serverLatch.countDown();
+                        } else if (evt instanceof SslHandshakeCompletionEvent) {
+                            serverException = ((SslHandshakeCompletionEvent) evt).cause();
+                            serverLatch.countDown();
+                        }
+                        ctx.fireUserEventTriggered(evt);
+                    }
+
+                    @Override
+                    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
+                        if (cause.getCause() instanceof SSLHandshakeException) {
+                            serverException = cause.getCause();
+                            serverLatch.countDown();
+                        } else {
+                            serverException = cause;
+                            ctx.fireExceptionCaught(cause);
+                        }
+                    }
+                });
+                serverConnectedChannel = ch;
+            }
+        });
+
+        final Promise<Void> clientWritePromise = ImmediateEventExecutor.INSTANCE.newPromise();
+        cb.group(new MultiThreadIoEventLoopGroup(NioIoHandler.newFactory()));
+        cb.channel(NioSocketChannel.class);
+        cb.handler(new ChannelInitializer<Channel>() {
+            @Override
+            protected void initChannel(Channel ch) throws Exception {
+                ChannelPipeline p = ch.pipeline();
+                InetSocketAddress remoteAddress = (InetSocketAddress) serverChannel.localAddress();
+
+                SslHandler sslHandler = clientSslCtx.newHandler(ch.alloc(), expectedHost, 0);
+
+                SSLParameters parameters = sslHandler.engine().getSSLParameters();
+                parameters.setEndpointIdentificationAlgorithm("HTTPS");
+                sslHandler.engine().setSSLParameters(parameters);
+                p.addLast(sslHandler);
+                p.addLast(new ChannelInboundHandlerAdapter() {
+                    @Override
+                    public void handlerAdded(ChannelHandlerContext ctx) {
+                        // Only write if there is a failure expected. We don't actually care about the write going
+                        // through we just want to verify the local failure condition. This way we don't have to worry
+                        // about verifying the payload and releasing the content on the server side.
+                        if (failureExpected) {
+                            ChannelFuture f = ctx.write(ctx.alloc().buffer(1).writeByte(1));
+                            PromiseNotifier.cascade(f, clientWritePromise);
+                        }
+                    }
+
+                    @Override
+                    public void userEventTriggered(ChannelHandlerContext ctx, Object evt) throws Exception {
+                        if (evt == SslHandshakeCompletionEvent.SUCCESS) {
+                            if (failureExpected) {
+                                clientException = new IllegalStateException("handshake complete. expected failure");
+                            }
+                            clientLatch.countDown();
+                        } else if (evt instanceof SslHandshakeCompletionEvent) {
+                            clientException = ((SslHandshakeCompletionEvent) evt).cause();
+                            clientLatch.countDown();
+                        }
+                        ctx.fireUserEventTriggered(evt);
+                    }
+
+                    @Override
+                    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception {
+                        if (cause.getCause() instanceof SSLHandshakeException) {
+                            clientException = cause.getCause();
+                            clientLatch.countDown();
+                        } else {
+                            ctx.fireExceptionCaught(cause);
+                        }
+                    }
+                });
+            }
+        });
+
+        serverChannel = sb.bind(new InetSocketAddress(expectedHost, 0)).sync().channel();
+        final int port = ((InetSocketAddress) serverChannel.localAddress()).getPort();
+
+        ChannelFuture ccf = cb.connect(new InetSocketAddress(expectedHost, port));
+        assertTrue(ccf.awaitUninterruptibly().isSuccess());
+        clientChannel = ccf.channel();
+        return clientWritePromise;
+    }
+
+    protected static void rethrowIfNotNull(Throwable error) {
+        if (error != null) {
+            throw new AssertionFailedError("Expected no error", error);
+        }
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/MacOsDnsResolverTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/MacOsDnsResolverTest.java
new file mode 100644
index 0000000000..f3278d3a92
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/MacOsDnsResolverTest.java
@@ -0,0 +1,44 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.resolver.dns.DnsServerAddressStream;
+import io.netty.resolver.dns.DnsServerAddressStreamProvider;
+import io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider;
+import org.junit.jupiter.api.Test;
+import org.junit.jupiter.api.condition.EnabledOnOs;
+import org.junit.jupiter.api.condition.OS;
+
+import static org.junit.jupiter.api.Assertions.assertNotNull;
+import static org.junit.jupiter.api.Assertions.assertNotEquals;
+
+@EnabledOnOs(OS.MAC)
+public class MacOsDnsResolverTest {
+
+    @Test
+    public void testSimple() {
+        MacOSDnsServerAddressStreamProvider.ensureAvailability();
+        DnsServerAddressStreamProvider provider = new MacOSDnsServerAddressStreamProvider();
+        DnsServerAddressStream stream = provider.nameServerAddressStream("netty.io");
+        assertNotNull(stream);
+        assertNotEquals(0, stream.size());
+
+        for (int i = 0; i < stream.size(); i++) {
+            assertNotEquals(0, stream.next().getPort());
+        }
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/NativeTransportTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/NativeTransportTest.java
new file mode 100644
index 0000000000..d015ecfa8c
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/NativeTransportTest.java
@@ -0,0 +1,154 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+
+package io.netty.testsuite_jpms.test;
+
+import io.netty.bootstrap.Bootstrap;
+import io.netty.bootstrap.ServerBootstrap;
+import io.netty.buffer.ByteBuf;
+import io.netty.buffer.Unpooled;
+import io.netty.channel.MultiThreadIoEventLoopGroup;
+import io.netty.channel.ChannelInboundHandlerAdapter;
+import io.netty.channel.ChannelHandlerContext;
+import io.netty.channel.ChannelFuture;
+import io.netty.channel.epoll.EpollIoHandler;
+import io.netty.channel.epoll.EpollServerSocketChannel;
+import io.netty.channel.epoll.EpollSocketChannel;
+import io.netty.channel.kqueue.KQueueIoHandler;
+import io.netty.channel.kqueue.KQueueServerSocketChannel;
+import io.netty.channel.kqueue.KQueueSocketChannel;
+import io.netty.channel.ChannelInitializer;
+import io.netty.channel.ChannelPipeline;
+import io.netty.channel.Channel;
+import io.netty.channel.IoHandlerFactory;
+import io.netty.channel.socket.ServerSocketChannel;
+import io.netty.channel.socket.SocketChannel;
+import io.netty.channel.uring.IoUringIoHandler;
+import io.netty.channel.uring.IoUringServerSocketChannel;
+import io.netty.channel.uring.IoUringSocketChannel;
+import org.junit.jupiter.api.Test;
+import org.junit.jupiter.api.condition.EnabledOnOs;
+import org.junit.jupiter.api.condition.OS;
+
+import java.net.InetSocketAddress;
+import java.nio.charset.StandardCharsets;
+import java.util.ArrayList;
+import java.util.Collections;
+import java.util.List;
+
+import static org.junit.jupiter.api.Assertions.assertEquals;
+import static org.junit.jupiter.api.Assertions.assertTrue;
+
+public class NativeTransportTest {
+
+    @EnabledOnOs(OS.MAC)
+    @Test
+    public void testKQueue() throws Exception {
+        mySetupClientHostnameValidation(
+                KQueueIoHandler.newFactory(),
+                KQueueServerSocketChannel.class,
+                KQueueSocketChannel.class);
+    }
+
+    @EnabledOnOs(OS.LINUX)
+    @Test
+    public void testEpoll() throws Exception {
+        mySetupClientHostnameValidation(
+                EpollIoHandler.newFactory(),
+                EpollServerSocketChannel.class,
+                EpollSocketChannel.class);
+    }
+
+    @EnabledOnOs(OS.LINUX)
+    @Test
+    public void testIoUring() throws Exception {
+        mySetupClientHostnameValidation(
+                IoUringIoHandler.newFactory(),
+                IoUringServerSocketChannel.class,
+                IoUringSocketChannel.class);
+    }
+
+    private void mySetupClientHostnameValidation(IoHandlerFactory ioHandlerFactory,
+                                                 Class<? extends ServerSocketChannel> serverSocketChannelFactory,
+                                                 Class<? extends SocketChannel> socketChannelFactory
+    ) throws InterruptedException {
+
+        ServerBootstrap sb = new ServerBootstrap();
+        Bootstrap cb = new Bootstrap();
+
+        sb.group(new MultiThreadIoEventLoopGroup(ioHandlerFactory),
+                new MultiThreadIoEventLoopGroup(ioHandlerFactory));
+        sb.channel(serverSocketChannelFactory);
+        sb.childHandler(new ChannelInitializer() {
+            @Override
+            protected void initChannel(Channel ch) throws Exception {
+                ChannelPipeline p = ch.pipeline();
+
+                p.addLast(new ChannelInboundHandlerAdapter() {
+                    @Override
+                    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
+                        if (msg instanceof ByteBuf) {
+                            ctx.write(msg);
+                        } else {
+                            super.channelRead(ctx, msg);
+                        }
+                    }
+                    @Override
+                    public void channelReadComplete(ChannelHandlerContext ctx) throws Exception {
+                        ctx.flush();
+                    }
+                });
+            }
+        });
+
+        List<String> received = Collections.synchronizedList(new ArrayList<>());
+
+        cb.group(new MultiThreadIoEventLoopGroup(ioHandlerFactory));
+        cb.channel(socketChannelFactory);
+        cb.handler(new ChannelInitializer<Channel>() {
+            @Override
+            protected void initChannel(Channel ch) throws Exception {
+                ChannelPipeline p = ch.pipeline();
+                p.addLast(new ChannelInboundHandlerAdapter() {
+                    @Override
+                    public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception {
+                        if (msg instanceof ByteBuf) {
+                            ByteBuf buff = (ByteBuf) msg;
+                            try {
+                                received.add(buff.toString(StandardCharsets.UTF_8));
+                            } finally {
+                                buff.release();
+                            }
+                        }
+                    }
+                });
+            }
+        });
+
+        Channel serverChannel = sb.bind(new InetSocketAddress("localhost", 0)).sync().channel();
+        final int port = ((InetSocketAddress) serverChannel.localAddress()).getPort();
+
+        ChannelFuture ccf = cb.connect(new InetSocketAddress("localhost", port));
+        assertTrue(ccf.awaitUninterruptibly().isSuccess());
+        Channel clientChannel = ccf.channel();
+        clientChannel.writeAndFlush(Unpooled.copiedBuffer("hello", StandardCharsets.UTF_8)).sync();
+
+        while (received.isEmpty()) {
+            Thread.sleep(100);
+        }
+        assertEquals("hello", received.get(0));
+    }
+}
diff --git a/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/OCSPTest.java b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/OCSPTest.java
new file mode 100644
index 0000000000..7c7c36290d
--- /dev/null
+++ b/testsuite-jpms/src/test/java/io/netty/testsuite_jpms/test/OCSPTest.java
@@ -0,0 +1,101 @@
+/*
+ * Copyright 2017 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+package io.netty.testsuite_jpms.test;
+
+import io.netty.bootstrap.Bootstrap;
+import io.netty.channel.ChannelInitializer;
+import io.netty.channel.ChannelHandlerContext;
+import io.netty.channel.ChannelFuture;
+import io.netty.channel.SimpleChannelInboundHandler;
+import io.netty.channel.ChannelOption;
+import io.netty.channel.EventLoopGroup;
+import io.netty.channel.ChannelPipeline;
+import io.netty.channel.MultiThreadIoEventLoopGroup;
+import io.netty.channel.nio.NioIoHandler;
+import io.netty.channel.socket.SocketChannel;
+import io.netty.channel.socket.nio.NioSocketChannel;
+import io.netty.handler.ssl.SslContext;
+import io.netty.handler.ssl.SslContextBuilder;
+import io.netty.handler.ssl.ocsp.OcspResponse;
+import io.netty.handler.ssl.ocsp.OcspServerCertificateValidator;
+import io.netty.handler.ssl.ocsp.OcspValidationEvent;
+import io.netty.handler.ssl.util.InsecureTrustManagerFactory;
+import org.junit.jupiter.api.Test;
+
+import java.util.concurrent.CountDownLatch;
+import java.util.concurrent.TimeUnit;
+import java.util.concurrent.atomic.AtomicBoolean;
+
+import static org.junit.jupiter.api.Assertions.*;
+
+public class OCSPTest {
+
+    @Test
+    public void testSimpleQueryTest() throws Exception {
+        final AtomicBoolean ocspStatus = new AtomicBoolean();
+        EventLoopGroup eventLoopGroup = new MultiThreadIoEventLoopGroup(NioIoHandler.newFactory());
+
+        try {
+            final CountDownLatch latch = new CountDownLatch(1);
+            final SslContext sslContext = SslContextBuilder.forClient()
+                    .trustManager(InsecureTrustManagerFactory.INSTANCE)
+                    .build();
+
+            Bootstrap bootstrap = new Bootstrap()
+                    .group(eventLoopGroup)
+                    .channel(NioSocketChannel.class)
+                    .option(ChannelOption.TCP_NODELAY, true)
+                    .handler(new ChannelInitializer<SocketChannel>() {
+                        @Override
+                        protected void initChannel(SocketChannel ch) {
+                            ChannelPipeline pipeline = ch.pipeline();
+                            pipeline.addLast(sslContext.newHandler(ch.alloc(), "netty.io", 443));
+                            pipeline.addLast(new OcspServerCertificateValidator(false));
+                            pipeline.addLast(new SimpleChannelInboundHandler<>() {
+                                @Override
+                                protected void channelRead0(ChannelHandlerContext ctx, Object msg) {
+                                    // NOOP
+                                }
+
+                                @Override
+                                public void userEventTriggered(ChannelHandlerContext ctx, Object evt) {
+                                    if (evt instanceof OcspValidationEvent) {
+                                        OcspValidationEvent event = (OcspValidationEvent) evt;
+
+                                        ocspStatus.set(event.response().status() == OcspResponse.Status.VALID);
+                                        ctx.channel().close();
+                                        latch.countDown();
+                                    }
+                                }
+                            });
+                        }
+                    });
+
+            ChannelFuture channelFuture = bootstrap.connect("netty.io", 443);
+            channelFuture.sync();
+
+            // Wait for maximum of 1 minute for Ocsp validation to happen
+            latch.await(1, TimeUnit.MINUTES);
+            assertTrue(ocspStatus.get());
+
+            // Wait for Channel to be closed
+            channelFuture.channel().closeFuture().sync();
+        } finally {
+            eventLoopGroup.shutdownGracefully();
+        }
+    }
+
+}
diff --git a/testsuite-jpms/src/test/java/module-info.java b/testsuite-jpms/src/test/java/module-info.java
new file mode 100644
index 0000000000..0e26d804bf
--- /dev/null
+++ b/testsuite-jpms/src/test/java/module-info.java
@@ -0,0 +1,51 @@
+/*
+ * Copyright 2024 The Netty Project
+ *
+ * The Netty Project licenses this file to you under the Apache License,
+ * version 2.0 (the "License"); you may not use this file except in compliance
+ * with the License. You may obtain a copy of the License at:
+ *
+ *   https://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations
+ * under the License.
+ */
+open module io.netty.testsuite_jpms.test {
+    requires org.junit.jupiter.api;
+    requires io.netty.buffer;
+    requires io.netty.codec;
+    requires io.netty.codec.xml;
+    requires io.netty.codec.smtp;
+    requires io.netty.codec.mqtt;
+    requires io.netty.codec.memcache;
+    requires io.netty.codec.haproxy;
+    requires io.netty.codec.redis;
+    requires io.netty.codec.stomp;
+    requires io.netty.codec.socks;
+    requires io.netty.codec.protobuf;
+    requires io.netty.codec.marshalling;
+    requires io.netty.codec.compression;
+    requires io.netty.common;
+    requires io.netty.handler;
+    requires io.netty.handler.ssl.ocsp;
+    requires io.netty.transport;
+    requires io.netty.transport.classes.kqueue;
+    requires io.netty.transport.classes.epoll;
+    requires io.netty.transport.classes.io_uring;
+    requires io.netty.resolver.dns.classes.macos;
+    requires io.netty.resolver.dns;
+    requires io.netty.codec.http;
+    requires io.netty.codec.http2;
+    requires jboss.marshalling;
+    requires org.bouncycastle.pkix;
+
+    requires static org.slf4j;
+    requires static ch.qos.logback.core;
+    requires static ch.qos.logback.classic;
+    requires static org.apache.logging.log4j;
+    requires static org.apache.logging.log4j.core;
+    requires static org.apache.commons.logging;
+}
diff --git a/testsuite-native-image-client-runtime-init/pom.xml b/testsuite-native-image-client-runtime-init/pom.xml
index 09ab0621d1..0aa7829f20 100644
--- a/testsuite-native-image-client-runtime-init/pom.xml
+++ b/testsuite-native-image-client-runtime-init/pom.xml
@@ -32,7 +32,6 @@
     <revapi.skip>true</revapi.skip>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_native_image_client_runtime_init</javaModuleName>
   </properties>
 
   <dependencies>
diff --git a/testsuite-native-image-client/pom.xml b/testsuite-native-image-client/pom.xml
index 73fe68c178..fa7abf17d0 100644
--- a/testsuite-native-image-client/pom.xml
+++ b/testsuite-native-image-client/pom.xml
@@ -32,7 +32,6 @@
     <revapi.skip>true</revapi.skip>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_native_image_client</javaModuleName>
   </properties>
 
   <dependencies>
diff --git a/testsuite-native-image/pom.xml b/testsuite-native-image/pom.xml
index 5d599b9aa4..91a840926e 100644
--- a/testsuite-native-image/pom.xml
+++ b/testsuite-native-image/pom.xml
@@ -32,7 +32,6 @@
     <revapi.skip>true</revapi.skip>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_native_image</javaModuleName>
   </properties>
 
   <dependencies>
diff --git a/testsuite-native/pom.xml b/testsuite-native/pom.xml
index 9000f89c73..287f194160 100644
--- a/testsuite-native/pom.xml
+++ b/testsuite-native/pom.xml
@@ -33,7 +33,6 @@
     <skipNativeTestsuite>false</skipNativeTestsuite>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_native</javaModuleName>
   </properties>
 
   <dependencies>
diff --git a/testsuite-osgi/pom.xml b/testsuite-osgi/pom.xml
index 9e72145f99..6696eb2984 100644
--- a/testsuite-osgi/pom.xml
+++ b/testsuite-osgi/pom.xml
@@ -33,7 +33,6 @@
     <argLine.java9.extras>--add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/jdk.internal.loader=ALL-UNNAMED --add-opens=java.base/java.net=ALL-UNNAMED --add-opens=java.base/java.security=ALL-UNNAMED</argLine.java9.extras>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_osgi</javaModuleName>
   </properties>
 
   <profiles>
diff --git a/testsuite-shading/pom.xml b/testsuite-shading/pom.xml
index 298c194c00..19f4b18fb1 100644
--- a/testsuite-shading/pom.xml
+++ b/testsuite-shading/pom.xml
@@ -42,7 +42,6 @@
     <revapi.skip>true</revapi.skip>
     <!-- Do not deploy this module -->
     <skipDeploy>true</skipDeploy>
-    <javaModuleName>io.netty.testsuite_shading</javaModuleName>
   </properties>
 
   <build>
diff --git a/testsuite/pom.xml b/testsuite/pom.xml
index dd992323ec..36edce09c8 100644
--- a/testsuite/pom.xml
+++ b/testsuite/pom.xml
@@ -127,7 +127,6 @@
     <!-- Needed for SSL tests as these use the SelfSignedCertificate --> 
     <argLine.java9.extras>--add-exports java.base/sun.security.x509=ALL-UNNAMED</argLine.java9.extras>
     <revapi.skip>true</revapi.skip>
-    <javaModuleName>io.netty.testsuite</javaModuleName>
   </properties>
 
   <build>
diff --git a/transport-classes-epoll/pom.xml b/transport-classes-epoll/pom.xml
index 43126f9904..e073f66332 100644
--- a/transport-classes-epoll/pom.xml
+++ b/transport-classes-epoll/pom.xml
@@ -59,6 +59,15 @@
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
       </plugin>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
     </plugins>
   </build>
 </project>
diff --git a/transport-classes-epoll/src/main/java/module-info.yml b/transport-classes-epoll/src/main/java/module-info.yml
new file mode 100644
index 0000000000..f91e9f08d7
--- /dev/null
+++ b/transport-classes-epoll/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.transport.unix.common
+  - module: io.netty.transport
+  - module: io.netty.buffer
diff --git a/transport-classes-io_uring/pom.xml b/transport-classes-io_uring/pom.xml
index c2f90f6d77..5eddc4fa25 100644
--- a/transport-classes-io_uring/pom.xml
+++ b/transport-classes-io_uring/pom.xml
@@ -55,6 +55,15 @@
 
   <build>
     <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
       </plugin>
diff --git a/transport-classes-io_uring/src/main/java/module-info.yml b/transport-classes-io_uring/src/main/java/module-info.yml
new file mode 100644
index 0000000000..f91e9f08d7
--- /dev/null
+++ b/transport-classes-io_uring/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.transport.unix.common
+  - module: io.netty.transport
+  - module: io.netty.buffer
diff --git a/transport-classes-kqueue/pom.xml b/transport-classes-kqueue/pom.xml
index 89a4486997..176bbe315e 100644
--- a/transport-classes-kqueue/pom.xml
+++ b/transport-classes-kqueue/pom.xml
@@ -58,6 +58,15 @@
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
       </plugin>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
     </plugins>
   </build>
 </project>
diff --git a/transport-classes-kqueue/src/main/java/module-info.yml b/transport-classes-kqueue/src/main/java/module-info.yml
new file mode 100644
index 0000000000..f91e9f08d7
--- /dev/null
+++ b/transport-classes-kqueue/src/main/java/module-info.yml
@@ -0,0 +1,20 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.common
+  - module: io.netty.transport.unix.common
+  - module: io.netty.transport
+  - module: io.netty.buffer
diff --git a/transport-native-epoll/pom.xml b/transport-native-epoll/pom.xml
index 779f62c268..c966c7adbf 100644
--- a/transport-native-epoll/pom.xml
+++ b/transport-native-epoll/pom.xml
@@ -28,7 +28,8 @@
 
   <properties>
     <javaModuleNameClassifier>${os.detected.name}.${os.detected.arch}</javaModuleNameClassifier>
-    <javaModuleName>io.netty.transport.epoll.${javaModuleNameClassifier}</javaModuleName>
+    <fallbackModuleName>io.netty.transport.epoll</fallbackModuleName>
+    <javaModuleName>${fallbackModuleName}.${javaModuleNameClassifier}</javaModuleName>
     <!-- Needed as we use SelfSignedCertificate in our tests -->
     <argLine.java9.extras>--add-exports java.base/sun.security.x509=ALL-UNNAMED</argLine.java9.extras>
     <!-- Always check JNI during test run so we catch bugs that could cause crashes -->
@@ -41,6 +42,7 @@
     <jni.compiler.args.ldflags>LDFLAGS=-Wl,-z,relro -Wl,-z,now -Wl,--as-needed -Wl,--gc-sections -L${unix.common.lib.unpacked.dir}</jni.compiler.args.ldflags>
     <jni.compiler.args.libs>LIBS=-Wl,--whole-archive -l${unix.common.lib.name} -Wl,--no-whole-archive -ldl</jni.compiler.args.libs>
     <nativeSourceDirectory>${project.basedir}/src/main/c</nativeSourceDirectory>
+    <fallbackOutputDirectory>${project.build.directory}/fallback-classes</fallbackOutputDirectory>
     <skipTests>true</skipTests>
   </properties>
 
@@ -190,7 +192,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_transport_native_epoll_${os.detected.arch}.so; osname=Linux; processor=${os.detected.arch},*</Bundle-NativeCode>
                       <Fragment-Host>io.netty.transport-classes-epoll</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -344,7 +346,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_transport_native_epoll_aarch_64.so; osname=Linux; processor=aarch64,*</Bundle-NativeCode>
                       <Fragment-Host>io.netty.transport-classes-epoll</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -504,7 +506,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_transport_native_epoll_riscv64.so; osname=Linux; processor=riscv64,*</Bundle-NativeCode>
                       <Fragment-Host>io.netty.transport-classes-epoll</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -611,6 +613,49 @@
           </execution>
         </executions>
       </plugin>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <executions>
+          <!-- Copy files for the fallback JAR that does not contain the native library
+               and a different module declaration -->
+          <execution>
+            <id>copy-to-native-output</id>
+            <phase>process-test-resources</phase>
+            <goals>
+              <goal>run</goal>
+            </goals>
+            <configuration>
+              <target>
+                <taskdef resource="net/sf/antcontrib/antcontrib.properties" />
+
+                <copy todir="${fallbackOutputDirectory}" includeEmptyDirs="false">
+                  <zipfileset dir="${project.build.outputDirectory}" excludes="META-INF/versions/**,META-INF/native/**" />
+                </copy>
+              </target>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+          <execution>
+            <id>fallback-module-info</id>
+            <phase>process-classes</phase>
+            <configuration>
+              <moduleName>${fallbackModuleName}</moduleName>
+              <outputDirectory>${fallbackOutputDirectory}/META-INF/versions/11/</outputDirectory>
+            </configuration>
+            <goals>
+              <goal>generate</goal>
+            </goals>
+          </execution>
+        </executions>
+      </plugin>
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
         <executions>
@@ -618,9 +663,7 @@
           <execution>
             <id>default-jar</id>
             <configuration>
-              <excludes>
-                <exclude>META-INF/native/**</exclude>
-              </excludes>
+              <classesDirectory>${fallbackOutputDirectory}</classesDirectory>
             </configuration>
           </execution>
         </executions>
diff --git a/transport-native-io_uring/pom.xml b/transport-native-io_uring/pom.xml
index 9ab573380e..e369a0d1ea 100644
--- a/transport-native-io_uring/pom.xml
+++ b/transport-native-io_uring/pom.xml
@@ -28,7 +28,8 @@
 
   <properties>
     <javaModuleNameClassifier>${os.detected.name}.${os.detected.arch}</javaModuleNameClassifier>
-    <javaModuleName>io.netty.transport.io_uring</javaModuleName>
+    <fallbackModuleName>io.netty.transport.io_uring</fallbackModuleName>
+    <javaModuleName>${fallbackModuleName}.${javaModuleNameClassifier}</javaModuleName>
     <unix.common.lib.name>netty-unix-common</unix.common.lib.name>
     <unix.common.lib.dir>${project.build.directory}/unix-common-lib</unix.common.lib.dir>
     <unix.common.lib.unpacked.dir>${unix.common.lib.dir}/META-INF/native/lib</unix.common.lib.unpacked.dir>
@@ -36,6 +37,7 @@
     <jni.compiler.args.cflags>CFLAGS=-O3 -Werror -fno-omit-frame-pointer -Wunused-variable -fvisibility=hidden -I${unix.common.include.unpacked.dir}</jni.compiler.args.cflags>
     <jni.compiler.args.ldflags>LDFLAGS=-L${unix.common.lib.unpacked.dir} -Wl,--no-as-needed -lrt -ldl -Wl,--whole-archive -l${unix.common.lib.name} -Wl,--no-whole-archive</jni.compiler.args.ldflags>
     <nativeSourceDirectory>${project.basedir}/src/main/c</nativeSourceDirectory>
+    <fallbackOutputDirectory>${project.build.directory}/fallback-classes</fallbackOutputDirectory>
     <skipTests>true</skipTests>
     <jniArch>${os.detected.arch}</jniArch>
     <jni.classifier>${os.detected.name}-${jniArch}</jni.classifier>
@@ -152,7 +154,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_transport_native_io_uring_${os.detected.arch}.so; osname=Linux; processor=${os.detected.arch},*</Bundle-NativeCode>
                       <Fragment-Host>io.netty.transport-classes-io_uring</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -366,6 +368,26 @@
           </execution>
         </executions>
       </plugin>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+          <execution>
+            <id>fallback-module-info</id>
+            <phase>process-classes</phase>
+            <configuration>
+              <moduleName>${fallbackModuleName}</moduleName>
+              <outputDirectory>${fallbackOutputDirectory}/META-INF/versions/11/</outputDirectory>
+            </configuration>
+            <goals>
+              <goal>generate</goal>
+            </goals>
+          </execution>
+        </executions>
+      </plugin>
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
         <executions>
@@ -373,16 +395,14 @@
           <execution>
             <id>default-jar</id>
             <configuration>
-              <excludes>
-                <exclude>META-INF/native/**</exclude>
-              </excludes>
+              <classesDirectory>${fallbackOutputDirectory}</classesDirectory>
               <archive>
                 <manifest>
                   <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                   <addDefaultSpecificationEntries>true</addDefaultSpecificationEntries>
                 </manifest>
                 <manifestEntries>
-                  <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                  <Multi-Release>true</Multi-Release>
                 </manifestEntries>
                 <index>true</index>
                 <manifestFile>${project.build.directory}/manifests/MANIFEST.MF</manifestFile>
@@ -395,6 +415,24 @@
       <plugin>
         <artifactId>maven-antrun-plugin</artifactId>
         <executions>
+          <!-- Copy files for the fallback JAR that does not contain the native library
+               and a different module declaration -->
+          <execution>
+            <id>copy-to-native-output</id>
+            <phase>process-test-resources</phase>
+            <goals>
+              <goal>run</goal>
+            </goals>
+            <configuration>
+              <target>
+                <taskdef resource="net/sf/antcontrib/antcontrib.properties" />
+
+                <copy todir="${fallbackOutputDirectory}" includeEmptyDirs="false">
+                  <zipfileset dir="${project.build.outputDirectory}" excludes="META-INF/versions/**,META-INF/native/**" />
+                </copy>
+              </target>
+            </configuration>
+          </execution>
           <!-- Copy the manifest file that we populated so far so we can use it as a starting point when generating the jars and adding more things to it. -->
           <execution>
             <id>copy-manifest</id>
diff --git a/transport-native-kqueue/pom.xml b/transport-native-kqueue/pom.xml
index 54864a64c4..97a419b30d 100644
--- a/transport-native-kqueue/pom.xml
+++ b/transport-native-kqueue/pom.xml
@@ -112,7 +112,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_transport_native_kqueue_${os.detected.arch}.jnilib; osname=MacOSX; processor=${os.detected.arch}</Bundle-NativeCode>
                       <Fragment-Host>io.netty.transport-classes-kqueue</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -221,7 +221,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_transport_native_kqueue_aarch_64.jnilib; osname=MacOSX; processor=aarch64</Bundle-NativeCode>
                       <Fragment-Host>io.netty.transport-classes-kqueue</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -330,7 +330,7 @@
                     <manifestEntries>
                       <Bundle-NativeCode>META-INF/native/libnetty_transport_native_kqueue_x86_64.jnilib; osname=MacOSX; processor=x86_64</Bundle-NativeCode>
                       <Fragment-Host>io.netty.transport-classes-kqueue</Fragment-Host>
-                      <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                      <Multi-Release>true</Multi-Release>
                     </manifestEntries>
                     <index>true</index>
                     <manifestFile>${project.build.outputDirectory}/META-INF/MANIFEST.MF</manifestFile>
@@ -592,7 +592,8 @@
 
   <properties>
     <javaModuleNameClassifier>${os.detected.name}.${os.detected.arch}</javaModuleNameClassifier>
-    <javaModuleName>io.netty.transport.kqueue.${javaModuleNameClassifier}</javaModuleName>
+    <fallbackModuleName>io.netty.transport.kqueue</fallbackModuleName>
+    <javaModuleName>${fallbackModuleName}.${javaModuleNameClassifier}</javaModuleName>
     <!-- Needed as we use SelfSignedCertificate in our tests -->
     <argLine.java9.extras>--add-exports java.base/sun.security.x509=ALL-UNNAMED</argLine.java9.extras>
     <!-- Always check JNI during test run so we catch bugs that could cause crashes -->
@@ -604,6 +605,7 @@
     <jni.compiler.args.cflags>CFLAGS=-O3 -Werror -fno-omit-frame-pointer -Wunused-variable -fvisibility=hidden -I${unix.common.include.unpacked.dir}</jni.compiler.args.cflags>
     <jni.compiler.args.ldflags>LDFLAGS=-z now -L${unix.common.lib.unpacked.dir} -Wl,--whole-archive -l${unix.common.lib.name} -Wl,--no-whole-archive</jni.compiler.args.ldflags>
     <nativeSourceDirectory>${project.basedir}/src/main/c</nativeSourceDirectory>
+    <fallbackOutputDirectory>${project.build.directory}/fallback-classes</fallbackOutputDirectory>
   </properties>
 
   <dependencies>
@@ -679,6 +681,49 @@
           </execution>
         </executions>
       </plugin>
+      <plugin>
+        <artifactId>maven-antrun-plugin</artifactId>
+        <executions>
+          <!-- Copy files for the fallback JAR that does not contain the native library
+               and a different module declaration -->
+          <execution>
+            <id>copy-to-native-output</id>
+            <phase>process-test-resources</phase>
+            <goals>
+              <goal>run</goal>
+            </goals>
+            <configuration>
+              <target>
+                <taskdef resource="net/sf/antcontrib/antcontrib.properties" />
+
+                <copy todir="${fallbackOutputDirectory}" includeEmptyDirs="false">
+                  <zipfileset dir="${project.build.outputDirectory}" excludes="META-INF/versions/**,META-INF/native/**" />
+                </copy>
+              </target>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+          <execution>
+            <id>fallback-module-info</id>
+            <phase>process-classes</phase>
+            <configuration>
+              <moduleName>${fallbackModuleName}</moduleName>
+              <outputDirectory>${fallbackOutputDirectory}/META-INF/versions/11/</outputDirectory>
+            </configuration>
+            <goals>
+              <goal>generate</goal>
+            </goals>
+          </execution>
+        </executions>
+      </plugin>
       <plugin>
         <artifactId>maven-jar-plugin</artifactId>
         <executions>
@@ -686,9 +731,7 @@
           <execution>
             <id>default-jar</id>
             <configuration>
-              <excludes>
-                <exclude>META-INF/native/**</exclude>
-              </excludes>
+              <classesDirectory>${fallbackOutputDirectory}</classesDirectory>
             </configuration>
           </execution>
         </executions>
diff --git a/transport-native-unix-common/pom.xml b/transport-native-unix-common/pom.xml
index 74b53edeed..ef007e6220 100644
--- a/transport-native-unix-common/pom.xml
+++ b/transport-native-unix-common/pom.xml
@@ -91,6 +91,16 @@
           </execution>
         </executions>
       </plugin>
+
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
     </plugins>
   </build>
 
@@ -695,4 +705,5 @@
       <version>${project.version}</version>
     </dependency>
   </dependencies>
+
 </project>
diff --git a/transport-native-unix-common/src/main/java/module-info.yml b/transport-native-unix-common/src/main/java/module-info.yml
new file mode 100644
index 0000000000..5052087bb3
--- /dev/null
+++ b/transport-native-unix-common/src/main/java/module-info.yml
@@ -0,0 +1,19 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module: io.netty.buffer
+  - module: io.netty.common
+  - module: io.netty.transport
diff --git a/transport-rxtx/pom.xml b/transport-rxtx/pom.xml
index 0d1e6b5cc7..aa0081c370 100644
--- a/transport-rxtx/pom.xml
+++ b/transport-rxtx/pom.xml
@@ -50,5 +50,25 @@
       <artifactId>rxtx</artifactId>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <artifactId>maven-jar-plugin</artifactId>
+        <executions>
+          <execution>
+            <id>default-jar</id>
+            <configuration>
+              <archive>
+                <manifestEntries>
+                  <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                </manifestEntries>
+              </archive>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
 </project>
 
diff --git a/transport-sctp/pom.xml b/transport-sctp/pom.xml
index 85970e3238..36a87b0458 100644
--- a/transport-sctp/pom.xml
+++ b/transport-sctp/pom.xml
@@ -78,6 +78,11 @@
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-jar-plugin</artifactId>
         <configuration>
+          <archive>
+            <manifestEntries>
+              <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+            </manifestEntries>
+          </archive>
           <excludes>
             <!-- dont want to include com.sun in here -->
             <exclude>com/**</exclude>
diff --git a/transport-udt/pom.xml b/transport-udt/pom.xml
index ac95d62d62..a6d4b6ed28 100644
--- a/transport-udt/pom.xml
+++ b/transport-udt/pom.xml
@@ -85,6 +85,21 @@
           <reuseForks>false</reuseForks>
         </configuration>
       </plugin>
+      <plugin>
+        <artifactId>maven-jar-plugin</artifactId>
+        <executions>
+          <execution>
+            <id>default-jar</id>
+            <configuration>
+              <archive>
+                <manifestEntries>
+                  <Automatic-Module-Name>${javaModuleName}</Automatic-Module-Name>
+                </manifestEntries>
+              </archive>
+            </configuration>
+          </execution>
+        </executions>
+      </plugin>
     </plugins>
   </build>
 </project>
diff --git a/transport/pom.xml b/transport/pom.xml
index bfe4e095aa..ca1550a035 100644
--- a/transport/pom.xml
+++ b/transport/pom.xml
@@ -62,5 +62,20 @@
       <artifactId>gson</artifactId>
     </dependency>
   </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>io.github.dmlloyd.module-info</groupId>
+        <artifactId>module-info</artifactId>
+        <executions>
+          <execution>
+            <id>module-info</id>
+          </execution>
+        </executions>
+      </plugin>
+    </plugins>
+  </build>
+
 </project>
 
diff --git a/transport/src/main/java/module-info.yml b/transport/src/main/java/module-info.yml
new file mode 100644
index 0000000000..cd2048b47d
--- /dev/null
+++ b/transport/src/main/java/module-info.yml
@@ -0,0 +1,19 @@
+# ----------------------------------------------------------------------------
+# Copyright 2024 The Netty Project
+#
+# The Netty Project licenses this file to you under the Apache License,
+# version 2.0 (the "License"); you may not use this file except in compliance
+# with the License. You may obtain a copy of the License at:
+#
+#   https://www.apache.org/licenses/LICENSE-2.0
+#
+# Unless required by applicable law or agreed to in writing, software
+# distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+# WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+# License for the specific language governing permissions and limitations
+# under the License.
+# ----------------------------------------------------------------------------
+requires:
+  - module:  io.netty.resolver
+  - module: io.netty.common
+  - module: io.netty.buffer
