{"url":"https://api.github.com/repos/rollup/rollup/issues/931","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/931/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/931/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/931/events","html_url":"https://github.com/rollup/rollup/issues/931","id":176506707,"node_id":"MDU6SXNzdWUxNzY1MDY3MDc=","number":931,"title":"Empty statements unexpectedly removed.","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2016-09-12T23:01:40Z","updated_at":"2016-09-13T17:07:02Z","closed_at":"2016-09-13T16:52:49Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I expected the following code to be unchanged by Rollup:\n\n``` js\nvar result = 0;\n(function(test) {\n  if (test === 0);\n  else ++result;\n})(0);\nconsole.log(result);\n```\n\nHowever, the resulting output drops the semicolon from the if block, resulting in invalid JavaScript:\n\n``` js\nvar result = 0;\n(function(test) {\n  if (test === 0)\n  else ++result;\n})(0);\nconsole.log(result);\n```\n\n```\n  else ++result;\n  ^^^^\nSyntaxError: Unexpected token else\n```\n\nYou can workaround this issue by using an empty block instead of an empty statement:\n\n``` js\nvar result = 0;\n(function(test) {\n  if (test === 0) {}\n  else ++result;\n})(0);\nconsole.log(result);\n```\n\nNaturally, the problem also applies to else-if and else:\n\n``` js\nvar result = 0;\n(function(test) {\n  if (test === 0) {}\n  else if (test === 1);\n  else;\n})(0);\nconsole.log(result);\n```\n\nWhich results in:\n\n``` js\nvar result = 0;\n(function(test) {\n  if (test === 0) {}\n  else if (test === 1)\n  else\n})(0);\nconsole.log(result);\n```\n\n```\n  else\n  ^^^^\nSyntaxError: Unexpected token else\n```\n\nThis example is slightly more complicated than it should be (using the IIFE) because #930 was causing the simpler test case to be removed entirely.\n","closed_by":{"login":"eventualbuddha","id":1938,"node_id":"MDQ6VXNlcjE5Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1938?v=4","gravatar_id":"","url":"https://api.github.com/users/eventualbuddha","html_url":"https://github.com/eventualbuddha","followers_url":"https://api.github.com/users/eventualbuddha/followers","following_url":"https://api.github.com/users/eventualbuddha/following{/other_user}","gists_url":"https://api.github.com/users/eventualbuddha/gists{/gist_id}","starred_url":"https://api.github.com/users/eventualbuddha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eventualbuddha/subscriptions","organizations_url":"https://api.github.com/users/eventualbuddha/orgs","repos_url":"https://api.github.com/users/eventualbuddha/repos","events_url":"https://api.github.com/users/eventualbuddha/events{/privacy}","received_events_url":"https://api.github.com/users/eventualbuddha/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/931/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/931/timeline","performed_via_github_app":null,"state_reason":"completed"}