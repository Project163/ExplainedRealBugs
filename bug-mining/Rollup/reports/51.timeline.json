[{"id":529572761,"node_id":"MDEyOkxhYmVsZWRFdmVudDUyOTU3Mjc2MQ==","url":"https://api.github.com/repos/rollup/rollup/issues/events/529572761","actor":{"login":"Victorystick","id":703602,"node_id":"MDQ6VXNlcjcwMzYwMg==","avatar_url":"https://avatars.githubusercontent.com/u/703602?v=4","gravatar_id":"","url":"https://api.github.com/users/Victorystick","html_url":"https://github.com/Victorystick","followers_url":"https://api.github.com/users/Victorystick/followers","following_url":"https://api.github.com/users/Victorystick/following{/other_user}","gists_url":"https://api.github.com/users/Victorystick/gists{/gist_id}","starred_url":"https://api.github.com/users/Victorystick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Victorystick/subscriptions","organizations_url":"https://api.github.com/users/Victorystick/orgs","repos_url":"https://api.github.com/users/Victorystick/repos","events_url":"https://api.github.com/users/Victorystick/events{/privacy}","received_events_url":"https://api.github.com/users/Victorystick/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-01-28T12:09:19Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/176151387","html_url":"https://github.com/rollup/rollup/issues/476#issuecomment-176151387","issue_url":"https://api.github.com/repos/rollup/rollup/issues/476","id":176151387,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjE1MTM4Nw==","user":{"login":"Victorystick","id":703602,"node_id":"MDQ6VXNlcjcwMzYwMg==","avatar_url":"https://avatars.githubusercontent.com/u/703602?v=4","gravatar_id":"","url":"https://api.github.com/users/Victorystick","html_url":"https://github.com/Victorystick","followers_url":"https://api.github.com/users/Victorystick/followers","following_url":"https://api.github.com/users/Victorystick/following{/other_user}","gists_url":"https://api.github.com/users/Victorystick/gists{/gist_id}","starred_url":"https://api.github.com/users/Victorystick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Victorystick/subscriptions","organizations_url":"https://api.github.com/users/Victorystick/orgs","repos_url":"https://api.github.com/users/Victorystick/repos","events_url":"https://api.github.com/users/Victorystick/events{/privacy}","received_events_url":"https://api.github.com/users/Victorystick/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-28T12:16:24Z","updated_at":"2016-01-28T12:16:24Z","body":"@Pauan Thank you for reporting this issue.\n\nFor reference, here is the offending code:\n\n``` js\nconst foo = {};\n\nconst set = (key, value) => {\n  foo[key] = value;\n};\n\nset(\"foo\", 1);\nset(\"bar\", 2);\nset(\"qux\", 3);\n\nconsole.log(foo);\n```\n\nIt's curious that the resulting core preserves the _definition_ of `set` as it's never used in the output. Removing the `console.log` also results in the definition of `set` being removed.\n\nReplacing the `set` arrow-function _expression_ with a function _declaration_ like so, `set` is [completely removed from the output](http://rollupjs.org/#%7B%22options%22%3A%7B%22format%22%3A%22amd%22%2C%22moduleName%22%3A%22myBundle%22%2C%22globals%22%3A%7B%7D%2C%22moduleId%22%3A%22%22%7D%2C%22modules%22%3A%5B%7B%22name%22%3A%22main.js%22%2C%22code%22%3A%22const%20foo%20%3D%20%7B%7D%3B%5Cn%5Cnfunction%20set%28%20key%2C%20value%20%29%20%7B%5Cn%20%20foo%5Bkey%5D%20%3D%20value%3B%5Cn%7D%3B%5Cn%5Cnset%28%5C%22foo%5C%22%2C%201%29%3B%5Cnset%28%5C%22bar%5C%22%2C%202%29%3B%5Cnset%28%5C%22qux%5C%22%2C%203%29%3B%5Cn%5Cnconsole.log%28foo%29%3B%22%7D%5D%7D).\n\n``` js\nconst foo = {};\n\nfunction set( key, value ) {\n  foo[key] = value;\n}\n\nset(\"foo\", 1);\nset(\"bar\", 2);\nset(\"qux\", 3);\n\nconsole.log(foo);\n```\n\nI suspect that Rollup preserves the definition of the arrow function above, as it believes that the _definition itself_ somehow _modifies_ `foo`; while the calls to `set` don't. I've no idea why every reference to `set` is removed in the second example.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/176151387/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Victorystick","id":703602,"node_id":"MDQ6VXNlcjcwMzYwMg==","avatar_url":"https://avatars.githubusercontent.com/u/703602?v=4","gravatar_id":"","url":"https://api.github.com/users/Victorystick","html_url":"https://github.com/Victorystick","followers_url":"https://api.github.com/users/Victorystick/followers","following_url":"https://api.github.com/users/Victorystick/following{/other_user}","gists_url":"https://api.github.com/users/Victorystick/gists{/gist_id}","starred_url":"https://api.github.com/users/Victorystick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Victorystick/subscriptions","organizations_url":"https://api.github.com/users/Victorystick/orgs","repos_url":"https://api.github.com/users/Victorystick/repos","events_url":"https://api.github.com/users/Victorystick/events{/privacy}","received_events_url":"https://api.github.com/users/Victorystick/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":529581481,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTI5NTgxNDgx","url":"https://api.github.com/repos/rollup/rollup/issues/events/529581481","actor":{"login":"Pauan","id":97238,"node_id":"MDQ6VXNlcjk3MjM4","avatar_url":"https://avatars.githubusercontent.com/u/97238?v=4","gravatar_id":"","url":"https://api.github.com/users/Pauan","html_url":"https://github.com/Pauan","followers_url":"https://api.github.com/users/Pauan/followers","following_url":"https://api.github.com/users/Pauan/following{/other_user}","gists_url":"https://api.github.com/users/Pauan/gists{/gist_id}","starred_url":"https://api.github.com/users/Pauan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pauan/subscriptions","organizations_url":"https://api.github.com/users/Pauan/orgs","repos_url":"https://api.github.com/users/Pauan/repos","events_url":"https://api.github.com/users/Pauan/events{/privacy}","received_events_url":"https://api.github.com/users/Pauan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-01-28T12:16:24Z","performed_via_github_app":null},{"id":529581482,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUyOTU4MTQ4Mg==","url":"https://api.github.com/repos/rollup/rollup/issues/events/529581482","actor":{"login":"Pauan","id":97238,"node_id":"MDQ6VXNlcjk3MjM4","avatar_url":"https://avatars.githubusercontent.com/u/97238?v=4","gravatar_id":"","url":"https://api.github.com/users/Pauan","html_url":"https://github.com/Pauan","followers_url":"https://api.github.com/users/Pauan/followers","following_url":"https://api.github.com/users/Pauan/following{/other_user}","gists_url":"https://api.github.com/users/Pauan/gists{/gist_id}","starred_url":"https://api.github.com/users/Pauan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pauan/subscriptions","organizations_url":"https://api.github.com/users/Pauan/orgs","repos_url":"https://api.github.com/users/Pauan/repos","events_url":"https://api.github.com/users/Pauan/events{/privacy}","received_events_url":"https://api.github.com/users/Pauan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-01-28T12:16:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/176264789","html_url":"https://github.com/rollup/rollup/issues/476#issuecomment-176264789","issue_url":"https://api.github.com/repos/rollup/rollup/issues/476","id":176264789,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NjI2NDc4OQ==","user":{"login":"eventualbuddha","id":1938,"node_id":"MDQ6VXNlcjE5Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1938?v=4","gravatar_id":"","url":"https://api.github.com/users/eventualbuddha","html_url":"https://github.com/eventualbuddha","followers_url":"https://api.github.com/users/eventualbuddha/followers","following_url":"https://api.github.com/users/eventualbuddha/following{/other_user}","gists_url":"https://api.github.com/users/eventualbuddha/gists{/gist_id}","starred_url":"https://api.github.com/users/eventualbuddha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eventualbuddha/subscriptions","organizations_url":"https://api.github.com/users/eventualbuddha/orgs","repos_url":"https://api.github.com/users/eventualbuddha/repos","events_url":"https://api.github.com/users/eventualbuddha/events{/privacy}","received_events_url":"https://api.github.com/users/eventualbuddha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-28T16:29:40Z","updated_at":"2016-01-28T16:29:40Z","body":"Interestingly, commenting out `const foo = {};` also \"fixes\" it. I tried to go back in the rollup git history to see when this broke but I can't always get it to reliably build. Perhaps @Rich-Harris can explain why I'm getting missing modules (i.e. minimist, ansi-styles) with this script:\n\n``` sh\n#!/usr/bin/env bash\n\nset -e\n\ncat <<EOS > file.js\nconst foo = {};\n\nconst set = (key, value) => {\n  foo[key] = value;\n};\n\nset(\"foo\", 1);\nset(\"bar\", 2);\nset(\"qux\", 3);\n\nconsole.log(foo);\nEOS\n\ngit clean -dfx test\nnpm install\nnpm run build\n./bin/rollup file.js | grep qux\necho PASS\n```\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/176264789/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eventualbuddha","id":1938,"node_id":"MDQ6VXNlcjE5Mzg=","avatar_url":"https://avatars.githubusercontent.com/u/1938?v=4","gravatar_id":"","url":"https://api.github.com/users/eventualbuddha","html_url":"https://github.com/eventualbuddha","followers_url":"https://api.github.com/users/eventualbuddha/followers","following_url":"https://api.github.com/users/eventualbuddha/following{/other_user}","gists_url":"https://api.github.com/users/eventualbuddha/gists{/gist_id}","starred_url":"https://api.github.com/users/eventualbuddha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eventualbuddha/subscriptions","organizations_url":"https://api.github.com/users/eventualbuddha/orgs","repos_url":"https://api.github.com/users/eventualbuddha/repos","events_url":"https://api.github.com/users/eventualbuddha/events{/privacy}","received_events_url":"https://api.github.com/users/eventualbuddha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":529938719,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTI5OTM4NzE5","url":"https://api.github.com/repos/rollup/rollup/issues/events/529938719","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-01-28T16:29:40Z","performed_via_github_app":null},{"id":529938720,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUyOTkzODcyMA==","url":"https://api.github.com/repos/rollup/rollup/issues/events/529938720","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-01-28T16:29:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/177658434","html_url":"https://github.com/rollup/rollup/issues/476#issuecomment-177658434","issue_url":"https://api.github.com/repos/rollup/rollup/issues/476","id":177658434,"node_id":"MDEyOklzc3VlQ29tbWVudDE3NzY1ODQzNA==","user":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-31T23:20:09Z","updated_at":"2016-02-01T10:36:23Z","body":"Rollup is not acknowledging the side effect in the MemberExpression of the left side of the AssignmentExpression in function `set`, which is why the calls to `set` are thought to be side-effect-free and excluded.\n\nIf the test case is modified as follows it works as one would hope:\n\n``` js\nconst foo = {};\nfunction set(obj, key, value) {\n  obj[key] = value;\n}\nset(foo, \"bar\", 2);\nset(foo, \"qux\", 3);\n```\n\nThe test above was was constructed after observing that a side effect is generated from a modifier node that happens to be a parameter:\n\nhttps://github.com/rollup/rollup/blob/4b6145574de33d3af5957f37d7eefd8afbdc91b3/src/utils/run.js#L97\n\nI think a fix has to be introduced in the general vicinity of this code to get rollup to recognize the side effect in the foo AssignmentExpression MemberExpression which is in the same module but outside the block scope of the function.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/177658434/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/180004435","html_url":"https://github.com/rollup/rollup/issues/476#issuecomment-180004435","issue_url":"https://api.github.com/repos/rollup/rollup/issues/476","id":180004435,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MDAwNDQzNQ==","user":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-04T19:06:11Z","updated_at":"2016-02-04T23:40:32Z","body":"The same reason why rollup presently (correctly) drops `obj` and `obj.foo` from this test case:\n\n```\nvar obj = {};\nobj.foo = function() { console.log('obj.foo() called'); }\nfunction bar() { console.log('bar() called'); }\nbar();\n```\n\nto produce:\n\n```\nfunction bar() { console.log('bar() called'); }\nbar();\n```\n\nis also why rollup does not acknowledge a side effect in the `set` function in:\n\n```\nconst foo = {};\nfunction set(key, value) {\n  foo[key] = value;\n}\nset(\"bar\", 2);\nset(\"qux\", 3);\nconsole.log(foo);\n```\n\nwhich ultimately causes the `set()` calls to be incorrectly dropped. \n\nIn both cases the condition below marked as `(*)` was false in `run()`, and the side effect not triggered:\n\n```\n        else if ( isModifierNode( node ) ) {\n            let subject = node[ modifierNodes[ node.type ] ];\n            while ( subject.type === 'MemberExpression' ) subject = subject.object;\n\n            let declaration = scope.findDeclaration( subject.name );\n\n            if ( declaration ) {\n                if ( declaration.isParam ) hasSideEffect = true;\n            } else {\n                declaration = statement.module.trace( subject.name );\n\n                if ( !declaration || declaration.isExternal || declaration.isUsed ) {\n                    // (*) Not reached for member expression assignments\n                    //     for both test cases.\n                    hasSideEffect = true;\n                }\n            }\n        }\n```\n\nhttps://github.com/rollup/rollup/blob/4b6145574de33d3af5957f37d7eefd8afbdc91b3/src/utils/run.js#L90-L102\n\nSome code has to crafted to differentiate whether the declaration in question is actually used by the final program.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/180004435/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-12T16:55:06Z","updated_at":"2016-02-12T16:55:06Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rollup/rollup/issues/512","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/512/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/512/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/512/events","html_url":"https://github.com/rollup/rollup/pull/512","id":133290993,"node_id":"MDExOlB1bGxSZXF1ZXN0NTkxOTk4Mjk=","number":512,"title":"Detect side effect in member expression assignment when not top level","user":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2016-02-12T16:55:06Z","updated_at":"2016-02-14T13:40:21Z","closed_at":"2016-02-14T13:40:13Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":35640229,"node_id":"MDEwOlJlcG9zaXRvcnkzNTY0MDIyOQ==","name":"rollup","full_name":"rollup/rollup","private":false,"owner":{"login":"rollup","id":12554859,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEyNTU0ODU5","avatar_url":"https://avatars.githubusercontent.com/u/12554859?v=4","gravatar_id":"","url":"https://api.github.com/users/rollup","html_url":"https://github.com/rollup","followers_url":"https://api.github.com/users/rollup/followers","following_url":"https://api.github.com/users/rollup/following{/other_user}","gists_url":"https://api.github.com/users/rollup/gists{/gist_id}","starred_url":"https://api.github.com/users/rollup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rollup/subscriptions","organizations_url":"https://api.github.com/users/rollup/orgs","repos_url":"https://api.github.com/users/rollup/repos","events_url":"https://api.github.com/users/rollup/events{/privacy}","received_events_url":"https://api.github.com/users/rollup/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rollup/rollup","description":"Next-generation ES module bundler","fork":false,"url":"https://api.github.com/repos/rollup/rollup","forks_url":"https://api.github.com/repos/rollup/rollup/forks","keys_url":"https://api.github.com/repos/rollup/rollup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rollup/rollup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rollup/rollup/teams","hooks_url":"https://api.github.com/repos/rollup/rollup/hooks","issue_events_url":"https://api.github.com/repos/rollup/rollup/issues/events{/number}","events_url":"https://api.github.com/repos/rollup/rollup/events","assignees_url":"https://api.github.com/repos/rollup/rollup/assignees{/user}","branches_url":"https://api.github.com/repos/rollup/rollup/branches{/branch}","tags_url":"https://api.github.com/repos/rollup/rollup/tags","blobs_url":"https://api.github.com/repos/rollup/rollup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rollup/rollup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rollup/rollup/git/refs{/sha}","trees_url":"https://api.github.com/repos/rollup/rollup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rollup/rollup/statuses/{sha}","languages_url":"https://api.github.com/repos/rollup/rollup/languages","stargazers_url":"https://api.github.com/repos/rollup/rollup/stargazers","contributors_url":"https://api.github.com/repos/rollup/rollup/contributors","subscribers_url":"https://api.github.com/repos/rollup/rollup/subscribers","subscription_url":"https://api.github.com/repos/rollup/rollup/subscription","commits_url":"https://api.github.com/repos/rollup/rollup/commits{/sha}","git_commits_url":"https://api.github.com/repos/rollup/rollup/git/commits{/sha}","comments_url":"https://api.github.com/repos/rollup/rollup/comments{/number}","issue_comment_url":"https://api.github.com/repos/rollup/rollup/issues/comments{/number}","contents_url":"https://api.github.com/repos/rollup/rollup/contents/{+path}","compare_url":"https://api.github.com/repos/rollup/rollup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rollup/rollup/merges","archive_url":"https://api.github.com/repos/rollup/rollup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rollup/rollup/downloads","issues_url":"https://api.github.com/repos/rollup/rollup/issues{/number}","pulls_url":"https://api.github.com/repos/rollup/rollup/pulls{/number}","milestones_url":"https://api.github.com/repos/rollup/rollup/milestones{/number}","notifications_url":"https://api.github.com/repos/rollup/rollup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rollup/rollup/labels{/name}","releases_url":"https://api.github.com/repos/rollup/rollup/releases{/id}","deployments_url":"https://api.github.com/repos/rollup/rollup/deployments","created_at":"2015-05-14T22:26:28Z","updated_at":"2025-11-09T07:58:19Z","pushed_at":"2025-11-08T17:11:17Z","git_url":"git://github.com/rollup/rollup.git","ssh_url":"git@github.com:rollup/rollup.git","clone_url":"https://github.com/rollup/rollup.git","svn_url":"https://github.com/rollup/rollup","homepage":"https://rollupjs.org","size":32539,"stargazers_count":26104,"watchers_count":26104,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1649,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":602,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1649,"open_issues":602,"watchers":26104,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rollup/rollup/pulls/512","html_url":"https://github.com/rollup/rollup/pull/512","diff_url":"https://github.com/rollup/rollup/pull/512.diff","patch_url":"https://github.com/rollup/rollup/pull/512.patch","merged_at":"2016-02-14T13:40:13Z"},"body":"Fixes #476\n","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/512/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/512/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/183412015","html_url":"https://github.com/rollup/rollup/issues/476#issuecomment-183412015","issue_url":"https://api.github.com/repos/rollup/rollup/issues/476","id":183412015,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MzQxMjAxNQ==","user":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-12T16:57:42Z","updated_at":"2016-02-12T16:57:42Z","body":"Fix in PR #512\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/183412015/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":549878609,"node_id":"MDExOkNsb3NlZEV2ZW50NTQ5ODc4NjA5","url":"https://api.github.com/repos/rollup/rollup/issues/events/549878609","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2016-02-14T13:40:13Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/184512345","html_url":"https://github.com/rollup/rollup/issues/476#issuecomment-184512345","issue_url":"https://api.github.com/repos/rollup/rollup/issues/476","id":184512345,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NDUxMjM0NQ==","user":{"login":"Pauan","id":97238,"node_id":"MDQ6VXNlcjk3MjM4","avatar_url":"https://avatars.githubusercontent.com/u/97238?v=4","gravatar_id":"","url":"https://api.github.com/users/Pauan","html_url":"https://github.com/Pauan","followers_url":"https://api.github.com/users/Pauan/followers","following_url":"https://api.github.com/users/Pauan/following{/other_user}","gists_url":"https://api.github.com/users/Pauan/gists{/gist_id}","starred_url":"https://api.github.com/users/Pauan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pauan/subscriptions","organizations_url":"https://api.github.com/users/Pauan/orgs","repos_url":"https://api.github.com/users/Pauan/repos","events_url":"https://api.github.com/users/Pauan/events{/privacy}","received_events_url":"https://api.github.com/users/Pauan/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-16T04:29:38Z","updated_at":"2016-02-16T04:29:38Z","body":"Awesome, thanks guys!\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/184512345/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Pauan","id":97238,"node_id":"MDQ6VXNlcjk3MjM4","avatar_url":"https://avatars.githubusercontent.com/u/97238?v=4","gravatar_id":"","url":"https://api.github.com/users/Pauan","html_url":"https://github.com/Pauan","followers_url":"https://api.github.com/users/Pauan/followers","following_url":"https://api.github.com/users/Pauan/following{/other_user}","gists_url":"https://api.github.com/users/Pauan/gists{/gist_id}","starred_url":"https://api.github.com/users/Pauan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pauan/subscriptions","organizations_url":"https://api.github.com/users/Pauan/orgs","repos_url":"https://api.github.com/users/Pauan/repos","events_url":"https://api.github.com/users/Pauan/events{/privacy}","received_events_url":"https://api.github.com/users/Pauan/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"thgreasi","id":1295829,"node_id":"MDQ6VXNlcjEyOTU4Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/1295829?v=4","gravatar_id":"","url":"https://api.github.com/users/thgreasi","html_url":"https://github.com/thgreasi","followers_url":"https://api.github.com/users/thgreasi/followers","following_url":"https://api.github.com/users/thgreasi/following{/other_user}","gists_url":"https://api.github.com/users/thgreasi/gists{/gist_id}","starred_url":"https://api.github.com/users/thgreasi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thgreasi/subscriptions","organizations_url":"https://api.github.com/users/thgreasi/orgs","repos_url":"https://api.github.com/users/thgreasi/repos","events_url":"https://api.github.com/users/thgreasi/events{/privacy}","received_events_url":"https://api.github.com/users/thgreasi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-29T13:28:41Z","updated_at":"2016-04-29T13:28:41Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rollup/rollup/issues/635","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/635/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/635/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/635/events","html_url":"https://github.com/rollup/rollup/issues/635","id":151865348,"node_id":"MDU6SXNzdWUxNTE4NjUzNDg=","number":635,"title":"function invokation with side effects gets removed","user":{"login":"thgreasi","id":1295829,"node_id":"MDQ6VXNlcjEyOTU4Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/1295829?v=4","gravatar_id":"","url":"https://api.github.com/users/thgreasi","html_url":"https://github.com/thgreasi","followers_url":"https://api.github.com/users/thgreasi/followers","following_url":"https://api.github.com/users/thgreasi/following{/other_user}","gists_url":"https://api.github.com/users/thgreasi/gists{/gist_id}","starred_url":"https://api.github.com/users/thgreasi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thgreasi/subscriptions","organizations_url":"https://api.github.com/users/thgreasi/orgs","repos_url":"https://api.github.com/users/thgreasi/repos","events_url":"https://api.github.com/users/thgreasi/events{/privacy}","received_events_url":"https://api.github.com/users/thgreasi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":211689302,"node_id":"MDU6TGFiZWwyMTE2ODkzMDI=","url":"https://api.github.com/repos/rollup/rollup/labels/t%C2%B9%20%F0%9F%90%9E%20bug","name":"t¬π üêû bug","color":"F44336","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-04-29T13:28:41Z","updated_at":"2016-12-21T00:49:58Z","closed_at":"2016-12-21T00:49:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":35640229,"node_id":"MDEwOlJlcG9zaXRvcnkzNTY0MDIyOQ==","name":"rollup","full_name":"rollup/rollup","private":false,"owner":{"login":"rollup","id":12554859,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEyNTU0ODU5","avatar_url":"https://avatars.githubusercontent.com/u/12554859?v=4","gravatar_id":"","url":"https://api.github.com/users/rollup","html_url":"https://github.com/rollup","followers_url":"https://api.github.com/users/rollup/followers","following_url":"https://api.github.com/users/rollup/following{/other_user}","gists_url":"https://api.github.com/users/rollup/gists{/gist_id}","starred_url":"https://api.github.com/users/rollup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rollup/subscriptions","organizations_url":"https://api.github.com/users/rollup/orgs","repos_url":"https://api.github.com/users/rollup/repos","events_url":"https://api.github.com/users/rollup/events{/privacy}","received_events_url":"https://api.github.com/users/rollup/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rollup/rollup","description":"Next-generation ES module bundler","fork":false,"url":"https://api.github.com/repos/rollup/rollup","forks_url":"https://api.github.com/repos/rollup/rollup/forks","keys_url":"https://api.github.com/repos/rollup/rollup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rollup/rollup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rollup/rollup/teams","hooks_url":"https://api.github.com/repos/rollup/rollup/hooks","issue_events_url":"https://api.github.com/repos/rollup/rollup/issues/events{/number}","events_url":"https://api.github.com/repos/rollup/rollup/events","assignees_url":"https://api.github.com/repos/rollup/rollup/assignees{/user}","branches_url":"https://api.github.com/repos/rollup/rollup/branches{/branch}","tags_url":"https://api.github.com/repos/rollup/rollup/tags","blobs_url":"https://api.github.com/repos/rollup/rollup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rollup/rollup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rollup/rollup/git/refs{/sha}","trees_url":"https://api.github.com/repos/rollup/rollup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rollup/rollup/statuses/{sha}","languages_url":"https://api.github.com/repos/rollup/rollup/languages","stargazers_url":"https://api.github.com/repos/rollup/rollup/stargazers","contributors_url":"https://api.github.com/repos/rollup/rollup/contributors","subscribers_url":"https://api.github.com/repos/rollup/rollup/subscribers","subscription_url":"https://api.github.com/repos/rollup/rollup/subscription","commits_url":"https://api.github.com/repos/rollup/rollup/commits{/sha}","git_commits_url":"https://api.github.com/repos/rollup/rollup/git/commits{/sha}","comments_url":"https://api.github.com/repos/rollup/rollup/comments{/number}","issue_comment_url":"https://api.github.com/repos/rollup/rollup/issues/comments{/number}","contents_url":"https://api.github.com/repos/rollup/rollup/contents/{+path}","compare_url":"https://api.github.com/repos/rollup/rollup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rollup/rollup/merges","archive_url":"https://api.github.com/repos/rollup/rollup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rollup/rollup/downloads","issues_url":"https://api.github.com/repos/rollup/rollup/issues{/number}","pulls_url":"https://api.github.com/repos/rollup/rollup/pulls{/number}","milestones_url":"https://api.github.com/repos/rollup/rollup/milestones{/number}","notifications_url":"https://api.github.com/repos/rollup/rollup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rollup/rollup/labels{/name}","releases_url":"https://api.github.com/repos/rollup/rollup/releases{/id}","deployments_url":"https://api.github.com/repos/rollup/rollup/deployments","created_at":"2015-05-14T22:26:28Z","updated_at":"2025-11-09T07:58:19Z","pushed_at":"2025-11-08T17:11:17Z","git_url":"git://github.com/rollup/rollup.git","ssh_url":"git@github.com:rollup/rollup.git","clone_url":"https://github.com/rollup/rollup.git","svn_url":"https://github.com/rollup/rollup","homepage":"https://rollupjs.org","size":32539,"stargazers_count":26104,"watchers_count":26104,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1649,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":602,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1649,"open_issues":602,"watchers":26104,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hi to all!\nI'm currently using rollup v0.26.1 and had an issue with a function invocation that got removed, while it was modifying the prototype of an other variable. This might be related to #476 but I wasn't sure whether I should re-open it and post my findings there.\n- [my original code](http://rollupjs.org/#%7B%22options%22%3A%7B%22format%22%3A%22es6%22%2C%22moduleName%22%3A%22myBundle%22%2C%22globals%22%3A%7B%7D%2C%22moduleId%22%3A%22%22%7D%2C%22modules%22%3A%5B%7B%22name%22%3A%22main.js%22%2C%22code%22%3A%22export%20function%20extendPrototype%28localforage%29%20%7B%5Cn%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20var%20localforagePrototype%20%3D%20Object.getPrototypeOf%28localforage%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28localforagePrototype%20%26%26%20!localforagePrototype.newObservable%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20localforagePrototype.newObservable%20%3D%20localforageObservable%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20catch%20%28e%29%20%7B%20%2F*%20*%2F%20%7D%5Cn%20%20%20%20return%20false%3B%5Cn%7D%5Cn%5CnextendPrototype%28localforage%29%3B%22%7D%5D%7D)\n- [a simplified version](http://rollupjs.org/#%7B%22options%22%3A%7B%22format%22%3A%22es6%22%2C%22moduleName%22%3A%22myBundle%22%2C%22globals%22%3A%7B%7D%7D%2C%22modules%22%3A%5B%7B%22name%22%3A%22main.js%22%2C%22code%22%3A%22export%20function%20extendPrototype%28localforage%29%20%7B%5Cn%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20var%20localforagePrototype%20%3D%20Object.getPrototypeOf%28localforage%29%3B%5Cn%20%20%20%20%20%20localforagePrototype.newObservable%20%3D%20localforageObservable%3B%5Cn%20%20%20%20%7D%20catch%20%28e%29%20%7B%20%2F*%20*%2F%20%7D%5Cn%20%20%20%20return%20false%3B%5Cn%7D%5Cn%5CnextendPrototype%28localforage%29%3B%22%7D%5D%7D)\n- [a working (not equivalent) variation](http://rollupjs.org/#%7B%22options%22%3A%7B%22format%22%3A%22es6%22%2C%22moduleName%22%3A%22myBundle%22%2C%22globals%22%3A%7B%7D%7D%2C%22modules%22%3A%5B%7B%22name%22%3A%22main.js%22%2C%22code%22%3A%22export%20function%20extendPrototype%28localforage%29%20%7B%5Cn%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20Object.getPrototypeOf%28localforage%29.newObservable%20%3D%20localforageObservable%3B%5Cn%20%20%20%20%7D%20catch%20%28e%29%20%7B%20%2F*%20*%2F%20%7D%5Cn%20%20%20%20return%20false%3B%5Cn%7D%5Cn%5CnextendPrototype%28localforage%29%3B%22%7D%5D%7D)\n\nAn other way to make it work was to [export the result of the method](http://rollupjs.org/#%7B%22options%22%3A%7B%22format%22%3A%22es6%22%2C%22moduleName%22%3A%22myBundle%22%2C%22globals%22%3A%7B%7D%2C%22moduleId%22%3A%22%22%7D%2C%22modules%22%3A%5B%7B%22name%22%3A%22main.js%22%2C%22code%22%3A%22export%20function%20extendPrototype%28localforage%29%20%7B%5Cn%20%20%20%20try%20%7B%5Cn%20%20%20%20%20%20%20%20var%20localforagePrototype%20%3D%20Object.getPrototypeOf%28localforage%29%3B%5Cn%20%20%20%20%20%20%20%20if%20%28localforagePrototype%29%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20localforagePrototype.newObservable%20%3D%20localforageObservable%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20return%20true%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%20catch%20%28e%29%20%7B%20%2F*%20*%2F%20%7D%5Cn%20%20%20%20return%20false%3B%5Cn%7D%5Cn%5Cnexport%20var%20extendPrototypeResult%20%3D%20extendPrototype%28localforage%29%3B%22%7D%5D%7D)\n\nTo summarize:\n\n``` js\nexport function extendPrototype(localforage) {\n    try {\n        var localforagePrototype = Object.getPrototypeOf(localforage);\n        if (localforagePrototype && !localforagePrototype.newObservable) {\n            localforagePrototype.newObservable = localforageObservable;\n            return true;\n        }\n    } catch (e) { /* */ }\n    return false;\n}\n\nextendPrototype(localforage);\n```\n\n``` js\nexport function extendPrototype(localforage) {\n    try {\n        var localforagePrototype = Object.getPrototypeOf(localforage);\n        localforagePrototype.newObservable = localforageObservable;\n    } catch (e) { /* */ }\n    return false;\n}\n\nextendPrototype(localforage);// also gets ommited\n```\n\nThe only working variations I found are:\n\n``` js\nexport function extendPrototype(localforage) {\n    try {\n        Object.getPrototypeOf(localforage).newObservable = localforageObservable;\n    } catch (e) { /* */ }\n    return false;\n}\n\nextendPrototype(localforage);\n```\n\nand\n\n``` js\nexport function extendPrototype(localforage) {\n    try {\n        var localforagePrototype = Object.getPrototypeOf(localforage);\n        if (localforagePrototype) {\n            localforagePrototype.newObservable = localforageObservable;\n            return true;\n        }\n    } catch (e) { /* */ }\n    return false;\n}\n\nexport var extendPrototypeResult = extendPrototype(localforage);\n```\n\nPS: Thanks in advance for this and :+1: for the great boilerplate example repo! It made adopting rollup really easy.\n","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/635/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":1,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/635/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]