[{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/328404539","html_url":"https://github.com/rollup/rollup/issues/1622#issuecomment-328404539","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1622","id":328404539,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODQwNDUzOQ==","user":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T03:11:11Z","updated_at":"2017-09-11T03:11:11Z","body":"I'm realizing that's not quite a helpful example. This is only happening when a few different things are all determined to have no side-effects. Here's some code closer to what I actually ran into: [REPL](https://rollupjs.org/repl?version=0.49.3&shareable=JTdCJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMmxhYmVsJTNBJTIwJTdCJTVDbiU1Q3Rmb3IlMjAobGV0JTIwaSUyMCUzRCUyMDAlM0IlMjBpJTIwJTNDJTIwYXJyYXkubGVuZ3RoJTIwLSUyMDElM0IlMjBpJTJCJTJCKSUyMCU3QiU1Q24lNUN0JTVDdGlmJTIwKGFycmF5JTVCaSU1RCUyMCUzQyUyMGFycmF5JTVCaSUyMCUyQiUyMDElNUQpJTIwJTdCJTVDbiU1Q3QlNUN0JTVDdGJyZWFrJTIwbGFiZWwlM0IlNUNuJTVDdCU1Q3QlN0QlNUNuJTVDdCU3RCU1Q24lNUN0ZG9Tb21ldGhpbmcoKSUzQiU1Q24lN0QlMjIlN0QlNUQlMkMlMjJvcHRpb25zJTIyJTNBJTdCJTIyZm9ybWF0JTIyJTNBJTIyY2pzJTIyJTJDJTIyZ2xvYmFscyUyMiUzQSU3QiU3RCUyQyUyMm5hbWUlMjIlM0ElMjJteUJ1bmRsZSUyMiUyQyUyMmFtZCUyMiUzQSU3QiUyMmlkJTIyJTNBJTIyJTIyJTdEJTdEJTJDJTIyZXhhbXBsZSUyMiUzQW51bGwlN0Q=)\r\n\r\n```javascript\r\nlabel: {\r\n\tfor (let i = 0; i < array.length - 1; i++) {\r\n\t\tif (array[i] < array[i + 1]) {\r\n\t\t\tbreak label;\r\n\t\t}\r\n\t}\r\n\tdoSomething();\r\n}\r\n```\r\n\r\nbundles to\r\n\r\n```javascript\r\n'use strict';\r\n\r\nlabel: {\r\n\tdoSomething();\r\n}\r\n```\r\n\r\nI wanted to call `doSomething()` only when the array is non-increasing. I'm not really sure by what mechanism the loop is being incorrectly dropped, but this issue did appear in 0.49.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/328404539/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Conduitry","id":16696352,"node_id":"MDQ6VXNlcjE2Njk2MzUy","avatar_url":"https://avatars.githubusercontent.com/u/16696352?v=4","gravatar_id":"","url":"https://api.github.com/users/Conduitry","html_url":"https://github.com/Conduitry","followers_url":"https://api.github.com/users/Conduitry/followers","following_url":"https://api.github.com/users/Conduitry/following{/other_user}","gists_url":"https://api.github.com/users/Conduitry/gists{/gist_id}","starred_url":"https://api.github.com/users/Conduitry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Conduitry/subscriptions","organizations_url":"https://api.github.com/users/Conduitry/orgs","repos_url":"https://api.github.com/users/Conduitry/repos","events_url":"https://api.github.com/users/Conduitry/events{/privacy}","received_events_url":"https://api.github.com/users/Conduitry/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/328406623","html_url":"https://github.com/rollup/rollup/issues/1622#issuecomment-328406623","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1622","id":328406623,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODQwNjYyMw==","user":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T03:31:25Z","updated_at":"2017-09-11T03:31:25Z","body":"Fix:\r\n```diff\r\n--- a/src/ast/nodes/BreakStatement.js\r\n+++ b/src/ast/nodes/BreakStatement.js\r\n@@ -3,6 +3,7 @@ import Node from '../Node.js';\r\n export default class BreakStatement extends Node {\r\n        hasEffects ( options ) {\r\n                return super.hasEffects( options )\r\n+                       || this.label\r\n                        || !options.inNestedBreakableStatement;\r\n        }\r\n \r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/328406623/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kzc","id":11593452,"node_id":"MDQ6VXNlcjExNTkzNDUy","avatar_url":"https://avatars.githubusercontent.com/u/11593452?v=4","gravatar_id":"","url":"https://api.github.com/users/kzc","html_url":"https://github.com/kzc","followers_url":"https://api.github.com/users/kzc/followers","following_url":"https://api.github.com/users/kzc/following{/other_user}","gists_url":"https://api.github.com/users/kzc/gists{/gist_id}","starred_url":"https://api.github.com/users/kzc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kzc/subscriptions","organizations_url":"https://api.github.com/users/kzc/orgs","repos_url":"https://api.github.com/users/kzc/repos","events_url":"https://api.github.com/users/kzc/events{/privacy}","received_events_url":"https://api.github.com/users/kzc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/328409623","html_url":"https://github.com/rollup/rollup/issues/1622#issuecomment-328409623","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1622","id":328409623,"node_id":"MDEyOklzc3VlQ29tbWVudDMyODQwOTYyMw==","user":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T04:00:43Z","updated_at":"2017-09-11T04:00:43Z","body":"Nice catch! I will include the fix in the next PR!","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/328409623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1242559975,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyNDI1NTk5NzU=","url":"https://api.github.com/repos/rollup/rollup/issues/events/1242559975","actor":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"56d7c3116b1f0d504e5f012ffdab21d0f5a0e923","commit_url":"https://api.github.com/repos/lukastaegert/rollup/commits/56d7c3116b1f0d504e5f012ffdab21d0f5a0e923","created_at":"2017-09-11T04:49:42Z","performed_via_github_app":null},{"id":1242567604,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyNDI1Njc2MDQ=","url":"https://api.github.com/repos/rollup/rollup/issues/events/1242567604","actor":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"86d852be0ddb6da5bcd70d2afa2c4915d5bfcfd7","commit_url":"https://api.github.com/repos/lukastaegert/rollup/commits/86d852be0ddb6da5bcd70d2afa2c4915d5bfcfd7","created_at":"2017-09-11T05:02:15Z","performed_via_github_app":null},{"actor":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-09-11T08:40:07Z","updated_at":"2017-09-11T08:40:07Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rollup/rollup/issues/1624","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/1624/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/1624/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/1624/events","html_url":"https://github.com/rollup/rollup/pull/1624","id":256623888,"node_id":"MDExOlB1bGxSZXF1ZXN0MTQwMjc4MjQ1","number":1624,"title":"Refactor call handling","user":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2017-09-11T08:40:07Z","updated_at":"2017-09-17T10:01:00Z","closed_at":"2017-09-16T13:26:44Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":35640229,"node_id":"MDEwOlJlcG9zaXRvcnkzNTY0MDIyOQ==","name":"rollup","full_name":"rollup/rollup","private":false,"owner":{"login":"rollup","id":12554859,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEyNTU0ODU5","avatar_url":"https://avatars.githubusercontent.com/u/12554859?v=4","gravatar_id":"","url":"https://api.github.com/users/rollup","html_url":"https://github.com/rollup","followers_url":"https://api.github.com/users/rollup/followers","following_url":"https://api.github.com/users/rollup/following{/other_user}","gists_url":"https://api.github.com/users/rollup/gists{/gist_id}","starred_url":"https://api.github.com/users/rollup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rollup/subscriptions","organizations_url":"https://api.github.com/users/rollup/orgs","repos_url":"https://api.github.com/users/rollup/repos","events_url":"https://api.github.com/users/rollup/events{/privacy}","received_events_url":"https://api.github.com/users/rollup/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rollup/rollup","description":"Next-generation ES module bundler","fork":false,"url":"https://api.github.com/repos/rollup/rollup","forks_url":"https://api.github.com/repos/rollup/rollup/forks","keys_url":"https://api.github.com/repos/rollup/rollup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rollup/rollup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rollup/rollup/teams","hooks_url":"https://api.github.com/repos/rollup/rollup/hooks","issue_events_url":"https://api.github.com/repos/rollup/rollup/issues/events{/number}","events_url":"https://api.github.com/repos/rollup/rollup/events","assignees_url":"https://api.github.com/repos/rollup/rollup/assignees{/user}","branches_url":"https://api.github.com/repos/rollup/rollup/branches{/branch}","tags_url":"https://api.github.com/repos/rollup/rollup/tags","blobs_url":"https://api.github.com/repos/rollup/rollup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rollup/rollup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rollup/rollup/git/refs{/sha}","trees_url":"https://api.github.com/repos/rollup/rollup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rollup/rollup/statuses/{sha}","languages_url":"https://api.github.com/repos/rollup/rollup/languages","stargazers_url":"https://api.github.com/repos/rollup/rollup/stargazers","contributors_url":"https://api.github.com/repos/rollup/rollup/contributors","subscribers_url":"https://api.github.com/repos/rollup/rollup/subscribers","subscription_url":"https://api.github.com/repos/rollup/rollup/subscription","commits_url":"https://api.github.com/repos/rollup/rollup/commits{/sha}","git_commits_url":"https://api.github.com/repos/rollup/rollup/git/commits{/sha}","comments_url":"https://api.github.com/repos/rollup/rollup/comments{/number}","issue_comment_url":"https://api.github.com/repos/rollup/rollup/issues/comments{/number}","contents_url":"https://api.github.com/repos/rollup/rollup/contents/{+path}","compare_url":"https://api.github.com/repos/rollup/rollup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rollup/rollup/merges","archive_url":"https://api.github.com/repos/rollup/rollup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rollup/rollup/downloads","issues_url":"https://api.github.com/repos/rollup/rollup/issues{/number}","pulls_url":"https://api.github.com/repos/rollup/rollup/pulls{/number}","milestones_url":"https://api.github.com/repos/rollup/rollup/milestones{/number}","notifications_url":"https://api.github.com/repos/rollup/rollup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rollup/rollup/labels{/name}","releases_url":"https://api.github.com/repos/rollup/rollup/releases{/id}","deployments_url":"https://api.github.com/repos/rollup/rollup/deployments","created_at":"2015-05-14T22:26:28Z","updated_at":"2025-11-09T07:58:19Z","pushed_at":"2025-11-08T17:11:17Z","git_url":"git://github.com/rollup/rollup.git","ssh_url":"git@github.com:rollup/rollup.git","clone_url":"https://github.com/rollup/rollup.git","svn_url":"https://github.com/rollup/rollup","homepage":"https://rollupjs.org","size":32539,"stargazers_count":26104,"watchers_count":26104,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1649,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":602,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1649,"open_issues":602,"watchers":26104,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rollup/rollup/pulls/1624","html_url":"https://github.com/rollup/rollup/pull/1624","diff_url":"https://github.com/rollup/rollup/pull/1624.diff","patch_url":"https://github.com/rollup/rollup/pull/1624.patch","merged_at":"2017-09-16T13:26:44Z"},"body":"So it here is, my second *huge* refactoring PR. This time, the focus is on refactoring the side-effect detection for calls and instantiations, something I had left out of the previous PR. Besides, quite a few issues will be fixed as well: #674, #677, #1187, #1235, #1289, #1391, #1615, #1622\r\n\r\n# Improved results\r\nThis time the list of tests that have been added/changed and now produce different (and correct) results is REALLY long, so instead I will just list the highlights and you may check for yourself:\r\n* Call expression handling now re-uses the same logic as the rest of rollup to determine if a function body has side-effects. An immediate result is that in `namespace-optimization-computed-string`, the several times re-exported but side-effect free function is now properly removed so the test needed to be adapted :)\r\n* Class declarations and expressions are now properly removed unless there are computed keys in the body that cause side-effects or retrieving the super class has a side-effect\r\n* Class instantiations are now removed if there is no constructor in the class or any super class or the relevant constructor has no side-effects\r\n* Except for import and export declarations for which this remains to be done, all other kinds of declarations have been separated from their concept of a \"variable\", which is what is stored in the scope now\r\n* This made it possible, that variable re-declarations with \"var\" or \"function\" are now recognized properly! See e.g. the test `redeclarations`\r\n* Also, \"this\"-handling has been refactored. Now, \"this\" is actually a pseudo-variable on the scope. For now, it only assumes one of two pseudo-values, `UNKNOWN_LITERAL` and `UNKNOWN_ASSIGNMENT` but in the future we might start putting much more information here. The values of \"this\" are set during `.bind()` time.\r\n* This also means that we can now properly remove nested mutations of \"this\" expressions if they do not have an effect!\r\n* Generator functions without side-effects are removed as long as iteration has not started yet, see `side-effects-generators`\r\n* New types of scopes like the `FunctionScope` have been added. Now functions actually create two new scopes: one for their parameters and one for their body. This resolves some elusive bugs.\r\n* In the no-treeshake test, the namespace import is now properly replaced. This is handled by actually including ALL nodes when tree-shaking is off which should also resolve other problems related to tree-shaking being disabled.\r\n* A crash with cyclic assignments has been resolved (also fixes #1631)\r\n* Side-effects in default parameter values are now detected properly. Also, there have been many small fixes and improvements to the side-effect detection in pattern assignments and pattern defaults.\r\n* Now if a for-in/of loop uses a global loop variable, this will be properly noted as an effect\r\n* Tree-shaking inside LabeledStatements now works properly\r\n\r\n# Other refactorings\r\n* `Node` now has JSDoc comments describing the parameter types, return values and how and when to overwrite the individual methods. This should help others in determining what needs to be changed if they want to fix something via PR.\r\n* hasEffects options have been refactored to be handled via a class that ensures immutability\r\n* Node.hasEffectsWhenCalled is implemented\r\n* VariableDeclarators no longer generate ProxyDeclarations for their children; instead, this has been moved to the individual Identifiers\r\n* Variables on the scope are now usually declared by Identifiers and linked to Identifiers\r\n* All kinds of variables are now derived from `Variable`; variables can be tested for certain effects\r\n* callHasEffects and gatherPossibleValues could finally be removed\r\n* All calls to a function are collected during bind time. For now, this is only used to detect \"this\" values. In the future, we might want to start collecting call parameters here to determine if a function does not have side-effects for specific parameters. E.g., if a Literal is passed as a parameter it is not a side-effect to mutate it.\r\n* This time, there are many more small commits if anyone wants to follow the refactoring flowâ€¦\r\n* And many more!\r\n\r\nHave fun & I hope this works for everyone!","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/1624/reactions","total_count":18,"+1":1,"-1":0,"laugh":0,"hooray":17,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/1624/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1246510252,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyNDY1MTAyNTI=","url":"https://api.github.com/repos/rollup/rollup/issues/events/1246510252","actor":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"bd60a82d75040f83a6933bd494e42037a7df86d4","commit_url":"https://api.github.com/repos/lukastaegert/rollup/commits/bd60a82d75040f83a6933bd494e42037a7df86d4","created_at":"2017-09-13T04:21:09Z","performed_via_github_app":null},{"id":1252162341,"node_id":"MDExOkNsb3NlZEV2ZW50MTI1MjE2MjM0MQ==","url":"https://api.github.com/repos/rollup/rollup/issues/events/1252162341","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"bd60a82d75040f83a6933bd494e42037a7df86d4","commit_url":"https://api.github.com/repos/rollup/rollup/commits/bd60a82d75040f83a6933bd494e42037a7df86d4","created_at":"2017-09-16T13:26:50Z","state_reason":null,"performed_via_github_app":null}]