{"url":"https://api.github.com/repos/rollup/rollup/issues/1113","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/1113/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/1113/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/1113/events","html_url":"https://github.com/rollup/rollup/issues/1113","id":189746421,"node_id":"MDU6SXNzdWUxODk3NDY0MjE=","number":1113,"title":"Trimming both sides of an if/else","user":{"login":"jbt","id":120506,"node_id":"MDQ6VXNlcjEyMDUwNg==","avatar_url":"https://avatars.githubusercontent.com/u/120506?v=4","gravatar_id":"","url":"https://api.github.com/users/jbt","html_url":"https://github.com/jbt","followers_url":"https://api.github.com/users/jbt/followers","following_url":"https://api.github.com/users/jbt/following{/other_user}","gists_url":"https://api.github.com/users/jbt/gists{/gist_id}","starred_url":"https://api.github.com/users/jbt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbt/subscriptions","organizations_url":"https://api.github.com/users/jbt/orgs","repos_url":"https://api.github.com/users/jbt/repos","events_url":"https://api.github.com/users/jbt/events{/privacy}","received_events_url":"https://api.github.com/users/jbt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":211689302,"node_id":"MDU6TGFiZWwyMTE2ODkzMDI=","url":"https://api.github.com/repos/rollup/rollup/labels/t%C2%B9%20%F0%9F%90%9E%20bug","name":"t¬π üêû bug","color":"F44336","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2016-11-16T15:52:27Z","updated_at":"2016-12-21T04:14:41Z","closed_at":"2016-12-21T03:57:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm seeing what looks like both sides of an if/else getting removed if there's a `var` inside with rollup 0.36.3\r\n\r\nHere's an example:\r\n\r\n```js\r\nif (foo) {\r\n  var x = 1;\r\n} else {\r\n  var x = 2;\r\n}\r\nconsole.log(x);\r\n```\r\n\r\nThis apparently gets transformed to just `console.log(x)` and `x` is never declared (example [here](http://rollupjs.org/?version=0.36.3&shareable=JTdCJTIyb3B0aW9ucyUyMiUzQSU3QiUyMmZvcm1hdCUyMiUzQSUyMmVzJTIyJTJDJTIybW9kdWxlTmFtZSUyMiUzQSUyMm15QnVuZGxlJTIyJTJDJTIyZ2xvYmFscyUyMiUzQSU3QiU3RCUyQyUyMm1vZHVsZUlkJTIyJTNBJTIyJTIyJTdEJTJDJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMmlmJTIwKGZvbyklMjAlN0IlNUNuJTIwJTIwdmFyJTIweCUyMCUzRCUyMDElM0IlMjAlNUNuJTdEJTIwZWxzZSUyMCU3QiU1Q24lMjAlMjB2YXIlMjB4JTIwJTNEJTIwMiUzQiU1Q24lN0QlNUNuJTVDbmNvbnNvbGUubG9nKHgpJTNCJTIyJTdEJTVEJTdE))\r\n\r\nSeems to work fine if the `foo` is replaced by various different things like `true` or `foo()`\r\n\r\nSlightly less contrived example: [this](https://github.com/facebook/react/blob/1c1f68e8dccbc84acfae66178493dbfb8ca7d1e1/src/isomorphic/hooks/ReactComponentTreeHook.js#L65) whole if/else in React 15.4.0 (just published) is getting stripped out, so `getRootIDs` used [later on](https://github.com/facebook/react/blob/bdf263625db59f54368d39e8ef077e7f0e9313db/src/isomorphic/hooks/ReactComponentTreeHook.js#L402) is throwing a ReferenceError.\r\n\r\nHappy to provide any further examples if needed.","closed_by":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/1113/reactions","total_count":8,"+1":8,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/1113/timeline","performed_via_github_app":null,"state_reason":"completed"}