{"url":"https://api.github.com/repos/rollup/rollup/issues/2230","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/2230/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/2230/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/2230/events","html_url":"https://github.com/rollup/rollup/issues/2230","id":327835397,"node_id":"MDU6SXNzdWUzMjc4MzUzOTc=","number":2230,"title":"Incorrect function name mangling while tree shaking dependencies","user":{"login":"diervo","id":1176744,"node_id":"MDQ6VXNlcjExNzY3NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1176744?v=4","gravatar_id":"","url":"https://api.github.com/users/diervo","html_url":"https://github.com/diervo","followers_url":"https://api.github.com/users/diervo/followers","following_url":"https://api.github.com/users/diervo/following{/other_user}","gists_url":"https://api.github.com/users/diervo/gists{/gist_id}","starred_url":"https://api.github.com/users/diervo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/diervo/subscriptions","organizations_url":"https://api.github.com/users/diervo/orgs","repos_url":"https://api.github.com/users/diervo/repos","events_url":"https://api.github.com/users/diervo/events{/privacy}","received_events_url":"https://api.github.com/users/diervo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":211689302,"node_id":"MDU6TGFiZWwyMTE2ODkzMDI=","url":"https://api.github.com/repos/rollup/rollup/labels/t%C2%B9%20%F0%9F%90%9E%20bug","name":"t¬π üêû bug","color":"F44336","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-05-30T17:51:51Z","updated_at":"2018-06-04T11:43:42Z","closed_at":"2018-06-04T11:43:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Rollup does some incorrect mangling for function names while tree shaking. We have seen this behavior for quite a while, so not sure what exact version this was introduced.\r\n\r\nI believe this might be a trivial bug to fix for the owners if you know the code base. Otherwise, if you don't have time to prioritize this, let me know and I will dig in.\r\n\r\n[Repro](https://rollupjs.org/repl?version=0.59.4&shareable=JTdCJTIybW9kdWxlcyUyMiUzQSU1QiU3QiUyMm5hbWUlMjIlM0ElMjJtYWluLmpzJTIyJTJDJTIyY29kZSUyMiUzQSUyMmltcG9ydCUyMF9pbmhlcml0cyUyMGZyb20lMjAlNUMlMjIuJTJGaW5oZXJpdHMlNUMlMjIlM0IlNUNuZXhwb3J0JTIwZnVuY3Rpb24lMjB0ZXN0KCklMjAlN0IlNUNuJTIwJTVDdCUyMHZhciUyMEZvbyUyMCUzRCUyMCU3QiU3RCUzQiU1Q24lMjAlMjBfaW5oZXJpdHMoJTdCJTdEJTJDJTIwRm9vKSUzQiU1Q24lN0QlMjIlN0QlMkMlN0IlMjJuYW1lJTIyJTNBJTIyaW5oZXJpdHMuanMlMjIlMkMlMjJjb2RlJTIyJTNBJTIyaW1wb3J0JTIwc2V0UHJvdG90eXBlT2YlMjBmcm9tJTIwJTVDJTIyLiUyRnNldFByb3RvdHlwZU9mJTVDJTIyJTNCJTVDbiU1Q25leHBvcnQlMjBkZWZhdWx0JTIwZnVuY3Rpb24lMjBfaW5oZXJpdHMoc3ViQ2xhc3MlMkMlMjBzdXBlckNsYXNzKSUyMCU3QiU1Q24lMjAlMjBpZiUyMChzdXBlckNsYXNzKSUyMHNldFByb3RvdHlwZU9mKHN1YkNsYXNzJTJDJTIwc3VwZXJDbGFzcyklM0IlNUNuJTdEJTVDbiUyMiU3RCUyQyU3QiUyMm5hbWUlMjIlM0ElMjJzZXRQcm90b3R5cGVPZi5qcyUyMiUyQyUyMmNvZGUlMjIlM0ElMjJleHBvcnQlMjBkZWZhdWx0JTIwZnVuY3Rpb24lMjBfc2V0UHJvdG90eXBlT2YobyUyQyUyMHApJTIwJTdCJTVDbiUyMCUyMF9zZXRQcm90b3R5cGVPZiUyMCUzRCUyME9iamVjdC5zZXRQcm90b3R5cGVPZiUyMCU3QyU3QyUyMGZ1bmN0aW9uJTIwX3NldFByb3RvdHlwZU9mKG8lMkMlMjBwKSUyMCU3QiU1Q24lMjAlMjAlMjAlMjBvLl9fcHJvdG9fXyUyMCUzRCUyMHAlM0IlNUNuJTIwJTIwJTIwJTIwcmV0dXJuJTIwbyUzQiU1Q24lMjAlMjAlN0QlM0IlNUNuJTVDbiUyMCUyMHJldHVybiUyMF9zZXRQcm90b3R5cGVPZihvJTJDJTIwcCklM0IlNUNuJTdEJTIyJTdEJTVEJTJDJTIyb3B0aW9ucyUyMiUzQSU3QiUyMmZvcm1hdCUyMiUzQSUyMmNqcyUyMiUyQyUyMm5hbWUlMjIlM0ElMjJteUJ1bmRsZSUyMiUyQyUyMmdsb2JhbHMlMjIlM0ElN0IlN0QlMkMlMjJhbWQlMjIlM0ElN0IlMjJpZCUyMiUzQSUyMiUyMiU3RCU3RCUyQyUyMmV4YW1wbGUlMjIlM0FudWxsJTdE)\r\n\r\n## Code example: \r\nThis example is a boiled down version of the use of babel helpers (latests babel 7).\r\n\r\nmain.js\r\n```js\r\nimport _inherits from \"./inherits\";\r\nexport function test() {\r\n    var Foo = {};\r\n   _inherits({}, Foo);\r\n}\r\n```\r\n\r\ninherits.js\r\n```js\r\nimport setPrototypeOf from \"./setPrototypeOf\";\r\n\r\nexport default function _inherits(subClass, superClass) {\r\n  if (superClass) setPrototypeOf(subClass, superClass);\r\n}\r\n```\r\n\r\nsetPrototypeOf.js\r\n\r\n```js\r\nexport default function _setPrototypeOf(o, p) {\r\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\r\n    o.__proto__ = p;\r\n    return o;\r\n  };\r\n\r\n  return _setPrototypeOf(o, p);\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```js\r\nObject.defineProperty(exports, '__esModule', { value: true });\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\r\n    o.__proto__ = p;\r\n    return o;\r\n  };\r\n\r\n  return _setPrototypeOf(o, p);\r\n}\r\n\r\nfunction _inherits(subClass, superClass) {\r\n  // HERE: setPrototypeOf is incorrectly scoped it should be _setPrototypeOf\r\n  if (superClass) setPrototypeOf(subClass, superClass);\r\n}\r\n\r\nfunction test() {\r\n \t var Foo = {};\r\n  _inherits({}, Foo);\r\n}\r\n\r\nexports.test = test;\r\n```\r\n\r\nAs you can see the `setPrototypeOf` call is named incorrectly.","closed_by":{"login":"lukastaegert","id":12949268,"node_id":"MDQ6VXNlcjEyOTQ5MjY4","avatar_url":"https://avatars.githubusercontent.com/u/12949268?v=4","gravatar_id":"","url":"https://api.github.com/users/lukastaegert","html_url":"https://github.com/lukastaegert","followers_url":"https://api.github.com/users/lukastaegert/followers","following_url":"https://api.github.com/users/lukastaegert/following{/other_user}","gists_url":"https://api.github.com/users/lukastaegert/gists{/gist_id}","starred_url":"https://api.github.com/users/lukastaegert/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lukastaegert/subscriptions","organizations_url":"https://api.github.com/users/lukastaegert/orgs","repos_url":"https://api.github.com/users/lukastaegert/repos","events_url":"https://api.github.com/users/lukastaegert/events{/privacy}","received_events_url":"https://api.github.com/users/lukastaegert/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/2230/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/2230/timeline","performed_via_github_app":null,"state_reason":"completed"}