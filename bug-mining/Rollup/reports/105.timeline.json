[{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/321879498","html_url":"https://github.com/rollup/rollup/issues/1532#issuecomment-321879498","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1532","id":321879498,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTg3OTQ5OA==","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-11T17:59:08Z","updated_at":"2017-08-11T17:59:08Z","body":"Can you make a [repro](https://gist.github.com/Rich-Harris/88c5fc2ac6dc941b22e7996af05d70ff) please?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/321879498/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1203032022,"node_id":"MDEyOkxhYmVsZWRFdmVudDEyMDMwMzIwMjI=","url":"https://api.github.com/repos/rollup/rollup/issues/events/1203032022","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-08-11T17:59:18Z","label":{"name":"needs repro","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/321894390","html_url":"https://github.com/rollup/rollup/issues/1532#issuecomment-321894390","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1532","id":321894390,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMTg5NDM5MA==","user":{"login":"jonataswalker","id":10571881,"node_id":"MDQ6VXNlcjEwNTcxODgx","avatar_url":"https://avatars.githubusercontent.com/u/10571881?v=4","gravatar_id":"","url":"https://api.github.com/users/jonataswalker","html_url":"https://github.com/jonataswalker","followers_url":"https://api.github.com/users/jonataswalker/followers","following_url":"https://api.github.com/users/jonataswalker/following{/other_user}","gists_url":"https://api.github.com/users/jonataswalker/gists{/gist_id}","starred_url":"https://api.github.com/users/jonataswalker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonataswalker/subscriptions","organizations_url":"https://api.github.com/users/jonataswalker/orgs","repos_url":"https://api.github.com/users/jonataswalker/repos","events_url":"https://api.github.com/users/jonataswalker/events{/privacy}","received_events_url":"https://api.github.com/users/jonataswalker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-11T19:04:23Z","updated_at":"2017-08-14T12:02:56Z","body":"I'm trying but no success until now. Perhaps it's some plugin.\r\n\r\nEdit:\r\nThe error is thrown [here](https://github.com/rollup/rollup/blob/152afb9732975188c7f4bf716c143da549afd432/src/utils/promise.js):\r\n\r\n```javascript\r\nexport function mapSequence ( array, fn ) {\r\n\tconst results = [];\r\n\tlet promise = Promise.resolve();\r\n\r\n\tfunction next ( member, i ) {\r\n\t\treturn fn( member ).then( value => results[i] = value );\r\n\t}\r\n\r\n\tfor ( let i = 0; i < array.length; i += 1 ) {\r\n\t\tpromise = promise.then( () => next( array[i], i ) );\r\n\t}\r\n\r\n\treturn promise.then( () => results );\r\n}\r\n```\r\nSpecifically: `return fn( member ).then( value => results[i] = value );`\r\n\r\n`fn` ~~is `undefined`~~ isn't promise function.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/321894390/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jonataswalker","id":10571881,"node_id":"MDQ6VXNlcjEwNTcxODgx","avatar_url":"https://avatars.githubusercontent.com/u/10571881?v=4","gravatar_id":"","url":"https://api.github.com/users/jonataswalker","html_url":"https://github.com/jonataswalker","followers_url":"https://api.github.com/users/jonataswalker/followers","following_url":"https://api.github.com/users/jonataswalker/following{/other_user}","gists_url":"https://api.github.com/users/jonataswalker/gists{/gist_id}","starred_url":"https://api.github.com/users/jonataswalker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonataswalker/subscriptions","organizations_url":"https://api.github.com/users/jonataswalker/orgs","repos_url":"https://api.github.com/users/jonataswalker/repos","events_url":"https://api.github.com/users/jonataswalker/events{/privacy}","received_events_url":"https://api.github.com/users/jonataswalker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/322171786","html_url":"https://github.com/rollup/rollup/issues/1532#issuecomment-322171786","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1532","id":322171786,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMjE3MTc4Ng==","user":{"login":"jonataswalker","id":10571881,"node_id":"MDQ6VXNlcjEwNTcxODgx","avatar_url":"https://avatars.githubusercontent.com/u/10571881?v=4","gravatar_id":"","url":"https://api.github.com/users/jonataswalker","html_url":"https://github.com/jonataswalker","followers_url":"https://api.github.com/users/jonataswalker/followers","following_url":"https://api.github.com/users/jonataswalker/following{/other_user}","gists_url":"https://api.github.com/users/jonataswalker/gists{/gist_id}","starred_url":"https://api.github.com/users/jonataswalker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonataswalker/subscriptions","organizations_url":"https://api.github.com/users/jonataswalker/orgs","repos_url":"https://api.github.com/users/jonataswalker/repos","events_url":"https://api.github.com/users/jonataswalker/events{/privacy}","received_events_url":"https://api.github.com/users/jonataswalker/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-14T11:59:40Z","updated_at":"2017-08-14T11:59:40Z","body":"@Rich-Harris actually the problem (my guess) is when you have multiple configs.\r\n\r\nRepro: https://github.com/jonataswalker/rollup-watch-repro","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/322171786/reactions","total_count":1,"+1":0,"-1":0,"laugh":1,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jonataswalker","id":10571881,"node_id":"MDQ6VXNlcjEwNTcxODgx","avatar_url":"https://avatars.githubusercontent.com/u/10571881?v=4","gravatar_id":"","url":"https://api.github.com/users/jonataswalker","html_url":"https://github.com/jonataswalker","followers_url":"https://api.github.com/users/jonataswalker/followers","following_url":"https://api.github.com/users/jonataswalker/following{/other_user}","gists_url":"https://api.github.com/users/jonataswalker/gists{/gist_id}","starred_url":"https://api.github.com/users/jonataswalker/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonataswalker/subscriptions","organizations_url":"https://api.github.com/users/jonataswalker/orgs","repos_url":"https://api.github.com/users/jonataswalker/repos","events_url":"https://api.github.com/users/jonataswalker/events{/privacy}","received_events_url":"https://api.github.com/users/jonataswalker/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1204644340,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTIwNDY0NDM0MA==","url":"https://api.github.com/repos/rollup/rollup/issues/events/1204644340","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-08-14T11:59:40Z","performed_via_github_app":null},{"id":1204644342,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEyMDQ2NDQzNDI=","url":"https://api.github.com/repos/rollup/rollup/issues/events/1204644342","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-08-14T11:59:40Z","performed_via_github_app":null},{"id":1208812359,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyMDg4MTIzNTk=","url":"https://api.github.com/repos/rollup/rollup/issues/events/1208812359","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8ec3e0d7a9d78e36129505cc8b33d38739df31ad","commit_url":"https://api.github.com/repos/rollup/rollup/commits/8ec3e0d7a9d78e36129505cc8b33d38739df31ad","created_at":"2017-08-16T18:20:27Z","performed_via_github_app":null},{"actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-16T18:44:29Z","updated_at":"2017-08-16T18:44:29Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rollup/rollup/issues/1558","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/1558/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/1558/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/1558/events","html_url":"https://github.com/rollup/rollup/pull/1558","id":250722619,"node_id":"MDExOlB1bGxSZXF1ZXN0MTM2MDk0ODA5","number":1558,"title":"use Promise.resolve in mapSequence, to ensure each item is thenable","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-08-16T18:44:29Z","updated_at":"2017-08-16T20:30:21Z","closed_at":"2017-08-16T18:44:49Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":35640229,"node_id":"MDEwOlJlcG9zaXRvcnkzNTY0MDIyOQ==","name":"rollup","full_name":"rollup/rollup","private":false,"owner":{"login":"rollup","id":12554859,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEyNTU0ODU5","avatar_url":"https://avatars.githubusercontent.com/u/12554859?v=4","gravatar_id":"","url":"https://api.github.com/users/rollup","html_url":"https://github.com/rollup","followers_url":"https://api.github.com/users/rollup/followers","following_url":"https://api.github.com/users/rollup/following{/other_user}","gists_url":"https://api.github.com/users/rollup/gists{/gist_id}","starred_url":"https://api.github.com/users/rollup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rollup/subscriptions","organizations_url":"https://api.github.com/users/rollup/orgs","repos_url":"https://api.github.com/users/rollup/repos","events_url":"https://api.github.com/users/rollup/events{/privacy}","received_events_url":"https://api.github.com/users/rollup/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rollup/rollup","description":"Next-generation ES module bundler","fork":false,"url":"https://api.github.com/repos/rollup/rollup","forks_url":"https://api.github.com/repos/rollup/rollup/forks","keys_url":"https://api.github.com/repos/rollup/rollup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rollup/rollup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rollup/rollup/teams","hooks_url":"https://api.github.com/repos/rollup/rollup/hooks","issue_events_url":"https://api.github.com/repos/rollup/rollup/issues/events{/number}","events_url":"https://api.github.com/repos/rollup/rollup/events","assignees_url":"https://api.github.com/repos/rollup/rollup/assignees{/user}","branches_url":"https://api.github.com/repos/rollup/rollup/branches{/branch}","tags_url":"https://api.github.com/repos/rollup/rollup/tags","blobs_url":"https://api.github.com/repos/rollup/rollup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rollup/rollup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rollup/rollup/git/refs{/sha}","trees_url":"https://api.github.com/repos/rollup/rollup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rollup/rollup/statuses/{sha}","languages_url":"https://api.github.com/repos/rollup/rollup/languages","stargazers_url":"https://api.github.com/repos/rollup/rollup/stargazers","contributors_url":"https://api.github.com/repos/rollup/rollup/contributors","subscribers_url":"https://api.github.com/repos/rollup/rollup/subscribers","subscription_url":"https://api.github.com/repos/rollup/rollup/subscription","commits_url":"https://api.github.com/repos/rollup/rollup/commits{/sha}","git_commits_url":"https://api.github.com/repos/rollup/rollup/git/commits{/sha}","comments_url":"https://api.github.com/repos/rollup/rollup/comments{/number}","issue_comment_url":"https://api.github.com/repos/rollup/rollup/issues/comments{/number}","contents_url":"https://api.github.com/repos/rollup/rollup/contents/{+path}","compare_url":"https://api.github.com/repos/rollup/rollup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rollup/rollup/merges","archive_url":"https://api.github.com/repos/rollup/rollup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rollup/rollup/downloads","issues_url":"https://api.github.com/repos/rollup/rollup/issues{/number}","pulls_url":"https://api.github.com/repos/rollup/rollup/pulls{/number}","milestones_url":"https://api.github.com/repos/rollup/rollup/milestones{/number}","notifications_url":"https://api.github.com/repos/rollup/rollup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rollup/rollup/labels{/name}","releases_url":"https://api.github.com/repos/rollup/rollup/releases{/id}","deployments_url":"https://api.github.com/repos/rollup/rollup/deployments","created_at":"2015-05-14T22:26:28Z","updated_at":"2025-11-09T07:58:19Z","pushed_at":"2025-11-08T17:11:17Z","git_url":"git://github.com/rollup/rollup.git","ssh_url":"git@github.com:rollup/rollup.git","clone_url":"https://github.com/rollup/rollup.git","svn_url":"https://github.com/rollup/rollup","homepage":"https://rollupjs.org","size":32539,"stargazers_count":26104,"watchers_count":26104,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1649,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":602,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1649,"open_issues":602,"watchers":26104,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rollup/rollup/pulls/1558","html_url":"https://github.com/rollup/rollup/pull/1558","diff_url":"https://github.com/rollup/rollup/pull/1558.diff","patch_url":"https://github.com/rollup/rollup/pull/1558.patch","merged_at":"2017-08-16T18:44:49Z"},"body":"fixes #1532","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/1558/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/1558/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1208854775,"node_id":"MDExOkNsb3NlZEV2ZW50MTIwODg1NDc3NQ==","url":"https://api.github.com/repos/rollup/rollup/issues/events/1208854775","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2017-08-16T18:44:49Z","state_reason":null,"performed_via_github_app":null},{"id":1208854824,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDEyMDg4NTQ4MjQ=","url":"https://api.github.com/repos/rollup/rollup/issues/events/1208854824","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"714ae2d13975b1e1d298209e77f0869b2edc7311","commit_url":"https://api.github.com/repos/rollup/rollup/commits/714ae2d13975b1e1d298209e77f0869b2edc7311","created_at":"2017-08-16T18:44:52Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/322864111","html_url":"https://github.com/rollup/rollup/issues/1532#issuecomment-322864111","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1532","id":322864111,"node_id":"MDEyOklzc3VlQ29tbWVudDMyMjg2NDExMQ==","user":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-16T18:47:03Z","updated_at":"2017-08-16T18:47:03Z","body":"Thank you â€” this is fixed in 0.47.5","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/322864111/reactions","total_count":5,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":4,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"Rich-Harris","id":1162160,"node_id":"MDQ6VXNlcjExNjIxNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1162160?v=4","gravatar_id":"","url":"https://api.github.com/users/Rich-Harris","html_url":"https://github.com/Rich-Harris","followers_url":"https://api.github.com/users/Rich-Harris/followers","following_url":"https://api.github.com/users/Rich-Harris/following{/other_user}","gists_url":"https://api.github.com/users/Rich-Harris/gists{/gist_id}","starred_url":"https://api.github.com/users/Rich-Harris/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Rich-Harris/subscriptions","organizations_url":"https://api.github.com/users/Rich-Harris/orgs","repos_url":"https://api.github.com/users/Rich-Harris/repos","events_url":"https://api.github.com/users/Rich-Harris/events{/privacy}","received_events_url":"https://api.github.com/users/Rich-Harris/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-08-27T21:28:27Z","updated_at":"2017-08-27T21:28:27Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/rollup/rollup/issues/1571","repository_url":"https://api.github.com/repos/rollup/rollup","labels_url":"https://api.github.com/repos/rollup/rollup/issues/1571/labels{/name}","comments_url":"https://api.github.com/repos/rollup/rollup/issues/1571/comments","events_url":"https://api.github.com/repos/rollup/rollup/issues/1571/events","html_url":"https://github.com/rollup/rollup/pull/1571","id":251753993,"node_id":"MDExOlB1bGxSZXF1ZXN0MTM2ODMwMzg3","number":1571,"title":"Make sure Task.run returns a Promise","user":{"login":"marijnh","id":144427,"node_id":"MDQ6VXNlcjE0NDQyNw==","avatar_url":"https://avatars.githubusercontent.com/u/144427?v=4","gravatar_id":"","url":"https://api.github.com/users/marijnh","html_url":"https://github.com/marijnh","followers_url":"https://api.github.com/users/marijnh/followers","following_url":"https://api.github.com/users/marijnh/following{/other_user}","gists_url":"https://api.github.com/users/marijnh/gists{/gist_id}","starred_url":"https://api.github.com/users/marijnh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marijnh/subscriptions","organizations_url":"https://api.github.com/users/marijnh/orgs","repos_url":"https://api.github.com/users/marijnh/repos","events_url":"https://api.github.com/users/marijnh/events{/privacy}","received_events_url":"https://api.github.com/users/marijnh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-08-21T19:53:30Z","updated_at":"2017-08-27T21:34:10Z","closed_at":"2017-08-27T21:34:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":35640229,"node_id":"MDEwOlJlcG9zaXRvcnkzNTY0MDIyOQ==","name":"rollup","full_name":"rollup/rollup","private":false,"owner":{"login":"rollup","id":12554859,"node_id":"MDEyOk9yZ2FuaXphdGlvbjEyNTU0ODU5","avatar_url":"https://avatars.githubusercontent.com/u/12554859?v=4","gravatar_id":"","url":"https://api.github.com/users/rollup","html_url":"https://github.com/rollup","followers_url":"https://api.github.com/users/rollup/followers","following_url":"https://api.github.com/users/rollup/following{/other_user}","gists_url":"https://api.github.com/users/rollup/gists{/gist_id}","starred_url":"https://api.github.com/users/rollup/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rollup/subscriptions","organizations_url":"https://api.github.com/users/rollup/orgs","repos_url":"https://api.github.com/users/rollup/repos","events_url":"https://api.github.com/users/rollup/events{/privacy}","received_events_url":"https://api.github.com/users/rollup/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/rollup/rollup","description":"Next-generation ES module bundler","fork":false,"url":"https://api.github.com/repos/rollup/rollup","forks_url":"https://api.github.com/repos/rollup/rollup/forks","keys_url":"https://api.github.com/repos/rollup/rollup/keys{/key_id}","collaborators_url":"https://api.github.com/repos/rollup/rollup/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/rollup/rollup/teams","hooks_url":"https://api.github.com/repos/rollup/rollup/hooks","issue_events_url":"https://api.github.com/repos/rollup/rollup/issues/events{/number}","events_url":"https://api.github.com/repos/rollup/rollup/events","assignees_url":"https://api.github.com/repos/rollup/rollup/assignees{/user}","branches_url":"https://api.github.com/repos/rollup/rollup/branches{/branch}","tags_url":"https://api.github.com/repos/rollup/rollup/tags","blobs_url":"https://api.github.com/repos/rollup/rollup/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/rollup/rollup/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/rollup/rollup/git/refs{/sha}","trees_url":"https://api.github.com/repos/rollup/rollup/git/trees{/sha}","statuses_url":"https://api.github.com/repos/rollup/rollup/statuses/{sha}","languages_url":"https://api.github.com/repos/rollup/rollup/languages","stargazers_url":"https://api.github.com/repos/rollup/rollup/stargazers","contributors_url":"https://api.github.com/repos/rollup/rollup/contributors","subscribers_url":"https://api.github.com/repos/rollup/rollup/subscribers","subscription_url":"https://api.github.com/repos/rollup/rollup/subscription","commits_url":"https://api.github.com/repos/rollup/rollup/commits{/sha}","git_commits_url":"https://api.github.com/repos/rollup/rollup/git/commits{/sha}","comments_url":"https://api.github.com/repos/rollup/rollup/comments{/number}","issue_comment_url":"https://api.github.com/repos/rollup/rollup/issues/comments{/number}","contents_url":"https://api.github.com/repos/rollup/rollup/contents/{+path}","compare_url":"https://api.github.com/repos/rollup/rollup/compare/{base}...{head}","merges_url":"https://api.github.com/repos/rollup/rollup/merges","archive_url":"https://api.github.com/repos/rollup/rollup/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/rollup/rollup/downloads","issues_url":"https://api.github.com/repos/rollup/rollup/issues{/number}","pulls_url":"https://api.github.com/repos/rollup/rollup/pulls{/number}","milestones_url":"https://api.github.com/repos/rollup/rollup/milestones{/number}","notifications_url":"https://api.github.com/repos/rollup/rollup/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/rollup/rollup/labels{/name}","releases_url":"https://api.github.com/repos/rollup/rollup/releases{/id}","deployments_url":"https://api.github.com/repos/rollup/rollup/deployments","created_at":"2015-05-14T22:26:28Z","updated_at":"2025-11-09T07:58:19Z","pushed_at":"2025-11-08T17:11:17Z","git_url":"git://github.com/rollup/rollup.git","ssh_url":"git@github.com:rollup/rollup.git","clone_url":"https://github.com/rollup/rollup.git","svn_url":"https://github.com/rollup/rollup","homepage":"https://rollupjs.org","size":32539,"stargazers_count":26104,"watchers_count":26104,"language":"JavaScript","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":1649,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":602,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":1649,"open_issues":602,"watchers":26104,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/rollup/rollup/pulls/1571","html_url":"https://github.com/rollup/rollup/pull/1571","diff_url":"https://github.com/rollup/rollup/pull/1571.diff","patch_url":"https://github.com/rollup/rollup/pull/1571.patch","merged_at":null},"body":"Earlier in the file, there's a call `mapSequence(this.tasks, task => task.run())`, which was crashing for me (when calling `watch` directly, not going through the command-line tool) because of the short-circuit return in `run` returning undefined. I don't really know what I'm doing here, since I only briefly looked at the code, but returning an empty promise seems like it should address this, and indeed it stops my use from crashing.","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/1571/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rollup/rollup/issues/1571/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/884810344","html_url":"https://github.com/rollup/rollup/issues/1532#issuecomment-884810344","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1532","id":884810344,"node_id":"IC_kwDOAh_Tpc40vSJo","user":{"login":"reactkeshav","id":87808919,"node_id":"MDQ6VXNlcjg3ODA4OTE5","avatar_url":"https://avatars.githubusercontent.com/u/87808919?v=4","gravatar_id":"","url":"https://api.github.com/users/reactkeshav","html_url":"https://github.com/reactkeshav","followers_url":"https://api.github.com/users/reactkeshav/followers","following_url":"https://api.github.com/users/reactkeshav/following{/other_user}","gists_url":"https://api.github.com/users/reactkeshav/gists{/gist_id}","starred_url":"https://api.github.com/users/reactkeshav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reactkeshav/subscriptions","organizations_url":"https://api.github.com/users/reactkeshav/orgs","repos_url":"https://api.github.com/users/reactkeshav/repos","events_url":"https://api.github.com/users/reactkeshav/events{/privacy}","received_events_url":"https://api.github.com/users/reactkeshav/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-22T10:30:03Z","updated_at":"2021-07-22T10:30:03Z","body":"i Have also same problem.. please help me out\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport { CCard, CCardHeader, CCardBody, CRow } from '@coreui/react'\r\nimport { Table, Tag, Space, Carousel, Popconfirm, message } from 'antd'\r\nimport '../../../scss/_custom.scss'\r\nimport DataBase from '../../../Firebase/DataFirebase'\r\nimport { Images } from '../../../Shared/Assets'\r\nimport ImageIcon from '../../../components/Atoms/ImageIcon'\r\n\r\nimport ProductDataSource from './Constant/ProductDataSource'\r\n\r\nimport '../BuisnessPost/style.scss'\r\n\r\n// import Modal from 'src/components/Cell'17\r\nimport { Modal, Button, Form } from 'react-bootstrap'\r\nimport { object } from 'prop-types'\r\n\r\nconst BuisnessPost = () => {\r\n  const { Column, ColumnGroup } = Table\r\n  const [show, setShow] = useState(false)\r\n  const [active, setActive] = useState()\r\n  const [productsList, setProductsList] = useState(ProductDataSource)\r\n  const [dataList, setDataList] = useState([])\r\n\r\n  const handleClose = () => setShow(false)\r\n  const handleShow = () => {\r\n    setShow(true)\r\n  }\r\n\r\n  // delete handle\r\n  function deleteHandle(ind) {\r\n    setProductsList(productsList.filter((item) => item.key !== ind.key))\r\n  }\r\n\r\n  // data from firebase\r\n  useEffect(() => {\r\n    DataBase.getAllProducts().then((response) => {\r\n      console.log('Data fetched', response)\r\n      setDataList({\r\n        dataList,\r\n      })\r\n    })\r\n    //     .catch(() => {\r\n    //       setDataList({\r\n    //         ...dataList,\r\n    //       })\r\n    //     })\r\n  })\r\n\r\n  // message popups\r\n  function confirm(e) {\r\n    e.preventDefault()\r\n    console.log(e)\r\n    message.success('Click on Yes')\r\n  }\r\n  function cancel(e) {\r\n    console.log(e)\r\n    message.error('Click on No')\r\n  }\r\n\r\n  // const ProductDataSource = [\r\n  //   {\r\n  //     key: 0,\r\n  //     Image: (\r\n  //       <Carousel autoplay afterChange={onChange}>\r\n  //         <div>\r\n  //           <ImageIcon style={{ width: '100px' }} src={Images.AVATAR} />\r\n  //         </div>\r\n  //         <div>\r\n  //           <ImageIcon style={{ width: '100px' }} src={Images.AVATAR} />\r\n  //         </div>\r\n  //       </Carousel>\r\n  //     ),\r\n  //     Product: 'cam',\r\n  //     Price: ' $100 ',\r\n  //     Description: ' Camera for photography ',\r\n  //     status: 'Active',\r\n  //     created: '12 june 2021',\r\n  //   },\r\n  // ]\r\n\r\n  return (\r\n    <>\r\n      <CCard className=\"mb-4\">\r\n        <CCardHeader>\r\n          Posts\r\n          {/* <DocsLink href=\"https://coreui.io/docs/content/typography/\" /> */}\r\n        </CCardHeader>\r\n        <CCardBody>\r\n          <CRow>\r\n            <Table dataSource={productsList}>\r\n              <Column title=\"Image\" dataIndex=\"image\" key=\"Image\" />\r\n              <Column title=\"Product\" dataIndex=\"product\" key=\"product\" />\r\n              <Column title=\"Price\" dataIndex=\"price\" key=\"price\" />\r\n              <Column title=\"Description\" dataIndex=\"description\" key=\"description\" />\r\n              <Column title=\"Status\" dataIndex=\"status\" key=\"status\" />\r\n              <Column title=\"Created\" dataIndex=\"created\" key=\"created\" />\r\n\r\n              <Column\r\n                title=\"Action\"\r\n                key=\"action\"\r\n                render={(text, record) => (\r\n                  <Space size=\"middle\">\r\n                    <a className=\"View\">View</a>\r\n                    <a className=\"Approve\" onClick={handleShow}>\r\n                      Aproved status\r\n                    </a>\r\n                    <Popconfirm\r\n                      title=\"Are you sure to delete this task?\"\r\n                      onCancel={() => {}}\r\n                      onConfirm={confirm}\r\n                      okText=\"Yes\"\r\n                      cancelText=\"No\"\r\n                    >\r\n                      <a className=\"Delete\">Delete</a>\r\n                    </Popconfirm>\r\n                  </Space>\r\n                )}\r\n              />\r\n            </Table>\r\n          </CRow>\r\n\r\n          <Modal show={show}>\r\n            <Modal.Header>\r\n              <Modal.Title>Status</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <Form.Control\r\n                as=\"select\"\r\n                value={active}\r\n                onChange={(e) => {\r\n                  e.preventDefault()\r\n                  setActive(e.target.value)\r\n                }}\r\n              >\r\n                <option value=\"\"> Choose Type</option>\r\n                <option value=\"Approved\">Approved</option>\r\n                <option value=\"Reject\">Reject</option>\r\n              </Form.Control>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button className=\"text-white\" variant=\"secondary\" onClick={handleClose}>\r\n                Close\r\n              </Button>\r\n              {/* <Button className=\"text-white\" variant=\"success\" onClick={handleSubmitChange}>\r\n                Save\r\n              </Button> */}\r\n            </Modal.Footer>\r\n          </Modal>\r\n        </CCardBody>\r\n      </CCard>\r\n    </>\r\n  )\r\n}\r\nexport default BuisnessPost\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/884810344/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"reactkeshav","id":87808919,"node_id":"MDQ6VXNlcjg3ODA4OTE5","avatar_url":"https://avatars.githubusercontent.com/u/87808919?v=4","gravatar_id":"","url":"https://api.github.com/users/reactkeshav","html_url":"https://github.com/reactkeshav","followers_url":"https://api.github.com/users/reactkeshav/followers","following_url":"https://api.github.com/users/reactkeshav/following{/other_user}","gists_url":"https://api.github.com/users/reactkeshav/gists{/gist_id}","starred_url":"https://api.github.com/users/reactkeshav/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/reactkeshav/subscriptions","organizations_url":"https://api.github.com/users/reactkeshav/orgs","repos_url":"https://api.github.com/users/reactkeshav/repos","events_url":"https://api.github.com/users/reactkeshav/events{/privacy}","received_events_url":"https://api.github.com/users/reactkeshav/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/953962627","html_url":"https://github.com/rollup/rollup/issues/1532#issuecomment-953962627","issue_url":"https://api.github.com/repos/rollup/rollup/issues/1532","id":953962627,"node_id":"IC_kwDOAh_Tpc443FCD","user":{"login":"yearswriter","id":38693248,"node_id":"MDQ6VXNlcjM4NjkzMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/38693248?v=4","gravatar_id":"","url":"https://api.github.com/users/yearswriter","html_url":"https://github.com/yearswriter","followers_url":"https://api.github.com/users/yearswriter/followers","following_url":"https://api.github.com/users/yearswriter/following{/other_user}","gists_url":"https://api.github.com/users/yearswriter/gists{/gist_id}","starred_url":"https://api.github.com/users/yearswriter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yearswriter/subscriptions","organizations_url":"https://api.github.com/users/yearswriter/orgs","repos_url":"https://api.github.com/users/yearswriter/repos","events_url":"https://api.github.com/users/yearswriter/events{/privacy}","received_events_url":"https://api.github.com/users/yearswriter/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-28T15:34:20Z","updated_at":"2021-10-28T15:36:30Z","body":"Having the same issue, happens with Promise in `window.onload` handler, rollup does succesfully bundle, main question is why it looses this\r\n## Input:\r\n**rollup v2.58.1**\r\n#### **rollup.config.js**\r\n```js\r\nimport json from '@rollup/plugin-json';\r\nimport resolve from '@rollup/plugin-node-resolve';\r\nimport commonjs from '@rollup/plugin-commonjs';\r\nimport nodePolyfills from 'rollup-plugin-polyfill-node';\r\n\r\nexport default {\r\n    input: 'src/src_mapInit.js',\r\n    context: 'window',\r\n    output: {\r\n      file: 'build/mapInit.js',\r\n      format: 'iife',\r\n    },\r\n    plugins: [json(),resolve(),nodePolyfills(),\r\n        commonjs()]\r\n  };\r\n```\r\n#### **src/src_mapInit.js**\r\n```js \r\nimport { Map, Polyline, GeoJSON, TileLayer, Canvas } from  'Leaflet';\r\nimport {MapSettings, LayerSettings} from \"./classes/Settings.js\";\r\nwindow.onload = function (){\r\n    mapInit();\r\n}\r\nfunction mapInit() {\r\n //...bunch of leaflet stuff that works\r\nvar loadJson = new Promise((resolve, reject) => {\r\n    var request = new XMLHttpRequest();\r\n    request.open('GET', \"./geojson/map_template.json\");\r\n    request.setRequestHeader('Content-Type', 'application/json');\r\n    request.responseType = 'json';\r\n    request.onload = function() {\r\n        if (request.status === 200) {\r\n            resolve(request.response);            \r\n        } else {\r\n            reject(Error('Json didn\\'t load successfully; error code:' + request.statusText));\r\n        }\r\n    }\r\n    request.onerror = function() {\r\n        reject(Error('There was a network error.'));\r\n    };\r\n    request.send();\r\n});\r\n\r\nloadJson.then((map_template) => {\r\n    GeoJSON(map_template).addTo(map);\r\n});\r\n}\r\n```\r\n#### **html**:\r\n        <script type=\"module\" async src=\"... mapInit.js\" crossorigin=\" \"></script>\r\n## error\r\n```Uncaught (in promise) TypeError: this is undefined```\r\n### stack trace:\r\n```\r\n    NewClass ... mapInit.js:261\r\n    mapInit ... mapInit.js:14031\r\n    promise callback*mapInit  ... mapInit.js:14030\r\n    onload ... mapInit.js:13664\r\n    EventHandlerNonNull* ... mapInit.js:13662\r\n    ...\r\n```\r\n### mapInit.js:261 (+- line or two)\r\n```js\r\n// @class Class\r\n// @aka L.Class\r\n\r\n// @section\r\n// @uninheritable\r\n\r\n// Thanks to John Resig and Dean Edwards for inspiration!\r\n\r\nfunction Class() {}\r\n\r\nClass.extend = function (props) {\r\n\r\n// @function extend(props: Object): Function\r\n// [Extends the current class](#class-inheritance) given the properties to be included.\r\n// Returns a Javascript function that is a class constructor (to be called with `new`).\r\nvar NewClass = function () {\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\t// call the constructor\r\n\tif (this.initialize) { // this.initialize is asking undefined this -  why? <----- ERROR IN QQ\r\n\t\tthis.initialize.apply(this, arguments);\r\n\t}\r\n//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n\t// call all constructor hooks\r\n\tthis.callInitHooks();\r\n};\r\n\r\nvar parentProto = NewClass.__super__ = this.prototype;\r\n\r\nvar proto = create$2(parentProto);\r\nproto.constructor = NewClass;\r\n\r\nNewClass.prototype = proto;\r\n\r\n// inherit parent's statics\r\nfor (var i in this) {\r\n\tif (Object.prototype.hasOwnProperty.call(this, i) && i !== 'prototype' && i !== '__super__') {\r\n\t\tNewClass[i] = this[i];\r\n\t}\r\n}\r\n\r\n// mix static properties into the class\r\nif (props.statics) {\r\n\textend(NewClass, props.statics);\r\n\tdelete props.statics;\r\n}\r\n\r\n// mix includes into the prototype\r\nif (props.includes) {\r\n\tcheckDeprecatedMixinEvents(props.includes);\r\n\textend.apply(null, [proto].concat(props.includes));\r\n\tdelete props.includes;\r\n}\r\n\r\n// merge options\r\nif (proto.options) {\r\n\tprops.options = extend(create$2(proto.options), props.options);\r\n}\r\n\r\n// mix given properties into the prototype\r\nextend(proto, props);\r\n\r\nproto._initHooks = [];\r\n\r\n// add method for calling all hooks\r\nproto.callInitHooks = function () {\r\n\r\n\tif (this._initHooksCalled) { return; }\r\n\r\n\tif (parentProto.callInitHooks) {\r\n\t\tparentProto.callInitHooks.call(this);\r\n\t}\r\n\r\n\tthis._initHooksCalled = true;\r\n\r\n\tfor (var i = 0, len = proto._initHooks.length; i < len; i++) {\r\n\t\tproto._initHooks[i].call(this);\r\n\t}\r\n};\r\n\r\nreturn NewClass;\r\n};\r\n```\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rollup/rollup/issues/comments/953962627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yearswriter","id":38693248,"node_id":"MDQ6VXNlcjM4NjkzMjQ4","avatar_url":"https://avatars.githubusercontent.com/u/38693248?v=4","gravatar_id":"","url":"https://api.github.com/users/yearswriter","html_url":"https://github.com/yearswriter","followers_url":"https://api.github.com/users/yearswriter/followers","following_url":"https://api.github.com/users/yearswriter/following{/other_user}","gists_url":"https://api.github.com/users/yearswriter/gists{/gist_id}","starred_url":"https://api.github.com/users/yearswriter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yearswriter/subscriptions","organizations_url":"https://api.github.com/users/yearswriter/orgs","repos_url":"https://api.github.com/users/yearswriter/repos","events_url":"https://api.github.com/users/yearswriter/events{/privacy}","received_events_url":"https://api.github.com/users/yearswriter/received_events","type":"User","user_view_type":"public","site_admin":false}}]