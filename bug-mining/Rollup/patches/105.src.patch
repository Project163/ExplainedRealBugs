diff --git a/package-lock.json b/package-lock.json
index ca732f5cc..7a40e23a0 100644
--- a/package-lock.json
+++ b/package-lock.json
@@ -1,6 +1,6 @@
 {
   "name": "rollup",
-  "version": "0.47.1",
+  "version": "0.47.4",
   "lockfileVersion": 1,
   "requires": true,
   "dependencies": {
diff --git a/src/utils/promise.js b/src/utils/promise.js
index 096343c02..47d62ce0d 100644
--- a/src/utils/promise.js
+++ b/src/utils/promise.js
@@ -3,7 +3,7 @@ export function mapSequence ( array, fn ) {
 	let promise = Promise.resolve();
 
 	function next ( member, i ) {
-		return fn( member ).then( value => results[i] = value );
+		return Promise.resolve( fn( member ) ).then( value => results[i] = value );
 	}
 
 	for ( let i = 0; i < array.length; i += 1 ) {
