diff --git a/src/ast/nodes/ExportDefaultDeclaration.js b/src/ast/nodes/ExportDefaultDeclaration.js
index b96f8eb6b..e862d75c3 100644
--- a/src/ast/nodes/ExportDefaultDeclaration.js
+++ b/src/ast/nodes/ExportDefaultDeclaration.js
@@ -3,6 +3,20 @@ import ExecutionPathOptions from '../ExecutionPathOptions';
 
 const functionOrClassDeclaration = /^(?:Function|Class)Declaration/;
 
+function buildRegexWithSpaces (re) {
+	const spaceOrComment = "(?:" + [
+		/\s/.source, // Space
+		/\/\/.*[\n\r]/.source, // Single line comment
+		/\/\*[^]*?\*\//.source, // Multiline comment. There is [^] instead of . because it also matches \n
+	].join( "|" ) + ")";
+	return new RegExp( re.source.replace( /\s|\\s/g, spaceOrComment ), re.flags );
+}
+
+const sourceRE = {
+	exportDefault: buildRegexWithSpaces( /^ *export +default */ ),
+	declarationHeader: buildRegexWithSpaces( /^ *export +default +(?:(?:async +)?function(?: *\*)?|class)/ ),
+};
+
 export default class ExportDefaultDeclaration extends Node {
 	bindNode () {
 		if ( this._declarationName ) {
@@ -37,7 +51,7 @@ export default class ExportDefaultDeclaration extends Node {
 		const statementStr = code.original.slice( this.start, this.end );
 
 		// paren workaround: find first non-whitespace character position after `export default`
-		const declaration_start = this.start + statementStr.match( /^\s*export\s+default\s*/ )[ 0 ].length;
+		const declaration_start = this.start + statementStr.match( sourceRE.exportDefault )[ 0 ].length;
 
 		if ( functionOrClassDeclaration.test(this.declaration.type) ) {
 			if ( treeshakeable ) {
@@ -46,7 +60,7 @@ export default class ExportDefaultDeclaration extends Node {
 
 			// Add the id to anonymous declarations
 			if ( !this.declaration.id ) {
-				const id_insertPos = this.start + statementStr.match( /^\s*export\s+default\s*(?:function|class)/ )[ 0 ].length;
+				const id_insertPos = this.start + statementStr.match( sourceRE.declarationHeader )[ 0 ].length;
 				code.appendLeft( id_insertPos, ` ${name}` );
 			}
 
diff --git a/test/form/samples/export-default-anonymous-declarations/_config.js b/test/form/samples/export-default-anonymous-declarations/_config.js
new file mode 100644
index 000000000..954cb9097
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/_config.js
@@ -0,0 +1,3 @@
+module.exports = {
+	description: 'export default [Declaration] with spaces and comments'
+};
diff --git a/test/form/samples/export-default-anonymous-declarations/_expected/amd.js b/test/form/samples/export-default-anonymous-declarations/_expected/amd.js
new file mode 100644
index 000000000..2ba42f7cd
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/_expected/amd.js
@@ -0,0 +1,63 @@
+define(function () { 'use strict';
+
+  function Fn
+
+  //iian iaouns
+  /* aaain ob skubz
+
+
+  */
+
+  () {
+    console.log("Foo");
+  }
+
+  async /* [no LineTerminator here] */ function Async
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  () {
+    console.log("Foo");
+  }
+
+  function
+
+  /* oiasnpiueno */
+  /// iauianpns
+
+  /* aiusni
+  */
+
+  * Generator
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  () {
+    console.log("Foo");
+  }
+
+  class Class
+
+  /* oiasnpiueno */
+  /// iauianpns
+
+  /* aiusni
+  */
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  {
+    constructor() {
+      console.log("Foo");
+    }
+  }
+
+  Fn();
+  Async();
+  Generator();
+  new Class();
+
+});
diff --git a/test/form/samples/export-default-anonymous-declarations/_expected/cjs.js b/test/form/samples/export-default-anonymous-declarations/_expected/cjs.js
new file mode 100644
index 000000000..8e2bb6ea4
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/_expected/cjs.js
@@ -0,0 +1,61 @@
+'use strict';
+
+function Fn
+
+//iian iaouns
+/* aaain ob skubz
+
+
+*/
+
+() {
+  console.log("Foo");
+}
+
+async /* [no LineTerminator here] */ function Async
+
+//iian iaouns
+/* aaain ob skubz */
+
+() {
+  console.log("Foo");
+}
+
+function
+
+/* oiasnpiueno */
+/// iauianpns
+
+/* aiusni
+*/
+
+* Generator
+
+//iian iaouns
+/* aaain ob skubz */
+
+() {
+  console.log("Foo");
+}
+
+class Class
+
+/* oiasnpiueno */
+/// iauianpns
+
+/* aiusni
+*/
+
+//iian iaouns
+/* aaain ob skubz */
+
+{
+  constructor() {
+    console.log("Foo");
+  }
+}
+
+Fn();
+Async();
+Generator();
+new Class();
diff --git a/test/form/samples/export-default-anonymous-declarations/_expected/es.js b/test/form/samples/export-default-anonymous-declarations/_expected/es.js
new file mode 100644
index 000000000..cad076b17
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/_expected/es.js
@@ -0,0 +1,59 @@
+function Fn
+
+//iian iaouns
+/* aaain ob skubz
+
+
+*/
+
+() {
+  console.log("Foo");
+}
+
+async /* [no LineTerminator here] */ function Async
+
+//iian iaouns
+/* aaain ob skubz */
+
+() {
+  console.log("Foo");
+}
+
+function
+
+/* oiasnpiueno */
+/// iauianpns
+
+/* aiusni
+*/
+
+* Generator
+
+//iian iaouns
+/* aaain ob skubz */
+
+() {
+  console.log("Foo");
+}
+
+class Class
+
+/* oiasnpiueno */
+/// iauianpns
+
+/* aiusni
+*/
+
+//iian iaouns
+/* aaain ob skubz */
+
+{
+  constructor() {
+    console.log("Foo");
+  }
+}
+
+Fn();
+Async();
+Generator();
+new Class();
diff --git a/test/form/samples/export-default-anonymous-declarations/_expected/iife.js b/test/form/samples/export-default-anonymous-declarations/_expected/iife.js
new file mode 100644
index 000000000..c4bc9e40e
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/_expected/iife.js
@@ -0,0 +1,64 @@
+(function () {
+  'use strict';
+
+  function Fn
+
+  //iian iaouns
+  /* aaain ob skubz
+
+
+  */
+
+  () {
+    console.log("Foo");
+  }
+
+  async /* [no LineTerminator here] */ function Async
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  () {
+    console.log("Foo");
+  }
+
+  function
+
+  /* oiasnpiueno */
+  /// iauianpns
+
+  /* aiusni
+  */
+
+  * Generator
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  () {
+    console.log("Foo");
+  }
+
+  class Class
+
+  /* oiasnpiueno */
+  /// iauianpns
+
+  /* aiusni
+  */
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  {
+    constructor() {
+      console.log("Foo");
+    }
+  }
+
+  Fn();
+  Async();
+  Generator();
+  new Class();
+
+}());
diff --git a/test/form/samples/export-default-anonymous-declarations/_expected/umd.js b/test/form/samples/export-default-anonymous-declarations/_expected/umd.js
new file mode 100644
index 000000000..e2b9d95b1
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/_expected/umd.js
@@ -0,0 +1,67 @@
+(function (global, factory) {
+  typeof exports === 'object' && typeof module !== 'undefined' ? factory() :
+  typeof define === 'function' && define.amd ? define(factory) :
+  (factory());
+}(this, (function () { 'use strict';
+
+  function Fn
+
+  //iian iaouns
+  /* aaain ob skubz
+
+
+  */
+
+  () {
+    console.log("Foo");
+  }
+
+  async /* [no LineTerminator here] */ function Async
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  () {
+    console.log("Foo");
+  }
+
+  function
+
+  /* oiasnpiueno */
+  /// iauianpns
+
+  /* aiusni
+  */
+
+  * Generator
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  () {
+    console.log("Foo");
+  }
+
+  class Class
+
+  /* oiasnpiueno */
+  /// iauianpns
+
+  /* aiusni
+  */
+
+  //iian iaouns
+  /* aaain ob skubz */
+
+  {
+    constructor() {
+      console.log("Foo");
+    }
+  }
+
+  Fn();
+  Async();
+  Generator();
+  new Class();
+
+})));
diff --git a/test/form/samples/export-default-anonymous-declarations/async.js b/test/form/samples/export-default-anonymous-declarations/async.js
new file mode 100644
index 000000000..74f70f517
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/async.js
@@ -0,0 +1,20 @@
+export
+
+/* comment */
+// aaaa
+
+/* foo */
+
+default // jsjjjsjjjjsjs
+
+/* jsjjddjksj
+*/ // Too many comments lol
+
+async /* [no LineTerminator here] */ function
+
+//iian iaouns
+/* aaain ob skubz */
+
+() {
+  console.log("Foo");
+}
diff --git a/test/form/samples/export-default-anonymous-declarations/class.js b/test/form/samples/export-default-anonymous-declarations/class.js
new file mode 100644
index 000000000..79d3e540e
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/class.js
@@ -0,0 +1,27 @@
+export
+
+/* comment */
+// aaaa
+
+/* foo */
+
+default // jsjjjsjjjjsjs
+
+/* jsjjddjksj */ // Too many comments lol
+
+class
+
+/* oiasnpiueno */
+/// iauianpns
+
+/* aiusni
+*/
+
+//iian iaouns
+/* aaain ob skubz */
+
+{
+  constructor() {
+    console.log("Foo");
+  }
+}
diff --git a/test/form/samples/export-default-anonymous-declarations/fn.js b/test/form/samples/export-default-anonymous-declarations/fn.js
new file mode 100644
index 000000000..dbc91a4cc
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/fn.js
@@ -0,0 +1,22 @@
+export
+
+/* comment */
+// aaaa
+
+/* foo */
+
+default // jsjjjsjjjjsjs
+
+/* jsjjddjksj */ // Too many comments lol
+
+function
+
+//iian iaouns
+/* aaain ob skubz
+
+
+*/
+
+() {
+  console.log("Foo");
+}
diff --git a/test/form/samples/export-default-anonymous-declarations/generator.js b/test/form/samples/export-default-anonymous-declarations/generator.js
new file mode 100644
index 000000000..ec357fc49
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/generator.js
@@ -0,0 +1,27 @@
+export
+
+/* comment */
+// aaaa
+
+/* foo */
+
+default // jsjjjsjjjjsjs
+
+/* jsjjddjksj */ // Too many comments lol
+
+function
+
+/* oiasnpiueno */
+/// iauianpns
+
+/* aiusni
+*/
+
+*
+
+//iian iaouns
+/* aaain ob skubz */
+
+() {
+  console.log("Foo");
+}
diff --git a/test/form/samples/export-default-anonymous-declarations/main.js b/test/form/samples/export-default-anonymous-declarations/main.js
new file mode 100644
index 000000000..27a74fe5d
--- /dev/null
+++ b/test/form/samples/export-default-anonymous-declarations/main.js
@@ -0,0 +1,9 @@
+import Fn from "./fn.js"
+import Async from "./async.js";
+import Generator from "./generator.js";
+import Class from "./class.js";
+
+Fn();
+Async();
+Generator();
+new Class();
