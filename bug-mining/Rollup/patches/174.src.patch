diff --git a/src/utils/FileEmitter.ts b/src/utils/FileEmitter.ts
index cb950b72c..5b7ceab90 100644
--- a/src/utils/FileEmitter.ts
+++ b/src/utils/FileEmitter.ts
@@ -365,14 +365,23 @@ export class FileEmitter {
 		if (!fileName) {
 			const sourceHash = getSourceHash(source);
 			fileName = fileNamesBySource.get(sourceHash);
-			if (!fileName) {
-				fileName = generateAssetFileName(
-					consumedFile.name,
-					source,
-					sourceHash,
-					outputOptions,
-					bundle
-				);
+			const newFileName = generateAssetFileName(
+				consumedFile.name,
+				source,
+				sourceHash,
+				outputOptions,
+				bundle
+			);
+			// make sure file name deterministic in parallel emits, always use the shorter and smaller file name
+			if (
+				!fileName ||
+				fileName.length > newFileName.length ||
+				(fileName.length === newFileName.length && fileName > newFileName)
+			) {
+				if (fileName) {
+					delete bundle[fileName];
+				}
+				fileName = newFileName;
 				fileNamesBySource.set(sourceHash, fileName);
 			}
 		}
diff --git a/test/chunking-form/samples/emit-file/deduplicate-assets/_config.js b/test/chunking-form/samples/emit-file/deduplicate-assets/_config.js
index 41d3beb4c..7fdfc9c69 100644
--- a/test/chunking-form/samples/emit-file/deduplicate-assets/_config.js
+++ b/test/chunking-form/samples/emit-file/deduplicate-assets/_config.js
@@ -4,13 +4,16 @@ module.exports = {
 		input: ['main.js'],
 		plugins: {
 			buildStart() {
-				this.emitFile({ type: 'asset', name: 'string.txt', source: 'string' });
+				// emit 'string' source in a random order
 				this.emitFile({ type: 'asset', name: 'stringSameSource.txt', source: 'string' });
+				this.emitFile({ type: 'asset', name: 'string2.txt', source: 'string' });
+				this.emitFile({ type: 'asset', name: 'string1.txt', source: 'string' });
 				this.emitFile({
 					type: 'asset',
 					name: 'sameStringAsBuffer.txt',
 					source: Buffer.from('string') // Test cross Buffer/string deduplication
 				});
+
 				// Different string source
 				this.emitFile({ type: 'asset', name: 'otherString.txt', source: 'otherString' });
 
diff --git a/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/amd/assets/string-473287f8.txt b/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/amd/assets/string1-473287f8.txt
similarity index 100%
rename from test/chunking-form/samples/emit-file/deduplicate-assets/_expected/amd/assets/string-473287f8.txt
rename to test/chunking-form/samples/emit-file/deduplicate-assets/_expected/amd/assets/string1-473287f8.txt
diff --git a/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/cjs/assets/string-473287f8.txt b/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/cjs/assets/string1-473287f8.txt
similarity index 100%
rename from test/chunking-form/samples/emit-file/deduplicate-assets/_expected/cjs/assets/string-473287f8.txt
rename to test/chunking-form/samples/emit-file/deduplicate-assets/_expected/cjs/assets/string1-473287f8.txt
diff --git a/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/es/assets/string-473287f8.txt b/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/es/assets/string1-473287f8.txt
similarity index 100%
rename from test/chunking-form/samples/emit-file/deduplicate-assets/_expected/es/assets/string-473287f8.txt
rename to test/chunking-form/samples/emit-file/deduplicate-assets/_expected/es/assets/string1-473287f8.txt
diff --git a/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/system/assets/string-473287f8.txt b/test/chunking-form/samples/emit-file/deduplicate-assets/_expected/system/assets/string1-473287f8.txt
similarity index 100%
rename from test/chunking-form/samples/emit-file/deduplicate-assets/_expected/system/assets/string-473287f8.txt
rename to test/chunking-form/samples/emit-file/deduplicate-assets/_expected/system/assets/string1-473287f8.txt
