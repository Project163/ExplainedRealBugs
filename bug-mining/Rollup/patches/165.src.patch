diff --git a/cli/help.md b/cli/help.md
index 2c57fc01f..3e01fe43c 100644
--- a/cli/help.md
+++ b/cli/help.md
@@ -49,6 +49,7 @@ Basic options:
 --preserveSymlinks          Do not follow symlinks when resolving files
 --shimMissingExports        Create shim variables for missing exports
 --silent                    Don't print warnings
+--failAfterWarnings         Exit with an error code if there was a warning during the build
 --sourcemapExcludeSources   Do not include source code in source maps
 --sourcemapFile <file>      Specify bundle position for source maps
 --no-stdin                  do not read "-" from stdin
diff --git a/cli/run/batchWarnings.ts b/cli/run/batchWarnings.ts
index fd4ac2564..36d3afc41 100644
--- a/cli/run/batchWarnings.ts
+++ b/cli/run/batchWarnings.ts
@@ -8,19 +8,26 @@ export interface BatchWarnings {
 	add: (warning: RollupWarning) => void;
 	readonly count: number;
 	flush: () => void;
+	readonly warningOccurred: boolean;
 }
 
 export default function batchWarnings() {
-	let deferredWarnings = new Map<keyof typeof deferredHandlers, RollupWarning[]>();
 	let count = 0;
+	let deferredWarnings = new Map<keyof typeof deferredHandlers, RollupWarning[]>();
+	let warningOccurred = false;
 
 	return {
 		get count() {
 			return count;
 		},
 
+		get warningOccurred() {
+			return warningOccurred;
+		},
+
 		add: (warning: RollupWarning) => {
 			count += 1;
+			warningOccurred = true;
 
 			if (warning.code! in deferredHandlers) {
 				getOrCreate(deferredWarnings, warning.code!, () => []).push(warning);
diff --git a/cli/run/index.ts b/cli/run/index.ts
index 0af275670..086b325d5 100644
--- a/cli/run/index.ts
+++ b/cli/run/index.ts
@@ -67,6 +67,13 @@ export default async function runRollup(command: any) {
 				for (const inputOptions of options) {
 					await build(inputOptions, warnings, command.silent);
 				}
+				if (command.failAfterWarnings && warnings.warningOccurred) {
+					warnings.flush();
+					handleError({
+						code: 'FAIL_AFTER_WARNINGS',
+						message: 'Warnings occurred and --failAfterWarnings flag present'
+					});
+				}
 			} catch (err) {
 				warnings.flush();
 				handleError(err);
diff --git a/docs/01-command-line-reference.md b/docs/01-command-line-reference.md
index 3a313811f..56a131f84 100755
--- a/docs/01-command-line-reference.md
+++ b/docs/01-command-line-reference.md
@@ -306,6 +306,7 @@ Many options have command line equivalents. In those cases, any arguments passed
 --preserveSymlinks          Do not follow symlinks when resolving files
 --shimMissingExports        Create shim variables for missing exports
 --silent                    Don't print warnings
+--failAfterWarnings         Exit with an error code if there was a warning during the build
 --sourcemapExcludeSources   Do not include source code in source maps
 --sourcemapFile <file>      Specify bundle position for source maps
 --no-stdin                  do not read "-" from stdin
@@ -387,6 +388,10 @@ _Note: While in watch mode, the `ROLLUP_WATCH` environment variable will be set
 
 Don't print warnings to the console. If your configuration file contains an `onwarn` handler, this handler will still be called. To manually prevent that, you can access the command line options in your configuration file as described at the end of [Configuration Files](guide/en/#configuration-files).
 
+#### `--failAfterWarnings`
+
+Exit the build with an error if any warnings occurred, once the build is complete.
+
 #### `--environment <values>`
 
 Pass additional settings to the config file via `process.ENV`.
diff --git a/src/utils/options/mergeOptions.ts b/src/utils/options/mergeOptions.ts
index 2453b088f..5da4dac95 100644
--- a/src/utils/options/mergeOptions.ts
+++ b/src/utils/options/mergeOptions.ts
@@ -53,6 +53,7 @@ export function mergeOptions(
 			'environment',
 			'plugin',
 			'silent',
+			'failAfterWarnings',
 			'stdin',
 			'waitForBundleInput'
 		),
diff --git a/test/cli/samples/fail-after-warnings/_config.js b/test/cli/samples/fail-after-warnings/_config.js
new file mode 100644
index 000000000..a525e9eb1
--- /dev/null
+++ b/test/cli/samples/fail-after-warnings/_config.js
@@ -0,0 +1,11 @@
+const { assertIncludes } = require('../../../utils.js');
+
+module.exports = {
+	description: 'errors on warnings with --failAfterWarnings',
+	command: 'rollup -i main.js --failAfterWarnings',
+	error: () => true,
+	stderr: stderr => {
+		assertIncludes(stderr, '[!] Warnings occurred and --failAfterWarnings flag present');
+		return true;
+	}
+};
diff --git a/test/cli/samples/fail-after-warnings/_expected.js b/test/cli/samples/fail-after-warnings/_expected.js
new file mode 100644
index 000000000..22a34c2a4
--- /dev/null
+++ b/test/cli/samples/fail-after-warnings/_expected.js
@@ -0,0 +1,3 @@
+import 'unknown';
+
+console.log(42);
diff --git a/test/cli/samples/fail-after-warnings/main.js b/test/cli/samples/fail-after-warnings/main.js
new file mode 100644
index 000000000..cbfe54b3d
--- /dev/null
+++ b/test/cli/samples/fail-after-warnings/main.js
@@ -0,0 +1,3 @@
+import something from 'unknown';
+
+console.log(42);
diff --git a/test/cli/samples/node-config-not-found/_expected.js b/test/cli/samples/node-config-not-found/_expected.js
deleted file mode 100644
index b5aa08a6a..000000000
--- a/test/cli/samples/node-config-not-found/_expected.js
+++ /dev/null
@@ -1,11 +0,0 @@
-(function (global, factory) {
-	typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
-	typeof define === 'function' && define.amd ? define(factory) :
-	global.myBundle = factory();
-}(this, function () { 'use strict';
-
-	var main = 42;
-
-	return main;
-
-}));
diff --git a/test/cli/samples/stdout-only-inline-sourcemaps/_expected.js b/test/cli/samples/stdout-only-inline-sourcemaps/_expected.js
deleted file mode 100644
index 70449540e..000000000
--- a/test/cli/samples/stdout-only-inline-sourcemaps/_expected.js
+++ /dev/null
@@ -1,3 +0,0 @@
-console.log( 42 );
-
-//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zb2xlLmxvZyggNDIgKTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsRUFBRSJ9
diff --git a/test/misc/optionList.js b/test/misc/optionList.js
index 3ab7271f7..92c928c18 100644
--- a/test/misc/optionList.js
+++ b/test/misc/optionList.js
@@ -1,3 +1,6 @@
-exports.input = 'acorn, acornInjectPlugins, cache, context, experimentalCacheExpiry, external, inlineDynamicImports, input, manualChunks, moduleContext, onwarn, perf, plugins, preserveEntrySignatures, preserveModules, preserveSymlinks, shimMissingExports, strictDeprecations, treeshake, watch';
-exports.flags = 'acorn, acornInjectPlugins, amd, assetFileNames, banner, c, cache, chunkFileNames, compact, config, context, d, dir, dynamicImportFunction, e, entryFileNames, environment, esModule, experimentalCacheExpiry, exports, extend, external, externalLiveBindings, f, file, footer, format, freeze, g, globals, h, hoistTransitiveImports, i, indent, inlineDynamicImports, input, interop, intro, m, manualChunks, minifyInternalExports, moduleContext, n, name, namespaceToStringTag, noConflict, o, onwarn, outro, p, paths, perf, plugin, plugins, preferConst, preserveEntrySignatures, preserveModules, preserveSymlinks, shimMissingExports, silent, sourcemap, sourcemapExcludeSources, sourcemapFile, stdin, strict, strictDeprecations, systemNullSetters, treeshake, v, w, waitForBundleInput, watch';
-exports.output = 'amd, assetFileNames, banner, chunkFileNames, compact, dir, dynamicImportFunction, entryFileNames, esModule, exports, extend, externalLiveBindings, file, footer, format, freeze, globals, hoistTransitiveImports, indent, inlineDynamicImports, interop, intro, manualChunks, minifyInternalExports, name, namespaceToStringTag, noConflict, outro, paths, plugins, preferConst, preserveModules, sourcemap, sourcemapExcludeSources, sourcemapFile, sourcemapPathTransform, strict, systemNullSetters';
+exports.input =
+	'acorn, acornInjectPlugins, cache, context, experimentalCacheExpiry, external, inlineDynamicImports, input, manualChunks, moduleContext, onwarn, perf, plugins, preserveEntrySignatures, preserveModules, preserveSymlinks, shimMissingExports, strictDeprecations, treeshake, watch';
+exports.flags =
+	'acorn, acornInjectPlugins, amd, assetFileNames, banner, c, cache, chunkFileNames, compact, config, context, d, dir, dynamicImportFunction, e, entryFileNames, environment, esModule, experimentalCacheExpiry, exports, extend, external, externalLiveBindings, f, failAfterWarnings, file, footer, format, freeze, g, globals, h, hoistTransitiveImports, i, indent, inlineDynamicImports, input, interop, intro, m, manualChunks, minifyInternalExports, moduleContext, n, name, namespaceToStringTag, noConflict, o, onwarn, outro, p, paths, perf, plugin, plugins, preferConst, preserveEntrySignatures, preserveModules, preserveSymlinks, shimMissingExports, silent, sourcemap, sourcemapExcludeSources, sourcemapFile, stdin, strict, strictDeprecations, systemNullSetters, treeshake, v, w, waitForBundleInput, watch';
+exports.output =
+	'amd, assetFileNames, banner, chunkFileNames, compact, dir, dynamicImportFunction, entryFileNames, esModule, exports, extend, externalLiveBindings, file, footer, format, freeze, globals, hoistTransitiveImports, indent, inlineDynamicImports, interop, intro, manualChunks, minifyInternalExports, name, namespaceToStringTag, noConflict, outro, paths, plugins, preferConst, preserveModules, sourcemap, sourcemapExcludeSources, sourcemapFile, sourcemapPathTransform, strict, systemNullSetters';
