[{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33885566","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-33885566","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":33885566,"node_id":"MDEyOklzc3VlQ29tbWVudDMzODg1NTY2","user":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-01T22:37:57Z","updated_at":"2014-02-01T22:37:57Z","body":"So a revert of 06301c9 would help? CC: @d-schmidt\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33885566/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":90161273,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTAxNjEyNzM=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90161273","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2014-02-01T22:37:57Z","performed_via_github_app":null},{"id":90161274,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkwMTYxMjc0","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90161274","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2014-02-01T22:37:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33909617","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-33909617","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":33909617,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTA5NjE3","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-02T19:27:10Z","updated_at":"2014-02-02T19:27:51Z","body":"I'd think that there are a very few operations that wouldn't affect the palette. Perhaps we'd be better off copying the cached palette for those few operations rather than blindly copying it on all copied images. (this is assuming that we can make P->RGB-P work with a palette cached through the RGB stage. And if we can't then we should only preserve the palette when copying P images.). \n\nI'm thinking that resize using nearest neighbor, crop, and transpose would be on that short list.\n\nAnything where we're putting a pixel, transform (though, again, maybe not nearest neighbor), image ops, those could all add colors that wouldn't be in the existing palette. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33909617/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33910333","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-33910333","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":33910333,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTEwMzMz","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-02T19:50:24Z","updated_at":"2014-02-02T19:50:24Z","body":"I'm on my phone now and will check this tomorrow. P-RGB-P will result in a\ndifferent palette. If it is really broken there might be some kind of fix\nnecessary. The problem is the usage, loading, caching of it is overly\ncomplicated and inconsistent.\nAm 01.02.2014 23:38 schrieb \"Alex Clark ☺\" notifications@github.com:\n\n> So a revert of 06301c9https://github.com/python-imaging/Pillow/commit/06301c9would help? CC:\n> @d-schmidt https://github.com/d-schmidt\n> \n> —\n> Reply to this email directly or view it on GitHubhttps://github.com/python-imaging/Pillow/issues/513#issuecomment-33885566\n> .\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33910333/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":90218347,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTAyMTgzNDc=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90218347","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2014-02-02T19:50:24Z","performed_via_github_app":null},{"id":90218348,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkwMjE4MzQ4","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90218348","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2014-02-02T19:50:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33997479","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-33997479","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":33997479,"node_id":"MDEyOklzc3VlQ29tbWVudDMzOTk3NDc5","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-03T20:41:20Z","updated_at":"2014-02-03T20:41:20Z","body":"@aclark4life reverting https://github.com/python-imaging/Pillow/commit/06301c9 will reopen another old issue. The commit was a fix itself not some kind of improvement.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/33997479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":90453757,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTA0NTM3NTc=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90453757","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2014-02-03T20:41:20Z","performed_via_github_app":null},{"id":90453758,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkwNDUzNzU4","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90453758","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2014-02-03T20:41:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34003354","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-34003354","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":34003354,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDAzMzU0","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-03T21:40:03Z","updated_at":"2014-02-03T21:40:03Z","body":"That would be #403.    We should probably call this a bug, I'll try to get to it if no one squashes it before I do. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34003354/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34005517","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-34005517","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":34005517,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MDA1NTE3","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-03T22:01:13Z","updated_at":"2014-02-03T22:01:13Z","body":"Maybe my half-done fix https://github.com/d-schmidt/Pillow/commit/ac6a731bb905a2dc591a921df2b421c7f28dd597 for #434 will fix this problem as well. If I don't forget it tomorrow, I'm going to test it.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34005517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34157663","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-34157663","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":34157663,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTU3NjYz","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-05T11:26:37Z","updated_at":"2014-02-05T11:26:37Z","body":"https://github.com/d-schmidt/Pillow/commit/ac6a731bb905a2dc591a921df2b421c7f28dd597 does not solve this. I just noticed @gasman uses png (`image.save('out.png')`). Have to look into png save.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34157663/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":90924311,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTA5MjQzMTE=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90924311","actor":{"login":"gasman","id":85097,"node_id":"MDQ6VXNlcjg1MDk3","avatar_url":"https://avatars.githubusercontent.com/u/85097?v=4","gravatar_id":"","url":"https://api.github.com/users/gasman","html_url":"https://github.com/gasman","followers_url":"https://api.github.com/users/gasman/followers","following_url":"https://api.github.com/users/gasman/following{/other_user}","gists_url":"https://api.github.com/users/gasman/gists{/gist_id}","starred_url":"https://api.github.com/users/gasman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gasman/subscriptions","organizations_url":"https://api.github.com/users/gasman/orgs","repos_url":"https://api.github.com/users/gasman/repos","events_url":"https://api.github.com/users/gasman/events{/privacy}","received_events_url":"https://api.github.com/users/gasman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2014-02-05T11:26:37Z","performed_via_github_app":null},{"id":90924312,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkwOTI0MzEy","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90924312","actor":{"login":"gasman","id":85097,"node_id":"MDQ6VXNlcjg1MDk3","avatar_url":"https://avatars.githubusercontent.com/u/85097?v=4","gravatar_id":"","url":"https://api.github.com/users/gasman","html_url":"https://github.com/gasman","followers_url":"https://api.github.com/users/gasman/followers","following_url":"https://api.github.com/users/gasman/following{/other_user}","gists_url":"https://api.github.com/users/gasman/gists{/gist_id}","starred_url":"https://api.github.com/users/gasman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gasman/subscriptions","organizations_url":"https://api.github.com/users/gasman/orgs","repos_url":"https://api.github.com/users/gasman/repos","events_url":"https://api.github.com/users/gasman/events{/privacy}","received_events_url":"https://api.github.com/users/gasman/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2014-02-05T11:26:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34163095","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-34163095","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":34163095,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MTYzMDk1","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-05T12:55:54Z","updated_at":"2014-02-05T12:56:59Z","body":"Okay I think I've narrowed down one problem of the whole messed up palette handling. There are two palettes and they are inconsistent after `convert()` uses `quantize()`.\n\nBasic problem test:\n\n```\nfrom PIL import Image\n\nimage = Image.open('in.gif')\nprint(image.palette.getdata())\nprint(image.im.getpalette(\"RGB\"))\nimage.save('out.png')\nprint(image.palette.getdata())\nprint(image.im.getpalette(\"RGB\"))\n```\n\nTest it, It is a mess. Why are there two palettes to begin with.\nPrint palette with OPs example:\n\n```\npython\n\nfrom PIL import Image\n\nimage = Image.open('in.gif')\nprint(image.palette.getdata())\nprint(image.im.getpalette(\"RGB\"))\nimage = image.convert('RGB')\nprint(image.palette.getdata())\nprint(image.im.getpalette(\"RGB\"))\nimage = image.resize((200, 150), Image.ANTIALIAS)\nprint(image.palette.getdata())\nprint(image.im.getpalette(\"RGB\"))\nimage = image.convert('P', palette=Image.ADAPTIVE, colors=256)\nprint(image.palette.getdata())\nprint(image.im.getpalette(\"RGB\"))\nimage.save('out.png')\nprint(image.palette.getdata())\nprint(image.im.getpalette(\"RGB\"))\nexit()\n```\n\n@wiredfool could you please test my fix, don't want to break something else again. The palette should now get updated.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34163095/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":90942409,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTA5NDI0MDk=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90942409","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2014-02-05T12:55:54Z","performed_via_github_app":null},{"id":90942410,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkwOTQyNDEw","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/90942410","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2014-02-05T12:55:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34208752","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-34208752","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":34208752,"node_id":"MDEyOklzc3VlQ29tbWVudDM0MjA4NzUy","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-02-05T16:55:24Z","updated_at":"2014-02-05T16:55:24Z","body":"Ok, I'll take a look. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/34208752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":98987458,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDk4OTg3NDU4","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/98987458","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"232c175bd92320100f891d0d9874cf8230a19b1b","commit_url":"https://api.github.com/repos/wiredfool/Pillow/commits/232c175bd92320100f891d0d9874cf8230a19b1b","created_at":"2014-03-05T06:02:48Z","performed_via_github_app":null},{"id":98987459,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDk4OTg3NDU5","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/98987459","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6457eed2cbedfd785df8579933d0ced0f6729df2","commit_url":"https://api.github.com/repos/wiredfool/Pillow/commits/6457eed2cbedfd785df8579933d0ced0f6729df2","created_at":"2014-03-05T06:02:48Z","performed_via_github_app":null},{"id":98987460,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDk4OTg3NDYw","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/98987460","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ae5bcb8e84ba26383dcedeac41f6cf833bcde199","commit_url":"https://api.github.com/repos/wiredfool/Pillow/commits/ae5bcb8e84ba26383dcedeac41f6cf833bcde199","created_at":"2014-03-05T06:02:48Z","performed_via_github_app":null},{"actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-05T06:09:04Z","updated_at":"2014-03-05T06:09:04Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/537","repository_url":"https://api.github.com/repos/python-pillow/Pillow","labels_url":"https://api.github.com/repos/python-pillow/Pillow/issues/537/labels{/name}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/issues/537/comments","events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/537/events","html_url":"https://github.com/python-pillow/Pillow/pull/537","id":28767548,"node_id":"MDExOlB1bGxSZXF1ZXN0MTMxOTc3ODA=","number":537,"title":"Palette handling fixes","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2014-03-05T06:09:04Z","updated_at":"2014-07-09T20:25:33Z","closed_at":"2014-03-17T13:49:00Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":5171600,"node_id":"MDEwOlJlcG9zaXRvcnk1MTcxNjAw","name":"Pillow","full_name":"python-pillow/Pillow","private":false,"owner":{"login":"python-pillow","id":2036701,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwMzY3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2036701?v=4","gravatar_id":"","url":"https://api.github.com/users/python-pillow","html_url":"https://github.com/python-pillow","followers_url":"https://api.github.com/users/python-pillow/followers","following_url":"https://api.github.com/users/python-pillow/following{/other_user}","gists_url":"https://api.github.com/users/python-pillow/gists{/gist_id}","starred_url":"https://api.github.com/users/python-pillow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python-pillow/subscriptions","organizations_url":"https://api.github.com/users/python-pillow/orgs","repos_url":"https://api.github.com/users/python-pillow/repos","events_url":"https://api.github.com/users/python-pillow/events{/privacy}","received_events_url":"https://api.github.com/users/python-pillow/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python-pillow/Pillow","description":"Python Imaging Library (Fork)","fork":false,"url":"https://api.github.com/repos/python-pillow/Pillow","forks_url":"https://api.github.com/repos/python-pillow/Pillow/forks","keys_url":"https://api.github.com/repos/python-pillow/Pillow/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python-pillow/Pillow/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python-pillow/Pillow/teams","hooks_url":"https://api.github.com/repos/python-pillow/Pillow/hooks","issue_events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/events{/number}","events_url":"https://api.github.com/repos/python-pillow/Pillow/events","assignees_url":"https://api.github.com/repos/python-pillow/Pillow/assignees{/user}","branches_url":"https://api.github.com/repos/python-pillow/Pillow/branches{/branch}","tags_url":"https://api.github.com/repos/python-pillow/Pillow/tags","blobs_url":"https://api.github.com/repos/python-pillow/Pillow/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python-pillow/Pillow/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python-pillow/Pillow/git/refs{/sha}","trees_url":"https://api.github.com/repos/python-pillow/Pillow/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python-pillow/Pillow/statuses/{sha}","languages_url":"https://api.github.com/repos/python-pillow/Pillow/languages","stargazers_url":"https://api.github.com/repos/python-pillow/Pillow/stargazers","contributors_url":"https://api.github.com/repos/python-pillow/Pillow/contributors","subscribers_url":"https://api.github.com/repos/python-pillow/Pillow/subscribers","subscription_url":"https://api.github.com/repos/python-pillow/Pillow/subscription","commits_url":"https://api.github.com/repos/python-pillow/Pillow/commits{/sha}","git_commits_url":"https://api.github.com/repos/python-pillow/Pillow/git/commits{/sha}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/comments{/number}","issue_comment_url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments{/number}","contents_url":"https://api.github.com/repos/python-pillow/Pillow/contents/{+path}","compare_url":"https://api.github.com/repos/python-pillow/Pillow/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python-pillow/Pillow/merges","archive_url":"https://api.github.com/repos/python-pillow/Pillow/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python-pillow/Pillow/downloads","issues_url":"https://api.github.com/repos/python-pillow/Pillow/issues{/number}","pulls_url":"https://api.github.com/repos/python-pillow/Pillow/pulls{/number}","milestones_url":"https://api.github.com/repos/python-pillow/Pillow/milestones{/number}","notifications_url":"https://api.github.com/repos/python-pillow/Pillow/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python-pillow/Pillow/labels{/name}","releases_url":"https://api.github.com/repos/python-pillow/Pillow/releases{/id}","deployments_url":"https://api.github.com/repos/python-pillow/Pillow/deployments","created_at":"2012-07-24T21:38:39Z","updated_at":"2025-11-09T17:08:02Z","pushed_at":"2025-11-05T17:24:43Z","git_url":"git://github.com/python-pillow/Pillow.git","ssh_url":"git@github.com:python-pillow/Pillow.git","clone_url":"https://github.com/python-pillow/Pillow.git","svn_url":"https://github.com/python-pillow/Pillow","homepage":"https://python-pillow.github.io","size":209075,"stargazers_count":13177,"watchers_count":13177,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":117,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","cross-platform","image","image-processing","pil","pillow","python","python-3"],"visibility":"public","forks":2359,"open_issues":117,"watchers":13177,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python-pillow/Pillow/pulls/537","html_url":"https://github.com/python-pillow/Pillow/pull/537","diff_url":"https://github.com/python-pillow/Pillow/pull/537.diff","patch_url":"https://github.com/python-pillow/Pillow/pull/537.patch","merged_at":"2014-03-17T13:49:00Z"},"body":"Fixes #513, #434. \n- should probably check transparency interactions as well. \n","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python-pillow/Pillow/issues/537/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/36714255","html_url":"https://github.com/python-pillow/Pillow/issues/513#issuecomment-36714255","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/513","id":36714255,"node_id":"MDEyOklzc3VlQ29tbWVudDM2NzE0MjU1","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-05T06:31:45Z","updated_at":"2014-03-05T06:31:45Z","body":"Sorry this took so long. I've merged your head into a branch, it had these two fixes, plus one earlier palette handling patch on 12/4/13. \n\nThere was one issue that the tests found -- saving a mode L gif with an optimized palette. I've fixed that one. I've also added a test for this issue that broke on master and passes on the branch. I'm backing up and adding tests for #434 now. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/36714255/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":102591006,"node_id":"MDExOkNsb3NlZEV2ZW50MTAyNTkxMDA2","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/102591006","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"232c175bd92320100f891d0d9874cf8230a19b1b","commit_url":"https://api.github.com/repos/python-pillow/Pillow/commits/232c175bd92320100f891d0d9874cf8230a19b1b","created_at":"2014-03-17T13:49:00Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"siddharth-ncl-work","id":43916742,"node_id":"MDQ6VXNlcjQzOTE2NzQy","avatar_url":"https://avatars.githubusercontent.com/u/43916742?v=4","gravatar_id":"","url":"https://api.github.com/users/siddharth-ncl-work","html_url":"https://github.com/siddharth-ncl-work","followers_url":"https://api.github.com/users/siddharth-ncl-work/followers","following_url":"https://api.github.com/users/siddharth-ncl-work/following{/other_user}","gists_url":"https://api.github.com/users/siddharth-ncl-work/gists{/gist_id}","starred_url":"https://api.github.com/users/siddharth-ncl-work/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/siddharth-ncl-work/subscriptions","organizations_url":"https://api.github.com/users/siddharth-ncl-work/orgs","repos_url":"https://api.github.com/users/siddharth-ncl-work/repos","events_url":"https://api.github.com/users/siddharth-ncl-work/events{/privacy}","received_events_url":"https://api.github.com/users/siddharth-ncl-work/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-08-11T14:34:34Z","updated_at":"2019-08-11T14:34:34Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/1987","repository_url":"https://api.github.com/repos/python-pillow/Pillow","labels_url":"https://api.github.com/repos/python-pillow/Pillow/issues/1987/labels{/name}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/issues/1987/comments","events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/1987/events","html_url":"https://github.com/python-pillow/Pillow/issues/1987","id":162302148,"node_id":"MDU6SXNzdWUxNjIzMDIxNDg=","number":1987,"title":"IndexError while drawing on an image","user":{"login":"obskyr","id":4363779,"node_id":"MDQ6VXNlcjQzNjM3Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/4363779?v=4","gravatar_id":"","url":"https://api.github.com/users/obskyr","html_url":"https://github.com/obskyr","followers_url":"https://api.github.com/users/obskyr/followers","following_url":"https://api.github.com/users/obskyr/following{/other_user}","gists_url":"https://api.github.com/users/obskyr/gists{/gist_id}","starred_url":"https://api.github.com/users/obskyr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/obskyr/subscriptions","organizations_url":"https://api.github.com/users/obskyr/orgs","repos_url":"https://api.github.com/users/obskyr/repos","events_url":"https://api.github.com/users/obskyr/events{/privacy}","received_events_url":"https://api.github.com/users/obskyr/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":10115804,"node_id":"MDU6TGFiZWwxMDExNTgwNA==","url":"https://api.github.com/repos/python-pillow/Pillow/labels/Bug","name":"Bug","color":"fef2c0","default":false,"description":"Any unexpected behavior, until confirmed feature."},{"id":341437806,"node_id":"MDU6TGFiZWwzNDE0Mzc4MDY=","url":"https://api.github.com/repos/python-pillow/Pillow/labels/GIF","name":"GIF","color":"fbca04","default":false,"description":null},{"id":400993500,"node_id":"MDU6TGFiZWw0MDA5OTM1MDA=","url":"https://api.github.com/repos/python-pillow/Pillow/labels/Palette","name":"Palette","color":"5319e7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2016-06-25T22:18:08Z","updated_at":"2021-06-29T12:34:28Z","closed_at":"2021-06-29T12:34:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":5171600,"node_id":"MDEwOlJlcG9zaXRvcnk1MTcxNjAw","name":"Pillow","full_name":"python-pillow/Pillow","private":false,"owner":{"login":"python-pillow","id":2036701,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwMzY3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2036701?v=4","gravatar_id":"","url":"https://api.github.com/users/python-pillow","html_url":"https://github.com/python-pillow","followers_url":"https://api.github.com/users/python-pillow/followers","following_url":"https://api.github.com/users/python-pillow/following{/other_user}","gists_url":"https://api.github.com/users/python-pillow/gists{/gist_id}","starred_url":"https://api.github.com/users/python-pillow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python-pillow/subscriptions","organizations_url":"https://api.github.com/users/python-pillow/orgs","repos_url":"https://api.github.com/users/python-pillow/repos","events_url":"https://api.github.com/users/python-pillow/events{/privacy}","received_events_url":"https://api.github.com/users/python-pillow/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python-pillow/Pillow","description":"Python Imaging Library (Fork)","fork":false,"url":"https://api.github.com/repos/python-pillow/Pillow","forks_url":"https://api.github.com/repos/python-pillow/Pillow/forks","keys_url":"https://api.github.com/repos/python-pillow/Pillow/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python-pillow/Pillow/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python-pillow/Pillow/teams","hooks_url":"https://api.github.com/repos/python-pillow/Pillow/hooks","issue_events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/events{/number}","events_url":"https://api.github.com/repos/python-pillow/Pillow/events","assignees_url":"https://api.github.com/repos/python-pillow/Pillow/assignees{/user}","branches_url":"https://api.github.com/repos/python-pillow/Pillow/branches{/branch}","tags_url":"https://api.github.com/repos/python-pillow/Pillow/tags","blobs_url":"https://api.github.com/repos/python-pillow/Pillow/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python-pillow/Pillow/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python-pillow/Pillow/git/refs{/sha}","trees_url":"https://api.github.com/repos/python-pillow/Pillow/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python-pillow/Pillow/statuses/{sha}","languages_url":"https://api.github.com/repos/python-pillow/Pillow/languages","stargazers_url":"https://api.github.com/repos/python-pillow/Pillow/stargazers","contributors_url":"https://api.github.com/repos/python-pillow/Pillow/contributors","subscribers_url":"https://api.github.com/repos/python-pillow/Pillow/subscribers","subscription_url":"https://api.github.com/repos/python-pillow/Pillow/subscription","commits_url":"https://api.github.com/repos/python-pillow/Pillow/commits{/sha}","git_commits_url":"https://api.github.com/repos/python-pillow/Pillow/git/commits{/sha}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/comments{/number}","issue_comment_url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments{/number}","contents_url":"https://api.github.com/repos/python-pillow/Pillow/contents/{+path}","compare_url":"https://api.github.com/repos/python-pillow/Pillow/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python-pillow/Pillow/merges","archive_url":"https://api.github.com/repos/python-pillow/Pillow/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python-pillow/Pillow/downloads","issues_url":"https://api.github.com/repos/python-pillow/Pillow/issues{/number}","pulls_url":"https://api.github.com/repos/python-pillow/Pillow/pulls{/number}","milestones_url":"https://api.github.com/repos/python-pillow/Pillow/milestones{/number}","notifications_url":"https://api.github.com/repos/python-pillow/Pillow/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python-pillow/Pillow/labels{/name}","releases_url":"https://api.github.com/repos/python-pillow/Pillow/releases{/id}","deployments_url":"https://api.github.com/repos/python-pillow/Pillow/deployments","created_at":"2012-07-24T21:38:39Z","updated_at":"2025-11-09T17:08:02Z","pushed_at":"2025-11-05T17:24:43Z","git_url":"git://github.com/python-pillow/Pillow.git","ssh_url":"git@github.com:python-pillow/Pillow.git","clone_url":"https://github.com/python-pillow/Pillow.git","svn_url":"https://github.com/python-pillow/Pillow","homepage":"https://python-pillow.github.io","size":209075,"stargazers_count":13177,"watchers_count":13177,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":117,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","cross-platform","image","image-processing","pil","pillow","python","python-3"],"visibility":"public","forks":2359,"open_issues":117,"watchers":13177,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"With Pillow 3.2.0 on Python 3 (and on Python 2, with the fix in #1985), running the very same code as in #1592 with the very same image slightly edited, the following traceback occurs:\n\n``` pycon\nTraceback (most recent call last):\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImagePalette.py\", line 97, in getcolor\n    return self.colors[color]\nKeyError: (255, 255, 255)\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"deborder.py\", line 30, in <module>\n    deborder(sys.argv[1])\n  File \"deborder.py\", line 20, in deborder\n    draw.line((topLeft, topRight),       fill=(255, 255, 255))\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImageDraw.py\", line 177, in line\n    ink, fill = self._getink(fill)\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImageDraw.py\", line 124, in _getink\n    ink = self.palette.getcolor(ink)\n  File \"C:\\Python34\\lib\\site-packages\\PIL\\ImagePalette.py\", line 108, in getcolor\n    self.palette[index+256] = color[1]\nIndexError: list assignment index out of range\n```\n\nBefore the #1985 fix, the error is an `IndexError: list assignment index out of range`. After, it persists as an `IndexError: bytearray index out of range`, however.\n\nFrom what I can tell, self.palette is shorter than 256 elements, and can therefore not take an assignment to index `index+256`. In this case, index is 0, as `len(self.colors)` in `getcolor` for this image is 0, which I find a bit odd.\n\nSince the image is almost exactly the one used in #1592, this may be related. The difference is this one is edited in ImageMagick to make the outer 1px border white (`#FFFFFF`).\n\n---\n\nThe very same code as in #1592 causes the error:\n\n``` python\n# -*- coding: utf-8 -*-\n\nfrom PIL import Image, ImageDraw\n\ndef deborder(filename):\n    frame = Image.open(filename)\n    frameNo = 0\n    while True:\n        try:\n            frame.seek(frameNo)\n        except EOFError:\n            break\n        draw = ImageDraw.Draw(frame)\n\n        topLeft = (0, 0)\n        topRight = (frame.size[0] - 1, 0)\n        bottomLeft = (0, frame.size[1] - 1)\n        bottomRight = (frame.size[0] - 1, frame.size[1] - 1)\n\n        draw.line((topLeft, topRight),       fill=(255, 255, 255))\n        draw.line((topLeft, bottomLeft),     fill=(255, 255, 255))\n        draw.line((bottomLeft, bottomRight), fill=(255, 255, 255))\n        draw.line((topRight, bottomRight),   fill=(255, 255, 255))\n\n        frameNo += 1\n\n    frame.save('resave-'+filename, save_all=True)\n\ndeborder('no.gif')\n```\n\nWith the following image, for example (while the error occurs with the exact image in #1592 edited a bit, I chose one with a different glyph to avoid future confusion):\n\n![no](https://cloud.githubusercontent.com/assets/4363779/16359397/69c2a96a-3b33-11e6-8012-fa5e958ce4ff.gif)\n","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/1987/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python-pillow/Pillow/issues/1987/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]