{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/436","repository_url":"https://api.github.com/repos/python-pillow/Pillow","labels_url":"https://api.github.com/repos/python-pillow/Pillow/issues/436/labels{/name}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/issues/436/comments","events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/436/events","html_url":"https://github.com/python-pillow/Pillow/issues/436","id":23753227,"node_id":"MDU6SXNzdWUyMzc1MzIyNw==","number":436,"title":"PNG max dimensions","user":{"login":"jamesra","id":4551553,"node_id":"MDQ6VXNlcjQ1NTE1NTM=","avatar_url":"https://avatars.githubusercontent.com/u/4551553?v=4","gravatar_id":"","url":"https://api.github.com/users/jamesra","html_url":"https://github.com/jamesra","followers_url":"https://api.github.com/users/jamesra/followers","following_url":"https://api.github.com/users/jamesra/following{/other_user}","gists_url":"https://api.github.com/users/jamesra/gists{/gist_id}","starred_url":"https://api.github.com/users/jamesra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jamesra/subscriptions","organizations_url":"https://api.github.com/users/jamesra/orgs","repos_url":"https://api.github.com/users/jamesra/repos","events_url":"https://api.github.com/users/jamesra/events{/privacy}","received_events_url":"https://api.github.com/users/jamesra/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2013-12-04T22:56:54Z","updated_at":"2013-12-28T14:06:42Z","closed_at":"2013-12-28T14:06:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Pillow is raising an exception when attempting to write large PNG's with dimensions larger than a signed 16-bit integer.  Previously I believed that the maximum dimension was 65536x65536 but the spec states the dimension is stored in 4 bytes. http://www.libpng.org/pub/png/spec/iso/index-object.html#11IHDR  I am requesting support for 65K.\n\nOddly Pillow is able to write images with both dimensions larger than 2 << 31.  Where the limit for crashing lives isn't clear to me yet.  \n\nThis is running on Win7 x64 using Pillow 2.2.1 and Python 2.7.6 x64.  Pillow was downloaded from Gohlke's site.  Scipy is 13.1 and numpy is 1.8\n\nI've done some debugging and the crash appears to occur in Image.load.  Referencing the Images \"im\" member results in a \"SystemError: error return without exception set\"  This is where I got stuck.\n\nI've uploaded code that reproduces the behavior to https://github.com/jamesra/random/blob/master/pillow_png_size.py\n\nI try to avoid PNG's of this size but I have ported some code from ITK (C++) to Scipy/Pillow and the lower limit creates a backward compatibility issue for me.\n\nIf this is fixable within the python code with a couple hours of time I'm willing to attempt it.  Eclipse wasn't letting me dig past the self.im line that throws the exception.\n","closed_by":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/436/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python-pillow/Pillow/issues/436/timeline","performed_via_github_app":null,"state_reason":"completed"}