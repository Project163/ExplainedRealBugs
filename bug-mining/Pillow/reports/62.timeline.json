[{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/38585293","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-38585293","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":38585293,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NTg1Mjkz","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-25T16:15:23Z","updated_at":"2014-03-25T16:15:23Z","body":"Ok, that's weird. The backtrace I'm getting is entirely python code.\n\n```\n(vpy32-dbg)erics:~/pcd$ gdb python\nGNU gdb (Ubuntu/Linaro 7.4-2012.04-0ubuntu2.1) 7.4-2012.04\nCopyright (C) 2012 Free Software Foundation, Inc.\nLicense GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>\nThis is free software: you are free to change and redistribute it.\nThere is NO WARRANTY, to the extent permitted by law.  Type \"show copying\"\nand \"show warranty\" for details.\nThis GDB was configured as \"x86_64-linux-gnu\".\nFor bug reporting instructions, please see:\n<http://bugs.launchpad.net/gdb-linaro/>...\nReading symbols from /home/erics/vpy32-dbg/bin/python...done.\n(gdb) r test.py\nStarting program: /home/erics/vpy32-dbg/bin/python test.py\n[Thread debugging using libthread_db enabled]\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\n* ob\nobject  : <refcnt 0 at 0xec4588>\ntype    : builtin_function_or_method\nrefcount: 0\naddress : 0xec4588\n* op->_ob_prev->_ob_next\nobject  : <refcnt 0 at 0xec4588>\ntype    : builtin_function_or_method\nrefcount: 0\naddress : 0xec4588\n* op->_ob_next->_ob_prev\nobject  : \nProgram received signal SIGSEGV, Segmentation fault.\n0x000000000041ba96 in PyObject_Print (op=0xad846700ad8461, fp=0x7ffff6a3a180, flags=0) at ../Objects/object.c:279\n279 ../Objects/object.c: No such file or directory.\n(gdb) bt\n#0  0x000000000041ba96 in PyObject_Print (op=0xad846700ad8461, fp=0x7ffff6a3a180, flags=0) at ../Objects/object.c:279\n#1  0x000000000041bec7 in _PyObject_Dump (op=0xad846700ad8461) at ../Objects/object.c:351\n#2  0x000000000041f437 in _Py_ForgetReference (op=0xec4588) at ../Objects/object.c:1676\n#3  0x000000000041f494 in _Py_Dealloc (op=0xec4588) at ../Objects/object.c:1697\n#4  0x000000000048ebb6 in call_function (pp_stack=0x7fffffffbcf0, oparg=1) at ../Python/ceval.c:3955\n#5  0x0000000000488f43 in PyEval_EvalFrameEx (f=0xf36230, throwflag=0) at ../Python/ceval.c:2692\n#6  0x000000000048ed7f in fast_function (func=0xc4ff78, pp_stack=0x7fffffffc880, n=1, na=1, nk=0) at ../Python/ceval.c:4009\n#7  0x000000000048ea74 in call_function (pp_stack=0x7fffffffc880, oparg=0) at ../Python/ceval.c:3942\n#8  0x0000000000488f43 in PyEval_EvalFrameEx (f=0xf35fe0, throwflag=0) at ../Python/ceval.c:2692\n#9  0x000000000048c99f in PyEval_EvalCodeEx (_co=0x7ffff61096b8, globals=0xb4cf80, locals=0x0, args=0xaad858, argcount=2, \n    kws=0xaad868, kwcount=0, defs=0xc391d8, defcount=1, kwdefs=0x0, closure=0x0) at ../Python/ceval.c:3350\n#10 0x000000000048eea9 in fast_function (func=0xc3a3f8, pp_stack=0x7fffffffd580, n=2, na=2, nk=0) at ../Python/ceval.c:4019\n#11 0x000000000048ea74 in call_function (pp_stack=0x7fffffffd580, oparg=1) at ../Python/ceval.c:3942\n#12 0x0000000000488f43 in PyEval_EvalFrameEx (f=0xaad6d0, throwflag=0) at ../Python/ceval.c:2692\n#13 0x000000000048c99f in PyEval_EvalCodeEx (_co=0x7ffff7e64b08, globals=0xa251d0, locals=0xa251d0, args=0x0, argcount=0, kws=0x0, \n    kwcount=0, defs=0x0, defcount=0, kwdefs=0x0, closure=0x0) at ../Python/ceval.c:3350\n#14 0x000000000047c937 in PyEval_EvalCode (co=0x7ffff7e64b08, globals=0xa251d0, locals=0xa251d0) at ../Python/ceval.c:767\n#15 0x00000000004c2bea in run_mod (mod=0xb4f178, filename=0x7ffff7f17800 \"test.py\", globals=0xa251d0, locals=0xa251d0, \n    flags=0x7fffffffe460, arena=0xa30da0) at ../Python/pythonrun.c:1810\n#16 0x00000000004c29dc in PyRun_FileExFlags (fp=0xaabf30, filename=0x7ffff7f17800 \"test.py\", start=257, globals=0xa251d0, \n    locals=0xa251d0, closeit=1, flags=0x7fffffffe460) at ../Python/pythonrun.c:1767\n#17 0x00000000004c0e39 in PyRun_SimpleFileExFlags (fp=0xaabf30, filename=0x7ffff7f17800 \"test.py\", closeit=1, flags=0x7fffffffe460)\n    at ../Python/pythonrun.c:1292\n#18 0x00000000004c020f in PyRun_AnyFileExFlags (fp=0xaabf30, filename=0x7ffff7f17800 \"test.py\", closeit=1, flags=0x7fffffffe460)\n    at ../Python/pythonrun.c:1061\n#19 0x00000000004dc309 in run_file (fp=0xaabf30, filename=0x7ffff7fa5040 L\"test.py\", p_cf=0x7fffffffe460) at ../Modules/main.c:307\n#20 0x00000000004dcfca in Py_Main (argc=2, argv=0x7ffff7fa3040) at ../Modules/main.c:733\n#21 0x000000000041b640 in main (argc=2, argv=0x7fffffffe5d8) at ../Modules/python.c:63\n(gdb) \n```\n\nI'm seeing it on multiple python versions, multiple versions of Pillow. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/38585293/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":105284551,"node_id":"MDEyOkxhYmVsZWRFdmVudDEwNTI4NDU1MQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/105284551","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2014-03-25T16:15:33Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":105423277,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDEwNTQyMzI3Nw==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/105423277","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2014-03-25T21:44:27Z","milestone":{"title":"2.4.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/38624964","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-38624964","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":38624964,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjI0OTY0","user":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-25T21:44:58Z","updated_at":"2014-03-25T21:44:58Z","body":"@lehins Thanks for reporting\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/38624964/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":105423443,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTA1NDIzNDQz","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/105423443","actor":{"login":"lehins","id":2333894,"node_id":"MDQ6VXNlcjIzMzM4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2333894?v=4","gravatar_id":"","url":"https://api.github.com/users/lehins","html_url":"https://github.com/lehins","followers_url":"https://api.github.com/users/lehins/followers","following_url":"https://api.github.com/users/lehins/following{/other_user}","gists_url":"https://api.github.com/users/lehins/gists{/gist_id}","starred_url":"https://api.github.com/users/lehins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lehins/subscriptions","organizations_url":"https://api.github.com/users/lehins/orgs","repos_url":"https://api.github.com/users/lehins/repos","events_url":"https://api.github.com/users/lehins/events{/privacy}","received_events_url":"https://api.github.com/users/lehins/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2014-03-25T21:44:58Z","performed_via_github_app":null},{"id":105423444,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEwNTQyMzQ0NA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/105423444","actor":{"login":"lehins","id":2333894,"node_id":"MDQ6VXNlcjIzMzM4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2333894?v=4","gravatar_id":"","url":"https://api.github.com/users/lehins","html_url":"https://github.com/lehins","followers_url":"https://api.github.com/users/lehins/followers","following_url":"https://api.github.com/users/lehins/following{/other_user}","gists_url":"https://api.github.com/users/lehins/gists{/gist_id}","starred_url":"https://api.github.com/users/lehins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lehins/subscriptions","organizations_url":"https://api.github.com/users/lehins/orgs","repos_url":"https://api.github.com/users/lehins/repos","events_url":"https://api.github.com/users/lehins/events{/privacy}","received_events_url":"https://api.github.com/users/lehins/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2014-03-25T21:44:58Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/38628705","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-38628705","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":38628705,"node_id":"MDEyOklzc3VlQ29tbWVudDM4NjI4NzA1","user":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-25T22:21:05Z","updated_at":"2014-03-25T22:21:05Z","body":"I'm currently targeting 2.4.0 for this, though I expect we may not get to it.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/38628705/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":106813431,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDEwNjgxMzQzMQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/106813431","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2014-03-30T11:32:10Z","milestone":{"title":"Future"},"performed_via_github_app":null},{"id":106813432,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTA2ODEzNDMy","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/106813432","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2014-03-30T11:32:10Z","milestone":{"title":"2.4.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/39053086","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-39053086","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":39053086,"node_id":"MDEyOklzc3VlQ29tbWVudDM5MDUzMDg2","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2014-03-31T04:21:39Z","updated_at":"2014-03-31T04:21:39Z","body":"Ok. This is still weird.   I've thrown this at Fedora 20, where GDB is better integrated with the python runtime. It's failing in ImageFile.load:\n\n```\n                    b = b + s\n                    n, e = d.decode(b)\n                    if n < 0:\n                        break\n                    # UNDONE gdb locals, just for yucks.                                \n                    lb = len(b) #dbg\n                    ls = len(s) #dbg\n                    assert(n<lb) #added for dbg\n                    b = b[n:]  #Fails here. \n                    t = t + n\n```\n\nn = 64512, len(b) ==  66560. It's the second time through, so b == ~1k from the first round, and 64k from this read, and we're indexing for the last 2k. This seems entirely reasonable to me. The only thing that I can think of is that the decode must be messing with the buffer, but that doesn't seem to be the case. \n\nDetailed traces &c follow. \n\nPy-bt is really short:\n\n```\n(gdb) py-bt\nTraceback (most recent call first):\n  File \"/home/erics/vpy33-dbg/lib/python3.3/site-packages/Pillow-2.3.0-py3.3-linux-x86_64.egg/PIL/ImageFile.py\", line 228, in load\n  File \"/home/erics/vpy33-dbg/lib/python3.3/site-packages/Pillow-2.3.0-py3.3-linux-x86_64.egg/PIL/Image.py\", line 1347, in resize\n  File \"test.py\", line 3, in <module>\n    im.resize((512,384))\n```\n\nThe locals from the current python frame:\n\n``````\n(gdb) py-locals\nself = <PcdImageFile(decodermaxblock=65536, map=None, pyaccess=None, category=0, filename='golden.pcd', im=<ImagingCore at remote 0x7fffefbf6db0>, mode='RGB', tile=[('pcd', (0, 0, 768, 512), 196608, None)], decoderconfig=(), palette=None, info={}, size=(768, 512), readonly=1, fp=<_io.BufferedReader at remote 0x7fffefd567a0>) at remote 0x7ffff0335a70>\npixel = None\nreadonly = 0\nd = <ImagingDecoder at remote 0x7fffedca19e0>\ne = 0\no = 196608\na = None\nread = <built-in method read of _io.BufferedReader object at remote 0x7fffefd567a0>\nseek = <built-in method seek of _io.BufferedReader object at remote 0x7fffefd567a0>\nprefix = b''\nb = b']]aaaaaa```_abbbbbbaabacddddcddeefeffffgfhihhhhhhhhhiiiiiikllllmnmmmmmmmmmlmmmmmnnnnnnoqrrrrrrqqqqsssstttstttstutuvutuvuuuuvvvwwwwwwwxyyyyyyyyyz{{||}}}}}}~~}~}~\\x7f~~~~\\x81\\x81\\x81\\x82\\x81\\x81\\x81\\x82\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x81\\x80\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x80\\x80\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x7f\\x81\\x83\\x81\\x80\\x80\\x80~\\x7f\\x7f\\x7f\\x80\\x82\\x89\\x8e\\x90\\x8f\\x8f\\x91\\x93\\x92\\x8e\\x8c\\x88\\x85\\x85\\x8a\\x90\\x93\\x93\\x8f\\x8b\\x88\\x8d\\x8f\\x8c\\x89\\x88\\x88\\x87\\x88\\x85\\x80\\x83\\x82{yzz|\\x82\\x84\\x87\\x8b\\x95\\xa1\\xac\\xbb\\xbe\\xbb\\xb7\\xb5\\xb1\\xae\\xaf\\xab\\xa1\\xa2\\xa8\\xa4\\x9b\\x91\\x91\\x93\\x95\\x98\\xa4\\xab\\xac\\xae\\xb3\\xb8\\xbc\\xc2\\xc6\\xc6\\xc2\\xc1\\xbf\\xba\\xb8\\xb5\\xb2\\xad\\xa8\\xa4\\xa4\\xa4\\xa0\\x9f\\xa0\\x9f\\x95\\x8d\\x8b\\x88\\x85\\x82\\x81\\x88\\x8a\\x89\\x86\\x87\\x99\\xac\\xaa\\x9f\\x9a\\x95\\x97\\x9f\\xa1\\x9d...(truncated)\nt = 64512\ns = b'\\x7f\\x7f\\x7f~\\x7f\\x80\\x7f~\\x7f\\x80~~\\x7f~~\\x7f\\x86\\x8c\\x8f\\x90\\x92\\x99\\x9a\\x92\\x8e\\x8c\\x8b\\x87\\x86\\x8a\\x8e\\x8e\\x8f\\x90\\x8b\\x85\\x84\\x87\\x8a\\x8b\\x87\\x89\\x84\\x80~|~~}yvwz\\x82\\x85\\x88\\x90\\x9c\\xb0\\xbf\\xc8\\xc6\\xbf\\xbc\\xbe\\xbb\\xb9\\xaf\\xa8\\xac\\xb5\\xba\\xaf\\xa0\\x90\\x8b\\x8a\\x91\\x99\\xa2\\xa5\\xa6\\xac\\xb2\\xba\\xc2\\xc6\\xc6\\xc4\\xc6\\xc4\\xc2\\xbe\\xbc\\xbb\\xb7\\xb5\\xb3\\xae\\xae\\xab\\xa2\\x9f\\x9d\\x9b\\x95\\x8f\\x8d\\x90\\x8f\\x91\\x96\\x9b\\x9d\\x8f\\x85\\x80\\x91\\xa1\\xa8\\xa2\\x8e\\x8b\\x93\\x9c\\x9f\\x9b\\x9b\\xae\\xbb\\xbd\\xc1\\xc0\\xc0\\xca\\xd2\\xd3\\xd4\\xd4\\xd3\\xcd\\xc8\\xc1\\xc1\\xc6\\xcc\\xc8\\xc1\\xb6\\xae\\xad\\xae\\xb1\\xb4\\xb6\\xbb\\xc1\\xc9\\xcf\\xd6\\xda\\xde\\xdd\\xda\\xd7\\xd7\\xdb\\xe0\\xe4\\xe3\\xe3\\xe2\\xe1\\xe1\\xe3\\xe6\\xe8\\xe6\\xe5\\xe3\\xe3\\xe6\\xe9\\xea\\xea\\xea\\xea\\xea\\xea\\xea\\xeb\\xeb\\xea\\xe7\\xe6\\xe5\\xe4\\xe3\\xe1\\xdf\\xde\\xe0\\xe2\\xe6\\xe8\\xe8\\xe9\\xea\\xea\\xea\\xea\\xe9\\xe7\\xe7\\xe7\\xe7\\xe8\\xe8\\xe8\\xe7\\xe7\\xe8\\xea\\xea\\xea\\xea\\xe9\\xea\\xe8\\xe6\\xe1\\xde\\xda\\xd7\\xd8\\xd3\\xcf\\xd0\\xd2\\xd6\\xd9\\xd8\\xd7\\xd7\\xd3\\xcf\\xd2\\xd2\\xc9\\xc8\\xcc\\xc7\\xbe\\xbd\\xb7\\xac\\xae\\xaf\\xa1\\x98\\x93\\x8a\\x84\\x81}{yzyy{zz{z...(truncated)\nn = 64512\nlb = 66560\nls = 65536\n(gdb) \n``````\n\nFull bt, truncated to the call to Image.resize\n\n``````\n(gdb) bt\n#0  _int_malloc (av=0x7ffff6fab760 <main_arena>, bytes=2129) at malloc.c:3645\n#1  0x00007ffff6c72f6c in __GI___libc_malloc (bytes=2129) at malloc.c:2859\n#2  0x00007ffff799a3e4 in PyObject_Malloc (nbytes=nbytes@entry=2129)\n    at /usr/src/debug/Python-3.3.2/Objects/obmalloc.c:961\n#3  0x00007ffff799ab54 in _PyObject_DebugMallocApi (id=id@entry=111 'o', \n    nbytes=nbytes@entry=2097) at /usr/src/debug/Python-3.3.2/Objects/obmalloc.c:1467\n#4  0x00007ffff799ac1d in _PyObject_DebugMalloc (nbytes=nbytes@entry=2097)\n    at /usr/src/debug/Python-3.3.2/Objects/obmalloc.c:1434\n#5  0x00007ffff79513f2 in PyBytes_FromStringAndSize (\n    str=0x7f1330 \"giiiiiiiijjjjkkjkjjjjllklmlkmnmlllmmmnnnnoopqqrsrrrrrssrrrstttuuuuuuuv\", 'w' <repeats 14 times>, \"xxx\", 'y' <repeats 11 times>, \"zzzzzzzyyyz{{{{|}|{{{~\\200\\201\\201\\201\\201\\201\\201\\201\\201\\201\", '\\202' <repeats 14 times>, \"\\205\\205\\205\\204\\204\\204\\205\\205\", '\\206' <repeats 11 times>, \"\\205\\206\\210\\210\\211\\210\\210\\207\\207\\210\\215\\223\\226\\234\\236\\235\\240\\233\\230\\232\\234\\233\\230\\226\\221\\216\\226\\233\\226\\226\\233\\235\\233\\236\\241\\244\\247\"..., size=2048) at /usr/src/debug/Python-3.3.2/Objects/bytesobject.c:98\n#6  0x00007ffff79553a1 in bytes_subscript (self=0x7e1700, item=<optimized out>)\n    at /usr/src/debug/Python-3.3.2/Objects/bytesobject.c:914\n#7  0x00007ffff7a28e50 in PyEval_EvalFrameEx (\n    f=f@entry=Frame 0x841d10, for file /home/erics/vpy33-dbg/lib/python3.3/site-packages/Pillow-2.3.0-py3.3-linux-x86_64.egg/PIL/ImageFile.py, line 228, in load (self=<PcdImageFile(decodermaxblock=65536, map=None, pyaccess=None, category=0, filename='golden.pcd', im=<ImagingCore at remote 0x7fffefbf6db0>, mode='RGB', tile=[('pcd', (0, 0, 768, 512), 196608, None)], decoderconfig=(), palette=None, info={}, size=(768, 512), readonly=1, fp=<_io.BufferedReader at remote 0x7fffefd567a0>) at remote 0x7ffff0335a70>, pixel=None, readonly=0, d=<ImagingDecoder at remote 0x7fffedca19e0>, e=0, o=196608, a=None, read=<built-in method read of _io.BufferedReader object at remote 0x7fffefd567a0>, seek=<built-in method seek of _io.BufferedReader object at remote 0x7fffefd567a0>, prefix=b'', b=b']]aaaaaa```_abbbbbbaabacddddcddeefeffffgfhihhhhhhhhhiiiiiikllllmnmmmmmmmmmlmmmmmnnnnnnoqrrrrrrqqqqsssstttstttstutuvutuvuuuuvvvwwwwwwwxyyyyyyyyyz{{||}}}}}}~~}~}~\\x7f~~~~\\x81\\x81\\x81\\x82\\x81\\x81\\x81\\x82\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x83\\x...(truncated), \n    throwflag=throwflag@entry=0) at /usr/src/debug/Python-3.3.2/Python/ceval.c:1572\n#8  0x00007ffff7a30bbd in fast_function (nk=<optimized out>, na=<optimized out>, \n    n=<optimized out>, pp_stack=0x7fffffffdcc0, func=<optimized out>)\n    at /usr/src/debug/Python-3.3.2/Python/ceval.c:4180\n#9  call_function (pintr1=0x7fffffffdcb8, pintr0=0x7fffffffdcb0, \n    oparg=<optimized out>, pp_stack=0x7fffffffdcc0)\n    at /usr/src/debug/Python-3.3.2/Python/ceval.c:4113\n#10 PyEval_EvalFrameEx (\n    f=f@entry=Frame 0x83d390, for file /home/erics/vpy33-dbg/lib/python3.3/site-packages/Pillow-2.3.0-py3.3-linux-x86_64.egg/PIL/Image.py, line 1347, in resize (self=<PcdImageFile(decodermaxblock=65536, map=None, pyaccess=None, category=0, filename='golden.pcd', im=<ImagingCore at remote 0x7fffefbf6db0>, mode='RGB', tile=[('pcd', (0, 0, 768, 512), 196608, None)], decoderconfig=(), palette=None, info={}, size=(768, 512), readonly=1, fp=<_io.BufferedReader at remote 0x7fffefd567a0>) at remote 0x7ffff0335a70>, size=(512, 384), resample=0), throwflag=throwflag@entry=0)\n    at /usr/src/debug/Python-3.3.2/Python/ceval.c:2701\n...\n``````\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/39053086/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":107220021,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDEwNzIyMDAyMQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/107220021","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2014-03-31T20:56:40Z","milestone":{"title":"2.5.0"},"performed_via_github_app":null},{"id":107220022,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTA3MjIwMDIy","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/107220022","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2014-03-31T20:56:40Z","milestone":{"title":"Future"},"performed_via_github_app":null},{"id":126818808,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDEyNjgxODgwOA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/126818808","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2014-06-01T14:41:38Z","milestone":{"title":"Future"},"performed_via_github_app":null},{"id":126818809,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50MTI2ODE4ODA5","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/126818809","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2014-06-01T14:41:38Z","milestone":{"title":"2.5.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70579101","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-70579101","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":70579101,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTc5MTAx","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-19T23:26:28Z","updated_at":"2015-01-19T23:26:28Z","body":"I'm getting a suspicious memory error when run under glibc 2.20 with Pillow 2.5.3 on an authentic PhotoCD image:\n\n```\nPython 2.7.8 (default, Oct 16 2014, 08:50:33) \n[GCC 4.9.2 20141001 (prerelease)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from PIL import Image\n>>> i=Image.open('/tmp/img0039.pcd')\n>>> i.copy()\n*** Error in `/usr/bin/python': free(): invalid next size (normal): 0x00000000006cfb10 ***\n======= Backtrace: =========\n/lib64/libc.so.6(+0x731be)[0x7ffff74b81be]\n/lib64/libc.so.6(+0x7aef8)[0x7ffff74bfef8]\n/lib64/libc.so.6(cfree+0x48)[0x7ffff74c35c8]\n/usr/lib64/python2.7/site-packages/PIL/_imaging.so(+0x1621d)[0x7ffff5ee421d]\n/lib64/libpython2.7.so.1.0(+0x6cf79)[0x7ffff7a7ff79]\n/lib64/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x5543)[0x7ffff7af1493]\n/lib64/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x830)[0x7ffff7af28f0]\n/lib64/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x541e)[0x7ffff7af136e]\n/lib64/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x830)[0x7ffff7af28f0]\n/lib64/libpython2.7.so.1.0(PyEval_EvalCode+0x19)[0x7ffff7af29e9]\n/lib64/libpython2.7.so.1.0(+0xf85df)[0x7ffff7b0b5df]\n/lib64/libpython2.7.so.1.0(PyRun_InteractiveOneFlags+0x13a)[0x7ffff7b0d4fa]\n/lib64/libpython2.7.so.1.0(PyRun_InteractiveLoopFlags+0x4e)[0x7ffff7b0d6de]\n/lib64/libpython2.7.so.1.0(PyRun_AnyFileExFlags+0x3e)[0x7ffff7b0dd3e]\n/lib64/libpython2.7.so.1.0(Py_Main+0xc3a)[0x7ffff7b1e79a]\n/lib64/libc.so.6(__libc_start_main+0xf0)[0x7ffff7464fd0]\n/usr/bin/python[0x40077e]\n======= Memory map: ========\nâ€¦\n```\n\nCuriously, the `free(): invalid next size` error doesn't appear when debug symbols are available.\n\nValgrind gives even more useful messages; here is a selection:\n\n```\n==12856== Invalid write of size 1\n==12856==    at 0x6A73BD5: ImagingPcdDecode (PcdDecode.c:47)\n==12856==    by 0x6A571EE: _decode (decode.c:121)\n==12856==    by 0x4F11F47: PyEval_EvalFrameEx (in /usr/lib64/libpython2.7.so.1.0)\n==12856==  Address 0xab4b270 is 0 bytes after a block of size 2,304 alloc'd\n==12856==    at 0x4C27F3F: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==12856==    by 0x6A570DA: _setimage (decode.c:186)\n==12856== \n==12856== Invalid write of size 1\n==12856==    at 0x6A73BF0: ImagingPcdDecode (PcdDecode.c:48)\n==12856==    by 0x6A571EE: _decode (decode.c:121)\n==12856== \n==12856== Invalid write of size 1\n==12856==    at 0x6A73C11: ImagingPcdDecode (PcdDecode.c:49)\n==12856==    by 0x6A571EE: _decode (decode.c:121)\n==12856== \n==12856== Use of uninitialised value of size 8\n==12856==    at 0x6A77F54: ImagingUnpackYCC (UnpackYCC.c:140)\n==12856==    by 0x6A73C34: ImagingPcdDecode (PcdDecode.c:53)\n==12856==    by 0x6A571EE: _decode (decode.c:121)\n==12856== \n==12856== Invalid write of size 1\n==12856==    at 0x6A73C6E: ImagingPcdDecode (PcdDecode.c:62)\n==12856==    by 0x6A571EE: _decode (decode.c:121)\n==12856== \n==12856== Use of uninitialised value of size 8\n==12856==    at 0x6A77F5D: ImagingUnpackYCC (UnpackYCC.c:140)\n==12856==    by 0x6A73CCA: ImagingPcdDecode (PcdDecode.c:68)\n==12856==    by 0x6A571EE: _decode (decode.c:121)\n==12856== \n==12856== Invalid read of size 8\n==12856==    at 0x4F0D61A: PyEval_EvalFrameEx (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F11479: PyEval_EvalFrameEx (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F128EF: PyEval_EvalCodeEx (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F1136D: PyEval_EvalFrameEx (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F128EF: PyEval_EvalCodeEx (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F129E8: PyEval_EvalCode (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F2B5DE: ??? (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F2C751: PyRun_FileExFlags (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F2D856: PyRun_SimpleFileExFlags (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x4F3E799: Py_Main (in /usr/lib64/libpython2.7.so.1.0)\n==12856==    by 0x5438FCF: (below main) (in /usr/lib64/libc-2.20.so)\n==12856==  Address 0x8499350584999d is not stack'd, malloc'd or (recently) free'd\n==12856== \n==12856== \n==12856== Process terminating with default action of signal 11 (SIGSEGV)\n==12856==  General Protection Fault\n==12856==    at 0x4F0D61A: PyEval_EvalFrameEx (in /usr/lib64/libpython2.7.so.1.0)\n```\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70579101/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70580483","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-70580483","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":70580483,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNTgwNDgz","user":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-19T23:40:02Z","updated_at":"2015-01-19T23:40:02Z","body":"@dfandrich can you please try with 2.7.0 and confirm the same issue still exists? Thanks\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70580483/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":221304249,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjIxMzA0MjQ5","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/221304249","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-01-19T23:40:02Z","performed_via_github_app":null},{"id":221304250,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDIyMTMwNDI1MA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/221304250","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-01-19T23:40:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70743291","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-70743291","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":70743291,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzQzMjkx","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-20T22:02:31Z","updated_at":"2015-01-20T22:02:31Z","body":"I just tried with git HEAD with seemingly identical results. The line numbers were slightly different, e.g.\n\n==5395== Invalid write of size 1\n==5395==    at 0x72AA605: ImagingPcdDecode (PcdDecode.c:47)\n==5395==    by 0x728D1EE: _decode (decode.c:123)\n==5395==  Address 0xb09d480 is 0 bytes after a block of size 2,304 alloc'd\n==5395==    at 0x4C27F3F: malloc (in /usr/lib64/valgrind/vgpreload_memcheck-amd64-linux.so)\n==5395==    by 0x728D0DA: _setimage (decode.c:188)\n==5395== Use of uninitialised value of size 8\n==5395==    at 0x72AE9A4: ImagingUnpackYCC (UnpackYCC.c:140)\n==5395==    by 0x72AA664: ImagingPcdDecode (PcdDecode.c:53)\n==5395==    by 0x728D1EE: _decode (decode.c:123)\n==5395== Invalid write of size 1\n==5395==    at 0x72AA69E: ImagingPcdDecode (PcdDecode.c:62)\n==5395==    by 0x728D1EE: _decode (decode.c:123)\n--5395-- VALGRIND INTERNAL ERROR: Valgrind received a signal 11 (SIGSEGV) - exiting\n--5395-- si_code=80;  Faulting address: 0x0;  sp: 0x802b99dd0\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70743291/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70757969","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-70757969","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":70757969,"node_id":"MDEyOklzc3VlQ29tbWVudDcwNzU3OTY5","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-01-20T23:42:53Z","updated_at":"2015-01-20T23:42:53Z","body":"If it's an invalid write, then our output buffer for decoding the image is bad:\n\n```\nout = state->buffer;\nfor (x = 0; x < state->xsize; x++) {\n    out[0] = ptr[x];  /* <<< First invalid write PcdDecode.c:47 */\n    out[1] = ptr[(x+4*state->xsize)/2];\n    out[2] = ptr[(x+5*state->xsize)/2];\n    out += 4;\n}\n```\n\nThat's a strange error, but this is a strange format. \n\nIt looks like there's a project that claims to decode all the sizes in a .pcd, with color mangement: http://pcdtojpeg.sourceforge.net/Home.html That may be a better approach than Pillow, since we don't even pretend to do the compressed higher res images. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/70757969/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/173831877","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-173831877","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":173831877,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MzgzMTg3Nw==","user":{"login":"radarhere","id":3112309,"node_id":"MDQ6VXNlcjMxMTIzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/3112309?v=4","gravatar_id":"","url":"https://api.github.com/users/radarhere","html_url":"https://github.com/radarhere","followers_url":"https://api.github.com/users/radarhere/followers","following_url":"https://api.github.com/users/radarhere/following{/other_user}","gists_url":"https://api.github.com/users/radarhere/gists{/gist_id}","starred_url":"https://api.github.com/users/radarhere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/radarhere/subscriptions","organizations_url":"https://api.github.com/users/radarhere/orgs","repos_url":"https://api.github.com/users/radarhere/repos","events_url":"https://api.github.com/users/radarhere/events{/privacy}","received_events_url":"https://api.github.com/users/radarhere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-22T07:23:01Z","updated_at":"2016-01-22T07:23:01Z","body":"The link to the problem file no longer works. Can anyone provide a file to demonstrate the problem?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/173831877/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"radarhere","id":3112309,"node_id":"MDQ6VXNlcjMxMTIzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/3112309?v=4","gravatar_id":"","url":"https://api.github.com/users/radarhere","html_url":"https://github.com/radarhere","followers_url":"https://api.github.com/users/radarhere/followers","following_url":"https://api.github.com/users/radarhere/following{/other_user}","gists_url":"https://api.github.com/users/radarhere/gists{/gist_id}","starred_url":"https://api.github.com/users/radarhere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/radarhere/subscriptions","organizations_url":"https://api.github.com/users/radarhere/orgs","repos_url":"https://api.github.com/users/radarhere/repos","events_url":"https://api.github.com/users/radarhere/events{/privacy}","received_events_url":"https://api.github.com/users/radarhere/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/178299751","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-178299751","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":178299751,"node_id":"MDEyOklzc3VlQ29tbWVudDE3ODI5OTc1MQ==","user":{"login":"lehins","id":2333894,"node_id":"MDQ6VXNlcjIzMzM4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2333894?v=4","gravatar_id":"","url":"https://api.github.com/users/lehins","html_url":"https://github.com/lehins","followers_url":"https://api.github.com/users/lehins/followers","following_url":"https://api.github.com/users/lehins/following{/other_user}","gists_url":"https://api.github.com/users/lehins/gists{/gist_id}","starred_url":"https://api.github.com/users/lehins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lehins/subscriptions","organizations_url":"https://api.github.com/users/lehins/orgs","repos_url":"https://api.github.com/users/lehins/repos","events_url":"https://api.github.com/users/lehins/events{/privacy}","received_events_url":"https://api.github.com/users/lehins/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-02T01:39:12Z","updated_at":"2016-02-02T01:39:12Z","body":"Here is another file, that causes segmentation fault on `resize`:\n\nhttp://7d64cbc4e99ce9788059-a127be7d9507d6d1187c85a377fe1ae1.r77.cf1.rackcdn.com/permanent/blackandwhite768.pcd\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/178299751/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lehins","id":2333894,"node_id":"MDQ6VXNlcjIzMzM4OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2333894?v=4","gravatar_id":"","url":"https://api.github.com/users/lehins","html_url":"https://github.com/lehins","followers_url":"https://api.github.com/users/lehins/followers","following_url":"https://api.github.com/users/lehins/following{/other_user}","gists_url":"https://api.github.com/users/lehins/gists{/gist_id}","starred_url":"https://api.github.com/users/lehins/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lehins/subscriptions","organizations_url":"https://api.github.com/users/lehins/orgs","repos_url":"https://api.github.com/users/lehins/repos","events_url":"https://api.github.com/users/lehins/events{/privacy}","received_events_url":"https://api.github.com/users/lehins/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/178324091","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-178324091","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":178324091,"node_id":"MDEyOklzc3VlQ29tbWVudDE3ODMyNDA5MQ==","user":{"login":"radarhere","id":3112309,"node_id":"MDQ6VXNlcjMxMTIzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/3112309?v=4","gravatar_id":"","url":"https://api.github.com/users/radarhere","html_url":"https://github.com/radarhere","followers_url":"https://api.github.com/users/radarhere/followers","following_url":"https://api.github.com/users/radarhere/following{/other_user}","gists_url":"https://api.github.com/users/radarhere/gists{/gist_id}","starred_url":"https://api.github.com/users/radarhere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/radarhere/subscriptions","organizations_url":"https://api.github.com/users/radarhere/orgs","repos_url":"https://api.github.com/users/radarhere/repos","events_url":"https://api.github.com/users/radarhere/events{/privacy}","received_events_url":"https://api.github.com/users/radarhere/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-02T02:41:22Z","updated_at":"2016-02-02T02:41:22Z","body":"Thanks for that. I will note that it's not just `resize`, it would be any function that calls `load`, in the same way that the original image did according to other comments in this issue.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/178324091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"radarhere","id":3112309,"node_id":"MDQ6VXNlcjMxMTIzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/3112309?v=4","gravatar_id":"","url":"https://api.github.com/users/radarhere","html_url":"https://github.com/radarhere","followers_url":"https://api.github.com/users/radarhere/followers","following_url":"https://api.github.com/users/radarhere/following{/other_user}","gists_url":"https://api.github.com/users/radarhere/gists{/gist_id}","starred_url":"https://api.github.com/users/radarhere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/radarhere/subscriptions","organizations_url":"https://api.github.com/users/radarhere/orgs","repos_url":"https://api.github.com/users/radarhere/repos","events_url":"https://api.github.com/users/radarhere/events{/privacy}","received_events_url":"https://api.github.com/users/radarhere/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/178580032","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-178580032","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":178580032,"node_id":"MDEyOklzc3VlQ29tbWVudDE3ODU4MDAzMg==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-02T13:45:48Z","updated_at":"2016-02-02T13:45:48Z","body":"Ok, I got it. \n\nThe shuffle/state buffer is malloc'd at 24bpp, and the filling of it is at 32 bpp. \n\nNow, what's really lovely is that the original image (which I still have hanging around) comes up with color issues in pillow, but works in imagemagick. And the one posted today has color issues in imagemagick but works on pillow. But that's an issue for another PR.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/178580032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":535849288,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUzNTg0OTI4OA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/535849288","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ae453aa18b66af54e7ff716f4ccb33adca60afd4","commit_url":"https://api.github.com/repos/wiredfool/Pillow/commits/ae453aa18b66af54e7ff716f4ccb33adca60afd4","created_at":"2016-02-02T13:53:50Z","performed_via_github_app":null},{"id":539360933,"node_id":"MDExOkNsb3NlZEV2ZW50NTM5MzYwOTMz","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/539360933","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ae453aa18b66af54e7ff716f4ccb33adca60afd4","commit_url":"https://api.github.com/repos/python-pillow/Pillow/commits/ae453aa18b66af54e7ff716f4ccb33adca60afd4","created_at":"2016-02-04T15:52:14Z","state_reason":null,"performed_via_github_app":null},{"id":539360934,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUzOTM2MDkzNA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/539360934","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5ec7fd0ecbbebabea2aa8d9b17cf0bac4a38703b","commit_url":"https://api.github.com/repos/python-pillow/Pillow/commits/5ec7fd0ecbbebabea2aa8d9b17cf0bac4a38703b","created_at":"2016-02-04T15:52:15Z","performed_via_github_app":null},{"id":539384669,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUzOTM4NDY2OQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/539384669","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5bdf54b5a76b54fb00bd05f2d733e0a4173eefc9","commit_url":"https://api.github.com/repos/python-pillow/Pillow/commits/5bdf54b5a76b54fb00bd05f2d733e0a4173eefc9","created_at":"2016-02-04T16:06:00Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/180618162","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-180618162","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":180618162,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MDYxODE2Mg==","user":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-05T23:21:50Z","updated_at":"2016-02-05T23:21:50Z","body":"Could this buffer overflow have security implications? Can it overflow by more than a single byte (which isn't necessary safe either)?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/180618162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dfandrich","id":228259,"node_id":"MDQ6VXNlcjIyODI1OQ==","avatar_url":"https://avatars.githubusercontent.com/u/228259?v=4","gravatar_id":"","url":"https://api.github.com/users/dfandrich","html_url":"https://github.com/dfandrich","followers_url":"https://api.github.com/users/dfandrich/followers","following_url":"https://api.github.com/users/dfandrich/following{/other_user}","gists_url":"https://api.github.com/users/dfandrich/gists{/gist_id}","starred_url":"https://api.github.com/users/dfandrich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dfandrich/subscriptions","organizations_url":"https://api.github.com/users/dfandrich/orgs","repos_url":"https://api.github.com/users/dfandrich/repos","events_url":"https://api.github.com/users/dfandrich/events{/privacy}","received_events_url":"https://api.github.com/users/dfandrich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/180716386","html_url":"https://github.com/python-pillow/Pillow/issues/568#issuecomment-180716386","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/568","id":180716386,"node_id":"MDEyOklzc3VlQ29tbWVudDE4MDcxNjM4Ng==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-06T07:51:04Z","updated_at":"2016-02-06T07:51:04Z","body":"It overflows 768 bytes.  The pattern is writing the first three bytes of the word, then leaves the next untouched.\n\nI'd recommend updating to 3.1.1, which includes this  fix.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/180716386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}}]