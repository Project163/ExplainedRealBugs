[{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243070895","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-243070895","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":243070895,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzA3MDg5NQ==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-29T09:01:43Z","updated_at":"2016-08-29T09:01:43Z","body":"How big are the images in pixels?\n\nFWIW, there are a couple of possibilities for the GIF taking more memory, but it's hard to tell at this granularity, since are several things that are happening at the save command. I'd have to guess that it's quantization, but that's with no data. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243070895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243073832","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-243073832","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":243073832,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzA3MzgzMg==","user":{"login":"tlelson","id":4349566,"node_id":"MDQ6VXNlcjQzNDk1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/4349566?v=4","gravatar_id":"","url":"https://api.github.com/users/tlelson","html_url":"https://github.com/tlelson","followers_url":"https://api.github.com/users/tlelson/followers","following_url":"https://api.github.com/users/tlelson/following{/other_user}","gists_url":"https://api.github.com/users/tlelson/gists{/gist_id}","starred_url":"https://api.github.com/users/tlelson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlelson/subscriptions","organizations_url":"https://api.github.com/users/tlelson/orgs","repos_url":"https://api.github.com/users/tlelson/repos","events_url":"https://api.github.com/users/tlelson/events{/privacy}","received_events_url":"https://api.github.com/users/tlelson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-29T09:14:32Z","updated_at":"2016-08-29T09:14:32Z","body":"The images are 9566 × 3909.\n\n~1e4 times is quite a lot _more_ though isn't it.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243073832/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tlelson","id":4349566,"node_id":"MDQ6VXNlcjQzNDk1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/4349566?v=4","gravatar_id":"","url":"https://api.github.com/users/tlelson","html_url":"https://github.com/tlelson","followers_url":"https://api.github.com/users/tlelson/followers","following_url":"https://api.github.com/users/tlelson/following{/other_user}","gists_url":"https://api.github.com/users/tlelson/gists{/gist_id}","starred_url":"https://api.github.com/users/tlelson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlelson/subscriptions","organizations_url":"https://api.github.com/users/tlelson/orgs","repos_url":"https://api.github.com/users/tlelson/repos","events_url":"https://api.github.com/users/tlelson/events{/privacy}","received_events_url":"https://api.github.com/users/tlelson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243086891","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-243086891","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":243086891,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzA4Njg5MQ==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-29T10:15:53Z","updated_at":"2016-08-29T10:15:53Z","body":"With that pixel size, the raw size of the image is h x w x 4 bytes, which is ... about 150 megs. So your peak memory usage on save is O(5x) uncompressed image size.\n\nStepping through this, when you open it, you're loading the header. Which is small. \nOnce you rotate it, you're loading the data into `im`, rotating it, and saving that copy into `im2`. That explains the 300 megs for the JPEG. The GIF is apparently taking a lot less memory in that step, which may mean that the interpolation in rotate is happening in the `P` mode, which would be... potentially bad for quality. \n\nHere is where the processes diverge.  The JPEG save is essentially a streamable function that compresses blocks as they come out of the image. It's got overhead, but (for the most part) it's not related to the entire image size.  The GIF makes at least one copy, and potentially more in the quantization step. \n\nThere's probably some inefficiency in there, but I'd have to dig a little deeper to see exactly what modes you're getting and where the copies are coming from. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243086891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243113812","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-243113812","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":243113812,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzExMzgxMg==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-29T12:46:41Z","updated_at":"2016-08-29T12:55:35Z","body":"So, with a 36Mpx gif, I'm not seeing the same results.  I've got a 140 Meg uncompressed size, both in P mode. It looks like it's taking the fast path, and I'm not even certain why it's apparently not copying the image in the _save unless the memory profiler just isn't picking that up. \n\n```\nFilename: test_large_gif.py\n\nLine #    Mem usage    Increment   Line Contents\n================================================\n     3   15.598 MiB    0.000 MiB   @profile\n     4                             def main():\n     5   15.766 MiB    0.168 MiB       im = Image.open('lg.gif')\n     6   15.773 MiB    0.008 MiB       print im.mode, im.tile\n     7   15.773 MiB    0.000 MiB       print im.size, (im.width * im.height * 4) / (1024 *1024)\n     8   85.840 MiB   70.066 MiB       im.load()\n     9  120.875 MiB   35.035 MiB       im2 = im.rotate(45)\n    10  120.875 MiB    0.000 MiB       print im2.mode\n    11  156.105 MiB   35.230 MiB       im2.save('lg_out.gif')\n```\n\nValgrind is not showing anything remarkably different either:\n\n```\n--------------------------------------------------------------------------------\nCommand:            python test_large_gif.py\nMassif arguments:   (none)\nms_print arguments: massif.out.20111\n--------------------------------------------------------------------------------\n\n\n    MB\n149.3^                                                               ::       \n     |                                           ####:::::::::@::::::: @::::::\n     |                                           #   : : ::: :@:: :::: @: : ::\n     |                                           #   : : ::: :@:: :::: @: : ::\n     |                                           #   : : ::: :@:: :::: @: : ::\n     |                                 @@@@@@@@@@#   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |                                 @         #   : : ::: :@:: :::: @: : ::\n     |    @:::::::::@:::::::::::@::::::@         #   : : ::: :@:: :::: @: : ::\n     |    @:: :::: :@::::::: :::@: ::: @         #   : : ::: :@:: :::: @: : ::\n     |    @:: :::: :@::::::: :::@: ::: @         #   : : ::: :@:: :::: @: : ::\n     |    @:: :::: :@::::::: :::@: ::: @         #   : : ::: :@:: :::: @: : ::\n     |   :@:: :::: :@::::::: :::@: ::: @         #   : : ::: :@:: :::: @: : ::\n   0 +----------------------------------------------------------------------->Gi\n     0                                                                   5.627\n\nNumber of snapshots: 56\n Detailed snapshots: [4, 12, 23, 28, 30 (peak), 37, 44]\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243113812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243622358","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-243622358","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":243622358,"node_id":"MDEyOklzc3VlQ29tbWVudDI0MzYyMjM1OA==","user":{"login":"tlelson","id":4349566,"node_id":"MDQ6VXNlcjQzNDk1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/4349566?v=4","gravatar_id":"","url":"https://api.github.com/users/tlelson","html_url":"https://github.com/tlelson","followers_url":"https://api.github.com/users/tlelson/followers","following_url":"https://api.github.com/users/tlelson/following{/other_user}","gists_url":"https://api.github.com/users/tlelson/gists{/gist_id}","starred_url":"https://api.github.com/users/tlelson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlelson/subscriptions","organizations_url":"https://api.github.com/users/tlelson/orgs","repos_url":"https://api.github.com/users/tlelson/repos","events_url":"https://api.github.com/users/tlelson/events{/privacy}","received_events_url":"https://api.github.com/users/tlelson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-08-31T00:21:09Z","updated_at":"2016-08-31T00:21:09Z","body":"Thanks @wiredfool.  For now I'm happy with using JPEG but I suppose I would like to know how my GIF differs to yours.\n\nI've attached the input GIF here if you're interested.\n\n![mount_wilson](https://cloud.githubusercontent.com/assets/4349566/18111542/d7d62a30-6f63-11e6-8f07-b76578938dff.gif)\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/243622358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tlelson","id":4349566,"node_id":"MDQ6VXNlcjQzNDk1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/4349566?v=4","gravatar_id":"","url":"https://api.github.com/users/tlelson","html_url":"https://github.com/tlelson","followers_url":"https://api.github.com/users/tlelson/followers","following_url":"https://api.github.com/users/tlelson/following{/other_user}","gists_url":"https://api.github.com/users/tlelson/gists{/gist_id}","starred_url":"https://api.github.com/users/tlelson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlelson/subscriptions","organizations_url":"https://api.github.com/users/tlelson/orgs","repos_url":"https://api.github.com/users/tlelson/repos","events_url":"https://api.github.com/users/tlelson/events{/privacy}","received_events_url":"https://api.github.com/users/tlelson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":772971882,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NzcyOTcxODgy","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/772971882","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-08-31T00:21:09Z","performed_via_github_app":null},{"id":772971883,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDc3Mjk3MTg4Mw==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/772971883","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-08-31T00:21:09Z","performed_via_github_app":null},{"id":774895514,"node_id":"MDEyOkxhYmVsZWRFdmVudDc3NDg5NTUxNA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/774895514","actor":{"login":"radarhere","id":3112309,"node_id":"MDQ6VXNlcjMxMTIzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/3112309?v=4","gravatar_id":"","url":"https://api.github.com/users/radarhere","html_url":"https://github.com/radarhere","followers_url":"https://api.github.com/users/radarhere/followers","following_url":"https://api.github.com/users/radarhere/following{/other_user}","gists_url":"https://api.github.com/users/radarhere/gists{/gist_id}","starred_url":"https://api.github.com/users/radarhere/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/radarhere/subscriptions","organizations_url":"https://api.github.com/users/radarhere/orgs","repos_url":"https://api.github.com/users/radarhere/repos","events_url":"https://api.github.com/users/radarhere/events{/privacy}","received_events_url":"https://api.github.com/users/radarhere/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-09-01T09:47:38Z","label":{"name":"GIF","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244336796","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-244336796","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":244336796,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDMzNjc5Ng==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-02T10:08:38Z","updated_at":"2016-09-02T10:08:38Z","body":"Ok, so there's something different about that gif (and consistent with what you're seeing) -- I'm seeing this in valgrind:\n\n```\n--------------------------------------------------------------------------------\nCommand:            python test_large_gif.py\nMassif arguments:   (none)\nms_print arguments: massif.out.23666\n--------------------------------------------------------------------------------\n\n\n    GB\n1.311^                                                                     #  \n     |        @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#  \n     |        @                                                            #  \n     |        @                                                            #  \n     |        @                                                            #  \n     |       :@                                                            #::\n     |       :@                                                            #::\n     |       :@                                                            #::\n     |       :@                                                            #::\n     |       :@                                                            #::\n     |      ::@                                                            #::\n     |      ::@                                                            #::\n     |      ::@                                                            #::\n     |      ::@                                                            #::\n     |      ::@                                                            #::\n     |      ::@                                                            #::\n     |      ::@                                                            #::\n     |      ::@                                                            #::\n     |     @::@                                                            #::\n     |   @@@::@                                                            #::\n   0 +----------------------------------------------------------------------->Gi\n     0                                                                   29.88\n\n```\n\nLooking at the memory allocations, it's certainly different. At the top level, there's:\n\n```\n->64.28% (904,546,272B) 0x572C27: ??? (in /home/erics/vpy27/bin/python)\n->21.26% (299,168,952B) 0x4FA112: PyList_New (in /home/erics/vpy27/bin/python)\n->10.63% (149,573,976B) 0x8020C0F: ImagingNewArray (Storage.c:315)\n```\n\n (and that one is two copies and two new allocations): \n\nFor reference, the allocations for my previous one looked more like this, which is 93% image storage including two new allocations and two copies.:\n\n```\n->93.92% (147,000,000B) 0x8020C0F: ImagingNewArray (Storage.c:315)\n```\n\nAs to why it's happening...  I still suspect quantization. I'm wondering if there's a different code path when the palette is full vs when the palette is empty. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244336796/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244340570","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-244340570","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":244340570,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDM0MDU3MA==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-02T10:28:48Z","updated_at":"2016-09-02T10:40:08Z","body":"Right. This is suboptimal.   Remapping the image palette in python by looping over every byte of the image, using a range, when the number of pixels is large. \n\nhttps://github.com/python-pillow/Pillow/blob/master/PIL/GifImagePlugin.py#L591\n\n```\n    if _get_optimize(im, info):\n        used_palette_colors = _get_used_palette_colors(im)\n\n        # create the new palette if not every color is used\n        if len(used_palette_colors) < 256:\n            palette_bytes = b\"\"\n            new_positions = {}\n\n            i = 0\n            # pick only the used colors from the palette\n            for oldPosition in used_palette_colors:\n                palette_bytes += source_palette[oldPosition*3:oldPosition*3+3]\n                new_positions[oldPosition] = i\n                i += 1\n\n            # replace the palette color id of all pixel with the new id\n            image_bytes = bytearray(im.tobytes())\n            for i in range(len(image_bytes)):\n                image_bytes[i] = new_positions[image_bytes[i]]\n            im.frombytes(bytes(image_bytes))\n            new_palette_bytes = (palette_bytes +\n                                 (768 - len(palette_bytes)) * b'\\x00')\n            im.putpalette(new_palette_bytes)\n            im.palette = ImagePalette.ImagePalette(\"RGB\",\n                                                   palette=palette_bytes,\n                                                   size=len(palette_bytes))\n```\n\nIt dates to this commit, to fix #211 https://github.com/python-pillow/Pillow/commit/a466b3e09982ebcf5aee2cbe957ce90e6ddfd0ae\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244340570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":776391858,"node_id":"MDEyOkxhYmVsZWRFdmVudDc3NjM5MTg1OA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/776391858","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-09-02T10:29:22Z","label":{"name":"Bug","color":"fc2929"},"performed_via_github_app":null},{"id":776391859,"node_id":"MDEyOkxhYmVsZWRFdmVudDc3NjM5MTg1OQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/776391859","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-09-02T10:29:22Z","label":{"name":"Palette Issue","color":"5319e7"},"performed_via_github_app":null},{"id":776392801,"node_id":"MDEyOkxhYmVsZWRFdmVudDc3NjM5MjgwMQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/776392801","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-09-02T10:30:30Z","label":{"name":"Performance","color":"b60205"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244342162","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-244342162","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":244342162,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDM0MjE2Mg==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-02T10:37:36Z","updated_at":"2016-09-02T10:40:00Z","body":"So, for a workaround, when saving a largish gif:\n\n```\nim.save('foo.gif', optimize=False)\n```\n\nFuture possible fixes:\n1) Don't optimize palettes for anything bigger than N mpix.\n2) Don't optimize palettes if the palette doesn't change\n3) Don't do it in python by looping over every pixel.\n4) There should be a palette mapping function in the c layer of the palette code.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244342162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244347935","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-244347935","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":244347935,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NDM0NzkzNQ==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-02T11:10:32Z","updated_at":"2016-09-02T11:10:32Z","body":"Also, FWIW, that image is probably best off as a PNG. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/244347935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/245152447","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-245152447","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":245152447,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTE1MjQ0Nw==","user":{"login":"tlelson","id":4349566,"node_id":"MDQ6VXNlcjQzNDk1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/4349566?v=4","gravatar_id":"","url":"https://api.github.com/users/tlelson","html_url":"https://github.com/tlelson","followers_url":"https://api.github.com/users/tlelson/followers","following_url":"https://api.github.com/users/tlelson/following{/other_user}","gists_url":"https://api.github.com/users/tlelson/gists{/gist_id}","starred_url":"https://api.github.com/users/tlelson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlelson/subscriptions","organizations_url":"https://api.github.com/users/tlelson/orgs","repos_url":"https://api.github.com/users/tlelson/repos","events_url":"https://api.github.com/users/tlelson/events{/privacy}","received_events_url":"https://api.github.com/users/tlelson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-07T01:58:20Z","updated_at":"2016-09-07T01:58:20Z","body":"Right. Wow! Thanks @wiredfool .\n\nExcuse my ignorance (and perhaps a link is better than an answer) but what makes PNG the best format in this case?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/245152447/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tlelson","id":4349566,"node_id":"MDQ6VXNlcjQzNDk1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/4349566?v=4","gravatar_id":"","url":"https://api.github.com/users/tlelson","html_url":"https://github.com/tlelson","followers_url":"https://api.github.com/users/tlelson/followers","following_url":"https://api.github.com/users/tlelson/following{/other_user}","gists_url":"https://api.github.com/users/tlelson/gists{/gist_id}","starred_url":"https://api.github.com/users/tlelson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tlelson/subscriptions","organizations_url":"https://api.github.com/users/tlelson/orgs","repos_url":"https://api.github.com/users/tlelson/repos","events_url":"https://api.github.com/users/tlelson/events{/privacy}","received_events_url":"https://api.github.com/users/tlelson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":780290142,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NzgwMjkwMTQy","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/780290142","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-09-07T01:58:20Z","performed_via_github_app":null},{"id":780290143,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDc4MDI5MDE0Mw==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/780290143","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-09-07T01:58:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/245195114","html_url":"https://github.com/python-pillow/Pillow/issues/2093#issuecomment-245195114","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2093","id":245195114,"node_id":"MDEyOklzc3VlQ29tbWVudDI0NTE5NTExNA==","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-07T07:13:14Z","updated_at":"2016-09-07T07:13:14Z","body":"Roughly, if you've got continuous tone, like a photograph, JPEG is your best bet. There's lossy compression that is tripped up with high contrast edges, like text.\n\nIf have images which aren't continuous, PNG is generally the best choice. It can do full color or palette images, (though, lossless compression of photos is a lot larger than JPEG's lossy) and it handles most sorts of transparency. Its compression is basically gzip.\n\nGIF predates both of them, and is a 8 bit (or less) palette image.  It's got 1 bit of transparency. I'd say the biggest use of GIF these days is for multiframe images. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/245195114/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":798576260,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDc5ODU3NjI2MA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/798576260","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2016-09-22T09:16:49Z","milestone":{"title":"3.4.0"},"performed_via_github_app":null},{"id":798576261,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDc5ODU3NjI2MQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/798576261","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2016-09-22T09:16:49Z","milestone":{"title":"3.4.0"},"performed_via_github_app":null},{"id":802979278,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDgwMjk3OTI3OA==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/802979278","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f50131d0a9c40094342a318355903d419fae456e","commit_url":"https://api.github.com/repos/wiredfool/Pillow/commits/f50131d0a9c40094342a318355903d419fae456e","created_at":"2016-09-26T21:45:11Z","performed_via_github_app":null},{"actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-09-26T21:50:42Z","updated_at":"2016-09-26T21:50:42Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/2133","repository_url":"https://api.github.com/repos/python-pillow/Pillow","labels_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2133/labels{/name}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2133/comments","events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2133/events","html_url":"https://github.com/python-pillow/Pillow/pull/2133","id":179346466,"node_id":"MDExOlB1bGxSZXF1ZXN0ODY4MjU5Mjg=","number":2133,"title":"Speed up GIF save optimization step","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":68368909,"node_id":"MDU6TGFiZWw2ODM2ODkwOQ==","url":"https://api.github.com/repos/python-pillow/Pillow/labels/Ready%20For%20Merge","name":"Ready For Merge","color":"009800","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/python-pillow/Pillow/milestones/19","html_url":"https://github.com/python-pillow/Pillow/milestone/19","labels_url":"https://api.github.com/repos/python-pillow/Pillow/milestones/19/labels","id":1645348,"node_id":"MDk6TWlsZXN0b25lMTY0NTM0OA==","number":19,"title":"3.4.0","description":"","creator":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":17,"state":"closed","created_at":"2016-03-15T11:22:46Z","updated_at":"2017-01-05T23:42:43Z","due_on":"2016-10-01T07:00:00Z","closed_at":"2016-10-04T08:18:41Z"},"comments":1,"created_at":"2016-09-26T21:50:42Z","updated_at":"2017-10-02T13:25:21Z","closed_at":"2016-10-03T13:03:12Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":5171600,"node_id":"MDEwOlJlcG9zaXRvcnk1MTcxNjAw","name":"Pillow","full_name":"python-pillow/Pillow","private":false,"owner":{"login":"python-pillow","id":2036701,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwMzY3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2036701?v=4","gravatar_id":"","url":"https://api.github.com/users/python-pillow","html_url":"https://github.com/python-pillow","followers_url":"https://api.github.com/users/python-pillow/followers","following_url":"https://api.github.com/users/python-pillow/following{/other_user}","gists_url":"https://api.github.com/users/python-pillow/gists{/gist_id}","starred_url":"https://api.github.com/users/python-pillow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python-pillow/subscriptions","organizations_url":"https://api.github.com/users/python-pillow/orgs","repos_url":"https://api.github.com/users/python-pillow/repos","events_url":"https://api.github.com/users/python-pillow/events{/privacy}","received_events_url":"https://api.github.com/users/python-pillow/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python-pillow/Pillow","description":"Python Imaging Library (Fork)","fork":false,"url":"https://api.github.com/repos/python-pillow/Pillow","forks_url":"https://api.github.com/repos/python-pillow/Pillow/forks","keys_url":"https://api.github.com/repos/python-pillow/Pillow/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python-pillow/Pillow/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python-pillow/Pillow/teams","hooks_url":"https://api.github.com/repos/python-pillow/Pillow/hooks","issue_events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/events{/number}","events_url":"https://api.github.com/repos/python-pillow/Pillow/events","assignees_url":"https://api.github.com/repos/python-pillow/Pillow/assignees{/user}","branches_url":"https://api.github.com/repos/python-pillow/Pillow/branches{/branch}","tags_url":"https://api.github.com/repos/python-pillow/Pillow/tags","blobs_url":"https://api.github.com/repos/python-pillow/Pillow/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python-pillow/Pillow/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python-pillow/Pillow/git/refs{/sha}","trees_url":"https://api.github.com/repos/python-pillow/Pillow/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python-pillow/Pillow/statuses/{sha}","languages_url":"https://api.github.com/repos/python-pillow/Pillow/languages","stargazers_url":"https://api.github.com/repos/python-pillow/Pillow/stargazers","contributors_url":"https://api.github.com/repos/python-pillow/Pillow/contributors","subscribers_url":"https://api.github.com/repos/python-pillow/Pillow/subscribers","subscription_url":"https://api.github.com/repos/python-pillow/Pillow/subscription","commits_url":"https://api.github.com/repos/python-pillow/Pillow/commits{/sha}","git_commits_url":"https://api.github.com/repos/python-pillow/Pillow/git/commits{/sha}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/comments{/number}","issue_comment_url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments{/number}","contents_url":"https://api.github.com/repos/python-pillow/Pillow/contents/{+path}","compare_url":"https://api.github.com/repos/python-pillow/Pillow/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python-pillow/Pillow/merges","archive_url":"https://api.github.com/repos/python-pillow/Pillow/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python-pillow/Pillow/downloads","issues_url":"https://api.github.com/repos/python-pillow/Pillow/issues{/number}","pulls_url":"https://api.github.com/repos/python-pillow/Pillow/pulls{/number}","milestones_url":"https://api.github.com/repos/python-pillow/Pillow/milestones{/number}","notifications_url":"https://api.github.com/repos/python-pillow/Pillow/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python-pillow/Pillow/labels{/name}","releases_url":"https://api.github.com/repos/python-pillow/Pillow/releases{/id}","deployments_url":"https://api.github.com/repos/python-pillow/Pillow/deployments","created_at":"2012-07-24T21:38:39Z","updated_at":"2025-11-09T17:08:02Z","pushed_at":"2025-11-05T17:24:43Z","git_url":"git://github.com/python-pillow/Pillow.git","ssh_url":"git@github.com:python-pillow/Pillow.git","clone_url":"https://github.com/python-pillow/Pillow.git","svn_url":"https://github.com/python-pillow/Pillow","homepage":"https://python-pillow.github.io","size":209075,"stargazers_count":13177,"watchers_count":13177,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":117,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","cross-platform","image","image-processing","pil","pillow","python","python-3"],"visibility":"public","forks":2359,"open_issues":117,"watchers":13177,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python-pillow/Pillow/pulls/2133","html_url":"https://github.com/python-pillow/Pillow/pull/2133","diff_url":"https://github.com/python-pillow/Pillow/pull/2133.diff","patch_url":"https://github.com/python-pillow/Pillow/pull/2133.patch","merged_at":"2016-10-03T13:03:12Z"},"body":"Fixes #2093 .\n\nChanges proposed in this pull request:\n- Only optimize a gif's palette if: \n  - We have to (L mode)\n  - It's got less than 128 colors (otherwise, we're just padding with zeros anyway)\n  - It changed\n  - The image is smaller than 1/4 mpix. (otherwise, the potential savings is lost in the noise)\n- Do it in C, using the existing conversion machinery, and some monkeying with palettes and convert. \n","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/2133/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python-pillow/Pillow/issues/2133/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":802987391,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDgwMjk4NzM5MQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/802987391","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a51d3bcdba4c0893df0f8c934c96cf5be1639568","commit_url":"https://api.github.com/repos/wiredfool/Pillow/commits/a51d3bcdba4c0893df0f8c934c96cf5be1639568","created_at":"2016-09-26T21:52:08Z","performed_via_github_app":null},{"id":810231562,"node_id":"MDExOkNsb3NlZEV2ZW50ODEwMjMxNTYy","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/810231562","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2016-10-03T13:03:12Z","state_reason":null,"performed_via_github_app":null},{"id":891478611,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDg5MTQ3ODYxMQ==","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/891478611","actor":{"login":"Fahad-Alsaidi","id":1632566,"node_id":"MDQ6VXNlcjE2MzI1NjY=","avatar_url":"https://avatars.githubusercontent.com/u/1632566?v=4","gravatar_id":"","url":"https://api.github.com/users/Fahad-Alsaidi","html_url":"https://github.com/Fahad-Alsaidi","followers_url":"https://api.github.com/users/Fahad-Alsaidi/followers","following_url":"https://api.github.com/users/Fahad-Alsaidi/following{/other_user}","gists_url":"https://api.github.com/users/Fahad-Alsaidi/gists{/gist_id}","starred_url":"https://api.github.com/users/Fahad-Alsaidi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Fahad-Alsaidi/subscriptions","organizations_url":"https://api.github.com/users/Fahad-Alsaidi/orgs","repos_url":"https://api.github.com/users/Fahad-Alsaidi/repos","events_url":"https://api.github.com/users/Fahad-Alsaidi/events{/privacy}","received_events_url":"https://api.github.com/users/Fahad-Alsaidi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"a823ed832b0d116633c7d8d5d0e502b7350c582c","commit_url":"https://api.github.com/repos/Fahad-Alsaidi/Pillow/commits/a823ed832b0d116633c7d8d5d0e502b7350c582c","created_at":"2016-12-13T05:08:43Z","performed_via_github_app":null}]