[{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15202185","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15202185","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15202185,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjAyMTg1","user":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-20T20:44:16Z","updated_at":"2013-03-20T20:44:16Z","body":"Do you have a preference? And/or do you want to send a pull request? @cgohlke @wiredfool any thoughts?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15202185/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aclark4life","id":72164,"node_id":"MDQ6VXNlcjcyMTY0","avatar_url":"https://avatars.githubusercontent.com/u/72164?v=4","gravatar_id":"","url":"https://api.github.com/users/aclark4life","html_url":"https://github.com/aclark4life","followers_url":"https://api.github.com/users/aclark4life/followers","following_url":"https://api.github.com/users/aclark4life/following{/other_user}","gists_url":"https://api.github.com/users/aclark4life/gists{/gist_id}","starred_url":"https://api.github.com/users/aclark4life/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aclark4life/subscriptions","organizations_url":"https://api.github.com/users/aclark4life/orgs","repos_url":"https://api.github.com/users/aclark4life/repos","events_url":"https://api.github.com/users/aclark4life/events{/privacy}","received_events_url":"https://api.github.com/users/aclark4life/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":42339806,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIzMzk4MDY=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/42339806","actor":{"login":"cgohlke","id":483428,"node_id":"MDQ6VXNlcjQ4MzQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/483428?v=4","gravatar_id":"","url":"https://api.github.com/users/cgohlke","html_url":"https://github.com/cgohlke","followers_url":"https://api.github.com/users/cgohlke/followers","following_url":"https://api.github.com/users/cgohlke/following{/other_user}","gists_url":"https://api.github.com/users/cgohlke/gists{/gist_id}","starred_url":"https://api.github.com/users/cgohlke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgohlke/subscriptions","organizations_url":"https://api.github.com/users/cgohlke/orgs","repos_url":"https://api.github.com/users/cgohlke/repos","events_url":"https://api.github.com/users/cgohlke/events{/privacy}","received_events_url":"https://api.github.com/users/cgohlke/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-03-20T20:44:16Z","performed_via_github_app":null},{"id":42339807,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMzM5ODA3","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/42339807","actor":{"login":"cgohlke","id":483428,"node_id":"MDQ6VXNlcjQ4MzQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/483428?v=4","gravatar_id":"","url":"https://api.github.com/users/cgohlke","html_url":"https://github.com/cgohlke","followers_url":"https://api.github.com/users/cgohlke/followers","following_url":"https://api.github.com/users/cgohlke/following{/other_user}","gists_url":"https://api.github.com/users/cgohlke/gists{/gist_id}","starred_url":"https://api.github.com/users/cgohlke/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cgohlke/subscriptions","organizations_url":"https://api.github.com/users/cgohlke/orgs","repos_url":"https://api.github.com/users/cgohlke/repos","events_url":"https://api.github.com/users/cgohlke/events{/privacy}","received_events_url":"https://api.github.com/users/cgohlke/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-03-20T20:44:16Z","performed_via_github_app":null},{"id":42339808,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDIzMzk4MDg=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/42339808","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-03-20T20:44:16Z","performed_via_github_app":null},{"id":42339809,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyMzM5ODA5","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/42339809","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-03-20T20:44:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15203630","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15203630","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15203630,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjAzNjMw","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-20T21:09:22Z","updated_at":"2013-03-20T21:32:22Z","body":"I'd really like to fix a 14 year old bug. (Sounds like a fine whiskey actually. older than some decent ones.) \n\nI'd have to dig to see what MAXBLOCK affects. I'd be especially wary if maxblock ends up affecting buffer sizes that get filled and passed to the lib\\* decoders. \n\nGood (or at least some) test coverage of this would be nice, and go a long way toward mitigating any bad effects.\n\nSo, it looks like there's a comment in RawEncode.c\n\n``` c\n /* FIXME: This encoder will fail if the buffer is not large enough to\n * hold one full line of data.  There's a workaround for this problem\n * in ImageFile.py, but it should be solved here instead.\n*/\n```\n\nand in ImageFile.py\n\n``` python\n    # FIXME: make MAXBLOCK a configuration parameter\n    bufsize = max(MAXBLOCK, im.size[0] * 4) # see RawEncode.c\n```\n\nMy Wild Ass Guess is that when libjpeg is optimizing, it passes back the whole image in one big chunk. Otherwise, worst case it can do scanline by scanline, and the bufsize guarantees that it's big enough for one scan line. \n\nIf we bump up the MAXBLOCK, or the bufsize here, we're going to allocate that much memory each time we do an encode. The brute force method would be size[0]_size[1] \\* 4, but that's going to be suboptimal for large images. max(size)_*2 would be less than that, but it may not actually fix all the cases. \n\nI'd be willing to dig more, assuming I can get a reproducable test case.  \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15203630/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15210207","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15210207","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15210207,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjEwMjA3","user":{"login":"acdha","id":46565,"node_id":"MDQ6VXNlcjQ2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/46565?v=4","gravatar_id":"","url":"https://api.github.com/users/acdha","html_url":"https://github.com/acdha","followers_url":"https://api.github.com/users/acdha/followers","following_url":"https://api.github.com/users/acdha/following{/other_user}","gists_url":"https://api.github.com/users/acdha/gists{/gist_id}","starred_url":"https://api.github.com/users/acdha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acdha/subscriptions","organizations_url":"https://api.github.com/users/acdha/orgs","repos_url":"https://api.github.com/users/acdha/repos","events_url":"https://api.github.com/users/acdha/events{/privacy}","received_events_url":"https://api.github.com/users/acdha/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-20T23:19:17Z","updated_at":"2013-03-20T23:19:17Z","body":"Strong +1 on expanding tests. I strongly suspect your guess is correct and this could have ripple effects with a codebase this old and squirrelly.\n\nIf you want to reproduce it, here's a transcript:\n\n``` python\n\nPython 2.7.2 (default, Oct 11 2012, 20:14:37) \n[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> from PIL import Image, ImageFile\n>>> i = Image.new(\"RGB\", (4096, 4096), 0xff3333)\n>>> i.save(\"/dev/null\", format=\"JPEG\")\n>>> i.save(\"/dev/null\", format=\"JPEG\", optimize=True)\nSuspension not allowed here\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/Users/cadams/.virtualenvs/project/lib/python2.7/site-packages/PIL/Image.py\", line 1437, in save\n    save_handler(self, fp, filename)\n  File \"/Users/cadams/.virtualenvs/project/lib/python2.7/site-packages/PIL/JpegImagePlugin.py\", line 471, in _save\n    ImageFile._save(im, fp, [(\"jpeg\", (0,0)+im.size, 0, rawmode)])\n  File \"/Users/cadams/.virtualenvs/project/lib/python2.7/site-packages/PIL/ImageFile.py\", line 501, in _save\n    raise IOError(\"encoder error %d when writing image file\" % s)\nIOError: encoder error -2 when writing image file\n>>> ImageFile.MAXBLOCK = max(i.size) ** 2\n>>> i.save(\"/dev/null\", format=\"JPEG\", optimize=True)\n>>>\n```\n\nIdeally, this feels like something which should just work. Perhaps something as simple as having `save()` check the format and optimize flags and increase MAXBLOCK for that operation along with documenting that this can increase RAM consumption? The part which feels dirtiest is changing this by setting a variable on a class â€“ simply moving the change closer to the function call seems like a good idea.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15210207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"acdha","id":46565,"node_id":"MDQ6VXNlcjQ2NTY1","avatar_url":"https://avatars.githubusercontent.com/u/46565?v=4","gravatar_id":"","url":"https://api.github.com/users/acdha","html_url":"https://github.com/acdha","followers_url":"https://api.github.com/users/acdha/followers","following_url":"https://api.github.com/users/acdha/following{/other_user}","gists_url":"https://api.github.com/users/acdha/gists{/gist_id}","starred_url":"https://api.github.com/users/acdha/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acdha/subscriptions","organizations_url":"https://api.github.com/users/acdha/orgs","repos_url":"https://api.github.com/users/acdha/repos","events_url":"https://api.github.com/users/acdha/events{/privacy}","received_events_url":"https://api.github.com/users/acdha/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15218922","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15218922","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15218922,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MjE4OTIy","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-21T04:23:08Z","updated_at":"2013-03-21T04:26:40Z","body":"So, having poked around a bit, I can confirm a few things. \n1. It does appear that the jpeg code is writing out optimized images in one push to the buffer. \n2. The \"Suspension not allowed here\" message basically means that it tried to write, and there wasn't enough space. \n3. That really boring image takes 8k/megapixel to save, one from my camera has a different constant there. In each case, MAXBLOCK had to be > than the final image file size. \n4. MAXBLOCK appears to be allocated for _every_ image encode, so just randomly upping it is a bad idea. \n5. Passing in an open file instead of a filename doesn't change anything, because it's just doing the shuffling to and from the buffer in c instead of python, not pushing the fp all the way down into the library. (which I did with the tiff lib, in sort of an aggressive manner. )\n6. It's probably not threadsafe to just change maxblock for the one operation, since it's a module level global variable.\n7. I'm still thinking on this, but I think pushing the bufsize into an optional parameter on _save, initialized to MAXBLOCK, and then figuring out some sort of guess for the final jpeg size would be an appropriate fix. \n\n``` python\nfrom PIL import Image, ImageFile\n\ndef search(i):\n  ImageFile.MAXBLOCK = 65536\n  while True:\n    try:\n      i.save(\"/tmp/jpg\", format=\"JPEG\", optimize=True)\n      print \"Save succeded at MAXBLOCK=%d\" % ImageFile.MAXBLOCK\n      break\n    except: \n      print \"Save failed at MAXBLOCK=%d\" % ImageFile.MAXBLOCK\n      ImageFile.MAXBLOCK *= 2\n\ndef im(size=(1024,1024)):\n  i = Image.new(\"RGB\", size, 0xff3333)\n  return i\n\n\nfor x in [128,512,1024,2048,4096,8192, 16384]:\n  print \"%d wide\" %x\n  search(im((x,2048)))\n\nfor y in [128,512,1024,2048,4096,8192, 16384]:\n  print \"%d tall\" %y\n  search(im((2048,y)))\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15218922/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15332128","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15332128","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15332128,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzMyMTI4","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-23T05:28:33Z","updated_at":"2013-03-23T05:28:33Z","body":"It looks like the two plugins need special handling with maxblock are the JpegImagePlugin and the RawEncode.c. Unfortunately, the RawEncodes go straight into the save instead of through an image plugin, so there's no place to hang the hook to up the buffer size if necessary. So, there's still a bit of a special case in there, but at least the JpegImagePlugin can override as necessary. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15332128/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-23T05:29:48Z","updated_at":"2013-03-23T05:29:48Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/158","repository_url":"https://api.github.com/repos/python-pillow/Pillow","labels_url":"https://api.github.com/repos/python-pillow/Pillow/issues/158/labels{/name}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/issues/158/comments","events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/158/events","html_url":"https://github.com/python-pillow/Pillow/pull/158","id":12350068,"node_id":"MDExOlB1bGxSZXF1ZXN0NDc3NjU4MQ==","number":158,"title":"JpegImagePlugin sets bufsize for optimized images","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2013-03-23T05:29:48Z","updated_at":"2014-06-14T14:26:38Z","closed_at":"2013-03-23T15:45:49Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":5171600,"node_id":"MDEwOlJlcG9zaXRvcnk1MTcxNjAw","name":"Pillow","full_name":"python-pillow/Pillow","private":false,"owner":{"login":"python-pillow","id":2036701,"node_id":"MDEyOk9yZ2FuaXphdGlvbjIwMzY3MDE=","avatar_url":"https://avatars.githubusercontent.com/u/2036701?v=4","gravatar_id":"","url":"https://api.github.com/users/python-pillow","html_url":"https://github.com/python-pillow","followers_url":"https://api.github.com/users/python-pillow/followers","following_url":"https://api.github.com/users/python-pillow/following{/other_user}","gists_url":"https://api.github.com/users/python-pillow/gists{/gist_id}","starred_url":"https://api.github.com/users/python-pillow/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/python-pillow/subscriptions","organizations_url":"https://api.github.com/users/python-pillow/orgs","repos_url":"https://api.github.com/users/python-pillow/repos","events_url":"https://api.github.com/users/python-pillow/events{/privacy}","received_events_url":"https://api.github.com/users/python-pillow/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/python-pillow/Pillow","description":"Python Imaging Library (Fork)","fork":false,"url":"https://api.github.com/repos/python-pillow/Pillow","forks_url":"https://api.github.com/repos/python-pillow/Pillow/forks","keys_url":"https://api.github.com/repos/python-pillow/Pillow/keys{/key_id}","collaborators_url":"https://api.github.com/repos/python-pillow/Pillow/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/python-pillow/Pillow/teams","hooks_url":"https://api.github.com/repos/python-pillow/Pillow/hooks","issue_events_url":"https://api.github.com/repos/python-pillow/Pillow/issues/events{/number}","events_url":"https://api.github.com/repos/python-pillow/Pillow/events","assignees_url":"https://api.github.com/repos/python-pillow/Pillow/assignees{/user}","branches_url":"https://api.github.com/repos/python-pillow/Pillow/branches{/branch}","tags_url":"https://api.github.com/repos/python-pillow/Pillow/tags","blobs_url":"https://api.github.com/repos/python-pillow/Pillow/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/python-pillow/Pillow/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/python-pillow/Pillow/git/refs{/sha}","trees_url":"https://api.github.com/repos/python-pillow/Pillow/git/trees{/sha}","statuses_url":"https://api.github.com/repos/python-pillow/Pillow/statuses/{sha}","languages_url":"https://api.github.com/repos/python-pillow/Pillow/languages","stargazers_url":"https://api.github.com/repos/python-pillow/Pillow/stargazers","contributors_url":"https://api.github.com/repos/python-pillow/Pillow/contributors","subscribers_url":"https://api.github.com/repos/python-pillow/Pillow/subscribers","subscription_url":"https://api.github.com/repos/python-pillow/Pillow/subscription","commits_url":"https://api.github.com/repos/python-pillow/Pillow/commits{/sha}","git_commits_url":"https://api.github.com/repos/python-pillow/Pillow/git/commits{/sha}","comments_url":"https://api.github.com/repos/python-pillow/Pillow/comments{/number}","issue_comment_url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments{/number}","contents_url":"https://api.github.com/repos/python-pillow/Pillow/contents/{+path}","compare_url":"https://api.github.com/repos/python-pillow/Pillow/compare/{base}...{head}","merges_url":"https://api.github.com/repos/python-pillow/Pillow/merges","archive_url":"https://api.github.com/repos/python-pillow/Pillow/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/python-pillow/Pillow/downloads","issues_url":"https://api.github.com/repos/python-pillow/Pillow/issues{/number}","pulls_url":"https://api.github.com/repos/python-pillow/Pillow/pulls{/number}","milestones_url":"https://api.github.com/repos/python-pillow/Pillow/milestones{/number}","notifications_url":"https://api.github.com/repos/python-pillow/Pillow/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/python-pillow/Pillow/labels{/name}","releases_url":"https://api.github.com/repos/python-pillow/Pillow/releases{/id}","deployments_url":"https://api.github.com/repos/python-pillow/Pillow/deployments","created_at":"2012-07-24T21:38:39Z","updated_at":"2025-11-09T17:08:02Z","pushed_at":"2025-11-05T17:24:43Z","git_url":"git://github.com/python-pillow/Pillow.git","ssh_url":"git@github.com:python-pillow/Pillow.git","clone_url":"https://github.com/python-pillow/Pillow.git","svn_url":"https://github.com/python-pillow/Pillow","homepage":"https://python-pillow.github.io","size":209075,"stargazers_count":13177,"watchers_count":13177,"language":"Python","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":true,"has_discussions":true,"forks_count":2359,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":117,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["c","cross-platform","image","image-processing","pil","pillow","python","python-3"],"visibility":"public","forks":2359,"open_issues":117,"watchers":13177,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/python-pillow/Pillow/pulls/158","html_url":"https://github.com/python-pillow/Pillow/pull/158","diff_url":"https://github.com/python-pillow/Pillow/pull/158.diff","patch_url":"https://github.com/python-pillow/Pillow/pull/158.patch","merged_at":"2013-03-23T15:45:49Z"},"body":"fix for #148\n","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/158/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python-pillow/Pillow/issues/158/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15343225","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15343225","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15343225,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzQzMjI1","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-23T19:31:31Z","updated_at":"2013-03-23T19:31:31Z","body":"The only problem I've had with maxblock so far was an image withh an exif header >64k.\nWill check the fix on monday,\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15343225/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15343652","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15343652","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15343652,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MzQzNjUy","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-03-23T19:57:35Z","updated_at":"2013-03-23T19:57:35Z","body":"This probably won't fix that case, as it's pretty specifically targeted at the optimized case. We might be able check the size of the chunks that we have and make sure MAXBLOCK is big enough to handle that. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15343652/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15970195","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15970195","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15970195,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTcwMTk1","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-05T17:45:04Z","updated_at":"2013-04-05T17:45:04Z","body":"@d-schmidt did you ever check the jpeg image plugin with a >64k exif size?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15970195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":44198191,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDQxOTgxOTE=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/44198191","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-04-05T17:45:04Z","performed_via_github_app":null},{"id":44198192,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ0MTk4MTky","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/44198192","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-04-05T17:45:04Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15975627","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15975627","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15975627,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTc1NjI3","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-05T19:26:07Z","updated_at":"2013-04-05T19:26:07Z","body":"What do you mean by \"check\"? We are using it, I'm increasing maxblock manually in the image converter. The converter is running 24/7.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15975627/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15984554","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15984554","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15984554,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTg0NTU0","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-05T22:37:31Z","updated_at":"2013-04-05T23:01:37Z","body":"It looks like it's actually pretty easy to put in a check for the exif size. I don't have an image to check for it, and looking for something lead me to this: https://en.wikipedia.org/wiki/Exif#Viewing_and_editing_Exif_data\n\n> Exif metadata are restricted in size to 64 kB in JPEG images because according to the specification this information must be contained within a single JPEG APP1 segment. Although the FlashPix extensions allow information to span multiple JPEG APP2 segments, these extensions are not commonly used. This has prompted some camera manufacturers to develop non-standard techniques for storing the large preview images used by some digital cameras for LCD review. These non-standard extensions are commonly lost if a user re-saves the image using image editor software, possibly rendering the image incompatible with the original camera that created it.\n\nAnyway, if you could test a4a856b we could get a fix merged. Or, rather 7200c40 which actually passes travis on py3.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15984554/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15985859","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-15985859","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":15985859,"node_id":"MDEyOklzc3VlQ29tbWVudDE1OTg1ODU5","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-05T23:17:13Z","updated_at":"2013-04-05T23:17:13Z","body":"Next week. Nikon seems to ignore the specification. Or it is a multiple segment spanning block, I don't know. But the raw binary exif block was above 65k on a lot of images.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/15985859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16043078","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-16043078","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":16043078,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDQzMDc4","user":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-08T10:27:15Z","updated_at":"2013-04-08T10:29:02Z","body":"Your fix does not work so far. The exif is smaller than the limit (-4 bytes) but it still crashes. It is working just fine if I add ImageFile.MAXBLOCK = 2**20 before saving.\n\n```\nSuspension not allowed here\nTraceback (most recent call last):\n  File \"converter.py3\", line 254, in shrinkImage\n    im.save(outFile, \"JPEG\", quality=quali, exif=orgInfo['exif'])\n  File \"e:\\programme\\Python32\\lib\\site-packages\\pillow-2.0.0-py3.2-win32.egg\\PIL\\Image.py\", line 1467, in save\n    save_handler(self, fp, filename)\n  File \"e:\\programme\\Python32\\lib\\site-packages\\pillow-2.0.0-py3.2-win32.egg\\PIL\\JpegImagePlugin.py\", line 568, in _save\n    ImageFile._save(im, fp, [(\"jpeg\", (0,0)+im.size, 0, rawmode)], bufsize)\n  File \"e:\\programme\\Python32\\lib\\site-packages\\pillow-2.0.0-py3.2-win32.egg\\PIL\\ImageFile.py\", line 476, in _save\n    raise IOError(\"encoder error %d when writing image file\" % s)\nIOError: encoder error -2 when writing image file\nencoder error -2 when writing image file\n```\n\n```\nanalyzation mode started\nloaded file:  e:\\temp\\testbilder_nikon_exif\\aimg9.jpg\nused parameters:  {'analyze': '', 'in': 'testbilder_nikon_exif\\\\aimg9.jpg'}\n\nsize width x height:  4288x2848\ninternal format:  JPEG\ncolor mode:  RGB\ncontains exif:  True\nexif length:  65532 bytes\ncontains icc profile:  False\ntransparency flag:  None\n\njpeg with exif found, trying jhead:\nFile name    : e:\\temp\\testbilder_nikon_exif\\aimg9.jpg\nFile size    : 942957 bytes\nFile date    : 2012:09:26 22:09:45\nCamera make  : NIKON CORPORATION\nCamera model : NIKON D90\nDate/Time    : 2012:08:21 00:19:35\nResolution   : 4288 x 2848\nFlash used   : Yes (auto, return light detected)\nFocal length : 38.0mm  (35mm equivalent: 57mm)\nExposure time: 0.017 s  (1/60)\nAperture     : f/5.0\nISO equiv.   : 800\nWhitebalance : Auto\nMetering Mode: pattern\nGPS Latitude : ? ?\nGPS Longitude: ? ?\n```\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16043078/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"d-schmidt","id":3226483,"node_id":"MDQ6VXNlcjMyMjY0ODM=","avatar_url":"https://avatars.githubusercontent.com/u/3226483?v=4","gravatar_id":"","url":"https://api.github.com/users/d-schmidt","html_url":"https://github.com/d-schmidt","followers_url":"https://api.github.com/users/d-schmidt/followers","following_url":"https://api.github.com/users/d-schmidt/following{/other_user}","gists_url":"https://api.github.com/users/d-schmidt/gists{/gist_id}","starred_url":"https://api.github.com/users/d-schmidt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d-schmidt/subscriptions","organizations_url":"https://api.github.com/users/d-schmidt/orgs","repos_url":"https://api.github.com/users/d-schmidt/repos","events_url":"https://api.github.com/users/d-schmidt/events{/privacy}","received_events_url":"https://api.github.com/users/d-schmidt/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16063212","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-16063212","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":16063212,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MDYzMjEy","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-08T16:56:19Z","updated_at":"2013-04-08T16:56:19Z","body":"4 bytes. (I'm guessing that those bytes are APP1.) So, they're in spec, and we're not handling it. I wonder if the JPEG lib needs to write all the metadata in one shot, or if it's just one block. More digging required, I guess.  I'll take a look and see what I can find in the libjpeg code. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16063212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16378099","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-16378099","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":16378099,"node_id":"MDEyOklzc3VlQ29tbWVudDE2Mzc4MDk5","user":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-15T10:44:38Z","updated_at":"2019-02-17T14:03:36Z","body":"The same problem. Even https://github.com/python-imaging/Pillow/issues/158 and https://github.com/python-imaging/Pillow/commit/7200c40 did not work for me - I had to delete condition at all:\r\n\r\n```python\r\nif \"optimize\" in info:\r\n    bufsize = im.size[0]*im.size[1]\r\n```\r\n\r\ntransformed into\r\n\r\n```python\r\nbufsize = im.size[0]*im.size[1]\r\n```\r\n\r\nI can provide any additional information\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16378099/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16393488","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-16393488","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":16393488,"node_id":"MDEyOklzc3VlQ29tbWVudDE2MzkzNDg4","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-15T15:52:32Z","updated_at":"2013-04-15T15:52:32Z","body":"@MrKesn Do you have a test image that you can send me?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16393488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":45237369,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDUyMzczNjk=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/45237369","actor":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-04-15T15:52:32Z","performed_via_github_app":null},{"id":45237370,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ1MjM3Mzcw","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/45237370","actor":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-04-15T15:52:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16408937","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-16408937","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":16408937,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDA4OTM3","user":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-15T20:19:26Z","updated_at":"2013-04-15T20:19:26Z","body":"@wiredfool No problem!\nHere is my city: https://dl.dropboxusercontent.com/u/3471307/a1838ba836207eb8194535df1b21241c.jpg\nHere are my cats: https://dl.dropboxusercontent.com/u/3471307/fork.jpg\nThey are from different sources but both of them fail as usual with \n\n```\nException Type: IOError\nException Value:    \nencoder error -2 when writing image file\nException Location: local/lib/python2.7/site-packages/PIL/ImageFile.py in _save, line 466\n```\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16408937/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":45279114,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDUyNzkxMTQ=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/45279114","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-04-15T20:19:26Z","performed_via_github_app":null},{"id":45279115,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ1Mjc5MTE1","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/45279115","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-04-15T20:19:26Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16417294","html_url":"https://github.com/python-pillow/Pillow/issues/148#issuecomment-16417294","issue_url":"https://api.github.com/repos/python-pillow/Pillow/issues/148","id":16417294,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NDE3Mjk0","user":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-04-15T23:16:44Z","updated_at":"2013-04-15T23:16:44Z","body":"@MrKesn I've opened and saved those images with Pillow, and it works for me. Can you narrow it down to a small test case where it fails with the default MAXBLOCK setting?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/python-pillow/Pillow/issues/comments/16417294/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wiredfool","id":19792,"node_id":"MDQ6VXNlcjE5Nzky","avatar_url":"https://avatars.githubusercontent.com/u/19792?v=4","gravatar_id":"","url":"https://api.github.com/users/wiredfool","html_url":"https://github.com/wiredfool","followers_url":"https://api.github.com/users/wiredfool/followers","following_url":"https://api.github.com/users/wiredfool/following{/other_user}","gists_url":"https://api.github.com/users/wiredfool/gists{/gist_id}","starred_url":"https://api.github.com/users/wiredfool/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wiredfool/subscriptions","organizations_url":"https://api.github.com/users/wiredfool/orgs","repos_url":"https://api.github.com/users/wiredfool/repos","events_url":"https://api.github.com/users/wiredfool/events{/privacy}","received_events_url":"https://api.github.com/users/wiredfool/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":45299900,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDUyOTk5MDA=","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/45299900","actor":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2013-04-15T23:16:44Z","performed_via_github_app":null},{"id":45299901,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ1Mjk5OTAx","url":"https://api.github.com/repos/python-pillow/Pillow/issues/events/45299901","actor":{"login":"MrKesn","id":2951987,"node_id":"MDQ6VXNlcjI5NTE5ODc=","avatar_url":"https://avatars.githubusercontent.com/u/2951987?v=4","gravatar_id":"","url":"https://api.github.com/users/MrKesn","html_url":"https://github.com/MrKesn","followers_url":"https://api.github.com/users/MrKesn/followers","following_url":"https://api.github.com/users/MrKesn/following{/other_user}","gists_url":"https://api.github.com/users/MrKesn/gists{/gist_id}","starred_url":"https://api.github.com/users/MrKesn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrKesn/subscriptions","organizations_url":"https://api.github.com/users/MrKesn/orgs","repos_url":"https://api.github.com/users/MrKesn/repos","events_url":"https://api.github.com/users/MrKesn/events{/privacy}","received_events_url":"https://api.github.com/users/MrKesn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2013-04-15T23:16:44Z","performed_via_github_app":null}]