{"url":"https://api.github.com/repos/docker/cli/issues/1089","repository_url":"https://api.github.com/repos/docker/cli","labels_url":"https://api.github.com/repos/docker/cli/issues/1089/labels{/name}","comments_url":"https://api.github.com/repos/docker/cli/issues/1089/comments","events_url":"https://api.github.com/repos/docker/cli/issues/1089/events","html_url":"https://github.com/docker/cli/issues/1089","id":327151106,"node_id":"MDU6SXNzdWUzMjcxNTExMDY=","number":1089,"title":"docker build --quiet --stream produces strange output","user":{"login":"zkry","id":20138116,"node_id":"MDQ6VXNlcjIwMTM4MTE2","avatar_url":"https://avatars.githubusercontent.com/u/20138116?v=4","gravatar_id":"","url":"https://api.github.com/users/zkry","html_url":"https://github.com/zkry","followers_url":"https://api.github.com/users/zkry/followers","following_url":"https://api.github.com/users/zkry/following{/other_user}","gists_url":"https://api.github.com/users/zkry/gists{/gist_id}","starred_url":"https://api.github.com/users/zkry/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zkry/subscriptions","organizations_url":"https://api.github.com/users/zkry/orgs","repos_url":"https://api.github.com/users/zkry/repos","events_url":"https://api.github.com/users/zkry/events{/privacy}","received_events_url":"https://api.github.com/users/zkry/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":606728828,"node_id":"MDU6TGFiZWw2MDY3Mjg4Mjg=","url":"https://api.github.com/repos/docker/cli/labels/area/builder","name":"area/builder","color":"fef2c0","default":false,"description":null},{"id":618619888,"node_id":"MDU6TGFiZWw2MTg2MTk4ODg=","url":"https://api.github.com/repos/docker/cli/labels/platform/desktop","name":"platform/desktop","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-05-29T02:28:51Z","updated_at":"2018-05-29T10:43:27Z","closed_at":"2018-05-29T10:43:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Description**\r\nA bug was reported in the moby/moby repository concerning running `docker build --quiet --stream .` and getting strange output (https://github.com/moby/moby/issues/36812). After doing some investigation the error turned out to be on the docker/cli side. I'll provide the PR for it here.\r\n\r\n**Steps to reproduce the issue:**\r\n1. Run docker build --quiet --stream . in a directory with the following Dockerfile.\r\n```\r\nFROM alpine:latest\r\n```\r\n\r\n**Describe the results you received:**\r\n```\r\n$ docker build --quiet --stream .\r\n&{%!!(MISSING)s(chan error=0xc4200aa2a0) sha256:3fd9065eaf02feaf94d68376da52541925650b81698c53c6824d92ff63f98353\r\n %!!(MISSING)s(*bytes.Buffer=&{[] 0 [0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0] 0}) %!!(MISSING)s(chan struct {}=0xc4200aa300) {%!!(MISSING)s(int32=0) %!!(MISSING)s(uint32=0)}}\r\n```\r\n\r\n**Describe the results you expected:**\r\nsha256:3fd9065eaf02feaf94d68376da52541925650b81698c53c6824d92ff63f98353\r\n\r\n**Additional information you deem important (e.g. issue happens only occasionally):**\r\nSeems to happen consistently.\r\n\r\n**output of docker version:**\r\nClient:\r\n Version:      18.05.0-ce-rc1\r\n API version:  1.37\r\n Go version:   go1.9.5\r\n Git commit:   33f00ce\r\n Built:        Thu Apr 26 00:58:56 2018\r\n OS/Arch:      darwin/amd64\r\n Experimental: false\r\n Orchestrator: swarm\r\n\r\nServer:\r\n Engine:\r\n  Version:      18.05.0-ce-rc1\r\n  API version:  1.37 (minimum version 1.12)\r\n  Go version:   go1.10.1\r\n  Git commit:   33f00ce\r\n  Built:        Thu Apr 26 01:06:49 2018\r\n  OS/Arch:      linux/amd64\r\n  Experimental: true\r\n\r\n\r\n**Output of `docker info`:**\r\nContainers: 3\r\n Running: 0\r\n Paused: 0\r\n Stopped: 3\r\nImages: 15\r\nServer Version: 18.05.0-ce-rc1\r\nStorage Driver: overlay2\r\n Backing Filesystem: extfs\r\n Supports d_type: true\r\n Native Overlay Diff: true\r\nLogging Driver: json-file\r\nCgroup Driver: cgroupfs\r\nPlugins:\r\n Volume: local\r\n Network: bridge host ipvlan macvlan null overlay\r\n Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog\r\nSwarm: inactive\r\nRuntimes: runc\r\nDefault Runtime: runc\r\nInit Binary: docker-init\r\ncontainerd version: 773c489c9c1b21a6d78b5c538cd395416ec50f88\r\nrunc version: 4fc53a81fb7c994640722ac585fa9ca548971871\r\ninit version: 949e6fa\r\nSecurity Options:\r\n seccomp\r\n  Profile: default\r\nKernel Version: 4.9.87-linuxkit-aufs\r\nOperating System: Docker for Mac\r\nOSType: linux\r\nArchitecture: x86_64\r\nCPUs: 2\r\nTotal Memory: 1.952GiB\r\nName: linuxkit-025000000001\r\nID: SBGZ:YKOB:FW7O:O6IN:Z6TL:HFI3:ESUC:DHAL:XWZV:JBPT:FNMN:RDNT\r\nDocker Root Dir: /var/lib/docker\r\nDebug Mode (client): false\r\nDebug Mode (server): true\r\n File Descriptors: 22\r\n Goroutines: 41\r\n System Time: 2018-05-29T02:19:37.5743496Z\r\n EventsListeners: 2\r\nHTTP Proxy: gateway.docker.internal:3128\r\nHTTPS Proxy: gateway.docker.internal:3129\r\nRegistry: https://index.docker.io/v1/\r\nLabels:\r\nExperimental: true\r\nInsecure Registries:\r\n 127.0.0.0/8\r\nLive Restore Enabled: false\r\n","closed_by":{"login":"thaJeztah","id":1804568,"node_id":"MDQ6VXNlcjE4MDQ1Njg=","avatar_url":"https://avatars.githubusercontent.com/u/1804568?v=4","gravatar_id":"","url":"https://api.github.com/users/thaJeztah","html_url":"https://github.com/thaJeztah","followers_url":"https://api.github.com/users/thaJeztah/followers","following_url":"https://api.github.com/users/thaJeztah/following{/other_user}","gists_url":"https://api.github.com/users/thaJeztah/gists{/gist_id}","starred_url":"https://api.github.com/users/thaJeztah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thaJeztah/subscriptions","organizations_url":"https://api.github.com/users/thaJeztah/orgs","repos_url":"https://api.github.com/users/thaJeztah/repos","events_url":"https://api.github.com/users/thaJeztah/events{/privacy}","received_events_url":"https://api.github.com/users/thaJeztah/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/docker/cli/issues/1089/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/docker/cli/issues/1089/timeline","performed_via_github_app":null,"state_reason":"completed"}