<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:44:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DAEMON-131] Win64 build:   //DS// fails to delete registry keys</title>
                <link>https://issues.apache.org/jira/browse/DAEMON-131</link>
                <project id="12310468" key="DAEMON">Commons Daemon</project>
                    <description>&lt;p&gt;When creating and accessing the configuration registry keys, the tool uses CreateRegKeyEx with the KEY_WOW64_32KEY flag, telling windows &quot;Use the 32-bit hive instead of the 64-bit one&quot;.  Maybe this was done so that 64-bit daemons could use the configuration from 32-bit ones?  &lt;/p&gt;

&lt;p&gt;Anyway when it&apos;s time to go and delete the configuration from the registry it uses the ancient SHDeleteKey call, which tries to delete the key from the 64-bit hive, which fails, so the key is left behind.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Win64; I&apos;ve only seen it on AMD64, but presumably it would also happen on ia64.&lt;/p&gt;</environment>
        <key id="12442940">DAEMON-131</key>
            <summary>Win64 build:   //DS// fails to delete registry keys</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jmorris">Jesse Morris</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Dec 2009 01:30:37 +0000</created>
                <updated>Tue, 14 Nov 2017 14:38:57 +0000</updated>
                            <resolved>Tue, 14 Nov 2017 14:38:57 +0000</resolved>
                                                    <fixVersion>1.0.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12789071" author="jmorris" created="Fri, 11 Dec 2009 01:44:30 +0000"  >&lt;p&gt;The registry deletion was being done by SHDeleteKey which doesn&apos;t take the flags that let you specifically choose between the 64-bit hive or the 32-bit one.   This patch switches it over to use RegDeleteKey, which just takes whatever key you opened with RegOpenKeyEx.&lt;/p&gt;

&lt;p&gt;Tested on a couple versions of windows.  &lt;/p&gt;</comment>
                            <comment id="12789154" author="mturk@apache.org" created="Fri, 11 Dec 2009 07:22:08 +0000"  >&lt;p&gt;Thanks for the patch. I&apos;ll apply it but slightly modified because KREG_WOW6432 is not present for all compilers, so additional #ifdef will be required&lt;/p&gt;</comment>
                            <comment id="12789158" author="mturk@apache.org" created="Fri, 11 Dec 2009 07:37:44 +0000"  >&lt;p&gt;Commited. Will be part of 2.0.6 release and next Tomcat versions&lt;/p&gt;</comment>
                            <comment id="12789455" author="jmorris" created="Fri, 11 Dec 2009 18:53:36 +0000"  >&lt;p&gt;KREG_WOW6432 doesn&apos;t come from any standard header.  It&apos;s conditionally defined at the top of prunsrv.c.  The reason we need to use that flag for deletion is that KREG_WOW6432 was already specified for the creation and access of the key, presumably so that it can share settings between 32-bit and 64-bit versions of procrun.   Whether &lt;b&gt;that&lt;/b&gt; makes sense to actually do is another question, which depends largely on how people are using the tool.  I don&apos;t really have any insight into that.   &lt;/p&gt;

&lt;p&gt;If you were already seeing compilation problems on from it&apos;s macro expansion (KEY_WOW64_32KEY) then this is a fine time to fix them.  If it was compiling ok a few days ago, my patch shouldn&apos;t break it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12427669" name="procrun-win64-registry-cleanup.patch" size="5393" author="jmorris" created="Fri, 11 Dec 2009 01:44:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 50 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uyyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178805</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>